!function(){function e(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=a(e);if(t){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ZMrW:function(t,i,c){"use strict";c.r(i),c.d(i,"AdminModule",function(){return Xt});var a=c("tyNb"),s=c("PCNd"),u=c("fXoL"),d=c("PVj+"),b=c("sYmb"),m=c("ofXK"),f=c("6NWb");function p(e,t){if(1&e&&(u.Sb(0,"a",4),u.Sb(1,"div",5),u.Nb(2,"fa-icon",6),u.Rb(),u.Sb(3,"div",7),u.Lc(4),u.Rb(),u.Rb()),2&e){var n=t.$implicit,i=u.gc();u.Eb("d-none",!i.canView("admin-users")),u.nc("routerLink",n.link),u.zb(2),u.nc("icon",n.icon),u.zb(2),u.Nc(" ",n.label()," ")}}var v,g,h=((g=function(){function e(t,n){var i=this;o(this,e),this.workspace=t,this.translate=n,this.mainMenuItems=[{label:function(){return i.translate.instant("AdminUsers")},icon:"users",view:"admin-users",link:"../admin-users"},{label:function(){return i.translate.instant("IdentityServerUsers")},icon:"shield-alt",view:"identity-server-users",link:"../identity-server-users"}]}return l(e,[{key:"ngOnInit",value:function(){}},{key:"canView",value:function(e){return this.workspace.admin.canRead(e)}}]),e}()).\u0275fac=function(e){return new(e||g)(u.Mb(d.m),u.Mb(b.d))},g.\u0275cmp=u.Gb({type:g,selectors:[["t-admin-main-menu"]],decls:7,vars:4,consts:[[1,"container","py-4","px-5"],[1,"t-menu-section"],[1,"t-teal1"],["class","t-menu-item btn m-1",3,"d-none","routerLink",4,"ngFor","ngForOf"],[1,"t-menu-item","btn","m-1",3,"routerLink"],[1,"pt-4","pb-1","t-menu-item-icon"],[3,"icon"],[1,"px-2","t-menu-item-label"]],template:function(e,t){1&e&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Sb(2,"span"),u.Lc(3),u.hc(4,"translate"),u.Rb(),u.Rb(),u.Sb(5,"div",2),u.Jc(6,p,5,5,"a",3),u.Rb(),u.Rb()),2&e&&(u.zb(3),u.Mc(u.ic(4,2,"AdminConsole")),u.zb(3),u.nc("ngForOf",t.mainMenuItems))},directives:[m.k,a.g,f.a],pipes:[b.c],encapsulation:2}),g),w=((v=function(){function e(t){o(this,e),this.router=t}return l(e,[{key:"onHome",value:function(){this.router.navigate(["admin","console","main-menu"])}}]),e}()).\u0275fac=function(e){return new(e||v)(u.Mb(a.e))},v.\u0275cmp=u.Gb({type:v,selectors:[["t-admin-page-not-found"]],decls:11,vars:9,consts:[[1,"p-5"],[1,"text-danger"],[1,"text-muted"],[1,"mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(u.Sb(0,"div",0),u.Sb(1,"h2",1),u.Lc(2),u.hc(3,"translate"),u.Rb(),u.Sb(4,"p",2),u.Lc(5),u.hc(6,"translate"),u.Rb(),u.Sb(7,"div",3),u.Sb(8,"button",4),u.cc("click",function(){return t.onHome()}),u.Lc(9),u.hc(10,"translate"),u.Rb(),u.Rb(),u.Rb()),2&e&&(u.zb(2),u.Nc(" ",u.ic(3,3,"Error_PageNotFound")," "),u.zb(3),u.Mc(u.ic(6,5,"Error_PageNotFoundMessage")),u.zb(4),u.Mc(u.ic(10,7,"Home")))},pipes:[b.c],encapsulation:2}),v),y=c("XNiG"),S=c("LRne"),M=c("eIep"),A=c("vkgz"),I=c("JIr8"),k=c("WO2E"),R=c("k0Of"),E=c("AyGX"),N=c("1bxP"),C=c("KOvB"),z=c("eQPh"),D=c("rd7j"),L=c("0xbw"),U=c("o6Md"),P=c("1kSV"),O=c("OoQV"),_=c("AYjT"),x=c("2I7G"),T=c("3Pt+"),J=c("mrGz"),j=c("f3yp"),F=["myAccountModal"];function K(e,t){if(1&e){var n=u.Tb();u.Sb(0,"button",21),u.cc("click",function(){u.Dc(n);var e=u.gc();return e.onCollapse(),e.nav.onBack()}),u.Nb(1,"fa-icon",22),u.Rb()}if(2&e){var i=u.gc();u.nc("disabled",!i.nav.canBack),u.zb(1),u.nc("flip",i.flip)}}function V(e,t){if(1&e){var n=u.Tb();u.Sb(0,"button",21),u.cc("click",function(){u.Dc(n);var e=u.gc();return e.onCollapse(),e.nav.onForward()}),u.Nb(1,"fa-icon",23),u.Rb()}if(2&e){var i=u.gc();u.nc("disabled",!i.nav.canForward),u.zb(1),u.nc("flip",i.flip)}}function q(e,t){if(1&e){var n=u.Tb();u.Sb(0,"button",17),u.cc("click",function(){u.Dc(n);var e=u.gc().$implicit,t=u.gc();return t.onSetLanguage(e),t.onCollapse()}),u.Lc(1),u.Rb()}if(2&e){var i=u.gc().$implicit,r=u.gc();u.zb(1),u.Nc(" ",r.languageName(i)," ")}}function B(e,t){if(1&e&&(u.Qb(0),u.Jc(1,q,2,1,"button",24),u.Pb()),2&e){var n=t.$implicit,i=u.gc();u.zb(1),u.nc("ngIf",n!==i.currentLanguage)}}var H=function(){return{updateOn:"blur"}};function $(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",38),u.Sb(1,"t-form-group",39),u.Sb(2,"h2",40),u.Lc(3),u.Rb(),u.Rb(),u.Sb(4,"t-form-group",41),u.hc(5,"translate"),u.Sb(6,"t-text-editor",42),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc(2).myUser.Name=e}),u.Rb(),u.Rb(),u.Rb()}if(2&e){var i=u.gc(2);u.zb(3),u.Mc(i.myEmail),u.zb(1),u.nc("label",u.ic(5,5,"Name"))("serverErrors",null==i.myUser||null==i.myUser.serverErrors?null:i.myUser.serverErrors.Name),u.zb(2),u.nc("ngModel",i.myUser.Name)("ngModelOptions",u.qc(7,H))}}function G(e,t){if(1&e&&(u.Sb(0,"t-error-message"),u.Lc(1),u.Rb()),2&e){var n=u.gc(2);u.zb(1),u.Nc(" ",n.saveErrorMessage," ")}}function Q(e,t){if(1&e&&(u.Sb(0,"t-error-message"),u.Lc(1),u.Rb()),2&e){var n=u.gc(2);u.zb(1),u.Nc(" ",n.errorMessage," ")}}function W(e,t){1&e&&(u.Sb(0,"div",43),u.Nb(1,"t-spinner",44),u.Rb()),2&e&&(u.zb(1),u.nc("scale",2))}function Y(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",25),u.Sb(1,"h5",26),u.Lc(2),u.hc(3,"translate"),u.Rb(),u.Sb(4,"button",27),u.cc("click",function(){return t.$implicit.dismiss(!1)}),u.Sb(5,"span",28),u.Lc(6,"\xd7"),u.Rb(),u.Rb(),u.Rb(),u.Sb(7,"div",29),u.Jc(8,$,7,8,"div",30),u.Jc(9,G,2,1,"t-error-message",31),u.Jc(10,Q,2,1,"t-error-message",31),u.Jc(11,W,2,1,"div",32),u.Rb(),u.Sb(12,"div",33),u.Sb(13,"button",34),u.cc("click",function(){u.Dc(n);var e=t.$implicit;return u.gc().onSave(e)}),u.Nb(14,"fa-icon",35),u.Lc(15),u.hc(16,"translate"),u.Rb(),u.Sb(17,"button",36),u.cc("click",function(){return t.$implicit.close(!1)}),u.Nb(18,"fa-icon",37),u.Lc(19),u.hc(20,"translate"),u.Rb(),u.Rb()}if(2&e){var i=u.gc();u.zb(2),u.Nc(" ",u.ic(3,8,"MyAdminAccount")," "),u.zb(6),u.nc("ngIf",i.isMyUserLoaded),u.zb(1),u.nc("ngIf",i.isMyUserLoaded&&!!i.saveErrorMessage),u.zb(1),u.nc("ngIf",i.isMyUserError),u.zb(1),u.nc("ngIf",i.isMyUserLoading),u.zb(2),u.nc("disabled",!i.canSave),u.zb(2),u.Nc(" \xa0",u.ic(16,10,"Save")," "),u.zb(4),u.Nc(" \xa0",u.ic(20,12,"Cancel")," ")}}var X,Z=function(e){return{placeholder:e}},ee=((X=function(){function e(t,n,i,r,c,a,s,l,u){var d=this;o(this,e),this.workspace=t,this.nav=n,this.translate=i,this.progress=r,this.auth=c,this.storage=a,this.apiService=s,this.document=l,this.modalService=u,this.isCollapsed=!0,this.notifyDestruct$=new y.a,this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$),this.notifyFetch$=new y.a,this.notifyFetch$.pipe(Object(M.a)(function(){return d.doFetch()})).subscribe()}return l(e,[{key:"ngOnInit",value:function(){this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$)}},{key:"ngOnDestroy",value:function(){this.notifyDestruct$.next(),this._subscription&&this._subscription.unsubscribe()}},{key:"activeLanguages",get:function(){return this._activeLanguages||(this._activeLanguages=Object.keys(N.a)),this._activeLanguages}},{key:"languageName",value:function(e){return N.a[e]}},{key:"onSetLanguage",value:function(e){this.translate.use(e),this.storage.setItem("user_culture",e)}},{key:"currentLanguage",get:function(){return this.workspace.ws.culture||this.translate.currentLang||this.translate.defaultLang||"en"}},{key:"onToggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"onCollapse",value:function(){this.isCollapsed=!0}},{key:"settings",get:function(){return this.ws?this.ws.settings:null}},{key:"ws",get:function(){return this.workspace.admin}},{key:"userName",get:function(){return this.ws.userSettings.Name}},{key:"isRtl",get:function(){return this.workspace.ws.isRtl}},{key:"onMySystemAccount",value:function(){location.href=k.b.identityAddress+"/identity/manage/"}},{key:"onSignOut",value:function(){this.progress.startAsyncOperation("sign_out","RedirectingToSignOut"),this.auth.signOut()}},{key:"flip",get:function(){return this.isRtl?"horizontal":null}},{key:"onMyAdminAccount",value:function(){var e=this;this.fetch(),this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.myAccountModal,{windowClass:"t-myuser-modal"}).result.then(function(){return e.onMyAdminAccountClose()},function(){return e.onMyAdminAccountClose()})}},{key:"onMyAdminAccountClose",value:function(){this.workspace.ignoreKeyDownEvents=!1}},{key:"fetch",value:function(){this.notifyFetch$.next(null)}},{key:"doFetch",value:function(){var e=this;return this.myUserStatus=d.c.loading,this.adminUsersApi.getMyUser().pipe(Object(A.a)(function(t){Object(R.b)(t,e.workspace),e.myUserStatus=d.c.loaded,e.onEdit()}),Object(I.a)(function(t){return e._errorMessage=t.error,e.myUserStatus=d.c.error,Object(S.a)(null)}))}},{key:"onEdit",value:function(){var e=this.ws.get("AdminUser",this.ws.userSettings.UserId);this.myUser={Name:e.Name}}},{key:"onSave",value:function(e){var t=this;this._errorMessage=null,this._saveErrorMessage=null,Object(E.c)(this.myUser),this.adminUsersApi.saveMyUser(this.myUser).subscribe(function(n){Object(R.b)(n,t.workspace),e.close(!0)},function(e){if(422===e.status){var n=Object(E.b)(t.myUser,e.error);Object.keys(n).length>0&&console.error(n)}else t._saveErrorMessage=e.error;return Object(S.a)(null)})}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"saveErrorMessage",get:function(){return this._saveErrorMessage}},{key:"isMyUserLoaded",get:function(){return this.myUserStatus===d.c.loaded}},{key:"isMyUserError",get:function(){return this.myUserStatus===d.c.error}},{key:"isMyUserLoading",get:function(){return this.myUserStatus===d.c.loading}},{key:"myEmail",get:function(){return this.ws.get("AdminUser",this.ws.userSettings.UserId).Email}},{key:"canSave",get:function(){return this.isMyUserLoaded}}]),e}()).\u0275fac=function(e){return new(e||X)(u.Mb(d.m),u.Mb(C.a),u.Mb(b.d),u.Mb(z.a),u.Mb(D.b),u.Mb(L.a),u.Mb(U.a),u.Mb(m.c),u.Mb(P.u))},X.\u0275cmp=u.Gb({type:X,selectors:[["t-admin-shell"]],viewQuery:function(e,t){var n;1&e&&u.Qc(F,3),2&e&&u.zc(n=u.dc())&&(t.myAccountModal=n.first)},decls:41,vars:35,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-light","shadow-sm","border-bottom","bg-white","navbar-expand-sm","p-0","align-items-sm-stretch"],["routerLink","main-menu",1,"t-brand-link","t-navbar-button","d-flex","align-items-baseline",3,"title"],["theme","light",3,"scale"],[1,"mx-2","d-flex"],["class","t-navbar-button nav-link",3,"disabled","click",4,"ngIf"],["type","button",1,"navbar-toggler","mx-2",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse","align-items-stretch",3,"ngbCollapse"],[1,"nav","navbar-nav","px-4","px-lg-0"],[1,"nav","navbar-nav","p-0"],["ngbDropdown","","container","",1,"nav-item"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","align-items-center"],[1,"px-2"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow","m-0"],["type","button","ngbDropdownItem","","routerLink","/root/companies",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","","routerLink","/root/welcome",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[4,"ngFor","ngForOf"],[1,"t-rest-of-screen","container-fluid"],["myAccountModal",""],[1,"t-navbar-button","nav-link",3,"disabled","click"],["icon","arrow-left",3,"flip"],["icon","arrow-right",3,"flip"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0","bg-white"],["class","row m-0 px-1 px-sm-3 pt-3 pt-sm-4 pb-3 pb-sm-5",4,"ngIf"],[4,"ngIf"],["class","d-flex justify-content-center py-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"row","m-0","px-1","px-sm-3","pt-3","pt-sm-4","pb-3","pb-sm-5"],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","py-2"],[3,"scale"]],template:function(e,t){1&e&&(u.Sb(0,"div",0),u.Sb(1,"nav",1),u.Sb(2,"a",2),u.hc(3,"translate"),u.Nb(4,"t-brand",3),u.Rb(),u.Sb(5,"div",4),u.Jc(6,K,2,2,"button",5),u.Lc(7," \xa0 "),u.Jc(8,V,2,2,"button",5),u.Rb(),u.Sb(9,"button",6),u.cc("click",function(){return t.onToggleCollapse()}),u.Nb(10,"span",7),u.Rb(),u.Sb(11,"div",8),u.Nb(12,"ol",9),u.Sb(13,"ol",10),u.Sb(14,"li",11),u.Sb(15,"button",12),u.Sb(16,"span",13),u.Lc(17),u.Rb(),u.Rb(),u.Sb(18,"div",14),u.Sb(19,"button",15),u.cc("click",function(){return t.onCollapse()}),u.Lc(20),u.hc(21,"translate"),u.Rb(),u.Sb(22,"button",16),u.cc("click",function(){return t.onCollapse()}),u.Lc(23),u.hc(24,"translate"),u.Rb(),u.Sb(25,"button",17),u.cc("click",function(){return t.onMySystemAccount(),t.onCollapse()}),u.Lc(26),u.hc(27,"translate"),u.hc(28,"translate"),u.Rb(),u.Sb(29,"button",17),u.cc("click",function(){return t.onMyAdminAccount(),t.onCollapse()}),u.Lc(30),u.hc(31,"translate"),u.Rb(),u.Sb(32,"button",17),u.cc("click",function(){return t.onSignOut(),t.onCollapse()}),u.Lc(33),u.hc(34,"translate"),u.Rb(),u.Nb(35,"hr"),u.Jc(36,B,2,1,"ng-container",18),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(37,"main",19),u.Nb(38,"router-outlet"),u.Rb(),u.Rb(),u.Jc(39,Y,21,14,"ng-template",null,20,u.Kc)),2&e&&(u.zb(2),u.nc("title",u.ic(3,18,"Home")),u.zb(2),u.nc("scale",1),u.zb(2),u.nc("ngIf",t.nav.showBack),u.zb(2),u.nc("ngIf",t.nav.showForward),u.zb(3),u.nc("ngbCollapse",t.isCollapsed),u.zb(1),u.Eb("mr-auto",!t.isRtl)("ml-auto",t.isRtl),u.zb(5),u.Mc(t.userName),u.zb(1),u.Eb("dropdown-menu-right",!t.isRtl),u.zb(2),u.Nc(" ",u.ic(21,20,"MyCompanies")," "),u.zb(3),u.Nc(" ",u.ic(24,22,"WelcomePage")," "),u.zb(3),u.Nc(" ",u.jc(27,24,"My0Account",u.rc(33,Z,u.ic(28,27,"AppName")))," "),u.zb(4),u.Nc(" ",u.ic(31,29,"MyAdminAccount")," "),u.zb(3),u.Nc(" ",u.ic(34,31,"SignOut")," "),u.zb(3),u.nc("ngForOf",t.activeLanguages))},directives:[P.C,a.g,O.a,m.l,P.d,P.m,P.s,P.q,P.p,a.f,m.k,a.i,f.a,_.a,x.a,T.m,T.i,T.j,J.a,j.a],pipes:[b.c],encapsulation:2}),X),te=c("DWXW"),ne=c("wqEn"),ie=c("TJ1c"),re=c("Y7zQ"),ce=c("O90C"),ae=c("QFit"),oe=c("EoPe");function se(e,t){if(1&e&&(u.Sb(0,"div",11),u.Nb(1,"t-auto-cell",12),u.Rb(),u.Sb(2,"div",13),u.Nb(3,"t-auto-cell",14),u.Nb(4,"t-auto-cell",15),u.Rb()),2&e){var n=t.id,i=u.gc();u.zb(1),u.nc("entity",i.c[n]),u.zb(2),u.nc("entity",i.c[n]),u.zb(1),u.nc("entity",i.c[n])}}function le(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"AdminUser"),"\n")}function ue(e,t){if(1&e&&u.Nb(0,"t-auto-cell",16),2&e){var n=t.id,i=u.gc();u.nc("entity",i.c[n])}}function de(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"SendInvitationEmail")," ")}function be(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"Activate")," ")}function me(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"Deactivate")," ")}function fe(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"CreatedByMe")," ")}function pe(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"User_New")," ")}function ve(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"User_Invited")," ")}function ge(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"User_Member")," ")}var he,we=function(e,t,n,i,r){return{template:e,action:t,canInvite:n,actionTooltip:i,showAction:r}},ye=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Se=function(e,t,n){return[e,t,n]},Me=function(e){return{template:e,expression:"CreatedById eq me"}},Ae=function(e){return[e]},Ie=function(e){return{template:e,expression:"State eq 0"}},ke=function(e){return{template:e,expression:"State eq 1"}},Re=function(e){return{template:e,expression:"State eq 2"}},Ee=function(e,t){return{CreatedBy:e,State:t}},Ne=((he=function(e){n(i,e);var t=r(i);function i(e,n,r){var c;return o(this,i),(c=t.call(this)).workspace=e,c.api=n,c.translate=r,c.adminUsersApi=c.api.adminUsersApi(c.notifyDestruct$),c.onActivate=function(e){return c.adminUsersApi.activate(e,{returnEntities:!0}).pipe(Object(A.a)(function(e){return Object(R.c)(e,c.workspace)}))},c.onDeactivate=function(e){return c.adminUsersApi.deactivate(e,{returnEntities:!0}).pipe(Object(A.a)(function(e){return Object(R.c)(e,c.workspace)}))},c.canActivateDeactivateItem=function(e){return c.ws.canDo("admin-users","IsActive",null)},c.activateDeactivateTooltip=function(e){return c.canActivateDeactivateItem(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.onInvite=function(e){return c.adminUsersApi.invite(e,{returnEntities:!0}).pipe(Object(A.a)(function(e){return Object(R.c)(e,c.workspace)}))},c.canInvite=function(e){return c.ws.canDo("admin-users","SendInvitationEmail",null)},c.inviteTooltip=function(e){return c.canActivateDeactivateItem(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.showInvite=function(e){return c.workspace.globalSettings.CanInviteUsers},c.adminUsersApi=c.api.adminUsersApi(c.notifyDestruct$),c}return l(i,[{key:"c",get:function(){return this.ws.AdminUser}},{key:"ws",get:function(){return this.workspace.admin}},{key:"filterStateFilters",value:function(e){var t=this.workspace.globalSettings;return this._filterStateFiltersInput===e&&this._globalSettings===t||(this._filterStateFiltersInput=e,t.CanInviteUsers?this._filterStateFiltersResult=e:e?this._filterStateFiltersResult=e.filter(function(e){return"State eq 1"!==e.expression}):delete this._filterStateFiltersResult),this._filterStateFiltersResult}}]),i}(ce.a)).\u0275fac=function(e){return new(e||he)(u.Mb(d.m),u.Mb(U.a),u.Mb(b.d))},he.\u0275cmp=u.Gb({type:he,selectors:[["t-admin-users-master"]],features:[u.wb],decls:22,vars:49,consts:[["collection","AdminUser","selectDefault","Email,State,LastAccess","selectForTiles","State,Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["invite",""],["activate",""],["deactivate",""],["createdByMe",""],["newUser",""],["invited",""],["member",""],[1,"d-flex","justify-content-between"],["collection","AdminUser","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","AdminUser","path","Email",3,"entity"],["collection","AdminUser","path","State",3,"entity"],["collection","AdminUser",3,"entity"]],template:function(e,t){if(1&e&&(u.Nb(0,"t-master",0),u.hc(1,"translate"),u.Jc(2,se,5,3,"ng-template",null,1,u.Kc),u.Jc(4,le,2,3,"ng-template",null,2,u.Kc),u.Jc(6,ue,1,1,"ng-template",null,3,u.Kc),u.Jc(8,de,2,3,"ng-template",null,4,u.Kc),u.Jc(10,be,2,3,"ng-template",null,5,u.Kc),u.Jc(12,me,2,3,"ng-template",null,6,u.Kc),u.Jc(14,fe,2,3,"ng-template",null,7,u.Kc),u.Jc(16,pe,2,3,"ng-template",null,8,u.Kc),u.Jc(18,ve,2,3,"ng-template",null,9,u.Kc),u.Jc(20,ge,2,3,"ng-template",null,10,u.Kc)),2&e){var n=u.Ac(3),i=u.Ac(5),r=u.Ac(7),c=u.Ac(9),a=u.Ac(11),o=u.Ac(13),s=u.Ac(15),l=u.Ac(17),d=u.Ac(19),b=u.Ac(21);u.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",u.ic(1,10,"AdminUsers"))("tileTemplate",n)("tableSummaryColumnTemplate",r)("tableSummaryHeaderTemplate",i)("multiselectActions",u.tc(28,Se,u.vc(12,we,c,t.onInvite,t.canInvite,t.inviteTooltip,t.showInvite),u.uc(18,ye,a,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),u.uc(23,ye,o,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",u.sc(46,Ee,u.rc(34,Ae,u.rc(32,Me,s)),t.filterStateFilters(u.tc(42,Se,u.rc(36,Ie,l),u.rc(38,ke,d),u.rc(40,Re,b)))))}},directives:[ae.a,oe.a],pipes:[b.c],encapsulation:2}),he),Ce=c("CHDZ"),ze=c("U6XH"),De=c("ABE2"),Le=c("88Q5"),Ue=c("1nIS"),Pe=c("56d8");function Oe(e,t){if(1&e&&(u.Sb(0,"span"),u.Lc(1),u.Rb()),2&e){var n=t.model;u.zb(1),u.Mc(null==n?null:n.Name)}}function _e(e,t){if(1&e&&(u.Sb(0,"div"),u.Sb(1,"span"),u.Lc(2),u.hc(3,"translate"),u.Rb(),u.Rb()),2&e){var n=u.gc().model;u.Eb("active",1===(null==n?null:n.State)),u.zb(2),u.Mc(u.ic(3,3,"User_Invited"))}}function xe(e,t){if(1&e&&(u.Sb(0,"div",7),u.Sb(1,"t-restricted",8),u.Sb(2,"div",9),u.Sb(3,"div"),u.Sb(4,"span"),u.Lc(5),u.hc(6,"translate"),u.Rb(),u.Rb(),u.Jc(7,_e,4,5,"div",10),u.Sb(8,"div"),u.Sb(9,"span"),u.Lc(10),u.hc(11,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Sb(12,"div",11),u.Sb(13,"span"),u.Lc(14),u.hc(15,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&e){var n=t.model,i=u.gc();u.zb(1),u.nc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.State),u.zb(2),u.Eb("active",!(null!=n&&n.Id)||0===(null==n?null:n.State)),u.zb(2),u.Mc(u.ic(6,9,"User_New")),u.zb(2),u.nc("ngIf",i.showInvitedState),u.zb(1),u.Eb("active",2===(null==n?null:n.State)),u.zb(2),u.Mc(u.ic(11,11,"User_Member")),u.zb(4),u.Mc(u.ic(15,13,2===(null==n?null:n.State)?"User_Member":1===(null==n?null:n.State)?"User_Invited":"User_New"))}}var Te=function(e){return{name:e}};function Je(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",28),u.Sb(1,"span"),u.Nb(2,"fa-icon",29),u.Lc(3),u.hc(4,"translate"),u.Sb(5,"button",30),u.cc("click",function(){u.Dc(n);var e=u.gc().model;return u.gc().onInvite(e)}),u.Lc(6),u.hc(7,"translate"),u.Rb(),u.Rb(),u.Rb()}if(2&e){var i=u.gc().model;u.zb(3),u.Nc("\xa0\xa0",u.jc(4,2,"AdminUserNewNotice",u.rc(7,Te,null==i?null:i.Name))," \xa0\xa0"),u.zb(3),u.Nc(" ",u.ic(7,5,"SendInvitationEmail"),"")}}var je=function(e){return{email:e}};function Fe(e,t){if(1&e&&(u.Sb(0,"div",28),u.Sb(1,"span"),u.Nb(2,"fa-icon",29),u.Lc(3),u.hc(4,"translate"),u.Rb(),u.Rb()),2&e){var n=u.gc().model;u.zb(3),u.Nc("\xa0\xa0",u.jc(4,1,"AdminUserFreshInvitedNotice",u.rc(4,je,null==n?null:n.Email)),"")}}function Ke(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",28),u.Sb(1,"span"),u.Nb(2,"fa-icon",29),u.Lc(3),u.hc(4,"translate"),u.Sb(5,"button",30),u.cc("click",function(){u.Dc(n);var e=u.gc().model;return u.gc().onInvite(e)}),u.Lc(6),u.hc(7,"translate"),u.Rb(),u.Rb(),u.Rb()}if(2&e){var i=u.gc().model;u.zb(3),u.Nc("\xa0\xa0",u.jc(4,2,"AdminUserExpiredInvitedNotice",u.rc(7,Te,null==i?null:i.Name))," \xa0\xa0"),u.zb(3),u.Nc(" ",u.ic(7,5,"SendInvitationEmail"),"")}}function Ve(e,t){if(1&e&&(u.Sb(0,"h2",31),u.Lc(1),u.Rb()),2&e){var n=u.gc().model;u.zb(1),u.Mc(null==n?null:n.Name)}}var qe=function(){return{updateOn:"blur"}};function Be(e,t){if(1&e){var n=u.Tb();u.Sb(0,"t-text-editor",32),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc().model.Name=e}),u.hc(1,"translate"),u.Rb()}if(2&e){var i=u.gc().model;u.nc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",u.qc(6,qe))("placeholder",u.ic(1,4,"Name"))}}function He(e,t){if(1&e&&(u.Sb(0,"div"),u.Lc(1),u.Rb()),2&e){var n=u.gc().model;u.zb(1),u.Mc(null==n?null:n.Email)}}function $e(e,t){if(1&e){var n=u.Tb();u.Sb(0,"t-text-editor",33),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc().model.Email=e}),u.Rb()}if(2&e){var i=u.gc().model,r=u.gc();u.nc("ngModel",i.Email)("ngModelOptions",u.qc(3,qe))("disabled",!r.isNew)}}function Ge(e,t){if(1&e&&(u.Sb(0,"t-form-group",34),u.hc(1,"translate"),u.Nb(2,"t-auto-cell",35),u.Rb()),2&e){var n=u.gc().model;u.nc("label",u.ic(1,2,"User_LastActivity")),u.zb(2),u.nc("entity",n)}}function Qe(e,t){if(1&e&&(u.Sb(0,"t-form-group",34),u.hc(1,"translate"),u.Sb(2,"div"),u.Lc(3),u.hc(4,"translate"),u.Rb(),u.Rb()),2&e){var n=u.gc().model;u.nc("label",u.ic(1,2,"IsActive")),u.zb(3),u.Mc(u.ic(4,4,n?n.IsActive?"Yes":"No":""))}}function We(e,t){1&e&&(u.Sb(0,"span",36),u.Lc(1,"\xa0"),u.Nb(2,"fa-icon",37),u.Rb())}function Ye(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Mc(u.ic(1,1,"Permission_View"))}function Xe(e,t){if(1&e&&(u.Sb(0,"div"),u.Lc(1),u.Rb()),2&e){var n=u.gc().item,i=u.gc(3);u.zb(1),u.Nc(" ",i.permissionViewLookup(n.View)," ")}}function Ze(e,t){if(1&e){var n=u.Tb();u.Sb(0,"t-selector",49),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc().item.View=e})("ngModelChange",function(){u.Dc(n);var e=u.gc(),t=e.item,i=e.update,r=u.gc(3);return i.call(null,t),r.onPermissionChanged(t)}),u.Rb()}if(2&e){var i=u.gc().item,r=u.gc(3);u.nc("choices",r.permissionViewChoices)("ngModel",i.View)("required",!i.PH)}}function et(e,t){if(1&e&&(u.Sb(0,"t-form-group-cell",47),u.Jc(1,Xe,2,1,"div",17),u.Jc(2,Ze,1,3,"t-selector",48),u.Rb()),2&e){var n=t.item,i=u.gc(2).isEdit;u.nc("serverErrors",null==n.serverErrors?null:n.serverErrors.View),u.zb(1),u.nc("ngIf",!i),u.zb(1),u.nc("ngIf",i)}}function tt(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Mc(u.ic(1,1,"Permission_Action"))}function nt(e,t){if(1&e&&(u.Sb(0,"div"),u.Lc(1),u.hc(2,"translate"),u.Rb()),2&e){var n=u.gc().item,i=u.gc(3);u.zb(1),u.Mc(u.ic(2,1,i.permissionActionLookup(null==n?null:n.Action)))}}function it(e,t){if(1&e){var n=u.Tb();u.Sb(0,"t-selector",51),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc().item.Action=e})("ngModelChange",function(){u.Dc(n);var e=u.gc(),t=e.item,i=e.update,r=u.gc(3);return i.call(null,t),r.onPermissionChanged(t)}),u.Rb()}if(2&e){var i=u.gc().item,r=u.gc(3);u.nc("ngModel",i.Action)("required",!i.PH)("ngModelOptions",u.qc(5,qe))("choices",r.permissionActionChoices(i))("disabled",!i.View)}}function rt(e,t){if(1&e&&(u.Sb(0,"t-form-group-cell",47),u.Jc(1,nt,3,3,"div",17),u.Jc(2,it,1,6,"t-selector",50),u.Rb()),2&e){var n=t.item,i=u.gc(2).isEdit;u.nc("serverErrors",null==n.serverErrors?null:n.serverErrors.Action),u.zb(1),u.nc("ngIf",!i),u.zb(1),u.nc("ngIf",i)}}function ct(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Mc(u.ic(1,1,"Permission_Criteria"))}function at(e,t){if(1&e&&(u.Sb(0,"div"),u.Lc(1),u.Rb()),2&e){var n=u.gc().item;u.zb(1),u.Mc(n.Criteria)}}function ot(e,t){if(1&e){var n=u.Tb();u.Sb(0,"t-text-editor",53),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc().item.Criteria=e})("ngModelChange",function(){u.Dc(n);var e=u.gc();return e.update.call(null,e.item)}),u.Rb()}if(2&e){var i=u.gc().item,r=u.gc(3);u.nc("ngModel",i.Criteria)("ngModelOptions",u.qc(3,qe))("disabled",r.disableCriteria(i))}}function st(e,t){if(1&e&&(u.Sb(0,"t-form-group-cell",47),u.Jc(1,at,2,1,"div",17),u.Jc(2,ot,1,4,"t-text-editor",52),u.Rb()),2&e){var n=t.item,i=u.gc(2).isEdit;u.nc("serverErrors",null==n.serverErrors?null:n.serverErrors.Criteria),u.zb(1),u.nc("ngIf",!i),u.zb(1),u.nc("ngIf",i)}}function lt(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Mc(u.ic(1,1,"Memo"))}function ut(e,t){if(1&e&&(u.Sb(0,"div"),u.Lc(1),u.Rb()),2&e){var n=u.gc().item;u.zb(1),u.Mc(n.Memo)}}function dt(e,t){if(1&e){var n=u.Tb();u.Sb(0,"t-text-editor",55),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc().item.Memo=e})("ngModelChange",function(){u.Dc(n);var e=u.gc();return e.update.call(null,e.item)}),u.Rb()}if(2&e){var i=u.gc().item;u.nc("ngModel",i.Memo)("ngModelOptions",u.qc(2,qe))}}function bt(e,t){if(1&e&&(u.Sb(0,"t-form-group-cell",47),u.Jc(1,ut,2,1,"div",17),u.Jc(2,dt,1,3,"t-text-editor",54),u.Rb()),2&e){var n=t.item,i=u.gc(2).isEdit;u.nc("serverErrors",null==n.serverErrors?null:n.serverErrors.Memo),u.zb(1),u.nc("ngIf",!i),u.zb(1),u.nc("ngIf",i)}}var mt=function(){return["View","Action","Criteria","Memo"]},ft=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},pt=function(e,t,n,i){return{View:e,Action:t,Criteria:n,Memo:i}};function vt(e,t){if(1&e&&(u.Sb(0,"t-restricted",8),u.Nb(1,"t-table",38),u.Rb(),u.Jc(2,Ye,2,3,"ng-template",null,39,u.Kc),u.Jc(4,et,3,3,"ng-template",null,40,u.Kc),u.Jc(6,tt,2,3,"ng-template",null,41,u.Kc),u.Jc(8,rt,3,3,"ng-template",null,42,u.Kc),u.Jc(10,ct,2,3,"ng-template",null,43,u.Kc),u.Jc(12,st,3,3,"ng-template",null,44,u.Kc),u.Jc(14,lt,2,3,"ng-template",null,45,u.Kc),u.Jc(16,bt,3,3,"ng-template",null,46,u.Kc)),2&e){var n=u.Ac(3),i=u.Ac(5),r=u.Ac(7),c=u.Ac(9),a=u.Ac(11),o=u.Ac(13),s=u.Ac(15),l=u.Ac(17),d=u.gc(),b=d.model,m=d.isEdit;u.Eb("p-4",1===(null==b||null==b.EntityMetadata?null:b.EntityMetadata.Permissions)),u.nc("metadata",null==b||null==b.EntityMetadata?null:b.EntityMetadata.Permissions),u.zb(1),u.nc("dataSource",null==b?null:b.Permissions)("isEdit",m)("columnPaths",u.qc(7,mt))("columnTemplates",u.uc(20,pt,u.sc(8,ft,n,i),u.sc(11,ft,r,c),u.sc(14,ft,a,o),u.sc(17,ft,s,l)))}}function gt(e,t){if(1&e&&(u.Jc(0,Je,8,9,"div",12),u.Jc(1,Fe,5,6,"div",12),u.Jc(2,Ke,8,9,"div",12),u.Sb(3,"t-form-group",13),u.Jc(4,Ve,2,1,"h2",14),u.Jc(5,Be,2,7,"t-text-editor",15),u.Rb(),u.Sb(6,"t-form-group",16),u.hc(7,"translate"),u.Jc(8,He,2,1,"div",17),u.Jc(9,$e,1,4,"t-text-editor",18),u.Rb(),u.Jc(10,Ge,3,4,"t-form-group",19),u.Jc(11,Qe,5,6,"t-form-group",19),u.Sb(12,"ul",20,21),u.Sb(14,"li",22),u.Sb(15,"a",23),u.Sb(16,"span",24),u.Lc(17),u.hc(18,"translate"),u.hc(19,"number"),u.Rb(),u.Jc(20,We,3,0,"span",25),u.Rb(),u.Jc(21,vt,18,25,"ng-template",26),u.Rb(),u.Rb(),u.Nb(22,"div",27)),2&e){var n=t.model,i=t.isEdit,r=u.Ac(13),c=u.gc();u.nc("ngIf",c.showUserNewNotice(n,i)),u.zb(1),u.nc("ngIf",c.showUserFreshInvitedNotice(n)),u.zb(1),u.nc("ngIf",c.showUserExpiredInvitedNotice(n,i)),u.zb(1),u.nc("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Name),u.zb(1),u.nc("ngIf",!i),u.zb(1),u.nc("ngIf",i),u.zb(1),u.nc("label",u.ic(7,17,"User_Email"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Email),u.zb(2),u.nc("ngIf",!i),u.zb(1),u.nc("ngIf",i),u.zb(1),u.nc("ngIf",!i),u.zb(1),u.nc("ngIf",!i),u.zb(1),u.nc("destroyOnHide",!0),u.zb(2),u.nc("disabled",!0),u.zb(3),u.Mc(u.ic(18,19,"User_Permissions")+(n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Permissions)?"":" ("+u.ic(19,21,null==n||null==n.Permissions?null:n.Permissions.length)+")")),u.zb(3),u.nc("ngIf",c.showPermissionsError(n)),u.zb(2),u.nc("ngbNavOutlet",r)}}function ht(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"Activate")," ")}function wt(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"Deactivate")," ")}function yt(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"SendInvitationEmail")," ")}var St,Mt=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},At=function(e,t,n){return[e,t,n]},It=((St=function(t){n(c,t);var i=r(c);function c(e,t,n,r){var a;return o(this,c),(a=i.call(this)).workspace=e,a.api=t,a.translate=n,a.route=r,a.showRoles=!0,a.expand="Permissions",a.adminUsersApi=a.api.adminUsersApi(a.notifyDestruct$),a._permissionActionChoices={},a._viewsDb=null,a._currentViewsDb=null,a._viewsForSelector=null,a.create=function(){var e={};return e.Name=a.initialText,e.Permissions=[],e},a.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Permissions&&t.Permissions.forEach(function(e){e.Id=null}),t}return console.error("Cloning a non existing item"),null},a.onInvite=function(e){e&&e.Id&&a.adminUsersApi.invite([e.Id],{returnEntities:!0}).pipe(Object(A.a)(function(e){return Object(R.c)(e,a.workspace)})).subscribe({error:a.details.handleActionError})},a.showInvite=function(e){return!!e&&e.State<=1&&a.showInvitedState},a.canInvite=function(e){return a.ws.canDo("admin-users","SendInvitationEmail",e.Id)},a.inviteTooltip=function(e){return a.canInvite(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.onActivate=function(e){e&&e.Id&&a.adminUsersApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(function(e){return Object(R.c)(e,a.workspace)})).subscribe({error:a.details.handleActionError})},a.onDeactivate=function(e){e&&e.Id&&a.adminUsersApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(function(e){return Object(R.c)(e,a.workspace)})).subscribe({error:a.details.handleActionError})},a.showActivate=function(e){return!!e&&!e.IsActive},a.showDeactivate=function(e){return!!e&&e.IsActive},a.canActivateDeactivateItem=function(e){return a.ws.canDo("admin-users","IsActive",e.Id)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.adminUsersApi=a.api.adminUsersApi(a.notifyDestruct$),a}return l(c,[{key:"showInvitedState",get:function(){return this.workspace.globalSettings.CanInviteUsers}},{key:"showUserNewNotice",value:function(e,t){return!t&&!!e&&!!e.Id&&!e.State&&this.workspace.globalSettings.CanInviteUsers}},{key:"showUserFreshInvitedNotice",value:function(e){return!!e&&!!e.Id&&1===e.State&&Object(R.h)(new Date(e.InvitedAt),new Date)<this.workspace.globalSettings.TokenExpiryInDays}},{key:"showUserExpiredInvitedNotice",value:function(e,t){return!t&&!!e&&!!e.Id&&1===e.State&&Object(R.h)(new Date(e.InvitedAt),new Date)>=this.workspace.globalSettings.TokenExpiryInDays}},{key:"ws",get:function(){return this.workspace.admin}},{key:"showInvitationInfo",value:function(e){return!!e&&!!e.Email&&this.isNew}},{key:"isNew",get:function(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}},{key:"showPermissionsError",value:function(e){return!!e&&!!e.Permissions&&e.Permissions.some(function(e){return!!e.serverErrors})}},{key:"viewsDb",get:function(){var t=this;if(this._currentLang!==this.translate.currentLang){this._currentLang=this.translate.currentLang,this._viewsDb={};for(var n=function(){var n=r[i],c=ze.b[n],a={name:function(){return t.translate.instant(c.name)},actions:{}};a.actions.All={supportsCriteria:!1},c.read&&(a.actions.Read={supportsCriteria:!0}),c.update&&(a.actions.Update={supportsCriteria:!0}),c.delete&&(a.actions.Delete={supportsCriteria:!0});var o,s=e(c.actions);try{for(s.s();!(o=s.n()).done;){var l=o.value;a.actions[l.action]={supportsCriteria:l.criteria}}}catch(u){s.e(u)}finally{s.f()}t._viewsDb[n]=a},i=0,r=Object.keys(ze.b);i<r.length;i++)n()}return this._viewsDb}},{key:"permissionViewChoices",get:function(){if(this._currentViewsDb!==this.viewsDb){var e=this.viewsDb;this._currentViewsDb=e,this._viewsForSelector=Object.keys(e).map(function(t){return{value:t,name:e[t].name}}),this._viewsForSelector.sort(function(e,t){return e.name()<t.name()?-1:e.name()>t.name()?1:0})}return this._viewsForSelector}},{key:"permissionViewLookup",value:function(e){return e?this.viewsDb[e]?this.viewsDb[e].name():(console.error("missing view ".concat(e)),""):""}},{key:"onPermissionChanged",value:function(e){var t=this.permissionActionChoices(e);1===t.length?e.Action=t[0].value:e.Action&&t.every(function(t){return t.value!==e.Action})&&(e.Action=null),this.disableCriteria(e)&&(e.Criteria=null)}},{key:"disableCriteria",value:function(e){if(!e||!e.View||!e.Action)return!0;var t=this.viewsDb[e.View];if(t&&t.actions){var n=t.actions[e.Action];return!(n&&n.supportsCriteria)}return!0}},{key:"permissionActionChoices",value:function(e){var t=this;if(!e.View)return[];if(!this._permissionActionChoices[e.View]){var n=this.viewsDb[e.View];this._permissionActionChoices[e.View]=n&&n.actions?Object.keys(n.actions).map(function(e){return{name:function(){return t.translate.instant(ze.a[e])},value:e}}):[]}return this._permissionActionChoices[e.View]}},{key:"permissionActionLookup",value:function(e){return e?"All"===e?"View_All":ze.a[e]:""}}]),c}(Ce.a)).\u0275fac=function(e){return new(e||St)(u.Mb(d.m),u.Mb(U.a),u.Mb(b.d),u.Mb(a.a))},St.\u0275cmp=u.Gb({type:St,selectors:[["t-admin-users-details"]],inputs:{showRoles:"showRoles"},features:[u.wb],decls:14,vars:35,consts:[["collection","AdminUser",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","documentHeaderTemplate","actions"],["detailsCrumb",""],["documentHeader",""],["document",""],["activate",""],["deactivate",""],["invite",""],[1,"w-100","t-document-header","d-flex","justify-content-end"],[3,"metadata"],[1,"t-flow-chart","small"],[3,"active",4,"ngIf"],[1,"small","t-lone-state","active","d-none"],["class","col-12 alert-primary p-2 px-3 mb-3 mb-sm-4",4,"ngIf"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","permissions",3,"disabled"],["ngbNavLink",""],[1,"small","t-slightly-bold"],["class","text-danger",4,"ngIf"],["ngbNavContent",""],[1,"w-100",3,"ngbNavOutlet"],[1,"col-12","alert-primary","p-2","px-3","mb-3","mb-sm-4"],["icon","info-circle"],[1,"btn","btn-primary","btn-sm","py-0","align-baseline",3,"click"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"t-form-group",3,"label"],["collection","AdminUser","path","LastAccess",3,"entity"],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_View",""],["row_View",""],["header_Action",""],["row_Action",""],["header_Criteria",""],["row_Criteria",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"choices","ngModel","required","ngModelChange",4,"ngIf"],[3,"choices","ngModel","required","ngModelChange"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(u.Nb(0,"t-details",0),u.hc(1,"translate"),u.Jc(2,Oe,2,1,"ng-template",null,1,u.Kc),u.Jc(4,xe,16,15,"ng-template",null,2,u.Kc),u.Jc(6,gt,23,23,"ng-template",null,3,u.Kc),u.Jc(8,ht,2,3,"ng-template",null,4,u.Kc),u.Jc(10,wt,2,3,"ng-template",null,5,u.Kc),u.Jc(12,yt,2,3,"ng-template",null,6,u.Kc)),2&e){var n=u.Ac(3),i=u.Ac(5),r=u.Ac(7),c=u.Ac(9),a=u.Ac(11),o=u.Ac(13);u.nc("expand",t.expand)("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",u.ic(1,11,"AdminUsers"))("detailsCrumb",n)("documentTemplate",r)("documentHeaderTemplate",i)("actions",u.tc(31,At,u.vc(13,Mt,o,t.onInvite,t.showInvite,t.canInvite,t.inviteTooltip),u.vc(19,Mt,c,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),u.vc(25,Mt,a,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[E.a,De.a,m.l,_.a,P.w,P.y,P.z,P.x,P.B,f.a,x.a,T.m,T.i,T.j,T.d,oe.a,Le.a,Ue.a,Pe.a],pipes:[b.c,m.d],encapsulation:2}),St),kt=c("wHSu");function Rt(e,t){if(1&e&&(u.Sb(0,"div",8),u.Nb(1,"t-auto-cell",9),u.Rb(),u.Sb(2,"div",10),u.Sb(3,"span",11),u.Lc(4,"\xa0"),u.Rb(),u.Rb()),2&e){var n=t.id,i=u.gc();u.zb(1),u.nc("entity",i.c[n])}}function Et(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"IdentityServerUser"),"\n")}function Nt(e,t){if(1&e&&u.Nb(0,"t-auto-cell",12),2&e){var n=t.id,i=u.gc();u.nc("entity",i.c[n])}}function Ct(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"EmailConfirmed")," ")}function zt(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"EmailNotConfirmed")," ")}function Dt(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"PasswordIsSet")," ")}function Lt(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"PasswordIsNotSet")," ")}var Ut=function(){return[]},Pt=function(e){return{template:e,expression:"EmailConfirmed eq true"}},Ot=function(e){return{template:e,expression:"EmailConfirmed eq false"}},_t=function(e,t){return[e,t]},xt=function(e){return{template:e,expression:"PasswordSet eq true"}},Tt=function(e){return{template:e,expression:"PasswordSet eq false"}},Jt=function(e,t){return{EmailConfirmed:e,PasswordSet:t}},jt=["resetPasswordModal"];function Ft(e,t){if(1&e&&(u.Sb(0,"span"),u.Lc(1),u.Rb()),2&e){var n=t.model;u.zb(1),u.Mc(null==n?null:n.Email)}}function Kt(e,t){if(1&e&&(u.Sb(0,"t-form-group",5),u.Sb(1,"h2",6),u.Lc(2),u.Rb(),u.Rb(),u.Sb(3,"t-form-group",7),u.hc(4,"translate"),u.Sb(5,"div"),u.Lc(6),u.hc(7,"translate"),u.Rb(),u.Rb(),u.Sb(8,"t-form-group",7),u.hc(9,"translate"),u.Sb(10,"div"),u.Lc(11),u.hc(12,"translate"),u.Rb(),u.Rb(),u.Sb(13,"t-form-group",7),u.hc(14,"translate"),u.Sb(15,"div"),u.Lc(16),u.hc(17,"translate"),u.Rb(),u.Rb(),u.Sb(18,"t-form-group",7),u.hc(19,"translate"),u.Nb(20,"t-auto-cell",8),u.Rb()),2&e){var n=t.model;u.zb(2),u.Mc(null==n?null:n.Email),u.zb(1),u.nc("label",u.ic(4,9,"IdentityServerUser_EmailConfirmed")),u.zb(3),u.Nc("",u.ic(7,11,!0===n.EmailConfirmed?"Yes":!1===n.EmailConfirmed?"No":"")," "),u.zb(2),u.nc("label",u.ic(9,13,"IdentityServerUser_PasswordSet")),u.zb(3),u.Nc("",u.ic(12,15,!0===n.PasswordSet?"Yes":!1===n.PasswordSet?"No":"")," "),u.zb(2),u.nc("label",u.ic(14,17,"IdentityServerUser_TwoFactorEnabled")),u.zb(3),u.Nc("",u.ic(17,19,!0===n.TwoFactorEnabled?"Yes":!1===n.TwoFactorEnabled?"No":"")," "),u.zb(2),u.nc("label",u.ic(19,21,"IdentityServerUser_LockoutEnd")),u.zb(2),u.nc("entity",n)}}function Vt(e,t){1&e&&(u.Lc(0),u.hc(1,"translate")),2&e&&u.Nc(" ",u.ic(1,1,"ResetPassword")," ")}function qt(e,t){if(1&e&&(u.Sb(0,"t-error-message"),u.Lc(1),u.Rb()),2&e){var n=u.gc(2);u.zb(1),u.Nc(" ",n.resetPasswordError," ")}}function Bt(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",9),u.Sb(1,"h5",10),u.Lc(2),u.hc(3,"translate"),u.Rb(),u.Sb(4,"button",11),u.cc("click",function(){return t.$implicit.dismiss()}),u.Sb(5,"span",12),u.Lc(6,"\xd7"),u.Rb(),u.Rb(),u.Rb(),u.Sb(7,"div",13),u.Sb(8,"t-form-group",14),u.hc(9,"translate"),u.Sb(10,"div"),u.Lc(11),u.Rb(),u.Rb(),u.Sb(12,"t-form-group",14),u.hc(13,"translate"),u.Sb(14,"t-text-editor",15),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc().newPassword=e}),u.Rb(),u.Sb(15,"label",16),u.cc("click",function(){return u.Dc(n),u.gc().togglePasswordVisibility()}),u.hc(16,"translate"),u.Nb(17,"fa-icon",17),u.Rb(),u.Rb(),u.Jc(18,qt,2,1,"t-error-message",18),u.Rb(),u.Sb(19,"div",19),u.Sb(20,"button",20),u.cc("click",function(){u.Dc(n);var e=t.$implicit;return u.gc().resetPasswordClick(e)}),u.Nb(21,"fa-icon",21),u.Lc(22),u.hc(23,"translate"),u.Rb(),u.Sb(24,"button",22),u.cc("click",function(){return t.$implicit.dismiss()}),u.Nb(25,"fa-icon",23),u.Lc(26),u.hc(27,"translate"),u.Rb(),u.Rb()}if(2&e){var i=u.gc();u.zb(2),u.Nc(" ",u.ic(3,15,"ResetPassword")," "),u.zb(6),u.nc("label",u.ic(9,17,"User_Email"))("serverErrors",null),u.zb(3),u.Mc(null==i.modelRef?null:i.modelRef.Email),u.zb(1),u.nc("label",u.ic(13,19,"NewPassword"))("serverErrors",null),u.zb(2),u.nc("ngModel",i.newPassword)("type",i.passwordFieldType)("focusIf",!0),u.zb(1),u.oc("title",u.ic(16,21,"ShowHidePassword")),u.zb(2),u.nc("icon",i.isPasswordShown?"eye-slash":"eye"),u.zb(1),u.nc("ngIf",!!i.resetPasswordError),u.zb(2),u.nc("disabled",!i.newPassword),u.zb(2),u.Nc(" \xa0",u.ic(23,23,"ResetPassword")," "),u.zb(4),u.Nc(" \xa0",u.ic(27,25,"Cancel")," ")}}var Ht,$t,Gt,Qt=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},Wt=function(e){return[e]},Yt=[{path:"console",component:ee,canActivate:[ne.d],canActivateChild:[ie.a],children:[{path:"identity-server-users",component:($t=function(e){n(i,e);var t=r(i);function i(e){var n;return o(this,i),(n=t.call(this)).workspace=e,n}return l(i,[{key:"c",get:function(){return this.ws.IdentityServerUser}},{key:"ws",get:function(){return this.workspace.admin}}]),i}(ce.a),$t.\u0275fac=function(e){return new(e||$t)(u.Mb(d.m))},$t.\u0275cmp=u.Gb({type:$t,selectors:[["t-identity-server-users-master"]],features:[u.wb],decls:16,vars:32,consts:[["collection","IdentityServerUser","selectDefault","EmailConfirmed,PasswordSet,TwoFactorEnabled","selectForTiles","Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","showImportButton","showDeleteButton","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["emailConfirmed",""],["emailNotConfirmed",""],["passwordSet",""],["passwordNotSet",""],[1,"d-flex","justify-content-between"],["collection","IdentityServerUser","path","Email",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"d-block","text-truncate"],["collection","IdentityServerUser",3,"entity"]],template:function(e,t){if(1&e&&(u.Nb(0,"t-master",0),u.hc(1,"translate"),u.Jc(2,Rt,5,1,"ng-template",null,1,u.Kc),u.Jc(4,Et,2,3,"ng-template",null,2,u.Kc),u.Jc(6,Nt,1,1,"ng-template",null,3,u.Kc),u.Jc(8,Ct,2,3,"ng-template",null,4,u.Kc),u.Jc(10,zt,2,3,"ng-template",null,5,u.Kc),u.Jc(12,Dt,2,3,"ng-template",null,6,u.Kc),u.Jc(14,Lt,2,3,"ng-template",null,7,u.Kc)),2&e){var n=u.Ac(3),i=u.Ac(5),r=u.Ac(7),c=u.Ac(9),a=u.Ac(11),o=u.Ac(13),s=u.Ac(15);u.nc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",u.ic(1,12,"IdentityServerUsers"))("tileTemplate",n)("tableSummaryColumnTemplate",r)("tableSummaryHeaderTemplate",i)("showImportButton",!1)("showDeleteButton",!1)("multiselectActions",u.qc(14,Ut))("filterDefinition",u.sc(29,Jt,u.sc(19,_t,u.rc(15,Pt,c),u.rc(17,Ot,a)),u.sc(26,_t,u.rc(22,xt,o),u.rc(24,Tt,s))))}},directives:[ae.a,oe.a],pipes:[b.c],encapsulation:2}),$t),canDeactivate:[re.a]},{path:"identity-server-users/:id",component:(Ht=function(e){n(i,e);var t=r(i);function i(e,n,r,c){var a;return o(this,i),(a=t.call(this)).workspace=e,a.api=n,a.translate=r,a.modalService=c,a.expand="",a._showPassword=!1,a.identityServerUsersApi=a.api.identityServerUsersApi(a.notifyDestruct$),a.onResetPassword=function(e){e&&e.Id&&(a.modelRef=e,a.modalService.open(a.resetPasswordModal).result.then(function(){a.resetPasswordError=null,a.newPassword=null,a._showPassword=!1},function(e){a.resetPasswordError=null,a.newPassword=null,a._showPassword=!1}))},a.showResetPassword=function(e){return!!e},a.canResetPassword=function(e){return a.ws.canDo("identity-server-users","ResetPassword",e.Id)},a.resetPasswordTooltip=function(e){return a.canResetPassword(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.identityServerUsersApi=a.api.identityServerUsersApi(a.notifyDestruct$),a}return l(i,[{key:"ws",get:function(){return this.workspace.admin}},{key:"resetPasswordClick",value:function(e){var t=this;this.resetPasswordError=null,this.identityServerUsersApi.resetPassword({userId:this.modelRef.Id,password:this.newPassword}).pipe(Object(A.a)(function(n){Object(R.c)(n,t.workspace),e.close(),t.details.displayModalMessage(t.translate.instant("PasswordWasSuccessfullyReset"))}),Object(I.a)(function(e){return t.resetPasswordError=e.error})).subscribe()}},{key:"togglePasswordVisibility",value:function(){this._showPassword=!this._showPassword}},{key:"isPasswordShown",get:function(){return this._showPassword}},{key:"passwordFieldType",get:function(){return this.isPasswordShown?"text":"password"}}]),i}(Ce.a),Ht.\u0275fac=function(e){return new(e||Ht)(u.Mb(d.m),u.Mb(U.a),u.Mb(b.d),u.Mb(P.u))},Ht.\u0275cmp=u.Gb({type:Ht,selectors:[["t-identity-server-users-details"]],viewQuery:function(e,t){var n;1&e&&u.Qc(jt,3),2&e&&u.zc(n=u.dc())&&(t.resetPasswordModal=n.first)},features:[u.wb],decls:10,vars:21,consts:[["collection","IdentityServerUser",3,"expand","idString","mode","additionalSelect","showCreateButton","showDeleteButton","showEditButton","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["resetPassword",""],["resetPasswordModal",""],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label"],["collection","IdentityServerUser","path","LockoutEnd",3,"entity"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","type","focusIf","ngModelChange"],[1,"btn","btn-sm","text-primary","t-pointer","mx-1",3,"title","click"],[3,"icon"],[4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","check"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(u.Nb(0,"t-details",0),u.hc(1,"translate"),u.Jc(2,Ft,2,1,"ng-template",null,1,u.Kc),u.Jc(4,Kt,21,23,"ng-template",null,2,u.Kc),u.Jc(6,Vt,2,3,"ng-template",null,3,u.Kc),u.Jc(8,Bt,28,27,"ng-template",null,4,u.Kc)),2&e){var n=u.Ac(3),i=u.Ac(5),r=u.Ac(7);u.nc("expand",t.expand)("idString",t.idString)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showDeleteButton",!1)("showEditButton",!1)("masterCrumb",u.ic(1,11,"IdentityServerUsers"))("detailsCrumb",n)("documentTemplate",i)("actions",u.rc(19,Wt,u.vc(13,Qt,r,t.onResetPassword,t.showResetPassword,t.canResetPassword,t.resetPasswordTooltip)))}},directives:[E.a,_.a,oe.a,x.a,T.m,T.i,T.j,f.a,m.l,J.a],pipes:[b.c],encapsulation:2}),Ht),canDeactivate:[te.a]},{path:"admin-users",component:Ne,canDeactivate:[re.a]},{path:"admin-users/:id",component:It,canDeactivate:[te.a]},{path:"main-menu",component:h,canDeactivate:[re.a]},{path:"",redirectTo:"main-menu",pathMatch:"full"},{path:"**",component:w}]},{path:"",redirectTo:"/root/welcome",pathMatch:"full"}],Xt=((Gt=function e(t){o(this,e),t.addIcons(kt.od,kt.wb,kt.xb)}).\u0275fac=function(e){return new(e||Gt)(u.Zb(f.b))},Gt.\u0275mod=u.Kb({type:Gt}),Gt.\u0275inj=u.Jb({imports:[[s.a,a.h.forChild(Yt)]]}),Gt)}}])}();