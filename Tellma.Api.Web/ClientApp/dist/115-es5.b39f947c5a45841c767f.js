!function(){"use strict";function e(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=a(e);if(t){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}(self.webpackChunktellma=self.webpackChunktellma||[]).push([[115],{3115:function(t,i,o){o.r(i),o.d(i,{AdminModule:function(){return qn}});var a=o(3423),l=o(5686),u=o(7716),d=o(3795),f=o(9790),m=o(8583),p=o(9577);function g(e,t){if(1&e&&(u.TgZ(0,"a",4),u.TgZ(1,"div",5),u._UZ(2,"fa-icon",6),u.qZA(),u.TgZ(3,"div",7),u._uU(4),u.qZA(),u.qZA()),2&e){var n=t.$implicit,i=u.oxw();u.ekj("d-none",!i.canView(n.view)),u.Q6J("routerLink",n.link),u.xp6(2),u.Q6J("icon",n.icon),u.xp6(2),u.hij(" ",n.label()," ")}}var v,h=((v=function(){function e(t,n){var i=this;s(this,e),this.workspace=t,this.translate=n,this.mainMenuItems=[{label:function(){return i.translate.instant("AdminUsers")},icon:"users",view:"admin-users",link:"../admin-users"},{label:function(){return i.translate.instant("IdentityServerUsers")},icon:"shield-alt",view:"identity-server-users",link:"../identity-server-users"},{label:function(){return i.translate.instant("IdentityServerClients")},icon:"shield-alt",view:"identity-server-clients",link:"../identity-server-clients"}]}return c(e,[{key:"ngOnInit",value:function(){}},{key:"canView",value:function(e){return this.workspace.admin.canRead(e)}}]),e}()).\u0275fac=function(e){return new(e||v)(u.Y36(d.AW),u.Y36(f.sK))},v.\u0275cmp=u.Xpm({type:v,selectors:[["t-admin-main-menu"]],decls:7,vars:4,consts:[[1,"container","py-4","px-5"],[1,"t-menu-section"],[1,"t-teal1"],["class","t-menu-item btn m-1",3,"d-none","routerLink",4,"ngFor","ngForOf"],[1,"t-menu-item","btn","m-1",3,"routerLink"],[1,"pt-4","pb-1","t-menu-item-icon"],[3,"icon"],[1,"px-2","t-menu-item-label"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"span"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.qZA(),u.TgZ(5,"div",2),u.YNc(6,g,5,5,"a",3),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,2,"AdminConsole")),u.xp6(3),u.Q6J("ngForOf",t.mainMenuItems))},directives:[m.sg,a.yS,p.BN],pipes:[f.X$],encapsulation:2}),v),w=function(){var e=function(){function e(t){s(this,e),this.router=t}return c(e,[{key:"onHome",value:function(){this.router.navigate(["admin","console","main-menu"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(a.F0))},e.\u0275cmp=u.Xpm({type:e,selectors:[["t-admin-page-not-found"]],decls:11,vars:9,consts:[[1,"p-5"],[1,"text-danger"],[1,"text-muted"],[1,"mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"h2",1),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"p",2),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"div",3),u.TgZ(8,"button",4),u.NdJ("click",function(){return t.onHome()}),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,3,"Error_PageNotFound")," "),u.xp6(3),u.Oqu(u.lcZ(6,5,"Error_PageNotFoundMessage")),u.xp6(4),u.Oqu(u.lcZ(10,7,"Home")))},pipes:[f.X$],encapsulation:2}),e}(),A=o(9765),Z=o(5917),y=o(3190),b=o(8307),x=o(5304),M=o(4686),C=o(7554),q=o(3909),S=o(6854),U=o(1117),I=o(5681),T=o(1408),_=o(8126),N=o(4104),k=o(1181),E=o(3645),O=o(5349),J=o(4577),L=o(3679),D=o(8482),Q=o(1887),Y=["myAccountModal"];function P(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){u.CHM(n);var e=u.oxw();return e.onCollapse(),e.nav.onBack()}),u._UZ(1,"fa-icon",22),u.qZA()}if(2&e){var i=u.oxw();u.Q6J("disabled",!i.nav.canBack),u.xp6(1),u.Q6J("flip",i.flip)}}function j(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){u.CHM(n);var e=u.oxw();return e.onCollapse(),e.nav.onForward()}),u._UZ(1,"fa-icon",23),u.qZA()}if(2&e){var i=u.oxw();u.Q6J("disabled",!i.nav.canForward),u.xp6(1),u.Q6J("flip",i.flip)}}function F(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",function(){u.CHM(n);var e=u.oxw().$implicit,t=u.oxw();return t.onSetLanguage(e),t.onCollapse()}),u._uU(1),u.qZA()}if(2&e){var i=u.oxw().$implicit,r=u.oxw();u.xp6(1),u.hij(" ",r.languageName(i)," ")}}function H(e,t){if(1&e&&(u.ynx(0),u.YNc(1,F,2,1,"button",24),u.BQk()),2&e){var n=t.$implicit,i=u.oxw();u.xp6(1),u.Q6J("ngIf",n!==i.currentLanguage)}}var W=function(){return{updateOn:"blur"}};function R(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",38),u.TgZ(1,"t-form-group",39),u.TgZ(2,"h2",40),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"t-form-group",41),u.ALo(5,"translate"),u.TgZ(6,"t-text-editor",42),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw(2).myUser.Name=e}),u.qZA(),u.qZA(),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(3),u.Oqu(i.myEmail),u.xp6(1),u.Q6J("label",u.lcZ(5,5,"Name"))("serverErrors",null==i.myUser||null==i.myUser.serverErrors?null:i.myUser.serverErrors.Name),u.xp6(2),u.Q6J("ngModel",i.myUser.Name)("ngModelOptions",u.DdM(7,W))}}function V(e,t){if(1&e&&(u.TgZ(0,"t-error-message"),u._uU(1),u.qZA()),2&e){var n=u.oxw(2);u.xp6(1),u.hij(" ",n.saveErrorMessage," ")}}function B(e,t){if(1&e&&(u.TgZ(0,"t-error-message"),u._uU(1),u.qZA()),2&e){var n=u.oxw(2);u.xp6(1),u.hij(" ",n.errorMessage," ")}}function $(e,t){1&e&&(u.TgZ(0,"div",43),u._UZ(1,"t-spinner",44),u.qZA()),2&e&&(u.xp6(1),u.Q6J("scale",2))}function K(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",25),u.TgZ(1,"h5",26),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"button",27),u.NdJ("click",function(){return u.CHM(n).$implicit.dismiss(!1)}),u.TgZ(5,"span",28),u._uU(6,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"div",29),u.YNc(8,R,7,8,"div",30),u.YNc(9,V,2,1,"t-error-message",31),u.YNc(10,B,2,1,"t-error-message",31),u.YNc(11,$,2,1,"div",32),u.qZA(),u.TgZ(12,"div",33),u.TgZ(13,"button",34),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().onSave(e)}),u._UZ(14,"fa-icon",35),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.TgZ(17,"button",36),u.NdJ("click",function(){return u.CHM(n).$implicit.close(!1)}),u._UZ(18,"fa-icon",37),u._uU(19),u.ALo(20,"translate"),u.qZA(),u.qZA()}if(2&e){var i=u.oxw();u.xp6(2),u.hij(" ",u.lcZ(3,8,"MyAdminAccount")," "),u.xp6(6),u.Q6J("ngIf",i.isMyUserLoaded),u.xp6(1),u.Q6J("ngIf",i.isMyUserLoaded&&!!i.saveErrorMessage),u.xp6(1),u.Q6J("ngIf",i.isMyUserError),u.xp6(1),u.Q6J("ngIf",i.isMyUserLoading),u.xp6(2),u.Q6J("disabled",!i.canSave),u.xp6(2),u.hij(" \xa0",u.lcZ(16,10,"Save")," "),u.xp6(4),u.hij(" \xa0",u.lcZ(20,12,"Cancel")," ")}}var X=function(e){return{placeholder:e}},G=function(){var e=function(){function e(t,n,i,r,o,a,l,c,u){var d=this;s(this,e),this.workspace=t,this.nav=n,this.translate=i,this.progress=r,this.auth=o,this.storage=a,this.apiService=l,this.document=c,this.modalService=u,this.isCollapsed=!0,this.notifyDestruct$=new A.xQ,this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$),this.notifyFetch$=new A.xQ,this.notifyFetch$.pipe((0,y.w)(function(){return d.doFetch()})).subscribe()}return c(e,[{key:"ngOnInit",value:function(){this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$)}},{key:"ngOnDestroy",value:function(){this.notifyDestruct$.next(),this._subscription&&this._subscription.unsubscribe()}},{key:"activeLanguages",get:function(){return this._activeLanguages||(this._activeLanguages=Object.keys(S.f)),this._activeLanguages}},{key:"languageName",value:function(e){return S.f[e]}},{key:"onSetLanguage",value:function(e){this.translate.use(e),this.storage.setItem("user_culture",e)}},{key:"currentLanguage",get:function(){return this.workspace.ws.culture||this.translate.currentLang||this.translate.defaultLang||"en"}},{key:"onToggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"onCollapse",value:function(){this.isCollapsed=!0}},{key:"settings",get:function(){return this.ws?this.ws.settings:null}},{key:"ws",get:function(){return this.workspace.admin}},{key:"userName",get:function(){return this.ws.userSettings.Name}},{key:"isRtl",get:function(){return this.workspace.ws.isRtl}},{key:"onMySystemAccount",value:function(){location.href=M.hG.identityAddress+"/identity/manage/"}},{key:"onSignOut",value:function(){this.progress.startAsyncOperation("sign_out","RedirectingToSignOut"),this.auth.signOut()}},{key:"flip",get:function(){return this.isRtl?"horizontal":null}},{key:"onMyAdminAccount",value:function(){var e=this;this.fetch(),this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.myAccountModal,{windowClass:"t-myuser-modal"}).result.then(function(){return e.onMyAdminAccountClose()},function(){return e.onMyAdminAccountClose()})}},{key:"onMyAdminAccountClose",value:function(){this.workspace.ignoreKeyDownEvents=!1}},{key:"fetch",value:function(){this.notifyFetch$.next(null)}},{key:"doFetch",value:function(){var e=this;return this.myUserStatus=d.Ov.loading,this.adminUsersApi.getMyUser().pipe((0,b.b)(function(t){(0,C.lH)(t,e.workspace),e.myUserStatus=d.Ov.loaded,e.onEdit()}),(0,x.K)(function(t){return e._errorMessage=t.error,e.myUserStatus=d.Ov.error,(0,Z.of)(null)}))}},{key:"onEdit",value:function(){var e=this.ws.get("AdminUser",this.ws.userSettings.UserId);this.myUser={Name:e.Name}}},{key:"onSave",value:function(e){var t=this;this._errorMessage=null,this._saveErrorMessage=null,(0,q.bU)(this.myUser),this.adminUsersApi.saveMyUser(this.myUser).subscribe(function(n){(0,C.lH)(n,t.workspace),e.close(!0)},function(e){if(422===e.status){var n=(0,q.zn)(t.myUser,e.error);Object.keys(n).length>0&&console.error(n)}else t._saveErrorMessage=e.error;return(0,Z.of)(null)})}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"saveErrorMessage",get:function(){return this._saveErrorMessage}},{key:"isMyUserLoaded",get:function(){return this.myUserStatus===d.Ov.loaded}},{key:"isMyUserError",get:function(){return this.myUserStatus===d.Ov.error}},{key:"isMyUserLoading",get:function(){return this.myUserStatus===d.Ov.loading}},{key:"myEmail",get:function(){return this.ws.get("AdminUser",this.ws.userSettings.UserId).Email}},{key:"canSave",get:function(){return this.isMyUserLoaded}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.AW),u.Y36(U.f),u.Y36(f.sK),u.Y36(I.K),u.Y36(T.e),u.Y36(_.V),u.Y36(N.s),u.Y36(m.K0),u.Y36(k.FF))},e.\u0275cmp=u.Xpm({type:e,selectors:[["t-admin-shell"]],viewQuery:function(e,t){var n;(1&e&&u.Gf(Y,7),2&e)&&(u.iGM(n=u.CRH())&&(t.myAccountModal=n.first))},decls:41,vars:35,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-light","shadow-sm","border-bottom","bg-white","navbar-expand-sm","p-0","align-items-sm-stretch"],["routerLink","main-menu",1,"t-brand-link","t-navbar-button","d-flex","align-items-baseline",3,"title"],["theme","light",3,"scale"],[1,"mx-2","d-flex"],["class","t-navbar-button nav-link",3,"disabled","click",4,"ngIf"],["type","button",1,"navbar-toggler","mx-2",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse","align-items-stretch",3,"ngbCollapse"],[1,"nav","navbar-nav","px-4","px-lg-0"],[1,"nav","navbar-nav","p-0"],["ngbDropdown","","container","",1,"nav-item"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","align-items-center"],[1,"px-2"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow","m-0"],["type","button","ngbDropdownItem","","routerLink","/root/companies",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","","routerLink","/root/welcome",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[4,"ngFor","ngForOf"],[1,"t-rest-of-screen","container-fluid"],["myAccountModal",""],[1,"t-navbar-button","nav-link",3,"disabled","click"],["icon","arrow-left",3,"flip"],["icon","arrow-right",3,"flip"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0","bg-white"],["class","row m-0 px-1 px-sm-3 pt-3 pt-sm-4 pb-3 pb-sm-5",4,"ngIf"],[4,"ngIf"],["class","d-flex justify-content-center py-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"row","m-0","px-1","px-sm-3","pt-3","pt-sm-4","pb-3","pb-sm-5"],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","py-2"],[3,"scale"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"nav",1),u.TgZ(2,"a",2),u.ALo(3,"translate"),u._UZ(4,"t-brand",3),u.qZA(),u.TgZ(5,"div",4),u.YNc(6,P,2,2,"button",5),u._uU(7," \xa0 "),u.YNc(8,j,2,2,"button",5),u.qZA(),u.TgZ(9,"button",6),u.NdJ("click",function(){return t.onToggleCollapse()}),u._UZ(10,"span",7),u.qZA(),u.TgZ(11,"div",8),u._UZ(12,"ol",9),u.TgZ(13,"ol",10),u.TgZ(14,"li",11),u.TgZ(15,"button",12),u.TgZ(16,"span",13),u._uU(17),u.qZA(),u.qZA(),u.TgZ(18,"div",14),u.TgZ(19,"button",15),u.NdJ("click",function(){return t.onCollapse()}),u._uU(20),u.ALo(21,"translate"),u.qZA(),u.TgZ(22,"button",16),u.NdJ("click",function(){return t.onCollapse()}),u._uU(23),u.ALo(24,"translate"),u.qZA(),u.TgZ(25,"button",17),u.NdJ("click",function(){return t.onMySystemAccount(),t.onCollapse()}),u._uU(26),u.ALo(27,"translate"),u.ALo(28,"translate"),u.qZA(),u.TgZ(29,"button",17),u.NdJ("click",function(){return t.onMyAdminAccount(),t.onCollapse()}),u._uU(30),u.ALo(31,"translate"),u.qZA(),u.TgZ(32,"button",17),u.NdJ("click",function(){return t.onSignOut(),t.onCollapse()}),u._uU(33),u.ALo(34,"translate"),u.qZA(),u._UZ(35,"hr"),u.YNc(36,H,2,1,"ng-container",18),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(37,"main",19),u._UZ(38,"router-outlet"),u.qZA(),u.qZA(),u.YNc(39,K,21,14,"ng-template",null,20,u.W1O)),2&e&&(u.xp6(2),u.Q6J("title",u.lcZ(3,18,"Home")),u.xp6(2),u.Q6J("scale",1),u.xp6(2),u.Q6J("ngIf",t.nav.showBack),u.xp6(2),u.Q6J("ngIf",t.nav.showForward),u.xp6(3),u.Q6J("ngbCollapse",t.isCollapsed),u.xp6(1),u.ekj("mr-auto",!t.isRtl)("ml-auto",t.isRtl),u.xp6(5),u.Oqu(t.userName),u.xp6(1),u.ekj("dropdown-menu-right",!t.isRtl),u.xp6(2),u.hij(" ",u.lcZ(21,20,"MyCompanies")," "),u.xp6(3),u.hij(" ",u.lcZ(24,22,"WelcomePage")," "),u.xp6(3),u.hij(" ",u.xi3(27,24,"My0Account",u.VKq(33,X,u.lcZ(28,27,"AppName")))," "),u.xp6(4),u.hij(" ",u.lcZ(31,29,"MyAdminAccount")," "),u.xp6(3),u.hij(" ",u.lcZ(34,31,"SignOut")," "),u.xp6(3),u.Q6J("ngForOf",t.activeLanguages))},directives:[k.M2,a.yS,E.Z,m.O5,k._D,k.jt,k.iD,k.Vi,k.TH,a.rH,m.sg,a.lC,p.BN,O.H,J.d,L.Q7,L.JJ,L.On,D.H,Q.O],pipes:[f.X$],encapsulation:2}),e}(),z=o(6528),ee=o(6063),te=o(2887),ne=o(5587),ie=o(5076),re=o(5046),oe=o(5533);function ae(e,t){if(1&e&&(u.TgZ(0,"div",11),u._UZ(1,"t-auto-cell",12),u.qZA(),u.TgZ(2,"div",13),u._UZ(3,"t-auto-cell",14),u._UZ(4,"t-auto-cell",15),u.qZA()),2&e){var n=t.id,i=u.oxw();u.xp6(1),u.Q6J("entity",i.c[n]),u.xp6(2),u.Q6J("entity",i.c[n]),u.xp6(1),u.Q6J("entity",i.c[n])}}function se(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"AdminUser"),"\n")}function le(e,t){if(1&e&&u._UZ(0,"t-auto-cell",16),2&e){var n=t.id,i=u.oxw();u.Q6J("entity",i.c[n])}}function ce(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"SendInvitationEmail")," ")}function ue(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"Activate")," ")}function de(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"Deactivate")," ")}function fe(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"CreatedByMe")," ")}function me(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"User_New")," ")}function pe(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"User_Invited")," ")}function ge(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"User_Member")," ")}var ve=function(e,t,n,i,r){return{template:e,action:t,canInvite:n,actionTooltip:i,showAction:r}},he=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},we=function(e,t,n){return[e,t,n]},Ae=function(e){return{template:e,expression:"CreatedById eq me"}},Ze=function(e){return[e]},ye=function(e){return{template:e,expression:"State eq 0"}},be=function(e){return{template:e,expression:"State eq 1"}},xe=function(e){return{template:e,expression:"State eq 2"}},Me=function(e,t){return{CreatedBy:e,State:t}},Ce=function(){var e=function(e){n(i,e);var t=r(i);function i(e,n,r){var o;return s(this,i),(o=t.call(this)).workspace=e,o.api=n,o.translate=r,o.adminUsersApi=o.api.adminUsersApi(o.notifyDestruct$),o.onActivate=function(e){return o.adminUsersApi.activate(e,{returnEntities:!0}).pipe((0,b.b)(function(e){return(0,C.DP)(e,o.workspace)}))},o.onDeactivate=function(e){return o.adminUsersApi.deactivate(e,{returnEntities:!0}).pipe((0,b.b)(function(e){return(0,C.DP)(e,o.workspace)}))},o.canActivateDeactivateItem=function(e){return o.ws.canDo("admin-users","IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.onInvite=function(e){return o.adminUsersApi.invite(e,{returnEntities:!0}).pipe((0,b.b)(function(e){return(0,C.DP)(e,o.workspace)}))},o.canInvite=function(e){return o.ws.canDo("admin-users","SendInvitationEmail",null)},o.inviteTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.showInvite=function(e){return o.workspace.globalSettings.CanInviteUsers},o.adminUsersApi=o.api.adminUsersApi(o.notifyDestruct$),o}return c(i,[{key:"c",get:function(){return this.ws.AdminUser}},{key:"ws",get:function(){return this.workspace.admin}},{key:"filterStateFilters",value:function(e){var t=this.workspace.globalSettings;return(this._filterStateFiltersInput!==e||this._globalSettings!==t)&&(this._filterStateFiltersInput=e,t.CanInviteUsers?this._filterStateFiltersResult=e:e?this._filterStateFiltersResult=e.filter(function(e){return"State eq 1"!==e.expression}):delete this._filterStateFiltersResult),this._filterStateFiltersResult}}]),i}(ie.W);return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.AW),u.Y36(N.s),u.Y36(f.sK))},e.\u0275cmp=u.Xpm({type:e,selectors:[["t-admin-users-master"]],features:[u.qOj],decls:22,vars:49,consts:[["collection","AdminUser","selectDefault","Email,State,LastAccess","selectForTiles","State,Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["invite",""],["activate",""],["deactivate",""],["createdByMe",""],["newUser",""],["invited",""],["member",""],[1,"d-flex","justify-content-between"],["collection","AdminUser","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","AdminUser","path","Email",3,"entity"],["collection","AdminUser","path","State",3,"entity"],["collection","AdminUser",3,"entity"]],template:function(e,t){if(1&e&&(u._UZ(0,"t-master",0),u.ALo(1,"translate"),u.YNc(2,ae,5,3,"ng-template",null,1,u.W1O),u.YNc(4,se,2,3,"ng-template",null,2,u.W1O),u.YNc(6,le,1,1,"ng-template",null,3,u.W1O),u.YNc(8,ce,2,3,"ng-template",null,4,u.W1O),u.YNc(10,ue,2,3,"ng-template",null,5,u.W1O),u.YNc(12,de,2,3,"ng-template",null,6,u.W1O),u.YNc(14,fe,2,3,"ng-template",null,7,u.W1O),u.YNc(16,me,2,3,"ng-template",null,8,u.W1O),u.YNc(18,pe,2,3,"ng-template",null,9,u.W1O),u.YNc(20,ge,2,3,"ng-template",null,10,u.W1O)),2&e){var n=u.MAs(3),i=u.MAs(5),r=u.MAs(7),o=u.MAs(9),a=u.MAs(11),s=u.MAs(13),l=u.MAs(15),c=u.MAs(17),d=u.MAs(19),f=u.MAs(21);u.Q6J("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",u.lcZ(1,10,"AdminUsers"))("tileTemplate",n)("tableSummaryColumnTemplate",r)("tableSummaryHeaderTemplate",i)("multiselectActions",u.kEZ(28,we,u.qbA(12,ve,o,t.onInvite,t.canInvite,t.inviteTooltip,t.showInvite),u.l5B(18,he,a,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),u.l5B(23,he,s,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",u.WLB(46,Me,u.VKq(34,Ze,u.VKq(32,Ae,l)),t.filterStateFilters(u.kEZ(42,we,u.VKq(36,ye,c),u.VKq(38,be,d),u.VKq(40,xe,f)))))}},directives:[re.c,oe.q_],pipes:[f.X$],encapsulation:2}),e}(),qe=o(7234),Se=o(6196),Ue=o(1851),Ie=o(6912),Te=o(7872),_e=o(7148);function Ne(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){var n=t.model;u.xp6(1),u.Oqu(null==n?null:n.Name)}}function ke(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"span"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.qZA()),2&e){var n=u.oxw().model;u.ekj("active",1===(null==n?null:n.State)),u.xp6(2),u.Oqu(u.lcZ(3,3,"User_Invited"))}}function Ee(e,t){if(1&e&&(u.TgZ(0,"div",7),u.TgZ(1,"t-restricted",8),u.TgZ(2,"div",9),u.TgZ(3,"div"),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.YNc(7,ke,4,5,"div",10),u.TgZ(8,"div"),u.TgZ(9,"span"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",11),u.TgZ(13,"span"),u._uU(14),u.ALo(15,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e){var n=t.model,i=u.oxw();u.xp6(1),u.Q6J("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.State),u.xp6(2),u.ekj("active",i.isNew||0===(null==n?null:n.State)),u.xp6(2),u.Oqu(u.lcZ(6,9,"User_New")),u.xp6(2),u.Q6J("ngIf",i.showInvitedState(n)),u.xp6(1),u.ekj("active",2===(null==n?null:n.State)),u.xp6(2),u.Oqu(u.lcZ(11,11,"User_Member")),u.xp6(4),u.Oqu(u.lcZ(15,13,2===(null==n?null:n.State)?"User_Member":1===(null==n?null:n.State)?"User_Invited":"User_New"))}}function Oe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",32),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2).model;return u.oxw().onInvite(e)}),u._uU(1),u.ALo(2,"translate"),u.qZA()}2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"SendInvitationEmail"),""))}var Je=function(e){return{name:e}};function Le(e,t){if(1&e&&(u.TgZ(0,"div",29),u.TgZ(1,"span"),u._UZ(2,"fa-icon",30),u._uU(3),u.ALo(4,"translate"),u.YNc(5,Oe,3,3,"button",31),u.qZA(),u.qZA()),2&e){var n=u.oxw().model,i=u.oxw();u.xp6(3),u.hij("\xa0\xa0",u.xi3(4,2,"AdminUserNewNotice",u.VKq(5,Je,null==n?null:n.Name))," \xa0\xa0"),u.xp6(2),u.Q6J("ngIf",i.canInvite(n))}}var De=function(e){return{email:e}};function Qe(e,t){if(1&e&&(u.TgZ(0,"div",29),u.TgZ(1,"span"),u._UZ(2,"fa-icon",30),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.qZA()),2&e){var n=u.oxw().model;u.xp6(3),u.hij("\xa0\xa0",u.xi3(4,1,"AdminUserFreshInvitedNotice",u.VKq(4,De,null==n?null:n.Email))," ")}}function Ye(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",32),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2).model;return u.oxw().onInvite(e)}),u._uU(1),u.ALo(2,"translate"),u.qZA()}2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"SendInvitationEmail"),""))}function Pe(e,t){if(1&e&&(u.TgZ(0,"div",29),u.TgZ(1,"span"),u._UZ(2,"fa-icon",30),u._uU(3),u.ALo(4,"translate"),u.YNc(5,Ye,3,3,"button",31),u.qZA(),u.qZA()),2&e){var n=u.oxw().model,i=u.oxw();u.xp6(3),u.hij("\xa0\xa0",u.xi3(4,2,"AdminUserExpiredInvitedNotice",u.VKq(5,Je,null==n?null:n.Name))," \xa0\xa0"),u.xp6(2),u.Q6J("ngIf",i.canInvite(n))}}function je(e,t){if(1&e&&(u.TgZ(0,"h2",33),u._uU(1),u.qZA()),2&e){var n=u.oxw().model;u.xp6(1),u.Oqu(null==n?null:n.Name)}}var Fe=function(){return{updateOn:"blur"}};function He(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-text-editor",34),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().model.Name=e}),u.ALo(1,"translate"),u.qZA()}if(2&e){var i=u.oxw().model;u.Q6J("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",u.DdM(6,Fe))("placeholder",u.lcZ(1,4,"Name"))}}function We(e,t){if(1&e&&(u.TgZ(0,"t-restricted",8),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e){var n=u.oxw().model;u.Q6J("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.IsService),u.xp6(1),u.hij(" ",u.lcZ(2,2,null!=n&&n.IsService?"Yes":"No")," ")}}function Re(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",35),u.TgZ(1,"input",36),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().model.IsService=e}),u.qZA(),u.TgZ(2,"label",37),u._uU(3,"\u200c"),u.qZA(),u.qZA()}if(2&e){var i=u.oxw().model;u.xp6(1),u.Q6J("ngModel",i.IsService)}}function Ve(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){var n=u.oxw(2).model;u.xp6(1),u.Oqu(null==n?null:n.Email)}}function Be(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-text-editor",40),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw(2).model.Email=e}),u.qZA()}if(2&e){var i=u.oxw(2).model,r=u.oxw();u.Q6J("ngModel",i.Email)("ngModelOptions",u.DdM(3,Fe))("disabled",!r.isNew)}}function $e(e,t){if(1&e&&(u.TgZ(0,"t-form-group",16),u.ALo(1,"translate"),u.YNc(2,Ve,2,1,"div",38),u.YNc(3,Be,1,4,"t-text-editor",39),u.qZA()),2&e){var n=u.oxw(),i=n.model,r=n.isEdit;u.Q6J("label",u.lcZ(1,4,"User_Email"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Email),u.xp6(2),u.Q6J("ngIf",!r),u.xp6(1),u.Q6J("ngIf",r)}}function Ke(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){var n=u.oxw(2).model;u.xp6(1),u.Oqu(null==n?null:n.ClientId)}}function Xe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-text-editor",42),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw(2).model.ClientId=e}),u.qZA()}if(2&e){var i=u.oxw(2).model,r=u.oxw();u.Q6J("ngModel",i.ClientId)("ngModelOptions",u.DdM(3,Fe))("disabled",!r.isNew)}}function Ge(e,t){if(1&e&&(u.TgZ(0,"t-form-group",16),u.ALo(1,"translate"),u.YNc(2,Ke,2,1,"div",38),u.YNc(3,Xe,1,4,"t-text-editor",41),u.qZA()),2&e){var n=u.oxw(),i=n.model,r=n.isEdit;u.Q6J("label",u.lcZ(1,4,"User_ClientId"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ClientId),u.xp6(2),u.Q6J("ngIf",!r),u.xp6(1),u.Q6J("ngIf",r)}}function ze(e,t){if(1&e&&(u.TgZ(0,"t-form-group",43),u.ALo(1,"translate"),u._UZ(2,"t-auto-cell",44),u.qZA()),2&e){var n=u.oxw().model;u.Q6J("label",u.lcZ(1,2,"User_LastActivity")),u.xp6(2),u.Q6J("entity",n)}}function et(e,t){if(1&e&&(u.TgZ(0,"t-form-group",43),u.ALo(1,"translate"),u.TgZ(2,"div"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.qZA()),2&e){var n=u.oxw().model;u.Q6J("label",u.lcZ(1,2,"IsActive")),u.xp6(3),u.Oqu(u.lcZ(4,4,n?n.IsActive?"Yes":"No":""))}}function tt(e,t){1&e&&(u.TgZ(0,"span",45),u._uU(1,"\xa0"),u._UZ(2,"fa-icon",46),u.qZA())}function nt(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.Oqu(u.lcZ(1,1,"Permission_View"))}function it(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){var n=u.oxw().item,i=u.oxw(3);u.xp6(1),u.hij(" ",i.permissionViewLookup(n.View)," ")}}function rt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-selector",58),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().item.View=e})("ngModelChange",function(){u.CHM(n);var e=u.oxw(),t=e.item,i=e.update,r=u.oxw(3);return i.call(null,t),r.onPermissionChanged(t)}),u.qZA()}if(2&e){var i=u.oxw().item,r=u.oxw(3);u.Q6J("choices",r.permissionViewChoices)("ngModel",i.View)("required",!i.PH)}}function ot(e,t){if(1&e&&(u.TgZ(0,"t-form-group-cell",56),u.YNc(1,it,2,1,"div",38),u.YNc(2,rt,1,3,"t-selector",57),u.qZA()),2&e){var n=t.item,i=u.oxw(2).isEdit;u.Q6J("serverErrors",null==n.serverErrors?null:n.serverErrors.View),u.xp6(1),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("ngIf",i)}}function at(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.Oqu(u.lcZ(1,1,"Permission_Action"))}function st(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e){var n=u.oxw().item,i=u.oxw(3);u.xp6(1),u.Oqu(u.lcZ(2,1,i.permissionActionLookup(null==n?null:n.Action)))}}function lt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-selector",60),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().item.Action=e})("ngModelChange",function(){u.CHM(n);var e=u.oxw(),t=e.item,i=e.update,r=u.oxw(3);return i.call(null,t),r.onPermissionChanged(t)}),u.qZA()}if(2&e){var i=u.oxw().item,r=u.oxw(3);u.Q6J("ngModel",i.Action)("required",!i.PH)("ngModelOptions",u.DdM(5,Fe))("choices",r.permissionActionChoices(i))("disabled",!i.View)}}function ct(e,t){if(1&e&&(u.TgZ(0,"t-form-group-cell",56),u.YNc(1,st,3,3,"div",38),u.YNc(2,lt,1,6,"t-selector",59),u.qZA()),2&e){var n=t.item,i=u.oxw(2).isEdit;u.Q6J("serverErrors",null==n.serverErrors?null:n.serverErrors.Action),u.xp6(1),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("ngIf",i)}}function ut(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.Oqu(u.lcZ(1,1,"Permission_Criteria"))}function dt(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){var n=u.oxw().item;u.xp6(1),u.Oqu(n.Criteria)}}function ft(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-text-editor",62),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().item.Criteria=e})("ngModelChange",function(){u.CHM(n);var e=u.oxw();return e.update.call(null,e.item)}),u.qZA()}if(2&e){var i=u.oxw().item,r=u.oxw(3);u.Q6J("ngModel",i.Criteria)("ngModelOptions",u.DdM(3,Fe))("disabled",r.disableCriteria(i))}}function mt(e,t){if(1&e&&(u.TgZ(0,"t-form-group-cell",56),u.YNc(1,dt,2,1,"div",38),u.YNc(2,ft,1,4,"t-text-editor",61),u.qZA()),2&e){var n=t.item,i=u.oxw(2).isEdit;u.Q6J("serverErrors",null==n.serverErrors?null:n.serverErrors.Criteria),u.xp6(1),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("ngIf",i)}}function pt(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.Oqu(u.lcZ(1,1,"Memo"))}function gt(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){var n=u.oxw().item;u.xp6(1),u.Oqu(n.Memo)}}function vt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-text-editor",64),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().item.Memo=e})("ngModelChange",function(){u.CHM(n);var e=u.oxw();return e.update.call(null,e.item)}),u.qZA()}if(2&e){var i=u.oxw().item;u.Q6J("ngModel",i.Memo)("ngModelOptions",u.DdM(2,Fe))}}function ht(e,t){if(1&e&&(u.TgZ(0,"t-form-group-cell",56),u.YNc(1,gt,2,1,"div",38),u.YNc(2,vt,1,3,"t-text-editor",63),u.qZA()),2&e){var n=t.item,i=u.oxw(2).isEdit;u.Q6J("serverErrors",null==n.serverErrors?null:n.serverErrors.Memo),u.xp6(1),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("ngIf",i)}}var wt=function(){return["View","Action","Criteria","Memo"]},At=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Zt=function(e,t,n,i){return{View:e,Action:t,Criteria:n,Memo:i}};function yt(e,t){if(1&e&&(u.TgZ(0,"t-restricted",8),u._UZ(1,"t-table",47),u.qZA(),u.YNc(2,nt,2,3,"ng-template",null,48,u.W1O),u.YNc(4,ot,3,3,"ng-template",null,49,u.W1O),u.YNc(6,at,2,3,"ng-template",null,50,u.W1O),u.YNc(8,ct,3,3,"ng-template",null,51,u.W1O),u.YNc(10,ut,2,3,"ng-template",null,52,u.W1O),u.YNc(12,mt,3,3,"ng-template",null,53,u.W1O),u.YNc(14,pt,2,3,"ng-template",null,54,u.W1O),u.YNc(16,ht,3,3,"ng-template",null,55,u.W1O)),2&e){var n=u.MAs(3),i=u.MAs(5),r=u.MAs(7),o=u.MAs(9),a=u.MAs(11),s=u.MAs(13),l=u.MAs(15),c=u.MAs(17),d=u.oxw(),f=d.model,m=d.isEdit;u.ekj("p-4",1===(null==f||null==f.EntityMetadata?null:f.EntityMetadata.Permissions)),u.Q6J("metadata",null==f||null==f.EntityMetadata?null:f.EntityMetadata.Permissions),u.xp6(1),u.Q6J("dataSource",null==f?null:f.Permissions)("isEdit",m)("columnPaths",u.DdM(7,wt))("columnTemplates",u.l5B(20,Zt,u.WLB(8,At,n,i),u.WLB(11,At,r,o),u.WLB(14,At,a,s),u.WLB(17,At,l,c)))}}function bt(e,t){if(1&e&&(u.YNc(0,Le,6,7,"div",12),u.YNc(1,Qe,5,6,"div",12),u.YNc(2,Pe,6,7,"div",12),u.TgZ(3,"t-form-group",13),u.YNc(4,je,2,1,"h2",14),u.YNc(5,He,2,7,"t-text-editor",15),u.qZA(),u.TgZ(6,"t-form-group",16),u.ALo(7,"translate"),u.YNc(8,We,3,4,"t-restricted",17),u.YNc(9,Re,4,1,"div",18),u.qZA(),u.YNc(10,$e,4,6,"t-form-group",19),u.YNc(11,Ge,4,6,"t-form-group",19),u.YNc(12,ze,3,4,"t-form-group",20),u.YNc(13,et,5,6,"t-form-group",20),u.TgZ(14,"ul",21,22),u.TgZ(16,"li",23),u.TgZ(17,"a",24),u.TgZ(18,"span",25),u._uU(19),u.ALo(20,"translate"),u.ALo(21,"number"),u.qZA(),u.YNc(22,tt,3,0,"span",26),u.qZA(),u.YNc(23,yt,18,25,"ng-template",27),u.qZA(),u.qZA(),u._UZ(24,"div",28)),2&e){var n=t.model,i=t.isEdit,r=u.MAs(15),o=u.oxw();u.Q6J("ngIf",o.showUserNewNotice(n,i)),u.xp6(1),u.Q6J("ngIf",o.showUserFreshInvitedNotice(n)),u.xp6(1),u.Q6J("ngIf",o.showUserExpiredInvitedNotice(n,i)),u.xp6(1),u.Q6J("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Name),u.xp6(1),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("ngIf",i),u.xp6(1),u.Q6J("label",u.lcZ(7,19,"User_IsService"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.IsService),u.xp6(2),u.Q6J("ngIf",!i||!o.isNew),u.xp6(1),u.Q6J("ngIf",i&&o.isNew),u.xp6(1),u.Q6J("ngIf",!(null!=n&&n.IsService)),u.xp6(1),u.Q6J("ngIf",null==n?null:n.IsService),u.xp6(1),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("destroyOnHide",!0),u.xp6(2),u.Q6J("disabled",!0),u.xp6(3),u.Oqu(u.lcZ(20,21,"User_Permissions")+(n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Permissions)?"":" ("+u.lcZ(21,23,null==n||null==n.Permissions?null:n.Permissions.length)+")")),u.xp6(3),u.Q6J("ngIf",o.showPermissionsError(n)),u.xp6(2),u.Q6J("ngbNavOutlet",r)}}function xt(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"Activate")," ")}function Mt(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"Deactivate")," ")}function Ct(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"SendInvitationEmail")," ")}var qt=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},St=function(e,t,n){return[e,t,n]},Ut=function(){var t=function(t){n(o,t);var i=r(o);function o(e,t,n,r){var a;return s(this,o),(a=i.call(this)).workspace=e,a.api=t,a.translate=n,a.route=r,a.showRoles=!0,a.expand="Permissions",a.adminUsersApi=a.api.adminUsersApi(a.notifyDestruct$),a._permissionActionChoices={},a._viewsDb=null,a._currentViewsDb=null,a._viewsForSelector=null,a.create=function(){var e={};return e.Name=a.initialText,e.IsService=!1,e.Permissions=[],e},a.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Permissions&&t.Permissions.forEach(function(e){e.Id=null}),t}return console.error("Cloning a non existing item"),null},a.onInvite=function(e){e&&e.Id&&a.adminUsersApi.invite([e.Id],{returnEntities:!0}).pipe((0,b.b)(function(e){return(0,C.DP)(e,a.workspace)})).subscribe({error:a.details.handleActionError})},a.showInvite=function(e){return!!e&&e.State<=1&&a.showInvitedState(e)},a.canInvite=function(e){return a.ws.canDo("admin-users","SendInvitationEmail",e.Id)},a.inviteTooltip=function(e){return a.canInvite(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.onActivate=function(e){e&&e.Id&&a.adminUsersApi.activate([e.Id],{returnEntities:!0}).pipe((0,b.b)(function(e){return(0,C.DP)(e,a.workspace)})).subscribe({error:a.details.handleActionError})},a.onDeactivate=function(e){e&&e.Id&&a.adminUsersApi.deactivate([e.Id],{returnEntities:!0}).pipe((0,b.b)(function(e){return(0,C.DP)(e,a.workspace)})).subscribe({error:a.details.handleActionError})},a.showActivate=function(e){return!!e&&!e.IsActive},a.showDeactivate=function(e){return!!e&&e.IsActive},a.canActivateDeactivateItem=function(e){return a.ws.canDo("admin-users","IsActive",e.Id)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.savePreprocessing=function(e){e.IsService?delete e.Email:delete e.ClientId},a.adminUsersApi=a.api.adminUsersApi(a.notifyDestruct$),a}return c(o,[{key:"showInvitedState",value:function(e){return this.workspace.globalSettings.CanInviteUsers&&!e.IsService}},{key:"showUserNewNotice",value:function(e,t){return!t&&!!e&&!!e.Id&&!e.State&&!e.IsService&&this.workspace.globalSettings.CanInviteUsers}},{key:"showUserFreshInvitedNotice",value:function(e){return!!e&&!!e.Id&&1===e.State&&(0,C.M2)(new Date(e.InvitedAt),new Date)<this.workspace.globalSettings.TokenExpiryInDays}},{key:"showUserExpiredInvitedNotice",value:function(e,t){return!t&&!!e&&!!e.Id&&1===e.State&&(0,C.M2)(new Date(e.InvitedAt),new Date)>=this.workspace.globalSettings.TokenExpiryInDays}},{key:"ws",get:function(){return this.workspace.admin}},{key:"showInvitationInfo",value:function(e){return!!e&&!!e.Email&&this.isNew}},{key:"isNew",get:function(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}},{key:"showPermissionsError",value:function(e){return!!e&&!!e.Permissions&&e.Permissions.some(function(e){return!!e.serverErrors})}},{key:"viewsDb",get:function(){var t=this;if(this._currentLang!==this.translate.currentLang){this._currentLang=this.translate.currentLang,this._viewsDb={};for(var n=function(){var n=r[i],o=Se.XM[n],a={name:function(){return t.translate.instant(o.name)},actions:{}};a.actions.All={supportsCriteria:!1},o.read&&(a.actions.Read={supportsCriteria:!0}),o.update&&(a.actions.Update={supportsCriteria:!0}),o.delete&&(a.actions.Delete={supportsCriteria:!0});var s,l=e(o.actions);try{for(l.s();!(s=l.n()).done;){var c=s.value;a.actions[c.action]={supportsCriteria:c.criteria}}}catch(u){l.e(u)}finally{l.f()}t._viewsDb[n]=a},i=0,r=Object.keys(Se.XM);i<r.length;i++)n()}return this._viewsDb}},{key:"permissionViewChoices",get:function(){if(this._currentViewsDb!==this.viewsDb){var e=this.viewsDb;this._currentViewsDb=e,this._viewsForSelector=Object.keys(e).map(function(t){return{value:t,name:e[t].name}}),this._viewsForSelector.sort(function(e,t){return e.name()<t.name()?-1:e.name()>t.name()?1:0})}return this._viewsForSelector}},{key:"permissionViewLookup",value:function(e){return e?this.viewsDb[e]?this.viewsDb[e].name():(console.error("missing view ".concat(e)),""):""}},{key:"onPermissionChanged",value:function(e){var t=this.permissionActionChoices(e);1===t.length?e.Action=t[0].value:!!e.Action&&t.every(function(t){return t.value!==e.Action})&&(e.Action=null),this.disableCriteria(e)&&(e.Criteria=null)}},{key:"disableCriteria",value:function(e){if(!e||!e.View||!e.Action)return!0;var t=this.viewsDb[e.View];if(t&&t.actions){var n=t.actions[e.Action];return!(n&&n.supportsCriteria)}return!0}},{key:"permissionActionChoices",value:function(e){var t=this;if(!e.View)return[];if(!this._permissionActionChoices[e.View]){var n=this.viewsDb[e.View];this._permissionActionChoices[e.View]=n&&n.actions?Object.keys(n.actions).map(function(e){return{name:function(){return t.translate.instant(Se.aO[e])},value:e}}):[]}return this._permissionActionChoices[e.View]}},{key:"permissionActionLookup",value:function(e){return e?"All"===e?"View_All":Se.aO[e]:""}}]),o}(qe.N);return t.\u0275fac=function(e){return new(e||t)(u.Y36(d.AW),u.Y36(N.s),u.Y36(f.sK),u.Y36(a.gz))},t.\u0275cmp=u.Xpm({type:t,selectors:[["t-admin-users-details"]],inputs:{showRoles:"showRoles"},features:[u.qOj],decls:14,vars:36,consts:[["collection","AdminUser",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","documentHeaderTemplate","savePreprocessing","actions"],["detailsCrumb",""],["documentHeader",""],["document",""],["activate",""],["deactivate",""],["invite",""],[1,"w-100","t-document-header","d-flex","justify-content-end"],[3,"metadata"],[1,"t-flow-chart","small"],[3,"active",4,"ngIf"],[1,"small","t-lone-state","active","d-none"],["class","col-12 alert-primary p-2 px-3 mb-3 mb-sm-4",4,"ngIf"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[3,"metadata",4,"ngIf"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","permissions",3,"disabled"],["ngbNavLink",""],[1,"small","t-slightly-bold"],["class","text-danger",4,"ngIf"],["ngbNavContent",""],[1,"w-100",3,"ngbNavOutlet"],[1,"col-12","alert-primary","p-2","px-3","mb-3","mb-sm-4"],["icon","info-circle"],["class","btn btn-primary btn-sm py-0 align-baseline",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm","py-0","align-baseline",3,"click"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isService",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isService",1,"custom-control-label","t-pointer"],[4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["required","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"t-form-group",3,"label"],["collection","AdminUser","path","LastAccess",3,"entity"],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_View",""],["row_View",""],["header_Action",""],["row_Action",""],["header_Criteria",""],["row_Criteria",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"choices","ngModel","required","ngModelChange",4,"ngIf"],[3,"choices","ngModel","required","ngModelChange"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(u._UZ(0,"t-details",0),u.ALo(1,"translate"),u.YNc(2,Ne,2,1,"ng-template",null,1,u.W1O),u.YNc(4,Ee,16,15,"ng-template",null,2,u.W1O),u.YNc(6,bt,25,25,"ng-template",null,3,u.W1O),u.YNc(8,xt,2,3,"ng-template",null,4,u.W1O),u.YNc(10,Mt,2,3,"ng-template",null,5,u.W1O),u.YNc(12,Ct,2,3,"ng-template",null,6,u.W1O)),2&e){var n=u.MAs(3),i=u.MAs(5),r=u.MAs(7),o=u.MAs(9),a=u.MAs(11),s=u.MAs(13);u.Q6J("expand",t.expand)("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",u.lcZ(1,12,"AdminUsers"))("detailsCrumb",n)("documentTemplate",r)("documentHeaderTemplate",i)("savePreprocessing",t.savePreprocessing)("actions",u.kEZ(32,St,u.qbA(14,qt,s,t.onInvite,t.showInvite,t.canInvite,t.inviteTooltip),u.qbA(20,qt,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),u.qbA(26,qt,a,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.MC,Ue.s,m.O5,O.H,k.Pz,k.nv,k.Vx,k.uN,k.tO,p.BN,J.d,L.Q7,L.JJ,L.On,L.Wl,L.on,oe.q_,Ie.a,Te.s,_e.i],pipes:[f.X$,m.JJ],encapsulation:2}),t}(),It=o(9976);function Tt(e,t){if(1&e&&(u.TgZ(0,"div",8),u._UZ(1,"t-auto-cell",9),u.qZA(),u.TgZ(2,"div",10),u.TgZ(3,"span",11),u._uU(4,"\xa0"),u.qZA(),u.qZA()),2&e){var n=t.id,i=u.oxw();u.xp6(1),u.Q6J("entity",i.c[n])}}function _t(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"IdentityServerUser"),"\n")}function Nt(e,t){if(1&e&&u._UZ(0,"t-auto-cell",12),2&e){var n=t.id,i=u.oxw();u.Q6J("entity",i.c[n])}}function kt(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"EmailConfirmed")," ")}function Et(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"EmailNotConfirmed")," ")}function Ot(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"PasswordIsSet")," ")}function Jt(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"PasswordIsNotSet")," ")}var Lt=function(){return[]},Dt=function(e){return{template:e,expression:"EmailConfirmed eq true"}},Qt=function(e){return{template:e,expression:"EmailConfirmed eq false"}},Yt=function(e,t){return[e,t]},Pt=function(e){return{template:e,expression:"PasswordSet eq true"}},jt=function(e){return{template:e,expression:"PasswordSet eq false"}},Ft=function(e,t){return{EmailConfirmed:e,PasswordSet:t}},Ht=function(){var e=function(e){n(i,e);var t=r(i);function i(e){var n;return s(this,i),(n=t.call(this)).workspace=e,n}return c(i,[{key:"c",get:function(){return this.ws.IdentityServerUser}},{key:"ws",get:function(){return this.workspace.admin}}]),i}(ie.W);return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.AW))},e.\u0275cmp=u.Xpm({type:e,selectors:[["t-identity-server-users-master"]],features:[u.qOj],decls:16,vars:32,consts:[["collection","IdentityServerUser","selectDefault","EmailConfirmed,PasswordSet,TwoFactorEnabled","selectForTiles","Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","showImportButton","showDeleteButton","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["emailConfirmed",""],["emailNotConfirmed",""],["passwordSet",""],["passwordNotSet",""],[1,"d-flex","justify-content-between"],["collection","IdentityServerUser","path","Email",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"d-block","text-truncate"],["collection","IdentityServerUser",3,"entity"]],template:function(e,t){if(1&e&&(u._UZ(0,"t-master",0),u.ALo(1,"translate"),u.YNc(2,Tt,5,1,"ng-template",null,1,u.W1O),u.YNc(4,_t,2,3,"ng-template",null,2,u.W1O),u.YNc(6,Nt,1,1,"ng-template",null,3,u.W1O),u.YNc(8,kt,2,3,"ng-template",null,4,u.W1O),u.YNc(10,Et,2,3,"ng-template",null,5,u.W1O),u.YNc(12,Ot,2,3,"ng-template",null,6,u.W1O),u.YNc(14,Jt,2,3,"ng-template",null,7,u.W1O)),2&e){var n=u.MAs(3),i=u.MAs(5),r=u.MAs(7),o=u.MAs(9),a=u.MAs(11),s=u.MAs(13),l=u.MAs(15);u.Q6J("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",u.lcZ(1,12,"IdentityServerUsers"))("tileTemplate",n)("tableSummaryColumnTemplate",r)("tableSummaryHeaderTemplate",i)("showImportButton",!1)("showDeleteButton",!1)("multiselectActions",u.DdM(14,Lt))("filterDefinition",u.WLB(29,Ft,u.WLB(19,Yt,u.VKq(15,Dt,o),u.VKq(17,Qt,a)),u.WLB(26,Yt,u.VKq(22,Pt,s),u.VKq(24,jt,l))))}},directives:[re.c,oe.q_],pipes:[f.X$],encapsulation:2}),e}(),Wt=["resetPasswordModal"];function Rt(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){var n=t.model;u.xp6(1),u.Oqu(null==n?null:n.Email)}}function Vt(e,t){if(1&e&&(u.TgZ(0,"t-form-group",5),u.TgZ(1,"h2",6),u._uU(2),u.qZA(),u.qZA(),u.TgZ(3,"t-form-group",7),u.ALo(4,"translate"),u.TgZ(5,"div"),u._uU(6),u.ALo(7,"translate"),u.qZA(),u.qZA(),u.TgZ(8,"t-form-group",7),u.ALo(9,"translate"),u.TgZ(10,"div"),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.qZA(),u.TgZ(13,"t-form-group",7),u.ALo(14,"translate"),u.TgZ(15,"div"),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.qZA(),u.TgZ(18,"t-form-group",7),u.ALo(19,"translate"),u._UZ(20,"t-auto-cell",8),u.qZA()),2&e){var n=t.model;u.xp6(2),u.Oqu(null==n?null:n.Email),u.xp6(1),u.Q6J("label",u.lcZ(4,9,"IdentityServerUser_EmailConfirmed")),u.xp6(3),u.hij("",u.lcZ(7,11,!0===n.EmailConfirmed?"Yes":!1===n.EmailConfirmed?"No":"")," "),u.xp6(2),u.Q6J("label",u.lcZ(9,13,"IdentityServerUser_PasswordSet")),u.xp6(3),u.hij("",u.lcZ(12,15,!0===n.PasswordSet?"Yes":!1===n.PasswordSet?"No":"")," "),u.xp6(2),u.Q6J("label",u.lcZ(14,17,"IdentityServerUser_TwoFactorEnabled")),u.xp6(3),u.hij("",u.lcZ(17,19,!0===n.TwoFactorEnabled?"Yes":!1===n.TwoFactorEnabled?"No":"")," "),u.xp6(2),u.Q6J("label",u.lcZ(19,21,"IdentityServerUser_LockoutEnd")),u.xp6(2),u.Q6J("entity",n)}}function Bt(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"ResetPassword")," ")}function $t(e,t){if(1&e&&(u.TgZ(0,"t-error-message"),u._uU(1),u.qZA()),2&e){var n=u.oxw(2);u.xp6(1),u.hij(" ",n.resetPasswordError," ")}}function Kt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",9),u.TgZ(1,"h5",10),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"button",11),u.NdJ("click",function(){return u.CHM(n).$implicit.dismiss()}),u.TgZ(5,"span",12),u._uU(6,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"div",13),u.TgZ(8,"t-form-group",14),u.ALo(9,"translate"),u.TgZ(10,"div"),u._uU(11),u.qZA(),u.qZA(),u.TgZ(12,"t-form-group",14),u.ALo(13,"translate"),u.TgZ(14,"t-text-editor",15),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().newPassword=e}),u.qZA(),u.TgZ(15,"label",16),u.NdJ("click",function(){return u.CHM(n),u.oxw().togglePasswordVisibility()}),u.ALo(16,"translate"),u._UZ(17,"fa-icon",17),u.qZA(),u.qZA(),u.YNc(18,$t,2,1,"t-error-message",18),u.qZA(),u.TgZ(19,"div",19),u.TgZ(20,"button",20),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().resetPasswordClick(e)}),u._UZ(21,"fa-icon",21),u._uU(22),u.ALo(23,"translate"),u.qZA(),u.TgZ(24,"button",22),u.NdJ("click",function(){return u.CHM(n).$implicit.dismiss()}),u._UZ(25,"fa-icon",23),u._uU(26),u.ALo(27,"translate"),u.qZA(),u.qZA()}if(2&e){var i=u.oxw();u.xp6(2),u.hij(" ",u.lcZ(3,15,"ResetPassword")," "),u.xp6(6),u.Q6J("label",u.lcZ(9,17,"User_Email"))("serverErrors",null),u.xp6(3),u.Oqu(null==i.modelRef?null:i.modelRef.Email),u.xp6(1),u.Q6J("label",u.lcZ(13,19,"NewPassword"))("serverErrors",null),u.xp6(2),u.Q6J("ngModel",i.newPassword)("type",i.passwordFieldType)("focusIf",!0),u.xp6(1),u.s9C("title",u.lcZ(16,21,"ShowHidePassword")),u.xp6(2),u.Q6J("icon",i.isPasswordShown?"eye-slash":"eye"),u.xp6(1),u.Q6J("ngIf",!!i.resetPasswordError),u.xp6(2),u.Q6J("disabled",!i.newPassword),u.xp6(2),u.hij(" \xa0",u.lcZ(23,23,"ResetPassword")," "),u.xp6(4),u.hij(" \xa0",u.lcZ(27,25,"Cancel")," ")}}var Xt=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},Gt=function(e){return[e]},zt=function(){var e=function(e){n(i,e);var t=r(i);function i(e,n,r,o){var a;return s(this,i),(a=t.call(this)).workspace=e,a.api=n,a.translate=r,a.modalService=o,a.expand="",a._showPassword=!1,a.identityServerUsersApi=a.api.identityServerUsersApi(a.notifyDestruct$),a.onResetPassword=function(e){e&&e.Id&&(a.modelRef=e,a.modalService.open(a.resetPasswordModal).result.then(function(){a.resetPasswordError=null,a.newPassword=null,a._showPassword=!1},function(e){a.resetPasswordError=null,a.newPassword=null,a._showPassword=!1}))},a.showResetPassword=function(e){return!!e},a.canResetPassword=function(e){return a.ws.canDo("identity-server-users","ResetPassword",e.Id)},a.resetPasswordTooltip=function(e){return a.canResetPassword(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.identityServerUsersApi=a.api.identityServerUsersApi(a.notifyDestruct$),a}return c(i,[{key:"ws",get:function(){return this.workspace.admin}},{key:"resetPasswordClick",value:function(e){var t=this;this.resetPasswordError=null,this.identityServerUsersApi.resetPassword({userId:this.modelRef.Id,password:this.newPassword}).pipe((0,b.b)(function(n){(0,C.DP)(n,t.workspace),e.close(),t.details.displayModalMessage(t.translate.instant("PasswordWasSuccessfullyReset"))}),(0,x.K)(function(e){return t.resetPasswordError=e.error})).subscribe()}},{key:"togglePasswordVisibility",value:function(){this._showPassword=!this._showPassword}},{key:"isPasswordShown",get:function(){return this._showPassword}},{key:"passwordFieldType",get:function(){return this.isPasswordShown?"text":"password"}}]),i}(qe.N);return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.AW),u.Y36(N.s),u.Y36(f.sK),u.Y36(k.FF))},e.\u0275cmp=u.Xpm({type:e,selectors:[["t-identity-server-users-details"]],viewQuery:function(e,t){var n;(1&e&&u.Gf(Wt,7),2&e)&&(u.iGM(n=u.CRH())&&(t.resetPasswordModal=n.first))},features:[u.qOj],decls:10,vars:21,consts:[["collection","IdentityServerUser",3,"expand","idString","mode","additionalSelect","showCreateButton","showDeleteButton","showEditButton","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["resetPassword",""],["resetPasswordModal",""],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label"],["collection","IdentityServerUser","path","LockoutEnd",3,"entity"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","type","focusIf","ngModelChange"],[1,"btn","btn-sm","text-primary","t-pointer","mx-1",3,"title","click"],[3,"icon"],[4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","check"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(u._UZ(0,"t-details",0),u.ALo(1,"translate"),u.YNc(2,Rt,2,1,"ng-template",null,1,u.W1O),u.YNc(4,Vt,21,23,"ng-template",null,2,u.W1O),u.YNc(6,Bt,2,3,"ng-template",null,3,u.W1O),u.YNc(8,Kt,28,27,"ng-template",null,4,u.W1O)),2&e){var n=u.MAs(3),i=u.MAs(5),r=u.MAs(7);u.Q6J("expand",t.expand)("idString",t.idString)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showDeleteButton",!1)("showEditButton",!1)("masterCrumb",u.lcZ(1,11,"IdentityServerUsers"))("detailsCrumb",n)("documentTemplate",i)("actions",u.VKq(19,Gt,u.qbA(13,Xt,r,t.onResetPassword,t.showResetPassword,t.canResetPassword,t.resetPasswordTooltip)))}},directives:[q.MC,O.H,oe.q_,J.d,L.Q7,L.JJ,L.On,p.BN,m.O5,D.H],pipes:[f.X$],encapsulation:2}),e}(),en=["resetSecretConfirmModal"];function tn(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){var n=t.model;u.xp6(1),u.Oqu(null==n?null:n.Name)}}function nn(e,t){if(1&e&&(u.TgZ(0,"h2",11),u._uU(1),u.qZA()),2&e){var n=u.oxw().model;u.xp6(1),u.Oqu(null==n?null:n.Name)}}var rn=function(){return{updateOn:"blur"}};function on(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-text-editor",12),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().model.Name=e}),u.ALo(1,"translate"),u.qZA()}if(2&e){var i=u.oxw().model;u.Q6J("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",u.DdM(6,rn))("placeholder",u.lcZ(1,4,"Name"))}}function an(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){var n=u.oxw().model;u.xp6(1),u.Oqu(null==n?null:n.Memo)}}function sn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"t-text-editor",13),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().model.Memo=e}),u.qZA()}if(2&e){var i=u.oxw().model;u.Q6J("ngModel",i.Memo)("ngModelOptions",u.DdM(2,rn))}}function ln(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div"),u._uU(1),u.TgZ(2,"button",17),u.NdJ("click",function(){return u.CHM(n),u.oxw(3).onHideSecret()}),u._uU(3,"Hide"),u.qZA(),u.qZA()}if(2&e){var i=u.oxw(2).model;u.xp6(1),u.Oqu(null==i?null:i.ClientSecret)}}function cn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"span"),u._uU(2,"**********"),u.qZA(),u.TgZ(3,"button",17),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2).model;return u.oxw().onShowSecret(e)}),u._uU(4,"Show"),u.qZA(),u.qZA()}}function un(e,t){if(1&e&&(u.ynx(0),u._UZ(1,"div",14),u.TgZ(2,"t-form-group",8),u.ALo(3,"translate"),u.TgZ(4,"div"),u._uU(5),u.qZA(),u.qZA(),u.TgZ(6,"t-form-group",8),u.ALo(7,"translate"),u.YNc(8,ln,4,1,"div",15),u.YNc(9,cn,5,0,"ng-template",null,16,u.W1O),u.qZA(),u.BQk()),2&e){var n=u.MAs(10),i=u.oxw().model,r=u.oxw();u.xp6(2),u.Q6J("label",u.lcZ(3,7,"IdentityServerClient_ClientId"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ClientId),u.xp6(3),u.Oqu(null==i?null:i.ClientId),u.xp6(1),u.Q6J("label",u.lcZ(7,9,"IdentityServerClient_ClientSecret"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ClientSecret),u.xp6(2),u.Q6J("ngIf",r.showSecret(i))("ngIfElse",n)}}function dn(e,t){if(1&e&&(u.TgZ(0,"t-form-group",5),u.YNc(1,nn,2,1,"h2",6),u.YNc(2,on,2,7,"t-text-editor",7),u.qZA(),u.TgZ(3,"t-form-group",8),u.ALo(4,"translate"),u.YNc(5,an,2,1,"div",9),u.YNc(6,sn,1,3,"t-text-editor",10),u.qZA(),u.YNc(7,un,11,11,"ng-container",9)),2&e){var n=t.model,i=t.isEdit,r=u.oxw();u.Q6J("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Name),u.xp6(1),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("ngIf",i),u.xp6(1),u.Q6J("label",u.lcZ(4,8,"Memo"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Memo),u.xp6(2),u.Q6J("ngIf",!i),u.xp6(1),u.Q6J("ngIf",i),u.xp6(1),u.Q6J("ngIf",!r.isNew)}}function fn(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"ResetSecret")," ")}function mn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",18),u.TgZ(1,"h5",19),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"button",20),u.NdJ("click",function(){return u.CHM(n).$implicit.dismiss()}),u.TgZ(5,"span",21),u._uU(6,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"div",22),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.TgZ(10,"div",23),u.TgZ(11,"button",24),u.NdJ("click",function(){var e=u.CHM(n).$implicit,t=u.oxw();return e.dismiss(),t.doResetSecret()}),u._UZ(12,"fa-icon",25),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"button",26),u.NdJ("click",function(){return u.CHM(n).$implicit.dismiss()}),u._UZ(16,"fa-icon",27),u._uU(17),u.ALo(18,"translate"),u.qZA(),u.qZA()}2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,4,"Confirmation")," "),u.xp6(6),u.hij(" ",u.lcZ(9,6,"ResetSecretConfirmationMessage")," "),u.xp6(5),u.hij(" \xa0",u.lcZ(14,8,"Proceed")," "),u.xp6(4),u.hij(" \xa0",u.lcZ(18,10,"Cancel")," "))}var pn=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},gn=function(e){return[e]},vn=function(){var e=function(e){n(i,e);var t=r(i);function i(e,n,r,o,a){var l;return s(this,i),(l=t.call(this)).workspace=e,l.route=n,l.api=r,l.translate=o,l.modalService=a,l.clientsApi=l.api.identityServerClientsApi(l.notifyDestruct$),l.expand="",l.create=function(){var e={};return e.Name=l.initialText,e},l.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,delete t.ClientId,delete t.ClientSecret,t}return console.error("Cloning a non existing item"),null},l.onResetSecret=function(e){l.modelRef=e,l.modalService.open(l.unsavedChangesModal)},l.doResetSecret=function(){var e=l.modelRef;l.showResetSecret(e)&&l.clientsApi.resetSecret({id:e.Id,returnEntities:!0}).pipe((0,b.b)(function(e){(0,C.DP)(e,l.workspace),l.details.displayModalMessage(l.translate.instant("ResetSecretSuccessMessage"))})).subscribe({error:l.details.handleActionError})},l.showResetSecret=function(e){return!!e&&!!e.Id},l.canResetSecret=function(e){return l.ws.canDo("identity-server-clients","Update",e.Id)},l.resetSecretTooltip=function(e){return l.canResetSecret(e)?"":l.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},l.clientsApi=l.api.identityServerClientsApi(l.notifyDestruct$),l}return c(i,[{key:"ws",get:function(){return this.workspace.admin}},{key:"isNew",get:function(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}},{key:"isInactive",value:function(){return!1}},{key:"showSecret",value:function(e){return this.modelForShowClientSecret===e||(delete this.modelForShowClientSecret,!1)}},{key:"onShowSecret",value:function(e){this.modelForShowClientSecret=e}},{key:"onHideSecret",value:function(){delete this.modelForShowClientSecret}}]),i}(qe.N);return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.AW),u.Y36(a.gz),u.Y36(N.s),u.Y36(f.sK),u.Y36(k.FF))},e.\u0275cmp=u.Xpm({type:e,selectors:[["t-identity-server-clients-details"]],viewQuery:function(e,t){var n;(1&e&&u.Gf(en,7),2&e)&&(u.iGM(n=u.CRH())&&(t.unsavedChangesModal=n.first))},features:[u.qOj],decls:10,vars:21,consts:[["collection","IdentityServerClient",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],["resetSecret",""],["resetSecretConfirmModal",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-12"],[4,"ngIf","ngIfElse"],["stars",""],[1,"btn","btn-sm","btn-light","text-primary","t-white-button","py-0","align-baseline","mx-2",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-danger",3,"click"],["icon","check"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(u._UZ(0,"t-details",0),u.ALo(1,"translate"),u.YNc(2,tn,2,1,"ng-template",null,1,u.W1O),u.YNc(4,dn,8,10,"ng-template",null,2,u.W1O),u.YNc(6,fn,2,3,"ng-template",null,3,u.W1O),u.YNc(8,mn,19,12,"ng-template",null,4,u.W1O)),2&e){var n=u.MAs(3),i=u.MAs(5),r=u.MAs(7);u.Q6J("expand",t.expand)("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",u.lcZ(1,11,"IdentityServerClients"))("detailsCrumb",n)("documentTemplate",i)("actions",u.VKq(19,gn,u.qbA(13,pn,r,t.onResetSecret,t.showResetSecret,t.canResetSecret,t.resetSecretTooltip)))("isInactive",t.isInactive)}},directives:[q.MC,O.H,m.O5,J.d,L.Q7,L.JJ,L.On,p.BN],pipes:[f.X$],encapsulation:2}),e}();function hn(e,t){if(1&e&&(u.TgZ(0,"div",5),u._UZ(1,"t-auto-cell",6),u.qZA(),u.TgZ(2,"div",7),u._UZ(3,"t-auto-cell",8),u.qZA()),2&e){var n=t.id,i=u.oxw();u.xp6(1),u.Q6J("entity",i.c[n]),u.xp6(2),u.Q6J("entity",i.c[n])}}function wn(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"IdentityServerClient"),"\n")}function An(e,t){if(1&e&&u._UZ(0,"t-auto-cell",9),2&e){var n=t.id,i=u.oxw();u.Q6J("entity",i.c[n])}}function Zn(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"CreatedByMe")," ")}var yn=function(){return[]},bn=function(e){return{template:e,expression:"CreatedById eq me"}},xn=function(e){return[e]},Mn=function(e){return{CreatedBy:e}},Cn=[{path:"console",component:G,canActivate:[ee.xw],canActivateChild:[te.a],children:[{path:"identity-server-users",component:Ht,canDeactivate:[ne.N]},{path:"identity-server-users/:id",component:zt,canDeactivate:[z.O]},{path:"identity-server-clients",component:function(){var e=function(e){n(i,e);var t=r(i);function i(e){var n;return s(this,i),(n=t.call(this)).workspace=e,n}return c(i,[{key:"c",get:function(){return this.ws.IdentityServerClient}},{key:"ws",get:function(){return this.workspace.admin}}]),i}(ie.W);return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.AW))},e.\u0275cmp=u.Xpm({type:e,selectors:[["t-identity-server-clients-master"]],features:[u.qOj],decls:10,vars:19,consts:[["collection","IdentityServerClient","selectDefault","Memo,ClientId","selectForTiles","ClientId",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["createdByMe",""],[1,"d-flex","justify-content-between"],["collection","IdentityServerClient","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","IdentityServerClient","path","ClientId",3,"entity"],["collection","IdentityServerClient",3,"entity"]],template:function(e,t){if(1&e&&(u._UZ(0,"t-master",0),u.ALo(1,"translate"),u.YNc(2,hn,4,2,"ng-template",null,1,u.W1O),u.YNc(4,wn,2,3,"ng-template",null,2,u.W1O),u.YNc(6,An,1,1,"ng-template",null,3,u.W1O),u.YNc(8,Zn,2,3,"ng-template",null,4,u.W1O)),2&e){var n=u.MAs(3),i=u.MAs(5),r=u.MAs(7),o=u.MAs(9);u.Q6J("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",u.lcZ(1,10,"IdentityServerClients"))("tileTemplate",n)("tableSummaryColumnTemplate",r)("tableSummaryHeaderTemplate",i)("multiselectActions",u.DdM(12,yn))("filterDefinition",u.VKq(17,Mn,u.VKq(15,xn,u.VKq(13,bn,o))))}},directives:[re.c,oe.q_],pipes:[f.X$],encapsulation:2}),e}(),canDeactivate:[ne.N]},{path:"identity-server-clients/:id",component:vn,canDeactivate:[z.O]},{path:"admin-users",component:Ce,canDeactivate:[ne.N]},{path:"admin-users/:id",component:Ut,canDeactivate:[z.O]},{path:"main-menu",component:h,canDeactivate:[ne.N]},{path:"",redirectTo:"main-menu",pathMatch:"full"},{path:"**",component:w}]},{path:"",redirectTo:"/root/welcome",pathMatch:"full"}],qn=function(){var e=function e(t){s(this,e),t.addIcons(It.U7t,It.Mdf,It.Aq)};return e.\u0275fac=function(t){return new(t||e)(u.LFG(p.by))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[l.m,a.Bz.forChild(Cn)]]}),e}()}}])}();