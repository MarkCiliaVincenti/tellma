(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{LIG5:function(e,t,n){"use strict";n.r(t),n.d(t,"ApplicationModule",function(){return Zne});var i=n("tyNb"),c=n("fXoL"),o=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,i){return e[0]===t&&(n=i,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var c=i[n];e.call(t,c[1],c[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,s="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),l="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(s):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,d=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,c=0;function o(){n&&(n=!1,e()),i&&s()}function r(){l(o)}function s(){var e=Date.now();if(n){if(e-c<2)return;i=!0}else n=!0,i=!1,setTimeout(r,20);c=e}return s}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),b=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var c=i[n];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},g=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||s},f=S(0,0,0,0);function m(e){return parseFloat(e)||0}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+m(e["border-"+n+"-width"])},0)}var p="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof g(e).SVGGraphicsElement}:function(e){return e instanceof g(e).SVGElement&&"function"==typeof e.getBBox};function S(e,t,n,i){return{x:e,y:t,width:n,height:i}}var v=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e,t=(e=this.target,r?p(e)?function(e){var t=e.getBBox();return S(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var i=g(e).getComputedStyle(e),c=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var c=i[n];t[c]=m(e["padding-"+c])}return t}(i),o=c.left+c.right,r=c.top+c.bottom,s=m(i.width),l=m(i.height);if("border-box"===i.boxSizing&&(Math.round(s+o)!==t&&(s-=h(i,"left","right")+o),Math.round(l+r)!==n&&(l-=h(i,"top","bottom")+r)),!function(e){return e===g(e).document.documentElement}(e)){var a=Math.round(s+o)-t,u=Math.round(l+r)-n;1!==Math.abs(a)&&(s-=a),1!==Math.abs(u)&&(l-=u)}return S(c.left,c.top,s,l)}(e):f);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),I=function(e,t){var n,i,c,o,r,s,l,a=(i=(n=t).x,c=n.y,o=n.width,r=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),b(l,{x:i,y:c,width:o,height:r,top:c,right:i+o,bottom:r+c,left:i}),l);b(this,{target:e,contentRect:a})},M=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new o,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new v(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new I(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),R="undefined"!=typeof WeakMap?new WeakMap:new o,y=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=d.getInstance(),i=new M(t,n,this);R.set(this,i)};["observe","unobserve","disconnect"].forEach(function(e){y.prototype[e]=function(){var t;return(t=R.get(this))[e].apply(t,arguments)}});var D=void 0!==s.ResizeObserver?s.ResizeObserver:y,w=n("IzEk"),E=n("XNiG"),C=n("ofXK");let x=(()=>{class e{constructor(e,t,n,i){this.elementRef=e,this.renderer=t,this.ngZone=n,this.platformId=i,this.removeResizeListeners$=new E.a,this.ellipsisContent=null,this.moreClickEmitter=new c.n,this.changeEmitter=new c.n}static numericBinarySearch(e,t){let n,i=0,c=e,o=-1;for(;i<=c;)n=~~((i+c)/2),t(n)?(o=n,i=n+1):c=n-1;return o}static convertEllipsisInputToString(e){return null==e?"":String(e)}ngAfterViewInit(){if(!Object(C.B)(this.platformId))return;""===this.ellipsisCharacters&&(this.ellipsisCharacters="..."),this.moreAnchor=this.renderer.createElement("a"),this.moreAnchor.className="ngx-ellipsis-more",this.moreAnchor.href="#",this.moreAnchor.textContent=this.ellipsisCharacters,this.ellipsisWordBoundaries||(this.ellipsisWordBoundaries=""),this.ellipsisWordBoundaries="["+this.ellipsisWordBoundaries.replace(/\\n/,"\n").replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"]",this.ellipsisSubstrFn||(this.ellipsisSubstrFn=(e,t,n)=>e.substr(t,n)),this.elem=this.elementRef.nativeElement,null!=this.ellipsisContent?this.originalText=e.convertEllipsisInputToString(this.ellipsisContent):this.originalText||(this.originalText=this.elem.textContent.trim()),this.renderer.setProperty(this.elem,"innerHTML",""),this.innerElem=this.renderer.createElement("div"),this.renderer.addClass(this.innerElem,"ngx-ellipsis-inner");const t=this.renderer.createText(this.originalText);this.renderer.appendChild(this.innerElem,t),this.renderer.appendChild(this.elem,this.innerElem),this.previousDimensions={width:this.elem.clientWidth,height:this.elem.clientHeight},this.addResizeListener(!0)}ngOnChanges(t){const n=this.moreAnchor&&t.ellipsisCharacters;n&&(this.moreAnchor.textContent=this.ellipsisCharacters),this.elem&&void 0!==this.ellipsisContent&&(this.originalText!==e.convertEllipsisInputToString(this.ellipsisContent)||n)&&(this.originalText=e.convertEllipsisInputToString(this.ellipsisContent),this.applyEllipsis())}ngOnDestroy(){Object(C.B)(this.platformId)&&this.removeAllListeners()}removeAllListeners(){this.destroyMoreClickListener&&this.destroyMoreClickListener(),this.removeResizeListeners$.next(),this.removeResizeListeners$.complete()}addResizeListener(e=!1){switch(void 0===this.resizeDetectionStrategy&&(this.resizeDetectionStrategy=""),this.resizeDetectionStrategy){case"manual":break;case"window":this.addWindowResizeListener();break;default:"undefined"!=typeof console&&console.warn(`No such ellipsis-resize-detection strategy: '${this.resizeDetectionStrategy}'. Using 'resize-observer' instead`);case"resize-observer":case"":this.addElementResizeListener()}e&&"manual"!==this.resizeDetectionStrategy&&this.applyEllipsis()}addWindowResizeListener(){const e=this.renderer.listen("window","resize",()=>{this.ngZone.run(()=>{this.applyEllipsis()})});this.removeResizeListeners$.pipe(Object(w.a)(1)).subscribe(()=>e())}addElementResizeListener(){const e=new D(()=>{window.requestAnimationFrame(()=>{this.previousDimensions.width===this.elem.clientWidth&&this.previousDimensions.height===this.elem.clientHeight||(this.ngZone.run(()=>{this.applyEllipsis()}),this.previousDimensions.width=this.elem.clientWidth,this.previousDimensions.height=this.elem.clientHeight)})});e.observe(this.elem),this.removeResizeListeners$.pipe(Object(w.a)(1)).subscribe(()=>e.disconnect())}getTruncatedText(e){if(!this.originalText||this.originalText.length<=e)return this.originalText;const t=this.ellipsisSubstrFn(this.originalText,0,e);if("[]"===this.ellipsisWordBoundaries||this.originalText.charAt(e).match(this.ellipsisWordBoundaries))return t;let n=e-1;for(;n>0&&!t.charAt(n).match(this.ellipsisWordBoundaries);)n--;return this.ellipsisSubstrFn(t,0,n)}truncateText(e,t=!1){let n=this.getTruncatedText(e);const i=n.length,c=i!==this.originalText.length;return c&&!this.showMoreLink&&(n+=this.ellipsisCharacters),this.renderer.setProperty(this.innerElem,"textContent",n),c&&this.showMoreLink&&this.renderer.appendChild(this.innerElem,this.moreAnchor),this.destroyMoreClickListener&&(this.destroyMoreClickListener(),this.destroyMoreClickListener=null),t&&c&&(this.destroyMoreClickListener=this.renderer.listen(this.moreAnchor,"click",e=>{e.target&&e.target.classList.contains("ngx-ellipsis-more")&&(e.preventDefault(),this.moreClickEmitter.emit(e))})),i}applyEllipsis(){this.removeResizeListeners$.next();const t=e.numericBinarySearch(this.originalText.length,e=>(this.truncateText(e),!this.isOverflowing)),n=this.truncateText(t,this.showMoreLink);this.addResizeListener(),this.changeEmitter.observers.length>0&&this.changeEmitter.emit(this.originalText.length===n?null:n)}get isOverflowing(){const e=this.elem.style.overflow;e&&"visible"!==e||(this.elem.style.overflow="hidden");const t=this.elem.clientWidth<this.elem.scrollWidth-1||this.elem.clientHeight<this.elem.scrollHeight-1;return this.elem.style.overflow=e,t}get showMoreLink(){return this.moreClickEmitter.observers.length>0}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(c.l),c.Mb(c.E),c.Mb(c.A),c.Mb(c.C))},e.\u0275dir=c.Hb({type:e,selectors:[["","ellipsis",""]],inputs:{ellipsisContent:["ellipsis-content","ellipsisContent"],ellipsisCharacters:["ellipsis","ellipsisCharacters"],ellipsisWordBoundaries:["ellipsis-word-boundaries","ellipsisWordBoundaries"],ellipsisSubstrFn:["ellipsis-substr-fn","ellipsisSubstrFn"],resizeDetectionStrategy:["ellipsis-resize-detection","resizeDetectionStrategy"]},outputs:{moreClickEmitter:"ellipsis-click-more",changeEmitter:"ellipsis-change"},exportAs:["ellipsis"],features:[c.xb]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({imports:[[]]}),e})();var z=n("PCNd"),L=n("PVj+"),k=n("WO2E"),O=n("quSY"),A=n("LRne"),N=n("eIep"),_=n("pLZG"),J=n("vkgz"),P=n("un/a"),F=n("JIr8"),V=n("k0Of"),q=n("AyGX"),j=n("5+WD"),$=n("/CWu"),U=n("KOvB"),K=n("sYmb"),B=n("eQPh"),H=n("rd7j"),Q=n("0xbw"),W=n("o6Md"),G=n("1kSV"),Y=n("ZBji"),X=n("v+w0"),Z=n("OoQV"),ee=n("6NWb"),te=n("3Pt+"),ne=n("nYR2");const ie=["input"],ce=["errorModal"];function oe(e,t){if(1&e&&c.Nb(0,"img",9),2&e){const e=c.gc();c.Ic("max-width",e.size+e.sizeUnit)("max-height",e.size+e.sizeUnit),c.Eb("t-image-round",e.isRound),c.nc("src",e.dataUrl,c.Fc)}}function re(e,t){if(1&e&&c.Nb(0,"fa-icon",10),2&e){const e=c.gc();c.Ic("font-size",e.placeholderFontSize+"rem"),c.nc("icon",e.icon)}}function se(e,t){if(1&e&&(c.Nb(0,"fa-icon",11),c.hc(1,"translate")),2&e){const e=c.gc();c.Ic("font-size",e.errorSize,"rem"),c.nc("title",c.ic(1,3,"Error_FailedToLoadImage"))}}function le(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",12),c.Sb(1,"div",13),c.cc("click",function(){return c.Dc(e),c.gc().onEdit()}),c.Nb(2,"fa-icon",14),c.Rb(),c.Sb(3,"div",13),c.cc("click",function(){return c.Dc(e),c.gc().onDelete()}),c.Nb(4,"fa-icon",15),c.Rb(),c.Rb()}}const ae=function(e){return{maxSize:e}};function ue(e,t){if(1&e&&(c.Sb(0,"div",16),c.Sb(1,"h5",17),c.Nb(2,"fa-icon",18),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",19),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(6,"span",20),c.Lc(7,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",21),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Sb(11,"div",22),c.Sb(12,"button",23),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(13,"fa-icon",24),c.Lc(14),c.hc(15,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc("\xa0\xa0",c.ic(4,3,"Error")," "),c.zb(6),c.Nc(" ",c.jc(10,5,"Error_ImageExceedsTheMaximumSizeOfX",c.rc(10,ae,e.maxSize/1048576))," "),c.zb(5),c.Nc(" \xa0",c.ic(15,8,"Dismiss")," ")}}var de=function(e){return e[e.loading=1]="loading",e[e.loaded=2]="loaded",e[e.error=3]="error",e}({});let be=(()=>{class e{constructor(e,t,n,i,c){this.api=e,this.workspace=t,this.cdr=n,this.storage=i,this.modalService=c,this.shape="square",this.icon="user",this.size=90,this.sizeUnit="px",this.isEdit=!1,this.notifyCancel$=new E.a,this._value=null,this.dataUrl=null,this.maxSize=5242880,this.isDisabled=!1,this.onChange=e=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.notifyUpdate$=new E.a,this.notifyUpdate$.pipe(Object(N.a)(()=>{const e=this.doUpdate();return this.cdr.markForCheck(),e})).subscribe()}writeValue(e){e||""===e||(e=null),this._value!==e&&(this._value=e,this._metadataPrefix="data:image/jpeg;base64,",this.update())}registerOnChange(e){this.onChange=t=>{e(t),this.onTouched()}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}ngOnInit(){this.update(),this._subscription=this.workspace.stateChanged$.subscribe({next:()=>{this.cdr.markForCheck()}})}ngOnDestroy(){this.notifyCancel$.next(),this._subscription&&this._subscription.unsubscribe()}ngOnChanges(e){const t=[e.src,e.imageId],n=t.some(e=>!!e),i=t.some(e=>!!e&&!e.isFirstChange());n&&(i&&this.ngOnDestroy(),e.src&&(this._src=e.src.currentValue),e.imageId&&(this._imageId=e.imageId.currentValue),i&&this.ngOnInit())}update(){this.notifyUpdate$.next()}doUpdate(){if(this._value)return this.status=de.loaded,this.dataUrl=this._metadataPrefix+","+this._value,Object(A.a)();if(""===this._value)return this.status=de.loaded,this.dataUrl=null,Object(A.a)();if(this._src&&this._imageId){const e=this._src,t=this._imageId,n=`${this.workspace.ws.tenantId}/${e}`,i=this.storage.getItem(n),c=i?JSON.parse(i):null;return c&&c.imageId===t?(this.status=de.loaded,this.dataUrl=c.dataUrl,Object(A.a)()):(i&&this.storage.removeItem(n),this.status=de.loading,this.api.getImage(e,t,this.notifyCancel$).pipe(Object(N.a)(e=>Object(V.l)(e.image).pipe(Object(J.a)(i=>{this.status=de.loaded,this.dataUrl=i,this.storage.setItem(n,JSON.stringify({imageId:e.imageId||t,dataUrl:i}))}))),Object(F.a)(e=>(404===e.status?(this.status=de.loaded,this.dataUrl=null):this.status=de.error,Object(A.a)(null))),Object(ne.a)(()=>this.cdr.markForCheck())))}return this._src&&this.storage.removeItem(`${this.workspace.ws.tenantId}/${this._src}`),this.status=de.loaded,this.dataUrl=null,Object(A.a)()}get showIcon(){return!this.dataUrl&&this.status===de.loaded}get showImg(){return this.dataUrl&&this.status===de.loaded}get showEditControls(){return this.isEdit}get showError(){return this.status===de.error}get isRound(){return"circle"===this.shape}get placeholderFontSize(){return this.size/90*3.2}onEdit(){this.input.nativeElement.click()}onDelete(){this.canDelete&&(this._value="",this.onChange(this._value),this.update())}get canDelete(){return!!this.dataUrl||this.status===de.error}onFileSelected(e){const t=e.files;if(!t||0===t.length)return;const n=t[0];e.value="",n.size>this.maxSize?this.modalService.open(this.errorModal):Object(V.l)(n).subscribe(e=>{const t=e.indexOf(",");this._metadataPrefix=e.substr(0,t),this._value=e.substr(t+1),this.onChange(this._value),this.update()},e=>{console.error(e)})}get errorSize(){return this.size/90*3}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(W.a),c.Mb(L.m),c.Mb(c.h),c.Mb(Q.a),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-image"]],viewQuery:function(e,t){if(1&e&&(c.Qc(ie,3),c.Qc(ce,3)),2&e){let e;c.zc(e=c.dc())&&(t.input=e.first),c.zc(e=c.dc())&&(t.errorModal=e.first)}},inputs:{shape:"shape",icon:"icon",size:"size",sizeUnit:"sizeUnit",isEdit:"isEdit",src:"src",imageId:"imageId"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.xb],decls:10,vars:10,consts:[[1,"t-image"],[1,"d-flex","align-items-center","justify-content-center","w-100","h-100"],["alt","","alt","Picture",3,"src","t-image-round","max-width","max-height",4,"ngIf"],["class","t-image-placeholder",3,"icon","font-size",4,"ngIf"],["class","text-danger","icon","exclamation","style","font-size: 1.5rem",3,"font-size","title",4,"ngIf"],["class","t-image-controls w-100",4,"ngIf"],["type","file","accept",".jpg,.jpeg,.bmp,.png,.jfif",1,"d-none",3,"change"],["input",""],["errorModal",""],["alt","","alt","Picture",3,"src"],[1,"t-image-placeholder",3,"icon"],["icon","exclamation",1,"text-danger",2,"font-size","1.5rem",3,"title"],[1,"t-image-controls","w-100"],[1,"btn","btn-primary","p-0","pr-1","pl-1","w-50",3,"click"],["icon","pen"],["icon","trash"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",0),c.Sb(1,"div",1),c.Jc(2,oe,1,7,"img",2),c.Jc(3,re,1,3,"fa-icon",3),c.Jc(4,se,2,5,"fa-icon",4),c.Rb(),c.Jc(5,le,5,0,"div",5),c.Rb(),c.Sb(6,"input",6,7),c.cc("change",function(){c.Dc(e);const n=c.Ac(7);return t.onFileSelected(n)}),c.Rb(),c.Jc(8,ue,16,12,"ng-template",null,8,c.Kc)}2&e&&(c.Ic("width",t.size+t.sizeUnit)("height",t.size+t.sizeUnit),c.Eb("t-image-round",t.isRound),c.zb(2),c.nc("ngIf",t.showImg),c.zb(1),c.nc("ngIf",t.showIcon),c.zb(1),c.nc("ngIf",t.showError),c.zb(1),c.nc("ngIf",t.showEditControls))},directives:[C.l,ee.a],pipes:[K.c],styles:[".t-image-placeholder[_ngcontent-%COMP%]{color:#d3d3d3}.t-image-controls[_ngcontent-%COMP%]{height:23px;margin-top:-23px}@media (min-width:768px){.t-image-controls[_ngcontent-%COMP%]{opacity:0;transition:opacity .1s ease}.t-image[_ngcontent-%COMP%]:hover   .t-image-controls[_ngcontent-%COMP%]{opacity:1}}.t-image-round[_ngcontent-%COMP%]{border-radius:50%}"],changeDetection:0}),e})();var ge=n("r3gP"),fe=n("f3yp"),me=n("EoPe"),he=n("AYjT"),pe=n("2I7G"),Se=n("mrGz"),ve=n("Kp4E");let Ie=(()=>{class e{constructor(e,t){this.workspace=e,this.translate=t,this._markForCheck=!0,this._subscriptions=new O.a,this._subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.markForCheck()})),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>{this._wsTimeFormat&&this._wsTimeFormat!==this.workspace.timeFormat&&this.markForCheck()}}))}markForCheck(){this._markForCheck=!0}ngOnDestroy(){this._subscriptions&&this._subscriptions.unsubscribe()}transform(e,t){return(this._markForCheck||this._isoDate!==e||this._granularity!==t)&&(this._markForCheck=!1,this._isoDate=e,this._granularity=t,this._wsTimeFormat=this.workspace.timeFormat,this._formattedValue=Object(ve.c)(e,this.workspace,this.translate,t)),this._formattedValue}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275pipe=c.Lb({name:"timeFormat",type:e,pure:!1}),e})(),Me=(()=>{class e{constructor(e,t){this.workspace=e,this.translate=t,this._markForCheck=!0,this._subscriptions=new O.a,this._subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.markForCheck()})),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>{this._wsCalendar&&this._wsCalendar!==this.workspace.calendar&&this.markForCheck(),this._wsDateFormat&&this._wsDateFormat!==this.workspace.dateFormat&&this.markForCheck(),this._wsTimeFormat&&this._wsTimeFormat!==this.workspace.timeFormat&&this.markForCheck()}}))}markForCheck(){this._markForCheck=!0}ngOnDestroy(){this._subscriptions&&this._subscriptions.unsubscribe()}transform(e,t,n){return(this._markForCheck||this._isoDate!==e||this._calendar!==t||this._granularity!==n)&&(this._markForCheck=!1,this._isoDate=e,this._calendar=t,this._granularity=n,this._wsCalendar=this.workspace.calendar,this._wsDateFormat=this.workspace.dateFormat,this._wsTimeFormat=this.workspace.timeFormat,this._formattedValue=Object(ve.b)(e,this.workspace,this.translate,t,n)),this._formattedValue}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275pipe=c.Lb({name:"datetimeFormat",type:e,pure:!1}),e})();const Re=["myAccountModal"],ye=["inboxModal"],De=["favoriteModal"];function we(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",39),c.cc("click",function(){c.Dc(e);const t=c.gc();return t.onCollapse(),t.nav.onBack()}),c.Nb(1,"fa-icon",40),c.Rb()}if(2&e){const e=c.gc();c.nc("disabled",!e.nav.canBack),c.zb(1),c.nc("flip",e.flip)}}function Ee(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",39),c.cc("click",function(){c.Dc(e);const t=c.gc();return t.onCollapse(),t.nav.onForward()}),c.Nb(1,"fa-icon",41),c.Rb()}if(2&e){const e=c.gc();c.nc("disabled",!e.nav.canForward),c.zb(1),c.nc("flip",e.flip)}}function Ce(e,t){1&e&&c.Ob(0)}function xe(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",42),c.Sb(1,"button",43),c.cc("click",function(){return c.Dc(e),c.gc().onModalInbox()}),c.Jc(2,Ce,1,0,"ng-container",44),c.Rb(),c.Rb()}if(2&e){c.gc();const e=c.Ac(57);c.zb(2),c.nc("ngTemplateOutlet",e)}}function Te(e,t){if(1&e&&(c.Sb(0,"div",49),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc();c.zb(1),c.Nc(" ",t.ws.getMultilingualValueImmediate(e,"label")," ")}}function ze(e,t){1&e&&c.Nb(0,"div",50)}function Le(e,t){if(1&e){const e=c.Tb();c.Sb(0,"li",45),c.Sb(1,"button",46),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc().onClickFavorite(n.url)}),c.Lc(2),c.Rb(),c.Jc(3,Te,2,1,"div",47),c.Jc(4,ze,1,0,"div",48),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(),i=c.Ac(16);c.nc("tContextMenu",i)("tContext",e),c.zb(2),c.Nc(" ",n.ws.getMultilingualValueImmediate(e,"label")," ")}}function ke(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",51),c.Sb(1,"ul",52),c.Sb(2,"li",53),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.close;return c.gc().onEditFavorite(n),i()}),c.Sb(3,"div",54),c.Nb(4,"fa-icon",55),c.Rb(),c.Sb(5,"div",56),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Sb(8,"li",53),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.close;return c.gc().onDeleteFavorite(n),i()}),c.Sb(9,"div",54),c.Nb(10,"fa-icon",57),c.Rb(),c.Sb(11,"div",56),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}2&e&&(c.zb(6),c.Nc(" ",c.ic(7,2,"Edit")," "),c.zb(6),c.Nc(" ",c.ic(13,4,"Delete")," "))}function Oe(e,t){1&e&&c.Ob(0)}function Ae(e,t){1&e&&c.Nb(0,"t-spinner",3),2&e&&c.nc("scale",1)}function Ne(e,t){1&e&&c.Ob(0)}function _e(e,t){1&e&&c.Ob(0)}const Je=function(){return{state_key:"navinbox"}},Pe=function(e,t){return[e,t]},Fe=function(e){return{id:e}};function Ve(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",67),c.cc("click",function(){return c.Dc(e),c.gc(),c.Ac(1).close()}),c.Jc(1,_e,1,0,"ng-container",68),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2),i=c.Ac(59);c.Eb("bg-light",n.c[e].OpenedAt),c.nc("routerLink",c.sc(6,Pe,"/app/"+n.tenantId+"/documents/"+(null==n.docs[e]?null:n.docs[e].DefinitionId)+"/"+(null==e?null:e.toString()),c.qc(5,Je))),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.rc(9,Fe,e))}}function qe(e,t){1&e&&c.Ob(0)}const je=function(e){return{closable:e}};function $e(e,t){if(1&e&&(c.Sb(0,"div",69),c.Jc(1,qe,1,0,"ng-container",68),c.Rb()),2&e){c.gc();const e=c.Ac(1);c.gc();const t=c.Ac(63);c.zb(1),c.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",c.rc(2,je,e))}}function Ue(e,t){if(1&e){const e=c.Tb();c.Sb(0,"li",58,59),c.cc("openChange",function(t){return c.Dc(e),c.gc().onDropdownInbox(t)}),c.Sb(2,"button",60),c.Jc(3,Oe,1,0,"ng-container",44),c.Rb(),c.Sb(4,"div",61),c.Sb(5,"div",62),c.Sb(6,"div"),c.Lc(7),c.hc(8,"translate"),c.Jc(9,Ae,1,1,"t-spinner",63),c.Rb(),c.Sb(10,"a",64),c.cc("click",function(){return c.Dc(e),c.Ac(1).close()}),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Rb(),c.Jc(13,Ne,1,0,"ng-container",44),c.Jc(14,Ve,2,11,"button",65),c.Jc(15,$e,2,4,"div",66),c.Rb(),c.Rb()}if(2&e){const e=c.gc(),t=c.Ac(57),n=c.Ac(61);c.zb(3),c.nc("ngTemplateOutlet",t),c.zb(1),c.Eb("dropdown-menu-right",!e.isRtl),c.zb(3),c.Nc("",c.ic(8,10,"Inbox"),"\xa0"),c.zb(2),c.nc("ngIf",e.showInboxSpinner),c.zb(1),c.nc("routerLink","/app/"+e.tenantId+"/inbox"),c.zb(1),c.Mc(c.ic(12,12,"SeeAll")),c.zb(2),c.nc("ngTemplateOutlet",n),c.zb(1),c.nc("ngForOf",e.ids),c.zb(1),c.nc("ngIf",e.showSeeAll)}}function Ke(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",29),c.cc("click",function(){c.Dc(e);const t=c.gc(2);return t.onPrimary(),t.onCollapse()}),c.Lc(1),c.Rb()}if(2&e){const e=c.gc(2);c.zb(1),c.Nc(" ",null==e.settings?null:e.settings.PrimaryLanguageName," ")}}function Be(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",29),c.cc("click",function(){c.Dc(e);const t=c.gc(2);return t.onSecondary(),t.onCollapse()}),c.Lc(1),c.Rb()}if(2&e){const e=c.gc(2);c.zb(1),c.Nc(" ",null==e.settings?null:e.settings.SecondaryLanguageName," ")}}function He(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",29),c.cc("click",function(){c.Dc(e);const t=c.gc(2);return t.onTernary(),t.onCollapse()}),c.Lc(1),c.Rb()}if(2&e){const e=c.gc(2);c.zb(1),c.Nc(" ",null==e.settings?null:e.settings.TernaryLanguageName," ")}}function Qe(e,t){if(1&e&&(c.Qb(0),c.Nb(1,"hr"),c.Jc(2,Ke,2,1,"button",70),c.Jc(3,Be,2,1,"button",70),c.Jc(4,He,2,1,"button",70),c.Pb()),2&e){const e=c.gc();c.zb(2),c.nc("ngIf",!e.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!e.ws.isSecondaryLanguage&&!(null==e.settings||!e.settings.SecondaryLanguageId)),c.zb(1),c.nc("ngIf",!e.ws.isTernaryLanguage&&!(null==e.settings||!e.settings.TernaryLanguageId))}}function We(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",29),c.cc("click",function(){c.Dc(e);const t=c.gc(2);return t.onPrimaryCalendar(),t.onCollapse()}),c.Lc(1),c.hc(2,"translate"),c.Rb()}if(2&e){const e=c.gc(2);c.zb(1),c.Nc(" ",c.ic(2,1,"Calendar_"+(null==e.settings?null:e.settings.PrimaryCalendar))," ")}}function Ge(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",29),c.cc("click",function(){c.Dc(e);const t=c.gc(2);return t.onSecondaryCalendar(),t.onCollapse()}),c.Lc(1),c.hc(2,"translate"),c.Rb()}if(2&e){const e=c.gc(2);c.zb(1),c.Nc(" ",c.ic(2,1,"Calendar_"+(null==e.settings?null:e.settings.SecondaryCalendar))," ")}}function Ye(e,t){if(1&e&&(c.Qb(0),c.Nb(1,"hr"),c.Jc(2,We,3,3,"button",70),c.Jc(3,Ge,3,3,"button",70),c.Pb()),2&e){const e=c.gc();c.zb(2),c.nc("ngIf",!e.ws.isPrimaryCalendar),c.zb(1),c.nc("ngIf",!e.ws.isSecondaryCalendar)}}function Xe(e,t){if(1&e&&(c.Sb(0,"div",74),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.Ic("border-color",null==e.settings?null:e.settings.BrandColor),c.zb(1),c.Nc(" ",e.unknownInboxCountDisplay," ")}}function Ze(e,t){if(1&e&&(c.Sb(0,"div",71),c.Nb(1,"fa-icon",72),c.Jc(2,Xe,2,3,"div",73),c.Rb(),c.Sb(3,"div"),c.Lc(4),c.Rb()),2&e){const e=c.gc();c.zb(2),c.nc("ngIf",e.unknownInboxCountDisplay),c.zb(2),c.Nc("\xa0\xa0",e.inboxCountDisplay,"")}}function et(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().id,t=c.gc();c.zb(1),c.Mc(" - "+t.docs[e].Memo)}}function tt(e,t){if(1&e&&(c.Sb(0,"div",84),c.Lc(1),c.Rb()),2&e){const e=c.gc().id,t=c.gc();c.zb(1),c.Mc('"'+t.c[e].Comment+'"')}}function nt(e,t){if(1&e&&(c.Sb(0,"div",75),c.Nb(1,"t-image",22),c.Nb(2,"div",76),c.Sb(3,"div",77),c.Sb(4,"div",78),c.Sb(5,"div",79),c.Lc(6),c.Rb(),c.Sb(7,"div",80),c.Lc(8),c.hc(9,"timeFormat"),c.hc(10,"datetimeFormat"),c.Rb(),c.Rb(),c.Sb(11,"div",81),c.Nb(12,"t-auto-cell",82),c.Jc(13,et,2,1,"span",30),c.Rb(),c.Jc(14,tt,2,1,"div",83),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();let i=null;c.zb(1),c.nc("src","users/"+n.c[e].CreatedById+"/image")("imageId",null==(i=n.ws.get("User",n.c[e].CreatedById))?null:i.ImageId)("size",32),c.zb(5),c.Nc(" ",n.ws.getMultilingualValue("User",n.c[e].CreatedById,"Name")," "),c.zb(2),c.Nc(" ",n.isToday(n.c[e].CreatedAt)?c.ic(9,9,n.c[e].CreatedAt):c.ic(10,11,n.c[e].CreatedAt)," "),c.zb(4),c.nc("definitionId",n.docs[e].DefinitionId)("entity",n.docs[e]),c.zb(1),c.nc("ngIf",n.docs[e].Memo),c.zb(1),c.nc("ngIf",n.c[e].Comment)}}function it(e,t){1&e&&(c.Sb(0,"div",86),c.Nb(1,"fa-icon",87),c.Lc(2),c.hc(3,"translate"),c.Rb()),2&e&&(c.zb(2),c.Nc("\xa0\xa0\xa0",c.ic(3,1,"EmptyInboxMessage")," "))}function ct(e,t){if(1&e&&c.Jc(0,it,4,3,"div",85),2&e){const e=c.gc();c.nc("ngIf",e.showEmptyInboxMessage)}}function ot(e,t){if(1&e&&(c.Sb(0,"a",64),c.cc("click",function(){return t.closable.close()}),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc();c.nc("routerLink","/app/"+e.tenantId+"/inbox"),c.zb(1),c.Mc(c.ic(2,2,"SeeAll"))}}function rt(e,t){1&e&&c.Nb(0,"t-spinner",3),2&e&&c.nc("scale",1)}function st(e,t){1&e&&c.Ob(0)}function lt(e,t){1&e&&c.Ob(0)}function at(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",95),c.cc("click",function(){return c.Dc(e),c.gc().$implicit.close()}),c.Jc(1,lt,1,0,"ng-container",68),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2),i=c.Ac(59);c.Eb("bg-light",n.c[e].OpenedAt),c.nc("routerLink",c.sc(6,Pe,"/app/"+n.tenantId+"/documents/"+(null==n.docs[e]?null:n.docs[e].DefinitionId)+"/"+(null==e?null:e.toString()),c.qc(5,Je))),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.rc(9,Fe,e))}}function ut(e,t){1&e&&c.Ob(0)}function dt(e,t){if(1&e&&(c.Sb(0,"div",96),c.Jc(1,ut,1,0,"ng-container",68),c.Rb()),2&e){const e=c.gc().$implicit;c.gc();const t=c.Ac(63);c.zb(1),c.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",c.rc(2,je,e))}}function bt(e,t){if(1&e&&(c.Sb(0,"div",88),c.Sb(1,"h5",89),c.Lc(2),c.hc(3,"translate"),c.Jc(4,rt,1,1,"t-spinner",63),c.Rb(),c.Sb(5,"button",90),c.cc("click",function(){return t.$implicit.dismiss(!1)}),c.Sb(6,"span",91),c.Lc(7,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",92),c.Jc(9,st,1,0,"ng-container",44),c.Jc(10,at,2,11,"button",93),c.Jc(11,dt,2,4,"div",94),c.Rb()),2&e){const e=c.gc(),t=c.Ac(61);c.zb(2),c.Nc(" ",c.ic(3,5,"Inbox")+" ("+e.inboxCountDisplay+")","\xa0"),c.zb(2),c.nc("ngIf",e.showInboxSpinner),c.zb(5),c.nc("ngTemplateOutlet",t),c.zb(1),c.nc("ngForOf",e.ids),c.zb(1),c.nc("ngIf",e.showSeeAll)}}const gt=function(){return{updateOn:"blur"}};function ft(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",111),c.hc(1,"translate"),c.Sb(2,"t-text-editor",114),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).myUser.Name2=t}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.nc("label",c.ic(1,4,"Name")+e.ws.secondaryPostfix)("serverErrors",null==e.myUser||null==e.myUser.serverErrors?null:e.myUser.serverErrors.Name2),c.zb(2),c.nc("ngModel",e.myUser.Name2)("ngModelOptions",c.qc(6,gt))}}function mt(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",111),c.hc(1,"translate"),c.Sb(2,"t-text-editor",114),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).myUser.Name3=t}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.nc("label",c.ic(1,4,"Name")+e.ws.ternaryPostfix)("serverErrors",null==e.myUser||null==e.myUser.serverErrors?null:e.myUser.serverErrors.Name3),c.zb(2),c.nc("ngModel",e.myUser.Name3)("ngModelOptions",c.qc(6,gt))}}function ht(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",105),c.Sb(1,"t-form-group",106),c.Sb(2,"h2",107),c.Lc(3),c.Rb(),c.Rb(),c.Sb(4,"div",108),c.Sb(5,"div",109),c.Sb(6,"t-image",110),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).myUser.Image=t}),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"t-form-group",111),c.hc(8,"translate"),c.Sb(9,"t-text-editor",112),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).myUser.Name=t}),c.Rb(),c.Rb(),c.Jc(10,ft,3,7,"t-form-group",113),c.Jc(11,mt,3,7,"t-form-group",113),c.Rb()}if(2&e){const e=c.gc(2);c.zb(3),c.Mc(e.myEmail),c.zb(3),c.nc("src","users/"+e.ws.userSettings.UserId+"/image")("imageId",e.myImageId)("ngModel",e.myUser.Image)("isEdit",!0)("size",70),c.zb(1),c.nc("label",c.ic(8,12,"Name")+e.ws.primaryPostfix)("serverErrors",null==e.myUser||null==e.myUser.serverErrors?null:e.myUser.serverErrors.Name),c.zb(2),c.nc("ngModel",e.myUser.Name)("ngModelOptions",c.qc(14,gt)),c.zb(1),c.nc("ngIf",e.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",e.ws.settings.TernaryLanguageId)}}function pt(e,t){if(1&e&&(c.Sb(0,"t-error-message"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Nc(" ",e.saveErrorMessage," ")}}function St(e,t){if(1&e&&(c.Sb(0,"t-error-message"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Nc(" ",e.errorMessage," ")}}function vt(e,t){1&e&&(c.Sb(0,"div",115),c.Nb(1,"t-spinner",3),c.Rb()),2&e&&(c.zb(1),c.nc("scale",2))}const It=function(e){return{placeholder:e}};function Mt(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",88),c.Sb(1,"h5",89),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",90),c.cc("click",function(){return t.$implicit.dismiss(!1)}),c.Sb(5,"span",91),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",97),c.Jc(8,ht,12,15,"div",98),c.Jc(9,pt,2,1,"t-error-message",30),c.Jc(10,St,2,1,"t-error-message",30),c.Jc(11,vt,2,1,"div",99),c.Rb(),c.Sb(12,"div",100),c.Sb(13,"button",101),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc().onSave(n)}),c.Nb(14,"fa-icon",102),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Sb(17,"button",103),c.cc("click",function(){return t.$implicit.close(!1)}),c.Nb(18,"fa-icon",104),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.jc(3,8,"My0Account",c.rc(15,It,e.companyName))," "),c.zb(6),c.nc("ngIf",e.isMyUserLoaded),c.zb(1),c.nc("ngIf",e.isMyUserLoaded&&!!e.saveErrorMessage),c.zb(1),c.nc("ngIf",e.isMyUserError),c.zb(1),c.nc("ngIf",e.isMyUserLoading),c.zb(2),c.nc("disabled",!e.canSave),c.zb(2),c.Nc(" \xa0",c.ic(16,11,"Save")," "),c.zb(4),c.Nc(" \xa0",c.ic(20,13,"Cancel")," ")}}function Rt(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",120),c.hc(1,"translate"),c.Sb(2,"t-text-editor",122),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).favoriteToSave.label2=t}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.nc("label",c.ic(1,3,"Label")+e.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",e.favoriteToSave.label2)("focusIf",!0)}}function yt(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",120),c.hc(1,"translate"),c.Sb(2,"t-text-editor",122),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).favoriteToSave.label3=t}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.nc("label",c.ic(1,3,"Label")+e.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",e.favoriteToSave.label3)("focusIf",!0)}}function Dt(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Rt,3,5,"t-form-group",124),c.Jc(2,yt,3,5,"t-form-group",124),c.Pb()),2&e){const e=c.gc(2);c.zb(1),c.nc("ngIf",!!e.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!!e.ws.settings.TernaryLanguageId)}}function wt(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",88),c.Sb(1,"h5",89),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"div",116),c.Sb(5,"label",117),c.cc("click",function(){return c.Dc(e),c.gc().onBasicFavoriteEditMode()}),c.hc(6,"translate"),c.Nb(7,"input",118),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Sb(10,"label",117),c.cc("click",function(){return c.Dc(e),c.gc().onAdvancedFavoriteEditMode()}),c.hc(11,"translate"),c.Nb(12,"input",118),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb(),c.Sb(15,"button",90),c.cc("click",function(){return t.$implicit.dismiss(!1)}),c.Sb(16,"span",91),c.Lc(17,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(18,"div",119),c.Sb(19,"t-form-group",120),c.hc(20,"translate"),c.Sb(21,"t-text-editor",121),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().favoriteToSave.url=t}),c.Rb(),c.Rb(),c.Sb(22,"t-form-group",120),c.hc(23,"translate"),c.Sb(24,"t-text-editor",122),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().favoriteToSave.label=t}),c.Rb(),c.Rb(),c.Jc(25,Dt,3,2,"ng-container",30),c.Rb(),c.Sb(26,"div",100),c.Sb(27,"button",101),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(28,"fa-icon",102),c.Lc(29),c.hc(30,"translate"),c.Rb(),c.Sb(31,"button",123),c.cc("click",function(){return t.$implicit.close(!1)}),c.Nb(32,"fa-icon",104),c.Lc(33),c.hc(34,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,18,"EditFavorite"),"\xa0\xa0\xa0"),c.zb(3),c.Eb("active",e.isBasic),c.oc("title",c.ic(6,20,"Basic")),c.zb(3),c.Nc(" ",c.ic(9,22,"Basic")," "),c.zb(2),c.Eb("active",e.isAdvanced),c.oc("title",c.ic(11,24,"Advanced")),c.zb(3),c.Nc(" ",c.ic(14,26,"Advanced")," "),c.zb(6),c.nc("label",c.ic(20,28,"URL")),c.zb(2),c.nc("ngModel",e.favoriteToSave.url),c.zb(1),c.nc("label",c.ic(23,30,"Label")+(e.isAdvanced?e.ws.primaryPostfix:"")),c.zb(2),c.nc("ngModel",e.favoriteToSave.label)("focusIf",!0),c.zb(1),c.nc("ngIf",e.isAdvanced),c.zb(2),c.nc("disabled",!(null!=e.favoriteToSave&&e.favoriteToSave.url&&null!=e.favoriteToSave&&e.favoriteToSave.label)),c.zb(2),c.Nc(" \xa0",c.ic(30,32,"Save")," "),c.zb(4),c.Nc(" \xa0",c.ic(34,34,"Cancel")," ")}}let Et=(()=>{class e{constructor(e,t,n,i,c,o,r,s,l,a,u,d){this.workspace=e,this.nav=t,this.router=n,this.translate=i,this.progress=c,this.auth=o,this.storage=r,this.api=s,this.document=l,this.modalService=a,this.notificationsService=u,this.userSettings=d,this.isCollapsed=!0,this._subscriptions=new O.a,this.notifyDestruct$=new E.a,this.usersApi=this.api.usersApi(this.notifyDestruct$),this.inboxCrud=this.api.crudFactory("inbox",this.notifyDestruct$),this.inboxApi=this.api.inboxApi(this.notifyDestruct$),this.inboxStateKey="navinbox",this._favorites=[],this.favoriteMode="basic"}ngOnInit(){this.notifyFetch$=new E.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(N.a)(()=>this.doFetch())).subscribe()),this.notifySavePreferredCalendar$=new E.a,this._subscriptions.add(this.notifySavePreferredCalendar$.pipe(Object(N.a)(e=>this.doSavePreferredCalendar(e))).subscribe()),this._subscriptions.add(this.notificationsService.inboxChanged$.pipe(Object(_.a)(e=>e.UpdateInboxList),Object(N.a)(e=>this.doFetchInbox(e.Count))).subscribe()),this.restrictToCompanyLanguages(),this._subscriptions.add(this.workspace.stateChanged$.subscribe(()=>this.restrictToCompanyLanguages()))}ngOnDestroy(){this.notifyDestruct$.next(),this._subscriptions&&this._subscriptions.unsubscribe();const e=this.document.documentElement.lang||"en",t=this.storage.getItem("user_culture")||e;this.translate.use(t)}restrictToCompanyLanguages(){const e=this.settings.PrimaryLanguageId,t=this.settings.SecondaryLanguageId,n=this.settings.TernaryLanguageId,i=this.translate.currentLang;if(i!==e&&i!==t&&i!==n){const i=this.ws.userSettings.PreferredLanguage;this.translate.use(!i||i!==e&&i!==t&&i!==n?e:i)}}onSetLanguage(e){this.translate.use(e),this.storage.setItem("user_culture",e)}onSetCalendar(e){const t=this.ws,n=JSON.parse(JSON.stringify(t.userSettings));n.PreferredCalendar=e,t.userSettings=n,t.notifyStateChanged(),this.notifySavePreferredCalendar$.next(e)}doSavePreferredCalendar(e){const t=this.workspace.currentTenant,n=this.workspace.ws.tenantId;return this.usersApi.saveUserPreferredCalendar(e).pipe(Object(J.a)(e=>{Object($.i)(e,n,t,this.storage)}),Object(P.a)(2),Object(F.a)(e=>(console.error(e),Object(A.a)(null))))}onToggleCollapse(){this.isCollapsed=!this.isCollapsed}onCollapse(){this.isCollapsed=!0}onPrimary(){this.onSetLanguage(this.settings.PrimaryLanguageId)}onSecondary(){this.onSetLanguage(this.settings.SecondaryLanguageId)}onTernary(){this.onSetLanguage(this.settings.TernaryLanguageId)}onPrimaryCalendar(){this.onSetCalendar(this.settings.PrimaryCalendar)}onSecondaryCalendar(){this.onSetCalendar(this.settings.SecondaryCalendar)}get settings(){return this.ws?this.ws.settings:null}get ws(){return this.workspace.currentTenant}get tenantId(){return this.workspace.ws.tenantId}get userName(){return this.ws.getMultilingualValueImmediate(this.ws.userSettings,"Name")}get companyName(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"ShortCompanyName")}get isRtl(){return this.workspace.ws.isRtl}onMySystemAccount(){location.href=k.b.identityAddress+"/identity/manage/"}onSignOut(){this.progress.startAsyncOperation("sign_out","RedirectingToSignOut"),this.auth.signOut()}get flip(){return this.isRtl?"horizontal":null}onMyCompanyAccount(){this.fetch(),this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.myAccountModal,{windowClass:"t-myuser-modal"}).result.then(()=>this.onMyCompanyAccountClose(),()=>this.onMyCompanyAccountClose())}fetch(){this.notifyFetch$.next(null)}doFetch(){return this.myUserStatus=L.c.loading,this.usersApi.getMyUser().pipe(Object(J.a)(e=>{Object(V.b)(e,this.workspace),this.myUserStatus=L.c.loaded,this.onEdit()}),Object(F.a)(e=>(this._errorMessage=e.error,this.myUserStatus=L.c.error,Object(A.a)(null))))}onEdit(){const e=this.ws.get("User",this.ws.userSettings.UserId);this.myUser={Name:e.Name,Name2:e.Name2,Name3:e.Name3,PreferredLanguage:e.PreferredLanguage}}onSave(e){this._errorMessage=null,this._saveErrorMessage=null,Object(q.c)(this.myUser),this.usersApi.saveMyUser(this.myUser).subscribe(t=>{Object(V.b)(t,this.workspace),e.close(!0)},e=>{if(422===e.status){const t=Object(q.b)(this.myUser,e.error);Object.keys(t).length>0&&console.error(t)}else this._saveErrorMessage=e.error;return Object(A.a)(null)})}onMyCompanyAccountClose(){this.workspace.ignoreKeyDownEvents=!1}get errorMessage(){return this._errorMessage}get saveErrorMessage(){return this._saveErrorMessage}get isMyUserLoaded(){return this.myUserStatus===L.c.loaded}get isMyUserError(){return this.myUserStatus===L.c.error}get isMyUserLoading(){return this.myUserStatus===L.c.loading}get myEmail(){return this.ws.get("User",this.ws.userSettings.UserId).Email}get myImageId(){return this.ws.get("User",this.ws.userSettings.UserId).ImageId}get canSave(){return this.isMyUserLoaded}get inboxCountDisplay(){const e=this.inboxCount;return Object(V.n)(e)?e>99?"99+":e.toString():"..."}get unknownInboxCountDisplay(){const e=this.unknownInboxCount;return e?e>99?"99+":e.toString():""}doFetchInbox(e){let t=this.inboxState;if(t.masterStatus=L.g.loading,e){const e=this.workspace.ws.tenantId;return this.inboxCrud.getEntities({silent:!0,top:25,skip:0,select:"Comment,CreatedAt,CreatedBy.Name,CreatedBy.Name2,CreatedBy.Name3,\n      CreatedBy.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",countEntities:!0}).pipe(Object(J.a)(n=>{t=this.inboxState,t.top=n.Top,t.skip=n.Skip,t.total=n.TotalCount,t.masterStatus=L.g.loaded,t.collectionName=n.CollectionName,t.flatIds=Object(V.c)(n,this.workspace);const i=n.ServerTime,c=n.TotalCount,o=Math.min(n.Extras.UnknownCount,n.TotalCount);this.notificationsService.handleFreshInboxCounts(e,i,c,o)}),Object(F.a)(e=>(t=this.inboxState,t.masterStatus=L.g.error,t.errorMessage=e.error,Object(A.a)(null))))}return t.total=e,t.masterStatus=L.g.loaded,t.flatIds=[],Object(A.a)()}get inboxCount(){const e=this.notificationsService.tenantState;return e?e.inbox.count:null}get unknownInboxCount(){const e=this.notificationsService.tenantState;return e?e.inbox.unknownCount:null}get showInboxSpinner(){return this.inboxState.masterStatus===L.g.loading}get showEmptyInboxMessage(){const e=this.inboxState;return e.masterStatus===L.g.loaded&&0===e.flatIds.length}get showSeeAll(){const e=this.inboxState;return e.flatIds.length<e.total}get inboxState(){const e=this.inboxStateKey,t=this.workspace.current.mdState;return t[e]||(t[e]=new L.e),t[e]}get ids(){return this.inboxState.flatIds}get c(){return this.workspace.currentTenant.InboxRecord}get docs(){return this.workspace.currentTenant.Document}isToday(e){const t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}checkInbox(){if(this.unknownInboxCount>0){this.notificationsService.tenantState.inbox.unknownCount=0;const e=this.ids[0];e&&this.inboxApi.check(this.c[e].CreatedAt).subscribe()}}onDropdownInbox(e){this.workspace.ignoreKeyDownEvents=e,e&&this.checkInbox()}onModalInbox(){this.workspace.ignoreKeyDownEvents=!0,this.checkInbox(),this.modalService.open(this.inboxModal,{windowClass:"t-inbox-modal"}).result.then(()=>this.workspace.ignoreKeyDownEvents=!1,()=>this.workspace.ignoreKeyDownEvents=!1)}get isMdScreen(){return this.workspace.mediumDevice}get favorites(){if(this._favoritesUserSettings!==this.ws.userSettings){this._favoritesUserSettings=this.ws.userSettings;let t=!1;const n=this.ws.userSettings.CustomSettings.favorites;if(n)try{this._favorites=JSON.parse(n),t=!0}catch(e){}t||(this._favorites=[])}return this._favorites}get isBasic(){return"basic"===this.favoriteMode}get isAdvanced(){return"advanced"===this.favoriteMode}onBasicFavoriteEditMode(){this.favoriteMode="basic"}onAdvancedFavoriteEditMode(){this.favoriteMode="advanced"}onToggleFavoriteEditMode(){this.favoriteMode="basic"===this.favoriteMode?"advanced":"basic"}removeUrlPrefix(e){if(e&&e.startsWith("/app/")){const t=e.split("/");return t.shift(),t.shift(),t.shift(),"/"+t.join("/")}return e}get urlPrefix(){return`/app/${this.workspace.ws.tenantId}`}onAddFavorite(){const e=this.removeUrlPrefix(this.router.url);if(!e)return;const t=this.favorites.findIndex(t=>t.url===e);this.onEditFavorite(t<0?{id:0,label:"",url:e}:this.favorites[t])}onEditFavorite(e){this.favoriteToSave=JSON.parse(JSON.stringify(e)),this.showEditFavoriteModal()}showEditFavoriteModal(){this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.favoriteModal).result.then(e=>this.onCloseEditFavorite(e),()=>this.onCloseEditFavorite())}onCloseEditFavorite(e=!1){if(this.workspace.ignoreKeyDownEvents=!1,e){const e=this.favoriteToSave;0===e.id&&(e.id=this.maxId+1);const t=this.favorites.findIndex(t=>t.id===e.id);t<0?this.favorites.push(e):this.favorites[t]=e,this.saveFavorites()}delete this.favoriteToSave}onDeleteFavorite(e){this._favorites=this.favorites.filter(t=>t.id!==e.id),this.saveFavorites()}onDragDropFavorite(e){const t=this.favorites,n=this.workspace.ws.isRtl?t.length-e.currentIndex-1:e.currentIndex,i=e.previousIndex;i!==n&&(Object(j.h)(t,i,n),this.saveFavorites())}get maxId(){let e=0;for(const t of this.favorites)e<t.id&&(e=t.id);return e}saveFavorites(){const e=JSON.stringify(this.favorites);this.userSettings.save("favorites",e)}onClickFavorite(e){e=this.urlPrefix+this.removeUrlPrefix(e),this.onCollapse(),this.router.navigateByUrl(e)}get menuOrientation(){return this.isMdScreen?"horizontal":"vertical"}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(U.a),c.Mb(i.e),c.Mb(K.d),c.Mb(B.a),c.Mb(H.b),c.Mb(Q.a),c.Mb(W.a),c.Mb(C.c),c.Mb(G.t),c.Mb(Y.a),c.Mb(X.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-application-shell"]],viewQuery:function(e,t){if(1&e&&(c.Qc(Re,3),c.Qc(ye,3),c.Qc(De,3)),2&e){let e;c.zc(e=c.dc())&&(t.myAccountModal=e.first),c.zc(e=c.dc())&&(t.inboxModal=e.first),c.zc(e=c.dc())&&(t.favoriteModal=e.first)}},decls:70,vars:48,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-dark","t-dark","navbar-expand-md","p-0","align-items-md-stretch"],["routerLink","main-menu",1,"t-brand-link","t-navbar-button",3,"title"],[3,"scale"],[1,"mx-2","d-flex"],["class","t-navbar-button nav-link",3,"disabled","click",4,"ngIf"],["class","nav navbar-nav",4,"ngIf"],["type","button",1,"navbar-toggler","mx-2",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse","align-items-stretch",3,"ngbCollapse"],["cdkDropList","",1,"nav","navbar-nav","px-4","px-md-0","flex-nowrap","flex-grow-1","t-md-zero-width","overflow-auto",3,"cdkDropListOrientation","cdkDropListDropped"],["class","nav-item","cdkDrag","",3,"tContextMenu","tContext",4,"ngFor","ngForOf"],["favoriteMenu",""],[1,"nav","navbar-nav","flex-nowrap"],[1,"nav-item"],[1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center",3,"title","click"],["icon","star"],["class","nav-item","ngbDropdown","","container","",3,"openChange",4,"ngIf"],["ngbDropdown","","container","",1,"nav-item"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow"],[1,"align-self-center"],[1,"t-dp-wrapper","t-dp-dark","bg-white","mx-1"],["shape","circle",3,"src","imageId","size"],[1,"d-flex","flex-column","justify-content-center","align-self-center"],[2,"line-height","1.1rem"],[1,"small","font-weight-bold"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow","m-0"],["type","button","ngbDropdownItem","","routerLink","/root/companies",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","","routerLink","/root/welcome",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[4,"ngIf"],[1,"t-rest-of-screen","container-fluid"],["inboxButtonContent",""],["inboxEntryContent",""],["emptyInboxMessage",""],["seeAllLink",""],["inboxModal",""],["myAccountModal",""],["favoriteModal",""],[1,"t-navbar-button","nav-link",3,"disabled","click"],["icon","arrow-left",3,"flip"],["icon","arrow-right",3,"flip"],[1,"nav","navbar-nav"],[1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center",3,"click"],[4,"ngTemplateOutlet"],["cdkDrag","",1,"nav-item",3,"tContextMenu","tContext"],[1,"t-navbar-button","nav-link","d-flex","flex-column","justify-content-center","h-100","text-nowrap",3,"click"],["class","t-dark d-flex flex-column justify-content-center text-white p-2","style","height:50px",4,"cdkDragPreview"],["class","bg-secondary p-2","style","cursor: unset; width: 4rem",4,"cdkDragPlaceholder"],[1,"t-dark","d-flex","flex-column","justify-content-center","text-white","p-2",2,"height","50px"],[1,"bg-secondary","p-2",2,"cursor","unset","width","4rem"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","pen"],[1,"t-menu-text"],["icon","trash"],["ngbDropdown","","container","",1,"nav-item",3,"openChange"],["inboxDrop","ngbDropdown"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center"],["ngbDropdownMenu","",1,"dropdown-menu","shadow","m-0","p-0",2,"width","27rem","max-height","30rem","overflow-y","auto"],[1,"px-2","py-1","border-bottom","d-flex","justify-content-between","t-slightly-bold"],[3,"scale",4,"ngIf"],[3,"routerLink","click"],["class","p-2 border-bottom t-inbox-item b","ngbDropdownItem","",3,"bg-light","routerLink","click",4,"ngFor","ngForOf"],["class","t-slightly-bold p-1 text-center",4,"ngIf"],["ngbDropdownItem","",1,"p-2","border-bottom","t-inbox-item","b",3,"routerLink","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"t-slightly-bold","p-1","text-center"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],[2,"position","relative"],["icon","inbox",2,"font-size","1.1rem"],["class","badge badge-danger t-notification-badge",3,"border-color",4,"ngIf"],[1,"badge","badge-danger","t-notification-badge"],[1,"d-flex"],[1,"px-1"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","font-weight-bold"],[1,"text-muted"],[1,"text-truncate","text-muted"],["collection","Document",3,"definitionId","entity"],["class","text-wrap",4,"ngIf"],[1,"text-wrap"],["class","p-2 my-2 alert-success text-center",4,"ngIf"],[1,"p-2","my-2","alert-success","text-center"],["icon","check"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0","bg-white","t-rest-of-screen"],["class","p-2 border-bottom t-inbox-item a","ngbDropdownItem","",3,"bg-light","routerLink","click",4,"ngFor","ngForOf"],["class","t-slightly-bold p-2 text-center",4,"ngIf"],["ngbDropdownItem","",1,"p-2","border-bottom","t-inbox-item","a",3,"routerLink","click"],[1,"t-slightly-bold","p-2","text-center"],[1,"modal-body","p-0","bg-white"],["class","row m-0 px-1 px-sm-3 pt-3 pt-sm-4 pb-3 pb-sm-5",4,"ngIf"],["class","d-flex justify-content-center py-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"row","m-0","px-1","px-sm-3","pt-3","pt-sm-4","pb-3","pb-sm-5"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"col-12","col-md-4","t-details-image-container"],[1,"border"],[3,"src","imageId","ngModel","isEdit","size","ngModelChange"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","py-2"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","editMode"],[1,"modal-body"],[1,"t-form-group",2,"margin-top","0!important",3,"label"],[3,"ngModel","ngModelChange"],[3,"ngModel","focusIf","ngModelChange"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["class","t-form-group","style","margin-top:0!important",3,"label",4,"ngIf"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"nav",1),c.Sb(2,"a",2),c.hc(3,"translate"),c.Nb(4,"t-brand",3),c.Rb(),c.Sb(5,"div",4),c.Jc(6,we,2,2,"button",5),c.Lc(7," \xa0 "),c.Jc(8,Ee,2,2,"button",5),c.Rb(),c.Jc(9,xe,3,1,"div",6),c.Sb(10,"button",7),c.cc("click",function(){return t.onToggleCollapse()}),c.Nb(11,"span",8),c.Rb(),c.Sb(12,"div",9),c.Sb(13,"ol",10),c.cc("cdkDropListDropped",function(e){return t.onDragDropFavorite(e)}),c.Jc(14,Le,5,3,"li",11),c.Jc(15,ke,14,6,"ng-template",null,12,c.Kc),c.Rb(),c.Sb(17,"ol",13),c.Sb(18,"li",14),c.Sb(19,"button",15),c.cc("click",function(){return t.onAddFavorite()}),c.hc(20,"translate"),c.Nb(21,"fa-icon",16),c.Rb(),c.Rb(),c.Jc(22,Ue,16,14,"li",17),c.Sb(23,"li",18),c.Sb(24,"button",19),c.Sb(25,"div",20),c.Sb(26,"div",21),c.Nb(27,"t-image",22),c.Rb(),c.Rb(),c.Lc(28," \xa0\xa0 "),c.Sb(29,"div",23),c.Sb(30,"div",24),c.Lc(31),c.Rb(),c.Sb(32,"div",25),c.Lc(33),c.Rb(),c.Rb(),c.Lc(34," \xa0\xa0 "),c.Rb(),c.Sb(35,"div",26),c.Sb(36,"button",27),c.cc("click",function(){return t.onCollapse()}),c.Lc(37),c.hc(38,"translate"),c.Rb(),c.Sb(39,"button",28),c.cc("click",function(){return t.onCollapse()}),c.Lc(40),c.hc(41,"translate"),c.Rb(),c.Sb(42,"button",29),c.cc("click",function(){return t.onMySystemAccount(),t.onCollapse()}),c.Lc(43),c.hc(44,"translate"),c.hc(45,"translate"),c.Rb(),c.Sb(46,"button",29),c.cc("click",function(){return t.onMyCompanyAccount(),t.onCollapse()}),c.Lc(47),c.hc(48,"translate"),c.Rb(),c.Sb(49,"button",29),c.cc("click",function(){return t.onSignOut(),t.onCollapse()}),c.Lc(50),c.hc(51,"translate"),c.Rb(),c.Jc(52,Qe,5,3,"ng-container",30),c.Jc(53,Ye,4,2,"ng-container",30),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(54,"main",31),c.Nb(55,"router-outlet"),c.Rb(),c.Rb(),c.Jc(56,Ze,5,2,"ng-template",null,32,c.Kc),c.Jc(58,nt,15,13,"ng-template",null,33,c.Kc),c.Jc(60,ct,1,1,"ng-template",null,34,c.Kc),c.Jc(62,ot,3,4,"ng-template",null,35,c.Kc),c.Jc(64,bt,12,7,"ng-template",null,36,c.Kc),c.Jc(66,Mt,21,17,"ng-template",null,37,c.Kc),c.Jc(68,wt,35,36,"ng-template",null,38,c.Kc)),2&e&&(c.zb(1),c.Ic("background-color",null==t.settings?null:t.settings.BrandColor),c.zb(1),c.nc("title",c.ic(3,26,"Home")),c.zb(2),c.nc("scale",1),c.zb(2),c.nc("ngIf",t.nav.showBack),c.zb(2),c.nc("ngIf",t.nav.showForward),c.zb(1),c.nc("ngIf",!t.isMdScreen),c.zb(3),c.nc("ngbCollapse",t.isCollapsed),c.zb(1),c.nc("cdkDropListOrientation",t.menuOrientation),c.zb(1),c.nc("ngForOf",t.favorites),c.zb(5),c.nc("title",c.ic(20,28,"AddScreenToFavorites")),c.zb(3),c.nc("ngIf",t.isMdScreen),c.zb(5),c.nc("src","users/"+(null==t.ws||null==t.ws.userSettings?null:t.ws.userSettings.UserId)+"/image")("imageId",null==t.ws||null==t.ws.userSettings?null:t.ws.userSettings.ImageId)("size",28),c.zb(4),c.Mc(t.userName),c.zb(2),c.Nc(" ",t.companyName,""),c.zb(2),c.Eb("dropdown-menu-right",!t.isRtl),c.zb(2),c.Nc(" ",c.ic(38,30,"ChangeCompany")," "),c.zb(3),c.Nc(" ",c.ic(41,32,"WelcomePage")," "),c.zb(3),c.Nc(" ",c.jc(44,34,"My0Account",c.rc(44,It,c.ic(45,37,"AppName")))," "),c.zb(4),c.Nc(" ",c.jc(48,39,"My0Account",c.rc(46,It,t.companyName))," "),c.zb(3),c.Nc(" ",c.ic(51,42,"SignOut")," "),c.zb(2),c.nc("ngIf",(null==t.settings?null:t.settings.SecondaryLanguageId)||(null==t.settings?null:t.settings.TernaryLanguageId)),c.zb(1),c.nc("ngIf",!(null==t.settings||!t.settings.SecondaryCalendar)))},directives:[G.B,i.g,Z.a,C.l,G.d,j.f,C.k,ee.a,G.l,G.r,be,G.p,G.o,i.f,i.i,C.p,j.b,ge.a,j.e,j.d,fe.a,me.a,he.a,te.i,te.j,pe.a,te.m,Se.a],pipes:[K.c,Ie,Me],encapsulation:2}),e})();var Ct=n("6vYK"),xt=n("O90C"),Tt=n("QFit");function zt(e,t){if(1&e&&(c.Sb(0,"div",13),c.Sb(1,"span",14),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",15),c.Sb(4,"span",14),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("Unit",e,"Name")),c.zb(3),c.Mc(n.ws.getMultilingualValue("Unit",e,"Description"))}}function Lt(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Unit"),"\n")}function kt(e,t){if(1&e&&(c.Sb(0,"span",16),c.Nb(1,"t-auto-cell",17),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function Ot(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function At(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function Nt(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}function _t(e,t){if(1&e&&(c.Lc(0),c.hc(1,"translate")),2&e){const e=c.gc();c.Nc(" ",c.ic(1,1,e.unitTypeLookup("Pure")),"")}}function Jt(e,t){if(1&e&&(c.Lc(0),c.hc(1,"translate")),2&e){const e=c.gc();c.Nc(" ",c.ic(1,1,e.unitTypeLookup("Time")),"")}}function Pt(e,t){if(1&e&&(c.Lc(0),c.hc(1,"translate")),2&e){const e=c.gc();c.Nc(" ",c.ic(1,1,e.unitTypeLookup("Distance")),"")}}function Ft(e,t){if(1&e&&(c.Lc(0),c.hc(1,"translate")),2&e){const e=c.gc();c.Nc(" ",c.ic(1,1,e.unitTypeLookup("Count")),"")}}function Vt(e,t){if(1&e&&(c.Lc(0),c.hc(1,"translate")),2&e){const e=c.gc();c.Nc(" ",c.ic(1,1,e.unitTypeLookup("Mass")),"")}}function qt(e,t){if(1&e&&(c.Lc(0),c.hc(1,"translate")),2&e){const e=c.gc();c.Nc(" ",c.ic(1,1,e.unitTypeLookup("Volume")),"")}}const jt=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},$t=function(e,t){return[e,t]},Ut=function(e){return{template:e,expression:"CreatedById eq me"}},Kt=function(e){return[e]},Bt=function(e){return{template:e,expression:"UnitType eq 'Pure'"}},Ht=function(e){return{template:e,expression:"UnitType eq 'Time'"}},Qt=function(e){return{template:e,expression:"UnitType eq 'Distance'"}},Wt=function(e){return{template:e,expression:"UnitType eq 'Count'"}},Gt=function(e){return{template:e,expression:"UnitType eq 'Mass'"}},Yt=function(e){return{template:e,expression:"UnitType eq 'Volume'"}},Xt=function(e,t,n,i,c,o){return[e,t,n,i,c,o]},Zt=function(e,t){return{CreatedBy:e,UnitType:t}};let en=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.unitsApi=this.api.unitsApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.unitsApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.unitsApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("units","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.unitsApi=this.api.unitsApi(this.notifyDestruct$)}get c(){return this.ws.Unit}get ws(){return this.workspace.currentTenant}unitTypeLookup(e){return Object(Ct.a)(this.workspace,this.translate).properties.UnitType.format(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-units-master"]],features:[c.wb],decls:26,vars:51,consts:[["collection","Unit","selectDefault","Code,UnitType,UnitAmount,BaseAmount,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["pure",""],["time",""],["distance",""],["count",""],["mass",""],["volume",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Unit",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,zt,6,2,"ng-template",null,1,c.Kc),c.Jc(4,Lt,2,3,"ng-template",null,2,c.Kc),c.Jc(6,kt,2,1,"ng-template",null,3,c.Kc),c.Jc(8,Ot,2,3,"ng-template",null,4,c.Kc),c.Jc(10,At,2,3,"ng-template",null,5,c.Kc),c.Jc(12,Nt,2,3,"ng-template",null,6,c.Kc),c.Jc(14,_t,2,3,"ng-template",null,7,c.Kc),c.Jc(16,Jt,2,3,"ng-template",null,8,c.Kc),c.Jc(18,Pt,2,3,"ng-template",null,9,c.Kc),c.Jc(20,Ft,2,3,"ng-template",null,10,c.Kc),c.Jc(22,Vt,2,3,"ng-template",null,11,c.Kc),c.Jc(24,qt,2,3,"ng-template",null,12,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13),l=c.Ac(15),a=c.Ac(17),u=c.Ac(19),d=c.Ac(21),b=c.Ac(23),g=c.Ac(25);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"Units"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(22,$t,c.uc(12,jt,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(17,jt,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.sc(48,Zt,c.rc(27,Kt,c.rc(25,Ut,s)),c.wc(41,Xt,c.rc(29,Bt,l),c.rc(31,Ht,a),c.rc(33,Qt,u),c.rc(35,Wt,d),c.rc(37,Gt,b),c.rc(39,Yt,g))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();function tn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",4),c.Sb(1,"button",5),c.cc("click",function(){return c.Dc(e),c.gc().onHome()}),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()}2&e&&(c.zb(2),c.Mc(c.ic(3,1,"Home")))}let nn=(()=>{class e{constructor(e,t){this.router=e,this.workspace=t,this.showHome=!0}onHome(){this.router.navigate(["app",this.workspace.ws.tenantId+"","main-menu"])}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(i.e),c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-application-page-not-found"]],inputs:{showHome:"showHome"},decls:8,vars:7,consts:[[1,"p-5"],[1,"text-danger"],[1,"text-muted"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"h2",1),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"p",2),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Jc(7,tn,4,3,"div",3),c.Rb()),2&e&&(c.zb(2),c.Nc(" ",c.ic(3,3,"Error_PageNotFound")," "),c.zb(3),c.Mc(c.ic(6,5,"Error_PageNotFoundMessage")),c.zb(2),c.nc("ngIf",t.showHome))},directives:[C.l],pipes:[K.c],encapsulation:2}),e})();var cn=n("PqYM"),on=n("lV2L");const rn=["searchInput"];function sn(e,t){1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound"),""))}function ln(e,t){if(1&e){const e=c.Tb();c.Sb(0,"a",15),c.cc("focus",function(){c.Dc(e);const n=t.index;return c.gc(2).onFocus(0,n)})("blur",function(){return c.Dc(e),c.gc(2).onBlur()})("click",function(){c.Dc(e);const n=t.$implicit;return c.gc(2).onMenuItemClick(n)}),c.Sb(1,"div",16),c.Nb(2,"fa-icon",17),c.Rb(),c.Sb(3,"div",18),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=t.index,i=c.gc(2);c.Eb("d-none",!i.showItem(e)),c.nc("id",i.getId(0,n))("routerLink",i.linkArray(e))("title",e.label),c.zb(2),c.nc("icon",e.icon),c.zb(2),c.Nc(" ",c.ic(5,7,e.label)," ")}}function an(e,t){if(1&e&&(c.Sb(0,"div",12),c.Sb(1,"div",13),c.Sb(2,"span"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Jc(5,ln,6,9,"a",14),c.Rb()),2&e){const e=c.gc();c.Eb("d-none",!e.showSection(e.quickAccess)),c.zb(3),c.Mc(c.ic(4,4,"Menu_QuickAccess")),c.zb(2),c.nc("ngForOf",e.quickAccess)}}function un(e,t){if(1&e){const e=c.Tb();c.Sb(0,"a",15),c.cc("focus",function(){c.Dc(e);const n=t.index,i=c.gc().index;return c.gc(2).onFocus(i+1,n)})("blur",function(){return c.Dc(e),c.gc(3).onBlur()})("click",function(){c.Dc(e);const n=t.$implicit;return c.gc(3).onMenuItemClick(n)}),c.Sb(1,"div",16),c.Nb(2,"fa-icon",17),c.Rb(),c.Sb(3,"div",18),c.Lc(4),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=t.index,i=c.gc().index,o=c.gc(2);c.Eb("d-none",!o.showItem(e)),c.nc("id",o.getId(i+1,n))("routerLink",o.linkArray(e))("title",e.label),c.zb(2),c.nc("icon",e.icon),c.zb(2),c.Nc(" ",e.label," ")}}function dn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div"),c.Sb(1,"div",20),c.cc("dblclick",function(){c.Dc(e);const n=t.$implicit;return c.gc(2).onSectionDoubleClick(n)}),c.Sb(2,"span"),c.Lc(3),c.Rb(),c.Rb(),c.Jc(4,un,5,7,"a",14),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2);c.Cb("mb-4 mb-md-5 ",e.background,""),c.Eb("d-none",!n.showSection(null==e?null:e.items)),c.zb(3),c.Mc(e.label),c.zb(1),c.nc("ngForOf",e.items)}}function bn(e,t){if(1&e&&(c.Qb(0),c.Jc(1,dn,5,7,"div",19),c.Pb()),2&e){const e=c.gc();c.zb(1),c.nc("ngForOf",e.mainMenu)}}function gn(e,t){1&e&&(c.Sb(0,"div",21),c.Nb(1,"t-spinner",22),c.Rb()),2&e&&(c.zb(1),c.nc("scale",2))}let fn=(()=>{class e{constructor(e,t,n,i,c,o){this.router=e,this.route=t,this.document=n,this.translate=i,this.workspace=c,this.userSettings=o,this.MAX_TILES=6,this.TILE_WIDTH=135,this.TILE_MARGIN=4,this.CONTAINER_MARGIN=15,this.currentSection=-1,this.currentItem=-1,this.currentXMemory=-1,this.rendered=!1,this.mainMenuBase={Mail:{background:"t-blue1",items:[{label:"Inbox",icon:"inbox",link:"../inbox",sortKey:10},{label:"Outbox",icon:"share",link:"../outbox",sortKey:20}]},Financials:{background:"t-green1",items:[{label:"Accounts",icon:"coins",link:"../accounts",view:"accounts",sortKey:100},{label:"AccountStatement",icon:"file-alt",link:"../account-statement",canView:()=>this.canView("accounts")&&this.canView("details-entries"),paramsFunc:()=>this.userSettings.get("account-statement/arguments"),sortKey:101},{label:"EntryTypes",icon:"sitemap",link:"../entry-types",view:"entry-types",sortKey:200},{label:"AccountTypes",icon:"sitemap",link:"../account-types",view:"account-types",sortKey:300},{label:"AccountClassifications",icon:"indent",link:"../account-classifications",view:"account-classifications",sortKey:500},{label:"Centers",icon:"object-group",link:"../centers",view:"centers",sortKey:600},{label:"FinancialSettings",icon:"cog",link:"../financial-settings",view:"financial-settings",sortKey:700}]},Cash:{background:"t-teal2",items:[{label:"ExchangeRates",icon:"exchange-alt",link:"../exchange-rates",view:"exchange-rates",sortKey:100},{label:"BankReconciliation",icon:"tasks",link:"../reconciliation",view:"reconciliation",sortKey:200,paramsFunc:()=>this.userSettings.get("reconciliation/arguments")}]},FixedAssets:{background:"t-blue2",items:[]},Inventory:{background:"t-green2",items:[]},Production:{background:"t-teal3",items:[]},Purchasing:{background:"t-blue3",items:[]},Marketing:{background:"t-green3",items:[]},Sales:{background:"t-teal1",items:[]},HumanCapital:{background:"t-blue1",items:[]},Investments:{background:"t-green1",items:[]},Maintenance:{background:"t-teal2",items:[]},Administration:{background:"t-blue2",items:[{label:"Agents",icon:"id-badge",link:"../agents",view:"agents",sortKey:100},{label:"Units",icon:"ruler",link:"../units",view:"units",sortKey:200},{label:"Currencies",icon:"euro-sign",link:"../currencies",view:"currencies",sortKey:300},{label:"IfrsConcepts",icon:"stream",link:"../ifrs-concepts",view:"ifrs-concepts",sortKey:600},{label:"Emails",icon:"envelope",link:"../emails",sortKey:400,canView:()=>this.workspace.globalSettings.EmailEnabled&&this.canView("emails")},{label:"SmsMessages",icon:"sms",link:"../sms-messages",sortKey:500,canView:()=>this.workspace.globalSettings.SmsEnabled&&this.workspace.currentTenant.settings.SmsEnabled&&this.canView("sms-messages")},{label:"GeneralSettings",icon:"cog",link:"../general-settings",view:"general-settings",sortKey:700}]},Security:{background:"t-green2",items:[{label:"Users",icon:"users",link:"../users",view:"users",sortKey:100},{label:"Roles",icon:"shield-alt",link:"../roles",view:"roles",sortKey:200}]},Studio:{background:"t-black",items:[{label:"ReportDefinitions",icon:"tools",link:"../report-definitions",view:"report-definitions",sortKey:100},{label:"DashboardDefinitions",icon:"tools",link:"../dashboard-definitions",view:"dashboard-definitions",sortKey:150},{label:"LineDefinitions",icon:"tools",link:"../line-definitions",view:"line-definitions",sortKey:200},{label:"DocumentDefinitions",icon:"tools",link:"../document-definitions",view:"document-definitions",sortKey:225},{label:"RelationDefinitions",icon:"tools",link:"../relation-definitions",view:"relation-definitions",sortKey:250},{label:"ResourceDefinitions",icon:"tools",link:"../resource-definitions",view:"resource-definitions",sortKey:300},{label:"LookupDefinitions",icon:"tools",link:"../lookup-definitions",view:"lookup-definitions",sortKey:400},{label:"MarkupTemplates",icon:"file-code",link:"../markup-templates",view:"markup-templates",sortKey:500}]},Help:{background:"t-blue2",items:[]},Miscellaneous:{background:"t-grey",items:[]}},this._permissions=null,this._definitions=null,this._settings=null}ngOnInit(){const e=this.mainMenu.reduce((e,t)=>e+t.items.length,0);this.document.body.classList.add("t-banner"),e<60&&this.render(),"popstate"===this.workspace.lastNavigation&&(this.search=this.ws.mainMenuSearch,this.search&&this.render())}ngAfterViewInit(){this.rendered||Object(cn.a)(1).subscribe(()=>this.render())}ngOnDestroy(){this.document.body.classList.remove("t-banner"),this.ws.mainMenuSearch=this.search}render(){this.rendered=!0}get ws(){return this.workspace.currentTenant}get mainMenu(){return this.initializeMainMenu(),this._mainMenu}get quickAccess(){return this.initializeMainMenu(),this._quickAccess}initializeMainMenu(){const e=this.workspace.currentTenant;if(this._definitions!==e.definitions||this._settings!==e.settings||this._userSettings!==e.userSettings||this._currentCulture!==this.workspace.ws.culture||this._permissions!==e.permissions){this._definitions=e.definitions,this._settings=e.settings,this._userSettings=this.workspace.current.userSettings,this._currentCulture=this.workspace.ws.culture,this._permissions=e.permissions;const t=Object.assign({},this.mainMenuBase);for(const e of Object.keys(this.mainMenuBase)){t[e]=Object.assign({},t[e]),t[e].items=t[e].items.map(e=>Object.assign({},e));for(const n of t[e].items)n.label=this.translate.instant(n.label)}this.addDefinitions(t,e.definitions.Lookups,"lookups"),this.addDefinitions(t,e.definitions.Relations,"relations"),this.addDefinitions(t,e.definitions.Resources,"resources"),this.addDefinitions(t,e.definitions.Documents,"documents"),this.addReportDefinitions(t),this.addDashboardDefinitions(t),this._mainMenu=Object.keys(t).map(e=>({label:this.translate.instant("Menu_"+e),items:t[e].items.sort((e,t)=>e.sortKey-t.sortKey),background:t[e].background}));const n=this.userSettings.get("main-menu/quick-access");if(n&&n.length){const e={};for(const i of n)e[i]=!0;const t={};for(const n of this._mainMenu)for(const i of n.items)e[i.link]&&(t[i.link]=i);this._quickAccess=n.map(e=>t[e]).filter(e=>!!e)}else this._quickAccess=[]}}addReportDefinitions(e){const t=this.workspace.currentTenant,n={};for(const i of t.reportIds)n[i]=!0;for(const i of Object.keys(t.definitions.Reports)){const c=t.definitions.Reports[+i];if(c.ShowInMainMenu&&n[i]){const n=t.getMultilingualValueImmediate(c,"Title")||this.translate.instant("Untitled");let o;o=e[c.MainMenuSection]?c.MainMenuSection:"Miscellaneous",e[o].items.push({label:n,sortKey:c.MainMenuSortKey,icon:c.MainMenuIcon||"folder",link:`../report/${i}`})}}}addDashboardDefinitions(e){const t=this.workspace.currentTenant,n={};for(const i of t.dashboardIds)n[i]=!0;for(const i of Object.keys(t.definitions.Dashboards)){const c=t.definitions.Dashboards[+i];if(c.ShowInMainMenu&&n[i]){const n=t.getMultilingualValueImmediate(c,"Title")||this.translate.instant("Untitled");let o;o=e[c.MainMenuSection]?c.MainMenuSection:"Miscellaneous",e[o].items.push({label:n,sortKey:c.MainMenuSortKey,icon:c.MainMenuIcon||"folder",link:`../dashboard/${i}`})}}}linkArray(e){if(!e.linkArray&&(e.linkArray=[e.link],e.paramsFunc)){const t=e.paramsFunc();t&&e.linkArray.push(t)}return e.linkArray}addDefinitions(e,t,n,i){if(t){i=i||(e=>this.workspace.currentTenant.getMultilingualValueImmediate(e,"TitlePlural")||this.translate.instant("Untitled"));for(const c of Object.keys(t).filter(e=>this.canView(`${n}/${e}`))){const o=t[c],r=i(o);e[o.MainMenuSection]||(o.MainMenuSection="Miscellaneous"),e[o.MainMenuSection].items.push({label:r,sortKey:o.MainMenuSortKey,icon:o.MainMenuIcon||"folder",link:`../${n}/${c}`})}}}handleKeyboardEvent(e){if(this.workspace.ignoreKeyDownEvents)return;let t=e.key;if(!this.searchInputIsFocused&&t&&1===t.trim().length&&(this.currentXMemory=-1,this.searchInput.nativeElement.value="",this.searchInput.nativeElement.focus()),!e.altKey&&!e.ctrlKey&&V.a[t])switch(this.workspace.ws.isRtl&&(t===V.a.ArrowRight?t=V.a.ArrowLeft:t===V.a.ArrowLeft&&(t=V.a.ArrowRight)),t){case V.a.Escape:this.currentXMemory=-1,this.search="",this.currentItem=-1,this.currentSection=-1,this.document.activeElement.blur();break;case V.a.Tab:this.currentXMemory=-1;break;case V.a.ArrowLeft:if(this.currentIdExists){this.currentXMemory=-1;const t=this.computeGridModel();let n=t.currentX;n-=1,n<0&&(n=0);const i=t.grid[t.currentY][n];this.focusTile(i.sectionIndex,i.itemIndex,e)}break;case V.a.ArrowRight:if(!this.showNoItemsFound&&!this.searchInputIsFocused){this.currentXMemory=-1;let t=0,n=0;const i=this.computeGridModel();this.currentIdExists&&(t=i.currentX,n=i.currentY,t+=1,i.grid[n][t]||(t-=1));const c=i.grid[n][t];this.focusTile(c.sectionIndex,c.itemIndex,e)}break;case V.a.ArrowUp:if(this.currentIdExists){const t=this.computeGridModel();let n=this.currentXMemory<0?t.currentX:this.currentXMemory,i=t.currentY;for(i-=1,i<0&&(i=0),this.currentXMemory=Math.max(this.currentXMemory,n);!t.grid[i][n]&&n>0;)n--;const c=t.grid[i][n];this.focusTile(c.sectionIndex,c.itemIndex,e)}break;case V.a.ArrowDown:if(!this.showNoItemsFound){let t=0,n=0;const i=this.computeGridModel();if(this.currentIdExists)for(t=this.currentXMemory<0?i.currentX:this.currentXMemory,n=i.currentY,n+=1,n>=i.height&&(n=i.height-1),this.currentXMemory=Math.max(this.currentXMemory,t);!i.grid[n][t]&&t>0;)t--;else this.currentXMemory=-1;const c=i.grid[n][t];this.focusTile(c.sectionIndex,c.itemIndex,e)}}}get searchInputIsFocused(){return this.searchInput.nativeElement===this.document.activeElement}focusTile(e,t,n){this.document.getElementById(this.getId(e,t)).focus(),n.preventDefault(),n.stopPropagation()}get rowTiles(){for(let e=this.MAX_TILES;e>0;e--)if(window.matchMedia(`(min-width: ${2*this.CONTAINER_MARGIN+(this.TILE_WIDTH+2*this.TILE_MARGIN)*e}px)`).matches)return e}computeGridModel(){const e=this.rowTiles;let t=-1,n=-1;const i=[];for(let c=0;c<this.sectionsLength;c++){const o=this.getSectionItems(c);if(this.showSectionIndex(c)){const r=o.map((e,t)=>({sectionIndex:c,itemIndex:t})).filter(e=>this.showItemIndex(e.sectionIndex,e.itemIndex));for(let c=0;c<r.length;c+=e){const o=r.slice(c,c+e);i.push(o);for(let c=0;c<e;c++){const e=o[c];e&&e.itemIndex===this.currentItem&&e.sectionIndex===this.currentSection&&(t=i.length-1,n=c)}}}}return{currentX:n,currentY:t,width:e,height:i.length,grid:i}}get sectionsLength(){return 1+this.mainMenu.length}getSectionItems(e){return 0===e?this.quickAccess:this.mainMenu[e-1].items}get currentIdExists(){return this.currentSection>=0&&this.currentItem>=0}onFocus(e,t){this.currentSection=e,this.currentItem=t}onBlur(){this.currentSection=-1,this.currentItem=-1}getId(e,t){return`${e}_${t}`}onNavigate(e){this.router.navigate([e],{relativeTo:this.route})}showSection(e){return(!this.search||e!==this.quickAccess)&&!!e&&e.some(e=>this.showItem(e))}showItem(e){const t=this.search;return(!e.view||this.canView(e.view))&&(!e.canView||e.canView())&&(!t||-1!==this.translate.instant(e.label).toLowerCase().indexOf(t.toLowerCase()))}showSectionIndex(e){const t=this.getSectionItems(e);return this.showSection(t)}showItemIndex(e,t){const n=this.getSectionItems(e)[t];return this.showItem(n)}get showNoItemsFound(){return this.mainMenu.every(e=>!this.showSection(e.items))&&!this.showSection(this.quickAccess)}canView(e){return this.workspace.currentTenant.canRead(e)}onSectionDoubleClick(e){if(e&&e.items){console.log(`------- Section: ${e.label} -------`);for(const t of e.items)console.log(`${t.sortKey} ${t.label}`)}}onMenuItemClick(e){if(this.quickAccess[0]&&e.link===this.quickAccess[0].link)return;const t=this.quickAccess.filter(t=>t.link!==e.link).map(e=>e.link);for(t.unshift(e.link);t.length>6;)t.pop();const n=JSON.stringify(t);this.userSettings.save("main-menu/quick-access",n)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(i.e),c.Mb(i.a),c.Mb(C.c),c.Mb(K.d),c.Mb(L.m),c.Mb(X.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-main-menu"]],viewQuery:function(e,t){if(1&e&&c.Qc(rn,3),2&e){let e;c.zc(e=c.dc())&&(t.searchInput=e.first)}},hostBindings:function(e,t){1&e&&c.cc("keydown",function(e){return t.handleKeyboardEvent(e)},!1,c.Bc)},decls:15,vars:9,consts:[["tScrollMemory","main-menu",1,"pt-3","pt-md-4","t-menu-screen",3,"tScrollMemoryTrigger"],["rootDiv",""],[1,"t-menu-search-container","mb-4"],["id","searchIcon","icon","search",1,"d-inline"],[1,"form-control","t-menu-search",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],[1,"t-menu-container"],["contentDiv",""],[4,"ngIf"],["class","mb-4 mb-md-5 t-quickaccess",3,"d-none",4,"ngIf"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"mb-4","mb-md-5","t-quickaccess"],[1,"t-menu-section"],["class","t-menu-item btn m-1",3,"id","d-none","routerLink","title","focus","blur","click",4,"ngFor","ngForOf"],[1,"t-menu-item","btn","m-1",3,"id","routerLink","title","focus","blur","click"],[1,"pt-4","pb-1","t-menu-item-icon"],[3,"icon"],["ellipsis","",1,"px-2","t-menu-item-label"],[3,"class","d-none",4,"ngFor","ngForOf"],[1,"t-menu-section",3,"dblclick"],[1,"text-center","pt-4"],[3,"scale"]],template:function(e,t){if(1&e&&(c.Sb(0,"div",0,1),c.Sb(2,"div",2),c.Lc(3," \xa0\xa0\xa0 "),c.Nb(4,"fa-icon",3),c.Sb(5,"input",4,5),c.cc("ngModelChange",function(e){return t.search=e}),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Sb(8,"div",6,7),c.Jc(10,sn,3,3,"div",8),c.Jc(11,an,6,6,"div",9),c.Jc(12,bn,2,1,"ng-container",10),c.Rb(),c.Jc(13,gn,2,1,"ng-template",null,11,c.Kc),c.Rb()),2&e){const e=c.Ac(14);c.nc("tScrollMemoryTrigger",t.rendered+(t.search||"")),c.zb(5),c.pc("placeholder","",c.ic(7,7,"Search"),"..."),c.nc("ngModel",t.search),c.zb(5),c.nc("ngIf",t.showNoItemsFound),c.zb(1),c.nc("ngIf",!t.search),c.zb(1),c.nc("ngIf",t.rendered)("ngIfElse",e)}},directives:[on.a,ee.a,te.c,te.i,te.j,C.l,C.k,i.g,x,fe.a],pipes:[K.c],encapsulation:2}),e})();var mn=n("CHDZ"),hn=n("ABE2"),pn=n("56d8");const Sn=["input"];let vn=(()=>{class e{constructor(){this.placeholder="",this.textAlignment=null,this.maxDecimalPlaces=null,this.minDecimalPlaces=null,this.noSeparator=!1,this.theme="light",this.isPercentage=!1,this.w100=!0,this.isDisabled=!1,this.onChange=e=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{}}writeValue(e){const t=this.format(e=this.isPercentage?100*e:e);this.input.nativeElement.value=t}registerOnChange(e){this.onChange=t=>{let n=this.parse(t);n=this.isPercentage?n/100:n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}ngOnChanges(e){if(e.maxDecimalPlaces&&!e.maxDecimalPlaces.isFirstChange()||e.minDecimalPlaces&&!e.minDecimalPlaces.isFirstChange()){const e=this.parse(this.input.nativeElement.value);this.input.nativeElement.value=this.format(e)}}get padding(){return"00000000"}get decimalSeparator(){return"."}get thousandsSeparator(){return","}isBracketed(e){return e.startsWith("(")&&e.endsWith(")")}removeBrackets(e){return e.substr(1,e.length-2)}format(e){if(!e&&0!==e)return"";const t=e<0,n=(Math.abs(e)||"0").toString();let[i,c=""]=n.split(this.decimalSeparator),o=this.minDecimalPlaces;null===o&&(o=c.length);let r=Math.max(this.maxDecimalPlaces,o);null===r&&(r=c.length);let s=c.length;s=Math.max(o,s),s=Math.min(r,s),c=s>0?this.decimalSeparator+(c+this.padding).substring(0,s):"",this.noSeparator||(i=i.replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator));let l=i+c;return this.isPercentage&&(l+="%"),t&&(l=`(${l})`),l}parse(e){if(null==e||""===e)return;e=(e||"").trim();const t=this.isBracketed(e);if(t&&(e=this.removeBrackets(e).trim()),this.isPercentage)for(;e.endsWith("%");)e=e.slice(0,-1);let[n,i=""]=e.split(this.decimalSeparator);n=n.replace(new RegExp(this.thousandsSeparator,"g"),"");let c=this.maxDecimalPlaces;null===c&&(c=i.length),i=parseInt(i,10)>0&&c>0?this.decimalSeparator+(i+this.padding).substring(0,c):"";const o=n+i,r=o?+o:0;return t?-r:r}onBlur(e){this.onTouched(),this.input.nativeElement.value=this.format(this.parse(e))}get isDark(){return"dark"===this.theme}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-decimal-editor"]],viewQuery:function(e,t){if(1&e&&c.Qc(Sn,3),2&e){let e;c.zc(e=c.dc())&&(t.input=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("w-100",t.w100)},inputs:{placeholder:"placeholder",textAlignment:"textAlignment",maxDecimalPlaces:"maxDecimalPlaces",minDecimalPlaces:"minDecimalPlaces",noSeparator:"noSeparator",theme:"theme",isPercentage:"isPercentage"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.xb],decls:2,vars:8,consts:[["type","text",1,"form-control",3,"placeholder","disabled","input","blur"],["input",""]],template:function(e,t){1&e&&(c.Sb(0,"input",0,1),c.cc("input",function(e){return t.onChange(e.target.value)})("blur",function(e){return t.onBlur(e.target.value)}),c.Rb()),2&e&&(c.Ic("text-align",t.textAlignment),c.Eb("t-input",!t.isDark)("t-studio-input",t.isDark),c.nc("placeholder",t.placeholder)("disabled",t.isDisabled))},encapsulation:2}),e})();function In(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function Mn(e,t){if(1&e&&(c.Sb(0,"h2",16),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const Rn=function(){return{updateOn:"blur"}};function yn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",17),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,Rn))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Dn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",18),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,Rn))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function wn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",18),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,Rn))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function En(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function Cn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,Rn))}}function xn(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,En,2,1,"div",11),c.Jc(3,Cn,1,3,"t-text-editor",13),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Tn(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function zn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,Rn))}}function Ln(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Tn,2,1,"div",11),c.Jc(3,zn,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function kn(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function On(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,Rn))}}function An(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,kn,2,1,"div",11),c.Jc(3,On,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Nn(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function _n(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Code)("ngModelOptions",c.qc(2,Rn))}}function Jn(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Description)}}function Pn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Description=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Description)("ngModelOptions",c.qc(2,Rn))}}function Fn(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Description2)}}function Vn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description2)("ngModelOptions",c.qc(2,Rn))}}function qn(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Fn,2,1,"div",11),c.Jc(3,Vn,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function jn(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Description3)}}function $n(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description3)("ngModelOptions",c.qc(2,Rn))}}function Un(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,jn,2,1,"div",11),c.Jc(3,$n,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Kn(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"t-restricted",21),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitType),c.zb(1),c.Nc(" ",c.ic(3,2,t.unitTypeLookup(null==e?null:e.UnitType))," ")}}function Bn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.UnitType=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.UnitType)("choices",t.unitTypeChoices)}}function Hn(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"t-restricted",21),c.Lc(2),c.hc(3,"number"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitAmount),c.zb(1),c.Nc(" ",c.ic(3,2,null==e?null:e.UnitAmount),"")}}function Qn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.UnitAmount=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.UnitAmount)("ngModelOptions",c.qc(2,Rn))}}function Wn(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"t-restricted",21),c.Lc(2),c.hc(3,"number"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.BaseAmount),c.zb(1),c.Nc(" ",c.ic(3,2,null==e?null:e.BaseAmount),"")}}function Gn(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.BaseAmount=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.BaseAmount)("ngModelOptions",c.qc(2,Rn))}}function Yn(e,t){if(1&e&&(c.Sb(0,"t-form-group",23),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",24),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(2),c.nc("entity",e)}}function Xn(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,Mn,2,1,"h2",6),c.Jc(2,yn,2,7,"t-text-editor",7),c.Jc(3,Dn,2,7,"t-text-editor",8),c.Jc(4,wn,2,7,"t-text-editor",8),c.Rb(),c.Jc(5,xn,4,6,"t-form-group",9),c.Jc(6,Ln,4,6,"t-form-group",9),c.Jc(7,An,4,6,"t-form-group",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Jc(10,Nn,2,1,"div",11),c.Jc(11,_n,1,3,"t-text-editor",12),c.Rb(),c.Sb(12,"t-form-group",10),c.hc(13,"translate"),c.Jc(14,Jn,2,1,"div",11),c.Jc(15,Pn,1,3,"t-text-editor",13),c.Rb(),c.Jc(16,qn,4,6,"t-form-group",9),c.Jc(17,Un,4,6,"t-form-group",9),c.Sb(18,"t-form-group",10),c.hc(19,"translate"),c.Jc(20,Kn,4,4,"div",11),c.Jc(21,Bn,1,2,"t-selector",14),c.Rb(),c.Sb(22,"t-form-group",10),c.hc(23,"translate"),c.Jc(24,Hn,4,4,"div",11),c.Jc(25,Qn,1,3,"t-decimal-editor",13),c.Rb(),c.Sb(26,"t-form-group",10),c.hc(27,"translate"),c.Jc(28,Wn,4,4,"div",11),c.Jc(29,Gn,1,3,"t-decimal-editor",13),c.Rb(),c.Jc(30,Yn,3,4,"t-form-group",15)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,31,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(13,33,"Description")+i.ws.primaryPostfix)("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Description),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(19,35,"Unit_UnitType"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.UnitType),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(23,37,"Unit_UnitAmount"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.UnitAmount),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(27,39,"Unit_BaseAmount"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.BaseAmount),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n)}}function Zn(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function ei(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const ti=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},ni=function(e,t){return[e,t]};let ii=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.unitsApi=this.api.unitsApi(this.notifyDestruct$),this.expand="",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.UnitAmount=1,e.BaseAmount=1,e},this.onActivate=e=>{e&&e.Id&&this.unitsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.unitsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("units","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.unitsApi=this.api.unitsApi(this.notifyDestruct$)}get unitTypeChoices(){if(!this._unitTypeChoices){const e=Object(Ct.a)(this.workspace,this.translate).properties.UnitType;this._unitTypeChoices=e.choices.map(t=>({name:()=>e.format(t),value:t}))}return this._unitTypeChoices}unitTypeLookup(e){return e?Object(Ct.a)(this.workspace,this.translate).properties.UnitType.format(e):""}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-units-details"]],features:[c.wb],decls:10,vars:26,consts:[["collection","Unit",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],["required","",3,"ngModel","choices","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Unit","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,In,2,1,"ng-template",null,1,c.Kc),c.Jc(4,Xn,31,41,"ng-template",null,2,c.Kc),c.Jc(6,Zn,2,3,"ng-template",null,3,c.Kc),c.Jc(8,ei,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,9,"Units"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.sc(23,ni,c.vc(11,ti,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(17,ti,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,pe.a,te.m,te.i,te.j,hn.a,pn.a,vn,me.a],pipes:[K.c,C.d],encapsulation:2}),e})();var ci=n("Y7zQ"),oi=n("DWXW");const ri=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},si=function(e,t){return[e,t]},li=function(e){return{template:e,expression:"CreatedById eq me"}},ai=function(e){return[e]},ui=function(e){return{CreatedBy:e}};function di(e,t){if(1&e&&c.Nb(0,"t-master",8),2&e){const e=c.gc(),t=c.Ac(4),n=c.Ac(8),i=c.Ac(6),o=c.Ac(10),r=c.Ac(12),s=c.Ac(14);c.nc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("multiselectActions",c.sc(21,si,c.uc(11,ri,o,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.uc(16,ri,r,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",c.rc(28,ui,c.rc(26,ai,c.rc(24,li,s))))}}function bi(e,t){if(1&e&&c.Nb(0,"t-application-page-not-found",9),2&e){const e=c.gc();c.nc("showHome",!e.isPopupMode)}}function gi(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",16),c.Nb(2,"t-image",17),c.Rb(),c.Lc(3," \xa0\xa0\xa0 "),c.Pb()),2&e){const e=c.gc().id,t=c.gc();c.zb(2),c.nc("src","relations/"+t.c[e].DefinitionId+"/"+t.c[e].Id+"/image")("imageId",t.c[e].ImageId)("size",42)}}function fi(e,t){if(1&e&&(c.Sb(0,"div",10),c.Jc(1,gi,4,3,"ng-container",11),c.Sb(2,"div",12),c.Sb(3,"div",13),c.Sb(4,"span",14),c.Lc(5),c.Rb(),c.Rb(),c.Sb(6,"div",15),c.Sb(7,"span"),c.Lc(8),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("ngIf",2===(null==n.c[e].EntityMetadata?null:n.c[e].EntityMetadata.ImageId)&&n.Image_isVisible),c.zb(4),c.Mc(n.ws.getMultilingualValue("Relation",e,"Name")),c.zb(3),c.Mc(n.c[e].Code)}}function mi(e,t){if(1&e&&c.Lc(0),2&e){const e=c.gc();c.Nc(" ",e.summary,"\n")}}function hi(e,t){if(1&e&&(c.Sb(0,"span",18),c.Nb(1,"t-auto-cell",19),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("definitionId",n.definitionId)("entity",n.c[e])}}function pi(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function Si(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function vi(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}let Ii=(()=>{class e extends xt.a{constructor(e,t,n,i,c){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=c,this.relationsApi=this.api.relationsApi(null,this.notifyDestruct$),this.expand="",this.onActivate=e=>this.relationsApi.activate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.relationsApi.deactivate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.relationsApi=this.api.relationsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`relations/${this.definitionId}`}get c(){return this.workspace.currentTenant.Relation}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Relations[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Relations")}get summary(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Relation")}get Image_isVisible(){return!!this.definition.ImageVisibility}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(i.e),c.Mb(i.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-relations-master"]],inputs:{definitionId:"definitionId"},features:[c.wb],decls:15,vars:2,consts:[["collection","Relation","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Relation","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1","d-inline-block","t-mw-0"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"border","t-dp-wrapper2"],["icon","camera",3,"src","imageId","size"],[1,"text-truncate"],["collection","Relation",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(c.Jc(0,di,1,30,"t-master",0),c.Jc(1,bi,1,1,"ng-template",null,1,c.Kc),c.Jc(3,fi,9,3,"ng-template",null,2,c.Kc),c.Jc(5,mi,1,1,"ng-template",null,3,c.Kc),c.Jc(7,hi,2,2,"ng-template",null,4,c.Kc),c.Jc(9,pi,2,3,"ng-template",null,5,c.Kc),c.Jc(11,Si,2,3,"ng-template",null,6,c.Kc),c.Jc(13,vi,2,3,"ng-template",null,7,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,Tt.a,nn,be,me.a],pipes:[K.c],encapsulation:2}),e})();var Mi=n("X5Zs"),Ri=n("zP0r"),yi=n("7MUa"),Di=n("BFQD");class wi{constructor(e,t){this.precedence=e,this.associativity=t}get isLeftAssociative(){return"left"===this.associativity}}const Ei=["!=","<>","<=",">=","<",">","=","&&","||","!","(",")",",","+","-","*","/","%","contains","startsw","endsw","descof","not","and","or","gt","ge","lt","le","eq","ne","asc","desc"],Ci={"*":new wi(2,"left"),"/":new wi(2,"left"),"%":new wi(2,"left"),"+":new wi(3,"left"),"-":new wi(3,"left"),"=":new wi(4,"left"),"!=":new wi(4,"left"),"<>":new wi(4,"left"),"<=":new wi(4,"left"),"<":new wi(4,"left"),">":new wi(4,"left"),">=":new wi(4,"left"),eq:new wi(4,"left"),ne:new wi(4,"left"),le:new wi(4,"left"),lt:new wi(4,"left"),gt:new wi(4,"left"),ge:new wi(4,"left"),contains:new wi(4,"left"),startsw:new wi(4,"left"),endsw:new wi(4,"left"),descof:new wi(4,"left"),"!":new wi(5,"left"),"&&":new wi(6,"left"),"||":new wi(7,"left"),not:new wi(5,"left"),and:new wi(6,"left"),or:new wi(7,"left")};function xi(e){return Ci[e.toLowerCase()]}function Ti(e){switch(e=(e||"").toLowerCase()){case"asc":case"desc":return e;default:return null}}class zi{static parseSingle(e,t){const n=zi.parse(e,t);if(n.length>1)throw new Error("Expression cannot contain top level commas.");if(1===n.length)return n[0]}static parse(e,t){if(!e||!e.trim())return[];const n=t||{expectDirKeywords:!1,expectPathsOnly:!1},i=zi.tokenize(e);return zi.parseTokenStream(i,e,!!n.expectDirKeywords,!!n.expectPathsOnly,n.placeholderReplacement)}static tokenize(e){const t=[],n=e.split("");let i=!1,c=[],o=0;function r(e){let t=Ei.find(t=>n.length-e>=t.length&&Array.from(Array(t.length).keys()).every(i=>t[i]===n[e+i].toLowerCase()));if(function(e){switch(e){case"eq":case"ne":case"le":case"lt":case"gt":case"ge":case"contains":case"startsw":case"endsw":case"descof":case"not":case"and":case"or":case"asc":case"desc":return!0;default:return!1}}(t)){const i=e-1,c=i<0||!Oi.properChar(n[i]),o=e+t.length,r=o>=n.length||!Oi.properChar(n[o]);c&&r||(t=null)}if(t)return t=n.slice(e,e+t.length).join(""),t}for(;o<n.length;)if("'"===n[o]){const e=o+1<n.length&&"'"===n[o+1];c.push(n[o]),o++,i?e?o++:i=!1:i=!0}else{let e;if(!i&&(e=r(o))){if(c.length>0){const e=c.join("").trim();e&&t.push(e),c=[]}t.push(e.trim()),o+=e.length}else c.push(n[o]),o++}if(i)throw new Error(`Uneven number of single quotation marks in ${e},\nquotation marks in string literals should be escaped by specifying them twice.`);if(c.length>0){const e=c.join("").trim();e&&t.push(e)}return t}static parseTokenStream(e,t,n,i,c){const o=[],r=[],s=[],l=[];function a(){const{op:e,usedAsUnaryOperator:t}=r.pop();let n;if(t){if(!function(e){switch(e.toLowerCase()){case"-":case"+":case"!":case"not":return!0;default:return!1}}(e))throw new Error(`Infix operator '${e}' is missing its first operand.`);if(l.length<1)throw new Error(`Unary operator '${e}' is missing its operand.`);{const t=l.pop();n=new _i(e,t)}}else{if(!function(e){switch(e.toLowerCase()){case"!":case"not":return!1;default:return!0}}(e))throw new Error(`Unary Operator '${e}' is used like an infix operator.`);if(l.length<2)throw new Error(`Infix operator '${e}' is missing its second operand.`);{const t=l.pop(),i=l.pop();n=new Ni(e,i,t)}}l.push(n)}function u(){if(s.length>0){const e=s[s.length-1];e.isFunction&&e.arity===e.arguments.length&&e.arity++}}function d(e){if(e.arity>0){if(e.arguments.length!==e.arity-1)throw new Error("Blank function arguments are not allowed, pass null if that was your intention.");if(0===l.length)throw new Error("[Bug] Output stack is empty.");e.arguments.push(l.pop())}}let b,g=!1,f=!1,m=!1;function h(){return null==b||","===b||"("===b||!!xi(b)}function p(){for(m=!0;r.length>0;){if("("===r[r.length-1].op)throw new Error(`Expression contains mismatched brackets: ${t}.`);a()}if(0===l.length)return;if(l.length>1)throw new Error(`Incorrectly formatted expression: ${t}.`);const e=l.pop();let n;(n=Ti(b))&&(e.direction=n),o.push(e)}for(const S of e){let e;if(f=g,g=!1,m=!1,e=xi(S)){u();const t=h();if(!t){const t=()=>{if(0===r.length)return!1;const{op:t}=r[r.length-1],n=xi(t);return"("!==t&&("("!==t&&!n||n.precedence<e.precedence||n.precedence===e.precedence&&n.isLeftAssociative)};for(;t();)a()}g=t&&Ai.isValidFunctionName(S),r.push({op:S,usedAsUnaryOperator:t})}else if("("===S)f?xi(b)||(l.pop(),r.push({op:b,usedAsUnaryOperator:!1})):u(),s.push(new Li(f)),r.push({op:S,usedAsUnaryOperator:!1});else if(")"===S){for(;r.length>0&&"("!==r[r.length-1].op;)a();if(!(r.length>0&&"("===r[r.length-1].op))throw new Error("Expression contains mismatched brackets.");{r.pop();const e=s.pop();if(e.isFunction){d(e);const{op:t}=r.pop(),n=new Ai(t,e.arguments);if(n.isAggregation&&n.arguments.some(e=>e.aggregations().length>0))throw new Error(`The expression ${n.toString()} contains an aggregation within an aggregation.`);l.push(n)}else if("("===b)throw new Error("Invalid empty brackets ().")}}else if(","===S)if(0===s.length)p();else{if(!s[s.length-1].isFunction)throw new Error("Unexpected comma ',' character. Commas are only used to separate function arguments: Func(arg1, arg2, arg3).");for(;r.length>0&&"("!==r[r.length-1].op;)a();d(s[s.length-1])}else if(Ti(S)){if(!n)throw new Error(`Unexpected keyword '${S}' in expression: ${t}`)}else{let e;u(),g=h()&&Ai.isValidFunctionName(S);const t=S.toLowerCase();switch(t){case"$":if(!c)throw new Error(`Unrecognized token: ${S}`);e=c.clone();break;case"null":e=new Fi;break;case"true":case"false":e=new Vi("true"===t);break;case"me":case"today":case"now":e=new Ai(t,[]);break;default:const n=Ji.isValidQuote(S);if(void 0!==n){e=new Ji(n);break}const o=Pi.isValidNumber(S);if(void 0!==o){const{value:t,decimals:n}=o;e=new Pi(t,n);break}const{pathArray:r,propName:s}=Oi.isValidColumnAccess(S,i);if(r){e=new Oi(r,s);break}const l=qi.isValidParameterName(S);if(l){e=new qi(l);break}throw new Error(`Unrecognized token: ${S}`)}l.push(e)}if(Ti(b)&&!m){const e=b.toLowerCase();throw new Error(`Keyword '${e}' must come after the expression and outside any brackets like this: <exp1> ${e}, <exp2> ${e}.`)}b=S}return p(),o}}class Li{constructor(e){this.isFunction=e,this.arity=0,this.arguments=[]}}class ki{get isAscending(){return"asc"===this.direction}get isDescending(){return"desc"===this.direction}unaggregatedColumnAccesses(){const e=[];return this.unaggregatedColumnAccessesInner(e,!1),e}columnAccesses(){const e=[];return this.columnAccessesInner(e),e}aggregations(){const e=[];return this.aggregationsInner(e),e}parameters(){const e=[];return this.parametersInner(e),e}get isAggregation(){if(this instanceof Ai)switch(this.nameLower){case"sum":case"count":case"avg":case"max":case"min":return!0;default:return!1}return!1}}class Oi extends ki{constructor(e,t){super(),this.path=e,this.property=t}static properFirstChar(e){return!!e&&Ui(e[0])}static properChar(e){return Ki(e)||"_"===e||"."===e}static properChars(e){return!!e&&e.split("").every(Oi.properChar)}static notReservedKeyword(e){switch(e.toLowerCase()){case"null":case"true":case"false":case"asc":case"desc":return!1;default:return!0}}static isValidColumnAccess(e,t){if(this.properFirstChar(e)&&this.properChars(e)&&this.notReservedKeyword(e)){const n=e.split(".").map(e=>e.trim()).filter(e=>!!e);if(t)return{pathArray:n};{const e=n.pop();return{pathArray:n,propName:e}}}return{}}toString(){const e=this.path.join(".")||"",t=this.property||"";return`${e}${e&&t?".":""}${t}`}children(){return[]}unaggregatedColumnAccessesInner(e,t){t||e.push(this)}columnAccessesInner(e){e.push(this)}aggregationsInner(e){}parametersInner(e){}clone(){const e=new Oi(this.path.slice(),this.property);return e.hasSecondary=this.hasSecondary,e.hasTernary=this.hasTernary,e}}class Ai extends ki{constructor(e,t){super(),this.name=e,this.arguments=t,this.nameLower=e.toLowerCase()}static properFirstChar(e){return!!e&&Ui(e[0])}static properChars(e){return!!e&&e.split("").every(e=>Ki(e)||"_"===e)}static notReservedKeyword(e){switch(e.toLowerCase()){case"null":case"true":case"false":case"asc":case"desc":return!1;default:return!0}}static isValidFunctionName(e){return this.properFirstChar(e)&&this.properChars(e)&&this.notReservedKeyword(e)}toString(){return`${this.name}(${this.arguments.map(e=>ji(e.toString())).join(", ")})`}children(){return this.arguments}unaggregatedColumnAccessesInner(e,t){this.isAggregation&&(t=!0);for(const n of this.arguments)n.unaggregatedColumnAccessesInner(e,t)}columnAccessesInner(e){for(const t of this.arguments)t.columnAccessesInner(e)}aggregationsInner(e){this.isAggregation&&e.push(this);for(const t of this.arguments)t.aggregationsInner(e)}parametersInner(e){for(const t of this.arguments)t.parametersInner(e)}clone(){return new Ai(this.name,this.arguments.map(e=>e.clone()))}setName(e){this.name=e,this.nameLower=e.toLowerCase()}}class Ni extends ki{constructor(e,t,n){super(),this.operator=e,this.left=t,this.right=n}toString(){return`(${this.left.toString()} ${this.operator} ${this.right.toString()})`}children(){return[this.left,this.right]}unaggregatedColumnAccessesInner(e,t){this.left.unaggregatedColumnAccessesInner(e,t),this.right.unaggregatedColumnAccessesInner(e,t)}columnAccessesInner(e){this.left.columnAccessesInner(e),this.right.columnAccessesInner(e)}aggregationsInner(e){this.left.aggregationsInner(e),this.right.aggregationsInner(e)}parametersInner(e){this.left.parametersInner(e),this.right.parametersInner(e)}clone(){return new Ni(this.operator,this.left.clone(),this.right.clone())}}class _i extends ki{constructor(e,t){super(),this.operator=e,this.operand=t}toString(){return`(${this.operator} ${this.operand.toString()})`}children(){return[this.operand]}unaggregatedColumnAccessesInner(e,t){this.operand.unaggregatedColumnAccessesInner(e,t)}columnAccessesInner(e){this.operand.columnAccessesInner(e)}aggregationsInner(e){this.operand.aggregationsInner(e)}parametersInner(e){this.operand.parametersInner(e)}clone(){return new _i(this.operator,this.operand.clone())}}class Ji extends ki{constructor(e){super(),this.value=e}static isValidQuote(e){if(e.length>=2&&e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1)}toString(){return`'${this.value.replace("'","''")}'`}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){}clone(){return new Ji(this.value)}}class Pi extends ki{constructor(e,t){super(),this.value=e,this.decimals=t}static isValidNumber(e){if($i(e[0])&&$i(e[e.length-1])&&e.split("").every(e=>$i(e)||"."===e)){const t=parseFloat(e),n=e.split(".");return{value:t,decimals:n.length<=1?0:n.pop().length}}}toString(){return this.value.toFixed(this.decimals)}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){}clone(){return new Pi(this.value,this.decimals)}}class Fi extends ki{toString(){return"null"}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){}clone(){return new Fi}}class Vi extends ki{constructor(e){super(),this.value=e}toString(){return(!!this.value).toString()}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){}clone(){return new Vi(this.value)}}class qi extends ki{constructor(e){super(),this.key=e,this.keyLower=e.toLowerCase()}static properFirstChar(e){return!!e&&"@"===e[0]}static properChars(e){return!!e&&e.split("").slice(1).every(e=>Ki(e)||"_"===e)}static isValidParameterName(e){if(this.properFirstChar(e)&&this.properChars(e))return e.slice(1)}toString(){return`@${this.key}`}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){e.push(this)}clone(){return new qi(this.key)}}function ji(e){if(!e||e.length<2)return e;let t=0;for(let n=0;n<e.length-1;n++)if("("===e[n]&&t++,")"===e[n]&&t--,0===t)return e;return e.endsWith(")")&&(e=ji(e.slice(1,-1))),e}function $i(e){return e>="0"&&e<="9"}function Ui(e){return e.toLowerCase()!==e.toUpperCase()}function Ki(e){return Ui(e)||$i(e)}var Bi=n("CpXl");const Hi=e=>()=>e.instant("Expression");function Qi(e){return e.hasOwnProperty("foreignKeyName")}function Wi(e){switch(e){case"boolean":return 1;case"hierarchyid":return 2;case"geography":return 4;case"datetimeoffset":return 8;case"datetime":return 16;case"date":return 32;case"numeric":return 64;case"bit":return 128;case"string":return 256;case"null":return 512;case"entity":return 1024;default:throw new Error(`Precedence: Unknown datatype ${e}`)}}function Gi(e,t,n,i){if("numeric"===e.datatype&&"numeric"===t.datatype){if("percent"===e.control&&"percent"===t.control)return{datatype:"numeric",control:"percent",minDecimalPlaces:Math.max(e.minDecimalPlaces,t.minDecimalPlaces),maxDecimalPlaces:Math.max(e.maxDecimalPlaces,t.maxDecimalPlaces),label:n,labelForParameter:i,isRightAligned:e.isRightAligned||t.isRightAligned,noSeparator:e.noSeparator&&t.noSeparator};{const c="number"===e.control?e.maxDecimalPlaces:"percent"===e.control?e.maxDecimalPlaces-2:0,o="number"===t.control?t.maxDecimalPlaces:"percent"===t.control?t.maxDecimalPlaces-2:0,r=("number"===e.control||"percent"===e.control)&&e.isRightAligned,s=("number"===t.control||"percent"===t.control)&&t.isRightAligned,l=("number"===e.control||"percent"===e.control)&&e.noSeparator,a=("number"===t.control||"percent"===t.control)&&t.noSeparator;return{datatype:"numeric",control:"number",minDecimalPlaces:Math.max("number"===e.control?e.minDecimalPlaces:"percent"===e.control?e.minDecimalPlaces-2:0,"number"===t.control?t.minDecimalPlaces:"percent"===t.control?t.minDecimalPlaces-2:0),maxDecimalPlaces:Math.max(c,o),label:n,labelForParameter:i,isRightAligned:r||s,noSeparator:l&&a}}}throw new Error(`[Bug] Merging non numeric datatypes ${e} and ${t}.`)}function Yi(e,t,n,i,c){switch(e.control){case"unsupported":return Object.assign(Object.assign({datatype:"boolean"},e),{label:t,labelForParameter:c});case"datetime":return Object.assign(Object.assign({datatype:"datetime"},e),{label:t,labelForParameter:c});case"date":return Object.assign(Object.assign({datatype:"date"},e),{label:t,labelForParameter:c});case"number":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:c});case"check":return Object.assign(Object.assign({datatype:"bit"},e),{label:t,labelForParameter:c});case"text":return Object.assign(Object.assign({datatype:"string"},e),{label:t,labelForParameter:c});case"serial":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:c});case"choice":return Object.assign(Object.assign({datatype:"string"},e),{label:t,labelForParameter:c});case"percent":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:c});case"null":return Object.assign(Object.assign({datatype:"null"},e),{label:t,labelForParameter:c});default:const o=Mi.h[e.control](n,i,e.definitionId),r=o.properties.Id.datatype;if("numeric"===r)return Object.assign(Object.assign({datatype:"numeric"},e),{foreignKeyName:null,label:t,labelForParameter:c});if("string"===r)return Object.assign(Object.assign({datatype:"string"},e),{foreignKeyName:null,label:t,labelForParameter:c});throw new Error(`[Bug] type ${o.titleSingular()} has an Id that is neither string nor numeric`)}}function Xi(e,t,n,i,c,o){switch(e.control){case"unsupported":switch(t){case"boolean":case"hierarchyid":case"geography":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o})}break;case"datetime":switch(t){case"datetimeoffset":case"datetime":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o})}break;case"date":switch(t){case"datetimeoffset":case"datetime":case"date":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o})}break;case"number":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"check":if("bit"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"text":if("string"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"serial":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"choice":if("string"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});if("numeric"===t&&e.choices.every(e=>!isNaN(+e)))return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"percent":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"null":if("null"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;default:const r=Mi.h[e.control](i,c,e.definitionId).properties.Id.datatype;if("numeric"===t&&"numeric"===r)return Object.assign(Object.assign({datatype:t},e),{foreignKeyName:null,label:n,labelForParameter:o});if("string"===t&&"string"===r)return Object.assign(Object.assign({datatype:t},e),{foreignKeyName:null,label:n,labelForParameter:o})}}function Zi(e,t,n){switch(e){case"string":return{datatype:e,control:"text",label:t,labelForParameter:n};case"numeric":return{datatype:e,control:"number",label:t,labelForParameter:n,minDecimalPlaces:0,maxDecimalPlaces:4,isRightAligned:!1,noSeparator:!1};case"bit":return{datatype:e,control:"check",label:t,labelForParameter:n};case"date":return{datatype:e,control:"date",label:t,labelForParameter:n,granularity:Di.a.days};case"datetime":case"datetimeoffset":return{datatype:e,control:"datetime",label:t,labelForParameter:n,granularity:Di.b.minutes};case"geography":case"hierarchyid":return{datatype:e,control:"unsupported",label:t,labelForParameter:n}}}function ec(e,t,n,i){if(e.datatype!==t.datatype)throw new Error(`[Bug] Merging two different datatypes ${e.datatype} and ${t.datatype}.`);switch(e.datatype){case"string":return function(e,t,n,i){if("string"===e.datatype&&"string"===t.datatype){if(Qi(e)&&Qi(t)){if(e.definitionId===t.definitionId&&e.control===t.control){let c=e.filter;return c?t.filter&&(c=`(${c}) and (${t.filter})`):c=t.filter,{datatype:"string",control:e.control,definitionId:e.definitionId,filter:c,label:n,labelForParameter:i,foreignKeyName:e.foreignKeyName}}}else if("choice"===e.control&&"choice"===t.control){const c={};for(const t of e.choices)c[t]=!0;for(const e of t.choices)c[e]=!0;const o=Object.keys(c),r=e.format,s=t.format,l=e.color,a=t.color;return{datatype:"string",control:"choice",format:e=>r(e)||s(e),color:e=>(l?l(e):null)||(a?a(e):null),choices:o,label:n,labelForParameter:i}}return{datatype:"string",control:"text",label:n,labelForParameter:i}}}(e,t,n,i);case"numeric":return function(e,t,n,i){if("numeric"===e.datatype&&"numeric"===t.datatype){if(Qi(e)&&Qi(t)){if(e.definitionId===t.definitionId&&e.control===t.control){let c;return e.filter===t.filter?c=e.filter:(c=e.filter,c?t.filter&&(c=`(${c}) and (${t.filter})`):c=t.filter),{datatype:"numeric",control:e.control,definitionId:e.definitionId,filter:c,label:n,labelForParameter:i,foreignKeyName:e.foreignKeyName}}}else{if("choice"===e.control&&"choice"===t.control){if(e.choices.length===t.choices.length){let n=!0;for(let i=0;i<e.choices.length;i++)if(e.choices[i]!==t.choices[i]){n=!1;break}if(n)return Object.assign({},e)}const c={};for(const t of e.choices)c[t]=!0;for(const e of t.choices)c[e]=!0;const o=Object.keys(c).map(e=>+e),r=e.format,s=t.format,l=e.color,a=t.color;return{datatype:"numeric",control:"choice",format:e=>r(e)||s(e),color:e=>(l?l(e):null)||(a?a(e):null),choices:o,label:n,labelForParameter:i}}if("serial"===e.control&&"serial"===t.control&&e.prefix===t.prefix&&e.codeWidth===t.codeWidth)return{datatype:"numeric",control:"serial",prefix:e.prefix,codeWidth:e.codeWidth,label:n,labelForParameter:i}}return Gi(e,t,n,i)}throw new Error(`[Bug] Merging non numeric datatypes ${e} and ${t}.`)}(e,t,n,i);case"date":if("date"===t.datatype){const c=e.calendar===t.calendar?e.calendar:void 0;return{datatype:"date",control:"date",calendar:c,granularity:c?Math.max(e.granularity,t.granularity):Di.a.days,label:n,labelForParameter:i}}break;case"datetime":if("datetime"===t.datatype){const c=e.calendar===t.calendar?e.calendar:void 0,o=c?Math.max(e.granularity,t.granularity):Di.b.minutes;return{datatype:"datetime",control:"date"===e.control&&"date"===t.control?"date":"datetime",calendar:c,granularity:o,label:n,labelForParameter:i}}break;case"datetimeoffset":if("datetimeoffset"===t.datatype){const c=e.calendar===t.calendar?e.calendar:void 0,o=c?Math.max(e.granularity,t.granularity):Di.b.minutes;return{datatype:"datetimeoffset",control:"date"===e.control&&"date"===t.control?"date":"datetime",calendar:c,granularity:o,label:n,labelForParameter:i}}break;case"bit":return{datatype:"bit",control:"check",label:n,labelForParameter:i};case"geography":case"hierarchyid":case"boolean":return{datatype:e.datatype,control:"unsupported",label:n,labelForParameter:i};case"null":return{datatype:"null",control:"null",label:n,labelForParameter:i}}throw new Error(`[Bug] Merging unhandled datatype ${e.datatype}.`)}function tc(e,t,n){if(e.datatype===t)return e;if("null"===e.datatype){let i;return"boolean"!==t&&(i=n?Object.assign({},n):Zi(t,e.label,e.labelForParameter)),i}if("bit"===e.datatype){if("numeric"===t)return{datatype:t,control:"number",minDecimalPlaces:0,maxDecimalPlaces:0,label:e.label,labelForParameter:e.labelForParameter,isRightAligned:!0,noSeparator:!1};if("boolean"===t)return{datatype:t,control:"unsupported",label:e.label,labelForParameter:e.labelForParameter}}}function nc(e,t){let n;if(t<e.arguments.length){const i=e.arguments[t];if(!(i instanceof Ji))throw new Error(`Function '${e.name}': The ${1===t?"second ":2===t?"third ":""}argument must be a simple quote like this: 'UQ'.`);if(n=i.value.toUpperCase(),Di.c.indexOf(n)<0)throw new Error(`Function '${e.name}': The ${1===t?"second ":2===t?"third ":""}argument ${i} must be one of the supported calendars: '${Di.c.join("', '")}'.`)}return n}class ic{static datePartDesc(e,t,n){return{datatype:"numeric",control:"number",label:e,labelForParameter:n,minDecimalPlaces:0,maxDecimalPlaces:0,isRightAligned:!1,noSeparator:!0}}static quarterDesc(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[1,2,3,4],format:e=>e?t.instant(`ShortQuarter${e}`):""}}static monthDesc(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[1,2,3,4,5,6,7,8,9,10,11,12],format:e=>e?t.instant(`ShortMonth${e}`):""}}static weekdayDesc(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[2,3,4,5,6,7,1],format:e=>e?t.instant("ShortDay"+(1===e?7:e-1)):""}}static needsQuotes(e){switch(e){case"string":case"date":case"datetime":case"datetimeoffset":return!0;default:return!1}}static stringify(e,t,n,i=1,c){return e?function e(o){if(o instanceof qi){const{desc:e,datatype:i,isRequired:c,defaultExp:r}=n[o.keyLower],s=t[o.keyLower];if(!e)throw new Error(`[Bug] The descriptor for parameter @${o.key} was not supplied.`);if(Object(V.n)(s))return ic.needsQuotes(i)?`'${(s+"").replace(/\'/g,"''")}'`:s+"";if(r)return r.toString();if(c)throw new Error(`Required parameter @${o.key} was not supplied.`);return null}if(o instanceof Oi){let e=o.toString();return 2===i&&o.hasSecondary?e+="2":3===i&&o.hasTernary&&(e+="3"),c?`${c}.${e}`:e}if(o instanceof Ai){const t=o.arguments.map(t=>ji(e(t)));return t.some(e=>null===e)?null:`${o.nameLower}(${t.join(", ")})`}if(!(o instanceof Ni)){if(o instanceof _i){const t=e(o.operand);return null===t?null:`(${o.operator.toLowerCase()} ${t})`}return o.toString()}{const t=e(o.left),n=e(o.right);switch(o.operator.toLowerCase()){case"and":case"or":case"&&":case"||":return null===t?n:null===n?t:`(${t} ${o.operator.toLowerCase()} ${n})`;default:return null===t||null===n?null:`(${t} ${o.operator.toLowerCase()} ${n})`}}}(e):null}static canShowAsTree(e,t,n){return!!e&&"entity"===e.datatype&&!!Mi.h[e.control](t,n,e.definitionId).properties.Parent}static getReportInfos(e,t,n){const i=e.Collection,c=e.DefinitionId;if(!i)throw new Error("The collection was not specified");const o=t.currentTenant,r={},s={},l={},a={};for(const C of e.Parameters||[]){const e=C.Key.toLowerCase();C.Control&&(l[e]=Object(V.h)(t.currentTenant,C.Control,C.ControlOptions));const n=zi.parseSingle(C.DefaultExpression);if(n){const e=n.aggregations(),t=n.columnAccesses(),i=n.parameters();if(e.length>0)throw new Error(`Parameter default Expression cannot contain aggregation functions like '${e[0].name}'.`);if(t.length>0)throw new Error(`Parameter default Expression cannot contain column access literals like '${t[0]}'.`);if(i.length>0)throw new Error(`Parameter default Expression cannot contain parameters like '${i[0]}'.`)}a[e]=n}const u=zi.parseSingle(e.Filter);if(u){const e=u.aggregations();if(e.length>0)throw new Error(`Filter: Expression cannot contain aggregation functions like '${e[0].name}'.`)}let d;if("Summary"===e.Type&&(d=zi.parseSingle(e.Having),d)){const e=d.unaggregatedColumnAccesses();if(e.length>0)throw new Error(`Having: Expression cannot contain unaggregated column accesses like '${e[0]}'.`)}if("Details"===e.Type||e.IsCustomDrilldown){const o=zi.parse(e.OrderBy,{expectDirKeywords:!0});for(const e of o){const o=e.aggregations(),s=e.parameters(),a=e.columnAccesses();if(o.length>0)throw new Error(`Order By: Expression cannot contain aggregation functions like '${o[0].name}'.`);if(s.length>0)throw new Error(`Order By: Expression cannot contain parameters like '${s[0]}'.`);if(0===a.length)throw new Error(`Order By: Expression atom cannot be a constant like '${e}'.`);{const o=ic.nativeDesc(e,l,r,i,c,t,n);switch(o.datatype){case"boolean":case"entity":throw new Error(`Order By: Expression cannot be of type ${o.datatype}.`)}}}}const b=(e,s)=>{const a=zi.parseSingle(e.KeyExpression);let u,d,b,g,f,m;if(!a)throw new Error("Dimension key Expression cannot be empty.");{const e=a.aggregations(),o=a.parameters(),s=a.columnAccesses();if(e.length>0)throw new Error(`Dimension key Expression cannot contain aggregation functions like '${e[0].name}'.`);if(o.length>0)throw new Error(`Dimension key Expression cannot contain parameters like '${o[0]}'.`);if(0===s.length)throw new Error("Dimension key Expression must contain at least one column access.");switch(u=ic.nativeDesc(a,l,r,i,c,t,n),u.datatype){case"boolean":case"hierarchyid":case"geography":throw new Error(`Dimension key Expression cannot be of type ${u.datatype}.`);case"entity":d=Mi.h[u.control](t,n,u.definitionId)}}const h=[];if("entity"===u.datatype){if(f=zi.parseSingle(e.DisplayExpression),f){const e=f.aggregations(),i=f.parameters();if(e.length>0)throw new Error(`Dimension display Expression cannot contain aggregation functions like '${e[0].name}'.`);if(i.length>0)throw new Error(`Dimension display Expression cannot contain parameters like '${i[0]}'.`);switch(m=ic.nativeDesc(f,l,r,u.control,u.definitionId,t,n),m.datatype){case"boolean":case"entity":case"hierarchyid":case"geography":throw new Error(`Dimension display Expression ${f} cannot be of type ${m.datatype}.`)}}for(const i of e.Attributes||[]){const e=i.Localize,c=zi.parseSingle(i.Expression);if(!c)throw new Error("Dimension attribute Expression cannot be empty.");{const s=c.aggregations(),a=c.parameters();if(s.length>0)throw new Error(`Dimension attribute expression cannot contain aggregation functions like '${s[0].name}'.`);if(a.length>0)throw new Error(`Dimension attribute expression cannot contain parameters like '${a[0]}'.`);{const s=c.toString(),a=ic.nativeDesc(c,l,r,u.control,u.definitionId,t,n);let d;switch(a.datatype){case"boolean":case"hierarchyid":case"geography":throw new Error(`Dimension attribute Expression ${c} cannot be of type ${a.datatype}.`);case"entity":d=Mi.h[a.control](t,n,a.definitionId)}const g=!!i.OrderDirection;g&&(b=i.OrderDirection),h.push({exp:c,expToString:s,localize:e,desc:a,entityDesc:d,label:i.Label?()=>o.localize(i.Label,i.Label2,i.Label3):a.label,isOrdered:g})}}}}else if(g=e.Control?Object(V.h)(t.currentTenant,e.Control,e.ControlOptions):null,g&&!Xi(g,u.datatype,()=>"",t,n))throw new Error(`Dimension key expression ${a} (${u.datatype}) is incompatible with the selected control.`);{const i=e.Localize,c=e.Label?()=>o.localize(e.Label,e.Label2,e.Label3):u.label,r=!!e.OrderDirection;r&&(b=e.OrderDirection);const l=e.AutoExpandLevel,p=e.ShowAsTree&&ic.canShowAsTree(u,t,n);s.push({keyExp:a,dispExp:f,localize:i,keyDesc:u,desc:g||m||u,entityDesc:d,label:c,orderDir:b,isOrdered:r,attributes:h,autoExpandLevel:l,showAsTree:p})}},g=[],f=[];if("Summary"===e.Type){for(const t of e.Rows)b(t,g);for(const t of e.Columns)b(t,f)}const m=[];if("Summary"===e.Type)for(const C of e.Measures){const e=zi.parseSingle(C.Expression);if(!e)throw new Error("Measure expression cannot be empty.");{const t=e.unaggregatedColumnAccesses();if(t.length>0)throw new Error(`Measure expression cannot contain unaggregated column accesses like '${t[0]}'.`)}function h(o,s){const a=zi.parseSingle(o,{placeholderReplacement:e});if(a){const e=a.unaggregatedColumnAccesses();if(e.length>0)throw new Error(`Measure ${s} expression cannot contain unaggregated column accesses like '${e[0]}'.`);if(ic.tryBooleanDesc(a,l,r,i,c,t,n))return a;throw new Error(`Measure ${s} expression ${a} could not be interpreted as a boolean.`)}}const o=C.Control?Object(V.h)(t.currentTenant,C.Control,C.ControlOptions):null;m.push({measure:C,mainExp:e,visualDesc:o,orderDir:C.OrderDirection,success:h(C.SuccessWhen,"Success When"),warning:h(C.WarningWhen,"Warning When"),danger:h(C.DangerWhen,"Danger When")})}const p=[];if("Details"===e.Type||e.IsCustomDrilldown)for(const C of e.Select){const n=C.Localize,i=zi.parseSingle(C.Expression);if(!i)throw new Error("Select expression cannot be empty.");{const c=i.aggregations(),o=i.parameters();if(c.length>0)throw new Error(`Select expression cannot contain aggregation functions like '${c[0].name}'.`);if("Summary"===e.Type&&e.IsCustomDrilldown&&o.length>0)throw new Error(`Expression cannot contain parameters like '${o[0]}'.`);{const e=C.Control?Object(V.h)(t.currentTenant,C.Control,C.ControlOptions):null;p.push({exp:i,visualDesc:e,localize:n,select:C})}}}let S=[],v=[];for(;;){if(S=[],v=[],u&&!ic.tryBooleanDesc(u,l,r,i,c,t,n))throw new Error("Filter expression could not be interpreted as a boolean.");if(d&&!ic.tryBooleanDesc(d,l,r,i,c,t,n))throw new Error("Having expression could not be interpreted as a boolean.");for(const{measure:e,mainExp:s,visualDesc:a,orderDir:u,success:d,warning:b,danger:f}of m){const m=ic.nativeDesc(s,l,r,i,c,t,n);switch(m.datatype){case"boolean":case"entity":case"hierarchyid":case"geography":throw new Error(`Measure expression ${s} cannot be of type ${m.datatype}.`)}function h(e,o){if(e&&!ic.tryBooleanDesc(e,l,r,i,c,t,n))throw new Error(`Measure ${o} expression ${e} could not be interpreted as a boolean.`)}if(h(d,"Success When"),h(b,"Warning When"),h(f,"Danger When"),a&&!Xi(a,m.datatype,()=>"",t,n))throw new Error(`Measure expression ${s} (${m.datatype}) is incompatible with the selected control.`);{const t=!!u;t&&g.forEach(e=>e.orderDir=u),S.push({exp:s,desc:a||m,label:e.Label?()=>o.localize(e.Label,e.Label2,e.Label3):m.label,isNumeric:Object(Mi.f)(m),isOrdered:t,success:d,warning:b,danger:f})}}for(const{exp:e,visualDesc:s,localize:a,select:u}of p){const d=e.toString(),b=ic.nativeDesc(e,l,r,i,c,t,n);let g;switch(b.datatype){case"boolean":case"hierarchyid":case"geography":throw new Error(`Select expression ${e} cannot be of type ${b.datatype}.`);case"entity":g=Mi.h[b.control](t,n,b.definitionId)}if(s&&!Xi(s,b.datatype,()=>"",t,n))throw new Error(`Select expression ${e} (${b.datatype}) is incompatible with the selected control.`);v.push({exp:e,expToString:d,localize:a,desc:s||b,entityDesc:g,label:u.Label?()=>o.localize(u.Label,u.Label2,u.Label3):b.label})}{let e=!1;for(const t of Object.keys(r)){const n=r[t],i=s[t];if(!i||i.datatype!==n.datatype){e=!0;break}}if(!e)break;for(const t of Object.keys(r))s[t]=r[t]}}const I=[],M=[];u&&u.parametersInner(I),d&&d.parametersInner(I);for(const{exp:C,success:x,warning:T,danger:z}of S)C.parametersInner(I),C.parametersInner(M),x&&(x.parametersInner(I),x.parametersInner(M)),T&&(T.parametersInner(I),T.parametersInner(M)),z&&(z.parametersInner(I),z.parametersInner(M));for(const{exp:C}of v)C.parametersInner(I),C.parametersInner(M);const R={},y=[];for(const C of I)R[C.keyLower]||(R[C.keyLower]=C.key,y.push(C.keyLower));const D={};for(const C of M)D[C.keyLower]=!0;const w={};for(const C of y){const e=r[C];w[C]={key:R[C],keyLower:C,desc:e,datatype:e.datatype,label:e.label,isRequired:!!D[C]}}const E=[];for(const C of e.Parameters||[]){const e=C.Key.toLowerCase();if("None"===C.Visibility)delete w[e];else{const r=w[e];if(r){const s="Required"===C.Visibility,l=r.isRequired;let u;if(!s)if(u=a[e],u){if(!ic.tryDesc(u,void 0,void 0,r.datatype,i,c,t,n))throw new Error(`Parameter @${C.Key}: Default Expression ${u} could not be interpreted as a ${r.datatype}`);r.defaultExp=u}else if(l)throw new Error(`Parameter @${C.Key} is used in a measure or a select expression making it required. Either specify its Default Expression or set its Visibility to Required.`);r.isRequired=s,C.Label&&(r.label=()=>o.localize(C.Label,C.Label2,C.Label3)),E.push(r),delete w[e]}}}for(const C of Object.keys(w))E.push(w[C]);return{rows:g,columns:f,measures:S,select:v,filter:u,having:d,parameters:E}}static nativeDesc(e,t,n,i,c,o,r){return ic.tryDesc(e,t,n,null,i,c,o,r)}static tryBooleanDesc(e,t,n,i,c,o,r){return ic.tryDesc(e,t,n,"boolean",i,c,o,r)}static tryDesc(e,t,n,i,c,o,r,s){function l(e,i){let c,o;if(function(e){return!!e&&!!e.datatype}(i)?(c=i,o=i.datatype):(c=null,o=i),e instanceof Ai){const t=e.nameLower;switch(t){case"min":case"max":{const n=l(u(e),i);if(n){const e=Object.assign({},n),i=e.label;return e.label=()=>s.instant("DefaultAggregationMeasure",{0:s.instant("Aggregation_"+t),1:i()}),e}return}case"adddays":case"addmonths":case"addyears":if("date"===o||"datetime"===o||"datetimeoffset"===o){const t=l(g(e),i);return t?Object.assign(Object.assign({},t),{label:Hi(s)}):void 0}return;case"if":{const{arg2:t,arg3:n}=d(e),c=l(t,i),o=l(n,i);return c&&o?ec(c,o,Hi(s)):void 0}case"isnull":{const{arg1:t,arg2:n}=b(e),c=l(t,i),o=l(n,i);return c&&o?ec(c,o,Hi(s)):void 0}case"today":if(e.arguments.length>0)throw new Error(`Function '${e.name}' does not accept any arguments.`);switch(o){case"date":case"datetime":return{datatype:o,control:"date",label:()=>s.instant("Today"),granularity:Di.a.days};default:return}}}else if(e instanceof Ni);else if(e instanceof Ji)switch(o){case"date":case"datetime":case"datetimeoffset":if(isNaN(Date.parse(e.value)))return;if(c)return c;{const e=Hi(s);return"date"===o?{datatype:o,control:"date",label:e,granularity:Di.a.days}:{datatype:o,control:"datetime",label:e,granularity:Di.b.minutes}}}else if(e instanceof qi){const i=t[e.keyLower],l=c&&c.labelForParameter?c.labelForParameter:()=>e.key;let a,u;if(i?(a=Xi(i,o,l,r,s),a?u=a:(a=Yi(i,l,r,s),u=tc(a,o,c))):c?(a=Object.assign(Object.assign({},c),{label:l}),u=a):"boolean"===o?(a={datatype:"bit",control:"check",label:l},u={datatype:o,control:"unsupported",label:l}):(a=Zi(o,l),u=a),u){const t=n[e.keyLower];return t?Wi(t.datatype)>Wi(a.datatype)?(n[e.keyLower]=a,u):t.datatype===a.datatype?(n[e.keyLower]=ec(t,a,a.label),u):void 0:(n[e.keyLower]=a,u)}return}return tc(a(e,c?c.labelForParameter:void 0),o,c)}function a(e,i){if(e instanceof Oi){const t=Object(Mi.b)(e.path,c,o,r,s);{const n=Object(Mi.d)(t,e.property);if(n){const i=t.properties[e.property],c=i?i.datatype:"numeric";return Object.assign(Object.assign({},n),{datatype:c,label:i?i.label:()=>`${n.label()} (${s.instant("Id")})`,labelForParameter:n.label})}}const n=t.properties[e.property];if(!n)throw new Error(`Property '${e.property}' does not exist on type ${t.titleSingular()}.`);if("Id"===e.property&&("numeric"===n.datatype||"string"===n.datatype)){if(0===e.path.length)return{datatype:n.datatype,control:c,definitionId:o,foreignKeyName:null,label:n.label,labelForParameter:Mi.h[c](r,s,o).titleSingular};{const t=Object(Mi.b)(e.path.slice(0,-1),c,o,r,s).properties[e.path[e.path.length-1]];return Object.assign(Object.assign({},t),{datatype:n.datatype,label:n.label,labelForParameter:t.label})}}if("text"===n.control){const n=r.currentTenant.settings;if(n.SecondaryLanguageId){const n=t.properties[e.property+"2"];n&&"text"===n.control&&(e.hasSecondary=!0)}if(n.TernaryLanguageId){const n=t.properties[e.property+"3"];n&&"text"===n.control&&(e.hasTernary=!0)}}return n.labelForParameter=n.label,n}if(e instanceof Ai){const t=e.nameLower;switch(t){case"count":case"sum":case"avg":case"min":case"max":{const n=u(e);let i;if("count"===t||"min"===t||"max"===t){if(i=a(n),"boolean"===i.datatype||"entity"===i.datatype)throw new Error(`Function '${e.name}': The first argument ${n} cannot have type ${i.datatype}.`);i="count"===t?{datatype:"numeric",control:"number",maxDecimalPlaces:0,minDecimalPlaces:0,isRightAligned:!0,label:i.label,labelForParameter:i.labelForParameter,noSeparator:!1}:Object.assign({},i)}else{if(i=l(n,"numeric"),!i)throw new Error(`Function '${e.name}': The first argument ${n} could not be interpreted as a numeric.`);i=Gi(i,i,i.label,i.labelForParameter)}const c=i.label,o=i.labelForParameter;let r;return o&&(r=()=>s.instant("DefaultAggregationMeasure",{0:s.instant("Aggregation_"+t),1:o()})),i.label=()=>s.instant("DefaultAggregationMeasure",{0:s.instant("Aggregation_"+t),1:c()}),i.labelForParameter=r,i}case"year":case"quarter":case"month":case"day":{if(e.arguments.length<1||e.arguments.length>2)throw new Error(`No overload for function '${e.name}' accepts ${e.arguments.length} arguments.`);const n=t,i=e.arguments[0],c=l(i,"date")||l(i,"datetime")||l(i,"datetimeoffset");if(!c)throw new Error(`Function '${e.name}': The first argument ${i} could not be interpreted as a date, datetime or datetimeoffset.`);{const t=nc(e,1)||"GC",i=()=>`${c.label()} (${s.instant("DatePart_"+n)})`,o=c.labelForParameter?()=>`${c.labelForParameter()} (${s.instant("DatePart_"+n)})`:void 0;switch(n){case"year":case"day":return ic.datePartDesc(i,s,o);case"quarter":return ic.quarterDesc(i,s,o);case"month":if("GC"===t)return ic.monthDesc(i,s,o);if("UQ"===t)return{datatype:"numeric",control:"choice",label:i,choices:[1,2,3,4,5,6,7,8,9,10,11,12],format:e=>e?s.instant(`FullMonthUq${e}`):"",labelForParameter:o};if("ET"===t)return{datatype:"numeric",control:"choice",label:i,choices:[1,2,3,4,5,6,7,8,9,10,11,12,13],format:e=>e?s.instant(`FullMonthEt${e}`):"",labelForParameter:o};{const e=`Unknown calendar ${t}`;throw console.error(e),new Error(e)}default:throw new Error("Never")}}}case"weekday":case"hour":case"minute":case"second":{const n=1;if(e.arguments.length!==n)throw new Error(`Function '${e.name}' accepts exactly ${n} argument(s).`);const i=t,c="weekday"===i,o=e.arguments[0],r=(c?l(o,"date"):null)||l(o,"datetime")||l(o,"datetimeoffset");if(!r)throw new Error(`Function '${e.name}': The first argument ${o} could not be interpreted as a ${c?"date, ":""}datetime or datetimeoffset.`);{const e=()=>`${r.label()} (${s.instant("DatePart_"+i)})`,t=r.labelForParameter?()=>`${r.labelForParameter()} (${s.instant("DatePart_"+i)})`:void 0;switch(i){case"weekday":return ic.weekdayDesc(e,s,t);case"hour":case"minute":case"second":return ic.datePartDesc(e,s,t);default:throw new Error("Never")}}}case"addyears":case"addmonths":case"adddays":{const n=g(e),i=l(n,"date")||l(n,"datetime")||l(n,"datetimeoffset");if(!i)throw new Error(`Function '${e.name}': The second argument ${n} could not be interpreted as a date, datetime or datetimeoffset.`);let c,o;return"date"!==i.control&&"datetime"!==i.control||(o=i.granularity,"adddays"===t?(o=Math.max(o,Di.a.days),c=i.calendar):"addmonths"===t?(o=Math.max(o,Di.a.months),c="GC"):c="GC"),Object.assign(Object.assign({},i),{granularity:o,calendar:c,label:Hi(s)})}case"startofyear":case"startofmonth":case"date":{if(e.arguments.length<1||e.arguments.length>2)throw new Error(`No overload for function '${e.name}' accepts ${e.arguments.length} arguments.`);const n=e.arguments[0],i=l(n,"date")||l(n,"datetime")||l(n,"datetimeoffset");if(i){const n=nc(e,1)||("date"===t?i.calendar:"GC"),c="startofyear"===t?Di.a.years:"startofmonth"===t?Di.a.months:Di.a.days;return{datatype:"date",control:"date",label:Hi(s),granularity:c,calendar:n}}throw new Error(`Function '${e.name}': The argument ${n} could not be interpreted as a date, datetime or datetimeoffset.`)}case"diffdays":case"diffhours":case"diffminutes":case"diffseconds":{const n=2;if(e.arguments.length!==n)throw new Error(`Function '${e.name}' accepts exactly ${n} argument(s).`);const i=e.arguments[0];if(!(l(i,"date")||l(i,"datetime")||l(i,"datetimeoffset")))throw new Error(`Function '${e.name}': The argument ${i} could not be interpreted as a date, datetime or datetimeoffset.`);const c=e.arguments[1];if(!(l(c,"date")||l(c,"datetime")||l(c,"datetimeoffset")))throw new Error(`Function '${e.name}': The argument ${c} could not be interpreted as a date, datetime or datetimeoffset.`);const o="diffseconds"===t?0:1;return{datatype:"numeric",control:"number",maxDecimalPlaces:o,minDecimalPlaces:o,noSeparator:!1,isRightAligned:!0,label:Hi(s)}}case"not":{const t=1;if(e.arguments.length!==t)throw new Error(`Function '${e.name}' accepts exactly ${t} argument(s).`);const n=e.arguments[0],i=l(n,"boolean");if(i)return Object.assign({},i);throw new Error(`Function '${e.name}': The argument ${n} could not be interpreted as a boolean.`)}case"abs":{const t=1;if(e.arguments.length!==t)throw new Error(`Function '${e.name}' accepts exactly ${t} argument(s).`);const n=e.arguments[0],i=l(n,"numeric");if(i)return Object.assign({},i);throw new Error(`Function '${e.name}': The argument ${n} could not be interpreted as a numeric.`)}case"if":{const{arg2:t,arg3:n}=d(e);let i=a(t);const c=i.datatype;if("boolean"===c||"entity"===c)throw new Error(`Function '${e.name}': The second argument ${t} cannot have a type ${c}.`);let o=a(n);const r=o.datatype;if("boolean"===r||"entity"===r)throw new Error(`Function '${e.name}': The third argument ${n} cannot have a type ${r}.`);if(Wi(c)>Wi(r)?i=l(t,o):Wi(r)>Wi(c)&&(o=l(n,i)),!i||!o)throw new Error(`Function '${e.name}' cannot be used on expressions ${t} (${c}) and ${n} (${r}) because they have incompatible data types.`);return ec(i,o,Hi(s))}case"isnull":{const{arg1:t,arg2:n}=b(e);let i=a(t);const c=i.datatype;if("boolean"===c||"entity"===c)throw new Error(`Function '${e.name}': The first argument ${t} cannot have type ${c}.`);let o=a(n);const r=o.datatype;if("boolean"===r||"entity"===r)throw new Error(`Function '${e.name}': The second argument ${n} cannot have type ${r}.`);if(Wi(c)>Wi(r)?i=l(t,o):Wi(r)>Wi(c)&&(o=l(n,i)),!i||!o)throw new Error(`Function '${e.name}' cannot be used on expressions ${t} (${c}) and ${n} (${r}) because they have incompatible data types.`);return ec(i,o,Hi(s))}case"today":if(e.arguments.length>0)throw new Error(`Function '${e.name}' does not accept any arguments.`);return{datatype:"date",control:"date",label:()=>s.instant("Today"),granularity:Di.a.days};case"now":if(e.arguments.length>0)throw new Error(`Function '${e.name}' does not accept any arguments.`);return{datatype:"datetimeoffset",control:"datetime",label:()=>s.instant("Now"),granularity:Di.b.minutes};case"me":if(e.arguments.length>0)throw new Error(`Function '${e.name}' does not accept any arguments.`);return{datatype:"numeric",control:"number",minDecimalPlaces:0,maxDecimalPlaces:0,label:()=>s.instant("CurrentUser"),isRightAligned:!1,noSeparator:!0};default:throw new Error(`Unknown function '${e.name}'.`)}}else if(e instanceof Ni)switch(e.operator.toLowerCase()){case"+":{let t=l(e.left,"numeric"),n=l(e.right,t||"numeric");const i=Hi(s);if(!t||!n){if(t=l(e.left,"string"),n=l(e.right,"string"),!t||!n){const t=a(e.left).datatype,n=a(e.right).datatype;throw new Error(`Operator '${e.operator}' cannot be used on expressions ${e.left} (${t}) and ${e.right} (${n}) because they have incompatible data types.`)}return{datatype:"string",control:"text",label:i}}return Gi(t,n,i)}case"-":case"*":case"/":case"%":{const t=l(e.left,"numeric");if(!t)throw new Error(`Operator '${e.operator}': Left operand ${e.left} could not be interpreted as a numeric.`);const n=l(e.right,"numeric");if(!n)throw new Error(`Operator '${e.operator}': Right operand ${e.right} could not be interpreted as a numeric.`);return Gi(t,n,Hi(s))}case"&&":case"and":case"||":case"or":if(!l(e.left,"boolean"))throw new Error(`Operator '${e.operator}': Left operand ${e.left} could not be interpreted as a boolean.`);if(!l(e.right,"boolean"))throw new Error(`Operator '${e.operator}': Right operand ${e.right} could not be interpreted as a boolean.`);return{datatype:"boolean",control:"unsupported",label:Hi(s)};case"<>":case"!=":case"ne":case">":case"gt":case">=":case"ge":case"<":case"lt":case"<=":case"le":case"=":case"eq":{const t=e.left;let n=a(t);const i=n.datatype;if("boolean"===i||"entity"===i)throw new Error(`Operator '${e.operator}': The left operand ${t} cannot have type ${i}.`);const c=e.right;let o=a(c,n.labelForParameter);const r=o.datatype;if("boolean"===r||"entity"===r)throw new Error(`Operator '${e.operator}': The right operand ${c} cannot have type ${r}.`);if(Wi(i)>Wi(r)?n=l(t,o):Wi(r)>Wi(i)&&(o=l(c,n)),!n||!o)throw new Error(`Operator '${e.operator}' cannot be used on expressions ${t} (${i}) and ${c} (${r}) because they have incompatible data types.`);return{datatype:"boolean",control:"unsupported",label:Hi(s)}}case"descof":{if(!(e.left instanceof Oi))throw new Error(`Operator '${e.operator}': The left operand ${e.left} must be a column access like AccountType.Concept.`);const t=e.right.columnAccesses()[0];if(t===e.right)throw new Error(`Operator '${e.operator}': The right operand cannot be a column access expression like ${t}.`);if(t)throw new Error(`Operator '${e.operator}': The right operand cannot contain a column access expression like ${t}.`);const n=e.left;let i=a(n);const c=i.datatype;if("boolean"===c||"entity"===c)throw new Error(`Operator '${e.operator}': The left operand ${n} cannot have type ${c}.`);const o=e.right;let r=a(o,i.labelForParameter);const u=r.datatype;if("boolean"===u||"entity"===u)throw new Error(`Operator '${e.operator}': The right operand ${o} cannot have type ${u}.`);if(Wi(c)>Wi(u)?i=l(n,r):Wi(u)>Wi(c)&&(r=l(o,i)),!i||!r)throw new Error(`Operator '${e.operator}' cannot be used on expressions ${n} (${c}) and ${o} (${u}) because they have incompatible data types.`);return{datatype:"boolean",control:"unsupported",label:Hi(s)}}case"contains":case"startsw":case"endsw":{const t=l(e.left,"string");if(!t)throw new Error(`Operator '${e.operator}': Left operand ${e.left} could not be interpreted as string.`);if(!l(e.right,t))throw new Error(`Operator '${e.operator}': Right operand ${e.right} could not be interpreted as string.`);return{datatype:"boolean",control:"unsupported",label:Hi(s)}}}else{if(!(e instanceof _i)){if(e instanceof Ji)return{datatype:"string",control:"text",label:()=>e.toString()};if(e instanceof Pi)return{datatype:"numeric",control:"number",minDecimalPlaces:e.decimals,maxDecimalPlaces:e.decimals,label:()=>e.toString(),isRightAligned:!0,noSeparator:!1};if(e instanceof Fi)return{datatype:"null",control:"null",label:()=>""};if(e instanceof Vi)return{datatype:"bit",control:"check",label:()=>s.instant(e.value?"Yes":"No")};if(e instanceof qi){const c=t[e.keyLower];if(c){const t=Yi(c,i||(()=>e.key),r,s);return n[e.keyLower]=t,t}{const t=n[e.keyLower];if(t)return Object.assign({},t);{const t={datatype:"null",control:"null",label:i||(()=>e.key)};return n[e.keyLower]=t,t}}}throw Error(`[Bug] ${e} has an unknown Queryex type.`)}{const t=e.operator.toLowerCase();switch(t){case"+":case"-":{const n=l(e.operand,"numeric");if(!n)throw new Error(`Operator '${e.operator}': Operand ${e.operand} could not be interpreted as numeric.`);return"+"===t?Object.assign({},n):"number"===n.control||"percent"===n.control?{datatype:"numeric",control:n.control,maxDecimalPlaces:n.maxDecimalPlaces,minDecimalPlaces:n.minDecimalPlaces,label:Hi(s),isRightAligned:n.isRightAligned,noSeparator:n.noSeparator}:{datatype:"numeric",control:"number",maxDecimalPlaces:0,minDecimalPlaces:0,label:Hi(s),isRightAligned:!1,noSeparator:!1}}case"!":case"not":if(!l(e.operand,"boolean"))throw new Error(`Operator '${e.operator}': Operand ${e.operand} could not be interpreted as boolean.`);return{datatype:"boolean",control:"unsupported",label:Hi(s)}}}}}function u(e){if(e.arguments.length<1||e.arguments.length>2)throw new Error(`No overload for function '${e.name}' accepts ${e.arguments.length} arguments.`);const t=e.arguments[0];if(e.arguments.length>=2){const t=e.arguments[1];if(!l(t,"boolean"))throw new Error(`Function '${e.name}': The second argument ${t} could not be interpreted as a boolean.`)}return t}function d(e){if(3!==e.arguments.length)throw new Error(`Function '${e.name}' accepts exactly 3 argument(s).`);const t=e.arguments[0];if(!l(t,"boolean"))throw new Error(`Function '${e.name}': The first argument ${t} could not be interpreted as a boolean.`);return{arg2:e.arguments[1],arg3:e.arguments[2]}}function b(e){if(2!==e.arguments.length)throw new Error(`Function '${e.name}' accepts exactly 2 argument(s).`);return{arg1:e.arguments[0],arg2:e.arguments[1]}}function g(e){if(2!==e.arguments.length)throw new Error(`Function '${e.name}' accepts exactly 2 argument(s).`);const t=e.arguments[0];if(!l(t,"numeric"))throw new Error(`Function '${e.name}': The first argument ${t} could not be interpreted as a numeric.`);return e.arguments[1]}return i?l(e,i):a(e)}static evaluateExp(e,t,n,i){function c(e){return void 0===e?null:e}return function e(o){if(o instanceof Oi)throw new Error("Client side evaluation of QueryexColumnAccess not possible.");if(o instanceof Ai){const n=o.name.toLowerCase();switch(n){case"count":case"sum":case"min":case"max":return c(t[o.index]);case"avg":{const e=c(t[o.sumIndex]),n=c(t[o.countIndex]);return null===e||null===n?null:e/n}case"year":case"quarter":case"month":case"day":{const t=e(o.arguments[0]);if(null===t)return null;let i="GC";o.arguments.length>1&&(i=e(o.arguments[1])||"GC");const c=new Date(t),r=Object(Bi.g)(c,i);switch(n){case"year":return r.year;case"quarter":return Math.min(Math.floor((r.month-1)/3)+1,4);case"month":return r.month;case"day":return r.day;default:return}}case"weekday":case"hour":case"minute":case"second":{const t=e(o.arguments[0]);if(null===t)return null;const i=new Date(t);switch(n){case"weekday":return i.getDay()+1;case"hour":return i.getHours();case"minute":return i.getMinutes();case"second":return i.getSeconds();default:return}}case"addyears":case"addmonths":case"adddays":{const t=e(o.arguments[0]);if(null===t)return null;const i=e(o.arguments[1]);if(null===i)return null;const c=new Date(i);switch(n){case"adddays":c.setDate(c.getDate()+t);break;case"addmonths":c.setMonth(c.getMonth()+t);break;case"addyears":c.setFullYear(c.getFullYear()+t)}return i.endsWith("Z")?`${c.toISOString().split(".")[0]}.${i.split(".")[1]}`:Object(yi.d)(c)}case"startofyear":case"startofmonth":case"date":{const t=e(o.arguments[0]);if(null===t)return null;let i="GC";o.arguments.length>1&&(i=e(o.arguments[1])||"GC");let c=new Date(t);const r=Object(Bi.g)(c,i);switch(n){case"startofmonth":r.day=1;break;case"startofyear":r.day=1,r.month=1}return c=Object(Bi.c)(r,i),`${Object(yi.c)(c)}T00:00:00.000`}case"diffdays":case"diffhours":case"diffminutes":case"diffseconds":{const t=e(o.arguments[0]);if(null===t)return null;const i=e(o.arguments[1]);if(null===i)return null;let c;switch(n){case"diffdays":c=86400;break;case"diffhours":c=3600;break;case"diffminutes":c=60;break;case"diffseconds":c=1;break;default:return}const r=new Date(t),s=new Date(i);return Math.floor((s.getTime()-r.getTime())/1e3)/c}case"not":return!e(o.arguments[0]);case"abs":{const t=e(o.arguments[0]);return null===t?null:Math.abs(t)}case"if":{const t=e(o.arguments[0]);return e(t?o.arguments[1]:o.arguments[2])}case"isnull":{const t=e(o.arguments[0]);return null!==t?t:e(o.arguments[1])}case"today":return Object(yi.e)();case"now":return Object(yi.b)();case"me":return i.currentTenant.userSettings.UserId;default:throw new Error(`Unknown function '${o.name}'.`)}}else if(o instanceof Ni){const t=o.operator.toLowerCase(),n=e(o.left),i=e(o.right);switch(t){case"+":return null===n||null===i?null:n+i;case"-":return null===n||null===i?null:n-i;case"*":return null===n||null===i?null:n*i;case"/":return null===n||null===i?null:n/i;case"%":return null===n||null===i?null:n%i;case"&&":case"and":return n&&i;case"||":case"or":return n||i;case"<>":case"!=":case"ne":return n!==i;case">":case"gt":return null!==n&&null!==i&&n>i;case">=":case"ge":return null!==n&&null!==i&&n>=i;case"<":case"lt":return null!==n&&null!==i&&n<i;case"<=":case"le":return null!==n&&null!==i&&n<=i;case"=":case"eq":return n===i;case"descof":throw new Error("descof not implemented");case"contains":return null!==n&&null!==i&&n.includes(i);case"startsw":return null!==n&&null!==i&&n.startsWith(i);case"endsw":return null!==n&&null!==i&&n.endsWith(i)}}else{if(!(o instanceof _i)){if(o instanceof Ji)return o.value;if(o instanceof Pi)return o.value;if(o instanceof Fi)return null;if(o instanceof Vi)return o.value;if(o instanceof qi){const e=n[o.keyLower];return Object(V.n)(e)?e:null}throw Error(`[Bug] ${o} has an unknown Queryex type.`)}{const t=o.operator.toLowerCase(),n=e(o.operand);switch(t){case"+":return n;case"-":return null===n?null:-n;case"!":case"not":return!n}}}}(e)}}var cc=n("vxfF"),oc=n("zQsl");const rc=["flatHeader"];function sc(e,t){if(1&e&&(c.Sb(0,"span",12),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.value,n=e.desc,i=e.entityDesc,o=c.gc();c.Ic("background-color",o.stateColor(t,n)),c.zb(1),c.Mc(o.displayValue(t,n,i))}}function lc(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.value,n=e.desc,i=e.entityDesc,o=c.gc();c.zb(1),c.Mc(o.displayValue(t,n,i))}}function ac(e,t){if(1&e&&(c.Sb(0,"div",9),c.Jc(1,sc,2,3,"span",10),c.Jc(2,lc,2,1,"ng-template",null,11,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(2).desc,n=c.gc();c.zb(1),c.nc("ngIf",n.hasColor(t))("ngIfElse",e)}}function uc(e,t){if(1&e&&(c.Sb(0,"span",13),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.desc,n=e.value,i=e.entityDesc,o=c.gc();c.Ic("float",o.descAlignment(t)),c.zb(1),c.Nc("\u200c",o.displayValue(n,t,i),"\u200c")}}function dc(e,t){if(1&e&&(c.Sb(0,"span",13),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.desc,n=e.value,i=e.entityDesc,o=c.gc();c.Ic("float",o.descAlignment(t)),c.zb(1),c.Nc("\u200c",o.displayValue(n,t,i),"\u200c")}}function bc(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.value,n=e.desc,i=e.entityDesc,o=c.gc();c.zb(1),c.Mc(o.displayValue(t,n,i))}}function gc(e,t){if(1&e&&(c.Qb(0,5),c.Jc(1,ac,4,2,"div",6),c.Jc(2,uc,2,3,"span",7),c.Jc(3,dc,2,3,"span",7),c.Jc(4,bc,2,1,"span",8),c.Pb()),2&e){const e=c.gc().desc;c.nc("ngSwitch",e.control),c.zb(1),c.nc("ngSwitchCase","choice"),c.zb(1),c.nc("ngSwitchCase","number"),c.zb(1),c.nc("ngSwitchCase","percent")}}function fc(e,t){if(1&e&&c.Jc(0,gc,5,4,"ng-container",4),2&e){const e=t.isUndefined;c.gc();const n=c.Ac(3);c.nc("ngIf",!e)("ngIfElse",n)}}function mc(e,t){1&e&&(c.Sb(0,"span",14),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Undefined")))}function hc(e,t){if(1&e){const e=c.Tb();c.Sb(0,"th",23),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc(3).onOrderByFlat(n)}),c.Lc(1),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.Ic("width",e.width),c.Eb("text-right",n.isRightAligned(e.desc))("dropdown-toggle",n.isOrdered(e)),c.zb(1),c.Nc(" ",e.label()," ")}}function pc(e,t){if(1&e&&(c.Sb(0,"thead"),c.Sb(1,"tr",null,20),c.Nb(3,"th",21),c.Jc(4,hc,2,7,"th",22),c.Nb(5,"th",21),c.Rb(),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Eb("t-pointer",e.canOrderByFlat)("dropup",e.isDescending),c.zb(3),c.nc("ngForOf",e.selectInfos)}}function Sc(e,t){1&e&&c.Ob(0)}const vc=function(e,t,n){return{value:e,desc:t,entityDesc:n}};function Ic(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",23),c.cc("click",function(){c.Dc(e);const t=c.gc().index;return c.gc(2).onFlatSelect(t)}),c.Jc(1,Sc,1,0,"ng-container",26),c.Rb()}if(2&e){const e=t.$implicit,n=t.index,i=c.gc().$implicit;c.gc(2);const o=c.Ac(1);c.Ic("width",e.width),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.tc(4,vc,i[n],e.desc,e.entityDesc))}}function Mc(e,t){if(1&e&&(c.Sb(0,"tr",24),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Jc(3,Ic,2,8,"td",25),c.Sb(4,"td"),c.Lc(5,"\u200c"),c.Rb(),c.Rb()),2&e){const e=c.gc(2);c.Eb("t-highlight",!1),c.zb(3),c.nc("ngForOf",e.selectInfos)}}function Rc(e,t){1&e&&c.Ob(0)}function yc(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",15),c.Sb(2,"cdk-virtual-scroll-viewport",16),c.Sb(3,"table",17),c.Jc(4,pc,6,5,"thead",2),c.Sb(5,"tbody"),c.Jc(6,Mc,6,3,"tr",18),c.Rb(),c.Rb(),c.Jc(7,Rc,1,0,"ng-container",19),c.Rb(),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=c.Ac(7);c.zb(4),c.nc("ngIf",e.selectInfos),c.zb(2),c.nc("cdkVirtualForOf",e.flat),c.zb(1),c.nc("ngTemplateOutlet",t)}}function Dc(e,t){if(1&e&&(c.Sb(0,"tr"),c.Sb(1,"td",31),c.Lc(2),c.Rb(),c.Sb(3,"td",32),c.Lc(4),c.Rb(),c.Rb()),2&e){const e=t.$implicit,n=c.gc(4);c.zb(2),c.Mc(e.info.label()),c.zb(2),c.Mc(n.displayValue(e.value,e.info.desc,e.info.entityDesc))}}function wc(e,t){if(1&e&&(c.Sb(0,"table"),c.Sb(1,"tbody"),c.Jc(2,Dc,5,2,"tr",30),c.Rb(),c.Rb()),2&e){const e=t.dim;c.zb(2),c.nc("ngForOf",e.attributes)}}function Ec(e,t){if(1&e&&(c.Sb(0,"td",43),c.Lc(1),c.Rb()),2&e){const e=t.$implicit,n=c.gc(9);c.nc("rowSpan",n.rowSpan),c.zb(1),c.Nc(" ",e.label()," ")}}function Cc(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Ec,2,2,"td",42),c.Pb()),2&e){const e=c.gc(8);c.zb(1),c.nc("ngForOf",e.singleRowDimension.attributes)}}function xc(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"td",41),c.Lc(2," \u200c "),c.Rb(),c.Jc(3,Cc,2,1,"ng-container",2),c.Pb()),2&e){const e=c.gc(7);c.zb(1),c.nc("colSpan",e.colSpan)("rowSpan",e.rowSpan),c.zb(2),c.nc("ngIf",!!e.singleRowDimension)}}function Tc(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"button",47),c.cc("click",function(){c.Dc(e);const t=c.gc(2).$implicit;return c.gc(7).onExpandColumn(t)}),c.Nb(2,"fa-icon",48),c.Rb(),c.Lc(3,"\xa0 "),c.Pb()}if(2&e){const e=c.gc(2).$implicit,t=c.gc(7);c.zb(2),c.nc("flip",t.flipArrow(e))("rotate",t.rotateArrow(e))}}function zc(e,t){1&e&&c.Ob(0)}const Lc=function(e,t,n,i){return{value:e,desc:t,isUndefined:n,entityDesc:i}};function kc(e,t){if(1&e&&(c.Sb(0,"td",46),c.Jc(1,Tc,4,2,"ng-container",2),c.Jc(2,zc,1,0,"ng-container",26),c.Rb()),2&e){const e=c.gc().$implicit,t=c.Ac(3),n=c.gc(7),i=c.Ac(1);c.nc("rowSpan",e.rowSpan)("colSpan",e.colSpan)("ngbPopover",t)("disablePopover",0===e.attributes.length),c.zb(1),c.nc("ngIf",n.hasChildren(e)),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.uc(7,Lc,e.value,e.info.desc,!n.isDefined(e),e.info.entityDesc))}}function Oc(e,t){1&e&&c.Ob(0)}const Ac=function(e){return{dim:e}};function Nc(e,t){if(1&e&&c.Jc(0,Oc,1,0,"ng-container",26),2&e){const e=c.gc().$implicit;c.gc(5);const t=c.Ac(2);c.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",c.rc(2,Ac,e))}}function _c(e,t){if(1&e&&(c.Qb(0),c.Jc(1,kc,3,12,"td",44),c.Jc(2,Nc,1,4,"ng-template",null,45,c.Kc),c.Pb()),2&e){const e=t.$implicit;c.zb(1),c.nc("ngIf",e.isVisible)}}function Jc(e,t){if(1&e&&(c.Sb(0,"td",49),c.Lc(1),c.Rb()),2&e){const e=c.gc(7);c.nc("rowSpan",e.columnsGrandTotalLabel.rowSpan)("colSpan",e.columnsGrandTotalLabel.colSpan),c.zb(1),c.Nc(" ",e.columnsGrandTotalLabel.label()," ")}}function Pc(e,t){if(1&e&&(c.Sb(0,"tr"),c.Jc(1,xc,4,3,"ng-container",2),c.Jc(2,_c,4,1,"ng-container",39),c.Jc(3,Jc,2,3,"td",40),c.Rb()),2&e){const e=c.gc(),t=e.index,n=e.$implicit,i=c.gc(5);c.zb(1),c.nc("ngIf",0===t&&i.colSpan&&i.rowSpan),c.zb(1),c.nc("ngForOf",n)("ngForTrackBy",i.trackByObject),c.zb(1),c.nc("ngIf",0===t&&!!i.columnsGrandTotalLabel)}}function Fc(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Pc,4,4,"tr",2),c.Pb()),2&e){const e=t.index,n=c.gc(5);c.zb(1),c.nc("ngIf",n.showHeaderRow(e))}}function Vc(e,t){if(1&e&&(c.Sb(0,"td",51),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e.label()," ")}}function qc(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Vc,2,1,"td",50),c.Pb()),2&e){const e=c.gc(7);c.zb(1),c.nc("ngForOf",e.singleRowDimension.attributes)}}function jc(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"td",41),c.Lc(2," \u200c "),c.Rb(),c.Jc(3,qc,2,1,"ng-container",2),c.Pb()),2&e){const e=c.gc(6);c.zb(1),c.nc("colSpan",e.colSpan)("rowSpan",1),c.zb(2),c.nc("ngIf",!!e.singleRowDimension)}}function $c(e,t){if(1&e&&(c.Sb(0,"td",51),c.Lc(1),c.Rb()),2&e){const e=t.$implicit,n=c.gc(2).$implicit;c.Eb("font-weight-bold",n.isTotal),c.zb(1),c.Nc(" ",e.label()," ")}}function Uc(e,t){if(1&e&&(c.Qb(0),c.Jc(1,$c,2,3,"td",52),c.Pb()),2&e){const e=c.gc(7);c.zb(1),c.nc("ngForOf",e.measures)("ngForTrackBy",e.trackByObject)}}function Kc(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Uc,2,2,"ng-container",2),c.Pb()),2&e){const e=t.$implicit,n=c.gc(6);c.zb(1),c.nc("ngIf",n.isMeasureVisible(e))}}function Bc(e,t){if(1&e&&(c.Sb(0,"td",51),c.Lc(1),c.Rb()),2&e){const e=t.$implicit,n=c.gc(7);c.Eb("font-weight-bold",!!n.columnsGrandTotalLabel),c.zb(1),c.Nc(" ",e.label()," ")}}function Hc(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Bc,2,3,"td",53),c.Pb()),2&e){const e=c.gc(6);c.zb(1),c.nc("ngForOf",e.measures)}}function Qc(e,t){if(1&e&&(c.Sb(0,"tr"),c.Jc(1,jc,4,3,"ng-container",2),c.Jc(2,Kc,2,1,"ng-container",30),c.Jc(3,Hc,2,1,"ng-container",2),c.Rb()),2&e){const e=c.gc(5);c.zb(1),c.nc("ngIf",!e.showHeaderRow(0)&&!!e.colSpan&&!!e.rowSpan),c.zb(1),c.nc("ngForOf",e.columnCells),c.zb(1),c.nc("ngIf",e.showColumnsGrandTotalsMeasureLabels)}}function Wc(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",57),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit;return c.gc(5).onExpandRow(t)}),c.Nb(1,"fa-icon",48),c.Rb()}if(2&e){const e=c.gc().$implicit,t=c.gc(5);c.Ic("margin-left",t.paddingLeft(e))("margin-right",t.paddingRight(e))("opacity",t.hasChildren(e)?1:0),c.nc("disabled",!t.hasChildren(e)),c.zb(1),c.nc("flip",t.flipArrow(e))("rotate",t.rotateArrow(e))}}function Gc(e,t){1&e&&c.Ob(0)}function Yc(e,t){1&e&&c.Ob(0)}function Xc(e,t){if(1&e&&c.Jc(0,Yc,1,0,"ng-container",26),2&e){const e=c.gc().$implicit;c.gc(3);const t=c.Ac(2);c.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",c.rc(2,Ac,e))}}function Zc(e,t){1&e&&c.Ob(0)}function eo(e,t){if(1&e&&(c.Sb(0,"td",59),c.Jc(1,Zc,1,0,"ng-container",26),c.Rb()),2&e){const e=t.$implicit;c.gc(7);const n=c.Ac(1);c.zb(1),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.tc(2,vc,e.value,e.info.desc,e.info.entityDesc))}}function to(e,t){if(1&e&&(c.Qb(0),c.Jc(1,eo,2,6,"td",58),c.Pb()),2&e){const e=c.gc().$implicit;c.zb(1),c.nc("ngForOf",e.attributes)}}function no(e,t){1&e&&c.Ob(0)}const io=function(e,t){return{value:e,desc:t,isUndefined:!1}};function co(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",23),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).$implicit;return c.gc(6).onMeasureClick(i,n)}),c.Jc(1,no,1,0,"ng-container",26),c.Rb()}if(2&e){const e=t.index,n=c.gc(2).$implicit,i=c.gc(6),o=c.Ac(1);c.Cb("t-report-measure ",n.classes[e],""),c.Eb("t-disable-drilldown",n.disableDrilldown)("font-weight-bold",n.isTotal)("t-highlight",n.drilledIndex===e),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(11,io,n.values[e],i.measures[e].desc))}}function oo(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",62),c.cc("click",function(){c.Dc(e);const t=c.gc(2).$implicit;return c.gc(6).onMeasureClick(t,-1)}),c.Rb()}}function ro(e,t){if(1&e&&(c.Qb(0),c.Jc(1,co,2,14,"td",60),c.Jc(2,oo,1,0,"td",61),c.Pb()),2&e){const e=c.gc(7);c.zb(1),c.nc("ngForOf",e.measures),c.zb(1),c.nc("ngIf",0===e.measures.length)}}function so(e,t){if(1&e&&(c.Qb(0),c.Jc(1,ro,3,2,"ng-container",2),c.Pb()),2&e){const e=t.$implicit,n=c.gc(6);c.zb(1),c.nc("ngIf",n.isMeasureVisible(e.column))}}function lo(e,t){if(1&e&&(c.Sb(0,"tr",54),c.Sb(1,"td",55),c.Jc(2,Wc,2,9,"button",56),c.Lc(3,"\xa0 "),c.Jc(4,Gc,1,0,"ng-container",26),c.Rb(),c.Jc(5,Xc,1,4,"ng-template",null,45,c.Kc),c.Jc(7,to,2,1,"ng-container",2),c.Jc(8,so,2,1,"ng-container",30),c.Rb()),2&e){const e=t.$implicit,n=c.Ac(6),i=c.gc(5),o=c.Ac(1);c.zb(1),c.nc("ngbPopover",n)("placement",i.rowAttributePlacement)("disablePopover",0===e.attributes.length||!!i.singleRowDimension),c.zb(1),c.nc("ngIf",i.addRowExpanders),c.zb(2),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.uc(8,Lc,e.value,e.info.desc,!i.isDefined(e),e.info.entityDesc)),c.zb(3),c.nc("ngIf",!!i.singleRowDimension),c.zb(1),c.nc("ngForOf",e.measures)}}function ao(e,t){1&e&&(c.Sb(0,"button",66),c.Nb(1,"fa-icon",67),c.Rb())}function uo(e,t){if(1&e&&(c.Sb(0,"td",64),c.Jc(1,ao,2,0,"button",65),c.Lc(2),c.Rb()),2&e){const e=c.gc(6);c.zb(1),c.nc("ngIf",e.addRowExpanders),c.zb(1),c.Nc("\xa0 ",e.rowsGrandTotalLabel.label()," ")}}function bo(e,t){1&e&&c.Nb(0,"td",59)}function go(e,t){if(1&e&&(c.Qb(0),c.Jc(1,bo,1,0,"td",58),c.Pb()),2&e){const e=c.gc(6);c.zb(1),c.nc("ngForOf",e.singleRowDimension.attributes)}}function fo(e,t){1&e&&c.Ob(0)}function mo(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",23),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).$implicit;return c.gc(6).onMeasureClick(i,n)}),c.Jc(1,fo,1,0,"ng-container",26),c.Rb()}if(2&e){const e=t.index,n=c.gc(2).$implicit,i=c.gc(6),o=c.Ac(1);c.Cb("t-report-measure ",n.classes[e],""),c.Eb("t-disable-drilldown",n.disableDrilldown)("font-weight-bold",n.isTotal)("t-highlight",n.drilledIndex===e),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(11,io,n.values[e],i.measures[e].desc))}}function ho(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",62),c.cc("click",function(){c.Dc(e);const t=c.gc(2).$implicit;return c.gc(6).onMeasureClick(t,-1)}),c.Rb()}}function po(e,t){if(1&e&&(c.Qb(0),c.Jc(1,mo,2,14,"td",60),c.Jc(2,ho,1,0,"td",61),c.Pb()),2&e){const e=c.gc(7);c.zb(1),c.nc("ngForOf",e.measures),c.zb(1),c.nc("ngIf",0===e.measures.length)}}function So(e,t){if(1&e&&(c.Qb(0),c.Jc(1,po,3,2,"ng-container",2),c.Pb()),2&e){const e=t.$implicit,n=c.gc(6);c.zb(1),c.nc("ngIf",n.isMeasureVisible(e.column))}}function vo(e,t){if(1&e&&(c.Sb(0,"tr",54),c.Jc(1,uo,3,2,"td",63),c.Jc(2,go,2,1,"ng-container",2),c.Jc(3,So,2,1,"ng-container",30),c.Rb()),2&e){const e=c.gc(5);c.zb(1),c.nc("ngIf",!!e.rowsGrandTotalLabel),c.zb(1),c.nc("ngIf",!!e.singleRowDimension),c.zb(1),c.nc("ngForOf",e.rowsGrandTotalMeasures)}}function Io(e,t){if(1&e&&(c.Sb(0,"cdk-virtual-scroll-viewport",35),c.Sb(1,"table",36),c.Sb(2,"tbody"),c.Jc(3,Fc,2,1,"ng-container",30),c.Jc(4,Qc,4,3,"tr",2),c.Jc(5,lo,9,13,"tr",37),c.Jc(6,vo,4,3,"tr",38),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc(4);c.zb(3),c.nc("ngForOf",e.columnHeaders),c.zb(1),c.nc("ngIf",e.showMeasureLabelsRow),c.zb(1),c.nc("cdkVirtualForOf",e.rows)("cdkVirtualForTrackBy",e.trackByObject),c.zb(1),c.nc("ngIf",e.rowsGrandTotalMeasures)}}const Mo=function(e){return{0:e}};function Ro(e,t){if(1&e&&(c.Sb(0,"div",68),c.Sb(1,"t-error-message"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(4);c.zb(2),c.Nc(" ",c.jc(3,1,"Error_TooManyColumns0",c.rc(4,Mo,e.maximumColumns))," ")}}function yo(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Io,7,5,"cdk-virtual-scroll-viewport",33),c.Jc(2,Ro,4,6,"ng-template",null,34,c.Kc),c.Pb()),2&e){const e=c.Ac(3),t=c.gc(3);c.zb(1),c.nc("ngIf",!t.tooManyColumns)("ngIfElse",e)}}function Do(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",77),c.Sb(1,"h1",23),c.cc("click",function(){return c.Dc(e),c.gc(5).onPointSelect()}),c.Lc(2),c.Rb(),c.Rb()}if(2&e){const e=c.gc(5);c.zb(1),c.Cb("display-4 t-report-measure mx-5 ",e.pointClass,""),c.zb(1),c.Nc(" ",e.point," ")}}function wo(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Do,3,4,"div",76),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsPoint)("ngIfElse",e)}}function Eo(e,t){1&e&&c.Ob(0)}const Co=function(e){return{model:e}};function xo(e,t){if(1&e&&c.Jc(0,Eo,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function To(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-bar-vertical",79),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,xo,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.monochromatic)("customColors",e.customColors)("results",e.single)("roundEdges",!1)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function zo(e,t){if(1&e&&(c.Qb(0),c.Jc(1,To,3,13,"ngx-charts-bar-vertical",78),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Lo(e,t){1&e&&c.Ob(0)}function ko(e,t){if(1&e&&c.Jc(0,Lo,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Oo(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-bar-horizontal",82),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,ko,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.monochromatic)("customColors",e.customColors)("results",e.single)("roundEdges",!1)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.measureLabel)("yAxisLabel",e.firstDimensionLabel)("yAxisTickFormatting",e.formatChartDimension)("xAxisTickFormatting",e.formatChartMeasureValue)}}function Ao(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Oo,3,13,"ngx-charts-bar-horizontal",81),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle)("ngIfElse",e)}}function No(e,t){1&e&&c.Ob(0)}function _o(e,t){if(1&e&&c.Jc(0,No,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Jo(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-pie-chart",84),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,_o,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.alternativeCustomColors)("results",e.single)("labelFormatting",e.formatChartDimension)("labels",!0)("trimLabels",!1)}}function Po(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Jo,3,7,"ngx-charts-pie-chart",83),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Fo(e,t){1&e&&c.Ob(0)}function Vo(e,t){if(1&e&&c.Jc(0,Fo,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function qo(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-pie-chart",86),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,Vo,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.alternativeCustomColors)("results",e.single)("doughnut",!0)("labelFormatting",e.formatChartDimension)("labels",!0)("trimLabels",!1)}}function jo(e,t){if(1&e&&(c.Qb(0),c.Jc(1,qo,3,8,"ngx-charts-pie-chart",85),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle)("ngIfElse",e)}}function $o(e,t){1&e&&c.Ob(0)}function Uo(e,t){if(1&e&&c.Jc(0,$o,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Ko(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-tree-map",88),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,Uo,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.alternativeCustomColors)("results",e.single)("labelFormatting",e.formatAlternativeChartDimension)("valueFormatting",e.formatChartMeasureValue)}}function Bo(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Ko,3,6,"ngx-charts-tree-map",87),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Ho(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-number-card",90),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.alternativeCustomColors)("results",e.single)("labelFormatting",e.formatAlternativeChartDimension)("valueFormatting",e.formatAlternativeChartMeasureValue)}}function Qo(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Ho,1,6,"ngx-charts-number-card",89),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Wo(e,t){1&e&&c.Ob(0)}function Go(e,t){if(1&e&&c.Jc(0,Wo,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Yo(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-gauge",92),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,Go,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.monochromatic)("customColors",e.customColors)("results",e.single)("max",0)("showText",e.showGaugeTotal())("valueFormatting",e.formatChartMeasureValue)("axisTickFormatting",e.formatStringChartMeasureValue)("legend",e.legend)}}function Xo(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Yo,3,9,"ngx-charts-gauge",91),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Zo(e,t){1&e&&c.Ob(0)}function er(e,t){if(1&e&&c.Jc(0,Zo,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function tr(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-bar-vertical-2d",94),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,er,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("roundEdges",!1)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function nr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,tr,3,14,"ngx-charts-bar-vertical-2d",93),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsMulti)("ngIfElse",e)}}function ir(e,t){1&e&&c.Ob(0)}function cr(e,t){if(1&e&&c.Jc(0,ir,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function or(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-bar-vertical-stacked",96),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,cr,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function rr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,or,3,13,"ngx-charts-bar-vertical-stacked",95),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsMulti)("ngIfElse",e)}}function sr(e,t){1&e&&c.Ob(0)}function lr(e,t){if(1&e&&c.Jc(0,sr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function ar(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-bar-vertical-normalized",96),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,lr,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.measureLabel+" %")("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function ur(e,t){if(1&e&&(c.Qb(0),c.Jc(1,ar,3,13,"ngx-charts-bar-vertical-normalized",95),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsMulti)("ngIfElse",e)}}function dr(e,t){1&e&&c.Ob(0)}function br(e,t){if(1&e&&c.Jc(0,dr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function gr(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-bar-horizontal-2d",98),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,br,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("roundEdges",!1)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.measureLabel)("yAxisLabel",e.firstDimensionLabel)("yAxisTickFormatting",e.formatChartDimension)("xAxisTickFormatting",e.formatChartMeasureValue)}}function fr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,gr,3,14,"ngx-charts-bar-horizontal-2d",97),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsMulti)("ngIfElse",e)}}function mr(e,t){1&e&&c.Ob(0)}function hr(e,t){if(1&e&&c.Jc(0,mr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function pr(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-bar-horizontal-stacked",100),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,hr,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.measureLabel)("yAxisLabel",e.firstDimensionLabel)("yAxisTickFormatting",e.formatChartDimension)("xAxisTickFormatting",e.formatChartMeasureValue)}}function Sr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,pr,3,13,"ngx-charts-bar-horizontal-stacked",99),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsMulti)("ngIfElse",e)}}function vr(e,t){1&e&&c.Ob(0)}function Ir(e,t){if(1&e&&c.Jc(0,vr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Mr(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-bar-horizontal-normalized",100),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,Ir,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.measureLabel+" %")("yAxisLabel",e.firstDimensionLabel)("yAxisTickFormatting",e.formatChartDimension)("xAxisTickFormatting",e.formatChartMeasureValue)}}function Rr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Mr,3,13,"ngx-charts-bar-horizontal-normalized",99),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsMulti)("ngIfElse",e)}}function yr(e,t){1&e&&c.Ob(0)}function Dr(e,t){if(1&e&&c.Jc(0,yr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function wr(e,t){1&e&&c.Ob(0)}function Er(e,t){if(1&e&&c.Jc(0,wr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(24);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Cr(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-line-chart",102),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,Dr,1,4,"ng-template",null,80,c.Kc),c.Jc(3,Er,1,4,"ng-template",null,103,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("showXAxisLabel",e.showXAxisLabel)("legend",e.legend)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.secondDimensionLabel||e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function xr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Cr,5,12,"ngx-charts-line-chart",101),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle||t.supportsMulti)("ngIfElse",e)}}function Tr(e,t){1&e&&c.Ob(0)}function zr(e,t){if(1&e&&c.Jc(0,Tr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(22);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Lr(e,t){1&e&&c.Ob(0)}function kr(e,t){if(1&e&&c.Jc(0,Lr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(24);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Or(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-area-chart",105),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,zr,1,4,"ng-template",null,80,c.Kc),c.Jc(3,kr,1,4,"ng-template",null,103,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.colorful)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.secondDimensionLabel||e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function Ar(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Or,5,12,"ngx-charts-area-chart",104),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsSingle||t.supportsMulti)("ngIfElse",e)}}function Nr(e,t){1&e&&c.Ob(0)}function _r(e,t){if(1&e&&c.Jc(0,Nr,1,0,"ng-container",26),2&e){const e=t.model;c.gc(3);const n=c.Ac(26);c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.rc(2,Co,e))}}function Jr(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ngx-charts-heat-map",105),c.cc("select",function(t){return c.Dc(e),c.gc(5).onChartSelect(t.name)}),c.Jc(1,_r,1,4,"ng-template",null,80,c.Kc),c.Rb()}if(2&e){const e=c.gc(5);c.nc("animations",e.animations)("scheme",e.heat)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.secondDimensionLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartDimension)}}function Pr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Jr,3,12,"ngx-charts-heat-map",104),c.Pb()),2&e){c.gc();const e=c.Ac(20),t=c.gc(3);c.zb(1),c.nc("ngIf",t.supportsMulti)("ngIfElse",e)}}const Fr=function(e){return{count:e}};function Vr(e,t){if(1&e&&(c.Sb(0,"div",106),c.Nb(1,"fa-icon",107),c.Lc(2),c.hc(3,"translate"),c.Rb()),2&e){const e=c.gc(4);c.zb(2),c.Nc(" \xa0 ",c.jc(3,1,"ChartTypeDoesNotSupportNDimensions",c.rc(4,Fr,e.numberOfDimensions))," ")}}function qr(e,t){if(1&e&&(c.Sb(0,"div",108),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Nb(3,"br"),c.Sb(4,"span",109),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.model,n=c.gc(4);c.zb(2),c.Mc(e.name.display),c.zb(3),c.Mc(n.formatChartMeasureValue(e.value))}}function jr(e,t){if(1&e&&(c.Sb(0,"div",112),c.Nb(1,"span",113),c.Lc(2),c.Rb()),2&e){const e=t.$implicit,n=c.gc(5);c.zb(1),c.Ic("background-color",e.color),c.zb(1),c.Nc(" ",(null==e.series?null:e.series.display)+": "+n.formatChartMeasureValue(e.value)," ")}}function $r(e,t){if(1&e&&(c.Sb(0,"div",110),c.Jc(1,jr,3,3,"div",111),c.Rb()),2&e){const e=t.model;c.zb(1),c.nc("ngForOf",e)}}function Ur(e,t){if(1&e&&(c.Sb(0,"div",108),c.Sb(1,"span",109),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=t.model,n=c.gc(4);c.zb(2),c.Mc(n.formatChartMeasureValue(e.value))}}function Kr(e,t){if(1&e&&(c.Sb(0,"div",69),c.Sb(1,"div",70),c.Jc(2,wo,2,2,"ng-container",71),c.Jc(3,zo,2,2,"ng-container",71),c.Jc(4,Ao,2,2,"ng-container",71),c.Jc(5,Po,2,2,"ng-container",71),c.Jc(6,jo,2,2,"ng-container",71),c.Jc(7,Bo,2,2,"ng-container",71),c.Jc(8,Qo,2,2,"ng-container",71),c.Jc(9,Xo,2,2,"ng-container",71),c.Jc(10,nr,2,2,"ng-container",71),c.Jc(11,rr,2,2,"ng-container",71),c.Jc(12,ur,2,2,"ng-container",71),c.Jc(13,fr,2,2,"ng-container",71),c.Jc(14,Sr,2,2,"ng-container",71),c.Jc(15,Rr,2,2,"ng-container",71),c.Jc(16,xr,2,2,"ng-container",71),c.Jc(17,Ar,2,2,"ng-container",71),c.Jc(18,Pr,2,2,"ng-container",71),c.Jc(19,Vr,4,6,"ng-template",null,72,c.Kc),c.Jc(21,qr,6,2,"ng-template",null,73,c.Kc),c.Jc(23,$r,2,1,"ng-template",null,74,c.Kc),c.Jc(25,Ur,3,1,"ng-template",null,75,c.Kc),c.Rb(),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.nc("ngSwitch",e.chart),c.zb(1),c.nc("ngSwitchCase","Card"),c.zb(1),c.nc("ngSwitchCase","BarsVertical"),c.zb(1),c.nc("ngSwitchCase","BarsHorizontal"),c.zb(1),c.nc("ngSwitchCase","Pie"),c.zb(1),c.nc("ngSwitchCase","Doughnut"),c.zb(1),c.nc("ngSwitchCase","TreeMap"),c.zb(1),c.nc("ngSwitchCase","NumberCards"),c.zb(1),c.nc("ngSwitchCase","Gauge"),c.zb(1),c.nc("ngSwitchCase","BarsVerticalGrouped"),c.zb(1),c.nc("ngSwitchCase","BarsVerticalStacked"),c.zb(1),c.nc("ngSwitchCase","BarsVerticalNormalized"),c.zb(1),c.nc("ngSwitchCase","BarsHorizontalGrouped"),c.zb(1),c.nc("ngSwitchCase","BarsHorizontalStacked"),c.zb(1),c.nc("ngSwitchCase","BarsHorizontalNormalized"),c.zb(1),c.nc("ngSwitchCase","Line"),c.zb(1),c.nc("ngSwitchCase","Area"),c.zb(1),c.nc("ngSwitchCase","HeatMap")}}function Br(e,t){1&e&&(c.Sb(0,"div",106),c.Nb(1,"fa-icon",107),c.Lc(2),c.hc(3,"translate"),c.Rb()),2&e&&(c.zb(2),c.Nc(" \xa0 ",c.ic(3,1,"SpecifyNumericMeasure")," "))}function Hr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,wc,3,1,"ng-template",null,27,c.Kc),c.Jc(3,yo,4,2,"ng-container",2),c.Jc(4,Kr,27,18,"div",28),c.Jc(5,Br,4,3,"div",29),c.Pb()),2&e){const e=c.gc(2);c.zb(3),c.nc("ngIf",e.showSummary),c.zb(1),c.nc("ngIf",e.showChart),c.zb(1),c.nc("ngIf",e.showSpecifyNumericMeasure)}}function Qr(e,t){1&e&&c.Ob(0)}function Wr(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Hr,6,3,"ng-container",2),c.Jc(2,Qr,1,0,"ng-container",19),c.Pb()),2&e){const e=c.gc(),t=c.Ac(7);c.zb(1),c.nc("ngIf",e.showResults),c.zb(1),c.nc("ngTemplateOutlet",t)}}function Gr(e,t){1&e&&(c.Sb(0,"div",118),c.Nb(1,"t-spinner",119),c.Rb()),2&e&&(c.zb(1),c.nc("scale",2))}function Yr(e,t){1&e&&(c.Sb(0,"div",120),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function Xr(e,t){if(1&e&&(c.Sb(0,"div",68),c.Sb(1,"t-error-message"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2);c.zb(2),c.Nc(" ",e.errorMessage," ")}}function Zr(e,t){if(1&e&&(c.Sb(0,"div",121),c.Nb(1,"fa-icon",107),c.Lc(2),c.Rb()),2&e){const e=c.gc(2);c.zb(2),c.Nc(" \xa0 ",e.information()," ")}}function es(e,t){if(1&e&&(c.Jc(0,Gr,2,1,"div",114),c.Jc(1,Yr,3,3,"div",115),c.Jc(2,Xr,3,1,"div",116),c.Jc(3,Zr,3,1,"div",117)),2&e){const e=c.gc();c.nc("ngIf",e.showSpinner),c.zb(1),c.nc("ngIf",e.showNoItemsFound),c.zb(1),c.nc("ngIf",e.showErrorMessage),c.zb(1),c.nc("ngIf",e.showInformation)}}var ts=function(e){return e.pivot="pivot",e.chart="chart",e}({});const ns=["#1490A3","#128091","#10707F","#0D606D","#0B505B","#0D606D","#10707F","#128091"];let is=(()=>{class e{constructor(e,t,n,i,o,r){this.workspace=e,this.translate=t,this.api=n,this.cdr=i,this.router=o,this.route=r,this.maximumColumns=130,this._rowAttributePlacement=["bottom","top","bottom-left","top-left"],this._rowAttributePlacementRtl=["bottom","top","bottom-right","top-right"],this.arguments={},this.mode="screen",this.disableDrilldown=!1,this.silentRefreshError=new c.n,this.exportStarting=new c.n,this.exportSuccess=new c.n,this.exportError=new c.n,this.orderbyChange=new c.n,this.notifyFetch$=new E.a,this.notifyDestruct$=new E.a,this.crud=this.api.crudFactory(this.apiEndpoint,this.notifyDestruct$),this.animations=!1,this.showXAxis=!0,this.showYAxis=!0,this.showXAxisLabel=!0,this.showYAxisLabel=!0,this.legend=!1,this.colorful={domain:ns},this.monochromatic={domain:[ns[1]]},this.heat={domain:["#96D5DF","#052429"]},this.chartDimensionCellFromDimensionCell=(e,t,n,i,c,o)=>{const r=Object(V.n)(n)?this.displayValue(t,e.desc,e.entityDesc):this.translate.instant("Undefined");return new L.a(r,n,e,c,i,o)},this.customColors=e=>e.color||ns[e.index%ns.length],this.alternativeCustomColors=e=>{const t=this.state;if(!t.singleCellsHash){t.singleCellsHash={};for(const e of this.single){const n=e.name.toString();n===L.n?t.singleCellsUndefined=e.name:t.singleCellsHash[n]=e.name}}let n;return n=e===L.n?t.singleCellsUndefined:t.singleCellsHash[e],this.customColors(n)},this.formatChartMeasureValue=(e,t)=>{const n=(t=t||this.state).measureInfos[t.singleNumericMeasureIndex];return Object(me.c)(e,n.desc,this.workspace,this.translate)},this.formatAlternativeChartMeasureValue=e=>this.formatChartMeasureValue(e.value),this.formatStringChartMeasureValue=e=>(e=e.replace(/,/g,""),this.formatChartMeasureValue(+e)),this.showGaugeTotal=()=>this.state.totalEqualsSum}ngOnInit(){this.state=this.state||new L.j;const e=this.state;if(this._subscriptions=new O.a,this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>this.cdr.markForCheck()})),this._subscriptions.add(this.notifyFetch$.pipe(Object(N.a)(e=>this.doFetch(e))).subscribe()),"screen"===this.mode){const e=e=>{const t=e.get("$orderby");try{const e=zi.parse(t,{expectDirKeywords:!0});e.length>0?(this.orderbyKey=e[0].toString(),this.orderbyDir=e[0].direction||"asc"):(delete this.orderbyKey,delete this.orderbyDir)}catch(n){delete this.orderbyKey,delete this.orderbyDir}};e(this.route.snapshot.paramMap),this._subscriptions.add(this.route.paramMap.pipe(Object(Ri.a)(1)).subscribe(t=>{e(t),this.applyChanges()&&this.fetch()}))}this.crud=this.api.crudFactory(this.apiEndpoint,this.notifyDestruct$),this.view=this.view||(this.definition.Chart&&this.definition.DefaultsToChart?ts.chart:ts.pivot);const t=this.applyChanges();if(e.reportStatus!==L.i.loaded||t)try{const{filter:t,having:n,columns:i,rows:c,measures:o,select:r,parameters:s}=ic.getReportInfos(this.definition,this.workspace,this.translate),l={};s.forEach(e=>l[e.keyLower]=e),e.parameterInfos=l,e.filterExp=t,e.havingExp=n,e.columnInfos=i,e.rowInfos=c,e.measureInfos=o,e.uniqueMeasureAggregations=this.computeUniqueMeasureAggregations(o),e.selectInfos=r,e.dimensionInfos=e.columnInfos.concat(e.rowInfos),e.singleNumericMeasureIndex=this.state.measureInfos.findIndex(e=>e.isNumeric),e.badDefinition=!1,this.fetch()}catch(n){e.parameterInfos=null,e.filterExp=null,e.havingExp=null,e.columnInfos=null,e.rowInfos=null,e.measureInfos=null,e.uniqueMeasureAggregations=null,e.selectInfos=null,e.dimensionInfos=null,e.singleNumericMeasureIndex=-1,e.badDefinition=!0,e.reportStatus=L.i.error,e.errorMessage=n,this.cdr.markForCheck()}this.subscribeRefresh(),this.subscribeExport()}ngOnChanges(e){[e.state,e.definition,e.mode].some(e=>!!e&&!e.isFirstChange())?(this.ngOnDestroy(),this.ngOnInit()):([e.arguments].some(e=>!!e&&!e.isFirstChange())&&this.applyChanges()&&(this.state.skip=0,this.fetch()),e.refresh&&!e.refresh.isFirstChange()&&(this.unsubscribeRefresh(),this.subscribeRefresh()),e.export&&!e.export.isFirstChange()&&(this.unsubscribeExport(),this.subscribeExport()))}unsubscribeRefresh(){this._refreshSubscription&&this._refreshSubscription.unsubscribe()}subscribeRefresh(){this.refresh&&(this._refreshSubscription=this.refresh.pipe(Object(_.a)(e=>!e&&this.state.reportStatus!==L.i.loading||e&&!this.state.silentQuery),Object(J.a)(e=>this.fetch(e))).subscribe())}unsubscribeExport(){this._exportSubscription&&this._exportSubscription.unsubscribe()}subscribeExport(){this.export&&(this._exportSubscription=this.export.pipe(Object(_.a)(e=>this.state.reportStatus!==L.i.loading),Object(J.a)(e=>this.onExport(e))).subscribe())}applyChanges(){const e=this.state;let t=!1;this.definition!==e.definition&&(e.definition=this.definition,t=!0),this.isDetails&&this.canOrderByFlat&&(this.orderbyKey!==e.orderbyKey&&(e.orderbyKey=this.orderbyKey,t=!0),this.orderbyDir!==e.orderbyDir&&(e.orderbyDir=this.orderbyDir,t=!0));const n=this.arguments,i=this.state.arguments;for(const c of Object.keys(n).concat(Object.keys(i)))i[c]!==n[c]&&(i[c]=n[c],t=!0);return t}ngOnDestroy(){this.notifyDestruct$.next(),this.unsubscribeRefresh(),this.unsubscribeExport()}get entityDescriptor(){if(!this.definition)return null;const e=this.definition.Collection;if(!e)return null;const t=Mi.h[e];return t?t(this.workspace,this.translate,this.definition.DefinitionId):null}get apiEndpoint(){const e=this.entityDescriptor;return e?e.apiEndpoint:null}fetch(e){this.notifyFetch$.next(e)}doFetch(t){let n,i,c,o=this.state;if(o.badDefinition)return Object(A.a)(null);t?o.silentQuery=!0:o.reportStatus=L.i.loading;try{n=this.computeFilter(o),i=this.computeHaving(o)}catch(r){return o.silentQuery=!1,o.reportStatus=L.i.error,o.errorMessage=r.message,Object(A.a)(null)}if(this.cdr.markForCheck(),this.showDetails){const i=this.definition.Top||e.DEFAULT_PAGE_SIZE,s=this.definition.Top?0:o.skip;let l,a;try{if(l=this.computeSelect(o),a=this.computeOrderBy(o),!l)return o.silentQuery=!1,o.reportStatus=L.i.information,o.information=()=>this.translate.instant("DragSelect"),Object(A.a)(null)}catch(r){return o.silentQuery=!1,o.reportStatus=L.i.error,o.errorMessage=r.message,Object(A.a)(null)}this.rememberFlatColumnWidths(),c=this.crud.getFact({top:i,skip:s,orderby:a,select:l,filter:n,countEntities:!0,silent:t}).pipe(Object(J.a)(e=>{o.silentQuery=!1,o.reportStatus=L.i.loaded,o.top=e.Result.length,o.skip=s,o.total=e.TotalCount,o.result=e.Result,this.forgetFlatColumnWidths()}))}else{let e;try{if(e=this.computeAggregateSelect(o),!e)return o.silentQuery=!1,o.reportStatus=L.i.information,o.information=()=>this.translate.instant("DragDimensionsOrMeasures"),Object(A.a)(null)}catch(r){return o.silentQuery=!1,o.reportStatus=L.i.error,o.errorMessage=r.message,Object(A.a)(null)}c=this.crud.getAggregate({top:this.definition.Top,select:e,filter:n,having:i,silent:t}).pipe(Object(J.a)(e=>{o.silentQuery=!1,o.reportStatus=L.i.loaded,o.result=e.Result,o.ancestorGroups={};for(const t of e.DimensionAncestors||[]){const e={};for(const n of t.Result)e[n[t.IdIndex-t.MinIndex]]=n;o.ancestorGroups[t.IdIndex]={minIndex:t.MinIndex,ancestors:e}}}))}return c.pipe(Object(J.a)(()=>{o.silentError=!1,o.time=Object(yi.b)()}),Object(F.a)(e=>(o=this.state,t?(o.silentQuery=!1,o.silentError=!0,this.silentRefreshError.emit(e)):o.reportStatus=L.i.error,o.errorMessage=e.error,Object(A.a)(null))),Object(ne.a)(()=>this.cdr.markForCheck()))}computeUniqueMeasureAggregations(e){const t={},n=[];function i(e){const i=e.toString();let c=t[i];return void 0===c&&(c=n.length,t[i]=c,n.push({exp:e})),c}const c=[];for(const o of e)o.exp.aggregationsInner(c),o.success&&o.success.aggregationsInner(c),o.warning&&o.warning.aggregationsInner(c),o.danger&&o.danger.aggregationsInner(c);for(const o of c)if("avg"===o.nameLower){const e=o.clone();e.setName("sum"),o.sumIndex=i(e);const t=o.clone();t.setName("count"),o.countIndex=i(t)}else o.index=i(o);return n}computeFilter(e){return this.definition?(e=e||this.state).filterExp?ji(ic.stringify(e.filterExp,this.arguments,e.parameterInfos)):null:""}computeHaving(e){return this.definition?(e=e||this.state).havingExp?ji(ic.stringify(e.havingExp,this.arguments,e.parameterInfos)):null:""}computeOrderBy(e){if(e=e||this.state,this.isDetails&&this.canOrderByFlat&&e.orderbyKey){const t=e.selectInfos.find(t=>t.expToString===e.orderbyKey),n=this.orderDirection(t);if(n){const i=ic.stringify(t.exp,this.arguments,e.parameterInfos);if(t.entityDesc)return t.entityDesc.orderby().map(e=>`${i}.${e} ${n}`).join(",");if(t.localize){const c=this.workspace.currentTenant,o=ic.stringify(t.exp,this.arguments,e.parameterInfos,c.isSecondaryLanguage?2:c.isTernaryLanguage?3:1);return i===o?i:`${o} ${n},${i} ${n}`}return`${i} ${n}`}}return this.definition.OrderBy}computeSelect(e){if(!this.definition)return"";const t=(e=e||this.state).selectInfos;if(!t||0===t.length)return"";const n=this.arguments,i=e.parameterInfos,c={},o=[];function r(e){e=ji(e);let t=c[e];return void 0===t&&(t=o.length,c[e]=t,o.push(e)),t}const s=this.entityDescriptor;e.idIndex=s.properties.Id?r("Id"):-1,e.defIdIndex=!s.definitionId&&s.definitionIds?r("DefinitionId"):-1,s.navigateToDetailsSelect?e.navigateToDetailsIndices=s.navigateToDetailsSelect.map(e=>r(e)):delete e.navigateToDetailsIndices;for(const l of t){let e=[];const{exp:t,localize:c,entityDesc:o}=l;if(o){const c=ic.stringify(t,n,i);for(const t of o.select)e.push(r(c+"."+t))}else{for(const o of c?[1,2,3]:[1]){const c=ic.stringify(t,n,i,o);e.push(r(c))}e.every(t=>t===e[0])&&(e=[e[0]])}l.indices=e}return o.join(",")}computeAggregateSelect(e){if(!this.definition)return"";const t=this.arguments,n=(e=e||this.state).parameterInfos,i={},c=[];function o(e){e=ji(e);let t=i[e];return void 0===t&&(t=c.length,i[e]=t,c.push(e)),t}const r=e.columnInfos,s=e.rowInfos;for(const l of r.concat(s)){const{keyExp:e,entityDesc:i,dispExp:c,localize:r}=l,s=ic.stringify(e,t,n);if(i){if(l.keyIndex=o(s+".Id"),c){let e=[];for(const i of r?[1,2,3]:[1]){const r=ic.stringify(c,t,n,i,s);e.push(o(r))}e.every(t=>t===e[0])&&(e=[e[0]]),l.indices=e}else{l.indices=[];for(const e of i.select)l.indices.push(o(s+"."+e))}for(const e of l.attributes){e.indices=[];const{exp:i,localize:c,entityDesc:r}=e;if(r){e.indices=[];const c=ic.stringify(i,t,n,1,s);for(const t of r.select)e.indices.push(o(c+"."+t))}else{let r=[];for(const e of c?[1,2,3]:[1]){const c=ic.stringify(i,t,n,e,s);r.push(o(c))}r.every(e=>e===r[0])&&(r=[r[0]]),e.indices=r}}l.showAsTree&&(l.parentKeyIndex=o(s+".ParentId"))}else l.keyIndex=o(s)}for(const l of e.uniqueMeasureAggregations){const e=ic.stringify(l.exp,t,n);l.index=o(e)}return c.join(",")}onExport(e){try{const n=this.state;if(n.reportStatus===L.i.loaded)if(this.isDetails){const i=[],c=t=>{const c=n.selectInfos;{const e=[];i.push(e);for(const t of c)e.push(t.label())}for(const e of t){const t=[];i.push(t);for(let n=0;n<c.length;n++){const i=c[n],o=this.displayValue(e[n],i.desc,i.entityDesc);t.push(o)}}this.downloadData(i,e),this.exportSuccess.emit()};if(this.definition.Top)c(this.flat);else{let e,i,o;try{e=this.computeFilter(n),i=this.computeSelect(),o=this.computeOrderBy()}catch(t){return void this.exportError.emit(t)}if(!i){const e=this.translate.instant("DragSelect");return void this.exportError.emit(e)}this.exportStarting.emit(),this.crud.getFact({top:2147483647,skip:0,orderby:o,select:i,filter:e}).pipe(Object(J.a)(e=>{const t=this.flatInner(e.Result,n);c(t),this.exportSuccess.emit()}),Object(F.a)(e=>(this.exportError.emit(e.error),Object(A.a)()))).subscribe()}}else{if(!this.isSummary)return;{const t=[],{columnHeaders:i,columns:c,rows:o,colSpan:r,columnsGrandTotalLabel:s,rowsGrandTotalLabel:l,rowsGrandTotalMeasures:a}=n.pivot,u=n.measureInfos,d=this.singleRowDimension,b=d?d.attributes:[],g={};let f=!0;for(const e of i){const n=[];t.push(n);for(let e=0;e<r;e++)n.push(null);if(d)if(f)for(const e of b)n.push(e.label());else for(const e of b)n.push(null);for(const t of e){for(;g[n.length];)n.push(null);let e;t.rowSpan>1&&(g[n.length]=!0),e=this.isDefined(t)?this.displayValue(t.value,t.info.desc,t.info.entityDesc):this.translate.instant("Undefined"),n.push(e);for(let i=1;i<t.expandedColSpan;i++)n.push(null)}f&&s&&n.push(s.label()),f=!1}if(this.showMeasureLabelsRow){const e=[];t.push(e);for(let t=0;t<r;t++)e.push(null);if(d)if(f)for(const t of b)e.push(t.label());else for(const t of b)e.push(null);for(const t of c)if(0===t.children.length)for(const n of u)e.push(n.label());if(this.showColumnsGrandTotalsMeasureLabels)for(const t of u)e.push(t.label())}for(const e of o){const n=[];t.push(n);{let t="";for(let n=0;n<e.level;n++)t+="            ";this.isDefined(e)?t+=this.displayValue(e.value,e.info.desc,e.info.entityDesc):t+=this.translate.instant("Undefined"),n.push(t)}if(d)for(const t of e.attributes){const e=this.displayValue(t.value,t.info.desc,t.info.entityDesc);n.push(e)}for(const t of e.measures)if(!t.column||0===t.column.children.length){for(let e=0;e<u.length;e++){const i=Object(me.c)(t.values[e],u[e].desc,this.workspace,this.translate);n.push(i)}0===u.length&&n.push(null)}}if(a){const e=[];if(t.push(e),l&&e.push(l.label()),d)for(const t of b)e.push(null);for(const t of a)if(!t.column||0===t.column.children.length)for(let n=0;n<u.length;n++){const i=Object(me.c)(t.values[n],u[n].desc,this.workspace,this.translate);e.push(i)}}this.downloadData(t,e),this.exportSuccess.emit()}}}catch(n){this.exportError.emit(n)}}downloadData(e,t){let n=0;for(const c of e)c.length>n&&(n=c.length);for(const c of e)for(;c.length<n;)c.push(null);const i=Object(V.g)(e);Object(V.i)(i,t||this.translate.instant("Report")+".csv")}get isDetails(){return!!this.definition&&"Details"===this.definition.Type}get isSummary(){return!!this.definition&&"Summary"===this.definition.Type}get showDetails(){return this.isDetails}get showSummary(){return this.isSummary&&this.view===ts.pivot}get showChart(){return this.isSummary&&this.view===ts.chart&&-1!==this.state.singleNumericMeasureIndex}get showSpecifyNumericMeasure(){return this.isSummary&&this.view===ts.chart&&-1===this.state.singleNumericMeasureIndex}get showResults(){return this.state.reportStatus===L.i.loaded&&!this.showNoItemsFound}get showErrorMessage(){return this.state.reportStatus===L.i.error}get showInformation(){return this.state.reportStatus===L.i.information}get showSpinner(){return this.state.reportStatus===L.i.loading}get showNoItemsFound(){const e=this.state;return e.reportStatus===L.i.loaded&&(!e.result||0===e.result.length)}get errorMessage(){return this.state.errorMessage}information(){return this.state.information()}get chart(){return this.definition?this.definition.Chart:null}extractValue(e,t,n=0){return t.entityDesc?t.indices.map(t=>e[t-n]):e[t.keyIndex-n]}get pivot(){const e=this.state,t=this.definition,n=this.workspace.currentTenant;if(e.currentResultForPivot!==e.result){e.currentResultForPivot=e.result;const o=e.columnInfos,r=o.length>0,s=e.measureInfos.length>0&&(t.ShowColumnsTotal||0===o.length),l=e.rowInfos,a=l.length>0,u=e.measureInfos.length>0&&(t.ShowRowsTotal||0===l.length),d=(t,n)=>{const i={cell:null},c=[],o=e=>{if(n){e.measures=[];const t=s?n.length+1:n.length;for(let i=0;i<t;i++){const t=n[i];e.measures.push({aggValues:[],values:[],classes:[],column:t,row:e,isTotal:r&&!t})}}},l=(e,t,n,i)=>{let r;if(e){if(r=n.ancestors[e],!r){const s=i.ancestors[e],a=this.extractValue(s,t,i.minIndex),u=l(s[t.parentKeyIndex-i.minIndex],t,n,i);r={info:t,value:a,valueId:e,isExpanded:t.autoExpandLevel>(u?u.level+1:0)-(n.cell?n.cell.level:-1)-1,level:u?u.level+1:0,index:0,parent:u,prevDimensionParent:n.cell,children:[],attributes:[]};for(const e of t.attributes){let t;t=e.entityDesc||e.indices.length>1?e.indices.map(e=>s[e-i.minIndex]):s[e.indices[0]-i.minIndex],r.attributes.push({value:t,info:e}),e.isOrdered&&(r.sortValue=this.sortValue(t,e.desc,e.entityDesc))}t.isOrdered&&(r.sortValue=this.sortValue(r.value,t.desc,t.entityDesc)),(u?u.children:c).push(r),o(r),n.ancestors[e]=r}r.isAncestor=!0}else r=n.cell;return r};if(t.length>0)for(const r of e.result){let n=i;for(const i of t){const t=r[i.keyIndex],s=this.extractValue(r,i);let a;if(Object(V.n)(t)?(n.values||(n.values={}),a=n.values[t]):a=n.undefined,!a){let u;if(i.showAsTree){n.ancestors||(n.ancestors={});const c=e.ancestorGroups[i.keyIndex];u=l(c.ancestors[t]?t:r[i.parentKeyIndex],i,n,c)}else u=n.cell;const d=u?u.level+1:0,b={info:i,value:s,valueId:t,isExpanded:i.autoExpandLevel>d-(n.cell?n.cell.level:-1)-1,level:d,index:0,parent:u,prevDimensionParent:n.cell,children:[],attributes:[]};for(const e of i.attributes){let t;t=e.entityDesc||e.indices.length>1?e.indices.map(e=>r[e]):r[e.indices[0]],b.attributes.push({value:t,info:e}),e.isOrdered&&(b.sortValue=this.sortValue(t,e.desc,e.entityDesc))}i.isOrdered&&(b.sortValue=this.sortValue(b.value,i.desc,i.entityDesc)),(u?u.children:c).push(b),o(b),a={cell:b},Object(V.n)(t)?n.values[t]=a:n.undefined=a}n=a}}return{hash:i,roots:c}};function i(e,t,n=0){switch(e[0].info.orderDir){case"asc":e.sort((e,t)=>e.sortValue===t.sortValue?0:null===e.sortValue?-1:null===t.sortValue||e.sortValue>t.sortValue?1:e.sortValue<t.sortValue?-1:0);break;case"desc":e.sort((e,t)=>e.sortValue===t.sortValue?0:null===e.sortValue?1:null===t.sortValue||e.sortValue>t.sortValue?-1:e.sortValue<t.sortValue?1:0)}for(const c of e)c.index=n++,t.push(c),c.children&&c.children.length>0?n=i(c.children,t,n):c.isExpanded=!1;return n}const{hash:b,roots:g}=d(o),f=[];g.length>0&&i(g,f);const m=[];for(const e of f)m[e.level]?m[e.level].push(e):m[e.level]=[e];let h;s&&r&&(h={label:t.ColumnsTotalLabel?()=>n.localize(t.ColumnsTotalLabel,t.ColumnsTotalLabel2,t.ColumnsTotalLabel3):()=>this.translate.instant("GrandTotal"),isTotal:r});const{hash:p,roots:S}=d(l,f);let v,I;if(u){a&&(v={label:t.RowsTotalLabel?()=>n.localize(t.RowsTotalLabel,t.RowsTotalLabel2,t.RowsTotalLabel3):()=>this.translate.instant("GrandTotal"),isTotal:a}),I=[];const e=s?f.length+1:f.length;for(let t=0;t<e;t++)I.push({aggValues:[],values:[],classes:[],column:f[t],row:null,isTotal:a})}function c(e){return Object(V.n)(e)?e:null}if(e.uniqueMeasureAggregations.length>0)for(const t of e.result){let n=f.length,i=b;for(const e of o){const c=t[e.keyIndex];i=Object(V.n)(c)?i.values[c]:i.undefined,n=i.cell.index}let r,s=I,a=p;for(const e of l){const n=t[e.keyIndex];a=Object(V.n)(n)?a.values[n]:a.undefined,r=a.cell,r.measures=r.measures||[],s=r.measures}let u=s;for(;u;){let i=n,o=u[i];for(;o;)if(e.uniqueMeasureAggregations.forEach((e,n)=>{const{exp:i,index:r}=e,s=c(t[r]),l=c(o.aggValues[n]);switch(i.nameLower){case"sum":case"count":o.aggValues[n]=null===l&&null===s?null:l+s;break;case"max":o.aggValues[n]=null===l?s:null===s?l:l<s?s:l;break;case"min":o.aggValues[n]=null===l?s:null===s||l<s?l:s}}),o.column&&o.column.parent)i=o.column.parent.index,o=u[i];else{if(i===f.length)break;i=f.length,o=u[i]}const r=u[n];if(r.row&&r.row.parent)u=r.row.parent.measures;else{if(u===I)break;u=I}}}if(e.measureInfos.length>0){const t=(t,n)=>{e.measureInfos.forEach((i,c)=>{const o=ic.evaluateExp(i.exp,t.aggValues,this.arguments,this.workspace);t.values[c]=o,t.classes[c]=i.danger&&ic.evaluateExp(i.danger,t.aggValues,this.arguments,this.workspace)?"t-danger":i.warning&&ic.evaluateExp(i.warning,t.aggValues,this.arguments,this.workspace)?"t-warning":i.success&&ic.evaluateExp(i.success,t.aggValues,this.arguments,this.workspace)?"t-success":null,e.havingExp&&(n||t.column&&t.column.children.length>0||!t.column&&e.columnInfos.length>0)&&(t.disableDrilldown=!0),i.isOrdered&&t.row&&(t.row.sortValue=o)})};if(I){const n=e.rowInfos.length>0;for(const e of I)t(e,n)}!function e(n){for(const i of n){const n=i.children.length>0;for(const e of i.measures)t(e,n);n&&e(i.children)}}(S)}const M=[];S.length>0&&i(S,M),e.pivot={maxVisibleLevel:0,rowSpan:0,colSpan:0,columnHeaders:m,columns:f,rows:M,rowsGrandTotalMeasures:I,columnsGrandTotalLabel:h,rowsGrandTotalLabel:v,columnsGrandTotalsIncluded:s},this.recomputeColumnSpans(e.pivot),m.forEach(e=>e.forEach(e=>{e.expandedColSpan=0}));for(let t=m.length-1;t>=0;t--)for(let n=m[t].length-1;n>=0;n--){const i=m[t][n];i.expandedColSpan=i.expandedColSpan||e.measureInfos.length||1,i.parent&&(i.parent.expandedColSpan+=i.expandedColSpan)}m.forEach(e=>e.forEach(e=>{e.expandedRowSpan=0===e.children.length?m.length-e.level:1}))}return e.pivot}recomputeColumnSpans(e){const t=this.state,n=(e=e||t.pivot).columnHeaders,i=t.measureInfos.length;n.forEach(e=>e.forEach(e=>{e.colSpan=0,e.isVisible=!e.parent||e.parent.isVisible&&e.parent.isExpanded}));for(let c=n.length-1;c>=0;c--)for(let e=n[c].length-1;e>=0;e--){const t=n[c][e];t.colSpan=t.colSpan||i||1,t.parent&&t.parent.isExpanded&&(t.parent.colSpan+=t.colSpan)}e.maxVisibleLevel=-1,n.forEach(t=>t.forEach(t=>{t.isVisible&&t.level>e.maxVisibleLevel&&(e.maxVisibleLevel=t.level)})),n.forEach(t=>t.forEach(t=>{t.rowSpan=t.isExpanded?1:e.maxVisibleLevel+1-t.level}));{const t=e.columnsGrandTotalLabel;t&&(t.colSpan=i||1,t.rowSpan=e.maxVisibleLevel+1)}e.colSpan=0===t.rowInfos.length?0:1,e.rowSpan=e.maxVisibleLevel+1+(this.showMeasureLabelsRow?1:0)}showHeaderRow(e){return e<=this.pivot.maxVisibleLevel}onExpandRow(e){e.isExpanded=!e.isExpanded,this.recomputeVisibleRows()}onExpandColumn(e){e.isExpanded=!e.isExpanded,this.recomputeColumnSpans()}recomputeVisibleRows(){const e=this.state.pivot.rows;e.forEach(e=>e.isVisible=!e.parent||e.parent.isExpanded&&e.parent.isVisible),this._modifiedRows=e.filter(e=>e.isVisible)}hasChildren(e){return!!e.children&&e.children.length>0}flipArrow(e){return this.workspace.ws.isRtl&&!e.isExpanded?"horizontal":null}get rowAttributePlacement(){return this.workspace.ws.isRtl?this._rowAttributePlacementRtl:this._rowAttributePlacement}rotateArrow(e){return e.isExpanded?90:0}isMeasureVisible(e){return!e||e.isVisible&&!e.isExpanded}trackByRow(e,t){return t[0]}trackByObject(e,t){return t}paddingLeft(e){return this.workspace.ws.isRtl?"0":30*e.level+"px"}paddingRight(e){return this.workspace.ws.isRtl?30*e.level+"px":"0"}get columnHeaders(){return this.pivot.columnHeaders}get columnCells(){return this.pivot.columns}get tooManyColumns(){return this.pivot.columns.length*(this.measures.length||1)>this.maximumColumns}get rows(){const e=this.pivot;return this._currentRows!==e.rows&&(this._currentRows=e.rows,this.recomputeVisibleRows()),this._modifiedRows}get showRowDimensionLabel(){return!1}get singleRowDimension(){const e=this.state;if(e.rowInfos&&1===e.rowInfos.length)return e.rowInfos[0]}get showMeasureLabelsRow(){const e=this.state;if(e.measureInfos.length>0&&(e.measureInfos.length>1||0===e.columnInfos.length))return!0;{const e=this.singleRowDimension;return!this.showHeaderRow(0)&&!!e&&e.attributes.length>0}}get showColumnsGrandTotalsMeasureLabels(){return!!this.pivot.columnsGrandTotalsIncluded}get rowSpan(){return this.pivot.rowSpan}get colSpan(){return this.pivot.colSpan}get rowsGrandTotalMeasures(){return this.pivot.rowsGrandTotalMeasures}get columnsGrandTotalLabel(){return this.pivot.columnsGrandTotalLabel}get rowsGrandTotalLabel(){return this.pivot.rowsGrandTotalLabel}get measures(){return this.state.measureInfos}computeFilterAtoms(e){const t=[];let n=e;for(;n;){const{keyExp:e,keyDesc:i,entityDesc:c}=n.info;let o,r;if(n.isAncestor)o=c.properties.Id.datatype,r=ic.stringify(e,void 0,void 0)+".Id";else if("entity"===i.datatype){const t=e.clone();t.property=i.foreignKeyName,o=c.properties.Id.datatype,r=ic.stringify(t,void 0,void 0)}else o=i.datatype,r=ic.stringify(e,void 0,void 0);const s=n.valueId;let l;l=Object(V.n)(s)?ic.needsQuotes(o)?`'${s.replace(/\'/g,"''")}'`:s+"":"null",t.push(`(${r} ${n.isAncestor?"descof":"eq"} ${l})`),n=n.prevDimensionParent}return t}computeMeasureAtoms(e){if(-1===e)return[];const t=this.state,n=t.measureInfos[e].exp.aggregations(),i={};for(const o of n){if(o.arguments.length<2)return[];i[ic.stringify(o.arguments[1],this.arguments,t.parameterInfos)]=!0}const c=Object.keys(i);return 0===c.length?[]:1===c.length?c:[`(${c.reduce((e,t)=>e+" or "+t)})`]}onMeasureClick(e,t){if(e.disableDrilldown)return;const n=e.column,i=this.computeFilterAtoms(e.row),c=this.computeFilterAtoms(n),o=this.computeMeasureAtoms(t),r=i.concat(c).concat(o);let s;s=0===r.length?null:1===r.length?r[0]:`(${r.reduce((e,t)=>e+" and "+t)})`;const l=this.state;l.drilledCell&&delete l.drilledCell.drilledIndex,e.drilledIndex=t,l.drilledCell=e,this.drilldown(s)}drilldown(t){if(this.disableDrilldown)return;const n=this.state,i=ic.stringify(n.filterExp,this.arguments,n.parameterInfos),c=i&&t?`${i} and ${t}`:t?ji(t):i?ji(i):null,o={};c&&(o.filter=c);const r=this.workspace.ws.tenantId,s=this.definition;if(s.IsCustomDrilldown&&s.Id&&s.Select&&s.Select.length>0){const t=this.definition.Id;o.cache_buster=e.CACHE_BUSTER++,this.router.navigate(["app",r+"","drilldown",t+"",o])}else if(this.entityDescriptor.masterScreenUrl){const e=this.entityDescriptor.masterScreenUrl.split("/");o.inactive=!0,this.router.navigate(["app",r+"",...e,o])}else console.error(`No screen URL is defined for collection: '${s.Collection}', definitionId '${s.DefinitionId}'`)}isDefined(e){return Object(V.n)(e.valueId)}get addRowExpanders(){const e=this.state.rowInfos;return e.length>1||e.length>0&&e[0].showAsTree}displayValue(e,t,n){if(Array.isArray(e)){if(n)return n.formatFromVals(e);{const n=this.workspace.currentTenant.localize(e[0],e[1],e[2]);return Object(me.c)(n,t,this.workspace,this.translate)}}return Object(me.c)(e,t,this.workspace,this.translate)}sortValue(e,t,n){return Array.isArray(e)?n?n.formatFromVals(e):this.workspace.currentTenant.localize(e[0],e[1],e[2]):e}descAlignment(e){if(e.isRightAligned)return"right"}hasColor(e){return!!e.color}stateColor(e,t){if(t.color)return t.color(e)}get point(){const e=this.pivot,t=this.state;if(t.currentPivotForPoint!==e){t.currentPivotForPoint=e;const n=t.singleNumericMeasureIndex,i=t.measureInfos[n];if(!i||!e.rowsGrandTotalMeasures||e.rowsGrandTotalMeasures.length<1)t.point=null;else if(0===t.dimensionInfos.length){const c=e.rowsGrandTotalMeasures[0],o=c.values[n]||0;t.point=Object(me.c)(o,i.desc,this.workspace,this.translate),t.pointClass=c.classes[n]}else t.point=null,t.pointClass=null;delete t.singleCellsHash,delete t.singleCellsUndefined}return t.point}get pointClass(){return this.state.pointClass}incrementDate(e,t){const n=t.info.keyDesc;if("date"===n.datatype){if(n.granularity===Di.a.days)e.setDate(e.getDate()+1);else{const t=n.calendar||"GC",i=Object(Bi.g)(e,t);switch(1!==i.day&&console.error("Bug: incrementDate called on",i),n.granularity){case Di.a.years:i.year++;break;case Di.a.months:i.month++,i.month>Object(Bi.f)(t)&&(i.month=1,i.year++)}e.setTime(Object(Bi.c)(i,t).getTime())}return Object(yi.d)(e)}}minDate(e,t){let n,i;const c=e.info;if("date"===c.keyDesc.datatype&&c.isOrdered&&"asc"===c.orderDir){let c=e;i=c.valueId,!i&&t&&(c=t,i=c.valueId),i&&(n=Object(yi.a)(i))}return{minDate:n,minString:i}}get single(){const e=this.pivot,t=this.state;if(t.currentPivotForSingle!==e||t.currentLangForSingle!==this.translate.currentLang||t.currentCalendarForSingle!==this.workspace.calendar){t.currentPivotForSingle=e,t.currentLangForSingle=this.translate.currentLang,t.currentCalendarForSingle=this.workspace.calendar;const i=t.singleNumericMeasureIndex;if(t.measureInfos[i]&&e)if(1===t.dimensionInfos.length)try{const n=t.rowInfos.length>0?e.rows.map(e=>e.measures[0]):e.rowsGrandTotalMeasures,c=n[0].row||n[0].column,o=n[1]?n[1].row||n[1].column:void 0,{minDate:r,minString:s}=this.minDate(c,o),l=r?new Date(r.getTime()):null;let a=s,u=0;const d=[];let b=0;for(const e of n){const t=e.row||e.column;if(!t||t.isAncestor)continue;for(;a&&a<t.valueId;)d.push({name:this.chartDimensionCellFromDimensionCell(t.info,a,a,void 0,b++),value:0}),a=this.incrementDate(l,t);const n=this.colorFromClass(e.classes[i]),c=e.values[i]||0;u+=c,d.push({name:this.chartDimensionCellFromDimensionCell(t.info,t.value,t.valueId,n,b++),value:c}),a&&t.valueId&&(a=this.incrementDate(l,t))}t.single=d,e.rowsGrandTotalMeasures&&e.rowsGrandTotalMeasures.length>0&&(t.totalEqualsSum=Math.abs(Math.round(1e6*(e.rowsGrandTotalMeasures[e.rowsGrandTotalMeasures.length-1].values[i]||0))-Math.round(1e6*u))<2),delete t.singleCellsHash,delete t.singleCellsUndefined}catch(n){t.reportStatus=L.i.error,t.errorMessage=n.message}else t.single=null;else t.single=null}return t.single}colorFromClass(e){let t;switch(e){case"t-success":t="#28a745";break;case"t-warning":t="#ffc107";break;case"t-danger":t="#dc3545"}return t}get multi(){const e=this.pivot,t=this.state;if(t.currentPivotForMulti!==e||t.currentLangForMulti!==this.translate.currentLang||t.currentCalendarForMulti!==this.workspace.calendar){t.currentPivotForMulti=e,t.currentLangForMulti=this.translate.currentLang,t.currentCalendarForMulti=this.workspace.calendar;const n=t.singleNumericMeasureIndex,i=t.measureInfos[n];if(i&&e)if(1===t.dimensionInfos.length){const e=this.single,n=i.label(),c=new L.a(n,n,null,1);t.multi=[{name:c,series:e}]}else if(2===t.dimensionInfos.length){const i=t.dimensionInfos[0],c=t.dimensionInfos[1],o=[];if(2===t.rowInfos.length||2===t.columnInfos.length){let r,s,l,a;2===t.rowInfos.length?(s=e.rows,r=e=>e.measures[0]):(s=e.columns,r=t=>e.rowsGrandTotalMeasures[t.index]);let u,d=0;for(const e of s)if(!e.isAncestor&&(e.info===i&&(l=this.chartDimensionCellFromDimensionCell(e.info,e.value,e.valueId,void 0,d++),a=[],u=0,o.push({name:l,series:a})),e.info===c)){const t=r(e),i=this.colorFromClass(t.classes[n]),c=this.chartDimensionCellFromDimensionCell(e.info,e.value,e.valueId,i,u++,l);a.push({name:c,value:t.values[n]||0})}}else{const t=e.rows[0],i=e.rows[1],{minDate:c,minString:r}=this.minDate(t,i);let s=0;for(const l of e.columns){if(l.isAncestor)continue;const t=this.chartDimensionCellFromDimensionCell(l.info,l.value,l.valueId,void 0,s++),i=[];o.push({name:t,series:i});let a=0;const u=c?new Date(c.getTime()):null;let d=r;for(const c of e.rows){if(c.isAncestor)continue;for(;d&&c.valueId>d;)i.push({name:this.chartDimensionCellFromDimensionCell(c.info,d,d,void 0,a++),value:0}),d=this.incrementDate(u,c);const e=c.measures[l.index],o=this.colorFromClass(e.classes[n]),r=this.chartDimensionCellFromDimensionCell(c.info,c.value,c.valueId,o,a++,t);i.push({name:r,value:e.values[n]||0}),d&&(d=this.incrementDate(u,c))}}}t.multi=o}else t.multi=null;else t.multi=null;delete t.singleCellsHash,delete t.singleCellsUndefined}return t.multi}formatChartDimension(e){return e.display}formatAlternativeChartDimension(e){return e.data.name.display}get firstDimensionLabel(){const e=this.state.dimensionInfos[0];return e?e.label():""}get secondDimensionLabel(){const e=this.state.dimensionInfos[1];return e?e.label():""}get measureLabel(){const e=this.state,t=e.measureInfos[e.singleNumericMeasureIndex];return t?t.label():""}onChartSelect(e){if(e){const t=this.computeFilterAtoms(e),n=t.length?t.reduce((e,t)=>e+" and "+t):null;this.drilldown(n)}}onPointSelect(){this.drilldown(null)}get numberOfDimensions(){return this.state.dimensionInfos.length}get supportsPoint(){return 0===this.numberOfDimensions}get supportsSingle(){return 1===this.numberOfDimensions}get supportsMulti(){return 2===this.numberOfDimensions}get selectInfos(){return this.state.selectInfos}get flat(){if(!this.showResults)return[];const e=this.state,t=e.result;return e.currentResultForFlat!==t&&(e.currentResultForFlat=t,e.flat=this.flatInner(t,e)),e.flat}flatInner(e,t){const n=[];if(!e)return[];for(const i of e){const e=[];for(const n of t.selectInfos)e.push(n.entityDesc||n.indices.length>1?n.indices.map(e=>i[e]):i[n.indices[0]]);n.push(e)}return n}isRightAligned(e){switch(e.control){case"number":case"percent":return e.isRightAligned;default:return!1}}onFlatSelect(e){const t=this.state,n=t.result[e],i=this.entityDescriptor;if(i.navigateToDetailsFromVals){const e=t.navigateToDetailsIndices.map(e=>n[e]);i.navigateToDetailsFromVals(e,this.router)}else if(i.masterScreenUrl)if(t.idIndex>-1){const e=n[t.idIndex],c=["app",this.workspace.ws.tenantId+"",...i.masterScreenUrl.split("/")];t.defIdIndex>-1&&c.push(n[t.defIdIndex]),c.push(e),this.router.navigate(c)}else{const e=this.definition;console.error(`no screen URL is defined for collection: '${e.Collection}', definitionId '${e.DefinitionId}'`)}}get canOrderByFlat(){return!this.definition.Top}onOrderByFlat(e){if(!this.canOrderByFlat)return;if(0===e.exp.columnAccesses().length)return;const t=this.state;t.skip=0;const n=e.exp.toString();t.orderbyKey===n?"asc"===t.orderbyDir?t.orderbyDir="desc":(delete t.orderbyKey,delete t.orderbyDir):(t.orderbyKey=n,t.orderbyDir="asc"),this.orderbyChange.emit(),this.rememberFlatColumnWidths(),this.fetch()}orderDirection(e){if(this.isOrdered(e))return this.state.orderbyDir}isOrdered(e){if(e){const t=this.state;if(e.expToString===t.orderbyKey)return!!t.orderbyDir}}get isDescending(){return"desc"===this.state.orderbyDir}rememberFlatColumnWidths(){if(!this.flatHeader)return;const e=this.flatHeader.nativeElement;if(!e)return;const t=this.selectInfos;for(let n=1;n<e.cells.length-1;n++){const i=t[n-1];i&&(i.width=e.cells[n].offsetWidth+"px")}}forgetFlatColumnWidths(){this.state.selectInfos.forEach(e=>delete e.width)}}return e.DEFAULT_PAGE_SIZE=60,e.CACHE_BUSTER=1,e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d),c.Mb(W.a),c.Mb(c.h),c.Mb(i.e),c.Mb(i.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-report-results"]],viewQuery:function(e,t){if(1&e&&c.Qc(rc,1),2&e){let e;c.zc(e=c.dc())&&(t.flatHeader=e.first)}},inputs:{state:"state",definition:"definition",arguments:"arguments",view:"view",refresh:"refresh",export:"export",mode:"mode",disableDrilldown:"disableDrilldown"},outputs:{silentRefreshError:"silentRefreshError",exportStarting:"exportStarting",exportSuccess:"exportSuccess",exportError:"exportError",orderbyChange:"orderbyChange"},features:[c.xb],decls:8,vars:2,consts:[["autocell",""],["undefinedLabel",""],[4,"ngIf"],["nonresult",""],[3,"ngSwitch",4,"ngIf","ngIfElse"],[3,"ngSwitch"],["class","d-inline text-nowrap",4,"ngSwitchCase"],["class","d-inline",3,"float",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"d-inline","text-nowrap"],["class","text-white px-2 font-weight-normal",3,"background-color",4,"ngIf","ngIfElse"],["nocolor",""],[1,"text-white","px-2","font-weight-normal"],[1,"d-inline"],[1,"font-italic","text-muted"],[1,"w-100","h-100","table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-hover","table-striped","table-sm","bg-white","border-bottom","t-master-table","text-nowrap"],["class","t-pointer",3,"t-highlight",4,"cdkVirtualFor","cdkVirtualForOf"],[4,"ngTemplateOutlet"],["flatHeader",""],[2,"width","15px"],[3,"width","text-right","dropdown-toggle","click",4,"ngFor","ngForOf"],[3,"click"],[1,"t-pointer"],[3,"width","click",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["dimattribtues",""],["class","h-100 w-100","style","position: relative;",4,"ngIf"],["class","w-100 p-3 px-4",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-weight-bold","p-1"],[1,"p-1","align-middle","text-truncate"],["class","h-100","itemSize","32",4,"ngIf","ngIfElse"],["toomanycolumnserror",""],["itemSize","32",1,"h-100"],[1,"table","table-hover","table-bordered","border","table-sm","bg-white","t-report-table","text-nowrap"],["class","t-report-row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["class","t-report-row",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","font-weight-bold t-report-dimension align-middle",3,"rowSpan","colSpan",4,"ngIf"],[1,"t-report-dimension",3,"colSpan","rowSpan"],["class","t-report-dimension",3,"rowSpan",4,"ngFor","ngForOf"],[1,"t-report-dimension",3,"rowSpan"],["class","t-report-dimension","container","body","placement","bottom-left","triggers","click",3,"rowSpan","colSpan","ngbPopover","disablePopover",4,"ngIf"],["attributes",""],["container","body","placement","bottom-left","triggers","click",1,"t-report-dimension",3,"rowSpan","colSpan","ngbPopover","disablePopover"],[1,"border-0","px-2","h-100","font-weight-normal",2,"background-color","transparent",3,"click"],["icon","angle-right",3,"flip","rotate"],[1,"font-weight-bold","t-report-dimension","align-middle",3,"rowSpan","colSpan"],["class","t-report-dimension",4,"ngFor","ngForOf"],[1,"t-report-dimension"],["class","t-report-dimension",3,"font-weight-bold",4,"ngFor","ngForOf","ngForTrackBy"],["class","t-report-dimension",3,"font-weight-bold",4,"ngFor","ngForOf"],[1,"t-report-row"],["container","body","triggers","mouseenter:mouseleave",1,"t-report-dimension",3,"ngbPopover","placement","disablePopover"],["class","border-0 px-2 h-100 font-weight-normal","style","background-color: transparent",3,"margin-left","margin-right","opacity","disabled","click",4,"ngIf"],[1,"border-0","px-2","h-100","font-weight-normal",2,"background-color","transparent",3,"disabled","click"],["class","t-report-attribute",4,"ngFor","ngForOf"],[1,"t-report-attribute"],[3,"class","t-disable-drilldown","font-weight-bold","t-highlight","click",4,"ngFor","ngForOf"],["class","t-report-measure",3,"click",4,"ngIf"],[1,"t-report-measure",3,"click"],["class","font-weight-bold t-report-dimension align-middle",4,"ngIf"],[1,"font-weight-bold","t-report-dimension","align-middle"],["class","border-0 px-2 h-100 font-weight-normal","style","background-color: transparent","style","opacity: 0","disabled","",4,"ngIf"],["disabled","",1,"border-0","px-2","h-100","font-weight-normal",2,"opacity","0"],["icon","angle-right"],[1,"w-100","pt-3"],[1,"h-100","w-100",2,"position","relative"],[2,"position","absolute","left","0","right","0","top","0","bottom","0",3,"ngSwitch"],[4,"ngSwitchCase"],["notsupported",""],["tooltip",""],["seriesTooltip",""],["heatmapTooltip",""],["class","h-100 d-flex justify-content-center align-items-center py-4",4,"ngIf","ngIfElse"],[1,"h-100","d-flex","justify-content-center","align-items-center","py-4"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["tooltipTemplate",""],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","labelFormatting","labels","trimLabels","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","labels","trimLabels","select"],["class","t-ltr",3,"animations","scheme","customColors","results","doughnut","labelFormatting","labels","trimLabels","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","doughnut","labelFormatting","labels","trimLabels","select"],["class","t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select"],["class","t-ltr","cardColor","#EAF0F5","textColor","black",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select",4,"ngIf","ngIfElse"],["cardColor","#EAF0F5","textColor","black",1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","max","showText","valueFormatting","axisTickFormatting","legend","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","max","showText","valueFormatting","axisTickFormatting","legend","select"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","results","xAxis","yAxis","showXAxisLabel","legend","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","results","xAxis","yAxis","showXAxisLabel","legend","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["seriesTooltipTemplate",""],["class","t-ltr",3,"animations","scheme","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"text-white","p-1"],[2,"font-size","130%"],[1,"area-tooltip-container"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[1,"tooltip-item-color"],["class","w-100 pt-3 d-flex justify-content-center",4,"ngIf"],["class","w-100 px-3 pt-3",4,"ngIf"],["class","w-100 pt-3",4,"ngIf"],["class","w-100 px-4 pt-3",4,"ngIf"],[1,"w-100","pt-3","d-flex","justify-content-center"],[3,"scale"],[1,"w-100","px-3","pt-3"],[1,"w-100","px-4","pt-3"]],template:function(e,t){1&e&&(c.Jc(0,fc,1,2,"ng-template",null,0,c.Kc),c.Jc(2,mc,3,3,"ng-template",null,1,c.Kc),c.Jc(4,yc,8,3,"ng-container",2),c.Jc(5,Wr,3,2,"ng-container",2),c.Jc(6,es,4,4,"ng-template",null,3,c.Kc)),2&e&&(c.zb(4),c.nc("ngIf",t.isDetails),c.zb(1),c.nc("ngIf",t.isSummary))},directives:[C.l,C.m,C.n,C.o,cc.d,cc.a,cc.c,C.p,C.k,G.C,ee.a,Se.a,oc.g,oc.c,oc.o,oc.p,oc.n,oc.j,oc.f,oc.i,oc.h,oc.b,oc.e,oc.d,oc.l,oc.a,oc.k,fe.a],pipes:[K.c],encapsulation:2,changeDetection:0}),e})();const cs=function(e,t){return[e,t]};function os(e,t){if(1&e&&(c.Sb(0,"a",1),c.lc(1),c.Rb()),2&e){const e=c.gc();c.nc("routerLink",c.sc(1,cs,e.link,e.itemId))}}const rs=["*"];let ss=(()=>{class e{constructor(){this.w100=!0}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-view-link"]],hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("w-100",t.w100)},inputs:{link:"link",itemId:"itemId"},ngContentSelectors:rs,decls:1,vars:1,consts:[["class","t-view-link",3,"routerLink",4,"ngIf"],[1,"t-view-link",3,"routerLink"]],template:function(e,t){1&e&&(c.mc(),c.Jc(0,os,2,4,"a",0)),2&e&&c.nc("ngIf",t.itemId)},directives:[C.l,i.g],encapsulation:2}),e})();var ls=n("xgIS"),as=n("XqQ8"),us=n("lJxs"),ds=n("Kj3r");const bs=["input"],gs=["detailsWrapperTemplate"],fs=["masterWrapperTemplate"],ms=["detailsOptionsTemplate"],hs=["masterOptionsTemplate"];function ps(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",16),c.cc("click",function(){return c.Dc(e),c.gc().onEditFromFocus()}),c.hc(1,"translate"),c.Nb(2,"fa-icon",17),c.Rb()}if(2&e){const e=c.gc();c.Eb("btn-light",!e.isDark)("text-primary",!e.isDark)("btn-secondary",e.isDark)("t-text-whitish",e.isDark),c.oc("title",c.ic(1,10,"Edit")),c.nc("disabled",e.disableEditSelected)}}function Ss(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",18),c.cc("click",function(){return c.Dc(e),c.gc().openSearchModal()}),c.hc(1,"translate"),c.Nb(2,"fa-icon",19),c.Rb()}if(2&e){const e=c.gc();c.Eb("btn-light",!e.isDark)("text-primary",!e.isDark)("btn-secondary",e.isDark)("t-text-whitish",e.isDark),c.oc("title",c.ic(1,9,"Search"))}}function vs(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",21),c.cc("mouseenter",function(){c.Dc(e);const n=t.index;return c.gc(2).onMouseEnter(n)})("focus",function(){c.Dc(e);const n=t.$implicit;return c.gc(2).onFocus(n)}),c.Lc(1),c.Rb()}if(2&e){const e=t.$implicit,n=t.index,i=c.gc(2);c.Eb("active",n===i.highlightedIndex),c.zb(1),c.Nc(" ",i.formatterInner(e)," ")}}function Is(e,t){if(1&e&&(c.Qb(0),c.Jc(1,vs,2,3,"button",20),c.Pb()),2&e){const e=c.gc();c.zb(1),c.nc("ngForOf",e.searchResults)}}function Ms(e,t){1&e&&c.Nb(0,"t-spinner")}function Rs(e,t){if(1&e&&(c.Sb(0,"t-error-message"),c.Lc(1),c.Rb()),2&e){const e=c.gc();c.zb(1),c.Nc(" ",e.errorMessage,"")}}function ys(e,t){1&e&&(c.Sb(0,"span",22),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"NoItemsFound")))}function Ds(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Nb(1,"hr"),c.Sb(2,"div",23),c.Sb(3,"button",24),c.cc("click",function(){return c.Dc(e),c.gc().onCreateFromFocus()}),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Pb()}if(2&e){const e=c.gc();c.zb(2),c.nc("placement",e.placement)("ngbTooltip",e.createNewTooltip),c.zb(1),c.Eb("text-primary",e.canCreateNew&&!e.isDark)("t-text-whitish",e.canCreateNew&&e.isDark)("text-muted",!e.canCreateNew)("active",e.highlightCreateNew),c.nc("disabled",!e.canCreateNew),c.zb(1),c.Nc(" ",c.ic(5,12,"Create"),"... ")}}function ws(e,t){1&e&&c.Ob(0)}const Es=function(e,t,n,i,c){return{update:e,modal:t,initialText:n,idString:i,definitionId:c}};function Cs(e,t){if(1&e&&c.Jc(0,ws,1,0,"ng-container",25),2&e){const e=t.$implicit,n=c.gc();c.nc("ngTemplateOutlet",n.detailsTemplate)("ngTemplateOutletContext",c.vc(2,Es,n.onUpdate,e,n.initialText,n.idString,n.definitionId))}}function xs(e,t){1&e&&c.Ob(0)}const Ts=function(e,t,n,i,c){return{create:e,update:t,modal:n,filter:i,definitionId:c}};function zs(e,t){if(1&e&&c.Jc(0,xs,1,0,"ng-container",25),2&e){const e=t.$implicit,n=c.gc();c.nc("ngTemplateOutlet",n.masterTemplate)("ngTemplateOutletContext",c.vc(2,Ts,n.onCreateFromMasterModal,n.onUpdate,e,n.filter,n.definitionId))}}function Ls(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",36),c.Sb(1,"button",37),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc().$implicit.close(n)}),c.Lc(2),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2);c.nc("placement",n.placement)("ngbTooltip",n.createFromOptionsTooltip(e)),c.zb(1),c.nc("disabled",!n.canCreateFromOptions(e)),c.zb(1),c.Nc(" ",n.createOptionName(e)," ")}}function ks(e,t){if(1&e&&(c.Sb(0,"div",26),c.Sb(1,"h5",27),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",28),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",29),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",30),c.Sb(8,"div",31),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Jc(11,Ls,3,4,"div",32),c.Rb(),c.Sb(12,"div",33),c.Sb(13,"button",34),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(14,"fa-icon",35),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,4,"CreateOptions")," "),c.zb(7),c.Nc(" ",c.ic(10,6,"CreateOptionsMessage")," "),c.zb(2),c.nc("ngForOf",e.createOptions),c.zb(4),c.Nc(" \xa0",c.ic(16,8,"Cancel")," ")}}function Os(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",36),c.Sb(1,"button",38),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc().$implicit.close(n)}),c.Lc(2),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2);c.nc("placement",n.placement)("ngbTooltip",n.createFromOptionsTooltip(e)),c.zb(2),c.Nc(" ",n.searchOptionName(e)," ")}}function As(e,t){if(1&e&&(c.Sb(0,"div",26),c.Sb(1,"h5",27),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",28),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",29),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",30),c.Sb(8,"div",31),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Jc(11,Os,3,3,"div",32),c.Rb(),c.Sb(12,"div",33),c.Sb(13,"button",34),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(14,"fa-icon",35),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,4,"SearchOptions")," "),c.zb(7),c.Nc(" ",c.ic(10,6,"SearchOptionsMessage")," "),c.zb(2),c.nc("ngForOf",e.searchOptions),c.zb(4),c.Nc(" \xa0",c.ic(16,8,"Cancel")," ")}}var Ns=function(e){return e.showSpinner="showSpinner",e.showResults="showResults",e.showError="showError",e}({});let _s=(()=>{class e{constructor(e,t,n,i){this.apiService=e,this.workspace=t,this.modalService=n,this.translate=i,this.additionalSelect=null,this.ensureAdditionalSelect=!1,this.includeInactive=!1,this.theme="light",this.definitionIds=[],this.entityLoaded=new c.n,this.w100=!0,this.MIN_CHARS_TO_SEARCH=1,this.SEARCH_PAGE_SIZE=15,this.cancelRunningCall$=new E.a,this.notifyFetchUnloadedItem$=new E.a,this._status=null,this._isDisabled=!1,this._searchResults=[],this._highlightedIndex=0,this._idString="new",this.api=this.apiService.crudFactory("",null),this.formatter=e=>this.descriptor.format(e),this.focus=()=>{this.input.nativeElement.focus()},this.onChange=e=>{},this.onTouched=()=>{},this.formatterInner=e=>{const t=this.workspace.current.get(this.collection,e);return e&&(!t||this.ensureAdditionalSelect&&this.additionalSelectKey&&!t.EntityMetadata[this.additionalSelectKey])?(this.fetchUnloadedItem(e),""):this.formatter(t)},this.hasCreatePermissions=e=>{const t=this.apiEndpoint(e);return this.workspace.current.canCreate(t)},this.hasReadPermissions=e=>{const t=this.apiEndpoint(e);return this.workspace.current.canRead(t)},this.onUpdate=e=>{this.chooseItem(e)},this.onCreateFromKeyDown=()=>{this.canCreateNew&&(this.status=null,this.onTouched(),this.openCreateModal())},this.onCreateFromMasterModal=()=>{this.canCreateNew&&(this.onTouched(),this.openCreateModal(this.definitionId))},this.onCreateFromFocus=()=>{this.canCreateNew&&this.openCreateModal()},this.onEditFromFocus=()=>{this.canEdit&&this.openEditModalInner()},this.openSearchModal=()=>{if((this.searchOptions.length||this.allDefinitionIds.length)>1){const e=this.isDark?"t-dark-theme":null;setTimeout(()=>{this.modalService.open(this.masterOptionsTemplate,{windowClass:e}).result.then(e=>{this.openSearchModalInner(e)},e=>{})},0)}else this.openSearchModalInner(this.searchOptions[0]||this.allDefinitionIds[0])},this.openCreateModal=e=>{if(e&&this.createOptions.some(t=>t===e))this.openCreateModalInner(e);else if(this.createOptions.length>1){const e=this.isDark?"t-dark-theme":null;setTimeout(()=>{this.modalService.open(this.detailsOptionsTemplate,{windowClass:e}).result.then(e=>{this.canCreateFromOptions(e)&&this.openCreateModalInner(e)},e=>{})},0)}else this.openCreateModalInner(this.createOptions[0])},this.openCreateModalInner=e=>{this._definitionId=e,this._idString="new",setTimeout(()=>{this.modalService.open(this.detailsWrapperTemplate,{windowClass:this.detailsModalWindowClass}).result.then(this.onFocusInput,this.onFocusInput)},0)},this.openEditModalInner=()=>{this.collection&&this.workspace.current[this.collection]&&this.workspace.current[this.collection][this.chosenItem]&&(this._idString=this.chosenItem.toString(),this._definitionId=this.chosenItemDefinitionId,this._idString&&this.modalService.open(this.detailsWrapperTemplate,{windowClass:this.detailsModalWindowClass}).result.then(this.onFocusInput,this.onFocusInput))},this.onFocusInput=()=>{this.input.nativeElement.focus()},this.canUpdatePermissions=e=>{const t=this.apiEndpoint(e);return this.workspace.current.canUpdate(t,null)},this.canCreateFromOptions=e=>this.hasCreatePermissions(e),this.createFromOptionsTooltip=e=>this.hasCreatePermissions(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}get additionalSelectKey(){return this.additionalSelect?`__${this.additionalSelect}`:null}get descriptor(){return Mi.h[this.collection](this.workspace,this.translate,this.definitionIdsSingleOrDefault)}get chosenItemDefinitionId(){const e=this.entityDescriptor().definitionIds,t=this.workspace.current[this.collection][this.chosenItem];return e&&t?t.DefinitionId:null}ngOnInit(){const e=this.apiEndpoint(this.definitionIdsSingleOrDefault);this.api=this.apiService.crudFactory(e,this.cancelRunningCall$),this.subscriptions=new O.a,this.subscriptions.add(this.notifyFetchUnloadedItem$.pipe(Object(as.a)(e=>this.doFetchUnloadedItem(e))).subscribe()),this.subscriptions.add(Object(ls.a)(this.input.nativeElement,"input").pipe(Object(us.a)(e=>e.target.value),Object(J.a)(e=>{this._initialText=e,this._searchResults=[],this.status=null,this.cancelRunningCall$.next(),e||this.chooseItem(null)}),Object(ds.a)(20),Object(N.a)(e=>{if(!e||e.length<this.MIN_CHARS_TO_SEARCH)return Object(A.a)(null);{this.status=Ns.showSpinner;const t={expand:this.expand,select:Object(V.e)(this.entityDescriptor(),this.additionalSelect),search:e,top:this.SEARCH_PAGE_SIZE,skip:0,filter:this.queryFilter};return this.api.getEntities(t).pipe(Object(J.a)(()=>this.status=Ns.showResults),Object(F.a)(e=>(this._errorMessage=e.error,this.status=Ns.showError,Object(A.a)(null))))}})).subscribe(e=>{if(e){const t=this.additionalSelectKey;if(t)for(const n of e.Result)n.EntityMetadata[t]=2;this._searchResults=Object(V.c)(e,this.workspace)}this._highlightedIndex=0})),this.subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.updateUI(this.chosenItem)}))}identical(e,t){return!e&&!t||!!e&&!!t&&e.length===t.length&&e.every((e,n)=>e===t[n])}ngOnChanges(e){(e.collection&&!e.collection.isFirstChange()||e.definitionIds&&!e.definitionIds.isFirstChange()&&!this.identical(e.definitionIds.currentValue,e.definitionIds.previousValue))&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}entityDescriptor(e){const t=this.collection;return t?Mi.h[t](this.workspace,this.translate,e):null}apiEndpoint(e){const t=this.entityDescriptor(e);return t?t.apiEndpoint:null}fetchUnloadedItem(e){this.notifyFetchUnloadedItem$.next(e)}doFetchUnloadedItem(e){let t;const n=this.descriptor.properties.Id;t=n&&"text"===n.control?`Id eq '${e}'`:`Id eq ${e}`;const i={filter:t,expand:this.expand,select:Object(V.e)(this.entityDescriptor(),this.additionalSelect)};return this.api.getEntities(i).pipe(Object(J.a)(t=>{const n=this.additionalSelectKey,i=t.Result[0];i?(n&&(i.EntityMetadata[n]=2),Object(V.c)(t,this.workspace),this.chosenItem===e&&this.updateUI(e),this.entityLoaded.emit()):this.chooseItem(null)}),Object(F.a)(e=>(this.chooseItem(null),Object(A.a)(null))))}get status(){return this._status}set status(e){!this._status&&e&&this.resultsDropdown.open(),this._status&&!e&&this.resultsDropdown.close(),this._status=e}onDocumentClick(e){e.target!==this.input.nativeElement&&(this.status=null)}chooseItem(e){this.chosenItem!==(e=e||void 0)&&(this.chosenItem=e,this.onChange(e)),this.updateUI(e),this.cancelRunningCall$.next(null),this.status=null}updateUI(e){const t=e?this.formatterInner(e):"";this.input.nativeElement.value=t}get isDefinitioned(){return!!this.entityDescriptor().definitionIds}get allDefinitionIds(){return this.isDefinitioned?this.definitionIds&&0!==this.definitionIds.filter(e=>!!e).length?this.definitionIds.filter(e=>!!e):this.entityDescriptor().definitionIds||[]:[]}get definitionIdsSingleOrDefault(){const e=this.allDefinitionIds;return e&&1===e.length?e[0]:null}get createDefinitionIds(){return this.allDefinitionIds.filter(e=>{const t=this.entityDescriptor(e);return!!t&&!t.isArchived})}get createDefinitionIdsSingleOrDefault(){const e=this.createDefinitionIds;return e&&1===e.length?e[0]:null}writeValue(e){e=e||void 0,this.cancelRunningCall$.next(null),this.chosenItem=e,this.updateUI(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e&&this.cancelRunningCall$.next(),this._isDisabled=e}inactiveFilter(e){return this.entityDescriptor(e).inactiveFilter}get querySelect(){return Object(V.e)(this.entityDescriptor(),this.additionalSelect)}get queryFilter(){let e=this.filter;if(!this.includeInactive){const t=this.inactiveFilter();t&&(e=e?`(${t}) and (${e})`:t)}if(this.isDefinitioned&&!this.definitionIdsSingleOrDefault&&this.definitionIds&&this.definitionIds.filter(e=>!!e).length>0){const t=this.definitionIds.filter(e=>!!e).map(e=>`DefinitionId eq ${e}`).reduce((e,t)=>`${e} or ${t}`);e=e?`(${t}) and (${e})`:t}return e}get searchResults(){return this._searchResults}get highlightedIndex(){return this._highlightedIndex}get isDisabled(){return this._isDisabled}get errorMessage(){return this._errorMessage}get showSpinner(){return this.status===Ns.showSpinner}get showError(){return this.status===Ns.showError}get showNoItemsFound(){return this.status===Ns.showResults&&!!this._searchResults&&0===this._searchResults.length}get showResults(){return this.status===Ns.showResults&&!!this._searchResults&&this._searchResults.length>0}get placement(){return this.workspace.ws.isRtl?["bottom-right","bottom-left","bottom"]:["bottom-left","bottom-right","bottom"]}onMouseEnter(e){this._highlightedIndex=e}onBlur(){this.cancelRunningCall$.next(),this.onTouched(),this.updateUI(this.chosenItem)}onKeyDown(e){if(!this.status)return;const t=e.key;if(V.a[t]){let n=0;this.showCreateNew&&this.canCreateNew&&(n+=1);const i=this._searchResults.length-1+n;switch(t){case V.a.ArrowDown:e.preventDefault(),this._searchResults&&(this._highlightedIndex<i?this._highlightedIndex++:this._highlightedIndex=0);break;case V.a.ArrowUp:e.preventDefault(),this._searchResults&&(this._highlightedIndex<=0?this._highlightedIndex=i:this._highlightedIndex--);break;case V.a.Enter:case V.a.Tab:if(this._highlightedIndex===this.indexCreateNew&&this.showCreateNew)this.onCreateFromKeyDown();else{const t=this._searchResults[this._highlightedIndex];t&&(e.preventDefault(),e.stopPropagation()),this.chooseItem(t)}break;case V.a.Escape:e.preventDefault(),this.cancelRunningCall$.next(null),this.status=null}}}onFocus(e){this.chooseItem(e)}get indexCreateNew(){return this.searchResults?this.searchResults.length:0}get showCreateNew(){return!!this.detailsTemplate&&(this.showNoItemsFound||this.showResults)&&(!this.isDefinitioned||this.createOptions.length>0)}get highlightCreateNew(){return this.indexCreateNew===this.highlightedIndex&&this.canCreateNew}get canCreateNewInner(){if(this.isDefinitioned){const e=this.createDefinitionIdsSingleOrDefault;return!e||this.hasCreatePermissions(e)}return this.hasCreatePermissions(null)}get canCreateNew(){return this.canCreateNewInner}get createNewTooltip(){return this.canCreateNewInner?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}get hasEditPermissions(){return this.canUpdatePermissions(this.chosenItemDefinitionId)}get canEdit(){return this.hasEditPermissions}get showMagnifier(){return!!this.masterTemplate}get showEditSelected(){return!!this.detailsTemplate&&!!this.chosenItem}get disableEditSelected(){return!this.canUpdatePermissions(this.chosenItemDefinitionId)}get searchOptions(){return this.allDefinitionIds.filter(e=>this.hasReadPermissions(e))}openSearchModalInner(e){this._initialText="",this._definitionId=e,this.modalService.open(this.masterWrapperTemplate,{windowClass:this.masterModalWindowClass}).result.then(this.onFocusInput,this.onFocusInput)}searchOptionName(e){return this.entityDescriptor(e).titlePlural()}get createOptions(){return this.createDefinitionIds||[]}get detailsModalWindowClass(){let e="t-details-modal";return this.isDark&&(e+=" t-dark-theme"),e}get masterModalWindowClass(){let e="t-master-modal";return this.isDark&&(e+=" t-dark-theme"),e}get initialText(){return this._initialText}get definitionId(){return this._definitionId}createOptionName(e){return this.entityDescriptor(e).titleSingular()}get idString(){return this._idString}get editSelectedLeftMargin(){return this.workspace.ws.isRtl?null:"-24px"}get editSelectedRightMargin(){return this.workspace.ws.isRtl?"-24px":null}get inputLeftPadding(){return this.showEditSelected&&this.workspace.ws.isRtl?"24px!important":null}get inputRightPadding(){return this.showEditSelected?this.workspace.ws.isRtl?null:"24px!important":null}get isDark(){return"dark"===this.theme}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(W.a),c.Mb(L.m),c.Mb(G.t),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-details-picker"]],viewQuery:function(e,t){if(1&e&&(c.Qc(bs,3),c.Qc(G.l,3),c.Qc(gs,3),c.Qc(fs,3),c.Qc(ms,3),c.Qc(hs,3)),2&e){let e;c.zc(e=c.dc())&&(t.input=e.first),c.zc(e=c.dc())&&(t.resultsDropdown=e.first),c.zc(e=c.dc())&&(t.detailsWrapperTemplate=e.first),c.zc(e=c.dc())&&(t.masterWrapperTemplate=e.first),c.zc(e=c.dc())&&(t.detailsOptionsTemplate=e.first),c.zc(e=c.dc())&&(t.masterOptionsTemplate=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("w-100",t.w100)},inputs:{expand:"expand",additionalSelect:"additionalSelect",ensureAdditionalSelect:"ensureAdditionalSelect",selectTemplate:"selectTemplate",includeInactive:"includeInactive",filter:"filter",theme:"theme",collection:"collection",definitionIds:"definitionIds",masterTemplate:"masterTemplate",detailsTemplate:"detailsTemplate",formatter:"formatter"},outputs:{entityLoaded:"entityLoaded"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.xb],decls:24,vars:19,consts:[["ngbDropdown","",3,"placement"],["dropdown","ngbDropdown"],[1,"input-group"],["ngbDropdownAnchor","","autocomplete","off",1,"form-control",3,"disabled","blur","keydown"],["input",""],["class","btn btn-sm t-white-button p-0 px-1","tabindex","-1","type","button",3,"btn-light","text-primary","btn-secondary","t-text-whitish","title","disabled","click",4,"ngIf"],["class","btn btn-sm t-white-button p-0 px-1 t-magnifier-btn","style","width:22.6px;","tabindex","-1","type","button",3,"btn-light","text-primary","btn-secondary","t-text-whitish","title","click",4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","drop",1,"shadow",2,"z-index","1050"],[4,"ngIf"],[1,"text-center"],[1,"pl-2","pr-2"],["class","font-italic text-muted",4,"ngIf"],["detailsWrapperTemplate",""],["masterWrapperTemplate",""],["detailsOptionsTemplate",""],["masterOptionsTemplate",""],["tabindex","-1","type","button",1,"btn","btn-sm","t-white-button","p-0","px-1",3,"title","disabled","click"],["icon","external-link-alt"],["tabindex","-1","type","button",1,"btn","btn-sm","t-white-button","p-0","px-1","t-magnifier-btn",2,"width","22.6px",3,"title","click"],["icon","search"],["class","dropdown-item","style","cursor:default",3,"active","mouseenter","focus",4,"ngFor","ngForOf"],[1,"dropdown-item",2,"cursor","default",3,"mouseenter","focus"],[1,"font-italic","text-muted"],[3,"placement","ngbTooltip"],[1,"dropdown-item","t-slightly-bold",3,"disabled","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-2"],["class","d-inline-block",3,"placement","ngbTooltip",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","m-1",3,"disabled","click"],["ngbAutofocus","",1,"btn","btn-primary","m-1",3,"click"]],template:function(e,t){1&e&&(c.Sb(0,"div",0,1),c.Sb(2,"div",2),c.Sb(3,"input",3,4),c.cc("blur",function(){return t.onBlur()})("keydown",function(e){return t.onKeyDown(e)}),c.Rb(),c.Jc(5,ps,3,12,"button",5),c.Jc(6,Ss,3,11,"button",6),c.Rb(),c.Sb(7,"div",7),c.Jc(8,Is,2,1,"ng-container",8),c.Sb(9,"div",9),c.Sb(10,"span"),c.Jc(11,Ms,1,0,"t-spinner",8),c.Rb(),c.Rb(),c.Sb(12,"div",10),c.Jc(13,Rs,2,1,"t-error-message",8),c.Jc(14,ys,3,3,"span",11),c.Rb(),c.Jc(15,Ds,6,14,"ng-container",8),c.Rb(),c.Rb(),c.Jc(16,Cs,1,8,"ng-template",null,12,c.Kc),c.Jc(18,zs,1,8,"ng-template",null,13,c.Kc),c.Jc(20,ks,17,10,"ng-template",null,14,c.Kc),c.Jc(22,As,17,10,"ng-template",null,15,c.Kc)),2&e&&(c.nc("placement",t.placement),c.zb(2),c.Eb("t-disabled-background",t.isDisabled),c.zb(1),c.Eb("t-input",!t.isDark)("t-studio-input",t.isDark),c.nc("disabled",t.isDisabled),c.zb(2),c.nc("ngIf",t.showEditSelected&&!t.isDisabled),c.zb(1),c.nc("ngIf",t.showMagnifier&&!t.isDisabled),c.zb(1),c.Eb("t-less-dark",t.isDark),c.zb(1),c.nc("ngIf",t.showResults),c.zb(2),c.Eb("t-text-whitish",t.isDark),c.zb(1),c.nc("ngIf",t.showSpinner),c.zb(2),c.nc("ngIf",t.showError),c.zb(1),c.nc("ngIf",t.showNoItemsFound),c.zb(1),c.nc("ngIf",t.showCreateNew))},directives:[G.l,G.m,C.l,G.p,ee.a,C.k,fe.a,Se.a,G.E,C.p],pipes:[K.c],encapsulation:2}),e})(),Js=(()=>{class e{constructor(){this.showCreate=!0,this.ensureAdditionalSelect=!1,this.entityLoaded=new c.n,this.w100=!0}writeValue(e){this.picker.writeValue(e)}registerOnChange(e){this.picker.registerOnChange(e)}registerOnTouched(e){this.picker.registerOnTouched(e)}setDisabledState(e){this.picker.setDisabledState(e)}onEntityLoaded(){this.entityLoaded.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&c.Qc(_s,3),2&e){let e;c.zc(e=c.dc())&&(t.picker=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("w-100",t.w100)},inputs:{showCreate:"showCreate",filter:"filter",additionalSelect:"additionalSelect",ensureAdditionalSelect:"ensureAdditionalSelect",theme:"theme"},outputs:{entityLoaded:"entityLoaded"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var Ps=n("1bxP"),Fs=n("88Q5"),Vs=n("1nIS");function qs(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-roles-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("showMembers",i.showMembers)("additionalSelect",i.additionalSelect)}}function js(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-roles-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let $s=(()=>{class e extends Js{constructor(){super(...arguments),this.showMembers=!0}}return e.\u0275fac=function(t){return Us(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-roles-picker"]],inputs:{showMembers:"showMembers"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","Role",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","showMembers","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,qs,2,4,"ng-template",null,1,c.Kc),c.Jc(3,js,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const Us=c.Ub($s);function Ks(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function Bs(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"t-restricted",8),c.Sb(2,"div",9),c.Sb(3,"div"),c.Sb(4,"span"),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Rb(),c.Sb(7,"div"),c.Sb(8,"span"),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Sb(11,"div",10),c.Sb(12,"span"),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.model;c.zb(1),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ExternalId),c.zb(2),c.Eb("active",!(null!=e&&e.ExternalId)),c.zb(2),c.Mc(c.ic(6,8,"User_Invited")),c.zb(2),c.Eb("active",!(null==e||!e.ExternalId)),c.zb(2),c.Mc(c.ic(10,10,"User_Member")),c.zb(4),c.Mc(c.ic(14,12,null!=e&&e.ExternalId?"User_Member":"User_Invited"))}}function Hs(e,t){if(1&e&&(c.Sb(0,"h2",24),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const Qs=function(){return{updateOn:"blur"}};function Ws(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,Qs))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Gs(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",26),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,Qs))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Ys(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",26),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,Qs))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Xs(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-image",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Image=t}),c.Rb()}if(2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("src",t.Id?"users/"+t.Id+"/image":null)("imageId",null==t?null:t.ImageId)("ngModel",t.Image)("isEdit",n)}}function Zs(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function el(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",29),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,Qs))}}function tl(e,t){if(1&e&&(c.Sb(0,"t-form-group",19),c.hc(1,"translate"),c.Jc(2,Zs,2,1,"div",20),c.Jc(3,el,1,3,"t-text-editor",28),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function nl(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function il(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,Qs))}}function cl(e,t){if(1&e&&(c.Sb(0,"t-form-group",19),c.hc(1,"translate"),c.Jc(2,nl,2,1,"div",20),c.Jc(3,il,1,3,"t-text-editor",30),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function ol(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function rl(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,Qs))}}function sl(e,t){if(1&e&&(c.Sb(0,"t-form-group",19),c.hc(1,"translate"),c.Jc(2,ol,2,1,"div",20),c.Jc(3,rl,1,3,"t-text-editor",30),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function ll(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Email)}}function al(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Email=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.Email)("ngModelOptions",c.qc(3,Qs))("disabled",!t.isNew)}}function ul(e,t){if(1&e&&(c.Sb(0,"t-form-group",33),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",34),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"User_LastActivity")),c.zb(2),c.nc("entity",e)}}function dl(e,t){if(1&e&&(c.Sb(0,"t-form-group",33),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(3),c.Mc(c.ic(4,4,e?e.IsActive?"Active":"Inactive":""))}}const bl=function(e){return{email:e}};function gl(e,t){if(1&e&&(c.Sb(0,"div",35),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.zb(2),c.Mc(c.jc(3,1,"UserInvitationNotice",c.rc(4,bl,null==e?null:e.Email)))}}function fl(e,t){1&e&&(c.Sb(0,"span",46),c.Nb(1,"fa-icon",47),c.Lc(2,"\xa0 "),c.Rb())}function ml(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"RoleMembership_Role"))}function hl(e,t){if(1&e&&(c.Sb(0,"t-restricted",8),c.Sb(1,"t-view-link",56),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc().item,t=c.gc(5);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Role),c.zb(1),c.nc("itemId",null==e?null:e.RoleId),c.zb(1),c.Mc(t.ws.getMultilingualValue("Role",e.RoleId,"Name"))}}function pl(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-roles-picker",57),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.RoleId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item;c.nc("ngModel",e.RoleId)("required",!e.PH)("showMembers",!1)}}function Sl(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",53),c.Jc(1,hl,3,3,"t-restricted",54),c.Jc(2,pl,1,3,"t-roles-picker",55),c.Rb()),2&e){const e=t.item,n=c.gc(4).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.RoleId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function vl(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Memo"))}function Il(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"t-restricted",8),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc().item;c.zb(1),c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Memo),c.zb(1),c.Mc(e.Memo)}}function Ml(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.Memo=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item;c.nc("ngModel",e.Memo)("ngModelOptions",c.qc(2,Qs))}}function Rl(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",53),c.Jc(1,Il,3,2,"div",20),c.Jc(2,Ml,1,3,"t-text-editor",30),c.Rb()),2&e){const e=t.item,n=c.gc(4).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Memo),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}const yl=function(){return["RoleId","Memo"]},Dl=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},wl=function(e,t){return{RoleId:e,Memo:t}};function El(e,t){if(1&e&&(c.Sb(0,"t-restricted",8),c.Nb(1,"t-table",48),c.Rb(),c.Jc(2,ml,2,3,"ng-template",null,49,c.Kc),c.Jc(4,Sl,3,3,"ng-template",null,50,c.Kc),c.Jc(6,vl,2,3,"ng-template",null,51,c.Kc),c.Jc(8,Rl,3,3,"ng-template",null,52,c.Kc)),2&e){const e=c.Ac(3),t=c.Ac(5),n=c.Ac(7),i=c.Ac(9),o=c.gc(3),r=o.model,s=o.isEdit;c.Eb("p-4",1===(null==r||null==r.EntityMetadata?null:r.EntityMetadata.Roles)),c.nc("metadata",null==r||null==r.EntityMetadata?null:r.EntityMetadata.Roles),c.zb(1),c.nc("dataSource",null==r?null:r.Roles)("isEdit",s)("columnPaths",c.qc(7,yl))("columnTemplates",c.sc(14,wl,c.sc(8,Dl,e,t),c.sc(11,Dl,n,i)))}}function Cl(e,t){if(1&e&&(c.Sb(0,"li",41),c.Sb(1,"a",42),c.Jc(2,fl,3,0,"span",43),c.Sb(3,"span",44),c.Lc(4),c.hc(5,"translate"),c.hc(6,"number"),c.Rb(),c.Rb(),c.Jc(7,El,10,17,"ng-template",45),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("ngIf",t.showRolesError(e)),c.zb(2),c.Mc(c.ic(5,2,"User_Roles")+(e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Roles)?"":" ("+c.ic(6,4,null==e||null==e.Roles?null:e.Roles.length)+")"))}}function xl(e,t){1&e&&(c.Sb(0,"span",46),c.Nb(1,"fa-icon",47),c.Lc(2,"\xa0 "),c.Rb())}function Tl(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(5).model;c.zb(1),c.Mc(null==e?null:e.ContactEmail)}}function zl(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",63),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(6).model.ContactEmail=t}),c.Rb()}if(2&e){const e=c.gc(6).model;c.nc("ngModel",e.ContactEmail)}}function Ll(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Jc(1,zl,1,1,"t-text-editor",61),c.Sb(2,"button",62),c.cc("click",function(){c.Dc(e);const t=c.gc(5).model;return c.gc().testEmail(null==t?null:t.ContactEmail)}),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Pb()}if(2&e){const e=c.gc(5),t=e.isEdit,n=e.model;c.zb(1),c.nc("ngIf",t),c.zb(1),c.nc("disabled",!(null!=n&&n.ContactEmail)),c.zb(1),c.Mc(c.ic(4,3,"Test"))}}function kl(e,t){if(1&e&&(c.Sb(0,"t-form-group",19),c.hc(1,"translate"),c.Jc(2,Tl,2,1,"div",20),c.Jc(3,Ll,5,5,"ng-container",20),c.Rb()),2&e){const e=c.gc(4),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Entity_ContactEmail"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactEmail),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ol(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(5).model;c.zb(1),c.Mc(null==e?null:e.ContactMobile)}}function Al(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"t-text-editor",64),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).model.ContactMobile=t}),c.Rb(),c.Sb(2,"button",62),c.cc("click",function(){c.Dc(e);const t=c.gc(5).model;return c.gc().testPhoneNumber(null==t?null:t.ContactMobile)}),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Pb()}if(2&e){const e=c.gc(5).model;c.zb(1),c.nc("ngModel",e.ContactMobile),c.zb(1),c.nc("disabled",!(null!=e&&e.ContactMobile)),c.zb(1),c.Mc(c.ic(4,3,"Test"))}}function Nl(e,t){if(1&e&&(c.Sb(0,"t-form-group",19),c.hc(1,"translate"),c.Jc(2,Ol,2,1,"div",20),c.Jc(3,Al,5,5,"ng-container",20),c.Rb()),2&e){const e=c.gc(4),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Entity_ContactMobile"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactMobile),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function _l(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"t-restricted",8),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(5).model,t=c.gc();c.zb(1),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.PreferredLanguage),c.zb(1),c.Nc(" ",c.ic(3,2,t.languageLookup(null==e?null:e.PreferredLanguage))," ")}}function Jl(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",66),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).model.PreferredLanguage=t}),c.Rb()}if(2&e){const e=c.gc(5).model,t=c.gc();c.nc("ngModel",e.PreferredLanguage)("choices",t.languageChoices)}}function Pl(e,t){if(1&e&&(c.Sb(0,"t-form-group",19),c.hc(1,"translate"),c.Jc(2,_l,4,4,"div",20),c.Jc(3,Jl,1,2,"t-selector",65),c.Rb()),2&e){const e=c.gc(4),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"User_PreferredLanguage"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.PreferredLanguage),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Fl(e,t){1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"NotifyByEmail")))}function Vl(e,t){1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"NotifyBySms")))}function ql(e,t){1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"NotifyByPush")))}function jl(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(6).model;c.zb(1),c.Mc(c.ic(2,1,e.EmailNewInboxItem?"Yes":"No"))}}function $l(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",70),c.Sb(1,"input",71),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(6).model.EmailNewInboxItem=t}),c.Rb(),c.Sb(2,"label",72),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(6).model;c.zb(1),c.nc("ngModel",e.EmailNewInboxItem)}}function Ul(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,jl,3,3,"span",20),c.Jc(2,$l,4,1,"div",69),c.Rb()),2&e){const e=c.gc(5).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function Kl(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(6).model;c.zb(1),c.Mc(c.ic(2,1,e.SmsNewInboxItem?"Yes":"No"))}}function Bl(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",70),c.Sb(1,"input",73),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(6).model.SmsNewInboxItem=t}),c.Rb(),c.Sb(2,"label",74),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(6).model;c.zb(1),c.nc("ngModel",e.SmsNewInboxItem)}}function Hl(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,Kl,3,3,"span",20),c.Jc(2,Bl,4,1,"div",69),c.Rb()),2&e){const e=c.gc(5).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function Ql(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(6).model;c.zb(1),c.Mc(c.ic(2,1,e.PushNewInboxItem?"Yes":"No"))}}function Wl(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",70),c.Sb(1,"input",75),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(6).model.PushNewInboxItem=t}),c.Rb(),c.Sb(2,"label",76),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(6).model;c.zb(1),c.nc("ngModel",e.PushNewInboxItem)}}function Gl(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,Ql,3,3,"span",20),c.Jc(2,Wl,4,1,"div",69),c.Rb()),2&e){const e=c.gc(5).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function Yl(e,t){if(1&e&&(c.Sb(0,"table",67),c.Sb(1,"thead"),c.Sb(2,"tr",68),c.Sb(3,"th"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Jc(6,Fl,3,3,"th",20),c.Jc(7,Vl,3,3,"th",20),c.Jc(8,ql,3,3,"th",20),c.Rb(),c.Rb(),c.Sb(9,"tbody"),c.Sb(10,"tr"),c.Sb(11,"td"),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Jc(14,Ul,3,2,"td",20),c.Jc(15,Hl,3,2,"td",20),c.Jc(16,Gl,3,2,"td",20),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc(4).model,t=c.gc();c.zb(4),c.Mc(c.ic(5,8,"Trigger")),c.zb(2),c.nc("ngIf",t.showEmailColumn(e)),c.zb(1),c.nc("ngIf",t.showSmsColumn(e)),c.zb(1),c.nc("ngIf",t.showPushColumn(e)),c.zb(4),c.Mc(c.ic(13,10,"NewDocumentAssignment")),c.zb(2),c.nc("ngIf",t.showEmailColumn(e)),c.zb(1),c.nc("ngIf",t.showSmsColumn(e)),c.zb(1),c.nc("ngIf",t.showPushColumn(e))}}function Xl(e,t){if(1&e&&(c.Sb(0,"div",59),c.Jc(1,kl,4,6,"t-form-group",18),c.Jc(2,Nl,4,6,"t-form-group",18),c.Jc(3,Pl,4,6,"t-form-group",18),c.Jc(4,Yl,17,12,"table",60),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.nc("ngIf",t.showEmail),c.zb(1),c.nc("ngIf",t.showSms),c.zb(1),c.nc("ngIf",t.showPreferredLanguage),c.zb(1),c.nc("ngIf",t.showNotificationTriggers(e))}}function Zl(e,t){if(1&e&&(c.Sb(0,"li",58),c.Sb(1,"a",42),c.Jc(2,xl,3,0,"span",43),c.Sb(3,"span",44),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Jc(6,Xl,5,4,"ng-template",45),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("ngIf",t.showNotificationsError(e)),c.zb(2),c.Mc(c.ic(5,2,"Notifications"))}}function ea(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"ul",36,37),c.cc("activeIdChange",function(t){return c.Dc(e),c.gc(2).activeTab=t}),c.Jc(3,Cl,8,6,"li",38),c.Jc(4,Zl,7,4,"li",39),c.Rb(),c.Nb(5,"div",40),c.Pb()}if(2&e){const e=c.Ac(2),t=c.gc(2);c.zb(1),c.nc("activeId",t.activeTab)("destroyOnHide",!0),c.zb(2),c.nc("ngIf",t.showRoles),c.zb(1),c.nc("ngIf",t.showNotifications),c.zb(1),c.nc("ngbNavOutlet",e)}}function ta(e,t){if(1&e&&(c.Sb(0,"t-form-group",11),c.Jc(1,Hs,2,1,"h2",12),c.Jc(2,Ws,2,7,"t-text-editor",13),c.Jc(3,Gs,2,7,"t-text-editor",14),c.Jc(4,Ys,2,7,"t-text-editor",14),c.Rb(),c.Sb(5,"div",15),c.Sb(6,"t-restricted",8),c.Sb(7,"div",16),c.Jc(8,Xs,1,4,"t-image",17),c.Rb(),c.Rb(),c.Rb(),c.Jc(9,tl,4,6,"t-form-group",18),c.Jc(10,cl,4,6,"t-form-group",18),c.Jc(11,sl,4,6,"t-form-group",18),c.Sb(12,"t-form-group",19),c.hc(13,"translate"),c.Jc(14,ll,2,1,"div",20),c.Jc(15,al,1,4,"t-text-editor",21),c.Rb(),c.Jc(16,ul,3,4,"t-form-group",22),c.Jc(17,dl,5,6,"t-form-group",22),c.Jc(18,gl,4,6,"div",23),c.Jc(19,ea,6,5,"ng-container",20)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(2),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ImageId),c.zb(2),c.nc("ngIf",!!e),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(13,18,"User_Email"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Email),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",i.showInvitationInfo(e)),c.zb(1),c.nc("ngIf",i.showTabs)}}function na(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function ia(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function ca(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"ResendInvitationEmail")," ")}const oa=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},ra=function(e,t,n){return[e,t,n]};let sa=(()=>{class e extends mn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.route=i,this.showRoles=!0,this.usersApi=this.api.usersApi(this.notifyDestruct$),this.expand="Roles.Role",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.EmailNewInboxItem=!1,e.SmsNewInboxItem=!1,e.PushNewInboxItem=!1,e.PreferredLanguage=this.ws.settings.PrimaryLanguageId,e.Roles=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Roles&&t.Roles.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.onInvite=e=>{e&&e.Id&&this.usersApi.invite(e.Id).subscribe(()=>{this.details.displayModalMessage(this.translate.instant("InvitationEmailSent"))},this.details.handleActionError)},this.showInvite=e=>!!e&&!e.ExternalId&&this.workspace.globalSettings.EmailEnabled,this.canInvite=e=>this.ws.canDo("users","ResendInvitationEmail",e.Id),this.inviteTooltip=e=>this.canInvite(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.onActivate=e=>{e&&e.Id&&this.usersApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.usersApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("users","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.usersApi=this.api.usersApi(this.notifyDestruct$)}get languageChoices(){return this._languageChoices||(this._languageChoices=[{name:()=>this.ws.settings.PrimaryLanguageName,value:this.ws.settings.PrimaryLanguageId}],this.ws.settings.SecondaryLanguageId&&this._languageChoices.push({name:()=>this.ws.settings.SecondaryLanguageName,value:this.ws.settings.SecondaryLanguageId}),this.ws.settings.TernaryLanguageId&&this._languageChoices.push({name:()=>this.ws.settings.TernaryLanguageName,value:this.ws.settings.TernaryLanguageId})),this._languageChoices}languageLookup(e){return Ps.a[e]}get ws(){return this.workspace.currentTenant}showRolesError(e){return!!e&&!!e.Roles&&e.Roles.some(e=>!!e.serverErrors)}showNotificationsError(e){return!!(e&&e.serverErrors&&(e.serverErrors.PreferredLanguage||e.serverErrors.ContactEmail||e.serverErrors.ContactMobile||e.serverErrors.EmailNewInboxItem||e.serverErrors.SmsNewInboxItem||e.serverErrors.PushNewInboxItem))}showInvitationInfo(e){return!!e&&!!e.Email&&this.isNew&&this.workspace.globalSettings.EmailEnabled}get isNew(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}get showPreferredLanguage(){return!!this.ws.settings.SecondaryLanguageId||!!this.ws.settings.TernaryLanguageId}get showNotifications(){return this.showEmail||this.showSms||this.showPush}get showTabs(){return this.showRoles||this.showNotifications}get showSms(){return this.ws.settings.SmsEnabled&&this.workspace.globalSettings.SmsEnabled}get showEmail(){return this.workspace.globalSettings.EmailEnabled}get showPush(){return this.workspace.globalSettings.PushEnabled}showNotificationTriggers(e){return this.showEmailColumn(e)||this.showSmsColumn(e)||this.showPushColumn(e)}showEmailColumn(e){return this.showEmail&&!!e&&!!e.ContactEmail}showSmsColumn(e){return this.showSms&&!!e&&!!e.ContactMobile}showPushColumn(e){return this.showPush&&!!e&&!!e.PushEnabled}get activeTab(){return this.ws.miscState.users_details_activeTab||"roles"}set activeTab(e){this.ws.miscState.users_details_activeTab=e}testEmail(e){const t=this.details;this.usersApi.testEmail(e).subscribe(e=>t.displayModalMessage(e.Message),e=>t.displayErrorModal(e.error))}testPhoneNumber(e){const t=this.details;this.usersApi.testPhone(e).subscribe(e=>t.displayModalMessage(e.Message),e=>t.displayErrorModal(e.error))}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(i.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-users-details"]],inputs:{showRoles:"showRoles"},features:[c.wb],decls:14,vars:35,consts:[["collection","User",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","documentHeaderTemplate","actions"],["detailsCrumb",""],["documentHeader",""],["document",""],["activate",""],["deactivate",""],["invite",""],[1,"w-100","t-document-header","d-flex","justify-content-end"],[3,"metadata"],[1,"t-flow-chart","small"],[1,"small","t-lone-state","active","d-none"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"col-12","col-md-4","t-details-image-container"],[1,"border"],[3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["class","col-12 alert-primary p-2 px-3 mt-3 mt-sm-4",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"t-form-group",3,"label"],["collection","User","path","LastAccess",3,"entity"],[1,"col-12","alert-primary","p-2","px-3","mt-3","mt-sm-4"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"activeId","destroyOnHide","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","roles",4,"ngIf"],["ngbNavItem","notifications",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","roles"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_RoleId",""],["row_RoleId",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"metadata",4,"ngIf"],[3,"ngModel","required","showMembers","ngModelChange",4,"ngIf"],["link","../../roles",3,"itemId"],[3,"ngModel","required","showMembers","ngModelChange"],["ngbNavItem","notifications"],[1,"row","m-0","pt-2","pt-sm-3"],["class","table mt-4 table-striped border-bottom text-nowrap",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn","btn-primary","btn-sm","py-0","px-1","mx-2","text-nowrap",3,"disabled","click"],[3,"ngModel","ngModelChange"],["placeholder","+000-00-000-0000",3,"ngModel","ngModelChange"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],[1,"table","mt-4","table-striped","border-bottom","text-nowrap"],[1,"small"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","EmailNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","EmailNewInboxItem",1,"custom-control-label","t-pointer"],["type","checkbox","id","SmsNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","SmsNewInboxItem",1,"custom-control-label","t-pointer"],["type","checkbox","id","PushNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","PushNewInboxItem",1,"custom-control-label","t-pointer"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Ks,2,1,"ng-template",null,1,c.Kc),c.Jc(4,Bs,15,14,"ng-template",null,2,c.Kc),c.Jc(6,ta,20,20,"ng-template",null,3,c.Kc),c.Jc(8,na,2,3,"ng-template",null,4,c.Kc),c.Jc(10,ia,2,3,"ng-template",null,5,c.Kc),c.Jc(12,ca,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("expand",t.expand)("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,11,"Users"))("detailsCrumb",e)("documentTemplate",i)("documentHeaderTemplate",n)("actions",c.tc(31,ra,c.vc(13,oa,s,t.onInvite,t.showInvite,t.canInvite,t.inviteTooltip),c.vc(19,oa,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(25,oa,r,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,hn.a,he.a,C.l,pe.a,te.m,te.i,te.j,be,te.d,me.a,G.v,G.A,G.x,G.y,G.w,ee.a,Fs.a,Vs.a,ss,$s,pn.a,te.a],pipes:[K.c,C.d],encapsulation:2}),e})();function la(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",19),c.Nb(2,"t-image",20),c.Rb(),c.Lc(3," \xa0\xa0\xa0 "),c.Pb()),2&e){const e=c.gc().id,t=c.gc();c.zb(2),c.nc("src","users/"+t.c[e].Id+"/image")("imageId",t.c[e].ImageId)("size",42)}}function aa(e,t){if(1&e&&(c.Sb(0,"div",11),c.Jc(1,la,4,3,"ng-container",12),c.Sb(2,"div",13),c.Sb(3,"div",14),c.Nb(4,"t-auto-cell",15),c.Rb(),c.Sb(5,"div",16),c.Nb(6,"t-auto-cell",17),c.Nb(7,"t-auto-cell",18),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("ngIf",2===(null==n.c[e].EntityMetadata?null:n.c[e].EntityMetadata.ImageId)),c.zb(3),c.nc("entity",n.c[e]),c.zb(2),c.nc("entity",n.c[e]),c.zb(1),c.nc("entity",n.c[e])}}function ua(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"User"),"\n")}function da(e,t){if(1&e&&c.Nb(0,"t-auto-cell",21),2&e){const e=t.id,n=c.gc();c.nc("entity",n.c[e])}}function ba(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function ga(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function fa(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}function ma(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"User_Invited")," ")}function ha(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"User_Member")," ")}function pa(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"WithPicture")," ")}function Sa(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"WithoutPicture")," ")}const va=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Ia=function(e,t){return[e,t]},Ma=function(e){return{template:e,expression:"CreatedById eq me"}},Ra=function(e){return[e]},ya=function(e){return{template:e,expression:"ExternalId eq null"}},Da=function(e){return{template:e,expression:"ExternalId ne null"}},wa=function(e){return{template:e,expression:"ImageId ne null"}},Ea=function(e){return{template:e,expression:"ImageId eq null"}},Ca=function(e,t,n){return{CreatedBy:e,ExternalId:t,ImageId:n}};let xa=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.usersApi=this.api.usersApi(this.notifyDestruct$),this.onActivate=e=>this.usersApi.activate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.usersApi.deactivate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("users","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.usersApi=this.api.usersApi(this.notifyDestruct$)}get c(){return this.ws.User}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-users-master"]],features:[c.wb],decls:22,vars:47,consts:[["collection","User","selectDefault","Email,State,LastAccess","selectForTiles","ImageId,State,Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["invited",""],["member",""],["withPicture",""],["withoutPicture",""],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1"],[1,"d-flex","justify-content-between"],["collection","User","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","User","path","Email",3,"entity"],["collection","User","path","State",3,"entity"],[1,"border"],[3,"src","imageId","size"],["collection","User",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,aa,8,4,"ng-template",null,1,c.Kc),c.Jc(4,ua,2,3,"ng-template",null,2,c.Kc),c.Jc(6,da,1,1,"ng-template",null,3,c.Kc),c.Jc(8,ba,2,3,"ng-template",null,4,c.Kc),c.Jc(10,ga,2,3,"ng-template",null,5,c.Kc),c.Jc(12,fa,2,3,"ng-template",null,6,c.Kc),c.Jc(14,ma,2,3,"ng-template",null,7,c.Kc),c.Jc(16,ha,2,3,"ng-template",null,8,c.Kc),c.Jc(18,pa,2,3,"ng-template",null,9,c.Kc),c.Jc(20,Sa,2,3,"ng-template",null,10,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13),l=c.Ac(15),a=c.Ac(17),u=c.Ac(19),d=c.Ac(21);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"Users"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(22,Ia,c.uc(12,va,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(17,va,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.tc(43,Ca,c.rc(27,Ra,c.rc(25,Ma,s)),c.sc(33,Ia,c.rc(29,ya,l),c.rc(31,Da,a)),c.sc(40,Ia,c.rc(36,wa,u),c.rc(38,Ea,d))))}},directives:[Tt.a,C.l,me.a,be],pipes:[K.c],encapsulation:2}),e})();function Ta(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-users-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("showRoles",i.showRoles)("additionalSelect",i.additionalSelect)}}function za(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-users-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let La=(()=>{class e extends Js{constructor(){super(...arguments),this.showRoles=!0}}return e.\u0275fac=function(t){return ka(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-users-picker"]],inputs:{showRoles:"showRoles"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","User",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","showRoles","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,Ta,2,4,"ng-template",null,1,c.Kc),c.Jc(3,za,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,sa,xa],encapsulation:2}),e})();const ka=c.Ub(La);var Oa=n("3bcy");function Aa(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function Na(e,t){if(1&e&&(c.Sb(0,"h2",19),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const _a=function(){return{updateOn:"blur"}};function Ja(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,_a))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Pa(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,_a))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Fa(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,_a))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Va(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Id)}}function qa(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Id=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.Id)("ngModelOptions",c.qc(3,_a))("disabled",!t.isNew)}}function ja(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function $a(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,_a))}}function Ua(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.hc(1,"translate"),c.Jc(2,ja,2,1,"div",10),c.Jc(3,$a,1,3,"t-text-editor",13),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ka(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function Ba(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,_a))}}function Ha(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.hc(1,"translate"),c.Jc(2,Ka,2,1,"div",10),c.Jc(3,Ba,1,3,"t-text-editor",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Qa(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function Wa(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,_a))}}function Ga(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.hc(1,"translate"),c.Jc(2,Qa,2,1,"div",10),c.Jc(3,Wa,1,3,"t-text-editor",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ya(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Description)}}function Xa(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Description=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Description)("ngModelOptions",c.qc(2,_a))}}function Za(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Description2)}}function eu(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description2)("ngModelOptions",c.qc(2,_a))}}function tu(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.hc(1,"translate"),c.Jc(2,Za,2,1,"div",10),c.Jc(3,eu,1,3,"t-text-editor",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function nu(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Description3)}}function iu(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description3)("ngModelOptions",c.qc(2,_a))}}function cu(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.hc(1,"translate"),c.Jc(2,nu,2,1,"div",10),c.Jc(3,iu,1,3,"t-text-editor",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function ou(e,t){if(1&e&&c.Nb(0,"t-auto-cell",26),2&e){const e=c.gc().model;c.nc("entity",e)}}function ru(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.NumericCode=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.NumericCode)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function su(e,t){if(1&e&&c.Nb(0,"t-auto-cell",28),2&e){const e=c.gc().model;c.nc("entity",e)}}function lu(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",29),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.E=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.E)("choices",t.decimalPlacesChoices)}}function au(e,t){if(1&e&&(c.Sb(0,"t-form-group",30),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",31),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(2),c.nc("entity",e)}}function uu(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,Na,2,1,"h2",6),c.Jc(2,Ja,2,7,"t-text-editor",7),c.Jc(3,Pa,2,7,"t-text-editor",8),c.Jc(4,Fa,2,7,"t-text-editor",8),c.Rb(),c.Sb(5,"t-form-group",9),c.hc(6,"translate"),c.Jc(7,Va,2,1,"div",10),c.Jc(8,qa,1,4,"t-text-editor",11),c.Rb(),c.Jc(9,Ua,4,6,"t-form-group",12),c.Jc(10,Ha,4,6,"t-form-group",12),c.Jc(11,Ga,4,6,"t-form-group",12),c.Sb(12,"t-form-group",9),c.hc(13,"translate"),c.Jc(14,Ya,2,1,"div",10),c.Jc(15,Xa,1,3,"t-text-editor",13),c.Rb(),c.Jc(16,tu,4,6,"t-form-group",12),c.Jc(17,cu,4,6,"t-form-group",12),c.Sb(18,"t-form-group",9),c.hc(19,"translate"),c.Jc(20,ou,1,1,"t-auto-cell",14),c.Jc(21,ru,1,3,"t-decimal-editor",15),c.Rb(),c.Sb(22,"t-form-group",9),c.hc(23,"translate"),c.Jc(24,su,1,1,"t-auto-cell",16),c.Jc(25,lu,1,2,"t-selector",17),c.Rb(),c.Jc(26,au,3,4,"t-form-group",18)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("label",c.ic(6,27,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Id),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(13,29,"Description")+i.ws.primaryPostfix)("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Description),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(19,31,"Currency_NumericCode"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.E),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(23,33,"Currency_DecimalPlaces"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.E),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n)}}function du(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function bu(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const gu=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},fu=function(e,t){return[e,t]};let mu=(()=>{class e extends mn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.route=i,this.currenciesApi=this.api.currenciesApi(this.notifyDestruct$),this.expand="",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.E=2,e},this.onActivate=e=>{e&&e.Id&&this.currenciesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.currenciesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("currencies","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.currenciesApi=this.api.currenciesApi(this.notifyDestruct$)}get decimalPlacesChoices(){if(!this._decimalPlacesChoices){const e=Object(Oa.a)(this.workspace,this.translate).properties.E;this._decimalPlacesChoices=Object(Mi.c)(e)}return this._decimalPlacesChoices}decimalPlacesLookup(e){return Object(Oa.a)(this.workspace,this.translate).properties.E.format(e)}get ws(){return this.workspace.currentTenant}get isNew(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(i.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-currencies-details"]],features:[c.wb],decls:10,vars:26,consts:[["collection","Currency",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["collection","Currency","path","NumericCode",3,"entity",4,"ngIf"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],["collection","Currency","path","E",3,"entity",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["collection","Currency","path","NumericCode",3,"entity"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["collection","Currency","path","E",3,"entity"],["required","",3,"ngModel","choices","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Currency","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Aa,2,1,"ng-template",null,1,c.Kc),c.Jc(4,uu,27,35,"ng-template",null,2,c.Kc),c.Jc(6,du,2,3,"ng-template",null,3,c.Kc),c.Jc(8,bu,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,9,"Currencies"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.sc(23,fu,c.vc(11,gu,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(17,gu,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,pe.a,te.m,te.i,te.j,me.a,vn,pn.a],pipes:[K.c],encapsulation:2}),e})();function hu(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",9),c.Sb(4,"span",8),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("Currency",e,"Name")),c.zb(3),c.Mc(n.ws.getMultilingualValue("Currency",e,"Description"))}}function pu(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Currency"),"\n")}function Su(e,t){if(1&e&&(c.Sb(0,"span",10),c.Nb(1,"t-auto-cell",11),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function vu(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function Iu(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function Mu(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}const Ru=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},yu=function(e,t){return[e,t]},Du=function(e){return{template:e,expression:"CreatedById eq me"}},wu=function(e){return[e]},Eu=function(e){return{CreatedBy:e}};let Cu=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.currenciesApi=this.api.currenciesApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.currenciesApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.currenciesApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("currencies","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.currenciesApi=this.api.currenciesApi(this.notifyDestruct$)}get c(){return this.ws.Currency}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-currencies-master"]],features:[c.wb],decls:14,vars:31,consts:[["collection","Currency","selectDefault","E,IsActive","selectForTiles","Name,Name2,Name3,Description,Description2,Description3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Currency",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,hu,6,2,"ng-template",null,1,c.Kc),c.Jc(4,pu,2,3,"ng-template",null,2,c.Kc),c.Jc(6,Su,2,1,"ng-template",null,3,c.Kc),c.Jc(8,vu,2,3,"ng-template",null,4,c.Kc),c.Jc(10,Iu,2,3,"ng-template",null,5,c.Kc),c.Jc(12,Mu,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"Currencies"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(22,yu,c.uc(12,Ru,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(17,Ru,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.rc(29,Eu,c.rc(27,wu,c.rc(25,Du,s))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();function xu(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-currencies-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function Tu(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-currencies-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let zu=(()=>{class e extends Js{}return e.\u0275fac=function(t){return Lu(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-currencies-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","Currency",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,xu,2,3,"ng-template",null,1,c.Kc),c.Jc(3,Tu,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,mu,Cu],encapsulation:2}),e})();const Lu=c.Ub(zu);function ku(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-centers-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function Ou(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-centers-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let Au=(()=>{class e extends Js{}return e.\u0275fac=function(t){return Nu(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-centers-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","Center",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,ku,2,3,"ng-template",null,1,c.Kc),c.Jc(3,Ou,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const Nu=c.Ub(Au),_u=["d"],Ju=["i"];function Pu(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"button",5),c.cc("click",function(){return c.Dc(e),c.gc().onClick()}),c.Nb(2,"fa-icon",6),c.Rb(),c.Pb()}if(2&e){const e=c.gc(),t=c.Ac(6);c.zb(1),c.nc("tContextMenu",t)("tDisableMenu",e.disableAltCalendar)}}function Fu(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",7),c.Sb(1,"ul",8),c.Sb(2,"li",9),c.cc("click",function(){c.Dc(e);const n=t.close;return c.gc().onAltCalendar(),n()}),c.Lc(3),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(3),c.Nc(" ",e.altCalendarName," ")}}let Vu=(()=>{class e{constructor(e,t){this.workspace=e,this.translate=t,this.w100=!0,this.isDisabled=!1,this._invalid=!1}ngOnInit(){this._subscriptions=new O.a,this._subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.onFormatChange()})),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>{this._calendar&&this._calendar!==this.workspace.calendar&&this.onCalendarChange(),this._dateFormat&&this._dateFormat!==this.workspace.dateFormat&&this.onFormatChange()}}))}ngOnChanges(e){e.calendar&&!e.calendar.isFirstChange()&&this.onCalendarChange(),e.granularity&&!e.granularity.isFirstChange()&&this.onFormatChange()}ngOnDestroy(){this._subscriptions&&this._subscriptions.unsubscribe()}onCalendarChange(){this.deleteAltCalendarIfRedundant(),this.writeValue(this._value),this.picker.close()}onFormatChange(){this.writeValue(this._value)}setOverride(){this.workspace.calendarOverride=this.calendar||(this.disableAltCalendar?void 0:this.altCalendar),this.workspace.granularityOverride=this.granularity}writeValue(e){this.setOverride(),this._invalid=!1,this._value=e,this._calendar=this.workspace.calendar,this._dateFormat=this.workspace.dateFormat,this.picker.writeValue(e)}registerOnChange(e){this.picker.registerOnChange(t=>{t&&t!==this.input.nativeElement.value?(this._invalid=!1,this._value=t,this._calendar=this.workspace.calendar,this._dateFormat=this.workspace.dateFormat,e(t)):(this._invalid=!!t,delete this._value,delete this._calendar,delete this._dateFormat,e(void 0))})}validate(e){const{value:t}=e;return this._invalid?{ngbDate:{invalid:t}}:null}registerOnTouched(e){this.picker.registerOnTouched(e)}setDisabledState(e){this.isDisabled=e,this.picker.setDisabledState(e)}registerOnValidatorChange(e){this.picker.registerOnValidatorChange(e)}get format(){return this.workspace.dateFormatForPicker}onFocus(){this.setOverride()}onClick(){this.setOverride(),this.picker.toggle()}get getAltCalendar(){if(this.workspace.isApp){const e=this.workspace.currentTenant,t=e.settings;if(t.SecondaryCalendar)return(this.altCalendar||e.calendar)===t.PrimaryCalendar?t.SecondaryCalendar:t.PrimaryCalendar}}get altCalendarName(){const e=this.getAltCalendar;if(e)return this.translate.instant("Calendar_"+e)}onAltCalendar(){this.altCalendar=this.getAltCalendar,this.onCalendarChange()}deleteAltCalendarIfRedundant(){this.workspace.isApp&&this.workspace.currentTenant.calendar===this.altCalendar&&delete this.altCalendar}get disableAltCalendar(){return!!this.calendar||!this.workspace.isApp||!this.workspace.currentTenant.settings.SecondaryCalendar}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-date-picker"]],viewQuery:function(e,t){if(1&e&&(c.Qc(_u,3),c.Qc(Ju,3)),2&e){let e;c.zc(e=c.dc())&&(t.picker=e.first),c.zc(e=c.dc())&&(t.input=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("w-100",t.w100)},inputs:{calendar:"calendar",granularity:"granularity"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e},{provide:te.f,multi:!0,useExisting:e}]),c.xb],decls:7,vars:4,consts:[[1,"input-group"],["ngbDatepicker","","container","body","outsideDays","visible",1,"form-control","t-input",3,"placeholder","focus"],["i","","d","ngbDatepicker"],[4,"ngIf"],["altCalendar",""],["tabindex","-1","type","button",1,"btn","btn-light","btn-sm","text-primary","t-white-button","p-0","px-1","align-baseline",2,"width","22.6px",3,"tContextMenu","tDisableMenu","click"],["icon","calendar-alt"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","py-1",3,"click"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"input",1,2),c.cc("focus",function(){return t.onFocus()}),c.Rb(),c.Jc(4,Pu,3,2,"ng-container",3),c.Rb(),c.Jc(5,Fu,4,1,"ng-template",null,4,c.Kc)),2&e&&(c.Eb("t-disabled-background",t.isDisabled),c.zb(1),c.nc("placeholder",t.format),c.zb(3),c.nc("ngIf",!t.isDisabled))},directives:[G.s,C.l,ge.a,ee.a],encapsulation:2}),e})();const qu=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},ju=function(e,t,n){return{template:e,action:t,showAction:n}},$u=function(e,t,n){return[e,t,n]};function Uu(e,t){if(1&e&&c.Nb(0,"t-details",7),2&e){const e=c.gc(),t=c.Ac(4),n=c.Ac(6),i=c.Ac(8),o=c.Ac(10),r=c.Ac(12);c.nc("definitionId",e.definitionId)("createFunc",e.create)("expand",e.expand)("mode",e.mode)("additionalSelect",e.additionalSelect)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("idString",e.idString)("documentTemplate",n)("actions",c.tc(26,$u,c.vc(10,qu,i,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.vc(16,qu,o,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.tc(22,ju,r,e.onEditDefinition,e.showEditDefinition)))}}function Ku(e,t){if(1&e&&c.Nb(0,"t-application-page-not-found",8),2&e){const e=c.gc();c.nc("showHome",!e.isPopupMode)}}function Bu(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function Hu(e,t){if(1&e&&(c.Sb(0,"h2",18),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const Qu=function(){return{updateOn:"blur"}};function Wu(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,Qu))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Gu(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,Qu))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Yu(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,Qu))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Xu(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function Zu(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,Qu))}}function ed(e,t){if(1&e&&(c.Sb(0,"t-form-group",14),c.hc(1,"translate"),c.Jc(2,Xu,2,1,"div",15),c.Jc(3,Zu,1,3,"t-text-editor",21),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function td(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function nd(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,Qu))}}function id(e,t){if(1&e&&(c.Sb(0,"t-form-group",14),c.hc(1,"translate"),c.Jc(2,td,2,1,"div",15),c.Jc(3,nd,1,3,"t-text-editor",16),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function cd(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function od(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,Qu))}}function rd(e,t){if(1&e&&(c.Sb(0,"t-form-group",14),c.hc(1,"translate"),c.Jc(2,cd,2,1,"div",15),c.Jc(3,od,1,3,"t-text-editor",16),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function sd(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function ld(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Code)("ngModelOptions",c.qc(2,Qu))}}function ad(e,t){if(1&e&&(c.Sb(0,"t-form-group",24),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",25),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("label",c.ic(1,3,"IsActive")),c.zb(2),c.nc("definitionId",t.definitionId)("entity",e)}}const ud=function(e,t){return{id:e,cache_buster:t}};function dd(e,t){if(1&e&&(c.Sb(0,"div",35),c.Nb(1,"t-report-results",36),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3).model,n=c.gc();c.zb(1),c.nc("definition",n.reportDefinition(e))("arguments",c.sc(4,ud,null==t?null:t.Id,null==t||null==t.EntityMetadata?null:t.EntityMetadata.$refresh))("view",n.reportView(e))("state",n.state(e))}}function bd(e,t){if(1&e&&(c.Sb(0,"li",31),c.Sb(1,"a",32),c.Sb(2,"span",33),c.Lc(3),c.Rb(),c.Rb(),c.Jc(4,dd,2,7,"ng-template",34),c.Rb()),2&e){const e=t.$implicit;c.gc();const n=c.Ac(3),i=c.gc(3);c.nc("ngbNavItem",e.ReportDefinitionId),c.zb(1),c.nc("tContextMenu",n)("tContext",e.ReportDefinitionId),c.zb(2),c.Mc(i.reportTitle(e))}}function gd(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",37),c.Sb(1,"ul",38),c.Sb(2,"li",39),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.close,o=c.gc(3).model;return c.gc().onExpandReport(n,o),i()}),c.Sb(3,"div",40),c.Nb(4,"fa-icon",41),c.Rb(),c.Sb(5,"div",42),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}2&e&&(c.zb(6),c.Nc(" ",c.ic(7,1,"Expand")," "))}function fd(e,t){if(1&e&&(c.Qb(0),c.Jc(1,bd,5,4,"li",29),c.Jc(2,gd,8,3,"ng-template",null,30,c.Kc),c.Pb()),2&e){const e=c.gc(3);c.zb(1),c.nc("ngForOf",e.reports)}}function md(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"ul",26,27),c.cc("activeIdChange",function(t){return c.Dc(e),c.gc(2).activeTab=t}),c.Jc(3,fd,4,1,"ng-container",15),c.Rb(),c.Nb(4,"div",28),c.Pb()}if(2&e){const e=c.Ac(2),t=c.gc(),n=t.isEdit,i=t.model,o=c.gc();c.zb(1),c.nc("destroyOnHide",!0)("activeId",o.activeTab),c.zb(2),c.nc("ngIf",o.showReports(n,i)),c.zb(1),c.nc("ngbNavOutlet",e)}}function hd(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.Jc(1,Hu,2,1,"h2",10),c.Jc(2,Wu,2,7,"t-text-editor",11),c.Jc(3,Gu,2,7,"t-text-editor",12),c.Jc(4,Yu,2,7,"t-text-editor",12),c.Rb(),c.Jc(5,ed,4,6,"t-form-group",13),c.Jc(6,id,4,6,"t-form-group",13),c.Jc(7,rd,4,6,"t-form-group",13),c.Sb(8,"t-form-group",14),c.hc(9,"translate"),c.Jc(10,sd,2,1,"div",15),c.Jc(11,ld,1,3,"t-text-editor",16),c.Rb(),c.Jc(12,ad,3,5,"t-form-group",17),c.Jc(13,md,5,4,"ng-container",15)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,14,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",i.showTabs(n,e))}}function pd(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function Sd(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function vd(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"EditDefinition")," ")}let Id=(()=>{class e extends mn.a{constructor(e,t,n,i,c){super(),this.workspace=e,this.api=t,this.translate=n,this.router=i,this.route=c,this.lookupsApi=this.api.lookupsApi(null,this.notifyDestruct$),this.expand="",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.onActivate=e=>{e&&e.Id&&this.lookupsApi.activate([e.Id],{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.lookupsApi.deactivate([e.Id],{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onEditDefinition=e=>{const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../../lookup-definitions",this.definitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.showEditDefinition=e=>this.ws.canDo("lookup-definitions","Update",null),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this._definitionId=e,this.lookupsApi=this.api.lookupsApi(e,this.notifyDestruct$))}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");t&&this.ws.definitions.Lookups[t]||this.router.navigate(["page-not-found"],{relativeTo:this.route.parent,replaceUrl:!0}),this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`lookups/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Lookups[this.definitionId]:null)}get found(){return!!this.definition}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}showTabs(e,t){return this.reports.length>0&&this.showReports(e,t)}showReports(e,t){return!!t&&!!t.Id}get reports(){return this.definition.ReportDefinitions}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}reportTitle(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}state(e){const t=`lookups_details_${this.definitionId}_${e.ReportDefinitionId}`,n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new L.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}get activeTabKey(){return`lookups_details_${this.definitionId}_activeTab`}get activeTab(){const e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]}set activeTab(e){this.ws.miscState[this.activeTabKey]=e}onExpandReport(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(i.e),c.Mb(i.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-lookups-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[c.wb],decls:13,vars:2,consts:[["collection","Lookup",3,"definitionId","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Lookup",3,"definitionId","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],[3,"showHome"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Lookup","path","IsActive",3,"definitionId","entity"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],[1,"w-100",3,"ngbNavOutlet"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"]],template:function(e,t){if(1&e&&(c.Jc(0,Uu,1,30,"t-details",0),c.Jc(1,Ku,1,1,"ng-template",null,1,c.Kc),c.Jc(3,Bu,2,1,"ng-template",null,2,c.Kc),c.Jc(5,hd,14,16,"ng-template",null,3,c.Kc),c.Jc(7,pd,2,3,"ng-template",null,4,c.Kc),c.Jc(9,Sd,2,3,"ng-template",null,5,c.Kc),c.Jc(11,vd,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,q.a,nn,he.a,pe.a,te.m,te.i,te.j,me.a,G.v,G.A,C.k,G.x,G.y,ge.a,G.w,is,ee.a],pipes:[K.c],encapsulation:2}),e})();const Md=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Rd=function(e,t){return[e,t]},yd=function(e){return{template:e,expression:"CreatedById eq me"}},Dd=function(e){return[e]},wd=function(e){return{CreatedBy:e}};function Ed(e,t){if(1&e&&c.Nb(0,"t-master",8),2&e){const e=c.gc(),t=c.Ac(4),n=c.Ac(8),i=c.Ac(6),o=c.Ac(10),r=c.Ac(12),s=c.Ac(14);c.nc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("multiselectActions",c.sc(21,Rd,c.uc(11,Md,o,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.uc(16,Md,r,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",c.rc(28,wd,c.rc(26,Dd,c.rc(24,yd,s))))}}function Cd(e,t){if(1&e&&c.Nb(0,"t-application-page-not-found",9),2&e){const e=c.gc();c.nc("showHome",!e.isPopupMode)}}function xd(e,t){if(1&e&&(c.Sb(0,"div",10),c.Nb(1,"t-auto-cell",11),c.Rb(),c.Sb(2,"div",12),c.Nb(3,"t-auto-cell",13),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("definitionId",n.definitionId)("entity",n.c[e]),c.zb(2),c.nc("definitionId",n.definitionId)("entity",n.c[e])}}function Td(e,t){if(1&e&&c.Lc(0),2&e){const e=c.gc();c.Nc(" ",e.summary,"\n")}}function zd(e,t){if(1&e&&(c.Sb(0,"span",14),c.Nb(1,"t-auto-cell",15),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("definitionId",n.definitionId)("entity",n.c[e])}}function Ld(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function kd(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function Od(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}let Ad=(()=>{class e extends xt.a{constructor(e,t,n,i,c){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=c,this.lookupsApi=this.api.lookupsApi(null,this.notifyDestruct$),this.expand="",this.onActivate=e=>this.lookupsApi.activate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.lookupsApi.deactivate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.lookupsApi=this.api.lookupsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`lookups/${this.definitionId}`}get c(){return this.ws.Lookup}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Lookups[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Lookups")}get summary(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Lookup")}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(i.e),c.Mb(i.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-lookups-master"]],inputs:{definitionId:"definitionId"},features:[c.wb],decls:15,vars:2,consts:[["collection","Lookup","selectDefault","Code,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Lookup","selectDefault","Code,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex","justify-content-between"],["collection","Lookup","path","",3,"definitionId","entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","Lookup","path","Code",3,"definitionId","entity"],[1,"text-truncate"],["collection","Lookup",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(c.Jc(0,Ed,1,30,"t-master",0),c.Jc(1,Cd,1,1,"ng-template",null,1,c.Kc),c.Jc(3,xd,4,4,"ng-template",null,2,c.Kc),c.Jc(5,Td,1,1,"ng-template",null,3,c.Kc),c.Jc(7,zd,2,2,"ng-template",null,4,c.Kc),c.Jc(9,Ld,2,3,"ng-template",null,5,c.Kc),c.Jc(11,kd,2,3,"ng-template",null,6,c.Kc),c.Jc(13,Od,2,3,"ng-template",null,7,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,Tt.a,nn,me.a],pipes:[K.c],encapsulation:2}),e})();function Nd(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-lookups-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=t.definitionId,o=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("definitionId",i)("additionalSelect",o.additionalSelect)}}function _d(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-lookups-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.definitionId,n=t.filter,i=c.gc();c.zb(1),c.nc("definitionId",e)("filter",n)("showCreate",i.showCreate)("additionalSelect",i.additionalSelect)}}const Jd=function(e){return[e]};let Pd=(()=>{class e extends Js{}return e.\u0275fac=function(t){return Fd(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-lookups-picker"]],inputs:{definitionId:"definitionId"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:9,consts:[["collection","Lookup",3,"definitionIds","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","filter","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,Nd,2,4,"ng-template",null,1,c.Kc),c.Jc(3,_d,2,4,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("definitionIds",c.rc(7,Jd,t.definitionId))("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("filter",t.filter)("additionalSelect",t.additionalSelect)}},directives:[_s,Id,Ad],encapsulation:2}),e})();const Fd=c.Ub(Pd);function Vd(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function qd(e,t){if(1&e&&(c.Sb(0,"h2",14),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const jd=function(){return{updateOn:"blur"}};function $d(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",15),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,jd))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Ud(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",16),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,jd))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Kd(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",16),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,jd))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Bd(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function Hd(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,jd))}}function Qd(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Bd,2,1,"div",17),c.Jc(3,Hd,1,3,"t-text-editor",18),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Wd(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function Gd(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,jd))}}function Yd(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Wd,2,1,"div",17),c.Jc(3,Gd,1,3,"t-text-editor",20),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Xd(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function Zd(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,jd))}}function eb(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Xd,2,1,"div",17),c.Jc(3,Zd,1,3,"t-text-editor",20),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function tb(e,t){if(1&e&&(c.Sb(0,"t-restricted",22),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc().model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.IsRelated),c.zb(1),c.Nc(" ",c.ic(2,2,null!=e&&e.IsRelated?"Yes":"No")," ")}}function nb(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",23),c.Sb(1,"input",24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.IsRelated=t}),c.Rb(),c.Sb(2,"label",25),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc().model;c.zb(1),c.nc("ngModel",e.IsRelated)}}function ib(e,t){if(1&e&&(c.Sb(0,"t-form-group",26),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",27),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(2),c.nc("entity",e)}}function cb(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,qd,2,1,"h2",6),c.Jc(2,$d,2,7,"t-text-editor",7),c.Jc(3,Ud,2,7,"t-text-editor",8),c.Jc(4,Kd,2,7,"t-text-editor",8),c.Rb(),c.Jc(5,Qd,4,6,"t-form-group",9),c.Jc(6,Yd,4,6,"t-form-group",9),c.Jc(7,eb,4,6,"t-form-group",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Jc(10,tb,3,4,"t-restricted",11),c.Jc(11,nb,4,1,"div",12),c.Rb(),c.Jc(12,ib,3,4,"t-form-group",13)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,13,"Agent_IsRelated"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.IsRelated),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n)}}function ob(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function rb(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const sb=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},lb=function(e,t){return[e,t]};let ab=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.agentsApi=this.api.agentsApi(this.notifyDestruct$),this.expand="",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsRelated=!1,e},this.onActivate=e=>{e&&e.Id&&this.agentsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.agentsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("agents","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.agentsApi=this.api.agentsApi(this.notifyDestruct$)}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-agents-details"]],features:[c.wb],decls:10,vars:26,consts:[["collection","Agent",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[3,"metadata",4,"ngIf"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isRelated",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isRelated",1,"custom-control-label","t-pointer"],[1,"t-form-group",3,"label"],["collection","Unit","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Vd,2,1,"ng-template",null,1,c.Kc),c.Jc(4,cb,13,15,"ng-template",null,2,c.Kc),c.Jc(6,ob,2,3,"ng-template",null,3,c.Kc),c.Jc(8,rb,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,9,"Agents"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.sc(23,lb,c.vc(11,sb,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(17,sb,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,pe.a,te.m,te.i,te.j,hn.a,te.a,me.a],pipes:[K.c],encapsulation:2}),e})();function ub(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",9),c.Sb(4,"span",8),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("Agent",e,"Name")),c.zb(3),c.Mc(n.ws.getMultilingualValue("Agent",e,"Description"))}}function db(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Agent"),"\n")}function bb(e,t){if(1&e&&(c.Sb(0,"span",10),c.Nb(1,"t-auto-cell",11),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function gb(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function fb(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function mb(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}const hb=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},pb=function(e,t){return[e,t]},Sb=function(e){return{template:e,expression:"CreatedById eq me"}},vb=function(e){return[e]},Ib=function(e){return{CreatedBy:e}};let Mb=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.agentsApi=this.api.agentsApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.agentsApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.agentsApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("agents","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.agentsApi=this.api.agentsApi(this.notifyDestruct$)}get c(){return this.ws.Agent}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-agents-master"]],features:[c.wb],decls:14,vars:31,consts:[["collection","Agent","selectDefault","IsRelated,IsActive","selectForTiles","Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Agent",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,ub,6,2,"ng-template",null,1,c.Kc),c.Jc(4,db,2,3,"ng-template",null,2,c.Kc),c.Jc(6,bb,2,1,"ng-template",null,3,c.Kc),c.Jc(8,gb,2,3,"ng-template",null,4,c.Kc),c.Jc(10,fb,2,3,"ng-template",null,5,c.Kc),c.Jc(12,mb,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"Agents"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(22,pb,c.uc(12,hb,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(17,hb,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.rc(29,Ib,c.rc(27,vb,c.rc(25,Sb,s))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();function Rb(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-agents-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function yb(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-agents-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let Db=(()=>{class e extends Js{}return e.\u0275fac=function(t){return wb(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-agents-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","Agent",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,Rb,2,3,"ng-template",null,1,c.Kc),c.Jc(3,yb,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,ab,Mb],encapsulation:2}),e})();const wb=c.Ub(Db);function Eb(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-relations-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=t.definitionId,o=c.gc();c.zb(1),c.nc("idString",n)("initialText",e)("definitionId",i)("additionalSelect",o.additionalSelect)}}function Cb(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-relations-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.definitionId,n=t.filter,i=c.gc();c.zb(1),c.nc("definitionId",e)("filter",n)("showCreate",i.showCreate)("additionalSelect",i.additionalSelect)}}let xb=(()=>{class e extends Js{}return e.\u0275fac=function(t){return Tb(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-relations-picker"]],inputs:{definitionIds:"definitionIds"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:7,consts:[["collection","Relation",3,"masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","definitionIds","filter","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"idString","initialText","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,Eb,2,4,"ng-template",null,1,c.Kc),c.Jc(3,Cb,2,4,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("definitionIds",t.definitionIds)("filter",t.filter)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const Tb=c.Ub(xb),zb=["input"];let Lb=(()=>{class e{constructor(){this.placeholder="",this.w100=!0,this.onChangeFn=e=>{},this.onTouchedFn=()=>{}}focus(){this.input.nativeElement&&this.input.nativeElement.focus()}select(){this.input.nativeElement&&this.input.nativeElement.select()}writeValue(e){this.input.nativeElement.value=e=e||""}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.input.nativeElement.disabled=e}onChange(e){this.onChangeFn(e||void 0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-multiline-editor"]],viewQuery:function(e,t){if(1&e&&c.Qc(zb,3),2&e){let e;c.zc(e=c.dc())&&(t.input=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("w-100",t.w100)},inputs:{placeholder:"placeholder"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}])],decls:2,vars:1,consts:[["autocomplete","off","rows","3",1,"form-control","t-input",3,"placeholder","input","blur"],["input",""]],template:function(e,t){1&e&&(c.Sb(0,"textarea",0,1),c.cc("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouchedFn()}),c.Rb()),2&e&&c.nc("placeholder",t.placeholder)},encapsulation:2}),e})(),kb=(()=>{class e{constructor(e,t){this.workspace=e,this.translate=t,this._markForCheck=!0,this._subscriptions=new O.a,this._subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.markForCheck()})),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>{this._wsCalendar&&this._wsCalendar!==this.workspace.calendar&&this.markForCheck(),this._wsDateFormat&&this._wsDateFormat!==this.workspace.dateFormat&&this.markForCheck()}}))}markForCheck(){this._markForCheck=!0}ngOnDestroy(){this._subscriptions&&this._subscriptions.unsubscribe()}transform(e,t,n){return(this._markForCheck||this._isoDate!==e||this._calendar!==t||this._granularity!==n)&&(this._markForCheck=!1,this._isoDate=e,this._calendar=t,this._granularity=n,this._wsCalendar=this.workspace.calendar,this._wsDateFormat=this.workspace.dateFormat,this._formattedValue=Object(ve.a)(e,this.workspace,this.translate,t,n)),this._formattedValue}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275pipe=c.Lb({name:"dateFormat",type:e,pure:!1}),e})();var Ob=n("Uqe3");let Ab=(()=>{class e{transform(e,t){return Object(V.n)(e)?Object(Ob.a)(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Lb({name:"accounting",type:e,pure:!0}),e})();const Nb=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},_b=function(e,t,n){return{template:e,action:t,showAction:n}},Jb=function(e,t,n){return[e,t,n]};function Pb(e,t){if(1&e&&c.Nb(0,"t-details",7),2&e){const e=c.gc(),t=c.Ac(4),n=c.Ac(6),i=c.Ac(8),o=c.Ac(10),r=c.Ac(12);c.nc("definitionId",e.definitionId)("createFunc",e.create)("cloneFunc",e.clone)("expand",e.expand)("mode",e.mode)("additionalSelect",e.additionalSelect)("idString",e.idString)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("documentTemplate",n)("actions",c.tc(27,Jb,c.vc(11,Nb,i,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.vc(17,Nb,o,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.tc(23,_b,r,e.onEditDefinition,e.showEditDefinition)))}}function Fb(e,t){if(1&e&&c.Nb(0,"t-application-page-not-found",8),2&e){const e=c.gc();c.nc("showHome",!e.isPopupMode)}}function Vb(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function qb(e,t){if(1&e&&(c.Sb(0,"h2",20),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const jb=function(){return{updateOn:"blur"}};function $b(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,jb))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Ub(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,jb))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Kb(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,jb))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Bb(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-image",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Image=t}),c.Rb()}if(2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("src",t.Id?"relations/"+i.definitionId+"/"+t.Id+"/image":null)("imageId",null==t?null:t.ImageId)("ngModel",t.Image)("isEdit",n)}}function Hb(e,t){if(1&e&&(c.Sb(0,"div",23),c.Sb(1,"t-restricted",24),c.Sb(2,"div",25),c.Jc(3,Bb,1,4,"t-image",26),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ImageId),c.zb(2),c.nc("ngIf",!!e)}}function Qb(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function Wb(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",29),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,jb))}}function Gb(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Qb,2,1,"div",16),c.Jc(3,Wb,1,3,"t-text-editor",28),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Yb(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function Xb(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,jb))}}function Zb(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Yb,2,1,"div",16),c.Jc(3,Xb,1,3,"t-text-editor",17),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function eg(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function tg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,jb))}}function ng(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,eg,2,1,"div",16),c.Jc(3,tg,1,3,"t-text-editor",17),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function ig(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function cg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Code)("ngModelOptions",c.qc(2,jb))}}function og(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",33),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Users),c.zb(1),c.nc("itemId",t.getUserId(e)),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",t.getUserId(e),"Name")," ")}}function rg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-users-picker",34),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).model;return c.gc().setUserId(n,t)}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",t.getUserId(e))}}function sg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,og,3,3,"t-restricted",31),c.Jc(3,rg,1,1,"t-users-picker",32),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Relation_User"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Users),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function lg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",36),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Currency),c.zb(1),c.nc("itemId",null==e?null:e.CurrencyId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")," ")}}function ag(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",37),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.CurrencyId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.CurrencyId)("required",t.Currency_isRequired)}}function ug(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,lg,3,3,"t-restricted",31),c.Jc(2,ag,1,2,"t-currencies-picker",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Currency_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function dg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",38),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Center),c.zb(1),c.nc("itemId",null==e?null:e.CenterId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Center",e.CenterId,"Name")," ")}}function bg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",37),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.CenterId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.CenterId)("required",t.Center_isRequired)}}function gg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,dg,3,3,"t-restricted",31),c.Jc(2,bg,1,2,"t-centers-picker",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Center_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function fg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.DateOfBirth),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.DateOfBirth))}}function mg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.DateOfBirth=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.DateOfBirth)("ngModelOptions",c.qc(3,jb))("required",t.DateOfBirth_isRequired)}}function hg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,fg,4,4,"t-restricted",31),c.Jc(3,mg,1,4,"t-date-picker",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Relation_DateOfBirth"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.DateOfBirth),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function pg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ContactEmail),c.zb(2),c.Mc(null==e?null:e.ContactEmail)}}function Sg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ContactEmail=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ContactEmail)("ngModelOptions",c.qc(3,jb))("required",t.ContactEmail_isRequired)}}function vg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,pg,3,2,"t-restricted",31),c.Jc(3,Sg,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Entity_ContactEmail"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactEmail),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ig(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ContactMobile),c.zb(2),c.Mc(null==e?null:e.ContactMobile)}}function Mg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ContactMobile=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ContactMobile)("ngModelOptions",c.qc(3,jb))("required",t.ContactMobile_isRequired)}}function Rg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Ig,3,2,"t-restricted",31),c.Jc(3,Mg,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Entity_ContactMobile"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactMobile),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function yg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ContactAddress),c.zb(2),c.Mc(null==e?null:e.ContactAddress)}}function Dg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ContactAddress=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ContactAddress)("ngModelOptions",c.qc(3,jb))("required",t.ContactAddress_isRequired)}}function wg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,yg,3,2,"t-restricted",31),c.Jc(3,Dg,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Entity_ContactAddress"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactAddress),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Eg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup1),c.zb(1),c.nc("link","../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup1Id))?null:n.DefinitionId))("itemId",null==e?null:e.Lookup1Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup1Id,"Name")," ")}}function Cg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup1Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup1Id)("definitionId",t.Lookup1_DefinitionId)("required",t.Lookup1_isRequired)}}function xg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Eg,3,4,"t-restricted",31),c.Jc(2,Cg,1,3,"t-lookups-picker",41),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup1Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Tg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup2),c.zb(1),c.nc("link","../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup2Id))?null:n.DefinitionId))("itemId",null==e?null:e.Lookup2Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup2Id,"Name")," ")}}function zg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup2Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup2Id)("definitionId",t.Lookup2_DefinitionId)("required",t.Lookup2_isRequired)}}function Lg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Tg,3,4,"t-restricted",31),c.Jc(2,zg,1,3,"t-lookups-picker",41),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup2Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function kg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup3),c.zb(1),c.nc("link","../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup3Id))?null:n.DefinitionId))("itemId",null==e?null:e.Lookup3Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup3Id,"Name")," ")}}function Og(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup3Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup3Id)("definitionId",t.Lookup3_DefinitionId)("required",t.Lookup3_isRequired)}}function Ag(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,kg,3,4,"t-restricted",31),c.Jc(2,Og,1,3,"t-lookups-picker",41),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup3Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ng(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup4),c.zb(1),c.nc("link","../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup4Id))?null:n.DefinitionId))("itemId",null==e?null:e.Lookup4Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup4Id,"Name")," ")}}function _g(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup4Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup4Id)("definitionId",t.Lookup4_DefinitionId)("required",t.Lookup4_isRequired)}}function Jg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Ng,3,4,"t-restricted",31),c.Jc(2,_g,1,3,"t-lookups-picker",41),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup4Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Pg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup5),c.zb(1),c.nc("link","../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup5Id))?null:n.DefinitionId))("itemId",null==e?null:e.Lookup5Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup5Id,"Name")," ")}}function Fg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup5Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup5Id)("definitionId",t.Lookup5_DefinitionId)("required",t.Lookup5_isRequired)}}function Vg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Pg,3,4,"t-restricted",31),c.Jc(2,Fg,1,3,"t-lookups-picker",41),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup5_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup5Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function qg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup6),c.zb(1),c.nc("link","../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup6Id))?null:n.DefinitionId))("itemId",null==e?null:e.Lookup6Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup6Id,"Name")," ")}}function jg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup6Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup6Id)("definitionId",t.Lookup6_DefinitionId)("required",t.Lookup6_isRequired)}}function $g(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,qg,3,4,"t-restricted",31),c.Jc(2,jg,1,3,"t-lookups-picker",41),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup6_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup6Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ug(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup7),c.zb(1),c.nc("link","../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup7Id))?null:n.DefinitionId))("itemId",null==e?null:e.Lookup7Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup7Id,"Name")," ")}}function Kg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup7Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup7Id)("definitionId",t.Lookup7_DefinitionId)("required",t.Lookup7_isRequired)}}function Bg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Ug,3,4,"t-restricted",31),c.Jc(2,Kg,1,3,"t-lookups-picker",41),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup7_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup7Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Hg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup8),c.zb(1),c.nc("link","../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup8Id))?null:n.DefinitionId))("itemId",null==e?null:e.Lookup8Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup8Id,"Name")," ")}}function Qg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup8Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup8Id)("definitionId",t.Lookup8_DefinitionId)("required",t.Lookup8_isRequired)}}function Wg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Hg,3,4,"t-restricted",31),c.Jc(2,Qg,1,3,"t-lookups-picker",41),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup8_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup8Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Gg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Date1),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.Date1))}}function Yg(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Date1=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Date1)("ngModelOptions",c.qc(3,jb))("required",t.Date1_isRequired)}}function Xg(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Gg,4,4,"t-restricted",31),c.Jc(2,Yg,1,4,"t-date-picker",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Date1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Date1),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Zg(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Date2),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.Date2))}}function ef(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Date2=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Date2)("ngModelOptions",c.qc(3,jb))("required",t.Date2_isRequired)}}function tf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Zg,4,4,"t-restricted",31),c.Jc(2,ef,1,4,"t-date-picker",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Date2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Date2),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function nf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Date3),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.Date3))}}function cf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Date3=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Date3)("ngModelOptions",c.qc(3,jb))("required",t.Date3_isRequired)}}function of(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,nf,4,4,"t-restricted",31),c.Jc(2,cf,1,4,"t-date-picker",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Date3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Date3),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function rf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Date4),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.Date4))}}function sf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Date4=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Date4)("ngModelOptions",c.qc(3,jb))("required",t.Date4_isRequired)}}function lf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,rf,4,4,"t-restricted",31),c.Jc(2,sf,1,4,"t-date-picker",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Date4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Date4),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function af(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal1),c.zb(2),c.Mc(c.jc(3,2,null==e?null:e.Decimal1,"1.0-4"))}}function uf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Decimal1=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Decimal1)("ngModelOptions",c.qc(5,jb))("required",t.Decimal1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function df(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,af,4,5,"t-restricted",31),c.Jc(2,uf,1,6,"t-decimal-editor",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Decimal1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal1),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function bf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal2),c.zb(2),c.Mc(c.jc(3,2,null==e?null:e.Decimal2,"1.0-4"))}}function gf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Decimal2=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Decimal2)("ngModelOptions",c.qc(5,jb))("required",t.Decimal2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function ff(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,bf,4,5,"t-restricted",31),c.Jc(2,gf,1,6,"t-decimal-editor",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Decimal2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal2),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function mf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int1),c.zb(2),c.Mc(c.jc(3,2,null==e?null:e.Int1,"1.0-0"))}}function hf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Int1=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Int1)("ngModelOptions",c.qc(5,jb))("required",t.Int1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function pf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,mf,4,5,"t-restricted",31),c.Jc(2,hf,1,6,"t-decimal-editor",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Int1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int1),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Sf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int2),c.zb(2),c.Mc(c.jc(3,2,null==e?null:e.Int2,"1.0-0"))}}function vf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Int2=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Int2)("ngModelOptions",c.qc(5,jb))("required",t.Int2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function If(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Sf,4,5,"t-restricted",31),c.Jc(2,vf,1,6,"t-decimal-editor",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Int2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int2),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Mf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text1),c.zb(2),c.Mc(null==e?null:e.Text1)}}function Rf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Text1=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Text1)("ngModelOptions",c.qc(3,jb))("required",t.Text1_isRequired)}}function yf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Mf,3,2,"t-restricted",31),c.Jc(2,Rf,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Text1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text1),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Df(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text2),c.zb(2),c.Mc(null==e?null:e.Text2)}}function wf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Text2=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Text2)("ngModelOptions",c.qc(3,jb))("required",t.Text2_isRequired)}}function Ef(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Df,3,2,"t-restricted",31),c.Jc(2,wf,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Text2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text2),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Cf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text3),c.zb(2),c.Mc(null==e?null:e.Text3)}}function xf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Text3=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Text3)("ngModelOptions",c.qc(3,jb))("required",t.Text3_isRequired)}}function Tf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Cf,3,2,"t-restricted",31),c.Jc(2,xf,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Text3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text3),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function zf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text4),c.zb(2),c.Mc(null==e?null:e.Text4)}}function Lf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Text4=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Text4)("ngModelOptions",c.qc(3,jb))("required",t.Text4_isRequired)}}function kf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,zf,3,2,"t-restricted",31),c.Jc(2,Lf,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Text4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text4),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Of(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.FromDate),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.FromDate))}}function Af(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.FromDate=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.FromDate)("ngModelOptions",c.qc(3,jb))("required",t.FromDate_isRequired)}}function Nf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Of,4,4,"t-restricted",31),c.Jc(2,Af,1,4,"t-date-picker",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.FromDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.FromDate),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function _f(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ToDate),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.ToDate))}}function Jf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ToDate=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ToDate)("ngModelOptions",c.qc(3,jb))("required",t.ToDate_isRequired)}}function Pf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,_f,4,4,"t-restricted",31),c.Jc(2,Jf,1,4,"t-date-picker",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.ToDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ToDate),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ff(e,t){if(1&e&&(c.Sb(0,"t-view-link",47),c.Nb(1,"t-auto-cell",48),c.Rb()),2&e){const e=c.gc(2).model;c.nc("itemId",null==e?null:e.AgentId),c.zb(1),c.nc("entity",e)}}function Vf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-agents-picker",37),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.AgentId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.AgentId)("required",t.Agent_isRequired)}}function qf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Ff,2,2,"t-view-link",46),c.Jc(3,Vf,1,2,"t-agents-picker",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Relation_Agent"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.AgentId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function jf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.TaxIdentificationNumber),c.zb(2),c.Mc(null==e?null:e.TaxIdentificationNumber)}}function $f(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TaxIdentificationNumber=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.TaxIdentificationNumber)("ngModelOptions",c.qc(3,jb))("required",t.TaxIdentificationNumber_isRequired)}}function Uf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,jf,3,2,"t-restricted",31),c.Jc(3,$f,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Relation_TaxIdentificationNumber"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.TaxIdentificationNumber),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Kf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.BankAccountNumber),c.zb(2),c.Mc(null==e?null:e.BankAccountNumber)}}function Bf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.BankAccountNumber=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.BankAccountNumber)("ngModelOptions",c.qc(3,jb))("required",t.BankAccountNumber_isRequired)}}function Hf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Kf,3,2,"t-restricted",31),c.Jc(3,Bf,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Relation_BankAccountNumber"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.BankAccountNumber),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Qf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ExternalReference),c.zb(2),c.Mc(null==e?null:e.ExternalReference)}}function Wf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ExternalReference=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ExternalReference)("ngModelOptions",c.qc(3,jb))("required",t.ExternalReference_isRequired)}}function Gf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Qf,3,2,"t-restricted",31),c.Jc(2,Wf,1,4,"t-text-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.ExternalReference_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReference),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Yf(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",42),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Relation1),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",e.Relation1Id))?null:n.DefinitionId))("itemId",null==e?null:e.Relation1Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",e.Relation1Id,"Name")," ")}}function Xf(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",50),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Relation1Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Relation1Id)("definitionIds",t.Relation1_DefinitionIds)("required",t.Relation1_isRequired)}}function Zf(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Yf,3,4,"t-restricted",31),c.Jc(2,Xf,1,3,"t-relations-picker",49),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Relation1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Relation1Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function em(e,t){if(1&e&&(c.Sb(0,"div",52),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Description)}}function tm(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,em,2,1,"div",51),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description),c.zb(1),c.nc("ngIf",!n)}}function nm(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Description)("ngModelOptions",c.qc(3,jb))("required",t.Description_isRequired)}}function im(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,tm,2,2,"t-restricted",31),c.Jc(3,nm,1,4,"t-multiline-editor",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function cm(e,t){if(1&e&&(c.Sb(0,"div",52),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Description2)}}function om(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,cm,2,1,"div",51),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description2),c.zb(1),c.nc("ngIf",!n)}}function rm(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description2)("ngModelOptions",c.qc(2,jb))}}function sm(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,om,2,2,"t-restricted",31),c.Jc(3,rm,1,3,"t-multiline-editor",17),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function lm(e,t){if(1&e&&(c.Sb(0,"div",52),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Description3)}}function am(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,lm,2,1,"div",51),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description3),c.zb(1),c.nc("ngIf",!n)}}function um(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description3)("ngModelOptions",c.qc(2,jb))}}function dm(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,am,2,2,"t-restricted",31),c.Jc(3,um,1,3,"t-multiline-editor",17),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function bm(e,t){if(1&e&&(c.Sb(0,"t-form-group",53),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(3),c.Mc(c.ic(4,4,e?e.IsActive?"Active":"Inactive":""))}}function gm(e,t){1&e&&(c.Sb(0,"span",65),c.Nb(1,"fa-icon",66),c.Lc(2,"\xa0 "),c.Rb())}function fm(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"RelationUser_User"))}function mm(e,t){if(1&e&&(c.Sb(0,"t-view-link",33),c.Lc(1),c.Rb()),2&e){const e=c.gc().item,t=c.gc(5);c.nc("itemId",e.UserId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.UserId,"Name")," ")}}function hm(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-users-picker",37),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.UserId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item;c.nc("ngModel",e.UserId)("required",!e.PH)}}function pm(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",70),c.Jc(1,mm,2,2,"t-view-link",71),c.Jc(2,hm,1,2,"t-users-picker",35),c.Rb()),2&e){const e=t.item,n=c.gc(4).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.UserId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}const Sm=function(){return["User"]},vm=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Im=function(e){return{User:e}};function Mm(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Nb(1,"t-table",67),c.Rb(),c.Jc(2,fm,2,3,"ng-template",null,68,c.Kc),c.Jc(4,pm,3,3,"ng-template",null,69,c.Kc)),2&e){const e=c.Ac(3),t=c.Ac(5),n=c.gc(3),i=n.model,o=n.isEdit;c.Eb("p-4",1===(null==i||null==i.EntityMetadata?null:i.EntityMetadata.Users)),c.nc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Users),c.zb(1),c.nc("dataSource",null==i?null:i.Users)("isEdit",o)("columnPaths",c.qc(7,Sm))("columnTemplates",c.rc(11,Im,c.sc(8,vm,e,t)))}}function Rm(e,t){if(1&e&&(c.Sb(0,"li",64),c.Sb(1,"a",59),c.Jc(2,gm,3,0,"span",60),c.Sb(3,"span",61),c.Lc(4),c.hc(5,"translate"),c.hc(6,"number"),c.Rb(),c.Rb(),c.Jc(7,Mm,6,13,"ng-template",62),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("ngIf",t.Users_showError(e)),c.zb(2),c.Mc(c.ic(5,2,"Relation_Users")+(e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Users)?"":" ("+c.ic(6,4,t.Users_count(e))+")"))}}function ym(e,t){1&e&&(c.Sb(0,"span",65),c.Nb(1,"fa-icon",66),c.Lc(2,"\xa0 "),c.Rb())}function Dm(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div",73),c.Lc(2," TODO: Implement map viewer "),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model;c.Eb("p-4",1===(null==e||null==e.EntityMetadata?null:e.EntityMetadata.LocationJson)),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.LocationJson)}}function wm(e,t){if(1&e&&(c.Sb(0,"li",72),c.Sb(1,"a",59),c.Jc(2,ym,3,0,"span",60),c.Sb(3,"span",61),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Jc(6,Dm,3,3,"ng-template",62),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("ngIf",t.Map_showError(e)),c.zb(2),c.Mc(c.ic(5,2,"Entity_Location"))}}const Em=function(e,t){return{id:e,cache_buster:t}};function Cm(e,t){if(1&e&&(c.Sb(0,"div",78),c.Nb(1,"t-report-results",79),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3).model,n=c.gc();c.zb(1),c.nc("definition",n.reportDefinition(e))("arguments",c.sc(4,Em,null==t?null:t.Id,null==t||null==t.EntityMetadata?null:t.EntityMetadata.$refresh))("view",n.reportView(e))("state",n.state(e))}}function xm(e,t){if(1&e&&(c.Sb(0,"li",76),c.Sb(1,"a",77),c.Sb(2,"span",61),c.Lc(3),c.Rb(),c.Rb(),c.Jc(4,Cm,2,7,"ng-template",62),c.Rb()),2&e){const e=t.$implicit;c.gc();const n=c.Ac(3),i=c.gc(3);c.nc("ngbNavItem",e.ReportDefinitionId),c.zb(1),c.nc("tContextMenu",n)("tContext",e.ReportDefinitionId),c.zb(2),c.Mc(i.reportTitle(e))}}function Tm(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",80),c.Sb(1,"ul",81),c.Sb(2,"li",82),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.close,o=c.gc(3).model;return c.gc().onExpandReport(n,o),i()}),c.Sb(3,"div",83),c.Nb(4,"fa-icon",84),c.Rb(),c.Sb(5,"div",85),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}2&e&&(c.zb(6),c.Nc(" ",c.ic(7,1,"Expand")," "))}function zm(e,t){if(1&e&&(c.Qb(0),c.Jc(1,xm,5,4,"li",74),c.Jc(2,Tm,8,3,"ng-template",null,75,c.Kc),c.Pb()),2&e){const e=c.gc(3);c.zb(1),c.nc("ngForOf",e.reports)}}function Lm(e,t){1&e&&(c.Sb(0,"span",65),c.Nb(1,"fa-icon",66),c.Lc(2,"\xa0 "),c.Rb())}function km(e,t){1&e&&(c.Sb(0,"div",91),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Mc(c.ic(3,1,"NoItemsFound")))}function Om(e,t){1&e&&(c.Sb(0,"div",107),c.Nb(1,"t-spinner",108),c.Rb())}function Am(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",104),c.Sb(1,"button",105),c.cc("click",function(){c.Dc(e);const t=c.gc().index,n=c.gc(4).model;return c.gc().onDownloadAttachment(n,t)}),c.Lc(2),c.Rb(),c.Jc(3,Om,2,0,"div",106),c.Rb()}if(2&e){const e=c.gc().$implicit,t=c.gc(5);c.zb(2),c.Mc(t.fileName(e)),c.zb(1),c.nc("ngIf",e.downloading)}}function Nm(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",109),c.Sb(1,"t-form-group",110),c.Sb(2,"t-text-editor",29),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.attachment.FileName=t}),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc().$implicit;c.zb(1),c.nc("serverErrors",null==e.attachment||null==e.attachment.serverErrors?null:e.attachment.serverErrors.FileName),c.zb(1),c.nc("ngModel",e.attachment.FileName)("ngModelOptions",c.qc(3,jb))}}const _m=function(e,t){return{0:e,1:t}};function Jm(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.hc(3,"datetimeFormat"),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(5);c.zb(1),c.Nc("",c.jc(2,1,"AttachmentAudit",c.sc(6,_m,c.ic(3,4,e.attachment.CreatedAt),t.ws.getMultilingualValue("User",e.attachment.CreatedById,"Name"))),"\xa0")}}function Pm(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",114),c.cc("click",function(){c.Dc(e);const t=c.gc(2).index,n=c.gc(4).model;return c.gc().onDownloadAttachment(n,t)}),c.hc(1,"translate"),c.Nb(2,"fa-icon",116),c.Rb()}2&e&&c.nc("title",c.ic(1,1,"Download"))}function Fm(e,t){1&e&&(c.Sb(0,"div",117),c.Nb(1,"t-spinner",108),c.Rb())}function Vm(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",111),c.Jc(1,Pm,3,3,"button",112),c.Jc(2,Fm,2,0,"ng-template",null,113,c.Kc),c.Sb(4,"button",114),c.cc("click",function(){c.Dc(e);const t=c.gc().index,n=c.gc(4).model;return c.gc().onDeleteAttachment(n,t)}),c.hc(5,"translate"),c.Nb(6,"fa-icon",115),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(3),t=c.gc().$implicit;c.zb(1),c.nc("ngIf",!t.downloading)("ngIfElse",e),c.zb(3),c.nc("title",c.ic(5,3,"Delete"))}}function qm(e,t){if(1&e&&(c.Sb(0,"div",94),c.Sb(1,"div",95),c.Sb(2,"div",96),c.Nb(3,"fa-icon",97),c.Rb(),c.Sb(4,"div",98),c.Jc(5,Am,4,2,"div",99),c.Jc(6,Nm,3,4,"ng-template",null,100,c.Kc),c.Sb(8,"div",101),c.Sb(9,"div",102),c.Jc(10,Jm,4,9,"span",16),c.Sb(11,"span"),c.Lc(12),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Jc(13,Vm,7,5,"div",103),c.Rb(),c.Rb()),2&e){const e=t.$implicit,n=t.index,i=c.Ac(7),o=c.gc(4).isEdit,r=c.gc();c.Eb("bg-light",n%2==1e3),c.zb(3),c.Ic("color",r.colorFromExtension(e.attachment.FileExtension)),c.nc("icon",r.iconFromExtension(e.attachment.FileExtension)),c.zb(2),c.nc("ngIf",!o)("ngIfElse",i),c.zb(5),c.nc("ngIf",e.attachment.CreatedById),c.zb(2),c.Nc("(",r.size(e),")"),c.zb(1),c.nc("ngIf",o)}}function jm(e,t){if(1&e&&(c.Sb(0,"div",92),c.Jc(1,qm,14,10,"div",93),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.nc("ngForOf",t.attachmentWrappers(e))}}function $m(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",118),c.Sb(1,"button",119),c.cc("click",function(){return c.Dc(e),c.gc(),c.Ac(4).click()}),c.Nb(2,"fa-icon",120),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3).model;c.zb(3),c.Nc(" \xa0\xa0",c.ic(4,1,(null==e||null==e.Attachments?null:e.Attachments.length)>0?"UploadMore":"Upload")," ")}}function Um(e,t){if(1&e){const e=c.Tb();c.Jc(0,km,4,3,"div",86),c.Jc(1,jm,2,1,"div",87),c.Jc(2,$m,5,3,"div",88),c.Sb(3,"input",89,90),c.cc("change",function(){c.Dc(e);const t=c.Ac(4),n=c.gc(2).model;return c.gc().onFileSelected(t,n)}),c.Rb()}if(2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("ngIf",!(null!=t&&null!=t.Attachments&&t.Attachments.length||n)),c.zb(1),c.nc("ngIf",!(null==t||null==t.Attachments||!t.Attachments.length)),c.zb(1),c.nc("ngIf",n)}}function Km(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"ul",54,55),c.cc("activeIdChange",function(t){return c.Dc(e),c.gc(2).activeTab=t}),c.Jc(3,Rm,8,6,"li",56),c.Jc(4,wm,7,4,"li",57),c.Jc(5,zm,4,1,"ng-container",16),c.Sb(6,"li",58),c.Sb(7,"a",59),c.Jc(8,Lm,3,0,"span",60),c.Sb(9,"span",61),c.Lc(10),c.hc(11,"translate"),c.hc(12,"number"),c.Rb(),c.Rb(),c.Jc(13,Um,5,3,"ng-template",62),c.Rb(),c.Rb(),c.Nb(14,"div",63),c.Pb()}if(2&e){const e=c.Ac(2),t=c.gc(),n=t.isEdit,i=t.model,o=c.gc();c.zb(1),c.nc("destroyOnHide",!0)("activeId",o.activeTab),c.zb(2),c.nc("ngIf",o.Users_isVisible),c.zb(1),c.nc("ngIf",o.Location_isVisible),c.zb(1),c.nc("ngIf",o.showReports(n,i)),c.zb(3),c.nc("ngIf",o.showAttachmentsErrors(i)),c.zb(2),c.Mc(c.ic(11,8,"Relation_Attachments")+(i.Id&&2!==(null==i||null==i.EntityMetadata?null:i.EntityMetadata.Attachments)?"":" ("+c.ic(12,10,null==i||null==i.Attachments?null:i.Attachments.length)+")")),c.zb(4),c.nc("ngbNavOutlet",e)}}function Bm(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.Jc(1,qb,2,1,"h2",10),c.Jc(2,$b,2,7,"t-text-editor",11),c.Jc(3,Ub,2,7,"t-text-editor",12),c.Jc(4,Kb,2,7,"t-text-editor",12),c.Rb(),c.Jc(5,Hb,4,2,"div",13),c.Jc(6,Gb,4,6,"t-form-group",14),c.Jc(7,Zb,4,6,"t-form-group",14),c.Jc(8,ng,4,6,"t-form-group",14),c.Sb(9,"t-form-group",15),c.hc(10,"translate"),c.Jc(11,ig,2,1,"div",16),c.Jc(12,cg,1,3,"t-text-editor",17),c.Rb(),c.Jc(13,sg,4,6,"t-form-group",14),c.Jc(14,ug,3,4,"t-form-group",14),c.Jc(15,gg,3,4,"t-form-group",14),c.Jc(16,hg,4,6,"t-form-group",14),c.Jc(17,vg,4,6,"t-form-group",14),c.Jc(18,Rg,4,6,"t-form-group",14),c.Jc(19,wg,4,6,"t-form-group",14),c.Jc(20,xg,3,4,"t-form-group",14),c.Jc(21,Lg,3,4,"t-form-group",14),c.Jc(22,Ag,3,4,"t-form-group",14),c.Jc(23,Jg,3,4,"t-form-group",14),c.Jc(24,Vg,3,4,"t-form-group",14),c.Jc(25,$g,3,4,"t-form-group",14),c.Jc(26,Bg,3,4,"t-form-group",14),c.Jc(27,Wg,3,4,"t-form-group",14),c.Jc(28,Xg,3,4,"t-form-group",14),c.Jc(29,tf,3,4,"t-form-group",14),c.Jc(30,of,3,4,"t-form-group",14),c.Jc(31,lf,3,4,"t-form-group",14),c.Jc(32,df,3,4,"t-form-group",14),c.Jc(33,ff,3,4,"t-form-group",14),c.Jc(34,pf,3,4,"t-form-group",14),c.Jc(35,If,3,4,"t-form-group",14),c.Jc(36,yf,3,4,"t-form-group",14),c.Jc(37,Ef,3,4,"t-form-group",14),c.Jc(38,Tf,3,4,"t-form-group",14),c.Jc(39,kf,3,4,"t-form-group",14),c.Jc(40,Nf,3,4,"t-form-group",14),c.Jc(41,Pf,3,4,"t-form-group",14),c.Jc(42,qf,4,6,"t-form-group",14),c.Jc(43,Uf,4,6,"t-form-group",14),c.Jc(44,Hf,4,6,"t-form-group",14),c.Jc(45,Gf,3,4,"t-form-group",14),c.Jc(46,Zf,3,4,"t-form-group",14),c.Nb(47,"div",18),c.Jc(48,im,4,6,"t-form-group",14),c.Jc(49,sm,4,6,"t-form-group",14),c.Jc(50,dm,4,6,"t-form-group",14),c.Jc(51,bm,5,6,"t-form-group",19),c.Jc(52,Km,15,12,"ng-container",16)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",i.Image_isVisible),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(10,52,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.User_isVisible),c.zb(1),c.nc("ngIf",i.Currency_isVisible),c.zb(1),c.nc("ngIf",i.Center_isVisible),c.zb(1),c.nc("ngIf",i.DateOfBirth_isVisible),c.zb(1),c.nc("ngIf",i.ContactEmail_isVisible),c.zb(1),c.nc("ngIf",i.ContactMobile_isVisible),c.zb(1),c.nc("ngIf",i.ContactAddress_isVisible),c.zb(1),c.nc("ngIf",i.Lookup1_isVisible),c.zb(1),c.nc("ngIf",i.Lookup2_isVisible),c.zb(1),c.nc("ngIf",i.Lookup3_isVisible),c.zb(1),c.nc("ngIf",i.Lookup4_isVisible),c.zb(1),c.nc("ngIf",i.Lookup5_isVisible),c.zb(1),c.nc("ngIf",i.Lookup6_isVisible),c.zb(1),c.nc("ngIf",i.Lookup7_isVisible),c.zb(1),c.nc("ngIf",i.Lookup8_isVisible),c.zb(1),c.nc("ngIf",i.Date1_isVisible),c.zb(1),c.nc("ngIf",i.Date2_isVisible),c.zb(1),c.nc("ngIf",i.Date3_isVisible),c.zb(1),c.nc("ngIf",i.Date4_isVisible),c.zb(1),c.nc("ngIf",i.Decimal1_isVisible),c.zb(1),c.nc("ngIf",i.Decimal2_isVisible),c.zb(1),c.nc("ngIf",i.Int1_isVisible),c.zb(1),c.nc("ngIf",i.Int2_isVisible),c.zb(1),c.nc("ngIf",i.Text1_isVisible),c.zb(1),c.nc("ngIf",i.Text2_isVisible),c.zb(1),c.nc("ngIf",i.Text3_isVisible),c.zb(1),c.nc("ngIf",i.Text4_isVisible),c.zb(1),c.nc("ngIf",i.FromDate_isVisible),c.zb(1),c.nc("ngIf",i.ToDate_isVisible),c.zb(1),c.nc("ngIf",i.Agent_isVisible),c.zb(1),c.nc("ngIf",i.TaxIdentificationNumber_isVisible),c.zb(1),c.nc("ngIf",i.BankAccountNumber_isVisible),c.zb(1),c.nc("ngIf",i.ExternalReference_isVisible),c.zb(1),c.nc("ngIf",i.Relation1_isVisible),c.zb(2),c.nc("ngIf",i.Description_isVisible),c.zb(1),c.nc("ngIf",i.Description_isVisible&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.Description_isVisible&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",i.showTabs(n,e))}}function Hm(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function Qm(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function Wm(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"EditDefinition")," ")}let Gm=(()=>{class e extends mn.a{constructor(e,t,n,i,c){super(),this.workspace=e,this.api=t,this.translate=n,this.router=i,this.route=c,this.relationsApi=this.api.relationsApi(null,this.notifyDestruct$),this.expand="Currency,Center,Lookup1,Lookup2,Lookup3,Lookup4,Lookup5,Lookup6,Lookup7,Lookup8,\nRelation1,Agent,Users.User,Attachments.Category,Attachments.CreatedBy",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.Users=[],e.Attachments=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Attachments=[],t.Users&&t.Users.forEach(e=>{e.Id=null,delete e.RelationId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById}),t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.relationsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.relationsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onEditDefinition=e=>{const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../../relation-definitions",this.definitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.showEditDefinition=e=>this.ws.canDo("relation-definitions","Update",null),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.registerPristineFunc=e=>{this._pristineModel=JSON.stringify(e)},this.isDirtyFunc=e=>!!(e&&e.Attachments&&e.Attachments.some(e=>!!e.File))||this._pristineModel!==JSON.stringify(e)}set definitionId(e){this._definitionId!==e&&(this.relationsApi=this.api.relationsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`relations/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Relations[this.definitionId]:null)}get found(){return!!this.definition}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}get Currency_isVisible(){return!!this.definition.CurrencyVisibility}get Currency_isRequired(){return"Required"===this.definition.CurrencyVisibility}get Currency_label(){return this.translate.instant("Entity_Currency")}get Center_isVisible(){return!!this.definition.CenterVisibility}get Center_isRequired(){return"Required"===this.definition.CenterVisibility}get Center_label(){return this.translate.instant("Entity_Center")}get Image_isVisible(){return!!this.definition.ImageVisibility}get Description_isVisible(){return!!this.definition.DescriptionVisibility}get Description_isRequired(){return"Required"===this.definition.DescriptionVisibility}get FromDate_isVisible(){return!!this.definition.FromDateVisibility}get FromDate_isRequired(){return"Required"===this.definition.FromDateVisibility}get FromDate_label(){return this.definition.FromDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"FromDateLabel"):this.translate.instant("Entity_FromDate")}get ToDate_isVisible(){return!!this.definition.ToDateVisibility}get ToDate_isRequired(){return"Required"===this.definition.ToDateVisibility}get ToDate_label(){return this.definition.ToDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"ToDateLabel"):this.translate.instant("Entity_ToDate")}get Date1_isVisible(){return!!this.definition.Date1Visibility}get Date1_isRequired(){return"Required"===this.definition.Date1Visibility}get Date1_label(){return this.definition.Date1Label?this.ws.getMultilingualValueImmediate(this.definition,"Date1Label"):this.translate.instant("Entity_Date1")}get Date2_isVisible(){return!!this.definition.Date2Visibility}get Date2_isRequired(){return"Required"===this.definition.Date2Visibility}get Date2_label(){return this.definition.Date2Label?this.ws.getMultilingualValueImmediate(this.definition,"Date2Label"):this.translate.instant("Entity_Date2")}get Date3_isVisible(){return!!this.definition.Date3Visibility}get Date3_isRequired(){return"Required"===this.definition.Date3Visibility}get Date3_label(){return this.definition.Date3Label?this.ws.getMultilingualValueImmediate(this.definition,"Date3Label"):this.translate.instant("Entity_Date3")}get Date4_isVisible(){return!!this.definition.Date4Visibility}get Date4_isRequired(){return"Required"===this.definition.Date4Visibility}get Date4_label(){return this.definition.Date4Label?this.ws.getMultilingualValueImmediate(this.definition,"Date4Label"):this.translate.instant("Entity_Date4")}get Decimal1_isVisible(){return!!this.definition.Decimal1Visibility}get Decimal1_isRequired(){return"Required"===this.definition.Decimal1Visibility}get Decimal1_label(){return this.definition.Decimal1Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal1Label"):this.translate.instant("Entity_Decimal1")}get Decimal2_isVisible(){return!!this.definition.Decimal2Visibility}get Decimal2_isRequired(){return"Required"===this.definition.Decimal2Visibility}get Decimal2_label(){return this.definition.Decimal2Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal2Label"):this.translate.instant("Entity_Decimal2")}get Int1_isVisible(){return!!this.definition.Int1Visibility}get Int1_isRequired(){return"Required"===this.definition.Int1Visibility}get Int1_label(){return this.definition.Int1Label?this.ws.getMultilingualValueImmediate(this.definition,"Int1Label"):this.translate.instant("Entity_Int1")}get Int2_isVisible(){return!!this.definition.Int2Visibility}get Int2_isRequired(){return"Required"===this.definition.Int2Visibility}get Int2_label(){return this.definition.Int2Label?this.ws.getMultilingualValueImmediate(this.definition,"Int2Label"):this.translate.instant("Entity_Int2")}get Lookup1_isVisible(){return!!this.definition.Lookup1Visibility}get Lookup1_isRequired(){return"Required"===this.definition.Lookup1Visibility}get Lookup1_label(){return this.definition.Lookup1Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup1Label"):this.translate.instant("Entity_Lookup1")}get Lookup1_DefinitionId(){return this.definition.Lookup1DefinitionId}get Lookup2_isVisible(){return!!this.definition.Lookup2Visibility}get Lookup2_isRequired(){return"Required"===this.definition.Lookup2Visibility}get Lookup2_label(){return this.definition.Lookup2Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup2Label"):this.translate.instant("Entity_Lookup2")}get Lookup2_DefinitionId(){return this.definition.Lookup2DefinitionId}get Lookup3_isVisible(){return!!this.definition.Lookup3Visibility}get Lookup3_isRequired(){return"Required"===this.definition.Lookup3Visibility}get Lookup3_label(){return this.definition.Lookup3Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup3Label"):this.translate.instant("Entity_Lookup3")}get Lookup3_DefinitionId(){return this.definition.Lookup3DefinitionId}get Lookup4_isVisible(){return!!this.definition.Lookup4Visibility}get Lookup4_isRequired(){return"Required"===this.definition.Lookup4Visibility}get Lookup4_label(){return this.definition.Lookup4Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup4Label"):this.translate.instant("Entity_Lookup4")}get Lookup4_DefinitionId(){return this.definition.Lookup4DefinitionId}get Lookup5_isVisible(){return!!this.definition.Lookup5Visibility}get Lookup5_isRequired(){return"Required"===this.definition.Lookup5Visibility}get Lookup5_label(){return this.definition.Lookup5Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup5Label"):this.translate.instant("Entity_Lookup5")}get Lookup5_DefinitionId(){return this.definition.Lookup5DefinitionId}get Lookup6_isVisible(){return!!this.definition.Lookup6Visibility}get Lookup6_isRequired(){return"Required"===this.definition.Lookup6Visibility}get Lookup6_label(){return this.definition.Lookup6Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup6Label"):this.translate.instant("Entity_Lookup6")}get Lookup6_DefinitionId(){return this.definition.Lookup6DefinitionId}get Lookup7_isVisible(){return!!this.definition.Lookup7Visibility}get Lookup7_isRequired(){return"Required"===this.definition.Lookup7Visibility}get Lookup7_label(){return this.definition.Lookup7Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup7Label"):this.translate.instant("Entity_Lookup7")}get Lookup7_DefinitionId(){return this.definition.Lookup7DefinitionId}get Lookup8_isVisible(){return!!this.definition.Lookup8Visibility}get Lookup8_isRequired(){return"Required"===this.definition.Lookup8Visibility}get Lookup8_label(){return this.definition.Lookup8Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup8Label"):this.translate.instant("Entity_Lookup8")}get Lookup8_DefinitionId(){return this.definition.Lookup8DefinitionId}get Text1_isVisible(){return!!this.definition.Text1Visibility}get Text1_isRequired(){return"Required"===this.definition.Text1Visibility}get Text1_label(){return this.definition.Text1Label?this.ws.getMultilingualValueImmediate(this.definition,"Text1Label"):this.translate.instant("Entity_Text1")}get Text2_isVisible(){return!!this.definition.Text2Visibility}get Text2_isRequired(){return"Required"===this.definition.Text2Visibility}get Text2_label(){return this.definition.Text2Label?this.ws.getMultilingualValueImmediate(this.definition,"Text2Label"):this.translate.instant("Entity_Text2")}get Text3_isVisible(){return!!this.definition.Text3Visibility}get Text3_isRequired(){return"Required"===this.definition.Text3Visibility}get Text3_label(){return this.definition.Text3Label?this.ws.getMultilingualValueImmediate(this.definition,"Text3Label"):this.translate.instant("Entity_Text3")}get Text4_isVisible(){return!!this.definition.Text4Visibility}get Text4_isRequired(){return"Required"===this.definition.Text4Visibility}get Text4_label(){return this.definition.Text4Label?this.ws.getMultilingualValueImmediate(this.definition,"Text4Label"):this.translate.instant("Entity_Text4")}get Agent_isVisible(){return!!this.definition.AgentVisibility}get Agent_isRequired(){return"Required"===this.definition.AgentVisibility}get TaxIdentificationNumber_isVisible(){return!!this.definition.TaxIdentificationNumberVisibility}get TaxIdentificationNumber_isRequired(){return"Required"===this.definition.TaxIdentificationNumberVisibility}get ExternalReference_label(){return this.definition.ExternalReferenceLabel?this.ws.getMultilingualValueImmediate(this.definition,"ExternalReferenceLabel"):this.translate.instant("Relation_ExternalReference")}get ExternalReference_isVisible(){return!!this.definition.ExternalReferenceVisibility}get ExternalReference_isRequired(){return"Required"===this.definition.ExternalReferenceVisibility}get BankAccountNumber_isVisible(){return!!this.definition.BankAccountNumberVisibility}get BankAccountNumber_isRequired(){return"Required"===this.definition.BankAccountNumberVisibility}get DateOfBirth_isVisible(){return!!this.definition.DateOfBirthVisibility}get DateOfBirth_isRequired(){return"Required"===this.definition.DateOfBirthVisibility}get ContactEmail_isVisible(){return!!this.definition.ContactEmailVisibility}get ContactEmail_isRequired(){return"Required"===this.definition.ContactEmailVisibility}get ContactMobile_isVisible(){return!!this.definition.ContactMobileVisibility}get ContactMobile_isRequired(){return"Required"===this.definition.ContactMobileVisibility}get ContactAddress_isVisible(){return!!this.definition.ContactAddressVisibility}get ContactAddress_isRequired(){return"Required"===this.definition.ContactAddressVisibility}get Relation1_isVisible(){return!!this.definition.Relation1Visibility}get Relation1_isRequired(){return"Required"===this.definition.Relation1Visibility}get Relation1_label(){return this.definition.Relation1Label?this.ws.getMultilingualValueImmediate(this.definition,"Relation1Label"):this.translate.instant("Entity_Relation1")}get Relation1_DefinitionIds(){return this.definition.Relation1DefinitionId?[this.definition.Relation1DefinitionId]:[]}showTabs(e,t){return this.Users_isVisible||this.Location_isVisible||this.Attachments_isVisible||this.reports.length>0&&this.showReports(e,t)}get User_isVisible(){return"Single"===this.definition.UserCardinality}getUserId(e){if(e&&e.Users&&e.Users[0])return e.Users[0].UserId}setUserId(e,t){e&&(e.Users=t?[{UserId:t}]:[])}get Users_isVisible(){return"Multiple"===this.definition.UserCardinality}Users_count(e){return e&&e.Users?e.Users.length:0}Users_showError(e){return!!e&&!!e.Users&&e.Users.some(e=>!!e.serverErrors)}get Attachments_isVisible(){return!!this.definition.HasAttachments}Attachments_count(e){return e&&e.Attachments?e.Attachments.length:0}Attachments_showError(e){return!!e&&!!e.Users&&e.Users.some(e=>!!e.serverErrors)}get Location_isVisible(){return!!this.definition.LocationVisibility}Map_showError(e){return!!e&&!!e.serverErrors&&!!e.serverErrors.LocationJson}showReports(e,t){return!!t&&!!t.Id}get reports(){return this.definition.ReportDefinitions}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}reportTitle(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}state(e){const t=`relations_details_${this.definitionId}_${e.ReportDefinitionId}`,n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new L.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}get activeTabKey(){return`relations_details_${this.definitionId}_activeTab`}get activeTab(){const e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.Users_isVisible?"users":this.Attachments_isVisible?"attachments":this.Location_isVisible?"location":this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]}set activeTab(e){this.ws.miscState[this.activeTabKey]=e}onExpandReport(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}showAttachmentsErrors(e){return!!e&&!!e.Attachments&&e.Attachments.some(e=>!!e.serverErrors)}attachmentWrappers(e){return e&&e.Attachments?(this._attachmentsAttachments!==e.Attachments&&(this._attachmentsAttachments=e.Attachments,this._attachmentsResult=e.Attachments.map(e=>({attachment:e}))),this._attachmentsResult):[]}onFileSelected(e,t){const n=this.attachmentWrappers(t).map(e=>e.file?e.file.size:0).reduce((e,t)=>e+t,0);Object(V.q)(e,n,this.translate).subscribe(e=>{t.Attachments.push(e.attachment),this.attachmentWrappers(t).push(e)},e=>{this.details.displayErrorModal(e)})}onDeleteAttachment(e,t){this.attachmentWrappers(e).splice(t,1),e.Attachments.splice(t,1)}onDownloadAttachment(e,t){const n=e.Id,i=this.attachmentWrappers(e)[t];i.attachment.Id?(i.downloading=!0,this.relationsApi.getAttachment(n,i.attachment.Id).pipe(Object(J.a)(e=>{delete i.downloading,Object(V.i)(e,this.fileName(i))}),Object(F.a)(e=>(delete i.downloading,this.details.handleActionError(e),Object(A.a)(null))),Object(ne.a)(()=>{delete i.downloading})).subscribe()):i.file&&Object(V.i)(i.file,this.fileName(i))}fileName(e){const t=e.attachment;return t.FileName&&t.FileExtension?`${t.FileName}.${t.FileExtension}`:t.FileName||(e.file?e.file.name:"Attachment")}size(e){const t=e.attachment;return Object(V.j)(t.Size||(e.file?e.file.size:null))}colorFromExtension(e){return Object(V.d)(e)}iconFromExtension(e){return Object(V.m)(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(i.e),c.Mb(i.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-relations-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[c.wb],decls:13,vars:2,consts:[["collection","Relation",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Relation",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions"],[3,"showHome"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 t-details-image-container",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"w-100"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"col-12","col-md-4","t-details-image-container"],[3,"metadata"],[1,"border"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../../users",3,"itemId"],[3,"ngModel","ngModelChange"],[3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../currencies",3,"itemId"],[3,"ngModel","required","ngModelChange"],["link","../../../centers",3,"itemId"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"ngModel","definitionId","required","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionId","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["link","../../../agents/",3,"itemId",4,"ngIf"],["link","../../../agents/",3,"itemId"],["collection","Relation","path","Agent",3,"entity"],[3,"ngModel","definitionIds","required","ngModelChange",4,"ngIf"],[3,"ngModel","definitionIds","required","ngModelChange"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[1,"t-form-group",3,"label"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","users",4,"ngIf"],["ngbNavItem","location",4,"ngIf"],["ngbNavItem","attachments"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","users"],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_User",""],["row_User",""],[1,"t-form-group",3,"serverErrors"],["link","../../../users",3,"itemId",4,"ngIf"],["ngbNavItem","location"],[2,"height","450px"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"],["class","p-3 font-italic font-weight-light2 text-muted",4,"ngIf"],["class","w-100 mx-0 mb-1 p-2 p-sm-3 overflow-auto","style","max-height: 450px;",4,"ngIf"],["class","py-2 px-3 col-12 d-flex align-items-center justify-content-end",4,"ngIf"],["type","file","multiple","",1,"d-none",3,"change"],["fileInput",""],[1,"p-3","font-italic","font-weight-light2","text-muted"],[1,"w-100","mx-0","mb-1","p-2","p-sm-3","overflow-auto",2,"max-height","450px"],["class","text-nowrap",3,"bg-light",4,"ngFor","ngForOf"],[1,"text-nowrap"],[1,"border-bottom","d-flex","align-items-center"],[1,"px-3","pt-1","pb-2"],[2,"font-size","200%",3,"icon"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","px-1",2,"min-width","0px"],["class","d-flex align-items-stretch","style","max-width: 750px;",4,"ngIf","ngIfElse"],["editAttachment",""],[1,"d-flex","align-items-stretch"],[1,"flex-grow-1","small","text-muted","text-truncate",2,"min-width","0px"],["class","mx-1",4,"ngIf"],[1,"d-flex","align-items-stretch",2,"max-width","750px"],["type","button",1,"btn","btn-link","p-0","text-primary","border-top-0","border-left-0","border-right-0","text-truncate",3,"click"],["class","mx-2 flex-grow-1","style","min-width: 0;",4,"ngIf"],[1,"mx-2","flex-grow-1",2,"min-width","0"],[1,"text-black"],[2,"max-width","500px"],[3,"serverErrors"],[1,"mx-1"],["class","btn btn-sm text-primary p-0 px-1 t-toolbar-button btn-light t-white-button",3,"title","click",4,"ngIf","ngIfElse"],["spinner",""],[1,"btn","btn-sm","text-primary","p-0","px-1","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","trash"],["icon","download"],[1,"px-1","t-toolbar-button","d-inline","t-vertical-align-middle"],[1,"py-2","px-3","col-12","d-flex","align-items-center","justify-content-end"],[1,"btn","btn-sm","btn-primary","text-primary2","btn-light2","t-white-button2",3,"click"],["icon","upload"]],template:function(e,t){if(1&e&&(c.Jc(0,Pb,1,31,"t-details",0),c.Jc(1,Fb,1,1,"ng-template",null,1,c.Kc),c.Jc(3,Vb,2,1,"ng-template",null,2,c.Kc),c.Jc(5,Bm,53,54,"ng-template",null,3,c.Kc),c.Jc(7,Hm,2,3,"ng-template",null,4,c.Kc),c.Jc(9,Qm,2,3,"ng-template",null,5,c.Kc),c.Jc(11,Wm,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,q.a,nn,he.a,pe.a,te.m,te.i,te.j,hn.a,be,ss,La,zu,Au,Vu,Pd,vn,me.a,Db,xb,Lb,G.v,G.x,G.y,G.w,G.A,ee.a,Fs.a,Vs.a,C.k,ge.a,is,fe.a],pipes:[K.c,kb,Ab,C.d,Me],encapsulation:2}),e})();function Ym(e,t){if(1&e&&(c.Sb(0,"div",9),c.Sb(1,"span",10),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",11),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("Role",e,"Name")),c.zb(3),c.Mc(n.c[e].Code)}}function Xm(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Role"),"\n")}function Zm(e,t){if(1&e&&(c.Sb(0,"span",12),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.ws.getMultilingualValue("Role",e,"Name"))}}function eh(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function th(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function nh(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"SavedByMe")," ")}function ih(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Public")," ")}function ch(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"NotPublic")," ")}const oh=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},rh=function(e,t){return[e,t]},sh=function(e){return{template:e,expression:"SavedById eq me"}},lh=function(e){return[e]},ah=function(e){return{template:e,expression:"IsPublic eq true"}},uh=function(e){return{template:e,expression:"IsPublic eq false"}},dh=function(e,t){return{SavedBy:e,IsPublic:t}};let bh=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.rolesApi=this.api.rolesApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.rolesApi.activate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.rolesApi.deactivate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("roles","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.rolesApi=this.api.rolesApi(this.notifyDestruct$)}get c(){return this.ws.Role}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-roles-master"]],features:[c.wb],decls:18,vars:39,consts:[["collection","Role","selectForTiles","Code","selectDefault","Code,IsPublic,IsActive",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["savedByMe",""],["isPublic",""],["isNotPublic",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,Ym,6,2,"ng-template",null,1,c.Kc),c.Jc(4,Xm,2,3,"ng-template",null,2,c.Kc),c.Jc(6,Zm,2,1,"ng-template",null,3,c.Kc),c.Jc(8,eh,2,3,"ng-template",null,4,c.Kc),c.Jc(10,th,2,3,"ng-template",null,5,c.Kc),c.Jc(12,nh,2,3,"ng-template",null,6,c.Kc),c.Jc(14,ih,2,3,"ng-template",null,7,c.Kc),c.Jc(16,ch,2,3,"ng-template",null,8,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13),l=c.Ac(15),a=c.Ac(17);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"Roles"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(22,rh,c.uc(12,oh,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(17,oh,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.sc(36,dh,c.rc(27,lh,c.rc(25,sh,s)),c.sc(33,rh,c.rc(29,ah,l),c.rc(31,uh,a))))}},directives:[Tt.a],pipes:[K.c],encapsulation:2}),e})();var gh=n("U6XH"),fh=n("gQLD"),mh=n("Jfee"),hh=n("tHLm"),ph=n("03Gx"),Sh=n("GfJL");function vh(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function Ih(e,t){if(1&e&&(c.Sb(0,"h2",20),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const Mh=function(){return{updateOn:"blur"}};function Rh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,Mh))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function yh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,Mh))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Dh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,Mh))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function wh(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function Eh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,Mh))}}function Ch(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,wh,2,1,"div",11),c.Jc(3,Eh,1,3,"t-text-editor",23),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function xh(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function Th(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,Mh))}}function zh(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,xh,2,1,"div",11),c.Jc(3,Th,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Lh(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function kh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,Mh))}}function Oh(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Lh,2,1,"div",11),c.Jc(3,kh,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ah(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function Nh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Code)("ngModelOptions",c.qc(2,Mh))}}function _h(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(c.ic(2,1,null!=e&&e.IsPublic?"Yes":"No"))}}function Jh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",28),c.Sb(1,"input",29),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.IsPublic=t}),c.Rb(),c.Sb(2,"label",30),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(1),c.nc("ngModel",e.IsPublic)}}function Ph(e,t){if(1&e&&(c.Sb(0,"t-form-group",26),c.hc(1,"translate"),c.Jc(2,_h,3,3,"div",11),c.Jc(3,Jh,4,1,"div",27),c.Rb()),2&e){const e=c.gc().isEdit;c.nc("label",c.ic(1,3,"Role_IsPublic")),c.zb(2),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function Fh(e,t){if(1&e&&(c.Sb(0,"t-form-group",26),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(3),c.Mc(c.ic(4,4,e?e.IsActive?"Active":"Inactive":""))}}function Vh(e,t){1&e&&(c.Sb(0,"t-warning-message",31),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"PublicRoleWarning")," "))}function qh(e,t){1&e&&(c.Sb(0,"span",37),c.Nb(1,"fa-icon",38),c.Lc(2,"\xa0 "),c.Rb())}function jh(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Permission_View"))}function $h(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().item,t=c.gc(4);c.zb(1),c.Nc(" ",t.permissionViewLookup(e.View)," ")}}function Uh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",53),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.View=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(),n=t.item,i=t.update,o=c.gc(4);return i.call(null,n),o.onPermissionChanged(n)}),c.Rb()}if(2&e){const e=c.gc().item,t=c.gc(4);c.nc("choices",t.permissionViewChoices)("ngModel",e.View)("required",!e.PH)}}function Kh(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",51),c.Jc(1,$h,2,1,"div",11),c.Jc(2,Uh,1,3,"t-selector",52),c.Rb()),2&e){const e=t.item,n=c.gc(3).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.View),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Bh(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Permission_Action"))}function Hh(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc().item,t=c.gc(4);c.zb(1),c.Mc(c.ic(2,1,t.permissionActionLookup(null==e?null:e.Action)))}}function Qh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",55),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.Action=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(),n=t.item,i=t.update,o=c.gc(4);return i.call(null,n),o.onPermissionChanged(n)}),c.Rb()}if(2&e){const e=c.gc().item,t=c.gc(4);c.nc("ngModel",e.Action)("required",!e.PH)("ngModelOptions",c.qc(5,Mh))("choices",t.permissionActionChoices(e))("disabled",!e.View)}}function Wh(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",51),c.Jc(1,Hh,3,3,"div",11),c.Jc(2,Qh,1,6,"t-selector",54),c.Rb()),2&e){const e=t.item,n=c.gc(3).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Action),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Gh(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Permission_Criteria"))}function Yh(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().item;c.zb(1),c.Mc(e.Criteria)}}function Xh(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",57),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.Criteria=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item,t=c.gc(4);c.nc("ngModel",e.Criteria)("ngModelOptions",c.qc(3,Mh))("disabled",t.disableCriteria(e))}}function Zh(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",51),c.Jc(1,Yh,2,1,"div",11),c.Jc(2,Xh,1,4,"t-text-editor",56),c.Rb()),2&e){const e=t.item,n=c.gc(3).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Criteria),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function ep(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Permission_Mask"))}function tp(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().item;c.zb(1),c.Mc(e.Mask)}}function np(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",57),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.Mask=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item,t=c.gc(4);c.nc("ngModel",e.Mask)("ngModelOptions",c.qc(3,Mh))("disabled",t.disableMask(e))}}function ip(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",51),c.Jc(1,tp,2,1,"div",11),c.Jc(2,np,1,4,"t-text-editor",56),c.Rb()),2&e){const e=t.item,n=c.gc(3).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Mask),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function cp(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Memo"))}function op(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().item;c.zb(1),c.Mc(e.Memo)}}function rp(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.Memo=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item;c.nc("ngModel",e.Memo)("ngModelOptions",c.qc(2,Mh))}}function sp(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",51),c.Jc(1,op,2,1,"div",11),c.Jc(2,rp,1,3,"t-text-editor",12),c.Rb()),2&e){const e=t.item,n=c.gc(3).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Memo),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}const lp=function(){return["View","Action","Criteria","Memo"]},ap=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},up=function(e,t,n,i,c){return{View:e,Action:t,Criteria:n,Mask:i,Memo:c}};function dp(e,t){if(1&e&&(c.Sb(0,"t-restricted",39),c.Nb(1,"t-table",40),c.Rb(),c.Jc(2,jh,2,3,"ng-template",null,41,c.Kc),c.Jc(4,Kh,3,3,"ng-template",null,42,c.Kc),c.Jc(6,Bh,2,3,"ng-template",null,43,c.Kc),c.Jc(8,Wh,3,3,"ng-template",null,44,c.Kc),c.Jc(10,Gh,2,3,"ng-template",null,45,c.Kc),c.Jc(12,Zh,3,3,"ng-template",null,46,c.Kc),c.Jc(14,ep,2,3,"ng-template",null,47,c.Kc),c.Jc(16,ip,3,3,"ng-template",null,48,c.Kc),c.Jc(18,cp,2,3,"ng-template",null,49,c.Kc),c.Jc(20,sp,3,3,"ng-template",null,50,c.Kc)),2&e){const e=c.Ac(3),t=c.Ac(5),n=c.Ac(7),i=c.Ac(9),o=c.Ac(11),r=c.Ac(13),s=c.Ac(15),l=c.Ac(17),a=c.Ac(19),u=c.Ac(21),d=c.gc(2),b=d.model,g=d.isEdit;c.Eb("p-4",1===(null==b||null==b.EntityMetadata?null:b.EntityMetadata.Permissions)),c.nc("metadata",null==b||null==b.EntityMetadata?null:b.EntityMetadata.Permissions),c.zb(1),c.nc("dataSource",null==b?null:b.Permissions)("isEdit",g)("columnPaths",c.qc(7,lp))("columnTemplates",c.vc(23,up,c.sc(8,ap,e,t),c.sc(11,ap,n,i),c.sc(14,ap,o,r),c.sc(17,ap,s,l),c.sc(20,ap,a,u)))}}function bp(e,t){if(1&e&&(c.Sb(0,"li",32),c.Sb(1,"a",33),c.Jc(2,qh,3,0,"span",34),c.Sb(3,"span",35),c.Lc(4),c.hc(5,"translate"),c.hc(6,"number"),c.Rb(),c.Rb(),c.Jc(7,dp,22,29,"ng-template",36),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(2),c.nc("ngIf",t.showPermissionsError(e)),c.zb(2),c.Mc(c.ic(5,2,"Permissions")+(e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Permissions)?"":" ("+c.ic(6,4,t.permissionsCount(e))+")"))}}function gp(e,t){1&e&&(c.Sb(0,"span",37),c.Nb(1,"fa-icon",38),c.Lc(2,"\xa0 "),c.Rb())}function fp(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"RoleMembership_User"))}function mp(e,t){if(1&e&&(c.Sb(0,"t-view-link",63),c.Lc(1),c.Rb()),2&e){const e=c.gc().item,t=c.gc(4);c.nc("itemId",null==e?null:e.UserId),c.zb(1),c.Nc(" ",t.getMultilingualValue(t.ws.User[e.UserId],"Name",t.ws)," ")}}function hp(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-users-picker",64),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.UserId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item;c.nc("ngModel",e.UserId)("showRoles",!1)("required",!e.PH)}}function pp(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",51),c.Jc(1,mp,2,2,"t-view-link",61),c.Jc(2,hp,1,3,"t-users-picker",62),c.Rb()),2&e){const e=t.item,n=c.gc(3).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.UserId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Sp(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Memo"))}function vp(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().item;c.zb(1),c.Mc(e.Memo)}}function Ip(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.Memo=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item;c.nc("ngModel",e.Memo)("ngModelOptions",c.qc(2,Mh))}}function Mp(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",51),c.Jc(1,vp,2,1,"div",11),c.Jc(2,Ip,1,3,"t-text-editor",12),c.Rb()),2&e){const e=t.item,n=c.gc(3).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Memo),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}const Rp=function(){return["UserId","Memo"]},yp=function(e,t){return{UserId:e,Memo:t}};function Dp(e,t){if(1&e&&(c.Sb(0,"t-restricted",39),c.Nb(1,"t-table",40),c.Rb(),c.Jc(2,fp,2,3,"ng-template",null,59,c.Kc),c.Jc(4,pp,3,3,"ng-template",null,60,c.Kc),c.Jc(6,Sp,2,3,"ng-template",null,49,c.Kc),c.Jc(8,Mp,3,3,"ng-template",null,50,c.Kc)),2&e){const e=c.Ac(3),t=c.Ac(5),n=c.Ac(7),i=c.Ac(9),o=c.gc(2),r=o.model,s=o.isEdit;c.Eb("p-4",1===(null==r||null==r.EntityMetadata?null:r.EntityMetadata.Members)),c.nc("metadata",null==r||null==r.EntityMetadata?null:r.EntityMetadata.Members),c.zb(1),c.nc("dataSource",null==r?null:r.Members)("isEdit",s)("columnPaths",c.qc(7,Rp))("columnTemplates",c.sc(14,yp,c.sc(8,ap,e,t),c.sc(11,ap,n,i)))}}function wp(e,t){if(1&e&&(c.Sb(0,"li",58),c.Sb(1,"a",33),c.Jc(2,gp,3,0,"span",34),c.Sb(3,"span",35),c.Lc(4),c.hc(5,"translate"),c.hc(6,"number"),c.Rb(),c.Rb(),c.Jc(7,Dp,10,17,"ng-template",36),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(2),c.nc("ngIf",t.showMembersError(e)),c.zb(2),c.Mc(c.ic(5,2,"Members")+(e.Id&&2!=(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Members)?"":" ("+c.ic(6,4,t.membersCount(e))+")"))}}function Ep(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,Ih,2,1,"h2",6),c.Jc(2,Rh,2,7,"t-text-editor",7),c.Jc(3,yh,2,7,"t-text-editor",8),c.Jc(4,Dh,2,7,"t-text-editor",8),c.Rb(),c.Jc(5,Ch,4,6,"t-form-group",9),c.Jc(6,zh,4,6,"t-form-group",9),c.Jc(7,Oh,4,6,"t-form-group",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Jc(10,Ah,2,1,"div",11),c.Jc(11,Nh,1,3,"t-text-editor",12),c.Rb(),c.Jc(12,Ph,4,5,"t-form-group",13),c.Jc(13,Fh,5,6,"t-form-group",13),c.Jc(14,Vh,3,3,"t-warning-message",14),c.Sb(15,"ul",15,16),c.Jc(17,bp,8,6,"li",17),c.Jc(18,wp,8,6,"li",18),c.Rb(),c.Nb(19,"div",19)),2&e){const e=t.model,n=t.isEdit,i=c.Ac(16),o=c.gc();c.nc("serverErrors",o.getMultilingualValue(null==e?null:e.serverErrors,"Name",o.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&o.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&o.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&o.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!o.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,19,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",o.showIsPublic),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",o.showPublicRoleWarning(e)),c.zb(1),c.nc("destroyOnHide",!0),c.zb(2),c.nc("ngIf",o.showPermissions),c.zb(1),c.nc("ngIf",o.showMembersTab(e)),c.zb(1),c.nc("ngbNavOutlet",i)}}function Cp(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function xp(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const Tp=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},zp=function(e,t){return[e,t]};let Lp=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.showMembers=!0,this.showPermissions=!0,this.showIsPublic=!0,this._permissionActionChoices={},this._viewsDb=null,this._currentViewsDb=null,this._viewsForSelector=null,this.rolesApi=this.api.rolesApi(this.notifyDestruct$),this.expand="Permissions,Members.User",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsPublic=!1,e.Permissions=[],e.Members=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Permissions&&t.Permissions.forEach(e=>{e.Id=null,delete e.RoleId}),t.Members&&t.Members.forEach(e=>{e.Id=null,delete e.RoleId}),t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.rolesApi.activate([e.Id],{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.rolesApi.deactivate([e.Id],{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("roles","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.permissionViewLookup=e=>e?this.viewsDb[e]?this.viewsDb[e].name():(console.error(`missing view ${e}`),""):"",this.rolesApi=this.api.rolesApi(this.notifyDestruct$)}permissionActionChoices(e){if(!e.View)return[];if(!this._permissionActionChoices[e.View]){const t=this.viewsDb[e.View];this._permissionActionChoices[e.View]=t&&t.actions?Object.keys(t.actions).map(e=>({name:()=>this.translate.instant(gh.a[e]),value:e})):[]}return this._permissionActionChoices[e.View]}permissionActionLookup(e){return e?"All"===e?"View_All":gh.a[e]:""}disableCriteria(e){if(!e||!e.View||!e.Action)return!0;const t=this.viewsDb[e.View];if(t&&t.actions){const n=t.actions[e.Action];return!(n&&n.supportsCriteria)}return!0}disableMask(e){if(!e||!e.View||!e.Action)return!0;const t=this.viewsDb[e.View];if(t&&t.actions){const n=t.actions[e.Action];return!(n&&n.supportsMask)}return!0}onPermissionChanged(e){const t=this.permissionActionChoices(e);1===t.length?e.Action=t[0].value:e.Action&&t.every(t=>t.value!==e.Action)&&(e.Action=null),this.disableMask(e)&&(e.Mask=null),this.disableCriteria(e)&&(e.Criteria=null)}get ws(){return this.workspace.currentTenant}permissionsCount(e){return e&&e.Permissions?e.Permissions.length:0}membersCount(e){return e&&e.Members?e.Members.length:0}showMembersTab(e){return this.showMembers&&(!e||!e.IsPublic)}showPublicRoleWarning(e){return!e||e.IsPublic}showPermissionsError(e){return!!e&&!!e.Permissions&&e.Permissions.some(e=>!!e.serverErrors)}showMembersError(e){return!!e&&!!e.Members&&e.Members.some(e=>!!e.serverErrors)}get viewsDb(){if(this._currentLang!==this.translate.currentLang||this._currentDefinition!==this.ws.definitions){this._currentLang=this.translate.currentLang,this._currentDefinition=this.ws.definitions,this._viewsDb={};for(const c of Object.keys(gh.c)){const e=gh.c[c],t={name:()=>this.translate.instant(e.name),actions:{}};t.actions.All={supportsCriteria:!1,supportsMask:!1},e.read&&(t.actions.Read={supportsCriteria:!0,supportsMask:!0}),e.update&&(t.actions.Update={supportsCriteria:!0,supportsMask:!0}),e.delete&&(t.actions.Delete={supportsCriteria:!0,supportsMask:!1});for(const n of e.actions)t.actions[n.action]={supportsCriteria:n.criteria,supportsMask:!1};this._viewsDb[c]=t}const e=this.ws.definitions.Lookups;for(const c of Object.keys(e).map(e=>+e)){const e=Object(fh.a)(this.workspace,this.translate,c);e?this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error(`Could not find lookup definitionId '${c}'`)}const t=this.ws.definitions.Relations;for(const c of Object.keys(t).map(e=>+e)){const e=Object(hh.a)(this.workspace,this.translate,c);e?this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error(`Could not find relation definitionId '${c}'`)}const n=this.ws.definitions.Resources;for(const c of Object.keys(n).map(e=>+e)){const e=Object(mh.a)(this.workspace,this.translate,c);e?this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error(`Could not find resource definitionId '${c}'`)}const i=this.ws.definitions.Documents;for(const c of Object.keys(i).map(e=>+e)){const e=Object(ph.c)(this.workspace,this.translate,c);e&&(this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},State:{supportsCriteria:!0,supportsMask:!1}}})}}return this._viewsDb}get permissionViewChoices(){if(this._currentViewsDb!==this.viewsDb){const e=this.viewsDb;this._currentViewsDb=e,this._viewsForSelector=Object.keys(e).map(t=>({value:t,name:e[t].name})),this._viewsForSelector.sort((e,t)=>e.name()<t.name()?-1:e.name()>t.name()?1:0)}return this._viewsForSelector}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-roles-details"]],inputs:{showMembers:"showMembers",showPermissions:"showPermissions",showIsPublic:"showIsPublic"},features:[c.wb],decls:10,vars:27,consts:[["collection","Role",3,"expand","createFunc","cloneFunc","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["class","pt-3 pt-sm-4 w-100",4,"ngIf"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","permissions",4,"ngIf"],["ngbNavItem","members",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isPublic",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isPublic",1,"custom-control-label","t-pointer"],[1,"pt-3","pt-sm-4","w-100"],["ngbNavItem","permissions"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"metadata"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_View",""],["row_View",""],["header_Action",""],["row_Action",""],["header_Criteria",""],["row_Criteria",""],["header_Mask",""],["row_Mask",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"choices","ngModel","required","ngModelChange",4,"ngIf"],[3,"choices","ngModel","required","ngModelChange"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],["ngbNavItem","members"],["header_UserId",""],["row_UserId",""],["link","../../users",3,"itemId",4,"ngIf"],[3,"ngModel","showRoles","required","ngModelChange",4,"ngIf"],["link","../../users",3,"itemId"],[3,"ngModel","showRoles","required","ngModelChange"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,vh,2,1,"ng-template",null,1,c.Kc),c.Jc(4,Ep,20,21,"ng-template",null,2,c.Kc),c.Jc(6,Cp,2,3,"ng-template",null,3,c.Kc),c.Jc(8,xp,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("expand",t.expand)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("idString",t.idString)("masterCrumb",c.ic(1,10,"Roles"))("detailsCrumb",e)("documentTemplate",n)("actions",c.sc(24,zp,c.vc(12,Tp,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(18,Tp,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,G.v,G.A,pe.a,te.m,te.i,te.j,te.a,Sh.a,G.x,G.y,G.w,ee.a,hn.a,Fs.a,Vs.a,pn.a,ss,La],pipes:[K.c,C.d],encapsulation:2}),e})();var kp=n("HDdC");const Op=["errorModal"],Ap=["unsavedChangesModal"];function Np(e,t){1&e&&(c.Sb(0,"span",14),c.Lc(1,"\xa0*"),c.Rb())}function _p(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div"),c.Sb(1,"div",15),c.Sb(2,"button",16),c.cc("click",function(){return c.Dc(e),c.gc().onEdit()}),c.Nb(3,"fa-icon",17),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(1),c.nc("placement",e.placement)("ngbTooltip",e.editTooltip),c.zb(1),c.nc("disabled",!e.canEdit),c.zb(2),c.Nc("\xa0\xa0",c.ic(5,4,"Edit")," ")}}function Jp(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div"),c.Sb(1,"button",18),c.cc("click",function(){return c.Dc(e),c.gc().onSave()}),c.Nb(2,"fa-icon",19),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",20),c.cc("click",function(){return c.Dc(e),c.gc().onCancel()}),c.Nb(6,"fa-icon",21),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Rb()}2&e&&(c.zb(3),c.Nc("\xa0\xa0",c.ic(4,2,"Save")," "),c.zb(4),c.Nc("\xa0\xa0",c.ic(8,4,"Cancel")," "))}function Pp(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",22),c.cc("click",function(){return c.Dc(e),c.gc().onRefresh()}),c.hc(1,"translate"),c.Nb(2,"fa-icon",23),c.Rb()}2&e&&c.oc("title",c.ic(1,1,"Refresh"))}function Fp(e,t){1&e&&c.Ob(0)}const Vp=function(e,t){return{model:e,isEdit:t}};function qp(e,t){if(1&e&&(c.Sb(0,"div",24),c.Jc(1,Fp,1,0,"ng-container",25),c.Rb()),2&e){const e=c.gc();c.zb(1),c.nc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",c.sc(2,Vp,e.activeModel,e.isEdit))}}function jp(e,t){1&e&&(c.Sb(0,"div",26),c.Sb(1,"div",27),c.Nb(2,"t-spinner",28),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.nc("scale",2))}function $p(e,t){if(1&e&&(c.Sb(0,"div",26),c.Sb(1,"t-error-message"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(2),c.Nc(" ",e.errorMessage," ")}}function Up(e,t){if(1&e&&(c.Sb(0,"div",29),c.Sb(1,"h5",30),c.Nb(2,"fa-icon",31),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",32),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(6,"span",33),c.Lc(7,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",34),c.Lc(9),c.Rb(),c.Sb(10,"div",35),c.Sb(11,"button",36),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(12,"fa-icon",21),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc("\xa0\xa0",c.ic(4,3,"Error")," "),c.zb(6),c.Nc(" ",e.modalErrorMessage," "),c.zb(4),c.Nc(" \xa0",c.ic(14,5,"Dismiss")," ")}}function Kp(e,t){1&e&&(c.Sb(0,"div",29),c.Sb(1,"h5",30),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",32),c.cc("click",function(){return t.$implicit.dismiss(!1)}),c.Sb(5,"span",33),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",34),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Sb(10,"div",35),c.Sb(11,"button",37),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(12,"fa-icon",38),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Sb(15,"button",39),c.cc("click",function(){return t.$implicit.close(!1)}),c.Nb(16,"fa-icon",21),c.Lc(17),c.hc(18,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Nc(" ",c.ic(3,4,"Confirmation")," "),c.zb(6),c.Nc(" ",c.ic(9,6,"UnsavedChangesConfirmationMessage")," "),c.zb(5),c.Nc(" \xa0",c.ic(14,8,"Proceed")," "),c.zb(4),c.Nc(" \xa0",c.ic(18,10,"Cancel")," "))}let Bp=(()=>{class e{constructor(e,t,n,i,c){this.workspace=e,this.api=t,this.storage=n,this.modalService=i,this.translate=c,this.notifyDestruct$=new E.a,this.crud=this.api.settingsFactory("",this.notifyDestruct$),this._unboundServerErrors=[],this.notifyFetch$=new E.a,this.notifyFetch$.pipe(Object(N.a)(()=>this.doFetch())).subscribe()}doSomething(e){this.isDirty&&(e.returnValue=this.translate.instant("UnsavedChangesConfirmationMessage"))}displayModalError(e){this._modalErrorMessage=e,this.modalService.open(this.errorModal)}ngOnInit(){this.clearErrors(),this.crud=this.api.settingsFactory(this.endpoint,this.notifyDestruct$),this.fetch()}ngOnDestroy(){this.notifyDestruct$.next()}canDeactivate(){if(this.isDirty){const e=this.modalService.open(this.unsavedChangesModal),t=new E.a;return e.result.then(e=>{t.next(e),t.complete()},e=>{t.next(!1),t.complete()}),t}return!0}clearErrors(){this._errorMessage=null,this._modalErrorMessage=null,this._unboundServerErrors=[]}fetch(){this.notifyFetch$.next(null)}doFetch(){return this.clearErrors(),this.detailsStatus=L.c.loading,this.crud.get({expand:this.expand}).pipe(Object(J.a)(e=>{this._viewModel=e.Result,Object(V.o)(e.RelatedEntities,this.workspace),this.workspace.notifyStateChanged(),this.detailsStatus=L.c.loaded}),Object(F.a)(e=>(this.detailsStatus=L.c.error,this._errorMessage=e.error,Object(A.a)(null))))}get isDirty(){return this.isEdit&&this._viewModelJson!==JSON.stringify(this._editModel)}get isEdit(){return this.detailsStatus===L.c.edit}get placement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get errorMessage(){return this._errorMessage}get modalErrorMessage(){return this._modalErrorMessage}get activeModel(){return this.isEdit?this._editModel:this._viewModel}get showSpinner(){return this.detailsStatus===L.c.loading}get showDocument(){return this.detailsStatus===L.c.loaded||this.detailsStatus===L.c.edit}get showRefresh(){return!this.isEdit}get showViewToolbar(){return!this.showEditToolbar}get showEditToolbar(){return this.detailsStatus===L.c.edit}get showErrorMessage(){return this.detailsStatus===L.c.error}onRefresh(){this.detailsStatus!==L.c.loading&&this.fetch()}onEdit(){this.canEdit&&this._viewModel&&(this._viewModelJson=JSON.stringify(this._viewModel),this._editModel=JSON.parse(this._viewModelJson),this.detailsStatus=L.c.edit)}get canEditPermissions(){return this.workspace.currentTenant.canUpdate(this.view,null)}get canEdit(){return!!this.showDocument&&this.canEditPermissions}get editTooltip(){return this.canEditPermissions?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}onSave(){this.isDirty?(this.clearErrors(),Object(q.c)(this._editModel),this.crud.save(this._editModel,{expand:this.expand,returnEntities:!0}).subscribe(e=>{this._viewModel=e.Result,Object(V.o)(e.RelatedEntities,this.workspace),this.workspace.notifyStateChanged(),e.SettingsForClient&&Object($.h)(e.SettingsForClient,this.workspace.ws.tenantId,this.workspace.currentTenant,this.storage),this.detailsStatus=L.c.loaded,this._editModel=null},e=>{this.workspace.current.unauthorized||(422===e.status?this.apply422ErrorsToModel(e.error):this.displayModalError(e.error))})):(this.clearErrors(),Object(q.c)(this._editModel),this._editModel=null,this.detailsStatus=L.c.loaded)}onCancel(){const e=this.canDeactivate();e instanceof kp.a?e.subscribe(e=>{e&&this.doCancel()}):e&&this.doCancel()}doCancel(){this._editModel=null,this.clearErrors(),this.detailsStatus=L.c.loaded}apply422ErrorsToModel(e){this._unboundServerErrors=[];const t=Object(q.b)(this._editModel,e);Object.keys(t).forEach(e=>{t[e].forEach(e=>{this._unboundServerErrors.push(e)})})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(Q.a),c.Mb(G.t),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-settings"]],viewQuery:function(e,t){if(1&e&&(c.Qc(Op,3),c.Qc(Ap,3)),2&e){let e;c.zc(e=c.dc())&&(t.errorModal=e.first),c.zc(e=c.dc())&&(t.unsavedChangesModal=e.first)}},hostBindings:function(e,t){1&e&&c.cc("beforeunload",function(e){return t.doSomething(e)},!1,c.Cc)},inputs:{title:"title",endpoint:"endpoint",expand:"expand",view:"view",template:"template"},decls:20,vars:8,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-6","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["class","text-danger t-dirty-asterisk px-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[4,"ngIf"],["class","btn btn-light btn-sm t-white-button t-toolbar-button","type","button",3,"title","click",4,"ngIf"],[1,"row","t-rest-of-screen","bg-white"],["class","w-100 h-100 p-0 d-flex flex-column",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],["errorModal",""],["unsavedChangesModal",""],[1,"text-danger","t-dirty-asterisk","px-1"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","pen"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"click"],["icon","save"],[1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button",3,"click"],["icon","times"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","click"],["icon","sync-alt"],[1,"w-100","h-100","p-0","d-flex","flex-column"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-100","mt-3"],[1,"w-100","p-2","d-flex","justify-content-center"],[3,"scale"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],["icon","check"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"div",2),c.Sb(3,"ul",3),c.Sb(4,"li",4),c.Lc(5),c.Jc(6,Np,2,0,"span",5),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",6),c.Jc(8,_p,6,6,"div",7),c.Jc(9,Jp,9,6,"div",7),c.Sb(10,"div"),c.Jc(11,Pp,3,3,"button",8),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"div",9),c.Jc(13,qp,2,5,"div",10),c.Jc(14,jp,3,1,"div",11),c.Jc(15,$p,3,1,"div",11),c.Rb(),c.Rb(),c.Jc(16,Up,15,7,"ng-template",null,12,c.Kc),c.Jc(18,Kp,19,12,"ng-template",null,13,c.Kc)),2&e&&(c.zb(5),c.Nc(" ",t.title," "),c.zb(1),c.nc("ngIf",t.isDirty),c.zb(2),c.nc("ngIf",t.showViewToolbar),c.zb(1),c.nc("ngIf",t.showEditToolbar),c.zb(2),c.nc("ngIf",t.showRefresh),c.zb(2),c.nc("ngIf",t.showDocument),c.zb(1),c.nc("ngIf",t.showSpinner),c.zb(1),c.nc("ngIf",t.showErrorMessage))},directives:[C.l,G.E,ee.a,C.p,fe.a,Se.a],pipes:[K.c],encapsulation:2}),e})(),Hp=(()=>{class e{canDeactivate(){return!this.settings||this.settings.canDeactivate()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&c.Qc(Bp,1),2&e){let e;c.zc(e=c.dc())&&(t.settings=e.first)}},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var Qp=n("nM1v");function Wp(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(1),c.Eb("text-danger",e.invalid),c.nc("title",e.label),c.zb(1),c.Mc(e.label)}}function Gp(e,t){1&e&&c.Nb(0,"fa-icon",9)}function Yp(e,t){if(1&e&&(c.Sb(0,"p",12),c.Nb(1,"fa-icon",13),c.Lc(2),c.Rb()),2&e){const e=t.$implicit;c.zb(2),c.Nc(" \xa0",e()," ")}}function Xp(e,t){if(1&e&&(c.Sb(0,"div",10),c.Jc(1,Yp,3,1,"p",11),c.Rb()),2&e){const e=c.gc();c.zb(1),c.nc("ngForOf",e.errors)}}const Zp=["*"];let eS=(()=>{class e extends Qp.a{}return e.\u0275fac=function(t){return tS(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-form-group-settings"]],inputs:{description:"description"},features:[c.wb],ngContentSelectors:Zp,decls:10,vars:14,consts:[["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"row",3,"ngbPopover","placement"],["class","font-weight-bold small col-12 text-truncate",4,"ngIf"],[1,"text-muted","small","col-12","mb-2","text-nowrap",3,"title"],[1,"t-vertical-align-middle"],[1,"col-12","d-flex","form-group-container"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["errorsPopover",""],[1,"font-weight-bold","small","col-12","text-truncate"],[1,"t-vertical-align-middle",3,"title"],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"]],template:function(e,t){if(1&e&&(c.mc(),c.Sb(0,"div",0),c.Jc(1,Wp,3,4,"div",1),c.Sb(2,"div",2),c.Sb(3,"span",3),c.Lc(4),c.Rb(),c.Rb(),c.Sb(5,"div",4),c.lc(6),c.Jc(7,Gp,1,0,"fa-icon",5),c.Rb(),c.Rb(),c.Jc(8,Xp,2,1,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(9);c.Eb("border-left",!t.isRtl)("border-right",t.isRtl),c.nc("ngbPopover",t.invalid?e:null)("placement",t.popoverPlacement),c.zb(1),c.nc("ngIf",t.showLabel),c.zb(1),c.nc("title",t.description),c.zb(2),c.Mc(t.description),c.zb(1),c.Eb("is-invalid",t.invalid)("col-lg-8",t.showLabel),c.zb(2),c.nc("ngIf",t.areServerErrors)}},directives:[G.C,C.l,ee.a,C.k],encapsulation:2}),e})();const tS=c.Ub(eS);function nS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.ShortCompanyName)}}const iS=function(){return{updateOn:"blur"}};function cS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",12),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ShortCompanyName=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.ShortCompanyName)("ngModelOptions",c.qc(2,iS))}}function oS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.ShortCompanyName2)}}function rS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",14),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ShortCompanyName2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.ShortCompanyName2)("ngModelOptions",c.qc(2,iS))}}function sS(e,t){if(1&e&&(c.Sb(0,"t-form-group-settings",5),c.hc(1,"translate"),c.hc(2,"translate"),c.Jc(3,oS,2,1,"div",6),c.Jc(4,rS,1,3,"t-text-editor",13),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,5,"Settings_ShortCompanyName")+i.secondaryPostfix)("description",c.ic(2,7,"Settings_ShortCompanyNameDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.ShortCompanyName2),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function lS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.ShortCompanyName3)}}function aS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",14),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ShortCompanyName3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.ShortCompanyName3)("ngModelOptions",c.qc(2,iS))}}function uS(e,t){if(1&e&&(c.Sb(0,"t-form-group-settings",5),c.hc(1,"translate"),c.hc(2,"translate"),c.Jc(3,lS,2,1,"div",6),c.Jc(4,aS,1,3,"t-text-editor",13),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,5,"Settings_ShortCompanyName")+i.ternaryPostfix)("description",c.ic(2,7,"Settings_ShortCompanyNameDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.ShortCompanyName3),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function dS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.cultureName(null==e?null:e.PrimaryLanguageId)||"-")}}function bS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",15),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.PrimaryLanguageId=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.PrimaryLanguageId)("choices",t.cultures)}}function gS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.cultureName(null==e?null:e.SecondaryLanguageId)||"-")}}function fS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",16),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.SecondaryLanguageId=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.SecondaryLanguageId)("choices",t.cultures)}}function mS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.cultureName(null==e?null:e.TernaryLanguageId)||"-")}}function hS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",16),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TernaryLanguageId=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.TernaryLanguageId)("choices",t.cultures)}}function pS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc((null==e?null:e.PrimaryLanguageSymbol)||"-")}}function SS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",14),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.PrimaryLanguageSymbol=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.PrimaryLanguageSymbol)("ngModelOptions",c.qc(2,iS))}}function vS(e,t){if(1&e&&(c.Sb(0,"t-form-group-settings",5),c.hc(1,"translate"),c.hc(2,"translate"),c.Jc(3,pS,2,1,"div",6),c.Jc(4,SS,1,3,"t-text-editor",13),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,5,"Settings_PrimaryLanguageSymbol"))("description",c.ic(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.PrimaryLanguageSymbol),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function IS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc((null==e?null:e.SecondaryLanguageSymbol)||"-")}}function MS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",14),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.SecondaryLanguageSymbol=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.SecondaryLanguageSymbol)("ngModelOptions",c.qc(2,iS))}}function RS(e,t){if(1&e&&(c.Sb(0,"t-form-group-settings",5),c.hc(1,"translate"),c.hc(2,"translate"),c.Jc(3,IS,2,1,"div",6),c.Jc(4,MS,1,3,"t-text-editor",13),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,5,"Settings_SecondaryLanguageSymbol"))("description",c.ic(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.SecondaryLanguageSymbol),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function yS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc((null==e?null:e.TernaryLanguageSymbol)||"-")}}function DS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",14),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TernaryLanguageSymbol=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.TernaryLanguageSymbol)("ngModelOptions",c.qc(2,iS))}}function wS(e,t){if(1&e&&(c.Sb(0,"t-form-group-settings",5),c.hc(1,"translate"),c.hc(2,"translate"),c.Jc(3,yS,2,1,"div",6),c.Jc(4,DS,1,3,"t-text-editor",13),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,5,"Settings_TernaryLanguageSymbol"))("description",c.ic(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.TernaryLanguageSymbol),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function ES(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.calendarName(null==e?null:e.PrimaryCalendar)||"-")}}function CS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",15),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.PrimaryCalendar=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.PrimaryCalendar)("choices",t.calendars)}}function xS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.calendarName(null==e?null:e.SecondaryCalendar)||"-")}}function TS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",16),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.SecondaryCalendar=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.SecondaryCalendar)("choices",t.calendars)}}function zS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.dateFormatDisplay(null==e?null:e.DateFormat)||"-")}}function LS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",16),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.DateFormat=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.DateFormat)("choices",t.dateFormats)}}function kS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.timeFormatDisplay(null==e?null:e.TimeFormat)||"-")}}function OS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",16),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TimeFormat=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.TimeFormat)("choices",t.timeFormats)}}function AS(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc((null==e?null:e.BrandColor)||"-")}}function NS(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",17),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.BrandColor=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.BrandColor)("ngModelOptions",c.qc(2,iS))}}function _S(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"h5",3),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"div",4),c.Sb(5,"t-form-group-settings",5),c.hc(6,"translate"),c.hc(7,"translate"),c.Jc(8,nS,2,1,"div",6),c.Jc(9,cS,1,3,"t-text-editor",7),c.Rb(),c.Jc(10,sS,5,9,"t-form-group-settings",8),c.Jc(11,uS,5,9,"t-form-group-settings",8),c.Sb(12,"t-form-group-settings",5),c.hc(13,"translate"),c.hc(14,"translate"),c.Jc(15,dS,2,1,"div",6),c.Jc(16,bS,1,2,"t-selector",9),c.Rb(),c.Sb(17,"t-form-group-settings",5),c.hc(18,"translate"),c.hc(19,"translate"),c.Jc(20,gS,2,1,"div",6),c.Jc(21,fS,1,2,"t-selector",10),c.Rb(),c.Sb(22,"t-form-group-settings",5),c.hc(23,"translate"),c.hc(24,"translate"),c.Jc(25,mS,2,1,"div",6),c.Jc(26,hS,1,2,"t-selector",10),c.Rb(),c.Jc(27,vS,5,9,"t-form-group-settings",8),c.Jc(28,RS,5,9,"t-form-group-settings",8),c.Jc(29,wS,5,9,"t-form-group-settings",8),c.Rb(),c.Sb(30,"h5",3),c.Lc(31),c.hc(32,"translate"),c.Rb(),c.Sb(33,"div",4),c.Sb(34,"t-form-group-settings",5),c.hc(35,"translate"),c.hc(36,"translate"),c.Jc(37,ES,2,1,"div",6),c.Jc(38,CS,1,2,"t-selector",9),c.Rb(),c.Sb(39,"t-form-group-settings",5),c.hc(40,"translate"),c.hc(41,"translate"),c.Jc(42,xS,2,1,"div",6),c.Jc(43,TS,1,2,"t-selector",10),c.Rb(),c.Sb(44,"t-form-group-settings",5),c.hc(45,"translate"),c.hc(46,"translate"),c.Jc(47,zS,2,1,"div",6),c.Jc(48,LS,1,2,"t-selector",10),c.Rb(),c.Sb(49,"t-form-group-settings",5),c.hc(50,"translate"),c.hc(51,"translate"),c.Jc(52,kS,2,1,"div",6),c.Jc(53,OS,1,2,"t-selector",10),c.Rb(),c.Rb(),c.Sb(54,"h5",3),c.Lc(55),c.hc(56,"translate"),c.Rb(),c.Sb(57,"div",4),c.Sb(58,"t-form-group-settings",5),c.hc(59,"translate"),c.hc(60,"translate"),c.Jc(61,AS,2,1,"div",6),c.Jc(62,NS,1,3,"t-text-editor",11),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.zb(2),c.Nc(" ",c.ic(3,53,"GeneralSettings")," "),c.zb(3),c.nc("label",c.ic(6,55,"Settings_ShortCompanyName")+i.primaryPostfix)("description",c.ic(7,57,"Settings_ShortCompanyNameDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.ShortCompanyName),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",e.SecondaryLanguageId),c.zb(1),c.nc("ngIf",e.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(13,59,"Settings_PrimaryLanguage"))("description",c.ic(14,61,"Settings_PrimaryLanguageDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.PrimaryLanguageId),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(18,63,"Settings_SecondaryLanguage"))("description",c.ic(19,65,"Settings_SecondaryLanguageDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.SecondaryLanguageId),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(23,67,"Settings_TernaryLanguage"))("description",c.ic(24,69,"Settings_TernaryLanguageDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.TernaryLanguageId),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",e.SecondaryLanguageId),c.zb(1),c.nc("ngIf",e.SecondaryLanguageId),c.zb(1),c.nc("ngIf",e.TernaryLanguageId),c.zb(2),c.Nc(" ",c.ic(32,71,"DatesAndTimes")," "),c.zb(3),c.nc("label",c.ic(35,73,"Settings_PrimaryCalendar"))("description",c.ic(36,75,"Settings_PrimaryCalendarDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.PrimaryCalendar),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(40,77,"Settings_SecondaryCalendar"))("description",c.ic(41,79,"Settings_SecondaryCalendarDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.SecondaryCalendar),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(45,81,"Settings_DateFormat"))("description",c.ic(46,83,"Settings_DateFormatDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.DateFormat),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(50,85,"Settings_TimeFormat"))("description",c.ic(51,87,"Settings_TimeFormatDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.TimeFormat),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(2),c.Nc(" ",c.ic(56,89,"Branding")," "),c.zb(3),c.nc("label",c.ic(59,91,"Settings_BrandColor"))("description",c.ic(60,93,"Settings_BrandColorDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.BrandColor),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}let JS=(()=>{class e extends Hp{constructor(e,t){super(),this.workspace=e,this.translate=t}get primaryPostfix(){return this.workspace.currentTenant.primaryPostfix}get secondaryPostfix(){return this.workspace.currentTenant.secondaryPostfix}get ternaryPostfix(){return this.workspace.currentTenant.ternaryPostfix}cultureName(e){return Ps.a[e]}get cultures(){return this._cultures||(this._cultures=Object.keys(Ps.a).map(e=>({name:()=>Ps.a[e],value:e}))),this._cultures}calendarName(e){return e?this.translate.instant("Calendar_"+e):null}get calendars(){return this._calendars||(this._calendars=Di.c.map(e=>({name:()=>this.calendarName(e),value:e}))),this._calendars}dateFormatDisplay(e){const t={day:1,month:2,year:(new Date).getFullYear()};return Object(Bi.d)(t,e,this.translate,"GC")}get dateFormats(){return this._dateFormats||(this._dateFormats=Di.k.map(e=>({name:()=>this.dateFormatDisplay(e),value:e}))),this._dateFormats}timeFormatDisplay(e){return Object(Bi.e)({hour:13,minute:5,second:27},e,this.translate)}get timeFormats(){return this._timeFormats||(this._timeFormats=Di.f.map(e=>({name:()=>this.timeFormatDisplay(e),value:e}))),this._timeFormats}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-general-settings"]],features:[c.wb],decls:4,vars:4,consts:[["endpoint","general-settings","view","general-settings","expand","",3,"title","template"],["template",""],[1,"m-0","pt-3","pt-sm-4","pb-3","pb-sm-5","pl-0","pl-sm-3","pr-0","pr-sm-3"],[1,"col-12","bg-light","t-settings-header"],[1,"row","col-12","t-settings-section"],[1,"t-form-group",3,"label","description","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","description","serverErrors",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["isOptional","true",3,"ngModel","choices","ngModelChange",4,"ngIf"],["placeholder","e.g. #343A40",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","choices","ngModelChange"],["isOptional","true",3,"ngModel","choices","ngModelChange"],["placeholder","e.g. #343A40",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-settings",0),c.hc(1,"translate"),c.Jc(2,_S,63,95,"ng-template",null,1,c.Kc)),2&e){const e=c.Ac(3);c.nc("title",c.ic(1,2,"GeneralSettings"))("template",e)}},directives:[Bp,eS,C.l,pe.a,te.m,te.i,te.j,pn.a],pipes:[K.c],encapsulation:2}),e})();var PS=n("TJ1c");const FS=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},VS=function(e,t){return[e,t]},qS=function(e){return{template:e,expression:"CreatedById eq me"}},jS=function(e){return[e]},$S=function(e){return{CreatedBy:e}};function US(e,t){if(1&e&&c.Nb(0,"t-master",8),2&e){const e=c.gc(),t=c.Ac(4),n=c.Ac(8),i=c.Ac(6),o=c.Ac(10),r=c.Ac(12),s=c.Ac(14);c.nc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("multiselectActions",c.sc(21,VS,c.uc(11,FS,o,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.uc(16,FS,r,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",c.rc(28,$S,c.rc(26,jS,c.rc(24,qS,s))))}}function KS(e,t){if(1&e&&c.Nb(0,"t-application-page-not-found",9),2&e){const e=c.gc();c.nc("showHome",!e.isPopupMode)}}function BS(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",16),c.Nb(2,"t-image",17),c.Rb(),c.Lc(3," \xa0\xa0\xa0 "),c.Pb()),2&e){const e=c.gc().id,t=c.gc();c.zb(2),c.nc("src","resources/"+t.c[e].DefinitionId+"/"+t.c[e].Id+"/image")("imageId",t.c[e].ImageId)("size",42)}}function HS(e,t){if(1&e&&(c.Sb(0,"div",10),c.Jc(1,BS,4,3,"ng-container",11),c.Sb(2,"div",12),c.Sb(3,"div",13),c.Sb(4,"span",14),c.Lc(5),c.Rb(),c.Rb(),c.Sb(6,"div",15),c.Sb(7,"span"),c.Lc(8),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("ngIf",2===(null==n.c[e].EntityMetadata?null:n.c[e].EntityMetadata.ImageId)&&n.Image_isVisible),c.zb(4),c.Mc(n.ws.getMultilingualValue("Resource",e,"Name")),c.zb(3),c.Mc(n.c[e].Code)}}function QS(e,t){if(1&e&&c.Lc(0),2&e){const e=c.gc();c.Nc(" ",e.summary,"\n")}}function WS(e,t){if(1&e&&(c.Sb(0,"span",18),c.Nb(1,"t-auto-cell",19),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("definitionId",n.definitionId)("entity",n.c[e])}}function GS(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function YS(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function XS(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}let ZS=(()=>{class e extends xt.a{constructor(e,t,n,i,c){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=c,this.resourcesApi=this.api.resourcesApi(null,this.notifyDestruct$),this.expand="",this.onActivate=e=>this.resourcesApi.activate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.resourcesApi.deactivate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.resourcesApi=this.api.resourcesApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`resources/${this.definitionId}`}get c(){return this.ws.Resource}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Resources[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Resources")}get summary(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Resource")}get Image_isVisible(){return!!this.definition.ImageVisibility}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(i.e),c.Mb(i.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-resources-master"]],inputs:{definitionId:"definitionId"},features:[c.wb],decls:15,vars:2,consts:[["collection","Resource","selectDefault","Code,IsActive","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Resource","selectDefault","Code,IsActive","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1","d-inline-block","t-mw-0"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"border","t-dp-wrapper2"],["icon","camera",3,"src","imageId","size"],[1,"text-truncate"],["collection","Resource",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(c.Jc(0,US,1,30,"t-master",0),c.Jc(1,KS,1,1,"ng-template",null,1,c.Kc),c.Jc(3,HS,9,3,"ng-template",null,2,c.Kc),c.Jc(5,QS,1,1,"ng-template",null,3,c.Kc),c.Jc(7,WS,2,2,"ng-template",null,4,c.Kc),c.Jc(9,GS,2,3,"ng-template",null,5,c.Kc),c.Jc(11,YS,2,3,"ng-template",null,6,c.Kc),c.Jc(13,XS,2,3,"ng-template",null,7,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,Tt.a,nn,be,me.a],pipes:[K.c],encapsulation:2}),e})();function ev(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-units-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function tv(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-units-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let nv=(()=>{class e extends Js{}return e.\u0275fac=function(t){return iv(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-units-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","Unit",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,ev,2,3,"ng-template",null,1,c.Kc),c.Jc(3,tv,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,ii,en],encapsulation:2}),e})();const iv=c.Ub(nv);function cv(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-resources-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.definitionId,i=t.idString,o=c.gc();c.zb(1),c.nc("idString",i)("initialText",e)("definitionId",n)("additionalSelect",o.additionalSelect)}}function ov(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-resources-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.definitionId,n=t.filter,i=c.gc();c.zb(1),c.nc("definitionId",e)("filter",n)("showCreate",i.showCreate)("additionalSelect",i.additionalSelect)}}let rv=(()=>{class e extends Js{}return e.\u0275fac=function(t){return sv(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-resources-picker"]],inputs:{definitionIds:"definitionIds"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:7,consts:[["collection","Resource",3,"masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","filter","definitionIds","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"idString","initialText","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,cv,2,4,"ng-template",null,1,c.Kc),c.Jc(3,ov,2,4,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("filter",t.filter)("definitionIds",t.definitionIds)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const sv=c.Ub(rv),lv=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},av=function(e,t,n){return{template:e,action:t,showAction:n}},uv=function(e,t,n){return[e,t,n]};function dv(e,t){if(1&e&&c.Nb(0,"t-details",7),2&e){const e=c.gc(),t=c.Ac(4),n=c.Ac(6),i=c.Ac(8),o=c.Ac(10),r=c.Ac(12);c.nc("definitionId",e.definitionId)("createFunc",e.create)("cloneFunc",e.clone)("expand",e.expand)("mode",e.mode)("additionalSelect",e.additionalSelect)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("idString",e.idString)("documentTemplate",n)("savePreprocessing",e.savePreprocessing)("actions",c.tc(28,uv,c.vc(12,lv,i,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.vc(18,lv,o,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.tc(24,av,r,e.onEditDefinition,e.showEditDefinition)))}}function bv(e,t){if(1&e&&c.Nb(0,"t-application-page-not-found",8),2&e){const e=c.gc();c.nc("showHome",!e.isPopupMode)}}function gv(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function fv(e,t){if(1&e&&(c.Sb(0,"h2",20),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const mv=function(){return{updateOn:"blur"}};function hv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,mv))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function pv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,mv))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Sv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,mv))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function vv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-image",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Image=t}),c.Rb()}if(2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("src",t.Id?"resources/"+i.definitionId+"/"+t.Id+"/image":null)("imageId",null==t?null:t.ImageId)("ngModel",t.Image)("isEdit",n)}}function Iv(e,t){if(1&e&&(c.Sb(0,"div",23),c.Sb(1,"t-restricted",24),c.Sb(2,"div",25),c.Jc(3,vv,1,4,"t-image",26),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ImageId),c.zb(2),c.nc("ngIf",!!e)}}function Mv(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function Rv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",29),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,mv))}}function yv(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Mv,2,1,"div",16),c.Jc(3,Rv,1,3,"t-text-editor",28),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Dv(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function wv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,mv))}}function Ev(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Dv,2,1,"div",16),c.Jc(3,wv,1,3,"t-text-editor",17),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Cv(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function xv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,mv))}}function Tv(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Cv,2,1,"div",16),c.Jc(3,xv,1,3,"t-text-editor",17),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function zv(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function Lv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Code)("ngModelOptions",c.qc(2,mv))}}function kv(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",33),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Unit),c.zb(1),c.nc("itemId",null==e?null:e.UnitId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",null==e?null:e.UnitId,"Name")," ")}}function Ov(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",34),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.UnitId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.UnitId)("required",t.Unit_isRequired)}}function Av(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,kv,3,3,"t-restricted",31),c.Jc(3,Ov,1,2,"t-units-picker",32),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Resource_Unit"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.UnitId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Nv(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitMass),c.zb(2),c.Nc(" ",c.jc(3,2,null==e?null:e.UnitMass,"1.0-4")," ")}}function _v(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.UnitMass=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.UnitMass)("ngModelOptions",c.qc(5,mv))("required",t.UnitMass_isRequired)("minDecimalPlaces",4)("maxDecimalPlaces",4)}}function Jv(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Nv,4,5,"t-restricted",31),c.Jc(3,_v,1,6,"t-decimal-editor",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Resource_UnitMass"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.UnitMass),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Pv(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",33),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitMassUnit),c.zb(1),c.nc("itemId",null==e?null:e.UnitMassUnitId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",null==e?null:e.UnitMassUnitId,"Name")," ")}}function Fv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",34),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.UnitMassUnitId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.UnitMassUnitId)("required",t.UnitMass_isRequired)}}function Vv(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,Pv,3,3,"t-restricted",31),c.Jc(3,Fv,1,2,"t-units-picker",32),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Resource_UnitMassUnit"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.UnitMassUnitId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function qv(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.MonetaryValue),c.zb(2),c.Nc(" ",c.jc(3,2,null==e?null:e.MonetaryValue,"1."+t.MonetaryValue_decimals(e)+"-"+t.MonetaryValue_decimals(e))," ")}}function jv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.MonetaryValue=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.MonetaryValue)("ngModelOptions",c.qc(5,mv))("required",t.MonetaryValue_isRequired)("minDecimalPlaces",t.MonetaryValue_decimals(e))("maxDecimalPlaces",t.MonetaryValue_decimals(e))}}function $v(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,qv,4,5,"t-restricted",31),c.Jc(2,jv,1,6,"t-decimal-editor",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.MonetaryValue_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.MonetaryValue),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Uv(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",38),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Participant),c.zb(1),c.nc("link","../../../relations/"+t.Participant_definitionIds[0])("itemId",null==e?null:e.ParticipantId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",e.ParticipantId,"Name")," ")}}function Kv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",39),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ParticipantId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ParticipantId)("definitionIds",t.Participant_definitionIds)("required",t.Participant_isRequired)}}function Bv(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Uv,3,4,"t-restricted",31),c.Jc(2,Kv,1,3,"t-relations-picker",37),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Participant_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ParticipantId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Hv(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",38),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Resource1),c.zb(1),c.nc("link","../../../resources/"+(null==(n=t.ws.get("Resource",e.Resource1Id))?null:n.DefinitionId))("itemId",null==e?null:e.Resource1Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Resource",e.Resource1Id,"Name")," ")}}function Qv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resources-picker",39),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Resource1Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Resource1Id)("definitionIds",t.Resource1_DefinitionIds)("required",t.Resource1_isRequired)}}function Wv(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Hv,3,4,"t-restricted",31),c.Jc(2,Qv,1,3,"t-resources-picker",37),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Resource1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Resource1Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Gv(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",40),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Currency),c.zb(1),c.nc("itemId",null==e?null:e.CurrencyId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")," ")}}function Yv(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",34),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.CurrencyId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.CurrencyId)("required",t.Currency_isRequired)}}function Xv(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Gv,3,3,"t-restricted",31),c.Jc(2,Yv,1,2,"t-currencies-picker",32),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Currency_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Zv(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",41),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Center),c.zb(1),c.nc("itemId",null==e?null:e.CenterId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Center",e.CenterId,"Name")," ")}}function eI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",34),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.CenterId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.CenterId)("required",t.Center_isRequired)}}function tI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,Zv,3,3,"t-restricted",31),c.Jc(2,eI,1,2,"t-centers-picker",32),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Center_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function nI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",38),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup1),c.zb(1),c.nc("link","../../../lookups/"+t.Lookup1_DefinitionId)("itemId",null==e?null:e.Lookup1Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup1Id,"Name")," ")}}function iI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup1Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup1Id)("definitionId",t.Lookup1_DefinitionId)("required",t.Lookup1_isRequired)}}function cI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,nI,3,4,"t-restricted",31),c.Jc(2,iI,1,3,"t-lookups-picker",42),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup1Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function oI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",38),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup2),c.zb(1),c.nc("link","../../../lookups/"+t.Lookup2_DefinitionId)("itemId",null==e?null:e.Lookup2Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup2Id,"Name")," ")}}function rI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup2Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup2Id)("definitionId",t.Lookup2_DefinitionId)("required",t.Lookup2_isRequired)}}function sI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,oI,3,4,"t-restricted",31),c.Jc(2,rI,1,3,"t-lookups-picker",42),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup2Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function lI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",38),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup3),c.zb(1),c.nc("link","../../../lookups/"+t.Lookup3_DefinitionId)("itemId",null==e?null:e.Lookup3Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup3Id,"Name")," ")}}function aI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup3Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup3Id)("definitionId",t.Lookup3_DefinitionId)("required",t.Lookup3_isRequired)}}function uI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,lI,3,4,"t-restricted",31),c.Jc(2,aI,1,3,"t-lookups-picker",42),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup3Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function dI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"t-view-link",38),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup4),c.zb(1),c.nc("link","../../../lookups/"+t.Lookup4_DefinitionId)("itemId",null==e?null:e.Lookup4Id),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup4Id,"Name")," ")}}function bI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Lookup4Id=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Lookup4Id)("definitionId",t.Lookup4_DefinitionId)("required",t.Lookup4_isRequired)}}function gI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,dI,3,4,"t-restricted",31),c.Jc(2,bI,1,3,"t-lookups-picker",42),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Lookup4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup4Id),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function fI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal1),c.zb(2),c.Mc(c.jc(3,2,null==e?null:e.Decimal1,"1.0-4"))}}function mI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Decimal1=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Decimal1)("ngModelOptions",c.qc(5,mv))("required",t.Decimal1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function hI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,fI,4,5,"t-restricted",31),c.Jc(2,mI,1,6,"t-decimal-editor",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Decimal1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal1),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function pI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal2),c.zb(2),c.Mc(c.jc(3,2,null==e?null:e.Decimal2,"1.0-4"))}}function SI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Decimal2=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Decimal2)("ngModelOptions",c.qc(5,mv))("required",t.Decimal2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function vI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,pI,4,5,"t-restricted",31),c.Jc(2,SI,1,6,"t-decimal-editor",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Decimal2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal2),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function II(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int1),c.zb(2),c.Mc(c.jc(3,2,null==e?null:e.Int1,"1.0-0"))}}function MI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Int1=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Int1)("ngModelOptions",c.qc(5,mv))("required",t.Int1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function RI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,II,4,5,"t-restricted",31),c.Jc(2,MI,1,6,"t-decimal-editor",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Int1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int1),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function yI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int2),c.zb(2),c.Mc(c.jc(3,2,null==e?null:e.Int2,"1.0-0"))}}function DI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Int2=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Int2)("ngModelOptions",c.qc(5,mv))("required",t.Int2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function wI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,yI,4,5,"t-restricted",31),c.Jc(2,DI,1,6,"t-decimal-editor",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Int2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int2),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function EI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text1),c.zb(2),c.Mc(null==e?null:e.Text1)}}function CI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Text1=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Text1)("ngModelOptions",c.qc(3,mv))("required",t.Text1_isRequired)}}function xI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,EI,3,2,"t-restricted",31),c.Jc(2,CI,1,4,"t-text-editor",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Text1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text1),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function TI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text2),c.zb(2),c.Mc(null==e?null:e.Text2)}}function zI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Text2=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Text2)("ngModelOptions",c.qc(3,mv))("required",t.Text2_isRequired)}}function LI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,TI,3,2,"t-restricted",31),c.Jc(2,zI,1,4,"t-text-editor",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Text2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text2),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function kI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.FromDate),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.FromDate))}}function OI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.FromDate=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.FromDate)("ngModelOptions",c.qc(3,mv))("required",t.FromDate_isRequired)}}function AI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,kI,4,4,"t-restricted",31),c.Jc(2,OI,1,4,"t-date-picker",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.FromDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.FromDate),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function NI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ToDate),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.ToDate))}}function _I(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ToDate=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ToDate)("ngModelOptions",c.qc(3,mv))("required",t.ToDate_isRequired)}}function JI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,NI,4,4,"t-restricted",31),c.Jc(2,_I,1,4,"t-date-picker",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.ToDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ToDate),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function PI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Identifier),c.zb(2),c.Mc(null==e?null:e.Identifier)}}function FI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Identifier=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Identifier)("ngModelOptions",c.qc(3,mv))("required",t.Identifier_isRequired)}}function VI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.Jc(1,PI,3,2,"t-restricted",31),c.Jc(2,FI,1,4,"t-text-editor",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.Identifier_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Identifier),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function qI(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"percent"),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(c.jc(2,1,null==e?null:e.VatRate,"1.2-4"))}}function jI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,qI,3,4,"div",16),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.VatRate),c.zb(1),c.nc("ngIf",!n)}}function $I(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",47),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.VatRate=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.VatRate)("ngModelOptions",c.qc(6,mv))("required",t.VatRate_isRequired)("minDecimalPlaces",2)("maxDecimalPlaces",4)("isPercentage",!0)}}function UI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,jI,2,2,"t-restricted",31),c.Jc(3,$I,1,7,"t-decimal-editor",46),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Resource_VatRate"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.VatRate),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function KI(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(c.jc(2,1,null==e?null:e.ReorderLevel,"1.0-4"))}}function BI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,KI,3,4,"div",16),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.ReorderLevel),c.zb(1),c.nc("ngIf",!n)}}function HI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ReorderLevel=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ReorderLevel)("ngModelOptions",c.qc(5,mv))("required",t.ReorderLevel_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function QI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,BI,2,2,"t-restricted",31),c.Jc(3,HI,1,6,"t-decimal-editor",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Resource_ReorderLevel"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ReorderLevel),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function WI(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(c.jc(2,1,null==e?null:e.EconomicOrderQuantity,"1.0-4"))}}function GI(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,WI,3,4,"div",16),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.EconomicOrderQuantity),c.zb(1),c.nc("ngIf",!n)}}function YI(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.EconomicOrderQuantity=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.EconomicOrderQuantity)("ngModelOptions",c.qc(5,mv))("required",t.EconomicOrderQuantity_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function XI(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,GI,2,2,"t-restricted",31),c.Jc(3,YI,1,6,"t-decimal-editor",35),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Resource_EconomicOrderQuantity"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.EconomicOrderQuantity),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function ZI(e,t){if(1&e&&(c.Sb(0,"div",49),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Description)}}function eM(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,ZI,2,1,"div",48),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description),c.zb(1),c.nc("ngIf",!n)}}function tM(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Description)("ngModelOptions",c.qc(3,mv))("required",t.Description_isRequired)}}function nM(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,eM,2,2,"t-restricted",31),c.Jc(3,tM,1,4,"t-multiline-editor",44),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function iM(e,t){if(1&e&&(c.Sb(0,"div",49),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Description2)}}function cM(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,iM,2,1,"div",48),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description2),c.zb(1),c.nc("ngIf",!n)}}function oM(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description2)("ngModelOptions",c.qc(2,mv))}}function rM(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,cM,2,2,"t-restricted",31),c.Jc(3,oM,1,3,"t-multiline-editor",17),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function sM(e,t){if(1&e&&(c.Sb(0,"div",49),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Description3)}}function lM(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Jc(1,sM,2,1,"div",48),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description3),c.zb(1),c.nc("ngIf",!n)}}function aM(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description3)("ngModelOptions",c.qc(2,mv))}}function uM(e,t){if(1&e&&(c.Sb(0,"t-form-group",15),c.hc(1,"translate"),c.Jc(2,lM,2,2,"t-restricted",31),c.Jc(3,aM,1,3,"t-multiline-editor",17),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function dM(e,t){if(1&e&&(c.Sb(0,"t-form-group",50),c.hc(1,"translate"),c.Lc(2),c.hc(3,"translate"),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(2),c.Nc(" ",c.ic(3,4,null!=e&&e.IsActive?"Yes":"No")," ")}}function bM(e,t){1&e&&(c.Sb(0,"span",61),c.Nb(1,"fa-icon",62),c.Lc(2,"\xa0 "),c.Rb())}function gM(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"ResourceUnit_Unit"))}function fM(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().item,t=c.gc(5);c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",e.UnitId,"Name")," ")}}function mM(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",34),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.UnitId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item;c.nc("ngModel",e.UnitId)("required",!e.PH)}}function hM(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",66),c.Jc(1,fM,2,1,"div",16),c.Jc(2,mM,1,2,"t-units-picker",32),c.Rb()),2&e){const e=t.item,n=c.gc(4).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.UnitId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}const pM=function(){return["Unit"]},SM=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},vM=function(e){return{Unit:e}};function IM(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Nb(1,"t-table",63),c.Rb(),c.Jc(2,gM,2,3,"ng-template",null,64,c.Kc),c.Jc(4,hM,3,3,"ng-template",null,65,c.Kc)),2&e){const e=c.Ac(3),t=c.Ac(5),n=c.gc(3),i=n.model,o=n.isEdit;c.Eb("p-4",1===(null==i||null==i.EntityMetadata?null:i.EntityMetadata.Units)),c.nc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Units),c.zb(1),c.nc("dataSource",null==i?null:i.Units)("isEdit",o)("columnPaths",c.qc(7,pM))("columnTemplates",c.rc(11,vM,c.sc(8,SM,e,t)))}}function MM(e,t){if(1&e&&(c.Sb(0,"li",56),c.Sb(1,"a",57),c.Jc(2,bM,3,0,"span",58),c.Sb(3,"span",59),c.Lc(4),c.hc(5,"translate"),c.hc(6,"number"),c.Rb(),c.Rb(),c.Jc(7,IM,6,13,"ng-template",60),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("ngIf",t.Units_showError(e)),c.zb(2),c.Mc(c.ic(5,2,"Resource_Units")+(e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Units)?"":" ("+c.ic(6,4,t.Units_count(e))+")"))}}function RM(e,t){1&e&&(c.Sb(0,"span",61),c.Nb(1,"fa-icon",62),c.Lc(2,"\xa0 "),c.Rb())}function yM(e,t){if(1&e&&(c.Sb(0,"t-restricted",24),c.Sb(1,"div",68),c.Lc(2," TODO: Implement map viewer "),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model;c.Eb("p-4",1===(null==e||null==e.EntityMetadata?null:e.EntityMetadata.LocationJson)),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.LocationJson)}}function DM(e,t){if(1&e&&(c.Sb(0,"li",67),c.Sb(1,"a",57),c.Jc(2,RM,3,0,"span",58),c.Sb(3,"span",59),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Jc(6,yM,3,3,"ng-template",60),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("ngIf",t.Map_showError(e)),c.zb(2),c.Mc(c.ic(5,2,"Entity_Location"))}}const wM=function(e,t){return{id:e,cache_buster:t}};function EM(e,t){if(1&e&&(c.Sb(0,"div",73),c.Nb(1,"t-report-results",74),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3).model,n=c.gc();c.zb(1),c.nc("definition",n.reportDefinition(e))("arguments",c.sc(4,wM,null==t?null:t.Id,null==t||null==t.EntityMetadata?null:t.EntityMetadata.$refresh))("view",n.reportView(e))("state",n.state(e))}}function CM(e,t){if(1&e&&(c.Sb(0,"li",71),c.Sb(1,"a",72),c.Sb(2,"span",59),c.Lc(3),c.Rb(),c.Rb(),c.Jc(4,EM,2,7,"ng-template",60),c.Rb()),2&e){const e=t.$implicit;c.gc();const n=c.Ac(3),i=c.gc(3);c.nc("ngbNavItem",e.ReportDefinitionId),c.zb(1),c.nc("tContextMenu",n)("tContext",e.ReportDefinitionId),c.zb(2),c.Mc(i.reportTitle(e))}}function xM(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",75),c.Sb(1,"ul",76),c.Sb(2,"li",77),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.close,o=c.gc(3).model;return c.gc().onExpandReport(n,o),i()}),c.Sb(3,"div",78),c.Nb(4,"fa-icon",79),c.Rb(),c.Sb(5,"div",80),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}2&e&&(c.zb(6),c.Nc(" ",c.ic(7,1,"Expand")," "))}function TM(e,t){if(1&e&&(c.Qb(0),c.Jc(1,CM,5,4,"li",69),c.Jc(2,xM,8,3,"ng-template",null,70,c.Kc),c.Pb()),2&e){const e=c.gc(3);c.zb(1),c.nc("ngForOf",e.reports)}}function zM(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"ul",51,52),c.cc("activeIdChange",function(t){return c.Dc(e),c.gc(2).activeTab=t}),c.Jc(3,MM,8,6,"li",53),c.Jc(4,DM,7,4,"li",54),c.Jc(5,TM,4,1,"ng-container",16),c.Rb(),c.Nb(6,"div",55),c.Pb()}if(2&e){const e=c.Ac(2),t=c.gc(),n=t.isEdit,i=t.model,o=c.gc();c.zb(1),c.nc("destroyOnHide",!0)("activeId",o.activeTab),c.zb(2),c.nc("ngIf",o.Units_isVisible),c.zb(1),c.nc("ngIf",o.Location_isVisible),c.zb(1),c.nc("ngIf",o.showReports(n,i)),c.zb(1),c.nc("ngbNavOutlet",e)}}function LM(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.Jc(1,fv,2,1,"h2",10),c.Jc(2,hv,2,7,"t-text-editor",11),c.Jc(3,pv,2,7,"t-text-editor",12),c.Jc(4,Sv,2,7,"t-text-editor",12),c.Rb(),c.Jc(5,Iv,4,2,"div",13),c.Jc(6,yv,4,6,"t-form-group",14),c.Jc(7,Ev,4,6,"t-form-group",14),c.Jc(8,Tv,4,6,"t-form-group",14),c.Sb(9,"t-form-group",15),c.hc(10,"translate"),c.Jc(11,zv,2,1,"div",16),c.Jc(12,Lv,1,3,"t-text-editor",17),c.Rb(),c.Jc(13,Av,4,6,"t-form-group",14),c.Jc(14,Jv,4,6,"t-form-group",14),c.Jc(15,Vv,4,6,"t-form-group",14),c.Jc(16,$v,3,4,"t-form-group",14),c.Jc(17,Bv,3,4,"t-form-group",14),c.Jc(18,Wv,3,4,"t-form-group",14),c.Jc(19,Xv,3,4,"t-form-group",14),c.Jc(20,tI,3,4,"t-form-group",14),c.Jc(21,cI,3,4,"t-form-group",14),c.Jc(22,sI,3,4,"t-form-group",14),c.Jc(23,uI,3,4,"t-form-group",14),c.Jc(24,gI,3,4,"t-form-group",14),c.Jc(25,hI,3,4,"t-form-group",14),c.Jc(26,vI,3,4,"t-form-group",14),c.Jc(27,RI,3,4,"t-form-group",14),c.Jc(28,wI,3,4,"t-form-group",14),c.Jc(29,xI,3,4,"t-form-group",14),c.Jc(30,LI,3,4,"t-form-group",14),c.Jc(31,AI,3,4,"t-form-group",14),c.Jc(32,JI,3,4,"t-form-group",14),c.Jc(33,VI,3,4,"t-form-group",14),c.Jc(34,UI,4,6,"t-form-group",14),c.Jc(35,QI,4,6,"t-form-group",14),c.Jc(36,XI,4,6,"t-form-group",14),c.Nb(37,"div",18),c.Jc(38,nM,4,6,"t-form-group",14),c.Jc(39,rM,4,6,"t-form-group",14),c.Jc(40,uM,4,6,"t-form-group",14),c.Jc(41,dM,4,6,"t-form-group",19),c.Jc(42,zM,7,6,"ng-container",16)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",i.Image_isVisible),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(10,42,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.Unit_isVisible),c.zb(1),c.nc("ngIf",i.UnitMass_isVisible),c.zb(1),c.nc("ngIf",i.UnitMass_isVisible),c.zb(1),c.nc("ngIf",i.MonetaryValue_isVisible),c.zb(1),c.nc("ngIf",i.Participant_isVisible),c.zb(1),c.nc("ngIf",i.Resource1_isVisible),c.zb(1),c.nc("ngIf",i.Currency_isVisible),c.zb(1),c.nc("ngIf",i.Center_isVisible),c.zb(1),c.nc("ngIf",i.Lookup1_isVisible),c.zb(1),c.nc("ngIf",i.Lookup2_isVisible),c.zb(1),c.nc("ngIf",i.Lookup3_isVisible),c.zb(1),c.nc("ngIf",i.Lookup4_isVisible),c.zb(1),c.nc("ngIf",i.Decimal1_isVisible),c.zb(1),c.nc("ngIf",i.Decimal2_isVisible),c.zb(1),c.nc("ngIf",i.Int1_isVisible),c.zb(1),c.nc("ngIf",i.Int2_isVisible),c.zb(1),c.nc("ngIf",i.Text1_isVisible),c.zb(1),c.nc("ngIf",i.Text2_isVisible),c.zb(1),c.nc("ngIf",i.FromDate_isVisible),c.zb(1),c.nc("ngIf",i.ToDate_isVisible),c.zb(1),c.nc("ngIf",i.Identifier_isVisible),c.zb(1),c.nc("ngIf",i.VatRate_isVisible),c.zb(1),c.nc("ngIf",i.ReorderLevel_isVisible),c.zb(1),c.nc("ngIf",i.EconomicOrderQuantity_isVisible),c.zb(2),c.nc("ngIf",i.Description_isVisible),c.zb(1),c.nc("ngIf",i.Description_isVisible&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.Description_isVisible&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",i.showTabs(n,e))}}function kM(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function OM(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function AM(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"EditDefinition")," ")}let NM=(()=>{class e extends mn.a{constructor(e,t,n,i,c){super(),this.workspace=e,this.api=t,this.translate=n,this.router=i,this.route=c,this.resourcesApi=this.api.resourcesApi(null,this.notifyDestruct$),this.expand="Currency,Center,Lookup1,Lookup2,Lookup3,Lookup4,Participant,Unit,UnitMassUnit,Units.Unit",this.create=()=>{const e={};this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText);const t=this.definition;return e.VatRate=t.DefaultVatRate,e.UnitId=t.DefaultUnitId,e.UnitMassUnitId=t.DefaultUnitMassUnitId,e.Units=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Units&&t.Units.forEach(e=>{e.Id=null,delete e.ResourceId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById}),t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.resourcesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.resourcesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onEditDefinition=e=>{const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../../resource-definitions",this.definitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.showEditDefinition=e=>this.ws.canDo("resource-definitions","Update",null),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.savePreprocessing=e=>{}}set definitionId(e){this._definitionId!==e&&(this.resourcesApi=this.api.resourcesApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`resources/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Resources[this.definitionId]:null)}get found(){return!!this.definition}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}get Currency_isVisible(){return!!this.definition.CurrencyVisibility}get Currency_isRequired(){return"Required"===this.definition.CurrencyVisibility}get Currency_label(){return this.translate.instant("Entity_Currency")}get Center_isVisible(){return!!this.definition.CenterVisibility}get Center_isRequired(){return"Required"===this.definition.CenterVisibility}get Center_label(){return this.translate.instant("Entity_Center")}get Image_isVisible(){return!!this.definition.ImageVisibility}get Description_isVisible(){return!!this.definition.DescriptionVisibility}get Description_isRequired(){return"Required"===this.definition.DescriptionVisibility}get FromDate_isVisible(){return!!this.definition.FromDateVisibility}get FromDate_isRequired(){return"Required"===this.definition.FromDateVisibility}get FromDate_label(){return this.definition.FromDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"FromDateLabel"):this.translate.instant("Entity_FromDate")}get ToDate_isVisible(){return!!this.definition.ToDateVisibility}get ToDate_isRequired(){return"Required"===this.definition.ToDateVisibility}get ToDate_label(){return this.definition.ToDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"ToDateLabel"):this.translate.instant("Entity_ToDate")}get Decimal1_isVisible(){return!!this.definition.Decimal1Visibility}get Decimal1_isRequired(){return"Required"===this.definition.Decimal1Visibility}get Decimal1_label(){return this.definition.Decimal1Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal1Label"):this.translate.instant("Entity_Decimal1")}get Decimal2_isVisible(){return!!this.definition.Decimal2Visibility}get Decimal2_isRequired(){return"Required"===this.definition.Decimal2Visibility}get Decimal2_label(){return this.definition.Decimal2Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal2Label"):this.translate.instant("Entity_Decimal2")}get Int1_isVisible(){return!!this.definition.Int1Visibility}get Int1_isRequired(){return"Required"===this.definition.Int1Visibility}get Int1_label(){return this.definition.Int1Label?this.ws.getMultilingualValueImmediate(this.definition,"Int1Label"):this.translate.instant("Entity_Int1")}get Int2_isVisible(){return!!this.definition.Int2Visibility}get Int2_isRequired(){return"Required"===this.definition.Int2Visibility}get Int2_label(){return this.definition.Int2Label?this.ws.getMultilingualValueImmediate(this.definition,"Int2Label"):this.translate.instant("Entity_Int2")}get Lookup1_isVisible(){return!!this.definition.Lookup1Visibility}get Lookup1_isRequired(){return"Required"===this.definition.Lookup1Visibility}get Lookup1_label(){return this.definition.Lookup1Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup1Label"):this.translate.instant("Entity_Lookup1")}get Lookup1_DefinitionId(){return this.definition.Lookup1DefinitionId}get Lookup2_isVisible(){return!!this.definition.Lookup2Visibility}get Lookup2_isRequired(){return"Required"===this.definition.Lookup2Visibility}get Lookup2_label(){return this.definition.Lookup2Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup2Label"):this.translate.instant("Entity_Lookup2")}get Lookup2_DefinitionId(){return this.definition.Lookup2DefinitionId}get Lookup3_isVisible(){return!!this.definition.Lookup3Visibility}get Lookup3_isRequired(){return"Required"===this.definition.Lookup3Visibility}get Lookup3_label(){return this.definition.Lookup3Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup3Label"):this.translate.instant("Entity_Lookup3")}get Lookup3_DefinitionId(){return this.definition.Lookup3DefinitionId}get Lookup4_isVisible(){return!!this.definition.Lookup4Visibility}get Lookup4_isRequired(){return"Required"===this.definition.Lookup4Visibility}get Lookup4_label(){return this.definition.Lookup4Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup4Label"):this.translate.instant("Entity_Lookup4")}get Lookup4_DefinitionId(){return this.definition.Lookup4DefinitionId}get Text1_isVisible(){return!!this.definition.Text1Visibility}get Text1_isRequired(){return"Required"===this.definition.Text1Visibility}get Text1_label(){return this.definition.Text1Label?this.ws.getMultilingualValueImmediate(this.definition,"Text1Label"):this.translate.instant("Entity_Text1")}get Text2_isVisible(){return!!this.definition.Text2Visibility}get Text2_isRequired(){return"Required"===this.definition.Text2Visibility}get Text2_label(){return this.definition.Text2Label?this.ws.getMultilingualValueImmediate(this.definition,"Text2Label"):this.translate.instant("Entity_Text2")}showTabs(e,t){return this.Units_isVisible||this.Location_isVisible||this.reports.length>0&&this.showReports(e,t)}get Unit_isVisible(){return!!this.definition.UnitCardinality}get Unit_isRequired(){return!this.definition.DefaultUnitId}get Unit_default(){return this.definition.DefaultUnitId}get UnitMass_isVisible(){return!!this.definition.UnitMassVisibility}get UnitMass_isRequired(){return"Required"===this.definition.UnitMassVisibility}get Units_isVisible(){return"Multiple"===this.definition.UnitCardinality}Units_count(e){return e&&e.Units?e.Units.length:0}Units_showError(e){return!!e&&!!e.Units&&e.Units.some(e=>!!e.serverErrors)}get Identifier_isVisible(){return!!this.definition.IdentifierVisibility}get Identifier_isRequired(){return"Required"===this.definition.IdentifierVisibility}get Identifier_label(){return this.definition.IdentifierLabel?this.ws.getMultilingualValueImmediate(this.definition,"IdentifierLabel"):this.translate.instant("Resource_Identifier")}get VatRate_isVisible(){return!!this.definition.VatRateVisibility}get VatRate_isRequired(){return"Required"===this.definition.VatRateVisibility}currencyPostfix(e){return e&&e.CurrencyId?` (${this.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")})`:` (${this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")})`}get functionalDecimals(){return this.ws.settings.FunctionalCurrencyDecimals}get functionalPostfix(){return` (${this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")})`}get ReorderLevel_isVisible(){return!!this.definition.ReorderLevelVisibility}get ReorderLevel_isRequired(){return"Required"===this.definition.ReorderLevelVisibility}get EconomicOrderQuantity_isVisible(){return!!this.definition.EconomicOrderQuantityVisibility}get EconomicOrderQuantity_isRequired(){return"Required"===this.definition.EconomicOrderQuantityVisibility}get MonetaryValue_isVisible(){return!!this.definition.MonetaryValueVisibility}get MonetaryValue_isRequired(){return"Required"===this.definition.MonetaryValueVisibility}get MonetaryValue_label(){return this.translate.instant("Resource_MonetaryValue")}MonetaryValue_decimals(e){const t=this.ws.get("Currency",e.CurrencyId);return t?t.E:this.ws.settings.FunctionalCurrencyDecimals}get Participant_isVisible(){return!!this.definition.ParticipantVisibility}get Participant_isRequired(){return"Required"===this.definition.ParticipantVisibility}get Participant_label(){const e=this.ws.definitions.Relations[this.definition.ParticipantDefinitionId];return e?this.ws.getMultilingualValueImmediate(e,"TitleSingular"):this.translate.instant("Resource_Participant")}get Participant_definitionIds(){return[this.definition.ParticipantDefinitionId]}get Resource1_isVisible(){return!!this.definition.Resource1Visibility}get Resource1_isRequired(){return"Required"===this.definition.Resource1Visibility}get Resource1_label(){return this.definition.Resource1Label?this.ws.getMultilingualValueImmediate(this.definition,"Resource1Label"):this.translate.instant("Entity_Resource1")}get Resource1_DefinitionIds(){return this.definition.Resource1DefinitionId?[this.definition.Resource1DefinitionId]:[]}get Location_isVisible(){return!!this.definition.LocationVisibility}Map_showError(e){return!!e&&!!e.serverErrors&&!!e.serverErrors.LocationJson}showReports(e,t){return!!t&&!!t.Id}get reports(){return this.definition.ReportDefinitions}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}reportTitle(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}state(e){const t=`resources_details_${this.definitionId}_${e.ReportDefinitionId}`,n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new L.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}get activeTabKey(){return`resources_details_${this.definitionId}_activeTab`}get activeTab(){const e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.Units_isVisible?"units":this.Location_isVisible?"location":this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]}set activeTab(e){this.ws.miscState[this.activeTabKey]=e}onExpandReport(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(i.e),c.Mb(i.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-resources-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[c.wb],decls:13,vars:2,consts:[["collection","Resource",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","savePreprocessing","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Resource",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","savePreprocessing","actions"],[3,"showHome"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 t-details-image-container",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"w-100"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"col-12","col-md-4","t-details-image-container"],[3,"metadata"],[1,"border"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../units",3,"itemId"],[3,"ngModel","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],[3,"ngModel","definitionIds","required","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionIds","required","ngModelChange"],["link","../../../currencies",3,"itemId"],["link","../../../centers",3,"itemId"],[3,"ngModel","definitionId","required","ngModelChange",4,"ngIf"],[3,"ngModel","definitionId","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[1,"t-form-group",3,"label"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","units",4,"ngIf"],["ngbNavItem","location",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","units"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_Unit",""],["row_Unit",""],[1,"t-form-group",3,"serverErrors"],["ngbNavItem","location"],[2,"height","450px"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"]],template:function(e,t){if(1&e&&(c.Jc(0,dv,1,32,"t-details",0),c.Jc(1,bv,1,1,"ng-template",null,1,c.Kc),c.Jc(3,gv,2,1,"ng-template",null,2,c.Kc),c.Jc(5,LM,43,44,"ng-template",null,3,c.Kc),c.Jc(7,kM,2,3,"ng-template",null,4,c.Kc),c.Jc(9,OM,2,3,"ng-template",null,5,c.Kc),c.Jc(11,AM,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,q.a,nn,he.a,pe.a,te.m,te.i,te.j,hn.a,be,ss,nv,vn,xb,rv,zu,Au,Pd,Vu,Lb,G.v,G.A,G.x,G.y,G.w,ee.a,Fs.a,Vs.a,C.k,ge.a,is],pipes:[K.c,Ab,kb,C.r,C.d],encapsulation:2}),e})();function _M(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",9),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("AccountClassification",e,"Name")),c.zb(3),c.Mc(n.c[e].Code)}}function JM(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"AccountClassification"),"\n")}function PM(e,t){if(1&e&&(c.Sb(0,"span",10),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.ws.getMultilingualValue("AccountClassification",e,"Name"))}}function FM(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function VM(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function qM(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}const jM=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},$M=function(e,t){return[e,t]},UM=function(e){return{template:e,expression:"CreatedById eq me"}},KM=function(e){return[e]},BM=function(e){return{CreatedBy:e}};let HM=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountClassificationApi=this.api.accountClassificationsApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.accountClassificationApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.accountClassificationApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("account-classifications","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.accountClassificationApi=this.api.accountClassificationsApi(this.notifyDestruct$)}get c(){return this.ws.AccountClassification}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-account-classifications-master"]],features:[c.wb],decls:14,vars:32,consts:[["collection","AccountClassification","selectDefault","Code","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,_M,6,2,"ng-template",null,1,c.Kc),c.Jc(4,JM,2,3,"ng-template",null,2,c.Kc),c.Jc(6,PM,2,1,"ng-template",null,3,c.Kc),c.Jc(8,FM,2,3,"ng-template",null,4,c.Kc),c.Jc(10,VM,2,3,"ng-template",null,5,c.Kc),c.Jc(12,qM,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",c.ic(1,11,"AccountClassifications"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(23,$M,c.uc(13,jM,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(18,jM,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.rc(30,BM,c.rc(28,KM,c.rc(26,UM,s))))}},directives:[Tt.a],pipes:[K.c],encapsulation:2}),e})();function QM(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-account-classifications-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function WM(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-account-classifications-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let GM=(()=>{class e extends Js{}return e.\u0275fac=function(t){return YM(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-account-classifications-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","AccountClassification",3,"masterTemplate","ensureAdditionalSelect","theme","filter","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,QM,2,3,"ng-template",null,1,c.Kc),c.Jc(3,WM,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("filter",t.filter)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const YM=c.Ub(GM);function XM(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-account-types-master",4),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}function ZM(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-account-types-details",5),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}let eR=(()=>{class e extends Js{}return e.\u0275fac=function(t){return tR(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-account-types-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","AccountType",3,"masterTemplate","ensureAdditionalSelect","theme","filter","detailsTemplate","additionalSelect","entityLoaded"],["master",""],["details",""],[1,"modal-body"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,XM,2,3,"ng-template",null,1,c.Kc),c.Jc(3,ZM,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("masterTemplate",e)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("filter",t.filter)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const tR=c.Ub(eR);function nR(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function iR(e,t){if(1&e&&(c.Sb(0,"h2",18),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const cR=function(){return{updateOn:"blur"}};function oR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,cR))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function rR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,cR))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function sR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,cR))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function lR(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function aR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,cR))}}function uR(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,lR,2,1,"div",11),c.Jc(3,aR,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function dR(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function bR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,cR))}}function gR(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,dR,2,1,"div",11),c.Jc(3,bR,1,3,"t-text-editor",22),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function fR(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function mR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,cR))}}function hR(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,fR,2,1,"div",11),c.Jc(3,mR,1,3,"t-text-editor",22),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function pR(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function SR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Code)("ngModelOptions",c.qc(2,cR))}}function vR(e,t){if(1&e&&(c.Sb(0,"t-view-link",24),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("itemId",null==e?null:e.ParentId),c.zb(1),c.Mc(t.ws.getMultilingualValue("AccountClassification",null==e?null:e.ParentId,"Name"))}}function IR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-classifications-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ParentId=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.ParentId)}}function MR(e,t){if(1&e&&(c.Sb(0,"t-view-link",26),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("itemId",null==e?null:e.AccountTypeParentId),c.zb(1),c.Mc(t.ws.getMultilingualValue("AccountType",null==e?null:e.AccountTypeParentId,"Name"))}}function RR(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-types-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.AccountTypeParentId=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.AccountTypeParentId)}}function yR(e,t){if(1&e&&(c.Sb(0,"t-form-group",27),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",28),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(2),c.nc("entity",e)}}function DR(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,iR,2,1,"h2",6),c.Jc(2,oR,2,7,"t-text-editor",7),c.Jc(3,rR,2,7,"t-text-editor",8),c.Jc(4,sR,2,7,"t-text-editor",8),c.Rb(),c.Jc(5,uR,4,6,"t-form-group",9),c.Jc(6,gR,4,6,"t-form-group",9),c.Jc(7,hR,4,6,"t-form-group",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Jc(10,pR,2,1,"div",11),c.Jc(11,SR,1,3,"t-text-editor",12),c.Rb(),c.Sb(12,"t-form-group",10),c.hc(13,"translate"),c.Sb(14,"t-restricted",13),c.Jc(15,vR,2,2,"t-view-link",14),c.Rb(),c.Jc(16,IR,1,1,"t-account-classifications-picker",15),c.Rb(),c.Sb(17,"t-form-group",10),c.hc(18,"translate"),c.Sb(19,"t-restricted",13),c.Jc(20,MR,2,2,"t-view-link",16),c.Rb(),c.Jc(21,RR,1,1,"t-account-types-picker",15),c.Rb(),c.Jc(22,yR,3,4,"t-form-group",17)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,23,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(13,25,"TreeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ParentId),c.zb(2),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Parent),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(18,27,"AccountClassification_AccountTypeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.AccountTypeParentId),c.zb(2),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.AccountTypeParentId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n)}}function wR(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function ER(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const CR=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},xR=function(e,t){return[e,t]};let TR=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountClassificationsApi=this.api.accountClassificationsApi(this.notifyDestruct$),this.expand="Parent,AccountTypeParent",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.onActivate=e=>{e&&e.Id&&this.accountClassificationsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.accountClassificationsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("account-classifications","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.accountClassificationsApi=this.api.accountClassificationsApi(this.notifyDestruct$)}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-account-classifications-details"]],features:[c.wb],decls:10,vars:26,consts:[["collection","AccountClassification",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../account-classifications",3,"itemId",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../account-types",3,"itemId",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["link","../../account-classifications",3,"itemId"],[3,"ngModel","ngModelChange"],["link","../../account-types",3,"itemId"],[1,"t-form-group",3,"label"],["collection","AccountClassification","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,nR,2,1,"ng-template",null,1,c.Kc),c.Jc(4,DR,23,29,"ng-template",null,2,c.Kc),c.Jc(6,wR,2,3,"ng-template",null,3,c.Kc),c.Jc(8,ER,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,9,"AccountClassifications"))("detailsCrumb",e)("documentTemplate",n)("actions",c.sc(23,xR,c.vc(11,CR,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(17,CR,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,hn.a,pe.a,te.m,te.i,te.j,ss,GM,eR,me.a],pipes:[K.c],encapsulation:2}),e})();function zR(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",9),c.Nb(4,"t-auto-cell",10),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("AccountType",e,"Name")),c.zb(2),c.nc("entity",n.c[e])}}function LR(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"AccountType"),"\n")}function kR(e,t){if(1&e&&(c.Sb(0,"span",11),c.Nb(1,"t-auto-cell",12),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function OR(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function AR(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function NR(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"SavedByMe")," ")}const _R=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},JR=function(e,t){return[e,t]},PR=function(e){return{template:e,expression:"SavedById eq me"}},FR=function(e){return[e]},VR=function(e){return{SavedBy:e}};let qR=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountTypesApi=this.api.accountTypesApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.accountTypesApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.accountTypesApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.accountTypesApi=this.api.accountTypesApi(this.notifyDestruct$)}get view(){return"account-types"}get c(){return this.workspace.currentTenant.AccountType}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-account-types-master"]],features:[c.wb],decls:14,vars:32,consts:[["collection","AccountType","selectDefault","IsAssignable,IsActive","selectForTiles","Name,Name2,Name3,Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["savedByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","AccountType","path","Code",3,"entity"],[1,"text-truncate"],["collection","AccountType",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,zR,5,2,"ng-template",null,1,c.Kc),c.Jc(4,LR,2,3,"ng-template",null,2,c.Kc),c.Jc(6,kR,2,1,"ng-template",null,3,c.Kc),c.Jc(8,OR,2,3,"ng-template",null,4,c.Kc),c.Jc(10,AR,2,3,"ng-template",null,5,c.Kc),c.Jc(12,NR,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",c.ic(1,11,"AccountTypes"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(23,JR,c.uc(13,_R,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(18,_R,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.rc(30,VR,c.rc(28,FR,c.rc(26,PR,s))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();var jR=n("19uq");function $R(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-relation-definitions-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function UR(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-relation-definitions-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let KR=(()=>{class e extends Js{}return e.\u0275fac=function(t){return BR(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-relation-definitions-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","RelationDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,$R,2,3,"ng-template",null,1,c.Kc),c.Jc(3,UR,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const BR=c.Ub(KR);function HR(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-entry-types-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function QR(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-entry-types-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let WR=(()=>{class e extends Js{}return e.\u0275fac=function(t){return GR(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-entry-types-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","EntryType",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,HR,2,3,"ng-template",null,1,c.Kc),c.Jc(3,QR,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const GR=c.Ub(WR);function YR(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-resource-definitions-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function XR(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-resource-definitions-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let ZR=(()=>{class e extends Js{}return e.\u0275fac=function(t){return ey(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-resource-definitions-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","ResourceDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,YR,2,3,"ng-template",null,1,c.Kc),c.Jc(3,XR,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const ey=c.Ub(ZR);function ty(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function ny(e,t){if(1&e&&(c.Sb(0,"h2",30),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const iy=function(){return{updateOn:"blur"}};function cy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,iy))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function oy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,iy))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function ry(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,iy))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function sy(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function ly(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",33),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,iy))}}function ay(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,sy,2,1,"div",11),c.Jc(3,ly,1,3,"t-text-editor",13),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function uy(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function dy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,iy))}}function by(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,uy,2,1,"div",11),c.Jc(3,dy,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function gy(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function fy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,iy))}}function my(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,gy,2,1,"div",11),c.Jc(3,fy,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function hy(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function py(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("disabled",e.IsSystem)("ngModel",e.Code)("ngModelOptions",c.qc(3,iy))}}function Sy(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Concept)}}function vy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",33),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Concept=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Concept)("ngModelOptions",c.qc(2,iy))}}function Iy(e,t){if(1&e&&(c.Sb(0,"t-restricted",37),c.Sb(1,"t-view-link",38),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Parent),c.zb(1),c.nc("itemId",null==e?null:e.ParentId),c.zb(1),c.Mc(t.ws.getMultilingualValue("AccountType",null==e?null:e.ParentId,"Name"))}}function My(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-types-picker",39),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ParentId=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.ParentId)}}function Ry(e,t){if(1&e&&(c.Sb(0,"t-restricted",37),c.Sb(1,"t-view-link",41),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CustodianDefinition),c.zb(1),c.nc("itemId",null==e?null:e.CustodianDefinitionId),c.zb(1),c.Mc(t.ws.getMultilingualValue("RelationDefinition",null==e?null:e.CustodianDefinitionId,"TitleSingular"))}}function yy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relation-definitions-picker",42),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.CustodianDefinitionId=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.CustodianDefinitionId)}}function Dy(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Ry,3,3,"t-restricted",14),c.Jc(3,yy,1,1,"t-relation-definitions-picker",40),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"AccountType_CustodianDefinition"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodianDefinitionId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function wy(e,t){if(1&e&&(c.Sb(0,"t-restricted",37),c.Sb(1,"t-view-link",43),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.EntryTypeParent),c.zb(1),c.nc("itemId",null==e?null:e.EntryTypeParentId),c.zb(1),c.Mc(t.ws.getMultilingualValue("EntryType",null==e?null:e.EntryTypeParentId,"Name"))}}function Ey(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",39),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.EntryTypeParentId=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.EntryTypeParentId)}}function Cy(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,wy,3,3,"t-restricted",14),c.Jc(3,Ey,1,1,"t-entry-types-picker",15),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"AccountType_EntryTypeParent"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.EntryTypeParentId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function xy(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(c.ic(2,1,null!=e&&e.IsAssignable?"Yes":"No"))}}function Ty(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",44),c.Sb(1,"input",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.IsAssignable=t}),c.Rb(),c.Sb(2,"label",46),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc().model;c.zb(1),c.nc("ngModel",e.IsAssignable)}}function zy(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(c.ic(2,1,null!=e&&e.StandardAndPure?"Yes":"No"))}}function Ly(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",44),c.Sb(1,"input",47),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.StandardAndPure=t}),c.Rb(),c.Sb(2,"label",48),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc().model;c.zb(1),c.nc("ngModel",e.StandardAndPure)}}function ky(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(c.ic(2,1,null!=e&&e.IsMonetary?"Yes":"No"))}}function Oy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",44),c.Sb(1,"input",49),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.IsMonetary=t}),c.Rb(),c.Sb(2,"label",50),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc().model;c.zb(1),c.nc("ngModel",e.IsMonetary)}}function Ay(e,t){if(1&e&&(c.Sb(0,"t-form-group",51),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",52),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(2),c.nc("entity",e)}}function Ny(e,t){if(1&e&&(c.Sb(0,"t-form-group",51),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsSystem")),c.zb(3),c.Mc(c.ic(4,4,e?e.IsSystem?"Yes":"No":""))}}function _y(e,t){1&e&&(c.Sb(0,"span",53),c.Nb(1,"fa-icon",54),c.Lc(2,"\xa0 "),c.Rb())}function Jy(e,t){if(1&e&&(c.Sb(0,"div",57),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Description)}}function Py(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description)("ngModelOptions",c.qc(2,iy))}}function Fy(e,t){if(1&e&&(c.Sb(0,"div",57),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Description2)}}function Vy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Description2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.Description2)("ngModelOptions",c.qc(2,iy))}}function qy(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Fy,2,1,"div",56),c.Jc(3,Vy,1,3,"t-multiline-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function jy(e,t){if(1&e&&(c.Sb(0,"div",57),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Description3)}}function $y(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Description3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.Description3)("ngModelOptions",c.qc(2,iy))}}function Uy(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,jy,2,1,"div",56),c.Jc(3,$y,1,3,"t-multiline-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Ky(e,t){if(1&e&&(c.Sb(0,"div",55),c.Sb(1,"t-form-group",10),c.hc(2,"translate"),c.Jc(3,Jy,2,1,"div",56),c.Jc(4,Py,1,3,"t-multiline-editor",34),c.Rb(),c.Jc(5,qy,4,6,"t-form-group",9),c.Jc(6,Uy,4,6,"t-form-group",9),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.zb(1),c.nc("label",c.ic(2,6,"Description")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId)}}function By(e,t){1&e&&(c.Sb(0,"span",53),c.Nb(1,"fa-icon",54),c.Lc(2,"\xa0 "),c.Rb())}function Hy(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Time1Label)}}function Qy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Time1Label=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Time1Label)("ngModelOptions",c.qc(2,iy))}}function Wy(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Time1Label2)}}function Gy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Time1Label2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.Time1Label2)("ngModelOptions",c.qc(2,iy))}}function Yy(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Wy,2,1,"div",11),c.Jc(3,Gy,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_Time1Label")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time1Label2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Xy(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Time1Label3)}}function Zy(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Time1Label3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.Time1Label3)("ngModelOptions",c.qc(2,iy))}}function eD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Xy,2,1,"div",11),c.Jc(3,Zy,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_Time1Label")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time1Label3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function tD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Time2Label)}}function nD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Time2Label=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Time2Label)("ngModelOptions",c.qc(2,iy))}}function iD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Time2Label2)}}function cD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Time2Label2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.Time2Label2)("ngModelOptions",c.qc(2,iy))}}function oD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,iD,2,1,"div",11),c.Jc(3,cD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_Time2Label")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time2Label2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function rD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.Time2Label3)}}function sD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Time2Label3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.Time2Label3)("ngModelOptions",c.qc(2,iy))}}function lD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,rD,2,1,"div",11),c.Jc(3,sD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_Time2Label")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time2Label3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function aD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.ExternalReferenceLabel)}}function uD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ExternalReferenceLabel=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.ExternalReferenceLabel)("ngModelOptions",c.qc(2,iy))}}function dD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.ExternalReferenceLabel2)}}function bD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.ExternalReferenceLabel2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.ExternalReferenceLabel2)("ngModelOptions",c.qc(2,iy))}}function gD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,dD,2,1,"div",11),c.Jc(3,bD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_ExternalReferenceLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReferenceLabel2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function fD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.ExternalReferenceLabel3)}}function mD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.ExternalReferenceLabel3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.ExternalReferenceLabel3)("ngModelOptions",c.qc(2,iy))}}function hD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,fD,2,1,"div",11),c.Jc(3,mD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_ExternalReferenceLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReferenceLabel3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function pD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.ReferenceSourceLabel)}}function SD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ReferenceSourceLabel=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.ReferenceSourceLabel)("ngModelOptions",c.qc(2,iy))}}function vD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.ReferenceSourceLabel2)}}function ID(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.ReferenceSourceLabel2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.ReferenceSourceLabel2)("ngModelOptions",c.qc(2,iy))}}function MD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,vD,2,1,"div",11),c.Jc(3,ID,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_ReferenceSourceLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ReferenceSourceLabel2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function RD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.ReferenceSourceLabel3)}}function yD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.ReferenceSourceLabel3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.ReferenceSourceLabel3)("ngModelOptions",c.qc(2,iy))}}function DD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,RD,2,1,"div",11),c.Jc(3,yD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_ReferenceSourceLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ReferenceSourceLabel3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function wD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.InternalReferenceLabel)}}function ED(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.InternalReferenceLabel=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.InternalReferenceLabel)("ngModelOptions",c.qc(2,iy))}}function CD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.InternalReferenceLabel2)}}function xD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.InternalReferenceLabel2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.InternalReferenceLabel2)("ngModelOptions",c.qc(2,iy))}}function TD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,CD,2,1,"div",11),c.Jc(3,xD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_InternalReferenceLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.InternalReferenceLabel2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function zD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.InternalReferenceLabel3)}}function LD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.InternalReferenceLabel3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.InternalReferenceLabel3)("ngModelOptions",c.qc(2,iy))}}function kD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,zD,2,1,"div",11),c.Jc(3,LD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_InternalReferenceLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.InternalReferenceLabel3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function OD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.NotedAgentNameLabel)}}function AD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.NotedAgentNameLabel=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.NotedAgentNameLabel)("ngModelOptions",c.qc(2,iy))}}function ND(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.NotedAgentNameLabel2)}}function _D(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.NotedAgentNameLabel2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.NotedAgentNameLabel2)("ngModelOptions",c.qc(2,iy))}}function JD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,ND,2,1,"div",11),c.Jc(3,_D,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_NotedAgentNameLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAgentNameLabel2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function PD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.NotedAgentNameLabel3)}}function FD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.NotedAgentNameLabel3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.NotedAgentNameLabel3)("ngModelOptions",c.qc(2,iy))}}function VD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,PD,2,1,"div",11),c.Jc(3,FD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_NotedAgentNameLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAgentNameLabel3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function qD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.NotedAmountLabel)}}function jD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.NotedAmountLabel=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.NotedAmountLabel)("ngModelOptions",c.qc(2,iy))}}function $D(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.NotedAmountLabel2)}}function UD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.NotedAmountLabel2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.NotedAmountLabel2)("ngModelOptions",c.qc(2,iy))}}function KD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,$D,2,1,"div",11),c.Jc(3,UD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_NotedAmountLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAmountLabel2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function BD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.NotedAmountLabel3)}}function HD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.NotedAmountLabel3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.NotedAmountLabel3)("ngModelOptions",c.qc(2,iy))}}function QD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,BD,2,1,"div",11),c.Jc(3,HD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_NotedAmountLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAmountLabel3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function WD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.NotedDateLabel)}}function GD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.NotedDateLabel=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.NotedDateLabel)("ngModelOptions",c.qc(2,iy))}}function YD(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.NotedDateLabel2)}}function XD(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.NotedDateLabel2=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.NotedDateLabel2)("ngModelOptions",c.qc(2,iy))}}function ZD(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,YD,2,1,"div",11),c.Jc(3,XD,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_NotedDateLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedDateLabel2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function ew(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(null==e?null:e.NotedDateLabel3)}}function tw(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.NotedDateLabel3=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.NotedDateLabel3)("ngModelOptions",c.qc(2,iy))}}function nw(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,ew,2,1,"div",11),c.Jc(3,tw,1,3,"t-text-editor",34),c.Rb()),2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"AccountType_NotedDateLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedDateLabel3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function iw(e,t){if(1&e&&(c.Sb(0,"div",55),c.Sb(1,"t-form-group",10),c.hc(2,"translate"),c.Jc(3,Hy,2,1,"div",11),c.Jc(4,Qy,1,3,"t-text-editor",34),c.Rb(),c.Jc(5,Yy,4,6,"t-form-group",9),c.Jc(6,eD,4,6,"t-form-group",9),c.Sb(7,"t-form-group",10),c.hc(8,"translate"),c.Jc(9,tD,2,1,"div",11),c.Jc(10,nD,1,3,"t-text-editor",34),c.Rb(),c.Jc(11,oD,4,6,"t-form-group",9),c.Jc(12,lD,4,6,"t-form-group",9),c.Sb(13,"t-form-group",10),c.hc(14,"translate"),c.Jc(15,aD,2,1,"div",11),c.Jc(16,uD,1,3,"t-text-editor",34),c.Rb(),c.Jc(17,gD,4,6,"t-form-group",9),c.Jc(18,hD,4,6,"t-form-group",9),c.Sb(19,"t-form-group",10),c.hc(20,"translate"),c.Jc(21,pD,2,1,"div",11),c.Jc(22,SD,1,3,"t-text-editor",34),c.Rb(),c.Jc(23,MD,4,6,"t-form-group",9),c.Jc(24,DD,4,6,"t-form-group",9),c.Sb(25,"t-form-group",10),c.hc(26,"translate"),c.Jc(27,wD,2,1,"div",11),c.Jc(28,ED,1,3,"t-text-editor",34),c.Rb(),c.Jc(29,TD,4,6,"t-form-group",9),c.Jc(30,kD,4,6,"t-form-group",9),c.Sb(31,"t-form-group",10),c.hc(32,"translate"),c.Jc(33,OD,2,1,"div",11),c.Jc(34,AD,1,3,"t-text-editor",34),c.Rb(),c.Jc(35,JD,4,6,"t-form-group",9),c.Jc(36,VD,4,6,"t-form-group",9),c.Sb(37,"t-form-group",10),c.hc(38,"translate"),c.Jc(39,qD,2,1,"div",11),c.Jc(40,jD,1,3,"t-text-editor",34),c.Rb(),c.Jc(41,KD,4,6,"t-form-group",9),c.Jc(42,QD,4,6,"t-form-group",9),c.Sb(43,"t-form-group",10),c.hc(44,"translate"),c.Jc(45,WD,2,1,"div",11),c.Jc(46,GD,1,3,"t-text-editor",34),c.Rb(),c.Jc(47,ZD,4,6,"t-form-group",9),c.Jc(48,nw,4,6,"t-form-group",9),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.zb(1),c.nc("label",c.ic(2,48,"AccountType_Time1Label")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time1Label),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(8,50,"AccountType_Time2Label")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time2Label),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(14,52,"AccountType_ExternalReferenceLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReferenceLabel),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(20,54,"AccountType_ReferenceSourceLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ReferenceSourceLabel),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(26,56,"AccountType_InternalReferenceLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.InternalReferenceLabel),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(32,58,"AccountType_NotedAgentNameLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAgentNameLabel),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(38,60,"AccountType_NotedAmountLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAmountLabel),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(44,62,"AccountType_NotedDateLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedDateLabel),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId)}}function cw(e,t){1&e&&(c.Sb(0,"span",53),c.Nb(1,"fa-icon",54),c.Lc(2,"\xa0 "),c.Rb())}function ow(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Account_RelationDefinition"))}function rw(e,t){if(1&e&&(c.Sb(0,"t-view-link",41),c.Lc(1),c.Rb()),2&e){const e=c.gc().item,t=c.gc(3);c.nc("itemId",null==e?null:e.RelationDefinitionId),c.zb(1),c.Nc(" ",t.getMultilingualValue(t.ws.RelationDefinition[e.RelationDefinitionId],"TitleSingular",t.ws)," ")}}function sw(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relation-definitions-picker",64),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.RelationDefinitionId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item,t=c.gc(2).model,n=c.gc();c.nc("ngModel",e.RelationDefinitionId)("required",!e.PH)("filter",n.relationDefinitionFilter(t))}}function lw(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",61),c.Jc(1,rw,2,2,"t-view-link",62),c.Jc(2,sw,1,3,"t-relation-definitions-picker",63),c.Rb()),2&e){const e=t.item,n=c.gc(2).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.RelationDefinitionId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}const aw=function(){return["Definition"]},uw=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},dw=function(e){return{Definition:e}};function bw(e,t){if(1&e&&(c.Nb(0,"t-table",58),c.Jc(1,ow,2,3,"ng-template",null,59,c.Kc),c.Jc(3,lw,3,3,"ng-template",null,60,c.Kc)),2&e){const e=c.Ac(2),t=c.Ac(4),n=c.gc(),i=n.model,o=n.isEdit;c.nc("dataSource",null==i?null:i.RelationDefinitions)("isEdit",o)("columnPaths",c.qc(4,aw))("columnTemplates",c.rc(8,dw,c.sc(5,uw,e,t)))}}function gw(e,t){1&e&&(c.Sb(0,"span",53),c.Nb(1,"fa-icon",54),c.Lc(2,"\xa0 "),c.Rb())}function fw(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Account_ResourceDefinition"))}function mw(e,t){if(1&e&&(c.Sb(0,"t-view-link",66),c.Lc(1),c.Rb()),2&e){const e=c.gc().item,t=c.gc(3);c.nc("itemId",null==e?null:e.ResourceDefinitionId),c.zb(1),c.Nc(" ",t.getMultilingualValue(t.ws.ResourceDefinition[e.ResourceDefinitionId],"TitleSingular",t.ws)," ")}}function hw(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resource-definitions-picker",64),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.ResourceDefinitionId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item,t=c.gc(2).model,n=c.gc();c.nc("ngModel",e.ResourceDefinitionId)("required",!e.PH)("filter",n.resourceDefinitionFilter(t))}}function pw(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",61),c.Jc(1,mw,2,2,"t-view-link",65),c.Jc(2,hw,1,3,"t-resource-definitions-picker",63),c.Rb()),2&e){const e=t.item,n=c.gc(2).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.ResourceDefinitionId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Sw(e,t){if(1&e&&(c.Nb(0,"t-table",58),c.Jc(1,fw,2,3,"ng-template",null,59,c.Kc),c.Jc(3,pw,3,3,"ng-template",null,60,c.Kc)),2&e){const e=c.Ac(2),t=c.Ac(4),n=c.gc(),i=n.model,o=n.isEdit;c.nc("dataSource",null==i?null:i.ResourceDefinitions)("isEdit",o)("columnPaths",c.qc(4,aw))("columnTemplates",c.rc(8,dw,c.sc(5,uw,e,t)))}}function vw(e,t){1&e&&(c.Sb(0,"span",53),c.Nb(1,"fa-icon",54),c.Lc(2,"\xa0 "),c.Rb())}function Iw(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Account_NotedRelationDefinition"))}function Mw(e,t){if(1&e&&(c.Sb(0,"t-view-link",41),c.Lc(1),c.Rb()),2&e){const e=c.gc().item,t=c.gc(3);c.nc("itemId",null==e?null:e.NotedRelationDefinitionId),c.zb(1),c.Nc(" ",t.getMultilingualValue(t.ws.RelationDefinition[e.NotedRelationDefinitionId],"TitleSingular",t.ws)," ")}}function Rw(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relation-definitions-picker",64),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.NotedRelationDefinitionId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item,t=c.gc(2).model,n=c.gc();c.nc("ngModel",e.NotedRelationDefinitionId)("required",!e.PH)("filter",n.notedRelationDefinitionFilter(t))}}function yw(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",61),c.Jc(1,Mw,2,2,"t-view-link",62),c.Jc(2,Rw,1,3,"t-relation-definitions-picker",63),c.Rb()),2&e){const e=t.item,n=c.gc(2).isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.NotedRelationDefinitionId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Dw(e,t){if(1&e&&(c.Nb(0,"t-table",58),c.Jc(1,Iw,2,3,"ng-template",null,59,c.Kc),c.Jc(3,yw,3,3,"ng-template",null,60,c.Kc)),2&e){const e=c.Ac(2),t=c.Ac(4),n=c.gc(),i=n.model,o=n.isEdit;c.nc("dataSource",null==i?null:i.NotedRelationDefinitions)("isEdit",o)("columnPaths",c.qc(4,aw))("columnTemplates",c.rc(8,dw,c.sc(5,uw,e,t)))}}function ww(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,ny,2,1,"h2",6),c.Jc(2,cy,2,7,"t-text-editor",7),c.Jc(3,oy,2,7,"t-text-editor",8),c.Jc(4,ry,2,7,"t-text-editor",8),c.Rb(),c.Jc(5,ay,4,6,"t-form-group",9),c.Jc(6,by,4,6,"t-form-group",9),c.Jc(7,my,4,6,"t-form-group",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Jc(10,hy,2,1,"span",11),c.Jc(11,py,1,4,"t-text-editor",12),c.Rb(),c.Sb(12,"t-form-group",10),c.hc(13,"translate"),c.Jc(14,Sy,2,1,"span",11),c.Jc(15,vy,1,3,"t-text-editor",13),c.Rb(),c.Sb(16,"t-form-group",10),c.hc(17,"translate"),c.Jc(18,Iy,3,3,"t-restricted",14),c.Jc(19,My,1,1,"t-account-types-picker",15),c.Rb(),c.Jc(20,Dy,4,6,"t-form-group",9),c.Jc(21,Cy,4,6,"t-form-group",9),c.Sb(22,"t-form-group",10),c.hc(23,"translate"),c.Jc(24,xy,3,3,"div",11),c.Jc(25,Ty,4,1,"div",16),c.Rb(),c.Sb(26,"t-form-group",10),c.hc(27,"translate"),c.Jc(28,zy,3,3,"div",11),c.Jc(29,Ly,4,1,"div",16),c.Rb(),c.Sb(30,"t-form-group",10),c.hc(31,"translate"),c.Jc(32,ky,3,3,"div",11),c.Jc(33,Oy,4,1,"div",16),c.Rb(),c.Jc(34,Ay,3,4,"t-form-group",17),c.Jc(35,Ny,5,6,"t-form-group",17),c.Sb(36,"ul",18,19),c.Sb(38,"li",20),c.Sb(39,"a",21),c.Jc(40,_y,3,0,"span",22),c.Sb(41,"span",23),c.Lc(42),c.hc(43,"translate"),c.Rb(),c.Rb(),c.Jc(44,Ky,7,8,"ng-template",24),c.Rb(),c.Sb(45,"li",25),c.Sb(46,"a",21),c.Jc(47,By,3,0,"span",22),c.Sb(48,"span",23),c.Lc(49),c.hc(50,"translate"),c.Rb(),c.Rb(),c.Jc(51,iw,49,64,"ng-template",24),c.Rb(),c.Sb(52,"li",26),c.Sb(53,"a",21),c.Jc(54,cw,3,0,"span",22),c.Sb(55,"span",23),c.Lc(56),c.hc(57,"translate"),c.hc(58,"number"),c.Rb(),c.Rb(),c.Jc(59,bw,5,10,"ng-template",24),c.Rb(),c.Sb(60,"li",27),c.Sb(61,"a",21),c.Jc(62,gw,3,0,"span",22),c.Sb(63,"span",23),c.Lc(64),c.hc(65,"translate"),c.hc(66,"number"),c.Rb(),c.Rb(),c.Jc(67,Sw,5,10,"ng-template",24),c.Rb(),c.Sb(68,"li",28),c.Sb(69,"a",21),c.Jc(70,vw,3,0,"span",22),c.Sb(71,"span",23),c.Lc(72),c.hc(73,"translate"),c.hc(74,"number"),c.Rb(),c.Rb(),c.Jc(75,Dw,5,10,"ng-template",24),c.Rb(),c.Rb(),c.Nb(76,"div",29)),2&e){const e=t.model,n=t.isEdit,i=c.Ac(37),o=c.gc();c.nc("serverErrors",o.getMultilingualValue(null==e?null:e.serverErrors,"Name",o.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&o.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&o.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&o.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!o.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,48,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(13,50,"AccountType_Concept"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Concept),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(17,52,"TreeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ParentId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",o.showCustodianDefinition(e)),c.zb(1),c.nc("ngIf",o.showEntryTypeParent(e)),c.zb(1),c.nc("label",c.ic(23,54,"IsAssignable"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.IsAssignable),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(27,56,"AccountType_StandardAndPure"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.StandardAndPure),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(31,58,"AccountType_IsMonetary"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.IsMonetary),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("destroyOnHide",!0),c.zb(4),c.nc("ngIf",o.showDescriptionsError(e)),c.zb(2),c.Mc(c.ic(43,60,"Description")),c.zb(5),c.nc("ngIf",o.showLabelsError(e)),c.zb(2),c.Mc(c.ic(50,62,"Labels")),c.zb(5),c.nc("ngIf",o.showRelationDefinitionsError(e)),c.zb(2),c.Mc(c.ic(57,64,"AccountType_RelationDefinitions")+" ("+c.ic(58,66,null==e||null==e.RelationDefinitions?null:e.RelationDefinitions.length)+")"),c.zb(6),c.nc("ngIf",o.showResourceDefinitionsError(e)),c.zb(2),c.Mc(c.ic(65,68,"AccountType_ResourceDefinitions")+" ("+c.ic(66,70,null==e||null==e.ResourceDefinitions?null:e.ResourceDefinitions.length)+")"),c.zb(6),c.nc("ngIf",o.showNotedRelationDefinitionsError(e)),c.zb(2),c.Mc(c.ic(73,72,"AccountType_NotedRelationDefinitions")+" ("+c.ic(74,74,null==e||null==e.NotedRelationDefinitions?null:e.NotedRelationDefinitions.length)+")"),c.zb(4),c.nc("ngbNavOutlet",i)}}function Ew(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function Cw(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const xw=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},Tw=function(e,t){return[e,t]};let zw=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountTypesApi=this.api.accountTypesApi(this.notifyDestruct$),this.expand="Parent,CustodianDefinition,EntryTypeParent,\nRelationDefinitions.RelationDefinition,ResourceDefinitions.ResourceDefinition,NotedRelationDefinitions.NotedRelationDefinition",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsAssignable=!0,e.StandardAndPure=!1,e.RelationDefinitions=[],e.ResourceDefinitions=[],e.NotedRelationDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.RelationDefinitions&&t.RelationDefinitions.forEach(e=>{e.Id=null}),t.ResourceDefinitions&&t.ResourceDefinitions.forEach(e=>{e.Id=null}),t.NotedRelationDefinitions&&t.NotedRelationDefinitions.forEach(e=>{e.Id=null}),t.IsSystem=!1,t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.accountTypesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.accountTypesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.isInactive=e=>e&&!e.IsActive?"Error_CannotModifyInactiveItemPleaseActivate":null,this.accountTypesApi=this.api.accountTypesApi(this.notifyDestruct$)}get view(){return"account-types"}get ws(){return this.workspace.currentTenant}get masterCrumb(){const e=Object(jR.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}showCustodianDefinition(e){return!0}showEntryTypeParent(e){return!0}resourceDefinitionFilter(e){return"State ne 'Hidden'"}relationDefinitionFilter(e){return"State ne 'Hidden'"}notedRelationDefinitionFilter(e){return"State ne 'Hidden'"}showDescriptionsError(e){return!(!e||!e.serverErrors||!e.serverErrors.Description&&!e.serverErrors.Description2&&!e.serverErrors.Description3)}showLabelsError(e){return!!e&&!!e.serverErrors&&Object.keys(e.serverErrors).some(e=>e.endsWith("Label")||e.endsWith("Label2")||e.endsWith("Label3"))}showRelationDefinitionsError(e){return!!e&&!!e.RelationDefinitions&&e.RelationDefinitions.some(e=>!!e.serverErrors)}showResourceDefinitionsError(e){return!!e&&!!e.ResourceDefinitions&&e.ResourceDefinitions.some(e=>!!e.serverErrors)}showNotedRelationDefinitionsError(e){return!!e&&!!e.NotedRelationDefinitions&&e.NotedRelationDefinitions.some(e=>!!e.serverErrors)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-account-types-details"]],features:[c.wb],decls:9,vars:26,consts:[["collection","AccountType",3,"idString","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","isInactive","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["ngbNav","",1,"w-100","pt-3","pt-sm-4","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","description"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["ngbNavItem","labels"],["ngbNavItem","relationDefs"],["ngbNavItem","resourceDefs"],["ngbNavItem","notedrelationDefs"],[1,"w-100",3,"ngbNavOutlet"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],["link","../../account-types",3,"itemId"],[3,"ngModel","ngModelChange"],["filter","State ne 'Hidden'",3,"ngModel","ngModelChange",4,"ngIf"],["link","../../relation-definitions",3,"itemId"],["filter","State ne 'Hidden'",3,"ngModel","ngModelChange"],["link","../../entry-types",3,"itemId"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isAssignable",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isAssignable",1,"custom-control-label","t-pointer"],["type","checkbox","id","standardandpure",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","standardandpure",1,"custom-control-label","t-pointer"],["type","checkbox","id","ismonetary",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","ismonetary",1,"custom-control-label","t-pointer"],[1,"t-form-group",3,"label"],["collection","AccountType","path","IsActive",3,"entity"],[1,"text-danger"],["icon","exclamation"],[1,"row","m-0","pt-2","pt-sm-3"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header",""],["row",""],[1,"t-form-group",3,"serverErrors"],["link","../../relation-definitions",3,"itemId",4,"ngIf"],[3,"ngModel","required","filter","ngModelChange",4,"ngIf"],[3,"ngModel","required","filter","ngModelChange"],["link","../../resource-definitions",3,"itemId",4,"ngIf"],["link","../../resource-definitions",3,"itemId"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.Jc(1,ty,2,1,"ng-template",null,1,c.Kc),c.Jc(3,ww,77,76,"ng-template",null,2,c.Kc),c.Jc(5,Ew,2,3,"ng-template",null,3,c.Kc),c.Jc(7,Cw,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4),i=c.Ac(6),o=c.Ac(8);c.nc("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",e)("documentTemplate",n)("isInactive",t.isInactive)("actions",c.sc(23,Tw,c.vc(11,xw,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(17,xw,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,G.v,G.x,G.y,G.w,G.A,pe.a,te.m,te.i,te.j,hn.a,ss,eR,KR,WR,te.a,me.a,ee.a,Lb,Fs.a,Vs.a,ZR],pipes:[K.c,C.d],encapsulation:2}),e})();function Lw(e,t){if(1&e&&(c.Sb(0,"div",7),c.Nb(1,"t-auto-cell",8),c.Rb(),c.Sb(2,"div",9),c.Nb(3,"t-auto-cell",10),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e]),c.zb(2),c.nc("entity",n.c[e])}}function kw(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Account"),"\n")}function Ow(e,t){if(1&e&&(c.Sb(0,"span",11),c.Nb(1,"t-auto-cell",12),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function Aw(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function Nw(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function _w(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}const Jw=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Pw=function(e,t){return[e,t]},Fw=function(e){return{template:e,expression:"CreatedById eq me"}},Vw=function(e){return[e]},qw=function(e){return{CreatedBy:e}};let jw=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountsApi=this.api.accountsApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.accountsApi.activate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.accountsApi.deactivate(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.accountsApi=this.api.accountsApi(this.notifyDestruct$)}get view(){return"accounts"}get c(){return this.workspace.currentTenant.Account}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-accounts-master"]],features:[c.wb],decls:14,vars:31,consts:[["collection","Account","selectDefault","Classification,Classification.Code,Currency,Center","selectForTiles","Code,Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between","truncate"],["collection","Account",1,"text-truncate",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","Account","path","Code",1,"text-truncate",3,"entity"],[1,"text-truncate"],["collection","Account",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,Lw,4,2,"ng-template",null,1,c.Kc),c.Jc(4,kw,2,3,"ng-template",null,2,c.Kc),c.Jc(6,Ow,2,1,"ng-template",null,3,c.Kc),c.Jc(8,Aw,2,3,"ng-template",null,4,c.Kc),c.Jc(10,Nw,2,3,"ng-template",null,5,c.Kc),c.Jc(12,_w,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"Accounts"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(22,Pw,c.uc(12,Jw,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(17,Jw,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.rc(29,qw,c.rc(27,Vw,c.rc(25,Fw,s))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();var $w=n("bllQ");function Uw(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function Kw(e,t){if(1&e&&(c.Sb(0,"h2",18),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const Bw=function(){return{updateOn:"blur"}};function Hw(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,Bw))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Qw(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,Bw))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Ww(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,Bw))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Gw(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function Yw(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,Bw))}}function Xw(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Gw,2,1,"div",11),c.Jc(3,Yw,1,3,"t-text-editor",21),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Zw(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function eE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,Bw))}}function tE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Zw,2,1,"div",11),c.Jc(3,eE,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function nE(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function iE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,Bw))}}function cE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,nE,2,1,"div",11),c.Jc(3,iE,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function oE(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function rE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Code)("ngModelOptions",c.qc(2,Bw))}}function sE(e,t){if(1&e&&(c.Sb(0,"t-view-link",24),c.Nb(1,"t-auto-cell",25),c.Rb()),2&e){const e=c.gc().model;c.nc("itemId",null==e?null:e.ClassificationId),c.zb(1),c.nc("entity",e)}}function lE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-classifications-picker",26),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ClassificationId=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.ClassificationId)}}function aE(e,t){if(1&e&&(c.Sb(0,"t-view-link",27),c.Nb(1,"t-auto-cell",28),c.Rb()),2&e){const e=c.gc().model;c.nc("itemId",null==e?null:e.AccountTypeId),c.zb(1),c.nc("entity",e)}}function uE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-types-picker",29),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.AccountTypeId=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.AccountTypeId)("additionalSelect",t.accountTypeAdditionalSelect)("filter",t.filterAccountType(e))}}function dE(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(1),c.Mc(t.formatRelationDefinitionId(e.RelationDefinitionId))}}function bE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.RelationDefinitionId=t})("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).model;return c.gc().onRelationDefinitionChange(t,n)}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.RelationDefinitionId)("choices",t.choicesRelationDefinitionId(e))}}function gE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,dE,2,1,"div",11),c.Jc(3,bE,1,2,"t-selector",30),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Account_RelationDefinition"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.RelationDefinitionId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function fE(e,t){if(1&e&&(c.Sb(0,"t-view-link",34),c.Nb(1,"t-auto-cell",35),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("link","../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.RelationId))?null:n.DefinitionId))("itemId",null==e?null:e.RelationId),c.zb(1),c.nc("entity",e)}}function mE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.RelationId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.RelationId)("definitionIds",t.definitionIdsRelation(e))("additionalSelect",t.relationAdditionalSelect)}}function hE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.Jc(1,fE,2,3,"t-view-link",32),c.Jc(2,mE,1,3,"t-relations-picker",33),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.labelRelation(t))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.RelationId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function pE(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(1),c.Mc(t.formatResourceDefinitionId(e.ResourceDefinitionId))}}function SE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ResourceDefinitionId=t})("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).model;return c.gc().onResourceDefinitionChange(t,n)}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ResourceDefinitionId)("choices",t.choicesResourceDefinitionId(e))}}function vE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,pE,2,1,"div",11),c.Jc(3,SE,1,2,"t-selector",30),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Account_ResourceDefinition"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ResourceDefinitionId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function IE(e,t){if(1&e&&(c.Sb(0,"t-view-link",34),c.Nb(1,"t-auto-cell",37),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("link","../../resources/"+(null==(n=t.ws.get("Resource",null==e?null:e.ResourceId))?null:n.DefinitionId))("itemId",null==e?null:e.ResourceId),c.zb(1),c.nc("entity",e)}}function ME(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resources-picker",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ResourceId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.ResourceId)("definitionIds",t.definitionIdsResource(e))("additionalSelect",t.resourceAdditionalSelect)}}function RE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.Jc(1,IE,2,3,"t-view-link",32),c.Jc(2,ME,1,3,"t-resources-picker",33),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.labelResource(t))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ResourceId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function yE(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(1),c.Mc(t.formatNotedRelationDefinitionId(e.NotedRelationDefinitionId))}}function DE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.NotedRelationDefinitionId=t})("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).model;return c.gc().onNotedRelationDefinitionChange(t,n)}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.NotedRelationDefinitionId)("choices",t.choicesNotedRelationDefinitionId(e))}}function wE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,yE,2,1,"div",11),c.Jc(3,DE,1,2,"t-selector",30),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Account_NotedRelationDefinition"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedRelationDefinitionId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function EE(e,t){if(1&e&&(c.Sb(0,"t-view-link",34),c.Nb(1,"t-auto-cell",38),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("link","../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.NotedRelationId))?null:n.DefinitionId))("itemId",null==e?null:e.NotedRelationId),c.zb(1),c.nc("entity",e)}}function CE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.NotedRelationId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.NotedRelationId)("definitionIds",t.definitionIdsNotedRelation(e))("additionalSelect",t.notedRelationAdditionalSelect)}}function xE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.Jc(1,EE,2,3,"t-view-link",32),c.Jc(2,CE,1,3,"t-relations-picker",33),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.labelNotedRelation(t))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedRelationId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function TE(e,t){if(1&e&&(c.Sb(0,"t-view-link",34),c.Nb(1,"t-auto-cell",40),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();let n=null;c.nc("link","../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.CustodianId))?null:n.DefinitionId))("itemId",null==e?null:e.CustodianId),c.zb(1),c.nc("entity",e)}}function zE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",41),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.CustodianId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.CustodianId)("definitionIds",t.definitionIdsCustodian(e))}}function LE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.Jc(1,TE,2,3,"t-view-link",32),c.Jc(2,zE,1,2,"t-relations-picker",39),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",i.labelCustodian(t))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodianId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function kE(e,t){if(1&e&&(c.Sb(0,"t-restricted",43),c.Sb(1,"t-view-link",44),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Currency),c.zb(1),c.nc("itemId",null==e?null:e.CurrencyId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Currency",null==e?null:e.CurrencyId,"Name")," ")}}function OE(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.Mc(t.ws.getMultilingualValue("Currency",t.readonlyValueCurrencyId(e),"Name"))}}function AE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",46),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.CurrencyId=t}),c.Rb()}if(2&e){const e=c.gc(3).model;c.nc("ngModel",e.CurrencyId)}}function NE(e,t){if(1&e&&(c.Qb(0),c.Jc(1,OE,2,1,"span",11),c.Jc(2,AE,1,1,"t-currencies-picker",45),c.Pb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(1),c.nc("ngIf",t.readonlyCurrencyId(e)),c.zb(1),c.nc("ngIf",!t.readonlyCurrencyId(e))}}function _E(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,kE,3,3,"t-restricted",42),c.Jc(3,NE,3,2,"ng-container",11),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Account_Currency"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function JE(e,t){if(1&e&&(c.Sb(0,"t-view-link",48),c.Nb(1,"t-auto-cell",49),c.Rb()),2&e){const e=c.gc(2).model;c.nc("itemId",null==e?null:e.CenterId),c.zb(1),c.nc("entity",e)}}function PE(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.Mc(t.ws.getMultilingualValue("Center",t.readonlyValueCenterId(e),"Name"))}}function FE(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",51),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.CenterId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.CenterId)("filter",t.filterCenter(e))}}function VE(e,t){if(1&e&&(c.Qb(0),c.Jc(1,PE,2,1,"span",11),c.Jc(2,FE,1,2,"t-centers-picker",50),c.Pb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(1),c.nc("ngIf",t.readonlyCenterId(e)),c.zb(1),c.nc("ngIf",!t.readonlyCenterId(e))}}function qE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,JE,2,2,"t-view-link",47),c.Jc(3,VE,3,2,"ng-container",11),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Account_Center"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function jE(e,t){if(1&e&&(c.Sb(0,"t-view-link",53),c.Nb(1,"t-auto-cell",54),c.Rb()),2&e){const e=c.gc(2).model;c.nc("itemId",null==e?null:e.EntryTypeId),c.zb(1),c.nc("entity",e)}}function $E(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",51),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.EntryTypeId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.EntryTypeId)("filter",t.filterEntryType(e))}}function UE(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,jE,2,2,"t-view-link",52),c.Jc(3,$E,1,2,"t-entry-types-picker",50),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Account_EntryType"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.EntryTypeId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function KE(e,t){if(1&e&&(c.Sb(0,"t-form-group",55),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",56),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(2),c.nc("entity",e)}}function BE(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,Kw,2,1,"h2",6),c.Jc(2,Hw,2,7,"t-text-editor",7),c.Jc(3,Qw,2,7,"t-text-editor",8),c.Jc(4,Ww,2,7,"t-text-editor",8),c.Rb(),c.Jc(5,Xw,4,6,"t-form-group",9),c.Jc(6,tE,4,6,"t-form-group",9),c.Jc(7,cE,4,6,"t-form-group",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Jc(10,oE,2,1,"div",11),c.Jc(11,rE,1,3,"t-text-editor",12),c.Rb(),c.Sb(12,"t-form-group",10),c.hc(13,"translate"),c.Jc(14,sE,2,2,"t-view-link",13),c.Jc(15,lE,1,1,"t-account-classifications-picker",14),c.Rb(),c.Sb(16,"t-form-group",10),c.hc(17,"translate"),c.Jc(18,aE,2,2,"t-view-link",15),c.Jc(19,uE,1,3,"t-account-types-picker",16),c.Rb(),c.Jc(20,gE,4,6,"t-form-group",9),c.Jc(21,hE,3,4,"t-form-group",9),c.Jc(22,vE,4,6,"t-form-group",9),c.Jc(23,RE,3,4,"t-form-group",9),c.Jc(24,wE,4,6,"t-form-group",9),c.Jc(25,xE,3,4,"t-form-group",9),c.Jc(26,LE,3,4,"t-form-group",9),c.Jc(27,_E,4,6,"t-form-group",9),c.Jc(28,qE,4,6,"t-form-group",9),c.Jc(29,UE,4,6,"t-form-group",9),c.Jc(30,KE,3,4,"t-form-group",17)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,31,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(13,33,"Account_Classification"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ClassificationId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(17,35,"Account_Type"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.AccountTypeId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.showRelationDefinitionId(e)),c.zb(1),c.nc("ngIf",i.showRelation(e)),c.zb(1),c.nc("ngIf",i.showResourceDefinitionId(e)),c.zb(1),c.nc("ngIf",i.showResource(e)),c.zb(1),c.nc("ngIf",i.showNotedRelationDefinitionId(e)),c.zb(1),c.nc("ngIf",i.showNotedRelation(e)),c.zb(1),c.nc("ngIf",i.showCustodian(e)),c.zb(1),c.nc("ngIf",i.showCurrency(e)),c.zb(1),c.nc("ngIf",i.showCenter(e)),c.zb(1),c.nc("ngIf",i.showEntryType(e)),c.zb(1),c.nc("ngIf",!n)}}function HE(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function QE(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const WE=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},GE=function(e,t){return[e,t]};let YE=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountsApi=this.api.accountsApi(this.notifyDestruct$),this.expand="AccountType.RelationDefinitions,AccountType.ResourceDefinitions,AccountType.NotedRelationDefinitions,Classification,\nCurrency,Center,Relation.Currency,Resource.Currency,NotedRelation.Currency,\nRelation.Center,Resource.Center,NotedRelation.Center,EntryType,Custodian",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.onActivate=e=>{e&&e.Id&&this.accountsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.accountsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this._choicesRelationDefinitionIdResult=[],this._choicesResourceDefinitionIdResult=[],this._choicesNotedRelationDefinitionIdResult=[],this.accountsApi=this.api.accountsApi(this.notifyDestruct$)}get view(){return"accounts"}get ws(){return this.workspace.currentTenant}get p(){return Object($w.a)(this.workspace,this.translate).properties}showCenter(e){return!0}readonlyCenterId(e){return!!this.readonlyValueCenterId(e)}readonlyValueCenterId(e){if(!e)return null;const t=this.ws.get("Relation",e.RelationId),n=this.ws.get("Resource",e.ResourceId),i=this.ws.get("Relation",e.NotedRelationId);return(t?t.CenterId:null)||(n?n.CenterId:null)||(i?i.CenterId:null)}filterCenter(e){return null}showCurrency(e){return!0}readonlyCurrencyId(e){return!!this.readonlyValueCurrencyId(e)}readonlyValueCurrencyId(e){if(!e)return null;const t=this.ws.get("Relation",e.RelationId),n=this.ws.get("Resource",e.ResourceId),i=this.ws.get("Relation",e.NotedRelationId);return(t?t.CurrencyId:null)||(n?n.CurrencyId:null)||(i?i.CurrencyId:null)}showCustodian(e){const t=this.accountType(e);return!!t&&!!t.CustodianDefinitionId}labelCustodian(e){let t="";const n=this.accountType(e);if(n&&n.CustodianDefinitionId){const e=this.ws.definitions.Relations[n.CustodianDefinitionId];e&&(t=` (${this.ws.getMultilingualValueImmediate(e,"TitleSingular")})`)}return this.translate.instant("Account_Custodian")+t}definitionIdsCustodian(e){const t=this.accountType(e);return t&&t.CustodianDefinitionId?[t.CustodianDefinitionId]:[]}choicesRelationDefinitionId(e){const t=this.ws,n=t.definitions,i=this.accountType(e);return this._choicesRelationDefinitionIdAccountType===i&&this._choicesRelationDefinitionIdDefinitions===n||(this._choicesRelationDefinitionIdAccountType=i,this._choicesRelationDefinitionIdDefinitions=n,this._choicesRelationDefinitionIdResult=i&&i.RelationDefinitions?i.RelationDefinitions.filter(e=>!!n.Relations[e.RelationDefinitionId]).map(e=>({value:e.RelationDefinitionId,name:()=>t.getMultilingualValueImmediate(n.Relations[e.RelationDefinitionId],"TitleSingular")})):[]),this._choicesRelationDefinitionIdResult}showRelationDefinitionId(e){return this.choicesRelationDefinitionId(e).length>0}formatRelationDefinitionId(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Relations[e],"TitlePlural"):""}onRelationDefinitionChange(e,t){if(!e)return;const n=this.ws.get("Relation",t.RelationId);n&&n.DefinitionId!==e&&delete t.RelationId}labelRelation(e){let t="";if(e&&e.RelationDefinitionId){const n=this.ws.definitions.Relations[e.RelationDefinitionId];n&&(t=` (${this.ws.getMultilingualValueImmediate(n,"TitleSingular")})`)}return this.translate.instant("Account_Relation")+t}showRelation(e){return this.showRelationDefinitionId(e)&&!!e.RelationDefinitionId}definitionIdsRelation(e){return e&&e.RelationDefinitionId?[e.RelationDefinitionId]:[]}choicesResourceDefinitionId(e){const t=this.ws,n=t.definitions,i=this.accountType(e);return this._choicesResourceDefinitionIdAccountType===i&&this._choicesResourceDefinitionIdDefinitions===n||(this._choicesResourceDefinitionIdAccountType=i,this._choicesResourceDefinitionIdDefinitions=n,this._choicesResourceDefinitionIdResult=i&&i.ResourceDefinitions?i.ResourceDefinitions.filter(e=>!!n.Resources[e.ResourceDefinitionId]).map(e=>({value:e.ResourceDefinitionId,name:()=>t.getMultilingualValueImmediate(n.Resources[e.ResourceDefinitionId],"TitleSingular")})):[]),this._choicesResourceDefinitionIdResult}showResourceDefinitionId(e){return this.choicesResourceDefinitionId(e).length>0}formatResourceDefinitionId(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Resources[e],"TitlePlural"):""}onResourceDefinitionChange(e,t){if(!e)return;const n=this.ws.get("Resource",t.ResourceId);n&&n.DefinitionId!==e&&delete t.ResourceId}labelResource(e){let t="";if(e&&e.ResourceDefinitionId){const n=this.ws.definitions.Resources[e.ResourceDefinitionId];n&&(t=` (${this.ws.getMultilingualValueImmediate(n,"TitleSingular")})`)}return this.translate.instant("Account_Resource")+t}showResource(e){return this.showResourceDefinitionId(e)&&!!e.ResourceDefinitionId}definitionIdsResource(e){return e&&e.ResourceDefinitionId?[e.ResourceDefinitionId]:[]}choicesNotedRelationDefinitionId(e){const t=this.ws,n=t.definitions,i=this.accountType(e);return this._choicesNotedRelationDefinitionIdAccountType===i&&this._choicesNotedRelationDefinitionIdDefinitions===n||(this._choicesNotedRelationDefinitionIdAccountType=i,this._choicesNotedRelationDefinitionIdDefinitions=n,this._choicesNotedRelationDefinitionIdResult=i&&i.NotedRelationDefinitions?i.NotedRelationDefinitions.filter(e=>!!n.Relations[e.NotedRelationDefinitionId]).map(e=>({value:e.NotedRelationDefinitionId,name:()=>t.getMultilingualValueImmediate(n.Relations[e.NotedRelationDefinitionId],"TitleSingular")})):[]),this._choicesNotedRelationDefinitionIdResult}showNotedRelationDefinitionId(e){return this.choicesNotedRelationDefinitionId(e).length>0}formatNotedRelationDefinitionId(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Relations[e],"TitlePlural"):""}onNotedRelationDefinitionChange(e,t){if(!e)return;const n=this.ws.get("Relation",t.NotedRelationId);n&&n.DefinitionId!==e&&delete t.NotedRelationId}labelNotedRelation(e){let t="";if(e&&e.NotedRelationDefinitionId){const n=this.ws.definitions.Relations[e.NotedRelationDefinitionId];n&&(t=` (${this.ws.getMultilingualValueImmediate(n,"TitleSingular")})`)}return this.translate.instant("Account_NotedRelation")+t}showNotedRelation(e){return this.showNotedRelationDefinitionId(e)&&!!e.NotedRelationDefinitionId}definitionIdsNotedRelation(e){return e&&e.NotedRelationDefinitionId?[e.NotedRelationDefinitionId]:[]}showEntryType(e){const t=this.accountType(e);return!!t&&!!t.EntryTypeParentId}filterEntryType(e){let t="IsAssignable eq true";const n=this.accountType(e);return n&&n.EntryTypeParentId&&(t+=` and Id descof ${n.EntryTypeParentId}`),t}accountType(e){return e?this.ws.get("AccountType",e.AccountTypeId):null}get accountTypeAdditionalSelect(){const e="RelationDefinitions.RelationDefinitionId,ResourceDefinitions.ResourceDefinitionId,\n    NotedRelationDefinition.NotedRelationDefinitionId,EntryTypeParentId,CustodianDefinitionId";return"$DocumentDetails"===this.additionalSelect?"$DocumentDetails,"+e:e}filterAccountType(e){const t=this.ws.get("AccountClassification",e.ClassificationId);return t&&t.AccountTypeParentId?`Id descof ${t.AccountTypeParentId}`:""}get resourceAdditionalSelect(){const e="DefinitionId,Currency.Name,Currency.Name2,Currency.Name3,Center.Name,Center.Name2,Center.Name3";return"$DocumentDetails"===this.additionalSelect?"$DocumentDetails,"+e:e}get relationAdditionalSelect(){const e="DefinitionId,Currency.Name,Currency.Name2,Currency.Name3,Center.Name,Center.Name2,Center.Name3";return"$DocumentDetails"===this.additionalSelect?"$DocumentDetails,"+e:e}get notedRelationAdditionalSelect(){const e="DefinitionId,Currency.Name,Currency.Name2,Currency.Name3,Center.Name,Center.Name2,Center.Name3";return"$DocumentDetails"===this.additionalSelect?"$DocumentDetails,"+e:e}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-accounts-details"]],features:[c.wb],decls:10,vars:26,consts:[["collection","Account",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["link","../../account-classifications",3,"itemId",4,"ngIf"],["additionalSelect","AccountTypeParentId",3,"ngModel","ngModelChange",4,"ngIf"],["link","../../account-types",3,"itemId",4,"ngIf"],["required","",3,"ngModel","additionalSelect","filter","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],["link","../../account-classifications",3,"itemId"],["collection","Account","path","Classification",3,"entity"],["additionalSelect","AccountTypeParentId",3,"ngModel","ngModelChange"],["link","../../account-types",3,"itemId"],["collection","Account","path","AccountType",3,"entity"],["required","",3,"ngModel","additionalSelect","filter","ngModelChange"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],[3,"link","itemId",4,"ngIf"],[3,"ngModel","definitionIds","additionalSelect","ngModelChange",4,"ngIf"],[3,"link","itemId"],["collection","Account","path","Relation",3,"entity"],[3,"ngModel","definitionIds","additionalSelect","ngModelChange"],["collection","Account","path","Resource",3,"entity"],["collection","Account","path","NotedRelation",3,"entity"],[3,"ngModel","definitionIds","ngModelChange",4,"ngIf"],["collection","Account","path","Custodian",3,"entity"],[3,"ngModel","definitionIds","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"metadata"],["link","../../currencies",3,"itemId"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],["link","../../centers",3,"itemId",4,"ngIf"],["link","../../centers",3,"itemId"],["collection","Account","path","Center",3,"entity"],[3,"ngModel","filter","ngModelChange",4,"ngIf"],[3,"ngModel","filter","ngModelChange"],["link","../../entry-types",3,"itemId",4,"ngIf"],["link","../../entry-types",3,"itemId"],["collection","Account","path","EntryType",3,"entity"],[1,"t-form-group",3,"label"],["collection","Account","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Uw,2,1,"ng-template",null,1,c.Kc),c.Jc(4,BE,31,37,"ng-template",null,2,c.Kc),c.Jc(6,HE,2,3,"ng-template",null,3,c.Kc),c.Jc(8,QE,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,9,"Accounts"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.sc(23,GE,c.vc(11,WE,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(17,WE,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,pe.a,te.m,te.i,te.j,ss,me.a,GM,eR,pn.a,xb,rv,hn.a,zu,Au,WR],pipes:[K.c],encapsulation:2}),e})();function XE(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-accounts-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function ZE(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-accounts-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let eC=(()=>{class e extends Js{}return e.\u0275fac=function(t){return tC(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-accounts-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","Account",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,XE,2,3,"ng-template",null,1,c.Kc),c.Jc(3,ZE,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,YE,jw],encapsulation:2}),e})();const tC=c.Ub(eC);let nC=(()=>{class e{constructor(){this.lastId=0}getId(){return this.lastId++,this.lastId}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function iC(e,t){1&e&&(c.Sb(0,"span",14),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NotSupportedForDisplay")," "))}function cC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",15),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)}}function oC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",16),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("minDecimalPlaces",e.minDecimalPlaces)("maxDecimalPlaces",e.maxDecimalPlaces)("noSeparator",e.noSeparator)}}function rC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",17),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("minDecimalPlaces",e.minDecimalPlaces)("maxDecimalPlaces",e.maxDecimalPlaces)("noSeparator",e.noSeparator)("isPercentage",!0)}}function sC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-serial-editor",18),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("prefix",e.prefix)("codeWidth",e.codeWidth)}}function lC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",19),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("calendar",e.calendar)("granularity",e.dateGranularity)}}function aC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("calendar",e.calendar)}}function uC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("choices",e.choices)}}function dC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",22),c.Sb(1,"input",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb(),c.Sb(2,"label",24),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(1),c.oc("id",e.checkboxId),c.nc("ngModel",e.value),c.zb(1),c.oc("for",e.checkboxId)}}function bC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-classifications-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function gC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-ifrs-concepts-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function fC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-types-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function mC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-accounts-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function hC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-agents-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function pC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",26),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("definitionIds",e.definitionIds)("showCreate",!1)("filter",e.filter)}}function SC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function vC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function IC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("definitionId",e.definitionId)("showCreate",!1)("filter",e.filter)}}function MC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function RC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resources-picker",26),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("definitionIds",e.definitionIds)("showCreate",!1)("filter",e.filter)}}function yC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function DC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-roles-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function wC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-users-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function EC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relation-definitions-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function CC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resource-definitions-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function xC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookup-definitions-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function TC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-document-definitions-picker",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().value=t}),c.Rb()}if(2&e){const e=c.gc();c.nc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function zC(e,t){if(1&e&&(c.Sb(0,"div",28),c.Lc(1),c.Rb()),2&e){const e=c.gc();c.zb(1),c.Nc(" TODO: control for '",e.desc.control,"'' ")}}let LC=(()=>{class e{constructor(e){this.id=e,this.w100=!0,this.definitionIdArray=[],this.isDisabled=!1,this.onChangeFn=e=>{},this.onTouchedFn=()=>{}}get control(){return this._control}set control(e){this._control!==e&&(this._control=e,this.initializeNewControl(e))}initializeNewControl(e){if(e&&e.valueAccessor){const t=e.valueAccessor;t.writeValue(this.value),t.registerOnChange(this.onChangeFn),t.registerOnTouched(this.onTouchedFn),t.setDisabledState&&t.setDisabledState(this.isDisabled)}}writeValue(e){this.value=e;const t=this.control;t&&t.valueAccessor&&t.valueAccessor.writeValue(this.value)}registerOnChange(e){this.onChangeFn=e;const t=this.control;t&&t.valueAccessor&&t.valueAccessor.registerOnChange(this.onChangeFn)}registerOnTouched(e){this.onTouchedFn=e;const t=this.control;t&&t.valueAccessor&&t.valueAccessor.registerOnTouched(this.onTouchedFn)}setDisabledState(e){this.isDisabled=e;const t=this.control;t&&t.valueAccessor&&t.valueAccessor.setDisabledState&&t.valueAccessor.setDisabledState(this.isDisabled)}get checkboxId(){return this._checkboxId||(this._checkboxId=this.id.getId()+""),this._checkboxId}get minDecimalPlaces(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.minDecimalPlaces:(console.error(`Editor error: requesting minDecimalPlaces from a ${this.desc.control}`),0)}get maxDecimalPlaces(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.maxDecimalPlaces:(console.error(`Editor error: requesting maxDecimalPlaces from a ${this.desc.control}`),0)}get noSeparator(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.noSeparator:(console.error(`Editor error: requesting noSeparator from a ${this.desc.control}`),!0)}get prefix(){return"serial"===this.desc.control?this.desc.prefix:(console.error(`Editor error: requesting prefix from a ${this.desc.control}`),"")}get codeWidth(){return"serial"===this.desc.control?this.desc.codeWidth:(console.error(`Editor error: requesting codeWidth from a ${this.desc.control}`),4)}get choices(){return"choice"===this.desc.control?Object(Mi.c)(this.desc):(console.error(`Editor error: requesting choices from a ${this.desc.control}`),[])}get dateGranularity(){if("date"===this.desc.control)return this.desc.granularity;console.error(`Editor error: requesting granularity from a ${this.desc.control}`)}get dateTimeGranularity(){if("datetime"===this.desc.control)return this.desc.granularity;console.error(`Editor error: requesting granularity from a ${this.desc.control}`)}get calendar(){if("date"===this.desc.control||"datetime"===this.desc.control)return this.desc.calendar;console.error(`Editor error: requesting calendar from a ${this.desc.control}`)}get filter(){return this.desc.filter}get definitionId(){return this.desc.definitionId}get definitionIds(){const e=this.desc.definitionId;return this.definitionIdForArray!==e&&(this.definitionIdForArray=e,this.definitionIdArray=e?[e]:[]),this.definitionIdArray}validate(e){return this.control&&this.control.validator?this.control.validator(e):null}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(nC))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-editor"]],viewQuery:function(e,t){if(1&e&&c.Qc(te.h,1),2&e){let e;c.zc(e=c.dc())&&(t.control=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("w-100",t.w100)},inputs:{desc:"desc"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e},{provide:te.f,multi:!0,useExisting:e}])],decls:29,vars:28,consts:[[3,"ngSwitch"],["class","font-italic text-muted",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","isPercentage","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","prefix","codeWidth","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","calendar","granularity","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","calendar","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","choices","ngModelChange",4,"ngSwitchCase"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngSwitchCase"],[3,"ngModel","showCreate","filter","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionIds","showCreate","filter","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionId","showCreate","filter","ngModelChange",4,"ngSwitchCase"],["class","text-danger font-weight-bold",4,"ngSwitchDefault"],[1,"font-italic","text-muted"],[3,"ngModel","ngModelChange"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","ngModelChange"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","isPercentage","ngModelChange"],[3,"ngModel","prefix","codeWidth","ngModelChange"],[3,"ngModel","calendar","granularity","ngModelChange"],[3,"ngModel","calendar","ngModelChange"],[3,"ngModel","choices","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModel","id","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[3,"ngModel","showCreate","filter","ngModelChange"],[3,"ngModel","definitionIds","showCreate","filter","ngModelChange"],[3,"ngModel","definitionId","showCreate","filter","ngModelChange"],[1,"text-danger","font-weight-bold"]],template:function(e,t){1&e&&(c.Qb(0,0),c.Jc(1,iC,3,3,"span",1),c.Jc(2,cC,1,1,"t-text-editor",2),c.Jc(3,oC,1,4,"t-decimal-editor",3),c.Jc(4,rC,1,5,"t-decimal-editor",4),c.Jc(5,sC,1,3,"t-serial-editor",5),c.Jc(6,lC,1,3,"t-date-picker",6),c.Jc(7,aC,1,2,"t-date-picker",7),c.Jc(8,uC,1,2,"t-selector",8),c.Jc(9,dC,4,3,"div",9),c.Jc(10,bC,1,3,"t-account-classifications-picker",10),c.Jc(11,gC,1,3,"t-ifrs-concepts-picker",10),c.Jc(12,fC,1,3,"t-account-types-picker",10),c.Jc(13,mC,1,3,"t-accounts-picker",10),c.Jc(14,hC,1,3,"t-agents-picker",10),c.Jc(15,pC,1,4,"t-relations-picker",11),c.Jc(16,SC,1,3,"t-currencies-picker",10),c.Jc(17,vC,1,3,"t-entry-types-picker",10),c.Jc(18,IC,1,4,"t-lookups-picker",12),c.Jc(19,MC,1,3,"t-units-picker",10),c.Jc(20,RC,1,4,"t-resources-picker",11),c.Jc(21,yC,1,3,"t-centers-picker",10),c.Jc(22,DC,1,3,"t-roles-picker",10),c.Jc(23,wC,1,3,"t-users-picker",10),c.Jc(24,EC,1,3,"t-relation-definitions-picker",10),c.Jc(25,CC,1,3,"t-resource-definitions-picker",10),c.Jc(26,xC,1,3,"t-lookup-definitions-picker",10),c.Jc(27,TC,1,3,"t-document-definitions-picker",10),c.Jc(28,zC,2,1,"div",13),c.Pb()),2&e&&(c.nc("ngSwitch",null==t.desc?null:t.desc.control),c.zb(1),c.nc("ngSwitchCase","unsupported"),c.zb(1),c.nc("ngSwitchCase","text"),c.zb(1),c.nc("ngSwitchCase","number"),c.zb(1),c.nc("ngSwitchCase","percent"),c.zb(1),c.nc("ngSwitchCase","serial"),c.zb(1),c.nc("ngSwitchCase","date"),c.zb(1),c.nc("ngSwitchCase","datetime"),c.zb(1),c.nc("ngSwitchCase","choice"),c.zb(1),c.nc("ngSwitchCase","check"),c.zb(1),c.nc("ngSwitchCase","AccountClassification"),c.zb(1),c.nc("ngSwitchCase","IfrsConcept"),c.zb(1),c.nc("ngSwitchCase","AccountType"),c.zb(1),c.nc("ngSwitchCase","Account"),c.zb(1),c.nc("ngSwitchCase","Agent"),c.zb(1),c.nc("ngSwitchCase","Relation"),c.zb(1),c.nc("ngSwitchCase","Currency"),c.zb(1),c.nc("ngSwitchCase","EntryType"),c.zb(1),c.nc("ngSwitchCase","Lookup"),c.zb(1),c.nc("ngSwitchCase","Unit"),c.zb(1),c.nc("ngSwitchCase","Resource"),c.zb(1),c.nc("ngSwitchCase","Center"),c.zb(1),c.nc("ngSwitchCase","Role"),c.zb(1),c.nc("ngSwitchCase","User"),c.zb(1),c.nc("ngSwitchCase","RelationDefinition"),c.zb(1),c.nc("ngSwitchCase","ResourceDefinition"),c.zb(1),c.nc("ngSwitchCase","LookupDefinition"),c.zb(1),c.nc("ngSwitchCase","DocumentDefinition"))},encapsulation:2}),e})();const kC=["errorModal"];function OC(e,t){if(1&e&&(c.Sb(0,"div",20),c.Sb(1,"ul",21),c.Sb(2,"li",22),c.Lc(3),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc(" ",e.title," ")}}const AC=function(e){return{updateOn:e}};function NC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",28),c.Sb(1,"t-editor",29),c.cc("ngModelChange",function(n){c.Dc(e);const i=t.$implicit;return c.gc(3).arguments[i.keyLower]=n})("ngModelChange",function(){return c.Dc(e),c.gc(3).onArgumentChange()}),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.nc("label",e.label()+(e.isRequired?" *":"")),c.zb(1),c.nc("ngModel",n.arguments[e.keyLower])("ngModelOptions",c.rc(5,AC,n.updateOn(e.desc)))("required",e.isRequired)("desc",e.desc)}}function _C(e,t){if(1&e&&(c.Sb(0,"div",25),c.Sb(1,"div",26),c.Jc(2,NC,2,7,"t-form-group",27),c.Rb(),c.Rb()),2&e){const e=c.gc(2);c.zb(2),c.nc("ngForOf",e.parameters)}}function JC(e,t){if(1&e&&(c.Sb(0,"div",23),c.Jc(1,_C,3,1,"div",24),c.Rb()),2&e){const e=c.gc();c.zb(1),c.nc("ngIf",e.showParameters)}}function PC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",34),c.cc("click",function(){c.Dc(e);const t=c.gc(2),n=c.Ac(25);return t.modalService.open(n)}),c.Lc(1),c.hc(2,"translate"),c.Rb()}2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"Description")," "))}function FC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",34),c.cc("click",function(){return c.Dc(e),c.gc(2).onEdit()}),c.Lc(1),c.hc(2,"translate"),c.Rb()}2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"EditDefinition")," "))}function VC(e,t){if(1&e&&(c.Sb(0,"div",30),c.Sb(1,"button",31),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"div",32),c.Jc(5,PC,3,3,"button",33),c.Jc(6,FC,3,3,"button",33),c.Rb(),c.Rb()),2&e){const e=c.gc();c.nc("placement",e.actionsDropdownPlacement),c.zb(2),c.Nc(" ",c.ic(3,4,"Data")," "),c.zb(3),c.nc("ngIf",e.description),c.zb(1),c.nc("ngIf",e.showEditDefinition)}}function qC(e,t){1&e&&c.Nb(0,"t-spinner",35)}function jC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",36),c.Sb(1,"div",37),c.Sb(2,"span",38),c.Sb(3,"span"),c.Lc(4),c.hc(5,"number"),c.Rb(),c.Lc(6," - "),c.Sb(7,"span"),c.Lc(8),c.hc(9,"number"),c.Rb(),c.Rb(),c.Sb(10,"span",38),c.Lc(11),c.Rb(),c.Rb(),c.Sb(12,"button",39),c.cc("click",function(){return c.Dc(e),c.gc().onPreviousPage()}),c.hc(13,"translate"),c.Nb(14,"fa-icon",40),c.Rb(),c.Sb(15,"button",39),c.cc("click",function(){return c.Dc(e),c.gc().onNextPage()}),c.hc(16,"translate"),c.Nb(17,"fa-icon",41),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(4),c.Mc(c.ic(5,9,e.from)),c.zb(4),c.Mc(c.ic(9,11,e.to)),c.zb(3),c.Nc(" / ",e.totalDisplay,""),c.zb(1),c.oc("title",c.ic(13,13,"Previous")),c.nc("disabled",!e.canPreviousPage),c.zb(2),c.nc("flip",e.flip),c.zb(1),c.oc("title",c.ic(16,15,"Next")),c.nc("disabled",!e.canNextPage),c.zb(2),c.nc("flip",e.flip)}}function $C(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",42),c.cc("click",function(){return c.Dc(e),c.gc().onToggleCollapseParameters()}),c.hc(1,"translate"),c.Nb(2,"fa-icon",43),c.Sb(3,"span",7),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.oc("title",c.ic(1,3,e.collapseParameters?"Expand":"Collapse")),c.zb(2),c.nc("icon",e.collapseParameters?"angle-down":"angle-up"),c.zb(2),c.Nc("\xa0\xa0",c.ic(5,5,e.collapseParameters?"Expand":"Collapse"),"")}}function UC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"label",46),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc(2).onView(n.view)}),c.hc(1,"translate"),c.Nb(2,"input",47),c.Nb(3,"fa-icon",43),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2);c.Eb("active",n.isActive(e.view)),c.oc("title",c.ic(1,5,e.label)),c.zb(2),c.oc("name",e.view),c.zb(1),c.nc("icon",e.icon)}}function KC(e,t){if(1&e&&(c.Sb(0,"div",44),c.Jc(1,UC,4,7,"label",45),c.Rb()),2&e){const e=c.gc();c.zb(1),c.nc("ngForOf",e.views)}}function BC(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-report-results",48),c.cc("exportStarting",function(){return c.Dc(e),c.gc().onExportStarting()})("exportSuccess",function(){return c.Dc(e),c.gc().onExportSuccess()})("exportError",function(t){return c.Dc(e),c.gc().onExportError(t)})("orderbyChange",function(){return c.Dc(e),c.gc().onOrderByChange()}),c.Rb()}if(2&e){const e=c.gc();c.nc("definition",e.definition)("arguments",e.immutableArguments)("view",e.view)("refresh",e.refresh)("export",e.export)("state",e.state)("mode",e.mode)("disableDrilldown",e.disableDrilldown)}}function HC(e,t){1&e&&(c.Sb(0,"div",49),c.Nb(1,"fa-icon",50),c.Lc(2),c.hc(3,"translate"),c.Rb()),2&e&&(c.zb(2),c.Nc(" \xa0 ",c.ic(3,1,"FillRequiredFields")," "))}function QC(e,t){if(1&e&&(c.Sb(0,"div",51),c.Sb(1,"h5",52),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",53),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",54),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",55),c.Lc(8),c.Rb(),c.Sb(9,"div",56),c.Sb(10,"button",57),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(11,"fa-icon",58),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,3,"Description")," "),c.zb(6),c.Nc(" ",e.description," "),c.zb(4),c.Nc(" \xa0",c.ic(13,5,"OK")," ")}}function WC(e,t){if(1&e&&(c.Sb(0,"div",51),c.Sb(1,"h5",52),c.Nb(2,"fa-icon",59),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",53),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(6,"span",54),c.Lc(7,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",55),c.Lc(9),c.Rb(),c.Sb(10,"div",56),c.Sb(11,"button",60),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(12,"fa-icon",61),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc("\xa0\xa0",c.ic(4,3,"Error")," "),c.zb(6),c.Nc(" ",e.errorMessage," "),c.zb(4),c.Nc(" \xa0",c.ic(14,5,"Dismiss")," ")}}let GC=(()=>{class e{constructor(e,t,n,i,c,o){this.workspace=e,this.translate=t,this.router=n,this.route=i,this.modalService=c,this.customUserSettings=o,this.mode="screen",this.disableDrilldown=!1,this.badDefinition=!1,this._parameterCount=null,this.refresh$=new E.a,this.export$=new E.a,this._currentParameters=[],this._views=[{view:ts.pivot,label:"Table",icon:"table"},{view:ts.chart,label:"Chart",icon:"chart-pie"}],this.arguments={},this.immutableArguments={},this.exportStatus=L.g.loaded}get showChart(){return this._showChart}set showChart(e){this._showChart!==e&&(this.view=e?ts.chart:ts.pivot,this._showChart=e)}ngOnInit(){this._subscriptions=new O.a,this._subscriptions.add(this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const n=+e.get("definitionId");if(n&&this.workspace.currentTenant.definitions.Reports[n]||this.router.navigate(["page-not-found"],{relativeTo:this.route.parent,replaceUrl:!0}),this.definitionId!==n&&(this.definitionId=n),"Summary"===this.definition.Type){const t=e.get("view");t&&ts[t]&&(this.view=ts[t])}"Details"===this.definition.Type&&(this.state.skip=+e.get("skip")||0);for(const i of this.parameters){let n;if(e.has(i.keyLower)){const c=e.get(i.keyLower);try{switch(i.datatype){case"datetimeoffset":const e=new Date(c);isNaN(e.getTime())||(n=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{7}Z$/.test(c)?c:e.toISOString().replace("Z","0000Z"));break;case"datetime":case"date":const t=new Date(c);isNaN(t.getTime())||(n=Object(yi.d)(t));break;case"string":n=c;break;case"numeric":n=+c;break;case"bit":n="true"===c.toLowerCase();break;case"boolean":case"hierarchyid":case"geography":case"entity":case"null":default:console.error(`Unsupported parameter datatype ${i.datatype}.`)}}catch(t){console.error(t)}}this.arguments[i.keyLower]=n}this.immutableArguments=Object.assign({},this.arguments)}})),this.view=this.view||(this.definition.Chart&&this.definition.DefaultsToChart?ts.chart:ts.pivot)}ngOnDestroy(){this._subscriptions.unsubscribe()}get isScreenMode(){return"screen"===this.mode}get isPreviewMode(){return"preview"===this.mode}get definition(){return this.isScreenMode?this.workspace.currentTenant.definitions.Reports[this.definitionId]:this.previewDefinition}get entityDescriptor(){if(!this.definition)return null;const e=this.definition.Collection;if(!e)return null;const t=Mi.h[e];return t?t(this.workspace,this.translate,this.definition.DefinitionId):null}get apiEndpoint(){const e=this.entityDescriptor;return e?e.apiEndpoint:null}get state(){const e=this.stateKey,t=this.workspace.currentTenant.reportState;return t[e]||(t[e]=new L.j),t[e]}get stateKey(){return"screen"===this.mode?this.definitionId.toString():`${this.definition.Id||"new"}/preview`}urlStateChanged(){if(this.isScreenMode){const e={};if(this.definition&&"Summary"===this.definition.Type&&(e.view=this.view),this.definition&&"Details"===this.definition.Type){const t=this.state;t.skip&&(e.skip=t.skip),t.orderbyKey&&(e.$orderby=`${t.orderbyKey} ${t.orderbyDir}`)}this.parameters.forEach(t=>{const n=this.arguments[t.keyLower];Object(V.n)(n)&&(e[t.keyLower]=n+"")}),this.router.navigate([".",e],{relativeTo:this.route,replaceUrl:!0})}}onOrderByChange(){this.urlStateChanged()}get title(){return this.workspace.currentTenant.getMultilingualValueImmediate(this.definition,"Title")}get views(){return this._views}get parameters(){if(this.definition!==this._currentDefinition||this.entityDescriptor!==this._currentEntityDescriptor){if(this._currentDefinition=this.definition,this._currentEntityDescriptor=this.entityDescriptor,this._currentParameters=[],this.definition)try{const{parameters:e}=ic.getReportInfos(this.definition,this.workspace,this.translate);this._currentParameters=e,this.badDefinition=!1}catch(e){this.badDefinition=!0}this._currentParameters.length!==this._parameterCount&&null!==this._parameterCount&&this.isChart&&window.dispatchEvent(new Event("resize")),this._parameterCount=this._currentParameters.length}return this._currentParameters}choices(e){return Object(Mi.c)(e)}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get canExport(){return!0}onExport(){let e=this.title;e&&(e+=".csv"),this.export$.next(e)}get showExportSpinner(){return this.exportStatus===L.g.loading}onExportStarting(){this.exportStatus=L.g.loading}onExportSuccess(){this.exportStatus=L.g.loaded}onExportError(e){this.exportStatus=L.g.error,this.errorMessage=e,this.modalService.open(this.errorModal)}onRefresh(){this.refresh$.next()}get showReportViewToggle(){return!!this.definition&&"Summary"===this.definition.Type&&!!this.definition.Chart}get isChart(){return this.view===ts.chart&&!!this.definition&&"Summary"===this.definition.Type}onArgumentChange(){if(this.immutableArguments=Object.assign({},this.arguments),this.isScreenMode){const e={};for(const n of Object.keys(this.arguments))Object(V.n)(this.arguments[n])&&(e[n]=this.arguments[n]);const t=JSON.stringify(e);this.customUserSettings.save(`report/${this.definitionId}/arguments`,t)}this.urlStateChanged()}updateOn(e){return Object(V.s)(e)}isActive(e){return e===this.view}onView(e){this.view=e,this.urlStateChanged()}get showParametersSection(){return this.showParameters&&!this.collapseParameters}get showParameters(){return this.parameters.length>0}get areAllRequiredParamsSpecified(){const e=this.arguments;return this.parameters.every(t=>!t.isRequired||Object(V.n)(e[t.keyLower]))}get showPreview(){return this.badDefinition||this.areAllRequiredParamsSpecified}get disableRefresh(){return this.badDefinition||!this.areAllRequiredParamsSpecified}get refresh(){return this.refresh$}get export(){return this.export$}onSkipChange(e){this.urlStateChanged()}get showPagingControls(){return!!this.definition&&"Details"===this.definition.Type&&!this.definition.Top}get skip(){return this.showPagingControls?this.state.skip:0}get from(){return Math.min(this.state.skip+1,this.total)}get to(){const e=this.state;return Math.min(e.skip+is.DEFAULT_PAGE_SIZE,e.total)}get total(){return this.state.total}get totalDisplay(){const e=this.total;return e>=L.d?Object(C.w)(L.d-1,"en-GB")+"+":Object(C.w)(e,"en-GB")}onPreviousPage(){const e=this.state;e.skip=Math.max(e.skip-is.DEFAULT_PAGE_SIZE,0),this.onSkipChange(e.skip),this.refresh$.next()}get canPreviousPage(){return this.state.skip>0}onNextPage(){const e=this.state;e.skip=e.skip+is.DEFAULT_PAGE_SIZE,this.onSkipChange(e.skip),this.refresh$.next()}get canNextPage(){return this.to<this.total}get flip(){return this.workspace.ws.isRtl?"horizontal":null}get overflow(){return this.isChart?"hidden":"auto"}get description(){return this.workspace.currentTenant.getMultilingualValueImmediate(this.definition,"Description")}get showEditDefinition(){return this.isScreenMode&&this.workspace.currentTenant.canDo("report-definitions","Update",null)}get showDataDropdown(){return!!this.description||this.showEditDefinition}onEdit(){const e=this.workspace;e.isEdit=!0,this.router.navigate(["../../report-definitions",this.definitionId],{relativeTo:this.route}).then(t=>{t||delete e.isEdit}).catch(t=>delete e.isEdit)}get collapseParameters(){return this.state.collapseParams}set collapseParameters(e){const t=this.state;t.collapseParams!==e&&(t.collapseParams=e)}onToggleCollapseParameters(){this.collapseParameters=!this.collapseParameters,window.dispatchEvent(new Event("resize"))}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d),c.Mb(i.e),c.Mb(i.a),c.Mb(G.t),c.Mb(X.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-report"]],viewQuery:function(e,t){if(1&e&&c.Qc(kC,3),2&e){let e;c.zc(e=c.dc())&&(t.errorModal=e.first)}},inputs:{mode:"mode",disableDrilldown:"disableDrilldown",previewDefinition:"previewDefinition",showChart:"showChart"},decls:28,vars:19,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],["class","mx-auto mb-3 w-100","style","max-width: 700px",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","btn-group t-toolbar-button","ngbDropdown","",3,"placement",4,"ngIf"],["class","t-vertical-align-middle mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],["class","d-inline",4,"ngIf"],["class","btn btn-sm t-toolbar-button btn-light t-white-button font-weight-normal","type","button",3,"title","click",4,"ngIf"],["class","btn-group btn-group-toggle t-toolbar-button",4,"ngIf"],[1,"row","t-rest-of-screen"],["class","h-100 w-100",3,"definition","arguments","view","refresh","export","state","mode","disableDrilldown","exportStarting","exportSuccess","exportError","orderbyChange",4,"ngIf","ngIfElse"],["fillRequiredFields",""],["descModal",""],["errorModal",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"row","m-0","px-0","px-lg-1","py-1"],["class","t-form-group",3,"label",4,"ngFor","ngForOf"],[1,"t-form-group",3,"label"],[3,"ngModel","ngModelOptions","required","desc","ngModelChange"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[1,"t-vertical-align-middle","mx-1"],[1,"d-inline"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],["class","btn btn-sm btn-light t-pointer",3,"active","title","click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio",3,"name"],[1,"h-100","w-100",3,"definition","arguments","view","refresh","export","state","mode","disableDrilldown","exportStarting","exportSuccess","exportError","orderbyChange"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"],["icon","check"],["icon","exclamation-triangle",1,"text-danger"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Jc(2,OC,4,1,"div",2),c.Jc(3,JC,2,1,"div",3),c.Sb(4,"div",4),c.Sb(5,"div"),c.Sb(6,"button",5),c.cc("click",function(){return t.onExport()}),c.Nb(7,"fa-icon",6),c.Sb(8,"span",7),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Rb(),c.Jc(11,VC,7,6,"div",8),c.Jc(12,qC,1,0,"t-spinner",9),c.Rb(),c.Sb(13,"div"),c.Sb(14,"button",10),c.cc("click",function(){return t.onRefresh()}),c.hc(15,"translate"),c.Nb(16,"fa-icon",11),c.Rb(),c.Jc(17,jC,18,17,"div",12),c.Jc(18,$C,6,7,"button",13),c.Jc(19,KC,2,1,"div",14),c.Rb(),c.Rb(),c.Rb(),c.Sb(20,"div",15),c.Jc(21,BC,1,8,"t-report-results",16),c.Jc(22,HC,4,3,"ng-template",null,17,c.Kc),c.Rb(),c.Rb(),c.Jc(24,QC,14,7,"ng-template",null,18,c.Kc),c.Jc(26,WC,15,7,"ng-template",null,19,c.Kc)),2&e){const e=c.Ac(23);c.zb(2),c.nc("ngIf",!!t.title),c.zb(1),c.nc("ngIf",t.showParametersSection),c.zb(3),c.nc("disabled",!t.canExport),c.zb(3),c.Nc("\xa0\xa0",c.ic(10,15,"Export"),""),c.zb(2),c.nc("ngIf",t.showDataDropdown),c.zb(1),c.nc("ngIf",t.showExportSpinner),c.zb(2),c.oc("title",c.ic(15,17,"Refresh")),c.nc("disabled",t.disableRefresh),c.zb(3),c.nc("ngIf",t.showPagingControls),c.zb(1),c.nc("ngIf",t.showParameters),c.zb(1),c.nc("ngIf",t.showReportViewToggle),c.zb(1),c.Ic("overflow",t.overflow),c.zb(1),c.nc("ngIf",t.showPreview)("ngIfElse",e)}},directives:[C.l,ee.a,C.k,he.a,LC,te.i,te.j,te.m,G.l,G.r,G.p,G.o,fe.a,is],pipes:[K.c,C.d],encapsulation:2}),e})();function YC(e,t){if(1&e&&(c.Sb(0,"div",6),c.Sb(1,"span",7),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb(),c.Sb(4,"div",8),c.Sb(5,"span",7),c.Lc(6),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("ReportDefinition",e,"Title")||c.ic(3,2,"Untitled")),c.zb(4),c.Mc(n.ws.getMultilingualValue("ReportDefinition",e,"Description"))}}function XC(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"ReportDefinition"),"\n")}function ZC(e,t){if(1&e&&(c.Sb(0,"span",9),c.Nb(1,"t-auto-cell",10),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function ex(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"VisibleInMainMenu")," ")}function tx(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"NotVisibleInMainMenu")," ")}const nx=function(){return[]},ix=function(e){return{template:e,expression:"ShowInMainMenu eq true"}},cx=function(e){return{template:e,expression:"ShowInMainMenu eq false"}},ox=function(e,t){return[e,t]},rx=function(e){return{ShowInMainMenu:e}};let sx=(()=>{class e extends xt.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.ReportDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-report-definitions-master"]],features:[c.wb],decls:12,vars:22,consts:[["collection","ReportDefinition","selectDefault","Type,ShowInMainMenu","selectForTiles","Title,Title2,Title3,Description,Description2,Description3","theme","dark",3,"mode","showCreateButton","filterDefault","masterCrumb","additionalSelect","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["visibleInMainMenu",""],["notVisibleInMainMenu",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","ReportDefinition",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,YC,7,4,"ng-template",null,1,c.Kc),c.Jc(4,XC,2,3,"ng-template",null,2,c.Kc),c.Jc(6,ZC,2,1,"ng-template",null,3,c.Kc),c.Jc(8,ex,2,3,"ng-template",null,4,c.Kc),c.Jc(10,tx,2,3,"ng-template",null,5,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("masterCrumb",c.ic(1,10,"ReportDefinitions"))("additionalSelect",t.additionalSelect)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(12,nx))("filterDefinition",c.rc(20,rx,c.sc(17,ox,c.rc(13,ix,o),c.rc(15,cx,r))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();var lx=n("+NbP");function ax(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Nc("",e.options.minDecimalPlaces,"\u200c")}}const ux=function(){return{updateOn:"blur"}};function dx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",6),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).options.minDecimalPlaces=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc(2);c.nc("ngModel",e.options.minDecimalPlaces)("ngModelOptions",c.qc(2,ux))}}function bx(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"label",3),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,ax,2,1,"div",4),c.Jc(5,dx,1,3,"ng-template",null,5,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc();c.zb(2),c.Mc(c.ic(3,3,"ControlOptions_minDecimalPlaces")),c.zb(2),c.nc("ngIf",!t.isEdit)("ngIfElse",e)}}function gx(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Nc("",e.options.maxDecimalPlaces,"\u200c")}}function fx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",9),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).options.maxDecimalPlaces=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc(2);c.nc("ngModel",e.options.maxDecimalPlaces)("ngModelOptions",c.qc(2,ux))}}function mx(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"label",7),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,gx,2,1,"div",4),c.Jc(5,fx,1,3,"ng-template",null,8,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc();c.zb(2),c.Mc(c.ic(3,3,"ControlOptions_maxDecimalPlaces")),c.zb(2),c.nc("ngIf",!t.isEdit)("ngIfElse",e)}}function hx(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Nc("",e.options.prefix,"\u200c")}}function px(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",12),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).options.prefix=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc(2);c.nc("ngModel",e.options.prefix)("ngModelOptions",c.qc(2,ux))}}function Sx(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"label",10),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,hx,2,1,"div",4),c.Jc(5,px,1,3,"ng-template",null,11,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc();c.zb(2),c.Mc(c.ic(3,3,"ControlOptions_prefix")),c.zb(2),c.nc("ngIf",!t.isEdit)("ngIfElse",e)}}function vx(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Nc("",e.options.codeWidth,"\u200c")}}function Ix(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",15),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).options.codeWidth=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc(2);c.nc("ngModel",e.options.codeWidth)("ngModelOptions",c.qc(2,ux))}}function Mx(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"label",13),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,vx,2,1,"div",4),c.Jc(5,Ix,1,3,"ng-template",null,14,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc();c.zb(2),c.Mc(c.ic(3,3,"ControlOptions_codeWidth")),c.zb(2),c.nc("ngIf",!t.isEdit)("ngIfElse",e)}}function Rx(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Nc("",e.options.filter,"\u200c")}}function yx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",18),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).options.filter=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc(2);c.nc("ngModel",e.options.filter)("ngModelOptions",c.qc(2,ux))}}function Dx(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"label",16),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,Rx,2,1,"div",4),c.Jc(5,yx,1,3,"ng-template",null,17,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc();c.zb(2),c.Mc(c.ic(3,3,"ControlOptions_filter")),c.zb(2),c.nc("ngIf",!t.isEdit)("ngIfElse",e)}}function wx(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Nc("",e.definitionIdDisplay(e.options.definitionId),"\u200c")}}function Ex(e,t){if(1&e&&(c.Sb(0,"option",25),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function Cx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",21,22),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).setDefId(t)}),c.Nb(2,"option",23),c.Jc(3,Ex,2,2,"option",24),c.Rb()}if(2&e){const e=c.gc(2);c.nc("ngModel",e.options.definitionId),c.zb(3),c.nc("ngForOf",e.definitionIdOptions)}}function xx(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"label",19),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,wx,2,1,"div",4),c.Jc(5,Cx,4,2,"ng-template",null,20,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc();c.zb(2),c.Mc(c.ic(3,3,"ControlOptions_definitionId")),c.zb(2),c.nc("ngIf",!t.isEdit)("ngIfElse",e)}}function Tx(e,t){1&e&&c.Nb(0,"th",35)}function zx(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Mc(c.ic(2,1,"Name")+e.ws.secondaryPostfix)}}function Lx(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Mc(c.ic(2,1,"Name")+e.ws.ternaryPostfix)}}function kx(e,t){1&e&&c.Nb(0,"th",35)}function Ox(e,t){1&e&&(c.Sb(0,"td",42),c.Lc(1,"\u200c"),c.Rb())}function Ax(e,t){if(1&e&&(c.Sb(0,"div",43),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(2);c.zb(1),c.Nc(" ",t.ws.getMultilingualValueImmediate(e,"name")||e.value,"\u200c")}}function Nx(e,t){1&e&&(c.Sb(0,"td",44),c.Nb(1,"fa-icon",45),c.Rb())}function _x(e,t){if(1&e&&(c.Qb(0),c.Lc(1),c.Pb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Nc(" ",e.value,"")}}function Jx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",46),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.value=t})("ngModelChange",function(){return c.Dc(e),c.gc(3).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc().$implicit;c.nc("ngModel",e.value)("ngModelOptions",c.qc(2,ux))}}function Px(e,t){if(1&e&&(c.Qb(0),c.Lc(1),c.Pb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Nc(" ",e.name,"")}}function Fx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",46),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.name=t})("ngModelChange",function(){return c.Dc(e),c.gc(3).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc().$implicit;c.nc("ngModel",e.name)("ngModelOptions",c.qc(2,ux))}}function Vx(e,t){if(1&e&&(c.Qb(0),c.Lc(1),c.Pb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Nc(" ",e.name2,"")}}function qx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",46),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.name2=t})("ngModelChange",function(){return c.Dc(e),c.gc(4).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc(2).$implicit;c.nc("ngModel",e.name2)("ngModelOptions",c.qc(2,ux))}}function jx(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,Vx,2,1,"ng-container",4),c.Jc(2,qx,1,3,"ng-template",null,47,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(3);c.Eb("p-0",t.isEdit),c.zb(1),c.nc("ngIf",!t.isEdit)("ngIfElse",e)}}function $x(e,t){if(1&e&&(c.Qb(0),c.Lc(1),c.Pb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Nc(" ",e.name3,"")}}function Ux(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",46),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.name3=t})("ngModelChange",function(){return c.Dc(e),c.gc(4).onOptionsChange()}),c.Rb()}if(2&e){const e=c.gc(2).$implicit;c.nc("ngModel",e.name3)("ngModelOptions",c.qc(2,ux))}}function Kx(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,$x,2,1,"ng-container",4),c.Jc(2,Ux,1,3,"ng-template",null,48,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(3);c.Eb("p-0",t.isEdit),c.zb(1),c.nc("ngIf",!t.isEdit)("ngIfElse",e)}}function Bx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td"),c.Sb(1,"button",49),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(2);return n.onDeleteRow(t,n.options.choices)}),c.Nb(2,"fa-icon",50),c.Rb(),c.Rb()}}function Hx(e,t){if(1&e&&(c.Sb(0,"tr",36),c.Jc(1,Ox,2,0,"td",37),c.Jc(2,Ax,2,1,"div",38),c.Jc(3,Nx,2,0,"td",39),c.Sb(4,"td"),c.Jc(5,_x,2,1,"ng-container",4),c.Jc(6,Jx,1,3,"ng-template",null,23,c.Kc),c.Rb(),c.Sb(8,"td"),c.Jc(9,Px,2,1,"ng-container",4),c.Jc(10,Fx,1,3,"ng-template",null,40,c.Kc),c.Rb(),c.Jc(12,jx,4,4,"td",41),c.Jc(13,Kx,4,4,"td",41),c.Jc(14,Bx,3,0,"td",30),c.Rb()),2&e){const e=c.Ac(7),t=c.Ac(11),n=c.gc(2);c.zb(3),c.nc("ngIf",n.isEdit),c.zb(1),c.Eb("p-0",n.isEdit),c.zb(1),c.nc("ngIf",!n.isEdit)("ngIfElse",e),c.zb(3),c.Eb("p-0",n.isEdit),c.zb(1),c.nc("ngIf",!n.isEdit)("ngIfElse",t),c.zb(3),c.nc("ngIf",n.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",n.ws.settings.TernaryLanguageId),c.zb(1),c.nc("ngIf",n.isEdit)}}function Qx(e,t){1&e&&(c.Sb(0,"div",51),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function Wx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",52),c.cc("click",function(){return c.Dc(e),c.gc(2).onInsertChoice()}),c.Nb(1,"fa-icon",53),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}const Gx=function(){return[]};function Yx(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",26),c.Sb(1,"label",10),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"table",27),c.Sb(5,"thead",28),c.Sb(6,"tr"),c.Jc(7,Tx,1,0,"th",29),c.Sb(8,"th"),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Sb(11,"th"),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Jc(14,zx,3,3,"th",30),c.Jc(15,Lx,3,3,"th",30),c.Jc(16,kx,1,0,"th",29),c.Rb(),c.Rb(),c.Sb(17,"tbody",31),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc();return n.rowDrop(t,n.options.choices)}),c.Jc(18,Hx,15,12,"tr",32),c.Rb(),c.Rb(),c.Jc(19,Qx,3,3,"div",33),c.Jc(20,Wx,4,3,"button",34),c.Rb()}if(2&e){const e=c.gc();c.zb(2),c.Mc(c.ic(3,11,"ControlOptions_choices")),c.zb(5),c.nc("ngIf",e.isEdit),c.zb(2),c.Mc(c.ic(10,13,"ControlOptions_value")),c.zb(3),c.Mc(c.ic(13,15,"Name")+e.ws.primaryPostfix),c.zb(2),c.nc("ngIf",e.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",e.ws.settings.TernaryLanguageId),c.zb(1),c.nc("ngIf",e.isEdit),c.zb(1),c.nc("cdkDropListDisabled",!e.isEdit),c.zb(1),c.nc("ngForOf",e.options.choices||c.qc(17,Gx)),c.zb(1),c.nc("ngIf",!(e.isEdit||null!=e.options.choices&&e.options.choices.length)),c.zb(1),c.nc("ngIf",e.isEdit)}}let Xx=(()=>{class e{constructor(e){this.workspace=e,this.classValue="row m-0",this.options={},this.isDisabled=!1,this.onChangeFn=e=>{},this.onTouchedFn=()=>{}}ngOnChanges(e){}get ws(){return this.workspace.currentTenant}writeValue(e){if(this.optionsJSON=e,e)try{this.options=JSON.parse(e)}catch(t){console.error("Failed to parse ControlOptions JSON",t),this.options={}}else this.options={}}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e}onOptionsChange(){for(const e of Object.keys(this.options))Object(V.n)(this.options[e])&&0!==this.options[e].length||delete this.options[e];this.onTouchedFn(),this.optionsJSON=JSON.stringify(this.options),this.onChangeFn("{}"===this.optionsJSON?void 0:this.optionsJSON)}get showDecimalPlaces(){return"number"===this.control||"percent"===this.control}get showPrefix(){return"serial"===this.control}get showCodeWidth(){return"serial"===this.control}definitionIdDisplay(e){const t=this.ws,n=t.definitions;switch(this.control){case"Document":return t.getMultilingualValueImmediate(n.Documents[e],"TitleSingular");case"Resource":return t.getMultilingualValueImmediate(n.Resources[e],"TitleSingular");case"Relation":return t.getMultilingualValueImmediate(n.Relations[e],"TitleSingular");case"Lookup":return t.getMultilingualValueImmediate(n.Lookups[e],"TitleSingular");default:return e}}get definitionIdOptions(){const e=this.ws,t=e.definitions,n=this.control;if(this._definitionIdOptionsDefs!==t||this._definitionIdOptionsControl!==n){let i;switch(this._definitionIdOptionsDefs=t,this._definitionIdOptionsControl=n,n){case"Document":i=Object.keys(t.Documents).map(n=>{const i=t.Documents[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;case"Resource":i=Object.keys(t.Resources).map(n=>{const i=t.Resources[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;case"Relation":i=Object.keys(t.Relations).map(n=>{const i=t.Relations[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;case"Lookup":i=Object.keys(t.Lookups).map(n=>{const i=t.Lookups[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;default:i=[]}this._definitionIdOptionsResult=i}return this._definitionIdOptionsResult}setDefId(e){e?this.options.definitionId=+e:delete this.options.definitionId,this.onOptionsChange()}get showDefinitionId(){switch(this.control){case"Document":case"Resource":case"Relation":case"Lookup":return!0}return!1}get showFilter(){return!!this.control&&!!Mi.h[this.control]}get showChoices(){return"choice"===this.control}rowDrop(e,t){Object(j.h)(t,e.previousIndex,e.currentIndex),this.onOptionsChange()}onDeleteRow(e,t){const n=t.indexOf(e);n>=0&&t.splice(n,1),this.onOptionsChange()}onInsertRow(e,t){const n=t?t():{};e.push(n),this.onOptionsChange()}onInsertChoice(){this.options.choices=this.options.choices||[],this.onInsertRow(this.options.choices)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-control-options"]],hostVars:2,hostBindings:function(e,t){2&e&&c.Bb(t.classValue)},inputs:{control:"control",isEdit:"isEdit"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.xb],decls:7,vars:7,consts:[["class","form-group col-12 col-sm-6 t-text-whitish",4,"ngIf"],["class","form-group t-wide-form-group t-text-whitish",4,"ngIf"],[1,"form-group","col-12","col-sm-6","t-text-whitish"],["for","mindecimalplaces",1,"small"],[4,"ngIf","ngIfElse"],["mindecimalplaces",""],["id","mindecimalplaces","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","maxdecimalplaces",1,"small"],["maxdecimalplaces",""],["id","maxdecimalplaces","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","prefix",1,"small"],["prefix",""],["id","prefix","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","codewidth",1,"small"],["codewidth",""],["id","codewidth","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","filter",1,"small"],["filter",""],["id","filter","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","definitionid",1,"small"],["definitionid",""],["id","definitionid",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionid","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-group","t-wide-form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[1,"small","font-weight-normal"],["style","width: 1px;",4,"ngIf"],[4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","font-italic mx-2",4,"ngIf"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal",3,"click",4,"ngIf"],[2,"width","1px"],["cdkDrag","","cdkDragLockAxis","y"],["colspan","1000",4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","","class","px-2","style","cursor: move;",4,"ngIf"],["name",""],[3,"p-0",4,"ngIf"],["colspan","1000"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name2",""],["name3",""],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],[1,"font-italic","mx-2"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],["icon","plus"]],template:function(e,t){1&e&&(c.Jc(0,bx,7,5,"div",0),c.Jc(1,mx,7,5,"div",0),c.Jc(2,Sx,7,5,"div",0),c.Jc(3,Mx,7,5,"div",0),c.Jc(4,Dx,7,5,"div",0),c.Jc(5,xx,7,5,"div",0),c.Jc(6,Yx,21,18,"div",1)),2&e&&(c.nc("ngIf",t.showDecimalPlaces),c.zb(1),c.nc("ngIf",t.showDecimalPlaces),c.zb(1),c.nc("ngIf",t.showPrefix),c.zb(1),c.nc("ngIf",t.showCodeWidth),c.zb(1),c.nc("ngIf",t.showFilter),c.zb(1),c.nc("ngIf",t.showDefinitionId),c.zb(1),c.nc("ngIf",t.showChoices))},directives:[C.l,te.l,te.c,te.i,te.j,te.n,te.k,te.o,C.k,j.f,j.b,j.d,j.e,j.c,ee.a],pipes:[K.c],encapsulation:2}),e})();const Zx=["dimensionConfigModal"],eT=["measureConfigModal"],tT=["selectConfigModal"],nT=["paramConfigModal"],iT=["totalLabelsModal"];function cT(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Title",n.ws)||c.ic(2,1,"Untitled"))}}function oT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",92),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleFields()}),c.Sb(1,"div",93),c.Nb(2,"fa-icon",94),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.nc("flip",e.flipIcon(!1)),c.zb(2),c.Mc(c.ic(5,2,"Fields"))}}function rT(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function sT(e,t){1&e&&c.Ob(0)}function lT(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function aT(e,t){1&e&&c.Ob(0)}const uT=function(e,t){return{control:e,serverErrors:t}};function dT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",96),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"select",97,98),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.DefinitionId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionIdChange(t)}),c.Nb(6,"option",99),c.Jc(7,lT,2,2,"option",21),c.Rb(),c.Jc(8,aT,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.DefinitionId)),c.zb(2),c.Mc(c.ic(3,7,"ReportDefinition_DefinitionId")),c.zb(2),c.nc("ngModel",t.DefinitionId),c.zb(3),c.nc("ngForOf",n.allDefinitionIds(t)),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(9,uT,e,null==t.serverErrors?null:t.serverErrors.DefinitionId))}}function bT(e,t){1&e&&(c.Sb(0,"div",105),c.Lc(1," \xa0 "),c.Rb())}function gT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",100),c.cc("dblclick",function(){c.Dc(e);const n=t.$implicit;return c.gc(3).copyPathToClipboard(n.path)}),c.Sb(1,"div",101),c.Sb(2,"div",102),c.Sb(3,"button",103),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.index,o=c.gc(2).model;return c.gc().onExpand(n,i,o)}),c.Nb(4,"fa-icon",30),c.Rb(),c.Sb(5,"span",48),c.Lc(6),c.Rb(),c.Rb(),c.Jc(7,bT,2,0,"div",104),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(1),c.Eb("d-none",!n.showTreeNode(e)),c.zb(1),c.Ic("padding-left",n.paddingLeft(e))("padding-right",n.paddingRight(e)),c.zb(1),c.Ic("opacity",n.hasChildren(e)?1:0)("cursor",n.hasChildren(e)?null:"inherit"),c.nc("disabled",!n.hasChildren(e)),c.zb(1),c.nc("flip",n.flipNode(e))("rotate",n.rotateNode(e)),c.zb(2),c.Mc(e.desc.label())}}function fT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",92),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleDefinition()}),c.Sb(1,"div",93),c.Nb(2,"fa-icon",94),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.nc("flip",e.flipIcon(!1)),c.zb(2),c.Mc(c.ic(5,2,"Definition"))}}function mT(e,t){1&e&&c.Nb(0,"fa-icon",106)}function hT(e,t){1&e&&c.Ob(0)}function pT(e,t){1&e&&c.Ob(0)}function ST(e,t){1&e&&c.Ob(0)}function vT(e,t){1&e&&c.Ob(0)}const IT=function(){return{updateOn:"blur"}};function MT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",107),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",108,109),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Title2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Title2")}),c.Rb(),c.Jc(6,vT,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Title2)),c.zb(2),c.Mc(c.ic(3,7,"Title")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.Title2)("ngModelOptions",c.qc(9,IT)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,uT,e,null==t.serverErrors?null:t.serverErrors.Title2))}}function RT(e,t){1&e&&c.Ob(0)}function yT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",110),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"textarea",111,112),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Description2")}),c.Rb(),c.Jc(6,RT,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description2)),c.zb(2),c.Mc(c.ic(3,7,"Description")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.Description2)("ngModelOptions",c.qc(9,IT)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,uT,e,null==t.serverErrors?null:t.serverErrors.Description2))}}function DT(e,t){1&e&&c.Ob(0)}function wT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",113),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",114,115),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Title3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Title3")}),c.Rb(),c.Jc(6,DT,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Title3)),c.zb(2),c.Mc(c.ic(3,7,"Title")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.Title3)("ngModelOptions",c.qc(9,IT)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,uT,e,null==t.serverErrors?null:t.serverErrors.Title3))}}function ET(e,t){1&e&&c.Ob(0)}function CT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",116),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"textarea",117,118),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Description3")}),c.Rb(),c.Jc(6,ET,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description3)),c.zb(2),c.Mc(c.ic(3,7,"Description")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.Description3)("ngModelOptions",c.qc(9,IT)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,uT,e,null==t.serverErrors?null:t.serverErrors.Description3))}}function xT(e,t){1&e&&c.Nb(0,"fa-icon",106)}function TT(e,t){1&e&&(c.Sb(0,"div",119),c.Sb(1,"span",120),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Mc(c.ic(3,1,"DragFieldsHere")))}function zT(e,t){1&e&&c.Nb(0,"fa-icon",106)}function LT(e,t){1&e&&(c.Sb(0,"div",127),c.Lc(1," \u200c "),c.Rb())}function kT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",121),c.Sb(1,"div",122),c.Jc(2,zT,1,0,"fa-icon",31),c.Sb(3,"span",123),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb(),c.Sb(6,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureRow(n,i)}),c.hc(7,"translate"),c.Nb(8,"fa-icon",124),c.Rb(),c.Lc(9," \xa0 "),c.Sb(10,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteRow(n,i)}),c.hc(11,"translate"),c.Nb(12,"fa-icon",125),c.Rb(),c.Rb(),c.Jc(13,LT,2,0,"div",126),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.dimensionErrors(e)),c.zb(3),c.Nc(" ",e.KeyExpression," "),c.zb(1),c.nc("title",c.ic(7,4,"Configure")),c.zb(4),c.nc("title",c.ic(11,6,"Delete"))}}function OT(e,t){1&e&&(c.Sb(0,"div",119),c.Sb(1,"span",120),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Mc(c.ic(3,1,"DragFieldsHere")))}function AT(e,t){1&e&&c.Nb(0,"fa-icon",106)}function NT(e,t){1&e&&(c.Sb(0,"div",127),c.Lc(1," \u200c "),c.Rb())}function _T(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",121),c.Sb(1,"div",122),c.Jc(2,AT,1,0,"fa-icon",31),c.Sb(3,"span",123),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb(),c.Sb(6,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureColumn(n,i)}),c.hc(7,"translate"),c.Nb(8,"fa-icon",124),c.Rb(),c.Lc(9," \xa0 "),c.Sb(10,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteColumn(n,i)}),c.hc(11,"translate"),c.Nb(12,"fa-icon",125),c.Rb(),c.Rb(),c.Jc(13,NT,2,0,"div",126),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.dimensionErrors(e)),c.zb(3),c.Nc(" ",e.KeyExpression," "),c.zb(1),c.nc("title",c.ic(7,4,"Configure")),c.zb(4),c.nc("title",c.ic(11,6,"Delete"))}}function JT(e,t){1&e&&(c.Sb(0,"div",119),c.Sb(1,"span",120),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Mc(c.ic(3,1,"DragFieldsHere")))}function PT(e,t){1&e&&c.Nb(0,"fa-icon",106)}function FT(e,t){1&e&&(c.Sb(0,"div",127),c.Lc(1," \u200c "),c.Rb())}function VT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",121),c.Sb(1,"div",122),c.Jc(2,PT,1,0,"fa-icon",31),c.Sb(3,"span",123),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb(),c.Sb(6,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureMeasure(n,i)}),c.hc(7,"translate"),c.Nb(8,"fa-icon",124),c.Rb(),c.Lc(9," \xa0 "),c.Sb(10,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteMeasure(n,i)}),c.hc(11,"translate"),c.Nb(12,"fa-icon",125),c.Rb(),c.Rb(),c.Jc(13,FT,2,0,"div",126),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(3),c.Nc(" ",e.Expression," "),c.zb(1),c.nc("title",c.ic(7,4,"Configure")),c.zb(4),c.nc("title",c.ic(11,6,"Delete"))}}function qT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",71),c.Sb(1,"input",128),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ShowColumnsTotal=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(2,"label",129),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(1),c.nc("ngModel",e.ShowColumnsTotal),c.zb(2),c.Mc(c.ic(4,2,"ReportDefinition_ShowColumnsTotal"))}}function jT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",71),c.Sb(1,"input",130),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ShowRowsTotal=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(2,"label",131),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(1),c.nc("ngModel",e.ShowRowsTotal),c.zb(2),c.Mc(c.ic(4,2,"ReportDefinition_ShowRowsTotal"))}}function $T(e,t){1&e&&c.Nb(0,"fa-icon",106)}function UT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",132),c.Sb(1,"button",133),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onConfigureTotalLabels(t)}),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,$T,1,0,"fa-icon",31),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.Nc("",c.ic(3,2,"CustomizeLabels"),"..."),c.zb(2),c.nc("ngIf",t.customizeLabelsErrors(e))}}function KT(e,t){1&e&&(c.Sb(0,"div",119),c.Sb(1,"span",120),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Mc(c.ic(3,1,"DragFieldsHere")))}function BT(e,t){1&e&&c.Nb(0,"fa-icon",106)}function HT(e,t){1&e&&(c.Sb(0,"div",127),c.Lc(1," \u200c "),c.Rb())}function QT(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",121),c.Sb(1,"div",122),c.Jc(2,BT,1,0,"fa-icon",31),c.Sb(3,"span",123),c.Lc(4),c.Rb(),c.Sb(5,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureSelect(n,i)}),c.hc(6,"translate"),c.Nb(7,"fa-icon",124),c.Rb(),c.Lc(8," \xa0 "),c.Sb(9,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteSelect(n,i)}),c.hc(10,"translate"),c.Nb(11,"fa-icon",125),c.Rb(),c.Rb(),c.Jc(12,HT,2,0,"div",126),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(2),c.Nc(" ",e.Expression," "),c.zb(1),c.nc("title",c.ic(6,4,"Configure")),c.zb(4),c.nc("title",c.ic(10,6,"Delete"))}}function WT(e,t){1&e&&c.Ob(0)}function GT(e,t){1&e&&c.Ob(0)}function YT(e,t){1&e&&c.Nb(0,"fa-icon",106)}function XT(e,t){1&e&&c.Ob(0)}function ZT(e,t){1&e&&c.Ob(0)}function ez(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",134),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"textarea",135,136),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Having=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onHavingChanged(t)}),c.hc(6,"translate"),c.Rb(),c.Jc(7,ZT,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Having)),c.zb(2),c.Mc(c.ic(3,8,"ReportDefinition_Having")),c.zb(2),c.nc("ngModel",t.Having)("ngModelOptions",c.qc(12,IT))("placeholder",c.ic(6,10,"Expression")),c.zb(3),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(13,uT,e,null==t.serverErrors?null:t.serverErrors.Having))}}function tz(e,t){1&e&&c.Nb(0,"fa-icon",106)}function nz(e,t){1&e&&(c.Sb(0,"div",127),c.Lc(1," \u200c "),c.Rb())}function iz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",121),c.Sb(1,"div",122),c.Jc(2,tz,1,0,"fa-icon",31),c.Sb(3,"span",123),c.Lc(4),c.Rb(),c.Sb(5,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(3).model;return c.gc().onConfigureParameter(n,i)}),c.hc(6,"translate"),c.Nb(7,"fa-icon",124),c.Rb(),c.Rb(),c.Jc(8,nz,2,0,"div",126),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(4);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(2),c.Nc(" ","@"+e.Key," "),c.zb(1),c.nc("title",c.ic(6,3,"Configure"))}}function cz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",48),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"div",137),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc(2).model;return c.gc().drop(t,n)}),c.Jc(5,iz,9,5,"div",54),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.Mc(c.ic(3,3,"ReportDefinition_Parameters")),c.zb(2),c.nc("cdkDropListData",t.getParameters(e)),c.zb(1),c.nc("ngForOf",t.getParameters(e))}}function oz(e,t){1&e&&c.Nb(0,"fa-icon",106)}function rz(e,t){1&e&&(c.Sb(0,"div",119),c.Sb(1,"span",120),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Mc(c.ic(3,1,"DragFieldsHere")))}function sz(e,t){1&e&&c.Nb(0,"fa-icon",106)}function lz(e,t){1&e&&(c.Sb(0,"div",127),c.Lc(1," \u200c "),c.Rb())}function az(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",121),c.Sb(1,"div",122),c.Jc(2,sz,1,0,"fa-icon",31),c.Sb(3,"span",123),c.Lc(4),c.Rb(),c.Sb(5,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureSelect(n,i)}),c.hc(6,"translate"),c.Nb(7,"fa-icon",124),c.Rb(),c.Lc(8," \xa0 "),c.Sb(9,"button",49),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteSelect(n,i)}),c.hc(10,"translate"),c.Nb(11,"fa-icon",125),c.Rb(),c.Rb(),c.Jc(12,lz,2,0,"div",126),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(2),c.Nc(" ",e.Expression," "),c.zb(1),c.nc("title",c.ic(6,4,"Configure")),c.zb(4),c.nc("title",c.ic(10,6,"Delete"))}}function uz(e,t){1&e&&c.Ob(0)}function dz(e,t){1&e&&c.Nb(0,"fa-icon",106)}function bz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",29),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleSection("Chart")}),c.Lc(1," \xa0 "),c.Nb(2,"fa-icon",30),c.Lc(3),c.hc(4,"translate"),c.Jc(5,dz,1,0,"fa-icon",31),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("flip",t.flipIcon(t.showSection("Chart")))("rotate",t.rotateIcon(t.showSection("Chart"))),c.zb(1),c.Nc(" \xa0 ",c.ic(4,4,"Chart")," "),c.zb(2),c.nc("ngIf",t.chartSectionErrors(e))}}function gz(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function fz(e,t){1&e&&c.Ob(0)}function mz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",71),c.Sb(1,"input",141),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.DefaultsToChart=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onDefinitionChange(t,"DefaultsToChart")}),c.Rb(),c.Sb(2,"label",142),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3).model;c.zb(1),c.nc("ngModel",e.DefaultsToChart),c.zb(2),c.Mc(c.ic(4,2,"ReportDefinition_DefaultsToChart"))}}function hz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",32),c.Sb(1,"div",17),c.Sb(2,"label",138),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"select",139,140),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).model;return c.gc().onChartChange(t,n)}),c.Nb(7,"option",99),c.Jc(8,gz,2,2,"option",21),c.Rb(),c.Jc(9,fz,1,0,"ng-container",22),c.Rb(),c.Jc(10,mz,5,4,"div",57),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("d-none",!n.showSection("Chart")),c.zb(1),c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Chart)),c.zb(2),c.Mc(c.ic(4,10,"ReportDefinition_Chart")),c.zb(2),c.nc("ngModel",t.Chart),c.zb(3),c.nc("ngForOf",n.allCharts),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(12,uT,e,null==t.serverErrors?null:t.serverErrors.Chart)),c.zb(1),c.nc("ngIf",!!t.Chart)}}function pz(e,t){1&e&&c.Nb(0,"fa-icon",106)}function Sz(e,t){1&e&&c.Ob(0)}function vz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr"),c.Sb(1,"td",147),c.Sb(2,"t-roles-picker",148,149),c.cc("ngModelChange",function(e){return t.$implicit.RoleId=e}),c.Rb(),c.Jc(4,Sz,1,0,"ng-container",22),c.Rb(),c.Sb(5,"td"),c.Sb(6,"button",150),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(3).model;return c.gc().onDeleteRole(i,n)}),c.Nb(7,"fa-icon",151),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.Ac(3);c.gc(4);const i=c.Ac(7);c.zb(2),c.nc("ngModel",e.RoleId)("showCreate",!1),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,uT,n,null==e||null==e.serverErrors?null:e.serverErrors.Key))}}function Iz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",143),c.Sb(1,"label",48),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"table",144),c.Sb(5,"tbody"),c.Jc(6,vz,8,7,"tr",145),c.Rb(),c.Rb(),c.Sb(7,"button",146),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onInsertRole(t)}),c.Nb(8,"fa-icon",50),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(2),c.Mc(c.ic(3,3,"ForMembersOfRoles")),c.zb(4),c.nc("ngForOf",e.Roles),c.zb(3),c.Nc("\xa0\xa0",c.ic(10,5,"Add")," ")}}function Mz(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function Rz(e,t){1&e&&c.Ob(0)}function yz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",161),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=c.gc(3).model;return c.gc().onIconClick(i,n)}),c.Nb(1,"fa-icon",162),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3).model;c.Eb("t-highlighted",e.value===n.MainMenuIcon),c.nc("title",e.value),c.zb(1),c.nc("icon",e.value)}}function Dz(e,t){1&e&&c.Ob(0)}function wz(e,t){1&e&&c.Ob(0)}const Ez=function(e){return{control:null,serverErrors:e}};function Cz(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",17),c.Sb(2,"label",152),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"select",153,154),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.MainMenuSection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"MainMenuSection")}),c.Nb(7,"option",99),c.Jc(8,Mz,2,2,"option",21),c.Rb(),c.Jc(9,Rz,1,0,"ng-container",22),c.Rb(),c.Sb(10,"div",17),c.Sb(11,"label",155),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Sb(14,"div",156),c.Jc(15,yz,2,4,"div",157),c.Rb(),c.Jc(16,Dz,1,0,"ng-container",22),c.Rb(),c.Sb(17,"div",17),c.Sb(18,"label",158),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Sb(21,"input",159,160),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.MainMenuSortKey=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"MainMenuSortKey")}),c.Rb(),c.Jc(23,wz,1,0,"ng-container",22),c.Rb(),c.Pb()}if(2&e){const e=c.Ac(6),t=c.Ac(22),n=c.gc(2).model,i=c.gc(),o=c.Ac(7);c.zb(3),c.Mc(c.ic(4,14,"MainMenuSection")),c.zb(2),c.nc("ngModel",n.MainMenuSection),c.zb(3),c.nc("ngForOf",i.allMainMenuSections),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(20,uT,e,null==n.serverErrors?null:n.serverErrors.MainMenuSection)),c.zb(3),c.Mc(c.ic(13,16,"MainMenuIcon")),c.zb(3),c.nc("ngForOf",i.allMainMenuIcons),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.rc(23,Ez,null==n.serverErrors?null:n.serverErrors.MainMenuIcon)),c.zb(3),c.Mc(c.ic(20,18,"MainMenuSortKey")),c.zb(2),c.nc("ngModel",n.MainMenuSortKey)("ngModelOptions",c.qc(25,IT)),c.zb(2),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(26,uT,t,null==n.serverErrors?null:n.serverErrors.MainMenuSortKey))}}function xz(e,t){1&e&&(c.Sb(0,"div",163),c.Sb(1,"div",164),c.Sb(2,"span"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.zb(3),c.Mc(c.ic(4,1,"Preview")))}const Tz=function(e,t,n,i,c){return[e,t,n,i,c]},zz=function(e,t,n){return[e,t,n]},Lz=function(e){return[e]};function kz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",10),c.Jc(1,oT,6,4,"div",11),c.Sb(2,"div",12),c.Sb(3,"div",13),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleFields()}),c.Sb(4,"span"),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Sb(7,"div",14),c.Nb(8,"fa-icon",15),c.Rb(),c.Rb(),c.Sb(9,"div",16),c.Sb(10,"div",17),c.Sb(11,"label",18),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Sb(14,"select",19,20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Collection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCollectionChange(t)}),c.Jc(16,rT,2,2,"option",21),c.Rb(),c.Jc(17,sT,1,0,"ng-container",22),c.Rb(),c.Jc(18,dT,9,12,"div",23),c.Nb(19,"hr"),c.Sb(20,"div",17),c.Sb(21,"input",24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).search=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onSearchChanged(t)}),c.hc(22,"translate"),c.Rb(),c.Rb(),c.Sb(23,"div",25,26),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().drop(t,n)}),c.Jc(25,gT,8,14,"div",27),c.Rb(),c.Rb(),c.Rb(),c.Jc(26,fT,6,4,"div",11),c.Sb(27,"div",12),c.Sb(28,"div",13),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleDefinition()}),c.Sb(29,"span"),c.Lc(30),c.hc(31,"translate"),c.Rb(),c.Sb(32,"div",14),c.Nb(33,"fa-icon",15),c.Rb(),c.Rb(),c.Sb(34,"div",28),c.Sb(35,"div",29),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Title")}),c.Lc(36," \xa0 "),c.Nb(37,"fa-icon",30),c.Lc(38),c.hc(39,"translate"),c.Jc(40,mT,1,0,"fa-icon",31),c.Rb(),c.Sb(41,"div",32),c.Sb(42,"div",17),c.Sb(43,"label",33),c.Lc(44),c.hc(45,"translate"),c.Rb(),c.Sb(46,"input",34,35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Code")}),c.Rb(),c.Jc(48,hT,1,0,"ng-container",22),c.Rb(),c.Sb(49,"div",17),c.Sb(50,"label",36),c.Lc(51),c.hc(52,"translate"),c.Rb(),c.Sb(53,"input",37,38),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Title=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Title")}),c.Rb(),c.Jc(55,pT,1,0,"ng-container",22),c.Rb(),c.Sb(56,"div",17),c.Sb(57,"label",39),c.Lc(58),c.hc(59,"translate"),c.Rb(),c.Sb(60,"textarea",40,41),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Description=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Description")}),c.Rb(),c.Jc(62,ST,1,0,"ng-container",22),c.Rb(),c.Jc(63,MT,7,13,"div",23),c.Jc(64,yT,7,13,"div",23),c.Jc(65,wT,7,13,"div",23),c.Jc(66,CT,7,13,"div",23),c.Rb(),c.Sb(67,"div",29),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Data")}),c.Lc(68," \xa0 "),c.Nb(69,"fa-icon",30),c.Lc(70),c.hc(71,"translate"),c.Jc(72,xT,1,0,"fa-icon",31),c.Rb(),c.Sb(73,"div",32),c.Sb(74,"div",17),c.Sb(75,"label",42),c.Lc(76),c.hc(77,"translate"),c.Rb(),c.Sb(78,"div",43),c.Sb(79,"input",44),c.cc("change",function(){c.Dc(e);const t=c.gc().model,n=c.gc();return t.Type="Summary",n.onDefinitionChange(t)}),c.Rb(),c.Sb(80,"label",45),c.Lc(81),c.hc(82,"translate"),c.Rb(),c.Rb(),c.Lc(83," \xa0\xa0 "),c.Sb(84,"div",43),c.Sb(85,"input",46),c.cc("change",function(){c.Dc(e);const t=c.gc().model,n=c.gc();return t.Type="Details",n.onDefinitionChange(t)}),c.Rb(),c.Sb(86,"label",47),c.Lc(87),c.hc(88,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Sb(89,"div"),c.Sb(90,"div",17),c.Sb(91,"label",48),c.Lc(92),c.hc(93,"translate"),c.Rb(),c.Lc(94,"\xa0 "),c.Sb(95,"button",49),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateRow(t)}),c.hc(96,"translate"),c.Nb(97,"fa-icon",50),c.Rb(),c.Sb(98,"div",51,52),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().drop(t,n)}),c.Jc(100,TT,4,3,"div",53),c.Jc(101,kT,14,8,"div",54),c.Rb(),c.Rb(),c.Sb(102,"div",17),c.Sb(103,"label",48),c.Lc(104),c.hc(105,"translate"),c.Rb(),c.Lc(106,"\xa0 "),c.Sb(107,"button",49),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateColumn(t)}),c.hc(108,"translate"),c.Nb(109,"fa-icon",50),c.Rb(),c.Sb(110,"div",51,55),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().drop(t,n)}),c.Jc(112,OT,4,3,"div",53),c.Jc(113,_T,14,8,"div",54),c.Rb(),c.Rb(),c.Sb(114,"div",17),c.Sb(115,"label",48),c.Lc(116),c.hc(117,"translate"),c.Rb(),c.Lc(118,"\xa0 "),c.Sb(119,"button",49),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateMeasure(t)}),c.hc(120,"translate"),c.Nb(121,"fa-icon",50),c.Rb(),c.Sb(122,"div",51,56),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().drop(t,n)}),c.Jc(124,JT,4,3,"div",53),c.Jc(125,VT,14,8,"div",54),c.Rb(),c.Rb(),c.Jc(126,qT,5,4,"div",57),c.Jc(127,jT,5,4,"div",57),c.Jc(128,UT,5,4,"div",58),c.Rb(),c.Sb(129,"div"),c.Sb(130,"div",17),c.Sb(131,"label",48),c.Lc(132),c.hc(133,"translate"),c.Rb(),c.Lc(134,"\xa0 "),c.Sb(135,"button",49),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateSelect(t)}),c.hc(136,"translate"),c.Nb(137,"fa-icon",50),c.Rb(),c.Sb(138,"div",59,60),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().drop(t,n)}),c.Jc(140,KT,4,3,"div",53),c.Jc(141,QT,13,8,"div",54),c.Rb(),c.Rb(),c.Sb(142,"div",17),c.Sb(143,"label",61),c.Lc(144),c.hc(145,"translate"),c.Rb(),c.Sb(146,"input",62,63),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.OrderBy=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(148,WT,1,0,"ng-container",22),c.Rb(),c.Sb(149,"div",17),c.Sb(150,"label",64),c.Lc(151),c.hc(152,"translate"),c.Rb(),c.Sb(153,"input",65,66),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Top=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(155,GT,1,0,"ng-container",22),c.Rb(),c.Rb(),c.Rb(),c.Sb(156,"div",29),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Filter")}),c.Lc(157," \xa0 "),c.Nb(158,"fa-icon",30),c.Lc(159),c.hc(160,"translate"),c.Jc(161,YT,1,0,"fa-icon",31),c.Rb(),c.Sb(162,"div",32),c.Sb(163,"div",17),c.Sb(164,"label",67),c.Lc(165),c.hc(166,"translate"),c.Rb(),c.Sb(167,"textarea",68,69),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Filter=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onFilterChanged(t)}),c.hc(169,"translate"),c.Rb(),c.Jc(170,XT,1,0,"ng-container",22),c.Rb(),c.Jc(171,ez,8,16,"div",23),c.Jc(172,cz,6,5,"div",70),c.Rb(),c.Sb(173,"div"),c.Sb(174,"div",29),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Drilldown")}),c.Lc(175," \xa0 "),c.Nb(176,"fa-icon",30),c.Lc(177),c.hc(178,"translate"),c.Jc(179,oz,1,0,"fa-icon",31),c.Rb(),c.Sb(180,"div",32),c.Sb(181,"div",71),c.Sb(182,"input",72),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.IsCustomDrilldown=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(183,"label",73),c.Lc(184),c.hc(185,"translate"),c.Rb(),c.Rb(),c.Sb(186,"div",74),c.Sb(187,"div",17),c.Sb(188,"label",48),c.Lc(189),c.hc(190,"translate"),c.Rb(),c.Lc(191,"\xa0 "),c.Sb(192,"button",49),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateSelect(t)}),c.hc(193,"translate"),c.Nb(194,"fa-icon",50),c.Rb(),c.Sb(195,"div",59,75),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().drop(t,n)}),c.Jc(197,rz,4,3,"div",53),c.Jc(198,az,13,8,"div",54),c.Rb(),c.Rb(),c.Sb(199,"div",17),c.Sb(200,"label",76),c.Lc(201),c.hc(202,"translate"),c.Rb(),c.Sb(203,"input",77,63),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.OrderBy=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onOrderByChanged(t)}),c.Rb(),c.Jc(205,uz,1,0,"ng-container",22),c.Rb(),c.Sb(206,"div",71),c.Sb(207,"input",78),c.cc("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().togglePreviewDrilldown(t)})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(208,"label",79),c.Lc(209),c.hc(210,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Jc(211,bz,6,6,"div",80),c.Jc(212,hz,11,15,"div",81),c.Sb(213,"div",29),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("MainMenu")}),c.Lc(214," \xa0 "),c.Nb(215,"fa-icon",30),c.Lc(216),c.hc(217,"translate"),c.Jc(218,pz,1,0,"fa-icon",31),c.Rb(),c.Sb(219,"div",32),c.Sb(220,"div",82),c.Sb(221,"input",83),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ShowInMainMenu=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"ShowInMainMenu")}),c.Rb(),c.Sb(222,"label",84),c.Lc(223),c.hc(224,"translate"),c.Rb(),c.Rb(),c.Jc(225,Iz,11,7,"div",85),c.Jc(226,Cz,24,29,"ng-container",86),c.Rb(),c.Rb(),c.Rb(),c.Sb(227,"div",87),c.Jc(228,xz,5,3,"div",88),c.Sb(229,"div",89),c.Sb(230,"div",90),c.Nb(231,"t-report",91),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(15),t=c.Ac(24),n=c.Ac(47),i=c.Ac(54),o=c.Ac(61),r=c.Ac(99),s=c.Ac(111),l=c.Ac(123),a=c.Ac(139),u=c.Ac(147),d=c.Ac(154),b=c.Ac(168),g=c.Ac(196),f=c.gc(),m=f.isEdit,h=f.model,p=c.gc(),S=c.Ac(7);c.zb(1),c.nc("ngIf",m&&p.collapseFields),c.zb(1),c.Eb("d-flex",m&&!p.collapseFields)("d-none",!m||p.collapseFields),c.zb(3),c.Mc(c.ic(6,173,"Fields")),c.zb(3),c.nc("flip",p.flipIcon(!1)),c.zb(2),c.Eb("is-invalid",p.invalid(e,null==h.serverErrors?null:h.serverErrors.Collection)),c.zb(2),c.Mc(c.ic(13,175,"ReportDefinition_Collection")),c.zb(2),c.nc("ngModel",h.Collection),c.zb(2),c.nc("ngForOf",p.allCollections),c.zb(1),c.nc("ngTemplateOutlet",S)("ngTemplateOutletContext",c.sc(239,uT,e,null==h.serverErrors?null:h.serverErrors.Collection)),c.zb(1),c.nc("ngIf",p.showDefinitionIdSelector(h)),c.zb(3),c.nc("ngModel",p.search)("placeholder",c.ic(22,177,"Search")+"..."),c.zb(2),c.nc("cdkDropListConnectedTo",c.vc(242,Tz,r,s,l,a,g))("cdkDropListData",p.allFields(h)),c.zb(2),c.nc("ngForOf",p.allFields(h)),c.zb(1),c.nc("ngIf",m&&p.collapseDefinition),c.zb(1),c.Eb("d-flex",m&&!p.collapseDefinition)("d-none",!m||p.collapseDefinition),c.zb(3),c.Mc(c.ic(31,179,"Definition")),c.zb(3),c.nc("flip",p.flipIcon(!1)),c.zb(4),c.nc("flip",p.flipIcon(p.showSection("Title")))("rotate",p.rotateIcon(p.showSection("Title"))),c.zb(1),c.Nc(" \xa0 ",c.ic(39,181,"Title")," "),c.zb(2),c.nc("ngIf",p.titleSectionErrors(h)),c.zb(1),c.Eb("d-none",!p.showSection("Title")),c.zb(1),c.Eb("is-invalid",p.invalid(n,null==h.serverErrors?null:h.serverErrors.Code)),c.zb(2),c.Mc(c.ic(45,183,"Code")),c.zb(2),c.nc("ngModel",h.Code)("ngModelOptions",c.qc(248,IT)),c.zb(2),c.nc("ngTemplateOutlet",S)("ngTemplateOutletContext",c.sc(249,uT,n,null==h.serverErrors?null:h.serverErrors.Code)),c.zb(1),c.Eb("is-invalid",p.invalid(i,null==h.serverErrors?null:h.serverErrors.Title)),c.zb(2),c.Mc(c.ic(52,185,"Title")+p.ws.primaryPostfix),c.zb(2),c.nc("ngModel",h.Title)("ngModelOptions",c.qc(252,IT)),c.zb(2),c.nc("ngTemplateOutlet",S)("ngTemplateOutletContext",c.sc(253,uT,i,null==h.serverErrors?null:h.serverErrors.Title)),c.zb(1),c.Eb("is-invalid",p.invalid(o,null==h.serverErrors?null:h.serverErrors.Description)),c.zb(2),c.Mc(c.ic(59,187,"Description")+p.ws.primaryPostfix),c.zb(2),c.nc("ngModel",h.Description)("ngModelOptions",c.qc(256,IT)),c.zb(2),c.nc("ngTemplateOutlet",S)("ngTemplateOutletContext",c.sc(257,uT,o,null==h.serverErrors?null:h.serverErrors.Description)),c.zb(1),c.nc("ngIf",null==p.ws.settings?null:p.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==p.ws.settings?null:p.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==p.ws.settings?null:p.ws.settings.TernaryLanguageId),c.zb(1),c.nc("ngIf",null==p.ws.settings?null:p.ws.settings.TernaryLanguageId),c.zb(3),c.nc("flip",p.flipIcon(p.showSection("Data")))("rotate",p.rotateIcon(p.showSection("Data"))),c.zb(1),c.Nc(" \xa0 ",c.ic(71,189,"Data")," "),c.zb(2),c.nc("ngIf",p.dataSectionErrors(h)),c.zb(1),c.Eb("d-none",!p.showSection("Data")),c.zb(3),c.Mc(c.ic(77,191,"ReportDefinition_Type")),c.zb(3),c.nc("checked","Summary"===h.Type),c.zb(2),c.Mc(c.ic(82,193,"ReportDefinition_Type_Summary")),c.zb(4),c.nc("checked","Details"===h.Type),c.zb(2),c.Mc(c.ic(88,195,"ReportDefinition_Type_Details")),c.zb(2),c.Eb("d-none","Summary"!==h.Type),c.zb(3),c.Mc(c.ic(93,197,"ReportDefinition_Rows")),c.zb(3),c.nc("title",c.ic(96,199,"Create")),c.zb(3),c.nc("cdkDropListConnectedTo",c.tc(260,zz,t,s,l))("cdkDropListData",p.getRows(h)),c.zb(2),c.nc("ngIf",!p.getRows(h).length),c.zb(1),c.nc("ngForOf",p.getRows(h)),c.zb(3),c.Mc(c.ic(105,201,"ReportDefinition_Columns")),c.zb(3),c.nc("title",c.ic(108,203,"Create")),c.zb(3),c.nc("cdkDropListConnectedTo",c.tc(264,zz,t,r,l))("cdkDropListData",p.getColumns(h)),c.zb(2),c.nc("ngIf",!p.getColumns(h).length),c.zb(1),c.nc("ngForOf",p.getColumns(h)),c.zb(3),c.Mc(c.ic(117,205,"ReportDefinition_Measures")),c.zb(3),c.nc("title",c.ic(120,207,"Create")),c.zb(3),c.nc("cdkDropListConnectedTo",c.tc(268,zz,t,r,s))("cdkDropListData",p.getMeasures(h)),c.zb(2),c.nc("ngIf",!p.getMeasures(h).length),c.zb(1),c.nc("ngForOf",p.getMeasures(h)),c.zb(1),c.nc("ngIf",!(null==h.Columns||!h.Columns.length)),c.zb(1),c.nc("ngIf",!(null==h.Rows||!h.Rows.length)),c.zb(1),c.nc("ngIf",!(null==h.Rows||!h.Rows.length)&&h.ShowRowsTotal||!(null==h.Columns||!h.Columns.length)&&h.ShowColumnsTotal),c.zb(1),c.Eb("d-none","Details"!==h.Type),c.zb(3),c.Mc(c.ic(133,209,"ReportDefinition_Select")),c.zb(3),c.nc("title",c.ic(136,211,"Create")),c.zb(3),c.nc("cdkDropListConnectedTo",c.rc(272,Lz,t))("cdkDropListData",p.getSelect(h)),c.zb(2),c.nc("ngIf",!p.getSelect(h).length),c.zb(1),c.nc("ngForOf",p.getSelect(h)),c.zb(1),c.Eb("is-invalid",p.invalid(u,null==h.serverErrors?null:h.serverErrors.OrderBy)),c.zb(2),c.Mc(c.ic(145,213,"ReportDefinition_OrderBy")),c.zb(2),c.nc("ngModel",h.OrderBy)("ngModelOptions",c.qc(274,IT)),c.zb(2),c.nc("ngTemplateOutlet",S)("ngTemplateOutletContext",c.sc(275,uT,u,null==h.serverErrors?null:h.serverErrors.OrderBy)),c.zb(1),c.Eb("is-invalid",p.invalid(d,null==h.serverErrors?null:h.serverErrors.Top)),c.zb(2),c.Mc(c.ic(152,215,"ReportDefinition_Top")),c.zb(2),c.nc("ngModel",h.Top)("ngModelOptions",c.qc(278,IT)),c.zb(2),c.nc("ngTemplateOutlet",S)("ngTemplateOutletContext",c.sc(279,uT,d,null==h.serverErrors?null:h.serverErrors.Top)),c.zb(3),c.nc("flip",p.flipIcon(p.showSection("Filter")))("rotate",p.rotateIcon(p.showSection("Filter"))),c.zb(1),c.Nc(" \xa0 ",c.ic(160,217,"Filter")," "),c.zb(2),c.nc("ngIf",p.filterSectionErrors(h)),c.zb(1),c.Eb("d-none",!p.showSection("Filter")),c.zb(1),c.Eb("is-invalid",p.invalid(b,null==h.serverErrors?null:h.serverErrors.Filter)),c.zb(2),c.Mc(c.ic(166,219,"ReportDefinition_Filter")),c.zb(2),c.nc("ngModel",h.Filter)("ngModelOptions",c.qc(282,IT))("placeholder",c.ic(169,221,"Expression")),c.zb(3),c.nc("ngTemplateOutlet",S)("ngTemplateOutletContext",c.sc(283,uT,b,null==h.serverErrors?null:h.serverErrors.Filter)),c.zb(1),c.nc("ngIf",p.showHaving(h)),c.zb(1),c.nc("ngIf",!!p.getParameters(h).length),c.zb(1),c.Eb("d-none","Summary"!==h.Type),c.zb(3),c.nc("flip",p.flipIcon(p.showSection("Drilldown")))("rotate",p.rotateIcon(p.showSection("Drilldown"))),c.zb(1),c.Nc(" \xa0 ",c.ic(178,223,"Drilldown")," "),c.zb(2),c.nc("ngIf",p.drilldownSectionErrors(h)),c.zb(1),c.Eb("d-none",!p.showSection("Drilldown")),c.zb(2),c.nc("ngModel",h.IsCustomDrilldown),c.zb(2),c.Mc(c.ic(185,225,"ReportDefinition_IsCustomDrilldown")),c.zb(2),c.Eb("d-none",!h.IsCustomDrilldown),c.zb(3),c.Mc(c.ic(190,227,"ReportDefinition_Select")),c.zb(3),c.nc("title",c.ic(193,229,"Create")),c.zb(3),c.nc("cdkDropListConnectedTo",c.rc(286,Lz,t))("cdkDropListData",p.getSelect(h)),c.zb(2),c.nc("ngIf",!p.getSelect(h).length),c.zb(1),c.nc("ngForOf",p.getSelect(h)),c.zb(1),c.Eb("is-invalid",p.invalid(u,null==h.serverErrors?null:h.serverErrors.OrderBy)),c.zb(2),c.Mc(c.ic(202,231,"ReportDefinition_OrderBy")),c.zb(2),c.nc("ngModel",h.OrderBy)("ngModelOptions",c.qc(288,IT)),c.zb(2),c.nc("ngTemplateOutlet",S)("ngTemplateOutletContext",c.sc(289,uT,u,null==h.serverErrors?null:h.serverErrors.OrderBy)),c.zb(2),c.nc("ngModel",p.previewDrilldown),c.zb(2),c.Mc(c.ic(210,233,"Preview")),c.zb(2),c.nc("ngIf","Summary"===h.Type),c.zb(1),c.nc("ngIf","Summary"===h.Type),c.zb(3),c.nc("flip",p.flipIcon(p.showSection("MainMenu")))("rotate",p.rotateIcon(p.showSection("MainMenu"))),c.zb(1),c.Nc(" \xa0 ",c.ic(217,235,"MainMenu")," "),c.zb(2),c.nc("ngIf",p.mainMenuSectionErrors(h)),c.zb(1),c.Eb("d-none",!p.showSection("MainMenu")),c.zb(2),c.nc("ngModel",h.ShowInMainMenu),c.zb(2),c.Mc(c.ic(224,237,"Definition_ShowInMainMenu")),c.zb(2),c.nc("ngIf",h.ShowInMainMenu),c.zb(1),c.nc("ngIf",h.ShowInMainMenu),c.zb(2),c.nc("ngIf",m),c.zb(3),c.nc("previewDefinition",p.getForClient(h))("showChart",h.DefaultsToChart)("disableDrilldown",p.isPopupMode)}}function Oz(e,t){if(1&e&&c.Jc(0,kz,232,292,"div",9),2&e){const e=t.isEdit,n=c.gc();c.nc("ngIf",n.watchIsEdit(e))}}function Az(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e()," ")}}function Nz(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",165),c.Jc(2,Az,2,1,"span",145),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.control,n=e.serverErrors,i=c.gc();c.zb(2),c.nc("ngForOf",i.errors(t,n))}}function _z(e,t){if(1&e&&c.Jc(0,Nz,3,1,"ng-container",86),2&e){const e=t.control,n=t.serverErrors,i=c.gc();c.nc("ngIf",i.invalid(e,n))}}function Jz(e,t){1&e&&c.Ob(0)}function Pz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",195),c.Sb(1,"button",196),c.Sb(2,"span",48),c.Nb(3,"fa-icon",197),c.Rb(),c.Rb(),c.Sb(4,"div",198),c.Sb(5,"div",71),c.Sb(6,"input",199),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).dimToEdit.Localize=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)}),c.Rb(),c.Sb(7,"label",200),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.nc("placement",e.commandsDropdownPlacement),c.zb(6),c.nc("ngModel",e.dimToEdit.Localize),c.zb(2),c.Mc(c.ic(9,3,"ReportDefinition_Localize"))}}function Fz(e,t){1&e&&c.Ob(0)}function Vz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",191),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"div",122),c.Sb(6,"input",192,193),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).dimToEdit.DisplayExpression=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)}),c.hc(8,"translate"),c.Rb(),c.Jc(9,Pz,10,5,"div",194),c.Rb(),c.Jc(10,Fz,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(7),t=c.gc(2),n=c.Ac(7);c.Eb("is-invalid",t.invalid(e,null==t.dimToEdit.serverErrors?null:t.dimToEdit.serverErrors.DisplayExpression)),c.zb(2),c.Oc("",c.ic(3,10,"ReportDefinition_DisplayExpression")," (",c.ic(4,12,"Visibility_Optional"),")"),c.zb(4),c.nc("ngModel",t.dimToEdit.DisplayExpression)("placeholder",c.ic(8,14,"Expression"))("ngModelOptions",c.qc(16,IT)),c.zb(3),c.nc("ngIf",t.isMultilingual),c.zb(1),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(17,uT,e,null==t.dimToEdit.serverErrors?null:t.dimToEdit.serverErrors.DisplayExpression))}}function qz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",201),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",202),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).dimToEdit.Label2=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).dimToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,3,"Label")+e.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",e.dimToEdit.Label2)("ngModelOptions",c.qc(5,IT))}}function jz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",203),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",204),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).dimToEdit.Label3=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).dimToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,3,"Label")+e.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",e.dimToEdit.Label3)("ngModelOptions",c.qc(5,IT))}}function $z(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e),c.zb(1),c.Nc(" ",c.ic(2,2,"ReportDefinition_OrderDirection_"+e),"")}}function Uz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",48),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"div",205),c.Sb(5,"input",206),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).dimToEdit.ShowAsTree=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).dimToEditHasChanged=!0}),c.Rb(),c.Sb(6,"label",207),c.Lc(7,"\u200c"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,2,"ReportDefinition_ShowAsTree")),c.zb(3),c.nc("ngModel",e.dimToEdit.ShowAsTree)}}function Kz(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",177),c.Sb(2,"label",208),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"input",209),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).dimToEdit.AutoExpandLevel=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).dimToEditHasChanged=!0}),c.Rb(),c.Rb(),c.Pb()}if(2&e){const e=c.gc(2);c.zb(3),c.Mc(c.ic(4,3,"ReportDefinition_AutoExpandLevel")),c.zb(2),c.nc("ngModel",e.dimToEdit.AutoExpandLevel)("ngModelOptions",c.qc(5,IT))}}function Bz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",48),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"div",205),c.Sb(5,"input",210),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(2);return n.dimToEdit.AutoExpandLevel=t?1e3:0,n.dimToEditHasChanged=!0}),c.Rb(),c.Sb(6,"label",211),c.Lc(7,"\u200c"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,2,"ReportDefinition_AutoExpand")),c.zb(3),c.nc("ngModel",e.dimToEdit.AutoExpandLevel>0)}}function Hz(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.Mc(c.ic(2,1,"Label")+e.ws.secondaryPostfix)}}function Qz(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.Nc("",c.ic(2,1,"Label")+e.ws.ternaryPostfix," ")}}function Wz(e,t){1&e&&(c.Qb(0),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Pb())}function Gz(e,t){if(1&e&&(c.Sb(0,"div",230),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Nc(" ",e.Expression,"")}}function Yz(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",195),c.Sb(1,"button",231),c.Sb(2,"span",48),c.Nb(3,"fa-icon",197),c.Rb(),c.Rb(),c.Sb(4,"div",198),c.Sb(5,"div",71),c.Sb(6,"input",232),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Localize=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)}),c.Rb(),c.Sb(7,"label",233),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(),t=e.index,n=e.$implicit,i=c.gc(3);c.nc("placement",i.commandsDropdownPlacement),c.zb(6),c.pc("id","attlocalize",t,""),c.nc("ngModel",n.Localize),c.zb(1),c.pc("for","attlocalize",t,""),c.zb(1),c.Mc(c.ic(9,5,"ReportDefinition_Localize"))}}function Xz(e,t){1&e&&c.Ob(0)}function Zz(e,t){1&e&&c.Ob(0)}function eL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",147),c.Sb(1,"input",227),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Label2=t})("ngModelChange",function(){return c.Dc(e),c.gc(4).dimToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc().$implicit;c.zb(1),c.nc("ngModel",e.Label2)("ngModelOptions",c.qc(2,IT))}}function tL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",147),c.Sb(1,"input",227),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Label3=t})("ngModelChange",function(){return c.Dc(e),c.gc(4).dimToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc().$implicit;c.zb(1),c.nc("ngModel",e.Label3)("ngModelOptions",c.qc(2,IT))}}function nL(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e),c.zb(1),c.Nc(" ",c.ic(2,2,"ReportDefinition_OrderDirection_"+e),"")}}const iL=function(){return["asc","desc"]};function cL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr",220),c.Jc(1,Wz,3,0,"ng-container",221),c.Jc(2,Gz,2,1,"div",222),c.Sb(3,"td",223),c.Nb(4,"fa-icon",224),c.Rb(),c.Sb(5,"td",147),c.Sb(6,"div",122),c.Sb(7,"div",89),c.Sb(8,"input",225,226),c.cc("ngModelChange",function(e){return t.$implicit.Expression=e})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)}),c.hc(10,"translate"),c.Rb(),c.Rb(),c.Jc(11,Yz,10,7,"div",194),c.Rb(),c.Jc(12,Xz,1,0,"ng-container",22),c.Rb(),c.Sb(13,"td",147),c.Sb(14,"input",227,228),c.cc("ngModelChange",function(e){return t.$implicit.Label=e})("ngModelChange",function(){return c.Dc(e),c.gc(3).dimToEditHasChanged=!0}),c.Rb(),c.Jc(16,Zz,1,0,"ng-container",22),c.Rb(),c.Jc(17,eL,2,3,"td",229),c.Jc(18,tL,2,3,"td",229),c.Sb(19,"td",147),c.Sb(20,"select",182),c.cc("ngModelChange",function(e){return t.$implicit.OrderDirection=e})("ngModelChange",function(){c.Dc(e);const n=t.index,i=c.gc(3);return i.onSetDimOrderDirection(i.dimToEdit,n)}),c.Nb(21,"option",99),c.Jc(22,nL,3,4,"option",21),c.Rb(),c.Rb(),c.Sb(23,"td"),c.Sb(24,"button",150),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(3);return i.onDeleteAttribute(n,i.dimToEdit)}),c.Nb(25,"fa-icon",151),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.Ac(9),i=c.Ac(15),o=c.gc(3),r=c.Ac(7);c.zb(5),c.Eb("is-invalid",o.invalid(n,null==e.serverErrors?null:e.serverErrors.Expression)),c.zb(3),c.nc("ngModel",e.Expression)("placeholder",c.ic(10,16,"Expression"))("ngModelOptions",c.qc(18,IT)),c.zb(3),c.nc("ngIf",o.isMultilingual),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.sc(19,uT,n,null==e||null==e.serverErrors?null:e.serverErrors.Expression)),c.zb(2),c.nc("ngModel",e.Label)("ngModelOptions",c.qc(22,IT)),c.zb(2),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.sc(23,uT,i,null==e||null==e.serverErrors?null:e.serverErrors.Label)),c.zb(1),c.nc("ngIf",null==o.ws.settings?null:o.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==o.ws.settings?null:o.ws.settings.SecondaryLanguageId),c.zb(2),c.nc("ngModel",e.OrderDirection),c.zb(2),c.nc("ngForOf",c.qc(26,iL))}}function oL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",212),c.Sb(1,"label",181),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"table",144),c.Sb(5,"thead",213),c.Sb(6,"tr"),c.Nb(7,"th",214),c.Sb(8,"th",215),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Sb(11,"th"),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Jc(14,Hz,3,3,"th",86),c.Jc(15,Qz,3,3,"th",86),c.Sb(16,"th",216),c.Lc(17),c.hc(18,"translate"),c.Rb(),c.Nb(19,"th",214),c.Rb(),c.Rb(),c.Sb(20,"tbody",217),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc(2);return n.rowDrop(t,n.dimToEdit.Attributes),n.dimToEditHasChanged=!0}),c.Jc(21,cL,26,27,"tr",218),c.Rb(),c.Rb(),c.Sb(22,"button",219),c.cc("click",function(){c.Dc(e);const t=c.gc(2);return t.onInsertAttribute(t.dimToEdit)}),c.Nb(23,"fa-icon",50),c.Lc(24),c.hc(25,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,8,"ReportDefinition_Attributes")),c.zb(7),c.Mc(c.ic(10,10,"ReportDefinition_Expression")),c.zb(3),c.Mc(c.ic(13,12,"Label")+e.ws.primaryPostfix),c.zb(2),c.nc("ngIf",null==e.ws.settings?null:e.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==e.ws.settings?null:e.ws.settings.TernaryLanguageId),c.zb(2),c.Nc(" ",c.ic(18,14,"ReportDefinition_OrderDirection")," "),c.zb(4),c.nc("ngForOf",e.dimToEdit.Attributes),c.zb(3),c.Nc("\xa0\xa0",c.ic(25,16,"Add")," ")}}function rL(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function sL(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function lL(e,t){1&e&&c.Ob(0)}function aL(e,t){1&e&&c.Ob(0)}function uL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",238),c.Sb(1,"t-control-options",239,240),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).dimToEdit.ControlOptions=t})("ngModelChange",function(){return c.Dc(e),c.gc(3).dimToEditHasChanged=!0}),c.Rb(),c.Jc(3,aL,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(2),t=c.gc(3),n=c.Ac(7);c.zb(1),c.nc("control",t.dimToEdit.Control)("isEdit",!0)("ngModel",t.dimToEdit.ControlOptions),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,uT,e,null==t.dimToEdit||null==t.dimToEdit.serverErrors?null:t.dimToEdit.serverErrors.ControlOptions))}}function dL(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",177),c.Sb(2,"label",181),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"select",234,235),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).dimToEdit.Control=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)}),c.Nb(7,"option",99),c.Jc(8,rL,2,2,"option",21),c.Sb(9,"option",236),c.Lc(10," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),c.Rb(),c.Jc(11,sL,2,2,"option",21),c.Rb(),c.Jc(12,lL,1,0,"ng-container",22),c.Rb(),c.Jc(13,uL,4,8,"div",237),c.Pb()}if(2&e){const e=c.Ac(6),t=c.gc(2),n=c.Ac(7);c.zb(3),c.Mc(c.ic(4,7,"Definition_Control")),c.zb(2),c.nc("ngModel",t.dimToEdit.Control),c.zb(3),c.nc("ngForOf",t.controlSimpleChoices()),c.zb(3),c.nc("ngForOf",t.controlEntityChoices()),c.zb(1),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(9,uT,e,null==t.dimToEdit||null==t.dimToEdit.serverErrors?null:t.dimToEdit.serverErrors.Control)),c.zb(1),c.nc("ngIf",t.showOptions(t.dimToEdit.Control))}}function bL(e,t){1&e&&(c.Sb(0,"div",241),c.Nb(1,"fa-icon",242),c.Lc(2),c.hc(3,"translate"),c.Rb()),2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"SettingHereWillClearFromMeasures")," "))}function gL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",166),c.Sb(1,"h5",167),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",168),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",169),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",170),c.Sb(8,"div",171),c.Sb(9,"div",172),c.Sb(10,"label",173),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"input",174,175),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().dimToEdit.KeyExpression=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)}),c.hc(15,"translate"),c.Rb(),c.Jc(16,Jz,1,0,"ng-container",22),c.Rb(),c.Jc(17,Vz,11,20,"div",176),c.Sb(18,"div",177),c.Sb(19,"label",178),c.Lc(20),c.hc(21,"translate"),c.Rb(),c.Sb(22,"input",179),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().dimToEdit.Label=t})("ngModelChange",function(){return c.Dc(e),c.gc().dimToEditHasChanged=!0}),c.Rb(),c.Rb(),c.Jc(23,qz,5,6,"div",180),c.Jc(24,jz,5,6,"div",180),c.Sb(25,"div",177),c.Sb(26,"label",181),c.Lc(27),c.hc(28,"translate"),c.Rb(),c.Sb(29,"select",182),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().dimToEdit.OrderDirection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.onSetDimOrderDirection(t.dimToEdit,-1)}),c.Nb(30,"option",99),c.Jc(31,$z,3,4,"option",21),c.Rb(),c.Rb(),c.Jc(32,Uz,8,4,"div",180),c.Jc(33,Kz,6,6,"ng-container",183),c.Jc(34,Bz,8,4,"ng-template",null,184,c.Kc),c.Jc(36,oL,26,18,"div",185),c.Jc(37,dL,14,12,"ng-container",86),c.Jc(38,bL,4,3,"div",186),c.Rb(),c.Rb(),c.Sb(39,"div",187),c.Sb(40,"button",188),c.cc("click",function(){return t.$implicit.close()}),c.Nb(41,"fa-icon",189),c.Lc(42),c.hc(43,"translate"),c.Rb(),c.Sb(44,"button",190),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(45,"fa-icon",125),c.Lc(46),c.hc(47,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(14),t=c.Ac(35),n=c.gc(),i=c.Ac(7);c.zb(2),c.Nc(" ",c.ic(3,29,"Configure")," "),c.zb(7),c.Eb("col-sm-6",n.showDisplayExpression(n.dimToEdit,n.modelRef))("is-invalid",n.invalid(e,null==n.dimToEdit.serverErrors?null:n.dimToEdit.serverErrors.KeyExpression)),c.zb(2),c.Mc(c.ic(12,31,"ReportDefinition_KeyExpression")),c.zb(2),c.nc("ngModel",n.dimToEdit.KeyExpression)("placeholder",c.ic(15,33,"Expression"))("ngModelOptions",c.qc(43,IT)),c.zb(3),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(44,uT,e,null==n.dimToEdit.serverErrors?null:n.dimToEdit.serverErrors.KeyExpression)),c.zb(1),c.nc("ngIf",n.showDisplayExpression(n.dimToEdit,n.modelRef)),c.zb(3),c.Mc(c.ic(21,35,"Label")+n.ws.primaryPostfix),c.zb(2),c.nc("ngModel",n.dimToEdit.Label)("ngModelOptions",c.qc(47,IT)),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),c.zb(3),c.Mc(c.ic(28,37,"ReportDefinition_OrderDirection")),c.zb(2),c.nc("ngModel",n.dimToEdit.OrderDirection),c.zb(2),c.nc("ngForOf",c.qc(48,iL)),c.zb(1),c.nc("ngIf",n.showShowAsTree(n.dimToEdit,n.modelRef)),c.zb(1),c.nc("ngIf",n.showShowAsTree(n.dimToEdit,n.modelRef)&&n.dimToEdit.ShowAsTree)("ngIfElse",t),c.zb(3),c.nc("ngIf",n.showDimensionAttributes(n.dimToEdit,n.modelRef)),c.zb(1),c.nc("ngIf",n.showDimensionControl(n.dimToEdit,n.modelRef)),c.zb(1),c.nc("ngIf",n.showClearOrderDirectionMessage(n.dimToEdit)),c.zb(2),c.nc("disabled",!n.canApplyDimension(n.dimToEdit)),c.zb(2),c.Nc(" \xa0",c.ic(43,39,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(47,41,"Cancel")," ")}}function fL(e,t){1&e&&c.Ob(0)}function mL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",201),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",202),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).measureToEdit.Label2=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).measureToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,3,"Label")+e.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",e.measureToEdit.Label2)("ngModelOptions",c.qc(5,IT))}}function hL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",203),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",204),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).measureToEdit.Label3=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).measureToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,3,"Label")+e.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",e.measureToEdit.Label3)("ngModelOptions",c.qc(5,IT))}}function pL(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e),c.zb(1),c.Nc(" ",c.ic(2,2,"ReportDefinition_OrderDirection_"+e),"")}}function SL(e,t){1&e&&(c.Sb(0,"div",172),c.Nb(1,"fa-icon",242),c.Lc(2),c.hc(3,"translate"),c.Rb()),2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"SettingHereWillClearFromRowsAndMeasures")," "))}function vL(e,t){1&e&&c.Ob(0)}function IL(e,t){1&e&&c.Ob(0)}function ML(e,t){1&e&&c.Ob(0)}function RL(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function yL(e,t){1&e&&c.Ob(0)}function DL(e,t){1&e&&c.Ob(0)}function wL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",238),c.Sb(1,"t-control-options",239,259),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).measureToEdit.ControlOptions=t})("ngModelChange",function(){return c.Dc(e),c.gc(3).measureToEditHasChanged=!0}),c.Rb(),c.Jc(3,DL,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(2),t=c.gc(3),n=c.Ac(7);c.zb(1),c.nc("control",t.measureToEdit.Control)("isEdit",!0)("ngModel",t.measureToEdit.ControlOptions),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,uT,e,null==t.measureToEdit||null==t.measureToEdit.serverErrors?null:t.measureToEdit.serverErrors.ControlOptions))}}function EL(e,t){if(1&e){const e=c.Tb();c.Qb(0,null,248),c.Sb(2,"div",177),c.Sb(3,"label",249),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Sb(6,"input",250,251),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).measureToEdit.SuccessWhen=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)}),c.hc(8,"translate"),c.Rb(),c.Jc(9,vL,1,0,"ng-container",22),c.Rb(),c.Sb(10,"div",177),c.Sb(11,"label",252),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Sb(14,"input",253,254),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).measureToEdit.WarningWhen=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)}),c.hc(16,"translate"),c.Rb(),c.Jc(17,IL,1,0,"ng-container",22),c.Rb(),c.Sb(18,"div",177),c.Sb(19,"label",255),c.Lc(20),c.hc(21,"translate"),c.Rb(),c.Sb(22,"input",256,257),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).measureToEdit.DangerWhen=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)}),c.hc(24,"translate"),c.Rb(),c.Jc(25,ML,1,0,"ng-container",22),c.Rb(),c.Sb(26,"div",177),c.Sb(27,"label",181),c.Lc(28),c.hc(29,"translate"),c.Rb(),c.Sb(30,"select",234,258),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).measureToEdit.Control=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)}),c.Nb(32,"option",99),c.Jc(33,RL,2,2,"option",21),c.Rb(),c.Jc(34,yL,1,0,"ng-container",22),c.Rb(),c.Jc(35,wL,4,8,"div",237),c.Pb()}if(2&e){const e=c.Ac(7),t=c.Ac(15),n=c.Ac(23),i=c.Ac(31),o=c.gc(2),r=c.Ac(7);c.zb(2),c.Eb("is-invalid",o.invalid(e,null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.SuccessWhen)),c.zb(2),c.Mc(c.ic(5,30,"ReportDefinition_SuccessWhen")),c.zb(2),c.nc("ngModel",o.measureToEdit.SuccessWhen)("placeholder",c.ic(8,32,"Expression"))("ngModelOptions",c.qc(44,IT)),c.zb(3),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.sc(45,uT,e,null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.SuccessWhen)),c.zb(1),c.Eb("is-invalid",o.invalid(t,null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.WarningWhen)),c.zb(2),c.Mc(c.ic(13,34,"ReportDefinition_WarningWhen")),c.zb(2),c.nc("ngModel",o.measureToEdit.WarningWhen)("placeholder",c.ic(16,36,"Expression"))("ngModelOptions",c.qc(48,IT)),c.zb(3),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.sc(49,uT,t,null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.WarningWhen)),c.zb(1),c.Eb("is-invalid",o.invalid(n,null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.DangerWhen)),c.zb(2),c.Mc(c.ic(21,38,"ReportDefinition_DangerWhen")),c.zb(2),c.nc("ngModel",o.measureToEdit.DangerWhen)("placeholder",c.ic(24,40,"Expression"))("ngModelOptions",c.qc(52,IT)),c.zb(3),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.sc(53,uT,n,null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.DangerWhen)),c.zb(3),c.Mc(c.ic(29,42,"Definition_Control")),c.zb(2),c.nc("ngModel",o.measureToEdit.Control),c.zb(3),c.nc("ngForOf",o.controlSimpleChoices()),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.sc(56,uT,i,null==o.measureToEdit||null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.Control)),c.zb(1),c.nc("ngIf",o.showOptions(o.measureToEdit.Control))}}function CL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",166),c.Sb(1,"h5",167),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",168),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",169),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",170),c.Sb(8,"div",171),c.Sb(9,"div",172),c.Sb(10,"label",243),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"input",244,245),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().measureToEdit.Expression=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)}),c.hc(15,"translate"),c.Rb(),c.Jc(16,fL,1,0,"ng-container",22),c.Rb(),c.Sb(17,"div",177),c.Sb(18,"label",178),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Sb(21,"input",179),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().measureToEdit.Label=t})("ngModelChange",function(){return c.Dc(e),c.gc().measureToEditHasChanged=!0}),c.Rb(),c.Rb(),c.Jc(22,mL,5,6,"div",180),c.Jc(23,hL,5,6,"div",180),c.Sb(24,"div",177),c.Sb(25,"label",181),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Sb(28,"select",182),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().measureToEdit.OrderDirection=t})("ngModelChange",function(){return c.Dc(e),c.gc().measureToEditHasChanged=!0}),c.Nb(29,"option",99),c.Jc(30,pL,3,4,"option",21),c.Rb(),c.Rb(),c.Jc(31,SL,4,3,"div",246),c.Sb(32,"div",172),c.Sb(33,"button",247),c.cc("click",function(){return c.Dc(e),c.gc().onToggleMeasureAdvancedOptions()}),c.Lc(34),c.hc(35,"translate"),c.Rb(),c.Rb(),c.Jc(36,EL,36,59,"ng-container",86),c.Rb(),c.Rb(),c.Sb(37,"div",187),c.Sb(38,"button",188),c.cc("click",function(){return t.$implicit.close()}),c.Nb(39,"fa-icon",189),c.Lc(40),c.hc(41,"translate"),c.Rb(),c.Sb(42,"button",190),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(43,"fa-icon",125),c.Lc(44),c.hc(45,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(14),t=c.gc(),n=c.Ac(7);c.zb(2),c.Nc(" ",c.ic(3,23,"Configure")," "),c.zb(7),c.Eb("is-invalid",t.invalid(e,null==t.measureToEdit.serverErrors?null:t.measureToEdit.serverErrors.Expression)),c.zb(2),c.Mc(c.ic(12,25,"ReportDefinition_Expression")),c.zb(2),c.nc("ngModel",t.measureToEdit.Expression)("placeholder",c.ic(15,27,"Expression"))("ngModelOptions",c.qc(39,IT)),c.zb(3),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(40,uT,e,null==t.measureToEdit.serverErrors?null:t.measureToEdit.serverErrors.Expression)),c.zb(3),c.Mc(c.ic(20,29,"Label")+t.ws.primaryPostfix),c.zb(2),c.nc("ngModel",t.measureToEdit.Label)("ngModelOptions",c.qc(43,IT)),c.zb(1),c.nc("ngIf",null==t.ws.settings?null:t.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==t.ws.settings?null:t.ws.settings.TernaryLanguageId),c.zb(3),c.Mc(c.ic(27,31,"ReportDefinition_OrderDirection")),c.zb(2),c.nc("ngModel",t.measureToEdit.OrderDirection),c.zb(2),c.nc("ngForOf",c.qc(44,iL)),c.zb(1),c.nc("ngIf",!!t.measureToEdit.OrderDirection),c.zb(3),c.Nc("",c.ic(35,33,t.measureShowAdvancedOptions?"AdvancedOptionsHide":"AdvancedOptionsShow"),"..."),c.zb(2),c.nc("ngIf",t.measureShowAdvancedOptions),c.zb(2),c.nc("disabled",!t.canApplyMeasure(t.measureToEdit)),c.zb(2),c.Nc(" \xa0",c.ic(41,35,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(45,37,"Cancel")," ")}}function xL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",195),c.Sb(1,"button",196),c.Sb(2,"span",48),c.Nb(3,"fa-icon",197),c.Rb(),c.Rb(),c.Sb(4,"div",198),c.Sb(5,"div",71),c.Sb(6,"input",262),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).selectToEdit.Localize=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.selectToEditHasChanged=!0,t.validateSelect(t.selectToEdit,t.modelRef)}),c.Rb(),c.Sb(7,"label",263),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.nc("placement",e.commandsDropdownPlacement),c.zb(6),c.nc("ngModel",e.selectToEdit.Localize),c.zb(2),c.Mc(c.ic(9,3,"ReportDefinition_Localize"))}}function TL(e,t){1&e&&c.Ob(0)}function zL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",201),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",202),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).selectToEdit.Label2=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).selectToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,3,"Label")+e.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",e.selectToEdit.Label2)("ngModelOptions",c.qc(5,IT))}}function LL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",203),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",204),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).selectToEdit.Label3=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).selectToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,3,"Label")+e.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",e.selectToEdit.Label3)("ngModelOptions",c.qc(5,IT))}}function kL(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function OL(e,t){1&e&&c.Ob(0)}function AL(e,t){1&e&&c.Ob(0)}function NL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",238),c.Sb(1,"t-control-options",239,264),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).selectToEdit.ControlOptions=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).selectToEditHasChanged=!0}),c.Rb(),c.Jc(3,AL,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(2),t=c.gc(2),n=c.Ac(7);c.zb(1),c.nc("control",t.selectToEdit.Control)("isEdit",!0)("ngModel",t.selectToEdit.ControlOptions),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,uT,e,null==t.selectToEdit||null==t.selectToEdit.serverErrors?null:t.selectToEdit.serverErrors.ControlOptions))}}function _L(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",166),c.Sb(1,"h5",167),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",168),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",169),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",170),c.Sb(8,"div",171),c.Sb(9,"div",172),c.Sb(10,"label",243),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"div",122),c.Sb(14,"input",260,245),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().selectToEdit.Expression=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.selectToEditHasChanged=!0,t.validateSelect(t.selectToEdit,t.modelRef)}),c.hc(16,"translate"),c.Rb(),c.Jc(17,xL,10,5,"div",194),c.Rb(),c.Jc(18,TL,1,0,"ng-container",22),c.Rb(),c.Sb(19,"div",177),c.Sb(20,"label",178),c.Lc(21),c.hc(22,"translate"),c.Rb(),c.Sb(23,"input",179),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().selectToEdit.Label=t})("ngModelChange",function(){return c.Dc(e),c.gc().selectToEditHasChanged=!0}),c.Rb(),c.Rb(),c.Jc(24,zL,5,6,"div",180),c.Jc(25,LL,5,6,"div",180),c.Sb(26,"div",177),c.Sb(27,"label",181),c.Lc(28),c.hc(29,"translate"),c.Rb(),c.Sb(30,"select",234,261),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().selectToEdit.Control=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.selectToEditHasChanged=!0,t.validateSelect(t.selectToEdit,t.modelRef)}),c.Nb(32,"option",99),c.Jc(33,kL,2,2,"option",21),c.Rb(),c.Jc(34,OL,1,0,"ng-container",22),c.Rb(),c.Jc(35,NL,4,8,"div",237),c.Rb(),c.Rb(),c.Sb(36,"div",187),c.Sb(37,"button",188),c.cc("click",function(){return t.$implicit.close()}),c.Nb(38,"fa-icon",189),c.Lc(39),c.hc(40,"translate"),c.Rb(),c.Sb(41,"button",190),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(42,"fa-icon",125),c.Lc(43),c.hc(44,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(15),t=c.Ac(31),n=c.gc(),i=c.Ac(7);c.zb(2),c.Nc(" ",c.ic(3,24,"Configure")," "),c.zb(7),c.Eb("is-invalid",n.invalid(e,null==n.selectToEdit.serverErrors?null:n.selectToEdit.serverErrors.Expression)),c.zb(2),c.Mc(c.ic(12,26,"ReportDefinition_Expression")),c.zb(3),c.nc("ngModel",n.selectToEdit.Expression)("placeholder",c.ic(16,28,"Expression"))("ngModelOptions",c.qc(38,IT)),c.zb(3),c.nc("ngIf",n.isMultilingual),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(39,uT,e,null==n.selectToEdit.serverErrors?null:n.selectToEdit.serverErrors.Expression)),c.zb(3),c.Mc(c.ic(22,30,"Label")+n.ws.primaryPostfix),c.zb(2),c.nc("ngModel",n.selectToEdit.Label)("ngModelOptions",c.qc(42,IT)),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),c.zb(3),c.Mc(c.ic(29,32,"Definition_Control")),c.zb(2),c.nc("ngModel",n.selectToEdit.Control),c.zb(3),c.nc("ngForOf",n.controlSimpleChoices()),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(43,uT,t,null==n.selectToEdit||null==n.selectToEdit.serverErrors?null:n.selectToEdit.serverErrors.Control)),c.zb(1),c.nc("ngIf",n.showOptions(n.selectToEdit.Control)),c.zb(2),c.nc("disabled",!n.canApplySelect(n.selectToEdit)),c.zb(2),c.Nc(" \xa0",c.ic(40,34,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(44,36,"Cancel")," ")}}function JL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",201),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",202),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).paramToEdit.Label2=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).paramToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,3,"Label")+e.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",e.paramToEdit.Label2)("ngModelOptions",c.qc(5,IT))}}function PL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",203),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",204),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).paramToEdit.Label3=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).paramToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Mc(c.ic(3,3,"Label")+e.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",e.paramToEdit.Label3)("ngModelOptions",c.qc(5,IT))}}function FL(e,t){1&e&&c.Ob(0)}function VL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",273),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",274,275),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).paramToEdit.DefaultExpression=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.paramToEditHasChanged=!0,t.validateParam(t.paramToEdit,t.modelRef)}),c.hc(6,"translate"),c.Rb(),c.Jc(7,FL,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(7);c.Eb("is-invalid",t.invalid(e,null==t.paramToEdit.serverErrors?null:t.paramToEdit.serverErrors.DefaultExpression)),c.zb(2),c.Mc(c.ic(3,8,"ReportDefinition_DefaultExpression")),c.zb(2),c.nc("ngModel",t.paramToEdit.DefaultExpression)("placeholder",c.ic(6,10,"Expression"))("ngModelOptions",c.qc(12,IT)),c.zb(3),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(13,uT,e,null==t.paramToEdit.serverErrors?null:t.paramToEdit.serverErrors.DefaultExpression))}}function qL(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function jL(e,t){if(1&e&&(c.Sb(0,"option",95),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function $L(e,t){1&e&&c.Ob(0)}function UL(e,t){1&e&&c.Ob(0)}function KL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",238),c.Sb(1,"t-control-options",239,276),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).paramToEdit.ControlOptions=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).paramToEditHasChanged=!0}),c.Rb(),c.Jc(3,UL,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(2),t=c.gc(2),n=c.Ac(7);c.zb(1),c.nc("control",t.paramToEdit.Control)("isEdit",!0)("ngModel",t.paramToEdit.ControlOptions),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,uT,e,null==t.paramToEdit||null==t.paramToEdit.serverErrors?null:t.paramToEdit.serverErrors.ControlOptions))}}function BL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",166),c.Sb(1,"h5",167),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",168),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",169),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",170),c.Sb(8,"div",171),c.Sb(9,"div",177),c.Sb(10,"label",265),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"span",266),c.Lc(14),c.Rb(),c.Rb(),c.Nb(15,"div",267),c.Sb(16,"div",177),c.Sb(17,"label",178),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Sb(20,"input",179),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().paramToEdit.Label=t})("ngModelChange",function(){return c.Dc(e),c.gc().paramToEditHasChanged=!0}),c.Rb(),c.Rb(),c.Jc(21,JL,5,6,"div",180),c.Jc(22,PL,5,6,"div",180),c.Sb(23,"div",177),c.Sb(24,"label",268),c.Lc(25),c.hc(26,"translate"),c.Rb(),c.Sb(27,"select",269),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().paramToEdit.Visibility=t})("ngModelChange",function(){return c.Dc(e),c.gc().paramToEditHasChanged=!0}),c.Sb(28,"option",270),c.Lc(29),c.hc(30,"translate"),c.Rb(),c.Sb(31,"option",271),c.Lc(32),c.hc(33,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Jc(34,VL,8,16,"div",176),c.Sb(35,"div",177),c.Sb(36,"label",181),c.Lc(37),c.hc(38,"translate"),c.Rb(),c.Sb(39,"select",234,272),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().paramToEdit.Control=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.paramToEditHasChanged=!0,t.validateParam(t.paramToEdit,t.modelRef)}),c.Nb(41,"option",99),c.Jc(42,qL,2,2,"option",21),c.Sb(43,"option",236),c.Lc(44," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),c.Rb(),c.Jc(45,jL,2,2,"option",21),c.Rb(),c.Jc(46,$L,1,0,"ng-container",22),c.Rb(),c.Jc(47,KL,4,8,"div",237),c.Rb(),c.Rb(),c.Sb(48,"div",187),c.Sb(49,"button",188),c.cc("click",function(){return t.$implicit.close()}),c.Nb(50,"fa-icon",189),c.Lc(51),c.hc(52,"translate"),c.Rb(),c.Sb(53,"button",190),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(54,"fa-icon",125),c.Lc(55),c.hc(56,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(40),t=c.gc(),n=c.Ac(7);c.zb(2),c.Nc(" ",c.ic(3,23,"Configure")," "),c.zb(9),c.Mc(c.ic(12,25,"Parameter_Key")),c.zb(3),c.Mc("@"+t.paramToEdit.Key),c.zb(4),c.Mc(c.ic(19,27,"Label")+t.ws.primaryPostfix),c.zb(2),c.nc("ngModel",t.paramToEdit.Label)("ngModelOptions",c.qc(41,IT)),c.zb(1),c.nc("ngIf",null==t.ws.settings?null:t.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==t.ws.settings?null:t.ws.settings.TernaryLanguageId),c.zb(3),c.Mc(c.ic(26,29,"Parameter_Visibility")),c.zb(2),c.nc("ngModel",t.paramToEdit.Visibility),c.zb(2),c.Mc(c.ic(30,31,"Visibility_Optional")),c.zb(3),c.Mc(c.ic(33,33,"Visibility_Required")),c.zb(2),c.nc("ngIf",t.showParamDefaultExpression(t.paramToEdit)),c.zb(3),c.Mc(c.ic(38,35,"Definition_Control")),c.zb(2),c.nc("ngModel",t.paramToEdit.Control),c.zb(3),c.nc("ngForOf",t.controlSimpleChoices()),c.zb(3),c.nc("ngForOf",t.controlEntityChoices()),c.zb(1),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(42,uT,e,null==t.paramToEdit||null==t.paramToEdit.serverErrors?null:t.paramToEdit.serverErrors.Control)),c.zb(1),c.nc("ngIf",t.showOptions(t.paramToEdit.Control)),c.zb(2),c.nc("disabled",!t.canApplyParam(t.paramToEdit)),c.zb(2),c.Nc(" \xa0",c.ic(52,37,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(56,39,"Cancel")," ")}}function HL(e,t){1&e&&c.Ob(0)}function QL(e,t){1&e&&c.Ob(0)}function WL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",281),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",282,283),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).totalLabelsToEdit.ColumnsTotalLabel2=t})("ngModelChange",function(){return c.Dc(e),c.gc(3).totalLabelsToEditHasChanged=!0}),c.Rb(),c.Jc(6,QL,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(3),n=c.Ac(7);c.zb(2),c.Mc(c.ic(3,5,"ReportDefinition_ColumnsTotalLabel")+t.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.totalLabelsToEdit.ColumnsTotalLabel2)("ngModelOptions",c.qc(7,IT)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(8,uT,e,null==t.totalLabelsToEdit||null==t.totalLabelsToEdit.serverErrors?null:t.totalLabelsToEdit.serverErrors.ColumnsTotalLabel2))}}function GL(e,t){1&e&&c.Ob(0)}function YL(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",284),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",285,286),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).totalLabelsToEdit.ColumnsTotalLabel3=t})("ngModelChange",function(){return c.Dc(e),c.gc(3).totalLabelsToEditHasChanged=!0}),c.Rb(),c.Jc(6,GL,1,0,"ng-container",22),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(3),n=c.Ac(7);c.zb(2),c.Mc(c.ic(3,5,"ReportDefinition_ColumnsTotalLabel")+t.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.totalLabelsToEdit.ColumnsTotalLabel3)("ngModelOptions",c.qc(7,IT)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(8,uT,e,null==t.totalLabelsToEdit||null==t.totalLabelsToEdit.serverErrors?null:t.totalLabelsToEdit.serverErrors.ColumnsTotalLabel3))}}function XL(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",177),c.Sb(2,"label",278),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"input",279,280),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).totalLabelsToEdit.ColumnsTotalLabel=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).totalLabelsToEditHasChanged=!0}),c.Rb(),c.Jc(7,HL,1,0,"ng-container",22),c.Rb(),c.Jc(8,WL,7,11,"div",180),c.Jc(9,YL,7,11,"div",180),c.Pb()}if(2&e){const e=c.Ac(6),t=c.gc(2),n=c.Ac(7);c.zb(3),c.Mc(c.ic(4,7,"ReportDefinition_ColumnsTotalLabel")+t.ws.primaryPostfix),c.zb(2),c.nc("ngModel",t.totalLabelsToEdit.ColumnsTotalLabel)("ngModelOptions",c.qc(9,IT)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(10,uT,e,null==t.totalLabelsToEdit||null==t.totalLabelsToEdit.serverErrors?null:t.totalLabelsToEdit.serverErrors.ColumnsTotalLabel)),c.zb(1),c.nc("ngIf",null==t.ws.settings?null:t.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==t.ws.settings?null:t.ws.settings.TernaryLanguageId)}}function ZL(e,t){1&e&&c.Ob(0)}function ek(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",290),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",291),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).totalLabelsToEdit.RowsTotalLabel2=t})("ngModelChange",function(){return c.Dc(e),c.gc(3).totalLabelsToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.Mc(c.ic(3,3,"ReportDefinition_RowsTotalLabel")+e.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",e.totalLabelsToEdit.RowsTotalLabel2)("ngModelOptions",c.qc(5,IT))}}function tk(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",177),c.Sb(1,"label",292),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",293),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).totalLabelsToEdit.RowsTotalLabel3=t})("ngModelChange",function(){return c.Dc(e),c.gc(3).totalLabelsToEditHasChanged=!0}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.Mc(c.ic(3,3,"ReportDefinition_RowsTotalLabel")+e.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",e.totalLabelsToEdit.RowsTotalLabel3)("ngModelOptions",c.qc(5,IT))}}function nk(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",177),c.Sb(2,"label",287),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"input",288,289),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).totalLabelsToEdit.RowsTotalLabel=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).totalLabelsToEditHasChanged=!0}),c.Rb(),c.Jc(7,ZL,1,0,"ng-container",22),c.Rb(),c.Jc(8,ek,5,6,"div",180),c.Jc(9,tk,5,6,"div",180),c.Pb()}if(2&e){const e=c.Ac(6),t=c.gc(2),n=c.Ac(7);c.zb(3),c.Mc(c.ic(4,7,"ReportDefinition_RowsTotalLabel")+t.ws.primaryPostfix),c.zb(2),c.nc("ngModel",t.totalLabelsToEdit.RowsTotalLabel)("ngModelOptions",c.qc(9,IT)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(10,uT,e,null==t.totalLabelsToEdit||null==t.totalLabelsToEdit.serverErrors?null:t.totalLabelsToEdit.serverErrors.RowsTotalLabel)),c.zb(1),c.nc("ngIf",null==t.ws.settings?null:t.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==t.ws.settings?null:t.ws.settings.TernaryLanguageId)}}function ik(e,t){if(1&e&&(c.Sb(0,"div",166),c.Sb(1,"h5",167),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",168),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",169),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",170),c.Sb(8,"div",171),c.Jc(9,XL,10,13,"ng-container",86),c.Nb(10,"div",267),c.Jc(11,nk,10,13,"ng-container",86),c.Rb(),c.Rb(),c.Sb(12,"div",187),c.Sb(13,"button",277),c.cc("click",function(){return t.$implicit.close()}),c.Nb(14,"fa-icon",189),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Sb(17,"button",190),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(18,"fa-icon",125),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,5,"Configure")," "),c.zb(7),c.nc("ngIf",!(null==e.modelRef.Columns||!e.modelRef.Columns.length)&&e.modelRef.ShowColumnsTotal),c.zb(2),c.nc("ngIf",!(null==e.modelRef.Rows||!e.modelRef.Rows.length)&&e.modelRef.ShowRowsTotal),c.zb(4),c.Nc(" \xa0",c.ic(16,7,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(20,9,"Cancel")," ")}}const ck=function(){return[]};let ok=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.translate=t,this.modalService=n,this._isEdit=!1,this._sections={Title:!1,Data:!0,Filter:!1,Drilldown:!1,Chart:!1,MainMenu:!1},this.expand="Parameters,Select,Rows.Attributes,Columns.Attributes,Measures,Roles.Role",this.collapseFields=!1,this.collapseDefinition=!1,this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Title=this.initialText:this.ws.isSecondaryLanguage?e.Title2=this.initialText:this.ws.isTernaryLanguage&&(e.Title3=this.initialText),e.ShowInMainMenu=!1,e.Collection="DetailsEntry",e.Type="Summary",e.Rows=[],e.Columns=[],e.Measures=[],e.Select=[],e.Parameters=[],e.ShowColumnsTotal=!0,e.ShowRowsTotal=!0,e.IsCustomDrilldown=!1,e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Rows&&t.Rows.forEach(e=>{e.Id=null,e.Attributes&&e.Attributes.forEach(e=>e.Id=null)}),t.Columns&&t.Columns.forEach(e=>{e.Id=null,e.Attributes&&e.Attributes.forEach(e=>e.Id=null)}),t.Measures&&t.Measures.forEach(e=>e.Id=null),t.Select&&t.Select.forEach(e=>e.Id=null),t.Parameters&&t.Parameters.forEach(e=>e.Id=null),t}return console.error("Cloning a non existing item"),null},this.isInactive=e=>null,this._currentModelModified=!1,this.dimToEditHasChanged=!1,this.dimToEditIsRow=!1,this.measureToEditHasChanged=!1,this.measureShowAdvancedOptions=!1,this.selectToEditHasChanged=!1,this.paramToEditHasChanged=!1,this.totalLabelsToEditHasChanged=!1,this.controlDisplay=e=>{const t=this.ws.definitions;if(this._controlChoicesDefinitions!==t){this._controlChoicesDefinitions=t,this._controlDisplayCache={};for(const e of this.controlSimpleChoices())this._controlDisplayCache[e.value]=e.name;for(const e of this.controlEntityChoices())this._controlDisplayCache[e.value]=e.name}const n=this._controlDisplayCache[e];return n?n():""},this.previewDrilldown=!1}get ws(){return this.workspace.currentTenant}onDefinitionChange(e,t){this.showDefinitionIdSelector(e)||delete e.DefinitionId,t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this.modelForClient=Object.assign({},e),this.previewDrilldown&&this._isEdit&&(this.modelForClient.Type="Details")),this.modelForClient):null}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e,window.dispatchEvent(new Event("resize")),this.previewDrilldown=!1),!0}onCollectionChange(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}onDefinitionIdChange(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}get allCollections(){return Object(Mi.a)(this.workspace,this.translate)}showDefinitionIdSelector(e){return!!(e&&e.Collection&&Mi.h[e.Collection]&&Mi.h[e.Collection](this.workspace,this.translate,null).definitionIds)}allDefinitionIds(e){if(e&&e.Collection){const t=Mi.h[e.Collection],n=t(this.workspace,this.translate,null);return n.definitionIds&&!n.definitionIdsArray&&(n.definitionIdsArray=n.definitionIds.map(e=>({value:e,name:t(this.workspace,this.translate,e).titlePlural}))),n.definitionIdsArray}return null}get allCharts(){const e=Object(lx.a)(this.workspace,this.translate).properties.Chart;return Object(Mi.c)(e)}get allMainMenuSections(){const e=Object(lx.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Mi.c)(e)}get allMainMenuIcons(){const e=Object(lx.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Mi.c)(e)}onChartChange(e,t){!t.Chart&&e&&(t.DefaultsToChart=!0),t.Chart&&!e&&(t.DefaultsToChart=!1),t.Chart=e,this.onDefinitionChange(t)}createDimension(e){return{Id:0,KeyExpression:e,Localize:!0,AutoExpandLevel:1e3,ShowAsTree:!0,Attributes:[]}}createMeasure(e){return{Id:0,Expression:e}}createSelect(e){return{Id:0,Expression:e,Localize:!1}}drop(e,t){const n=this.allFields(t),i=t.Rows,c=t.Columns,o=t.Measures,r=t.Select,s=e.previousContainer.data,l=e.previousIndex,a=e.container.data,u=e.currentIndex;let d=!1;if(s===n&&a===n);else if(s===a&&a!==n)l!==u&&(Object(j.h)(a,l,u),d=!0);else if(s!==n||a!==i&&a!==c)if(s===n&&a===o){const e=s[l];let t=e.path;"entity"===e.desc.datatype&&(t+=".Id");const n=Object(Mi.f)(e.desc)&&"Id"!==t?"Sum":"Count",i=this.createMeasure(`${n}(${t})`);a.splice(u,0,i),d=!0}else if(s===n&&a===r){const e=this.createSelect(s[l].path);a.splice(u,0,e),d=!0}else if(s!==n&&a===n)s.splice(l,1),d=!0;else if(s!==o||a!==i&&a!==c)if(s!==i&&s!==c||a!==o)s===i&&a===c||s===c&&a===i?(Object(j.i)(s,a,l,u),d=!0):console.error("Unhandled drop case.");else{const e=s.splice(l,1)[0];let n;try{const i=zi.parseSingle(e.KeyExpression);if(i.aggregations().length>0)n=null;else if(i instanceof Oi&&0===i.path.length&&"Id"===i.property)n="Count";else{const e=ic.nativeDesc(i,{},{},t.Collection,t.DefinitionId,this.workspace,this.translate);Object(Mi.f)(e)&&(n="Sum")}}catch(b){}const i=Object.assign({},e);i.Expression=n?`${n}(${e.KeyExpression})`:e.KeyExpression,a.splice(u,0,i),d=!0}else{const e=s.splice(l,1)[0];let t;try{const n=zi.parseSingle(e.Expression);n&&n instanceof Ai&&n.isAggregation&&1===n.arguments.length&&(t=ji(n.arguments[0].toString()))}catch(g){}const n=Object.assign({},e);n.Id=0,n.KeyExpression=t||e.Expression,void 0===n.Localize&&(n.Localize=!0),void 0===n.AutoExpandLevel&&(n.AutoExpandLevel=1),void 0===n.ShowAsTree&&(n.ShowAsTree=!0),void 0===n.Attributes&&(n.Attributes=[]),a.splice(u,0,n),d=!0}else{const e=this.createDimension(s[l].path);a.splice(u,0,e),d=!0}d&&(this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))}allFields(e){return this._allFields&&this._currentCollection===e.Collection&&this._currentDefinitionId===e.DefinitionId||(this._currentCollection=e.Collection,this._currentDefinitionId=e.DefinitionId,this._allFields=this.getChildren(e.Collection,e.DefinitionId),this.onSearchChanged(e)),this._allFields}hasChildren(e){switch(e.desc.datatype){case"entity":case"date":case"datetime":case"datetimeoffset":return!0;default:return!1}}showTreeNode(e){const t=e.parent;return(!this.search||e.match)&&(!t||t.isExpanded&&this.showTreeNode(t))}getChildren(e,t,n){if(!e)return[];const i=Mi.h[e];if(!i)return[];const c=i(this.workspace,this.translate,t),o=n?n.level+1:0,r=n?`${n.path}.`:"";return Object.keys(c.properties).map(e=>({path:`${r}${e}`,desc:c.properties[e],level:o,parent:n}))}getDateParts(e){const t=e.level+1;return[{path:`Year(${e.path})`,desc:ic.datePartDesc(()=>this.translate.instant("DatePart_year"),this.translate),level:t,parent:e},{path:`Quarter(${e.path})`,desc:ic.quarterDesc(()=>this.translate.instant("DatePart_quarter"),this.translate),level:t,parent:e},{path:`Month(${e.path})`,desc:ic.monthDesc(()=>this.translate.instant("DatePart_month"),this.translate),level:t,parent:e},{path:`Day(${e.path})`,desc:ic.datePartDesc(()=>this.translate.instant("DatePart_day"),this.translate),level:t,parent:e},{path:`Weekday(${e.path})`,desc:ic.weekdayDesc(()=>this.translate.instant("DatePart_weekday"),this.translate),level:t,parent:e}]}onExpand(e,t,n){if(e.isExpanded=!e.isExpanded,e.isExpanded&&!e.childrenLoaded){let i;switch(e.desc.datatype){case"entity":i=this.getChildren(e.desc.control,e.desc.definitionId,e);break;case"date":case"datetime":case"datetimeoffset":i=this.getDateParts(e)}this.allFields(n).splice(t+1,0,...i),e.childrenLoaded=!0,this.onSearchChanged(n)}}copyPathToClipboard(e){Object(V.f)(e)}paddingLeft(e){return this.workspace.ws.isRtl?"0":20*e.level+"px"}paddingRight(e){return this.workspace.ws.isRtl?20*e.level+"px":"0"}flipNode(e){return this.flipIcon(e.isExpanded)}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateNode(e){return this.rotateIcon(e.isExpanded)}rotateIcon(e){return e?90:0}onSearchChanged(e){const t=this.allFields(e);if(this.search){const e=this.search.toLowerCase();t.forEach(e=>e.match=!1),t.forEach(t=>{const n=t.desc.label();if(n&&n.toLowerCase().indexOf(e)>=0){let e=t;for(;e&&!e.match;)e.match=!0,e=e.parent}})}}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onToggleFields(){this.collapseFields=!this.collapseFields,window.dispatchEvent(new Event("resize"))}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition,window.dispatchEvent(new Event("resize"))}invalid(e,t){return Object(Qp.c)(e,t)}errors(e,t){return Object(Qp.d)(e,t,this.translate)}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(Qp.b)(e.serverErrors[t]))}dimensionErrors(e){return this.weakEntityErrors(e)||!!e.Attributes&&e.Attributes.some(e=>this.weakEntityErrors(e))}customizeLabelsErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.ColumnsTotalLabel)||Object(Qp.b)(e.serverErrors.ColumnsTotalLabel2)||Object(Qp.b)(e.serverErrors.ColumnsTotalLabel3)||Object(Qp.b)(e.serverErrors.RowsTotalLabel)||Object(Qp.b)(e.serverErrors.RowsTotalLabel2)||Object(Qp.b)(e.serverErrors.RowsTotalLabel3))}dataSectionErrors(e){const t="Details"===e.Type;return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.Type)||Object(Qp.b)(e.serverErrors.ShowColumnsTotal)||Object(Qp.b)(e.serverErrors.ShowRowsTotal)||this.customizeLabelsErrors(e)||t&&Object(Qp.b)(e.serverErrors.OrderBy)||Object(Qp.b)(e.serverErrors.Top))||!!e.Rows&&e.Rows.some(e=>this.dimensionErrors(e))||!!e.Columns&&e.Columns.some(e=>this.dimensionErrors(e))||!!e.Measures&&e.Measures.some(e=>this.weakEntityErrors(e))||t&&!!e.Select&&e.Select.some(e=>this.weakEntityErrors(e))}filterSectionErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.Filter)||Object(Qp.b)(e.serverErrors.Having))||!!e.Parameters&&e.Parameters.some(e=>this.weakEntityErrors(e))}drilldownSectionErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.OrderBy)||Object(Qp.b)(e.serverErrors.IsCustomDrilldown))||!!e.Select&&e.Select.some(e=>this.weakEntityErrors(e))}chartSectionErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.Chart)||Object(Qp.b)(e.serverErrors.ChartOptions)||Object(Qp.b)(e.serverErrors.DefaultsToChart))}titleSectionErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.Id)||Object(Qp.b)(e.serverErrors.Code)||Object(Qp.b)(e.serverErrors.Title)||Object(Qp.b)(e.serverErrors.Description)||Object(Qp.b)(e.serverErrors.Title2)||Object(Qp.b)(e.serverErrors.Description2)||Object(Qp.b)(e.serverErrors.Title3)||Object(Qp.b)(e.serverErrors.Description3))}mainMenuSectionErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.ShowInMainMenu)||Object(Qp.b)(e.serverErrors.MainMenuSection)||Object(Qp.b)(e.serverErrors.MainMenuIcon)||Object(Qp.b)(e.serverErrors.MainMenuSortKey))}savePreprocessing(e){"Details"===e.Type&&(e.Rows=[],e.Columns=[],e.Measures=[],delete e.Having),"Summary"===e.Type&&(delete e.Top,e.IsCustomDrilldown||(e.Select=[],delete e.OrderBy)),0===e.Columns.length&&(e.ShowColumnsTotal=!0),0!==e.Columns.length&&e.ShowColumnsTotal||(delete e.ColumnsTotalLabel,delete e.ColumnsTotalLabel2,delete e.ColumnsTotalLabel3),0===e.Rows.length&&(e.ShowRowsTotal=!0),0!==e.Rows.length&&e.ShowRowsTotal||(delete e.RowsTotalLabel,delete e.RowsTotalLabel2,delete e.RowsTotalLabel3),e.ShowInMainMenu||(e.Roles=[])}dimKeyExpressionDesc(e,t){if(this._dimKeyExpression!==e){this._dimKeyExpression=e,this._dimKeyExpressionDesc=null;const i={},c={};try{let n;const o=zi.parseSingle(e);if(o&&0===o.aggregations().length&&(n=o),n){const e=ic.nativeDesc(n,i,c,t.Collection,t.DefinitionId,this.workspace,this.translate);switch(e.datatype){case"boolean":case"hierarchyid":case"geography":return}this._dimKeyExpressionDesc=e}}catch(n){}}return this._dimKeyExpressionDesc}isDisplayDimensionDesc(e){return!!e&&"entity"===e.datatype}isDisplayDimension(e,t){const n=this.dimKeyExpressionDesc(e,t);return this.isDisplayDimensionDesc(n)}showDisplayExpression(e,t){return this.isDisplayDimension(e.KeyExpression,t)}showDimensionAttributes(e,t){return this.isDisplayDimension(e.KeyExpression,t)}showShowAsTree(e,t){const n=this.dimKeyExpressionDesc(e.KeyExpression,t);return ic.canShowAsTree(n,this.workspace,this.translate)}showDimensionControl(e,t){const n=this.dimKeyExpressionDesc(e.KeyExpression,t);return!!n&&"entity"!==n.datatype}validateDimension(e,t){if(e){e.serverErrors={};for(const t of e.Attributes)t.serverErrors={};try{const t=zi.parseSingle(e.KeyExpression);if(t){const e=t.aggregations(),n=t.parameters(),c=t.columnAccesses();e.length>0?i(`Expression cannot contain aggregation functions like '${e[0].name}'.`):n.length>0?i(`Expression cannot contain parameters like '${n[0]}'.`):0===c.length&&i("Expression must contain at least one column access.")}else i("Expression cannot be empty.")}catch(o){i(o.message)}if(this.showDisplayExpression(e,t))try{const t=zi.parseSingle(e.DisplayExpression);if(t){const e=t.aggregations(),n=t.parameters();e.length>0?c(`Expression cannot contain aggregation functions like '${e[0].name}'.`):n.length>0&&c(`Expression cannot contain parameters like '${n[0]}'.`)}}catch(o){c(o.message)}if(this.showDimensionAttributes(e,t))for(const t of e.Attributes){function n(e){t.serverErrors.Expression=t.serverErrors.Expression||[],t.serverErrors.Expression.push(e)}try{const e=zi.parseSingle(t.Expression);if(e){const t=e.aggregations(),i=e.parameters();t.length>0?n(`Expression cannot contain aggregation functions like '${t[0].name}'.`):i.length>0&&n(`Expression cannot contain parameters like '${i[0]}'.`)}else n("Expression cannot be empty.")}catch(o){n(o.message)}}0===Object.keys(e.serverErrors).length&&delete e.serverErrors;for(const t of e.Attributes)0===Object.keys(t.serverErrors).length&&delete t.serverErrors}function i(t){e.serverErrors.KeyExpression=e.serverErrors.KeyExpression||[],e.serverErrors.KeyExpression.push(t)}function c(t){e.serverErrors.DisplayExpression=e.serverErrors.DisplayExpression||[],e.serverErrors.DisplayExpression.push(t)}}onSetDimOrderDirection(e,t){t>=0&&(e.OrderDirection=null);for(let n=0;n<e.Attributes.length;n++)n!==t&&(e.Attributes[n].OrderDirection=null);this.dimToEditHasChanged=!0}getColumns(e){return e.Columns=e.Columns||[],e.Columns}getRows(e){return e.Rows=e.Rows||[],e.Rows}onConfigureDimension(e,t,n){this.dimToEditHasChanged=!1;const i=t[e]||this.createDimension(),c=JSON.parse(JSON.stringify(i));this.dimToEdit=c,this.modelRef=n,this.dimToEditIsRow=t===n.Rows,this.modalService.open(this.dimensionConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.dimToEditHasChanged&&(t[e]=c,this.showDisplayExpression(c,n)||delete c.DisplayExpression,this.showDimensionAttributes(c,n)||(c.Attributes=[]),this.showClearOrderDirectionMessage(c)&&c.OrderDirection&&n.Measures&&n.Measures.forEach(e=>delete e.OrderDirection),this.validateModel(n),this.synchronizeParameters(n),this.onDefinitionChange(n))},e=>{})}showClearOrderDirectionMessage(e){return this.dimToEditIsRow&&(!!e.OrderDirection||e.Attributes&&e.Attributes.some(e=>!!e.OrderDirection))}onCreateRow(e){this.onConfigureDimension(e.Rows.length,e.Rows,e)}onConfigureRow(e,t){this.onConfigureDimension(e,t.Rows,t)}onDeleteRow(e,t){t.Rows.splice(e,1),this.onDefinitionChange(t)}onCreateColumn(e){this.onConfigureDimension(e.Columns.length,e.Columns,e)}onConfigureColumn(e,t){this.onConfigureDimension(e,t.Columns,t)}onDeleteColumn(e,t){t.Columns.splice(e,1),this.onDefinitionChange(t)}onDeleteAttribute(e,t){t.Attributes.splice(e,1),this.dimToEditHasChanged=!0}onInsertAttribute(e){e.Attributes.push({Localize:!1}),this.dimToEditHasChanged=!0}rowDrop(e,t){Object(j.h)(t,e.previousIndex,e.currentIndex)}canApplyDimension(e){return!!e.KeyExpression}getMeasures(e){return e.Measures=e.Measures||[],e.Measures}onCreateMeasure(e){this.onConfigureMeasure(e.Measures.length,e)}onConfigureMeasure(e,t){this.measureToEditHasChanged=!1;const n=Object.assign({},t.Measures[e]||this.createMeasure());this.measureToEdit=n,this.modelRef=t,this.measureShowAdvancedOptions=!!(n.Control||n.DangerWhen||n.WarningWhen||n.SuccessWhen),this.modalService.open(this.measureConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.measureToEditHasChanged&&(t.Measures[e]=n,n.OrderDirection&&(t.Rows&&t.Rows.forEach(e=>{delete e.OrderDirection,e.Attributes&&e.Attributes.forEach(e=>delete e.OrderDirection)}),t.Measures.forEach(e=>{e!==n&&delete e.OrderDirection})),this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))},e=>{})}validateMeasure(e,t){if(!e)return;function n(t){e.serverErrors.Expression=e.serverErrors.Expression||[],e.serverErrors.Expression.push(t)}let i;e.serverErrors={};try{if(i=zi.parseSingle(e.Expression),i){const e=i.unaggregatedColumnAccesses();e.length>0&&n(`Expression cannot contain unaggregated column accesses like '${e[0]}'.`)}else n("Expression cannot be empty.")}catch(o){n(o.message)}if(i){function c(t,n){function c(t){e.serverErrors[n]=e.serverErrors[n]||[],e.serverErrors[n].push(t)}try{const e=zi.parseSingle(t,{placeholderReplacement:i});if(e){const t=e.unaggregatedColumnAccesses();t.length>0&&c(`Expression cannot contain unaggregated column accesses like '${t[0]}'.`)}}catch(o){c(o.message)}}c(e.SuccessWhen,"SuccessWhen"),c(e.WarningWhen,"WarningWhen"),c(e.DangerWhen,"DangerWhen")}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}onDeleteMeasure(e,t){t.Measures.splice(e,1),this.onDefinitionChange(t)}onToggleMeasureAdvancedOptions(){this.measureShowAdvancedOptions=!this.measureShowAdvancedOptions}canApplyMeasure(e){return!!e.Expression}getSelect(e){return e.Select=e.Select||[],e.Select}onDeleteSelect(e,t){t.Select.splice(e,1),this.onDefinitionChange(t)}onCreateSelect(e){this.onConfigureSelect(e.Select.length,e)}onConfigureSelect(e,t){this.selectToEditHasChanged=!1;const n=Object.assign({},t.Select[e]||this.createSelect());this.selectToEdit=n,this.modelRef=t,this.modalService.open(this.selectConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.selectToEditHasChanged&&(t.Select[e]=n,this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))},e=>{})}validateSelect(e,t){if(e){e.serverErrors={};try{const i=zi.parseSingle(e.Expression);if(i){const e=i.aggregations();if(e.length>0)n(`Expression cannot contain aggregation functions like '${e[0].name}'.`);else if("Summary"===t.Type&&t.IsCustomDrilldown){const e=i.parameters();e.length>0&&n(`Expression cannot contain parameters like '${e[0]}'.`)}}else n("Expression cannot be empty.")}catch(i){n(i.message)}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}function n(t){e.serverErrors.Expression=e.serverErrors.Expression||[],e.serverErrors.Expression.push(t)}}canApplySelect(e){return!!e.Expression}getParameters(e){return e.Parameters=e.Parameters||[],e.Parameters}onConfigureParameter(e,t){this.paramToEditHasChanged=!1;const n=Object.assign({},t.Parameters[e]);this.paramToEdit=n,this.modelRef=t,this.modalService.open(this.paramConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.paramToEditHasChanged&&(this.showParamDefaultExpression(n)||delete n.DefaultExpression,t.Parameters[e]=n,this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))},e=>{})}validateParam(e,t){if(!e)return;function n(t){e.serverErrors.DefaultExpression=e.serverErrors.DefaultExpression||[],e.serverErrors.DefaultExpression.push(t)}let i;e.serverErrors={};try{if(i=zi.parseSingle(e.DefaultExpression),i){const e=i.aggregations(),t=i.columnAccesses(),c=i.parameters();e.length>0?n(`Expression cannot contain aggregation functions like '${e[0].name}'.`):t.length>0?n(`Expression cannot contain column access literals like '${t[0]}'.`):c.length>0&&n(`Expression cannot contain parameters like '${c[0]}'.`)}}catch(c){n(c.message)}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}showParamDefaultExpression(e){return"Optional"===e.Visibility}canApplyParam(e){return!0}onConfigureTotalLabels(e){this.totalLabelsToEditHasChanged=!1;const t={ColumnsTotalLabel:e.ColumnsTotalLabel,ColumnsTotalLabel2:e.ColumnsTotalLabel2,ColumnsTotalLabel3:e.ColumnsTotalLabel3,RowsTotalLabel:e.RowsTotalLabel,RowsTotalLabel2:e.RowsTotalLabel2,RowsTotalLabel3:e.RowsTotalLabel3,serverErrors:e.serverErrors};this.totalLabelsToEdit=t,this.modelRef=e,this.modalService.open(this.totalLabelsModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.totalLabelsToEditHasChanged&&(e.ColumnsTotalLabel=t.ColumnsTotalLabel,e.ColumnsTotalLabel2=t.ColumnsTotalLabel2,e.ColumnsTotalLabel3=t.ColumnsTotalLabel3,e.RowsTotalLabel=t.RowsTotalLabel,e.RowsTotalLabel2=t.RowsTotalLabel2,e.RowsTotalLabel3=t.RowsTotalLabel3,this.onDefinitionChange(e))},e=>{})}onFilterChanged(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}showHaving(e){return"Summary"===e.Type}onHavingChanged(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}onOrderByChanged(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}validateModel(e){if(e){if(e.serverErrors={},e.Filter){function t(t){e.serverErrors.Filter=e.serverErrors.Filter||[],e.serverErrors.Filter.push(t)}try{const n=zi.parseSingle(e.Filter);if(n){const e=n.aggregations();e.length>0&&t(`Expression cannot contain aggregation functions like '${e[0].name}'.`)}}catch(c){t(c.message)}}if("Summary"===e.Type&&e.Having){function n(t){e.serverErrors.Having=e.serverErrors.Having||[],e.serverErrors.Having.push(t)}try{const t=zi.parseSingle(e.Having);if(t){const e=t.unaggregatedColumnAccesses();e.length>0&&n(`Expression cannot contain unaggregated column accesses like '${e[0]}'.`)}}catch(c){n(c.message)}}if(("Details"===e.Type||e.IsCustomDrilldown)&&e.OrderBy){function i(t){e.serverErrors.OrderBy=e.serverErrors.OrderBy||[],e.serverErrors.OrderBy.push(t)}try{const t=zi.parse(e.OrderBy,{expectDirKeywords:!0});for(const e of t){const t=e.aggregations(),n=e.columnAccesses(),c=e.parameters();t.length>0?i(`Expression cannot contain aggregation functions like '${t[0].name}'.`):c.length>0?i(`Expression cannot contain parameters like '${c[0]}'.`):0===n.length&&i(`Expression atom cannot be a constant like '${e}'.`)}}catch(c){i(c.message)}}if("Summary"===e.Type){for(const t of e.Columns)this.validateDimension(t,e);for(const t of e.Rows)this.validateDimension(t,e);for(const t of e.Measures)this.validateMeasure(t,e)}if("Details"===e.Type||e.IsCustomDrilldown)for(const t of e.Select)this.validateSelect(t,e);for(const t of e.Parameters)this.validateParam(t,e);0===Object.keys(e.serverErrors).length&&delete e.serverErrors}}synchronizeParameters(e){try{const t=e,{parameters:n}=ic.getReportInfos(t,this.workspace,this.translate);if(0===n.length)e.Parameters=[];else{const t={};n.forEach(e=>t[e.keyLower]=e);const i=Object.keys(t),c=e.Parameters.filter(e=>!!t[e.Key.toLowerCase()]),o={};c.forEach(e=>o[e.Key.toLowerCase()]=e);for(const e of i){const n=t[e];let i=o[e];i||(i={Id:0,Visibility:n.isRequired?"Required":"Optional"},o[e]=i,c.push(i)),i.Key=n.key}e.Parameters=c}}catch(t){console.error(t.message)}}controlSimpleChoices(){return Object(Mi.i)(this.translate)}controlEntityChoices(){return Object(Mi.a)(this.workspace,this.translate,!0)}showOptions(e){return!!e&&Object(Mi.e)(e)}get commandsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}get isMultilingual(){return!!this.ws.settings.SecondaryLanguageId||!!this.ws.settings.TernaryLanguageId}togglePreviewDrilldown(e){this.previewDrilldown=!this.previewDrilldown,this._currentModelModified=!0,this.onDefinitionChange(e)}onDeleteRole(e,t){t>=0&&e.Roles.splice(t,1)}onInsertRole(e){e.Roles.push({Id:0})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-report-definitions-details"]],viewQuery:function(e,t){if(1&e&&(c.Qc(Zx,3),c.Qc(eT,3),c.Qc(tT,3),c.Qc(nT,3),c.Qc(iT,3)),2&e){let e;c.zc(e=c.dc())&&(t.dimensionConfigModal=e.first),c.zc(e=c.dc())&&(t.measureConfigModal=e.first),c.zc(e=c.dc())&&(t.selectConfigModal=e.first),c.zc(e=c.dc())&&(t.paramConfigModal=e.first),c.zc(e=c.dc())&&(t.totalLabelsModal=e.first)}},features:[c.wb],decls:18,vars:15,consts:[["collection","ReportDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["dimensionConfigModal",""],["measureConfigModal",""],["selectConfigModal",""],["paramConfigModal",""],["totalLabelsModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"p-2","flex-grow-1","h-100","overflow-auto"],[1,"form-group"],["for","collection",1,"small"],["id","collection","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["collection","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","form-group",3,"is-invalid",4,"ngIf"],["id","search","type","text","autocomplete","off",1,"form-control","t-studio-input",2,"text-shadow","none",3,"ngModel","placeholder","ngModelChange"],["cdkDropList","","cdkDropListSortingDisabled","",1,"t-studio-source-area",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["fields","cdkDropList"],["cdkDrag","",3,"dblclick",4,"ngFor","ngForOf"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","title",1,"small"],["id","title","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],[1,"small","d-block"],[1,"custom-control","custom-radio","custom-control-inline","mx-0"],["type","radio","name","type","id","type_summary","value","Summary",1,"custom-control-input",3,"checked","change"],["for","type_summary",1,"custom-control-label"],["type","radio","name","type","id","type_details","value","Details",1,"custom-control-input",3,"checked","change"],["for","type_details",1,"custom-control-label"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["rows","cdkDropList"],["class","py-1 px-2 t-drag-label",4,"ngIf"],["class","t-studio-drop-row t-draggable","cdkDrag","",4,"ngFor","ngForOf"],["columns","cdkDropList"],["measures","cdkDropList"],["class","custom-control custom-checkbox",4,"ngIf"],["class","custom-control custom-checkbox pt-2",4,"ngIf"],["cdkDropList","",1,"t-studio-drop-area",2,"height","10rem",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["select","cdkDropList"],["for","orderby",1,"small"],["id","orderby","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["orderby","ngModel"],["for","top",1,"small"],["id","top","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["top","ngModel"],["for","filter",1,"small"],["rows","6","id","filter","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["filter","ngModel"],["class","form-group",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","iscustomdrilldown",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","iscustomdrilldown",1,"custom-control-label"],[1,"pt-3"],["drilldown_select","cdkDropList"],["for","drilldown_orderby",1,"small"],["id","drilldown_orderby","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["type","checkbox","id","previewdrilldown",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","previewdrilldown",1,"custom-control-label"],["class","text-truncate t-studio-section-header t-pointer",3,"click",4,"ngIf"],["class","p-2 t-studio-section",3,"d-none",4,"ngIf"],[1,"custom-control","custom-checkbox","form-group"],["type","checkbox","id","showInMainMenu",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showInMainMenu",1,"custom-control-label"],["class","form-group t-text-whitish",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"flex-grow-1"],[1,"col","bg-light","border","shadow","h-100"],["mode","preview",1,"h-100",3,"previewDefinition","showChart","disableDrilldown"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],[3,"value"],["for","definitionId",1,"small"],["id","definitionId",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionId","ngModel"],["value",""],["cdkDrag","",3,"dblclick"],[1,"t-studio-source-row","t-draggable"],[1,"text-truncate","d-flex"],[1,"btn","btn-sm","m-0","py-0","px-2","border-0","text-white","t-pointer","t-transparent",3,"disabled","click"],["class","t-studio-source-row",4,"cdkDragPlaceholder"],[1,"t-studio-source-row"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","title2",1,"small"],["id","title2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title2","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","title3",1,"small"],["id","title3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title3","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],[1,"py-1","px-2","t-drag-label"],[1,"small","t-studio-area-watermark"],["cdkDrag","",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],["type","checkbox","id","showColumnsTotal",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showColumnsTotal",1,"custom-control-label"],["type","checkbox","id","showRowsTotal",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showRowsTotal",1,"custom-control-label"],[1,"custom-control","custom-checkbox","pt-2"],[1,"btn","btn-sm","t-text-whitish","btn-link","p-0","border-0","font-weight-normal",3,"click"],["for","having",1,"small"],["rows","6","id","having","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["having","ngModel"],["cdkDropList","",1,"t-studio-drop-area",2,"border-style","solid",3,"cdkDropListData","cdkDropListDropped"],["for","chart",1,"small"],["id","chart",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["chart","ngModel"],["type","checkbox","id","defaultsToChart",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","defaultsToChart",1,"custom-control-label"],[1,"form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],[1,"p-0"],["theme","dark",3,"ngModel","showCreate","ngModelChange"],["rolemodel","ngModel"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"small","t-light-danger","text-wrap"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12"],["for","keyexpression",1,"small"],["id","keyexpression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["keyexpression","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"form-group","col-12","col-sm-6"],["for","label",1,"small"],["id","label","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["class","form-group col-12 col-sm-6",4,"ngIf"],["for","orderdirection",1,"small"],["id","orderdirection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["autoexpandlevelfield",""],["class","form-group col-12 overflow-auto",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","displayexpression",1,"small"],["id","displayexpression","type","text","autocomplete","off",1,"form-control","t-studio-input","flex-grow-1",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["displayexpression","ngModel"],["ngbDropdown","","container","body","class","flex-grow-0",3,"placement",4,"ngIf"],["ngbDropdown","","container","body",1,"flex-grow-0",3,"placement"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1","t-no-arrow"],["icon","ellipsis-v"],["ngbDropdownMenu","",1,"t-studio-dropdown"],["type","checkbox","id","dimlocalize",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","dimlocalize",1,"custom-control-label","t-large"],["for","label2",1,"small"],["id","label2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","label3",1,"small"],["id","label3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","showastree",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showastree",1,"custom-control-label"],["for","autoexpandlevel",1,"small"],["id","autoexpandlevel","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["type","checkbox","id","autoexpandlevel",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","autoexpandlevel",1,"custom-control-label"],[1,"form-group","col-12","overflow-auto"],[1,"small","font-weight-normal"],[2,"width","1px"],[2,"width","30%"],[2,"width","20%"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1",3,"click"],["cdkDrag","","cdkDragLockAxis","y"],[4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["attexpression","ngModel"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["attlabel","ngModel"],["class","p-0",4,"ngIf"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","m-0","t-no-arrow"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label","t-large",3,"for"],[1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["dimcontrol","ngModel"],["disabled",""],["class","form-group w-100",4,"ngIf"],[1,"form-group","w-100"],[3,"control","isEdit","ngModel","ngModelChange"],["dimcontroloptions","ngModel"],[1,"col-12"],["icon","info-circle"],["for","expression",1,"small"],["id","expression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["expression","ngModel"],["class","form-group col-12",4,"ngIf"],[1,"btn","btn-sm","t-text-whitish","btn-link","py-0","font-weight-normal",3,"click"],["measureAdvancedOptions",""],["for","successwhen",1,"small"],["id","successwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["successwhen","ngModel"],["for","warningwhen",1,"small"],["id","warningwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["warningwhen","ngModel"],["for","dangerwhen",1,"small"],["id","dangerwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["dangerwhen","ngModel"],["measurecontrol","ngModel"],["measurecontroloptions","ngModel"],["id","expression","type","text","autocomplete","off",1,"form-control","t-studio-input","flex-grow-1",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["selectcontrol","ngModel"],["type","checkbox","id","selectlocalize",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","selectlocalize",1,"custom-control-label","t-large"],["selectcontroloptions","ngModel"],["for","key",1,"small"],["id","key",1,"form-control","t-studio-input",2,"opacity","0.5"],[1,"w-100"],["for","visibility",1,"small"],["id","visibility",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["value","Optional"],["value","Required"],["paramcontrol","ngModel"],["for","defaultexpression",1,"small"],["id","defaultexpression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["defaultexpression","ngModel"],["paramcontroloptions","ngModel"],[1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","columnstotallabel",1,"small"],["id","columnstotallabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel","ngModel"],["for","columnstotallabel2",1,"small"],["id","columnstotallabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel2","ngModel"],["for","columnstotallabel3",1,"small"],["id","columnstotallabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel3","ngModel"],["for","rowstotallabel",1,"small"],["id","rowstotallabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["rowstotallabel","ngModel"],["for","rowstotallabel2",1,"small"],["id","rowstotallabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","rowstotallabel3",1,"small"],["id","rowstotallabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,cT,3,3,"ng-template",null,1,c.Kc),c.Jc(4,Oz,1,1,"ng-template",null,2,c.Kc),c.Jc(6,_z,1,1,"ng-template",null,3,c.Kc),c.Jc(8,gL,48,49,"ng-template",null,4,c.Kc),c.Jc(10,CL,46,45,"ng-template",null,5,c.Kc),c.Jc(12,_L,45,46,"ng-template",null,6,c.Kc),c.Jc(14,BL,57,45,"ng-template",null,7,c.Kc),c.Jc(16,ik,21,11,"ng-template",null,8,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5);c.nc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"ReportDefinitions"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.qc(14,ck))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,C.l,ee.a,te.n,te.m,te.i,te.j,C.k,C.p,te.c,j.f,te.l,te.a,GC,te.k,te.o,j.b,j.d,$s,G.l,G.r,G.p,j.e,j.c,Xx],pipes:[K.c],encapsulation:2}),e})();function rk(e,t){if(1&e&&(c.Sb(0,"div",17),c.Sb(1,"span",18),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",19),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("Center",e,"Name")),c.zb(3),c.Mc(n.c[e].Code)}}function sk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center"),"\n")}function lk(e,t){if(1&e&&(c.Sb(0,"span",20),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.ws.getMultilingualValue("Center",e,"Name"))}}function ak(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function uk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function dk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}function bk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_Abstract")," ")}function gk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_BusinessUnit")," ")}function fk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_CostOfSales")," ")}function mk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_SellingGeneralAndAdministration")," ")}function hk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_SharedExpenseControl")," ")}function pk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_InvestmentPropertyUnderConstructionOrDevelopmentExpendituresControl")," ")}function Sk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_CurrentInventoriesInTransitExpendituresControl")," ")}function vk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_ConstructionInProgressExpendituresControl")," ")}function Ik(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_WorkInProgressExpendituresControl")," ")}function Mk(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Center_CenterType_OtherPL")," ")}const Rk=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},yk=function(e,t){return[e,t]},Dk=function(e){return{template:e,expression:"CreatedById eq me"}},wk=function(e){return[e]},Ek=function(e){return{template:e,expression:"CenterType eq ' Abstract'"}},Ck=function(e){return{template:e,expression:"CenterType eq ' BusinessUnit'"}},xk=function(e){return{template:e,expression:"CenterType eq ' CostOfSales'"}},Tk=function(e){return{template:e,expression:"CenterType eq ' SellingGeneralAndAdministration'"}},zk=function(e){return{template:e,expression:"CenterType eq ' SharedExpenseControl'"}},Lk=function(e){return{template:e,expression:"CenterType eq ' InvestmentPropertyUnderConstructionOrDevelopmentExpendituresControl'"}},kk=function(e){return{template:e,expression:"CenterType eq ' CurrentInventoriesInTransitExpendituresControl'"}},Ok=function(e){return{template:e,expression:"CenterType eq ' ConstructionInProgressExpendituresControl'"}},Ak=function(e){return{template:e,expression:"CenterType eq ' WorkInProgressExpendituresControl'"}},Nk=function(e){return{template:e,expression:"CenterType eq ' OtherPL'"}},_k=function(e,t,n,i,c,o,r,s,l,a){return[e,t,n,i,c,o,r,s,l,a]},Jk=function(e,t){return{CreatedBy:e,CenterType:t}};let Pk=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.centersApi=this.api.centersApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.centersApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.centersApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("centers","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.centersApi=this.api.centersApi(this.notifyDestruct$)}get c(){return this.ws.Center}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-centers-master"]],features:[c.wb],decls:34,vars:64,consts:[["collection","Center","selectDefault","Code,CenterType","selectForTiles","Code,CenterType",3,"mode","showCreateButton","filterDefault","enableTreeView","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["abstract",""],["businessunit",""],["cos",""],["selling",""],["shared",""],["rentals",""],["transit",""],["construction",""],["wip",""],["opl",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,rk,6,2,"ng-template",null,1,c.Kc),c.Jc(4,sk,2,3,"ng-template",null,2,c.Kc),c.Jc(6,lk,2,1,"ng-template",null,3,c.Kc),c.Jc(8,ak,2,3,"ng-template",null,4,c.Kc),c.Jc(10,uk,2,3,"ng-template",null,5,c.Kc),c.Jc(12,dk,2,3,"ng-template",null,6,c.Kc),c.Jc(14,bk,2,3,"ng-template",null,7,c.Kc),c.Jc(16,gk,2,3,"ng-template",null,8,c.Kc),c.Jc(18,fk,2,3,"ng-template",null,9,c.Kc),c.Jc(20,mk,2,3,"ng-template",null,10,c.Kc),c.Jc(22,hk,2,3,"ng-template",null,11,c.Kc),c.Jc(24,pk,2,3,"ng-template",null,12,c.Kc),c.Jc(26,Sk,2,3,"ng-template",null,13,c.Kc),c.Jc(28,vk,2,3,"ng-template",null,14,c.Kc),c.Jc(30,Ik,2,3,"ng-template",null,15,c.Kc),c.Jc(32,Mk,2,3,"ng-template",null,16,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13),l=c.Ac(15),a=c.Ac(17),u=c.Ac(19),d=c.Ac(21),b=c.Ac(23),g=c.Ac(25),f=c.Ac(27),m=c.Ac(29),h=c.Ac(31),p=c.Ac(33);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("enableTreeView",!0)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,11,"Centers"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(23,yk,c.uc(13,Rk,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(18,Rk,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.sc(61,Jk,c.rc(28,wk,c.rc(26,Dk,s)),c.yc(50,_k,[c.rc(30,Ek,l),c.rc(32,Ck,a),c.rc(34,xk,u),c.rc(36,Tk,d),c.rc(38,zk,b),c.rc(40,Lk,g),c.rc(42,kk,f),c.rc(44,Ok,m),c.rc(46,Ak,h),c.rc(48,Nk,p)])))}},directives:[Tt.a],pipes:[K.c],encapsulation:2}),e})();var Fk=n("X/EE");function Vk(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function qk(e,t){if(1&e&&(c.Sb(0,"h2",19),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const jk=function(){return{updateOn:"blur"}};function $k(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,jk))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Uk(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,jk))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Kk(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",21),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,jk))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Bk(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function Hk(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,jk))}}function Qk(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Bk,2,1,"div",11),c.Jc(3,Hk,1,3,"t-text-editor",22),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Wk(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function Gk(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,jk))}}function Yk(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Wk,2,1,"div",11),c.Jc(3,Gk,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Xk(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function Zk(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,jk))}}function eO(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Xk,2,1,"div",11),c.Jc(3,Zk,1,3,"t-text-editor",12),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function tO(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Code)}}function nO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Code)("ngModelOptions",c.qc(2,jk))}}function iO(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"t-restricted",14),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CenterType),c.zb(1),c.Nc(" ",c.ic(3,2,t.centerTypeLookup(null==e?null:e.CenterType))," ")}}function cO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.CenterType=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.CenterType)("choices",t.centerTypeChoices)}}function oO(e,t){if(1&e&&(c.Sb(0,"t-view-link",26),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("itemId",null==e?null:e.ManagerId),c.zb(1),c.Mc(t.ws.getMultilingualValue("Agent",null==e?null:e.ManagerId,"Name"))}}function rO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-agents-picker",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ManagerId=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.ManagerId)}}function sO(e,t){if(1&e&&(c.Sb(0,"t-view-link",28),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("itemId",null==e?null:e.ParentId),c.zb(1),c.Mc(t.ws.getMultilingualValue("Center",null==e?null:e.ParentId,"Name"))}}function lO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ParentId=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.ParentId)}}function aO(e,t){if(1&e&&(c.Sb(0,"t-form-group",29),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsLeaf")),c.zb(3),c.Mc(c.ic(4,4,null!=e&&e.IsLeaf?"Yes":"No"))}}function uO(e,t){if(1&e&&(c.Sb(0,"t-form-group",29),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",30),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(2),c.nc("entity",e)}}function dO(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,qk,2,1,"h2",6),c.Jc(2,$k,2,7,"t-text-editor",7),c.Jc(3,Uk,2,7,"t-text-editor",8),c.Jc(4,Kk,2,7,"t-text-editor",8),c.Rb(),c.Jc(5,Qk,4,6,"t-form-group",9),c.Jc(6,Yk,4,6,"t-form-group",9),c.Jc(7,eO,4,6,"t-form-group",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Jc(10,tO,2,1,"div",11),c.Jc(11,nO,1,3,"t-text-editor",12),c.Rb(),c.Sb(12,"t-form-group",10),c.hc(13,"translate"),c.Jc(14,iO,4,4,"div",11),c.Jc(15,cO,1,2,"t-selector",13),c.Rb(),c.Sb(16,"t-form-group",10),c.hc(17,"translate"),c.Sb(18,"t-restricted",14),c.Jc(19,oO,2,2,"t-view-link",15),c.Rb(),c.Jc(20,rO,1,1,"t-agents-picker",16),c.Rb(),c.Sb(21,"t-form-group",10),c.hc(22,"translate"),c.Jc(23,sO,2,2,"t-view-link",17),c.Jc(24,lO,1,1,"t-centers-picker",16),c.Rb(),c.Jc(25,aO,5,6,"t-form-group",18),c.Jc(26,uO,3,4,"t-form-group",18)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,27,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(13,29,"Center_CenterType"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.CenterType),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(17,31,"Center_Manager"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ManagerId),c.zb(2),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ManagerId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(22,33,"TreeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ParentId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",!n)}}function bO(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function gO(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const fO=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},mO=function(e,t){return[e,t]};let hO=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.centersApi=this.api.centersApi(this.notifyDestruct$),this.expand="Parent,Manager",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.onActivate=e=>{e&&e.Id&&this.centersApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.centersApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("centers","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.centersApi=this.api.centersApi(this.notifyDestruct$)}get centerTypeChoices(){const e=Object(Fk.a)(this.workspace,this.translate).properties.CenterType;return Object(Mi.c)(e)}centerTypeLookup(e){return Object(Fk.a)(this.workspace,this.translate).properties.CenterType.format(e)}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-centers-details"]],features:[c.wb],decls:10,vars:26,consts:[["collection","Center",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../agents/",3,"itemId",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../centers",3,"itemId",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","choices","ngModelChange"],["link","../../agents/",3,"itemId"],[3,"ngModel","ngModelChange"],["link","../../centers",3,"itemId"],[1,"t-form-group",3,"label"],["collection","Center","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Vk,2,1,"ng-template",null,1,c.Kc),c.Jc(4,dO,27,35,"ng-template",null,2,c.Kc),c.Jc(6,bO,2,3,"ng-template",null,3,c.Kc),c.Jc(8,gO,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,9,"Centers"))("detailsCrumb",e)("documentTemplate",n)("actions",c.sc(23,mO,c.vc(11,fO,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(17,fO,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,hn.a,pe.a,te.m,te.i,te.j,pn.a,ss,Db,Au,me.a],pipes:[K.c],encapsulation:2}),e})();function pO(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",9),c.Sb(4,"span",8),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("EntryType",e,"Name")),c.zb(3),c.Mc(n.c[e].Code)}}function SO(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"EntryType"),"\n")}function vO(e,t){if(1&e&&(c.Sb(0,"span",10),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.ws.getMultilingualValue("EntryType",e,"Name"))}}function IO(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function MO(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function RO(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}const yO=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},DO=function(e,t){return[e,t]},wO=function(e){return{template:e,expression:"CreatedById eq me"}},EO=function(e){return[e]},CO=function(e){return{CreatedBy:e}};let xO=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.entryTypesApi=this.api.entryTypesApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.entryTypesApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onDeactivate=e=>this.entryTypesApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.entryTypesApi=this.api.entryTypesApi(this.notifyDestruct$)}get view(){return"entry-types"}get c(){return this.ws.EntryType}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-entry-types-master"]],features:[c.wb],decls:14,vars:32,consts:[["collection","EntryType","selectDefault","IsAssignable","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,pO,6,2,"ng-template",null,1,c.Kc),c.Jc(4,SO,2,3,"ng-template",null,2,c.Kc),c.Jc(6,vO,2,1,"ng-template",null,3,c.Kc),c.Jc(8,IO,2,3,"ng-template",null,4,c.Kc),c.Jc(10,MO,2,3,"ng-template",null,5,c.Kc),c.Jc(12,RO,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",c.ic(1,11,"EntryTypes"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.sc(23,DO,c.uc(13,yO,o,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.uc(18,yO,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.rc(30,CO,c.rc(28,EO,c.rc(26,wO,s))))}},directives:[Tt.a],pipes:[K.c],encapsulation:2}),e})();var TO=n("wfSO");function zO(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function LO(e,t){if(1&e&&(c.Sb(0,"h2",24),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Mc(t.getMultilingualValue(e,"Name",t.ws))}}const kO=function(){return{updateOn:"blur"}};function OO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",25),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",c.qc(6,kO))("placeholder",c.ic(1,4,"Name")+t.ws.primaryPostfix+"...")}}function AO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",26),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name2=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",c.qc(6,kO))("placeholder",c.ic(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function NO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",26),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Name3=t}),c.hc(1,"translate"),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",c.qc(6,kO))("placeholder",c.ic(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function _O(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name)}}function JO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name)("ngModelOptions",c.qc(2,kO))}}function PO(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,_O,2,1,"div",13),c.Jc(3,JO,1,3,"t-text-editor",14),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function FO(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name2)}}function VO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",28),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name2)("ngModelOptions",c.qc(2,kO))}}function qO(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,FO,2,1,"div",13),c.Jc(3,VO,1,3,"t-text-editor",23),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function jO(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Name3)}}function $O(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",28),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Name3)("ngModelOptions",c.qc(2,kO))}}function UO(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,jO,2,1,"div",13),c.Jc(3,$O,1,3,"t-text-editor",23),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function KO(e,t){if(1&e&&(c.Sb(0,"span",29),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.nc("title",null==e?null:e.Code),c.zb(1),c.Mc(null==e?null:e.Code)}}function BO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("disabled",e.IsSystem)("ngModel",e.Code)("ngModelOptions",c.qc(3,kO))}}function HO(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Concept)}}function QO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Concept=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Concept)("ngModelOptions",c.qc(2,kO))}}function WO(e,t){if(1&e&&(c.Sb(0,"t-view-link",31),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("itemId",null==e?null:e.ParentId),c.zb(1),c.Mc(t.ws.getMultilingualValue("EntryType",null==e?null:e.ParentId,"Name"))}}function GO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ParentId=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("disabled",e.IsSystem)("ngModel",e.ParentId)}}function YO(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(c.ic(2,1,null!=e&&e.IsAssignable?"Yes":"No"))}}function XO(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",33),c.Sb(1,"input",34),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.IsAssignable=t}),c.Rb(),c.Sb(2,"label",35),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc().model;c.zb(1),c.nc("ngModel",e.IsAssignable)}}function ZO(e,t){if(1&e&&(c.Sb(0,"t-form-group",18),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(3),c.Mc(c.ic(4,4,e?e.IsActive?"Active":"Inactive":""))}}function eA(e,t){if(1&e&&(c.Sb(0,"t-form-group",18),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"IsSystem")),c.zb(3),c.Mc(c.ic(4,4,e?e.IsSystem?"Yes":"No":""))}}function tA(e,t){if(1&e&&(c.Sb(0,"div",36),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.Description)}}function nA(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",28),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Description=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.Description)("ngModelOptions",c.qc(2,kO))}}function iA(e,t){if(1&e&&(c.Sb(0,"div",36),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Description2)}}function cA(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",28),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description2=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description2)("ngModelOptions",c.qc(2,kO))}}function oA(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,iA,2,1,"div",22),c.Jc(3,cA,1,3,"t-multiline-editor",23),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function rA(e,t){if(1&e&&(c.Sb(0,"div",36),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Description3)}}function sA(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-multiline-editor",28),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description3=t}),c.Rb()}if(2&e){const e=c.gc(2).model;c.nc("ngModel",e.Description3)("ngModelOptions",c.qc(2,kO))}}function lA(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,rA,2,1,"div",22),c.Jc(3,sA,1,3,"t-multiline-editor",23),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.gc();c.nc("label",c.ic(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function aA(e,t){if(1&e&&(c.Sb(0,"t-form-group",5),c.Jc(1,LO,2,1,"h2",6),c.Jc(2,OO,2,7,"t-text-editor",7),c.Jc(3,AO,2,7,"t-text-editor",8),c.Jc(4,NO,2,7,"t-text-editor",8),c.Rb(),c.Jc(5,PO,4,6,"t-form-group",9),c.Jc(6,qO,4,6,"t-form-group",9),c.Jc(7,UO,4,6,"t-form-group",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Jc(10,KO,2,2,"span",11),c.Jc(11,BO,1,4,"t-text-editor",12),c.Rb(),c.Sb(12,"t-form-group",10),c.hc(13,"translate"),c.Jc(14,HO,2,1,"span",13),c.Jc(15,QO,1,3,"t-text-editor",14),c.Rb(),c.Sb(16,"t-form-group",10),c.hc(17,"translate"),c.Sb(18,"t-restricted",15),c.Jc(19,WO,2,2,"t-view-link",16),c.Rb(),c.Jc(20,GO,1,2,"t-entry-types-picker",17),c.Rb(),c.Sb(21,"t-form-group",18),c.hc(22,"translate"),c.Jc(23,YO,3,3,"div",13),c.Jc(24,XO,4,1,"div",19),c.Rb(),c.Jc(25,ZO,5,6,"t-form-group",20),c.Jc(26,eA,5,6,"t-form-group",20),c.Nb(27,"div",21),c.Sb(28,"t-form-group",10),c.hc(29,"translate"),c.Jc(30,tA,2,1,"div",22),c.Jc(31,nA,1,3,"t-multiline-editor",23),c.Rb(),c.Jc(32,oA,4,6,"t-form-group",9),c.Jc(33,lA,4,6,"t-form-group",9)),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n&&i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isSecondaryLanguage),c.zb(1),c.nc("ngIf",n&&i.ws.isTernaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(9,32,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(13,34,"AccountType_Concept"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Concept),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(17,36,"TreeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ParentId),c.zb(2),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Parent),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(22,38,"IsAssignable")),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",!n),c.zb(2),c.nc("label",c.ic(29,40,"Description")+i.ws.primaryPostfix)("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Description),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId)}}function uA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function dA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}const bA=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},gA=function(e,t){return[e,t]};let fA=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.entryTypesApi=this.api.entryTypesApi(this.notifyDestruct$),this.expand="Parent",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsAssignable=!0,e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.IsSystem=!1,t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.entryTypesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.entryTypesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.entryTypesApi=this.api.entryTypesApi(this.notifyDestruct$)}get view(){return"entry-types"}get ws(){return this.workspace.currentTenant}get masterCrumb(){const e=Object(TO.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-entry-types-details"]],features:[c.wb],decls:9,vars:25,consts:[["collection","EntryType",3,"idString","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[3,"title",4,"ngIf"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../entry-types",3,"itemId",4,"ngIf"],[3,"disabled","ngModel","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"w-100"],["class","t-multiline",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"title"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["link","../../entry-types",3,"itemId"],[3,"disabled","ngModel","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isAssignable",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isAssignable",1,"custom-control-label","t-pointer"],[1,"t-multiline"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.Jc(1,zO,2,1,"ng-template",null,1,c.Kc),c.Jc(3,aA,34,42,"ng-template",null,2,c.Kc),c.Jc(5,uA,2,3,"ng-template",null,3,c.Kc),c.Jc(7,dA,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4),i=c.Ac(6),o=c.Ac(8);c.nc("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",e)("documentTemplate",n)("actions",c.sc(22,gA,c.vc(10,bA,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.vc(16,bA,o,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,he.a,C.l,hn.a,pe.a,te.m,te.i,te.j,ss,WR,te.a,Lb],pipes:[K.c],encapsulation:2}),e})();const mA=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},hA=function(e,t,n,i){return[e,t,n,i]},pA=function(e){return{template:e,expression:"CreatedById eq me"}},SA=function(e){return{template:e,expression:"AssigneeId eq me"}},vA=function(e,t){return[e,t]},IA=function(e){return{template:e,expression:"State eq 0"}},MA=function(e){return{template:e,expression:"State eq 1"}},RA=function(e){return{template:e,expression:"State eq -1"}},yA=function(e,t,n){return[e,t,n]},DA=function(e,t){return{CreatedBy:e,State:t}};function wA(e,t){if(1&e&&c.Nb(0,"t-master",16),2&e){const e=c.gc(),t=c.Ac(4),n=c.Ac(8),i=c.Ac(6),o=c.Ac(24),r=c.Ac(28),s=c.Ac(26),l=c.Ac(30),a=c.Ac(14),u=c.Ac(16),d=c.Ac(18),b=c.Ac(22),g=c.Ac(20);c.nc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("selectDefault",e.selectDefault)("multiselectActions",c.uc(36,hA,c.vc(12,mA,o,e.onClose,e.showClose,e.hasStatePermission,e.stateTooltip),c.vc(18,mA,r,e.onCancel,e.showCancel,e.hasStatePermission,e.stateTooltip),c.vc(24,mA,s,e.onOpen,e.showOpen,e.hasStatePermission,e.stateTooltip),c.vc(30,mA,l,e.onUncancel,e.showUncancel,e.hasStatePermission,e.stateTooltip)))("filterDefinition",c.sc(58,DA,c.sc(45,vA,c.rc(41,pA,a),c.rc(43,SA,u)),c.tc(54,yA,c.rc(48,IA,d),c.rc(50,MA,b),c.rc(52,RA,g))))}}function EA(e,t){if(1&e&&c.Nb(0,"t-application-page-not-found",17),2&e){const e=c.gc();c.nc("showHome",!e.isPopupMode)}}function CA(e,t){if(1&e&&c.Nb(0,"t-auto-cell",25),2&e){const e=c.gc().id,t=c.gc();c.nc("definitionId",t.definitionId)("entity",t.c[e])}}function xA(e,t){if(1&e&&c.Nb(0,"t-auto-cell",26),2&e){const e=c.gc().id,t=c.gc();c.nc("definitionId",t.definitionId)("entity",t.c[e])}}function TA(e,t){if(1&e&&(c.Sb(0,"div",18),c.Nb(1,"t-auto-cell",19),c.Jc(2,CA,1,2,"t-auto-cell",20),c.Rb(),c.Sb(3,"div",21),c.Sb(4,"div",22),c.Jc(5,xA,1,2,"t-auto-cell",23),c.Rb(),c.Nb(6,"t-auto-cell",24),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("definitionId",n.definitionId)("entity",n.c[e]),c.zb(1),c.nc("ngIf",n.showDocumentPostingDate),c.zb(3),c.nc("ngIf",n.showDocumentMemo),c.zb(1),c.nc("definitionId",n.definitionId)("entity",n.c[e])}}function zA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Document_SerialNumber"),"\n")}function LA(e,t){if(1&e&&(c.Sb(0,"span",27),c.Nb(1,"t-auto-cell",28),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("definitionId",n.definitionId)("entity",n.c[e])}}function kA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function OA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function AA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}function NA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"AssignedToMe")," ")}function _A(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Document_State_0")," ")}function JA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Document_State_minus_1")," ")}function PA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Document_State_1")," ")}function FA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Close")," ")}function VA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Open")," ")}function qA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Cancel")," ")}function jA(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Uncancel")," ")}let $A=(()=>{class e extends xt.a{constructor(e,t,n,i,c){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=c,this.documentsApi=this.api.documentsApi(null,this.notifyDestruct$),this.expand="",this.onClose=e=>this.documentsApi.close(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onCancel=e=>this.documentsApi.cancel(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onOpen=e=>this.documentsApi.open(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.onUncancel=e=>this.documentsApi.uncancel(e,{returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showClose=e=>e.some(e=>{const t=this.ws.get("Document",e);return!!t&&0===t.State}),this.showCancel=e=>e.some(e=>{const t=this.ws.get("Document",e);return!!t&&0===t.State}),this.showOpen=e=>e.some(e=>{const t=this.ws.get("Document",e);return!!t&&1===t.State}),this.showUncancel=e=>e.some(e=>{const t=this.ws.get("Document",e);return!!t&&-1===t.State}),this.hasStatePermission=e=>this.ws.canDo(this.view,"State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.documentsApi=this.api.documentsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{this.isScreenMode&&(this.definitionId=+e.get("definitionId"))})}get view(){return`documents/${this.definitionId}`}get c(){return this.ws.Document}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Documents[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Documents")}get selectDefault(){const e=this.definition;if(this._selectDefaultDefinition!==e){this._selectDefaultDefinition=e;let t="State,Assignee,AssignedAt";e&&e.PostingDateVisibility&&(t="PostingDate,"+t),e&&e.MemoVisibility&&(t+=",Memo"),this._selectDefaultResult=t}return this._selectDefaultResult}get showDocumentPostingDate(){const e=this.definition;return!e||!!e.PostingDateVisibility}get showDocumentMemo(){const e=this.definition;return!e||!!e.MemoVisibility}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(i.e),c.Mb(i.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-documents-master"]],inputs:{definitionId:"definitionId"},features:[c.wb],decls:31,vars:2,consts:[["collection","Document","selectForTiles","PostingDate,State,Memo",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","selectDefault","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["assignedToMe",""],["state_0",""],["state_minus_1",""],["state_1",""],["close",""],["open",""],["cancel",""],["uncancel",""],["collection","Document","selectForTiles","PostingDate,State,Memo",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","selectDefault","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex","justify-content-between"],["collection","Document","path","",3,"definitionId","entity"],["collection","Document","path","PostingDate",3,"definitionId","entity",4,"ngIf"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","Document","path","Memo",3,"definitionId","entity",4,"ngIf"],["collection","Document","path","State",3,"definitionId","entity"],["collection","Document","path","PostingDate",3,"definitionId","entity"],["collection","Document","path","Memo",3,"definitionId","entity"],[1,"text-truncate"],["collection","Document",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(c.Jc(0,wA,1,61,"t-master",0),c.Jc(1,EA,1,1,"ng-template",null,1,c.Kc),c.Jc(3,TA,7,6,"ng-template",null,2,c.Kc),c.Jc(5,zA,2,3,"ng-template",null,3,c.Kc),c.Jc(7,LA,2,2,"ng-template",null,4,c.Kc),c.Jc(9,kA,2,3,"ng-template",null,5,c.Kc),c.Jc(11,OA,2,3,"ng-template",null,6,c.Kc),c.Jc(13,AA,2,3,"ng-template",null,7,c.Kc),c.Jc(15,NA,2,3,"ng-template",null,8,c.Kc),c.Jc(17,_A,2,3,"ng-template",null,9,c.Kc),c.Jc(19,JA,2,3,"ng-template",null,10,c.Kc),c.Jc(21,PA,2,3,"ng-template",null,11,c.Kc),c.Jc(23,FA,2,3,"ng-template",null,12,c.Kc),c.Jc(25,VA,2,3,"ng-template",null,13,c.Kc),c.Jc(27,qA,2,3,"ng-template",null,14,c.Kc),c.Jc(29,jA,2,3,"ng-template",null,15,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,Tt.a,nn,me.a],pipes:[K.c],encapsulation:2}),e})();var UA=n("1G5W");let KA=(()=>{class e{constructor(){this.initialized=!1}initialize(){this.initialized||(this.initialized=!0,window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(this.audioContext=new window.AudioContext))}beep(e,t,n){if(this.initialize(),this.audioContext){const i=this.audioContext.createOscillator(),c=this.audioContext.createGain();i.connect(c),i.frequency.value=t,i.type="square",c.connect(this.audioContext.destination),c.gain.value=.01*e,i.start(this.audioContext.currentTime),i.stop(this.audioContext.currentTime+.001*n)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const BA=["input"];let HA=(()=>{class e{constructor(){this.codeWidth=4,this.prefix="",this.w100=!0,this.isDisabled=!1,this.onChange=e=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{}}writeValue(e){this.input.nativeElement.value=this.format(e)}registerOnChange(e){this.onChange=t=>{e(this.parse(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}ngOnChanges(e){e.codeWidth&&!e.codeWidth.isFirstChange()&&(this.input.nativeElement.value=this.format(this.input.nativeElement.value))}get zeros(){return Object(ph.a)(0,"",this.codeWidth)}format(e){if(null==e||""===e)return"";const t=+e.toString();return Object(ph.a)(t,"",this.codeWidth)}parse(e){if(e&&e.length>this.codeWidth&&(e=void 0),null==e||""===e)return;const t=+e;return isNaN(t)?void 0:t}onBlur(e){this.onTouched(),this.input.nativeElement.value=this.format(this.parse(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-serial-editor"]],viewQuery:function(e,t){if(1&e&&c.Qc(BA,3),2&e){let e;c.zc(e=c.dc())&&(t.input=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&c.Eb("w-100",t.w100)},inputs:{codeWidth:"codeWidth",prefix:"prefix"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.xb],decls:5,vars:3,consts:[[1,"d-flex","flex-nowrap","text-nowrap","w-100"],[1,"t-prefix"],["type","text",1,"form-control","t-input",3,"placeholder","disabled","input","blur"],["input",""]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"span",1),c.Lc(2),c.Rb(),c.Sb(3,"input",2,3),c.cc("input",function(e){return t.onChange(e.target.value)})("blur",function(e){return t.onBlur(e.target.value)}),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Mc(t.prefix),c.zb(1),c.nc("placeholder",t.zeros)("disabled",t.isDisabled))},encapsulation:2}),e})();function QA(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"span",5),c.Lc(2),c.Rb(),c.Lc(3," \xa0\xa0 "),c.Pb()),2&e){const e=c.gc();c.zb(1),c.Eb("text-danger",e.invalid),c.nc("title",e.label),c.zb(1),c.Mc(e.label)}}function WA(e,t){1&e&&c.Nb(0,"fa-icon",6)}function GA(e,t){if(1&e&&(c.Sb(0,"p",9),c.Nb(1,"fa-icon",10),c.Lc(2),c.Rb()),2&e){const e=t.$implicit;c.zb(2),c.Nc(" \xa0",e()," ")}}function YA(e,t){if(1&e&&(c.Sb(0,"div",7),c.Jc(1,GA,3,1,"p",8),c.Rb()),2&e){const e=c.gc();c.zb(1),c.nc("ngForOf",e.errors)}}const XA=["*"];let ZA=(()=>{class e extends Qp.a{}return e.\u0275fac=function(t){return eN(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-form-group-dynamic"]],features:[c.wb],ngContentSelectors:XA,decls:7,vars:6,consts:[["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"d-flex","align-items-center","text-nowrap",3,"ngbPopover","placement"],[4,"ngIf"],[1,"d-flex","flex-grow-1","form-group-container","t-dynamic-container"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["errorsPopover",""],[1,"t-vertical-align-middle","font-weight-bold",3,"title"],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"]],template:function(e,t){if(1&e&&(c.mc(),c.Sb(0,"div",0),c.Jc(1,QA,4,4,"ng-container",1),c.Sb(2,"div",2),c.Jc(3,WA,1,0,"fa-icon",3),c.lc(4),c.Rb(),c.Rb(),c.Jc(5,YA,2,1,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(6);c.nc("ngbPopover",t.invalid?e:null)("placement",t.popoverPlacement),c.zb(1),c.nc("ngIf",t.showLabel),c.zb(1),c.Eb("is-invalid",t.invalid),c.zb(1),c.nc("ngIf",t.areServerErrors)}},directives:[G.C,C.l,ee.a,C.k],encapsulation:2}),e})();const eN=c.Ub(ZA),tN=["confirmModal"],nN=["signatureModal"],iN=["autoGenerateModal"],cN=function(){return[]};function oN(e,t){if(1&e&&c.Nb(0,"t-details",10),2&e){const e=c.gc(),t=c.Ac(4),n=c.Ac(10),i=c.Ac(8),o=c.Ac(12),r=c.Ac(6);c.nc("definitionId",e.definitionId)("createFunc",e.create)("cloneFunc",e.clone)("mode",e.mode)("additionalSelect",e.additionalSelect)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("idString",e.idString)("documentTemplate",n)("isInactive",e.isInactive)("documentHeaderTemplate",i)("actions",c.qc(21,cN))("sidebarTemplate",e.showSidebar?o:null)("registerPristineFunc",e.registerPristineFunc)("isDirtyFunc",e.isDirtyFunc)("extraParams",e.extraParams)("handleFreshExtras",e.handleFreshExtras)("toolbarTemplate",r)("encodeCustomStateFunc",e.encodeCustomStateFunc)("select",e.select)("savePreprocessing",e.savePreprocessing)}}function rN(e,t){if(1&e&&c.Nb(0,"t-application-page-not-found",11),2&e){const e=c.gc();c.nc("showHome",!e.isPopupMode)}}function sN(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.formatSerial(null==e?null:e.SerialNumber))}}function lN(e,t){1&e&&c.Nb(0,"div",14)}function aN(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",15),c.Sb(1,"button",16),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onOpen(t)}),c.Nb(2,"fa-icon",17),c.Sb(3,"span",18),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("placement",t.actionsDropdownPlacement)("ngbTooltip",t.updateStateTooltip(e)),c.zb(1),c.nc("disabled",!t.hasPermissionToUpdateState(e)),c.zb(3),c.Nc("\xa0\xa0",c.ic(5,4,"Open"),"")}}function uN(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",15),c.Sb(1,"button",19),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCancel(t)}),c.Nb(2,"fa-icon",20),c.Sb(3,"span",18),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(),t=e.model,n=e.extras,i=c.gc();c.nc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.cancelTooltip(t,null==n?null:n.RequiredSignatures)),c.zb(1),c.nc("disabled",i.disableCancel(t,null==n?null:n.RequiredSignatures)),c.zb(3),c.Nc("\xa0\xa0",c.ic(5,4,"Cancel"),"")}}function dN(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",15),c.Sb(1,"button",21),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onClose(t)}),c.Nb(2,"fa-icon",22),c.Sb(3,"span",18),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(),t=e.model,n=e.extras,i=c.gc();c.nc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.closeTooltip(t,null==n?null:n.RequiredSignatures)),c.zb(1),c.nc("disabled",i.disableClose(t,null==n?null:n.RequiredSignatures)),c.zb(3),c.Nc("\xa0\xa0",c.ic(5,4,"Close"),"")}}function bN(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",15),c.Sb(1,"button",16),c.cc("click",function(){c.Dc(e);const t=c.gc(),n=t.isEdit,i=t.model,o=c.gc();return!n&&o.onUncancel(i)}),c.Nb(2,"fa-icon",17),c.Sb(3,"span",18),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("placement",t.actionsDropdownPlacement)("ngbTooltip",t.updateStateTooltip(e)),c.zb(1),c.nc("disabled",!t.hasPermissionToUpdateState(e)),c.zb(3),c.Nc("\xa0\xa0",c.ic(5,4,"Uncancel"),"")}}function gN(e,t){if(1&e&&(c.Jc(0,lN,1,0,"div",12),c.Jc(1,aN,6,6,"div",13),c.Jc(2,uN,6,6,"div",13),c.Jc(3,dN,6,6,"div",13),c.Jc(4,bN,6,6,"div",13)),2&e){const e=t.model,n=t.extras,i=t.isEdit,o=c.gc();c.nc("ngIf",!i&&o.showClose(e,null==n?null:n.RequiredSignatures)||o.showClose(e,null==n?null:n.RequiredSignatures)),c.zb(1),c.nc("ngIf",!i&&o.showOpen(e,null==n?null:n.RequiredSignatures)),c.zb(1),c.nc("ngIf",!i&&o.showCancel(e,null==n?null:n.RequiredSignatures)),c.zb(1),c.nc("ngIf",!i&&o.showClose(e,null==n?null:n.RequiredSignatures)),c.zb(1),c.nc("ngIf",!i&&o.showUncancel(e,null==n?null:n.RequiredSignatures))}}function fN(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.Eb("active",t.isStateActive(0,e)),c.zb(2),c.Mc(c.ic(3,3,"Line_State_0"))}}function mN(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.Eb("active",t.isStateActive(1,e)),c.zb(2),c.Mc(c.ic(3,3,"Line_State_1"))}}function hN(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.Eb("active",t.isStateActive(2,e)),c.zb(2),c.Mc(c.ic(3,3,"Line_State_2"))}}function pN(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.Eb("active",t.isStateActive(3,e)),c.zb(2),c.Mc(c.ic(3,3,"Line_State_3"))}}function SN(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.Eb("active",t.isStateActive(4,e)),c.zb(2),c.Mc(c.ic(3,3,"Line_State_4"))}}function vN(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.Eb("active",t.isDocumentStateActive(0,e)),c.zb(2),c.Mc(c.ic(3,3,"Document_State_0"))}}function IN(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.Eb("active",t.isDocumentStateActive(1,e)),c.zb(2),c.Mc(c.ic(3,3,"Document_State_1"))}}function MN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_0")))}function RN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_1")))}function yN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_2")))}function DN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_3")))}function wN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_4")))}function EN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Document_State_0")))}function CN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Document_State_1")))}function xN(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",26),c.Jc(2,fN,4,5,"div",27),c.Jc(3,mN,4,5,"div",27),c.Jc(4,hN,4,5,"div",27),c.Jc(5,pN,4,5,"div",27),c.Jc(6,SN,4,5,"div",27),c.Jc(7,vN,4,5,"div",27),c.Jc(8,IN,4,5,"div",27),c.Rb(),c.Sb(9,"div",28),c.Jc(10,MN,3,3,"span",29),c.Jc(11,RN,3,3,"span",29),c.Jc(12,yN,3,3,"span",29),c.Jc(13,DN,3,3,"span",29),c.Jc(14,wN,3,3,"span",29),c.Jc(15,EN,3,3,"span",29),c.Jc(16,CN,3,3,"span",29),c.Rb(),c.Pb()),2&e){const e=c.gc().model,t=c.gc();c.zb(2),c.nc("ngIf",t.isStateVisible(0,e)),c.zb(1),c.nc("ngIf",t.isStateVisible(1,e)),c.zb(1),c.nc("ngIf",t.isStateVisible(2,e)),c.zb(1),c.nc("ngIf",t.isStateVisible(3,e)),c.zb(1),c.nc("ngIf",t.isStateVisible(4,e)),c.zb(1),c.nc("ngIf",t.isDocumentStateVisible(0,e)),c.zb(1),c.nc("ngIf",t.isDocumentStateVisible(1,e)),c.zb(2),c.nc("ngIf",t.isStateActive(0,e)),c.zb(1),c.nc("ngIf",t.isStateActive(1,e)),c.zb(1),c.nc("ngIf",t.isStateActive(2,e)),c.zb(1),c.nc("ngIf",t.isStateActive(3,e)),c.zb(1),c.nc("ngIf",t.isStateActive(4,e)),c.zb(1),c.nc("ngIf",t.isDocumentStateActive(0,e)),c.zb(1),c.nc("ngIf",t.isDocumentStateActive(1,e))}}function TN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_minus_1")))}function zN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_minus_2")))}function LN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_minus_3")))}function kN(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Line_State_minus_4")))}function ON(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Document_State_minus_1")))}function AN(e,t){if(1&e&&(c.Sb(0,"div",30),c.Jc(1,TN,3,3,"span",29),c.Jc(2,zN,3,3,"span",29),c.Jc(3,LN,3,3,"span",29),c.Jc(4,kN,3,3,"span",29),c.Jc(5,ON,3,3,"span",29),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.nc("ngIf",t.isNegativeStateActive(1,e)),c.zb(1),c.nc("ngIf",t.isNegativeStateActive(2,e)),c.zb(1),c.nc("ngIf",t.isNegativeStateActive(3,e)),c.zb(1),c.nc("ngIf",t.isNegativeStateActive(4,e)),c.zb(1),c.nc("ngIf",t.isNegativeDocumentStateActive(1,e))}}function NN(e,t){if(1&e&&(c.Sb(0,"div",23),c.Jc(1,xN,17,14,"ng-container",24),c.Jc(2,AN,6,5,"ng-template",null,25,c.Kc),c.Rb()),2&e){const e=t.model,n=c.Ac(3),i=c.gc();c.zb(1),c.nc("ngIf",i.isPositiveState(e))("ngIfElse",n)}}function _N(e,t){if(1&e&&(c.Sb(0,"h2",80),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.Nc("",t.formatSerial(null==e?null:e.SerialNumber)," ")}}const JN=function(){return{updateOn:"blur"}};function PN(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-serial-editor",81),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.SerialNumber=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("ngModel",e.SerialNumber)("ngModelOptions",c.qc(4,JN))("codeWidth",t.codeWidth)("prefix",t.serialPrefix)}}function FN(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.PostingDate),c.zb(2),c.Mc(c.ic(3,2,null==e?null:e.PostingDate))}}function VN(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",86),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.PostingDate=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("disabled",t.readonlyDocumentPostingDate(e))("required",t.requireDocumentPostingDate(e))("ngModel",e.PostingDate)("ngModelOptions",c.qc(4,JN))}}function qN(e,t){if(1&e&&(c.Sb(0,"t-form-group",82),c.Jc(1,FN,4,4,"t-restricted",83),c.Jc(2,VN,1,5,"t-date-picker",84),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.gc();c.nc("label",o.labelDocumentPostingDate(t))("labelContextMenu",i)("disableLabelMenu",!(n&&o.showDocumentPostingDateIsCommon(t)))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.PostingDate),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function jN(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Clearance),c.zb(2),c.Mc(t.clearanceDisplay(null==e?null:e.Clearance))}}function $N(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-selector",89),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Clearance=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Clearance)("choices",t.clearanceChoices)}}function UN(e,t){if(1&e&&(c.Sb(0,"t-form-group",87),c.hc(1,"translate"),c.Jc(2,jN,3,2,"t-restricted",83),c.Jc(3,$N,1,2,"t-selector",88),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit;c.nc("label",c.ic(1,4,"Document_Clearance"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Clearance),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function KN(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CustodianId),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.CustodianId))?null:n.DefinitionId))("itemId",null==e?null:e.CustodianId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",null==e?null:e.CustodianId,"Name")," ")}}function BN(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",93),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.CustodianId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.CustodianId)("definitionIds",t.documentCustodianDefinitionIds(e))("filter",t.filterDocumentCustodian(e))("required",t.requireDocumentCustodian(e))("disabled",t.readonlyDocumentCustodian(e))}}function HN(e,t){if(1&e&&(c.Qb(0),c.Jc(1,KN,3,4,"t-restricted",83),c.Jc(2,BN,1,5,"t-relations-picker",91),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function QN(e,t){if(1&e&&(c.Sb(0,"t-form-group",90),c.Jc(1,HN,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentCustodian(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodianId),c.zb(1),c.nc("ngIf",null==t?null:t.CustodianIsCommon)("ngIfElse",o)}}function WN(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.RelationId),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.RelationId))?null:n.DefinitionId))("itemId",null==e?null:e.RelationId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",null==e?null:e.RelationId,"Name")," ")}}function GN(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",93),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.RelationId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.RelationId)("definitionIds",t.documentRelationDefinitionIds(e))("filter",t.filterDocumentRelation(e))("required",t.requireDocumentRelation(e))("disabled",t.readonlyDocumentRelation(e))}}function YN(e,t){if(1&e&&(c.Qb(0),c.Jc(1,WN,3,4,"t-restricted",83),c.Jc(2,GN,1,5,"t-relations-picker",91),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function XN(e,t){if(1&e&&(c.Sb(0,"t-form-group",94),c.Jc(1,YN,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentRelation(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.RelationId),c.zb(1),c.nc("ngIf",null==t?null:t.RelationIsCommon)("ngIfElse",o)}}function ZN(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ResourceId),c.zb(1),c.nc("link","../../../resources/"+(null==(n=t.ws.get("Resource",null==e?null:e.ResourceId))?null:n.DefinitionId))("itemId",null==e?null:e.ResourceId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Resource",null==e?null:e.ResourceId,"Name")," ")}}function e_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resources-picker",93),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.ResourceId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.ResourceId)("definitionIds",t.documentResourceDefinitionIds(e))("filter",t.filterDocumentResource(e))("required",t.requireDocumentResource(e))("disabled",t.readonlyDocumentResource(e))}}function t_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,ZN,3,4,"t-restricted",83),c.Jc(2,e_,1,5,"t-resources-picker",91),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function n_(e,t){if(1&e&&(c.Sb(0,"t-form-group",95),c.Jc(1,t_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentResource(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ResourceId),c.zb(1),c.nc("ngIf",null==t?null:t.ResourceIsCommon)("ngIfElse",o)}}function i_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.NotedRelationId),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.NotedRelationId))?null:n.DefinitionId))("itemId",null==e?null:e.NotedRelationId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",null==e?null:e.NotedRelationId,"Name")," ")}}function c_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",93),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.NotedRelationId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.NotedRelationId)("definitionIds",t.documentNotedRelationDefinitionIds(e))("filter",t.filterDocumentNotedRelation(e))("required",t.requireDocumentNotedRelation(e))("disabled",t.readonlyDocumentNotedRelation(e))}}function o_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,i_,3,4,"t-restricted",83),c.Jc(2,c_,1,5,"t-relations-picker",91),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function r_(e,t){if(1&e&&(c.Sb(0,"t-form-group",96),c.Jc(1,o_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentNotedRelation(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedRelationId),c.zb(1),c.nc("ngIf",null==t?null:t.NotedRelationIsCommon)("ngIfElse",o)}}function s_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",99),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CenterId),c.zb(1),c.nc("itemId",null==e?null:e.CenterId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Center",null==e?null:e.CenterId,"Name")," ")}}function l_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",100),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.CenterId=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.CenterId)("required",t.requireDocumentCenter(e))("disabled",t.readonlyDocumentCenter(e))("filter",t.filterDocumentCenter(e))}}function a_(e,t){if(1&e&&(c.Sb(0,"t-form-group",97),c.Jc(1,s_,3,3,"t-restricted",83),c.Jc(2,l_,1,4,"t-centers-picker",98),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.gc();c.nc("label",o.labelDocumentCenter(t))("labelContextMenu",i)("disableLabelMenu",!(n&&o.showDocumentCenterIsCommon(t)))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function u_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",103),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CurrencyId),c.zb(1),c.nc("itemId",null==e?null:e.CurrencyId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Currency",null==e?null:e.CurrencyId,"Name")," ")}}function d_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",104),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.CurrencyId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.CurrencyId)("filter",t.filterDocumentCurrency(e))("required",t.requireDocumentCurrency(e))("disabled",t.readonlyDocumentCurrency(e))}}function b_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,u_,3,3,"t-restricted",83),c.Jc(2,d_,1,4,"t-currencies-picker",102),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function g_(e,t){if(1&e&&(c.Sb(0,"t-form-group",101),c.Jc(1,b_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentCurrency(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),c.zb(1),c.nc("ngIf",null==t?null:t.CurrencyIsCommon)("ngIfElse",o)}}function f_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc(3).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Quantity),c.zb(1),c.Nc(" ",c.jc(2,2,null==e?null:e.Quantity,"1.0-4")," ")}}function m_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",107),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Quantity=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.Quantity)("ngModelOptions",c.qc(6,JN))("minDecimalPlaces",0)("maxDecimalPlaces",4)("required",t.requireDocumentQuantity(e))("disabled",t.readonlyDocumentQuantity(e))}}function h_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,f_,3,5,"t-restricted",83),c.Jc(2,m_,1,7,"t-decimal-editor",106),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function p_(e,t){if(1&e&&(c.Sb(0,"t-form-group",105),c.Jc(1,h_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentQuantity(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Quantity),c.zb(1),c.nc("ngIf",null==t?null:t.QuantityIsCommon)("ngIfElse",o)}}function S_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitId),c.zb(1),c.nc("link","../../../units/"+(null==(n=t.ws.get("Unit",null==e?null:e.UnitId))?null:n.DefinitionId))("itemId",null==e?null:e.UnitId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",null==e?null:e.UnitId,"Name")," ")}}function v_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",104),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.UnitId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.UnitId)("filter",t.filterDocumentUnit(e))("required",t.requireDocumentUnit(e))("disabled",t.readonlyDocumentUnit(e))}}function I_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,S_,3,4,"t-restricted",83),c.Jc(2,v_,1,4,"t-units-picker",102),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function M_(e,t){if(1&e&&(c.Sb(0,"t-form-group",108),c.Jc(1,I_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentUnit(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.UnitId),c.zb(1),c.nc("ngIf",null==t?null:t.UnitIsCommon)("ngIfElse",o)}}function R_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(3).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Time1),c.zb(1),c.Nc(" ",c.ic(2,2,null==e?null:e.Time1)," ")}}function y_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",111),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Time1=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.Time1)("ngModelOptions",c.qc(4,JN))("required",t.requireDocumentTime1(e))("disabled",t.readonlyDocumentTime1(e))}}function D_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,R_,3,4,"t-restricted",83),c.Jc(2,y_,1,5,"t-date-picker",110),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function w_(e,t){if(1&e&&(c.Sb(0,"t-form-group",109),c.Jc(1,D_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentTime1(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time1),c.zb(1),c.nc("ngIf",null==t?null:t.Time1IsCommon)("ngIfElse",o)}}function E_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc(3).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Duration),c.zb(1),c.Nc(" ",c.jc(2,2,null==e?null:e.Duration,"1.0-4")," ")}}function C_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",107),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Duration=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.Duration)("ngModelOptions",c.qc(6,JN))("minDecimalPlaces",0)("maxDecimalPlaces",4)("required",t.requireDocumentDuration(e))("disabled",t.readonlyDocumentDuration(e))}}function x_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,E_,3,5,"t-restricted",83),c.Jc(2,C_,1,7,"t-decimal-editor",106),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function T_(e,t){if(1&e&&(c.Sb(0,"t-form-group",112),c.Jc(1,x_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentDuration(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Duration),c.zb(1),c.nc("ngIf",null==t?null:t.DurationIsCommon)("ngIfElse",o)}}function z_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.DurationUnitId),c.zb(1),c.nc("link","../../../units/"+(null==(n=t.ws.get("Unit",null==e?null:e.DurationUnitId))?null:n.DefinitionId))("itemId",null==e?null:e.DurationUnitId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",null==e?null:e.DurationUnitId,"Name")," ")}}function L_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",104),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.DurationUnitId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.DurationUnitId)("filter",t.filterDocumentDurationUnit(e))("required",t.requireDocumentDurationUnit(e))("disabled",t.readonlyDocumentDurationUnit(e))}}function k_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,z_,3,4,"t-restricted",83),c.Jc(2,L_,1,4,"t-units-picker",102),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function O_(e,t){if(1&e&&(c.Sb(0,"t-form-group",113),c.Jc(1,k_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentDurationUnit(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.DurationUnitId),c.zb(1),c.nc("ngIf",null==t?null:t.DurationUnitIsCommon)("ngIfElse",o)}}function A_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(3).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Time2),c.zb(1),c.Nc(" ",c.ic(2,2,null==e?null:e.Time2)," ")}}function N_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",111),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Time2=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.Time2)("ngModelOptions",c.qc(4,JN))("required",t.requireDocumentTime2(e))("disabled",t.readonlyDocumentTime2(e))}}function __(e,t){if(1&e&&(c.Qb(0),c.Jc(1,A_,3,4,"t-restricted",83),c.Jc(2,N_,1,5,"t-date-picker",110),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function J_(e,t){if(1&e&&(c.Sb(0,"t-form-group",114),c.Jc(1,__,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentTime2(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time2),c.zb(1),c.nc("ngIf",null==t?null:t.Time2IsCommon)("ngIfElse",o)}}function P_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ExternalReference),c.zb(1),c.Nc(" ",null==e?null:e.ExternalReference," ")}}function F_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",111),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.ExternalReference=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.ExternalReference)("ngModelOptions",c.qc(4,JN))("required",t.requireDocumentExternalReference(e))("disabled",t.readonlyDocumentExternalReference(e))}}function V_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,P_,2,2,"t-restricted",83),c.Jc(2,F_,1,5,"t-text-editor",110),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function q_(e,t){if(1&e&&(c.Sb(0,"t-form-group",115),c.Jc(1,V_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentExternalReference(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReference),c.zb(1),c.nc("ngIf",null==t?null:t.ExternalReferenceIsCommon)("ngIfElse",o)}}function j_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();let n=null;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ReferenceSourceId),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.ReferenceSourceId))?null:n.DefinitionId))("itemId",null==e?null:e.ReferenceSourceId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",null==e?null:e.ReferenceSourceId,"Name")," ")}}function $_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",93),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.ReferenceSourceId=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.ReferenceSourceId)("definitionIds",t.documentReferenceSourceDefinitionIds(e))("filter",t.filterDocumentReferenceSource(e))("required",t.requireDocumentReferenceSource(e))("disabled",t.readonlyDocumentReferenceSource(e))}}function U_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,j_,3,4,"t-restricted",83),c.Jc(2,$_,1,5,"t-relations-picker",91),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function K_(e,t){if(1&e&&(c.Sb(0,"t-form-group",116),c.Jc(1,U_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentReferenceSource(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ReferenceSourceId),c.zb(1),c.nc("ngIf",null==t?null:t.ReferenceSourceIsCommon)("ngIfElse",o)}}function B_(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.InternalReference),c.zb(1),c.Nc(" ",null==e?null:e.InternalReference," ")}}function H_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",111),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.InternalReference=t}),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.nc("ngModel",e.InternalReference)("ngModelOptions",c.qc(4,JN))("required",t.requireDocumentInternalReference(e))("disabled",t.readonlyDocumentInternalReference(e))}}function Q_(e,t){if(1&e&&(c.Qb(0),c.Jc(1,B_,2,2,"t-restricted",83),c.Jc(2,H_,1,5,"t-text-editor",110),c.Pb()),2&e){const e=c.gc(2).isEdit;c.zb(1),c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function W_(e,t){if(1&e&&(c.Sb(0,"t-form-group",117),c.Jc(1,Q_,3,2,"ng-container",24),c.Rb()),2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(26),o=c.Ac(22),r=c.gc();c.nc("label",r.labelDocumentInternalReference(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.InternalReference),c.zb(1),c.nc("ngIf",null==t?null:t.InternalReferenceIsCommon)("ngIfElse",o)}}function G_(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(null==e?null:e.Memo)}}function Y_(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",111),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Memo=t}),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.nc("ngModel",e.Memo)("ngModelOptions",c.qc(4,JN))("required",t.requireDocumentMemo(e))("disabled",t.readonlyDocumentMemo(e))}}function X_(e,t){if(1&e&&(c.Sb(0,"t-form-group",118),c.hc(1,"translate"),c.Jc(2,G_,2,1,"div",29),c.Jc(3,Y_,1,5,"t-text-editor",110),c.Rb()),2&e){const e=c.gc(),t=e.isEdit,n=e.model,i=c.Ac(26),o=c.gc();c.nc("label",c.ic(1,6,"Memo"))("labelContextMenu",i)("disableLabelMenu",!(t&&o.showDocumentMemoIsCommon(n)))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Memo),c.zb(2),c.nc("ngIf",!t),c.zb(1),c.nc("ngIf",t)}}function Z_(e,t){if(1&e&&(c.Sb(0,"div",119),c.Sb(1,"span",120),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().isEdit;c.Eb("t-disabled-background",e)("border-bottom",e),c.zb(2),c.Mc("("+c.ic(3,5,"SpecifiedPerTab")+")")}}function eJ(e,t){if(1&e&&(c.Sb(0,"div",119),c.Sb(1,"span",120),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc().isEdit;c.Eb("t-disabled-background",e)("border-bottom",e),c.zb(2),c.Mc("("+c.ic(3,5,"SpecifiedPerLine")+")")}}function tJ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",121),c.Sb(1,"ul",122),c.Sb(2,"li",123),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.close,o=c.gc().model;return c.gc().onToggleDocumentIsCommon(o,n),i()}),c.Sb(3,"div",124),c.Nb(4,"fa-icon",125),c.Rb(),c.Sb(5,"div",126),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc().model;c.zb(4),c.nc("icon",n[e]?"expand":"compress"),c.zb(2),c.Nc(" ",c.ic(7,2,n[e]?"SpecifyPerTab":"SpecifyForAllTabs")," ")}}function nJ(e,t){1&e&&(c.Sb(0,"span",134),c.Nb(1,"fa-icon",135),c.Lc(2,"\xa0 "),c.Rb())}function iJ(e,t){1&e&&c.Ob(0)}function cJ(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Nb(1,"div",148),c.Lc(2," \xa0 "),c.Sb(3,"button",149),c.cc("click",function(){c.Dc(e);const t=c.gc(5).$implicit,n=c.gc().model;return c.gc().onDeleteForm(t,n)}),c.Nb(4,"fa-icon",150),c.hc(5,"translate"),c.Rb(),c.Lc(6," \xa0 "),c.Sb(7,"button",149),c.cc("click",function(){c.Dc(e);const t=c.gc(5).$implicit,n=c.gc().model;return c.gc().onCreateForm(t,n)}),c.Nb(8,"fa-icon",151),c.hc(9,"translate"),c.Rb(),c.Pb()}2&e&&(c.zb(4),c.nc("title",c.ic(5,2,"Delete")),c.zb(4),c.nc("title",c.ic(9,4,"AddAnotherSwitchToTable")))}function oJ(e,t){1&e&&c.Ob(0)}const rJ=function(e,t,n){return{item:e,argument:t,index:0,update:n,isForm:!0}};function sJ(e,t){if(1&e&&(c.Qb(0),c.Jc(1,oJ,1,0,"ng-container",146),c.Pb()),2&e){const e=t.$implicit;c.gc(4);const n=c.Ac(7),i=c.gc().$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.tc(2,rJ,r.lines(i,o)[0],e,r.dummyUpdate))}}const lJ=function(e){return{item:e}};function aJ(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",145),c.Jc(2,iJ,1,0,"ng-container",146),c.Lc(3," \xa0\xa0 "),c.Jc(4,cJ,10,6,"ng-container",29),c.Rb(),c.Jc(5,sJ,2,6,"ng-container",147),c.Pb()),2&e){const e=c.gc(4).$implicit,t=c.gc(),n=t.model,i=t.isEdit,o=c.Ac(31),r=c.gc();c.zb(2),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.rc(4,lJ,r.lines(e,n)[0])),c.zb(2),c.nc("ngIf",i),c.zb(1),c.nc("ngForOf",r.smartColumnIndices(e,n))}}function uJ(e,t){1&e&&(c.Sb(0,"div",153),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NotAdded")," "))}function dJ(e,t){if(1&e&&c.Jc(0,uJ,3,3,"div",152),2&e){const e=c.gc(5).isEdit;c.nc("ngIf",!e)}}function bJ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",156),c.cc("click",function(){c.Dc(e);const t=c.gc(5).$implicit,n=c.gc().model;return c.gc().onCreateForm(t,n)}),c.Nb(1,"fa-icon",157),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function gJ(e,t){if(1&e&&(c.Sb(0,"div",154),c.Jc(1,bJ,4,3,"button",155),c.Rb()),2&e){const e=c.gc(4).$implicit,t=c.gc().model,n=c.gc();c.zb(1),c.nc("ngIf",0===n.lines(e,t).length)}}function fJ(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",142),c.Jc(2,aJ,6,6,"ng-container",24),c.Jc(3,dJ,1,1,"ng-template",null,143,c.Kc),c.Rb(),c.Jc(5,gJ,2,1,"div",144),c.Pb()),2&e){const e=c.Ac(4),t=c.gc(3).$implicit,n=c.gc(),i=n.model,o=n.isEdit,r=c.gc();c.zb(1),c.Ic("background-color",r.formColor(t,i)),c.zb(1),c.nc("ngIf",r.lines(t,i).length>0)("ngIfElse",e),c.zb(3),c.nc("ngIf",o)}}function mJ(e,t){1&e&&c.Ob(0)}const hJ=function(e,t){return{columnIndex:e,update:t,isForm:!0}};function pJ(e,t){if(1&e&&(c.Qb(0),c.Jc(1,mJ,1,0,"ng-container",146),c.Pb()),2&e){const e=c.gc().$implicit;c.gc(4);const t=c.Ac(9),n=c.gc(3);c.zb(1),c.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",c.sc(2,hJ,e,n.dummyUpdate))}}function SJ(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group",166),c.Jc(2,pJ,2,5,"ng-container",24),c.Rb(),c.Pb()),2&e){const e=t.$implicit,n=c.gc(5).$implicit,i=c.Ac(10),o=c.gc(),r=o.isEdit,s=o.model,l=c.Ac(24),a=c.gc();c.zb(1),c.nc("labelContextMenu",i)("labelContext",e)("disableLabelMenu",!r)("serverErrors",a.tabHeaderServerErrors(n,e,s))("label",a.columnLabel(n,e)),c.zb(1),c.nc("ngIf",a.tabIsCommon(n,e,s))("ngIfElse",l)}}function vJ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",167),c.Sb(1,"t-text-editor",168),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(5).$implicit,i=c.gc().model;return c.gc().setBarcode(n,i,t)})("enter",function(){c.Dc(e),c.gc(2);const t=c.Ac(2),n=c.gc(3).$implicit,i=c.gc().model;return c.gc().onBarcodeEnter(n,i,t)}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(5).$implicit,t=c.gc().model,n=c.gc();c.zb(1),c.nc("ngModel",n.getBarcode(e,t))("placeholder",n.barcodeFieldPlaceholder(e))}}function IJ(e,t){1&e&&(c.Sb(0,"div",167),c.Nb(1,"t-spinner"),c.Rb())}function MJ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",169),c.Sb(1,"t-error-message",170),c.cc("dismiss",function(){return c.Dc(e),c.gc(7).clearBarcodeError()}),c.Lc(2),c.Rb(),c.Rb()}if(2&e){const e=c.gc(5).$implicit,t=c.gc().model,n=c.gc();c.zb(2),c.Nc(" ",n.getBarcodeError(e,t)," ")}}function RJ(e,t){if(1&e&&(c.Sb(0,"div",162),c.Jc(1,SJ,3,7,"ng-container",147),c.Nb(2,"div",163),c.Jc(3,vJ,2,2,"t-form-group",164),c.Jc(4,IJ,2,0,"div",164),c.Jc(5,MJ,3,1,"div",165),c.Rb()),2&e){const e=c.gc(4).$implicit,t=c.gc(),n=t.model,i=t.isEdit,o=c.gc();c.zb(1),c.nc("ngForOf",o.smartTabHeaderColumnPaths(e,n)),c.zb(2),c.nc("ngIf",o.showBarcodeField(e,i)),c.zb(1),c.nc("ngIf",o.isBarcodeLoading(e,n)),c.zb(1),c.nc("ngIf",o.showBarcodeError(e,n))}}const yJ=function(e){return{0:e}};function DJ(e,t){if(1&e&&(c.Sb(0,"tr"),c.Nb(1,"td",174),c.Sb(2,"td",175),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"td",176),c.Lc(6),c.hc(7,"accounting"),c.Rb(),c.Rb()),2&e){const e=t.$implicit,n=c.gc(5).$implicit,i=c.gc().model,o=c.gc();c.zb(3),c.Nc(" ",c.jc(4,2,"Total0",c.rc(8,yJ,o.columnLabel(n,e))),"\xa0\xa0\xa0 "),c.zb(3),c.Nc(" ",c.jc(7,5,o.smartTotal(n,e,i),o.functional_format)," ")}}function wJ(e,t){if(1&e&&(c.Sb(0,"div",171),c.Sb(1,"table",172),c.Sb(2,"tr"),c.Nb(3,"td",173),c.Rb(),c.Jc(4,DJ,8,10,"tr",147),c.Sb(5,"tr"),c.Nb(6,"td",173),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc(4).$implicit,t=c.gc(),n=t.model,i=t.isEdit,o=c.gc();c.zb(4),c.nc("ngForOf",o.smartTotalsColumnIndices(e,n,i))}}function EJ(e,t){if(1&e){const e=c.Tb();c.Jc(0,RJ,6,4,"div",158),c.Sb(1,"t-table",159,160),c.cc("insert",function(t){c.Dc(e);const n=c.gc(4).model;return c.gc().onInsertSmartLine(t,n)})("delete",function(t){c.Dc(e);const n=c.gc(4).model;return c.gc().onDeleteSmartLine(t,n)}),c.Rb(),c.Jc(3,wJ,7,1,"div",161)}if(2&e){c.gc(2);const e=c.Ac(5),t=c.Ac(7),n=c.gc().$implicit,i=c.Ac(8),o=c.gc(),r=o.model,s=o.isEdit,l=c.Ac(31),a=c.gc();c.nc("ngIf",a.showTabHeader(n,r,s)),c.zb(1),c.nc("dataSource",a.lines(n,r))("isEdit",s)("columnPaths",a.smartColumnPathsForTable(n,r))("headerTemplate",e)("rowTemplate",t)("columnTemplates",a.columnTemplates(n,i,l))("onNewItem",a.onNewSmartLineFactory(n))("highlightFunc",a.highlightLineFactory(r))("attentionItem",a.attentionItem),c.zb(2),c.nc("ngIf",a.smartTotalsColumnIndices(n,r,s).length>0)}}function CJ(e,t){if(1&e&&(c.Jc(0,fJ,6,5,"ng-container",24),c.Jc(1,EJ,4,11,"ng-template",null,141,c.Kc)),2&e){const e=c.Ac(2),t=c.gc(2).$implicit,n=c.gc().model,i=c.gc();c.nc("ngIf",i.showAsForm(t,n))("ngIfElse",e)}}function xJ(e,t){1&e&&c.Ob(0)}function TJ(e,t){if(1&e&&(c.Qb(0),c.Jc(1,xJ,1,0,"ng-container",177),c.Sb(2,"div",171),c.Sb(3,"table",178),c.Sb(4,"tr"),c.Nb(5,"td",174),c.Sb(6,"td",179),c.Lc(7),c.hc(8,"translate"),c.hc(9,"translate"),c.Rb(),c.Sb(10,"td",180),c.Lc(11),c.hc(12,"accounting"),c.Rb(),c.Rb(),c.Sb(13,"tr"),c.Nb(14,"td"),c.Sb(15,"td",181),c.Lc(16),c.hc(17,"translate"),c.hc(18,"translate"),c.Rb(),c.Sb(19,"td",182),c.Lc(20),c.hc(21,"accounting"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Pb()),2&e){const e=c.gc(3).model,t=c.Ac(39),n=c.gc();c.zb(1),c.nc("ngTemplateOutlet",t),c.zb(6),c.Nc(" ",c.jc(8,5,"Total0",c.rc(21,yJ,c.ic(9,8,"Debit")))+n.functionalPostfix,"\xa0\xa0\xa0 "),c.zb(4),c.Nc(" ",c.jc(12,10,n.total(e,1,!0),n.functional_format)," "),c.zb(5),c.Nc(" ",c.jc(17,13,"Total0",c.rc(23,yJ,c.ic(18,16,"Credit")))+n.functionalPostfix,"\xa0\xa0\xa0 "),c.zb(4),c.Nc(" ",c.jc(21,18,n.total(e,-1,!0),n.functional_format)," ")}}function zJ(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=t.argument,n=c.gc(2).$implicit,i=c.gc().isEdit,o=c.gc();c.Ic("text-align",o.columnLabelAlignment(n,e))("min-width",i?120:0,"px"),c.zb(1),c.Nc(" ",o.columnLabel(n,e),"\xa0\xa0")}}function LJ(e,t){1&e&&c.Ob(0)}const kJ=function(e,t,n,i,c){return{columnIndex:e,rowIndex:t,line:n,update:i,isForm:c}};function OJ(e,t){if(1&e&&(c.Sb(0,"t-form-group-cell",185),c.Jc(1,LJ,1,0,"ng-container",146),c.Rb()),2&e){const e=c.gc(),t=e.argument,n=e.item,i=e.index,o=e.update,r=e.isForm;c.gc();const s=c.Ac(9),l=c.gc().$implicit,a=c.gc(2);c.nc("serverErrors",a.lineEntryServerErrors(l,t,n)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.vc(3,kJ,t,i,n,o,r))}}function AJ(e,t){1&e&&c.Ob(0)}function NJ(e,t){if(1&e&&(c.Sb(0,"t-form-group",186),c.Jc(1,AJ,1,0,"ng-container",146),c.Rb()),2&e){const e=c.gc(),t=e.argument,n=e.item,i=e.index,o=e.update,r=e.isForm;c.gc();const s=c.Ac(9),l=c.gc().$implicit,a=c.gc(2);c.nc("serverErrors",a.lineEntryServerErrors(l,t,n))("label",a.columnLabel(l,t)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.vc(4,kJ,t,i,n,o,r))}}function _J(e,t){if(1&e&&(c.Jc(0,OJ,2,9,"t-form-group-cell",183),c.Jc(1,NJ,2,10,"t-form-group",184)),2&e){const e=t.isForm;c.nc("ngIf",!e),c.zb(1),c.nc("ngIf",e)}}function JJ(e,t){if(1&e&&(c.Sb(0,"t-view-link",198),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.accountDisplay(r.getFieldValue(i,t,n,o))," ")}}function PJ(e,t){if(1&e&&(c.Sb(0,"t-view-link",103),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Currency",r.getFieldValue(i,t,n,o),"Name")," ")}}function FJ(e,t){if(1&e&&(c.Sb(0,"t-view-link",92),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();let s=null;c.nc("link","../../../relations/"+(null==(s=r.ws.get("Relation",r.getFieldValue(i,t,n,o)))?null:s.DefinitionId))("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,o),"Name")," ")}}function VJ(e,t){if(1&e&&(c.Sb(0,"t-view-link",92),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();let s=null;c.nc("link","../../../relations/"+(null==(s=r.ws.get("Relation",r.getFieldValue(i,t,n,o)))?null:s.DefinitionId))("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,o),"Name")," ")}}function qJ(e,t){if(1&e&&(c.Sb(0,"t-view-link",92),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();let s=null;c.nc("link","../../../resources/"+(null==(s=r.ws.get("Resource",r.getFieldValue(i,t,n,o)))?null:s.DefinitionId))("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Resource",r.getFieldValue(i,t,n,o),"Name")," ")}}function jJ(e,t){if(1&e&&(c.Sb(0,"t-view-link",92),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();let s=null;c.nc("link","../../../relations/"+(null==(s=r.ws.get("Relation",r.getFieldValue(i,t,n,o)))?null:s.DefinitionId))("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,o),"Name")," ")}}function $J(e,t){if(1&e&&(c.Sb(0,"t-view-link",99),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Center",r.getFieldValue(i,t,n,o),"Name")," ")}}function UJ(e,t){if(1&e&&(c.Sb(0,"t-view-link",199),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("EntryType",r.getFieldValue(i,t,n,o),"Name")," ")}}function KJ(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Mc(c.jc(3,1,r.getFieldValue(i,t,n,o),r.MonetaryValue_format(r.entry(i,t,n))))}}function BJ(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Mc(c.jc(3,1,r.getFieldValue(i,t,n,o),"1.0-4"))}}function HJ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.ws.getMultilingualValue("Unit",r.getFieldValue(i,t,n,o),"Name"))}}function QJ(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Mc(c.jc(3,1,r.getFieldValue(i,t,n,o),r.functional_format))}}function WJ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(c.ic(2,1,r.getFieldValue(i,t,n,o)))}}function GJ(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Mc(c.jc(3,1,r.getFieldValue(i,t,n,o),"1.0-4"))}}function YJ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.ws.getMultilingualValue("Unit",r.getFieldValue(i,t,n,o),"Name"))}}function XJ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(c.ic(2,1,r.getFieldValue(i,t,n,o)))}}function ZJ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.getFieldValue(i,t,n,o))}}function eP(e,t){if(1&e&&(c.Sb(0,"t-view-link",92),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();let s=null;c.nc("link","../../../relations/"+(null==(s=r.ws.get("Relation",r.getFieldValue(i,t,n,o)))?null:s.DefinitionId))("itemId",r.getFieldValue(i,t,n,o)),c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,o),"Name")," ")}}function tP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.getFieldValue(i,t,n,o))}}function nP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.getFieldValue(i,t,n,o))}}function iP(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Mc(c.jc(3,1,r.getFieldValue(i,t,n,o),r.MonetaryValue_format(r.entry(i,t,n))))}}function cP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(c.ic(2,1,r.getFieldValue(i,t,n,o)))}}function oP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.getFieldValue(i,t,n,o))}}function rP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.getFieldValue(i,t,n,o)?"Yes":c.ic(2,1,"No"))}}function sP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(c.jc(2,1,r.getFieldValue(i,t,n,o),"1.0-4"))}}function lP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.getFieldValue(i,t,n,o))}}function aP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(c.ic(2,1,r.getFieldValue(i,t,n,o)))}}function uP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Mc(r.getFieldValue(i,t,n,o))}}function dP(e,t){if(1&e&&(c.Qb(0,189),c.Jc(1,JJ,2,2,"t-view-link",190),c.Jc(2,PJ,2,2,"t-view-link",191),c.Jc(3,FJ,2,3,"t-view-link",192),c.Jc(4,VJ,2,3,"t-view-link",192),c.Jc(5,qJ,2,3,"t-view-link",192),c.Jc(6,jJ,2,3,"t-view-link",192),c.Jc(7,$J,2,2,"t-view-link",193),c.Jc(8,UJ,2,2,"t-view-link",194),c.Jc(9,KJ,4,4,"div",195),c.Jc(10,BJ,4,4,"div",195),c.Jc(11,HJ,2,1,"span",196),c.Jc(12,QJ,4,4,"div",195),c.Jc(13,WJ,3,3,"span",196),c.Jc(14,GJ,4,4,"div",195),c.Jc(15,YJ,2,1,"span",196),c.Jc(16,XJ,3,3,"span",196),c.Jc(17,ZJ,2,1,"span",196),c.Jc(18,eP,2,3,"t-view-link",192),c.Jc(19,tP,2,1,"span",196),c.Jc(20,nP,2,1,"span",196),c.Jc(21,iP,4,4,"div",195),c.Jc(22,cP,3,3,"span",196),c.Jc(23,oP,2,1,"span",196),c.Jc(24,rP,3,3,"span",196),c.Jc(25,sP,3,4,"span",196),c.Jc(26,lP,2,1,"span",196),c.Jc(27,aP,3,3,"span",196),c.Jc(28,uP,2,1,"span",197),c.Pb()),2&e){const e=c.gc().columnIndex,t=c.gc(2).$implicit,n=c.gc(2);c.nc("ngSwitch",n.columnName(t,e)),c.zb(1),c.nc("ngSwitchCase","AccountId"),c.zb(1),c.nc("ngSwitchCase","CurrencyId"),c.zb(1),c.nc("ngSwitchCase","CustodianId"),c.zb(1),c.nc("ngSwitchCase","RelationId"),c.zb(1),c.nc("ngSwitchCase","ResourceId"),c.zb(1),c.nc("ngSwitchCase","NotedRelationId"),c.zb(1),c.nc("ngSwitchCase","CenterId"),c.zb(1),c.nc("ngSwitchCase","EntryTypeId"),c.zb(1),c.nc("ngSwitchCase","MonetaryValue"),c.zb(1),c.nc("ngSwitchCase","Quantity"),c.zb(1),c.nc("ngSwitchCase","UnitId"),c.zb(1),c.nc("ngSwitchCase","Value"),c.zb(1),c.nc("ngSwitchCase","Time1"),c.zb(1),c.nc("ngSwitchCase","Duration"),c.zb(1),c.nc("ngSwitchCase","DurationUnitId"),c.zb(1),c.nc("ngSwitchCase","Time2"),c.zb(1),c.nc("ngSwitchCase","ExternalReference"),c.zb(1),c.nc("ngSwitchCase","ReferenceSourceId"),c.zb(1),c.nc("ngSwitchCase","InternalReference"),c.zb(1),c.nc("ngSwitchCase","NotedAgentName"),c.zb(1),c.nc("ngSwitchCase","NotedAmount"),c.zb(1),c.nc("ngSwitchCase","NotedDate"),c.zb(1),c.nc("ngSwitchCase","Memo"),c.zb(1),c.nc("ngSwitchCase","Boolean1"),c.zb(1),c.nc("ngSwitchCase","Decimal1"),c.zb(1),c.nc("ngSwitchCase","Text1"),c.zb(1),c.nc("ngSwitchCase","PostingDate")}}function bP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.accountDisplay(r.getFieldValue(i,t,n,o)),"\u200c ")}}function gP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Currency",r.getFieldValue(i,t,n,o),"Name"),"\u200c ")}}function fP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,o),"Name"),"\u200c ")}}function mP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,o),"Name"),"\u200c ")}}function hP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Resource",r.getFieldValue(i,t,n,o),"Name"),"\u200c ")}}function pP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,o),"Name"),"\u200c ")}}function SP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Center",r.getFieldValue(i,t,n,o),"Name"),"\u200c ")}}function vP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("EntryType",r.getFieldValue(i,t,n,o),"Name"),"\u200c ")}}function IP(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Nc("",c.jc(3,1,r.getFieldValue(i,t,n,o),r.MonetaryValue_format(r.entry(i,t,n))),"\u200c")}}function MP(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Mc(c.jc(3,1,r.getFieldValue(i,t,n,o),"1.0-4"))}}function RP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.ws.getMultilingualValue("Unit",r.getFieldValue(i,t,n,o),"Name"),"\u200c")}}function yP(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Nc("",c.jc(3,1,r.getFieldValue(i,t,n,o),r.functional_format),"\u200c")}}function DP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",c.ic(2,1,r.getFieldValue(i,t,n,o)),"\u200c")}}function wP(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Mc(c.jc(3,1,r.getFieldValue(i,t,n,o),"1.0-4"))}}function EP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.ws.getMultilingualValue("Unit",r.getFieldValue(i,t,n,o),"Name"),"\u200c")}}function CP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",c.ic(2,1,r.getFieldValue(i,t,n,o)),"\u200c")}}function xP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.getFieldValue(i,t,n,o),"\u200c")}}function TP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,o),"Name"),"\u200c ")}}function zP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.getFieldValue(i,t,n,o),"\u200c")}}function LP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.getFieldValue(i,t,n,o),"\u200c")}}function kP(e,t){if(1&e&&(c.Sb(0,"div",200),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(2),c.Nc("",c.jc(3,1,r.getFieldValue(i,t,n,o),r.MonetaryValue_format(r.entry(i,t,n))),"\u200c")}}function OP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",c.ic(2,1,r.getFieldValue(i,t,n,o)),"\u200c")}}function AP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.getFieldValue(i,t,n,o),"\u200c")}}function NP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.getFieldValue(i,t,n,o)?"Yes":c.ic(2,1,"No"),"\u200c")}}function _P(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",c.jc(2,1,r.getFieldValue(i,t,n,o),"1.0-4"),"\u200c")}}function JP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.getFieldValue(i,t,n,o),"\u200c")}}function PP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",c.ic(2,1,r.getFieldValue(i,t,n,o)),"\u200c")}}function FP(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3),t=e.columnIndex,n=e.line,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.zb(1),c.Nc("",r.getFieldValue(i,t,n,o),"\u200c")}}function VP(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",202),c.Jc(2,bP,2,1,"span",196),c.Jc(3,gP,2,1,"span",196),c.Jc(4,fP,2,1,"span",196),c.Jc(5,mP,2,1,"span",196),c.Jc(6,hP,2,1,"span",196),c.Jc(7,pP,2,1,"span",196),c.Jc(8,SP,2,1,"span",196),c.Jc(9,vP,2,1,"span",196),c.Jc(10,IP,4,4,"div",195),c.Jc(11,MP,4,4,"div",195),c.Jc(12,RP,2,1,"span",196),c.Jc(13,yP,4,4,"div",195),c.Jc(14,DP,3,3,"span",196),c.Jc(15,wP,4,4,"div",195),c.Jc(16,EP,2,1,"span",196),c.Jc(17,CP,3,3,"span",196),c.Jc(18,xP,2,1,"span",196),c.Jc(19,TP,2,1,"span",196),c.Jc(20,zP,2,1,"span",196),c.Jc(21,LP,2,1,"span",196),c.Jc(22,kP,4,4,"div",195),c.Jc(23,OP,3,3,"span",196),c.Jc(24,AP,2,1,"span",196),c.Jc(25,NP,3,3,"span",196),c.Jc(26,_P,3,4,"span",196),c.Jc(27,JP,2,1,"span",196),c.Jc(28,PP,3,3,"span",196),c.Jc(29,FP,2,1,"span",197),c.Rb(),c.Pb()),2&e){const e=c.gc(2).columnIndex,t=c.gc(2).$implicit,n=c.gc(2);c.zb(1),c.nc("ngSwitch",n.columnName(t,e)),c.zb(1),c.nc("ngSwitchCase","AccountId"),c.zb(1),c.nc("ngSwitchCase","CurrencyId"),c.zb(1),c.nc("ngSwitchCase","CustodianId"),c.zb(1),c.nc("ngSwitchCase","RelationId"),c.zb(1),c.nc("ngSwitchCase","ResourceId"),c.zb(1),c.nc("ngSwitchCase","NotedRelationId"),c.zb(1),c.nc("ngSwitchCase","CenterId"),c.zb(1),c.nc("ngSwitchCase","EntryTypeId"),c.zb(1),c.nc("ngSwitchCase","MonetaryValue"),c.zb(1),c.nc("ngSwitchCase","Quantity"),c.zb(1),c.nc("ngSwitchCase","UnitId"),c.zb(1),c.nc("ngSwitchCase","Value"),c.zb(1),c.nc("ngSwitchCase","Time1"),c.zb(1),c.nc("ngSwitchCase","Duration"),c.zb(1),c.nc("ngSwitchCase","DurationUnitId"),c.zb(1),c.nc("ngSwitchCase","Time2"),c.zb(1),c.nc("ngSwitchCase","ExternalReference"),c.zb(1),c.nc("ngSwitchCase","ReferenceSourceId"),c.zb(1),c.nc("ngSwitchCase","InternalReference"),c.zb(1),c.nc("ngSwitchCase","NotedAgentName"),c.zb(1),c.nc("ngSwitchCase","NotedAmount"),c.zb(1),c.nc("ngSwitchCase","NotedDate"),c.zb(1),c.nc("ngSwitchCase","Memo"),c.zb(1),c.nc("ngSwitchCase","Boolean1"),c.zb(1),c.nc("ngSwitchCase","Decimal1"),c.zb(1),c.nc("ngSwitchCase","Text1"),c.zb(1),c.nc("ngSwitchCase","PostingDate")}}function qP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-accounts-picker",211),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))}}function jP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",212),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))}}function $P(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",213),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("definitionIds",r.definitionIdsCustodian_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectCustodian_Smart(i))}}function UP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",213),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("definitionIds",r.definitionIdsRelation_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectRelation_Smart(i))}}function KP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resources-picker",213),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("definitionIds",r.definitionIdsResource_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectResource_Smart(i))}}function BP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",213),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("definitionIds",r.definitionIdsNotedRelation_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectNotedRelation_Smart(i))}}function HP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",214),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))}}function QP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",215),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("filter",r.entryTypeFilter(i,n))("ngModel",r.getFieldValue(i,n,t,o))}}function WP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",216),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=e.isForm,o=c.gc(2).$implicit,r=c.gc().model,s=c.gc();c.nc("required",!(t&&t.PH)&&s.isRequired(o,n,t,r))("ngModel",s.getFieldValue(o,n,t,r))("ngModelOptions",c.qc(6,JN))("minDecimalPlaces",s.MonetaryValue_decimals(s.entry(o,n,t)))("maxDecimalPlaces",s.MonetaryValue_decimals(s.entry(o,n,t)))("textAlignment",i?null:"right")}}function GP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",216),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=e.isForm,o=c.gc(2).$implicit,r=c.gc().model,s=c.gc();c.nc("required",!(t&&t.PH)&&s.isRequired(o,n,t,r))("ngModel",s.getFieldValue(o,n,t,r))("ngModelOptions",c.qc(6,JN))("minDecimalPlaces",0)("maxDecimalPlaces",4)("textAlignment",i?null:"right")}}function YP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",214),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))}}function XP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",216),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=e.isForm,o=c.gc(2).$implicit,r=c.gc().model,s=c.gc();c.nc("required",!(t&&t.PH)&&s.isRequired(o,n,t,r))("ngModel",s.getFieldValue(o,n,t,r))("ngModelOptions",c.qc(6,JN))("minDecimalPlaces",s.functional_decimals)("maxDecimalPlaces",s.functional_decimals)("textAlignment",i?null:"right")}}function ZP(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function eF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",216),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=e.isForm,o=c.gc(2).$implicit,r=c.gc().model,s=c.gc();c.nc("required",!(t&&t.PH)&&s.isRequired(o,n,t,r))("ngModel",s.getFieldValue(o,n,t,r))("ngModelOptions",c.qc(6,JN))("minDecimalPlaces",0)("maxDecimalPlaces",4)("textAlignment",i?null:"right")}}function tF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",214),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))}}function nF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function iF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function cF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",213),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("definitionIds",r.definitionIdsReferenceSource_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,o))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectReferenceSource_Smart(i))}}function oF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function rF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function sF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",216),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=e.isForm,o=c.gc(2).$implicit,r=c.gc().model,s=c.gc();c.nc("required",!(t&&t.PH)&&s.isRequired(o,n,t,r))("ngModel",s.getFieldValue(o,n,t,r))("ngModelOptions",c.qc(6,JN))("minDecimalPlaces",s.MonetaryValue_decimals(s.entry(o,n,t)))("maxDecimalPlaces",s.MonetaryValue_decimals(s.entry(o,n,t)))("textAlignment",i?null:"right")}}function lF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function aF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function uF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",218),c.Sb(1,"input",219),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb(),c.Sb(2,"label",220),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3),t=e.rowIndex,n=e.columnIndex,i=e.line,o=c.gc(2).$implicit,r=c.gc().model,s=c.gc();c.zb(1),c.pc("id","standardandpure",t,""),c.nc("ngModel",s.getFieldValue(o,n,i,r))("required",!(i&&i.PH)&&s.isRequired(o,n,i,r)),c.zb(1),c.pc("for","standardandpure",t,"")}}function dF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",216),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=e.isForm,o=c.gc(2).$implicit,r=c.gc().model,s=c.gc();c.nc("required",!(t&&t.PH)&&s.isRequired(o,n,t,r))("ngModel",s.getFieldValue(o,n,t,r))("ngModelOptions",c.qc(6,JN))("minDecimalPlaces",0)("maxDecimalPlaces",4)("textAlignment",i?null:"right")}}function bF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function gF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",217),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(3),i=n.columnIndex,o=n.line,r=n.update,s=c.gc(2).$implicit,l=c.gc().model,a=c.gc();return a.setFieldValue(s,i,o,l,t),a.onSmartLineUpdated(r,o,l)}),c.Rb()}if(2&e){const e=c.gc(3),t=e.line,n=e.columnIndex,i=c.gc(2).$implicit,o=c.gc().model,r=c.gc();c.nc("required",!(t&&t.PH)&&r.isRequired(i,n,t,o))("ngModel",r.getFieldValue(i,n,t,o))("ngModelOptions",c.qc(3,JN))}}function fF(e,t){if(1&e&&(c.Qb(0,189),c.Jc(1,qP,1,3,"t-accounts-picker",203),c.Jc(2,jP,1,3,"t-currencies-picker",204),c.Jc(3,$P,1,5,"t-relations-picker",205),c.Jc(4,UP,1,5,"t-relations-picker",205),c.Jc(5,KP,1,5,"t-resources-picker",205),c.Jc(6,BP,1,5,"t-relations-picker",205),c.Jc(7,HP,1,3,"t-centers-picker",206),c.Jc(8,QP,1,3,"t-entry-types-picker",207),c.Jc(9,WP,1,7,"t-decimal-editor",208),c.Jc(10,GP,1,7,"t-decimal-editor",208),c.Jc(11,YP,1,3,"t-units-picker",206),c.Jc(12,XP,1,7,"t-decimal-editor",208),c.Jc(13,ZP,1,4,"t-date-picker",209),c.Jc(14,eF,1,7,"t-decimal-editor",208),c.Jc(15,tF,1,3,"t-units-picker",206),c.Jc(16,nF,1,4,"t-date-picker",209),c.Jc(17,iF,1,4,"t-text-editor",209),c.Jc(18,cF,1,5,"t-relations-picker",205),c.Jc(19,oF,1,4,"t-text-editor",209),c.Jc(20,rF,1,4,"t-text-editor",209),c.Jc(21,sF,1,7,"t-decimal-editor",208),c.Jc(22,lF,1,4,"t-date-picker",209),c.Jc(23,aF,1,4,"t-text-editor",209),c.Jc(24,uF,4,4,"div",210),c.Jc(25,dF,1,7,"t-decimal-editor",208),c.Jc(26,bF,1,4,"t-text-editor",209),c.Jc(27,gF,1,4,"t-date-picker",209),c.Pb()),2&e){const e=c.gc(2).columnIndex,t=c.gc(2).$implicit,n=c.gc(2);c.nc("ngSwitch",n.columnName(t,e)),c.zb(1),c.nc("ngSwitchCase","AccountId"),c.zb(1),c.nc("ngSwitchCase","CurrencyId"),c.zb(1),c.nc("ngSwitchCase","CustodianId"),c.zb(1),c.nc("ngSwitchCase","RelationId"),c.zb(1),c.nc("ngSwitchCase","ResourceId"),c.zb(1),c.nc("ngSwitchCase","NotedRelationId"),c.zb(1),c.nc("ngSwitchCase","CenterId"),c.zb(1),c.nc("ngSwitchCase","EntryTypeId"),c.zb(1),c.nc("ngSwitchCase","MonetaryValue"),c.zb(1),c.nc("ngSwitchCase","Quantity"),c.zb(1),c.nc("ngSwitchCase","UnitId"),c.zb(1),c.nc("ngSwitchCase","Value"),c.zb(1),c.nc("ngSwitchCase","Time1"),c.zb(1),c.nc("ngSwitchCase","Duration"),c.zb(1),c.nc("ngSwitchCase","DurationUnitId"),c.zb(1),c.nc("ngSwitchCase","Time2"),c.zb(1),c.nc("ngSwitchCase","ExternalReference"),c.zb(1),c.nc("ngSwitchCase","ReferenceSourceId"),c.zb(1),c.nc("ngSwitchCase","InternalReference"),c.zb(1),c.nc("ngSwitchCase","NotedAgentName"),c.zb(1),c.nc("ngSwitchCase","NotedAmount"),c.zb(1),c.nc("ngSwitchCase","NotedDate"),c.zb(1),c.nc("ngSwitchCase","Memo"),c.zb(1),c.nc("ngSwitchCase","Boolean1"),c.zb(1),c.nc("ngSwitchCase","Decimal1"),c.zb(1),c.nc("ngSwitchCase","Text1"),c.zb(1),c.nc("ngSwitchCase","PostingDate")}}function mF(e,t){if(1&e&&(c.Jc(0,VP,30,28,"ng-container",24),c.Jc(1,fF,28,28,"ng-template",null,201,c.Kc)),2&e){const e=c.Ac(2),t=c.gc(),n=t.columnIndex,i=t.line,o=c.gc(2).$implicit,r=c.gc().model,s=c.gc();c.nc("ngIf",s.isReadOnly(o,n,i,r))("ngIfElse",e)}}function hF(e,t){if(1&e&&(c.Jc(0,dP,29,28,"ng-container",187),c.Jc(1,mF,3,2,"ng-template",null,188,c.Kc)),2&e){const e=c.Ac(2),t=c.gc(3).isEdit;c.nc("ngIf",!t)("ngIfElse",e)}}function pF(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Sb(3,"t-view-link",238),c.Lc(4),c.Rb(),c.Rb()),2&e){const e=c.gc(2).$implicit,t=c.gc(5);c.zb(1),c.Nc(" ",c.ic(2,3,"OnBehalfOf"),""),c.zb(2),c.nc("itemId",e.OnBehalfOfUserId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.OnBehalfOfUserId,"Name")," ")}}function SF(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span",242),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=c.gc(3).$implicit,t=c.gc(3).$implicit,n=c.gc(2);c.zb(2),c.Nc("",c.ic(3,2,"Signature_Reason"),":\xa0"),c.zb(3),c.Mc(n.reasonDisplay(t,e.ReasonId))}}function vF(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span",242),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=c.gc(3).$implicit;c.zb(2),c.Nc("",c.ic(3,2,"Signature_ReasonDetails"),":\xa0"),c.zb(3),c.Mc(e.ReasonDetails)}}function IF(e,t){if(1&e&&(c.Qb(0),c.Lc(1," \xa0\xa0 "),c.Sb(2,"div",241),c.Jc(3,SF,6,4,"div",29),c.Jc(4,vF,6,4,"div",29),c.Rb(),c.Pb()),2&e){const e=c.gc(2).$implicit;c.zb(3),c.nc("ngIf",!!e.ReasonId),c.zb(1),c.nc("ngIf",!!e.ReasonDetails)}}function MF(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",235),c.Nb(2,"t-image",236),c.Rb(),c.Sb(3,"div",237),c.Sb(4,"span"),c.Sb(5,"t-view-link",238),c.Lc(6),c.Rb(),c.Jc(7,pF,5,5,"span",29),c.Rb(),c.Rb(),c.Sb(8,"div",239),c.Sb(9,"div",240),c.Sb(10,"span"),c.Lc(11),c.Rb(),c.Rb(),c.Rb(),c.Jc(12,IF,5,2,"ng-container",29),c.Pb()),2&e){const e=c.gc().$implicit,t=c.gc(5);let n=null;c.zb(2),c.nc("src","users/"+e.SignedById+"/image")("imageId",null==(n=t.ws.get("User",e.SignedById))?null:n.ImageId)("size",36),c.zb(3),c.nc("itemId",e.SignedById),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.SignedById,"Name")," "),c.zb(1),c.nc("ngIf",!!e.OnBehalfOfUserId&&e.SignedById!==e.OnBehalfOfUserId),c.zb(1),c.Eb("text-success",e.ToState>0)("text-danger",e.ToState<0),c.zb(1),c.Eb("t-positive-stamp",e.ToState>0)("t-negative-stamp",e.ToState<0),c.zb(2),c.Mc(t.actionDisplay(e.ToState)),c.zb(1),c.nc("ngIf",!!e.ReasonDetails||!!e.ReasonId)}}function RF(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Sb(4,"t-view-link",238),c.Lc(5),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc(2).$implicit,t=c.gc(5);c.zb(2),c.Nc(" ",c.ic(3,3,"OnBehalfOf"),""),c.zb(2),c.nc("itemId",e.OnBehalfOfUserId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.OnBehalfOfUserId,"Name")," ")}}function yF(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",243),c.Sb(2,"button",244),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(3).$implicit;return c.gc(2).onSignNo(n,t)}),c.Nb(3,"fa-icon",125),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb(),c.Rb(),c.Sb(6,"div",243),c.Sb(7,"button",245),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit;return c.gc(5).onSignYes(t)}),c.Nb(8,"fa-icon",125),c.Sb(9,"span"),c.Lc(10),c.Rb(),c.Rb(),c.Rb(),c.Jc(11,RF,6,5,"div",29),c.Pb()}if(2&e){const e=c.gc().$implicit,t=c.gc(3).$implicit,n=c.gc().model,i=c.gc();c.zb(1),c.nc("ngbTooltip",i.signTooltip(e,t,n)),c.zb(1),c.nc("disabled",i.disableSign(e,t,n)),c.zb(1),c.nc("icon",i.negativeActionIcon(e.ToState)),c.zb(2),c.Nc("\xa0\xa0",i.negativeActionDisplay(e.ToState),""),c.zb(1),c.nc("ngbTooltip",i.signTooltip(e,t,n)),c.zb(1),c.nc("disabled",i.disableSign(e,t,n)),c.zb(1),c.nc("icon",i.positiveActionIcon(e.ToState)),c.zb(2),c.Nc("\xa0\xa0",i.positiveActionDisplay(e.ToState),""),c.zb(1),c.nc("ngIf",!e.CanSign&&!!e.OnBehalfOfUserId)}}function DF(e,t){1&e&&c.Ob(0)}function wF(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(5);c.zb(1),c.Nc("",t.requiredSignatureDisplay(e),"\xa0")}}function EF(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(5);c.zb(1),c.Mc(t.requiredSignatoryDisplay(e))}}function CF(e,t){if(1&e&&(c.Sb(0,"t-view-link",246),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(5);c.nc("itemId",e.RoleId),c.zb(2),c.Mc(t.ws.getMultilingualValue("Role",e.RoleId,"Name"))}}function xF(e,t){if(1&e&&(c.Sb(0,"t-view-link",92),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(5);let n=null;c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",e.CustodianId))?null:n.DefinitionId))("itemId",e.CustodianId),c.zb(2),c.Mc(t.ws.getMultilingualValue("Relation",e.CustodianId,"Name"))}}function TF(e,t){if(1&e&&(c.Sb(0,"t-view-link",238),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(5);c.nc("itemId",e.UserId),c.zb(2),c.Mc(t.ws.getMultilingualValue("User",e.UserId,"Name"))}}function zF(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.hc(3,"number"),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(5);c.zb(1),c.Nc("\xa0","- "+c.jc(2,1,"Count0Lines",c.rc(6,yJ,c.ic(3,4,t.lineIds(e).length))),"")}}function LF(e,t){if(1&e&&(c.Sb(0,"span",247),c.Lc(1),c.hc(2,"datetimeFormat"),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Nc(" \xa0",c.ic(2,1,e.SignedAt)," ")}}function kF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",248),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit;return c.gc(5).onUnsign(t)}),c.hc(1,"translate"),c.Nb(2,"fa-icon",249),c.Rb()}if(2&e){const e=c.gc().$implicit,t=c.gc(4).model,n=c.gc();c.nc("title",n.disableUnsign(e,t)?"":c.ic(1,2,"Delete"))("disabled",n.disableUnsign(e,t))}}function OF(e,t){if(1&e&&(c.Sb(0,"div",224),c.Sb(1,"div",225),c.Nb(2,"div",226),c.Jc(3,MF,13,16,"ng-container",29),c.Jc(4,yF,12,9,"ng-container",29),c.Jc(5,DF,1,0,"ng-container",29),c.Rb(),c.Sb(6,"div",227),c.Sb(7,"div",228),c.Sb(8,"span"),c.Jc(9,wF,2,1,"span",29),c.Jc(10,EF,2,1,"span",29),c.Jc(11,CF,3,2,"t-view-link",229),c.Jc(12,xF,3,3,"t-view-link",230),c.Jc(13,TF,3,2,"t-view-link",231),c.Jc(14,zF,4,8,"span",29),c.Rb(),c.Rb(),c.Sb(15,"div"),c.Jc(16,LF,3,3,"span",232),c.Sb(17,"div",233),c.Jc(18,kF,3,4,"button",234),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.$implicit,n=c.gc(3).$implicit,i=c.gc().model,o=c.gc();c.zb(3),c.nc("ngIf",!!e.SignedById),c.zb(1),c.nc("ngIf",!e.SignedById&&(e.CanSign||e.CanSignOnBehalf)),c.zb(1),c.nc("ngIf",!e.SignedById&&!(e.CanSign||e.CanSignOnBehalf)),c.zb(4),c.nc("ngIf","Public"!==e.RuleType),c.zb(1),c.nc("ngIf","Public"===e.RuleType),c.zb(1),c.nc("ngIf","ByRole"===e.RuleType),c.zb(1),c.nc("ngIf","ByCustodian"===e.RuleType),c.zb(1),c.nc("ngIf","ByUser"===e.RuleType),c.zb(1),c.nc("ngIf",o.lineIds(e).length!==o.lines(n,i).length),c.zb(2),c.nc("ngIf",e.SignedAt),c.zb(1),c.nc("ngbTooltip",o.unsignTooltip(e,i)),c.zb(1),c.nc("ngIf",o.canUnsign(e))}}function AF(e,t){if(1&e&&(c.Sb(0,"div",221),c.Sb(1,"div",222),c.Sb(2,"span",175),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Jc(5,OF,19,12,"div",223),c.Rb()),2&e){const e=c.gc(2).$implicit,t=c.gc(),n=t.model,i=t.extras,o=c.gc();c.zb(3),c.Mc(c.ic(4,2,"SignaturesAndStamps")),c.zb(2),c.nc("ngForOf",o.requiredSignaturesForLineDef(n,e,i))}}function NF(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Jc(1,CJ,3,2,"ng-template",null,136,c.Kc),c.Jc(3,TJ,22,25,"ng-container",24),c.Rb(),c.Jc(4,zJ,2,5,"ng-template",null,137,c.Kc),c.Jc(6,_J,2,2,"ng-template",null,138,c.Kc),c.Jc(8,hF,3,2,"ng-template",null,139,c.Kc),c.Jc(10,AF,6,4,"div",140)),2&e){const e=c.Ac(2),t=c.gc().$implicit,n=c.gc(),i=n.model,o=n.isEdit,r=n.extras,s=c.gc();let l=null;c.Eb("p-4",1===(null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lines)),c.nc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lines),c.zb(3),c.nc("ngIf",s.isManualLine(t))("ngIfElse",e),c.zb(7),c.nc("ngIf",!o&&(null==(l=s.requiredSignaturesForLineDef(i,t,r))?null:l.length)>0)}}function _F(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",256),c.cc("click",function(){c.Dc(e);const t=c.gc(3).$implicit,n=c.gc(),i=n.model,o=n.isEdit;return c.gc().onAutoGenerate(t,i,o)}),c.Lc(1),c.Rb()}if(2&e){const e=c.gc(3).$implicit,t=c.gc(2);c.zb(1),c.Nc(" ",t.autoGenerateLabel(e)," ")}}function JF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",251),c.Sb(1,"button",252),c.Sb(2,"span",253),c.Nb(3,"fa-icon",254),c.Rb(),c.Rb(),c.Sb(4,"div",255),c.Sb(5,"button",256),c.cc("click",function(){c.Dc(e);const t=c.gc(2).$implicit,n=c.gc(),i=n.model,o=n.isEdit;return c.gc().onDeleteAll(t,i,o)}),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Jc(8,_F,2,1,"button",257),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).$implicit,t=c.gc().isEdit,n=c.gc();c.nc("placement",n.commandsDropdownPlacement),c.zb(6),c.Nc(" ",c.ic(7,3,"DeleteAll")," "),c.zb(2),c.nc("ngIf",n.showAutoGenerate(e,t))}}function PF(e,t){if(1&e&&c.Jc(0,JF,9,5,"div",250),2&e){const e=c.gc(2).isEdit;c.nc("ngIf",e)}}function FF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",121),c.Sb(1,"ul",122),c.Sb(2,"li",123),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.close,o=c.gc().$implicit,r=c.gc().model;return c.gc().onToggleTabIsCommon(o,n,r),i()}),c.Sb(3,"div",124),c.Nb(4,"fa-icon",125),c.Rb(),c.Sb(5,"div",126),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc().$implicit,i=c.gc().model,o=c.gc();c.zb(4),c.nc("icon",o.tabIsCommon(n,e,i)?"expand":"compress"),c.zb(2),c.Nc(" ",c.ic(7,2,o.tabIsCommon(n,e,i)?"SpecifyPerLine":"SpecifyForAllLines")," ")}}function VF(e,t){if(1&e&&(c.Sb(0,"li",127),c.Sb(1,"a",128),c.Jc(2,nJ,3,0,"span",129),c.Sb(3,"span",130),c.Lc(4),c.hc(5,"number"),c.Rb(),c.Rb(),c.Jc(6,NF,11,6,"ng-template",131),c.Jc(7,PF,1,1,"ng-template",null,132,c.Kc),c.Jc(9,FF,8,4,"ng-template",null,133,c.Kc),c.Rb()),2&e){const e=t.$implicit,n=c.gc().model,i=c.gc();c.nc("ngbNavItem",e),c.zb(1),c.Ic("background-color",i.smartTabColor(e,n)),c.zb(1),c.nc("ngIf",i.showTabErrors(e,n)),c.zb(2),c.Mc(i.tabTitle(e,n)+(null!=n&&n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lines)?"":" ("+(i.isManualLine(e)?i.manualEntries(n).length:c.ic(5,5,i.lines(e,n).length))+")"))}}function qF(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",251),c.Sb(1,"button",258),c.Sb(2,"span",253),c.Nb(3,"fa-icon",259),c.Rb(),c.Rb(),c.Sb(4,"div",255),c.Sb(5,"button",256),c.cc("click",function(){c.Dc(e);const t=c.gc().item,n=c.gc().model;return c.gc().toggleHighlight(t,n)}),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc().item,t=c.gc().model,n=c.gc();c.nc("placement",n.commandsDropdownPlacement),c.zb(6),c.Nc(" ",c.ic(7,2,n.isHighlighted(e,t)?"RemoveHighlight":"AddHighlight")," ")}}function jF(e,t){1&e&&c.Jc(0,qF,8,4,"div",250),2&e&&c.nc("ngIf",!t.item.PH)}function $F(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",256),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=c.gc(2).model;return c.gc().onOtherTab(n,i)}),c.Lc(1),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2).model,i=c.gc();c.zb(1),c.Mc(i.tabTitle(e,n))}}function UF(e,t){if(1&e&&(c.Sb(0,"li",260),c.Sb(1,"a",261),c.cc("click",function(){return!1}),c.Sb(2,"span",130),c.Nb(3,"fa-icon",262),c.Rb(),c.Rb(),c.Sb(4,"div",255),c.Jc(5,$F,2,1,"button",263),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.zb(5),c.nc("ngForOf",t.invisibleTabs(e))}}function KF(e,t){1&e&&c.Ob(0)}function BF(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",266),c.Sb(2,"h5",267),c.Lc(3),c.Rb(),c.Rb(),c.Jc(4,KF,1,0,"ng-container",177),c.Pb()),2&e){const e=c.gc(3).model,t=c.Ac(39),n=c.gc();c.zb(3),c.Nc(" ",n.bookkeepingManualAdjustmentsTitle(e)+" ("+n.manualEntries(e).length+")"," "),c.zb(1),c.nc("ngTemplateOutlet",t)}}const HF=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:3,argument:!0}},QF=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1,argument:!0}},WF=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:2,argument:!0}},GF=function(e){return{rowTemplate:e}},YF=function(e,t,n,i,c,o,r){return{AccountId:e,Debit:t,Credit:n,Center:i,Memo:c,ModifiedWarning:o,Commands:r}};function XF(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div",266),c.Sb(2,"h5",267),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Nb(5,"t-table",268),c.Jc(6,BF,5,2,"ng-container",29),c.Sb(7,"div",171),c.Sb(8,"table",178),c.Sb(9,"tr"),c.Nb(10,"td",174),c.Sb(11,"td",179),c.Lc(12),c.hc(13,"translate"),c.hc(14,"translate"),c.Rb(),c.Sb(15,"td",180),c.Lc(16),c.hc(17,"accounting"),c.Rb(),c.Rb(),c.Sb(18,"tr"),c.Nb(19,"td"),c.Sb(20,"td",181),c.Lc(21),c.hc(22,"translate"),c.hc(23,"translate"),c.Rb(),c.Sb(24,"td",182),c.Lc(25),c.hc(26,"accounting"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.Ac(41),n=c.Ac(43),i=c.Ac(49),o=c.Ac(51),r=c.Ac(53),s=c.Ac(55),l=c.Ac(45),a=c.Ac(47),u=c.Ac(59),d=c.Ac(61),b=c.Ac(63),g=c.Ac(65),f=c.gc();c.Eb("p-4",1===(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lines)),c.nc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lines),c.zb(3),c.Nc(" ",c.ic(4,15,"SmartEntries")+" ("+f.smartEntries(e).length+")",""),c.zb(2),c.nc("dataSource",f.smartEntries(e))("itemSize",70)("visibleRows",5)("highlightFunc",f.highlightPairFactory(e))("columnPaths",f.manualColumnPaths(e,!0))("columnTemplates",c.xc(52,YF,c.sc(33,HF,t,n),c.sc(36,QF,i,o),c.sc(39,QF,r,s),c.sc(42,QF,l,a),c.sc(45,WF,u,d),c.rc(48,GF,b),c.rc(50,GF,g))),c.zb(1),c.nc("ngIf",f.hasManualLines),c.zb(6),c.Nc(" ",c.jc(13,17,"Total0",c.rc(60,yJ,c.ic(14,20,"Debit")))+f.functionalPostfix,"\xa0\xa0\xa0 "),c.zb(4),c.Nc(" ",c.jc(17,22,f.total(e,1),f.functional_format)," "),c.zb(5),c.Nc(" ",c.jc(22,25,"Total0",c.rc(62,yJ,c.ic(23,28,"Credit")))+f.functionalPostfix,"\xa0\xa0\xa0 "),c.zb(4),c.Nc(" ",c.jc(26,30,f.total(e,-1),f.functional_format)," ")}}function ZF(e,t){if(1&e&&(c.Sb(0,"li",127),c.Sb(1,"a",264),c.hc(2,"translate"),c.Sb(3,"span",130),c.Nb(4,"fa-icon",265),c.Sb(5,"span"),c.Lc(6),c.hc(7,"number"),c.Rb(),c.Rb(),c.Rb(),c.Jc(8,XF,27,64,"ng-template",131),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.Bb(t.attachmentsClass),c.nc("ngbNavItem",-10),c.zb(1),c.Ic("background-color",t.bookkeepingTabColor(e)),c.nc("title",c.ic(2,8,"Bookkeeping")),c.zb(5),c.Nc("\xa0\xa0",null!=e&&e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lines)?"":"("+c.ic(7,10,t.entriesCount(e))+")","")}}function eV(e,t){1&e&&(c.Sb(0,"span",134),c.Nb(1,"fa-icon",135),c.Lc(2,"\xa0 "),c.Rb())}function tV(e,t){1&e&&(c.Sb(0,"div",275),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Mc(c.ic(3,1,"NoItemsFound")))}function nV(e,t){1&e&&(c.Sb(0,"div",291),c.Nb(1,"t-spinner",292),c.Rb())}function iV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",288),c.Sb(1,"button",289),c.cc("click",function(){c.Dc(e);const t=c.gc().index,n=c.gc(4).model;return c.gc().onDownloadAttachment(n,t)}),c.Lc(2),c.Rb(),c.Jc(3,nV,2,0,"div",290),c.Rb()}if(2&e){const e=c.gc().$implicit,t=c.gc(5);c.zb(2),c.Mc(t.fileName(e)),c.zb(1),c.nc("ngIf",e.downloading)}}function cV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",293),c.Sb(1,"t-form-group",294),c.Sb(2,"t-text-editor",295),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.attachment.FileName=t}),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc().$implicit;c.zb(1),c.nc("serverErrors",null==e.attachment||null==e.attachment.serverErrors?null:e.attachment.serverErrors.FileName),c.zb(1),c.nc("ngModel",e.attachment.FileName)("ngModelOptions",c.qc(3,JN))}}const oV=function(e,t){return{0:e,1:t}};function rV(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.hc(3,"datetimeFormat"),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(5);c.zb(1),c.Nc("",c.jc(2,1,"AttachmentAudit",c.sc(6,oV,c.ic(3,4,e.attachment.CreatedAt),t.ws.getMultilingualValue("User",e.attachment.CreatedById,"Name"))),"\xa0")}}function sV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",299),c.cc("click",function(){c.Dc(e);const t=c.gc(2).index,n=c.gc(4).model;return c.gc().onDownloadAttachment(n,t)}),c.hc(1,"translate"),c.Nb(2,"fa-icon",300),c.Rb()}2&e&&c.nc("title",c.ic(1,1,"Download"))}function lV(e,t){1&e&&(c.Sb(0,"div",301),c.Nb(1,"t-spinner",292),c.Rb())}function aV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",296),c.Jc(1,sV,3,3,"button",297),c.Jc(2,lV,2,0,"ng-template",null,298,c.Kc),c.Sb(4,"button",299),c.cc("click",function(){c.Dc(e);const t=c.gc().index,n=c.gc(4).model;return c.gc().onDeleteAttachment(n,t)}),c.hc(5,"translate"),c.Nb(6,"fa-icon",249),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(3),t=c.gc().$implicit;c.zb(1),c.nc("ngIf",!t.downloading)("ngIfElse",e),c.zb(3),c.nc("title",c.ic(5,3,"Delete"))}}function uV(e,t){if(1&e&&(c.Sb(0,"div",278),c.Sb(1,"div",279),c.Sb(2,"div",280),c.Nb(3,"fa-icon",281),c.Rb(),c.Sb(4,"div",282),c.Jc(5,iV,4,2,"div",283),c.Jc(6,cV,3,4,"ng-template",null,284,c.Kc),c.Sb(8,"div",285),c.Sb(9,"div",286),c.Jc(10,rV,4,9,"span",29),c.Sb(11,"span"),c.Lc(12),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Jc(13,aV,7,5,"div",287),c.Rb(),c.Rb()),2&e){const e=t.$implicit,n=t.index,i=c.Ac(7),o=c.gc(4).isEdit,r=c.gc();c.Eb("bg-light",n%2==1e3),c.zb(3),c.Ic("color",r.colorFromExtension(e.attachment.FileExtension)),c.nc("icon",r.iconFromExtension(e.attachment.FileExtension)),c.zb(2),c.nc("ngIf",!o)("ngIfElse",i),c.zb(5),c.nc("ngIf",e.attachment.CreatedById),c.zb(2),c.Nc("(",r.size(e),")"),c.zb(1),c.nc("ngIf",o)}}function dV(e,t){if(1&e&&(c.Sb(0,"div",276),c.Jc(1,uV,14,10,"div",277),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.nc("ngForOf",t.attachmentWrappers(e))}}function bV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",302),c.Sb(1,"button",303),c.cc("click",function(){return c.Dc(e),c.gc(3),c.Ac(37).click()}),c.Nb(2,"fa-icon",304),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3).model;c.zb(3),c.Nc(" \xa0\xa0",c.ic(4,1,(null==e||null==e.Attachments?null:e.Attachments.length)>0?"UploadMore":"Upload")," ")}}function gV(e,t){if(1&e&&(c.Jc(0,tV,4,3,"div",272),c.Jc(1,dV,2,1,"div",273),c.Jc(2,bV,5,3,"div",274)),2&e){const e=c.gc(2),t=e.model,n=e.isEdit;c.nc("ngIf",!(null!=t&&null!=t.Attachments&&t.Attachments.length||n)),c.zb(1),c.nc("ngIf",!(null==t||null==t.Attachments||!t.Attachments.length)),c.zb(1),c.nc("ngIf",n)}}function fV(e,t){if(1&e&&(c.Sb(0,"li",127),c.Sb(1,"a",269),c.Sb(2,"span",270),c.hc(3,"translate"),c.Jc(4,eV,3,0,"span",129),c.Sb(5,"span"),c.Nb(6,"fa-icon",271),c.Sb(7,"span"),c.Lc(8),c.hc(9,"number"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Jc(10,gV,3,3,"ng-template",131),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.Bb(t.showBookkeepingTab?"":t.attachmentsClass),c.nc("ngbNavItem",-20),c.zb(2),c.nc("title",c.ic(3,7,"Document_Attachments")),c.zb(2),c.nc("ngIf",t.showAttachmentsErrors(e)),c.zb(4),c.Nc("\xa0\xa0",null!=e&&e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Attachments)?"":"("+c.ic(9,9,null==e||null==e.Attachments?null:e.Attachments.length)+")","")}}function mV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(4).model,t=c.gc();let n=null,i=null;c.nc("metadata",null==(n=t.manualLine(e))||null==n.EntityMetadata?null:n.EntityMetadata.PostingDate),c.zb(2),c.Mc(c.ic(3,2,null==(i=t.manualLine(e))?null:i.PostingDate))}}function hV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",295),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(4).model;return c.gc().manualLine(n).PostingDate=t}),c.Rb()}if(2&e){const e=c.gc(4).model,t=c.gc();c.nc("ngModel",t.manualLine(e).PostingDate)("ngModelOptions",c.qc(2,JN))}}function pV(e,t){if(1&e&&(c.Sb(0,"t-form-group",87),c.hc(1,"translate"),c.Jc(2,mV,4,4,"t-restricted",83),c.Jc(3,hV,1,3,"t-date-picker",308),c.Rb()),2&e){const e=c.gc(3),t=e.model,n=e.isEdit,i=c.gc();let o=null;c.nc("label",c.ic(1,4,"Line_PostingDate"))("serverErrors",null==(o=i.manualLine(t))||null==o.serverErrors?null:o.serverErrors.PostingDate),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function SV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(4).model,t=c.gc();let n=null,i=null;c.nc("metadata",null==(n=t.manualLine(e))||null==n.EntityMetadata?null:n.EntityMetadata.Memo),c.zb(2),c.Mc(null==(i=t.manualLine(e))?null:i.Memo)}}function vV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",295),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(4).model;return c.gc().manualLine(n).Memo=t}),c.Rb()}if(2&e){const e=c.gc(4).model,t=c.gc();c.nc("ngModel",t.manualLine(e).Memo)("ngModelOptions",c.qc(2,JN))}}function IV(e,t){if(1&e&&(c.Sb(0,"t-form-group",87),c.hc(1,"translate"),c.Jc(2,SV,3,2,"t-restricted",83),c.Jc(3,vV,1,3,"t-text-editor",308),c.Rb()),2&e){const e=c.gc(3),t=e.model,n=e.isEdit,i=c.gc();let o=null;c.nc("label",c.ic(1,4,"Memo"))("serverErrors",null==(o=i.manualLine(t))||null==o.serverErrors?null:o.serverErrors.Memo),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function MV(e,t){if(1&e&&(c.Sb(0,"div",307),c.Jc(1,pV,4,6,"t-form-group",35),c.Jc(2,IV,4,6,"t-form-group",35),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(1),c.nc("ngIf",!t.showDocumentPostingDate(e)),c.zb(1),c.nc("ngIf",!t.showDocumentMemo(e))}}const RV=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:3}},yV=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},DV=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:2}},wV=function(e,t){return{headerTemplate:e,rowTemplate:t}},EV=function(e,t,n,i,c,o){return{AccountId:e,Debit:t,Credit:n,Center:i,Memo:c,Commands:o}};function CV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-table",305),c.cc("insert",function(t){c.Dc(e);const n=c.gc().model;return c.gc().onInsertManualEntry(t,n)})("delete",function(t){c.Dc(e);const n=c.gc().model;return c.gc().onDeleteManualEntry(t,n)}),c.Rb(),c.Jc(1,MV,3,2,"div",306)}if(2&e){const e=c.gc(),t=e.model,n=e.isEdit,i=c.Ac(41),o=c.Ac(43),r=c.Ac(49),s=c.Ac(51),l=c.Ac(53),a=c.Ac(55),u=c.Ac(45),d=c.Ac(47),b=c.Ac(59),g=c.Ac(61),f=c.Ac(67),m=c.Ac(69),h=c.gc();c.nc("dataSource",h.manualEntries(t))("isEdit",n)("itemSize",70)("columnPaths",h.manualColumnPaths(t))("columnTemplates",c.wc(25,EV,c.sc(7,RV,i,o),c.sc(10,yV,r,s),c.sc(13,yV,l,a),c.sc(16,yV,u,d),c.sc(19,DV,b,g),c.sc(22,wV,f,m)))("onNewItem",h.onNewManualEntry),c.zb(1),c.nc("ngIf",h.showManualLineProps(t))}}function xV(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Entry_Account"))}function TV(e,t){1&e&&(c.Sb(0,"span",312),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"Undefined")))}function zV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",198),c.Lc(2),c.Rb(),c.Jc(3,TV,3,3,"span",311),c.Rb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc(2);c.nc("metadata",null==t.EntityMetadata?null:t.EntityMetadata.AccountId),c.zb(1),c.nc("itemId",null==t?null:t.AccountId),c.zb(1),c.Nc(" ",i.accountDisplay(null==t?null:t.AccountId),""),c.zb(1),c.nc("ngIf",n&&!(null!=t&&t.AccountId))}}function LV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-accounts-picker",313),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.entry.AccountId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(),t=e.item.entry,n=e.item,i=e.argument,o=c.gc(2);c.nc("ngModel",t.AccountId)("additionalSelect",o.additionalSelectAccount)("filter",o.filterAccount(n,i))}}function kV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",103),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CurrencyId),c.zb(1),c.nc("itemId",e.CurrencyId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")," ")}}function OV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",316),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.CurrencyId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.CurrencyId)}}function AV(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.hc(2,"translate"),c.Jc(3,kV,3,3,"t-restricted",83),c.Jc(4,OV,1,1,"t-currencies-picker",315),c.Lc(5," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit;c.zb(1),c.nc("label",c.ic(2,4,"Entry_Currency"))("serverErrors",null==t.serverErrors?null:t.serverErrors.CurrencyId),c.zb(2),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function NV(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-restricted",85),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.MonetaryValue),c.zb(1),c.Nc(" ",c.jc(3,2,e.MonetaryValue,t.MonetaryValue_format(e))," ")}}function _V(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"t-decimal-editor",317),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.MonetaryValue=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb(),c.Pb()}if(2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngModel",e.MonetaryValue)("maxDecimalPlaces",t.MonetaryValue_decimals(e))("minDecimalPlaces",t.MonetaryValue_decimals(e))("ngModelOptions",c.qc(4,JN))}}function JV(e,t){if(1&e&&(c.Qb(0),c.Lc(1," \xa0 "),c.Sb(2,"t-restricted",85),c.Lc(3),c.Rb(),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc().isEdit,n=c.gc();c.zb(2),c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CurrencyId),c.zb(1),c.Nc(" ",n.ws.getMultilingualValue("Currency",t?n.readonlyValueCurrencyId(e):e.CurrencyId,"Name")," ")}}function PV(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.hc(2,"translate"),c.Jc(3,NV,4,5,"ng-container",29),c.Jc(4,_V,2,5,"ng-container",29),c.Jc(5,JV,4,2,"ng-container",29),c.Lc(6," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",c.ic(2,5,"Entry_MonetaryValue"))("serverErrors",null==t.serverErrors?null:t.serverErrors.MonetaryValue),c.zb(2),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n),c.zb(1),c.nc("ngIf",!o.showCurrency(t))}}function FV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);let n=null;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.RelationId),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",e.RelationId))?null:n.DefinitionId))("itemId",e.RelationId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",e.RelationId,"Name")," ")}}function VV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",319),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).item.entry.RelationId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("ngModel",e.RelationId)("additionalSelect",t.additionalSelectRelation)("definitionIds",t.definitionIdsRelation_Manual(e))}}function qV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.RelationId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",t.readonlyValueRelationId_Manual(e),"Name")," ")}}function jV(e,t){if(1&e&&(c.Qb(0),c.Jc(1,VV,1,3,"t-relations-picker",318),c.Jc(2,qV,2,2,"t-restricted",83),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngIf",!t.readonlyRelation_Manual(e)),c.zb(1),c.nc("ngIf",t.readonlyRelation_Manual(e))}}function $V(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,FV,3,4,"t-restricted",83),c.Jc(3,jV,3,2,"ng-container",29),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelRelation_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.RelationId),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function UV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);let n=null;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.NotedRelationId),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",e.NotedRelationId))?null:n.DefinitionId))("itemId",e.NotedRelationId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",e.NotedRelationId,"Name")," ")}}function KV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",319),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).item.entry.NotedRelationId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("ngModel",e.NotedRelationId)("additionalSelect",t.additionalSelectNotedRelation)("definitionIds",t.definitionIdsNotedRelation_Manual(e))}}function BV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.RelationId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",t.readonlyValueNotedRelationId_Manual(e),"Name")," ")}}function HV(e,t){if(1&e&&(c.Qb(0),c.Jc(1,KV,1,3,"t-relations-picker",318),c.Jc(2,BV,2,2,"t-restricted",83),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngIf",!t.readonlyNotedRelation_Manual(e)),c.zb(1),c.nc("ngIf",t.readonlyNotedRelation_Manual(e))}}function QV(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,UV,3,4,"t-restricted",83),c.Jc(3,HV,3,2,"ng-container",29),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelNotedRelation_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.NotedRelationId),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function WV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);let n=null;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CustodianId),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",e.CustodianId))?null:n.DefinitionId))("itemId",e.CustodianId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",e.CustodianId,"Name")," ")}}function GV(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",321),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).item.entry.CustodianId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("ngModel",e.CustodianId)("definitionIds",t.definitionIdsCustodian_Manual(e))}}function YV(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CustodianId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",t.readonlyValueCustodianId_Manual(e),"Name")," ")}}function XV(e,t){if(1&e&&(c.Qb(0),c.Jc(1,GV,1,2,"t-relations-picker",320),c.Jc(2,YV,2,2,"t-restricted",83),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngIf",!t.readonlyCustodian_Manual(e)),c.zb(1),c.nc("ngIf",t.readonlyCustodian_Manual(e))}}function ZV(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,WV,3,4,"t-restricted",83),c.Jc(3,XV,3,2,"ng-container",29),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelCustodian_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.CustodianId),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function eq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);let n=null;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ResourceId),c.zb(1),c.nc("link","../../../resources/"+(null==(n=t.ws.get("Resource",e.ResourceId))?null:n.DefinitionId))("itemId",e.ResourceId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Resource",e.ResourceId,"Name")," ")}}function tq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resources-picker",319),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).item.entry.ResourceId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("ngModel",e.ResourceId)("additionalSelect",t.additionalSelectResource)("definitionIds",t.definitionIdsResource_Manual(e))}}function nq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ResourceId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Resource",t.readonlyValueResourceId_Manual(e),"Name")," ")}}function iq(e,t){if(1&e&&(c.Qb(0),c.Jc(1,tq,1,3,"t-resources-picker",318),c.Jc(2,nq,2,2,"t-restricted",83),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngIf",!t.readonlyResource_Manual(e)),c.zb(1),c.nc("ngIf",t.readonlyResource_Manual(e))}}function cq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,eq,3,4,"t-restricted",83),c.Jc(3,iq,3,2,"ng-container",29),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelResource_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.ResourceId),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function oq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Quantity),c.zb(2),c.Mc(c.jc(3,2,e.Quantity,"1.0-4"))}}function rq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",323),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.Quantity=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.Quantity)("maxDecimalPlaces",4)("minDecimalPlaces",0)("ngModelOptions",c.qc(4,JN))}}function sq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.hc(2,"translate"),c.Jc(3,oq,4,5,"t-restricted",83),c.Jc(4,rq,1,5,"t-decimal-editor",322),c.Lc(5," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit;c.zb(1),c.nc("label",c.ic(2,4,"Entry_Quantity"))("serverErrors",null==t.serverErrors?null:t.serverErrors.Quantity),c.zb(2),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function lq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.UnitId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",e.UnitId,"Name")," ")}}function aq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.UnitId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",t.readonlyValueUnitId(e),"Name")," ")}}function uq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",325),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).item.entry.UnitId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("ngModel",e.UnitId)("filter",t.filterUnitId(e))}}function dq(e,t){if(1&e&&(c.Qb(0),c.Jc(1,aq,2,2,"t-restricted",83),c.Jc(2,uq,1,2,"t-units-picker",324),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngIf",t.readonlyUnit(e)),c.zb(1),c.nc("ngIf",!t.readonlyUnit(e))}}function bq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.hc(2,"translate"),c.Jc(3,lq,2,2,"t-restricted",83),c.Jc(4,dq,3,2,"ng-container",29),c.Lc(5," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit;c.zb(1),c.nc("label",c.ic(2,4,"Entry_Unit"))("serverErrors",null==t.serverErrors?null:t.serverErrors.UnitId),c.zb(2),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function gq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(2).item.entry;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Time1),c.zb(1),c.Nc(" ",c.ic(2,2,e.Time1)," ")}}function fq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",327),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.Time1=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.Time1)("ngModelOptions",c.qc(2,JN))}}function mq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,gq,3,4,"t-restricted",83),c.Jc(3,fq,1,3,"t-date-picker",326),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelTime1_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.Time1),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function hq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"span"),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Duration),c.zb(2),c.Mc(c.jc(3,2,e.Duration,"1.0-4"))}}function pq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",323),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.Duration=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.Duration)("maxDecimalPlaces",4)("minDecimalPlaces",0)("ngModelOptions",c.qc(4,JN))}}function Sq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.hc(2,"translate"),c.Jc(3,hq,4,5,"t-restricted",83),c.Jc(4,pq,1,5,"t-decimal-editor",322),c.Lc(5," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit;c.zb(1),c.nc("label",c.ic(2,4,"Entry_Duration"))("serverErrors",null==t.serverErrors?null:t.serverErrors.Duration),c.zb(2),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function vq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.DurationUnitId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",e.DurationUnitId,"Name")," ")}}function Iq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.DurationUnitId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Unit",t.readonlyValueDurationUnitId(e),"Name")," ")}}function Mq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",325),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).item.entry.DurationUnitId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("ngModel",e.DurationUnitId)("filter",t.filterDurationUnitId(e))}}function Rq(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Iq,2,2,"t-restricted",83),c.Jc(2,Mq,1,2,"t-units-picker",324),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngIf",t.readonlyDurationUnit(e)),c.zb(1),c.nc("ngIf",!t.readonlyDurationUnit(e))}}function yq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.hc(2,"translate"),c.Jc(3,vq,2,2,"t-restricted",83),c.Jc(4,Rq,3,2,"ng-container",29),c.Lc(5," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit;c.zb(1),c.nc("label",c.ic(2,4,"Entry_DurationUnit"))("serverErrors",null==t.serverErrors?null:t.serverErrors.DurationUnitId),c.zb(2),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function Dq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc(2).item.entry;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Time2),c.zb(1),c.Nc(" ",c.ic(2,2,e.Time2)," ")}}function wq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",327),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.Time2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.Time2)("ngModelOptions",c.qc(2,JN))}}function Eq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,Dq,3,4,"t-restricted",83),c.Jc(3,wq,1,3,"t-date-picker",326),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelTime2_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.Time2),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function Cq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",199),c.Sb(2,"div",228),c.Lc(3),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.EntryTypeId),c.zb(1),c.nc("itemId",e.EntryTypeId),c.zb(2),c.Nc(" ",t.ws.getMultilingualValue("EntryType",e.EntryTypeId,"Name")," ")}}function xq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",329),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).item.entry.EntryTypeId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("ngModel",e.EntryTypeId)("filter",t.filterEntryType_Manual(e))}}function Tq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div",228),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.EntryTypeId),c.zb(2),c.Nc(" ",t.ws.getMultilingualValue("EntryType",t.readonlyValueEntryTypeId_Manual(e),"Name")," ")}}function zq(e,t){if(1&e&&(c.Qb(0),c.Jc(1,xq,1,2,"t-entry-types-picker",328),c.Jc(2,Tq,3,2,"t-restricted",83),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngIf",!t.readonlyEntryType_Manual(e)),c.zb(1),c.nc("ngIf",t.readonlyEntryType_Manual(e))}}function Lq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.hc(2,"translate"),c.Jc(3,Cq,4,3,"t-restricted",83),c.Jc(4,zq,3,2,"ng-container",29),c.Lc(5," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit;c.zb(1),c.nc("label",c.ic(2,4,"Entry_EntryType"))("serverErrors",null==t.serverErrors?null:t.serverErrors.EntryTypeId),c.zb(2),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function kq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div",228),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ExternalReference),c.zb(2),c.Nc(" ",e.ExternalReference," ")}}function Oq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",331),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.ExternalReference=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.ExternalReference)}}function Aq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,kq,3,2,"t-restricted",83),c.Jc(3,Oq,1,1,"t-text-editor",330),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelExternalReference_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.ExternalReference),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function Nq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",92),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);let n=null;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ReferenceSourceId),c.zb(1),c.nc("link","../../../relations/"+(null==(n=t.ws.get("Relation",e.ReferenceSourceId))?null:n.DefinitionId))("itemId",e.ReferenceSourceId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",e.ReferenceSourceId,"Name")," ")}}function _q(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",321),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).item.entry.ReferenceSourceId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("ngModel",e.ReferenceSourceId)("definitionIds",t.definitionIdsReferenceSource_Manual(e))}}function Jq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.RelationId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Relation",t.readonlyValueReferenceSourceId_Manual(e),"Name")," ")}}function Pq(e,t){if(1&e&&(c.Qb(0),c.Jc(1,_q,1,2,"t-relations-picker",320),c.Jc(2,Jq,2,2,"t-restricted",83),c.Pb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.zb(1),c.nc("ngIf",!t.readonlyReferenceSource_Manual(e)),c.zb(1),c.nc("ngIf",t.readonlyReferenceSource_Manual(e))}}function Fq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,Nq,3,4,"t-restricted",83),c.Jc(3,Pq,3,2,"ng-container",29),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelReferenceSource_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.ReferenceSourceId),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function Vq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div",228),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.InternalReference),c.zb(2),c.Nc(" ",e.InternalReference," ")}}function qq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",331),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.InternalReference=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.InternalReference)}}function jq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,Vq,3,2,"t-restricted",83),c.Jc(3,qq,1,1,"t-text-editor",330),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelInternalReference_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.InternalReference),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function $q(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div",228),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.NotedAgentName),c.zb(2),c.Nc(" ",e.NotedAgentName," ")}}function Uq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",331),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.NotedAgentName=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.NotedAgentName)}}function Kq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,$q,3,2,"t-restricted",83),c.Jc(3,Uq,1,1,"t-text-editor",330),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelNotedAgentName_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.NotedAgentName),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function Bq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div",228),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.NotedAmount),c.zb(2),c.Nc(" ",c.jc(3,2,e.NotedAmount,t.MonetaryValue_format(e))," ")}}function Hq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",333),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.NotedAmount=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.nc("minDecimalPlaces",t.MonetaryValue_decimals(e))("maxDecimalPlaces",t.MonetaryValue_decimals(e))("ngModel",e.NotedAmount)}}function Qq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,Bq,4,5,"t-restricted",83),c.Jc(3,Hq,1,3,"t-decimal-editor",332),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelNotedAmount_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.NotedAmount),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function Wq(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"div",228),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(2).item.entry;c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.NotedDate),c.zb(2),c.Nc(" ",c.ic(3,2,e.NotedDate)," ")}}function Gq(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",331),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.NotedDate=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry;c.nc("ngModel",e.NotedDate)}}function Yq(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",314),c.Jc(2,Wq,4,4,"t-restricted",83),c.Jc(3,Gq,1,1,"t-date-picker",330),c.Lc(4," \xa0\xa0 "),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.item.entry,n=e.argument,i=c.gc().isEdit,o=c.gc();c.zb(1),c.nc("label",o.labelNotedDate_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.NotedDate),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function Xq(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"t-form-group-dynamic",185),c.Jc(2,zV,4,4,"t-restricted",83),c.Jc(3,LV,1,3,"t-accounts-picker",309),c.Rb(),c.Rb(),c.Sb(4,"div",310),c.Jc(5,AV,6,6,"ng-container",29),c.Jc(6,PV,7,7,"ng-container",29),c.Jc(7,$V,5,4,"ng-container",29),c.Jc(8,QV,5,4,"ng-container",29),c.Jc(9,ZV,5,4,"ng-container",29),c.Jc(10,cq,5,4,"ng-container",29),c.Jc(11,sq,6,6,"ng-container",29),c.Jc(12,bq,6,6,"ng-container",29),c.Jc(13,mq,5,4,"ng-container",29),c.Jc(14,Sq,6,6,"ng-container",29),c.Jc(15,yq,6,6,"ng-container",29),c.Jc(16,Eq,5,4,"ng-container",29),c.Jc(17,Lq,6,6,"ng-container",29),c.Jc(18,Aq,5,4,"ng-container",29),c.Jc(19,Fq,5,4,"ng-container",29),c.Jc(20,jq,5,4,"ng-container",29),c.Jc(21,Kq,5,4,"ng-container",29),c.Jc(22,Qq,5,4,"ng-container",29),c.Jc(23,Yq,5,4,"ng-container",29),c.Rb()),2&e){const e=t.item.entry,n=c.gc().isEdit,i=c.gc();c.zb(1),c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.AccountId),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(2),c.nc("ngIf",i.showCurrency(e)),c.zb(1),c.nc("ngIf",i.showMonetaryValue(e)),c.zb(1),c.nc("ngIf",i.showRelation_Manual(e)),c.zb(1),c.nc("ngIf",i.showNotedRelation_Manual(e)),c.zb(1),c.nc("ngIf",i.showCustodian_Manual(e)),c.zb(1),c.nc("ngIf",i.showResource_Manual(e)),c.zb(1),c.nc("ngIf",i.showQuantity(e)),c.zb(1),c.nc("ngIf",i.showUnit(e)),c.zb(1),c.nc("ngIf",i.showTime1_Manual(e)),c.zb(1),c.nc("ngIf",i.showDuration(e)),c.zb(1),c.nc("ngIf",i.showDurationUnit(e)),c.zb(1),c.nc("ngIf",i.showTime2_Manual(e)),c.zb(1),c.nc("ngIf",i.showEntryType_Manual(e)),c.zb(1),c.nc("ngIf",i.showExternalReference_Manual(e)),c.zb(1),c.nc("ngIf",i.showReferenceSource_Manual(e)),c.zb(1),c.nc("ngIf",i.showInternalReference_Manual(e)),c.zb(1),c.nc("ngIf",i.showNotedAgentName_Manual(e)),c.zb(1),c.nc("ngIf",i.showNotedAmount_Manual(e)),c.zb(1),c.nc("ngIf",i.showNotedDate_Manual(e))}}function Zq(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Entry_Center"))}function ej(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Sb(1,"t-view-link",99),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc().item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CenterId),c.zb(1),c.nc("itemId",e.CenterId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Center",e.CenterId,"Name")," ")}}function tj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",325),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).item.entry.CenterId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2);return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.nc("ngModel",e.CenterId)("filter",t.filterCenter_Manual(e))}}function nj(e,t){if(1&e&&(c.Sb(0,"t-restricted",85),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CenterId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Center",t.readonlyValueCenterId_Manual(e),"Name")," ")}}function ij(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"t-form-group-dynamic",185),c.Jc(2,tj,1,2,"t-centers-picker",324),c.Jc(3,nj,2,2,"t-restricted",83),c.Rb(),c.Pb()),2&e){const e=c.gc().item.entry,t=c.gc(2);c.zb(1),c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.CenterId),c.zb(1),c.nc("ngIf",!t.readonlyCenter_Manual(e)),c.zb(1),c.nc("ngIf",t.readonlyCenter_Manual(e))}}function cj(e,t){if(1&e&&(c.Jc(0,ej,3,3,"t-restricted",83),c.Jc(1,ij,4,3,"ng-container",29)),2&e){const e=t.argument,n=c.gc().isEdit;c.nc("ngIf",!n||e),c.zb(1),c.nc("ngIf",n&&!e)}}function oj(e,t){if(1&e&&(c.Sb(0,"div",334),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Mc(c.ic(2,1,"Debit")+e.functionalPostfix)}}function rj(e,t){if(1&e&&(c.Sb(0,"t-restricted",336),c.Sb(1,"div",334),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc().item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Value),c.zb(2),c.Mc(c.jc(3,2,t.getDebit(e),t.functional_format))}}function sj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group-dynamic",185),c.Sb(1,"t-decimal-editor",337),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(),i=n.item.entry,o=n.item,r=n.update;return c.gc(2).setDebit(i,t),r.call(null,o)}),c.Rb(),c.Rb()}if(2&e){const e=c.gc().item.entry,t=c.gc(2);c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Value),c.zb(1),c.nc("ngModel",t.getDebit(e))("maxDecimalPlaces",t.functional_decimals)("minDecimalPlaces",t.functional_decimals)("ngModelOptions",c.qc(5,JN))}}function lj(e,t){1&e&&c.Ob(0)}const aj=function(e,t){return{direction:1,pair:e,bookkeeping:t}};function uj(e,t){if(1&e&&(c.Jc(0,rj,4,5,"t-restricted",335),c.Jc(1,sj,2,6,"t-form-group-dynamic",183),c.Jc(2,lj,1,0,"ng-container",146)),2&e){const e=t.item,n=t.argument,i=c.gc().isEdit,o=c.Ac(57);c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(4,aj,e,n))}}function dj(e,t){if(1&e&&(c.Sb(0,"div",334),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Mc(c.ic(2,1,"Credit")+e.functionalPostfix)}}function bj(e,t){if(1&e&&(c.Sb(0,"t-restricted",336),c.Sb(1,"div",334),c.Lc(2),c.hc(3,"accounting"),c.Rb(),c.Rb()),2&e){const e=c.gc().item.entry,t=c.gc(2);c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Value),c.zb(2),c.Mc(c.jc(3,2,t.getCredit(e),t.functional_format))}}function gj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group-dynamic",185),c.Sb(1,"t-decimal-editor",337),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(),i=n.item.entry,o=n.item,r=n.update;return c.gc(2).setCredit(i,t),r.call(null,o)}),c.Rb(),c.Rb()}if(2&e){const e=c.gc().item.entry,t=c.gc(2);c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Value),c.zb(1),c.nc("ngModel",t.getCredit(e))("maxDecimalPlaces",t.functional_decimals)("minDecimalPlaces",t.functional_decimals)("ngModelOptions",c.qc(5,JN))}}function fj(e,t){1&e&&c.Ob(0)}const mj=function(e,t,n){return{direction:e,pair:t,bookkeeping:n}};function hj(e,t){if(1&e&&(c.Jc(0,bj,4,5,"t-restricted",335),c.Jc(1,gj,2,6,"t-form-group-dynamic",183),c.Jc(2,fj,1,0,"ng-container",146)),2&e){const e=t.item,n=t.argument,i=c.gc().isEdit,o=c.Ac(57);c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.tc(4,mj,-1,e,n))}}function pj(e,t){1&e&&c.Nb(0,"t-spinner")}function Sj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",339),c.Jc(1,pj,1,0,"t-spinner",29),c.Sb(2,"button",340),c.cc("click",function(){c.Dc(e);const t=c.gc(),n=t.pair,i=t.direction,o=c.gc().model;return c.gc().onAutofillFromExchangeRate(n,o,i)}),c.Nb(3,"fa-icon",341),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(),t=e.pair,n=e.direction;c.zb(1),c.nc("ngIf",!!t.subscription&&t.direction===n),c.zb(2),c.nc("title",c.ic(4,2,"AutofillFromExchangeRate"))}}function vj(e,t){if(1&e&&c.Jc(0,Sj,5,4,"div",338),2&e){const e=t.pair,n=t.bookkeeping,i=c.gc().isEdit,o=c.gc();c.nc("ngIf",!n&&i&&!e.PH&&o.showMonetaryValue(e.entry))}}function Ij(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Mc(c.ic(1,1,"Memo"))}function Mj(e,t){if(1&e&&(c.Sb(0,"div"),c.Sb(1,"t-restricted",85),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc().item.line;c.zb(1),c.nc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Memo),c.zb(1),c.Mc(e.Memo)}}function Rj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",327),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().item.line.Memo=t})("ngModelChange",function(){c.Dc(e);const t=c.gc();return t.update.call(null,t.item)}),c.Rb()}if(2&e){const e=c.gc().item.line;c.nc("ngModel",e.Memo)("ngModelOptions",c.qc(2,JN))}}function yj(e,t){if(1&e&&(c.Sb(0,"t-form-group-dynamic",185),c.Jc(1,Mj,3,2,"div",29),c.Jc(2,Rj,1,3,"t-text-editor",326),c.Rb()),2&e){const e=t.item.line,n=t.argument,i=c.gc().isEdit;c.nc("serverErrors",null==e.serverErrors?null:e.serverErrors.Memo),c.zb(1),c.nc("ngIf",!i||n),c.zb(1),c.nc("ngIf",i&&!n)}}function Dj(e,t){if(1&e&&(c.Nb(0,"fa-icon",343),c.hc(1,"translate")),2&e){const e=c.gc(3);c.nc("placement",e.modifiedTooltipPlacement)("ngbTooltip",c.ic(1,2,"ModifiedLineWarning"))}}function wj(e,t){if(1&e&&c.Jc(0,Dj,2,4,"fa-icon",342),2&e){const e=t.item.line,n=c.gc().model,i=c.gc();c.nc("ngIf",i.getIsModified(e,n))}}function Ej(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",256),c.cc("click",function(){c.Dc(e);const t=c.gc().item,n=c.gc(),i=n.model,o=n.isEdit;return c.gc().onReverse(t,i,o)}),c.Lc(1),c.hc(2,"translate"),c.Rb()}2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"Reverse")," "))}function Cj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",251),c.Sb(1,"button",252),c.Sb(2,"span",253),c.Nb(3,"fa-icon",254),c.Rb(),c.Rb(),c.Sb(4,"div",255),c.Sb(5,"button",256),c.cc("click",function(){c.Dc(e);const n=t.item.line,i=c.gc().model;return c.gc().toggleHighlight(n,i)}),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Jc(8,Ej,3,3,"button",257),c.Rb(),c.Rb()}if(2&e){const e=t.item.line,n=c.gc(),i=n.model,o=n.isEdit,r=c.gc();c.nc("placement",r.commandsDropdownPlacement),c.zb(6),c.Nc(" ",c.ic(7,3,r.isHighlighted(e,i)?"RemoveHighlight":"AddHighlight")," "),c.zb(2),c.nc("ngIf",r.hasManualLines&&o)}}function xj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",251),c.Sb(1,"button",252),c.Sb(2,"span",253),c.Nb(3,"fa-icon",254),c.Rb(),c.Rb(),c.Sb(4,"div",255),c.Sb(5,"button",256),c.cc("click",function(){c.Dc(e);const t=c.gc(2),n=t.model,i=t.isEdit;return c.gc().onDeleteAllManualEntries(n,i)}),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.nc("placement",e.commandsDropdownPlacement),c.zb(6),c.Nc(" ",c.ic(7,2,"DeleteAll")," ")}}function Tj(e,t){if(1&e&&c.Jc(0,xj,8,4,"div",250),2&e){const e=c.gc().isEdit;c.nc("ngIf",e)}}function zj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",251),c.Sb(1,"button",258),c.Sb(2,"span",253),c.Nb(3,"fa-icon",259),c.Rb(),c.Rb(),c.Sb(4,"div",255),c.Sb(5,"button",256),c.cc("click",function(){c.Dc(e);const t=c.gc(),n=t.item,i=t.update,o=c.gc().model;return c.gc().onAutoBalance(n,o,i)}),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Sb(8,"button",256),c.cc("click",function(){c.Dc(e);const t=c.gc().item,n=c.gc(),i=n.model,o=n.isEdit;return c.gc().onCloneManualLine(t,i,o)}),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.nc("placement",e.commandsDropdownPlacement),c.zb(6),c.Nc(" ",c.ic(7,3,"AutoBalance")," "),c.zb(3),c.Nc(" ",c.ic(10,5,"Clone")," ")}}function Lj(e,t){if(1&e&&c.Jc(0,zj,11,7,"div",250),2&e){const e=c.gc().isEdit;c.nc("ngIf",e)}}function kj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",31),c.Jc(1,_N,2,1,"h2",32),c.Jc(2,PN,1,5,"t-serial-editor",33),c.Rb(),c.Jc(3,qN,3,6,"t-form-group",34),c.Jc(4,UN,4,6,"t-form-group",35),c.Jc(5,QN,2,6,"t-form-group",36),c.Jc(6,XN,2,6,"t-form-group",37),c.Jc(7,n_,2,6,"t-form-group",38),c.Jc(8,r_,2,6,"t-form-group",39),c.Jc(9,a_,3,6,"t-form-group",40),c.Jc(10,g_,2,6,"t-form-group",41),c.Jc(11,p_,2,6,"t-form-group",42),c.Jc(12,M_,2,6,"t-form-group",43),c.Jc(13,w_,2,6,"t-form-group",44),c.Jc(14,T_,2,6,"t-form-group",45),c.Jc(15,O_,2,6,"t-form-group",46),c.Jc(16,J_,2,6,"t-form-group",47),c.Jc(17,q_,2,6,"t-form-group",48),c.Jc(18,K_,2,6,"t-form-group",49),c.Jc(19,W_,2,6,"t-form-group",50),c.Jc(20,X_,4,8,"t-form-group",51),c.Jc(21,Z_,4,7,"ng-template",null,52,c.Kc),c.Jc(23,eJ,4,7,"ng-template",null,53,c.Kc),c.Jc(25,tJ,8,4,"ng-template",null,54,c.Kc),c.Sb(27,"ul",55,56),c.cc("activeIdChange",function(t){return c.Dc(e),c.gc().setActiveTab(t)}),c.Jc(29,VF,11,7,"li",57),c.Jc(30,jF,1,1,"ng-template",null,58,c.Kc),c.Jc(32,UF,6,1,"li",59),c.Jc(33,ZF,9,12,"li",60),c.Jc(34,fV,11,11,"li",60),c.Rb(),c.Nb(35,"div",61),c.Sb(36,"input",62,63),c.cc("change",function(){c.Dc(e);const n=t.model,i=c.Ac(37);return c.gc().onFileSelected(i,n)}),c.Rb(),c.Jc(38,CV,2,32,"ng-template",null,64,c.Kc),c.Jc(40,xV,2,3,"ng-template",null,65,c.Kc),c.Jc(42,Xq,24,22,"ng-template",null,66,c.Kc),c.Jc(44,Zq,2,3,"ng-template",null,67,c.Kc),c.Jc(46,cj,2,2,"ng-template",null,68,c.Kc),c.Jc(48,oj,3,3,"ng-template",null,69,c.Kc),c.Jc(50,uj,3,7,"ng-template",null,70,c.Kc),c.Jc(52,dj,3,3,"ng-template",null,71,c.Kc),c.Jc(54,hj,3,8,"ng-template",null,72,c.Kc),c.Jc(56,vj,1,1,"ng-template",null,73,c.Kc),c.Jc(58,Ij,2,3,"ng-template",null,74,c.Kc),c.Jc(60,yj,3,3,"ng-template",null,75,c.Kc),c.Jc(62,wj,1,1,"ng-template",null,76,c.Kc),c.Jc(64,Cj,9,5,"ng-template",null,77,c.Kc),c.Jc(66,Tj,1,1,"ng-template",null,78,c.Kc),c.Jc(68,Lj,1,1,"ng-template",null,79,c.Kc)}if(2&e){const e=t.model,n=t.isEdit,i=c.Ac(28),o=c.gc();c.nc("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.SerialNumber),c.zb(1),c.nc("ngIf",!n||o.isOriginalDocument),c.zb(1),c.nc("ngIf",n&&!o.isOriginalDocument),c.zb(1),c.nc("ngIf",o.showDocumentPostingDate(e)),c.zb(1),c.nc("ngIf",o.showClearance(e)),c.zb(1),c.nc("ngIf",o.showDocumentCustodian(e)),c.zb(1),c.nc("ngIf",o.showDocumentRelation(e)),c.zb(1),c.nc("ngIf",o.showDocumentResource(e)),c.zb(1),c.nc("ngIf",o.showDocumentNotedRelation(e)),c.zb(1),c.nc("ngIf",o.showDocumentCenter(e)),c.zb(1),c.nc("ngIf",o.showDocumentCurrency(e)),c.zb(1),c.nc("ngIf",o.showDocumentQuantity(e)),c.zb(1),c.nc("ngIf",o.showDocumentUnit(e)),c.zb(1),c.nc("ngIf",o.showDocumentTime1(e)),c.zb(1),c.nc("ngIf",o.showDocumentDuration(e)),c.zb(1),c.nc("ngIf",o.showDocumentDurationUnit(e)),c.zb(1),c.nc("ngIf",o.showDocumentTime2(e)),c.zb(1),c.nc("ngIf",o.showDocumentExternalReference(e)),c.zb(1),c.nc("ngIf",o.showDocumentReferenceSource(e)),c.zb(1),c.nc("ngIf",o.showDocumentInternalReference(e)),c.zb(1),c.nc("ngIf",o.showDocumentMemo(e)),c.zb(7),c.nc("destroyOnHide",!0)("activeId",o.getActiveTab(e)),c.zb(2),c.nc("ngForOf",o.visibleTabs(e)),c.zb(3),c.nc("ngIf",n&&o.invisibleTabs(e).length>0),c.zb(1),c.nc("ngIf",o.showBookkeepingTab),c.zb(1),c.nc("ngIf",o.showAttachmentsTab),c.zb(1),c.nc("ngbNavOutlet",i)}}function Oj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",351),c.Sb(1,"div",352),c.Sb(2,"label",353),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"div",354),c.Sb(6,"t-users-picker",355),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).assigneeId=t}),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",352),c.Sb(8,"textarea",356),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).comment=t}),c.hc(9,"translate"),c.Rb(),c.Rb(),c.Sb(10,"button",357),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onAssign(t)}),c.Lc(11),c.hc(12,"translate"),c.Nb(13,"fa-icon",125),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2),t=e.model,n=e.isEdit,i=c.gc();c.Ic("margin-left",i.marginLeft,"px")("margin-right",i.marginRight,"px"),c.zb(3),c.Mc(c.ic(4,13,"AssignTo")),c.zb(3),c.nc("ngModel",i.assigneeId)("filter","Id ne "+t.AssigneeId)("showCreate",!1),c.zb(2),c.oc("placeholder",c.ic(9,15,"OptionalMessage")),c.nc("ngModel",i.comment),c.zb(2),c.nc("disabled",!i.canAssign(t,n)),c.zb(1),c.Nc("",c.ic(12,17,"Assign"),"\xa0\xa0"),c.zb(2),c.nc("icon",i.assignIcon)}}function Aj(e,t){if(1&e&&(c.Sb(0,"div",347),c.Sb(1,"div",348),c.Nb(2,"t-image",236),c.Sb(3,"div",349),c.Sb(4,"t-view-link",238),c.Lc(5),c.Rb(),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Jc(8,Oj,14,19,"div",350),c.Rb()),2&e){const e=c.gc().model,t=c.gc();let n=null;c.zb(2),c.nc("src","users/"+e.AssigneeId+"/image")("imageId",null==(n=t.ws.get("User",e.AssigneeId))?null:n.ImageId)("size",t.picSize),c.zb(2),c.nc("itemId",e.AssigneeId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.AssigneeId,"Name"),""),c.zb(1),c.Nc(" ",c.ic(7,7,"OwnsThisDocument")," "),c.zb(2),c.nc("ngIf",t.showAssignDocument(e))}}function Nj(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",348),c.Nb(2,"t-image",236),c.Sb(3,"div",349),c.Sb(4,"t-view-link",238),c.Lc(5),c.Rb(),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Sb(8,"div",360),c.Sb(9,"span",361),c.Lc(10),c.hc(11,"timeFormat"),c.Rb(),c.Rb(),c.Rb(),c.Pb()),2&e){const e=c.gc().$implicit,t=c.gc(3);let n=null;c.zb(2),c.nc("src","users/"+e.userId+"/image")("imageId",null==(n=t.ws.get("User",e.userId))?null:n.ImageId)("size",36),c.zb(2),c.nc("itemId",e.userId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.userId,"Name"),""),c.zb(1),c.Nc(" ",c.ic(7,7,t.stateUpdateDisplay(e))," "),c.zb(4),c.Nc(" ",c.ic(11,9,e.time)," ")}}function _j(e,t){if(1&e&&(c.Sb(0,"div",367),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit,t=c.gc(3);c.Ic("margin-left",t.marginLeft,"px")("margin-right",t.marginRight,"px"),c.zb(1),c.Nc(" ",t.reassignment(e).comment," ")}}function Jj(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",362),c.Nb(2,"t-image",236),c.Sb(3,"div",349),c.Sb(4,"t-view-link",238),c.Lc(5),c.Rb(),c.Rb(),c.Lc(6," \xa0 "),c.Sb(7,"div",363),c.Nb(8,"fa-icon",364),c.Rb(),c.Lc(9," \xa0 \xa0 "),c.Nb(10,"t-image",236),c.Sb(11,"div",349),c.Sb(12,"t-view-link",238),c.Lc(13),c.Rb(),c.Rb(),c.Sb(14,"div",360),c.Sb(15,"span",365),c.Lc(16),c.hc(17,"timeFormat"),c.Rb(),c.Rb(),c.Rb(),c.Jc(18,_j,2,5,"div",366),c.Pb()),2&e){const e=c.gc().$implicit,t=c.gc(3);let n=null,i=null;c.zb(2),c.nc("src","users/"+e.userId+"/image")("imageId",null==(n=t.ws.get("User",e.userId))?null:n.ImageId)("size",36),c.zb(2),c.nc("itemId",e.userId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.userId,"Name")," "),c.zb(3),c.nc("flip",t.flip)("size",120),c.zb(2),c.nc("src","users/"+t.reassignment(e).assigneeId+"/image")("imageId",null==(i=t.ws.get("User",t.reassignment(e).assigneeId))?null:i.ImageId)("size",36),c.zb(2),c.nc("itemId",t.reassignment(e).assigneeId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",t.reassignment(e).assigneeId,"Name")," "),c.zb(3),c.Nc(" ",c.ic(17,14,e.time)," "),c.zb(2),c.nc("ngIf",!!t.reassignment(e).comment)}}function Pj(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",348),c.Nb(2,"t-image",236),c.Sb(3,"div",349),c.Sb(4,"t-view-link",238),c.Lc(5),c.Rb(),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Sb(8,"div",360),c.Sb(9,"span",361),c.Lc(10),c.hc(11,"timeFormat"),c.Rb(),c.Rb(),c.Rb(),c.Pb()),2&e){const e=c.gc().$implicit,t=c.gc(3);let n=null;c.zb(2),c.nc("src","users/"+e.userId+"/image")("imageId",null==(n=t.ws.get("User",e.userId))?null:n.ImageId)("size",36),c.zb(2),c.nc("itemId",e.userId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.userId,"Name"),""),c.zb(1),c.Nc(" ",c.ic(7,7,"CreatedThisDocument")," "),c.zb(4),c.Nc(" ",c.ic(11,9,e.time)," ")}}function Fj(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",359),c.Jc(2,Nj,12,11,"ng-container",196),c.Jc(3,Jj,19,16,"ng-container",196),c.Jc(4,Pj,12,11,"ng-container",196),c.Rb(),c.Pb()),2&e){const e=t.$implicit,n=t.index;c.zb(1),c.Eb("border-top",0===n),c.nc("ngSwitch",e.type),c.zb(1),c.nc("ngSwitchCase","state"),c.zb(1),c.nc("ngSwitchCase","reassignment"),c.zb(1),c.nc("ngSwitchCase","creation")}}function Vj(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",358),c.Lc(2),c.Rb(),c.Jc(3,Fj,5,6,"ng-container",147),c.Pb()),2&e){const e=t.$implicit;c.zb(2),c.Mc(e.date),c.zb(1),c.nc("ngForOf",e.events)}}function qj(e,t){if(1&e&&(c.Sb(0,"div",344),c.Sb(1,"div",345),c.Jc(2,Aj,9,9,"div",346),c.Jc(3,Vj,4,2,"ng-container",147),c.Rb(),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(2),c.nc("ngIf",!!e.AssigneeId),c.zb(1),c.nc("ngForOf",n.sortChronologically(e))}}function jj(e,t){if(1&e&&(c.Sb(0,"div",368),c.Sb(1,"h5",369),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",370),c.cc("click",function(){return t.$implicit.dismiss(!1)}),c.Sb(5,"span",371),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",372),c.Lc(8),c.Rb(),c.Sb(9,"div",373),c.Sb(10,"button",374),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(11,"fa-icon",22),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Sb(14,"button",375),c.cc("click",function(){return t.$implicit.close(!1)}),c.Nb(15,"fa-icon",20),c.Lc(16),c.hc(17,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,4,"Confirmation")," "),c.zb(6),c.Nc(" ",e.confirmationMessage," "),c.zb(4),c.Nc(" \xa0",c.ic(13,6,"Yes")," "),c.zb(4),c.Nc(" \xa0",c.ic(17,8,"No")," ")}}function $j(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",379),c.Sb(1,"div",380),c.Sb(2,"span",381),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"t-users-picker",382),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).onBehalfOfUserId=t}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(3),c.Mc(c.ic(4,2,"Signature_OnBehalfOfUser")),c.zb(2),c.nc("ngModel",e.onBehalfOfUserId)}}function Uj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",383),c.Sb(1,"div",380),c.Sb(2,"span",381),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"t-selector",89),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).reasonId=t}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(3),c.Mc(c.ic(4,3,"Signature_Reason")),c.zb(2),c.nc("ngModel",e.reasonId)("choices",e.reasonChoicesForNegativeModal)}}function Kj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",379),c.Sb(1,"div",380),c.Sb(2,"span",381),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"t-text-editor",327),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).reasonDetails=t}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(3),c.Mc(c.ic(4,3,"Signature_ReasonDetails")),c.zb(2),c.nc("ngModel",e.reasonDetails)("ngModelOptions",c.qc(5,JN))}}function Bj(e,t){if(1&e&&(c.Sb(0,"div",368),c.Sb(1,"h5",369),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",370),c.cc("click",function(){return t.$implicit.dismiss(!1)}),c.Sb(5,"span",371),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",372),c.Jc(8,$j,6,4,"div",376),c.Jc(9,Uj,6,5,"div",377),c.Jc(10,Kj,6,6,"div",376),c.Rb(),c.Sb(11,"div",373),c.Sb(12,"button",378),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(13,"fa-icon",22),c.Lc(14),c.hc(15,"translate"),c.Rb(),c.Sb(16,"button",375),c.cc("click",function(){return t.$implicit.close(!1)}),c.Nb(17,"fa-icon",20),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,11,"AdditionalInformation")," "),c.zb(6),c.nc("ngIf",e.onBehalfOfUserAmbiguous),c.zb(1),c.nc("ngIf",e.isNegative&&(null==e.reasonChoicesForNegativeModal?null:e.reasonChoicesForNegativeModal.length)>0),c.zb(1),c.nc("ngIf",e.isNegative),c.zb(2),c.Eb("btn-danger",e.isNegative)("btn-success",!e.isNegative),c.nc("disabled",e.onBehalfOfUserAmbiguous&&!e.onBehalfOfUserId),c.zb(2),c.Nc(" \xa0",c.ic(15,13,"Confirm")," "),c.zb(4),c.Nc(" \xa0",c.ic(19,15,"Cancel")," ")}}const Hj=function(e){return{updateOn:e}};function Qj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",387),c.Sb(1,"t-editor",388),c.cc("ngModelChange",function(n){c.Dc(e);const i=t.$implicit;return c.gc(2).autoGenerateArgs[i.Key]=n}),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2);c.nc("label",n.parameterLabel(e)),c.zb(1),c.nc("ngModel",n.autoGenerateArgs[e.Key])("desc",n.parameterDesc(e))("ngModelOptions",c.rc(4,Hj,n.updateOn(e)))}}function Wj(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",368),c.Sb(1,"h5",369),c.Lc(2),c.Rb(),c.Sb(3,"button",370),c.cc("click",function(){return t.$implicit.dismiss(!1)}),c.Sb(4,"span",371),c.Lc(5,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(6,"div",372),c.Jc(7,Qj,2,6,"t-form-group",384),c.Rb(),c.Sb(8,"div",373),c.Sb(9,"button",385),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc().onDoAutoGenerate(n)}),c.Nb(10,"fa-icon",386),c.Lc(11),c.Rb(),c.Sb(12,"button",375),c.cc("click",function(){return t.$implicit.close(!1)}),c.Nb(13,"fa-icon",20),c.Lc(14),c.hc(15,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(2),c.Nc(" ",e.autoGenerateLabel(e.autoGenerateLineDefId)," "),c.zb(5),c.nc("ngForOf",e.autoGenerateLineDef.GenerateParameters)("ngForTrackBy",e.trackByKey),c.zb(2),c.nc("disabled",!e.autoGenerateRequiredParamsAreSet),c.zb(2),c.Nc(" \xa0",e.autoGenerateLabel(e.autoGenerateLineDefId)," "),c.zb(3),c.Nc(" \xa0",c.ic(15,6,"Cancel")," ")}}let Gj=(()=>{class e extends mn.a{constructor(e,t,n,i,c,o){super(),this.workspace=e,this.api=t,this.translate=n,this.route=i,this.modalService=c,this.audio=o,this.documentsApi=this.api.documentsApi(null,this.notifyDestruct$),this.localState=new L.e,this.picSize=36,this.selectBase="$Details",this.additionalSelectAccount="$DocumentDetails",this.additionalSelectRelation="$DocumentDetails",this.additionalSelectResource="$DocumentDetails",this.additionalSelectNotedRelation="$DocumentDetails",this.encodeCustomStateFunc=e=>{const t=this.state.detailsState;t.tab&&(e.tab=t.tab)},this.create=()=>{const e={Clearance:0,LineDefinitionEntries:[],Lines:[],Attachments:[]};return this.isJV?(e.PostingDate=Object(yi.e)(),e.PostingDateIsCommon=!0,e.MemoIsCommon=!0,e.CurrencyIsCommon=!1,e.CenterIsCommon=!1,e.CustodianIsCommon=!1,e.RelationIsCommon=!1,e.ResourceIsCommon=!1,e.NotedRelationIsCommon=!1,e.QuantityIsCommon=!1,e.UnitIsCommon=!1,e.Time1IsCommon=!1,e.DurationIsCommon=!1,e.DurationUnitIsCommon=!1,e.Time2IsCommon=!1,e.ExternalReferenceIsCommon=!1,e.ReferenceSourceIsCommon=!1,e.InternalReferenceIsCommon=!1):(this.definition.HasWorkflow||(e.PostingDate=Object(yi.e)()),e.PostingDateIsCommon=!0,e.MemoIsCommon=!0,e.CurrencyIsCommon=!0,e.CenterIsCommon=!0,e.CustodianIsCommon=!0,e.RelationIsCommon=!0,e.ResourceIsCommon=!0,e.NotedRelationIsCommon=!0,e.QuantityIsCommon=!0,e.UnitIsCommon=!0,e.Time1IsCommon=!0,e.DurationIsCommon=!0,e.DurationUnitIsCommon=!0,e.Time2IsCommon=!0,e.ExternalReferenceIsCommon=!0,e.ReferenceSourceIsCommon=!0,e.InternalReferenceIsCommon=!0),e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,delete t.EntityMetadata,delete t.serverErrors,delete t.SerialNumber,t.Attachments=[],delete t.State,delete t.StateAt,delete t.Comment,delete t.AssigneeId,delete t.AssignedAt,delete t.AssignedById,delete t.OpenedAt,delete t.CreatedAt,delete t.CreatedById,delete t.ModifiedAt,delete t.ModifiedById,t.AssignmentsHistory=[],t.StatesHistory=[],t.LineDefinitionEntries&&t.LineDefinitionEntries.forEach(e=>{e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.DocumentId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById}),t.Lines&&t.Lines.forEach(e=>{e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.DocumentId,delete e.State,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById,e.Entries&&e.Entries.forEach(this.processEntryClone)}),t}return console.error("Cloning a non existing item"),null},this._sortChronologicallyResult=[],this.registerPristineFunc=e=>{this._pristineDocJson=JSON.stringify(e)},this.isDirtyFunc=e=>!!(e&&e.Attachments&&e.Attachments.some(e=>!!e.File))||this._pristineDocJson!==JSON.stringify(e),this.extraParams={includeRequiredSignatures:!0},this._requiredSignatureProps=["ToState","RuleType","RoleId","CustodianId","UserId","SignedById","SignedAt","OnBehalfOfUserId","LastUnsignedState","LastNegativeState","CanSign","ProxyRoleId","CanSignOnBehalf","ReasonId","ReasonDetails"],this.onNewManualEntry=e=>(e.entry={Id:0,Direction:1},e),this._defaultTabEntry={PostingDateIsCommon:!0,MemoIsCommon:!0,CurrencyIsCommon:!0,CenterIsCommon:!0,CustodianIsCommon:!0,RelationIsCommon:!0,ResourceIsCommon:!0,NotedRelationIsCommon:!0,QuantityIsCommon:!0,UnitIsCommon:!0,Time1IsCommon:!0,DurationIsCommon:!0,DurationUnitIsCommon:!0,Time2IsCommon:!0,ExternalReferenceIsCommon:!0,ReferenceSourceIsCommon:!0,InternalReferenceIsCommon:!0},this._smartTabHeaderColumnPathsIsCommonHasChanged=!1,this._smartColumnIndicesIsCommonHasChanged=!1,this.savePreprocessing=e=>{const t=this.definition.LineDefinitions.map(e=>e.LineDefinitionId);for(const n of t){const t=this.lineDefinition(n);for(const i of t.Columns)this.tabEntry(n,i,e)||this.addNewTabEntry(n,i,e)}},this.dummyUpdate=()=>{},this.isNegativeStateActive=(e,t)=>this.isStateActive(-e,t),this.isNegativeDocumentStateActive=(e,t)=>this.isDocumentStateActive(-e,t),this._flags={},this._documentStateResult=null,this.autoGenerateArgs={},this.attentionItem=null,this._barcodeScanCount={},this._isBarcodeLoading={}}set definitionId(e){this._definitionId!==e&&(this.documentsApi=this.api.documentsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){const e=e=>{if(this.isScreenMode){this.definitionId=+e.get("definitionId")||null;const t=this.state.detailsState;let n=!1;const i=+e.get("tab");i?t.tab=i:t.tab&&(n=!0),n&&this.details&&this.details.urlStateChange()}};this._subscriptions.add(this.route.paramMap.pipe(Object(Ri.a)(1)).subscribe(e)),e(this.route.snapshot.paramMap)}setActiveTab(e){this.state.detailsState.tab=e,setTimeout(()=>{this.details.urlStateChange()})}getActiveTab(e){const t=this.state.detailsState;if(this.showAttachmentsTab&&-20===t.tab||this.showBookkeepingTab&&-10===t.tab)return t.tab;const n=this.visibleTabs(e);return n.some(e=>e===t.tab)?t.tab:n[0]||(this.showBookkeepingTab?-10:null)||(this.showAttachmentsTab?-20:null)}get showBookkeepingTab(){return this.definition.HasBookkeeping}get showAttachmentsTab(){return this.definition.HasAttachments}get isJV(){return"ManualJournalVoucher"===this.definition.Code}isManualLine(e){return e===this.ws.definitions.ManualLinesDefinitionId}get state(){return this.isPopupMode?(this.localState||(this.localState=new L.e),this.localState):this.globalState}get globalState(){const e="documents/"+this.definitionId;return this.workspace.current.mdState[e]||(this.workspace.current.mdState[e]=new L.e),this.workspace.current.mdState[e]}get view(){return`documents/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Documents[this.definitionId]:null)}get found(){return!!this.definition}processEntryClone(e){return e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.LineId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById,e}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}formatSerial(e){if(!e)return`(${this.translate.instant("New")})`;const t=this.definition;return Object(ph.a)(e,t.Prefix,t.CodeWidth||4)}get serialPrefix(){return this.definition.Prefix}get codeWidth(){return this.definition.CodeWidth}get showSidebar(){return this.isScreenMode&&"new"!==this.route.snapshot.paramMap.get("id")}isInactive(e){return e?1===e.State?"Error_OpenDocumentBeforeEdit":-1===e.State?"Error_UncancelDocumentBeforeEdit":null:""}getDebit(e){return this.isDebit(e)?e.Value:null}setDebit(e,t){e.Value=t,e.Direction=1}getCredit(e){return this.isCredit(e)?e.Value:null}setCredit(e,t){e.Value=t,e.Direction=-1}isCredit(e){return-1===e.Direction}isDebit(e){return 1===e.Direction}get functional_decimals(){return this.ws.settings.FunctionalCurrencyDecimals}get functional_format(){const e=this.functional_decimals;return`1.${e}-${e}`}get functionalPostfix(){return" ("+this.functionalName+")"}get flip(){return this.workspace.ws.isRtl?"horizontal":null}sortChronologically(e){if(!e)return null;if(e!==this._sortChronologicallyDoc){this._sortChronologicallyDoc=e;const t=e.StatesHistory||[],n=(e.AssignmentsHistory||[]).map(e=>({type:"reassignment",time:e.CreatedAt,userId:e.CreatedById,assigneeId:e.AssigneeId,comment:e.Comment})),i=t.map(e=>({type:"state",userId:e.ModifiedById,time:e.ModifiedAt,fromState:e.FromState,toState:e.ToState})),c=n.concat(i);e.CreatedById&&c.push({type:"creation",userId:e.CreatedById,time:e.CreatedAt});const o=c.sort((e,t)=>e.time<t.time?1:e.time>t.time?-1:0),r={};for(const e of o){const t=Object(yi.c)(new Date(e.time));r[t]||(r[t]=[]),r[t].push(e)}this._sortChronologicallyResult=Object.keys(r).map(e=>({date:e,events:r[e]}))}return this._sortChronologicallyResult}reassignment(e){return e}showAssignDocument(e){return!!e&&!!e.AssigneeId}stateUpdateDisplay(e){return 1===e.toState?"ClosedThisDocument":-1===e.toState?"CanceledThisDocument":1===e.fromState?"OpenedThisDocument":"UncanceledThisDocument"}onAssign(e){this.assigneeId&&this.documentsApi.assign([e.Id],{returnEntities:!0,select:this.select,assigneeId:this.assigneeId,comment:this.comment},{includeRequiredSignatures:!0}).pipe(Object(J.a)(e=>{Object(V.c)(e,this.workspace),this.details.state.extras=e.Extras,this.handleFreshExtras(e.Extras),this.assigneeId=null,this.comment=null})).subscribe({error:this.details.handleActionError})}canAssign(e,t){return!!this.assigneeId&&!t}get marginLeft(){return this.workspace.ws.isRtl?0:36}get marginRight(){return this.workspace.ws.isRtl?36:0}get attachmentsClass(){return this.workspace.ws.isRtl?"mr-md-auto":"ml-md-auto"}showClearance(e){return!!this.definition.ClearanceVisibility}clearanceDisplay(e){return null==e?"":Object(ph.c)(this.workspace,this.translate,null).properties.Clearance.format(e)}get clearanceChoices(){const e=Object(ph.c)(this.workspace,this.translate,null).properties.Clearance;return Object(Mi.c)(e)}showDocumentPostingDate(e){return!!this.definition.PostingDateVisibility}showDocumentPostingDateIsCommon(e){return this.definition.PostingDateIsCommonVisibility}requireDocumentPostingDate(e){return this.computeDocumentSettings(e),"Required"===this.definition.PostingDateVisibility||this._requireDocumentPostingDate}readonlyDocumentPostingDate(e){return this.computeDocumentSettings(e),this._readonlyDocumentPostingDate&&!this.isJV}labelDocumentPostingDate(e){return this.ws.getMultilingualValueImmediate(this.definition,"PostingDateLabel")||this.translate.instant("Document_PostingDate")}showDocumentCenter(e){return!!this.definition.CenterVisibility&&!this.ws.settings.SingleBusinessUnitId}showDocumentCenterIsCommon(e){return this.definition.CenterIsCommonVisibility}requireDocumentCenter(e){return this.computeDocumentSettings(e),"Required"===this.definition.CenterVisibility||this._requireDocumentCenter}readonlyDocumentCenter(e){return this.computeDocumentSettings(e),this._readonlyDocumentCenter&&!this.isJV}labelDocumentCenter(e){return this.ws.getMultilingualValueImmediate(this.definition,"CenterLabel")||this.translate.instant("Document_Center")}filterDocumentCenter(e){return this.definition.CenterFilter}showDocumentMemo(e){return!!this.definition.MemoVisibility}showDocumentMemoIsCommon(e){return this.definition.MemoIsCommonVisibility}requireDocumentMemo(e){return this.computeDocumentSettings(e),"Required"===this.definition.MemoVisibility||this._requireDocumentMemo}readonlyDocumentMemo(e){return this.computeDocumentSettings(e),this._readonlyDocumentMemo&&!this.isJV}labelDocumentMemo(e){return this.ws.getMultilingualValueImmediate(this.definition,"MemoLabel")||this.translate.instant("Memo")}showDocumentCurrency(e){return this.definition.CurrencyVisibility}requireDocumentCurrency(e){return this.computeDocumentSettings(e),this._requireDocumentCurrency}readonlyDocumentCurrency(e){return this.computeDocumentSettings(e),this._readonlyDocumentCurrency}labelDocumentCurrency(e){return this.ws.getMultilingualValueImmediate(this.definition,"CurrencyLabel")||this.translate.instant("Entry_Currency")}filterDocumentCurrency(e){return this.definition.CurrencyFilter}showDocumentCustodian(e){return this.definition.CustodianVisibility}requireDocumentCustodian(e){return this.computeDocumentSettings(e),this._requireDocumentCustodian}readonlyDocumentCustodian(e){return this.computeDocumentSettings(e),this._readonlyDocumentCustodian}labelDocumentCustodian(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"CustodianLabel");if(t)return t;if(1===this.definition.CustodianDefinitionIds.length){const e=this.ws.definitions.Relations[this.definition.CustodianDefinitionIds[0]];e&&(t=this.ws.getMultilingualValueImmediate(e,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Custodian")),t}documentCustodianDefinitionIds(e){return this.definition.CustodianDefinitionIds}filterDocumentCustodian(e){return this.definition.CustodianFilter}showDocumentRelation(e){return this.definition.RelationVisibility}requireDocumentRelation(e){return this.computeDocumentSettings(e),this._requireDocumentRelation}readonlyDocumentRelation(e){return this.computeDocumentSettings(e),this._readonlyDocumentRelation}labelDocumentRelation(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"RelationLabel");if(t)return t;if(1===this.definition.RelationDefinitionIds.length){const e=this.ws.definitions.Relations[this.definition.RelationDefinitionIds[0]];e&&(t=this.ws.getMultilingualValueImmediate(e,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Relation")),t}documentRelationDefinitionIds(e){return this.definition.RelationDefinitionIds}filterDocumentRelation(e){return this.definition.RelationFilter}showDocumentResource(e){return this.definition.ResourceVisibility}requireDocumentResource(e){return this.computeDocumentSettings(e),this._requireDocumentResource}readonlyDocumentResource(e){return this.computeDocumentSettings(e),this._readonlyDocumentResource}labelDocumentResource(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"ResourceLabel");if(t)return t;if(1===this.definition.ResourceDefinitionIds.length){const e=this.ws.definitions.Resources[this.definition.ResourceDefinitionIds[0]];e&&(t=this.ws.getMultilingualValueImmediate(e,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Resource")),t}documentResourceDefinitionIds(e){return this.definition.ResourceDefinitionIds}filterDocumentResource(e){return this.definition.ResourceFilter}showDocumentNotedRelation(e){return this.definition.NotedRelationVisibility}requireDocumentNotedRelation(e){return this.computeDocumentSettings(e),this._requireDocumentNotedRelation}readonlyDocumentNotedRelation(e){return this.computeDocumentSettings(e),this._readonlyDocumentNotedRelation}labelDocumentNotedRelation(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"NotedRelationLabel");if(t)return t;if(1===this.definition.NotedRelationDefinitionIds.length){const e=this.ws.definitions.Relations[this.definition.NotedRelationDefinitionIds[0]];e&&(t=this.ws.getMultilingualValueImmediate(e,"TitleSingular"))}return t||(t=this.translate.instant("Entry_NotedRelation")),t}documentNotedRelationDefinitionIds(e){return this.definition.NotedRelationDefinitionIds}filterDocumentNotedRelation(e){return this.definition.NotedRelationFilter}showDocumentQuantity(e){return this.definition.QuantityVisibility}requireDocumentQuantity(e){return this.computeDocumentSettings(e),this._requireDocumentQuantity}readonlyDocumentQuantity(e){return this.computeDocumentSettings(e),this._readonlyDocumentQuantity}labelDocumentQuantity(e){return this.ws.getMultilingualValueImmediate(this.definition,"QuantityLabel")||this.translate.instant("Entry_Quantity")}showDocumentUnit(e){return this.definition.UnitVisibility}requireDocumentUnit(e){return this.computeDocumentSettings(e),this._requireDocumentUnit}readonlyDocumentUnit(e){return this.computeDocumentSettings(e),this._readonlyDocumentUnit}labelDocumentUnit(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"UnitLabel");return t||(t||(t=this.translate.instant("Entry_Unit")),t)}filterDocumentUnit(e){return this.definition.UnitFilter}showDocumentTime1(e){return this.definition.Time1Visibility}requireDocumentTime1(e){return this.computeDocumentSettings(e),this._requireDocumentTime1}readonlyDocumentTime1(e){return this.computeDocumentSettings(e),this._readonlyDocumentTime1}labelDocumentTime1(e){return this.ws.getMultilingualValueImmediate(this.definition,"Time1Label")||this.translate.instant("Entry_Time1")}showDocumentDuration(e){return this.definition.DurationVisibility}requireDocumentDuration(e){return this.computeDocumentSettings(e),this._requireDocumentDuration}readonlyDocumentDuration(e){return this.computeDocumentSettings(e),this._readonlyDocumentDuration}labelDocumentDuration(e){return this.ws.getMultilingualValueImmediate(this.definition,"DurationLabel")||this.translate.instant("Entry_Duration")}showDocumentDurationUnit(e){return this.definition.DurationUnitVisibility}requireDocumentDurationUnit(e){return this.computeDocumentSettings(e),this._requireDocumentDurationUnit}readonlyDocumentDurationUnit(e){return this.computeDocumentSettings(e),this._readonlyDocumentDurationUnit}labelDocumentDurationUnit(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"DurationUnitLabel");return t||(t||(t=this.translate.instant("Entry_DurationUnit")),t)}filterDocumentDurationUnit(e){return this.definition.DurationUnitFilter}showDocumentTime2(e){return this.definition.Time2Visibility}requireDocumentTime2(e){return this.computeDocumentSettings(e),this._requireDocumentTime2}readonlyDocumentTime2(e){return this.computeDocumentSettings(e),this._readonlyDocumentTime2}labelDocumentTime2(e){return this.ws.getMultilingualValueImmediate(this.definition,"Time2Label")||this.translate.instant("Entry_Time2")}showDocumentExternalReference(e){return this.definition.ExternalReferenceVisibility}requireDocumentExternalReference(e){return this.computeDocumentSettings(e),this._requireDocumentExternalReference}readonlyDocumentExternalReference(e){return this.computeDocumentSettings(e),this._readonlyDocumentExternalReference}labelDocumentExternalReference(e){return this.ws.getMultilingualValueImmediate(this.definition,"ExternalReferenceLabel")||this.translate.instant("Entry_ExternalReference")}showDocumentReferenceSource(e){return this.definition.ReferenceSourceVisibility}requireDocumentReferenceSource(e){return this.computeDocumentSettings(e),this._requireDocumentReferenceSource}readonlyDocumentReferenceSource(e){return this.computeDocumentSettings(e),this._readonlyDocumentReferenceSource}labelDocumentReferenceSource(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"ReferenceSourceLabel");return t||(t||(t=this.translate.instant("Entry_ReferenceSource")),t)}documentReferenceSourceDefinitionIds(e){return this.ws.definitions.ReferenceSourceDefinitionIds}filterDocumentReferenceSource(e){return this.definition.ReferenceSourceFilter}showDocumentInternalReference(e){return this.definition.InternalReferenceVisibility}requireDocumentInternalReference(e){return this.computeDocumentSettings(e),this._requireDocumentInternalReference}readonlyDocumentInternalReference(e){return this.computeDocumentSettings(e),this._readonlyDocumentInternalReference}labelDocumentInternalReference(e){return this.ws.getMultilingualValueImmediate(this.definition,"InternalReferenceLabel")||this.translate.instant("Entry_InternalReference")}computeDocumentSettings(e){if(!e||!e.Lines)return this._requireDocumentPostingDate=!1,this._readonlyDocumentPostingDate=!1,this._requireDocumentMemo=!1,this._readonlyDocumentMemo=!1,this._requireDocumentCurrency=!1,this._readonlyDocumentCurrency=!1,this._requireDocumentCenter=!1,this._readonlyDocumentCenter=!1,this._requireDocumentCustodian=!1,this._readonlyDocumentCustodian=!1,this._requireDocumentRelation=!1,this._readonlyDocumentRelation=!1,this._requireDocumentResource=!1,this._readonlyDocumentResource=!1,this._requireDocumentNotedRelation=!1,this._readonlyDocumentNotedRelation=!1,this._requireDocumentQuantity=!1,this._readonlyDocumentQuantity=!1,this._requireDocumentUnit=!1,this._readonlyDocumentUnit=!1,this._requireDocumentTime1=!1,this._readonlyDocumentTime1=!1,this._requireDocumentDuration=!1,this._readonlyDocumentDuration=!1,this._requireDocumentDurationUnit=!1,this._readonlyDocumentDurationUnit=!1,this._requireDocumentTime2=!1,this._readonlyDocumentTime2=!1,this._requireDocumentExternalReference=!1,this._readonlyDocumentExternalReference=!1,this._requireDocumentReferenceSource=!1,this._readonlyDocumentReferenceSource=!1,this._requireDocumentInternalReference=!1,void(this._readonlyDocumentInternalReference=!1);const t=this.definition;if(this._computeDocumentSettingsDoc!==e||this._computeDocumentSettingsDef!==t){this._computeDocumentSettingsDoc=e,this._computeDocumentSettingsDef=t,this._requireDocumentPostingDate=0===t.PostingDateRequiredState,this._readonlyDocumentPostingDate=0===t.PostingDateReadOnlyState,this._requireDocumentMemo=0===t.MemoRequiredState,this._readonlyDocumentMemo=0===t.MemoReadOnlyState,this._requireDocumentCurrency=0===t.CurrencyRequiredState,this._readonlyDocumentCurrency=0===t.CurrencyReadOnlyState,this._requireDocumentCenter=0===t.CenterRequiredState,this._readonlyDocumentCenter=0===t.CenterReadOnlyState,this._requireDocumentCustodian=0===t.CustodianRequiredState,this._readonlyDocumentCustodian=0===t.CustodianReadOnlyState,this._requireDocumentRelation=0===t.RelationRequiredState,this._readonlyDocumentRelation=0===t.RelationReadOnlyState,this._requireDocumentResource=0===t.ResourceRequiredState,this._readonlyDocumentResource=0===t.ResourceReadOnlyState,this._requireDocumentNotedRelation=0===t.NotedRelationRequiredState,this._readonlyDocumentNotedRelation=0===t.NotedRelationReadOnlyState,this._requireDocumentQuantity=0===t.QuantityRequiredState,this._readonlyDocumentQuantity=0===t.QuantityRequiredState,this._requireDocumentUnit=0===t.UnitRequiredState,this._readonlyDocumentUnit=0===t.UnitRequiredState,this._requireDocumentTime1=0===t.Time1RequiredState,this._readonlyDocumentTime1=0===t.Time1RequiredState,this._requireDocumentDuration=0===t.DurationRequiredState,this._readonlyDocumentDuration=0===t.DurationRequiredState,this._requireDocumentDurationUnit=0===t.DurationUnitRequiredState,this._readonlyDocumentDurationUnit=0===t.DurationUnitRequiredState,this._requireDocumentTime2=0===t.Time2RequiredState,this._readonlyDocumentTime2=0===t.Time2RequiredState,this._requireDocumentInternalReference=0===t.InternalReferenceRequiredState,this._readonlyDocumentInternalReference=0===t.InternalReferenceReadOnlyState,this._requireDocumentReferenceSource=0===t.ReferenceSourceRequiredState,this._readonlyDocumentReferenceSource=0===t.ReferenceSourceRequiredState,this._requireDocumentExternalReference=0===t.ExternalReferenceRequiredState,this._readonlyDocumentExternalReference=0===t.ExternalReferenceReadOnlyState;for(const n of t.LineDefinitions.map(e=>e.LineDefinitionId)){const t=this.lineDefinition(n);for(const i of t.Columns.filter(e=>2===e.InheritsFromHeader))switch(i.ColumnName){case"PostingDate":!this._requireDocumentPostingDate&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentPostingDate=!0),!this._readonlyDocumentPostingDate&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentPostingDate=!0);break;case"Memo":!this._requireDocumentMemo&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentMemo=!0),!this._readonlyDocumentMemo&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentMemo=!0);break;case"CurrencyId":!this._requireDocumentCurrency&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentCurrency=!0),!this._readonlyDocumentCurrency&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentCurrency=!0);break;case"CenterId":!this._requireDocumentCenter&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentCenter=!0),!this._readonlyDocumentCenter&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentCenter=!0);break;case"CustodianId":!this._requireDocumentCustodian&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentCustodian=!0),!this._readonlyDocumentCustodian&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentCustodian=!0);break;case"RelationId":!this._requireDocumentRelation&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentRelation=!0),!this._readonlyDocumentRelation&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentRelation=!0);break;case"ResourceId":!this._requireDocumentResource&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentResource=!0),!this._readonlyDocumentResource&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentResource=!0);break;case"NotedRelationId":!this._requireDocumentNotedRelation&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentNotedRelation=!0),!this._readonlyDocumentNotedRelation&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentNotedRelation=!0);break;case"Quantity":!this._requireDocumentQuantity&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentQuantity=!0),!this._readonlyDocumentQuantity&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentQuantity=!0);break;case"UnitId":!this._requireDocumentUnit&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentUnit=!0),!this._readonlyDocumentUnit&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentUnit=!0);break;case"Time1":!this._requireDocumentTime1&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentTime1=!0),!this._readonlyDocumentTime1&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentTime1=!0);break;case"Duration":!this._requireDocumentDuration&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentDuration=!0),!this._readonlyDocumentDuration&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentDuration=!0);break;case"DurationUnitId":!this._requireDocumentDurationUnit&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentDurationUnit=!0),!this._readonlyDocumentDurationUnit&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentDurationUnit=!0);break;case"Time1":!this._requireDocumentTime1&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentTime1=!0),!this._readonlyDocumentTime1&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentTime1=!0);break;case"Time2":!this._requireDocumentTime2&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentTime2=!0),!this._readonlyDocumentTime2&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentTime2=!0);break;case"ExternalReference":!this._requireDocumentExternalReference&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentExternalReference=!0),!this._readonlyDocumentExternalReference&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentExternalReference=!0);break;case"ReferenceSourceId":!this._requireDocumentReferenceSource&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentReferenceSource=!0),!this._readonlyDocumentReferenceSource&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentReferenceSource=!0);break;case"InternalReference":!this._requireDocumentInternalReference&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentInternalReference=!0),!this._readonlyDocumentInternalReference&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentInternalReference=!0)}}}}account(e){return this.ws.get("Account",e.AccountId)}accountType(e){const t=this.account(e);return t&&t.AccountTypeId?this.ws.get("AccountType",t.AccountTypeId):null}resource(e){const t=this.account(e);return this.ws.get("Resource",(t?t.ResourceId:null)||(t&&t.ResourceDefinitionId?e.ResourceId:null))}resourceDefinition(e){const t=this.resource(e),n=t?t.DefinitionId:null;return n?this.ws.definitions.Resources[n]:null}accountDisplay(e){const t=this.ws.get("Account",e);return t?Object($w.a)(this.workspace,this.translate).format(t):""}filterAccount(e,t){if(!t)return null;const n=e.entry,i=e.entryIndex,c=this.lineDefinition(e.line.DefinitionId);if(c&&c.Entries){const e=c.Entries[i];if(e&&e.ParentAccountTypeId){let t=`AccountType.Id descof ${e.ParentAccountTypeId}`;const i=n.CurrencyId;i&&(t+=` and (CurrencyId eq null or CurrencyId eq '${i.replace("'","''")}')`);const c=n.CenterId;c&&(t+=` and (CenterId eq null or CenterId eq ${c})`);const o=this.ws.get("Resource",n.ResourceId),r=o?o.DefinitionId:null;t+=r?` and ResourceDefinitionId eq ${r}`:" and ResourceDefinitionId eq null";const s=this.ws.get("Relation",n.RelationId),l=s?s.DefinitionId:null;t+=l?` and RelationDefinitionId eq ${l}`:" and RelationDefinitionId eq null";const a=n.ResourceId;a&&(t+=` and (ResourceId eq null or ResourceId eq ${a})`);const u=n.RelationId;u&&(t+=` and (RelationId eq null or RelationId eq ${u})`);const d=n.EntryTypeId;return d&&(t+=` and (EntryTypeId eq null or EntryTypeId eq ${d})`),t}}return null}readonlyCenter_Manual(e){return!!this.getAccountResourceRelationCenterId(e)}readonlyValueCenterId_Manual(e){return this.getAccountResourceRelationCenterId(e)}getAccountResourceRelationCenterId(e){if(!e)return null;const t=this.account(e),n=this.resource(e),i=this.relation(e),c=this.notedRelation(e);return(t?t.CenterId:null)||(n?n.CenterId:null)||(i?i.CenterId:null)||(c?c.CenterId:null)}filterCenter_Manual(e){return null}showCustodian_Manual(e){const t=this.accountType(e);return!!t&&!!t.CustodianDefinitionId}readonlyCustodian_Manual(e){const t=this.account(e);return!!t&&!!t.CustodianId}readonlyValueCustodianId_Manual(e){const t=this.account(e);return t?t.CustodianId:null}labelCustodian_Manual(e){const t=this.accountType(e),n=t?t.CustodianDefinitionId:null;return Object(hh.a)(this.workspace,this.translate,n).titleSingular()}definitionIdsCustodian_Manual(e){return[this.accountType(e).CustodianDefinitionId]}showRelation_Manual(e){const t=this.account(e);return!!t&&!!t.RelationDefinitionId}readonlyRelation_Manual(e){const t=this.account(e);return!!t&&!!t.RelationId}readonlyValueRelationId_Manual(e){const t=this.account(e);return t?t.RelationId:null}labelRelation_Manual(e){const t=this.account(e),n=t?t.RelationDefinitionId:null;return Object(hh.a)(this.workspace,this.translate,n).titleSingular()}definitionIdsRelation_Manual(e){return[this.account(e).RelationDefinitionId]}relation(e){const t=this.account(e);return this.ws.get("Relation",(t?t.RelationId:null)||(t&&t.RelationDefinitionId?e.RelationId:null))}showNotedRelation_Manual(e){const t=this.account(e);return!!t&&!!t.NotedRelationDefinitionId}readonlyNotedRelation_Manual(e){const t=this.account(e);return!!t&&!!t.NotedRelationId}readonlyValueNotedRelationId_Manual(e){const t=this.account(e);return t?t.NotedRelationId:null}labelNotedRelation_Manual(e){const t=this.account(e),n=t?t.NotedRelationDefinitionId:null;return Object(hh.a)(this.workspace,this.translate,n).titleSingular()}definitionIdsNotedRelation_Manual(e){return[this.account(e).NotedRelationDefinitionId]}notedRelation(e){const t=this.account(e);return this.ws.get("Relation",(t?t.NotedRelationId:null)||(t&&t.NotedRelationDefinitionId?e.NotedRelationId:null))}showResource_Manual(e){const t=this.account(e);return!!t&&!!t.ResourceDefinitionId}readonlyResource_Manual(e){const t=this.account(e);return!!t&&!!t.ResourceId}readonlyValueResourceId_Manual(e){const t=this.account(e);return t?t.ResourceId:null}labelResource_Manual(e){const t=this.account(e),n=t?t.ResourceDefinitionId:null;return Object(mh.a)(this.workspace,this.translate,n).titleSingular()}definitionIdsResource_Manual(e){return[this.account(e).ResourceDefinitionId]}showQuantity(e){return!!this.resource(e)}showUnit(e){const t=this.resource(e),n=t&&t.DefinitionId?this.ws.definitions.Resources[t.DefinitionId]:null;return!!n&&!!n.UnitCardinality}readonlyUnit(e){const t=this.resourceDefinition(e);if(t&&"Single"===t.UnitCardinality&&"PropertyPlantAndEquipment"!==t.ResourceDefinitionType&&"InvestmentProperty"!==t.ResourceDefinitionType&&"IntangibleAssetsOtherThanGoodwill"!==t.ResourceDefinitionType){const t=this.resource(e);if(t)return!!t.UnitId}return!1}readonlyValueUnitId(e){const t=this.resource(e);return t?t.UnitId:null}filterUnitId(e){const t=this.resource(e);let n;if(t&&(t.UnitId&&(n=`Id eq ${t.UnitId}`),t.Units&&t.Units.length>0)){const e=t.Units.map(e=>`Id eq ${e.UnitId}`).join(" or ");n?n+=` or ${e}`:n=e}const i=this.accountType(e);if(i&&i.StandardAndPure){const e="UnitType eq 'Pure'";n?n+=` or ${e}`:n=e}return n}showTime1_Manual(e){const t=this.accountType(e);return!!t&&!!t.Time1Label}labelTime1_Manual(e){const t=this.accountType(e);return this.ws.getMultilingualValueImmediate(t,"Time1Label")}showDuration(e){return!!this.showTime1_Manual(e)&&this.showTime2_Manual(e)}showDurationUnit(e){return this.showDuration(e)}readonlyDurationUnit(e){return!1}readonlyValueDurationUnitId(e){return null}filterDurationUnitId(e){return"UnitType eq 'Time'"}showTime2_Manual(e){const t=this.accountType(e);return!!t&&!!t.Time2Label}labelTime2_Manual(e){const t=this.accountType(e);return this.ws.getMultilingualValueImmediate(t,"Time2Label")}showCurrency(e){return!!this.account(e)&&!this.getAccountResourceRelationCurrencyId(e)}getAccountResourceRelationCurrencyId(e){if(!e)return null;const t=this.account(e),n=this.resource(e),i=this.relation(e),c=this.notedRelation(e);return(t?t.CurrencyId:null)||(n?n.CurrencyId:null)||(i?i.CurrencyId:null)||(c?c.CurrencyId:null)}readonlyValueCurrencyId(e){return e?this.getAccountResourceRelationCurrencyId(e)||e.CurrencyId:null}get functionalId(){return this.ws.settings.FunctionalCurrencyId}showMonetaryValue(e){const t=this.account(e),n=this.readonlyValueCurrencyId(e);return!!t&&!!n&&n!==this.functionalId}MonetaryValue_decimals(e){const t=this.readonlyValueCurrencyId(e),n=this.ws.get("Currency",t);return n?n.E:this.ws.settings.FunctionalCurrencyDecimals}MonetaryValue_format(e){const t=this.MonetaryValue_decimals(e);return`1.${t}-${t}`}showEntryType_Manual(e){const t=this.accountType(e);if(t){const e=this.ws.get("EntryType",t.EntryTypeParentId);return!!e&&e.IsActive}return!1}readonlyEntryType_Manual(e){const t=this.account(e);return!!t&&!!t.EntryTypeId}readonlyValueEntryTypeId_Manual(e){const t=this.account(e);return t?t.EntryTypeId:null}filterEntryType_Manual(e){return`IsAssignable eq true and Id descof ${this.accountType(e).EntryTypeParentId}`}showExternalReference_Manual(e){const t=this.accountType(e);return!!t&&!!t.ExternalReferenceLabel}labelExternalReference_Manual(e){const t=this.accountType(e);return t.ExternalReferenceLabel?this.ws.getMultilingualValueImmediate(t,"ExternalReferenceLabel"):this.translate.instant("Entry_ExternalReference")}showReferenceSource_Manual(e){const t=this.accountType(e);return!!t&&!!t.ReferenceSourceLabel}readonlyReferenceSource_Manual(e){return!1}readonlyValueReferenceSourceId_Manual(e){return null}labelReferenceSource_Manual(e){const t=this.accountType(e);return t.ReferenceSourceLabel?this.ws.getMultilingualValueImmediate(t,"ReferenceSourceLabel"):this.translate.instant("Entry_ReferenceSource")}definitionIdsReferenceSource_Manual(e){return this.ws.definitions.ReferenceSourceDefinitionIds}showInternalReference_Manual(e){const t=this.accountType(e);return!!t&&!!t.InternalReferenceLabel}labelInternalReference_Manual(e){const t=this.accountType(e);return t.InternalReferenceLabel?this.ws.getMultilingualValueImmediate(t,"InternalReferenceLabel"):this.translate.instant("Entry_InternalReference")}showNotedAgentName_Manual(e){const t=this.accountType(e);return!!t&&!!t.NotedAgentNameLabel}labelNotedAgentName_Manual(e){const t=this.accountType(e);return t.NotedAgentNameLabel?this.ws.getMultilingualValueImmediate(t,"NotedAgentNameLabel"):this.translate.instant("Entry_NotedAgentName")}showNotedAmount_Manual(e){const t=this.accountType(e);return!!t&&!!t.NotedAmountLabel}labelNotedAmount_Manual(e){const t=this.accountType(e);return t.NotedAmountLabel?this.ws.getMultilingualValueImmediate(t,"NotedAmountLabel"):this.translate.instant("Entry_NotedAmount")}showNotedDate_Manual(e){const t=this.accountType(e);return!!t&&!!t.NotedDateLabel}labelNotedDate_Manual(e){const t=this.accountType(e);return t.NotedDateLabel?this.ws.getMultilingualValueImmediate(t,"NotedDateLabel"):this.translate.instant("Entry_NotedDate")}showAttachmentsErrors(e){return!!e&&!!e.Attachments&&e.Attachments.some(e=>!!e.serverErrors)}attachmentWrappers(e){return e&&e.Attachments?(this._attachmentsAttachments!==e.Attachments&&(this._attachmentsAttachments=e.Attachments,this._attachmentsResult=e.Attachments.map(e=>({attachment:e}))),this._attachmentsResult):[]}onFileSelected(e,t){const n=this.attachmentWrappers(t).map(e=>e.file?e.file.size:0).reduce((e,t)=>e+t,0);Object(V.q)(e,n,this.translate).subscribe(e=>{t.Attachments.push(e.attachment),this.attachmentWrappers(t).push(e)},e=>{this.details.displayErrorModal(e)})}onDeleteAttachment(e,t){this.attachmentWrappers(e).splice(t,1),e.Attachments.splice(t,1)}onDownloadAttachment(e,t){const n=e.Id,i=this.attachmentWrappers(e)[t];i.attachment.Id?(i.downloading=!0,this.documentsApi.getAttachment(n,i.attachment.Id).pipe(Object(J.a)(e=>{delete i.downloading,Object(V.i)(e,this.fileName(i))}),Object(F.a)(e=>(delete i.downloading,this.details.handleActionError(e),Object(A.a)(null))),Object(ne.a)(()=>{delete i.downloading})).subscribe()):i.file&&Object(V.i)(i.file,this.fileName(i))}fileName(e){const t=e.attachment;return t.FileName&&t.FileExtension?`${t.FileName}.${t.FileExtension}`:t.FileName||(e.file?e.file.name:"Attachment")}size(e){const t=e.attachment;return Object(V.j)(t.Size||(e.file?e.file.size:null))}colorFromExtension(e){return Object(V.d)(e)}iconFromExtension(e){return Object(V.m)(e)}handleFreshExtras(e){if(e){const t=e.RequiredSignaturesRelatedEntities;t&&Object(V.o)(t,this.workspace)}}requiredSignaturesForLineDef(e,t,n){return this._requiredSignaturesForLineDefModel===e&&this._requiredSignaturesForLineDefLineDefId===t||(this._requiredSignaturesForLineDefModel=e,this._requiredSignaturesForLineDefLineDefId=t,this._requiredSignaturesForLineDefLineIds=e.Lines.filter(e=>!!e.Id&&e.DefinitionId===t).map(e=>e.Id)),this.requiredSignaturesSummaryInner(this._requiredSignaturesForLineDefLineIds,n)}requiredSignaturesSummaryInner(e,t){if(!e||!t||!t.RequiredSignatures)return[];const n=t.RequiredSignatures;if(n!==this._requiredSignaturesDetailed||e!==this._requiredSignaturesLineIds){this._requiredSignaturesDetailed=n,this._requiredSignaturesLineIds=e;const t={};for(const n of e)t[n]=!0;const i={},c=[],o=n.filter(e=>(!e.LastNegativeState||!!e.SignedById)&&t[e.LineId]);for(const e of o){let t=i,n=!1;for(const i of this._requiredSignatureProps){const c=e[i];null==c?(t.undefined||(t.undefined={},n=!0),t=t.undefined):(t.values||(t.values={}),void 0===t.values[c]&&(t.values[c]={},n=!0),t=t.values[c])}if(t.lineIds||(t.lineIds=[]),t.signatureIds||(t.signatureIds=[]),t.lineIds.push(e.LineId),e.LineSignatureId&&t.signatureIds.push(e.LineSignatureId),n){const t=Object.assign({},e);delete t.LineId,c.push(t)}}this._requiredSignaturesLineIdsHash=i,this._requiredSignaturesSummary=c.sort((e,t)=>{let n=Math.abs(e.ToState)-Math.abs(t.ToState);if(0===n){const i=e.RuleType||"0",c=t.RuleType||"0";n=i>c?1:i<c?-1:0}return 0===n&&(n=(e.RoleId||0)-(t.RoleId||0)),0===n&&(n=(e.UserId||0)-(t.UserId||0)),n})}return this._requiredSignaturesSummary}lineIds(e){return e?this.getHash(e).lineIds:[]}signatureIds(e){return e?this.getHash(e).signatureIds:[]}getHash(e){if(!e)return null;let t=this._requiredSignaturesLineIdsHash;for(const n of this._requiredSignatureProps){const i=e[n];t=null==i?t.undefined:t.values[i]}return t}onSignYes(e){if(e.CanSign)this.onSign(e,!0,null);else{if(!e.CanSignOnBehalf)return void console.error("Should not be able to sign");e.OnBehalfOfUserId?this.onSign(e,!0,e.OnBehalfOfUserId):(this.reasonDetails=null,this.reasonId=null,this.onBehalfOfUserId=null,this.reasonChoicesForNegativeModal=[],this.isNegative=!1,this.onBehalfOfUserAmbiguous=!0,this.modalService.open(this.signatureModal).result.then(t=>{t&&this.onSign(e,!0,this.onBehalfOfUserId)},e=>{}))}}reasonDisplay(e,t){if(!t)return"";const n=this.lineDefinition(e);if(n.StateReasons)for(const i of n.StateReasons)if(i.Id===t)return this.ws.getMultilingualValueImmediate(i,"Name");return""}onSignNo(e,t){if(!t.CanSign&&!t.CanSignOnBehalf)return void console.error("Should not be able to sign");this.reasonDetails=null,this.reasonId=null,this.onBehalfOfUserId=!t.CanSign&&t.CanSignOnBehalf?t.OnBehalfOfUserId:null;const n=this.lineDefinition(e);this.reasonChoicesForNegativeModal=(n&&n.StateReasons||[]).filter(e=>Math.abs(e.State)===Math.abs(t.ToState)).map(e=>({name:()=>this.ws.getMultilingualValueImmediate(e,"Name"),value:e.Id})),this.isNegative=!0,this.onBehalfOfUserAmbiguous=!t.CanSign&&t.CanSignOnBehalf&&!this.onBehalfOfUserId,this.modalService.open(this.signatureModal).result.then(e=>{e&&this.onSign(t,!1,this.onBehalfOfUserId)},e=>{})}onSign(e,t,n){const i=this.lineIds(e);this.documentsApi.sign(i,{returnEntities:!0,select:this.select,onBehalfOfUserId:n,toState:t?Math.abs(e.ToState):-Math.abs(e.ToState),roleId:e.RoleId,ruleType:e.RuleType,reasonDetails:t?null:this.reasonDetails,reasonId:t?null:this.reasonId,signedAt:null},{includeRequiredSignatures:!0}).pipe(Object(J.a)(e=>{Object(V.c)(e,this.workspace),this.details.state.extras=e.Extras,this.handleFreshExtras(e.Extras)})).subscribe({error:this.details.handleActionError})}onUnsign(e){this.confirmationMessage=this.translate.instant("AreYouSureYouWantToDeleteYourSignature"),this.modalService.open(this.confirmModal).result.then(t=>{t&&this.documentsApi.unsign(this.signatureIds(e),{returnEntities:!0,select:this.select},{includeRequiredSignatures:!0}).pipe(Object(J.a)(e=>{Object(V.c)(e,this.workspace),this.details.state.extras=e.Extras,this.handleFreshExtras(e.Extras)})).subscribe({error:this.details.handleActionError})},e=>{})}canUnsign(e){return!!e.SignedById&&(e.SignedById===this.ws.userSettings.UserId||e.OnBehalfOfUserId===this.ws.userSettings.UserId)}disableUnsign(e,t){return!t||!!t.State}unsignTooltip(e,t){return t?1===t.State?this.translate.instant("Error_OpenDocumentBeforeEdit"):-1===t.State?this.translate.instant("Error_UncancelDocumentBeforeEdit"):null:null}positiveActionDisplay(e){return this.actionDisplay(Math.abs(e))}positiveActionIcon(e){return this.actionIcon(Math.abs(e))}negativeActionDisplay(e){return this.actionDisplay(-Math.abs(e))}negativeActionIcon(e){return this.actionIcon(-Math.abs(e))}actionIcon(e){switch(e){case 1:return this.workspace.ws.isRtl?"arrow-left":"arrow-right";case 2:return"thumbs-up";case 3:case 4:return"check";case-1:return"times";case-2:return"thumbs-down";case-3:case-4:return"times";default:return""}}get assignIcon(){return this.workspace.ws.isRtl?"angle-left":"angle-right"}actionDisplay(e){return this.translate.instant(e>=0?"Line_State_"+e:"Line_State_minus_"+-e)}requiredSignatureDisplay(e){return this.translate.instant("RequiredSignature_"+Math.abs(e.ToState))}requiredSignatoryDisplay(e){return this.translate.instant("RequiredSigner_"+Math.abs(e.ToState))}isTooEarlyForThisSignature(e){return e.LastUnsignedState<e.ToState}areNegativeLines(e){return!!e.LastNegativeState}disableSign(e,t,n){return!!n&&(-1===n.State||1===n.State||this.isTooEarlyForThisSignature(e)||this.areNegativeLines(e))}signTooltip(e,t,n){if(n){if(1===n.State)return this.translate.instant("Error_OpenDocumentBeforeEdit");if(-1===n.State)return this.translate.instant("Error_UncancelDocumentBeforeEdit");if(this.areNegativeLines(e)){const t=this.actionDisplay(e.LastNegativeState),n=this.lineIds(e)||[];return this.translate.instant(1===n.length?"LineAlreadyInState0":"LinesAlreadyInState0",{0:t})}if(this.isTooEarlyForThisSignature(e)){const t=this.actionDisplay(e.LastUnsignedState),n=this.lineIds(e)||[];return this.translate.instant(1===n.length?"LineIsNotYetInState0":"LinesAreNotYetInState0",{0:t})}return null}return null}onInsertSmartLine(e,t){t.Lines.push(e),this._computeEntriesModel=null,this._linesModel=null}onDeleteSmartLine(e,t){const n=t.Lines.indexOf(e);n>-1&&t.Lines.splice(n,1),this._computeEntriesModel=null}computeTabs(e){if(!e)return this._computeTabsLines=null,this._visibleTabs=[],void(this._invisibleTabs=[]);if(this._computeTabsLines!==e.Lines||this._computeTabsDefinitions!==this.definition){this._computeTabsLines=e.Lines,this._computeTabsDefinitions=this.definition;const t={};if(e.Lines)for(const a of e.Lines)t[a.DefinitionId]=!0;const n=[],i=[],c={},o={},r=this.definition.LineDefinitions,s=r.filter(e=>e.IsVisibleByDefault).map(e=>e.LineDefinitionId);for(const e of s)o[e]||(o[e]=!0,n.push(e));const l=r.filter(e=>!e.IsVisibleByDefault).map(e=>e.LineDefinitionId);for(const e of l)t[e]?o[e]||(o[e]=!0,n.push(e)):c[e]||(c[e]=!0,i.push(e));for(const e of Object.keys(t).map(e=>+e))o[e]||(o[e]=!0,n.push(e));this._visibleTabs=n,this._invisibleTabs=i}}visibleTabs(e){return this.computeTabs(e),this._visibleTabs}invisibleTabs(e){return this.computeTabs(e),this._invisibleTabs}onOtherTab(e,t){this._visibleTabs.push(e),this._visibleTabs=this._visibleTabs.slice(),this._invisibleTabs=this._invisibleTabs.filter(t=>t!==e),this.setActiveTab(e)}bookkeepingManualAdjustmentsTitle(e){return this.tabTitle(this.ws.definitions.ManualLinesDefinitionId,e)}tabTitle(e,t){if(this.isJV&&this.isManualLine(e))return this.translate.instant("Entries");{const n=this.lineDefinition(e),i=this.showAsForm(e,t);return n?this.ws.getMultilingualValueImmediate(n,i?"TitleSingular":"TitlePlural"):this.translate.instant("Undefined")}}lines(e,t){if(!t)return[];if(this._linesModel!==t&&(this._linesModel=t,this._lines={},t.Lines))for(const n of t.Lines)this._lines[n.DefinitionId]||(this._lines[n.DefinitionId]=[]),this._lines[n.DefinitionId].push(n);return this._lines[e]||(this._lines[e]=[]),this._lines[e]}tabEntries(e,t){if(!t)return[];if(this._tabEntriesModel!==t&&(this._tabEntriesModel=t,this._tabEntries={},t.LineDefinitionEntries))for(const n of t.LineDefinitionEntries)this._tabEntries[n.LineDefinitionId]||(this._tabEntries[n.LineDefinitionId]=[]),this._tabEntries[n.LineDefinitionId][n.EntryIndex]=n;return this._tabEntries[e]||(this._tabEntries[e]=[]),this._tabEntries[e]}manualLine(e){return this._manualLineModel!==e&&(this._manualLineModel=e,this._manualLineResult=e.Lines.find(e=>this.isManualLine(e.DefinitionId))),this._manualLineResult}showManualLineProps(e){return!(!this.manualLine(e)||this.showDocumentPostingDate(e)&&this.showDocumentMemo(e))}onInsertManualEntry(e,t){this.addManualEntry(e.entry,t),e.line=this.manualLine(t)}addManualEntry(e,t){let n=this.manualLine(t);n||(n={PostingDate:Object(yi.e)(),DefinitionId:this.ws.definitions.ManualLinesDefinitionId,Entries:[],_flags:{isModified:!0}},t.Lines.push(n),this._manualLineModel=t,this._manualLineResult=n),n.Entries.push(e)}onDeleteManualEntry(e,t){this.cancelAutofill(e);const n=e.line.Entries.indexOf(e.entry);if(n>-1&&e.line.Entries.splice(n,1),0===e.line.Entries.length){const n=t.Lines.indexOf(e.line);t.Lines.splice(n),this._manualLineModel=t,this._manualLineResult=null}}computeEntries(e){e&&this._computeEntriesModel!==e&&(this._computeEntriesModel=e,this._smartEntries=[],this._manualEntries=[],e.Lines&&e.Lines.forEach(e=>{e.Entries&&e.Entries.forEach((t,n)=>{this.isManualLine(e.DefinitionId)?this._manualEntries.push({entry:t,line:e,entryIndex:n}):(e.State||0)>=0&&this._smartEntries.push({entry:t,line:e,entryIndex:n})})}))}smartEntries(e){return this.computeEntries(e),this._smartEntries}manualEntries(e){return this.computeEntries(e),this._manualEntries}showTabErrors(e,t){const n=this.tabEntries(e,t),i=this.lines(e,t);return!!n&&n.some(e=>!!e.serverErrors)||!!i&&i.some(e=>!!e.serverErrors||!!e.Entries&&e.Entries.some(e=>!!e.serverErrors))}manualColumnPaths(e,t=!1){const n=["AccountId","Center","Debit","Credit"];return t&&n.push("Memo"),t&&n.push("ModifiedWarning"),n.push("Commands"),n}smartTabHeaderColumnPaths(e,t){if(this._smartTabHeaderColumnPathsIsCommonHasChanged||this._smartTabHeaderColumnPathsModel!==t||this._smartTabHeaderColumnPathsLineDefId!==e||this._smartTabHeaderColumnPathsDefinitions!==this.ws.definitions){this._smartTabHeaderColumnPathsIsCommonHasChanged=!1,this._smartTabHeaderColumnPathsModel=t,this._smartTabHeaderColumnPathsLineDefId=e,this._smartTabHeaderColumnPathsDefinitions=this.ws.definitions;const n=this.lineDefinition(e),i=n&&n.Columns?n.Columns.map((e,t)=>({column:e,index:t})).filter(e=>{const i=e.column;if(i.InheritsFromHeader>=2&&(t.PostingDateIsCommon&&"PostingDate"===i.ColumnName||t.MemoIsCommon&&"Memo"===i.ColumnName||t.CurrencyIsCommon&&"CurrencyId"===i.ColumnName||t.CenterIsCommon&&"CenterId"===i.ColumnName||t.CustodianIsCommon&&"CustodianId"===i.ColumnName||t.RelationIsCommon&&"RelationId"===i.ColumnName||t.ResourceIsCommon&&"ResourceId"===i.ColumnName||t.NotedRelationIsCommon&&"NotedRelationId"===i.ColumnName||t.QuantityIsCommon&&"Quantity"===i.ColumnName||t.UnitIsCommon&&"UnitId"===i.ColumnName||t.Time1IsCommon&&"Time1"===i.ColumnName||t.DurationIsCommon&&"Duration"===i.ColumnName||t.DurationUnitIsCommon&&"DurationUnitId"===i.ColumnName||t.Time2IsCommon&&"Time2"===i.ColumnName||t.ExternalReferenceIsCommon&&"ExternalReference"===i.ColumnName||t.ReferenceSourceIsCommon&&"ReferenceSourceId"===i.ColumnName||t.InternalReferenceIsCommon&&"InternalReference"===i.ColumnName))return!1;if(!n.ViewDefaultsToForm&&i.InheritsFromHeader>=1)switch(i.ColumnName){case"PostingDate":case"Memo":case"CurrencyId":case"CenterId":case"CustodianId":case"RelationId":case"ResourceId":case"NotedRelationId":case"Quantity":case"UnitId":case"Time1":case"Duration":case"DurationUnitId":case"Time2":case"ExternalReference":case"ReferenceSourceId":case"InternalReference":return!0}return!1}).map(e=>e.index):[];this._smartTabHeaderColumnPathsResult=i}return this._smartTabHeaderColumnPathsResult}smartColumnIndices(e,t){if(this._smartColumnIndicesIsCommonHasChanged||this._smartColumnIndicesModel!==t||this._smartColumnIndicesLineDefId!==e||this._smartColumnIndicesDefinitions!==this.ws.definitions){this._smartColumnIndicesIsCommonHasChanged=!1,this._smartColumnIndicesModel=t,this._smartColumnIndicesLineDefId=e,this._smartColumnIndicesDefinitions=this.ws.definitions;const n=this.lineDefinition(e),i=[];if(t.LineDefinitionEntries)for(const o of t.LineDefinitionEntries.filter(t=>t.LineDefinitionId===e))i[o.EntryIndex]=o;const c=n&&n.Columns?n.Columns.map((e,t)=>({column:e,index:t})).filter(e=>{const c=e.column;if(c.InheritsFromHeader>=2&&(t.PostingDateIsCommon&&"PostingDate"===c.ColumnName||t.MemoIsCommon&&"Memo"===c.ColumnName||t.CurrencyIsCommon&&"CurrencyId"===c.ColumnName||t.CenterIsCommon&&"CenterId"===c.ColumnName||t.CustodianIsCommon&&"CustodianId"===c.ColumnName||t.RelationIsCommon&&"RelationId"===c.ColumnName||t.ResourceIsCommon&&"ResourceId"===c.ColumnName||t.NotedRelationIsCommon&&"NotedRelationId"===c.ColumnName||t.QuantityIsCommon&&"Quantity"===c.ColumnName||t.UnitIsCommon&&"UnitId"===c.ColumnName||t.Time1IsCommon&&"Time1"===c.ColumnName||t.DurationIsCommon&&"Duration"===c.ColumnName||t.DurationUnitIsCommon&&"DurationUnitId"===c.ColumnName||t.Time2IsCommon&&"Time2"===c.ColumnName||t.ExternalReferenceIsCommon&&"ExternalReference"===c.ColumnName||t.ReferenceSourceIsCommon&&"ReferenceSourceId"===c.ColumnName||t.InternalReferenceIsCommon&&"InternalReference"===c.ColumnName))return!1;{const e=this.tabEntryIndex(c),t=i[e]||this._defaultTabEntry;if(!n.ViewDefaultsToForm&&c.InheritsFromHeader>=1&&(t.PostingDateIsCommon&&"PostingDate"===c.ColumnName||t.MemoIsCommon&&"Memo"===c.ColumnName||t.CurrencyIsCommon&&"CurrencyId"===c.ColumnName||t.CenterIsCommon&&"CenterId"===c.ColumnName||t.CustodianIsCommon&&"CustodianId"===c.ColumnName||t.RelationIsCommon&&"RelationId"===c.ColumnName||t.ResourceIsCommon&&"ResourceId"===c.ColumnName||t.NotedRelationIsCommon&&"NotedRelationId"===c.ColumnName||t.QuantityIsCommon&&"Quantity"===c.ColumnName||t.UnitIsCommon&&"UnitId"===c.ColumnName||t.Time1IsCommon&&"Time1"===c.ColumnName||t.DurationIsCommon&&"Duration"===c.ColumnName||t.DurationUnitIsCommon&&"DurationUnitId"===c.ColumnName||t.Time2IsCommon&&"Time2"===c.ColumnName||t.ExternalReferenceIsCommon&&"ExternalReference"===c.ColumnName||t.ReferenceSourceIsCommon&&"ReferenceSourceId"===c.ColumnName||t.InternalReferenceIsCommon&&"InternalReference"===c.ColumnName))return!1}return!0}).map(e=>e.index):[];this._smartColumnIndicesResult=c}return this._smartColumnIndicesResult}smartColumnPathsForTable(e,t){const n=this.smartColumnIndices(e,t);if(this._smartColumnPathsForTableNumberPaths!==n){this._smartColumnPathsForTableNumberPaths=n;const i=this.smartColumnIndices(e,t).map(e=>e+"");i.push("Commands"),this._smartColumnPathsForTableResult=i}return this._smartColumnPathsForTableResult}smartTotalsColumnIndices(e,t,n){const i=[];for(const c of this.smartColumnIndices(e,t)){const o=this.columnDefinition(e,c),r=this.lines(e,t);switch(o.ColumnName){case"Value":i.push(c);break;case"MonetaryValue":if(!r||r.length<=1)i.push(c);else{const e=r[0].Entries[o.EntryIndex],t=n?this.readonlyValueCurrencyId(e):e.CurrencyId;r.every(e=>{const i=e.Entries[o.EntryIndex],c=n?this.readonlyValueCurrencyId(i):i.CurrencyId;return!c||c===t})&&i.push(c)}break;case"Quantity":if(!r||r.length<=1)i.push(c);else{const e=r[0].Entries[o.EntryIndex],t=n&&this.readonlyUnit(e)?this.readonlyValueUnitId(e):e.UnitId;r.every(e=>{const i=e.Entries[o.EntryIndex],c=n&&this.readonlyUnit(i)?this.readonlyValueUnitId(i):i.UnitId;return!c||c===t})&&i.push(c)}}}return i}smartTotal(e,t,n){const i=this.columnDefinition(e,t),c=i.EntryIndex;let o;switch(i.ColumnName){case"Value":o=e=>e.Value;break;case"MonetaryValue":o=e=>e.MonetaryValue;break;case"Quantity":o=e=>e.Quantity}return this.lines(e,n).filter(e=>(e.State||0)>=0).map(e=>e.Entries&&o(e.Entries[c])||0).reduce((e,t)=>e+t,0)}columnTemplates(e,t,n){const i=this.definition;if(this._columnTemplatesLineDefId===e&&this._columnTemplatesDef===i||(this._columnTemplatesLineDefId=e,this._columnTemplatesDef=i,this._columnTemplatesResult=null),!this._columnTemplatesResult){const i={},c=this.lineDefinition(e),o=(c?c.Columns:[]).length;for(let e=0;e<o;e++)i[e+""]={weight:1,argument:e};i.Commands={headerTemplate:t,rowTemplate:n},this._columnTemplatesResult=i}return this._columnTemplatesResult}lineDefinition(e){return e?this.ws.definitions.Lines[e]:null}columnDefinition(e,t){const n=this.lineDefinition(e);return n?n.Columns[t]:null}entryDefinition(e,t){const n=this.lineDefinition(e),i=this.columnDefinition(e,t);return n&&n.Entries&&i?n.Entries[i.EntryIndex]:null}columnName(e,t){const n=this.columnDefinition(e,t);return n?n.ColumnName:null}columnLabel(e,t){const n=this.columnDefinition(e,t);return this.ws.getMultilingualValueImmediate(n,"Label")}entity(e,t){if(e)switch(e.ColumnName){case"Memo":case"PostingDate":case"Boolean1":case"Decimal1":case"Text1":return t;default:return t&&t.Entries?t.Entries[e.EntryIndex]:null}}tabEntryIndex(e){switch(e.ColumnName){case"Memo":case"PostingDate":case"Boolean1":case"Decimal1":case"Text1":return 0;default:return e.EntryIndex}}tabEntry(e,t,n){if(!n.LineDefinitionEntries)return;const i=this.tabEntryIndex(t);return this.tabEntries(e,n)[i]}entry(e,t,n){const i=this.columnDefinition(e,t);return i&&"Memo"!==i.ColumnName&&"PostingDate"!==i.ColumnName&&"Boolean1"!==i.ColumnName&&"Decimal1"!==i.ColumnName&&"Text1"!==i.ColumnName&&n&&n.Entries?n.Entries[i.EntryIndex]:null}definitionIdsCustodian_Smart(e,t){const n=this.entryDefinition(e,t);return n&&n.CustodianDefinitionIds?n.CustodianDefinitionIds:[]}definitionIdsRelation_Smart(e,t){const n=this.entryDefinition(e,t);return n&&n.RelationDefinitionIds?n.RelationDefinitionIds:[]}definitionIdsResource_Smart(e,t){const n=this.entryDefinition(e,t);return n&&n.ResourceDefinitionIds?n.ResourceDefinitionIds:[]}definitionIdsNotedRelation_Smart(e,t){const n=this.entryDefinition(e,t);return n&&n.NotedRelationDefinitionIds?n.NotedRelationDefinitionIds:[]}definitionIdsReferenceSource_Smart(e,t){return this.ws.definitions.ReferenceSourceDefinitionIds}getFilter(e,t){const n=this.columnDefinition(e,t);return n?n.Filter:null}entryTypeFilter(e,t){const n=this.entryDefinition(e,t),i=n&&n.EntryTypeParentId?`Id descof ${n.EntryTypeParentId}`:null,c=this.getFilter(e,t);return i&&c?`(${i}) and (${c})`:i||c||null}lineEntryServerErrors(e,t,n){const i=this.columnDefinition(e,t),c=this.entity(i,n);return c&&c.serverErrors?c.serverErrors[i.ColumnName]:null}tabHeaderServerErrors(e,t,n){const i=this.columnDefinition(e,t),c=this.tabEntry(e,i,n);return c&&c.serverErrors?c.serverErrors[i.ColumnName]:null}getFieldValue(e,t,n,i){const c=this.columnDefinition(e,t);if(n){const e=this.entity(c,n);return e?e[c.ColumnName]:null}{let t=this.tabEntry(e,c,i);return t||(t=this._defaultTabEntry),t[c.ColumnName]}}addNewTabEntry(e,t,n){const i=Object.assign({EntryIndex:this.tabEntryIndex(t),LineDefinitionId:e},this._defaultTabEntry);return n.LineDefinitionEntries.push(i),this.tabEntries(e,n)[i.EntryIndex]=i,i}isCommonPropertyName(e){switch(e){case"PostingDate":return"PostingDateIsCommon";case"Memo":return"MemoIsCommon";case"CurrencyId":return"CurrencyIsCommon";case"CenterId":return"CenterIsCommon";case"CustodianId":return"CustodianIsCommon";case"RelationId":return"RelationIsCommon";case"ResourceId":return"ResourceIsCommon";case"NotedRelationId":return"NotedRelationIsCommon";case"Quantity":return"QuantityIsCommon";case"UnitId":return"UnitIsCommon";case"Time1":return"Time1IsCommon";case"Duration":return"DurationIsCommon";case"DurationUnitId":return"DurationUnitIsCommon";case"Time2":return"Time2IsCommon";case"ExternalReference":return"ExternalReferenceIsCommon";case"ReferenceSourceId":return"ReferenceSourceIsCommon";case"InternalReference":return"InternalReferenceIsCommon";default:return console.error(`Could not determine IsCommon version of column name ${e}`),""}}setFieldValue(e,t,n,i,c){const o=this.columnDefinition(e,t);if(n){const e=this.entity(o,n);e&&(e[o.ColumnName]=c)}else(this.tabEntry(e,o,i)||this.addNewTabEntry(e,o,i))[o.ColumnName]=c}onToggleDocumentIsCommon(e,t){e&&t&&(e[t]=!e[t],this._smartTabHeaderColumnPathsIsCommonHasChanged=!0,this._smartColumnIndicesIsCommonHasChanged=!0)}onToggleTabIsCommon(e,t,n){const i=this.columnDefinition(e,t),c=this.tabEntry(e,i,n)||this.addNewTabEntry(e,i,n),o=this.isCommonPropertyName(i.ColumnName);c[o]=!c[o],this._smartColumnIndicesIsCommonHasChanged=!0}tabIsCommon(e,t,n){const i=this.columnDefinition(e,t);return(this.tabEntry(e,i,n)||this._defaultTabEntry)[this.isCommonPropertyName(i.ColumnName)]}isReadOnly(e,t,n,i){const c=this.columnDefinition(e,t),o=this.lines(e,i),r=e=>{const t=e.State||0;return t<0||t>=c.ReadOnlyState};return n?r(n):o.some(r)}isRequired(e,t,n,i){const c=this.columnDefinition(e,t),o=this.lines(e,i),r=e=>(e.State||0)>=c.RequiredState;return n?r(n):o.some(r)}onNewSmartLineFactory(e){return this._onNewLineFactoryLineDefId!==e&&(this._onNewLineFactoryLineDefId=e,this._onNewLineFactoryResult=t=>{t.DefinitionId=e,t.Boolean1=!1,t._flags={isModified:!0},t.Entries=[];const n=this.lineDefinition(e);if(n)if(n.Entries)for(let e=0;e<n.Entries.length;e++)t.Entries[e]={Id:0,Direction:n.Entries[e].Direction,Value:0};else console.error(`Line definition ${e} is missing its Entries`);else console.error(`Missing line definition ${e}`);return t}),this._onNewLineFactoryResult}columnLabelAlignment(e,t){if(this.workspace.ws.isRtl)return null;switch(this.columnName(e,t)){case"MonetaryValue":case"Quantity":case"Value":case"NotedAmount":case"Duration":return"right";default:return null}}defaultsToForm(e){const t=this.lineDefinition(e);return!!t&&t.ViewDefaultsToForm}showAsForm(e,t){return!(this.lines(e,t).length>1)&&this.defaultsToForm(e)}showTabHeader(e,t,n){return this.smartTabHeaderColumnPaths(e,t).length>0||this.showBarcodeField(e,n)}onCreateForm(e,t){this.onAddNewLine(e,t)}onDeleteForm(e,t){if(!t)return;const n=this.lines(e,t);if(1===n.length){const e=n.pop();this.onDeleteSmartLine(e,t)}}onAddNewLine(e,t){if(!t)return;let n={};return n=this.onNewSmartLineFactory(e)(n),this.lines(e,t).push(n),this.onInsertSmartLine(n,t),n}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get modifiedTooltipPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}get commandsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}get isOriginalDocument(){return this.definition.IsOriginalDocument}isStateActive(e,t){if(!t)return!1;const n=this.definition;return!!n&&!t.State&&n.HasWorkflow&&this.getDocState(t)===e}isDocumentStateActive(e,t){if(!t)return!1;const n=this.definition;return!!n&&(0===e?!t.State&&!n.HasWorkflow:t.State===e)}isStateVisible(e,t){if(t&&(t.State<0||this.getDocState(t)<0))return!1;const n=this.definition;return 0===e||4===e?!!n&&n.HasWorkflow:this.isStateActive(e,t)||!!n&&n.HasWorkflow&&n["CanReachState"+e]}isDocumentStateVisible(e,t){const n=this.definition;return 0!==e||!n||!n.HasWorkflow}isPositiveState(e){return[0,1,2,3,4].some(t=>this.isStateActive(t,e))||[0,1].some(t=>this.isDocumentStateActive(t,e))}onDocumentState(e,t){this.details&&this.details.state.detailsStatus===L.c.loaded&&t([e.Id],{returnEntities:!0,select:this.select},{includeRequiredSignatures:!0}).pipe(Object(J.a)(e=>{Object(V.c)(e,this.workspace),this.details.state.extras=e.Extras,this.handleFreshExtras(e.Extras)})).subscribe({error:this.details.handleActionError})}onClose(e){this.onDocumentState(e,this.documentsApi.close)}onOpen(e){this.onDocumentState(e,this.documentsApi.open)}onCancel(e){this.onDocumentState(e,this.documentsApi.cancel)}onUncancel(e){this.onDocumentState(e,this.documentsApi.uncancel)}hasPermissionToUpdateState(e){return this.ws.canDo(this.view,"State",e?e.CreatedById:null)}missingSignatures(e,t){return!!t&&t.some(e=>!e.LastNegativeState&&!e.SignedById)}someWorkflowLinesAreNotNegative(e,t){return!!t&&t.length>0&&t.some(e=>!e.LastNegativeState)}showClose(e,t){return!!e&&!e.State}disableClose(e,t){return!e||!e.Id||!this.hasPermissionToUpdateState(e)||this.missingSignatures(e,t)}closeTooltip(e,t){return this.hasPermissionToUpdateState(e)?this.missingSignatures(e,t)?this.translate.instant("Error_LineIsMissingSignatures"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}showCancel(e,t){return!!e&&!e.State}disableCancel(e,t){return!e||!e.Id||!this.hasPermissionToUpdateState(e)||this.someWorkflowLinesAreNotNegative(e,t)}cancelTooltip(e,t){return this.hasPermissionToUpdateState(e)?this.someWorkflowLinesAreNotNegative(e,t)?this.translate.instant("Error_AllLinesMustBeInNegativeState"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}showOpen(e,t){return!!e&&!!e.Id&&1===e.State}showUncancel(e,t){return!!e&&!!e.Id&&-1===e.State}updateStateTooltip(e){return this.hasPermissionToUpdateState(e)?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}entriesCount(e){return this.smartEntries(e).length+this.manualEntries(e).length}get hasManualLines(){return this.definition.LineDefinitions.some(e=>this.isManualLine(e.LineDefinitionId))}flags(e,t,n=!1){if(this._flagsModel!==t&&(this._flagsModel=t,this._flags={}),e.Id){let t=this._flags[e.Id];return n&&!t&&(t=this._flags[e.Id]={}),t}{let t=e._flags;return n&&!t&&(t=e._flags={}),t}}getIsModified(e,t){const n=this.flags(e,t);return!!n&&n.isModified}setModified(e,t){this.flags(e,t,!0).isModified=!0}onSmartLineUpdated(e,t,n){t&&(this.setModified(t,n),e(t))}highlightPairFactory(e){return this._highlightPairFactoryModel!==e&&(this._highlightPairFactoryModel=e,this._highlightPairFactoryResult=null),this._highlightPairFactoryResult||(this._highlightPairFactoryResult=t=>{const n=this.flags(t.line,e);return!!n&&n.isHighlighted}),this._highlightPairFactoryResult}highlightLineFactory(e){return this._highlightLineFactoryModel!==e&&(this._highlightLineFactoryModel=e,this._highlightLineFactoryResult=null),this._highlightLineFactoryResult||(this._highlightLineFactoryResult=t=>{const n=this.flags(t,e);return!!n&&n.isHighlighted}),this._highlightLineFactoryResult}toggleHighlight(e,t){const n=this.flags(e,t,!0);n.isHighlighted=!n.isHighlighted,this._highlightLineFactoryResult=null,this._highlightPairFactoryResult=null}isHighlighted(e,t){return this.highlightLineFactory(t)(e)}highlightSmartTab(e,t){const n=this.highlightLineFactory(t);return this.lines(e,t).some(n)}smartTabColor(e,t){return this.highlightSmartTab(e,t)?"#eeff44":null}highlightBookkeepingTab(e){const t=this.highlightLineFactory(e);return!!e&&!!e.Lines&&e.Lines.some(e=>(e.State||0)>=0&&t(e))}bookkeepingTabColor(e){return this.highlightBookkeepingTab(e)?"#eeff44":null}formColor(e,t){const n=this.highlightLineFactory(t),i=this.lines(e,t);return 1===i.length&&n(i[0])?"#eeff44":null}getDocState(e){if(this._documentStateDoc!==e&&(this._documentStateDoc=e,this._documentStateResult=null),null===this._documentStateResult)if(e&&e.Lines){const t=e.Lines.map(e=>e.State||0),n=t.filter(e=>e>=0);if(n.length>0)this._documentStateResult=Math.min(...n);else if(t.length>0){const e=t.filter(e=>e<0);this._documentStateResult=Math.min(...e)}else this._documentStateResult=0}else this._documentStateResult=0;return this._documentStateResult}onAutofillFromExchangeRate(e,t,n){this.cancelAutofill(e);const i=e.entry,c=i.MonetaryValue;if(c){const o=t.PostingDate||Object(yi.e)(),r=this.readonlyValueCurrencyId(e.entry);r&&(e.direction=n,e.subscription=this.api.exchangeRatesApi(this.notifyDestruct$).convertToFunctional(o,r,c).pipe(Object(J.a)(s=>{this.cancelAutofill(e);const l=i.MonetaryValue,a=this.readonlyValueCurrencyId(e.entry);this.details.isEdit&&l===c&&a===r&&(t.PostingDate||o)===o&&(i.Value=s,i.Direction=n)}),Object(F.a)(t=>{if(this.cancelAutofill(e),404===t.status){const e=this.translate.instant("Error_NoExRateFoundForCurrency0Date1",{0:this.ws.getMultilingualValue("Currency",r,"Name"),1:Object(ve.a)(o,this.workspace,this.translate)});this.details.displayErrorModal(e)}else this.details.displayErrorModal(t.error);return Object(A.a)(null)}),Object(ne.a)(()=>this.cancelAutofill(e))).subscribe())}else i.Value=0}cancelAutofill(e){e.subscription&&(e.subscription.unsubscribe(),delete e.subscription,delete e.direction)}onAutoBalance(e,t,n){if(!t||!t.Lines)return;const i=e.entry,c=(i.Value||0)*(i.Direction||1),o=t.Lines.filter(e=>(e.State||0)>=0).map(e=>e.Entries?e.Entries.map(e=>(e.Value||0)*(e.Direction||1)).reduce((e,t)=>e+t,0):0).reduce((e,t)=>e+t,0)-c;o>0?(i.Direction=-1,i.Value=Math.abs(o),n(e)):o<0?(i.Direction=1,i.Value=Math.abs(o),n(e)):e.PH||(i.Direction=1,delete i.Value,n(e))}onReverse(e,t,n){if(!n)return;const i=this.processEntryClone(JSON.parse(JSON.stringify(e.entry)));i.Direction=1===i.Direction?-1:1,this.addManualEntry(i,t),this._computeEntriesModel=null}onDeleteAll(e,t,n){n&&(t.Lines=t.Lines.filter(t=>t.DefinitionId!==e),this._computeEntriesModel=null,this._linesModel=null)}onDeleteAllManualEntries(e,t){this.onDeleteAll(this.ws.definitions.ManualLinesDefinitionId,e,t)}onCloneManualLine(e,t,n){if(!n)return;const i=this.processEntryClone(JSON.parse(JSON.stringify(e.entry)));this.addManualEntry(i,t),this._computeEntriesModel=null}showAutoGenerate(e,t){if(!t)return!1;const n=this.lineDefinition(e);return!!n&&n.GenerateScript}autoGenerateLabel(e){const t=this.lineDefinition(e);return this.ws.getMultilingualValueImmediate(t,"GenerateLabel")||this.translate.instant("AutoGenerate")}parameterLabel(e){let t=this.ws.getMultilingualValueImmediate(e,"Label");return"Required"===e.Visibility&&(t=`${t} *`),t}parameterDesc(e){return e.desc||(e.desc=Object(V.h)(this.ws,e.Control,e.ControlOptions))}updateOn(e){const t=this.parameterDesc(e);return Object(V.s)(t)}get autoGenerateLineDef(){return this.lineDefinition(this.autoGenerateLineDefId)}trackByKey(e){return e.Key}onAutoGenerate(e,t,n){if(!n)return;const i=this.lineDefinition(e);this.autoGenerateLineDefId===e&&this.autoGenerateDoc===t||(this.autoGenerateDoc=t,this.autoGenerateLineDefId=e,this.autoGenerateArgs={}),i.GenerateParameters.length>0?this.modalService.open(this.autoGenerateModal):this.onDoAutoGenerate()}onDoAutoGenerate(e){const t=this.autoGenerateDoc;this.autoGenerateRequiredParamsAreSet&&this.documentsApi.autoGenerate(this.autoGenerateLineDefId,this.autoGenerateArgs).pipe(Object(J.a)(n=>{if(e&&e.close(),n.Result.length>0){Object(V.o)(n.RelatedEntities,this.workspace),this.workspace.notifyStateChanged();for(const e of n.Result)e._flags={isModified:!0};t.Lines.push(...n.Result),this._computeEntriesModel=null,this._linesModel=null}else{const e=this.translate.instant("Message_AutoGenerateReturnedNothing");this.details.displayModalMessage(e)}})).subscribe({error:this.details.handleActionError})}get autoGenerateRequiredParamsAreSet(){const e=this.autoGenerateLineDef;if(e&&e.GenerateParameters.length>0)for(const t of e.GenerateParameters)if("Required"===t.Visibility&&!Object(V.n)(this.autoGenerateArgs[t.Key]))return!1;return!0}total(e,t,n=!1){if(t=t,!e||!e.Lines)return null;let i=e.Lines;if(n){const e=this.ws.definitions.ManualLinesDefinitionId;i=i.filter(t=>t.DefinitionId===e)}return t*i.filter(e=>(e.State||0)>=0).map(e=>e.Entries?e.Entries.filter(e=>e.Direction===t).map(e=>(e.Value||0)*(e.Direction||1)).reduce((e,t)=>e+t,0):0).reduce((e,t)=>e+t,0)}get functionalName(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")}barcodeColumnCollection(e){const t=this.lineDefinition(e),n=t.Columns[t.BarcodeColumnIndex];if(n)switch(n.ColumnName){case"CustodianId":case"RelationId":case"NotedRelationId":return"Relation";case"ResourceId":return"Resource"}else console.error(`BarcodeColumnIndex ${t.BarcodeColumnIndex} is out of range`)}barcodeColumnIndex(e){return this.lineDefinition(e).BarcodeColumnIndex}barcodeQuantityColumnIndex(e){const t=this.lineDefinition(e);if(this.barcodeQuantityColumnIndexDefinition!==t){this.barcodeQuantityColumnIndexDefinition=t;const e=t.Columns[t.BarcodeColumnIndex];e?this.barcodeQuantityColumnIndexResult=t.Columns.findIndex(t=>"Quantity"===t.ColumnName&&t.EntryIndex===e.EntryIndex):console.error("Could not find suitable quantity column for barcode")}return this.barcodeQuantityColumnIndexResult}showBarcodeField(e,t){if(!t)return!1;const n=this.lineDefinition(e);return Object(V.n)(n.BarcodeColumnIndex)}barcodeFieldPlaceholder(e){const t=this.barcodeColumnIndex(e),n=this.columnLabel(e,t);return this.translate.instant("Scan0",{0:n})}getBarcode(e,t){return this.barcodeModel===t&&this.barcodeLineDefId===e||(this.barcodeModel=t,this.barcodeLineDefId=e,this.barcode=null),this.barcode}setBarcode(e,t,n){this.barcodeModel===t&&this.barcodeLineDefId===e||(this.barcodeModel=t,this.barcodeLineDefId=e,this.barcode=null),this.barcode!==n&&(this.barcode=n,this.clearBarcodeError())}drawAttentionToLine(e,t,n){this.attentionItem=e,setTimeout(()=>this.attentionItem=null,250),null===t?setTimeout(()=>n.scrollToEnd(),50):setTimeout(()=>n.scrollTo(t),50)}onBarcodeSuccess(e){e.BarcodeBeepsEnabled&&this.audio.beep(100,920,150)}getBarcodeError(e,t){return this.barcodeErrorsModel===t&&this.barcodeErrorsLineDefId===e||(this.barcodeErrorsModel=t,this.barcodeErrorsLineDefId=e,this.clearBarcodeError()),this.barcodeError?this.barcodeError():null}showBarcodeError(e,t){return this.barcodeErrorsModel===t&&this.barcodeErrorsLineDefId===e||(this.barcodeErrorsModel=t,this.barcodeErrorsLineDefId=e,this.clearBarcodeError()),!!this.barcodeError}onBarcodeError(e,t){this.barcodeError=t,e.BarcodeBeepsEnabled&&this.audio.beep(999,150,300)}clearBarcodeError(){this.barcodeError=null}getBarcodeScanCount(e,t,n){return this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={}),this._barcodeScanCount[`${e}/${n}`]||0}incrementBarcodeScanCount(e,t,n){this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={});const i=`${e}/${n}`;this._barcodeScanCount[i]=this._barcodeScanCount[i]?this._barcodeScanCount[i]+1:1}clearBarcodeScanCount(e,t,n){this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={});const i=`${e}/${n}`,c=this._barcodeScanCount[i];return delete this._barcodeScanCount[i],c}isBarcodeLoading(e,t){return this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]>0}onBarcodeStartLoading(e,t,n){this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]=this._isBarcodeLoading[e]?this._isBarcodeLoading[e]+1:1,this.incrementBarcodeScanCount(e,t,n)}onBarcodeFinishedLoading(e,t,n){return this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]&&(this._isBarcodeLoading[e]=Math.max(0,this._isBarcodeLoading[e]-1)),this.clearBarcodeScanCount(e,t,n)}onBarcodeEnter(e,t,n){const i=this.getBarcode(e,t);if(i){this.setBarcode(e,t,null);const c=this.lineDefinition(e),o=this.barcodeColumnCollection(e),r=this.barcodeColumnIndex(e),s=c.BarcodeProperty,l=(o,s)=>{if("IncrementQuantity"===c.BarcodeExistingItemHandling){const i=this.barcodeQuantityColumnIndex(e),r=this.getFieldValue(e,i,o,t)||0;this.setFieldValue(e,i,o,t,r+1),this.drawAttentionToLine(o,s,n),this.onBarcodeSuccess(c)}else if("AddNewLine"===c.BarcodeExistingItemHandling){const i=this.onAddNewLine(e,t),s=this.getFieldValue(e,r,o,t);this.setFieldValue(e,r,i,t,s),this.drawAttentionToLine(i,null,n),this.onBarcodeSuccess(c)}else"ThrowError"===c.BarcodeExistingItemHandling?(this.drawAttentionToLine(o,s,n),this.onBarcodeError(c,()=>this.translate.instant("Error_Barcode0AlreadyAdded",{0:i}))):"DoNothing"===c.BarcodeExistingItemHandling?(this.drawAttentionToLine(o,s,n),this.onBarcodeSuccess(c)):console.error(`Unknown value '${c.BarcodeExistingItemHandling}' for BarcodeExistingItemHandling`)},a=this.lines(e,t),u=a.findIndex(n=>{const c=this.getFieldValue(e,r,n,t),l=this.ws.get(o,c);return!!l&&l[s]===i}),d=a[u];if(d)l(d,u);else if(this.getBarcodeScanCount(e,t,i)>0)this.incrementBarcodeScanCount(e,t,i);else{let o,a,u,d;switch(c.Columns[c.BarcodeColumnIndex].ColumnName){case"CustodianId":o=this.definitionIdsCustodian_Smart(e,r),a=o&&1===o.length?o[0]:null,u=Object(hh.a)(this.workspace,this.translate,a),d=u.select+",DefinitionId,"+this.additionalSelectCustodian_Smart(e);break;case"RelationId":o=this.definitionIdsRelation_Smart(e,r),a=o&&1===o.length?o[0]:null,u=Object(hh.a)(this.workspace,this.translate,a),d=u.select+",DefinitionId,"+this.additionalSelectRelation_Smart(e);break;case"NotedRelationId":o=this.definitionIdsNotedRelation_Smart(e,r),a=o&&1===o.length?o[0]:null,u=Object(hh.a)(this.workspace,this.translate,a),d=u.select+",DefinitionId,"+this.additionalSelectNotedRelation_Smart(e);break;case"ResourceId":o=this.definitionIdsResource_Smart(e,r),a=o&&1===o.length?o[0]:null,u=Object(mh.a)(this.workspace,this.translate,a),d=u.select+",DefinitionId,"+this.additionalSelectResource_Smart(e)}const b=u.properties[s];if(!b)return void console.error(`Barcode Property '${s}' could not be found`);const g=Object(Mi.g)(b)?`'${i.replace("'","''")}'`:i.toString(),f=`${s} eq ${g}`,m=" and IsActive eq true",h=this.getFilter(e,r),p=o.length>1?o.map(e=>`DefinitionId eq ${e}`).reduce((e,t)=>`${e} or ${t}`):null,S={select:d,filter:f+m+(h?` and (${h})`:"")+(p?` and (${p})`:""),top:2,skip:0};this.onBarcodeStartLoading(e,t,i),this.api.crudFactory(u.apiEndpoint,this.notifyDestruct$).getEntities(S).pipe(Object(J.a)(o=>{const a=this.onBarcodeFinishedLoading(e,t,i);if(o&&o.Result&&o.Result.length>0)if(o.Result.length>1)this.onBarcodeError(c,()=>this.translate.instant("Error_MoreThanOneRecordWithBarcode0",{0:i}));else{const u=Object(V.c)(o,this.workspace)[0];if(this.ws.get(o.CollectionName,u)[s]!==i)this.onBarcodeError(c,()=>this.translate.instant("Error_CouldNotFindBarcode0",{0:i}));else{const i=this.lines(e,t),o=i.findIndex(n=>u===this.getFieldValue(e,r,n,t)),s=i[o];if(s)l(s,o);else{const i=this.onAddNewLine(e,t);if(this.setFieldValue(e,r,i,t,u),"IncrementQuantity"===c.BarcodeExistingItemHandling){const n=this.barcodeQuantityColumnIndex(e);this.setFieldValue(e,n,i,t,1)}if(this.drawAttentionToLine(i,null,n),this.onBarcodeSuccess(c),a>1)for(let e=1;e<a;e++){const t=160;Object(cn.a)(t*e).pipe(Object(J.a)(()=>l(i,null)),Object(UA.a)(this.notifyDestruct$)).subscribe()}}}}else this.onBarcodeError(c,()=>this.translate.instant("Error_CouldNotFindBarcode0",{0:i}))}),Object(F.a)(n=>(this.onBarcodeError(c,()=>n.error),this.onBarcodeFinishedLoading(e,t,i),Object(A.a)(null))),Object(UA.a)(this.notifyDestruct$)).subscribe()}}}get select(){const e=this.definition;if(this.selectDefinition!==e){this.selectDefinition=e;const t={};for(const i of e.LineDefinitions.map(e=>e.LineDefinitionId)){const e=this.ws.definitions.Lines[i];if(Object(V.n)(e.BarcodeColumnIndex)&&e.BarcodeProperty){const n=e.Columns[e.BarcodeColumnIndex];if(n)switch(n.ColumnName){case"CustodianId":t[`Lines.Entries.Custodian.${e.BarcodeProperty}`]=!0;break;case"RelationId":t[`Lines.Entries.Relation.${e.BarcodeProperty}`]=!0;break;case"NotedRelationId":t[`Lines.Entries.NotedRelation.${e.BarcodeProperty}`]=!0;break;case"ResourceId":t[`Lines.Entries.Resource.${e.BarcodeProperty}`]=!0}}}let n=this.selectBase;for(const e of Object.keys(t))n+=","+e;this.selectResult=n}return this.selectResult}additionalSelectCustodian_Smart(e){return this.lineDefinition(e).BarcodeProperty||""}additionalSelectRelation_Smart(e){return`CurrencyId,${this.lineDefinition(e).BarcodeProperty||""}`}additionalSelectNotedRelation_Smart(e){return this.lineDefinition(e).BarcodeProperty||""}additionalSelectResource_Smart(e){return`CurrencyId,UnitId,${this.lineDefinition(e).BarcodeProperty||""}`}additionalSelectReferenceSource_Smart(e){return""}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(i.a),c.Mb(G.t),c.Mb(KA))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-documents-details"]],viewQuery:function(e,t){if(1&e&&(c.Qc(tN,3),c.Qc(nN,3),c.Qc(iN,3)),2&e){let e;c.zc(e=c.dc())&&(t.confirmModal=e.first),c.zc(e=c.dc())&&(t.signatureModal=e.first),c.zc(e=c.dc())&&(t.autoGenerateModal=e.first)}},inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[c.wb],decls:19,vars:2,consts:[["collection","Document",3,"definitionId","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","isInactive","documentHeaderTemplate","actions","sidebarTemplate","registerPristineFunc","isDirtyFunc","extraParams","handleFreshExtras","toolbarTemplate","encodeCustomStateFunc","select","savePreprocessing",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["toolbar",""],["documentHeader",""],["document",""],["sidebar",""],["confirmModal",""],["signatureModal",""],["autoGenerateModal",""],["collection","Document",3,"definitionId","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","isInactive","documentHeaderTemplate","actions","sidebarTemplate","registerPristineFunc","isDirtyFunc","extraParams","handleFreshExtras","toolbarTemplate","encodeCustomStateFunc","select","savePreprocessing"],[3,"showHome"],["class","mx-2 d-inline-block",4,"ngIf"],["class","d-inline-block","container","body",3,"placement","ngbTooltip",4,"ngIf"],[1,"mx-2","d-inline-block"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-sm","btn-light","t-white-button","text-primary","t-toolbar-button",3,"disabled","click"],["icon","undo"],[1,"d-none","d-md-inline"],[1,"btn","btn-sm","btn-danger","t-toolbar-button",3,"disabled","click"],["icon","times"],[1,"btn","btn-sm","btn-success","t-toolbar-button",3,"disabled","click"],["icon","check"],[1,"w-100","t-document-header","d-flex","justify-content-end"],[4,"ngIf","ngIfElse"],["negativeStates",""],[1,"t-flow-chart","small","d-none","d-lg-block"],[3,"active",4,"ngIf"],[1,"small","t-lone-state","active","d-block","d-lg-none"],[4,"ngIf"],[1,"small","t-lone-state","active","d-block"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","codeWidth","prefix","ngModelChange",4,"ngIf"],["class","t-form-group","labelContext","PostingDateIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CustodianIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","RelationIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ResourceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","NotedRelationIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CenterIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CurrencyIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","QuantityIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","UnitIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","Time1IsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","DurationIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","DurationUnitIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","Time2IsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ExternalReferenceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ReferenceSourceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","InternalReferenceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","MemoIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["perTab",""],["perLine",""],["documentIsCommonMenu",""],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["smartCommands",""],["ngbDropdown","",4,"ngIf"],[3,"class","ngbNavItem",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["type","file","multiple","",1,"d-none",3,"change"],["fileInput",""],["manualLines",""],["header_Account",""],["row_Account",""],["header_Center",""],["row_Center",""],["header_Debit",""],["row_Debit",""],["header_Credit",""],["row_Credit",""],["autofillFromExchangeRate",""],["header_Memo",""],["row_Memo",""],["row_ModifiedWarning",""],["row_SmartEntryCommands",""],["header_ManualEntryCommands",""],["row_ManualEntryCommands",""],[1,"font-weight-normal"],["required","",3,"ngModel","ngModelOptions","codeWidth","prefix","ngModelChange"],["labelContext","PostingDateIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"metadata",4,"ngIf"],[3,"disabled","required","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],[3,"disabled","required","ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label","serverErrors"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],["labelContext","CustodianIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","definitionIds","filter","required","disabled","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionIds","filter","required","disabled","ngModelChange"],["labelContext","RelationIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ResourceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","NotedRelationIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","CenterIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","required","disabled","filter","ngModelChange",4,"ngIf"],["link","../../../centers",3,"itemId"],[3,"ngModel","required","disabled","filter","ngModelChange"],["labelContext","CurrencyIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","filter","required","disabled","ngModelChange",4,"ngIf"],["link","../../../currencies",3,"itemId"],[3,"ngModel","filter","required","disabled","ngModelChange"],["labelContext","QuantityIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","required","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","required","disabled","ngModelChange"],["labelContext","UnitIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","Time1IsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","ngModelOptions","required","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","disabled","ngModelChange"],["labelContext","DurationIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","DurationUnitIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","Time2IsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ExternalReferenceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ReferenceSourceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","InternalReferenceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","MemoIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[1,"flex-grow-1"],[1,"font-italic","text-muted"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],[3,"icon"],[1,"t-menu-text"],[3,"ngbNavItem"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["smartHeaderCommands",""],["tabIsCommonMenu",""],[1,"text-danger"],["icon","exclamation"],["smartTab",""],["smartHeader",""],["smartRow",""],["formGroupContent",""],["class","row mx-0",4,"ngIf"],["tableTab",""],[1,"row","m-0","pt-2","t-form"],["noFormMessage",""],["class","col-12 py-1 px-3 d-flex",4,"ngIf"],[1,"col-12","d-flex","justify-content-end"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[1,"h-100","border-left"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1",3,"click"],["icon","trash",3,"title"],["icon","plus",3,"title"],["class","px-3 text-muted font-italic",4,"ngIf"],[1,"px-3","text-muted","font-italic"],[1,"col-12","py-1","px-3","d-flex"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],["icon","plus"],["class","row m-0 pt-2 pb-3 t-form border-bottom",4,"ngIf"],[3,"dataSource","isEdit","columnPaths","headerTemplate","rowTemplate","columnTemplates","onNewItem","highlightFunc","attentionItem","insert","delete"],["tableComponent",""],["class","d-flex justify-content-end mt-3",4,"ngIf"],[1,"row","m-0","pt-2","pb-3","t-form","border-bottom"],[1,"w-100"],["class","t-form-group",4,"ngIf"],["class","w-100 pt-3",4,"ngIf"],[1,"t-form-group",3,"labelContextMenu","labelContext","disableLabelMenu","serverErrors","label"],[1,"t-form-group"],[3,"ngModel","placeholder","ngModelChange","enter"],[1,"w-100","pt-3"],["dismissable","true",3,"dismiss"],[1,"d-flex","justify-content-end","mt-3"],[1,"border-top","border-bottom","py-1"],["colspan","10",1,"p-1"],[2,"width","20px"],[1,"small","font-weight-bold"],[2,"text-align","right"],[4,"ngTemplateOutlet"],[1,"border-top","border-bottom"],[1,"small","font-weight-bold","pb-12","pt-2"],[1,"px-1","pt-2",2,"text-align","right"],[1,"small","font-weight-bold","pt-12","pb-2"],[1,"px-1","pb-2","align-right",2,"text-align","right"],["class","t-form-group",3,"serverErrors",4,"ngIf"],["class","t-form-group",3,"serverErrors","label",4,"ngIf"],[1,"t-form-group",3,"serverErrors"],[1,"t-form-group",3,"serverErrors","label"],[3,"ngSwitch",4,"ngIf","ngIfElse"],["editMode",""],[3,"ngSwitch"],["link","../../../accounts",3,"itemId",4,"ngSwitchCase"],["link","../../../currencies",3,"itemId",4,"ngSwitchCase"],[3,"link","itemId",4,"ngSwitchCase"],["link","../../../centers",3,"itemId",4,"ngSwitchCase"],["link","../../../entry-types",3,"itemId",4,"ngSwitchCase"],["class","t-right-aligned",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["link","../../../accounts",3,"itemId"],["link","../../../entry-types",3,"itemId"],[1,"t-right-aligned"],["editableFormGroupContent",""],[1,"w-100","t-disabled-background","border-bottom",3,"ngSwitch"],["additionalSelect","CurrencyId",3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],["additionalSelect","E",3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],[3,"required","definitionIds","ngModel","filter","additionalSelect","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],[3,"required","filter","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","textAlignment","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","ngModelOptions","ngModelChange",4,"ngSwitchCase"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngSwitchCase"],["additionalSelect","CurrencyId",3,"required","ngModel","filter","ngModelChange"],["additionalSelect","E",3,"required","ngModel","filter","ngModelChange"],[3,"required","definitionIds","ngModel","filter","additionalSelect","ngModelChange"],[3,"required","ngModel","filter","ngModelChange"],[3,"required","filter","ngModel","ngModelChange"],[3,"required","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","textAlignment","ngModelChange"],[3,"required","ngModel","ngModelOptions","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModel","required","id","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[1,"row","mx-0"],[1,"col-12","mt-3"],["class","col-12 col-lg-6 px-2 px-lg-5 mt-3 mb-1",4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","px-2","px-lg-5","mt-3","mb-1"],[1,"border-bottom","d-flex","align-items-stretch","p-2","bg-light"],[2,"height","37px"],[1,"px-2","small","p-1","d-flex","justify-content-between"],[1,"text-truncate"],["link","../../../roles",3,"itemId",4,"ngIf"],[3,"link","itemId",4,"ngIf"],["link","../../../users",3,"itemId",4,"ngIf"],["class","text-muted",4,"ngIf"],["placement","bottom","container","body",1,"d-inline",3,"ngbTooltip"],["class","btn btn-sm btn-light text-primary t-white-button btn-sm h-100 py-0 px-1","style","margin-top:-4px",3,"title","disabled","click",4,"ngIf"],[1,"d-flex","align-items-center","justify-content"],["shape","circle",3,"src","imageId","size"],[1,"p-2","flex-grow-1","text-truncate","d-flex","align-items-center"],["link","../../../users",3,"itemId"],[1,"d-flex","align-items-center"],[1,"px-1","font-weight-bold","t-large"],[1,"text-danger","small","align-items-center",2,"max-width","120px"],[1,"font-weight-bold"],["placement","bottom","container","body",1,"w-50","px-1",3,"ngbTooltip"],[1,"btn","btn-danger","px-2","w-100","h-100",3,"disabled","click"],[1,"btn","btn-success","px-2","w-100","h-100",3,"disabled","click"],["link","../../../roles",3,"itemId"],[1,"text-muted"],[1,"btn","btn-sm","btn-light","text-primary","t-white-button","btn-sm","h-100","py-0","px-1",2,"margin-top","-4px",3,"title","disabled","click"],["icon","trash"],["ngbDropdown","",3,"placement",4,"ngIf"],["ngbDropdown","",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],[1,"small"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"t-transparent-background",3,"click"],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],["icon","ellipsis-v"],["ngbDropdown",""],["href","","ngbDropdownToggle","",1,"nav-link","t-no-arrow",3,"click"],["icon","ellipsis-h"],["class","t-transparent-background","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["ngbNavLink","",1,"px-2",3,"title"],["icon","book"],[1,"col-12","mt-3","pb-2","border-bottom"],[1,"small2","font-weight-bold2"],[3,"dataSource","itemSize","visibleRows","highlightFunc","columnPaths","columnTemplates"],["ngbNavLink","",1,"px-2"],[1,"small","t-slightly-bold",3,"title"],["icon","paperclip"],["class","p-3 font-italic font-weight-light2 text-muted",4,"ngIf"],["class","w-100 mx-0 mb-1 p-2 p-sm-3 overflow-auto","style","max-height: 450px;",4,"ngIf"],["class","py-2 px-3 col-12 d-flex align-items-center justify-content-end",4,"ngIf"],[1,"p-3","font-italic","font-weight-light2","text-muted"],[1,"w-100","mx-0","mb-1","p-2","p-sm-3","overflow-auto",2,"max-height","450px"],["class","text-nowrap",3,"bg-light",4,"ngFor","ngForOf"],[1,"text-nowrap"],[1,"border-bottom","d-flex","align-items-center"],[1,"px-3","pt-1","pb-2"],[2,"font-size","200%",3,"icon"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","px-1",2,"min-width","0px"],["class","d-flex align-items-stretch","style","max-width: 750px;",4,"ngIf","ngIfElse"],["editAttachment",""],[1,"d-flex","align-items-stretch"],[1,"flex-grow-1","small","text-muted","text-truncate",2,"min-width","0px"],["class","mx-1",4,"ngIf"],[1,"d-flex","align-items-stretch",2,"max-width","750px"],["type","button",1,"btn","btn-link","p-0","text-primary","border-top-0","border-left-0","border-right-0","text-truncate",3,"click"],["class","mx-2 flex-grow-1","style","min-width: 0;",4,"ngIf"],[1,"mx-2","flex-grow-1",2,"min-width","0"],[1,"text-black"],[2,"max-width","500px"],[3,"serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"mx-1"],["class","btn btn-sm text-primary p-0 px-1 t-toolbar-button btn-light t-white-button",3,"title","click",4,"ngIf","ngIfElse"],["spinner",""],[1,"btn","btn-sm","text-primary","p-0","px-1","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","download"],[1,"px-1","t-toolbar-button","d-inline","t-vertical-align-middle"],[1,"py-2","px-3","col-12","d-flex","align-items-center","justify-content-end"],[1,"btn","btn-sm","btn-primary","text-primary2","btn-light2","t-white-button2",3,"click"],["icon","upload"],[3,"dataSource","isEdit","itemSize","columnPaths","columnTemplates","onNewItem","insert","delete"],["class","row m-0 py-2",4,"ngIf"],[1,"row","m-0","py-2"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["style","min-width: 150px;",3,"ngModel","additionalSelect","filter","ngModelChange",4,"ngIf"],[1,"small","d-flex","flex-wrap","px-2","pt-1"],["class","text-muted font-italic",4,"ngIf"],[1,"text-muted","font-italic"],[2,"min-width","150px",3,"ngModel","additionalSelect","filter","ngModelChange"],[3,"label","serverErrors"],["required","",3,"ngModel","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelChange"],["textAlignment","right","required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],["required","",3,"ngModel","additionalSelect","definitionIds","ngModelChange",4,"ngIf"],["required","",3,"ngModel","additionalSelect","definitionIds","ngModelChange"],["required","",3,"ngModel","definitionIds","ngModelChange",4,"ngIf"],["required","",3,"ngModel","definitionIds","ngModelChange"],["required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],[3,"ngModel","filter","ngModelChange",4,"ngIf"],[3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","filter","ngModelChange",4,"ngIf"],["required","",3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"minDecimalPlaces","maxDecimalPlaces","ngModel","ngModelChange",4,"ngIf"],[3,"minDecimalPlaces","maxDecimalPlaces","ngModel","ngModelChange"],[2,"float","right"],["class","h-100",3,"metadata",4,"ngIf"],[1,"h-100",3,"metadata"],["textAlignment","right",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],["class","d-flex justify-content-end pt-1",4,"ngIf"],[1,"d-flex","justify-content-end","pt-1"],["tabindex","-1",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1",3,"click"],["icon","exchange-alt",3,"title"],["icon","exclamation-triangle","class","text-warning","container","body",3,"placement","ngbTooltip",4,"ngIf"],["icon","exclamation-triangle","container","body",1,"text-warning",3,"placement","ngbTooltip"],[1,"d-flex","justify-content-center","px-0","px-sm-2"],[1,"w-100","t-paper-width"],["class","bg-light border-bottom py-2 px-3",4,"ngIf"],[1,"bg-light","border-bottom","py-2","px-3"],[1,"d-flex"],[1,"p-2","text-truncate"],["class","px-2 pb-2 pt-0",3,"margin-left","margin-right",4,"ngIf"],[1,"px-2","pb-2","pt-0"],[1,"form-group"],["for","user",1,"small","font-weight-bold"],[1,"bg-white","border","t-borderless-input","p-1"],["id","user",3,"ngModel","filter","showCreate","ngModelChange"],["id","message",1,"form-control","t-input","p-1","border","bg-white",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"px-3","py-3","small","font-weight-bold"],[1,"bg-light","border-bottom","pt-2","pb-2","px-3",3,"ngSwitch"],[1,"py-2","text-truncate"],[1,"small","text-muted"],[1,"d-flex","flex-wrap"],[1,"pt-2"],["icon","angle-right",3,"flip","size"],[1,"my-auto","t-vertical-alignment-center","small","text-muted"],["class","pt-1 pb-2 px-2",3,"margin-left","margin-right",4,"ngIf"],[1,"pt-1","pb-2","px-2"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-danger",3,"click"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["class","mt-3 mb-2",4,"ngIf"],["class","mt-1",4,"ngIf"],[1,"btn",3,"disabled","click"],[1,"mt-3","mb-2"],[1,"font-weight-bold","small"],[1,"t-vertical-align-middle"],["filter","Id ne me",3,"ngModel","ngModelChange"],[1,"mt-1"],["class","t-form-group","style","margin-top:0!important",3,"label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn","btn-primary",3,"disabled","click"],["icon","bolt"],[1,"t-form-group",2,"margin-top","0!important",3,"label"],[3,"ngModel","desc","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(c.Jc(0,oN,1,22,"t-details",0),c.Jc(1,rN,1,1,"ng-template",null,1,c.Kc),c.Jc(3,sN,2,1,"ng-template",null,2,c.Kc),c.Jc(5,gN,5,5,"ng-template",null,3,c.Kc),c.Jc(7,NN,4,2,"ng-template",null,4,c.Kc),c.Jc(9,kj,70,28,"ng-template",null,5,c.Kc),c.Jc(11,qj,4,2,"ng-template",null,6,c.Kc),c.Jc(13,jj,18,10,"ng-template",null,7,c.Kc),c.Jc(15,Bj,20,17,"ng-template",null,8,c.Kc),c.Jc(17,Wj,16,8,"ng-template",null,9,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,q.a,nn,G.E,ee.a,he.a,G.v,C.k,G.A,HA,te.m,te.i,te.j,hn.a,Vu,pn.a,ss,xb,rv,Au,zu,vn,nv,pe.a,G.x,G.y,G.w,C.p,Fs.a,fe.a,Se.a,Vs.a,C.m,C.n,C.o,eC,WR,te.a,te.b,be,G.l,G.r,G.p,G.o,ZA,La,te.c,LC],pipes:[K.c,kb,Ab,C.d,Me,Ie],encapsulation:2}),e})();function Yj(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Entry_Direction_Debit")," ")}function Xj(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Entry_Direction_Credit")," ")}function Zj(e,t){if(1&e&&(c.Sb(0,"div",6),c.Sb(1,"div",7),c.Sb(2,"span"),c.Lc(3),c.hc(4,"accounting"),c.Rb(),c.Rb(),c.Sb(5,"div",8),c.Sb(6,"div",9),c.Nb(7,"t-auto-cell",10),c.Rb(),c.Nb(8,"t-auto-cell",11),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(3),c.Nc(" ",c.jc(4,3,n.c[e].Direction*n.c[e].Value,n.functional_format),""),c.zb(4),c.nc("entity",n.c[e]),c.zb(1),c.nc("entity",n.c[e])}}function e$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Memo"),"\n")}function t$(e,t){if(1&e&&(c.Sb(0,"span",12),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.ws.get("LineForQuery",n.c[e].LineId).Memo)}}const n$=function(){return[]},i$=function(e){return{template:e,expression:"Direction eq 1"}},c$=function(e){return{template:e,expression:"Direction eq -1"}},o$=function(e,t){return[e,t]},r$=function(e){return{OpenedAt:e}};let s$=(()=>{class e extends xt.a{constructor(e,t){super(),this.workspace=e,this.translate=t}get c(){return this.ws.DetailsEntry}get ws(){return this.workspace.currentTenant}get functional_format(){const e=this.ws.settings.FunctionalCurrencyDecimals;return`1.${e}-${e}`}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-details-entries"]],features:[c.wb],decls:12,vars:24,consts:[["collection","DetailsEntry","selectDefault","Line.PostingDate,Account,Line.State,Direction,Value","selectForTiles","Line.PostingDate,Line.State,Account.Name,Account.Name2,Account.Name3,Direction,Value,Line.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["debit",""],["credit",""],["tile",""],["summaryHeader",""],["summaryColumn",""],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","DetailsEntry","path","Line.PostingDate",3,"entity"],["collection","DetailsEntry","path","Line.State",3,"entity"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,Yj,2,3,"ng-template",null,1,c.Kc),c.Jc(4,Xj,2,3,"ng-template",null,2,c.Kc),c.Jc(6,Zj,9,6,"ng-template",null,3,c.Kc),c.Jc(8,e$,2,3,"ng-template",null,4,c.Kc),c.Jc(10,t$,2,1,"ng-template",null,5,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"DetailsEntries"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",i)("tableSummaryColumnTemplate",r)("tableSummaryHeaderTemplate",o)("multiselectActions",c.qc(14,n$))("filterDefinition",c.rc(22,r$,c.sc(19,o$,c.rc(15,i$,e),c.rc(17,c$,n))))}},directives:[Tt.a,me.a],pipes:[K.c,Ab],encapsulation:2}),e})();function l$(e,t){if(1&e&&(c.Sb(0,"div",5),c.Sb(1,"span",6),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",7),c.Sb(4,"span"),c.Lc(5),c.hc(6,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();let i=null;c.zb(2),c.Mc(n.ws.getMultilingualValue("Currency",null==(i=n.ws.get("ExchangeRate",e))?null:i.CurrencyId,"Name")),c.zb(3),c.Mc(c.ic(6,2,n.c[e].ValidAsOf))}}function a$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"ExchangeRate"),"\n")}function u$(e,t){if(1&e&&c.Lc(0),2&e){const e=t.id,n=c.gc();c.Nc(" ",n.exchangeRateDisplay(e),"\n")}}function d$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}const b$=function(){return[]},g$=function(e){return{template:e,expression:"CreatedById eq me"}},f$=function(e){return[e]},m$=function(e){return{CreatedBy:e}};let h$=(()=>{class e extends xt.a{constructor(e){super(),this.workspace=e,this.expand=""}get c(){return this.ws.ExchangeRate}get ws(){return this.workspace.currentTenant}exchangeRateDisplay(e){const t=this.ws.get("ExchangeRate",e);return t?`${Object(yi.c)(new Date(t.ValidAsOf))}-${t.CurrencyId}`:""}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-exchange-rates-master"]],features:[c.wb],decls:10,vars:19,consts:[["collection","ExchangeRate","selectDefault","ValidAsOf,AmountInCurrency,Currency,AmountInFunctional","selectForTiles","ValidAsOf,Currency.Name,Currency.Name2,Currency.Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,l$,7,4,"ng-template",null,1,c.Kc),c.Jc(4,a$,2,3,"ng-template",null,2,c.Kc),c.Jc(6,u$,1,1,"ng-template",null,3,c.Kc),c.Jc(8,d$,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"ExchangeRates"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(12,b$))("filterDefinition",c.rc(17,m$,c.rc(15,f$,c.rc(13,g$,o))))}},directives:[Tt.a],pipes:[K.c,kb],encapsulation:2}),e})();var p$=n("yf4G");function S$(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.exchangeRateDisplay(e))}}function v$(e,t){if(1&e&&(c.Sb(0,"t-view-link",9),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("itemId",null==e?null:e.CurrencyId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Currency",null==e?null:e.CurrencyId,"Name")," ")}}function I$(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"t-currencies-picker",10),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.CurrencyId=t}),c.Rb(),c.Pb()}if(2&e){const e=c.gc().model,t=c.gc();c.zb(1),c.nc("ngModel",e.CurrencyId)("filter",t.currenciesFilter)}}function M$(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(c.ic(2,1,null==e?null:e.ValidAsOf))}}const R$=function(){return{updateOn:"blur"}};function y$(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",11),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ValidAsOf=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.ValidAsOf)("ngModelOptions",c.qc(3,R$))("required",!0)}}function D$(e,t){if(1&e&&(c.Sb(0,"span",12),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("title",null==e?null:e.AmountInCurrency),c.zb(1),c.Mc(c.jc(2,2,null==e?null:e.AmountInCurrency,t.AmountInCurrency_format(e)))}}function w$(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",13),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.AmountInCurrency=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("disabled",e.IsSystem)("ngModel",e.AmountInCurrency)("minDecimalPlaces",t.AmountInCurrency_decimals(e))("maxDecimalPlaces",6)("ngModelOptions",c.qc(5,R$))}}function E$(e,t){if(1&e&&(c.Sb(0,"span",12),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("title",null==e?null:e.AmountInFunctional),c.zb(1),c.Mc(c.jc(2,2,null==e?null:e.AmountInFunctional,t.functional_format))}}function C$(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",13),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.AmountInFunctional=t}),c.Rb()}if(2&e){const e=c.gc().model,t=c.gc();c.nc("disabled",e.IsSystem)("ngModel",e.AmountInFunctional)("minDecimalPlaces",t.functional_decimals)("maxDecimalPlaces",6)("ngModelOptions",c.qc(5,R$))}}function x$(e,t){if(1&e&&(c.Sb(0,"t-form-group",3),c.hc(1,"translate"),c.Jc(2,v$,2,2,"t-view-link",4),c.Jc(3,I$,2,2,"ng-container",5),c.Rb(),c.Sb(4,"t-form-group",3),c.hc(5,"translate"),c.Jc(6,M$,3,3,"div",5),c.Jc(7,y$,1,4,"t-date-picker",6),c.Rb(),c.Sb(8,"t-form-group",3),c.hc(9,"translate"),c.Jc(10,D$,3,5,"span",7),c.Jc(11,w$,1,6,"t-decimal-editor",8),c.Rb(),c.Sb(12,"t-form-group",3),c.hc(13,"translate"),c.Jc(14,E$,3,5,"span",7),c.Jc(15,C$,1,6,"t-decimal-editor",8),c.Rb()),2&e){const e=t.model,n=t.isEdit,i=c.gc();c.nc("label",c.ic(1,16,"ExchangeRate_Currency"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.CurrencyId),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(5,18,"ExchangeRate_ValidAsOf"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ValidAsOf),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(9,20,"ExchangeRate_AmountInCurrency")+i.AmountInCurrency_postfix(e))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.AmountInCurrency),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(13,22,"ExchangeRate_AmountInFunctional")+i.functional_postfix)("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.AmountInFunctional),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}const T$=function(){return[]};let z$=(()=>{class e extends mn.a{constructor(e,t){super(),this.workspace=e,this.translate=t,this.expand="Currency",this.create=()=>({ValidAsOf:Object(yi.e)(),AmountInCurrency:1})}get ws(){return this.workspace.currentTenant}get masterCrumb(){const e=Object(p$.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}get currenciesFilter(){return`Id ne '${this.ws.settings.FunctionalCurrencyId}'`}AmountInCurrency_postfix(e){return e&&e.CurrencyId?` (${this.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")})`:""}AmountInCurrency_decimals(e){const t=this.ws.get("Currency",e?e.CurrencyId:null);return t?t.E:this.ws.settings.FunctionalCurrencyDecimals}AmountInCurrency_format(e){return`1.${this.AmountInCurrency_decimals(e)}-6`}get functional_decimals(){return this.ws.settings.FunctionalCurrencyDecimals}get functional_format(){return`1.${this.functional_decimals}-6`}get functional_postfix(){return" ("+this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")+")"}isInactive(){return!1}exchangeRateDisplay(e){return e?`${Object(yi.c)(new Date(e.ValidAsOf))}-${e.CurrencyId}`:""}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-exchange-rates-details"]],features:[c.wb],decls:5,vars:11,consts:[["collection","ExchangeRate",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],[1,"t-form-group",3,"label","serverErrors"],["link","../../currencies",3,"itemId",4,"ngIf"],[4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"title",4,"ngIf"],["required","",3,"disabled","ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelOptions","ngModelChange",4,"ngIf"],["link","../../currencies",3,"itemId"],["additionalSelect","E","required","",3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"title"],["required","",3,"disabled","ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.Jc(1,S$,2,1,"ng-template",null,1,c.Kc),c.Jc(3,x$,16,24,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",e)("documentTemplate",n)("actions",c.qc(10,T$))("isInactive",t.isInactive)}},directives:[q.a,he.a,C.l,ss,zu,te.m,te.i,te.j,Vu,vn],pipes:[K.c,kb,Ab],encapsulation:2}),e})();function L$(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().id,t=c.gc();let n=null;c.zb(1),c.Mc(" - "+(null==(n=t.ws.get("Document",e))?null:n.Memo))}}function k$(e,t){if(1&e&&(c.Sb(0,"div",6),c.Sb(1,"div",7),c.Nb(2,"t-image",8),c.Rb(),c.Lc(3," \xa0\xa0\xa0 "),c.Sb(4,"div",9),c.Sb(5,"div",10),c.Sb(6,"div",11),c.Lc(7),c.Rb(),c.Sb(8,"div",12),c.Lc(9),c.hc(10,"datetimeFormat"),c.Rb(),c.Rb(),c.Sb(11,"div",13),c.Sb(12,"div",14),c.Sb(13,"span"),c.Lc(14),c.Rb(),c.Jc(15,L$,2,1,"span",15),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();let i=null,o=null;c.zb(2),c.nc("src","users/"+n.c[e].CreatedById+"/image")("imageId",null==(i=n.ws.get("User",n.c[e].CreatedById))?null:i.ImageId)("size",42),c.zb(5),c.Nc(" ",n.ws.getMultilingualValue("User",n.c[e].CreatedById,"Name")," "),c.zb(2),c.Nc(" ",c.ic(10,7,n.c[e].CreatedAt)," "),c.zb(5),c.Mc(n.formatSerial(e)),c.zb(1),c.nc("ngIf",null==(o=n.ws.get("Document",e))?null:o.Memo)}}function O$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Document"),"\n")}function A$(e,t){if(1&e&&(c.Sb(0,"span",16),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.formatSerial(e))}}function N$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"NotOpened")," ")}function _$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Opened")," ")}const J$=function(){return[]},P$=function(e){return{template:e,expression:"OpenedAt eq null"}},F$=function(e){return{template:e,expression:"OpenedAt ne null"}},V$=function(e,t){return[e,t]},q$=function(e){return{OpenedAt:e}};let j$=(()=>{class e extends xt.a{constructor(e,t){super(),this.workspace=e,this.translate=t}get c(){return this.ws.InboxRecord}get ws(){return this.workspace.currentTenant}formatSerial(e){const t=this.ws.Document[e],n=t.DefinitionId,i=Object(ph.c)(this.workspace,this.translate,n).properties.SerialNumber,c=t.SerialNumber;return Object(ph.a)(c,i.prefix,i.codeWidth)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-inbox"]],features:[c.wb],decls:12,vars:24,consts:[["collection","InboxRecord","selectDefault","Document.Memo,CreatedAt,CreatedBy,Comment,OpenedAt","selectForTiles","Comment,CreatedAt,CreatedBy.Name,CreatedBy.Name2,CreatedBy.Name3,CreatedBy.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["notopened",""],["opened",""],[1,"d-flex"],[1,"border"],[3,"src","imageId","size"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","t-slightly-bold"],[1,"text-truncate","text-muted"],[1,"d-flex","justify-content-between","mt-1","small","text-truncate"],[1,"text-truncate","text-muted",2,"min-width","0"],[4,"ngIf"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,k$,16,9,"ng-template",null,1,c.Kc),c.Jc(4,O$,2,3,"ng-template",null,2,c.Kc),c.Jc(6,A$,2,1,"ng-template",null,3,c.Kc),c.Jc(8,N$,2,3,"ng-template",null,4,c.Kc),c.Jc(10,_$,2,3,"ng-template",null,5,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"Inbox"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(14,J$))("filterDefinition",c.rc(22,q$,c.sc(19,V$,c.rc(15,P$,o),c.rc(17,F$,r))))}},directives:[Tt.a,be,C.l],pipes:[K.c,Me],encapsulation:2}),e})();function $$(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().id,t=c.gc();let n=null;c.zb(1),c.Mc(" - "+(null==(n=t.ws.get("Document",e))?null:n.Memo))}}function U$(e,t){if(1&e&&(c.Sb(0,"div",6),c.Sb(1,"div",7),c.Nb(2,"t-image",8),c.Rb(),c.Lc(3," \xa0\xa0\xa0 "),c.Sb(4,"div",9),c.Sb(5,"div",10),c.Sb(6,"div",11),c.Lc(7),c.Rb(),c.Sb(8,"div",12),c.Lc(9),c.hc(10,"datetimeFormat"),c.Rb(),c.Rb(),c.Sb(11,"div",13),c.Sb(12,"div",14),c.Sb(13,"span"),c.Lc(14),c.Rb(),c.Jc(15,$$,2,1,"span",15),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();let i=null,o=null;c.zb(2),c.nc("src","users/"+n.c[e].AssigneeId+"/image")("imageId",null==(i=n.ws.get("User",n.c[e].AssigneeId))?null:i.ImageId)("size",42),c.zb(5),c.Nc(" ",n.ws.getMultilingualValue("User",n.c[e].AssigneeId,"Name")," "),c.zb(2),c.Nc(" ",c.ic(10,7,n.c[e].CreatedAt)," "),c.zb(5),c.Mc(n.formatSerial(e)),c.zb(1),c.nc("ngIf",null==(o=n.ws.get("Document",e))?null:o.Memo)}}function K$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Document"),"\n")}function B$(e,t){if(1&e&&(c.Sb(0,"span",16),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.formatSerial(e))}}function H$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"NotOpened")," ")}function Q$(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Opened")," ")}const W$=function(){return[]},G$=function(e){return{template:e,expression:"OpenedAt eq null"}},Y$=function(e){return{template:e,expression:"OpenedAt ne null"}},X$=function(e,t){return[e,t]},Z$=function(e){return{OpenedAt:e}};let eU=(()=>{class e extends xt.a{constructor(e,t){super(),this.workspace=e,this.translate=t}get c(){return this.ws.OutboxRecord}get ws(){return this.workspace.currentTenant}formatSerial(e){const t=this.ws.Document[this.c[e].DocumentId],n=t.DefinitionId,i=Object(ph.c)(this.workspace,this.translate,n).properties.SerialNumber,c=t.SerialNumber;return Object(ph.a)(c,i.prefix,i.codeWidth)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-outbox"]],features:[c.wb],decls:12,vars:24,consts:[["collection","OutboxRecord","selectDefault","Document.Memo,CreatedAt,Assignee,Comment,OpenedAt","selectForTiles","Comment,CreatedAt,Assignee.Name,Assignee.Name2,Assignee.Name3,Assignee.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["notopened",""],["opened",""],[1,"d-flex"],[1,"border"],[3,"src","imageId","size"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","t-slightly-bold"],[1,"text-truncate","text-muted"],[1,"d-flex","justify-content-between","mt-1","small","text-truncate"],[1,"text-truncate","text-muted",2,"min-width","0"],[4,"ngIf"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,U$,16,9,"ng-template",null,1,c.Kc),c.Jc(4,K$,2,3,"ng-template",null,2,c.Kc),c.Jc(6,B$,2,1,"ng-template",null,3,c.Kc),c.Jc(8,H$,2,3,"ng-template",null,4,c.Kc),c.Jc(10,Q$,2,3,"ng-template",null,5,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"Outbox"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(14,W$))("filterDefinition",c.rc(22,Z$,c.sc(19,X$,c.rc(15,G$,o),c.rc(17,Y$,r))))}},directives:[Tt.a,be,C.l],pipes:[K.c,Me],encapsulation:2}),e})();function tU(e,t){if(1&e&&(c.Sb(0,"div",4),c.Sb(1,"span",5),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",6),c.Sb(4,"span",5),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("IfrsConcept",e,"Label")),c.zb(3),c.Mc(e)}}function nU(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"IfrsConcept"),"\n")}function iU(e,t){if(1&e&&(c.Sb(0,"span",7),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.ws.getMultilingualValue("IfrsConcept",e,"Label"))}}const cU=function(){return[]};let oU=(()=>{class e extends xt.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.IfrsConcept}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-ifrs-concepts-master"]],features:[c.wb],decls:8,vars:14,consts:[["collection","IfrsConcept","selectDefault","Code","selectForTiles","Label,Label2,Label3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions"],["tile",""],["summaryHeader",""],["summaryColumn",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,tU,6,2,"ng-template",null,1,c.Kc),c.Jc(4,nU,2,3,"ng-template",null,2,c.Kc),c.Jc(6,iU,2,1,"ng-template",null,3,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7);c.nc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,11,"IfrsConcepts"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(13,cU))}},directives:[Tt.a],pipes:[K.c],encapsulation:2}),e})();function rU(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Label",n.ws))}}function sU(e,t){if(1&e&&(c.Sb(0,"t-form-group",6),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("label",c.ic(1,2,"Label")+t.ws.primaryPostfix),c.zb(3),c.Mc(null==e?null:e.Label)}}function lU(e,t){if(1&e&&(c.Sb(0,"t-form-group",6),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("label",c.ic(1,2,"Label")+t.ws.secondaryPostfix),c.zb(3),c.Mc(null==e?null:e.Label2)}}function aU(e,t){if(1&e&&(c.Sb(0,"t-form-group",6),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("label",c.ic(1,2,"Label")+t.ws.ternaryPostfix),c.zb(3),c.Mc(null==e?null:e.Label3)}}function uU(e,t){if(1&e&&(c.Sb(0,"t-form-group",6),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("label",c.ic(1,2,"Description")+t.ws.secondaryPostfix),c.zb(3),c.Mc(null==e?null:e.Documentation2)}}function dU(e,t){if(1&e&&(c.Sb(0,"t-form-group",6),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("label",c.ic(1,2,"Description")+t.ws.ternaryPostfix),c.zb(3),c.Mc(null==e?null:e.Documentation3)}}function bU(e,t){if(1&e&&(c.Sb(0,"t-form-group",3),c.Sb(1,"h2",4),c.Lc(2),c.Rb(),c.Rb(),c.Jc(3,sU,4,4,"t-form-group",5),c.Jc(4,lU,4,4,"t-form-group",5),c.Jc(5,aU,4,4,"t-form-group",5),c.Sb(6,"t-form-group",6),c.hc(7,"translate"),c.Sb(8,"div"),c.Lc(9),c.Rb(),c.Rb(),c.Sb(10,"t-form-group",6),c.hc(11,"translate"),c.Sb(12,"div"),c.Lc(13),c.Rb(),c.Rb(),c.Jc(14,uU,4,4,"t-form-group",5),c.Jc(15,dU,4,4,"t-form-group",5)),2&e){const e=t.model,n=c.gc();c.zb(2),c.Mc(n.getMultilingualValue(e,"Label",n.ws)),c.zb(1),c.nc("ngIf",!n.ws.isPrimaryLanguage),c.zb(1),c.nc("ngIf",!n.ws.isSecondaryLanguage&&n.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!n.ws.isTernaryLanguage&&n.ws.settings.TernaryLanguageId),c.zb(1),c.nc("label",c.ic(7,10,"Code")),c.zb(3),c.Mc(null==e?null:e.Code),c.zb(1),c.nc("label",c.ic(11,12,"Description")+n.ws.primaryPostfix),c.zb(3),c.Mc(null==e?null:e.Documentation),c.zb(1),c.nc("ngIf",n.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",n.ws.settings.TernaryLanguageId)}}const gU=function(){return[]};let fU=(()=>{class e extends mn.a{constructor(e){super(),this.workspace=e,this.expand=""}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-ifrs-concepts-details"]],features:[c.wb],decls:6,vars:14,consts:[["collection","IfrsConcept",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],["class","t-form-group",3,"label",4,"ngIf"],[1,"t-form-group",3,"label"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,rU,2,1,"ng-template",null,1,c.Kc),c.Jc(4,bU,16,14,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5);c.nc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",c.ic(1,11,"IfrsConcepts"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.qc(13,gU))}},directives:[q.a,he.a,C.l],pipes:[K.c],encapsulation:2}),e})();function mU(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"t-ifrs-concepts-master",3),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("filter",e)("additionalSelect",n.additionalSelect)}}let hU=(()=>{class e extends Js{}return e.\u0275fac=function(t){return pU(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-ifrs-concepts-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:3,vars:5,consts:[["collection","IfrsConcept",3,"filter","masterTemplate","ensureAdditionalSelect","theme","additionalSelect","entityLoaded"],["master",""],[1,"modal-body"],["mode","popup",3,"filter","additionalSelect","cancel","choose"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,mU,2,2,"ng-template",null,1,c.Kc)),2&e){const e=c.Ac(2);c.nc("filter",t.filter)("masterTemplate",e)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("additionalSelect",t.additionalSelect)}},directives:[_s,oU],encapsulation:2}),e})();const pU=c.Ub(hU);function SU(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",9),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("MarkupTemplate",e,"Name")),c.zb(3),c.Mc(n.c[e].Code)}}function vU(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"MarkupTemplate"),"\n")}function IU(e,t){if(1&e&&(c.Sb(0,"span",10),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.ws.getMultilingualValue("MarkupTemplate",e,"Name"))}}function MU(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}function RU(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deployed")," ")}function yU(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"NotDeployed")," ")}const DU=function(){return[]},wU=function(e){return{template:e,expression:"CreatedById eq me"}},EU=function(e){return[e]},CU=function(e){return{template:e,expression:"IsDeployed eq true"}},xU=function(e){return{template:e,expression:"IsDeployed eq false"}},TU=function(e,t){return[e,t]},zU=function(e,t){return{CreatedBy:e,IsDeployed:t}};let LU=(()=>{class e extends xt.a{constructor(e){super(),this.workspace=e,this.expand=""}get c(){return this.ws.MarkupTemplate}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-markup-templates-master"]],features:[c.wb],decls:14,vars:27,consts:[["collection","MarkupTemplate","theme","dark","selectDefault","Code,IsDeployed","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["createdByMe",""],["deployed",""],["notdeployed",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,SU,6,2,"ng-template",null,1,c.Kc),c.Jc(4,vU,2,3,"ng-template",null,2,c.Kc),c.Jc(6,IU,2,1,"ng-template",null,3,c.Kc),c.Jc(8,MU,2,3,"ng-template",null,4,c.Kc),c.Jc(10,RU,2,3,"ng-template",null,5,c.Kc),c.Jc(12,yU,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"MarkupTemplates"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(12,DU))("filterDefinition",c.sc(24,zU,c.rc(15,EU,c.rc(13,wU,o)),c.sc(21,TU,c.rc(17,CU,r),c.rc(19,xU,s))))}},directives:[Tt.a],pipes:[K.c],encapsulation:2}),e})();var kU=n("gNDJ"),OU=n("VRyK");function AU(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"t-documents-master",3),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.definitionId,n=t.filter,i=c.gc();c.zb(1),c.nc("definitionId",e)("filter",n)("showCreate",!1)("additionalSelect",i.additionalSelect)}}let NU=(()=>{class e extends Js{}return e.\u0275fac=function(t){return _U(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-documents-picker"]],inputs:{definitionIds:"definitionIds"},features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:3,vars:6,consts:[["collection","Document",3,"masterTemplate","ensureAdditionalSelect","theme","definitionIds","filter","additionalSelect","entityLoaded"],["master",""],[1,"modal-body"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,AU,2,4,"ng-template",null,1,c.Kc)),2&e){const e=c.Ac(2);c.nc("masterTemplate",e)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("definitionIds",t.definitionIds)("filter",t.filter)("additionalSelect",t.additionalSelect)}},directives:[_s,$A],encapsulation:2}),e})();const _U=c.Ub(NU);var JU=n("GQwt");function PU(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-report-definitions-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function FU(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-report-definitions-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let VU=(()=>{class e extends Js{}return e.\u0275fac=function(t){return qU(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-report-definitions-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","ReportDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,PU,2,3,"ng-template",null,1,c.Kc),c.Jc(3,FU,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,ok,sx],encapsulation:2}),e})();const qU=c.Ub(VU),jU=["reportDefinitionModal"];function $U(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Hide")," ")}function UU(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Show")," ")}function KU(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Archive")," ")}function BU(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"TitleSingular",n.ws)||c.ic(2,1,"Untitled"))}}function HU(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",55),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleDefinition()}),c.Sb(1,"div",56),c.Nb(2,"fa-icon",57),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.nc("flip",e.flipIcon(!1)),c.zb(2),c.Mc(c.ic(5,2,"Definition"))}}function QU(e,t){1&e&&c.Nb(0,"fa-icon",58)}function WU(e,t){1&e&&c.Ob(0)}function GU(e,t){1&e&&c.Ob(0)}function YU(e,t){1&e&&c.Ob(0)}const XU=function(){return{updateOn:"blur"}},ZU=function(e,t){return{control:e,serverErrors:t}};function eK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",20),c.Sb(1,"label",59),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",60,61),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitleSingular2")}),c.Rb(),c.Jc(6,YU,1,0,"ng-container",24),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),c.zb(2),c.Mc(c.ic(3,7,"TitleSingular")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.TitleSingular2)("ngModelOptions",c.qc(9,XU)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,ZU,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function tK(e,t){1&e&&c.Ob(0)}function nK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",20),c.Sb(1,"label",62),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",63,64),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitleSingular3")}),c.Rb(),c.Jc(6,tK,1,0,"ng-container",24),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),c.zb(2),c.Mc(c.ic(3,7,"TitleSingular")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.TitleSingular3)("ngModelOptions",c.qc(9,XU)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,ZU,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function iK(e,t){1&e&&c.Ob(0)}function cK(e,t){1&e&&c.Ob(0)}function oK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",20),c.Sb(1,"label",65),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",66,67),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitlePlural2")}),c.Rb(),c.Jc(6,cK,1,0,"ng-container",24),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),c.zb(2),c.Mc(c.ic(3,7,"TitlePlural")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.TitlePlural2)("ngModelOptions",c.qc(9,XU)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,ZU,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function rK(e,t){1&e&&c.Ob(0)}function sK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",20),c.Sb(1,"label",68),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",69,70),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitlePlural3")}),c.Rb(),c.Jc(6,rK,1,0,"ng-container",24),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),c.zb(2),c.Mc(c.ic(3,7,"TitlePlural")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.TitlePlural3)("ngModelOptions",c.qc(9,XU)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,ZU,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function lK(e,t){1&e&&c.Nb(0,"fa-icon",58)}function aK(e,t){1&e&&c.Nb(0,"fa-icon",58)}function uK(e,t){1&e&&(c.Sb(0,"div",77),c.Lc(1," \u200c "),c.Rb())}function dK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",71),c.Sb(1,"div",72),c.Jc(2,aK,1,0,"fa-icon",18),c.Sb(3,"span",73),c.Lc(4),c.Rb(),c.Sb(5,"button",33),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureReportDefinition(n,i)}),c.hc(6,"translate"),c.Nb(7,"fa-icon",74),c.Rb(),c.Lc(8," \xa0 "),c.Sb(9,"button",33),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteReportDefinition(n,i)}),c.hc(10,"translate"),c.Nb(11,"fa-icon",75),c.Rb(),c.Rb(),c.Jc(12,uK,2,0,"div",76),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(2),c.Nc(" ",n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),c.zb(1),c.nc("title",c.ic(6,4,"Configure")),c.zb(4),c.nc("title",c.ic(10,6,"Delete"))}}function bK(e,t){if(1&e&&(c.Sb(0,"span",78),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e," ")}}function gK(e,t){1&e&&c.Nb(0,"fa-icon",58)}function fK(e,t){if(1&e&&(c.Sb(0,"option",79),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function mK(e,t){1&e&&c.Ob(0)}function hK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",80),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=c.gc(2).model;return c.gc().onIconClick(i,n)}),c.Nb(1,"fa-icon",81),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2).model;c.Eb("t-highlighted",e.value===n.MainMenuIcon),c.nc("title",e.value),c.zb(1),c.nc("icon",e.value)}}function pK(e,t){1&e&&c.Ob(0)}function SK(e,t){1&e&&c.Ob(0)}function vK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",82),c.Sb(1,"div",83),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeHidden(t)}),c.Sb(2,"span",84),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"div",83),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeVisible(t)}),c.Sb(6,"span",84),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Rb(),c.Sb(9,"div",83),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeArchived(t)}),c.Sb(10,"span",84),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(1),c.Eb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),c.zb(2),c.Mc(c.ic(4,15,"Definition_State_Hidden")),c.zb(2),c.Eb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),c.zb(2),c.Mc(c.ic(8,17,"Definition_State_Visible")),c.zb(2),c.Eb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),c.zb(2),c.Mc(c.ic(12,19,"Definition_State_Archived"))}}const IK=function(e){return{control:null,serverErrors:e}};function MK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",9),c.Jc(1,HU,6,4,"div",10),c.Sb(2,"div",11),c.Sb(3,"div",12),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleDefinition()}),c.Sb(4,"span"),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Sb(7,"div",13),c.Nb(8,"fa-icon",14),c.Rb(),c.Rb(),c.Sb(9,"div",15),c.Sb(10,"div",16),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Title")}),c.Lc(11," \xa0 "),c.Nb(12,"fa-icon",17),c.Lc(13),c.hc(14,"translate"),c.Jc(15,QU,1,0,"fa-icon",18),c.Rb(),c.Sb(16,"div",19),c.Sb(17,"div",20),c.Sb(18,"label",21),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Sb(21,"input",22,23),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Code")}),c.Rb(),c.Jc(23,WU,1,0,"ng-container",24),c.Rb(),c.Sb(24,"div",20),c.Sb(25,"label",25),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Sb(28,"input",26,27),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TitleSingular=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"TitleSingular")}),c.Rb(),c.Jc(30,GU,1,0,"ng-container",24),c.Rb(),c.Jc(31,eK,7,13,"div",28),c.Jc(32,nK,7,13,"div",28),c.Sb(33,"div",20),c.Sb(34,"label",29),c.Lc(35),c.hc(36,"translate"),c.Rb(),c.Sb(37,"input",30,31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TitlePlural=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"TitlePlural")}),c.Rb(),c.Jc(39,iK,1,0,"ng-container",24),c.Rb(),c.Jc(40,oK,7,13,"div",28),c.Jc(41,sK,7,13,"div",28),c.Rb(),c.Sb(42,"div",16),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Reports")}),c.Lc(43," \xa0 "),c.Nb(44,"fa-icon",17),c.Lc(45),c.hc(46,"translate"),c.Jc(47,lK,1,0,"fa-icon",18),c.Rb(),c.Sb(48,"div",19),c.Sb(49,"div",20),c.Sb(50,"label",32),c.Lc(51),c.hc(52,"translate"),c.Rb(),c.Lc(53,"\xa0 "),c.Sb(54,"button",33),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateReportDefinition(t)}),c.hc(55,"translate"),c.Nb(56,"fa-icon",34),c.Rb(),c.Sb(57,"div",35),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().rowDrop(t,n.ReportDefinitions)}),c.Jc(58,dK,13,8,"div",36),c.Rb(),c.Jc(59,bK,2,1,"span",37),c.Rb(),c.Rb(),c.Sb(60,"div",16),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Menu")}),c.Lc(61," \xa0 "),c.Nb(62,"fa-icon",17),c.Lc(63),c.hc(64,"translate"),c.Jc(65,gK,1,0,"fa-icon",18),c.Rb(),c.Sb(66,"div",19),c.Sb(67,"div",20),c.Sb(68,"label",38),c.Lc(69),c.hc(70,"translate"),c.Rb(),c.Sb(71,"select",39,40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.MainMenuSection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"MainMenuSection")}),c.Nb(73,"option",41),c.Jc(74,fK,2,2,"option",42),c.Rb(),c.Jc(75,mK,1,0,"ng-container",24),c.Rb(),c.Sb(76,"div",20),c.Sb(77,"label",43),c.Lc(78),c.hc(79,"translate"),c.Rb(),c.Sb(80,"div",44),c.Jc(81,hK,2,4,"div",45),c.Rb(),c.Jc(82,pK,1,0,"ng-container",24),c.Rb(),c.Sb(83,"div",20),c.Sb(84,"label",46),c.Lc(85),c.hc(86,"translate"),c.Rb(),c.Sb(87,"input",47,48),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.MainMenuSortKey=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"MainMenuSortKey")}),c.Rb(),c.Jc(89,SK,1,0,"ng-container",24),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(90,"div",49),c.Sb(91,"div",50),c.Sb(92,"div",51),c.Sb(93,"span"),c.Lc(94),c.hc(95,"translate"),c.Rb(),c.Rb(),c.Jc(96,vK,13,21,"div",52),c.Rb(),c.Sb(97,"div",53),c.Nb(98,"t-lookups-details",54),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(22),t=c.Ac(29),n=c.Ac(38),i=c.Ac(72),o=c.Ac(88),r=c.gc(),s=r.isEdit,l=r.model,a=c.gc(),u=c.Ac(13);c.zb(1),c.nc("ngIf",s&&a.collapseDefinition),c.zb(1),c.Eb("d-flex",s&&!a.collapseDefinition)("d-none",!s||a.collapseDefinition),c.zb(3),c.Mc(c.ic(6,71,"Definition")),c.zb(3),c.nc("flip",a.flipIcon(!1)),c.zb(4),c.nc("flip",a.flipIcon(a.showSection("Title")))("rotate",a.rotateIcon(a.showSection("Title"))),c.zb(1),c.Nc(" \xa0 ",c.ic(14,73,"Title")," "),c.zb(2),c.nc("ngIf",a.sectionErrors("Title",l)),c.zb(1),c.Eb("d-none",!a.showSection("Title")),c.zb(1),c.Eb("is-invalid",a.invalid(e,null==l.serverErrors?null:l.serverErrors.Code)),c.zb(2),c.Mc(c.ic(20,75,"Code")),c.zb(2),c.nc("ngModel",l.Code)("ngModelOptions",c.qc(97,XU)),c.zb(2),c.nc("ngTemplateOutlet",u)("ngTemplateOutletContext",c.sc(98,ZU,e,null==l.serverErrors?null:l.serverErrors.Code)),c.zb(1),c.Eb("is-invalid",a.invalid(t,null==l.serverErrors?null:l.serverErrors.TitleSingular)),c.zb(2),c.Mc(c.ic(27,77,"TitleSingular")+a.ws.primaryPostfix),c.zb(2),c.nc("ngModel",l.TitleSingular)("ngModelOptions",c.qc(101,XU)),c.zb(2),c.nc("ngTemplateOutlet",u)("ngTemplateOutletContext",c.sc(102,ZU,t,null==l.serverErrors?null:l.serverErrors.TitleSingular)),c.zb(1),c.nc("ngIf",null==a.ws.settings?null:a.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==a.ws.settings?null:a.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("is-invalid",a.invalid(n,null==l.serverErrors?null:l.serverErrors.TitlePlural)),c.zb(2),c.Mc(c.ic(36,79,"TitlePlural")+a.ws.primaryPostfix),c.zb(2),c.nc("ngModel",l.TitlePlural)("ngModelOptions",c.qc(105,XU)),c.zb(2),c.nc("ngTemplateOutlet",u)("ngTemplateOutletContext",c.sc(106,ZU,n,null==l.serverErrors?null:l.serverErrors.TitlePlural)),c.zb(1),c.nc("ngIf",null==a.ws.settings?null:a.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==a.ws.settings?null:a.ws.settings.TernaryLanguageId),c.zb(3),c.nc("flip",a.flipIcon(a.showSection("Reports")))("rotate",a.rotateIcon(a.showSection("Reports"))),c.zb(1),c.Nc(" \xa0 ",c.ic(46,81,"Reports")," "),c.zb(2),c.nc("ngIf",a.sectionErrors("Reports",l)),c.zb(1),c.Eb("d-none",!a.showSection("Reports")),c.zb(3),c.Mc(c.ic(52,83,"Definition_ReportDefinitions")),c.zb(3),c.nc("title",c.ic(55,85,"Create")),c.zb(4),c.nc("ngForOf",l.ReportDefinitions),c.zb(1),c.nc("ngForOf",null==l.serverErrors?null:l.serverErrors.ReportDefinitions),c.zb(3),c.nc("flip",a.flipIcon(a.showSection("Menu")))("rotate",a.rotateIcon(a.showSection("Menu"))),c.zb(1),c.Nc(" \xa0 ",c.ic(64,87,"Menu")," "),c.zb(2),c.nc("ngIf",a.sectionErrors("Menu",l)),c.zb(1),c.Eb("d-none",!a.showSection("Menu")),c.zb(3),c.Mc(c.ic(70,89,"MainMenuSection")),c.zb(2),c.nc("ngModel",l.MainMenuSection),c.zb(3),c.nc("ngForOf",a.allMainMenuSections),c.zb(1),c.nc("ngTemplateOutlet",u)("ngTemplateOutletContext",c.sc(109,ZU,i,null==l.serverErrors?null:l.serverErrors.MainMenuSection)),c.zb(3),c.Mc(c.ic(79,91,"MainMenuIcon")),c.zb(3),c.nc("ngForOf",a.allMainMenuIcons),c.zb(1),c.nc("ngTemplateOutlet",u)("ngTemplateOutletContext",c.rc(112,IK,null==l.serverErrors?null:l.serverErrors.MainMenuIcon)),c.zb(3),c.Mc(c.ic(86,93,"MainMenuSortKey")),c.zb(2),c.nc("ngModel",l.MainMenuSortKey)("ngModelOptions",c.qc(114,XU)),c.zb(2),c.nc("ngTemplateOutlet",u)("ngTemplateOutletContext",c.sc(115,ZU,o,null==l.serverErrors?null:l.serverErrors.MainMenuSortKey)),c.zb(5),c.Mc(c.ic(95,95,"Preview")),c.zb(2),c.nc("ngIf",!s),c.zb(2),c.nc("previewDefinition",a.getForClient(l))}}function RK(e,t){if(1&e&&c.Jc(0,MK,99,118,"div",8),2&e){const e=t.isEdit,n=c.gc();c.nc("ngIf",n.watchIsEdit(e))}}function yK(e,t){if(1&e&&(c.Sb(0,"span",87),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e()," ")}}function DK(e,t){if(1&e&&(c.Qb(0),c.Jc(1,yK,2,1,"span",86),c.Pb()),2&e){const e=c.gc(),t=e.control,n=e.serverErrors,i=c.gc();c.zb(1),c.nc("ngForOf",i.errors(t,n))}}function wK(e,t){if(1&e&&c.Jc(0,DK,2,1,"ng-container",85),2&e){const e=t.control,n=t.serverErrors,i=c.gc();c.nc("ngIf",i.invalid(e,n))}}function EK(e,t){1&e&&c.Ob(0)}function CK(e,t){1&e&&c.Ob(0)}function xK(e,t){1&e&&c.Ob(0)}function TK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",94),c.Sb(1,"label",105),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",106,107),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).reportDefinitionToEdit.Name2=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onItemToEditChange()}),c.Rb(),c.Jc(6,xK,1,0,"ng-container",24),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(13);c.Eb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2)),c.zb(2),c.Mc(c.ic(3,7,"Name")+t.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.reportDefinitionToEdit.Name2)("ngModelOptions",c.qc(9,XU)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(10,ZU,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2))}}function zK(e,t){1&e&&c.Ob(0)}function LK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",94),c.Sb(1,"label",108),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",109,110),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).reportDefinitionToEdit.Name3=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onItemToEditChange()}),c.Rb(),c.Jc(6,zK,1,0,"ng-container",24),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(13);c.Eb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3)),c.zb(2),c.Mc(c.ic(3,7,"Name")+t.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.reportDefinitionToEdit.Name3)("ngModelOptions",c.qc(9,XU)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(10,ZU,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3))}}function kK(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",88),c.Sb(1,"h5",89),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",90),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",91),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",92),c.Sb(8,"div",93),c.Sb(9,"div",94),c.Sb(10,"label",32),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"t-report-definitions-picker",95,96),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().reportDefinitionToEdit.ReportDefinitionId=t})("ngModelChange",function(){return c.Dc(e),c.gc().onItemToEditChange()}),c.Rb(),c.Jc(15,EK,1,0,"ng-container",24),c.Rb(),c.Sb(16,"div",94),c.Sb(17,"label",97),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Sb(20,"input",98,99),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().reportDefinitionToEdit.Name=t})("ngModelChange",function(){return c.Dc(e),c.gc().onItemToEditChange()}),c.Rb(),c.Jc(22,CK,1,0,"ng-container",24),c.Rb(),c.Jc(23,TK,7,13,"div",100),c.Jc(24,LK,7,13,"div",100),c.Rb(),c.Rb(),c.Sb(25,"div",101),c.Sb(26,"button",102),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(27,"fa-icon",103),c.Lc(28),c.hc(29,"translate"),c.Rb(),c.Sb(30,"button",104),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(31,"fa-icon",75),c.Lc(32),c.hc(33,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(14),t=c.Ac(21),n=c.gc(),i=c.Ac(13);c.zb(2),c.Nc(" ",c.ic(3,19,"Configure")," "),c.zb(7),c.Eb("is-invalid",n.invalid(e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),c.zb(2),c.Mc(c.ic(12,21,"Definition_ReportDefinition")),c.zb(2),c.nc("ngModel",n.reportDefinitionToEdit.ReportDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(29,ZU,e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),c.zb(1),c.Eb("is-invalid",n.invalid(t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),c.zb(2),c.Mc(c.ic(19,23,"Name")+n.ws.primaryPostfix),c.zb(2),c.nc("ngModel",n.reportDefinitionToEdit.Name)("ngModelOptions",c.qc(32,XU)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(33,ZU,t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),c.zb(2),c.nc("disabled",!n.reportDefinitionToEdit.ReportDefinitionId),c.zb(2),c.Nc(" \xa0",c.ic(29,25,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(33,27,"Cancel")," ")}}const OK=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},AK=function(e,t,n){return[e,t,n]};let NK=(()=>{class e extends mn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.lookupDefinitionsApi=this.api.lookupDefinitionsApi(this.notifyDestruct$),this.expand="ReportDefinitions.ReportDefinition",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText),e.ReportDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this._sections={Title:!0,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.lookupDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.lookupDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.lookupDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("lookup-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.lookupDefinitionsApi=this.api.lookupDefinitionsApi(this.notifyDestruct$)}allVisibilityProps(){const e=Object(JU.a)(this.workspace,this.translate).properties,t=[];for(const n of Object.keys(e))n.endsWith("Visibility")&&t.push(n);return t}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(Qp.b)(e.serverErrors[t]))}sectionErrors(e,t){return"Title"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.Code)||Object(Qp.b)(t.serverErrors.TitleSingular)||Object(Qp.b)(t.serverErrors.TitleSingular2)||Object(Qp.b)(t.serverErrors.TitleSingular3)||Object(Qp.b)(t.serverErrors.TitlePlural)||Object(Qp.b)(t.serverErrors.TitlePlural2)||Object(Qp.b)(t.serverErrors.TitlePlural3)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.MainMenuIcon)||Object(Qp.b)(t.serverErrors.MainMenuSection)||Object(Qp.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(Qp.c)(e,t)}errors(e,t){return Object(Qp.d)(e,t,this.translate)}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e)),this._getForClientResult):null}get allMainMenuSections(){const e=Object(JU.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Mi.c)(e)}get allMainMenuIcons(){const e=Object(JU.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Mi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateReportDefinition(e){const t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&e.ReportDefinitions.push(t)},e=>{})}onConfigureReportDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=n,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.ReportDefinitions[e]=n)},e=>{})}onDeleteReportDefinition(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}rowDrop(e,t){Object(j.h)(t,e.previousIndex,e.currentIndex)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-lookup-definitions-details"]],viewQuery:function(e,t){if(1&e&&c.Qc(jU,3),2&e){let e;c.zc(e=c.dc())&&(t.reportDefinitionModal=e.first)}},features:[c.wb],decls:16,vars:35,consts:[["collection","LookupDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[3,"value"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],[4,"ngIf"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,$U,2,3,"ng-template",null,1,c.Kc),c.Jc(4,UU,2,3,"ng-template",null,2,c.Kc),c.Jc(6,KU,2,3,"ng-template",null,3,c.Kc),c.Jc(8,BU,3,3,"ng-template",null,4,c.Kc),c.Jc(10,RK,1,1,"ng-template",null,5,c.Kc),c.Jc(12,wK,1,1,"ng-template",null,6,c.Kc),c.Jc(14,kK,34,36,"ng-template",null,7,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,11,"LookupDefinitions"))("detailsCrumb",o)("idString",t.idString)("documentTemplate",r)("actions",c.tc(31,AK,c.vc(13,OK,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),c.vc(19,OK,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),c.vc(25,OK,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)}},directives:[q.a,C.l,ee.a,te.c,te.m,te.i,te.j,C.p,j.f,C.k,te.n,te.k,te.o,te.l,Id,j.b,j.d,VU],pipes:[K.c],encapsulation:2}),e})();function _K(e,t){if(1&e&&(c.Sb(0,"div",11),c.Sb(1,"span",12),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",13),c.Sb(4,"div",14),c.Nb(5,"t-auto-cell",15),c.Rb(),c.Nb(6,"t-auto-cell",16),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("LookupDefinition",e,"TitleSingular")),c.zb(3),c.nc("entity",n.c[e]),c.zb(1),c.nc("entity",n.c[e])}}function JK(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"LookupDefinition"),"\n")}function PK(e,t){if(1&e&&(c.Sb(0,"span",17),c.Nb(1,"t-auto-cell",18),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function FK(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"SavedByMe")," ")}function VK(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Hidden")," ")}function qK(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Visible")," ")}function jK(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Archived")," ")}function $K(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Hide")," ")}function UK(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Show")," ")}function KK(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Archive")," ")}const BK=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},HK=function(e,t,n){return[e,t,n]},QK=function(e){return{template:e,expression:"SavedById eq me"}},WK=function(e){return[e]},GK=function(e){return{template:e,expression:"State eq 'Hidden'"}},YK=function(e){return{template:e,expression:"State eq 'Visible'"}},XK=function(e){return{template:e,expression:"State eq 'Archived'"}},ZK=function(e,t){return{SavedBy:e,State:t}};let eB=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.lookupsDefinitionsApi=this.api.lookupDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.lookupsDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("LookupDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.lookupsDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("LookupDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.lookupsDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("LookupDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("lookup-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.lookupsDefinitionsApi=this.api.lookupDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.LookupDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-lookup-definitions-master"]],features:[c.wb],decls:22,vars:51,consts:[["collection","LookupDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","LookupDefinition","path","Code",3,"entity"],["collection","LookupDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","LookupDefinition",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,_K,7,3,"ng-template",null,1,c.Kc),c.Jc(4,JK,2,3,"ng-template",null,2,c.Kc),c.Jc(6,PK,2,1,"ng-template",null,3,c.Kc),c.Jc(8,FK,2,3,"ng-template",null,4,c.Kc),c.Jc(10,VK,2,3,"ng-template",null,5,c.Kc),c.Jc(12,qK,2,3,"ng-template",null,6,c.Kc),c.Jc(14,jK,2,3,"ng-template",null,7,c.Kc),c.Jc(16,$K,2,3,"ng-template",null,8,c.Kc),c.Jc(18,UK,2,3,"ng-template",null,9,c.Kc),c.Jc(20,KK,2,3,"ng-template",null,10,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13),l=c.Ac(15),a=c.Ac(17),u=c.Ac(19),d=c.Ac(21);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"LookupDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.tc(30,HK,c.vc(12,BK,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),c.vc(18,BK,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),c.vc(24,BK,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",c.sc(48,ZK,c.rc(36,WK,c.rc(34,QK,o)),c.tc(44,HK,c.rc(38,GK,r),c.rc(40,YK,s),c.rc(42,XK,l))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();function tB(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-lookup-definitions-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function nB(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-lookup-definitions-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let iB=(()=>{class e extends Js{}return e.\u0275fac=function(t){return cB(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-lookup-definitions-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","LookupDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,tB,2,3,"ng-template",null,1,c.Kc),c.Jc(3,nB,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,NK,eB],encapsulation:2}),e})();const cB=c.Ub(iB);var oB=n("Dud/"),rB=n("Sjg+"),sB=n("XnBY");const lB=["Memo","PostingDate","Boolean1","Decimal1","Text1","AccountId","CurrencyId","CustodianId","RelationId","ResourceId","NotedRelationId","CenterId","EntryTypeId","MonetaryValue","Quantity","UnitId","Time1","Duration","DurationUnitId","Time2","Value","ExternalReference","ReferenceSourceId","InternalReference","NotedAgentName","NotedAmount","NotedDate"],aB=["ByRole","ByCustodian","ByUser","Public"],uB=["ValueGreaterOrEqual"],dB=["lineDefinitionEntryModal"],bB=["controlOptions"];function gB(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"TitlePlural",n.ws))}}function fB(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function mB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(e.TitlePlural)}}function hB(e,t){1&e&&c.Ob(0)}const pB=function(){return{updateOn:"blur"}},SB=function(e,t){return{control:e,serverErrors:t}};function vB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",42,43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural=t}),c.Rb(),c.Jc(2,hB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.TitlePlural)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.TitlePlural))}}function IB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(e.TitlePlural2)}}function MB(e,t){1&e&&c.Ob(0)}function RB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",47,48),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.TitlePlural2=t}),c.Rb(),c.Jc(2,MB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.TitlePlural2)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function yB(e,t){if(1&e&&(c.Sb(0,"div",28),c.Sb(1,"label",45),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,IB,2,1,"div",30),c.Jc(5,RB,3,8,"ng-template",null,46,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc(2).isEdit,n=c.gc();c.zb(2),c.Mc(c.ic(3,3,"TitlePlural")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngIf",!t)("ngIfElse",e)}}function DB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(e.TitlePlural3)}}function wB(e,t){1&e&&c.Ob(0)}function EB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",51,52),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.TitlePlural3=t}),c.Rb(),c.Jc(2,wB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.TitlePlural3)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function CB(e,t){if(1&e&&(c.Sb(0,"div",28),c.Sb(1,"label",49),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,DB,2,1,"div",30),c.Jc(5,EB,3,8,"ng-template",null,50,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc(2).isEdit,n=c.gc();c.zb(2),c.Mc(c.ic(3,3,"TitlePlural")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngIf",!t)("ngIfElse",e)}}function xB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(e.TitleSingular)}}function TB(e,t){1&e&&c.Ob(0)}function zB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",53,54),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular=t}),c.Rb(),c.Jc(2,TB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.TitleSingular)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.TitleSingular))}}function LB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(e.TitleSingular2)}}function kB(e,t){1&e&&c.Ob(0)}function OB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",57,58),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.TitleSingular2=t}),c.Rb(),c.Jc(2,kB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.TitleSingular2)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function AB(e,t){if(1&e&&(c.Sb(0,"div",28),c.Sb(1,"label",55),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,LB,2,1,"div",30),c.Jc(5,OB,3,8,"ng-template",null,56,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc(2).isEdit,n=c.gc();c.zb(2),c.Mc(c.ic(3,3,"TitleSingular")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngIf",!t)("ngIfElse",e)}}function NB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(e.TitleSingular3)}}function _B(e,t){1&e&&c.Ob(0)}function JB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",61,62),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.TitleSingular3=t}),c.Rb(),c.Jc(2,_B,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.TitleSingular3)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function PB(e,t){if(1&e&&(c.Sb(0,"div",28),c.Sb(1,"label",59),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,NB,2,1,"div",30),c.Jc(5,JB,3,8,"ng-template",null,60,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc(2).isEdit,n=c.gc();c.zb(2),c.Mc(c.ic(3,3,"TitleSingular")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngIf",!t)("ngIfElse",e)}}function FB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(e.Code)}}function VB(e,t){1&e&&c.Ob(0)}function qB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",63,64),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Code=t}),c.Rb(),c.Jc(2,VB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.Code)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Code))}}function jB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Nc(" ",c.ic(2,1,e.ViewDefaultsToForm?"Yes":"No"),"")}}function $B(e,t){1&e&&c.Ob(0)}function UB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,66),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ViewDefaultsToForm=t}),c.Sb(2,"option",67),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"option",68),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Jc(8,$B,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.ViewDefaultsToForm),c.zb(3),c.Nc(" ",c.ic(4,5,"Yes"),""),c.zb(3),c.Nc(" ",c.ic(7,7,"No"),""),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(9,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.ViewDefaultsToForm))}}function KB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Mc(e.Description)}}function BB(e,t){1&e&&c.Ob(0)}function HB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"textarea",69,70),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description=t}),c.Rb(),c.Jc(2,BB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.Description)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Description))}}function QB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(e.Description2)}}function WB(e,t){1&e&&c.Ob(0)}function GB(e,t){if(1&e){const e=c.Tb();c.Sb(0,"textarea",73,74),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Description2=t}),c.Rb(),c.Jc(2,WB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.Description2)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Description2))}}function YB(e,t){if(1&e&&(c.Sb(0,"div",28),c.Sb(1,"label",71),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,QB,2,1,"div",30),c.Jc(5,GB,3,8,"ng-template",null,72,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc(2).isEdit,n=c.gc();c.zb(2),c.Mc(c.ic(3,3,"Description")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngIf",!t)("ngIfElse",e)}}function XB(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(e.Description3)}}function ZB(e,t){1&e&&c.Ob(0)}function eH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"textarea",77,78),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Description3=t}),c.Rb(),c.Jc(2,ZB,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.Description3)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Description3))}}function tH(e,t){if(1&e&&(c.Sb(0,"div",28),c.Sb(1,"label",75),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,XB,2,1,"div",30),c.Jc(5,eH,3,8,"ng-template",null,76,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc(2).isEdit,n=c.gc();c.zb(2),c.Mc(c.ic(3,3,"Description")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngIf",!t)("ngIfElse",e)}}function nH(e,t){if(1&e&&(c.Sb(0,"div",27),c.Sb(1,"div",28),c.Sb(2,"label",29),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Jc(5,mB,2,1,"div",30),c.Jc(6,vB,3,8,"ng-template",null,31,c.Kc),c.Rb(),c.Jc(8,yB,7,5,"div",32),c.Jc(9,CB,7,5,"div",32),c.Sb(10,"div",28),c.Sb(11,"label",33),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Jc(14,xB,2,1,"div",30),c.Jc(15,zB,3,8,"ng-template",null,34,c.Kc),c.Rb(),c.Jc(17,AB,7,5,"div",32),c.Jc(18,PB,7,5,"div",32),c.Sb(19,"div",28),c.Sb(20,"label",35),c.Lc(21),c.hc(22,"translate"),c.Rb(),c.Jc(23,FB,2,1,"div",30),c.Jc(24,qB,3,8,"ng-template",null,36,c.Kc),c.Rb(),c.Sb(26,"div",28),c.Sb(27,"label",37),c.Lc(28),c.hc(29,"translate"),c.Rb(),c.Jc(30,jB,3,3,"div",30),c.Jc(31,UB,9,12,"ng-template",null,38,c.Kc),c.Rb(),c.Nb(33,"div",39),c.Sb(34,"div",28),c.Sb(35,"label",40),c.Lc(36),c.hc(37,"translate"),c.Rb(),c.Jc(38,KB,2,1,"div",30),c.Jc(39,HB,3,8,"ng-template",null,41,c.Kc),c.Rb(),c.Jc(41,YB,7,5,"div",32),c.Jc(42,tH,7,5,"div",32),c.Rb()),2&e){const e=c.Ac(7),t=c.Ac(16),n=c.Ac(25),i=c.Ac(32),o=c.Ac(40),r=c.gc().isEdit,s=c.gc();c.zb(3),c.Mc(c.ic(4,21,"TitlePlural")+s.ws.primaryPostfix),c.zb(2),c.nc("ngIf",!r)("ngIfElse",e),c.zb(3),c.nc("ngIf",s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",s.ws.settings.TernaryLanguageId),c.zb(3),c.Mc(c.ic(13,23,"TitleSingular")+s.ws.primaryPostfix),c.zb(2),c.nc("ngIf",!r)("ngIfElse",t),c.zb(3),c.nc("ngIf",s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",s.ws.settings.TernaryLanguageId),c.zb(3),c.Mc(c.ic(22,25,"Code")),c.zb(2),c.nc("ngIf",!r)("ngIfElse",n),c.zb(5),c.Mc(c.ic(29,27,"LineDefinition_ViewDefaultsToForm")),c.zb(2),c.nc("ngIf",!r)("ngIfElse",i),c.zb(6),c.Mc(c.ic(37,29,"Description")+s.ws.primaryPostfix),c.zb(2),c.nc("ngIf",!r)("ngIfElse",o),c.zb(3),c.nc("ngIf",s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",s.ws.settings.TernaryLanguageId)}}function iH(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function cH(e,t){1&e&&c.Nb(0,"th",83)}function oH(e,t){1&e&&c.Nb(0,"th",83)}function rH(e,t){1&e&&(c.Qb(0),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Pb())}function sH(e,t){1&e&&(c.Sb(0,"div",98),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"LineDefinitionEntry"),""))}function lH(e,t){1&e&&(c.Sb(0,"td",99),c.Nb(1,"fa-icon",100),c.Rb())}function aH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.directionDisplay(e.Direction))}}function uH(e,t){1&e&&c.Ob(0)}function dH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,101),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Direction=t}),c.Sb(2,"option",102),c.Lc(3),c.Rb(),c.Sb(4,"option",103),c.Lc(5),c.Rb(),c.Rb(),c.Jc(6,uH,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(3),i=c.Ac(11);c.nc("ngModel",t.Direction),c.zb(3),c.Nc(" ",n.directionDisplay(1),""),c.zb(2),c.Nc(" ",n.directionDisplay(-1),""),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Direction))}}function bH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.ws.getMultilingualValue("AccountType",e.ParentAccountTypeId,"Name"))}}function gH(e,t){1&e&&c.Ob(0)}function fH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-types-picker",104,105),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.ParentAccountTypeId=t}),c.Rb(),c.Jc(2,gH,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.ParentAccountTypeId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.ParentAccountTypeId))}}function mH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.ws.getMultilingualValue("EntryType",e.EntryTypeId,"Name"))}}function hH(e,t){1&e&&c.Ob(0)}function pH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",104,106),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.EntryTypeId=t}),c.Rb(),c.Jc(2,hH,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.EntryTypeId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.EntryTypeId))}}function SH(e,t){1&e&&(c.Sb(0,"span",107),c.Lc(1," \xa0"),c.Nb(2,"fa-icon",26),c.Rb())}function vH(e,t){1&e&&(c.Sb(0,"span",107),c.Lc(1," \xa0"),c.Nb(2,"fa-icon",26),c.Rb())}function IH(e,t){1&e&&(c.Sb(0,"span",107),c.Lc(1," \xa0"),c.Nb(2,"fa-icon",26),c.Rb())}function MH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td"),c.Sb(1,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(2).model;return c.gc().onDeleteRow(t,n.Entries)}),c.Nb(2,"fa-icon",109),c.Rb(),c.Rb()}}function RH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr",88),c.Jc(1,rH,3,0,"ng-container",89),c.Jc(2,sH,3,3,"div",90),c.Jc(3,lH,2,0,"td",91),c.Sb(4,"td"),c.Lc(5),c.Rb(),c.Sb(6,"td"),c.Jc(7,aH,2,1,"span",30),c.Jc(8,dH,7,8,"ng-template",null,92,c.Kc),c.Rb(),c.Sb(10,"td"),c.Jc(11,bH,2,1,"span",30),c.Jc(12,fH,3,6,"ng-template",null,93,c.Kc),c.Rb(),c.Sb(14,"td"),c.Jc(15,mH,2,1,"span",30),c.Jc(16,pH,3,6,"ng-template",null,94,c.Kc),c.Rb(),c.Sb(18,"td"),c.Sb(19,"button",95),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.index,o=c.gc(2).isEdit;return c.gc().onLineDefinitionEntryRelationDefinitions(n,o,i)}),c.Lc(20),c.Rb(),c.Jc(21,SH,3,0,"span",96),c.Rb(),c.Sb(22,"td"),c.Sb(23,"button",95),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.index,o=c.gc(2).isEdit;return c.gc().onLineDefinitionEntryResourceDefinitions(n,o,i)}),c.Lc(24),c.Rb(),c.Jc(25,vH,3,0,"span",96),c.Rb(),c.Sb(26,"td"),c.Sb(27,"button",95),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=t.index,o=c.gc(2).isEdit;return c.gc().onLineDefinitionEntryNotedRelationDefinitions(n,o,i)}),c.Lc(28),c.Rb(),c.Jc(29,IH,3,0,"span",96),c.Rb(),c.Jc(30,MH,3,0,"td",97),c.Rb()}if(2&e){const e=t.$implicit,n=t.index,i=c.Ac(9),o=c.Ac(13),r=c.Ac(17),s=c.gc(2).isEdit,l=c.gc();c.zb(3),c.nc("ngIf",s),c.zb(2),c.Nc(" ",n," "),c.zb(1),c.Eb("p-0",s),c.zb(1),c.nc("ngIf",!s)("ngIfElse",i),c.zb(3),c.Eb("p-0",s),c.zb(1),c.nc("ngIf",!s)("ngIfElse",o),c.zb(3),c.Eb("p-0",s),c.zb(1),c.nc("ngIf",!s)("ngIfElse",r),c.zb(3),c.Eb("p-0",s),c.zb(2),c.Mc((null==e.RelationDefinitions?null:e.RelationDefinitions.length)||0),c.zb(1),c.nc("ngIf",l.showRelationDefinitionsError(e)),c.zb(1),c.Eb("p-0",s),c.zb(2),c.Mc((null==e.ResourceDefinitions?null:e.ResourceDefinitions.length)||0),c.zb(1),c.nc("ngIf",l.showResourceDefinitionsError(e)),c.zb(1),c.Eb("p-0",s),c.zb(2),c.Mc((null==e.NotedRelationDefinitions?null:e.NotedRelationDefinitions.length)||0),c.zb(1),c.nc("ngIf",l.showNotedRelationDefinitionsError(e)),c.zb(1),c.nc("ngIf",s)}}function yH(e,t){1&e&&(c.Sb(0,"div",110),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function DH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",111),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model,n=c.gc();return n.onInsertRow(t.Entries,n.createEntry)}),c.Nb(1,"fa-icon",112),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function wH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",79),c.Sb(1,"table",80),c.Sb(2,"thead",81),c.Sb(3,"tr"),c.Jc(4,cH,1,0,"th",82),c.Sb(5,"th",83),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Sb(8,"th"),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Sb(11,"th"),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Sb(14,"th"),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Sb(17,"th"),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Sb(20,"th"),c.Lc(21),c.hc(22,"translate"),c.Rb(),c.Sb(23,"th"),c.Lc(24),c.hc(25,"translate"),c.Rb(),c.Jc(26,oH,1,0,"th",82),c.Rb(),c.Rb(),c.Sb(27,"tbody",84),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().rowDrop(t,n.Entries)}),c.Jc(28,RH,31,27,"tr",85),c.Rb(),c.Rb(),c.Jc(29,yH,3,3,"div",86),c.Jc(30,DH,4,3,"button",87),c.Rb()}if(2&e){const e=c.gc(),t=e.isEdit,n=e.model;c.zb(4),c.nc("ngIf",t),c.zb(2),c.Nc("",c.ic(7,13,"LineDefinitionColumn_EntryIndex")," "),c.zb(3),c.Nc("",c.ic(10,15,"LineDefinitionEntry_Direction")," "),c.zb(3),c.Nc("",c.ic(13,17,"LineDefinitionEntry_ParentAccountType")," "),c.zb(3),c.Nc("",c.ic(16,19,"LineDefinitionEntry_EntryType")," "),c.zb(3),c.Mc(c.ic(19,21,"LineDefinitionEntry_RelationDefinitions")),c.zb(3),c.Mc(c.ic(22,23,"LineDefinitionEntry_ResourceDefinitions")),c.zb(3),c.Mc(c.ic(25,25,"LineDefinitionEntry_NotedRelationDefinitions")),c.zb(2),c.nc("ngIf",t),c.zb(1),c.nc("cdkDropListDisabled",!t),c.zb(1),c.nc("ngForOf",n.Entries),c.zb(1),c.nc("ngIf",!t&&0===(null==n.Entries?null:n.Entries.length)),c.zb(1),c.nc("ngIf",t)}}function EH(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function CH(e,t){1&e&&c.Nb(0,"th",83)}function xH(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.Nc(" ",c.ic(2,1,"Label")+e.ws.secondaryPostfix," ")}}function TH(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.Nc(" ",c.ic(2,1,"Label")+e.ws.ternaryPostfix," ")}}function zH(e,t){1&e&&c.Nb(0,"th",83)}function LH(e,t){1&e&&(c.Qb(0),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Pb())}function kH(e,t){if(1&e&&(c.Sb(0,"div",98),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Nc(" ",t.ws.getMultilingualValueImmediate(e,"Label"),"")}}function OH(e,t){1&e&&(c.Sb(0,"td",99),c.Nb(1,"fa-icon",100),c.Rb())}function AH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.columnNameDisplay(e.ColumnName))}}function NH(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function _H(e,t){1&e&&c.Ob(0)}function JH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,122),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.ColumnName=t})("ngModelChange",function(){return c.Dc(e),c.gc(4).choicesBarcodeColumnIndexChanged=!0}),c.Jc(2,NH,2,2,"option",123),c.Rb(),c.Jc(3,_H,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(3),i=c.Ac(11);c.nc("ngModel",t.ColumnName),c.zb(2),c.nc("ngForOf",n.columnNameChoices),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.ColumnName))}}function PH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Mc(e.EntryIndex)}}function FH(e,t){1&e&&c.Ob(0)}function VH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",125,126),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.EntryIndex=t}),c.Rb(),c.Jc(2,FH,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.EntryIndex)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.EntryIndex))}}function qH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Mc(e.Label)}}function jH(e,t){1&e&&c.Ob(0)}function $H(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,128),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Label=t})("ngModelChange",function(){return c.Dc(e),c.gc(4).choicesBarcodeColumnIndexChanged=!0}),c.Rb(),c.Jc(2,jH,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Label)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Label))}}function UH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Mc(e.Label2)}}function KH(e,t){1&e&&c.Ob(0)}function BH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,130),c.cc("ngModelChange",function(){return c.Dc(e),c.gc(5).choicesBarcodeColumnIndexChanged=!0})("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.Label2=t}),c.Rb(),c.Jc(2,KH,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Label2)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Label2))}}function HH(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,UH,2,1,"span",30),c.Jc(2,BH,3,8,"ng-template",null,129,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(3).isEdit;c.Eb("p-0",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function QH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Mc(e.Label3)}}function WH(e,t){1&e&&c.Ob(0)}function GH(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,132),c.cc("ngModelChange",function(){return c.Dc(e),c.gc(5).choicesBarcodeColumnIndexChanged=!0})("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.Label3=t}),c.Rb(),c.Jc(2,WH,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Label3)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Label3))}}function YH(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,QH,2,1,"span",30),c.Jc(2,GH,3,8,"ng-template",null,131,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(3).isEdit;c.Eb("p-0",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function XH(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Mc(e.Filter)}}function ZH(e,t){1&e&&c.Ob(0)}function eQ(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"input",127,134),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.Filter=t}),c.Rb(),c.Jc(3,ZH,1,0,"ng-container",44),c.Pb()}if(2&e){const e=c.Ac(2),t=c.gc(2).$implicit;c.gc(3);const n=c.Ac(11);c.zb(1),c.nc("ngModel",t.Filter)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Filter))}}function tQ(e,t){1&e&&c.Nb(0,"span")}function nQ(e,t){if(1&e&&(c.Jc(0,eQ,4,8,"ng-container",30),c.Jc(1,tQ,1,0,"ng-template",null,133,c.Kc)),2&e){const e=c.Ac(2),t=c.gc().$implicit,n=c.gc(3);c.nc("ngIf",n.canFilter(t))("ngIfElse",e)}}function iQ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit,t=c.gc(3);c.zb(1),c.Mc(t.stateDisplay(e.VisibleState))}}function cQ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(5);c.zb(1),c.Mc(e.stateDisplay(0))}}function oQ(e,t){if(1&e&&(c.Qb(0),c.Jc(1,iQ,2,1,"span",97),c.Jc(2,cQ,2,1,"span",97),c.Pb()),2&e){const e=c.gc().$implicit,t=c.gc(2).isEdit,n=c.gc();c.zb(1),c.nc("ngIf",!t&&!n.isRequiredColumn(e)),c.zb(1),c.nc("ngIf",n.isRequiredColumn(e))}}function rQ(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function sQ(e,t){1&e&&c.Ob(0)}function lQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,135),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.VisibleState=t}),c.Jc(2,rQ,2,2,"option",123),c.Rb(),c.Jc(3,sQ,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(3),i=c.Ac(11);c.nc("ngModel",t.VisibleState),c.zb(2),c.nc("ngForOf",n.stateChoices),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.VisibleState))}}function aQ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit,t=c.gc(3);c.zb(1),c.Mc(t.stateDisplay(e.RequiredState))}}function uQ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(5);c.zb(1),c.Mc(e.stateDisplay(0))}}function dQ(e,t){if(1&e&&(c.Qb(0),c.Jc(1,aQ,2,1,"span",97),c.Jc(2,uQ,2,1,"span",97),c.Pb()),2&e){const e=c.gc().$implicit,t=c.gc(2).isEdit,n=c.gc();c.zb(1),c.nc("ngIf",!t&&!n.isRequiredColumn(e)),c.zb(1),c.nc("ngIf",n.isRequiredColumn(e))}}function bQ(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function gQ(e,t){1&e&&c.Ob(0)}function fQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,136),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.RequiredState=t}),c.Jc(2,bQ,2,2,"option",123),c.Rb(),c.Jc(3,gQ,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(3),i=c.Ac(11);c.nc("ngModel",t.RequiredState),c.zb(2),c.nc("ngForOf",n.stateChoices),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.RequiredState))}}function mQ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.stateDisplay(e.ReadOnlyState))}}function hQ(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function pQ(e,t){1&e&&c.Ob(0)}function SQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,137),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.ReadOnlyState=t}),c.Jc(2,hQ,2,2,"option",123),c.Rb(),c.Jc(3,pQ,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(3),i=c.Ac(11);c.nc("ngModel",t.ReadOnlyState),c.zb(2),c.nc("ngForOf",n.stateChoices),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.ReadOnlyState))}}function vQ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Mc(c.ic(2,1,2===e.InheritsFromHeader?"InheritsFrom_2":1===e.InheritsFromHeader?"InheritsFrom_1":"InheritsFrom_0"))}}function IQ(e,t){1&e&&c.Ob(0)}function MQ(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"select",65,139),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.InheritsFromHeader=t}),c.Sb(3,"option",140),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Sb(6,"option",102),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Sb(9,"option",141),c.Lc(10),c.hc(11,"translate"),c.Rb(),c.Rb(),c.Jc(12,IQ,1,0,"ng-container",44),c.Pb()}if(2&e){const e=c.Ac(2),t=c.gc(2).$implicit;c.gc(3);const n=c.Ac(11);c.zb(1),c.nc("ngModel",t.InheritsFromHeader),c.zb(3),c.Nc(" ",c.ic(5,6,"InheritsFrom_0"),""),c.zb(3),c.Nc(" ",c.ic(8,8,"InheritsFrom_1"),""),c.zb(3),c.Nc(" ",c.ic(11,10,"InheritsFrom_2"),""),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(12,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.InheritsFromHeader))}}function RQ(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Mc(c.ic(2,1,"InheritsFrom_0")))}function yQ(e,t){if(1&e&&(c.Jc(0,MQ,13,15,"ng-container",30),c.Jc(1,RQ,3,3,"ng-template",null,138,c.Kc)),2&e){const e=c.Ac(2),t=c.gc().$implicit,n=c.gc(3);c.nc("ngIf",n.canInherit(t))("ngIfElse",e)}}function DQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td"),c.Sb(1,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().index,n=c.gc(2).model;return c.gc().column_onDeleteRow(t,n)}),c.Nb(2,"fa-icon",109),c.Rb(),c.Rb()}}function wQ(e,t){if(1&e&&(c.Sb(0,"tr",88),c.Jc(1,LH,3,0,"ng-container",89),c.Jc(2,kH,2,1,"div",90),c.Jc(3,OH,2,0,"td",91),c.Sb(4,"td"),c.Jc(5,AH,2,1,"span",30),c.Jc(6,JH,4,7,"ng-template",null,113,c.Kc),c.Rb(),c.Sb(8,"td"),c.Jc(9,PH,2,1,"span",30),c.Jc(10,VH,3,8,"ng-template",null,114,c.Kc),c.Rb(),c.Sb(12,"td"),c.Jc(13,qH,2,1,"span",30),c.Jc(14,$H,3,8,"ng-template",null,115,c.Kc),c.Rb(),c.Jc(16,HH,4,4,"td",116),c.Jc(17,YH,4,4,"td",116),c.Sb(18,"td"),c.Jc(19,XH,2,1,"span",30),c.Jc(20,nQ,3,2,"ng-template",null,117,c.Kc),c.Rb(),c.Sb(22,"td"),c.Jc(23,oQ,3,2,"ng-container",30),c.Jc(24,lQ,4,7,"ng-template",null,118,c.Kc),c.Rb(),c.Sb(26,"td"),c.Jc(27,dQ,3,2,"ng-container",30),c.Jc(28,fQ,4,7,"ng-template",null,119,c.Kc),c.Rb(),c.Sb(30,"td"),c.Jc(31,mQ,2,1,"span",30),c.Jc(32,SQ,4,7,"ng-template",null,120,c.Kc),c.Rb(),c.Sb(34,"td"),c.Jc(35,vQ,3,3,"span",30),c.Jc(36,yQ,3,2,"ng-template",null,121,c.Kc),c.Rb(),c.Jc(38,DQ,3,0,"td",97),c.Rb()),2&e){const e=t.$implicit,n=c.Ac(7),i=c.Ac(11),o=c.Ac(15),r=c.Ac(21),s=c.Ac(25),l=c.Ac(29),a=c.Ac(33),u=c.Ac(37),d=c.gc(2).isEdit,b=c.gc();c.zb(3),c.nc("ngIf",d),c.zb(1),c.Eb("p-0",d),c.zb(1),c.nc("ngIf",!d)("ngIfElse",n),c.zb(3),c.Eb("p-0",d),c.zb(1),c.nc("ngIf",!d)("ngIfElse",i),c.zb(3),c.Eb("p-0",d),c.zb(1),c.nc("ngIf",!d)("ngIfElse",o),c.zb(3),c.nc("ngIf",b.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",b.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("p-0",d&&b.canFilter(e)),c.zb(1),c.nc("ngIf",!d)("ngIfElse",r),c.zb(3),c.Eb("p-0",d&&!b.isRequiredColumn(e)),c.zb(1),c.nc("ngIf",!d||b.isRequiredColumn(e))("ngIfElse",s),c.zb(3),c.Eb("p-0",d&&!b.isRequiredColumn(e)),c.zb(1),c.nc("ngIf",!d||b.isRequiredColumn(e))("ngIfElse",l),c.zb(3),c.Eb("p-0",d),c.zb(1),c.nc("ngIf",!d)("ngIfElse",a),c.zb(3),c.Eb("p-0",d&&b.canInherit(e)),c.zb(1),c.nc("ngIf",!d)("ngIfElse",u),c.zb(3),c.nc("ngIf",d)}}function EQ(e,t){1&e&&(c.Sb(0,"div",110),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function CQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",111),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().column_onInsertRow(t)}),c.Nb(1,"fa-icon",112),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function xQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",79),c.Sb(1,"table",80),c.Sb(2,"thead",81),c.Sb(3,"tr"),c.Jc(4,CH,1,0,"th",82),c.Sb(5,"th"),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Sb(8,"th",83),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Sb(11,"th"),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Jc(14,xH,3,3,"th",97),c.Jc(15,TH,3,3,"th",97),c.Sb(16,"th"),c.Lc(17),c.hc(18,"translate"),c.Rb(),c.Sb(19,"th"),c.Lc(20),c.hc(21,"translate"),c.Rb(),c.Sb(22,"th"),c.Lc(23),c.hc(24,"translate"),c.Rb(),c.Sb(25,"th"),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Sb(28,"th"),c.Lc(29),c.hc(30,"translate"),c.Rb(),c.Jc(31,zH,1,0,"th",82),c.Rb(),c.Rb(),c.Sb(32,"tbody",84),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().column_rowDrop(t,n)}),c.Jc(33,wQ,39,36,"tr",85),c.Rb(),c.Rb(),c.Jc(34,EQ,3,3,"div",86),c.Jc(35,CQ,4,3,"button",87),c.Rb()}if(2&e){const e=c.gc(),t=e.isEdit,n=e.model,i=c.gc();c.zb(4),c.nc("ngIf",t),c.zb(2),c.Nc("",c.ic(7,16,"LineDefinitionColumn_ColumnName")," "),c.zb(3),c.Nc("",c.ic(10,18,"LineDefinitionColumn_EntryIndex")," "),c.zb(3),c.Nc("",c.ic(13,20,"Label")+i.ws.primaryPostfix," "),c.zb(2),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(2),c.Nc("",c.ic(18,22,"LineDefinitionColumn_Filter")," "),c.zb(3),c.Nc("",c.ic(21,24,"LineDefinitionColumn_VisibleState")," "),c.zb(3),c.Nc("",c.ic(24,26,"LineDefinitionColumn_RequiredState")," "),c.zb(3),c.Nc("",c.ic(27,28,"LineDefinitionColumn_ReadOnlyState")," "),c.zb(3),c.Nc("",c.ic(30,30,"LineDefinitionColumn_InheritsFromHeader")," "),c.zb(2),c.nc("ngIf",t),c.zb(1),c.nc("cdkDropListDisabled",!t),c.zb(1),c.nc("ngForOf",n.Columns),c.zb(1),c.nc("ngIf",!t&&0===(null==n.Columns?null:n.Columns.length)),c.zb(1),c.nc("ngIf",t)}}function TQ(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function zQ(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model;c.zb(1),c.Nc("",e.GenerateLabel,"\u200c")}}function LQ(e,t){1&e&&c.Ob(0)}function kQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",149,150),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.GenerateLabel=t}),c.Rb(),c.Jc(2,LQ,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.GenerateLabel)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.GenerateLabel))}}function OQ(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Nc("",e.GenerateLabel2,"\u200c")}}function AQ(e,t){1&e&&c.Ob(0)}function NQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",153,154),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.GenerateLabel2=t}),c.Rb(),c.Jc(2,AQ,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.GenerateLabel2)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.GenerateLabel2))}}function _Q(e,t){if(1&e&&(c.Sb(0,"div",28),c.Sb(1,"label",151),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,OQ,2,1,"div",30),c.Jc(5,NQ,3,8,"ng-template",null,152,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc(2).isEdit,n=c.gc();c.zb(2),c.Mc(c.ic(3,3,"LineDefinition_GenerateLabel")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngIf",!t)("ngIfElse",e)}}function JQ(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Nc("",e.GenerateLabel3,"\u200c")}}function PQ(e,t){1&e&&c.Ob(0)}function FQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",157,158),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.GenerateLabel3=t}),c.Rb(),c.Jc(2,PQ,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.GenerateLabel3)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.GenerateLabel3))}}function VQ(e,t){if(1&e&&(c.Sb(0,"div",28),c.Sb(1,"label",155),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Jc(4,JQ,2,1,"div",30),c.Jc(5,FQ,3,8,"ng-template",null,156,c.Kc),c.Rb()),2&e){const e=c.Ac(6),t=c.gc(2).isEdit,n=c.gc();c.zb(2),c.Mc(c.ic(3,3,"LineDefinition_GenerateLabel")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngIf",!t)("ngIfElse",e)}}function qQ(e,t){1&e&&c.Nb(0,"th",83)}function jQ(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.Nc(" ",c.ic(2,1,"Label")+e.ws.secondaryPostfix," ")}}function $Q(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.Nc(" ",c.ic(2,1,"Label")+e.ws.ternaryPostfix," ")}}function UQ(e,t){1&e&&c.Nb(0,"th",83)}function KQ(e,t){1&e&&(c.Qb(0),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Pb())}function BQ(e,t){if(1&e&&(c.Sb(0,"div",98),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Nc(" ",t.ws.getMultilingualValueImmediate(e,"Label"),"")}}function HQ(e,t){1&e&&(c.Sb(0,"td",99),c.Nb(1,"fa-icon",100),c.Rb())}function QQ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Mc(e.Key)}}function WQ(e,t){1&e&&c.Ob(0)}function GQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,163),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Key=t}),c.Rb(),c.Jc(2,WQ,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Key)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Key))}}function YQ(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Mc(e.Label)}}function XQ(e,t){1&e&&c.Ob(0)}function ZQ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,128),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Label=t}),c.Rb(),c.Jc(2,XQ,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Label)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Label))}}function eW(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Mc(e.Label2)}}function tW(e,t){1&e&&c.Ob(0)}function nW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,130),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.Label2=t}),c.Rb(),c.Jc(2,tW,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Label2)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Label2))}}function iW(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,eW,2,1,"span",30),c.Jc(2,nW,3,8,"ng-template",null,129,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(3).isEdit;c.Eb("p-0",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function cW(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Mc(e.Label3)}}function oW(e,t){1&e&&c.Ob(0)}function rW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,132),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.Label3=t}),c.Rb(),c.Jc(2,oW,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Label3)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Label3))}}function sW(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,cW,2,1,"span",30),c.Jc(2,rW,3,8,"ng-template",null,131,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(3).isEdit;c.Eb("p-0",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function lW(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.visibilityDisplay(e.Visibility))}}function aW(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function uW(e,t){1&e&&c.Ob(0)}function dW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",164,165),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Visibility=t}),c.Jc(2,aW,2,2,"option",123),c.Rb(),c.Jc(3,uW,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(3),i=c.Ac(11);c.nc("ngModel",t.Visibility),c.zb(2),c.nc("ngForOf",n.visibilityChoices),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Visibility))}}function bW(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.controlDisplay(e.Control))}}function gW(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function fW(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function mW(e,t){1&e&&c.Ob(0)}function hW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,166),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Control=t}),c.Jc(2,gW,2,2,"option",123),c.Sb(3,"option",167),c.Lc(4," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),c.Rb(),c.Jc(5,fW,2,2,"option",123),c.Rb(),c.Jc(6,mW,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(3),i=c.Ac(11);c.nc("ngModel",t.Control),c.zb(2),c.nc("ngForOf",n.controlSimpleChoices()),c.zb(3),c.nc("ngForOf",n.controlEntityChoices()),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Control))}}function pW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(2).isEdit;return c.gc().onControlOptions(t,n)}),c.Nb(1,"fa-icon",168),c.Rb()}}function SW(e,t){1&e&&(c.Sb(0,"span",107),c.Lc(1," \xa0"),c.Nb(2,"fa-icon",26),c.Rb())}function vW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td"),c.Sb(1,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(2).model;return c.gc().onDeleteRow(t,n.GenerateParameters)}),c.Nb(2,"fa-icon",109),c.Rb(),c.Rb()}}function IW(e,t){if(1&e&&(c.Sb(0,"tr",88),c.Jc(1,KQ,3,0,"ng-container",89),c.Jc(2,BQ,2,1,"div",90),c.Jc(3,HQ,2,0,"td",91),c.Sb(4,"td"),c.Jc(5,QQ,2,1,"span",30),c.Jc(6,GQ,3,8,"ng-template",null,159,c.Kc),c.Rb(),c.Sb(8,"td"),c.Jc(9,YQ,2,1,"span",30),c.Jc(10,ZQ,3,8,"ng-template",null,115,c.Kc),c.Rb(),c.Jc(12,iW,4,4,"td",116),c.Jc(13,sW,4,4,"td",116),c.Sb(14,"td"),c.Jc(15,lW,2,1,"span",30),c.Jc(16,dW,4,7,"ng-template",null,160,c.Kc),c.Rb(),c.Sb(18,"td"),c.Jc(19,bW,2,1,"span",30),c.Jc(20,hW,7,8,"ng-template",null,161,c.Kc),c.Rb(),c.Sb(22,"td"),c.Jc(23,pW,2,0,"button",162),c.Jc(24,SW,3,0,"span",96),c.Rb(),c.Jc(25,vW,3,0,"td",97),c.Rb()),2&e){const e=t.$implicit,n=c.Ac(7),i=c.Ac(11),o=c.Ac(17),r=c.Ac(21),s=c.gc(2).isEdit,l=c.gc();c.zb(3),c.nc("ngIf",s),c.zb(1),c.Eb("p-0",s),c.zb(1),c.nc("ngIf",!s)("ngIfElse",n),c.zb(3),c.Eb("p-0",s),c.zb(1),c.nc("ngIf",!s)("ngIfElse",i),c.zb(3),c.nc("ngIf",l.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",l.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("p-0",s),c.zb(1),c.nc("ngIf",!s)("ngIfElse",o),c.zb(3),c.Eb("p-0",s),c.zb(1),c.nc("ngIf",!s)("ngIfElse",r),c.zb(4),c.nc("ngIf",l.hasControlOptions(e)),c.zb(1),c.nc("ngIf",l.showGenerateParametersError(e)),c.zb(1),c.nc("ngIf",s)}}function MW(e,t){1&e&&(c.Sb(0,"div",110),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function RW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",111),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onInsertRow(t.GenerateParameters)}),c.Nb(1,"fa-icon",112),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function yW(e,t){1&e&&(c.Sb(0,"div",171),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" (",c.ic(2,1,"Blank"),") "))}function DW(e,t){if(1&e&&(c.Sb(0,"div",172),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model;c.zb(2),c.Mc(e.GenerateScript)}}function wW(e,t){if(1&e&&(c.Qb(0),c.Jc(1,yW,3,3,"div",169),c.Jc(2,DW,3,1,"div",170),c.Pb()),2&e){const e=c.gc(2).model;c.zb(1),c.nc("ngIf",!e.GenerateScript),c.zb(1),c.nc("ngIf",!!e.GenerateScript)}}function EW(e,t){1&e&&c.Ob(0)}function CW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"textarea",173,174),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.GenerateScript=t})("keydown",function(t){c.Dc(e);const n=c.Ac(2),i=c.gc(2).model;return c.gc().onGenerateScriptKeydown(n,t,i)}),c.Rb(),c.Jc(3,EW,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.GenerateScript),c.zb(3),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.GenerateScript))}}function xW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",27),c.Sb(1,"div",28),c.Sb(2,"label",142),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Jc(5,zQ,2,1,"div",30),c.Jc(6,kQ,3,8,"ng-template",null,143,c.Kc),c.Rb(),c.Jc(8,_Q,7,5,"div",32),c.Jc(9,VQ,7,5,"div",32),c.Rb(),c.Sb(10,"div",144),c.Sb(11,"label",145),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Sb(14,"table",80),c.Sb(15,"thead",81),c.Sb(16,"tr"),c.Jc(17,qQ,1,0,"th",82),c.Sb(18,"th"),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Sb(21,"th"),c.Lc(22),c.hc(23,"translate"),c.Rb(),c.Jc(24,jQ,3,3,"th",97),c.Jc(25,$Q,3,3,"th",97),c.Sb(26,"th"),c.Lc(27),c.hc(28,"translate"),c.Rb(),c.Sb(29,"th"),c.Lc(30),c.hc(31,"translate"),c.Rb(),c.Sb(32,"th"),c.Lc(33),c.hc(34,"translate"),c.Rb(),c.Jc(35,UQ,1,0,"th",82),c.Rb(),c.Rb(),c.Sb(36,"tbody",84),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().rowDrop(t,n.GenerateParameters)}),c.Jc(37,IW,26,22,"tr",85),c.Rb(),c.Rb(),c.Jc(38,MW,3,3,"div",86),c.Jc(39,RW,4,3,"button",87),c.Rb(),c.Sb(40,"div",146),c.Sb(41,"label",147),c.Lc(42),c.hc(43,"translate"),c.Rb(),c.Jc(44,wW,3,2,"ng-container",30),c.Jc(45,CW,4,6,"ng-template",null,148,c.Kc),c.Rb()}if(2&e){const e=c.Ac(7),t=c.Ac(46),n=c.gc(),i=n.isEdit,o=n.model,r=c.gc();c.zb(3),c.Mc(c.ic(4,22,"LineDefinition_GenerateLabel")+r.ws.primaryPostfix),c.zb(2),c.nc("ngIf",!i)("ngIfElse",e),c.zb(3),c.nc("ngIf",!!r.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!!r.ws.settings.TernaryLanguageId),c.zb(3),c.Mc(c.ic(13,24,"LineDefinition_GenerateParameters")),c.zb(5),c.nc("ngIf",i),c.zb(2),c.Nc("",c.ic(20,26,"Parameter_Key")," "),c.zb(3),c.Nc("",c.ic(23,28,"Label")+r.ws.primaryPostfix," "),c.zb(2),c.nc("ngIf",r.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",r.ws.settings.TernaryLanguageId),c.zb(2),c.Nc("",c.ic(28,30,"Parameter_Visibility")," "),c.zb(3),c.Nc("",c.ic(31,32,"Definition_Control")," "),c.zb(3),c.Nc("",c.ic(34,34,"Definition_ControlOptions")," "),c.zb(2),c.nc("ngIf",i),c.zb(1),c.nc("cdkDropListDisabled",!i),c.zb(1),c.nc("ngForOf",o.GenerateParameters),c.zb(1),c.nc("ngIf",!i&&0===(null==o.GenerateParameters?null:o.GenerateParameters.length)),c.zb(1),c.nc("ngIf",i),c.zb(3),c.Mc(c.ic(43,36,"LineDefinition_GenerateScript")),c.zb(2),c.nc("ngIf",!i)("ngIfElse",t)}}function TW(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function zW(e,t){1&e&&(c.Sb(0,"div",171),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" (",c.ic(2,1,"Blank"),") "))}function LW(e,t){if(1&e&&(c.Sb(0,"div",172),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model;c.zb(2),c.Mc(e.PreprocessScript)}}function kW(e,t){if(1&e&&(c.Qb(0),c.Jc(1,zW,3,3,"div",169),c.Jc(2,LW,3,1,"div",170),c.Pb()),2&e){const e=c.gc(2).model;c.zb(1),c.nc("ngIf",!e.PreprocessScript),c.zb(1),c.nc("ngIf",!!e.PreprocessScript)}}function OW(e,t){1&e&&c.Ob(0)}function AW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"textarea",176,177),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.PreprocessScript=t})("keydown",function(t){c.Dc(e);const n=c.Ac(2),i=c.gc(2).model;return c.gc().onPreprocessScriptKeydown(n,t,i)}),c.Lc(3,"                    "),c.Rb(),c.Jc(4,OW,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.PreprocessScript),c.zb(4),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.PreprocessScript))}}function NW(e,t){if(1&e&&(c.Jc(0,kW,3,2,"ng-container",30),c.Jc(1,AW,5,6,"ng-template",null,175,c.Kc)),2&e){const e=c.Ac(2),t=c.gc().isEdit;c.nc("ngIf",!t)("ngIfElse",e)}}function _W(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function JW(e,t){1&e&&(c.Sb(0,"div",171),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" (",c.ic(2,1,"Blank"),") "))}function PW(e,t){if(1&e&&(c.Sb(0,"div",172),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3).model;c.zb(2),c.Mc(e.ValidateScript)}}function FW(e,t){if(1&e&&(c.Qb(0),c.Jc(1,JW,3,3,"div",169),c.Jc(2,PW,3,1,"div",170),c.Pb()),2&e){const e=c.gc(2).model;c.zb(1),c.nc("ngIf",!e.ValidateScript),c.zb(1),c.nc("ngIf",!!e.ValidateScript)}}function VW(e,t){1&e&&c.Ob(0)}function qW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"textarea",176,179),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ValidateScript=t})("keydown",function(t){c.Dc(e);const n=c.Ac(2),i=c.gc(2).model;return c.gc().onValidateScriptKeydown(n,t,i)}),c.Lc(3,"                    "),c.Rb(),c.Jc(4,VW,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.ValidateScript),c.zb(4),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.ValidateScript))}}function jW(e,t){if(1&e&&(c.Jc(0,FW,3,2,"ng-container",30),c.Jc(1,qW,5,6,"ng-template",null,178,c.Kc)),2&e){const e=c.Ac(2),t=c.gc().isEdit;c.nc("ngIf",!t)("ngIfElse",e)}}function $W(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function UW(e,t){1&e&&c.Nb(0,"th",83)}function KW(e,t){1&e&&c.Nb(0,"th",83)}function BW(e,t){1&e&&(c.Qb(0),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Pb())}function HW(e,t){if(1&e&&(c.Sb(0,"div",98),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(4);c.zb(1),c.Nc(" ",t.ruleTypeDisplay(e.RuleType),"")}}function QW(e,t){1&e&&(c.Sb(0,"td",99),c.Nb(1,"fa-icon",100),c.Rb())}function WW(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(4);c.zb(1),c.Mc(t.ruleTypeDisplay(e.RuleType))}}function GW(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function YW(e,t){1&e&&c.Ob(0)}function XW(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",164,187),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.RuleType=t}),c.Jc(2,GW,2,2,"option",123),c.Rb(),c.Jc(3,YW,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(4),i=c.Ac(11);c.nc("ngModel",t.RuleType),c.zb(2),c.nc("ngForOf",n.ruleTypeChoices),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.RuleType))}}function ZW(e,t){if(1&e&&(c.Sb(0,"span",190),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).$implicit,t=c.gc(4);c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Role",e.RoleId,"Name")," ")}}function eG(e,t){if(1&e&&(c.Qb(0),c.Jc(1,ZW,2,1,"span",189),c.Pb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.nc("ngIf",!!e.RoleId)}}function tG(e,t){1&e&&c.Ob(0)}function nG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-roles-picker",191,192),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.RoleId=t}),c.Rb(),c.Jc(2,tG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(4);const n=c.Ac(11);c.nc("ngModel",t.RoleId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.RoleId))}}function iG(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div"),c.Sb(2,"span"),c.Lc(3,":\xa0"),c.Rb(),c.Rb(),c.Sb(4,"div"),c.Jc(5,eG,2,1,"ng-container",30),c.Jc(6,nG,3,6,"ng-template",null,188,c.Kc),c.Rb(),c.Pb()),2&e){const e=c.Ac(7),t=c.gc(4).isEdit;c.zb(4),c.Eb("flex-grow-1",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function cG(e,t){if(1&e&&(c.Sb(0,"span",190),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).$implicit,t=c.gc(4);c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("User",e.UserId,"Name")," ")}}function oG(e,t){if(1&e&&(c.Qb(0),c.Jc(1,cG,2,1,"span",189),c.Pb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.nc("ngIf",!!e.UserId)}}function rG(e,t){1&e&&c.Ob(0)}function sG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-users-picker",194,195),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.UserId=t}),c.Rb(),c.Jc(2,rG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(4);const n=c.Ac(11);c.nc("ngModel",t.UserId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.UserId))}}function lG(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div"),c.Sb(2,"span"),c.Lc(3,":\xa0"),c.Rb(),c.Rb(),c.Sb(4,"div"),c.Jc(5,oG,2,1,"ng-container",30),c.Jc(6,sG,3,6,"ng-template",null,193,c.Kc),c.Rb(),c.Pb()),2&e){const e=c.Ac(7),t=c.gc(4).isEdit;c.zb(4),c.Eb("flex-grow-1",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function aG(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"span",190),c.Lc(2),c.Rb(),c.Pb()),2&e){const e=c.gc(2).$implicit;c.zb(2),c.Nc(" ",e.RuleTypeEntryIndex," ")}}function uG(e,t){1&e&&c.Ob(0)}function dG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",197,198),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.RuleTypeEntryIndex=t}),c.Rb(),c.Jc(2,uG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(4);const n=c.Ac(11);c.nc("ngModel",t.RuleTypeEntryIndex)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.RuleTypeEntryIndex))}}function bG(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div"),c.Sb(2,"span"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"div"),c.Jc(6,aG,3,1,"ng-container",30),c.Jc(7,dG,3,8,"ng-template",null,196,c.Kc),c.Rb(),c.Pb()),2&e){const e=c.Ac(8),t=c.gc(4).isEdit;c.zb(3),c.Nc("\xa0",c.ic(4,5,"OfEntry"),":\xa0"),c.zb(2),c.Eb("flex-grow-1",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function gG(e,t){if(1&e&&(c.Sb(0,"span",190),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit,t=c.gc(4);c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Role",e.ProxyRoleId,"Name")," ")}}function fG(e,t){1&e&&c.Ob(0)}function mG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-roles-picker",201,202),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.ProxyRoleId=t}),c.Rb(),c.Jc(2,fG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(4);const n=c.Ac(11);c.nc("ngModel",t.ProxyRoleId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.ProxyRoleId))}}function hG(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div"),c.Sb(2,"span"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"div"),c.Jc(6,gG,2,1,"span",199),c.Jc(7,mG,3,6,"ng-template",null,200,c.Kc),c.Rb(),c.Pb()),2&e){const e=c.Ac(8),t=c.gc(4).isEdit;c.zb(3),c.Nc("\xa0",c.ic(4,5,"WorkflowSignature_ProxyRole"),":\xa0"),c.zb(2),c.Eb("flex-grow-1",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function pG(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(4);c.zb(1),c.Mc(t.predicateTypeDisplay(e.PredicateType))}}function SG(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function vG(e,t){1&e&&c.Ob(0)}function IG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",164,203),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.PredicateType=t}),c.Nb(2,"option",204),c.Jc(3,SG,2,2,"option",123),c.Rb(),c.Jc(4,vG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(4),i=c.Ac(11);c.nc("ngModel",t.PredicateType),c.zb(3),c.nc("ngForOf",n.predicateTypeChoices),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.PredicateType))}}function MG(e,t){if(1&e&&(c.Sb(0,"span",190),c.Lc(1),c.hc(2,"accounting"),c.Rb()),2&e){const e=c.gc(2).$implicit,t=c.gc(4);c.zb(1),c.Nc(" \xa0",c.jc(2,1,e.Value,t.functionalFormat)," ")}}function RG(e,t){1&e&&c.Ob(0)}function yG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",207,208),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.Value=t}),c.Rb(),c.Jc(2,RG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit,n=c.gc(4),i=c.Ac(11);c.nc("ngModel",t.Value)("maxDecimalPlaces",n.functionalDecimals)("minDecimalPlaces",n.functionalDecimals),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Value))}}function DG(e,t){if(1&e&&(c.Sb(0,"span",190),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Nc(" \xa0",e.PredicateTypeEntryIndex," ")}}function wG(e,t){1&e&&c.Ob(0)}function EG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",209,210),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.PredicateTypeEntryIndex=t}),c.Rb(),c.Jc(2,wG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(4);const n=c.Ac(11);c.nc("ngModel",t.PredicateTypeEntryIndex)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.PredicateTypeEntryIndex))}}function CG(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div"),c.Jc(2,MG,3,4,"span",199),c.Jc(3,yG,3,8,"ng-template",null,205,c.Kc),c.Rb(),c.Sb(5,"div"),c.Sb(6,"span"),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Rb(),c.Sb(9,"div"),c.Jc(10,DG,2,1,"span",199),c.Jc(11,EG,3,8,"ng-template",null,206,c.Kc),c.Rb(),c.Pb()),2&e){const e=c.Ac(4),t=c.Ac(12),n=c.gc(4).isEdit,i=c.gc();c.zb(1),c.Eb("flex-grow-1",n),c.zb(1),c.nc("ngIf",!n)("ngIfElse",e),c.zb(5),c.Oc("\xa0",i.functionalDisplay,",\xa0",c.ic(8,10,"OfEntry"),":\xa0"),c.zb(2),c.Eb("flex-grow-1",n),c.zb(1),c.nc("ngIf",!n)("ngIfElse",t)}}function xG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td"),c.Sb(1,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc().$implicit,i=c.gc(2).model;return c.gc().onDeleteSignature(i,n,t)}),c.Nb(2,"fa-icon",109),c.Rb(),c.Rb()}}function TG(e,t){if(1&e&&(c.Sb(0,"tr",88),c.Jc(1,BW,3,0,"ng-container",89),c.Jc(2,HW,2,1,"div",90),c.Jc(3,QW,2,0,"td",91),c.Sb(4,"td"),c.Sb(5,"div",184),c.Sb(6,"div"),c.Jc(7,WW,2,1,"span",30),c.Jc(8,XW,4,7,"ng-template",null,185,c.Kc),c.Rb(),c.Jc(10,iG,8,4,"ng-container",97),c.Jc(11,lG,8,4,"ng-container",97),c.Jc(12,bG,9,7,"ng-container",97),c.Jc(13,hG,9,7,"ng-container",97),c.Rb(),c.Rb(),c.Sb(14,"td"),c.Sb(15,"div",184),c.Sb(16,"div"),c.Jc(17,pG,2,1,"span",30),c.Jc(18,IG,5,7,"ng-template",null,186,c.Kc),c.Rb(),c.Jc(20,CG,13,12,"ng-container",97),c.Rb(),c.Rb(),c.Jc(21,xG,3,0,"td",97),c.Rb()),2&e){const e=t.$implicit,n=c.Ac(9),i=c.Ac(19),o=c.gc(3).isEdit;c.zb(3),c.nc("ngIf",o),c.zb(1),c.Eb("p-0",o),c.zb(2),c.Eb("flex-grow-1",o),c.zb(1),c.nc("ngIf",!o)("ngIfElse",n),c.zb(3),c.nc("ngIf","ByRole"===e.RuleType),c.zb(1),c.nc("ngIf","ByUser"===e.RuleType),c.zb(1),c.nc("ngIf","ByCustodian"===e.RuleType),c.zb(1),c.nc("ngIf",!!e.RuleType&&"Public"!==e.RuleType&&(o||!!e.ProxyRoleId)),c.zb(1),c.Eb("p-0",o),c.zb(2),c.Eb("flex-grow-1",o),c.zb(1),c.nc("ngIf",!o)("ngIfElse",i),c.zb(3),c.nc("ngIf","ValueGreaterOrEqual"===e.PredicateType),c.zb(1),c.nc("ngIf",o)}}function zG(e,t){1&e&&(c.Sb(0,"div",110),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function LG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",111),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(2).model;return c.gc().onInsertSignature(n,t)}),c.Nb(1,"fa-icon",112),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function kG(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"h5",181),c.Lc(2),c.Rb(),c.Sb(3,"table",80),c.Sb(4,"thead",81),c.Sb(5,"tr"),c.Jc(6,UW,1,0,"th",82),c.Sb(7,"th",182),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Sb(10,"th",183),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Jc(13,KW,1,0,"th",82),c.Rb(),c.Rb(),c.Sb(14,"tbody",84),c.cc("cdkDropListDropped",function(n){c.Dc(e);const i=t.$implicit,o=c.gc(2).model,r=c.gc();return r.rowDrop(n,r.Signatures(o,i))}),c.Jc(15,TG,22,19,"tr",85),c.Rb(),c.Rb(),c.Jc(16,zG,3,3,"div",86),c.Jc(17,LG,4,3,"button",87),c.Pb()}if(2&e){const e=t.$implicit,n=c.gc(2),i=n.isEdit,o=n.model,r=c.gc();c.zb(2),c.Mc(r.stateDisplay(e)),c.zb(4),c.nc("ngIf",i),c.zb(2),c.Nc("",c.ic(9,9,"RequiredSignature")," "),c.zb(3),c.Nc("",c.ic(12,11,"When")," "),c.zb(2),c.nc("ngIf",i),c.zb(1),c.nc("cdkDropListDisabled",!i),c.zb(1),c.nc("ngForOf",r.Signatures(o,e)),c.zb(1),c.nc("ngIf",!i&&0===r.Signatures(o,e).length),c.zb(1),c.nc("ngIf",i)}}const OG=function(){return[1,2,3,4]};function AG(e,t){1&e&&(c.Sb(0,"div",79),c.Jc(1,kG,18,13,"ng-container",180),c.Rb()),2&e&&(c.zb(1),c.nc("ngForOf",c.qc(1,OG)))}function NG(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function _G(e,t){1&e&&c.Nb(0,"th",83)}function JG(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.Nc(" ",c.ic(2,1,"Name")+e.ws.secondaryPostfix," ")}}function PG(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3);c.zb(1),c.Nc(" ",c.ic(2,1,"Name")+e.ws.ternaryPostfix," ")}}function FG(e,t){1&e&&c.Nb(0,"th",83)}function VG(e,t){1&e&&(c.Qb(0),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Pb())}function qG(e,t){if(1&e&&(c.Sb(0,"div",98),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Nc(" ",t.ws.getMultilingualValueImmediate(e,"Name"),"")}}function jG(e,t){1&e&&(c.Sb(0,"td",99),c.Nb(1,"fa-icon",100),c.Rb())}function $G(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.stateDisplay(e.State))}}function UG(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function KG(e,t){1&e&&c.Ob(0)}function BG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,214),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.State=t}),c.Jc(2,UG,2,2,"option",123),c.Rb(),c.Jc(3,KG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit,n=c.gc(3),i=c.Ac(11);c.nc("ngModel",t.State),c.zb(2),c.nc("ngForOf",n.negativeStateChoices),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.State))}}function HG(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Mc(e.Name)}}function QG(e,t){1&e&&c.Ob(0)}function WG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,215),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.Name=t}),c.Rb(),c.Jc(2,QG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Name)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Name))}}function GG(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Mc(e.Name2)}}function YG(e,t){1&e&&c.Ob(0)}function XG(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,217),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.Name2=t}),c.Rb(),c.Jc(2,YG,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Name2)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Name2))}}function ZG(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,GG,2,1,"span",30),c.Jc(2,XG,3,8,"ng-template",null,216,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(3).isEdit;c.Eb("p-0",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function eY(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.Mc(e.Name3)}}function tY(e,t){1&e&&c.Ob(0)}function nY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",127,219),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).$implicit.Name3=t}),c.Rb(),c.Jc(2,tY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.Name3)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.Name3))}}function iY(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,eY,2,1,"span",30),c.Jc(2,nY,3,8,"ng-template",null,218,c.Kc),c.Rb()),2&e){const e=c.Ac(3),t=c.gc(3).isEdit;c.Eb("p-0",t),c.zb(1),c.nc("ngIf",!t)("ngIfElse",e)}}function cY(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc().$implicit;c.zb(1),c.Mc(c.ic(2,1,e.IsActive?"Yes":"No"))}}function oY(e,t){1&e&&c.Ob(0)}function rY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,220),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.IsActive=t}),c.Sb(2,"option",67),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"option",68),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Jc(8,oY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.IsActive),c.zb(3),c.Nc(" ",c.ic(4,5,"Yes"),""),c.zb(3),c.Nc(" ",c.ic(7,7,"No"),""),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(9,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.IsActive))}}function sY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td"),c.Sb(1,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(2).model;return c.gc().onDeleteRow(t,n.StateReasons)}),c.Nb(2,"fa-icon",109),c.Rb(),c.Rb()}}function lY(e,t){if(1&e&&(c.Sb(0,"tr",88),c.Jc(1,VG,3,0,"ng-container",89),c.Jc(2,qG,2,1,"div",90),c.Jc(3,jG,2,0,"td",91),c.Sb(4,"td"),c.Jc(5,$G,2,1,"span",30),c.Jc(6,BG,4,7,"ng-template",null,211,c.Kc),c.Rb(),c.Sb(8,"td"),c.Jc(9,HG,2,1,"span",30),c.Jc(10,WG,3,8,"ng-template",null,212,c.Kc),c.Rb(),c.Jc(12,ZG,4,4,"td",116),c.Jc(13,iY,4,4,"td",116),c.Sb(14,"td"),c.Jc(15,cY,3,3,"span",30),c.Jc(16,rY,9,12,"ng-template",null,213,c.Kc),c.Rb(),c.Jc(18,sY,3,0,"td",97),c.Rb()),2&e){const e=c.Ac(7),t=c.Ac(11),n=c.Ac(17),i=c.gc(2).isEdit,o=c.gc();c.zb(3),c.nc("ngIf",i),c.zb(1),c.Eb("p-0",i),c.zb(1),c.nc("ngIf",!i)("ngIfElse",e),c.zb(3),c.Eb("p-0",i),c.zb(1),c.nc("ngIf",!i)("ngIfElse",t),c.zb(3),c.nc("ngIf",o.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",o.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("p-0",i),c.zb(1),c.nc("ngIf",!i)("ngIfElse",n),c.zb(3),c.nc("ngIf",i)}}function aY(e,t){1&e&&(c.Sb(0,"div",110),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function uY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",111),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model,n=c.gc();return n.onInsertRow(t.StateReasons,n.createStateReason)}),c.Nb(1,"fa-icon",112),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function dY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",79),c.Sb(1,"table",80),c.Sb(2,"thead",81),c.Sb(3,"tr"),c.Jc(4,_G,1,0,"th",82),c.Sb(5,"th"),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Sb(8,"th"),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Jc(11,JG,3,3,"th",97),c.Jc(12,PG,3,3,"th",97),c.Sb(13,"th"),c.Lc(14),c.hc(15,"translate"),c.Rb(),c.Jc(16,FG,1,0,"th",82),c.Rb(),c.Rb(),c.Sb(17,"tbody",84),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().rowDrop(t,n.StateReasons)}),c.Jc(18,lY,19,16,"tr",85),c.Rb(),c.Rb(),c.Jc(19,aY,3,3,"div",86),c.Jc(20,uY,4,3,"button",87),c.Rb()}if(2&e){const e=c.gc(),t=e.isEdit,n=e.model,i=c.gc();c.zb(4),c.nc("ngIf",t),c.zb(2),c.Nc("",c.ic(7,11,"State")," "),c.zb(3),c.Nc("",c.ic(10,13,"Name")+i.ws.primaryPostfix," "),c.zb(2),c.nc("ngIf",i.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",i.ws.settings.TernaryLanguageId),c.zb(2),c.Nc("",c.ic(15,15,"IsActive")," "),c.zb(2),c.nc("ngIf",t),c.zb(1),c.nc("cdkDropListDisabled",!t),c.zb(1),c.nc("ngForOf",n.StateReasons),c.zb(1),c.nc("ngIf",!t&&0===(null==n.StateReasons?null:n.StateReasons.length)),c.zb(1),c.nc("ngIf",t)}}function bY(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function gY(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(1),c.Nc(" ",t.display_BarcodeColumnIndex(e),"")}}function fY(e,t){if(1&e&&(c.Sb(0,"option",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function mY(e,t){1&e&&c.Ob(0)}function hY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,223),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.BarcodeColumnIndex=t}),c.Nb(2,"option",204),c.Jc(3,fY,2,2,"option",123),c.Rb(),c.Jc(4,mY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2).model,n=c.gc(),i=c.Ac(11);c.nc("ngModel",t.BarcodeColumnIndex),c.zb(3),c.nc("ngForOf",n.choices_BarcodeColumnIndex(t)),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.BarcodeColumnIndex))}}function pY(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Mc(e.BarcodeProperty)}}function SY(e,t){1&e&&c.Ob(0)}function vY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"input",230,231),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.BarcodeProperty=t}),c.Rb(),c.Jc(2,SY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.BarcodeProperty)("ngModelOptions",c.qc(4,pB)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.BarcodeProperty))}}function IY(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.Nc(" ",t.display_BarcodeExistingItemHandling(e),"")}}function MY(e,t){1&e&&c.Ob(0)}function RY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",232,233),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.BarcodeExistingItemHandling=t}),c.Nb(2,"option",204),c.Sb(3,"option",234),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Sb(6,"option",235),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Sb(9,"option",236),c.Lc(10),c.hc(11,"translate"),c.Rb(),c.Sb(12,"option",237),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb(),c.Jc(15,MY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.BarcodeExistingItemHandling),c.zb(4),c.Nc(" ",c.ic(5,7,"LineDefinition_Handling_AddNewLine"),""),c.zb(3),c.Nc(" ",c.ic(8,9,"LineDefinition_Handling_IncrementQuantity"),""),c.zb(3),c.Nc(" ",c.ic(11,11,"LineDefinition_Handling_ThrowError"),""),c.zb(3),c.Nc(" ",c.ic(14,13,"LineDefinition_Handling_DoNothing"),""),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(15,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.BarcodeExistingItemHandling))}}function yY(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=c.gc(3).model;c.zb(1),c.Nc(" ",c.ic(2,1,e.BarcodeBeepsEnabled?"Yes":"No"),"")}}function DY(e,t){1&e&&c.Ob(0)}function wY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",232,238),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.BarcodeBeepsEnabled=t}),c.Sb(2,"option",67),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"option",68),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Jc(8,DY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(3).model;c.gc();const n=c.Ac(11);c.nc("ngModel",t.BarcodeBeepsEnabled),c.zb(3),c.Nc(" ",c.ic(4,5,"Yes"),""),c.zb(3),c.Nc(" ",c.ic(7,7,"No"),""),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(9,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.BarcodeBeepsEnabled))}}function EY(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",28),c.Sb(2,"label",224),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Jc(5,pY,2,1,"div",30),c.Jc(6,vY,3,8,"ng-template",null,225,c.Kc),c.Rb(),c.Sb(8,"div",28),c.Sb(9,"label",226),c.Lc(10),c.hc(11,"translate"),c.Rb(),c.Jc(12,IY,2,1,"div",30),c.Jc(13,RY,16,18,"ng-template",null,227,c.Kc),c.Rb(),c.Sb(15,"div",28),c.Sb(16,"label",228),c.Lc(17),c.hc(18,"translate"),c.Rb(),c.Jc(19,yY,3,3,"div",30),c.Jc(20,wY,9,12,"ng-template",null,229,c.Kc),c.Rb(),c.Pb()),2&e){const e=c.Ac(7),t=c.Ac(14),n=c.Ac(21),i=c.gc(2).isEdit;c.zb(3),c.Mc(c.ic(4,9,"LineDefinition_BarcodeProperty")),c.zb(2),c.nc("ngIf",!i)("ngIfElse",e),c.zb(5),c.Mc(c.ic(11,11,"LineDefinition_BarcodeExistingItemHandling")),c.zb(2),c.nc("ngIf",!i)("ngIfElse",t),c.zb(5),c.Mc(c.ic(18,13,"LineDefinition_BarcodeBeepsEnabled")),c.zb(2),c.nc("ngIf",!i)("ngIfElse",n)}}function CY(e,t){if(1&e&&(c.Sb(0,"div",27),c.Sb(1,"div",28),c.Sb(2,"label",221),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Jc(5,gY,2,1,"div",30),c.Jc(6,hY,5,7,"ng-template",null,222,c.Kc),c.Rb(),c.Jc(8,EY,22,15,"ng-container",97),c.Rb()),2&e){const e=c.Ac(7),t=c.gc(),n=t.isEdit,i=t.model,o=c.gc();c.zb(3),c.Mc(c.ic(4,4,"LineDefinition_BarcodeColumnIndex")),c.zb(2),c.nc("ngIf",!n)("ngIfElse",e),c.zb(3),c.nc("ngIf",o.isBarcodeColumnIndexSpecified(i))}}function xY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"ul",9,10),c.cc("activeIdChange",function(t){return c.Dc(e),c.gc().activeTab=t}),c.Sb(2,"li",11),c.Sb(3,"a",12),c.Jc(4,fB,3,0,"span",13),c.Sb(5,"span",14),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Jc(8,nH,43,31,"ng-template",15),c.Rb(),c.Sb(9,"li",16),c.Sb(10,"a",12),c.Jc(11,iH,3,0,"span",13),c.Sb(12,"span",14),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb(),c.Jc(15,wH,31,27,"ng-template",15),c.Rb(),c.Sb(16,"li",17),c.Sb(17,"a",12),c.Jc(18,EH,3,0,"span",13),c.Sb(19,"span",14),c.Lc(20),c.hc(21,"translate"),c.Rb(),c.Rb(),c.Jc(22,xQ,36,32,"ng-template",15),c.Rb(),c.Sb(23,"li",18),c.Sb(24,"a",12),c.Jc(25,TQ,3,0,"span",13),c.Sb(26,"span",14),c.Lc(27),c.hc(28,"translate"),c.Rb(),c.Rb(),c.Jc(29,xW,47,38,"ng-template",15),c.Rb(),c.Sb(30,"li",19),c.Sb(31,"a",12),c.Jc(32,TW,3,0,"span",13),c.Sb(33,"span",14),c.Lc(34),c.hc(35,"translate"),c.Rb(),c.Rb(),c.Jc(36,NW,3,2,"ng-template",15),c.Rb(),c.Sb(37,"li",20),c.Sb(38,"a",12),c.Jc(39,_W,3,0,"span",13),c.Sb(40,"span",14),c.Lc(41),c.hc(42,"translate"),c.Rb(),c.Rb(),c.Jc(43,jW,3,2,"ng-template",15),c.Rb(),c.Sb(44,"li",21),c.Sb(45,"a",12),c.Jc(46,$W,3,0,"span",13),c.Sb(47,"span",14),c.Lc(48),c.hc(49,"translate"),c.Rb(),c.Rb(),c.Jc(50,AG,2,2,"ng-template",15),c.Rb(),c.Sb(51,"li",22),c.Sb(52,"a",12),c.Jc(53,NG,3,0,"span",13),c.Sb(54,"span",14),c.Lc(55),c.hc(56,"translate"),c.Rb(),c.Rb(),c.Jc(57,dY,21,17,"ng-template",15),c.Rb(),c.Sb(58,"li",23),c.Sb(59,"a",12),c.Jc(60,bY,3,0,"span",13),c.Sb(61,"span",14),c.Lc(62),c.hc(63,"translate"),c.Rb(),c.Rb(),c.Jc(64,CY,9,6,"ng-template",15),c.Rb(),c.Rb(),c.Nb(65,"div",24)}if(2&e){const e=t.model,n=c.Ac(1),i=c.gc();c.nc("activeId",i.activeTab)("destroyOnHide",!0),c.zb(4),c.nc("ngIf",i.showGeneralError(e)),c.zb(2),c.Mc(c.ic(7,25,"General")),c.zb(5),c.nc("ngIf",i.showEntriesError(e)),c.zb(2),c.Oc("",c.ic(14,27,"LineDefinition_Entries")," (",null==e.Entries?null:e.Entries.length,")"),c.zb(5),c.nc("ngIf",i.showColumnsError(e)),c.zb(2),c.Oc("",c.ic(21,29,"LineDefinition_Columns")," (",null==e.Columns?null:e.Columns.length,")"),c.zb(5),c.nc("ngIf",i.showGenerateScriptError(e)),c.zb(2),c.Mc(c.ic(28,31,"AutoGenerate")),c.zb(5),c.nc("ngIf",i.showPreprocessScriptError(e)),c.zb(2),c.Mc(c.ic(35,33,"Definition_PreprocessScript")),c.zb(5),c.nc("ngIf",i.showValidateScriptError(e)),c.zb(2),c.Mc(c.ic(42,35,"Definition_ValidateScript")),c.zb(5),c.nc("ngIf",i.showWorkflowsError(e)),c.zb(2),c.Oc("",c.ic(49,37,"LineDefinition_Workflows")," (",i.signaturesCount(e),")"),c.zb(5),c.nc("ngIf",i.showStateReasonsError(e)),c.zb(2),c.Oc("",c.ic(56,39,"LineDefinition_StateReasons")," (",null==e.StateReasons?null:e.StateReasons.length,")"),c.zb(5),c.nc("ngIf",i.showAdvancedError(e)),c.zb(2),c.Mc(c.ic(63,41,"Advanced")),c.zb(3),c.nc("ngbNavOutlet",n)}}function TY(e,t){1&e&&c.Ob(0)}function zY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",239),c.Sb(1,"h5",240),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",241),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",242),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",243),c.Sb(8,"t-control-options",244,245),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().selectedParam.ControlOptions=t}),c.Rb(),c.Jc(10,TY,1,0,"ng-container",44),c.Rb(),c.Sb(11,"div",246),c.Sb(12,"button",247),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(13,"fa-icon",248),c.Lc(14),c.hc(15,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(9),t=c.gc(),n=c.Ac(11);c.zb(2),c.Nc(" ",c.ic(3,7,"Definition_ControlOptions")," "),c.zb(6),c.nc("control",t.selectedParam.Control)("isEdit",t.isEdit)("ngModel",t.selectedParam.ControlOptions),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(11,SB,e,null==t.selectedParam||null==t.selectedParam.serverErrors?null:t.selectedParam.serverErrors.ControlOptions)),c.zb(4),c.Nc(" \xa0",c.ic(15,9,"Done")," ")}}function LY(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Mc(e.directionDisplay(e.entryToEdit.Direction))}}function kY(e,t){1&e&&c.Ob(0)}function OY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"select",65,101),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).entryToEdit.Direction=t}),c.Sb(2,"option",102),c.Lc(3),c.Rb(),c.Sb(4,"option",103),c.Lc(5),c.Rb(),c.Rb(),c.Jc(6,kY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2),n=c.Ac(11);c.nc("ngModel",t.entryToEdit.Direction),c.zb(3),c.Nc(" ",t.directionDisplay(1),""),c.zb(2),c.Nc(" ",t.directionDisplay(-1),""),c.zb(1),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(5,SB,e,null==t.entryToEdit||null==t.entryToEdit.serverErrors?null:t.entryToEdit.serverErrors.Direction))}}function AY(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Mc(e.ws.getMultilingualValue("AccountType",e.entryToEdit.ParentAccountTypeId,"Name"))}}function NY(e,t){1&e&&c.Ob(0)}function _Y(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-types-picker",104,105),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).entryToEdit.ParentAccountTypeId=t}),c.Rb(),c.Jc(2,NY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2),n=c.Ac(11);c.nc("ngModel",t.entryToEdit.ParentAccountTypeId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t.entryToEdit||null==t.entryToEdit.serverErrors?null:t.entryToEdit.serverErrors.ParentAccountTypeId))}}function JY(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);c.zb(1),c.Mc(e.ws.getMultilingualValue("EntryType",e.entryToEdit.EntryTypeId,"Name"))}}function PY(e,t){1&e&&c.Ob(0)}function FY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",104,106),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).entryToEdit.EntryTypeId=t}),c.Rb(),c.Jc(2,PY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc(2),n=c.Ac(11);c.nc("ngModel",t.entryToEdit.EntryTypeId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t.entryToEdit||null==t.entryToEdit.serverErrors?null:t.entryToEdit.serverErrors.EntryTypeId))}}function VY(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function qY(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.ws.getMultilingualValue("RelationDefinition",e.RelationDefinitionId,"TitleSingular"))}}function jY(e,t){1&e&&c.Ob(0)}function $Y(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relation-definitions-picker",104,263),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.RelationDefinitionId=t}),c.Rb(),c.Jc(2,jY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.RelationDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.RelationDefinitionId))}}function UY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",83),c.Sb(1,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(3);return n.onDeleteRow(t,n.entryToEdit.RelationDefinitions)}),c.Nb(2,"fa-icon",109),c.Rb(),c.Rb()}}function KY(e,t){if(1&e&&(c.Sb(0,"tr"),c.Sb(1,"td"),c.Jc(2,qY,2,1,"span",30),c.Jc(3,$Y,3,6,"ng-template",null,261,c.Kc),c.Rb(),c.Jc(5,UY,3,0,"td",262),c.Rb()),2&e){const e=c.Ac(4),t=c.gc(3);c.zb(1),c.Eb("p-0",t.modalIsEdit),c.zb(1),c.nc("ngIf",!t.modalIsEdit)("ngIfElse",e),c.zb(3),c.nc("ngIf",t.modalIsEdit)}}function BY(e,t){1&e&&(c.Sb(0,"div",110),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function HY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",264),c.cc("click",function(){c.Dc(e);const t=c.gc(3);return t.onInsertRow(t.entryToEdit.RelationDefinitions)}),c.Nb(1,"fa-icon",112),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function QY(e,t){if(1&e&&(c.Sb(0,"table",80),c.Sb(1,"tbody"),c.Jc(2,KY,6,5,"tr",180),c.Rb(),c.Rb(),c.Jc(3,BY,3,3,"div",86),c.Jc(4,HY,4,3,"button",260)),2&e){const e=c.gc(2);c.zb(2),c.nc("ngForOf",e.entryToEdit.RelationDefinitions),c.zb(1),c.nc("ngIf",!e.modalIsEdit&&0===(null==e.entryToEdit.RelationDefinitions?null:e.entryToEdit.RelationDefinitions.length)),c.zb(1),c.nc("ngIf",e.modalIsEdit)}}function WY(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function GY(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.ws.getMultilingualValue("ResourceDefinition",e.ResourceDefinitionId,"TitleSingular"))}}function YY(e,t){1&e&&c.Ob(0)}function XY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resource-definitions-picker",104,266),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.ResourceDefinitionId=t}),c.Rb(),c.Jc(2,YY,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.ResourceDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.ResourceDefinitionId))}}function ZY(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",83),c.Sb(1,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(3);return n.onDeleteRow(t,n.entryToEdit.ResourceDefinitions)}),c.Nb(2,"fa-icon",109),c.Rb(),c.Rb()}}function eX(e,t){if(1&e&&(c.Sb(0,"tr"),c.Sb(1,"td"),c.Jc(2,GY,2,1,"span",30),c.Jc(3,XY,3,6,"ng-template",null,265,c.Kc),c.Rb(),c.Jc(5,ZY,3,0,"td",82),c.Rb()),2&e){const e=c.Ac(4),t=c.gc(3);c.zb(1),c.Eb("p-0",t.modalIsEdit),c.zb(1),c.nc("ngIf",!t.modalIsEdit)("ngIfElse",e),c.zb(3),c.nc("ngIf",t.modalIsEdit)}}function tX(e,t){1&e&&(c.Sb(0,"div",110),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function nX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",264),c.cc("click",function(){c.Dc(e);const t=c.gc(3);return t.onInsertRow(t.entryToEdit.ResourceDefinitions)}),c.Nb(1,"fa-icon",112),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function iX(e,t){if(1&e&&(c.Sb(0,"table",80),c.Sb(1,"tbody"),c.Jc(2,eX,6,5,"tr",180),c.Rb(),c.Rb(),c.Jc(3,tX,3,3,"div",86),c.Jc(4,nX,4,3,"button",260)),2&e){const e=c.gc(2);c.zb(2),c.nc("ngForOf",e.entryToEdit.ResourceDefinitions),c.zb(1),c.nc("ngIf",!e.modalIsEdit&&0===(null==e.entryToEdit.ResourceDefinitions?null:e.entryToEdit.ResourceDefinitions.length)),c.zb(1),c.nc("ngIf",e.modalIsEdit)}}function cX(e,t){1&e&&(c.Sb(0,"span",25),c.Nb(1,"fa-icon",26),c.Lc(2,"\xa0 "),c.Rb())}function oX(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(3);c.zb(1),c.Mc(t.ws.getMultilingualValue("RelationDefinition",e.NotedRelationDefinitionId,"TitleSingular"))}}function rX(e,t){1&e&&c.Ob(0)}function sX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relation-definitions-picker",104,268),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().$implicit.NotedRelationDefinitionId=t}),c.Rb(),c.Jc(2,rX,1,0,"ng-container",44)}if(2&e){const e=c.Ac(1),t=c.gc().$implicit;c.gc(3);const n=c.Ac(11);c.nc("ngModel",t.NotedRelationDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(3,SB,e,null==t||null==t.serverErrors?null:t.serverErrors.NotedRelationDefinitionId))}}function lX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",83),c.Sb(1,"button",108),c.cc("click",function(){c.Dc(e);const t=c.gc().$implicit,n=c.gc(3);return n.onDeleteRow(t,n.entryToEdit.NotedRelationDefinitions)}),c.Nb(2,"fa-icon",109),c.Rb(),c.Rb()}}function aX(e,t){if(1&e&&(c.Sb(0,"tr"),c.Sb(1,"td"),c.Jc(2,oX,2,1,"span",30),c.Jc(3,sX,3,6,"ng-template",null,267,c.Kc),c.Rb(),c.Jc(5,lX,3,0,"td",262),c.Rb()),2&e){const e=c.Ac(4),t=c.gc(3);c.zb(1),c.Eb("p-0",t.modalIsEdit),c.zb(1),c.nc("ngIf",!t.modalIsEdit)("ngIfElse",e),c.zb(3),c.nc("ngIf",t.modalIsEdit)}}function uX(e,t){1&e&&(c.Sb(0,"div",110),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function dX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",264),c.cc("click",function(){c.Dc(e);const t=c.gc(3);return t.onInsertRow(t.entryToEdit.NotedRelationDefinitions)}),c.Nb(1,"fa-icon",112),c.Lc(2),c.hc(3,"translate"),c.Rb()}2&e&&(c.zb(2),c.Nc("\xa0\xa0",c.ic(3,1,"Add")," "))}function bX(e,t){if(1&e&&(c.Sb(0,"table",80),c.Sb(1,"tbody"),c.Jc(2,aX,6,5,"tr",180),c.Rb(),c.Rb(),c.Jc(3,uX,3,3,"div",86),c.Jc(4,dX,4,3,"button",260)),2&e){const e=c.gc(2);c.zb(2),c.nc("ngForOf",e.entryToEdit.NotedRelationDefinitions),c.zb(1),c.nc("ngIf",!e.modalIsEdit&&0===(null==e.entryToEdit.NotedRelationDefinitions?null:e.entryToEdit.NotedRelationDefinitions.length)),c.zb(1),c.nc("ngIf",e.modalIsEdit)}}function gX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",239),c.Sb(1,"h5",240),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",241),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",242),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",243),c.Sb(8,"div",249),c.Sb(9,"div",250),c.Sb(10,"label",251),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"div"),c.Lc(14),c.Rb(),c.Rb(),c.Sb(15,"div",250),c.Sb(16,"label",251),c.Lc(17),c.hc(18,"translate"),c.Rb(),c.Sb(19,"div"),c.Jc(20,LY,2,1,"span",30),c.Jc(21,OY,7,8,"ng-template",null,252,c.Kc),c.Rb(),c.Rb(),c.Sb(23,"div",250),c.Sb(24,"label",251),c.Lc(25),c.hc(26,"translate"),c.Rb(),c.Sb(27,"div"),c.Jc(28,AY,2,1,"span",30),c.Jc(29,_Y,3,6,"ng-template",null,253,c.Kc),c.Rb(),c.Rb(),c.Sb(31,"div",250),c.Sb(32,"label",251),c.Lc(33),c.hc(34,"translate"),c.Rb(),c.Sb(35,"div"),c.Jc(36,JY,2,1,"span",30),c.Jc(37,FY,3,6,"ng-template",null,254,c.Kc),c.Rb(),c.Rb(),c.Rb(),c.Sb(39,"ul",255,256),c.cc("activeIdChange",function(t){return c.Dc(e),c.gc().activeEntryTab=t}),c.Sb(41,"li",257),c.Sb(42,"a",12),c.Jc(43,VY,3,0,"span",13),c.Sb(44,"span",14),c.Lc(45),c.hc(46,"translate"),c.Rb(),c.Rb(),c.Jc(47,QY,5,3,"ng-template",15),c.Rb(),c.Sb(48,"li",258),c.Sb(49,"a",12),c.Jc(50,WY,3,0,"span",13),c.Sb(51,"span",14),c.Lc(52),c.hc(53,"translate"),c.Rb(),c.Rb(),c.Jc(54,iX,5,3,"ng-template",15),c.Rb(),c.Sb(55,"li",259),c.Sb(56,"a",12),c.Jc(57,cX,3,0,"span",13),c.Sb(58,"span",14),c.Lc(59),c.hc(60,"translate"),c.Rb(),c.Rb(),c.Jc(61,bX,5,3,"ng-template",15),c.Rb(),c.Rb(),c.Nb(62,"div",24),c.Rb(),c.Sb(63,"div",246),c.Sb(64,"button",247),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(65,"fa-icon",248),c.Lc(66),c.hc(67,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(22),t=c.Ac(30),n=c.Ac(38),i=c.Ac(40),o=c.gc();c.zb(2),c.Nc(" ",c.ic(3,25,"LineDefinitionEntry")," "),c.zb(9),c.Mc(c.ic(12,27,"LineDefinitionColumn_EntryIndex")),c.zb(3),c.Nc(" ",o.entryIndex," "),c.zb(3),c.Mc(c.ic(18,29,"LineDefinitionEntry_Direction")),c.zb(3),c.nc("ngIf",!o.modalIsEdit)("ngIfElse",e),c.zb(5),c.Mc(c.ic(26,31,"LineDefinitionEntry_ParentAccountType")),c.zb(3),c.nc("ngIf",!o.modalIsEdit)("ngIfElse",t),c.zb(5),c.Mc(c.ic(34,33,"LineDefinitionEntry_EntryType")),c.zb(3),c.nc("ngIf",!o.modalIsEdit)("ngIfElse",n),c.zb(3),c.nc("activeId",o.activeEntryTab)("destroyOnHide",!0),c.zb(4),c.nc("ngIf",o.showRelationDefinitionsError(o.entryToEdit)),c.zb(2),c.Oc("",c.ic(46,35,"LineDefinitionEntry_RelationDefinitions")," (",null==o.entryToEdit.RelationDefinitions?null:o.entryToEdit.RelationDefinitions.length,")"),c.zb(5),c.nc("ngIf",o.showResourceDefinitionsError(o.entryToEdit)),c.zb(2),c.Oc("",c.ic(53,37,"LineDefinitionEntry_ResourceDefinitions")," (",null==o.entryToEdit.ResourceDefinitions?null:o.entryToEdit.ResourceDefinitions.length,")"),c.zb(5),c.nc("ngIf",o.showNotedRelationDefinitionsError(o.entryToEdit)),c.zb(2),c.Oc("",c.ic(60,39,"LineDefinitionEntry_NotedRelationDefinitions")," (",null==o.entryToEdit.NotedRelationDefinitions?null:o.entryToEdit.NotedRelationDefinitions.length,")"),c.zb(3),c.nc("ngbNavOutlet",i),c.zb(4),c.Nc(" \xa0",c.ic(67,41,"Done")," ")}}function fX(e,t){if(1&e&&(c.Sb(0,"span",272),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e()," ")}}function mX(e,t){if(1&e&&(c.Sb(0,"div",270),c.Jc(1,fX,2,1,"span",271),c.Rb()),2&e){const e=c.gc(),t=e.control,n=e.serverErrors,i=c.gc();c.zb(1),c.nc("ngForOf",i.errors(t,n))}}function hX(e,t){if(1&e&&c.Jc(0,mX,2,1,"div",269),2&e){const e=t.control,n=t.serverErrors,i=c.gc();c.nc("ngIf",i.invalid(e,n))}}function pX(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function SX(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function vX(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"EditDefinition")," ")}const IX=function(){return[]};let MX=(()=>{class e extends mn.a{constructor(e,t,n,i){super(),this.modalService=e,this.workspace=t,this.api=n,this.translate=i,this.expand="Columns,Entries.ParentAccountType,Entries.EntryType,Entries.RelationDefinitions.RelationDefinition,\nEntries.ResourceDefinitions.ResourceDefinition,Entries.NotedRelationDefinitions.NotedRelationDefinition,GenerateParameters,\nWorkflows.Signatures.Role,Workflows.Signatures.User,Workflows.Signatures.ProxyRole,StateReasons",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText),e.AllowSelectiveSigning=!1,e.ViewDefaultsToForm=!1,e.BarcodeBeepsEnabled=!0,e.Columns=[],e.Entries=[],e.GenerateParameters=[],e.StateReasons=[],e.Workflows=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Columns&&t.Columns.forEach(e=>{e.Id=null}),t.Entries&&t.Entries.forEach(e=>{e.Id=null,e.RelationDefinitions.forEach(e=>{e.Id=null}),e.ResourceDefinitions.forEach(e=>{e.Id=null}),e.NotedRelationDefinitions.forEach(e=>{e.Id=null})}),t.GenerateParameters&&t.GenerateParameters.forEach(e=>{e.Id=null}),t.StateReasons&&t.StateReasons.forEach(e=>{e.Id=null}),t.Workflows&&t.Workflows.forEach(e=>{e.Id=null,e.Signatures.forEach(e=>{e.Id=null})}),t}return console.error("Cloning a non existing item"),null},this.isInactive=e=>e&&e.Id===this.ws.definitions.ManualLinesDefinitionId?"Error_CannotModifySystemItem":null,this.columnNameDisplay=e=>{let t;switch(e){case"Memo":t="";break;case"PostingDate":case"Boolean1":case"Decimal1":case"Text1":t="Line_";break;default:t="Entry_"}let n=t+e;return n.endsWith("Id")&&(n=n.substr(0,n.length-2)),this.translate.instant(n)},this.stateDisplay=e=>{let t;return t=5===e?"Never":e>=0?"Line_State_"+e:"Line_State_minus_"+Math.abs(e),this.translate.instant(t)},this.directionDisplay=e=>1===e?this.translate.instant("Entry_Direction_Debit"):-1===e?this.translate.instant("Entry_Direction_Credit"):"",this.ruleTypeDisplay=e=>e?this.translate.instant("RuleType_"+e):"",this.predicateTypeDisplay=e=>e?this.translate.instant("PredicateType_"+e):"",this.visibilityDisplay=e=>Object(sB.h)("",this.translate).format(e),this.controlDisplay=e=>{const t=this.ws.definitions;if(this._controlChoicesDefinitions!==t){this._controlChoicesDefinitions=t,this._controlDisplayCache={};for(const e of this.controlSimpleChoices())this._controlDisplayCache[e.value]=e.name;for(const e of this.controlEntityChoices())this._controlDisplayCache[e.value]=e.name}const n=this._controlDisplayCache[e];return n?n():""},this.isEdit=!1,this.choicesBarcodeColumnIndexChanged=!0}get ws(){return this.workspace.currentTenant}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}get columnNameChoices(){return this._columnNameChoices||(this._columnNameChoices=lB.map(e=>({value:e,name:()=>this.columnNameDisplay(e)}))),this._columnNameChoices}isRequiredColumn(e){return"CenterId"===e.ColumnName||"CurrencyId"===e.ColumnName}canFilter(e){return!!e.ColumnName&&e.ColumnName.endsWith("Id")}canInherit(e){switch(e.ColumnName){case"PostingDate":case"Memo":case"CurrencyId":case"CenterId":case"CustodianId":case"RelationId":case"ResourceId":case"NotedRelationId":case"Quantity":case"UnitId":case"Time1":case"Duration":case"DurationUnitId":case"Time2":case"ExternalReference":case"ReferenceSourceId":case"InternalReference":return!0;default:return!1}}get stateChoices(){return this._stateChoices||(this._stateChoices=[0,1,2,3,4,5].map(e=>({value:e,name:()=>this.stateDisplay(e)}))),this._stateChoices}get toStateChoices(){return this._toStateChoices||(this._toStateChoices=[1,2,3,4].map(e=>({value:e,name:()=>this.stateDisplay(e)}))),this._toStateChoices}get negativeStateChoices(){return this._negativeStateChoices||(this._negativeStateChoices=[-1,-2,-3,-4].map(e=>({value:e,name:()=>this.stateDisplay(e)}))),this._negativeStateChoices}get ruleTypeChoices(){return this._ruleTypeChoices||(this._ruleTypeChoices=aB.map(e=>({value:e,name:()=>this.ruleTypeDisplay(e)}))),this._ruleTypeChoices}get predicateTypeChoices(){return this._predicateTypeChoices||(this._predicateTypeChoices=uB.map(e=>({value:e,name:()=>this.predicateTypeDisplay(e)}))),this._predicateTypeChoices}get functionalDisplay(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")}get functionalDecimals(){return this.ws.settings.FunctionalCurrencyDecimals}get functionalFormat(){const e=this.functionalDecimals;return`1.${e}-${e}`}get visibilityChoices(){if(!this._visibilityChoices){const e=Object(sB.h)("",this.translate);this._visibilityChoices=Object(Mi.c)(e)}return this._visibilityChoices}controlSimpleChoices(){return Object(Mi.i)(this.translate)}controlEntityChoices(){return Object(Mi.a)(this.workspace,this.translate,!0)}hasControlOptions(e){return!!e&&Object(Mi.e)(e.Control)}onControlOptions(e,t){e&&(this.selectedParam=e,this.isEdit=t,this.modalService.open(this.controlOptions,{windowClass:"t-dark-theme t-wider-modal"}))}createEntry(){return{Id:0,Direction:1,RelationDefinitions:[],ResourceDefinitions:[],NotedRelationDefinitions:[]}}createStateReason(){return{Id:0,State:-2,IsActive:!0}}createColumn(){return{Id:0,EntryIndex:0,InheritsFromHeader:0,VisibleState:0,RequiredState:0,ReadOnlyState:5}}onLineDefinitionEntryRelationDefinitions(e,t,n){this.activeEntryTab="relationDefinitions",this.onLineDefinitionEntryMore(e,t,n)}onLineDefinitionEntryResourceDefinitions(e,t,n){this.activeEntryTab="resourceDefinitions",this.onLineDefinitionEntryMore(e,t,n)}onLineDefinitionEntryNotedRelationDefinitions(e,t,n){this.activeEntryTab="notedRelationDefinitions",this.onLineDefinitionEntryMore(e,t,n)}onLineDefinitionEntryMore(e,t,n){e&&(this.entryToEdit=e,this.modalIsEdit=t,this.entryIndex=n,this.modalService.open(this.lineDefinitionEntryModal,{windowClass:"t-dark-theme t-wider-modal"}))}rowDrop(e,t){Object(j.h)(t,e.previousIndex,e.currentIndex)}onDeleteRow(e,t){const n=t.indexOf(e);n>=0&&t.splice(n,1)}onInsertRow(e,t){const n=t?t():{Id:0};e.push(n)}column_rowDrop(e,t){this.rowDrop(e,t.Columns),this.choicesBarcodeColumnIndexChanged=!0,t.BarcodeColumnIndex===e.previousIndex?t.BarcodeColumnIndex=e.currentIndex:e.previousIndex<t.BarcodeColumnIndex&&e.currentIndex>=t.BarcodeColumnIndex?t.BarcodeColumnIndex--:e.previousIndex>t.BarcodeColumnIndex&&e.currentIndex<=t.BarcodeColumnIndex&&t.BarcodeColumnIndex++}column_onDeleteRow(e,t){this.onDeleteRow(t.Columns[e],t.Columns),this.choicesBarcodeColumnIndexChanged=!0,t.BarcodeColumnIndex===e?delete t.BarcodeColumnIndex:t.BarcodeColumnIndex>e&&t.BarcodeColumnIndex--}column_onInsertRow(e){this.onInsertRow(e.Columns,this.createColumn),this.choicesBarcodeColumnIndexChanged=!0}invalid(e,t){return Object(Qp.c)(e,t)}errors(e,t){return Object(Qp.d)(e,t,this.translate)}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(Qp.b)(e.serverErrors[t]))}showGeneralError(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.Code)||Object(Qp.b)(e.serverErrors.TitleSingular)||Object(Qp.b)(e.serverErrors.TitleSingular2)||Object(Qp.b)(e.serverErrors.TitleSingular3)||Object(Qp.b)(e.serverErrors.TitlePlural)||Object(Qp.b)(e.serverErrors.TitlePlural2)||Object(Qp.b)(e.serverErrors.TitlePlural3)||Object(Qp.b)(e.serverErrors.Description)||Object(Qp.b)(e.serverErrors.Description2)||Object(Qp.b)(e.serverErrors.Description3))}showColumnsError(e){return!!e.Columns&&e.Columns.some(e=>this.weakEntityErrors(e))}showEntriesError(e){return!!e.Entries&&e.Entries.some(e=>this.weakEntityErrors(e)||this.showRelationDefinitionsError(e)||this.showResourceDefinitionsError(e)||this.showNotedRelationDefinitionsError(e))}showRelationDefinitionsError(e){return!!e.RelationDefinitions&&e.RelationDefinitions.some(e=>this.weakEntityErrors(e))}showResourceDefinitionsError(e){return!!e.ResourceDefinitions&&e.ResourceDefinitions.some(e=>this.weakEntityErrors(e))}showNotedRelationDefinitionsError(e){return!!e.NotedRelationDefinitions&&e.NotedRelationDefinitions.some(e=>this.weakEntityErrors(e))}showPreprocessScriptError(e){return!!e.serverErrors&&Object(Qp.b)(e.serverErrors.PreprocessScript)}showValidateScriptError(e){return!!e.serverErrors&&Object(Qp.b)(e.serverErrors.ValidateScript)}showGenerateScriptError(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.GenerateLabel)||Object(Qp.b)(e.serverErrors.GenerateLabel2)||Object(Qp.b)(e.serverErrors.GenerateLabel3)||Object(Qp.b)(e.serverErrors.GenerateScript))||!!e.GenerateParameters&&e.GenerateParameters.some(e=>this.weakEntityErrors(e))}showGenerateParametersError(e){return!!e.serverErrors&&Object(Qp.b)(e.serverErrors.ControlOptions)}showWorkflowsError(e){return!!e.Workflows&&e.Workflows.some(e=>!!e.Signatures&&e.Signatures.some(e=>this.weakEntityErrors(e)))}showStateReasonsError(e){return!!e.StateReasons&&e.StateReasons.some(e=>this.weakEntityErrors(e))}Signatures(e,t){const n=e.Workflows.find(e=>e.ToState===t);return n?n.Signatures:[]}onInsertSignature(e,t){let n=e.Workflows.find(e=>e.ToState===t);n||(n={ToState:t,Signatures:[]},e.Workflows.push(n)),this.onInsertRow(n.Signatures)}onDeleteSignature(e,t,n){const i=e.Workflows.find(e=>e.ToState===t);this.onDeleteRow(n,i.Signatures),0===i.Signatures.length&&this.onDeleteRow(i,e.Workflows)}signaturesCount(e){if(e&&e.Workflows){let t=0;for(const n of e.Workflows)t+=n.Signatures?n.Signatures.length:0;return t}return 0}showAdvancedError(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.BarcodeColumnIndex)||Object(Qp.b)(e.serverErrors.BarcodeProperty)||Object(Qp.b)(e.serverErrors.BarcodeExistingItemHandling)||Object(Qp.b)(e.serverErrors.BarcodeBeepsEnabled))}get activeTab(){return this.ws.miscState.lineDefinition_activeTab||"general"}set activeTab(e){this.ws.miscState.lineDefinition_activeTab=e}get activeEntryTab(){return this.ws.miscState.lineDefinition_activeEntryTab||"relationDefinitions"}set activeEntryTab(e){this.ws.miscState.lineDefinition_activeEntryTab=e}onPreprocessScriptKeydown(e,t,n){Object(V.p)(e,t,e=>n.PreprocessScript=e)}onValidateScriptKeydown(e,t,n){Object(V.p)(e,t,e=>n.ValidateScript=e)}onGenerateScriptKeydown(e,t,n){Object(V.p)(e,t,e=>n.GenerateScript=e)}isBarcodeColumnIndexSpecified(e){return Object(V.n)(e.BarcodeColumnIndex)}display_BarcodeColumnIndex(e){const t=e.BarcodeColumnIndex;if(Object(V.n)(t)){const n=e.Columns[t];if(n)return this.ws.getMultilingualValueImmediate(n,"Label")||n.ColumnName}return""}choices_BarcodeColumnIndex(e){return(this.choicesBarcodeColumnIndexChanged||this.choicesBarcodeColumnIndexModel!==e)&&(this.choicesBarcodeColumnIndexChanged=!1,this.choicesBarcodeColumnIndexModel=e,this.choicesBarcodeColumnIndexResult=e.Columns.map((e,t)=>({name:()=>this.ws.getMultilingualValueImmediate(e,"Label")||e.ColumnName,value:t}))),this.choicesBarcodeColumnIndexResult}display_BarcodeExistingItemHandling(e){return Object(rB.a)(this.workspace,this.translate).properties.BarcodeExistingItemHandling.format(e.BarcodeExistingItemHandling)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(G.t),c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-line-definitions-details"]],viewQuery:function(e,t){if(1&e&&(c.Qc(dB,3),c.Qc(bB,3)),2&e){let e;c.zc(e=c.dc())&&(t.lineDefinitionEntryModal=e.first),c.zc(e=c.dc())&&(t.controlOptions=e.first)}},features:[c.wb],decls:18,vars:13,consts:[["collection","LineDefinition","theme","dark",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],["controlOptions",""],["lineDefinitionEntryModal",""],["errorsTemplate",""],["activate",""],["deactivate",""],["editDefinition",""],["ngbNav","",1,"w-100","nav-tabs","t-dark-tabs","t-dark-border",3,"activeId","destroyOnHide","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","general"],["ngbNavLink",""],["class","text-danger t-light-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["ngbNavItem","entries"],["ngbNavItem","columns"],["ngbNavItem","generateScript"],["ngbNavItem","preprocessScript"],["ngbNavItem","validateScript"],["ngbNavItem","workflows"],["ngbNavItem","stateReasons"],["ngbNavItem","advanced"],[1,"w-100","overflow-auto",3,"ngbNavOutlet"],[1,"text-danger","t-light-danger"],["icon","exclamation"],[1,"row","m-0","pt-2","pt-sm-3"],[1,"form-group","t-form-group","t-text-whitish"],["for","titleplural",1,"small"],[4,"ngIf","ngIfElse"],["titlepluraltemplate",""],["class","form-group t-form-group t-text-whitish",4,"ngIf"],["for","titlesingular",1,"small"],["titlesingulartemplate",""],["for","code",1,"small"],["codetemplate",""],["for","defaultstoform",1,"small"],["viewdefaultstoformtemplate",""],[1,"w-100"],["for","description",1,"small"],["descriptiontemplate",""],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlepluralmodel","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titleplural2",1,"small"],["titleplural2template",""],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2model","ngModel"],["for","titleplural3",1,"small"],["titleplural3template",""],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3model","ngModel"],["id","titlesingular","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingularmodel","ngModel"],["for","titlesingular2",1,"small"],["titlesingular2template",""],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2model","ngModel"],["for","titlesingular3",1,"small"],["titlesingular3template",""],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3model","ngModel"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["codemodel","ngModel"],[1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["defaultstoformmodel","ngModel"],["value","true"],["value","false"],["id","description","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["descriptionmodel","ngModel"],["for","description2",1,"small"],["description2template",""],["id","description2","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["description2model","ngModel"],["for","description3",1,"small"],["description3template",""],["id","description3","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["description3model","ngModel"],[1,"t-text-whitish","pb-1"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[1,"small","font-weight-normal"],["style","width: 1px;",4,"ngIf"],[2,"width","1px"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","font-italic mx-2",4,"ngIf"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal",3,"click",4,"ngIf"],["cdkDrag","","cdkDragLockAxis","y"],[4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","","class","px-2","style","cursor: move;",4,"ngIf"],["directiontemplate",""],["parentaccounttypetemplate",""],["entrytypetemplate",""],[1,"btn","btn-sm","t-text-whitish","btn-link","py-0","font-weight-normal",3,"click"],["class","text-danger t-light-danger t-vertical-align-middle",4,"ngIf"],[4,"ngIf"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["directionmodel","ngModel"],["value","1"],["value","-1"],["theme","dark",3,"ngModel","ngModelChange"],["parentaccounttypemodel","ngModel"],["entrytypemodel","ngModel"],[1,"text-danger","t-light-danger","t-vertical-align-middle"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],[1,"font-italic","mx-2"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],["icon","plus"],["columnnametemplate",""],["entryindextemplate",""],["labeltemplate",""],[3,"p-0",4,"ngIf"],["filtertemplate",""],["visiblestatetemplate",""],["requiredstatetemplate",""],["readonlystatetemplate",""],["inheritsfromheadertemplate",""],["columnnamemodel","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["entryindexmodel","ngModel"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["labelmodel","ngModel"],["label2template",""],["label2model","ngModel"],["label3template",""],["label3model","ngModel"],["noFilter",""],["filtermodel","ngModel"],["visiblestatemodel","ngModel"],["requiredstatemodel","ngModel"],["readonlystatemodel","ngModel"],["inheritsFromNone",""],["inheritsfromheadermodel","ngModel"],["value","0"],["value","2"],["for","generatelabel",1,"small"],["generatelabeltemplate",""],[1,"form-group","t-wide-form-group","t-text-whitish"],[1,"small"],[1,"t-wide-form-group"],["for","generatescript",1,"small","t-text-whitish"],["generatescripttemplate",""],["id","generatelabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabelmodel","ngModel"],["for","generatelabel2",1,"small"],["generatelabel2template",""],["id","generatelabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabel2model","ngModel"],["for","generatelabel3",1,"small"],["generatelabel3template",""],["id","generatelabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabel3model","ngModel"],["keytemplate",""],["visibilitytemplate",""],["controltemplate",""],["class","btn btn-secondary t-white-button t-text-whitish btn-sm py-0 px-1 align-baseline",3,"click",4,"ngIf"],["keymodel","ngModel"],[1,"form-control","t-studio-input",2,"min-width","120px",3,"ngModel","ngModelChange"],["visibilitymodel","ngModel"],["controlmodel","ngModel"],["disabled",""],["icon","ellipsis-h"],["class","text-muted bg-dark p-2 pb-5 font-italic",4,"ngIf"],["class","t-text-whitish bg-dark pb-4 t-code overflow-auto px-1",4,"ngIf"],[1,"text-muted","bg-dark","p-2","pb-5","font-italic"],[1,"t-text-whitish","bg-dark","pb-4","t-code","overflow-auto","px-1"],["id","generatescript","spellcheck","false","rows","15",1,"w-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["generatescriptnmodel","ngModel","gstextarea",""],["preprocessscripttemplate",""],["spellcheck","false","rows","25",1,"w-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["preprocessscriptnmodel","ngModel","pstextarea",""],["validatescripttemplate",""],["validatescriptnmodel","ngModel","pstextarea",""],[4,"ngFor","ngForOf"],[1,"mt-3"],[2,"width","60%"],[2,"width","40%"],[1,"d-flex","align-items-baseline"],["ruletypetemplate",""],["predicatetypetemplate",""],["ruletypemodel","ngModel"],["roletemplate",""],["class","font-weight-bold",4,"ngIf"],[1,"font-weight-bold"],["theme","dark","id","role","filter","IsPublic eq false",1,"d-inline-block",3,"ngModel","ngModelChange"],["rolemodel","ngModel"],["usertemplate",""],["theme","dark","id","user",3,"ngModel","ngModelChange"],["usermodel","ngModel"],["ruletypeentryindextemplate",""],["id","ruletypeentryindex","type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["ruletypeentryindexmodel","ngModel"],["class","font-weight-bold",4,"ngIf","ngIfElse"],["proxyroletemplate",""],["theme","dark","id","proxyrole","filter","IsPublic eq false",3,"ngModel","ngModelChange"],["proxyrolemodel","ngModel"],["predicatetypemodel","ngModel"],["value",""],["valuetemplate",""],["predicatetypeentryindextemplate",""],["theme","dark",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelChange"],["valuemodel","ngModel"],["id","predicatetypeentryindex","type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["predicatetypeentryindexmodel","ngModel"],["statetemplate",""],["nametemplate",""],["isactivetemplate",""],["statemodel","ngModel"],["namemodel","ngModel"],["name2template",""],["name2model","ngModel"],["name3template",""],["name3model","ngModel"],["isactivemodel","ngModel"],["for","barcodecolumnindex",1,"small"],["barcodecolumnindextemplate",""],["barcodecolumnindexmodel","ngModel"],["for","barcodeproperty",1,"small"],["barcodepropertytemplate",""],["for","barcodeexistingitemhandling",1,"small"],["barcodeexistingitemhandlingtemplate",""],["for","barcodebeepsenabled",1,"small"],["barcodebeepsenabledtemplate",""],["id","barcodeproperty","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["barcodepropertymodel","ngModel"],["required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["barcodeexistingitemhandlingmodel","ngModel"],["value","AddNewLine"],["value","IncrementQuantity"],["value","ThrowError"],["value","DoNothing"],["barcodebeepsenabledmodel","ngModel"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[3,"control","isEdit","ngModel","ngModelChange"],["controloptions","ngModel"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["icon","check"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["for","label",1,"small"],["modaldirectiontemplate",""],["modalparentaccounttypetemplate",""],["modalentrytypetemplate",""],["ngbNav","",1,"w-100","pt-3","pt-sm-4","nav-tabs","t-dark-tabs","t-dark-border",3,"activeId","destroyOnHide","activeIdChange"],["entryTabs","ngbNav"],["ngbNavItem","relationDefinitions"],["ngbNavItem","resourceDefinitions"],["ngbNavItem","notedRelationDefinitions"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal mb-1",3,"click",4,"ngIf"],["relationdefinitiontemplate",""],["style","width:1px",4,"ngIf"],["relationdefinitionmodel","ngModel"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1",3,"click"],["resourcedefinitiontemplate",""],["resourcedefinitionmodel","ngModel"],["notedrelationdefinitiontemplate",""],["notedrelationdefinitionmodel","ngModel"],["class","text-wrap",4,"ngIf"],[1,"text-wrap"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,gB,2,1,"ng-template",null,1,c.Kc),c.Jc(4,xY,66,43,"ng-template",null,2,c.Kc),c.Jc(6,zY,16,14,"ng-template",null,3,c.Kc),c.Jc(8,gX,68,43,"ng-template",null,4,c.Kc),c.Jc(10,hX,1,1,"ng-template",null,5,c.Kc),c.Jc(12,pX,2,3,"ng-template",null,6,c.Kc),c.Jc(14,SX,2,3,"ng-template",null,7,c.Kc),c.Jc(16,vX,2,3,"ng-template",null,8,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5);c.nc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"LineDefinitions"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.qc(12,IX))("isInactive",t.isInactive)}},directives:[q.a,G.v,G.x,G.y,C.l,G.w,G.A,ee.a,te.c,te.m,te.i,te.j,C.p,te.n,te.k,te.o,j.f,C.k,j.b,j.d,j.e,j.c,eR,WR,te.l,$s,La,vn,Xx,KR,ZR],pipes:[K.c,Ab],encapsulation:2}),e})();function RX(e,t){if(1&e&&(c.Sb(0,"div",5),c.Sb(1,"span",6),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",7),c.Sb(4,"div",8),c.Nb(5,"t-auto-cell",9),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("LineDefinition",e,"TitlePlural")),c.zb(3),c.nc("entity",n.c[e])}}function yX(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"LineDefinition"),"\n")}function DX(e,t){if(1&e&&(c.Sb(0,"span",10),c.Nb(1,"t-auto-cell",11),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function wX(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"SavedByMe")," ")}const EX=function(){return[]},CX=function(e){return{template:e,expression:"SavedById eq me"}},xX=function(e){return[e]},TX=function(e){return{SavedBy:e}};let zX=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.expand=""}get c(){return this.ws.LineDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-line-definitions-master"]],features:[c.wb],decls:10,vars:19,consts:[["collection","LineDefinition","selectDefault","Code","selectForTiles","Code,TitlePlural","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","LineDefinition","path","Code",3,"entity"],[1,"text-truncate"],["collection","LineDefinition",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,RX,6,2,"ng-template",null,1,c.Kc),c.Jc(4,yX,2,3,"ng-template",null,2,c.Kc),c.Jc(6,DX,2,1,"ng-template",null,3,c.Kc),c.Jc(8,wX,2,3,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"LineDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(12,EX))("filterDefinition",c.rc(17,TX,c.rc(15,xX,c.rc(13,CX,o))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();function LX(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-line-definitions-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function kX(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-line-definitions-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let OX=(()=>{class e extends Js{}return e.\u0275fac=function(t){return AX(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-line-definitions-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","LineDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,LX,2,3,"ng-template",null,1,c.Kc),c.Jc(3,kX,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,MX,zX],encapsulation:2}),e})();const AX=c.Ub(OX),NX=["lineDefinitionModal"];function _X(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Hide")," ")}function JX(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Show")," ")}function PX(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Archive")," ")}function FX(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"TitleSingular",n.ws)||c.ic(2,1,"Untitled"))}}function VX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",68),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleDefinition()}),c.Sb(1,"div",69),c.Nb(2,"fa-icon",70),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.nc("flip",e.flipIcon(!1)),c.zb(2),c.Mc(c.ic(5,2,"Definition"))}}function qX(e,t){1&e&&c.Nb(0,"fa-icon",71)}function jX(e,t){1&e&&c.Ob(0)}const $X=function(){return{updateOn:"blur"}},UX=function(e,t){return{control:e,serverErrors:t}};function KX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",72),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",73,74),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Code=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Code")}),c.Rb(),c.Jc(6,jX,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Code)),c.zb(2),c.Mc(c.ic(3,7,"Code")),c.zb(2),c.nc("ngModel",t.Code)("ngModelOptions",c.qc(9,$X)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,UX,e,null==t.serverErrors?null:t.serverErrors.Code))}}function BX(e,t){1&e&&c.Ob(0)}function HX(e,t){1&e&&c.Ob(0)}function QX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",75),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",76,77),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitleSingular2")}),c.Rb(),c.Jc(6,HX,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),c.zb(2),c.Mc(c.ic(3,7,"TitleSingular")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.TitleSingular2)("ngModelOptions",c.qc(9,$X)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,UX,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function WX(e,t){1&e&&c.Ob(0)}function GX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",78),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",79,80),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitleSingular3")}),c.Rb(),c.Jc(6,WX,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),c.zb(2),c.Mc(c.ic(3,7,"TitleSingular")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.TitleSingular3)("ngModelOptions",c.qc(9,$X)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,UX,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function YX(e,t){1&e&&c.Ob(0)}function XX(e,t){1&e&&c.Ob(0)}function ZX(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",81),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",82,83),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitlePlural2")}),c.Rb(),c.Jc(6,XX,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),c.zb(2),c.Mc(c.ic(3,7,"TitlePlural")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.TitlePlural2)("ngModelOptions",c.qc(9,$X)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,UX,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function eZ(e,t){1&e&&c.Ob(0)}function tZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",84),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",85,86),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitlePlural3")}),c.Rb(),c.Jc(6,eZ,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),c.zb(2),c.Mc(c.ic(3,7,"TitlePlural")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.TitlePlural3)("ngModelOptions",c.qc(9,$X)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,UX,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function nZ(e,t){1&e&&c.Ob(0)}function iZ(e,t){1&e&&c.Ob(0)}function cZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",87),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"textarea",88,89),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Description2")}),c.Rb(),c.Jc(6,iZ,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description2)),c.zb(2),c.Mc(c.ic(3,7,"Description")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.Description2)("ngModelOptions",c.qc(9,$X)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,UX,e,null==t.serverErrors?null:t.serverErrors.Description2))}}function oZ(e,t){1&e&&c.Ob(0)}function rZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",90),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"textarea",91,92),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Description3")}),c.Rb(),c.Jc(6,oZ,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description3)),c.zb(2),c.Mc(c.ic(3,7,"Description")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.Description3)("ngModelOptions",c.qc(9,$X)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,UX,e,null==t.serverErrors?null:t.serverErrors.Description3))}}function sZ(e,t){1&e&&c.Nb(0,"fa-icon",71)}function lZ(e,t){if(1&e&&(c.Sb(0,"option",93),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function aZ(e,t){1&e&&c.Ob(0)}function uZ(e,t){1&e&&c.Nb(0,"fa-icon",71)}function dZ(e,t){1&e&&(c.Sb(0,"div",106),c.Lc(1," \u200c "),c.Rb())}function bZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",100),c.Sb(1,"div",101),c.Jc(2,uZ,1,0,"fa-icon",18),c.Sb(3,"span",102),c.Lc(4),c.Rb(),c.Sb(5,"button",95),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(3).model;return c.gc().onConfigureLineDefinition(n,i)}),c.hc(6,"translate"),c.Nb(7,"fa-icon",103),c.Rb(),c.Lc(8," \xa0 "),c.Sb(9,"button",95),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(3).model;return c.gc().onDeleteLineDefinition(n,i)}),c.hc(10,"translate"),c.Nb(11,"fa-icon",104),c.Rb(),c.Rb(),c.Jc(12,dZ,2,0,"div",105),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(4);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(2),c.Nc(" ",n.ws.getMultilingualValue("LineDefinition",e.LineDefinitionId,"TitlePlural")," "),c.zb(1),c.nc("title",c.ic(6,4,"Configure")),c.zb(4),c.nc("title",c.ic(10,6,"Delete"))}}function gZ(e,t){if(1&e&&(c.Sb(0,"span",107),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e," ")}}function fZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",94),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Lc(4,"\xa0 "),c.Sb(5,"button",95),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onCreateLineDefinition(t)}),c.hc(6,"translate"),c.Nb(7,"fa-icon",96),c.Rb(),c.Sb(8,"div",97),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc(2).model;return c.gc().rowDrop(t,n.LineDefinitions)}),c.Jc(9,bZ,13,8,"div",98),c.Rb(),c.Jc(10,gZ,2,1,"span",99),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(2),c.Mc(c.ic(3,4,"DocumentDefinition_LineDefinitions")),c.zb(3),c.nc("title",c.ic(6,6,"Create")),c.zb(4),c.nc("ngForOf",e.LineDefinitions),c.zb(1),c.nc("ngForOf",null==e.serverErrors?null:e.serverErrors.LineDefinitions)}}function mZ(e,t){1&e&&c.Ob(0)}function hZ(e,t){1&e&&c.Ob(0)}const pZ=function(){return{prop:"PostingDate",propLower:"postingdate",fieldName:"Document_PostingDate"}};function SZ(e,t){if(1&e&&(c.Qb(0),c.Jc(1,hZ,1,0,"ng-container",25),c.Pb()),2&e){c.gc();const e=c.Ac(95);c.zb(1),c.nc("ngTemplateOutlet",e)("ngTemplateOutletContext",c.qc(2,pZ))}}function vZ(e,t){1&e&&c.Ob(0)}function IZ(e,t){1&e&&c.Ob(0)}const MZ=function(){return{prop:"Memo",propLower:"memo",fieldName:"Memo"}};function RZ(e,t){if(1&e&&(c.Qb(0),c.Jc(1,IZ,1,0,"ng-container",25),c.Pb()),2&e){c.gc();const e=c.Ac(95);c.zb(1),c.nc("ngTemplateOutlet",e)("ngTemplateOutletContext",c.qc(2,MZ))}}function yZ(e,t){1&e&&c.Ob(0)}function DZ(e,t){1&e&&c.Ob(0)}function wZ(e,t){if(1&e&&(c.Sb(0,"option",93),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function EZ(e,t){1&e&&c.Ob(0)}const CZ=function(e){return{0:e}};function xZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",108),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"select",109,110),c.cc("ngModelChange",function(n){c.Dc(e);const i=t.prop;return c.gc(2).model[i+"Visibility"]=n})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Jc(7,wZ,2,2,"option",35),c.Rb(),c.Jc(8,EZ,1,0,"ng-container",25),c.Rb()}if(2&e){const e=t.prop,n=t.propLower,i=t.fieldName,o=c.Ac(6),r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.Eb("is-invalid",s.invalid(o,s.serverErrors(r,e+"Visibility"))),c.zb(1),c.pc("for","",n,"visibility"),c.zb(1),c.Mc(c.jc(3,9,"Field0Visibility",c.rc(14,CZ,c.ic(4,12,i||"Entity_"+e)))),c.zb(3),c.pc("id","",n,"visibility"),c.nc("ngModel",r[e+"Visibility"]),c.zb(2),c.nc("ngForOf",s.visibilityChoices),c.zb(1),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(16,UX,o,s.serverErrors(r,e+"Visibility")))}}function TZ(e,t){1&e&&c.Nb(0,"fa-icon",71)}function zZ(e,t){if(1&e&&(c.Sb(0,"option",93),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function LZ(e,t){1&e&&c.Ob(0)}function kZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",111),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=c.gc(2).model;return c.gc().onIconClick(i,n)}),c.Nb(1,"fa-icon",112),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2).model;c.Eb("t-highlighted",e.value===n.MainMenuIcon),c.nc("title",e.value),c.zb(1),c.nc("icon",e.value)}}function OZ(e,t){1&e&&c.Ob(0)}function AZ(e,t){1&e&&c.Ob(0)}function NZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",113),c.Sb(1,"div",114),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeHidden(t)}),c.Sb(2,"span",115),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"div",114),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeVisible(t)}),c.Sb(6,"span",115),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Rb(),c.Sb(9,"div",114),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeArchived(t)}),c.Sb(10,"span",115),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(1),c.Eb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),c.zb(2),c.Mc(c.ic(4,15,"Definition_State_Hidden")),c.zb(2),c.Eb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),c.zb(2),c.Mc(c.ic(8,17,"Definition_State_Visible")),c.zb(2),c.Eb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),c.zb(2),c.Mc(c.ic(12,19,"Definition_State_Archived"))}}const _Z=function(){return{prop:"Clearance",propLower:"clearance",fieldName:"Document_Clearance"}},JZ=function(){return{prop:"Center",propLower:"center",fieldName:"Document_Center"}},PZ=function(e){return{control:null,serverErrors:e}};function FZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",9),c.Jc(1,VX,6,4,"div",10),c.Sb(2,"div",11),c.Sb(3,"div",12),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleDefinition()}),c.Sb(4,"span"),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Sb(7,"div",13),c.Nb(8,"fa-icon",14),c.Rb(),c.Rb(),c.Sb(9,"div",15),c.Sb(10,"div",16),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("General")}),c.Lc(11," \xa0 "),c.Nb(12,"fa-icon",17),c.Lc(13),c.hc(14,"translate"),c.Jc(15,qX,1,0,"fa-icon",18),c.Rb(),c.Sb(16,"div",19),c.Jc(17,KX,7,13,"div",20),c.Sb(18,"div",21),c.Sb(19,"label",22),c.Lc(20),c.hc(21,"translate"),c.Rb(),c.Sb(22,"input",23,24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TitleSingular=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"TitleSingular")}),c.Rb(),c.Jc(24,BX,1,0,"ng-container",25),c.Rb(),c.Jc(25,QX,7,13,"div",20),c.Jc(26,GX,7,13,"div",20),c.Sb(27,"div",21),c.Sb(28,"label",26),c.Lc(29),c.hc(30,"translate"),c.Rb(),c.Sb(31,"input",27,28),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TitlePlural=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"TitlePlural")}),c.Rb(),c.Jc(33,YX,1,0,"ng-container",25),c.Rb(),c.Jc(34,ZX,7,13,"div",20),c.Jc(35,tZ,7,13,"div",20),c.Sb(36,"div",21),c.Sb(37,"label",29),c.Lc(38),c.hc(39,"translate"),c.Rb(),c.Sb(40,"textarea",30,31),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Description=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Description")}),c.Rb(),c.Jc(42,nZ,1,0,"ng-container",25),c.Rb(),c.Jc(43,cZ,7,13,"div",20),c.Jc(44,rZ,7,13,"div",20),c.Rb(),c.Sb(45,"div",16),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Definition")}),c.Lc(46," \xa0 "),c.Nb(47,"fa-icon",17),c.Lc(48),c.hc(49,"translate"),c.Jc(50,sZ,1,0,"fa-icon",18),c.Rb(),c.Sb(51,"div",19),c.Sb(52,"div",21),c.Sb(53,"label",32),c.Lc(54),c.hc(55,"translate"),c.Rb(),c.Sb(56,"select",33,34),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.DocumentType=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Jc(58,lZ,2,2,"option",35),c.Rb(),c.Jc(59,aZ,1,0,"ng-container",25),c.Rb(),c.Jc(60,fZ,11,8,"div",36),c.Jc(61,mZ,1,0,"ng-container",25),c.Jc(62,SZ,2,3,"ng-container",37),c.Jc(63,vZ,1,0,"ng-container",25),c.Jc(64,RZ,2,3,"ng-container",37),c.Sb(65,"div",21),c.Sb(66,"label",38),c.Lc(67),c.hc(68,"translate"),c.Rb(),c.Sb(69,"input",39,40),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Prefix=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(71,yZ,1,0,"ng-container",25),c.Rb(),c.Sb(72,"div",21),c.Sb(73,"label",41),c.Lc(74),c.hc(75,"translate"),c.Rb(),c.Sb(76,"input",42,43),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.CodeWidth=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(78,DZ,1,0,"ng-container",25),c.Rb(),c.Sb(79,"div",44),c.Sb(80,"input",45),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.IsOriginalDocument=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(81,"label",46),c.Lc(82),c.hc(83,"translate"),c.Rb(),c.Rb(),c.Sb(84,"div",44),c.Sb(85,"input",47),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.HasBookkeeping=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(86,"label",48),c.Lc(87),c.hc(88,"translate"),c.Rb(),c.Rb(),c.Sb(89,"div",44),c.Sb(90,"input",49),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.HasAttachments=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(91,"label",50),c.Lc(92),c.hc(93,"translate"),c.Rb(),c.Rb(),c.Jc(94,xZ,9,19,"ng-template",null,51,c.Kc),c.Rb(),c.Sb(96,"div",16),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Menu")}),c.Lc(97," \xa0 "),c.Nb(98,"fa-icon",17),c.Lc(99),c.hc(100,"translate"),c.Jc(101,TZ,1,0,"fa-icon",18),c.Rb(),c.Sb(102,"div",19),c.Sb(103,"div",21),c.Sb(104,"label",52),c.Lc(105),c.hc(106,"translate"),c.Rb(),c.Sb(107,"select",53,54),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.MainMenuSection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"MainMenuSection")}),c.Nb(109,"option",55),c.Jc(110,zZ,2,2,"option",35),c.Rb(),c.Jc(111,LZ,1,0,"ng-container",25),c.Rb(),c.Sb(112,"div",21),c.Sb(113,"label",56),c.Lc(114),c.hc(115,"translate"),c.Rb(),c.Sb(116,"div",57),c.Jc(117,kZ,2,4,"div",58),c.Rb(),c.Jc(118,OZ,1,0,"ng-container",25),c.Rb(),c.Sb(119,"div",21),c.Sb(120,"label",59),c.Lc(121),c.hc(122,"translate"),c.Rb(),c.Sb(123,"input",60,61),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.MainMenuSortKey=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"MainMenuSortKey")}),c.Rb(),c.Jc(125,AZ,1,0,"ng-container",25),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(126,"div",62),c.Sb(127,"div",63),c.Sb(128,"div",64),c.Sb(129,"span"),c.Lc(130),c.hc(131,"translate"),c.Rb(),c.Rb(),c.Jc(132,NZ,13,21,"div",65),c.Rb(),c.Sb(133,"div",66),c.Nb(134,"t-documents-details",67),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(23),t=c.Ac(32),n=c.Ac(41),i=c.Ac(57),o=c.Ac(70),r=c.Ac(77),s=c.Ac(95),l=c.Ac(108),a=c.Ac(124),u=c.gc(),d=u.isEdit,b=u.model,g=c.gc(),f=c.Ac(13);c.zb(1),c.nc("ngIf",d&&g.collapseDefinition),c.zb(1),c.Eb("d-flex",d&&!g.collapseDefinition)("d-none",!d||g.collapseDefinition),c.zb(3),c.Mc(c.ic(6,104,"Definition")),c.zb(3),c.nc("flip",g.flipIcon(!1)),c.zb(4),c.nc("flip",g.flipIcon(g.showSection("General")))("rotate",g.rotateIcon(g.showSection("General"))),c.zb(1),c.Nc(" \xa0 ",c.ic(14,106,"General")," "),c.zb(2),c.nc("ngIf",g.sectionErrors("General",b)),c.zb(1),c.Eb("d-none",!g.showSection("General")),c.zb(1),c.nc("ngIf",!g.isSystem(b)),c.zb(1),c.Eb("is-invalid",g.invalid(e,null==b.serverErrors?null:b.serverErrors.TitleSingular)),c.zb(2),c.Mc(c.ic(21,108,"TitleSingular")+g.ws.primaryPostfix),c.zb(2),c.nc("ngModel",b.TitleSingular)("ngModelOptions",c.qc(138,$X)),c.zb(2),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.sc(139,UX,e,null==b.serverErrors?null:b.serverErrors.TitleSingular)),c.zb(1),c.nc("ngIf",null==g.ws.settings?null:g.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==g.ws.settings?null:g.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("is-invalid",g.invalid(t,null==b.serverErrors?null:b.serverErrors.TitlePlural)),c.zb(2),c.Mc(c.ic(30,110,"TitlePlural")+g.ws.primaryPostfix),c.zb(2),c.nc("ngModel",b.TitlePlural)("ngModelOptions",c.qc(142,$X)),c.zb(2),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.sc(143,UX,t,null==b.serverErrors?null:b.serverErrors.TitlePlural)),c.zb(1),c.nc("ngIf",null==g.ws.settings?null:g.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==g.ws.settings?null:g.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("is-invalid",g.invalid(n,null==b.serverErrors?null:b.serverErrors.Description)),c.zb(2),c.Mc(c.ic(39,112,"Description")+g.ws.primaryPostfix),c.zb(2),c.nc("ngModel",b.Description)("ngModelOptions",c.qc(146,$X)),c.zb(2),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.sc(147,UX,n,null==b.serverErrors?null:b.serverErrors.Description)),c.zb(1),c.nc("ngIf",null==g.ws.settings?null:g.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==g.ws.settings?null:g.ws.settings.TernaryLanguageId),c.zb(3),c.nc("flip",g.flipIcon(g.showSection("Definition")))("rotate",g.rotateIcon(g.showSection("Definition"))),c.zb(1),c.Nc(" \xa0 ",c.ic(49,114,"Definition")," "),c.zb(2),c.nc("ngIf",g.sectionErrors("Definition",b)),c.zb(1),c.Eb("d-none",!g.showSection("Definition")),c.zb(1),c.Eb("is-invalid",g.invalid(i,null==b||null==b.serverErrors?null:b.serverErrors.DocumentType)),c.zb(2),c.Mc(c.ic(55,116,"DocumentDefinition_DocumentType")),c.zb(2),c.nc("ngModel",b.DocumentType),c.zb(2),c.nc("ngForOf",g.documentTypeChoices),c.zb(1),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.sc(150,UX,i,null==b||null==b.serverErrors?null:b.serverErrors.DocumentType)),c.zb(1),c.nc("ngIf",!g.isSystem(b)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(153,_Z)),c.zb(1),c.nc("ngIf",!g.isSystem(b)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(154,JZ)),c.zb(1),c.nc("ngIf",!g.isSystem(b)),c.zb(1),c.Eb("is-invalid",g.invalid(o,null==b.serverErrors?null:b.serverErrors.Prefix)),c.zb(2),c.Mc(c.ic(68,118,"DocumentDefinition_Prefix")),c.zb(2),c.nc("ngModel",b.Prefix)("ngModelOptions",c.qc(155,$X)),c.zb(2),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.sc(156,UX,o,null==b.serverErrors?null:b.serverErrors.Prefix)),c.zb(1),c.Eb("is-invalid",g.invalid(r,null==b.serverErrors?null:b.serverErrors.CodeWidth)),c.zb(2),c.Mc(c.ic(75,120,"DocumentDefinition_CodeWidth")),c.zb(2),c.nc("ngModel",b.CodeWidth)("ngModelOptions",c.qc(159,$X)),c.zb(2),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.sc(160,UX,r,null==b.serverErrors?null:b.serverErrors.CodeWidth)),c.zb(2),c.nc("ngModel",b.IsOriginalDocument),c.zb(2),c.Mc(c.ic(83,122,"DocumentDefinition_IsOriginalDocument")),c.zb(3),c.nc("ngModel",b.HasBookkeeping),c.zb(2),c.Mc(c.ic(88,124,"DocumentDefinition_HasBookkeeping")),c.zb(3),c.nc("ngModel",b.HasAttachments),c.zb(2),c.Mc(c.ic(93,126,"Definition_HasAttachments")),c.zb(6),c.nc("flip",g.flipIcon(g.showSection("Menu")))("rotate",g.rotateIcon(g.showSection("Menu"))),c.zb(1),c.Nc(" \xa0 ",c.ic(100,128,"Menu")," "),c.zb(2),c.nc("ngIf",g.sectionErrors("Menu",b)),c.zb(1),c.Eb("d-none",!g.showSection("Menu")),c.zb(3),c.Mc(c.ic(106,130,"MainMenuSection")),c.zb(2),c.nc("ngModel",b.MainMenuSection),c.zb(3),c.nc("ngForOf",g.allMainMenuSections),c.zb(1),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.sc(163,UX,l,null==b.serverErrors?null:b.serverErrors.MainMenuSection)),c.zb(3),c.Mc(c.ic(115,132,"MainMenuIcon")),c.zb(3),c.nc("ngForOf",g.allMainMenuIcons),c.zb(1),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.rc(166,PZ,null==b.serverErrors?null:b.serverErrors.MainMenuIcon)),c.zb(3),c.Mc(c.ic(122,134,"MainMenuSortKey")),c.zb(2),c.nc("ngModel",b.MainMenuSortKey)("ngModelOptions",c.qc(168,$X)),c.zb(2),c.nc("ngTemplateOutlet",f)("ngTemplateOutletContext",c.sc(169,UX,a,null==b.serverErrors?null:b.serverErrors.MainMenuSortKey)),c.zb(5),c.Mc(c.ic(131,136,"Preview")),c.zb(2),c.nc("ngIf",!d),c.zb(2),c.nc("previewDefinition",g.getForClient(b))}}function VZ(e,t){if(1&e&&c.Jc(0,FZ,135,172,"div",8),2&e){const e=t.isEdit,n=c.gc();c.nc("ngIf",n.watchIsEdit(e))}}function qZ(e,t){if(1&e&&(c.Sb(0,"span",117),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e()," ")}}function jZ(e,t){if(1&e&&(c.Qb(0),c.Jc(1,qZ,2,1,"span",116),c.Pb()),2&e){const e=c.gc(),t=e.control,n=e.serverErrors,i=c.gc();c.zb(1),c.nc("ngForOf",i.errors(t,n))}}function $Z(e,t){if(1&e&&c.Jc(0,jZ,2,1,"ng-container",37),2&e){const e=t.control,n=t.serverErrors,i=c.gc();c.nc("ngIf",i.invalid(e,n))}}function UZ(e,t){1&e&&c.Ob(0)}function KZ(e,t){1&e&&c.Ob(0)}function BZ(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",118),c.Sb(1,"h5",119),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",120),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",121),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",122),c.Sb(8,"div",123),c.Sb(9,"div",124),c.Sb(10,"label",94),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"t-line-definitions-picker",125,126),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().lineDefinitionToEdit.LineDefinitionId=t})("ngModelChange",function(){return c.Dc(e),c.gc().onItemToEditChange()}),c.Rb(),c.Jc(15,UZ,1,0,"ng-container",25),c.Rb(),c.Sb(16,"div",124),c.Sb(17,"label",127),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Sb(20,"select",128,129),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().lineDefinitionToEdit.IsVisibleByDefault=t})("ngModelChange",function(){return c.Dc(e),c.gc().onItemToEditChange()}),c.Sb(22,"option",130),c.Lc(23),c.hc(24,"translate"),c.Rb(),c.Sb(25,"option",131),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Rb(),c.Jc(28,KZ,1,0,"ng-container",25),c.Rb(),c.Rb(),c.Rb(),c.Sb(29,"div",132),c.Sb(30,"button",133),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(31,"fa-icon",134),c.Lc(32),c.hc(33,"translate"),c.Rb(),c.Sb(34,"button",135),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(35,"fa-icon",104),c.Lc(36),c.hc(37,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(14),t=c.Ac(21),n=c.gc(),i=c.Ac(13);c.zb(2),c.Nc(" ",c.ic(3,18,"Configure")," "),c.zb(7),c.Eb("is-invalid",n.invalid(e,null==n.lineDefinitionToEdit.serverErrors?null:n.lineDefinitionToEdit.serverErrors.LineDefinitionId)),c.zb(2),c.Mc(c.ic(12,20,"DocumentDefinitionLineDefinition_LineDefinition")),c.zb(2),c.nc("ngModel",n.lineDefinitionToEdit.LineDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(32,UX,e,null==n.lineDefinitionToEdit.serverErrors?null:n.lineDefinitionToEdit.serverErrors.LineDefinitionId)),c.zb(1),c.Eb("is-invalid",n.invalid(t,null==n.lineDefinitionToEdit.serverErrors?null:n.lineDefinitionToEdit.serverErrors.IsVisibleByDefault)),c.zb(2),c.Mc(c.ic(19,22,"DocumentDefinitionLineDefinition_IsVisibleByDefault")),c.zb(2),c.nc("ngModel",n.lineDefinitionToEdit.IsVisibleByDefault),c.zb(3),c.Mc(c.ic(24,24,"Yes")),c.zb(3),c.Mc(c.ic(27,26,"No")),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(35,UX,t,null==n.lineDefinitionToEdit.serverErrors?null:n.lineDefinitionToEdit.serverErrors.IsVisibleByDefault)),c.zb(2),c.nc("disabled",!n.canApplyLineDefinition),c.zb(2),c.Nc(" \xa0",c.ic(33,28,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(37,30,"Cancel")," ")}}const HZ=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},QZ=function(e,t,n){return[e,t,n]};let WZ=(()=>{class e extends mn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.documentDefinitionsApi=this.api.documentDefinitionsApi(this.notifyDestruct$),this.expand="LineDefinitions.LineDefinition",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText),e.PostingDateVisibility="Required",e.CenterVisibility="Required",e.ClearanceVisibility="None",e.MemoVisibility="Optional",e.IsOriginalDocument=!1,e.HasAttachments=!0,e.HasBookkeeping=!0,e.CodeWidth=4,e.DocumentType=2,e.LineDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.LineDefinitions&&t.LineDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this.isSystem=e=>!!e&&e.Id===this.ws.definitions.ManualJournalVouchersDefinitionId,this._sections={General:!1,Definition:!0,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.documentDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.documentDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.documentDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("document-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.documentDefinitionsApi=this.api.documentDefinitionsApi(this.notifyDestruct$)}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(Qp.b)(e.serverErrors[t]))}sectionErrors(e,t){return"General"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.Code)||Object(Qp.b)(t.serverErrors.Description)||Object(Qp.b)(t.serverErrors.Description2)||Object(Qp.b)(t.serverErrors.Description3)||Object(Qp.b)(t.serverErrors.TitleSingular)||Object(Qp.b)(t.serverErrors.TitleSingular2)||Object(Qp.b)(t.serverErrors.TitleSingular3)||Object(Qp.b)(t.serverErrors.TitlePlural)||Object(Qp.b)(t.serverErrors.TitlePlural2)||Object(Qp.b)(t.serverErrors.TitlePlural3)):"Definition"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.DocumentType)||Object(Qp.b)(t.serverErrors.LineDefinitions)||Object(Qp.b)(t.serverErrors.ClearanceVisibility)||Object(Qp.b)(t.serverErrors.PostingDateVisibility)||Object(Qp.b)(t.serverErrors.CenterVisibility)||Object(Qp.b)(t.serverErrors.MemoVisibility)||Object(Qp.b)(t.serverErrors.Prefix)||Object(Qp.b)(t.serverErrors.CodeWidth)||Object(Qp.b)(t.serverErrors.IsOriginalDocument)||Object(Qp.b)(t.serverErrors.HasBookkeeping)||Object(Qp.b)(t.serverErrors.HasAttachments))||!!t.LineDefinitions&&t.LineDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.MainMenuIcon)||Object(Qp.b)(t.serverErrors.MainMenuSection)||Object(Qp.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(Qp.c)(e,t)}errors(e,t){return Object(Qp.d)(e,t,this.translate)}serverErrors(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){var t,n,i,c,o,r,s,l,a,u,d,b,g,f,m,h,p,S,v,I,M,R,y,D,w,E,C,x,T,z,L,k,O,A;if(!e)return null;const N=this.ws.definitions;if(this._currentModel!==e||this._currentModelModified||N!==this._getForClientDefinitions){this._currentModelModified=!1,this._currentModel=e,this._getForClientDefinitions=N;const _=Object.assign({},e);_.CodeWidth||(_.CodeWidth=4),"None"===_.PostingDateVisibility&&delete _.PostingDateVisibility,"None"===_.CenterVisibility&&delete _.CenterVisibility,"None"===_.MemoVisibility&&delete _.MemoVisibility,"None"===_.ClearanceVisibility&&delete _.ClearanceVisibility,_.CanReachState1=!1,_.CanReachState2=!1,_.CanReachState3=!1,_.HasWorkflow=!1,_.CustodianDefinitionIds=[],_.RelationDefinitionIds=[],_.ResourceDefinitionIds=[],_.NotedRelationDefinitionIds=[];const J=_.LineDefinitions.map(e=>N.Lines[e.LineDefinitionId]).filter(e=>!!e&&!!e.Columns);let P={},F={},V={},q={},j={},$={},U={},K={},B={},H={"CenterType eq 'BusinessUnit'":!0},Q={},W={},G={};for(const e of J)for(const N of e.Columns.filter(e=>2===e.InheritsFromHeader))if("PostingDate"===N.ColumnName)_.PostingDateIsCommonVisibility=!0,_.PostingDateVisibility=_.PostingDateVisibility||"Optional",_.PostingDateLabel||(_.PostingDateLabel=N.Label,_.PostingDateLabel2=N.Label2,_.PostingDateLabel3=N.Label3),N.RequiredState>(null!==(t=_.PostingDateRequiredState)&&void 0!==t?t:0)&&(_.PostingDateRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(n=_.PostingDateReadOnlyState)&&void 0!==n?n:0)&&(_.PostingDateReadOnlyState=N.ReadOnlyState);else if("CenterId"===N.ColumnName)_.CenterIsCommonVisibility=!0,_.CenterVisibility=_.CenterVisibility||"Optional",_.CenterLabel||(_.CenterLabel=N.Label,_.CenterLabel2=N.Label2,_.CenterLabel3=N.Label3),N.RequiredState>(null!==(i=_.CenterRequiredState)&&void 0!==i?i:0)&&(_.CenterRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(c=_.CenterReadOnlyState)&&void 0!==c?c:0)&&(_.CenterReadOnlyState=N.ReadOnlyState),N.Filter?null!=H&&(H[N.Filter]=!0):H=null;else if("Memo"===N.ColumnName)_.MemoIsCommonVisibility=!0,_.MemoVisibility=_.MemoVisibility||"Optional",_.MemoLabel||(_.MemoLabel=N.Label,_.MemoLabel2=N.Label2,_.MemoLabel3=N.Label3),N.RequiredState>(null!==(o=_.MemoRequiredState)&&void 0!==o?o:0)&&(_.MemoRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(r=_.MemoReadOnlyState)&&void 0!==r?r:0)&&(_.MemoReadOnlyState=N.ReadOnlyState);else if("CurrencyId"===N.ColumnName)_.CurrencyVisibility=!0,_.CurrencyLabel||(_.CurrencyLabel=N.Label,_.CurrencyLabel2=N.Label2,_.CurrencyLabel3=N.Label3),N.RequiredState>(null!==(s=_.CurrencyRequiredState)&&void 0!==s?s:0)&&(_.CurrencyRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(l=_.CurrencyReadOnlyState)&&void 0!==l?l:0)&&(_.CurrencyReadOnlyState=N.ReadOnlyState),N.Filter?null!=B&&(B[N.Filter]=!0):B=null;else if("CustodianId"===N.ColumnName){if(_.CustodianVisibility=!0,_.CustodianLabel||(_.CustodianLabel=N.Label,_.CustodianLabel2=N.Label2,_.CustodianLabel3=N.Label3),N.RequiredState>(null!==(a=_.CustodianRequiredState)&&void 0!==a?a:0)&&(_.CustodianRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(u=_.CustodianReadOnlyState)&&void 0!==u?u:0)&&(_.CustodianReadOnlyState=N.ReadOnlyState),N.EntryIndex<e.Entries.length){const t=e.Entries[N.EntryIndex];if(t.CustodianDefinitionIds&&0!==t.CustodianDefinitionIds.length){if(P)for(const e of t.CustodianDefinitionIds)P[e]=!0}else P=null}N.Filter?j&&(j[N.Filter]=!0):j=null}else if("RelationId"===N.ColumnName){if(_.RelationVisibility=!0,_.RelationLabel||(_.RelationLabel=N.Label,_.RelationLabel2=N.Label2,_.RelationLabel3=N.Label3),N.RequiredState>(null!==(d=_.RelationRequiredState)&&void 0!==d?d:0)&&(_.RelationRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(b=_.RelationReadOnlyState)&&void 0!==b?b:0)&&(_.RelationReadOnlyState=N.ReadOnlyState),N.EntryIndex<e.Entries.length){const t=e.Entries[N.EntryIndex];if(t.RelationDefinitionIds&&0!==t.RelationDefinitionIds.length){if(F)for(const e of t.RelationDefinitionIds)F[e]=!0}else F=null}N.Filter?$&&($[N.Filter]=!0):$=null}else if("ResourceId"===N.ColumnName){if(_.ResourceVisibility=!0,_.ResourceLabel||(_.ResourceLabel=N.Label,_.ResourceLabel2=N.Label2,_.ResourceLabel3=N.Label3),N.RequiredState>(null!==(g=_.ResourceRequiredState)&&void 0!==g?g:0)&&(_.ResourceRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(f=_.ResourceReadOnlyState)&&void 0!==f?f:0)&&(_.ResourceReadOnlyState=N.ReadOnlyState),N.EntryIndex<e.Entries.length){const t=e.Entries[N.EntryIndex];if(t.ResourceDefinitionIds&&0!==t.ResourceDefinitionIds.length){if(V)for(const e of t.ResourceDefinitionIds)V[e]=!0}else V=null}N.Filter?U&&(U[N.Filter]=!0):U=null}else if("NotedRelationId"===N.ColumnName){if(_.NotedRelationVisibility=!0,_.NotedRelationLabel||(_.NotedRelationLabel=N.Label,_.NotedRelationLabel2=N.Label2,_.NotedRelationLabel3=N.Label3),N.RequiredState>(null!==(m=_.NotedRelationRequiredState)&&void 0!==m?m:0)&&(_.NotedRelationRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(h=_.NotedRelationReadOnlyState)&&void 0!==h?h:0)&&(_.NotedRelationReadOnlyState=N.ReadOnlyState),N.EntryIndex<e.Entries.length){const t=e.Entries[N.EntryIndex];if(t.NotedRelationDefinitionIds&&0!==t.NotedRelationDefinitionIds.length){if(q)for(const e of t.NotedRelationDefinitionIds)q[e]=!0}else q=null}N.Filter?K&&(K[N.Filter]=!0):K=null}else"Quantity"===N.ColumnName?(_.QuantityVisibility=!0,_.QuantityLabel||(_.QuantityLabel=N.Label,_.QuantityLabel2=N.Label2,_.QuantityLabel3=N.Label3),N.RequiredState>(null!==(p=_.QuantityRequiredState)&&void 0!==p?p:0)&&(_.QuantityRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(S=_.QuantityReadOnlyState)&&void 0!==S?S:0)&&(_.QuantityReadOnlyState=N.ReadOnlyState)):"UnitId"===N.ColumnName?(_.UnitVisibility=!0,_.UnitLabel||(_.UnitLabel=N.Label,_.UnitLabel2=N.Label2,_.UnitLabel3=N.Label3),N.RequiredState>(null!==(v=_.UnitRequiredState)&&void 0!==v?v:0)&&(_.UnitRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(I=_.UnitReadOnlyState)&&void 0!==I?I:0)&&(_.UnitReadOnlyState=N.ReadOnlyState),N.Filter?Q&&(Q[N.Filter]=!0):Q=null):"Time1"===N.ColumnName?(_.Time1Visibility=!0,_.Time1Label||(_.Time1Label=N.Label,_.Time1Label2=N.Label2,_.Time1Label3=N.Label3),N.RequiredState>(null!==(M=_.Time1RequiredState)&&void 0!==M?M:0)&&(_.Time1RequiredState=N.RequiredState),N.ReadOnlyState>(null!==(R=_.Time1ReadOnlyState)&&void 0!==R?R:0)&&(_.Time1ReadOnlyState=N.ReadOnlyState)):"Duration"===N.ColumnName?(_.DurationVisibility=!0,_.DurationLabel||(_.DurationLabel=N.Label,_.DurationLabel2=N.Label2,_.DurationLabel3=N.Label3),N.RequiredState>(null!==(y=_.DurationRequiredState)&&void 0!==y?y:0)&&(_.DurationRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(D=_.DurationReadOnlyState)&&void 0!==D?D:0)&&(_.DurationReadOnlyState=N.ReadOnlyState)):"DurationUnitId"===N.ColumnName?(_.DurationUnitVisibility=!0,_.DurationUnitLabel||(_.DurationUnitLabel=N.Label,_.DurationUnitLabel2=N.Label2,_.DurationUnitLabel3=N.Label3),N.RequiredState>(null!==(w=_.DurationUnitRequiredState)&&void 0!==w?w:0)&&(_.DurationUnitRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(E=_.DurationUnitReadOnlyState)&&void 0!==E?E:0)&&(_.DurationUnitReadOnlyState=N.ReadOnlyState),N.Filter?W&&(W[N.Filter]=!0):W=null):"Time2"===N.ColumnName?(_.Time2Visibility=!0,_.Time2Label||(_.Time2Label=N.Label,_.Time2Label2=N.Label2,_.Time2Label3=N.Label3),N.RequiredState>(null!==(C=_.Time2RequiredState)&&void 0!==C?C:0)&&(_.Time2RequiredState=N.RequiredState),N.ReadOnlyState>(null!==(x=_.Time2ReadOnlyState)&&void 0!==x?x:0)&&(_.Time2ReadOnlyState=N.ReadOnlyState)):"ExternalReference"===N.ColumnName?(_.ExternalReferenceVisibility=!0,_.ExternalReferenceLabel||(_.ExternalReferenceLabel=N.Label,_.ExternalReferenceLabel2=N.Label2,_.ExternalReferenceLabel3=N.Label3),N.RequiredState>(null!==(T=_.ExternalReferenceRequiredState)&&void 0!==T?T:0)&&(_.ExternalReferenceRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(z=_.ExternalReferenceReadOnlyState)&&void 0!==z?z:0)&&(_.ExternalReferenceReadOnlyState=N.ReadOnlyState)):"ReferenceSourceId"===N.ColumnName?(_.ReferenceSourceVisibility=!0,_.ReferenceSourceLabel||(_.ReferenceSourceLabel=N.Label,_.ReferenceSourceLabel2=N.Label2,_.ReferenceSourceLabel3=N.Label3),N.RequiredState>(null!==(L=_.ReferenceSourceRequiredState)&&void 0!==L?L:0)&&(_.ReferenceSourceRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(k=_.ReferenceSourceReadOnlyState)&&void 0!==k?k:0)&&(_.ReferenceSourceReadOnlyState=N.ReadOnlyState),N.Filter?null!=G&&(G[N.Filter]=!0):G=null):"InternalReference"===N.ColumnName&&(_.InternalReferenceVisibility=!0,_.InternalReferenceLabel||(_.InternalReferenceLabel=N.Label,_.InternalReferenceLabel2=N.Label2,_.InternalReferenceLabel3=N.Label3),N.RequiredState>(null!==(O=_.InternalReferenceRequiredState)&&void 0!==O?O:0)&&(_.InternalReferenceRequiredState=N.RequiredState),N.ReadOnlyState>(null!==(A=_.InternalReferenceReadOnlyState)&&void 0!==A?A:0)&&(_.InternalReferenceReadOnlyState=N.ReadOnlyState));_.CustodianDefinitionIds=Object.keys(null!=P?P:{}).map(e=>+e),_.RelationDefinitionIds=Object.keys(null!=F?F:{}).map(e=>+e),_.ResourceDefinitionIds=Object.keys(null!=V?V:{}).map(e=>+e),_.NotedRelationDefinitionIds=Object.keys(null!=q?q:{}).map(e=>+e),_.CustodianFilter=GZ(j),_.RelationFilter=GZ($),_.ResourceFilter=GZ(U),_.NotedRelationFilter=GZ(K),_.CenterFilter=GZ(H),_.CurrencyFilter=GZ(B),_.UnitFilter=GZ(Q),_.DurationUnitFilter=GZ(W),_.ReferenceSourceFilter=GZ(G),"ManualJournalVoucher"===e.Code&&(_.PostingDateVisibility="Required",_.PostingDateIsCommonVisibility=!1,_.PostingDateLabel=null,_.PostingDateLabel2=null,_.PostingDateLabel3=null,_.CenterIsCommonVisibility=!1,_.CenterLabel=null,_.CenterLabel2=null,_.CenterLabel3=null,_.MemoVisibility="Optional",_.MemoIsCommonVisibility=!1,_.MemoLabel=null,_.MemoLabel2=null,_.MemoLabel3=null,_.CurrencyVisibility=!1,_.CustodianVisibility=!1,_.RelationVisibility=!1,_.ResourceVisibility=!1,_.NotedRelationVisibility=!1,_.QuantityVisibility=!1,_.UnitVisibility=!1,_.Time1Visibility=!1,_.DurationVisibility=!1,_.DurationUnitVisibility=!1,_.Time2Visibility=!1,_.InternalReferenceVisibility=!1,_.ReferenceSourceVisibility=!1,_.ExternalReferenceVisibility=!1),this._getForClientResult=_}return this._getForClientResult}get visibilityChoices(){return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:()=>this.translate.instant("Visibility_None")},{value:"Optional",name:()=>this.translate.instant("Visibility_Optional")},{value:"Required",name:()=>this.translate.instant("Visibility_Required")}]),this._visibilityChoices}get documentTypeChoices(){const e=Object(oB.a)(this.workspace,this.translate).properties.DocumentType;return Object(Mi.c)(e)}get allMainMenuSections(){const e=Object(oB.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Mi.c)(e)}get allMainMenuIcons(){const e=Object(oB.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Mi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}rowDrop(e,t){Object(j.h)(t,e.previousIndex,e.currentIndex)}onInsertRow(e,t){const n=t?t():{};e.push(n)}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateLineDefinition(e){const t={IsVisibleByDefault:!0};this.lineDefinitionToEdit=t,this.modalService.open(this.lineDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&(e.LineDefinitions.push(t),this.onDefinitionChange(e))},e=>{})}onConfigureLineDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.LineDefinitions[e]);this.lineDefinitionToEdit=n,this.modalService.open(this.lineDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.LineDefinitions[e]=n,this.onDefinitionChange(t))},e=>{})}onDeleteLineDefinition(e,t){t.LineDefinitions.splice(e,1),this.onDefinitionChange(t)}get canApplyLineDefinition(){return!!this.lineDefinitionToEdit&&!!this.lineDefinitionToEdit.LineDefinitionId}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-document-definitions-details"]],viewQuery:function(e,t){if(1&e&&c.Qc(NX,3),2&e){let e;c.zc(e=c.dc())&&(t.lineDefinitionModal=e.first)}},features:[c.wb],decls:16,vars:35,consts:[["collection","DocumentDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["lineDefinitionModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],["class","form-group",3,"is-invalid",4,"ngIf"],[1,"form-group"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text","required","",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],["for","documenttype",1,"small"],["id","documenttype",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["documenttypecontrol","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[4,"ngIf"],["for","prefix",1,"small"],["id","prefix","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["prefixmodel","ngModel"],["for","codewidth",1,"small"],["id","codewidth","type","number","min","1","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["codewidthmodel","ngModel"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","isoriginaldocument",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isoriginaldocument",1,"custom-control-label"],["type","checkbox","id","hasbookkeeping",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasbookkeeping",1,"custom-control-label"],["type","checkbox","id","hasattachments",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasattachments",1,"custom-control-label"],["unlabeledProp",""],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],[3,"value"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",2,"height","10rem",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["linedefinitionmodel","ngModel"],["for","isvisiblebydefault",1,"small"],["id","isvisiblebydefault",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["isvisiblebydefaultmodel","ngModel"],["value","true"],["value","false"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,_X,2,3,"ng-template",null,1,c.Kc),c.Jc(4,JX,2,3,"ng-template",null,2,c.Kc),c.Jc(6,PX,2,3,"ng-template",null,3,c.Kc),c.Jc(8,FX,3,3,"ng-template",null,4,c.Kc),c.Jc(10,VZ,1,1,"ng-template",null,5,c.Kc),c.Jc(12,$Z,1,1,"ng-template",null,6,c.Kc),c.Jc(14,BZ,38,38,"ng-template",null,7,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,11,"DocumentDefinitions"))("detailsCrumb",o)("idString",t.idString)("documentTemplate",r)("actions",c.tc(31,QZ,c.vc(13,HZ,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),c.vc(19,HZ,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),c.vc(25,HZ,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)}},directives:[q.a,C.l,ee.a,te.c,te.m,te.i,te.j,C.p,te.n,C.k,te.l,te.a,te.k,te.o,Gj,j.f,j.b,j.d,OX],pipes:[K.c],encapsulation:2}),e})();function GZ(e){var t;if(e){const n=Object.keys(e);if(1===n.length)return n[0];if(n.length>1)return null===(t=n.map(e=>`(${e})`))||void 0===t?void 0:t.reduce((e,t)=>`${e} or ${t}`)}return null}function YZ(e,t){if(1&e&&(c.Sb(0,"div",11),c.Sb(1,"span",12),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",13),c.Sb(4,"div",14),c.Nb(5,"t-auto-cell",15),c.Rb(),c.Nb(6,"t-auto-cell",16),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("DocumentDefinition",e,"TitleSingular")),c.zb(3),c.nc("entity",n.c[e]),c.zb(1),c.nc("entity",n.c[e])}}function XZ(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"DocumentDefinition"),"\n")}function ZZ(e,t){if(1&e&&(c.Sb(0,"span",17),c.Nb(1,"t-auto-cell",18),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function e1(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"SavedByMe")," ")}function t1(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Hidden")," ")}function n1(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Visible")," ")}function i1(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Archived")," ")}function c1(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Hide")," ")}function o1(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Show")," ")}function r1(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Archive")," ")}const s1=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},l1=function(e,t,n){return[e,t,n]},a1=function(e){return{template:e,expression:"SavedById eq me"}},u1=function(e){return[e]},d1=function(e){return{template:e,expression:"State eq 'Hidden'"}},b1=function(e){return{template:e,expression:"State eq 'Visible'"}},g1=function(e){return{template:e,expression:"State eq 'Archived'"}},f1=function(e,t){return{SavedBy:e,State:t}};let m1=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.documentDefinitionsApi=this.api.documentDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.documentDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("DocumentDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.documentDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("DocumentDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.documentDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("DocumentDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("document-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.documentDefinitionsApi=this.api.documentDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.DocumentDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-document-definitions-master"]],features:[c.wb],decls:22,vars:51,consts:[["collection","DocumentDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","DocumentDefinition","path","Code",3,"entity"],["collection","DocumentDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","DocumentDefinition",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,YZ,7,3,"ng-template",null,1,c.Kc),c.Jc(4,XZ,2,3,"ng-template",null,2,c.Kc),c.Jc(6,ZZ,2,1,"ng-template",null,3,c.Kc),c.Jc(8,e1,2,3,"ng-template",null,4,c.Kc),c.Jc(10,t1,2,3,"ng-template",null,5,c.Kc),c.Jc(12,n1,2,3,"ng-template",null,6,c.Kc),c.Jc(14,i1,2,3,"ng-template",null,7,c.Kc),c.Jc(16,c1,2,3,"ng-template",null,8,c.Kc),c.Jc(18,o1,2,3,"ng-template",null,9,c.Kc),c.Jc(20,r1,2,3,"ng-template",null,10,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13),l=c.Ac(15),a=c.Ac(17),u=c.Ac(19),d=c.Ac(21);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"DocumentDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.tc(30,l1,c.vc(12,s1,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),c.vc(18,s1,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),c.vc(24,s1,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",c.sc(48,f1,c.rc(36,u1,c.rc(34,a1,o)),c.tc(44,l1,c.rc(38,d1,r),c.rc(40,b1,s),c.rc(42,g1,l))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();function h1(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-document-definitions-details",4),c.cc("cancel",function(){return t.modal.close(!1)})("saved",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)}),c.Rb(),c.Rb()),2&e){const e=t.initialText,n=t.idString,i=c.gc();c.zb(1),c.nc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function p1(e,t){if(1&e&&(c.Sb(0,"div",3),c.Sb(1,"t-document-definitions-master",5),c.cc("cancel",function(){return t.modal.close(!1)})("choose",function(e){const n=t.update;return t.modal.close(!0),n.call(null,e)})("create",function(){const e=t.create;return t.modal.close(!1),e.call()}),c.Rb(),c.Rb()),2&e){const e=t.filter,n=c.gc();c.zb(1),c.nc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let S1=(()=>{class e extends Js{}return e.\u0275fac=function(t){return v1(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-document-definitions-picker"]],features:[c.yb([{provide:te.g,multi:!0,useExisting:e}]),c.wb],decls:5,vars:6,consts:[["collection","DocumentDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(c.Sb(0,"t-details-picker",0),c.cc("entityLoaded",function(){return t.onEntityLoaded()}),c.Rb(),c.Jc(1,h1,2,3,"ng-template",null,1,c.Kc),c.Jc(3,p1,2,3,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2),n=c.Ac(4);c.nc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[_s,WZ,m1],encapsulation:2}),e})();const v1=c.Ub(S1),I1=["iframe"];function M1(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Name",n.ws))}}function R1(e,t){1&e&&c.Nb(0,"fa-icon",33)}function y1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",29),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleMetadata()}),c.Sb(1,"div",30),c.Nb(2,"fa-icon",31),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Jc(6,R1,1,0,"fa-icon",32),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("flip",t.flipIcon(!1)),c.zb(2),c.Nc("",c.ic(5,3,"Metadata")," \xa0 "),c.zb(2),c.nc("ngIf",t.metadataPaneErrors(e))}}function D1(e,t){1&e&&c.Nb(0,"fa-icon",33)}function w1(e,t){1&e&&c.Ob(0)}function E1(e,t){1&e&&c.Ob(0)}const C1=function(){return{updateOn:"blur"}},x1=function(e,t){return{control:e,serverErrors:t}};function T1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",39),c.Sb(1,"label",65),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",66,67),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Name2=t}),c.Rb(),c.Jc(6,E1,1,0,"ng-container",43),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(3).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Name2)),c.zb(2),c.Mc(c.ic(3,7,"Name")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.Name2)("ngModelOptions",c.qc(9,C1)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,x1,e,null==t.serverErrors?null:t.serverErrors.Name2))}}function z1(e,t){1&e&&c.Ob(0)}function L1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",39),c.Sb(1,"label",68),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",69,70),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Name3=t}),c.Rb(),c.Jc(6,z1,1,0,"ng-container",43),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(3).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Name3)),c.zb(2),c.Mc(c.ic(3,7,"Name")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.Name3)("ngModelOptions",c.qc(9,C1)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,x1,e,null==t.serverErrors?null:t.serverErrors.Name3))}}function k1(e,t){1&e&&c.Ob(0)}function O1(e,t){1&e&&c.Ob(0)}function A1(e,t){1&e&&c.Ob(0)}function N1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",39),c.Sb(1,"label",71),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"textarea",72,73),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Description2=t}),c.Rb(),c.Jc(6,A1,1,0,"ng-container",43),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(3).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description2)),c.zb(2),c.Mc(c.ic(3,7,"Description")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.Description2)("ngModelOptions",c.qc(9,C1)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,x1,e,null==t.serverErrors?null:t.serverErrors.Description2))}}function _1(e,t){1&e&&c.Ob(0)}function J1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",39),c.Sb(1,"label",74),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"textarea",75,76),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Description3=t}),c.Rb(),c.Jc(6,_1,1,0,"ng-container",43),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(3).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description3)),c.zb(2),c.Mc(c.ic(3,7,"Description")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.Description3)("ngModelOptions",c.qc(9,C1)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,x1,e,null==t.serverErrors?null:t.serverErrors.Description3))}}function P1(e,t){1&e&&c.Ob(0)}function F1(e,t){if(1&e&&(c.Sb(0,"option",81),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function V1(e,t){1&e&&c.Ob(0)}function q1(e,t){if(1&e&&(c.Sb(0,"option",81),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function j1(e,t){1&e&&c.Ob(0)}function $1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",39),c.Sb(1,"label",82),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"select",83,84),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).model.DefinitionId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onDefinitionIdChange(t)}),c.Nb(6,"option",54),c.Jc(7,q1,2,2,"option",80),c.Rb(),c.Jc(8,j1,1,0,"ng-container",43),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(4).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.DefinitionId)),c.zb(2),c.Mc(c.ic(3,7,"MarkupTemplate_DefinitionId")),c.zb(2),c.nc("ngModel",t.DefinitionId),c.zb(3),c.nc("ngForOf",n.allDefinitionIds(t)),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(9,x1,e,null==t.serverErrors?null:t.serverErrors.DefinitionId))}}function U1(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",39),c.Sb(2,"label",77),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"select",78,79),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.Collection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onCollectionChange(t)}),c.Nb(7,"option",54),c.Jc(8,F1,2,2,"option",80),c.Rb(),c.Jc(9,V1,1,0,"ng-container",43),c.Rb(),c.Jc(10,$1,9,12,"div",44),c.Pb()}if(2&e){const e=c.Ac(6),t=c.gc(3).model,n=c.gc(),i=c.Ac(7);c.zb(1),c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Collection)),c.zb(2),c.Mc(c.ic(4,8,"MarkupTemplate_Collection")),c.zb(2),c.nc("ngModel",t.Collection),c.zb(3),c.nc("ngForOf",n.allCollections),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,x1,e,null==t.serverErrors?null:t.serverErrors.Collection)),c.zb(1),c.nc("ngIf",n.showDefinitionIdSelector(t))}}function K1(e,t){1&e&&c.Ob(0)}function B1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",85),c.Sb(1,"input",86),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.SupportsPrimaryLanguage=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(2,"label",87),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.nc("ngModel",e.SupportsPrimaryLanguage),c.zb(2),c.Mc(c.ic(4,2,"MarkupTemplate_Supports")+t.ws.primaryPostfix)}}function H1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",85),c.Sb(1,"input",88),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.SupportsSecondaryLanguage=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(2,"label",89),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.nc("ngModel",e.SupportsSecondaryLanguage),c.zb(2),c.Mc(c.ic(4,2,"MarkupTemplate_Supports")+t.ws.secondaryPostfix)}}function Q1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",85),c.Sb(1,"input",90),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).model.SupportsTernaryLanguage=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Sb(2,"label",91),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.nc("ngModel",e.SupportsTernaryLanguage),c.zb(2),c.Mc(c.ic(4,2,"MarkupTemplate_Supports")+t.ws.ternaryPostfix)}}function W1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",34),c.Sb(1,"div",35),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleMetadata()}),c.Sb(2,"div"),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Lc(6,"\xa0 "),c.Jc(7,D1,1,0,"fa-icon",32),c.Rb(),c.Sb(8,"div",36),c.Nb(9,"fa-icon",37),c.Rb(),c.Rb(),c.Sb(10,"div",38),c.Sb(11,"div",39),c.Sb(12,"label",40),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Sb(15,"input",41,42),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Name=t}),c.Rb(),c.Jc(17,w1,1,0,"ng-container",43),c.Rb(),c.Jc(18,T1,7,13,"div",44),c.Jc(19,L1,7,13,"div",44),c.Sb(20,"div",39),c.Sb(21,"label",45),c.Lc(22),c.Rb(),c.Sb(23,"input",46,47),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Code=t}),c.Rb(),c.Jc(25,k1,1,0,"ng-container",43),c.Rb(),c.Sb(26,"div",39),c.Sb(27,"label",48),c.Lc(28),c.hc(29,"translate"),c.Rb(),c.Sb(30,"textarea",49,50),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Description=t}),c.Rb(),c.Jc(32,O1,1,0,"ng-container",43),c.Rb(),c.Jc(33,N1,7,13,"div",44),c.Jc(34,J1,7,13,"div",44),c.Sb(35,"div",39),c.Sb(36,"label",51),c.Lc(37),c.hc(38,"translate"),c.Rb(),c.Sb(39,"select",52,53),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Usage=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Nb(41,"option",54),c.Sb(42,"option",55),c.Lc(43),c.hc(44,"translate"),c.Rb(),c.Sb(45,"option",56),c.Lc(46),c.hc(47,"translate"),c.Rb(),c.Rb(),c.Jc(48,P1,1,0,"ng-container",43),c.Rb(),c.Jc(49,U1,11,13,"ng-container",57),c.Sb(50,"div",39),c.Sb(51,"label",58),c.Lc(52),c.hc(53,"translate"),c.hc(54,"translate"),c.Rb(),c.Sb(55,"input",59,60),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.DownloadName=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(57,K1,1,0,"ng-container",43),c.Rb(),c.Jc(58,B1,5,4,"div",61),c.Jc(59,H1,5,4,"div",61),c.Jc(60,Q1,5,4,"div",61),c.Sb(61,"div",62),c.Sb(62,"input",63),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.IsDeployed=t}),c.Rb(),c.Sb(63,"label",64),c.Lc(64),c.hc(65,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(16),t=c.Ac(24),n=c.Ac(31),i=c.Ac(40),o=c.Ac(56),r=c.gc(2).model,s=c.gc(),l=c.Ac(7);c.Eb("d-flex",!s.collapseMetadata)("d-none",s.collapseMetadata),c.zb(4),c.Mc(c.ic(5,54,"Metadata")),c.zb(3),c.nc("ngIf",s.metadataPaneErrors(r)),c.zb(2),c.nc("flip",s.flipIcon(!1)),c.zb(2),c.Eb("is-invalid",s.invalid(e,null==r.serverErrors?null:r.serverErrors.Name)),c.zb(2),c.Mc(c.ic(14,56,"Name")+s.ws.primaryPostfix),c.zb(2),c.nc("ngModel",r.Name)("ngModelOptions",c.qc(72,C1)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(73,x1,e,null==r.serverErrors?null:r.serverErrors.Name)),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("is-invalid",s.invalid(t,null==r.serverErrors?null:r.serverErrors.Code)),c.zb(2),c.Mc("Code"),c.zb(1),c.nc("ngModel",r.Code)("ngModelOptions",c.qc(76,C1)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(77,x1,t,null==r.serverErrors?null:r.serverErrors.Code)),c.zb(1),c.Eb("is-invalid",s.invalid(n,null==r.serverErrors?null:r.serverErrors.Description)),c.zb(2),c.Mc(c.ic(29,58,"Description")+s.ws.primaryPostfix),c.zb(2),c.nc("ngModel",r.Description)("ngModelOptions",c.qc(80,C1)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(81,x1,n,null==r.serverErrors?null:r.serverErrors.Description)),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("is-invalid",s.invalid(i,null==r.serverErrors?null:r.serverErrors.Usage)),c.zb(2),c.Mc(c.ic(38,60,"MarkupTemplate_Usage")),c.zb(2),c.nc("ngModel",r.Usage),c.zb(4),c.Nc("",c.ic(44,62,"MarkupTemplate_Usage_QueryByFilter")," "),c.zb(3),c.Mc(c.ic(47,64,"MarkupTemplate_Usage_QueryById")),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(84,x1,i,null==r.serverErrors?null:r.serverErrors.Usage)),c.zb(1),c.nc("ngIf",s.showCollectionAndDefinition(r)),c.zb(1),c.Eb("is-invalid",s.invalid(o,null==r.serverErrors?null:r.serverErrors.DownloadName)),c.zb(2),c.Oc("",c.ic(53,66,"MarkupTemplate_DownloadName")," (",c.ic(54,68,"Visibility_Optional"),")"),c.zb(3),c.nc("ngModel",r.DownloadName)("ngModelOptions",c.qc(87,C1)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(88,x1,o,null==r.serverErrors?null:r.serverErrors.DownloadName)),c.zb(1),c.nc("ngIf",!!s.ws.settings.SecondaryLanguageId||!!s.ws.settings.TernaryLanguageId),c.zb(1),c.nc("ngIf",!!s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",!!s.ws.settings.TernaryLanguageId),c.zb(2),c.nc("ngModel",r.IsDeployed),c.zb(2),c.Mc(c.ic(65,70,"MarkupTemplate_IsDeployed"))}}function G1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",29),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleEditor()}),c.Sb(1,"div",30),c.Nb(2,"fa-icon",31),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.nc("flip",e.flipIcon(!1)),c.zb(2),c.Mc(c.ic(5,2,"Editor"))}}function Y1(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",92),c.Sb(1,"div",35),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleEditor()}),c.Sb(2,"span"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"div",36),c.Nb(6,"fa-icon",37),c.Rb(),c.Rb(),c.Sb(7,"div",93),c.Sb(8,"textarea",94,95),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).model;return c.gc().onBodyChange(t,n)})("keydown",function(t){c.Dc(e);const n=c.Ac(9),i=c.gc(2).model;return c.gc().onKeydown(n,t,i)}),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model,t=c.gc();c.Eb("d-flex",!t.collapseEditor)("d-none",t.collapseEditor),c.zb(3),c.Mc(c.ic(4,7,"Editor")),c.zb(3),c.nc("flip",t.flipIcon(!1)),c.zb(2),c.nc("ngModel",e.Body)}}function X1(e,t){1&e&&c.Nb(0,"t-spinner")}function Z1(e,t){if(1&e&&(c.Sb(0,"div",96),c.Sb(1,"div",97),c.Sb(2,"span"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Lc(5,"\xa0\xa0 "),c.Jc(6,X1,1,0,"t-spinner",57),c.Rb(),c.Rb()),2&e){const e=c.gc(3);c.zb(3),c.Mc(c.ic(4,2,"Preview")),c.zb(3),c.nc("ngIf",e.showSpinner)}}function e2(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"t-form-group",100),c.hc(2,"translate"),c.Sb(3,"t-text-editor",101),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).filter=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onParameterChange(t)}),c.Rb(),c.Rb(),c.Sb(4,"t-form-group",100),c.hc(5,"translate"),c.Sb(6,"t-text-editor",101),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).orderby=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onParameterChange(t)}),c.Rb(),c.Rb(),c.Sb(7,"t-form-group",100),c.hc(8,"translate"),c.Sb(9,"t-decimal-editor",102),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).top=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onParameterChange(t)}),c.Rb(),c.Rb(),c.Sb(10,"t-form-group",100),c.hc(11,"translate"),c.Lc(12),c.Rb(),c.Pb()}if(2&e){const e=c.gc(4);c.zb(1),c.nc("label",c.ic(2,13,"Filter")),c.zb(2),c.nc("ngModel",e.filter)("ngModelOptions",c.qc(21,C1)),c.zb(1),c.nc("label",c.ic(5,15,"OrderBy")),c.zb(2),c.nc("ngModel",e.orderby)("ngModelOptions",c.qc(22,C1)),c.zb(1),c.nc("label",c.ic(8,17,"Top")),c.zb(2),c.nc("ngModel",e.top)("ngModelOptions",c.qc(23,C1))("minDecimalPlaces",0)("minDecimalPlaces",0),c.zb(1),c.nc("label",c.ic(11,19,"Skip")),c.zb(2),c.Nc(" ",e.skip," ")}}function t2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-classifications-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function n2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-ifrs-concepts-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function i2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-account-types-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function c2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-accounts-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function o2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-agents-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}const r2=function(e){return[e]};function s2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-documents-picker",109),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(4).model,t=c.gc();c.nc("ngModel",t.id)("definitionIds",c.rc(3,r2,e.DefinitionId))("showCreate",!1)}}function l2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",109),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(4).model,t=c.gc();c.nc("ngModel",t.id)("definitionIds",c.rc(3,r2,e.DefinitionId))("showCreate",!1)}}function a2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function u2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function d2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookups-picker",110),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(4).model,t=c.gc();c.nc("ngModel",t.id)("definitionId",e.DefinitionId)("showCreate",!1)}}function b2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-units-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function g2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resources-picker",109),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(4).model,t=c.gc();c.nc("ngModel",t.id)("definitionIds",c.rc(3,r2,e.DefinitionId))("showCreate",!1)}}function f2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function m2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-roles-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function h2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-users-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function p2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relation-definitions-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function S2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resource-definitions-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function v2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-lookup-definitions-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function I2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-document-definitions-picker",108),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(5).id=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(4).model;return c.gc().onParameterChange(t)}),c.Rb()}if(2&e){const e=c.gc(5);c.nc("ngModel",e.id)("showCreate",!1)}}function M2(e,t){if(1&e&&(c.Sb(0,"div",111),c.Lc(1),c.Rb()),2&e){const e=c.gc(4).model;c.zb(1),c.Nc(" TODO: control for '",e.Collection,"'' ")}}function R2(e,t){if(1&e&&(c.Qb(0),c.Qb(1,103),c.Sb(2,"t-form-group",100),c.Jc(3,t2,1,2,"t-account-classifications-picker",104),c.Jc(4,n2,1,2,"t-ifrs-concepts-picker",104),c.Jc(5,i2,1,2,"t-account-types-picker",104),c.Jc(6,c2,1,2,"t-accounts-picker",104),c.Jc(7,o2,1,2,"t-agents-picker",104),c.Jc(8,s2,1,5,"t-documents-picker",105),c.Jc(9,l2,1,5,"t-relations-picker",105),c.Jc(10,a2,1,2,"t-currencies-picker",104),c.Jc(11,u2,1,2,"t-entry-types-picker",104),c.Jc(12,d2,1,3,"t-lookups-picker",106),c.Jc(13,b2,1,2,"t-units-picker",104),c.Jc(14,g2,1,5,"t-resources-picker",105),c.Jc(15,f2,1,2,"t-centers-picker",104),c.Jc(16,m2,1,2,"t-roles-picker",104),c.Jc(17,h2,1,2,"t-users-picker",104),c.Jc(18,p2,1,2,"t-relation-definitions-picker",104),c.Jc(19,S2,1,2,"t-resource-definitions-picker",104),c.Jc(20,v2,1,2,"t-lookup-definitions-picker",104),c.Jc(21,I2,1,2,"t-document-definitions-picker",104),c.Jc(22,M2,2,1,"div",107),c.Rb(),c.Pb(),c.Pb()),2&e){const e=c.gc(3).model,t=c.gc();c.zb(1),c.nc("ngSwitch",e.Collection),c.zb(1),c.nc("label",t.detailsPickerLabel(e)),c.zb(1),c.nc("ngSwitchCase","AccountClassification"),c.zb(1),c.nc("ngSwitchCase","IfrsConcept"),c.zb(1),c.nc("ngSwitchCase","AccountType"),c.zb(1),c.nc("ngSwitchCase","Account"),c.zb(1),c.nc("ngSwitchCase","Agent"),c.zb(1),c.nc("ngSwitchCase","Document"),c.zb(1),c.nc("ngSwitchCase","Relation"),c.zb(1),c.nc("ngSwitchCase","Currency"),c.zb(1),c.nc("ngSwitchCase","EntryType"),c.zb(1),c.nc("ngSwitchCase","Lookup"),c.zb(1),c.nc("ngSwitchCase","Unit"),c.zb(1),c.nc("ngSwitchCase","Resource"),c.zb(1),c.nc("ngSwitchCase","Center"),c.zb(1),c.nc("ngSwitchCase","Role"),c.zb(1),c.nc("ngSwitchCase","User"),c.zb(1),c.nc("ngSwitchCase","RelationDefinition"),c.zb(1),c.nc("ngSwitchCase","ResourceDefinition"),c.zb(1),c.nc("ngSwitchCase","LookupDefinition"),c.zb(1),c.nc("ngSwitchCase","DocumentDefinition")}}function y2(e,t){if(1&e&&(c.Sb(0,"div",98),c.Sb(1,"div",99),c.Jc(2,e2,13,24,"ng-container",57),c.Jc(3,R2,23,21,"ng-container",57),c.Rb(),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(2),c.nc("ngIf",t.showQueryByFilterParams(e)),c.zb(1),c.nc("ngIf",t.showQueryByIdParams(e))}}function D2(e,t){if(1&e&&(c.Sb(0,"div",22),c.Sb(1,"span",23),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3);c.zb(2),c.Mc(e.fileDownloadName)}}function w2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"label",114),c.cc("click",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onLang(1,t)}),c.Nb(1,"input",115),c.Lc(2),c.Rb()}if(2&e){const e=c.gc(4);c.Eb("active",e.isLang(1)),c.oc("title",e.langDisplay(1)),c.zb(2),c.Nc(" ",e.langDisplay(1)," ")}}function E2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"label",114),c.cc("click",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onLang(2,t)}),c.Nb(1,"input",115),c.Lc(2),c.Rb()}if(2&e){const e=c.gc(4);c.Eb("active",e.isLang(2)),c.oc("title",e.langDisplay(2)),c.zb(2),c.Nc(" ",e.langDisplay(2)," ")}}function C2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"label",114),c.cc("click",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onLang(3,t)}),c.Nb(1,"input",115),c.Lc(2),c.Rb()}if(2&e){const e=c.gc(4);c.Eb("active",e.isLang(3)),c.oc("title",e.langDisplay(3)),c.zb(2),c.Nc(" ",e.langDisplay(3)," ")}}function x2(e,t){if(1&e&&(c.Sb(0,"div",112),c.Jc(1,w2,3,4,"label",113),c.Jc(2,E2,3,4,"label",113),c.Jc(3,C2,3,4,"label",113),c.Rb()),2&e){const e=c.gc(2).model,t=c.gc();c.zb(1),c.nc("ngIf",t.showLang(1,e)),c.zb(1),c.nc("ngIf",t.showLang(2,e)),c.zb(1),c.nc("ngIf",t.showLang(3,e))}}function T2(e,t){if(1&e&&(c.Sb(0,"t-error-message"),c.Lc(1),c.Rb()),2&e){const e=c.gc(4);c.zb(1),c.Mc(e.error)}}function z2(e,t){if(1&e&&(c.Sb(0,"div",116),c.Sb(1,"div",117),c.Jc(2,T2,2,1,"t-error-message",57),c.Rb(),c.Nb(3,"iframe",118,119),c.Rb()),2&e){const e=c.gc(3);c.zb(2),c.nc("ngIf",e.error)}}function L2(e,t){if(1&e&&(c.Sb(0,"div",120),c.Nb(1,"fa-icon",121),c.Lc(2),c.Rb()),2&e){const e=c.gc(3);c.zb(2),c.Nc(" \xa0 ",e.message," ")}}function k2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",5),c.Jc(1,y1,7,5,"div",6),c.Jc(2,W1,66,91,"div",7),c.Jc(3,G1,6,4,"div",6),c.Sb(4,"div",8),c.Jc(5,Y1,10,9,"div",9),c.Sb(6,"div",10),c.Jc(7,Z1,7,4,"div",11),c.Sb(8,"div",12),c.Sb(9,"div",13),c.Jc(10,y2,4,2,"div",14),c.Sb(11,"div",15),c.Sb(12,"div"),c.Sb(13,"button",16),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onPrint(t)}),c.Nb(14,"fa-icon",17),c.Sb(15,"span",18),c.Lc(16),c.hc(17,"translate"),c.Rb(),c.Rb(),c.Sb(18,"button",19),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDownload(t)}),c.Nb(19,"fa-icon",20),c.Sb(20,"span",18),c.Lc(21),c.hc(22,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Sb(23,"div"),c.Jc(24,D2,3,1,"div",21),c.Sb(25,"div",22),c.Sb(26,"span",23),c.Lc(27),c.Rb(),c.Rb(),c.Rb(),c.Sb(28,"div"),c.Sb(29,"button",24),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onRefresh(t)}),c.hc(30,"translate"),c.Nb(31,"fa-icon",25),c.Rb(),c.Jc(32,x2,4,3,"div",26),c.Rb(),c.Rb(),c.Rb(),c.Jc(33,z2,5,1,"div",27),c.Jc(34,L2,3,1,"ng-template",null,28,c.Kc),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(35),t=c.gc(),n=t.isEdit,i=t.model,o=c.gc();c.zb(1),c.nc("ngIf",n&&o.collapseMetadata),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",n&&o.collapseEditor),c.zb(2),c.nc("ngIf",n),c.zb(1),c.Eb("col-8",n&&!o.collapseEditor)("col-12",!(n&&!o.collapseEditor)),c.zb(1),c.nc("ngIf",n),c.zb(3),c.nc("ngIf",o.showParametersSection(i)),c.zb(3),c.nc("disabled",o.disablePrint),c.zb(3),c.Nc("\xa0\xa0",c.ic(17,20,"Print"),""),c.zb(2),c.nc("disabled",o.disableDownload),c.zb(3),c.Nc("\xa0\xa0",c.ic(22,22,"Download"),""),c.zb(3),c.nc("ngIf",o.fileDownloadName),c.zb(3),c.Mc(o.fileSizeDisplay),c.zb(2),c.oc("title",c.ic(30,24,"Refresh")),c.zb(3),c.nc("ngIf",o.showLanguageToggle(i)),c.zb(1),c.nc("ngIf",!o.message)("ngIfElse",e)}}function O2(e,t){if(1&e&&c.Jc(0,k2,36,26,"div",4),2&e){const e=t.model,n=c.gc();c.nc("ngIf",n.watch(e))}}function A2(e,t){if(1&e&&(c.Sb(0,"span",123),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e()," ")}}function N2(e,t){if(1&e&&(c.Qb(0),c.Jc(1,A2,2,1,"span",122),c.Pb()),2&e){const e=c.gc(),t=e.control,n=e.serverErrors,i=c.gc();c.zb(1),c.nc("ngForOf",i.errors(t,n))}}function _2(e,t){if(1&e&&c.Jc(0,N2,2,1,"ng-container",57),2&e){const e=t.control,n=t.serverErrors,i=c.gc();c.nc("ngIf",i.invalid(e,n))}}const J2=function(){return[]};let P2=(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.notifyFetch$=new E.a,this.markupChanged$=new E.a,this.markupTemplatesApi=this.api.markupTemplatesApi(this.notifyDestruct$),this.localState=new L.e,this._sections={Metadata:!1,Template:!0},this.expand="",this.collapseEditor=!1,this.collapseMetadata=!0,this.loading=!1,this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsDeployed=!1,e.SupportsPrimaryLanguage=!0,e.SupportsSecondaryLanguage=!!this.workspace.currentTenant.settings.SecondaryLanguageId,e.SupportsTernaryLanguage=!!this.workspace.currentTenant.settings.TernaryLanguageId,e.Usage="QueryByFilter",e.Collection="Document",e.MarkupLanguage="text/html",e.Body=F2,e},this.isInactive=e=>null,this.markupTemplatesApi=this.api.markupTemplatesApi(this.notifyDestruct$)}ngOnInit(){super.ngOnInit(),this._subscriptions=new O.a;const e=this.markupChanged$.pipe(Object(ds.a)(300)),t=this.notifyFetch$,n=Object(OU.a)(e,t);this._subscriptions.add(n.pipe(Object(N.a)(e=>this.doFetch(e))).subscribe())}ngOnDestroy(){super.ngOnDestroy(),this.url&&window.URL.revokeObjectURL(this.url)}get state(){return this.isPopupMode?(this.localState||(this.localState=new L.e),this.localState):this.globalState}get globalState(){const e="markup-templates";return this.workspace.current.mdState[e]||(this.workspace.current.mdState[e]=new L.e),this.workspace.current.mdState[e]}get markupLanguageChoices(){const e=Object(kU.a)(this.workspace,this.translate).properties.MarkupLanguage;return Object(Mi.c)(e)}markupLanguageLookup(e){return Object(kU.a)(this.workspace,this.translate).properties.MarkupLanguage.format(e)}get ws(){return this.workspace.currentTenant}onParameterChange(e){this.fetch(e)}onDefinitionChange(e){this.fetch(e)}onCollectionChange(e){this.id=null,e.DefinitionId=null,this.onDefinitionChange(e)}onDefinitionIdChange(e){this.id=null,this.onDefinitionChange(e)}resetState(){this.top=25,this.skip=0,this.filter=void 0,this.orderby=void 0,this.id=void 0,this.lang=1,this.blob=void 0,this.url&&window.URL.revokeObjectURL(this.url),this.url=void 0,this.iframe&&this.iframe.nativeElement.contentWindow.location.replace("about:blank"),this.contenType=void 0,this.fileSizeDisplay=void 0,this.error=void 0,this.message=void 0,this.loading=!1}onBodyChange(e,t){t.Body!==e&&(t.Body=e,this.markupChanged$.next(t))}invalid(e,t){return Object(Qp.c)(e,t)}errors(e,t){return Object(Qp.d)(e,t,this.translate)}onToggleEditor(){this.collapseEditor=!this.collapseEditor}onToggleMetadata(){this.collapseMetadata=!this.collapseMetadata}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}metadataPaneErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.Name)||Object(Qp.b)(e.serverErrors.Name2)||Object(Qp.b)(e.serverErrors.Name3)||Object(Qp.b)(e.serverErrors.Code)||Object(Qp.b)(e.serverErrors.Description)||Object(Qp.b)(e.serverErrors.Description2)||Object(Qp.b)(e.serverErrors.Description3)||Object(Qp.b)(e.serverErrors.Usage)||Object(Qp.b)(e.serverErrors.Collection)||Object(Qp.b)(e.serverErrors.DefinitionId)||Object(Qp.b)(e.serverErrors.DownloadName)||Object(Qp.b)(e.serverErrors.SupportsPrimaryLanguage)||Object(Qp.b)(e.serverErrors.SupportsSecondaryLanguage)||Object(Qp.b)(e.serverErrors.SupportsTernaryLanguage))}templateSectionErrors(e){return!!e.serverErrors&&Object(Qp.b)(e.serverErrors.Body)}fetch(e){this.notifyFetch$.next(e)}doFetch(e){const t=this.ws.settings,n=1===this.lang&&e.SupportsPrimaryLanguage?t.PrimaryLanguageId:2===this.lang&&e.SupportsSecondaryLanguage?t.SecondaryLanguageId:3===this.lang&&e.SupportsTernaryLanguage?t.TernaryLanguageId:e.SupportsPrimaryLanguage?t.PrimaryLanguageId:e.SupportsSecondaryLanguage?t.SecondaryLanguageId:e.SupportsTernaryLanguage?t.TernaryLanguageId:t.PrimaryLanguageId;if(this.error=void 0,this.message=void 0,!e)return this.loading=!1,Object(A.a)();let i;if("QueryById"===e.Usage){if(!e.Collection)return this.message="Please specify the collection in Metadata.",this.loading=!1,Object(A.a)();if(this.showDefinitionIdSelector(e)&&!e.DefinitionId)return this.message="Please specify the definition in Metadata.",this.loading=!1,Object(A.a)();if(!this.id)return this.message=`Please specify the ${this.detailsPickerLabel(e)} above`,this.loading=!1,Object(A.a)();i=this.markupTemplatesApi.previewById(this.id,e,{culture:n})}else if("QueryByFilter"===e.Usage){if(!e.Collection)return this.message="Please specify the collection",this.loading=!1,Object(A.a)();i=this.markupTemplatesApi.previewByFilter(e,{culture:n,filter:this.filter,orderby:this.orderby,top:this.top,skip:this.skip})}else i=this.markupTemplatesApi.preview(e,{culture:n});return this.loading=!0,i.pipe(Object(J.a)(t=>{this.fileDownloadName=t.DownloadName;const n=new Blob([t.Body],{type:e.MarkupLanguage});this.blob=n,this.url&&window.URL.revokeObjectURL(this.url),this.url=window.URL.createObjectURL(n)+"#toolbar=0&navpanes=0&scrollbar=0",this.iframe.nativeElement.contentWindow.location.replace(this.url),this.contenType=e.MarkupLanguage,this.fileSizeDisplay=Object(V.j)(n.size),this.loading=!1}),Object(F.a)(e=>(this.error=e.error||"Unknown error.",this.loading=!1,Object(A.a)(null))))}get allCollections(){return Object(Mi.a)(this.workspace,this.translate)}showDefinitionIdSelector(e){return!!e&&!!e.Collection&&!!Mi.h[e.Collection](this.workspace,this.translate,null).definitionIds}allDefinitionIds(e){if(e&&e.Collection){const t=Mi.h[e.Collection],n=t(this.workspace,this.translate,null);return n.definitionIds&&!n.definitionIdsArray&&(n.definitionIdsArray=n.definitionIds.map(e=>({value:e,name:t(this.workspace,this.translate,e).titlePlural}))),n.definitionIdsArray}return null}showParametersSection(e){return!!e.Usage}onPrint(e){Object(V.r)(this.blob)}get disablePrint(){return!this.blob}onDownload(e){this.blob&&Object(V.i)(this.blob,this.fileDownloadName)}get disableDownload(){return!this.blob}onRefresh(e){this.loading||this.fetch(e)}get showRefresh(){return!this.loading}get showSpinner(){return this.loading}showLanguageToggle(e){return(this.showLang(1,e)?1:0)+(this.showLang(2,e)?1:0)+(this.showLang(3,e)?1:0)>1}langDisplay(e){return 1===e?this.ws.settings.PrimaryLanguageName:2===e?this.ws.settings.SecondaryLanguageName:3===e?this.ws.settings.TernaryLanguageName:""}onLang(e,t){this.lang!==e&&(this.lang=e,this.onDefinitionChange(t))}isLang(e){return this.lang===e}showLang(e,t){return 1===e&&!!t.SupportsPrimaryLanguage||2===e&&!!t.SupportsSecondaryLanguage&&!!this.ws.settings.SecondaryLanguageId||3===e&&!!t.SupportsTernaryLanguage&&!!this.ws.settings.TernaryLanguageId}showQueryByFilterParams(e){return"QueryByFilter"===e.Usage}showQueryByIdParams(e){return"QueryById"===e.Usage}showCollectionAndDefinition(e){return"QueryById"===e.Usage||"QueryByFilter"===e.Usage}watch(e){const t=this.state.detailsState;return t.modelCollection!==(e.Collection||null)||t.modelDefinitionId!==(e.DefinitionId||null)?(t.modelCollection=e.Collection||null,t.modelDefinitionId=e.DefinitionId||null,this.resetState(),this.fetch(e)):this.loading||this.error||this.message||this.blob?this._currentModel!==e&&this.fetch(e):this.fetch(e),this._currentModel=e,!0}detailsPickerLabel(e){return e&&e.Collection?(0,Mi.h[e.Collection])(this.workspace,this.translate,e.DefinitionId).titleSingular():""}get filter(){return this.state.detailsState.filter}set filter(e){this.state.detailsState.filter=e}get orderby(){return this.state.detailsState.orderby}set orderby(e){this.state.detailsState.orderby=e}get top(){return this.state.detailsState.top}set top(e){this.state.detailsState.top=e}get skip(){return this.state.detailsState.skip}set skip(e){this.state.detailsState.skip=e}get id(){return this.state.detailsState.id}set id(e){this.state.detailsState.id=e}get lang(){return this.state.detailsState.lang}set lang(e){this.state.detailsState.lang=e}onKeydown(e,t,n){Object(V.p)(e,t,e=>n.Body=e)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-markup-templates-details"]],viewQuery:function(e,t){if(1&e&&c.Qc(I1,1),2&e){let e;c.zc(e=c.dc())&&(t.iframe=e.first)}},features:[c.wb],decls:8,vars:13,consts:[["collection","MarkupTemplate","layout","full-screen","theme","dark",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["class","h-100 d-flex",4,"ngIf"],[1,"h-100","d-flex"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],["class","t-less-dark h-100 flex-column t-studio-pane",3,"d-flex","d-none",4,"ngIf"],[1,"h-100","d-flex","flex-grow-1"],["class","t-less-dark h-100 t-studio-pane flex-column p-0 col-4",3,"d-flex","d-none",4,"ngIf"],[1,"d-flex","flex-column","p-0"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"d-flex","flex-column","t-rest-of-screen","bg-white"],[1,"row","mx-0","border-bottom","bg-white"],["class","mx-auto mb-3 w-100","style","max-width: 700px",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","print"],[1,"d-none","d-md-inline"],[1,"btn","btn-primary","btn-light","text-primary","btn-sm","t-toolbar-button","t-white-button",3,"disabled","click"],["icon","download"],["class","d-inline small mx-1 text-muted",4,"ngIf"],[1,"d-inline","small","mx-1","text-muted"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","sync-alt"],["class","btn-group btn-group-toggle t-toolbar-button",4,"ngIf"],["class","t-rest-of-screen bg-white",4,"ngIf","ngIfElse"],["messageTemplate",""],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],["icon","exclamation",1,"t-light-danger","mx-1"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"p-2","t-studio-section","flex-wrap","overflow-auto"],[1,"form-group"],["for","name",1,"small"],["id","name","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],["for","usage",1,"small"],["id","usage",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["usage","ngModel"],["value",""],["value","QueryByFilter"],["value","QueryById"],[4,"ngIf"],["for","downloadName",1,"small"],["id","downloadName","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["downloadName","ngModel"],["class","custom-control custom-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","mt-3"],["type","checkbox","id","isdeployed",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isdeployed",1,"custom-control-label"],["for","name2",1,"small"],["id","name2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name2","ngModel"],["for","name3",1,"small"],["id","name3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name3","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],["for","collection",1,"small"],["id","collection","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["collection","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","definitionId",1,"small"],["id","definitionId",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionId","ngModel"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","supportsPrimaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsPrimaryLanguage",1,"custom-control-label"],["type","checkbox","id","supportsSecondaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsSecondaryLanguage",1,"custom-control-label"],["type","checkbox","id","supportsTernaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsTernaryLanguage",1,"custom-control-label"],[1,"t-less-dark","h-100","t-studio-pane","flex-column","p-0","col-4"],[1,"flex-grow-1"],["spellcheck","false",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","border-0","t-code",3,"ngModel","ngModelChange","keydown"],["textarea",""],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],[1,"row","m-0","px-0","px-lg-1","py-1"],[1,"t-form-group","col",3,"label"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","minDecimalPlaces","ngModelChange"],[3,"ngSwitch"],[3,"ngModel","showCreate","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionIds","showCreate","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionId","showCreate","ngModelChange",4,"ngSwitchCase"],["class","text-danger font-weight-bold",4,"ngSwitchDefault"],[3,"ngModel","showCreate","ngModelChange"],[3,"ngModel","definitionIds","showCreate","ngModelChange"],[3,"ngModel","definitionId","showCreate","ngModelChange"],[1,"text-danger","font-weight-bold"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],["class","btn btn-sm t-pointer btn-light",3,"active","title","click",4,"ngIf"],[1,"btn","btn-sm","t-pointer","btn-light",3,"title","click"],["type","radio","name","searchView"],[1,"t-rest-of-screen","bg-white"],[1,"w-100",2,"position","absolute"],["sandbox","",1,"p-0","border-0","w-100","h-100","d-block"],["iframe",""],[1,"w-100","p-3","px-4"],["icon","info-circle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,M1,2,1,"ng-template",null,1,c.Kc),c.Jc(4,O2,1,1,"ng-template",null,2,c.Kc),c.Jc(6,_2,1,1,"ng-template",null,3,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5);c.nc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"MarkupTemplates"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.qc(12,J2))("isInactive",t.isInactive)}},directives:[q.a,C.l,ee.a,te.c,te.i,te.j,C.p,te.n,te.k,te.o,te.a,te.m,C.k,fe.a,he.a,pe.a,vn,C.m,C.n,C.o,GM,hU,eR,eC,Db,NU,xb,zu,WR,Pd,nv,rv,Au,$s,La,KR,ZR,iB,S1,Se.a],pipes:[K.c],encapsulation:2}),e})();const F2='<!DOCTYPE html>\n<html lang="{{ $Lang }}">\n<head>\n    <meta charset="UTF-8">\n    <title>{{ \'Document\' }}</title>\n    <style>\n\n        /* Printing CSS: Remove if not for printing */\n        @media screen {\n            body {\n                background-color: #F9F9F9;\n            }\n            .page {\n                margin-left: auto;\n                margin-right: auto;\n                margin-top: 1rem;\n                margin-bottom: 1rem;\n                border: 1px solid lightgrey;\n                background-color: white;\n                box-shadow: rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n                box-sizing: border-box;\n                width: 210mm;\n                min-height: 297mm;\n                padding: 0.5in;\n            }\n        }\n        @page {\n            margin: 0.5in;\n            size: A4 Portrait;\n        }\n        .page {\n            break-after: page;\n        }\n        /* End Printing CSS */\n        \n        * {\n            font-family: sans-serif;\n            box-sizing: border-box;\n        }\n        \n        body {\n            margin: 0;\n        }\n        \n        body.rtl {\n            direction: rtl;\n        }\n        \n        /* More CSS Here */\n    \n    </style>\n</head>\n<body class="{{ IF($IsRtl, \'rtl\', \'\') }}">\n    <div class="page">\n        \x3c!-- HTML Template Here --\x3e\n        \n    </div>\n</body>\n</html>';var V2=n("EFu8");const q2=["reportDefinitionModal"],j2=["scriptModal"];function $2(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Hide")," ")}function U2(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Show")," ")}function K2(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Archive")," ")}function B2(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"TitleSingular",n.ws)||c.ic(2,1,"Untitled"))}}function H2(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",73),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleDefinition()}),c.Sb(1,"div",74),c.Nb(2,"fa-icon",75),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.nc("flip",e.flipIcon(!1)),c.zb(2),c.Mc(c.ic(5,2,"Definition"))}}function Q2(e,t){1&e&&c.Nb(0,"fa-icon",76)}function W2(e,t){1&e&&c.Ob(0)}function G2(e,t){1&e&&c.Ob(0)}function Y2(e,t){1&e&&c.Ob(0)}const X2=function(){return{updateOn:"blur"}},Z2=function(e,t){return{control:e,serverErrors:t}};function e3(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",77),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",78,79),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitleSingular2")}),c.Rb(),c.Jc(6,Y2,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),c.zb(2),c.Mc(c.ic(3,7,"TitleSingular")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.TitleSingular2)("ngModelOptions",c.qc(9,X2)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,Z2,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function t3(e,t){1&e&&c.Ob(0)}function n3(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",80),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",81,82),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitleSingular3")}),c.Rb(),c.Jc(6,t3,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),c.zb(2),c.Mc(c.ic(3,7,"TitleSingular")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.TitleSingular3)("ngModelOptions",c.qc(9,X2)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,Z2,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function i3(e,t){1&e&&c.Ob(0)}function c3(e,t){1&e&&c.Ob(0)}function o3(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",83),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",84,85),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitlePlural2")}),c.Rb(),c.Jc(6,c3,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),c.zb(2),c.Mc(c.ic(3,7,"TitlePlural")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.TitlePlural2)("ngModelOptions",c.qc(9,X2)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,Z2,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function r3(e,t){1&e&&c.Ob(0)}function s3(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",86),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",87,88),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitlePlural3")}),c.Rb(),c.Jc(6,r3,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),c.zb(2),c.Mc(c.ic(3,7,"TitlePlural")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.TitlePlural3)("ngModelOptions",c.qc(9,X2)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,Z2,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function l3(e,t){1&e&&c.Nb(0,"fa-icon",76)}function a3(e,t){1&e&&c.Ob(0)}function u3(e,t){1&e&&c.Ob(0)}function d3(e,t){1&e&&c.Ob(0)}function b3(e,t){1&e&&c.Ob(0)}function g3(e,t){1&e&&c.Ob(0)}function f3(e,t){1&e&&c.Ob(0)}function m3(e,t){1&e&&c.Ob(0)}function h3(e,t){1&e&&c.Ob(0)}function p3(e,t){1&e&&c.Ob(0)}function S3(e,t){1&e&&c.Ob(0)}function v3(e,t){1&e&&c.Ob(0)}function I3(e,t){1&e&&c.Ob(0)}function M3(e,t){1&e&&c.Ob(0)}function R3(e,t){1&e&&c.Ob(0)}function y3(e,t){1&e&&c.Ob(0)}function D3(e,t){1&e&&c.Ob(0)}function w3(e,t){1&e&&c.Ob(0)}function E3(e,t){1&e&&c.Ob(0)}function C3(e,t){1&e&&c.Ob(0)}function x3(e,t){1&e&&c.Ob(0)}function T3(e,t){1&e&&c.Ob(0)}function z3(e,t){1&e&&c.Ob(0)}function L3(e,t){1&e&&c.Ob(0)}function k3(e,t){1&e&&c.Ob(0)}function O3(e,t){1&e&&c.Ob(0)}function A3(e,t){1&e&&c.Ob(0)}function N3(e,t){1&e&&c.Ob(0)}function _3(e,t){1&e&&c.Ob(0)}function J3(e,t){1&e&&c.Ob(0)}function P3(e,t){1&e&&c.Ob(0)}function F3(e,t){1&e&&c.Ob(0)}function V3(e,t){1&e&&c.Ob(0)}function q3(e,t){1&e&&c.Ob(0)}const j3=function(e){return{0:e}};function $3(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",52),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"t-relation-definitions-picker",89,90),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Relation1DefinitionId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(7,q3,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Relation1DefinitionId)),c.zb(2),c.Mc(c.jc(3,6,"Field0Definition",c.rc(11,j3,c.ic(4,9,"Entity_Relation1")))),c.zb(3),c.nc("ngModel",t.Relation1DefinitionId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(13,Z2,e,null==t.serverErrors?null:t.serverErrors.Relation1DefinitionId))}}function U3(e,t){1&e&&c.Ob(0)}function K3(e,t){1&e&&c.Ob(0)}function B3(e,t){1&e&&c.Ob(0)}function H3(e,t){1&e&&c.Ob(0)}function Q3(e,t){if(1&e&&(c.Sb(0,"option",91),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function W3(e,t){1&e&&c.Ob(0)}function G3(e,t){if(1&e&&(c.Sb(0,"option",91),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function Y3(e,t){1&e&&c.Ob(0)}function X3(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",92),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"select",93,94),c.cc("ngModelChange",function(n){c.Dc(e);const i=t.prop;return c.gc(2).model[i+"Visibility"]=n})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Jc(7,G3,2,2,"option",36),c.Rb(),c.Jc(8,Y3,1,0,"ng-container",25),c.Rb()}if(2&e){const e=t.prop,n=t.propLower,i=t.fieldName,o=c.Ac(6),r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.Eb("is-invalid",s.invalid(o,s.serverErrors(r,e+"Visibility"))),c.zb(1),c.pc("for","",n,"visibility"),c.zb(1),c.Mc(c.jc(3,9,"Field0Visibility",c.rc(14,j3,c.ic(4,12,i||"Entity_"+e)))),c.zb(3),c.pc("id","",n,"visibility"),c.nc("ngModel",r[e+"Visibility"]),c.zb(2),c.nc("ngForOf",s.visibilityChoices),c.zb(1),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(16,Z2,o,s.serverErrors(r,e+"Visibility")))}}function Z3(e,t){1&e&&c.Ob(0)}function e0(e,t){1&e&&c.Ob(0)}function t0(e,t){1&e&&c.Ob(0)}function n0(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",92),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"input",96,98),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).prop;return c.gc(2).model[n+"Label2"]=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).prop,n=c.gc(2).model;return c.gc().onDefinitionChange(n,t+"Label2")}),c.Rb(),c.Jc(7,t0,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2),n=t.prop,i=t.propLower,o=t.fieldName,r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.Eb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label2"))),c.zb(1),c.pc("for","",i,"label2"),c.zb(1),c.Mc(c.jc(3,9,"Field0Label",c.rc(14,j3,c.ic(4,12,o||"Entity_"+n)))+s.ws.secondaryPostfix),c.zb(3),c.pc("id","",i,"label2"),c.nc("ngModel",r[n+"Label2"])("ngModelOptions",c.qc(16,X2)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(17,Z2,e,s.serverErrors(r,n+"Label2")))}}function i0(e,t){1&e&&c.Ob(0)}function c0(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",92),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"input",96,99),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).prop;return c.gc(2).model[n+"Label3"]=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).prop,n=c.gc(2).model;return c.gc().onDefinitionChange(n,t+"Label3")}),c.Rb(),c.Jc(7,i0,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2),n=t.prop,i=t.propLower,o=t.fieldName,r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.Eb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label3"))),c.zb(1),c.pc("for","",i,"label3"),c.zb(1),c.Mc(c.jc(3,9,"Field0Label",c.rc(14,j3,c.ic(4,12,o||"Entity_"+n)))+s.ws.ternaryPostfix),c.zb(3),c.pc("id","",i,"label3"),c.nc("ngModel",r[n+"Label3"])("ngModelOptions",c.qc(16,X2)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(17,Z2,e,s.serverErrors(r,n+"Label3")))}}function o0(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",21),c.Sb(2,"label",92),c.Lc(3),c.hc(4,"translate"),c.hc(5,"translate"),c.Rb(),c.Sb(6,"input",96,97),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc().prop;return c.gc(2).model[n+"Label"]=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().prop,n=c.gc(2).model;return c.gc().onDefinitionChange(n,t+"Label")}),c.Rb(),c.Jc(8,e0,1,0,"ng-container",25),c.Rb(),c.Jc(9,n0,8,20,"div",29),c.Jc(10,c0,8,20,"div",29),c.Pb()}if(2&e){const e=c.Ac(7),t=c.gc(),n=t.prop,i=t.propLower,o=t.fieldName,r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.zb(1),c.Eb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label"))),c.zb(1),c.pc("for","",i,"label"),c.zb(1),c.Mc(c.jc(4,11,"Field0Label",c.rc(16,j3,c.ic(5,14,o||"Entity_"+n)))+s.ws.primaryPostfix),c.zb(3),c.pc("id","",i,"label"),c.nc("ngModel",r[n+"Label"])("ngModelOptions",c.qc(18,X2)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(19,Z2,e,s.serverErrors(r,n+"Label"))),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId)}}const r0=function(e,t,n){return{prop:e,propLower:t,fieldName:n}};function s0(e,t){if(1&e&&(c.Jc(0,Z3,1,0,"ng-container",25),c.Jc(1,o0,11,22,"ng-container",95)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;c.gc();const o=c.Ac(102),r=c.gc().model,s=c.gc();c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.tc(3,r0,e,n,i)),c.zb(1),c.nc("ngIf",s.isVisible(r[e+"Visibility"]))}}function l0(e,t){1&e&&c.Ob(0)}function a0(e,t){1&e&&c.Ob(0)}function u0(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",52),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"t-lookup-definitions-picker",89,100),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc().prop;return c.gc(2).model[n+"DefinitionId"]=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(7,a0,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(),n=t.prop,i=t.fieldName,o=c.gc(2).model,r=c.gc(),s=c.Ac(13);c.Eb("is-invalid",r.invalid(e,r.serverErrors(o,n+"DefinitionId"))),c.zb(2),c.Mc(c.jc(3,6,"Field0Definition",c.rc(11,j3,c.ic(4,9,i||"Entity_"+n)))),c.zb(3),c.nc("ngModel",o[n+"DefinitionId"]),c.zb(2),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.sc(13,Z2,e,r.serverErrors(o,n+"DefinitionId")))}}function d0(e,t){if(1&e&&(c.Jc(0,l0,1,0,"ng-container",25),c.Jc(1,u0,8,16,"div",29)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;c.gc();const o=c.Ac(104),r=c.gc().model,s=c.gc();c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.tc(3,r0,e,n,i)),c.zb(1),c.nc("ngIf",s.isVisible(r[e+"Visibility"]))}}function b0(e,t){1&e&&c.Nb(0,"fa-icon",76)}function g0(e,t){1&e&&c.Ob(0)}function f0(e,t){1&e&&c.Ob(0)}function m0(e,t){1&e&&c.Nb(0,"fa-icon",76)}function h0(e,t){1&e&&c.Nb(0,"fa-icon",76)}function p0(e,t){1&e&&(c.Sb(0,"div",107),c.Lc(1," \u200c "),c.Rb())}function S0(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",101),c.Sb(1,"div",102),c.Jc(2,h0,1,0,"fa-icon",19),c.Sb(3,"span",103),c.Lc(4),c.Rb(),c.Sb(5,"button",45),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureReportDefinition(n,i)}),c.hc(6,"translate"),c.Nb(7,"fa-icon",104),c.Rb(),c.Lc(8," \xa0 "),c.Sb(9,"button",45),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteReportDefinition(n,i)}),c.hc(10,"translate"),c.Nb(11,"fa-icon",105),c.Rb(),c.Rb(),c.Jc(12,p0,2,0,"div",106),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(2),c.Nc(" ",n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),c.zb(1),c.nc("title",c.ic(6,4,"Configure")),c.zb(4),c.nc("title",c.ic(10,6,"Delete"))}}function v0(e,t){if(1&e&&(c.Sb(0,"span",108),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e," ")}}function I0(e,t){1&e&&c.Nb(0,"fa-icon",76)}function M0(e,t){if(1&e&&(c.Sb(0,"option",91),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function R0(e,t){1&e&&c.Ob(0)}function y0(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",109),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=c.gc(2).model;return c.gc().onIconClick(i,n)}),c.Nb(1,"fa-icon",110),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2).model;c.Eb("t-highlighted",e.value===n.MainMenuIcon),c.nc("title",e.value),c.zb(1),c.nc("icon",e.value)}}function D0(e,t){1&e&&c.Ob(0)}function w0(e,t){1&e&&c.Ob(0)}function E0(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",111),c.Sb(1,"div",112),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeHidden(t)}),c.Sb(2,"span",113),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"div",112),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeVisible(t)}),c.Sb(6,"span",113),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Rb(),c.Sb(9,"div",112),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeArchived(t)}),c.Sb(10,"span",113),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(1),c.Eb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),c.zb(2),c.Mc(c.ic(4,15,"Definition_State_Hidden")),c.zb(2),c.Eb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),c.zb(2),c.Mc(c.ic(8,17,"Definition_State_Visible")),c.zb(2),c.Eb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),c.zb(2),c.Mc(c.ic(12,19,"Definition_State_Archived"))}}const C0=function(){return{prop:"Currency",propLower:"currency"}},x0=function(){return{prop:"Center",propLower:"center"}},T0=function(){return{prop:"Image",propLower:"image",fieldName:"Image"}},z0=function(){return{prop:"Description",propLower:"description",fieldName:"Description"}},L0=function(){return{prop:"Location",propLower:"location"}},k0=function(){return{prop:"FromDate",propLower:"fromdate"}},O0=function(){return{prop:"ToDate",propLower:"todate"}},A0=function(){return{prop:"DateOfBirth",propLower:"dateofbirth",fieldName:"Relation_DateOfBirth"}},N0=function(){return{prop:"ContactEmail",propLower:"contactemail"}},_0=function(){return{prop:"ContactMobile",propLower:"contactmobile"}},J0=function(){return{prop:"ContactAddress",propLower:"contactaddress"}},P0=function(){return{prop:"Date1",propLower:"date1"}},F0=function(){return{prop:"Date2",propLower:"date2"}},V0=function(){return{prop:"Date3",propLower:"date3"}},q0=function(){return{prop:"Date4",propLower:"date4"}},j0=function(){return{prop:"Decimal1",propLower:"decimal1"}},$0=function(){return{prop:"Decimal2",propLower:"decimal2"}},U0=function(){return{prop:"Int1",propLower:"int1"}},K0=function(){return{prop:"Int2",propLower:"int2"}},B0=function(){return{prop:"Lookup1",propLower:"lookup1"}},H0=function(){return{prop:"Lookup2",propLower:"lookup2"}},Q0=function(){return{prop:"Lookup3",propLower:"lookup3"}},W0=function(){return{prop:"Lookup4",propLower:"lookup4"}},G0=function(){return{prop:"Lookup5",propLower:"lookup5"}},Y0=function(){return{prop:"Lookup6",propLower:"lookup6"}},X0=function(){return{prop:"Lookup7",propLower:"lookup7"}},Z0=function(){return{prop:"Lookup8",propLower:"lookup8"}},e4=function(){return{prop:"Text1",propLower:"text1"}},t4=function(){return{prop:"Text2",propLower:"text2"}},n4=function(){return{prop:"Text3",propLower:"text3"}},i4=function(){return{prop:"Text4",propLower:"text4"}},c4=function(){return{prop:"Relation1",propLower:"relation1"}},o4=function(){return{prop:"Agent",propLower:"agent",fieldName:"Relation_Agent"}},r4=function(){return{prop:"TaxIdentificationNumber",propLower:"taxidentificationnumber",fieldName:"Relation_TaxIdentificationNumber"}},s4=function(){return{prop:"BankAccountNumber",propLower:"bankaccountnumber",fieldName:"Relation_BankAccountNumber"}},l4=function(){return{prop:"ExternalReference",propLower:"externalreference",fieldName:"Relation_ExternalReference"}},a4=function(e){return{control:null,serverErrors:e}};function u4(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",10),c.Jc(1,H2,6,4,"div",11),c.Sb(2,"div",12),c.Sb(3,"div",13),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleDefinition()}),c.Sb(4,"span"),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Sb(7,"div",14),c.Nb(8,"fa-icon",15),c.Rb(),c.Rb(),c.Sb(9,"div",16),c.Sb(10,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Title")}),c.Lc(11," \xa0 "),c.Nb(12,"fa-icon",18),c.Lc(13),c.hc(14,"translate"),c.Jc(15,Q2,1,0,"fa-icon",19),c.Rb(),c.Sb(16,"div",20),c.Sb(17,"div",21),c.Sb(18,"label",22),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Sb(21,"input",23,24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Code")}),c.Rb(),c.Jc(23,W2,1,0,"ng-container",25),c.Rb(),c.Sb(24,"div",21),c.Sb(25,"label",26),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Sb(28,"input",27,28),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TitleSingular=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"TitleSingular")}),c.Rb(),c.Jc(30,G2,1,0,"ng-container",25),c.Rb(),c.Jc(31,e3,7,13,"div",29),c.Jc(32,n3,7,13,"div",29),c.Sb(33,"div",21),c.Sb(34,"label",30),c.Lc(35),c.hc(36,"translate"),c.Rb(),c.Sb(37,"input",31,32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TitlePlural=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"TitlePlural")}),c.Rb(),c.Jc(39,i3,1,0,"ng-container",25),c.Rb(),c.Jc(40,o3,7,13,"div",29),c.Jc(41,s3,7,13,"div",29),c.Rb(),c.Sb(42,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Fields")}),c.Lc(43," \xa0 "),c.Nb(44,"fa-icon",18),c.Lc(45),c.hc(46,"translate"),c.Jc(47,l3,1,0,"fa-icon",19),c.Rb(),c.Sb(48,"div",20),c.Jc(49,a3,1,0,"ng-container",25),c.Jc(50,u3,1,0,"ng-container",25),c.Jc(51,d3,1,0,"ng-container",25),c.Jc(52,b3,1,0,"ng-container",25),c.Jc(53,g3,1,0,"ng-container",25),c.Jc(54,f3,1,0,"ng-container",25),c.Jc(55,m3,1,0,"ng-container",25),c.Jc(56,h3,1,0,"ng-container",25),c.Jc(57,p3,1,0,"ng-container",25),c.Jc(58,S3,1,0,"ng-container",25),c.Jc(59,v3,1,0,"ng-container",25),c.Jc(60,I3,1,0,"ng-container",25),c.Jc(61,M3,1,0,"ng-container",25),c.Jc(62,R3,1,0,"ng-container",25),c.Jc(63,y3,1,0,"ng-container",25),c.Jc(64,D3,1,0,"ng-container",25),c.Jc(65,w3,1,0,"ng-container",25),c.Jc(66,E3,1,0,"ng-container",25),c.Jc(67,C3,1,0,"ng-container",25),c.Jc(68,x3,1,0,"ng-container",25),c.Jc(69,T3,1,0,"ng-container",25),c.Jc(70,z3,1,0,"ng-container",25),c.Jc(71,L3,1,0,"ng-container",25),c.Jc(72,k3,1,0,"ng-container",25),c.Jc(73,O3,1,0,"ng-container",25),c.Jc(74,A3,1,0,"ng-container",25),c.Jc(75,N3,1,0,"ng-container",25),c.Jc(76,_3,1,0,"ng-container",25),c.Jc(77,J3,1,0,"ng-container",25),c.Jc(78,P3,1,0,"ng-container",25),c.Jc(79,F3,1,0,"ng-container",25),c.Jc(80,V3,1,0,"ng-container",25),c.Jc(81,$3,8,16,"div",29),c.Jc(82,U3,1,0,"ng-container",25),c.Jc(83,K3,1,0,"ng-container",25),c.Jc(84,B3,1,0,"ng-container",25),c.Jc(85,H3,1,0,"ng-container",25),c.Sb(86,"div",21),c.Sb(87,"label",33),c.Lc(88),c.hc(89,"translate"),c.Rb(),c.Sb(90,"select",34,35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.UserCardinality=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Jc(92,Q3,2,2,"option",36),c.Rb(),c.Jc(93,W3,1,0,"ng-container",25),c.Rb(),c.Sb(94,"div",21),c.Sb(95,"label",37),c.Lc(96),c.hc(97,"translate"),c.Rb(),c.Sb(98,"div",38),c.Sb(99,"input",39),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.HasAttachments=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Nb(100,"label",40),c.Rb(),c.Rb(),c.Jc(101,X3,9,19,"ng-template",null,41,c.Kc),c.Jc(103,s0,2,7,"ng-template",null,42,c.Kc),c.Jc(105,d0,2,7,"ng-template",null,43,c.Kc),c.Rb(),c.Sb(107,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Scripts")}),c.Lc(108," \xa0 "),c.Nb(109,"fa-icon",18),c.Lc(110),c.hc(111,"translate"),c.Jc(112,b0,1,0,"fa-icon",19),c.Rb(),c.Sb(113,"div",20),c.Sb(114,"div",21),c.Sb(115,"label",44),c.Lc(116),c.hc(117,"translate"),c.Rb(),c.Lc(118,"\xa0 "),c.Sb(119,"button",45),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onEditScript("PreprocessScript",t)}),c.hc(120,"translate"),c.Nb(121,"fa-icon",46),c.Rb(),c.Sb(122,"textarea",47,48),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.PreprocessScript=t}),c.Rb(),c.Jc(124,g0,1,0,"ng-container",25),c.Rb(),c.Sb(125,"div",21),c.Sb(126,"label",49),c.Lc(127),c.hc(128,"translate"),c.Rb(),c.Lc(129,"\xa0 "),c.Sb(130,"button",45),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onEditScript("ValidateScript",t)}),c.hc(131,"translate"),c.Nb(132,"fa-icon",46),c.Rb(),c.Sb(133,"textarea",50,51),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ValidateScript=t}),c.Rb(),c.Jc(135,f0,1,0,"ng-container",25),c.Rb(),c.Rb(),c.Sb(136,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Reports")}),c.Lc(137," \xa0 "),c.Nb(138,"fa-icon",18),c.Lc(139),c.hc(140,"translate"),c.Jc(141,m0,1,0,"fa-icon",19),c.Rb(),c.Sb(142,"div",20),c.Sb(143,"div",21),c.Sb(144,"label",52),c.Lc(145),c.hc(146,"translate"),c.Rb(),c.Lc(147,"\xa0 "),c.Sb(148,"button",45),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateReportDefinition(t)}),c.hc(149,"translate"),c.Nb(150,"fa-icon",53),c.Rb(),c.Sb(151,"div",54),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().rowDrop(t,n.ReportDefinitions)}),c.Jc(152,S0,13,8,"div",55),c.Rb(),c.Jc(153,v0,2,1,"span",56),c.Rb(),c.Rb(),c.Sb(154,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Menu")}),c.Lc(155," \xa0 "),c.Nb(156,"fa-icon",18),c.Lc(157),c.hc(158,"translate"),c.Jc(159,I0,1,0,"fa-icon",19),c.Rb(),c.Sb(160,"div",20),c.Sb(161,"div",21),c.Sb(162,"label",57),c.Lc(163),c.hc(164,"translate"),c.Rb(),c.Sb(165,"select",58,59),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.MainMenuSection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"MainMenuSection")}),c.Nb(167,"option",60),c.Jc(168,M0,2,2,"option",36),c.Rb(),c.Jc(169,R0,1,0,"ng-container",25),c.Rb(),c.Sb(170,"div",21),c.Sb(171,"label",61),c.Lc(172),c.hc(173,"translate"),c.Rb(),c.Sb(174,"div",62),c.Jc(175,y0,2,4,"div",63),c.Rb(),c.Jc(176,D0,1,0,"ng-container",25),c.Rb(),c.Sb(177,"div",21),c.Sb(178,"label",64),c.Lc(179),c.hc(180,"translate"),c.Rb(),c.Sb(181,"input",65,66),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.MainMenuSortKey=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"MainMenuSortKey")}),c.Rb(),c.Jc(183,w0,1,0,"ng-container",25),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(184,"div",67),c.Sb(185,"div",68),c.Sb(186,"div",69),c.Sb(187,"span"),c.Lc(188),c.hc(189,"translate"),c.Rb(),c.Rb(),c.Jc(190,E0,13,21,"div",70),c.Rb(),c.Sb(191,"div",71),c.Nb(192,"t-relations-details",72),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(22),t=c.Ac(29),n=c.Ac(38),i=c.Ac(91),o=c.Ac(102),r=c.Ac(104),s=c.Ac(106),l=c.Ac(123),a=c.Ac(134),u=c.Ac(166),d=c.Ac(182),b=c.gc(),g=b.isEdit,f=b.model,m=c.gc(),h=c.Ac(13);c.zb(1),c.nc("ngIf",g&&m.collapseDefinition),c.zb(1),c.Eb("d-flex",g&&!m.collapseDefinition)("d-none",!g||m.collapseDefinition),c.zb(3),c.Mc(c.ic(6,181,"Definition")),c.zb(3),c.nc("flip",m.flipIcon(!1)),c.zb(4),c.nc("flip",m.flipIcon(m.showSection("Title")))("rotate",m.rotateIcon(m.showSection("Title"))),c.zb(1),c.Nc(" \xa0 ",c.ic(14,183,"Title")," "),c.zb(2),c.nc("ngIf",m.sectionErrors("Title",f)),c.zb(1),c.Eb("d-none",!m.showSection("Title")),c.zb(1),c.Eb("is-invalid",m.invalid(e,null==f.serverErrors?null:f.serverErrors.Code)),c.zb(2),c.Mc(c.ic(20,185,"Code")),c.zb(2),c.nc("ngModel",f.Code)("ngModelOptions",c.qc(223,X2)),c.zb(2),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.sc(224,Z2,e,null==f.serverErrors?null:f.serverErrors.Code)),c.zb(1),c.Eb("is-invalid",m.invalid(t,null==f.serverErrors?null:f.serverErrors.TitleSingular)),c.zb(2),c.Mc(c.ic(27,187,"TitleSingular")+m.ws.primaryPostfix),c.zb(2),c.nc("ngModel",f.TitleSingular)("ngModelOptions",c.qc(227,X2)),c.zb(2),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.sc(228,Z2,t,null==f.serverErrors?null:f.serverErrors.TitleSingular)),c.zb(1),c.nc("ngIf",null==m.ws.settings?null:m.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==m.ws.settings?null:m.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("is-invalid",m.invalid(n,null==f.serverErrors?null:f.serverErrors.TitlePlural)),c.zb(2),c.Mc(c.ic(36,189,"TitlePlural")+m.ws.primaryPostfix),c.zb(2),c.nc("ngModel",f.TitlePlural)("ngModelOptions",c.qc(231,X2)),c.zb(2),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.sc(232,Z2,n,null==f.serverErrors?null:f.serverErrors.TitlePlural)),c.zb(1),c.nc("ngIf",null==m.ws.settings?null:m.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==m.ws.settings?null:m.ws.settings.TernaryLanguageId),c.zb(3),c.nc("flip",m.flipIcon(m.showSection("Fields")))("rotate",m.rotateIcon(m.showSection("Fields"))),c.zb(1),c.Nc(" \xa0 ",c.ic(46,191,"Fields")," "),c.zb(2),c.nc("ngIf",m.sectionErrors("Fields",f)),c.zb(1),c.Eb("d-none",!m.showSection("Fields")),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(235,C0)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(236,x0)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(237,T0)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(238,z0)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(239,L0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(240,k0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(241,O0)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(242,A0)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(243,N0)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(244,_0)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(245,J0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(246,P0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(247,F0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(248,V0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(249,q0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(250,j0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(251,$0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(252,U0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(253,K0)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(254,B0)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(255,H0)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(256,Q0)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(257,W0)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(258,G0)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(259,Y0)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(260,X0)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(261,Z0)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(262,e4)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(263,t4)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(264,n4)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(265,i4)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(266,c4)),c.zb(1),c.nc("ngIf",m.isVisible(f.Relation1Visibility)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(267,o4)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(268,r4)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.qc(269,s4)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(270,l4)),c.zb(1),c.Eb("is-invalid",m.invalid(i,m.serverErrors(f,"UserCardinality"))),c.zb(2),c.Mc(c.ic(89,193,"RelationDefinition_UserCardinality")),c.zb(2),c.nc("ngModel",f.UserCardinality),c.zb(2),c.nc("ngForOf",m.cardinalityChoices),c.zb(1),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.sc(271,Z2,i,m.serverErrors(f,"UserCardinality"))),c.zb(3),c.Mc(c.ic(97,195,"Definition_HasAttachments")),c.zb(3),c.nc("ngModel",f.HasAttachments),c.zb(10),c.nc("flip",m.flipIcon(m.showSection("Scripts")))("rotate",m.rotateIcon(m.showSection("Scripts"))),c.zb(1),c.Nc(" \xa0 ",c.ic(111,197,"Scripts")," "),c.zb(2),c.nc("ngIf",m.sectionErrors("Scripts",f)),c.zb(1),c.Eb("d-none",!m.showSection("Scripts")),c.zb(1),c.Eb("is-invalid",m.invalid(l,null==f.serverErrors?null:f.serverErrors.PreprocessScript)),c.zb(2),c.Mc(c.ic(117,199,"Definition_PreprocessScript")),c.zb(3),c.nc("title",c.ic(120,201,"Expand")),c.zb(3),c.nc("ngModel",f.PreprocessScript)("ngModelOptions",c.qc(274,X2)),c.zb(2),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.sc(275,Z2,l,null==f.serverErrors?null:f.serverErrors.PreprocessScript)),c.zb(1),c.Eb("is-invalid",m.invalid(a,null==f.serverErrors?null:f.serverErrors.ValidateScript)),c.zb(2),c.Nc("",c.ic(128,203,"Definition_ValidateScript")," "),c.zb(3),c.nc("title",c.ic(131,205,"Expand")),c.zb(3),c.nc("ngModel",f.ValidateScript)("ngModelOptions",c.qc(278,X2)),c.zb(2),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.sc(279,Z2,a,null==f.serverErrors?null:f.serverErrors.ValidateScript)),c.zb(3),c.nc("flip",m.flipIcon(m.showSection("Reports")))("rotate",m.rotateIcon(m.showSection("Reports"))),c.zb(1),c.Nc(" \xa0 ",c.ic(140,207,"Reports")," "),c.zb(2),c.nc("ngIf",m.sectionErrors("Reports",f)),c.zb(1),c.Eb("d-none",!m.showSection("Reports")),c.zb(3),c.Mc(c.ic(146,209,"Definition_ReportDefinitions")),c.zb(3),c.nc("title",c.ic(149,211,"Create")),c.zb(4),c.nc("ngForOf",f.ReportDefinitions),c.zb(1),c.nc("ngForOf",null==f.serverErrors?null:f.serverErrors.ReportDefinitions),c.zb(3),c.nc("flip",m.flipIcon(m.showSection("Menu")))("rotate",m.rotateIcon(m.showSection("Menu"))),c.zb(1),c.Nc(" \xa0 ",c.ic(158,213,"Menu")," "),c.zb(2),c.nc("ngIf",m.sectionErrors("Menu",f)),c.zb(1),c.Eb("d-none",!m.showSection("Menu")),c.zb(3),c.Mc(c.ic(164,215,"MainMenuSection")),c.zb(2),c.nc("ngModel",f.MainMenuSection),c.zb(3),c.nc("ngForOf",m.allMainMenuSections),c.zb(1),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.sc(282,Z2,u,null==f.serverErrors?null:f.serverErrors.MainMenuSection)),c.zb(3),c.Mc(c.ic(173,217,"MainMenuIcon")),c.zb(3),c.nc("ngForOf",m.allMainMenuIcons),c.zb(1),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.rc(285,a4,null==f.serverErrors?null:f.serverErrors.MainMenuIcon)),c.zb(3),c.Mc(c.ic(180,219,"MainMenuSortKey")),c.zb(2),c.nc("ngModel",f.MainMenuSortKey)("ngModelOptions",c.qc(287,X2)),c.zb(2),c.nc("ngTemplateOutlet",h)("ngTemplateOutletContext",c.sc(288,Z2,d,null==f.serverErrors?null:f.serverErrors.MainMenuSortKey)),c.zb(5),c.Mc(c.ic(189,221,"Preview")),c.zb(2),c.nc("ngIf",!g),c.zb(2),c.nc("previewDefinition",m.getForClient(f))}}function d4(e,t){if(1&e&&c.Jc(0,u4,193,291,"div",9),2&e){const e=t.isEdit,n=c.gc();c.nc("ngIf",n.watchIsEdit(e))}}function b4(e,t){if(1&e&&(c.Sb(0,"span",115),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e()," ")}}function g4(e,t){if(1&e&&(c.Qb(0),c.Jc(1,b4,2,1,"span",114),c.Pb()),2&e){const e=c.gc(),t=e.control,n=e.serverErrors,i=c.gc();c.zb(1),c.nc("ngForOf",i.errors(t,n))}}function f4(e,t){if(1&e&&c.Jc(0,g4,2,1,"ng-container",95),2&e){const e=t.control,n=t.serverErrors,i=c.gc();c.nc("ngIf",i.invalid(e,n))}}function m4(e,t){1&e&&c.Ob(0)}function h4(e,t){1&e&&c.Ob(0)}function p4(e,t){1&e&&c.Ob(0)}function S4(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",122),c.Sb(1,"label",133),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",134,135),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).reportDefinitionToEdit.Name2=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onItemToEditChange()}),c.Rb(),c.Jc(6,p4,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(13);c.Eb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2)),c.zb(2),c.Mc(c.ic(3,7,"Name")+t.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.reportDefinitionToEdit.Name2)("ngModelOptions",c.qc(9,X2)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(10,Z2,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2))}}function v4(e,t){1&e&&c.Ob(0)}function I4(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",122),c.Sb(1,"label",136),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",137,138),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).reportDefinitionToEdit.Name3=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onItemToEditChange()}),c.Rb(),c.Jc(6,v4,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(13);c.Eb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3)),c.zb(2),c.Mc(c.ic(3,7,"Name")+t.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.reportDefinitionToEdit.Name3)("ngModelOptions",c.qc(9,X2)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(10,Z2,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3))}}function M4(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",116),c.Sb(1,"h5",117),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",118),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",119),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",120),c.Sb(8,"div",121),c.Sb(9,"div",122),c.Sb(10,"label",52),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"t-report-definitions-picker",123,124),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().reportDefinitionToEdit.ReportDefinitionId=t})("ngModelChange",function(){return c.Dc(e),c.gc().onItemToEditChange()}),c.Rb(),c.Jc(15,m4,1,0,"ng-container",25),c.Rb(),c.Sb(16,"div",122),c.Sb(17,"label",125),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Sb(20,"input",126,127),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().reportDefinitionToEdit.Name=t})("ngModelChange",function(){return c.Dc(e),c.gc().onItemToEditChange()}),c.Rb(),c.Jc(22,h4,1,0,"ng-container",25),c.Rb(),c.Jc(23,S4,7,13,"div",128),c.Jc(24,I4,7,13,"div",128),c.Rb(),c.Rb(),c.Sb(25,"div",129),c.Sb(26,"button",130),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(27,"fa-icon",131),c.Lc(28),c.hc(29,"translate"),c.Rb(),c.Sb(30,"button",132),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(31,"fa-icon",105),c.Lc(32),c.hc(33,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(14),t=c.Ac(21),n=c.gc(),i=c.Ac(13);c.zb(2),c.Nc(" ",c.ic(3,19,"Configure")," "),c.zb(7),c.Eb("is-invalid",n.invalid(e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),c.zb(2),c.Mc(c.ic(12,21,"Definition_ReportDefinition")),c.zb(2),c.nc("ngModel",n.reportDefinitionToEdit.ReportDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(29,Z2,e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),c.zb(1),c.Eb("is-invalid",n.invalid(t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),c.zb(2),c.Mc(c.ic(19,23,"Name")+n.ws.primaryPostfix),c.zb(2),c.nc("ngModel",n.reportDefinitionToEdit.Name)("ngModelOptions",c.qc(32,X2)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(33,Z2,t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),c.zb(2),c.nc("disabled",!n.reportDefinitionToEdit.ReportDefinitionId),c.zb(2),c.Nc(" \xa0",c.ic(29,25,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(33,27,"Cancel")," ")}}function R4(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",116),c.Sb(1,"h5",117),c.Lc(2),c.Rb(),c.Sb(3,"button",118),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(4,"span",119),c.Lc(5,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(6,"div",120),c.Sb(7,"div",139),c.Sb(8,"textarea",140,141),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().script=t})("keydown",function(t){c.Dc(e);const n=c.Ac(10);return c.gc().onScriptKeydown(n,t)}),c.Lc(11,"                "),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"div",129),c.Sb(13,"button",142),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(14,"fa-icon",131),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Sb(17,"button",142),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(18,"fa-icon",105),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(2),c.Nc(" ",e.scriptModalLabel()," "),c.zb(6),c.nc("ngModel",e.script),c.zb(7),c.Nc(" \xa0",c.ic(16,4,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(20,6,"Cancel")," ")}}const y4=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},D4=function(e,t,n){return[e,t,n]};let w4=(()=>{class e extends mn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.relationDefinitionsApi=this.api.relationDefinitionsApi(this.notifyDestruct$),this.expand="ReportDefinitions.ReportDefinition,Lookup1Definition,Lookup2Definition,Lookup3Definition,Lookup4Definition,\n  Lookup5Definition,Lookup6Definition,Lookup7Definition,Lookup8Definition,Relation1Definition,AttachmentsCategoryDefinition",this.create=()=>{const e={};this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText);for(const t of this.allVisibilityProps())e[t]="None";return e.UserCardinality="None",e.HasAttachments=!1,e.ReportDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.savePreprocessing=e=>{for(const t of this.allVisibilityProps())if("None"===e[t]){const n=t.substr(0,t.length-"Visibility".length);delete e[n+"Label"],delete e[n+"Label2"],delete e[n+"Label3"],delete e[n+"DefinitionId"]}},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this._sections={Title:!0,Fields:!1,Scripts:!1,Reports:!1,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.relationDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.relationDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.relationDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("relation-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.relationDefinitionsApi=this.api.relationDefinitionsApi(this.notifyDestruct$)}allVisibilityProps(){const e=Object(V2.a)(this.workspace,this.translate).properties,t=[];for(const n of Object.keys(e))n.endsWith("Visibility")&&t.push(n);return t}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(Qp.b)(e.serverErrors[t]))}sectionErrors(e,t){return"Title"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.Code)||Object(Qp.b)(t.serverErrors.TitleSingular)||Object(Qp.b)(t.serverErrors.TitleSingular2)||Object(Qp.b)(t.serverErrors.TitleSingular3)||Object(Qp.b)(t.serverErrors.TitlePlural)||Object(Qp.b)(t.serverErrors.TitlePlural2)||Object(Qp.b)(t.serverErrors.TitlePlural3)):"Fields"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.CurrencyVisibility)||Object(Qp.b)(t.serverErrors.CenterVisibility)||Object(Qp.b)(t.serverErrors.ImageVisibility)||Object(Qp.b)(t.serverErrors.DescriptionVisibility)||Object(Qp.b)(t.serverErrors.LocationVisibility)||Object(Qp.b)(t.serverErrors.FromDateLabel)||Object(Qp.b)(t.serverErrors.FromDateLabel2)||Object(Qp.b)(t.serverErrors.FromDateLabel3)||Object(Qp.b)(t.serverErrors.FromDateVisibility)||Object(Qp.b)(t.serverErrors.ToDateLabel)||Object(Qp.b)(t.serverErrors.ToDateLabel2)||Object(Qp.b)(t.serverErrors.ToDateLabel3)||Object(Qp.b)(t.serverErrors.ToDateVisibility)||Object(Qp.b)(t.serverErrors.DateOfBirthVisibility)||Object(Qp.b)(t.serverErrors.ContactEmailVisibility)||Object(Qp.b)(t.serverErrors.ContactMobileVisibility)||Object(Qp.b)(t.serverErrors.ContactAddressVisibility)||Object(Qp.b)(t.serverErrors.Date1Label)||Object(Qp.b)(t.serverErrors.Date1Label2)||Object(Qp.b)(t.serverErrors.Date1Label3)||Object(Qp.b)(t.serverErrors.Date1Visibility)||Object(Qp.b)(t.serverErrors.Date2Label)||Object(Qp.b)(t.serverErrors.Date2Label2)||Object(Qp.b)(t.serverErrors.Date2Label3)||Object(Qp.b)(t.serverErrors.Date2Visibility)||Object(Qp.b)(t.serverErrors.Date3Label)||Object(Qp.b)(t.serverErrors.Date3Label2)||Object(Qp.b)(t.serverErrors.Date3Label3)||Object(Qp.b)(t.serverErrors.Date3Visibility)||Object(Qp.b)(t.serverErrors.Date4Label)||Object(Qp.b)(t.serverErrors.Date4Label2)||Object(Qp.b)(t.serverErrors.Date4Label3)||Object(Qp.b)(t.serverErrors.Date4Visibility)||Object(Qp.b)(t.serverErrors.Decimal1Label)||Object(Qp.b)(t.serverErrors.Decimal1Label2)||Object(Qp.b)(t.serverErrors.Decimal1Label3)||Object(Qp.b)(t.serverErrors.Decimal1Visibility)||Object(Qp.b)(t.serverErrors.Decimal2Label)||Object(Qp.b)(t.serverErrors.Decimal2Label2)||Object(Qp.b)(t.serverErrors.Decimal2Label3)||Object(Qp.b)(t.serverErrors.Decimal2Visibility)||Object(Qp.b)(t.serverErrors.Int1Label)||Object(Qp.b)(t.serverErrors.Int1Label2)||Object(Qp.b)(t.serverErrors.Int1Label3)||Object(Qp.b)(t.serverErrors.Int1Visibility)||Object(Qp.b)(t.serverErrors.Int2Label)||Object(Qp.b)(t.serverErrors.Int2Label2)||Object(Qp.b)(t.serverErrors.Int2Label3)||Object(Qp.b)(t.serverErrors.Int2Visibility)||Object(Qp.b)(t.serverErrors.Lookup1Label)||Object(Qp.b)(t.serverErrors.Lookup1Label2)||Object(Qp.b)(t.serverErrors.Lookup1Label3)||Object(Qp.b)(t.serverErrors.Lookup1Visibility)||Object(Qp.b)(t.serverErrors.Lookup1DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup2Label)||Object(Qp.b)(t.serverErrors.Lookup2Label2)||Object(Qp.b)(t.serverErrors.Lookup2Label3)||Object(Qp.b)(t.serverErrors.Lookup2Visibility)||Object(Qp.b)(t.serverErrors.Lookup2DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup3Label)||Object(Qp.b)(t.serverErrors.Lookup3Label2)||Object(Qp.b)(t.serverErrors.Lookup3Label3)||Object(Qp.b)(t.serverErrors.Lookup3Visibility)||Object(Qp.b)(t.serverErrors.Lookup3DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup4Label)||Object(Qp.b)(t.serverErrors.Lookup4Label2)||Object(Qp.b)(t.serverErrors.Lookup4Label3)||Object(Qp.b)(t.serverErrors.Lookup4Visibility)||Object(Qp.b)(t.serverErrors.Lookup4DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup5Label)||Object(Qp.b)(t.serverErrors.Lookup5Label2)||Object(Qp.b)(t.serverErrors.Lookup5Label3)||Object(Qp.b)(t.serverErrors.Lookup5Visibility)||Object(Qp.b)(t.serverErrors.Lookup5DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup6Label)||Object(Qp.b)(t.serverErrors.Lookup6Label2)||Object(Qp.b)(t.serverErrors.Lookup6Label3)||Object(Qp.b)(t.serverErrors.Lookup6Visibility)||Object(Qp.b)(t.serverErrors.Lookup6DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup7Label)||Object(Qp.b)(t.serverErrors.Lookup7Label2)||Object(Qp.b)(t.serverErrors.Lookup7Label3)||Object(Qp.b)(t.serverErrors.Lookup7Visibility)||Object(Qp.b)(t.serverErrors.Lookup7DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup8Label)||Object(Qp.b)(t.serverErrors.Lookup8Label2)||Object(Qp.b)(t.serverErrors.Lookup8Label3)||Object(Qp.b)(t.serverErrors.Lookup8Visibility)||Object(Qp.b)(t.serverErrors.Lookup8DefinitionId)||Object(Qp.b)(t.serverErrors.Text1Label)||Object(Qp.b)(t.serverErrors.Text1Label2)||Object(Qp.b)(t.serverErrors.Text1Label3)||Object(Qp.b)(t.serverErrors.Text1Visibility)||Object(Qp.b)(t.serverErrors.Text2Label)||Object(Qp.b)(t.serverErrors.Text2Label2)||Object(Qp.b)(t.serverErrors.Text2Label3)||Object(Qp.b)(t.serverErrors.Text2Visibility)||Object(Qp.b)(t.serverErrors.Text3Label)||Object(Qp.b)(t.serverErrors.Text3Label2)||Object(Qp.b)(t.serverErrors.Text3Label3)||Object(Qp.b)(t.serverErrors.Text3Visibility)||Object(Qp.b)(t.serverErrors.Text4Label)||Object(Qp.b)(t.serverErrors.Text4Label2)||Object(Qp.b)(t.serverErrors.Text4Label3)||Object(Qp.b)(t.serverErrors.Text4Visibility)||Object(Qp.b)(t.serverErrors.Relation1Label)||Object(Qp.b)(t.serverErrors.Relation1Label2)||Object(Qp.b)(t.serverErrors.Relation1Label3)||Object(Qp.b)(t.serverErrors.Relation1Visibility)||Object(Qp.b)(t.serverErrors.Relation1DefinitionId)||Object(Qp.b)(t.serverErrors.AgentVisibility)||Object(Qp.b)(t.serverErrors.TaxIdentificationNumberVisibility)||Object(Qp.b)(t.serverErrors.ExternalReferenceLabel)||Object(Qp.b)(t.serverErrors.ExternalReferenceLabel2)||Object(Qp.b)(t.serverErrors.ExternalReferenceLabel3)||Object(Qp.b)(t.serverErrors.ExternalReferenceVisibility)||Object(Qp.b)(t.serverErrors.BankAccountNumberVisibility)||Object(Qp.b)(t.serverErrors.UserCardinality)||Object(Qp.b)(t.serverErrors.HasAttachments)||Object(Qp.b)(t.serverErrors.AttachmentsCategoryDefinitionId)):"Scripts"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.PreprocessScript)||Object(Qp.b)(t.serverErrors.ValidateScript)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.MainMenuIcon)||Object(Qp.b)(t.serverErrors.MainMenuSection)||Object(Qp.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(Qp.c)(e,t)}errors(e,t){return Object(Qp.d)(e,t,this.translate)}serverErrors(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){if(!e)return null;if(this._currentModel!==e||this._currentModelModified){this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e);for(const e of this.allVisibilityProps())"None"===this._getForClientResult[e]&&delete this._getForClientResult[e]}return this._getForClientResult}get visibilityChoices(){return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:()=>this.translate.instant("Visibility_None")},{value:"Optional",name:()=>this.translate.instant("Visibility_Optional")},{value:"Required",name:()=>this.translate.instant("Visibility_Required")}]),this._visibilityChoices}get cardinalityChoices(){return this._cardinalityChoices||(this._cardinalityChoices=[{value:"None",name:()=>this.translate.instant("Cardinality_None")},{value:"Single",name:()=>this.translate.instant("Cardinality_Single")},{value:"Multiple",name:()=>this.translate.instant("Cardinality_Multiple")}]),this._cardinalityChoices}isVisible(e){return"Optional"===e||"Required"===e}get allMainMenuSections(){const e=Object(V2.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Mi.c)(e)}get allMainMenuIcons(){const e=Object(V2.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Mi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateReportDefinition(e){const t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&e.ReportDefinitions.push(t)},e=>{})}onConfigureReportDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=n,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.ReportDefinitions[e]=n)},e=>{})}onDeleteReportDefinition(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}rowDrop(e,t){Object(j.h)(t,e.previousIndex,e.currentIndex)}onEditScript(e,t){this.script=t[e],this.scriptModalLabel=()=>this.translate.instant("Definition_"+e),this.modalService.open(this.scriptModal,{windowClass:"t-dark-theme t-details-modal"}).result.then(n=>{n&&(t[e]=this.script)},e=>{})}onScriptKeydown(e,t){Object(V.p)(e,t,e=>this.script=e)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-relation-definitions-details"]],viewQuery:function(e,t){if(1&e&&(c.Qc(q2,3),c.Qc(j2,3)),2&e){let e;c.zc(e=c.dc())&&(t.reportDefinitionModal=e.first),c.zc(e=c.dc())&&(t.scriptModal=e.first)}},features:[c.wb],decls:18,vars:36,consts:[["collection","RelationDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["scriptModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","usercardinality",1,"small"],["id","usercardinality",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["usercardinality","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","hasattachments",1,"small"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","hasattachments",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasattachments",1,"custom-control-label"],["unlabeledProp",""],["labeledProp",""],["definitionedProp",""],["for","preprocessscript",1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","expand"],["rows","6","id","preprocessscript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["preprocessscript","ngModel"],["for","validatescript",1,"small"],["rows","6","id","validatescript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["validatescript","ngModel"],[1,"small"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["theme","dark",3,"ngModel","ngModelChange"],["relation1defId","ngModel"],[3,"value"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[4,"ngIf"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"id","ngModel","ngModelOptions","ngModelChange"],["label","ngModel"],["label2","ngModel"],["label3","ngModel"],["defId","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"],[1,"row","h-100","t-much-less-dark"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","ngbAutoFocus","",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["scriptnmodel","ngModel","pstextarea",""],[1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,$2,2,3,"ng-template",null,1,c.Kc),c.Jc(4,U2,2,3,"ng-template",null,2,c.Kc),c.Jc(6,K2,2,3,"ng-template",null,3,c.Kc),c.Jc(8,B2,3,3,"ng-template",null,4,c.Kc),c.Jc(10,d4,1,1,"ng-template",null,5,c.Kc),c.Jc(12,f4,1,1,"ng-template",null,6,c.Kc),c.Jc(14,M4,34,36,"ng-template",null,7,c.Kc),c.Jc(16,R4,21,8,"ng-template",null,8,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"RelationDefinitions"))("detailsCrumb",o)("idString",t.idString)("documentTemplate",r)("actions",c.tc(32,D4,c.vc(14,y4,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),c.vc(20,y4,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),c.vc(26,y4,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,C.l,ee.a,te.c,te.m,te.i,te.j,C.p,te.n,C.k,te.a,j.f,te.k,te.o,te.l,Gm,KR,iB,j.b,j.d,VU],pipes:[K.c],encapsulation:2}),e})();function E4(e,t){if(1&e&&(c.Sb(0,"div",11),c.Sb(1,"span",12),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",13),c.Sb(4,"div",14),c.Nb(5,"t-auto-cell",15),c.Rb(),c.Nb(6,"t-auto-cell",16),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("RelationDefinition",e,"TitleSingular")),c.zb(3),c.nc("entity",n.c[e]),c.zb(1),c.nc("entity",n.c[e])}}function C4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"RelationDefinition"),"\n")}function x4(e,t){if(1&e&&(c.Sb(0,"span",17),c.Nb(1,"t-auto-cell",18),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function T4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"SavedByMe")," ")}function z4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Hidden")," ")}function L4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Visible")," ")}function k4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Archived")," ")}function O4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Hide")," ")}function A4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Show")," ")}function N4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Archive")," ")}const _4=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},J4=function(e,t,n){return[e,t,n]},P4=function(e){return{template:e,expression:"SavedById eq me"}},F4=function(e){return[e]},V4=function(e){return{template:e,expression:"State eq 'Hidden'"}},q4=function(e){return{template:e,expression:"State eq 'Visible'"}},j4=function(e){return{template:e,expression:"State eq 'Archived'"}},$4=function(e,t){return{SavedBy:e,State:t}};let U4=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.relationDefinitionsApi=this.api.relationDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.relationDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("RelationDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.relationDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("RelationDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.relationDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("RelationDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("relation-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.relationDefinitionsApi=this.api.relationDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.RelationDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-relation-definitions-master"]],features:[c.wb],decls:22,vars:51,consts:[["collection","RelationDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","RelationDefinition","path","Code",3,"entity"],["collection","RelationDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","RelationDefinition",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,E4,7,3,"ng-template",null,1,c.Kc),c.Jc(4,C4,2,3,"ng-template",null,2,c.Kc),c.Jc(6,x4,2,1,"ng-template",null,3,c.Kc),c.Jc(8,T4,2,3,"ng-template",null,4,c.Kc),c.Jc(10,z4,2,3,"ng-template",null,5,c.Kc),c.Jc(12,L4,2,3,"ng-template",null,6,c.Kc),c.Jc(14,k4,2,3,"ng-template",null,7,c.Kc),c.Jc(16,O4,2,3,"ng-template",null,8,c.Kc),c.Jc(18,A4,2,3,"ng-template",null,9,c.Kc),c.Jc(20,N4,2,3,"ng-template",null,10,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13),l=c.Ac(15),a=c.Ac(17),u=c.Ac(19),d=c.Ac(21);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"RelationDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.tc(30,J4,c.vc(12,_4,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),c.vc(18,_4,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),c.vc(24,_4,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",c.sc(48,$4,c.rc(36,F4,c.rc(34,P4,o)),c.tc(44,J4,c.rc(38,V4,r),c.rc(40,q4,s),c.rc(42,j4,l))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();var K4=n("UWPD");const B4=["reportDefinitionModal"],H4=["scriptModal"];function Q4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Hide")," ")}function W4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Show")," ")}function G4(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Archive")," ")}function Y4(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"TitleSingular",n.ws)||c.ic(2,1,"Untitled"))}}function X4(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",72),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleDefinition()}),c.Sb(1,"div",73),c.Nb(2,"fa-icon",74),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.nc("flip",e.flipIcon(!1)),c.zb(2),c.Mc(c.ic(5,2,"Definition"))}}function Z4(e,t){1&e&&c.Nb(0,"fa-icon",75)}function e5(e,t){1&e&&c.Ob(0)}function t5(e,t){1&e&&c.Ob(0)}function n5(e,t){1&e&&c.Ob(0)}const i5=function(){return{updateOn:"blur"}},c5=function(e,t){return{control:e,serverErrors:t}};function o5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",76),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",77,78),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitleSingular2")}),c.Rb(),c.Jc(6,n5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),c.zb(2),c.Mc(c.ic(3,7,"TitleSingular")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.TitleSingular2)("ngModelOptions",c.qc(9,i5)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,c5,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function r5(e,t){1&e&&c.Ob(0)}function s5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",79),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",80,81),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitleSingular3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitleSingular3")}),c.Rb(),c.Jc(6,r5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),c.zb(2),c.Mc(c.ic(3,7,"TitleSingular")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.TitleSingular3)("ngModelOptions",c.qc(9,i5)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,c5,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function l5(e,t){1&e&&c.Ob(0)}function a5(e,t){1&e&&c.Ob(0)}function u5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",82),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",83,84),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitlePlural2")}),c.Rb(),c.Jc(6,a5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),c.zb(2),c.Mc(c.ic(3,7,"TitlePlural")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.TitlePlural2)("ngModelOptions",c.qc(9,i5)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,c5,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function d5(e,t){1&e&&c.Ob(0)}function b5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",85),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",86,87),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.TitlePlural3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"TitlePlural3")}),c.Rb(),c.Jc(6,d5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),c.zb(2),c.Mc(c.ic(3,7,"TitlePlural")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.TitlePlural3)("ngModelOptions",c.qc(9,i5)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,c5,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function g5(e,t){if(1&e&&(c.Sb(0,"option",88),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function f5(e,t){1&e&&c.Ob(0)}function m5(e,t){1&e&&c.Nb(0,"fa-icon",75)}function h5(e,t){1&e&&c.Ob(0)}function p5(e,t){1&e&&c.Ob(0)}function S5(e,t){1&e&&c.Ob(0)}function v5(e,t){1&e&&c.Ob(0)}function I5(e,t){1&e&&c.Ob(0)}function M5(e,t){1&e&&c.Ob(0)}function R5(e,t){1&e&&c.Ob(0)}function y5(e,t){1&e&&c.Ob(0)}function D5(e,t){1&e&&c.Ob(0)}function w5(e,t){1&e&&c.Ob(0)}function E5(e,t){1&e&&c.Ob(0)}function C5(e,t){1&e&&c.Ob(0)}function x5(e,t){1&e&&c.Ob(0)}function T5(e,t){1&e&&c.Ob(0)}function z5(e,t){1&e&&c.Ob(0)}function L5(e,t){1&e&&c.Ob(0)}function k5(e,t){1&e&&c.Ob(0)}function O5(e,t){1&e&&c.Ob(0)}function A5(e,t){1&e&&c.Ob(0)}function N5(e,t){1&e&&c.Ob(0)}const _5=function(e){return{0:e}};function J5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",89),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"t-decimal-editor",90,91),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.DefaultVatRate=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(7,N5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,n.serverErrors(t,"DefaultVatRate"))),c.zb(2),c.Mc(c.jc(3,9,"Field0Default",c.rc(14,_5,c.ic(4,12,"Resource_VatRate")))),c.zb(3),c.nc("ngModel",t.DefaultVatRate)("minDecimalPlaces",2)("maxDecimalPlaces",4)("isPercentage",!0),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(16,c5,e,n.serverErrors(t,"DefaultVatRate")))}}function P5(e,t){1&e&&c.Ob(0)}function F5(e,t){1&e&&c.Ob(0)}function V5(e,t){if(1&e&&(c.Sb(0,"option",88),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function q5(e,t){1&e&&c.Ob(0)}function j5(e,t){1&e&&c.Ob(0)}function $5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",92),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"t-units-picker",93,94),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.DefaultUnitId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(7,j5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,n.serverErrors(t,"DefaultUnitId"))),c.zb(2),c.Mc(c.jc(3,6,"Field0Default",c.rc(11,_5,c.ic(4,9,"Resource_Unit")))),c.zb(3),c.nc("ngModel",t.DefaultUnitId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(13,c5,e,n.serverErrors(t,"DefaultUnitId")))}}function U5(e,t){1&e&&c.Ob(0)}function K5(e,t){1&e&&c.Ob(0)}function B5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",95),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"t-units-picker",96,97),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.DefaultUnitMassUnitId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(7,K5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,n.serverErrors(t,"DefaultUnitMassUnitId"))),c.zb(2),c.Mc(c.jc(3,6,"Field0Default",c.rc(11,_5,c.ic(4,9,"Resource_UnitMassUnit")))),c.zb(3),c.nc("ngModel",t.DefaultUnitMassUnitId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(13,c5,e,n.serverErrors(t,"DefaultUnitMassUnitId")))}}function H5(e,t){1&e&&c.Ob(0)}function Q5(e,t){1&e&&c.Ob(0)}function W5(e,t){1&e&&c.Ob(0)}function G5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",98),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"t-relation-definitions-picker",99,100),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.ParticipantDefinitionId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(7,W5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t||null==t.serverErrors?null:t.serverErrors.ParticipantDefinitionId)),c.zb(2),c.Mc(c.jc(3,6,"Field0Definition",c.rc(11,_5,c.ic(4,9,"Resource_Participant")))),c.zb(3),c.nc("ngModel",t.ParticipantDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(13,c5,e,null==t||null==t.serverErrors?null:t.serverErrors.ParticipantDefinitionId))}}function Y5(e,t){1&e&&c.Ob(0)}function X5(e,t){1&e&&c.Ob(0)}function Z5(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",51),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"t-resource-definitions-picker",99,101),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Resource1DefinitionId=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(7,X5,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2).model,n=c.gc(),i=c.Ac(13);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Resource1DefinitionId)),c.zb(2),c.Mc(c.jc(3,6,"Field0Definition",c.rc(11,_5,c.ic(4,9,"Entity_Resource1")))),c.zb(3),c.nc("ngModel",t.Resource1DefinitionId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(13,c5,e,null==t.serverErrors?null:t.serverErrors.Resource1DefinitionId))}}function e6(e,t){if(1&e&&(c.Sb(0,"option",88),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function t6(e,t){1&e&&c.Ob(0)}function n6(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",102),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"select",103,104),c.cc("ngModelChange",function(n){c.Dc(e);const i=t.prop;return c.gc(2).model[i+"Visibility"]=n})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t)}),c.Jc(7,e6,2,2,"option",36),c.Rb(),c.Jc(8,t6,1,0,"ng-container",25),c.Rb()}if(2&e){const e=t.prop,n=t.propLower,i=t.fieldName,o=c.Ac(6),r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.Eb("is-invalid",s.invalid(o,s.serverErrors(r,e+"Visibility"))),c.zb(1),c.pc("for","",n,"visibility"),c.zb(1),c.Mc(c.jc(3,9,"Field0Visibility",c.rc(14,_5,c.ic(4,12,i||"Entity_"+e)))),c.zb(3),c.pc("id","",n,"visibility"),c.nc("ngModel",r[e+"Visibility"]),c.zb(2),c.nc("ngForOf",s.visibilityChoices),c.zb(1),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(16,c5,o,s.serverErrors(r,e+"Visibility")))}}function i6(e,t){1&e&&c.Ob(0)}function c6(e,t){1&e&&c.Ob(0)}function o6(e,t){1&e&&c.Ob(0)}function r6(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",102),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"input",106,108),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).prop;return c.gc(2).model[n+"Label2"]=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).prop,n=c.gc(2).model;return c.gc().onDefinitionChange(n,t+"Label2")}),c.Rb(),c.Jc(7,o6,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2),n=t.prop,i=t.propLower,o=t.fieldName,r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.Eb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label2"))),c.zb(1),c.pc("for","",i,"label2"),c.zb(1),c.Mc(c.jc(3,9,"Field0Label",c.rc(14,_5,c.ic(4,12,o||"Entity_"+n)))+s.ws.secondaryPostfix),c.zb(3),c.pc("id","",i,"label2"),c.nc("ngModel",r[n+"Label2"])("ngModelOptions",c.qc(16,i5)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(17,c5,e,s.serverErrors(r,n+"Label2")))}}function s6(e,t){1&e&&c.Ob(0)}function l6(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",102),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"input",106,109),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(2).prop;return c.gc(2).model[n+"Label3"]=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).prop,n=c.gc(2).model;return c.gc().onDefinitionChange(n,t+"Label3")}),c.Rb(),c.Jc(7,s6,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(2),n=t.prop,i=t.propLower,o=t.fieldName,r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.Eb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label3"))),c.zb(1),c.pc("for","",i,"label3"),c.zb(1),c.Mc(c.jc(3,9,"Field0Label",c.rc(14,_5,c.ic(4,12,o||"Entity_"+n)))+s.ws.ternaryPostfix),c.zb(3),c.pc("id","",i,"label3"),c.nc("ngModel",r[n+"Label3"])("ngModelOptions",c.qc(16,i5)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(17,c5,e,s.serverErrors(r,n+"Label3")))}}function a6(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",21),c.Sb(2,"label",102),c.Lc(3),c.hc(4,"translate"),c.hc(5,"translate"),c.Rb(),c.Sb(6,"input",106,107),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc().prop;return c.gc(2).model[n+"Label"]=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().prop,n=c.gc(2).model;return c.gc().onDefinitionChange(n,t+"Label")}),c.Rb(),c.Jc(8,c6,1,0,"ng-container",25),c.Rb(),c.Jc(9,r6,8,20,"div",29),c.Jc(10,l6,8,20,"div",29),c.Pb()}if(2&e){const e=c.Ac(7),t=c.gc(),n=t.prop,i=t.propLower,o=t.fieldName,r=c.gc(2).model,s=c.gc(),l=c.Ac(13);c.zb(1),c.Eb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label"))),c.zb(1),c.pc("for","",i,"label"),c.zb(1),c.Mc(c.jc(4,11,"Field0Label",c.rc(16,_5,c.ic(5,14,o||"Entity_"+n)))+s.ws.primaryPostfix),c.zb(3),c.pc("id","",i,"label"),c.nc("ngModel",r[n+"Label"])("ngModelOptions",c.qc(18,i5)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(19,c5,e,s.serverErrors(r,n+"Label"))),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId)}}const u6=function(e,t,n){return{prop:e,propLower:t,fieldName:n}};function d6(e,t){if(1&e&&(c.Jc(0,i6,1,0,"ng-container",25),c.Jc(1,a6,11,22,"ng-container",105)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;c.gc();const o=c.Ac(96),r=c.gc().model,s=c.gc();c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.tc(3,u6,e,n,i)),c.zb(1),c.nc("ngIf",s.isVisible(r[e+"Visibility"]))}}function b6(e,t){1&e&&c.Ob(0)}function g6(e,t){1&e&&c.Ob(0)}function f6(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",21),c.Sb(1,"label",51),c.Lc(2),c.hc(3,"translate"),c.hc(4,"translate"),c.Rb(),c.Sb(5,"t-lookup-definitions-picker",99,100),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc().prop;return c.gc(2).model[n+"DefinitionId"]=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(3).model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(7,g6,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(6),t=c.gc(),n=t.prop,i=t.fieldName,o=c.gc(2).model,r=c.gc(),s=c.Ac(13);c.Eb("is-invalid",r.invalid(e,r.serverErrors(o,n+"DefinitionId"))),c.zb(2),c.Mc(c.jc(3,6,"Field0Definition",c.rc(11,_5,c.ic(4,9,i||"Entity_"+n)))),c.zb(3),c.nc("ngModel",o[n+"DefinitionId"]),c.zb(2),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.sc(13,c5,e,r.serverErrors(o,n+"DefinitionId")))}}function m6(e,t){if(1&e&&(c.Jc(0,b6,1,0,"ng-container",25),c.Jc(1,f6,8,16,"div",29)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;c.gc();const o=c.Ac(98),r=c.gc().model,s=c.gc();c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.tc(3,u6,e,n,i)),c.zb(1),c.nc("ngIf",s.isVisible(r[e+"Visibility"]))}}function h6(e,t){1&e&&c.Nb(0,"fa-icon",75)}function p6(e,t){1&e&&c.Ob(0)}function S6(e,t){1&e&&c.Ob(0)}function v6(e,t){1&e&&c.Nb(0,"fa-icon",75)}function I6(e,t){1&e&&c.Nb(0,"fa-icon",75)}function M6(e,t){1&e&&(c.Sb(0,"div",116),c.Lc(1," \u200c "),c.Rb())}function R6(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",110),c.Sb(1,"div",111),c.Jc(2,I6,1,0,"fa-icon",19),c.Sb(3,"span",112),c.Lc(4),c.Rb(),c.Sb(5,"button",44),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureReportDefinition(n,i)}),c.hc(6,"translate"),c.Nb(7,"fa-icon",113),c.Rb(),c.Lc(8," \xa0 "),c.Sb(9,"button",44),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteReportDefinition(n,i)}),c.hc(10,"translate"),c.Nb(11,"fa-icon",114),c.Rb(),c.Rb(),c.Jc(12,M6,2,0,"div",115),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(2),c.Nc(" ",n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),c.zb(1),c.nc("title",c.ic(6,4,"Configure")),c.zb(4),c.nc("title",c.ic(10,6,"Delete"))}}function y6(e,t){if(1&e&&(c.Sb(0,"span",117),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e," ")}}function D6(e,t){1&e&&c.Nb(0,"fa-icon",75)}function w6(e,t){if(1&e&&(c.Sb(0,"option",88),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function E6(e,t){1&e&&c.Ob(0)}function C6(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",118),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=c.gc(2).model;return c.gc().onIconClick(i,n)}),c.Nb(1,"fa-icon",119),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(2).model;c.Eb("t-highlighted",e.value===n.MainMenuIcon),c.nc("title",e.value),c.zb(1),c.nc("icon",e.value)}}function x6(e,t){1&e&&c.Ob(0)}function T6(e,t){1&e&&c.Ob(0)}function z6(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",120),c.Sb(1,"div",121),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeHidden(t)}),c.Sb(2,"span",122),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"div",121),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeVisible(t)}),c.Sb(6,"span",122),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Rb(),c.Sb(9,"div",121),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onMakeArchived(t)}),c.Sb(10,"span",122),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(1),c.Eb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),c.zb(2),c.Mc(c.ic(4,15,"Definition_State_Hidden")),c.zb(2),c.Eb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),c.zb(2),c.Mc(c.ic(8,17,"Definition_State_Visible")),c.zb(2),c.Eb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),c.zb(2),c.Mc(c.ic(12,19,"Definition_State_Archived"))}}const L6=function(){return{prop:"Currency",propLower:"currency"}},k6=function(){return{prop:"Center",propLower:"center"}},O6=function(){return{prop:"Image",propLower:"image",fieldName:"Image"}},A6=function(){return{prop:"Description",propLower:"description",fieldName:"Description"}},N6=function(){return{prop:"Location",propLower:"location"}},_6=function(){return{prop:"FromDate",propLower:"fromdate"}},J6=function(){return{prop:"ToDate",propLower:"todate"}},P6=function(){return{prop:"Decimal1",propLower:"decimal1"}},F6=function(){return{prop:"Decimal2",propLower:"decimal2"}},V6=function(){return{prop:"Int1",propLower:"int1"}},q6=function(){return{prop:"Int2",propLower:"int2"}},j6=function(){return{prop:"Lookup1",propLower:"lookup1"}},$6=function(){return{prop:"Lookup2",propLower:"lookup2"}},U6=function(){return{prop:"Lookup3",propLower:"lookup3"}},K6=function(){return{prop:"Lookup4",propLower:"lookup4"}},B6=function(){return{prop:"Text1",propLower:"text1"}},H6=function(){return{prop:"Text2",propLower:"text2"}},Q6=function(){return{prop:"Identifier",propLower:"identifier",fieldName:"Resource_Identifier"}},W6=function(){return{prop:"VatRate",propLower:"vatrate",fieldName:"Resource_VatRate"}},G6=function(){return{prop:"ReorderLevel",propLower:"reorderlevel",fieldName:"Resource_ReorderLevel"}},Y6=function(){return{prop:"EconomicOrderQuantity",propLower:"economicorderquantity",fieldName:"Resource_EconomicOrderQuantity"}},X6=function(){return{prop:"UnitMass",propLower:"unitmass",fieldName:"Resource_UnitMass"}},Z6=function(){return{prop:"MonetaryValue",propLower:"monetaryvalue",fieldName:"Resource_MonetaryValue"}},e7=function(){return{prop:"Participant",propLower:"participant",fieldName:"Resource_Participant"}},t7=function(){return{prop:"Resource1",propLower:"resource1"}},n7=function(e){return{control:null,serverErrors:e}};function i7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",10),c.Jc(1,X4,6,4,"div",11),c.Sb(2,"div",12),c.Sb(3,"div",13),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleDefinition()}),c.Sb(4,"span"),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Sb(7,"div",14),c.Nb(8,"fa-icon",15),c.Rb(),c.Rb(),c.Sb(9,"div",16),c.Sb(10,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Title")}),c.Lc(11," \xa0 "),c.Nb(12,"fa-icon",18),c.Lc(13),c.hc(14,"translate"),c.Jc(15,Z4,1,0,"fa-icon",19),c.Rb(),c.Sb(16,"div",20),c.Sb(17,"div",21),c.Sb(18,"label",22),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Sb(21,"input",23,24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Code")}),c.Rb(),c.Jc(23,e5,1,0,"ng-container",25),c.Rb(),c.Sb(24,"div",21),c.Sb(25,"label",26),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Sb(28,"input",27,28),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TitleSingular=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"TitleSingular")}),c.Rb(),c.Jc(30,t5,1,0,"ng-container",25),c.Rb(),c.Jc(31,o5,7,13,"div",29),c.Jc(32,s5,7,13,"div",29),c.Sb(33,"div",21),c.Sb(34,"label",30),c.Lc(35),c.hc(36,"translate"),c.Rb(),c.Sb(37,"input",31,32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TitlePlural=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"TitlePlural")}),c.Rb(),c.Jc(39,l5,1,0,"ng-container",25),c.Rb(),c.Jc(40,u5,7,13,"div",29),c.Jc(41,b5,7,13,"div",29),c.Sb(42,"div",21),c.Sb(43,"label",33),c.Lc(44),c.hc(45,"translate"),c.Rb(),c.Sb(46,"select",34,35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ResourceDefinitionType=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Jc(48,g5,2,2,"option",36),c.Rb(),c.Jc(49,f5,1,0,"ng-container",25),c.Rb(),c.Rb(),c.Sb(50,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Fields")}),c.Lc(51," \xa0 "),c.Nb(52,"fa-icon",18),c.Lc(53),c.hc(54,"translate"),c.Jc(55,m5,1,0,"fa-icon",19),c.Rb(),c.Sb(56,"div",20),c.Jc(57,h5,1,0,"ng-container",25),c.Jc(58,p5,1,0,"ng-container",25),c.Jc(59,S5,1,0,"ng-container",25),c.Jc(60,v5,1,0,"ng-container",25),c.Jc(61,I5,1,0,"ng-container",25),c.Jc(62,M5,1,0,"ng-container",25),c.Jc(63,R5,1,0,"ng-container",25),c.Jc(64,y5,1,0,"ng-container",25),c.Jc(65,D5,1,0,"ng-container",25),c.Jc(66,w5,1,0,"ng-container",25),c.Jc(67,E5,1,0,"ng-container",25),c.Jc(68,C5,1,0,"ng-container",25),c.Jc(69,x5,1,0,"ng-container",25),c.Jc(70,T5,1,0,"ng-container",25),c.Jc(71,z5,1,0,"ng-container",25),c.Jc(72,L5,1,0,"ng-container",25),c.Jc(73,k5,1,0,"ng-container",25),c.Jc(74,O5,1,0,"ng-container",25),c.Jc(75,A5,1,0,"ng-container",25),c.Jc(76,J5,8,19,"div",29),c.Jc(77,P5,1,0,"ng-container",25),c.Jc(78,F5,1,0,"ng-container",25),c.Sb(79,"div",21),c.Sb(80,"label",37),c.Lc(81),c.hc(82,"translate"),c.Rb(),c.Sb(83,"select",38,39),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.UnitCardinality=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Jc(85,V5,2,2,"option",36),c.Rb(),c.Jc(86,q5,1,0,"ng-container",25),c.Rb(),c.Jc(87,$5,8,16,"div",29),c.Jc(88,U5,1,0,"ng-container",25),c.Jc(89,B5,8,16,"div",29),c.Jc(90,H5,1,0,"ng-container",25),c.Jc(91,Q5,1,0,"ng-container",25),c.Jc(92,G5,8,16,"div",29),c.Jc(93,Y5,1,0,"ng-container",25),c.Jc(94,Z5,8,16,"div",29),c.Jc(95,n6,9,19,"ng-template",null,40,c.Kc),c.Jc(97,d6,2,7,"ng-template",null,41,c.Kc),c.Jc(99,m6,2,7,"ng-template",null,42,c.Kc),c.Rb(),c.Sb(101,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Scripts")}),c.Lc(102," \xa0 "),c.Nb(103,"fa-icon",18),c.Lc(104),c.hc(105,"translate"),c.Jc(106,h6,1,0,"fa-icon",19),c.Rb(),c.Sb(107,"div",20),c.Sb(108,"div",21),c.Sb(109,"label",43),c.Lc(110),c.hc(111,"translate"),c.Rb(),c.Lc(112,"\xa0 "),c.Sb(113,"button",44),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onEditScript("PreprocessScript",t)}),c.hc(114,"translate"),c.Nb(115,"fa-icon",45),c.Rb(),c.Sb(116,"textarea",46,47),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.PreprocessScript=t}),c.Rb(),c.Jc(118,p6,1,0,"ng-container",25),c.Rb(),c.Sb(119,"div",21),c.Sb(120,"label",48),c.Lc(121),c.hc(122,"translate"),c.Rb(),c.Lc(123,"\xa0 "),c.Sb(124,"button",44),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onEditScript("ValidateScript",t)}),c.hc(125,"translate"),c.Nb(126,"fa-icon",45),c.Rb(),c.Sb(127,"textarea",49,50),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ValidateScript=t}),c.Rb(),c.Jc(129,S6,1,0,"ng-container",25),c.Rb(),c.Rb(),c.Sb(130,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Reports")}),c.Lc(131," \xa0 "),c.Nb(132,"fa-icon",18),c.Lc(133),c.hc(134,"translate"),c.Jc(135,v6,1,0,"fa-icon",19),c.Rb(),c.Sb(136,"div",20),c.Sb(137,"div",21),c.Sb(138,"label",51),c.Lc(139),c.hc(140,"translate"),c.Rb(),c.Lc(141,"\xa0 "),c.Sb(142,"button",44),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateReportDefinition(t)}),c.hc(143,"translate"),c.Nb(144,"fa-icon",52),c.Rb(),c.Sb(145,"div",53),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().rowDrop(t,n.ReportDefinitions)}),c.Jc(146,R6,13,8,"div",54),c.Rb(),c.Jc(147,y6,2,1,"span",55),c.Rb(),c.Rb(),c.Sb(148,"div",17),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Menu")}),c.Lc(149," \xa0 "),c.Nb(150,"fa-icon",18),c.Lc(151),c.hc(152,"translate"),c.Jc(153,D6,1,0,"fa-icon",19),c.Rb(),c.Sb(154,"div",20),c.Sb(155,"div",21),c.Sb(156,"label",56),c.Lc(157),c.hc(158,"translate"),c.Rb(),c.Sb(159,"select",57,58),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.MainMenuSection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"MainMenuSection")}),c.Nb(161,"option",59),c.Jc(162,w6,2,2,"option",36),c.Rb(),c.Jc(163,E6,1,0,"ng-container",25),c.Rb(),c.Sb(164,"div",21),c.Sb(165,"label",60),c.Lc(166),c.hc(167,"translate"),c.Rb(),c.Sb(168,"div",61),c.Jc(169,C6,2,4,"div",62),c.Rb(),c.Jc(170,x6,1,0,"ng-container",25),c.Rb(),c.Sb(171,"div",21),c.Sb(172,"label",63),c.Lc(173),c.hc(174,"translate"),c.Rb(),c.Sb(175,"input",64,65),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.MainMenuSortKey=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"MainMenuSortKey")}),c.Rb(),c.Jc(177,T6,1,0,"ng-container",25),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(178,"div",66),c.Sb(179,"div",67),c.Sb(180,"div",68),c.Sb(181,"span"),c.Lc(182),c.hc(183,"translate"),c.Rb(),c.Rb(),c.Jc(184,z6,13,21,"div",69),c.Rb(),c.Sb(185,"div",70),c.Nb(186,"t-resources-details",71),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(22),t=c.Ac(29),n=c.Ac(38),i=c.Ac(47),o=c.Ac(84),r=c.Ac(96),s=c.Ac(98),l=c.Ac(100),a=c.Ac(117),u=c.Ac(128),d=c.Ac(160),b=c.Ac(176),g=c.gc(),f=g.isEdit,m=g.model,h=c.gc(),p=c.Ac(13);c.zb(1),c.nc("ngIf",f&&h.collapseDefinition),c.zb(1),c.Eb("d-flex",f&&!h.collapseDefinition)("d-none",!f||h.collapseDefinition),c.zb(3),c.Mc(c.ic(6,168,"Definition")),c.zb(3),c.nc("flip",h.flipIcon(!1)),c.zb(4),c.nc("flip",h.flipIcon(h.showSection("Title")))("rotate",h.rotateIcon(h.showSection("Title"))),c.zb(1),c.Nc(" \xa0 ",c.ic(14,170,"Title")," "),c.zb(2),c.nc("ngIf",h.sectionErrors("Title",m)),c.zb(1),c.Eb("d-none",!h.showSection("Title")),c.zb(1),c.Eb("is-invalid",h.invalid(e,null==m.serverErrors?null:m.serverErrors.Code)),c.zb(2),c.Mc(c.ic(20,172,"Code")),c.zb(2),c.nc("ngModel",m.Code)("ngModelOptions",c.qc(210,i5)),c.zb(2),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(211,c5,e,null==m.serverErrors?null:m.serverErrors.Code)),c.zb(1),c.Eb("is-invalid",h.invalid(t,null==m.serverErrors?null:m.serverErrors.TitleSingular)),c.zb(2),c.Mc(c.ic(27,174,"TitleSingular")+h.ws.primaryPostfix),c.zb(2),c.nc("ngModel",m.TitleSingular)("ngModelOptions",c.qc(214,i5)),c.zb(2),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(215,c5,t,null==m.serverErrors?null:m.serverErrors.TitleSingular)),c.zb(1),c.nc("ngIf",null==h.ws.settings?null:h.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==h.ws.settings?null:h.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("is-invalid",h.invalid(n,null==m.serverErrors?null:m.serverErrors.TitlePlural)),c.zb(2),c.Mc(c.ic(36,176,"TitlePlural")+h.ws.primaryPostfix),c.zb(2),c.nc("ngModel",m.TitlePlural)("ngModelOptions",c.qc(218,i5)),c.zb(2),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(219,c5,n,null==m.serverErrors?null:m.serverErrors.TitlePlural)),c.zb(1),c.nc("ngIf",null==h.ws.settings?null:h.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==h.ws.settings?null:h.ws.settings.TernaryLanguageId),c.zb(1),c.Eb("is-invalid",h.invalid(i,h.serverErrors(m,"ResourceDefinitionType"))),c.zb(2),c.Mc(c.ic(45,178,"ResourceDefinition_ResourceDefinitionType")),c.zb(2),c.nc("ngModel",m.ResourceDefinitionType),c.zb(2),c.nc("ngForOf",h.resourceDefinitionTypeChoices),c.zb(1),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(222,c5,i,h.serverErrors(m,"ResourceDefinitionType"))),c.zb(3),c.nc("flip",h.flipIcon(h.showSection("Fields")))("rotate",h.rotateIcon(h.showSection("Fields"))),c.zb(1),c.Nc(" \xa0 ",c.ic(54,180,"Fields")," "),c.zb(2),c.nc("ngIf",h.sectionErrors("Fields",m)),c.zb(1),c.Eb("d-none",!h.showSection("Fields")),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(225,L6)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(226,k6)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(227,O6)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(228,A6)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(229,N6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(230,_6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(231,J6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(232,P6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(233,F6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(234,V6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(235,q6)),c.zb(1),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.qc(236,j6)),c.zb(1),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.qc(237,$6)),c.zb(1),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.qc(238,U6)),c.zb(1),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.qc(239,K6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(240,B6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(241,H6)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(242,Q6)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(243,W6)),c.zb(1),c.nc("ngIf",h.isVisible(m.VatRateVisibility)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(244,G6)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(245,Y6)),c.zb(1),c.Eb("is-invalid",h.invalid(o,h.serverErrors(m,"UnitCardinality"))),c.zb(2),c.Mc(c.ic(82,182,"ResourceDefinition_UnitCardinality")),c.zb(2),c.nc("ngModel",m.UnitCardinality),c.zb(2),c.nc("ngForOf",h.cardinalityChoices),c.zb(1),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(246,c5,o,h.serverErrors(m,"UnitCardinality"))),c.zb(1),c.nc("ngIf",h.isCardinalityVisible(m.UnitCardinality)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(249,X6)),c.zb(1),c.nc("ngIf",h.isVisible(m.UnitMassVisibility)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(250,Z6)),c.zb(1),c.nc("ngTemplateOutlet",r)("ngTemplateOutletContext",c.qc(251,e7)),c.zb(1),c.nc("ngIf",h.isVisible(m.ParticipantVisibility)),c.zb(1),c.nc("ngTemplateOutlet",s)("ngTemplateOutletContext",c.qc(252,t7)),c.zb(1),c.nc("ngIf",h.isVisible(m.Resource1Visibility)),c.zb(9),c.nc("flip",h.flipIcon(h.showSection("Scripts")))("rotate",h.rotateIcon(h.showSection("Scripts"))),c.zb(1),c.Nc(" \xa0 ",c.ic(105,184,"Scripts")," "),c.zb(2),c.nc("ngIf",h.sectionErrors("Scripts",m)),c.zb(1),c.Eb("d-none",!h.showSection("Scripts")),c.zb(1),c.Eb("is-invalid",h.invalid(a,null==m.serverErrors?null:m.serverErrors.PreprocessScript)),c.zb(2),c.Mc(c.ic(111,186,"Definition_PreprocessScript")),c.zb(3),c.nc("title",c.ic(114,188,"Expand")),c.zb(3),c.nc("ngModel",m.PreprocessScript)("ngModelOptions",c.qc(253,i5)),c.zb(2),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(254,c5,a,null==m.serverErrors?null:m.serverErrors.PreprocessScript)),c.zb(1),c.Eb("is-invalid",h.invalid(u,null==m.serverErrors?null:m.serverErrors.ValidateScript)),c.zb(2),c.Nc("",c.ic(122,190,"Definition_ValidateScript")," "),c.zb(3),c.nc("title",c.ic(125,192,"Expand")),c.zb(3),c.nc("ngModel",m.ValidateScript)("ngModelOptions",c.qc(257,i5)),c.zb(2),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(258,c5,u,null==m.serverErrors?null:m.serverErrors.ValidateScript)),c.zb(3),c.nc("flip",h.flipIcon(h.showSection("Reports")))("rotate",h.rotateIcon(h.showSection("Reports"))),c.zb(1),c.Nc(" \xa0 ",c.ic(134,194,"Reports")," "),c.zb(2),c.nc("ngIf",h.sectionErrors("Reports",m)),c.zb(1),c.Eb("d-none",!h.showSection("Reports")),c.zb(3),c.Mc(c.ic(140,196,"Definition_ReportDefinitions")),c.zb(3),c.nc("title",c.ic(143,198,"Create")),c.zb(4),c.nc("ngForOf",m.ReportDefinitions),c.zb(1),c.nc("ngForOf",null==m.serverErrors?null:m.serverErrors.ReportDefinitions),c.zb(3),c.nc("flip",h.flipIcon(h.showSection("Menu")))("rotate",h.rotateIcon(h.showSection("Menu"))),c.zb(1),c.Nc(" \xa0 ",c.ic(152,200,"Menu")," "),c.zb(2),c.nc("ngIf",h.sectionErrors("Menu",m)),c.zb(1),c.Eb("d-none",!h.showSection("Menu")),c.zb(3),c.Mc(c.ic(158,202,"MainMenuSection")),c.zb(2),c.nc("ngModel",m.MainMenuSection),c.zb(3),c.nc("ngForOf",h.allMainMenuSections),c.zb(1),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(261,c5,d,null==m.serverErrors?null:m.serverErrors.MainMenuSection)),c.zb(3),c.Mc(c.ic(167,204,"MainMenuIcon")),c.zb(3),c.nc("ngForOf",h.allMainMenuIcons),c.zb(1),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.rc(264,n7,null==m.serverErrors?null:m.serverErrors.MainMenuIcon)),c.zb(3),c.Mc(c.ic(174,206,"MainMenuSortKey")),c.zb(2),c.nc("ngModel",m.MainMenuSortKey)("ngModelOptions",c.qc(266,i5)),c.zb(2),c.nc("ngTemplateOutlet",p)("ngTemplateOutletContext",c.sc(267,c5,b,null==m.serverErrors?null:m.serverErrors.MainMenuSortKey)),c.zb(5),c.Mc(c.ic(183,208,"Preview")),c.zb(2),c.nc("ngIf",!f),c.zb(2),c.nc("previewDefinition",h.getForClient(m))}}function c7(e,t){if(1&e&&c.Jc(0,i7,187,270,"div",9),2&e){const e=t.isEdit,n=c.gc();c.nc("ngIf",n.watchIsEdit(e))}}function o7(e,t){if(1&e&&(c.Sb(0,"span",124),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e()," ")}}function r7(e,t){if(1&e&&(c.Qb(0),c.Jc(1,o7,2,1,"span",123),c.Pb()),2&e){const e=c.gc(),t=e.control,n=e.serverErrors,i=c.gc();c.zb(1),c.nc("ngForOf",i.errors(t,n))}}function s7(e,t){if(1&e&&c.Jc(0,r7,2,1,"ng-container",105),2&e){const e=t.control,n=t.serverErrors,i=c.gc();c.nc("ngIf",i.invalid(e,n))}}function l7(e,t){1&e&&c.Ob(0)}function a7(e,t){1&e&&c.Ob(0)}function u7(e,t){1&e&&c.Ob(0)}function d7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",131),c.Sb(1,"label",142),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",143,144),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).reportDefinitionToEdit.Name2=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onItemToEditChange()}),c.Rb(),c.Jc(6,u7,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(13);c.Eb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2)),c.zb(2),c.Mc(c.ic(3,7,"Name")+t.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.reportDefinitionToEdit.Name2)("ngModelOptions",c.qc(9,i5)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(10,c5,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2))}}function b7(e,t){1&e&&c.Ob(0)}function g7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",131),c.Sb(1,"label",145),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",146,147),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).reportDefinitionToEdit.Name3=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).onItemToEditChange()}),c.Rb(),c.Jc(6,b7,1,0,"ng-container",25),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(13);c.Eb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3)),c.zb(2),c.Mc(c.ic(3,7,"Name")+t.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.reportDefinitionToEdit.Name3)("ngModelOptions",c.qc(9,i5)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(10,c5,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3))}}function f7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",125),c.Sb(1,"h5",126),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",127),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",128),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",129),c.Sb(8,"div",130),c.Sb(9,"div",131),c.Sb(10,"label",51),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"t-report-definitions-picker",132,133),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().reportDefinitionToEdit.ReportDefinitionId=t})("ngModelChange",function(){return c.Dc(e),c.gc().onItemToEditChange()}),c.Rb(),c.Jc(15,l7,1,0,"ng-container",25),c.Rb(),c.Sb(16,"div",131),c.Sb(17,"label",134),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Sb(20,"input",135,136),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().reportDefinitionToEdit.Name=t})("ngModelChange",function(){return c.Dc(e),c.gc().onItemToEditChange()}),c.Rb(),c.Jc(22,a7,1,0,"ng-container",25),c.Rb(),c.Jc(23,d7,7,13,"div",137),c.Jc(24,g7,7,13,"div",137),c.Rb(),c.Rb(),c.Sb(25,"div",138),c.Sb(26,"button",139),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(27,"fa-icon",140),c.Lc(28),c.hc(29,"translate"),c.Rb(),c.Sb(30,"button",141),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(31,"fa-icon",114),c.Lc(32),c.hc(33,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(14),t=c.Ac(21),n=c.gc(),i=c.Ac(13);c.zb(2),c.Nc(" ",c.ic(3,19,"Configure")," "),c.zb(7),c.Eb("is-invalid",n.invalid(e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),c.zb(2),c.Mc(c.ic(12,21,"Definition_ReportDefinition")),c.zb(2),c.nc("ngModel",n.reportDefinitionToEdit.ReportDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(29,c5,e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),c.zb(1),c.Eb("is-invalid",n.invalid(t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),c.zb(2),c.Mc(c.ic(19,23,"Name")+n.ws.primaryPostfix),c.zb(2),c.nc("ngModel",n.reportDefinitionToEdit.Name)("ngModelOptions",c.qc(32,i5)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(33,c5,t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),c.zb(2),c.nc("disabled",!n.reportDefinitionToEdit.ReportDefinitionId),c.zb(2),c.Nc(" \xa0",c.ic(29,25,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(33,27,"Cancel")," ")}}function m7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",125),c.Sb(1,"h5",126),c.Lc(2),c.Rb(),c.Sb(3,"button",127),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(4,"span",128),c.Lc(5,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(6,"div",129),c.Sb(7,"div",148),c.Sb(8,"textarea",149,150),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().script=t})("keydown",function(t){c.Dc(e);const n=c.Ac(10);return c.gc().onScriptKeydown(n,t)}),c.Lc(11,"                "),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"div",138),c.Sb(13,"button",151),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(14,"fa-icon",140),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Sb(17,"button",151),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(18,"fa-icon",114),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(2),c.Nc(" ",e.scriptModalLabel()," "),c.zb(6),c.nc("ngModel",e.script),c.zb(7),c.Nc(" \xa0",c.ic(16,4,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(20,6,"Cancel")," ")}}const h7=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},p7=function(e,t,n){return[e,t,n]};let S7=(()=>{class e extends mn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.resourceDefinitionsApi=this.api.resourceDefinitionsApi(this.notifyDestruct$),this.expand="DefaultUnit,DefaultUnitMassUnit,ReportDefinitions.ReportDefinition,\nLookup1Definition,Lookup2Definition,Lookup3Definition,Lookup4Definition,ParticipantDefinition,Resource1Definition",this.create=()=>{const e={};this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText);for(const t of this.allVisibilityProps())e[t]="None";return e.UnitCardinality="None",e.ReportDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.savePreprocessing=e=>{for(const t of this.allVisibilityProps())if("None"===e[t]){const n=t.substr(0,t.length-"Visibility".length);delete e[n+"Label"],delete e[n+"Label2"],delete e[n+"Label3"],delete e[n+"DefinitionId"]}},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this._sections={Title:!0,Fields:!1,Scripts:!1,Reports:!1,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.resourceDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.resourceDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.resourceDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("resource-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.resourceDefinitionsApi=this.api.resourceDefinitionsApi(this.notifyDestruct$)}allVisibilityProps(){const e=Object(K4.a)(this.workspace,this.translate).properties,t=[];for(const n of Object.keys(e))n.endsWith("Visibility")&&t.push(n);return t}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(Qp.b)(e.serverErrors[t]))}sectionErrors(e,t){return"Title"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.Code)||Object(Qp.b)(t.serverErrors.TitleSingular)||Object(Qp.b)(t.serverErrors.TitleSingular2)||Object(Qp.b)(t.serverErrors.TitleSingular3)||Object(Qp.b)(t.serverErrors.TitlePlural)||Object(Qp.b)(t.serverErrors.TitlePlural2)||Object(Qp.b)(t.serverErrors.TitlePlural3)):"Fields"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.CurrencyVisibility)||Object(Qp.b)(t.serverErrors.CenterVisibility)||Object(Qp.b)(t.serverErrors.ImageVisibility)||Object(Qp.b)(t.serverErrors.DescriptionVisibility)||Object(Qp.b)(t.serverErrors.LocationVisibility)||Object(Qp.b)(t.serverErrors.FromDateLabel)||Object(Qp.b)(t.serverErrors.FromDateLabel2)||Object(Qp.b)(t.serverErrors.FromDateLabel3)||Object(Qp.b)(t.serverErrors.FromDateVisibility)||Object(Qp.b)(t.serverErrors.ToDateLabel)||Object(Qp.b)(t.serverErrors.ToDateLabel2)||Object(Qp.b)(t.serverErrors.ToDateLabel3)||Object(Qp.b)(t.serverErrors.ToDateVisibility)||Object(Qp.b)(t.serverErrors.Decimal1Label)||Object(Qp.b)(t.serverErrors.Decimal1Label2)||Object(Qp.b)(t.serverErrors.Decimal1Label3)||Object(Qp.b)(t.serverErrors.Decimal1Visibility)||Object(Qp.b)(t.serverErrors.Decimal2Label)||Object(Qp.b)(t.serverErrors.Decimal2Label2)||Object(Qp.b)(t.serverErrors.Decimal2Label3)||Object(Qp.b)(t.serverErrors.Decimal2Visibility)||Object(Qp.b)(t.serverErrors.Int1Label)||Object(Qp.b)(t.serverErrors.Int1Label2)||Object(Qp.b)(t.serverErrors.Int1Label3)||Object(Qp.b)(t.serverErrors.Int1Visibility)||Object(Qp.b)(t.serverErrors.Int2Label)||Object(Qp.b)(t.serverErrors.Int2Label2)||Object(Qp.b)(t.serverErrors.Int2Label3)||Object(Qp.b)(t.serverErrors.Int2Visibility)||Object(Qp.b)(t.serverErrors.Lookup1Label)||Object(Qp.b)(t.serverErrors.Lookup1Label2)||Object(Qp.b)(t.serverErrors.Lookup1Label3)||Object(Qp.b)(t.serverErrors.Lookup1Visibility)||Object(Qp.b)(t.serverErrors.Lookup1DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup2Label)||Object(Qp.b)(t.serverErrors.Lookup2Label2)||Object(Qp.b)(t.serverErrors.Lookup2Label3)||Object(Qp.b)(t.serverErrors.Lookup2Visibility)||Object(Qp.b)(t.serverErrors.Lookup2DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup3Label)||Object(Qp.b)(t.serverErrors.Lookup3Label2)||Object(Qp.b)(t.serverErrors.Lookup3Label3)||Object(Qp.b)(t.serverErrors.Lookup3Visibility)||Object(Qp.b)(t.serverErrors.Lookup3DefinitionId)||Object(Qp.b)(t.serverErrors.Lookup4Label)||Object(Qp.b)(t.serverErrors.Lookup4Label2)||Object(Qp.b)(t.serverErrors.Lookup4Label3)||Object(Qp.b)(t.serverErrors.Lookup4Visibility)||Object(Qp.b)(t.serverErrors.Lookup4DefinitionId)||Object(Qp.b)(t.serverErrors.Text1Label)||Object(Qp.b)(t.serverErrors.Text1Label2)||Object(Qp.b)(t.serverErrors.Text1Label3)||Object(Qp.b)(t.serverErrors.Text1Visibility)||Object(Qp.b)(t.serverErrors.Text2Label)||Object(Qp.b)(t.serverErrors.Text2Label2)||Object(Qp.b)(t.serverErrors.Text2Label3)||Object(Qp.b)(t.serverErrors.Text2Visibility)||Object(Qp.b)(t.serverErrors.IdentifierLabel)||Object(Qp.b)(t.serverErrors.IdentifierLabel2)||Object(Qp.b)(t.serverErrors.IdentifierLabel3)||Object(Qp.b)(t.serverErrors.IdentifierVisibility)||Object(Qp.b)(t.serverErrors.ReorderLevelVisibility)||Object(Qp.b)(t.serverErrors.EconomicOrderQuantityVisibility)||Object(Qp.b)(t.serverErrors.UnitCardinality)||Object(Qp.b)(t.serverErrors.DefaultUnitId)||Object(Qp.b)(t.serverErrors.UnitMassVisibility)||Object(Qp.b)(t.serverErrors.DefaultUnitMassUnitId)||Object(Qp.b)(t.serverErrors.MonetaryValueVisibility)||Object(Qp.b)(t.serverErrors.ParticipantVisibility)||Object(Qp.b)(t.serverErrors.ParticipantDefinitionId)||Object(Qp.b)(t.serverErrors.Resource1Label)||Object(Qp.b)(t.serverErrors.Resource1Label2)||Object(Qp.b)(t.serverErrors.Resource1Label3)||Object(Qp.b)(t.serverErrors.Resource1Visibility)||Object(Qp.b)(t.serverErrors.Resource1DefinitionId)||!1):"Scripts"===e?!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.PreprocessScript)||Object(Qp.b)(t.serverErrors.ValidateScript)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(Qp.b)(t.serverErrors.MainMenuIcon)||Object(Qp.b)(t.serverErrors.MainMenuSection)||Object(Qp.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(Qp.c)(e,t)}errors(e,t){return Object(Qp.d)(e,t,this.translate)}serverErrors(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){if(!e)return null;if(this._currentModel!==e||this._currentModelModified){this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e);for(const e of this.allVisibilityProps())"None"===this._getForClientResult[e]&&delete this._getForClientResult[e];"None"===this._getForClientResult.UnitCardinality&&delete this._getForClientResult.UnitCardinality}return this._getForClientResult}get resourceDefinitionTypeChoices(){if(!this._resourceDefinitionTypeChoices){const e=Object(K4.a)(this.workspace,this.translate).properties.ResourceDefinitionType;this._resourceDefinitionTypeChoices=Object(Mi.c)(e)}return this._resourceDefinitionTypeChoices}get visibilityChoices(){return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:()=>this.translate.instant("Visibility_None")},{value:"Optional",name:()=>this.translate.instant("Visibility_Optional")},{value:"Required",name:()=>this.translate.instant("Visibility_Required")}]),this._visibilityChoices}get cardinalityChoices(){return this._cardinalityChoices||(this._cardinalityChoices=[{value:"None",name:()=>this.translate.instant("Cardinality_None")},{value:"Single",name:()=>this.translate.instant("Cardinality_Single")},{value:"Multiple",name:()=>this.translate.instant("Cardinality_Multiple")}]),this._cardinalityChoices}isVisible(e){return"Optional"===e||"Required"===e}isCardinalityVisible(e){return"Single"===e||"Multiple"===e}get allMainMenuSections(){const e=Object(K4.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Mi.c)(e)}get allMainMenuIcons(){const e=Object(K4.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Mi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateReportDefinition(e){const t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&e.ReportDefinitions.push(t)},e=>{})}onConfigureReportDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=n,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.ReportDefinitions[e]=n)},e=>{})}onDeleteReportDefinition(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}rowDrop(e,t){Object(j.h)(t,e.previousIndex,e.currentIndex)}onEditScript(e,t){this.script=t[e],this.scriptModalLabel=()=>this.translate.instant("Definition_"+e),this.modalService.open(this.scriptModal,{windowClass:"t-dark-theme t-details-modal"}).result.then(n=>{n&&(t[e]=this.script)},e=>{})}onScriptKeydown(e,t){Object(V.p)(e,t,e=>this.script=e)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-resource-definitions-details"]],viewQuery:function(e,t){if(1&e&&(c.Qc(B4,3),c.Qc(H4,3)),2&e){let e;c.zc(e=c.dc())&&(t.reportDefinitionModal=e.first),c.zc(e=c.dc())&&(t.scriptModal=e.first)}},features:[c.wb],decls:18,vars:36,consts:[["collection","ResourceDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["scriptModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","resourcedefinitointype",1,"small"],["id","resourcedefinitointype","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["resourcedefinitointype","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","unitcardinality",1,"small"],["id","unitcardinality",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["unitcardinality","ngModel"],["unlabeledProp",""],["labeledProp",""],["definitionedProp",""],["for","preprocessscript",1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","expand"],["rows","6","id","preprocessscript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["preprocessscript","ngModel"],["for","validatescript",1,"small"],["rows","6","id","validatescript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["validatescript","ngModel"],[1,"small"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],[3,"value"],["for","defaultvatrate",1,"small"],["theme","dark","id","defaultvatrate",3,"ngModel","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange"],["defaultvatrate","ngModel"],["for","defaultunit",1,"small"],["theme","dark","id","defaultunit",3,"ngModel","ngModelChange"],["defaultunit","ngModel"],["for","defaultunitmassunit",1,"small"],["theme","dark","id","defaultunitmassunit",3,"ngModel","ngModelChange"],["defaultunitmassunit","ngModel"],["for","participantdefinitionId",1,"small"],["theme","dark",3,"ngModel","ngModelChange"],["defId","ngModel"],["resource1defId","ngModel"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[4,"ngIf"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"id","ngModel","ngModelOptions","ngModelChange"],["label","ngModel"],["label2","ngModel"],["label3","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"],[1,"row","h-100","t-much-less-dark"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","ngbAutoFocus","",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["scriptnmodel","ngModel","pstextarea",""],[1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Q4,2,3,"ng-template",null,1,c.Kc),c.Jc(4,W4,2,3,"ng-template",null,2,c.Kc),c.Jc(6,G4,2,3,"ng-template",null,3,c.Kc),c.Jc(8,Y4,3,3,"ng-template",null,4,c.Kc),c.Jc(10,c7,1,1,"ng-template",null,5,c.Kc),c.Jc(12,s7,1,1,"ng-template",null,6,c.Kc),c.Jc(14,f7,34,36,"ng-template",null,7,c.Kc),c.Jc(16,m7,21,8,"ng-template",null,8,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"ResourceDefinitions"))("detailsCrumb",o)("idString",t.idString)("documentTemplate",r)("actions",c.tc(32,p7,c.vc(14,h7,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),c.vc(20,h7,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),c.vc(26,h7,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,C.l,ee.a,te.c,te.m,te.i,te.j,C.p,te.n,C.k,j.f,te.k,te.o,te.l,NM,vn,nv,KR,ZR,iB,j.b,j.d,VU],pipes:[K.c],encapsulation:2}),e})();function v7(e,t){if(1&e&&(c.Sb(0,"div",11),c.Sb(1,"span",12),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",13),c.Sb(4,"div",14),c.Nb(5,"t-auto-cell",15),c.Rb(),c.Nb(6,"t-auto-cell",16),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("ResourceDefinition",e,"TitleSingular")),c.zb(3),c.nc("entity",n.c[e]),c.zb(1),c.nc("entity",n.c[e])}}function I7(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"ResourceDefinition"),"\n")}function M7(e,t){if(1&e&&(c.Sb(0,"span",17),c.Nb(1,"t-auto-cell",18),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function R7(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"SavedByMe")," ")}function y7(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Hidden")," ")}function D7(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Visible")," ")}function w7(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_State_Archived")," ")}function E7(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Hide")," ")}function C7(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Show")," ")}function x7(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Definition_Archive")," ")}const T7=function(e,t,n,i,c){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:c}},z7=function(e,t,n){return[e,t,n]},L7=function(e){return{template:e,expression:"SavedById eq me"}},k7=function(e){return[e]},O7=function(e){return{template:e,expression:"State eq 'Hidden'"}},A7=function(e){return{template:e,expression:"State eq 'Visible'"}},N7=function(e){return{template:e,expression:"State eq 'Archived'"}},_7=function(e,t){return{SavedBy:e,State:t}};let J7=(()=>{class e extends xt.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.resourcesDefinitionsApi=this.api.resourceDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.resourcesDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("ResourceDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.resourcesDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("ResourceDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.resourcesDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(J.a)(e=>Object(V.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("ResourceDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("resource-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.resourcesDefinitionsApi=this.api.resourceDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.ResourceDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(W.a),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-resource-definitions-master"]],features:[c.wb],decls:22,vars:51,consts:[["collection","ResourceDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","ResourceDefinition","path","Code",3,"entity"],["collection","ResourceDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","ResourceDefinition",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,v7,7,3,"ng-template",null,1,c.Kc),c.Jc(4,I7,2,3,"ng-template",null,2,c.Kc),c.Jc(6,M7,2,1,"ng-template",null,3,c.Kc),c.Jc(8,R7,2,3,"ng-template",null,4,c.Kc),c.Jc(10,y7,2,3,"ng-template",null,5,c.Kc),c.Jc(12,D7,2,3,"ng-template",null,6,c.Kc),c.Jc(14,w7,2,3,"ng-template",null,7,c.Kc),c.Jc(16,E7,2,3,"ng-template",null,8,c.Kc),c.Jc(18,C7,2,3,"ng-template",null,9,c.Kc),c.Jc(20,x7,2,3,"ng-template",null,10,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13),l=c.Ac(15),a=c.Ac(17),u=c.Ac(19),d=c.Ac(21);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,10,"ResourceDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.tc(30,z7,c.vc(12,T7,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),c.vc(18,T7,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),c.vc(24,T7,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",c.sc(48,_7,c.rc(36,k7,c.rc(34,L7,o)),c.tc(44,z7,c.rc(38,O7,r),c.rc(40,A7,s),c.rc(42,N7,l))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();const P7=["errorModal"];function F7(e,t){1&e&&c.Ob(0)}function V7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Sb(2,"t-currencies-picker",36),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).currencyId=t}),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.nc("label",c.ic(1,5,"Entry_Currency")),c.zb(2),c.nc("ngModel",e.currencyId)("additionalSelect",e.currencyAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function q7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",39),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).custodianId=t}),c.Rb()}if(2&e){const e=c.gc(4);c.nc("ngModel",e.custodianId)("definitionIds",e.definitionIdsCustodian_Manual)("showCreate",!1)}}function j7(e,t){if(1&e&&(c.Sb(0,"t-view-link",40),c.Lc(1),c.Rb()),2&e){const e=c.gc(4);let t=null;c.nc("link",e.link("relations/")+(null==(t=e.ws.get("Relation",e.readonlyValueCustodianId_Manual))?null:t.DefinitionId))("itemId",e.readonlyValueCustodianId_Manual),c.zb(1),c.Nc(" ",e.ws.getMultilingualValue("Relation",e.readonlyValueCustodianId_Manual,"Name")," ")}}function $7(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.Jc(1,q7,1,3,"t-relations-picker",37),c.Jc(2,j7,2,3,"t-view-link",38),c.Rb()),2&e){const e=c.gc(3);c.nc("label",e.labelCustodian_Manual),c.zb(1),c.nc("ngIf",!e.readonlyCustodian_Manual),c.zb(1),c.nc("ngIf",e.readonlyCustodian_Manual)}}function U7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",42),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).relationId=t}),c.Rb()}if(2&e){const e=c.gc(4);c.nc("ngModel",e.relationId)("definitionIds",e.definitionIdsRelation_Manual)("showCreate",!1)("additionalSelect",e.relationAdditionalSelect)("ensureAdditionalSelect",!0)}}function K7(e,t){if(1&e&&(c.Sb(0,"t-view-link",40),c.Lc(1),c.Rb()),2&e){const e=c.gc(4);let t=null;c.nc("link",e.link("relations/")+(null==(t=e.ws.get("Relation",e.readonlyValueRelationId_Manual))?null:t.DefinitionId))("itemId",e.readonlyValueRelationId_Manual),c.zb(1),c.Nc(" ",e.ws.getMultilingualValue("Relation",e.readonlyValueRelationId_Manual,"Name")," ")}}function B7(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.Jc(1,U7,1,5,"t-relations-picker",41),c.Jc(2,K7,2,3,"t-view-link",38),c.Rb()),2&e){const e=c.gc(3);c.nc("label",e.labelRelation_Manual),c.zb(1),c.nc("ngIf",!e.readonlyRelation_Manual),c.zb(1),c.nc("ngIf",e.readonlyRelation_Manual)}}function H7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-resources-picker",44),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).resourceId=t})("entityLoaded",function(){return c.Dc(e),c.gc(4).onParameterLoaded()}),c.Rb()}if(2&e){const e=c.gc(4);c.nc("ngModel",e.resourceId)("definitionIds",e.definitionIdsResource_Manual)("additionalSelect",e.resourceAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function Q7(e,t){if(1&e&&(c.Sb(0,"t-view-link",40),c.Lc(1),c.Rb()),2&e){const e=c.gc(4);let t=null;c.nc("link",e.link("resources/")+(null==(t=e.ws.get("Resource",e.readonlyValueResourceId_Manual))?null:t.DefinitionId))("itemId",e.readonlyValueResourceId_Manual),c.zb(1),c.Nc(" ",e.ws.getMultilingualValue("Resource",e.readonlyValueResourceId_Manual,"Name")," ")}}function W7(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.Jc(1,H7,1,5,"t-resources-picker",43),c.Jc(2,Q7,2,3,"t-view-link",38),c.Rb()),2&e){const e=c.gc(3);c.nc("label",e.labelResource_Manual),c.zb(1),c.nc("ngIf",!e.readonlyResource_Manual),c.zb(1),c.nc("ngIf",e.readonlyResource_Manual)}}function G7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",42),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).notedRelationId=t}),c.Rb()}if(2&e){const e=c.gc(4);c.nc("ngModel",e.notedRelationId)("definitionIds",e.definitionIdsNotedRelation_Manual)("showCreate",!1)("additionalSelect",e.notedRelationAdditionalSelect)("ensureAdditionalSelect",!0)}}function Y7(e,t){if(1&e&&(c.Sb(0,"t-view-link",40),c.Lc(1),c.Rb()),2&e){const e=c.gc(4);let t=null;c.nc("link",e.link("relations/")+(null==(t=e.ws.get("Relation",e.readonlyValueNotedRelationId_Manual))?null:t.DefinitionId))("itemId",e.readonlyValueNotedRelationId_Manual),c.zb(1),c.Nc(" ",e.ws.getMultilingualValue("Relation",e.readonlyValueNotedRelationId_Manual,"Name")," ")}}function X7(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.Jc(1,G7,1,5,"t-relations-picker",41),c.Jc(2,Y7,2,3,"t-view-link",38),c.Rb()),2&e){const e=c.gc(3);c.nc("label",e.labelNotedRelation_Manual),c.zb(1),c.nc("ngIf",!e.readonlyNotedRelation_Manual),c.zb(1),c.nc("ngIf",e.readonlyNotedRelation_Manual)}}function Z7(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-entry-types-picker",46),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).entryTypeId=t}),c.Rb()}if(2&e){const e=c.gc(4);c.nc("ngModel",e.entryTypeId)("filter",e.filterEntryType_Manual)("showCreate",!1)}}function e8(e,t){if(1&e&&(c.Sb(0,"t-view-link",40),c.Lc(1),c.Rb()),2&e){const e=c.gc(4);c.nc("link",e.link("entry-types"))("itemId",e.readonlyValueEntryTypeId_Manual),c.zb(1),c.Nc(" ",e.ws.getMultilingualValue("EntryType",e.readonlyValueEntryTypeId_Manual,"Name")," ")}}function t8(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,Z7,1,3,"t-entry-types-picker",45),c.Jc(3,e8,2,3,"t-view-link",38),c.Rb()),2&e){const e=c.gc(3);c.nc("label",c.ic(1,3,"Entry_EntryType")),c.zb(2),c.nc("ngIf",!e.readonlyEntryType_Manual),c.zb(1),c.nc("ngIf",e.readonlyEntryType_Manual)}}function n8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-centers-picker",48),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(4).centerId=t}),c.Rb()}if(2&e){const e=c.gc(4);c.nc("ngModel",e.centerId)("showCreate",!1)}}function i8(e,t){if(1&e&&(c.Sb(0,"t-view-link",40),c.Lc(1),c.Rb()),2&e){const e=c.gc(4);c.nc("link",e.link("centers"))("itemId",e.readonlyValueCenterId_Manual),c.zb(1),c.Nc(" ",e.ws.getMultilingualValue("Center",e.readonlyValueCenterId_Manual,"Name")," ")}}function c8(e,t){if(1&e&&(c.Sb(0,"t-form-group",10),c.hc(1,"translate"),c.Jc(2,n8,1,2,"t-centers-picker",47),c.Jc(3,i8,2,3,"t-view-link",38),c.Rb()),2&e){const e=c.gc(3);c.nc("label",c.ic(1,3,"Entry_Center")),c.zb(2),c.nc("ngIf",!e.readonlyCenter_Manual),c.zb(1),c.nc("ngIf",e.readonlyCenter_Manual)}}function o8(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"t-form-group",10),c.hc(2,"translate"),c.Sb(3,"t-accounts-picker",34),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).accountId=t})("entityLoaded",function(){return c.Dc(e),c.gc(2).onParameterLoaded()}),c.Rb(),c.Rb(),c.Jc(4,V7,3,7,"t-form-group",35),c.Jc(5,$7,3,3,"t-form-group",35),c.Jc(6,B7,3,3,"t-form-group",35),c.Jc(7,W7,3,3,"t-form-group",35),c.Jc(8,X7,3,3,"t-form-group",35),c.Jc(9,t8,4,5,"t-form-group",35),c.Jc(10,c8,4,5,"t-form-group",35),c.Pb()}if(2&e){const e=c.gc(2);c.zb(1),c.nc("label",c.ic(2,12,"Entry_Account")+" *"),c.zb(2),c.nc("ngModel",e.accountId)("additionalSelect",e.accountAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1),c.zb(1),c.nc("ngIf",e.showCurrencyParameter),c.zb(1),c.nc("ngIf",e.showCustodianParameter),c.zb(1),c.nc("ngIf",e.showRelationParameter),c.zb(1),c.nc("ngIf",e.showResourceParameter),c.zb(1),c.nc("ngIf",e.showNotedRelationParameter),c.zb(1),c.nc("ngIf",e.showEntryTypeParameter),c.zb(1),c.nc("ngIf",e.showCenterParameter)}}function r8(e,t){1&e&&c.Nb(0,"t-spinner",49)}function s8(e,t){if(1&e&&(c.Sb(0,"div",50),c.Nb(1,"fa-icon",51),c.Lc(2),c.Rb()),2&e){const e=c.gc(2);c.zb(2),c.Nc(" \xa0 ",e.information()," ")}}function l8(e,t){if(1&e&&(c.Sb(0,"th"),c.Lc(1),c.Rb()),2&e){const e=t.$implicit,n=c.gc(3);c.Ic("width",n.fromWeight(e.weight)),c.Eb("text-right",e.isRightAligned),c.zb(1),c.Nc(" ",e.label()," ")}}function a8(e,t){if(1&e&&(c.Qb(0),c.Lc(1),c.hc(2,"dateFormat"),c.Pb()),2&e){const e=c.gc(5);c.zb(1),c.Nc(" ",c.ic(2,1,e.fromDate)," ")}}function u8(e,t){1&e&&(c.Qb(0),c.Lc(1),c.hc(2,"translate"),c.Pb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"OpeningBalance")," "))}function d8(e,t){if(1&e&&(c.Qb(0),c.Lc(1),c.Pb()),2&e){const e=c.gc(5);c.zb(1),c.Nc(" \u200c",e.openingQuantityDisplay,"\u200c ")}}function b8(e,t){if(1&e&&(c.Qb(0),c.Lc(1),c.Pb()),2&e){const e=c.gc(5);c.zb(1),c.Nc(" \u200c",e.openingMonetaryValueDisplay,"\u200c ")}}function g8(e,t){if(1&e&&(c.Qb(0),c.Lc(1),c.Pb()),2&e){const e=c.gc(5);c.zb(1),c.Nc(" \u200c",e.openingDisplay,"\u200c ")}}function f8(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,a8,3,3,"ng-container",64),c.Jc(2,u8,3,3,"ng-container",64),c.Jc(3,d8,2,1,"ng-container",64),c.Jc(4,b8,2,1,"ng-container",64),c.Jc(5,g8,2,1,"ng-container",64),c.Rb()),2&e){const e=t.$implicit;c.Eb("text-right",e.isRightAligned),c.zb(1),c.nc("ngIf","PostingDate"===e.id),c.zb(1),c.nc("ngIf","SerialNumber"===e.id),c.zb(1),c.nc("ngIf","QuantityAccumulation"===e.id),c.zb(1),c.nc("ngIf","MonetaryValueAccumulation"===e.id),c.zb(1),c.nc("ngIf","Accumulation"===e.id)}}function m8(e,t){if(1&e&&(c.Sb(0,"tr",62),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Jc(3,f8,6,7,"td",63),c.Sb(4,"td"),c.Lc(5,"\u200c"),c.Rb(),c.Rb()),2&e){const e=c.gc(3);c.zb(3),c.nc("ngForOf",e.columns)}}function h8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr",65),c.cc("click",function(){return c.Dc(e),c.gc(3).onPreviousPage()}),c.Sb(1,"td",66),c.Lc(2,"..."),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(1),c.nc("colSpan",e.columns.length+2)}}function p8(e,t){if(1&e&&(c.Sb(0,"td"),c.Lc(1),c.Rb()),2&e){const e=t.$implicit,n=c.gc().$implicit;c.Eb("text-right",e.isRightAligned),c.zb(1),c.Nc(" ",e.display(n),"\u200c ")}}function S8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr",65),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc(3).onSelectRow(n)}),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Jc(3,p8,2,3,"td",63),c.Sb(4,"td"),c.Lc(5,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(3),c.nc("ngForOf",e.columns)}}function v8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr",65),c.cc("click",function(){return c.Dc(e),c.gc(3).onNextPage()}),c.Sb(1,"td",66),c.Lc(2,"..."),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(1),c.nc("colSpan",e.columns.length+2)}}function I8(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"span"),c.Lc(2),c.hc(3,"dateFormat"),c.Rb(),c.Pb()),2&e){const e=c.gc(5);c.zb(2),c.Mc(c.ic(3,1,e.toDate))}}function M8(e,t){1&e&&(c.Qb(0),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Pb()),2&e&&(c.zb(2),c.Mc(c.ic(3,1,"ClosingBalance")))}function R8(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"span",67),c.Lc(2),c.Rb(),c.Pb()),2&e){const e=c.gc(5);c.zb(2),c.Nc("\u200c",e.closingDisplay,"\u200c")}}function y8(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"span",67),c.Lc(2),c.Rb(),c.Pb()),2&e){const e=c.gc(5);c.zb(2),c.Nc("\u200c",e.closingQuantityDisplay,"\u200c")}}function D8(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"span",67),c.Lc(2),c.Rb(),c.Pb()),2&e){const e=c.gc(5);c.zb(2),c.Nc("\u200c",e.closingMonetaryValueDisplay,"\u200c")}}function w8(e,t){if(1&e&&(c.Sb(0,"td"),c.Jc(1,I8,4,3,"ng-container",64),c.Jc(2,M8,4,3,"ng-container",64),c.Jc(3,R8,3,1,"ng-container",64),c.Jc(4,y8,3,1,"ng-container",64),c.Jc(5,D8,3,1,"ng-container",64),c.Rb()),2&e){const e=t.$implicit;c.Eb("text-right",e.isRightAligned),c.zb(1),c.nc("ngIf","PostingDate"===e.id),c.zb(1),c.nc("ngIf","SerialNumber"===e.id),c.zb(1),c.nc("ngIf","Accumulation"===e.id),c.zb(1),c.nc("ngIf","QuantityAccumulation"===e.id),c.zb(1),c.nc("ngIf","MonetaryValueAccumulation"===e.id)}}function E8(e,t){if(1&e&&(c.Sb(0,"tr",62),c.Sb(1,"td"),c.Lc(2,"\u200c"),c.Rb(),c.Jc(3,w8,6,7,"td",63),c.Sb(4,"td"),c.Lc(5,"\u200c"),c.Rb(),c.Rb()),2&e){const e=c.gc(3);c.zb(3),c.nc("ngForOf",e.columns)}}function C8(e,t){1&e&&(c.Sb(0,"div",68),c.Nb(1,"t-spinner",69),c.Rb()),2&e&&(c.zb(1),c.nc("scale",2))}function x8(e,t){if(1&e&&(c.Sb(0,"div",70),c.Sb(1,"t-error-message"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(3);c.zb(2),c.Nc(" ",e.errorMessage," ")}}function T8(e,t){if(1&e&&(c.Sb(0,"div",52),c.Sb(1,"cdk-virtual-scroll-viewport",53),c.Sb(2,"table",54),c.Sb(3,"thead"),c.Sb(4,"tr"),c.Nb(5,"th",55),c.Jc(6,l8,2,5,"th",56),c.Nb(7,"th",55),c.Rb(),c.Rb(),c.Sb(8,"tbody"),c.Jc(9,m8,6,1,"tr",57),c.Jc(10,h8,3,1,"tr",58),c.Jc(11,S8,6,1,"tr",59),c.Jc(12,v8,3,1,"tr",58),c.Jc(13,E8,6,1,"tr",57),c.Rb(),c.Rb(),c.Jc(14,C8,2,1,"div",60),c.Jc(15,x8,3,1,"div",61),c.Rb(),c.Rb()),2&e){const e=c.gc(2);c.zb(6),c.nc("ngForOf",e.columns),c.zb(3),c.nc("ngIf",e.showOpeningBalance),c.zb(1),c.nc("ngIf",e.canPreviousPage),c.zb(1),c.nc("cdkVirtualForOf",e.entities),c.zb(1),c.nc("ngIf",e.canNextPage),c.zb(1),c.nc("ngIf",e.showClosingBalance),c.zb(1),c.nc("ngIf",e.showSpinner),c.zb(1),c.nc("ngIf",e.showErrorMessage)}}const z8=function(){return{updateOn:"blur"}};function L8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",3),c.Sb(1,"div",4),c.Sb(2,"div",5),c.Sb(3,"ul",6),c.Sb(4,"li",7),c.Lc(5),c.Rb(),c.Rb(),c.Rb(),c.Sb(6,"div",8),c.Sb(7,"div",9),c.Sb(8,"t-form-group",10),c.hc(9,"translate"),c.Sb(10,"t-date-picker",11),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().fromDate=t}),c.Rb(),c.Rb(),c.Sb(11,"t-form-group",10),c.hc(12,"translate"),c.Sb(13,"t-date-picker",11),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().toDate=t}),c.Rb(),c.Rb(),c.Jc(14,F7,1,0,"ng-container",12),c.Jc(15,o8,11,14,"ng-container",12),c.Sb(16,"t-form-group",10),c.hc(17,"translate"),c.Sb(18,"div",13),c.Sb(19,"input",14),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().includeCompleted=t}),c.Rb(),c.Sb(20,"label",15),c.Lc(21,"\u200c"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(22,"div",16),c.Sb(23,"div",17),c.Sb(24,"button",18),c.cc("click",function(){return c.Dc(e),c.gc().onExport()}),c.Nb(25,"fa-icon",19),c.Sb(26,"span",20),c.Lc(27),c.hc(28,"translate"),c.Rb(),c.Rb(),c.Jc(29,r8,1,0,"t-spinner",21),c.Rb(),c.Sb(30,"div"),c.Sb(31,"button",22),c.cc("click",function(){return c.Dc(e),c.gc().onRefresh()}),c.hc(32,"translate"),c.Nb(33,"fa-icon",23),c.Rb(),c.Sb(34,"div",24),c.Sb(35,"span",25),c.Sb(36,"span"),c.Lc(37),c.hc(38,"number"),c.Rb(),c.Lc(39," - "),c.Sb(40,"span"),c.Lc(41),c.hc(42,"number"),c.Rb(),c.Rb(),c.Sb(43,"span",25),c.Lc(44),c.Rb(),c.Rb(),c.Sb(45,"button",26),c.cc("click",function(){return c.Dc(e),c.gc().onPreviousPage()}),c.hc(46,"translate"),c.Nb(47,"fa-icon",27),c.Rb(),c.Sb(48,"button",26),c.cc("click",function(){return c.Dc(e),c.gc().onNextPage()}),c.hc(49,"translate"),c.Nb(50,"fa-icon",28),c.Rb(),c.Sb(51,"button",29),c.cc("click",function(){return c.Dc(e),c.gc().onToggleCollapseParameters()}),c.hc(52,"translate"),c.Nb(53,"fa-icon",30),c.Sb(54,"span",20),c.Lc(55),c.hc(56,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(57,"div",31),c.Jc(58,s8,3,1,"div",32),c.Jc(59,T8,16,8,"div",33),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(5),c.Nc(" ",e.title," "),c.zb(1),c.Eb("d-none",e.collapseParameters),c.zb(1),c.nc("ngSwitch",e.type),c.zb(1),c.nc("label",c.ic(9,32,"FromDate")+" *"),c.zb(2),c.nc("ngModel",e.fromDate)("ngModelOptions",c.qc(54,z8)),c.zb(1),c.nc("label",c.ic(12,34,"ToDate")+" *"),c.zb(2),c.nc("ngModel",e.toDate)("ngModelOptions",c.qc(55,z8)),c.zb(1),c.nc("ngSwitchCase","relation"),c.zb(1),c.nc("ngSwitchCase","account"),c.zb(1),c.nc("label",c.ic(17,36,"IncludeCompleted")),c.zb(3),c.nc("ngModel",e.includeCompleted),c.zb(5),c.nc("disabled",!e.canExport),c.zb(3),c.Nc("\xa0\xa0",c.ic(28,38,"Export"),""),c.zb(2),c.nc("ngIf",e.showExportSpinner),c.zb(2),c.oc("title",c.ic(32,40,"Refresh")),c.zb(6),c.Mc(c.ic(38,42,e.from)),c.zb(4),c.Mc(c.ic(42,44,e.to)),c.zb(3),c.Nc(" / ",e.totalDisplay,""),c.zb(1),c.oc("title",c.ic(46,46,"Previous")),c.nc("disabled",!e.canPreviousPage),c.zb(2),c.nc("flip",e.flip),c.zb(1),c.oc("title",c.ic(49,48,"Next")),c.nc("disabled",!e.canNextPage),c.zb(2),c.nc("flip",e.flip),c.zb(1),c.oc("title",c.ic(52,50,e.collapseParameters?"Expand":"Collapse")),c.zb(2),c.nc("icon",e.collapseParameters?"angle-down":"angle-up"),c.zb(2),c.Nc("\xa0\xa0",c.ic(56,52,e.collapseParameters?"Expand":"Collapse"),""),c.zb(3),c.nc("ngIf",e.showInformation),c.zb(1),c.nc("ngIf",!e.showInformation)}}function k8(e,t){1&e&&c.Nb(0,"t-application-page-not-found")}function O8(e,t){if(1&e&&(c.Sb(0,"div",71),c.Sb(1,"h5",72),c.Nb(2,"fa-icon",73),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",74),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(6,"span",75),c.Lc(7,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",76),c.Lc(9),c.Rb(),c.Sb(10,"div",77),c.Sb(11,"button",78),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(12,"fa-icon",79),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc("\xa0\xa0",c.ic(4,3,"Error")," "),c.zb(6),c.Nc(" ",e.actionErrorMessage," "),c.zb(4),c.Nc(" \xa0",c.ic(14,5,"Dismiss")," ")}}let A8=(()=>{class e{constructor(e,t,n,i,c,o,r){this.route=e,this.router=t,this.customUserSettings=n,this.translate=i,this.workspace=c,this.apiService=o,this.modalService=r,this.notifyFetch$=new E.a,this.notifyDestruct$=new E.a,this.api=this.apiService.detailsEntriesApi(this.notifyDestruct$),this.showExportSpinner=!1,this.DEFAULT_PAGE_SIZE=60,this.accountAdditionalSelect="$DocumentDetails",this.currencyAdditionalSelect="E",this.relationAdditionalSelect="$DocumentDetails",this.resourceAdditionalSelect="$DocumentDetails",this.notedRelationAdditionalSelect="$DocumentDetails",this._columnsParametersHaveChanged=!1,this._collapseParameters=!1}get numericKeys(){switch(this.type){case"account":return["account_id","custodian_id","relation_id","resource_id","noted_relation_id","entry_type_id","center_id"];case"relation":return["relation_id","account_id","resource_id"];default:console.error(`Unhandled report type ${this.type}`)}}get stringKeys(){switch(this.type){case"account":return["from_date","to_date","currency_id"];case"relation":return["from_date","to_date"];default:console.error(`Unhandled report type ${this.type}`)}}get booleanKeys(){switch(this.type){case"account":case"relation":return["include_completed"];default:console.error(`Unhandled report type ${this.type}`)}}get relationDefinition(){return this.ws.definitions.Relations[this.definitionId]}ngOnInit(){this.api=this.apiService.detailsEntriesApi(this.notifyDestruct$),this._subscriptions=new O.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(N.a)(()=>this.doFetch())).subscribe()),this._subscriptions.add(this.route.paramMap.subscribe(e=>{let t=!1;const n=this.state,i=n.arguments;for(const r of this.stringKeys){const n=e.get(r)||void 0;i[r]!==n&&(i[r]=n,t=!0)}for(const r of this.numericKeys){const n=+e.get(r)||void 0;i[r]!==n&&(i[r]=n,t=!0)}for(const r of this.booleanKeys){const n="true"===(e.get(r)||!1).toString();i[r]!==n&&(i[r]=n,t=!0)}switch(this.type){case"account":break;case"relation":const t=+e.get("definitionId");t&&this.ws.definitions.Relations[t]&&(this.definitionId=t);break;default:console.error(`Unhandled report type ${this.type}`)}const c=+e.get("skip")||0;n.skip!==c&&(n.skip=c,t=!0);const o="true"===(e.get("collapse_params")||!1).toString();this._collapseParameters!==o&&(this._collapseParameters=o),t&&this.fetch()}))}ngOnDestroy(){this.notifyDestruct$.next(),this._subscriptions.unsubscribe()}ngOnChanges(e){[e.type].some(e=>!!e&&!e.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}urlStateChanged(){const e=this.state,t=e.arguments,n={};for(const i of this.stringKeys.concat(this.numericKeys).concat(this.booleanKeys)){const e=t[i]||void 0;e&&(n[i]=e)}e.skip&&(n.skip=e.skip),this._collapseParameters&&(n.collapse_params=!0),this.router.navigate([".",n],{relativeTo:this.route,replaceUrl:!0})}get argumentsKey(){switch(this.type){case"account":return"account-statement/arguments";case"relation":return`relation-statement/${this.definitionId}/arguments`;default:console.error(`Unhandled report type ${this.type}`)}}parametersChanged(){this.urlStateChanged(),this._columnsParametersHaveChanged=!0;const e=JSON.stringify(this.state.arguments);this.customUserSettings.save(this.argumentsKey,e),this.fetch()}get ws(){return this.workspace.currentTenant}fetch(){this.notifyFetch$.next()}computeSelect(){const e={},t=[];for(const n of this.columns)for(const i of n.select)e[i]||(e[i]=!0,t.push(i));return t.join(",")}computeStatementArguments(e){e=e||this.state;const t={select:this.computeSelect(),top:this.DEFAULT_PAGE_SIZE,skip:e.skip,fromDate:Object(yi.d)(new Date(this.fromDate)),toDate:Object(yi.d)(new Date(this.toDate)),accountId:this.accountId};if(this.showCustodianParameter){const e=this.readonlyCustodian_Manual?this.readonlyValueCustodianId_Manual:this.custodianId;e&&(t.custodianId=e)}if(this.showRelationParameter){const e=this.readonlyRelation_Manual?this.readonlyValueRelationId_Manual:this.relationId;e&&(t.relationId=e)}if(this.showResourceParameter){const e=this.readonlyResource_Manual?this.readonlyValueResourceId_Manual:this.resourceId;e&&(t.resourceId=e)}if(this.showNotedRelationParameter){const e=this.readonlyNotedRelation_Manual?this.readonlyValueNotedRelationId_Manual:this.notedRelationId;e&&(t.notedRelationId=e)}if(this.showEntryTypeParameter){const e=this.readonlyEntryType_Manual?this.readonlyValueEntryTypeId_Manual:this.entryTypeId;e&&(t.entryTypeId=e)}if(this.showCenterParameter){const e=this.readonlyCenter_Manual?this.readonlyValueCenterId_Manual:this.centerId;e&&(t.centerId=e)}return this.currencyId&&this.showCurrencyParameter&&(t.currencyId=this.currencyId),this.includeCompleted&&(t.includeCompleted=!0),t}doFetch(){const e=this.state;if(this.requiredParametersAreSet){if(this.loadingRequiredParameters)return e.reportStatus=L.i.loading,e.result=[],Object(A.a)();{e.reportStatus=L.i.loading,e.result=[];const t=this.computeStatementArguments();return this.api.statement(t).pipe(Object(J.a)(t=>{e.reportStatus=L.i.loaded,e.result=t.Result,e.top=t.Top,e.skip=t.Skip,e.total=t.TotalCount,e.extras={opening:t.Opening,openingQuantity:t.OpeningQuantity,openingMonetaryValue:t.OpeningMonetaryValue,closing:t.Closing,closingQuantity:t.ClosingQuantity,closingMonetaryValue:t.ClosingMonetaryValue},Object(V.o)(t.RelatedEntities,this.workspace),this.workspace.notifyStateChanged()}),Object(F.a)(t=>(e.reportStatus=L.i.error,e.errorMessage=t.error,Object(A.a)(null))))}}return e.reportStatus=L.i.information,e.information=()=>this.translate.instant("FillRequiredFields"),Object(A.a)()}get requiredParametersAreSet(){const e=this.state.arguments;switch(this.type){case"account":return!!e.from_date&&!!e.to_date&&!!e.account_id;case"relation":return!!(e.from_date&&e.to_date&&e.relation_id&&e.account_id);default:console.error(`Unknown report type ${this.type}`)}}get loadingRequiredParameters(){switch(this.type){case"account":return!((!this.accountId||this.account())&&(!this.showRelationParameter||this.readonlyRelation_Manual||!this.relationId||this.ws.get("Relation",this.relationId))&&(!this.showResourceParameter||this.readonlyResource_Manual||!this.resourceId||this.ws.get("Resource",this.resourceId))&&(!this.showNotedRelationParameter||this.readonlyNotedRelation_Manual||!this.notedRelationId||this.ws.get("Relation",this.notedRelationId)));case"relation":default:console.error(`Unknown report type ${this.type}`)}}onParameterLoaded(){this.state.reportStatus===L.i.loading&&(this._columnsParametersHaveChanged=!0,this.fetch())}get found(){switch(this.type){case"account":return!0;case"relation":return!!this.relationDefinition;default:return console.error(`Unhandled report type ${this.type}`),!1}}get title(){switch(this.type){case"account":return this.translate.instant("AccountStatement");case"relation":return this.translate.instant("StatementOf0",{0:this.ws.getMultilingualValueImmediate(this.relationDefinition,"TitleSingular")});default:return console.error(`Unhandled report type ${this.type}`),"???"}}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get flip(){return this.workspace.ws.isRtl?"horizontal":null}normalize(e,t){for(;e.length<t;)e.push("");return e}displayErrorModal(e){this.actionErrorMessage=e,this.modalService.open(this.errorModal)}onExport(){const e=this.columns,t=this.computeStatementArguments();t.top=2147483647,this.showExportSpinner=!0,this.api.statement(t).pipe(Object(J.a)(n=>{if(this.showExportSpinner=!1,n.Result.length!==n.TotalCount)return void this.displayErrorModal("Too many rows");Object(V.o)(n.RelatedEntities,this.workspace),this.workspace.notifyStateChanged();const i=[];i.push(this.normalize([this.translate.instant("FromDate"),Object(ve.a)(t.fromDate,this.workspace,this.translate)],e.length)),i.push(this.normalize([this.translate.instant("ToDate"),Object(ve.a)(t.toDate,this.workspace,this.translate)],e.length)),i.push(this.normalize([this.translate.instant("Entry_Account"),this.ws.getMultilingualValue("Account",t.accountId,"Name")],e.length)),t.currencyId&&i.push(this.normalize([this.translate.instant("Entry_Currency"),this.ws.getMultilingualValue("Currency",t.currencyId,"Name")],e.length)),t.custodianId&&i.push(this.normalize([this.labelCustodian_Manual,this.ws.getMultilingualValue("Relation",t.custodianId,"Name")],e.length)),t.relationId&&i.push(this.normalize([this.labelRelation_Manual,this.ws.getMultilingualValue("Relation",t.relationId,"Name")],e.length)),t.resourceId&&i.push(this.normalize([this.labelResource_Manual,this.ws.getMultilingualValue("Resource",t.resourceId,"Name")],e.length)),t.notedRelationId&&i.push(this.normalize([this.labelNotedRelation_Manual,this.ws.getMultilingualValue("Relation",t.notedRelationId,"Name")],e.length)),t.entryTypeId&&i.push(this.normalize([this.translate.instant("Entry_EntryType"),this.ws.getMultilingualValue("EntryType",t.entryTypeId,"Name")],e.length)),t.centerId&&i.push(this.normalize([this.translate.instant("Entry_Center"),this.ws.getMultilingualValue("Center",t.centerId,"Name")],e.length)),t.includeCompleted&&i.push(this.normalize([this.translate.instant("IncludeCompleted"),this.translate.instant("Yes")],e.length)),i.push(this.normalize([],e.length));const c=[];for(const t of e)c.push(t.label());i.push(c);const o=[],r=[];for(const a of e)switch(a.id){case"PostingDate":o.push(Object(ve.a)(t.fromDate,this.workspace,this.translate)),r.push(Object(ve.a)(t.toDate,this.workspace,this.translate));break;case"SerialNumber":o.push(this.translate.instant("OpeningBalance")),r.push(this.translate.instant("ClosingBalance"));break;case"QuantityAccumulation":o.push(Object(Ob.a)(n.OpeningQuantity,"1.0-4")),r.push(Object(Ob.a)(n.ClosingQuantity,"1.0-4"));break;case"MonetaryValueAccumulation":o.push(Object(Ob.a)(n.OpeningMonetaryValue,this.monetaryValueDigitsInfo)),r.push(Object(Ob.a)(n.ClosingMonetaryValue,this.monetaryValueDigitsInfo));break;case"Accumulation":o.push(Object(Ob.a)(n.Opening,this.functionalDigitsInfo)),r.push(Object(Ob.a)(n.Closing,this.functionalDigitsInfo));break;default:o.push(""),r.push("")}i.push(o);for(const t of n.Result){const n=[];for(const i of e)n.push(i.exportDisplay?i.exportDisplay(t):i.display(t));i.push(n)}i.push(r);const s=`${this.translate.instant("AccountStatement")}.csv`,l=Object(V.g)(i);Object(V.i)(l,s)}),Object(F.a)(e=>(this.showExportSpinner=!1,this.displayErrorModal(e.error||e),Object(A.a)()))).subscribe()}get canExport(){return this.isLoaded}onRefresh(){this.state.reportStatus!==L.i.loading&&this.fetch()}get stateKey(){switch(this.type){case"account":return"account-statement";case"relation":return`relation-statement/${this.definitionId}`;default:console.error(`Unhandled report type ${this.type}`)}}get state(){const e=this.stateKey,t=this.workspace.currentTenant;return t.statementState[e]||(t.statementState[e]=new L.k),t.statementState[e]}get from(){return Math.min(this.state.skip+1,this.total)}get to(){const e=this.state;return Math.min(e.skip+this.DEFAULT_PAGE_SIZE,e.total)}get total(){return this.state.total}get totalDisplay(){const e=this.total;return e>=L.d?Object(C.w)(L.d-1,"en-GB")+"+":Object(C.w)(e,"en-GB")}onPreviousPage(){const e=this.state;e.skip=Math.max(e.skip-this.DEFAULT_PAGE_SIZE,0),this.urlStateChanged(),this.fetch()}get canPreviousPage(){return this.state.skip>0}onNextPage(){const e=this.state;e.skip=e.skip+this.DEFAULT_PAGE_SIZE,this.urlStateChanged(),this.fetch()}get canNextPage(){return this.to<this.total}link(e){switch(this.type){case"account":return`../${e}`;case"relation":return`../../${e}`;default:console.error(`Unhandled report type ${this.type}`)}}get includeCompleted(){return this.state.arguments.include_completed}set includeCompleted(e){const t=this.state.arguments;t.include_completed!==e&&(t.include_completed=e,this.parametersChanged())}get fromDate(){return this.state.arguments.from_date}set fromDate(e){const t=this.state.arguments;t.from_date!==e&&(t.from_date=e,this.parametersChanged())}get toDate(){return this.state.arguments.to_date}set toDate(e){const t=this.state.arguments;t.to_date!==e&&(t.to_date=e,this.parametersChanged())}get accountId(){return this.state.arguments.account_id}set accountId(e){const t=this.state.arguments;t.account_id!==e&&(t.account_id=e,this.parametersChanged())}account(e){return this.ws.get("Account",e=e||this.accountId)}accountType(){const e=this.account();return e&&e.AccountTypeId?this.ws.get("AccountType",e.AccountTypeId):null}get currencyId(){return this.state.arguments.currency_id}set currencyId(e){const t=this.state.arguments;t.currency_id!==e&&(t.currency_id=e,this.parametersChanged())}getAccountResourceRelationCurrencyId(){const e=this.account(),t=this.resource(),n=this.relation(),i=this.notedRelation();return(e?e.CurrencyId:null)||(t?t.CurrencyId:null)||(n?n.CurrencyId:null)||(i?i.CurrencyId:null)}get showCurrencyParameter(){return!!this.account()&&!this.getAccountResourceRelationCurrencyId()}get readonlyValueCurrencyId(){return this.getAccountResourceRelationCurrencyId()||this.currencyId}get functionalId(){return this.ws.settings.FunctionalCurrencyId}get custodianId(){return this.state.arguments.custodian_id}set custodianId(e){const t=this.state.arguments;t.custodian_id!==e&&(t.custodian_id=e,this.parametersChanged())}get showCustodianParameter(){const e=this.accountType();return!!e&&!!e.CustodianDefinitionId}get readonlyCustodian_Manual(){const e=this.account();return!!e&&!!e.CustodianId}get readonlyValueCustodianId_Manual(){const e=this.account();return e?e.CustodianId:null}get labelCustodian_Manual(){const e=this.accountType(),t=e?e.CustodianDefinitionId:null;return Object(hh.a)(this.workspace,this.translate,t).titleSingular()}get definitionIdsCustodian_Manual(){return[this.accountType().CustodianDefinitionId]}get relationId(){return this.state.arguments.relation_id}set relationId(e){const t=this.state.arguments;t.relation_id!==e&&(t.relation_id=e,this.parametersChanged())}relation(){const e=this.account();return this.ws.get("Relation",(e?e.RelationId:null)||(e&&e.RelationDefinitionId?this.relationId:null))}get showRelationParameter(){const e=this.account();return!!e&&!!e.RelationDefinitionId}get readonlyRelation_Manual(){const e=this.account();return!!e&&!!e.RelationId}get readonlyValueRelationId_Manual(){const e=this.account();return e?e.RelationId:null}get labelRelation_Manual(){const e=this.account(),t=e?e.RelationDefinitionId:null;return Object(hh.a)(this.workspace,this.translate,t).titleSingular()}get definitionIdsRelation_Manual(){return[this.account().RelationDefinitionId]}get labelRelation_Smart(){return this.ws.getMultilingualValueImmediate(this.relationDefinition,"TitleSingular")}get definitionIdsRelation_Smart(){return[this.definitionId]}get resourceId(){return this.state.arguments.resource_id}set resourceId(e){const t=this.state.arguments;t.resource_id!==e&&(t.resource_id=e,this.parametersChanged())}resource(){const e=this.account();return this.ws.get("Resource",(e?e.ResourceId:null)||(e&&e.ResourceDefinitionId?this.resourceId:null))}resourceDefinition(){const e=this.resource();if(e&&e.DefinitionId)return this.ws.definitions.Resources[e.DefinitionId]}get showResourceParameter(){const e=this.account();return!!e&&!!e.ResourceDefinitionId}get readonlyResource_Manual(){const e=this.account();return!!e&&!!e.ResourceId}get readonlyValueResourceId_Manual(){const e=this.account();return e?e.ResourceId:null}get labelResource_Manual(){const e=this.account(),t=e?e.ResourceDefinitionId:null;return Object(mh.a)(this.workspace,this.translate,t).titleSingular()}get definitionIdsResource_Manual(){return[this.account().ResourceDefinitionId]}get notedRelationId(){return this.state.arguments.noted_relation_id}set notedRelationId(e){const t=this.state.arguments;t.noted_relation_id!==e&&(t.noted_relation_id=e,this.parametersChanged())}notedRelation(){const e=this.account();return this.ws.get("Relation",(e?e.NotedRelationId:null)||(e&&e.NotedRelationDefinitionId?this.notedRelationId:null))}get showNotedRelationParameter(){const e=this.account();return!!e&&!!e.NotedRelationDefinitionId}get readonlyNotedRelation_Manual(){const e=this.account();return!!e&&!!e.RelationId}get readonlyValueNotedRelationId_Manual(){const e=this.account();return e?e.RelationId:null}get labelNotedRelation_Manual(){const e=this.account(),t=e?e.NotedRelationDefinitionId:null;return Object(hh.a)(this.workspace,this.translate,t).titleSingular()}get definitionIdsNotedRelation_Manual(){return[this.account().NotedRelationDefinitionId]}get entryTypeId(){return this.state.arguments.entry_type_id}set entryTypeId(e){const t=this.state.arguments;t.entry_type_id!==e&&(t.entry_type_id=e,this.parametersChanged())}get showEntryTypeParameter(){const e=this.accountType();if(e){const t=this.ws.get("EntryType",e.EntryTypeParentId);return!!t&&t.IsActive}return!1}get readonlyEntryType_Manual(){const e=this.account();return!!e&&!!e.EntryTypeId}get readonlyValueEntryTypeId_Manual(){const e=this.account();return e?e.EntryTypeId:null}get filterEntryType_Manual(){return`IsAssignable eq true and Id descof ${this.accountType().EntryTypeParentId}`}get centerId(){return this.state.arguments.center_id}set centerId(e){const t=this.state.arguments;t.center_id!==e&&(t.center_id=e,this.parametersChanged())}get showCenterParameter(){return!!this.account()}get readonlyCenter_Manual(){return!!this.getAccountResourceRelationCenterId()}get readonlyValueCenterId_Manual(){return this.getAccountResourceRelationCenterId()}getAccountResourceRelationCenterId(){const e=this.account(),t=this.resource(),n=this.relation(),i=this.notedRelation();return(e?e.CenterId:null)||(t?t.CenterId:null)||(n?n.CenterId:null)||(i?i.CenterId:null)}get showErrorMessage(){return this.state.reportStatus===L.i.error}get errorMessage(){return this.state.errorMessage}get showInformation(){return this.state.reportStatus===L.i.information}information(){return this.state.information()}get showSpinner(){return this.state.reportStatus===L.i.loading}get showNoItemsFound(){const e=this.state;return e.reportStatus===L.i.loaded&&(!e.result||0===e.result.length)}get isLoaded(){return this.state.reportStatus===L.i.loaded}get showOpeningBalance(){return this.isLoaded&&!this.state.skip}get showClosingBalance(){return this.isLoaded&&this.to===this.total}get monetaryValueDigitsInfo(){const e=this.getAccountResourceRelationCurrencyId()||this.currencyId||this.functionalId;return this.digitsInfo(e)}get openingDisplay(){const e=this.state.extras;if(e){const t=e.opening||0;return Object(Ob.a)(t,this.functionalDigitsInfo)}return""}get openingQuantityDisplay(){const e=this.state.extras;if(e){const t=e.openingQuantity||0;return Object(Ob.a)(t,"1.0-4")}return""}get openingMonetaryValueDisplay(){const e=this.state.extras;if(e){const t=e.openingMonetaryValue||0;return Object(Ob.a)(t,this.monetaryValueDigitsInfo)}return""}get closingDisplay(){const e=this.state.extras;if(e){const t=e.closing||0;return Object(Ob.a)(t,this.functionalDigitsInfo)}return""}get closingQuantityDisplay(){const e=this.state.extras;if(e){const t=e.closingQuantity||0;return Object(Ob.a)(t,"1.0-4")}return""}get closingMonetaryValueDisplay(){const e=this.state.extras;if(e){const t=e.closingMonetaryValue||0;return Object(Ob.a)(t,this.monetaryValueDigitsInfo)}return""}get entities(){return this.state.result}get functionalDigitsInfo(){const e=this.ws.settings.FunctionalCurrencyDecimals;return`1.${e}-${e}`}digitsInfo(e){const t=this.ws.get("Currency",e);if(t){const e=t.E||0;return`1.${e}-${e}`}return this.functionalDigitsInfo}get columns(){const e=this.account(),t=this.accountType(),n=this.resource(),i=this.ws.settings;if(this._columnsAccount!==e||this._columnsAccountType!==t||this._columnsResource!==n||this._columnsSettings!==i||this._columnsParametersHaveChanged){if(this._columnsAccount=e,this._columnsAccountType=t,this._columnsResource=n,this._columnsSettings=i,this._columnsParametersHaveChanged=!1,this._columns=[{id:"PostingDate",select:["Line.PostingDate"],label:()=>this.translate.instant("Line_PostingDate"),display:e=>{const t=this.ws.get("LineForQuery",e.LineId);return Object(ve.a)(t.PostingDate,this.workspace,this.translate)},weight:1},{id:"SerialNumber",select:["Line.Document.SerialNumber","Line.Document.DefinitionId"],label:()=>this.translate.instant("Document_SerialNumber"),display:e=>{const t=this.ws.get("LineForQuery",e.LineId),n=this.ws.get("Document",t.DocumentId),i=Object(ph.c)(this.workspace,this.translate,n.DefinitionId).properties.SerialNumber;return Object(ph.a)(n.SerialNumber,i.prefix,i.codeWidth)},weight:1}],this._columns.push({id:"Memo",select:["Line.Memo"],label:()=>this.translate.instant("Memo"),display:e=>this.ws.get("LineForQuery",e.LineId).Memo,weight:1}),!this.showCustodianParameter||this.readonlyCustodian_Manual||this.custodianId||this._columns.push({select:["Custodian.Name,Custodian.Name2,Custodian.Name3"],label:()=>this.labelCustodian_Manual,display:e=>this.ws.getMultilingualValue("Relation",e.CustodianId,"Name"),weight:1}),!this.showEntryTypeParameter||this.readonlyEntryType_Manual||this.entryTypeId||this._columns.push({select:["EntryType.Name,EntryType.Name2,EntryType.Name3"],label:()=>this.translate.instant("Entry_EntryType"),display:e=>this.ws.getMultilingualValue("EntryType",e.EntryTypeId,"Name"),weight:1}),!this.showCenterParameter||this.readonlyCenter_Manual||this.centerId||this._columns.push({select:["Center.Name,Center.Name2,Center.Name3"],label:()=>this.translate.instant("Entry_Center"),display:e=>this.ws.getMultilingualValue("Center",e.CenterId,"Name"),weight:1}),t&&(t.Time1Label&&this._columns.push({select:["Time1"],label:()=>this.ws.getMultilingualValueImmediate(t,"Time1Label"),display:e=>Object(ve.a)(e.Time1,this.workspace,this.translate),weight:1}),t.Time1Label&&t.Time2Label&&(this._columns.push({select:["Duration"],label:()=>this.translate.instant("Entry_Duration"),display:e=>Object(Ob.a)(e.Duration,"1.0-4"),isRightAligned:!0,weight:1}),this._columns.push({select:["DurationUnit.Name","DurationUnit.Name2","DurationUnit.Name3"],label:()=>this.translate.instant("Entry_DurationUnit"),display:e=>this.ws.getMultilingualValue("Unit",e.DurationUnitId,"Name"),weight:1})),t.Time2Label&&this._columns.push({select:["Time2"],label:()=>this.ws.getMultilingualValueImmediate(t,"Time2Label"),display:e=>Object(ve.a)(e.Time2,this.workspace,this.translate),weight:1}),t.ExternalReferenceLabel&&this._columns.push({select:["ExternalReference"],label:()=>this.ws.getMultilingualValueImmediate(t,"ExternalReferenceLabel"),display:e=>e.ExternalReference,weight:1}),t.ReferenceSourceLabel&&this._columns.push({select:["ReferenceSource.Name","ReferenceSource.Name2","ReferenceSource.Name3"],label:()=>this.ws.getMultilingualValueImmediate(t,"ReferenceSourceLabel"),display:e=>this.ws.getMultilingualValue("Relation",e.ReferenceSourceId,"Name"),weight:1}),t.InternalReferenceLabel&&this._columns.push({select:["InternalReference"],label:()=>this.ws.getMultilingualValueImmediate(t,"InternalReferenceLabel"),display:e=>e.InternalReference,weight:1}),t.NotedAgentNameLabel&&this._columns.push({select:["NotedAgentName"],label:()=>this.ws.getMultilingualValueImmediate(t,"NotedAgentNameLabel"),display:e=>e.NotedAgentName,weight:1}),t.NotedDateLabel&&this._columns.push({select:["NotedDate"],label:()=>this.ws.getMultilingualValueImmediate(t,"NotedDateLabel"),display:e=>Object(ve.a)(e.NotedDate,this.workspace,this.translate),weight:1}),t.NotedAmountLabel&&this._columns.push({select:["NotedAmount"],label:()=>this.ws.getMultilingualValueImmediate(t,"NotedAmountLabel"),display:e=>e.NotedAmount?Object(Ob.a)(e.NotedAmount,this.functionalDigitsInfo):"",weight:1})),!this.showRelationParameter||this.readonlyRelation_Manual||this.relationId||this._columns.push({select:["Relation.Name,Relation.Name2,Relation.Name3"],label:()=>this.labelRelation_Manual,display:e=>this.ws.getMultilingualValue("Relation",e.RelationId,"Name"),weight:1}),!this.showResourceParameter||this.readonlyResource_Manual||this.resourceId||this._columns.push({select:["Resource.Name,Resource.Name2,Resource.Name3"],label:()=>this.labelResource_Manual,display:e=>this.ws.getMultilingualValue("Resource",e.ResourceId,"Name"),weight:1}),!this.showNotedRelationParameter||this.readonlyNotedRelation_Manual||this.notedRelationId||this._columns.push({select:["NotedRelation.Name,NotedRelation.Name2,NotedRelation.Name3"],label:()=>this.labelNotedRelation_Manual,display:e=>this.ws.getMultilingualValue("Relation",e.NotedRelationId,"Name"),weight:1}),this.showResourceParameter){const e=this.resourceDefinition(),i=!(!e||"Single"!==e.UnitCardinality||!n||!n.UnitId||!t||t.StandardAndPure),c=i?n.UnitId:null,o=!(!e||!e.UnitCardinality||!n||!n.UnitId||!t||t.StandardAndPure),r=o?n.UnitId:null;this._columns.push({select:["Direction","Quantity"],label:()=>{let e=this.translate.instant("Entry_Quantity");return i&&(e=`${e} (${this.ws.getMultilingualValue("Unit",c,"Name")})`),e},display:e=>Object(Ob.a)(e.Direction*e.Quantity,"1.0-4"),isRightAligned:!0,weight:1}),i||this._columns.push({select:["Unit.Name","Unit.Name2","Unit.Name3"],label:()=>this.translate.instant("Entry_Unit"),display:e=>this.ws.getMultilingualValue("Unit",e.UnitId,"Name"),weight:1}),o&&this._columns.push({id:"QuantityAccumulation",select:["Direction","BaseQuantity"],label:()=>`${this.translate.instant("DetailsEntry_QuantityAccumulation")} (${this.ws.getMultilingualValue("Unit",r,"Name")})`,display:e=>Object(Ob.a)(e.QuantityAccumulation,"1.0-4"),isRightAligned:!0,weight:1})}const c=this.getAccountResourceRelationCurrencyId()||this.currencyId;this.account()&&c!==this.functionalId&&(this._columns.push({select:["MonetaryValue","Direction"],label:()=>{let e=this.translate.instant("Entry_MonetaryValue");return c&&(e=`${e} (${this.ws.getMultilingualValue("Currency",c,"Name")})`),e},display:e=>{const t=c||e.CurrencyId;return Object(Ob.a)(e.Direction*e.MonetaryValue,this.digitsInfo(t))},isRightAligned:!0,weight:1}),this._columns.push(c?{id:"MonetaryValueAccumulation",select:["MonetaryValue","Direction"],label:()=>`${this.translate.instant("DetailsEntry_MonetaryValueAccumulation")} (${this.ws.getMultilingualValue("Currency",c,"Name")})`,display:e=>Object(Ob.a)(e.MonetaryValueAccumulation,this.digitsInfo(c)),isRightAligned:!0,weight:1}:{select:["Currency.Name","Currency.Name2","Currency.Name3","Currency.E"],label:()=>this.translate.instant("Entry_Currency"),display:e=>this.ws.getMultilingualValue("Currency",e.CurrencyId,"Name"),weight:1})),this._columns.push({select:["Value","Direction"],label:()=>`${this.translate.instant("Debit")} (${this.ws.getMultilingualValueImmediate(i,"FunctionalCurrencyName")})`,display:e=>e.Direction>0?Object(Ob.a)(e.Value,this.functionalDigitsInfo):"",isRightAligned:!0,weight:1}),this._columns.push({select:["Value","Direction"],label:()=>`${this.translate.instant("Credit")} (${this.ws.getMultilingualValueImmediate(i,"FunctionalCurrencyName")})`,display:e=>e.Direction<0?Object(Ob.a)(e.Value,this.functionalDigitsInfo):"",isRightAligned:!0,weight:1}),this._columns.push({id:"Accumulation",select:["Value","Direction"],label:()=>`${this.translate.instant("DetailsEntry_Accumulation")} (${this.ws.getMultilingualValueImmediate(i,"FunctionalCurrencyName")})`,display:e=>Object(Ob.a)(e.Accumulation,this.functionalDigitsInfo),isRightAligned:!0,weight:1})}return this._columns}fromWeight(e){const t=this.columns.map(e=>e.weight).reduce((e,t)=>e+t);return 0===t?"100%":e/t*100+"%"}onSelectRow(e){const t=this.ws.get("LineForQuery",e.LineId),n=this.ws.get("Document",t.DocumentId);this.router.navigate(["../documents",n.DefinitionId,n.Id,{state_key:"from_statement",tab:-10}],{relativeTo:this.route})}get collapseParameters(){return this._collapseParameters}set collapseParameters(e){this._collapseParameters!==e&&(this._collapseParameters=e,this.urlStateChanged())}onToggleCollapseParameters(){this.collapseParameters=!this.collapseParameters}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(i.a),c.Mb(i.e),c.Mb(X.a),c.Mb(K.d),c.Mb(L.m),c.Mb(W.a),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-statement"]],viewQuery:function(e,t){if(1&e&&c.Qc(P7,3),2&e){let e;c.zc(e=c.dc())&&(t.errorModal=e.first)}},inputs:{type:"type"},features:[c.xb],decls:5,vars:2,consts:[["class","h-100 d-flex flex-column",4,"ngIf","ngIfElse"],["pageNotFound",""],["errorModal",""],[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"mx-auto","mb-3","w-100",2,"max-width","900px"],[1,"row","m-0","px-0","px-lg-1","py-1",3,"ngSwitch"],[1,"t-form-group",3,"label"],[3,"ngModel","ngModelOptions","ngModelChange"],[4,"ngSwitchCase"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","includecompleted",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","includecompleted",1,"custom-control-label","t-pointer"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"d-flex"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","align-self-center mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","sync-alt"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"row","t-rest-of-screen"],["class","w-100 p-3 px-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"ngModel","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded"],["class","t-form-group",3,"label",4,"ngIf"],[3,"ngModel","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange"],[3,"ngModel","definitionIds","showCreate","ngModelChange",4,"ngIf"],[3,"link","itemId",4,"ngIf"],[3,"ngModel","definitionIds","showCreate","ngModelChange"],[3,"link","itemId"],[3,"ngModel","definitionIds","showCreate","additionalSelect","ensureAdditionalSelect","ngModelChange",4,"ngIf"],[3,"ngModel","definitionIds","showCreate","additionalSelect","ensureAdditionalSelect","ngModelChange"],[3,"ngModel","definitionIds","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded",4,"ngIf"],[3,"ngModel","definitionIds","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded"],[3,"ngModel","filter","showCreate","ngModelChange",4,"ngIf"],[3,"ngModel","filter","showCreate","ngModelChange"],[3,"ngModel","showCreate","ngModelChange",4,"ngIf"],[3,"ngModel","showCreate","ngModelChange"],[1,"align-self-center","mx-1"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-hover","table-striped","table-sm","border-bottom","bg-white","t-master-table","text-nowrap"],[2,"width","10px"],[3,"width","text-right",4,"ngFor","ngForOf"],["class","t-no-highlight",4,"ngIf"],["class","t-pointer",3,"click",4,"ngIf"],["class","t-pointer",3,"click",4,"cdkVirtualFor","cdkVirtualForOf"],["class","w-100 p-2 d-flex justify-content-center mt-3",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],[1,"t-no-highlight"],[3,"text-right",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"t-pointer",3,"click"],[1,"text-center","font-italic","text-muted",3,"colSpan"],[1,"border-bottom","t-dark-border"],[1,"w-100","p-2","d-flex","justify-content-center","mt-3"],[3,"scale"],[1,"w-100","mt-3"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(c.Jc(0,L8,60,56,"div",0),c.Jc(1,k8,1,0,"ng-template",null,1,c.Kc),c.Jc(3,O8,15,7,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(2);c.nc("ngIf",t.found)("ngIfElse",e)}},directives:[C.l,C.m,he.a,Vu,te.i,te.j,C.n,te.a,ee.a,eC,zu,xb,ss,rv,WR,Au,fe.a,cc.d,cc.a,C.k,cc.c,Se.a,nn],pipes:[K.c,C.d,kb],encapsulation:2}),e})(),N8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-account-statement"]],decls:1,vars:0,consts:[["type","account"]],template:function(e,t){1&e&&c.Nb(0,"t-statement",0)},directives:[A8],encapsulation:2}),e})(),_8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["t-relation-statement"]],decls:1,vars:0,consts:[["type","relation"]],template:function(e,t){1&e&&c.Nb(0,"t-statement",0)},directives:[A8],encapsulation:2}),e})();var J8=n("haWp");const P8=["errorModal"],F8=["successModal"],V8=["unsavedChangesModal"];function q8(e,t){1&e&&(c.Sb(0,"span",27),c.Lc(1,"\xa0*"),c.Rb())}function j8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-relations-picker",30),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).relationId=t})("entityLoaded",function(){return c.Dc(e),c.gc(2).onParameterLoaded()}),c.Rb()}if(2&e){const e=c.gc(2);c.nc("ngModel",e.relationId)("definitionIds",e.definitionIdsRelation_Manual)("ensureAdditionalSelect",!0)("showCreate",!1)("disabled",e.isDirty)}}function $8(e,t){if(1&e&&(c.Sb(0,"t-view-link",31),c.Lc(1),c.Rb()),2&e){const e=c.gc(2);let t=null;c.nc("link","../relations/"+(null==(t=e.ws.get("Relation",e.readonlyValueRelationId_Manual))?null:t.DefinitionId))("itemId",e.readonlyValueRelationId_Manual),c.zb(1),c.Nc(" ",e.ws.getMultilingualValue("Relation",e.readonlyValueRelationId_Manual,"Name")," ")}}function U8(e,t){if(1&e&&(c.Sb(0,"t-form-group",9),c.Jc(1,j8,1,5,"t-relations-picker",28),c.Jc(2,$8,2,3,"t-view-link",29),c.Rb()),2&e){const e=c.gc();c.nc("label",e.labelRelation_Manual),c.zb(1),c.nc("ngIf",!e.readonlyRelation_Manual),c.zb(1),c.nc("ngIf",e.readonlyRelation_Manual)}}const K8=function(){return{updateOn:"blur"}};function B8(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"t-form-group",9),c.hc(2,"translate"),c.Sb(3,"t-date-picker",32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().toDate=t}),c.Rb(),c.Rb(),c.Pb()}if(2&e){const e=c.gc();c.zb(1),c.nc("label",c.ic(2,4,"AsOfDate")),c.zb(2),c.nc("ngModel",e.toDate)("ngModelOptions",c.qc(6,K8))("disabled",e.isDirty)}}function H8(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"t-form-group",9),c.hc(2,"translate"),c.Sb(3,"t-text-editor",32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().externalReferenceContains=t}),c.Rb(),c.Rb(),c.Sb(4,"t-form-group",9),c.hc(5,"translate"),c.Sb(6,"t-date-picker",32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().fromDate=t}),c.Rb(),c.Rb(),c.Sb(7,"t-form-group",9),c.hc(8,"translate"),c.Sb(9,"t-date-picker",32),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().toDate=t}),c.Rb(),c.Rb(),c.Sb(10,"t-form-group",9),c.hc(11,"translate"),c.Sb(12,"t-decimal-editor",33),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().fromAmount=t}),c.Rb(),c.Rb(),c.Sb(13,"t-form-group",9),c.hc(14,"translate"),c.Sb(15,"t-decimal-editor",33),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().toAmount=t}),c.Rb(),c.Rb(),c.Pb()}if(2&e){const e=c.gc();c.zb(1),c.nc("label",c.ic(2,24,"ExternalReferenceContains")),c.zb(2),c.nc("ngModel",e.externalReferenceContains)("ngModelOptions",c.qc(34,K8))("disabled",e.isDirty),c.zb(1),c.nc("label",c.ic(5,26,"FromDate")),c.zb(2),c.nc("ngModel",e.fromDate)("ngModelOptions",c.qc(35,K8))("disabled",e.isDirty),c.zb(1),c.nc("label",c.ic(8,28,"ToDate")),c.zb(2),c.nc("ngModel",e.toDate)("ngModelOptions",c.qc(36,K8))("disabled",e.isDirty),c.zb(1),c.nc("label",c.ic(11,30,"FromAmount")),c.zb(2),c.nc("ngModel",e.fromAmount)("ngModelOptions",c.qc(37,K8))("disabled",e.isDirty)("minDecimalPlaces",e.amountsDecimals)("maxDecimalPlaces",e.amountsDecimals),c.zb(1),c.nc("label",c.ic(14,32,"ToAmount")),c.zb(2),c.nc("ngModel",e.toAmount)("ngModelOptions",c.qc(38,K8))("disabled",e.isDirty)("minDecimalPlaces",e.amountsDecimals)("maxDecimalPlaces",e.amountsDecimals)}}const Q8=function(e,t){return{0:e,1:t}};function W8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div"),c.Sb(1,"span",34),c.Lc(2),c.hc(3,"translate"),c.hc(4,"accounting"),c.hc(5,"accounting"),c.Rb(),c.Sb(6,"div",35),c.Sb(7,"button",36),c.cc("click",function(){return c.Dc(e),c.gc().onReconcileChecked()}),c.Nb(8,"fa-icon",37),c.Sb(9,"span",18),c.Lc(10),c.hc(11,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"button",38),c.cc("click",function(){return c.Dc(e),c.gc().onCancelReconcileChecked()}),c.Nb(13,"fa-icon",39),c.Sb(14,"span",18),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.jc(3,6,"InternalEntries0ExternalEntries1",c.sc(19,Q8,c.jc(4,9,e.checkedEntriesTotal,e.amountsFormat),c.jc(5,12,e.checkedExEntriesTotal,e.amountsFormat)))," "),c.zb(4),c.nc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableReconcileChecked),c.zb(1),c.nc("disabled",!!e.disableReconcileChecked),c.zb(3),c.Nc("\xa0\xa0",c.ic(11,15,"Reconcile")+" (Alt+R)",""),c.zb(5),c.Nc("\xa0\xa0",c.ic(16,17,"Cancel"),"")}}function G8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div"),c.Sb(1,"button",40),c.cc("click",function(){return c.Dc(e),c.gc().onSave()}),c.Nb(2,"fa-icon",41),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",42),c.cc("click",function(){return c.Dc(e),c.gc().onCancel()}),c.Nb(6,"fa-icon",39),c.Lc(7),c.hc(8,"translate"),c.Rb(),c.Rb()}2&e&&(c.zb(3),c.Nc("\xa0\xa0",c.ic(4,2,"Save")," "),c.zb(4),c.Nc("\xa0\xa0",c.ic(8,4,"Cancel")," "))}function Y8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",35),c.Sb(1,"button",36),c.cc("click",function(){c.Dc(e);const t=c.gc(2),n=c.Ac(43);return t.modalService.open(n)}),c.Nb(2,"fa-icon",48),c.Sb(3,"span",18),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.nc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableReport),c.zb(1),c.nc("disabled",!!e.disableReport),c.zb(3),c.Nc("\xa0\xa0",c.ic(5,4,"Report"),"")}}function X8(e,t){1&e&&(c.Sb(0,"button",49),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"Actions")," "))}function Z8(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",50),c.Sb(1,"button",51),c.cc("click",function(){c.Dc(e);const t=c.gc(2),n=c.Ac(45);return t.modalService.open(n)}),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.nc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableAutoReconcile),c.zb(1),c.nc("disabled",!!e.disableAutoReconcile),c.zb(1),c.Nc(" ",c.ic(3,4,"AutoReconcile")," ")}}function e9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",50),c.Sb(1,"button",51),c.cc("click",function(){return c.Dc(e),c.gc(2).onExport()}),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.nc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableExport),c.zb(1),c.nc("disabled",!!e.disableExport),c.zb(1),c.Nc(" ",c.ic(3,4,"Export")," ")}}function t9(e,t){if(1&e&&(c.Sb(0,"div"),c.Jc(1,Y8,6,6,"div",43),c.Sb(2,"div",44),c.Jc(3,X8,3,3,"button",45),c.Sb(4,"div",46),c.Jc(5,Z8,4,6,"div",47),c.Jc(6,e9,4,6,"div",47),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(1),c.nc("ngIf",e.showReport),c.zb(1),c.nc("placement",e.actionsDropdownPlacement),c.zb(1),c.nc("ngIf",e.isUnreconciled),c.zb(2),c.nc("ngIf",e.showAutoReconcile),c.zb(1),c.nc("ngIf",e.showExport)}}function n9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",52),c.Sb(1,"span",55),c.Lc(2),c.hc(3,"number"),c.hc(4,"number"),c.hc(5,"number"),c.Rb(),c.Sb(6,"button",56),c.cc("click",function(){return c.Dc(e),c.gc(2).onPreviousPage()}),c.hc(7,"translate"),c.Nb(8,"fa-icon",57),c.Rb(),c.Sb(9,"button",56),c.cc("click",function(){return c.Dc(e),c.gc(2).onNextPage()}),c.hc(10,"translate"),c.Nb(11,"fa-icon",58),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Pc(" ",c.ic(3,9,e.from)," - ",c.ic(4,11,e.to)," / ",c.ic(5,13,e.total),""),c.zb(4),c.oc("title",c.ic(7,15,"Previous")),c.nc("disabled",!e.canPreviousPage),c.zb(2),c.nc("flip",e.flip),c.zb(1),c.oc("title",c.ic(10,17,"Next")),c.nc("disabled",!e.canNextPage),c.zb(2),c.nc("flip",e.flip)}}function i9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",52),c.Sb(1,"button",53),c.cc("click",function(){return c.Dc(e),c.gc().onRefresh()}),c.hc(2,"translate"),c.Nb(3,"fa-icon",54),c.Rb(),c.Jc(4,n9,12,19,"div",15),c.Rb()}if(2&e){const e=c.gc();c.zb(1),c.oc("title",c.ic(2,3,"Refresh")),c.nc("disabled",!!e.disableRefresh),c.zb(3),c.nc("ngIf",e.isReconciled)}}function c9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",52),c.Sb(1,"span",82),c.Lc(2),c.hc(3,"number"),c.hc(4,"number"),c.hc(5,"number"),c.Rb(),c.Sb(6,"button",56),c.cc("click",function(){return c.Dc(e),c.gc(2).entries_onPreviousPage()}),c.hc(7,"translate"),c.Nb(8,"fa-icon",57),c.Rb(),c.Sb(9,"button",56),c.cc("click",function(){return c.Dc(e),c.gc(2).entries_onNextPage()}),c.hc(10,"translate"),c.Nb(11,"fa-icon",58),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Pc(" ",c.ic(3,9,e.entries_from)," - ",c.ic(4,11,e.entries_to)," / ",c.ic(5,13,e.entries_total),""),c.zb(4),c.oc("title",c.ic(7,15,"Previous")),c.nc("disabled",!e.entries_canPreviousPage),c.zb(2),c.nc("flip",e.flip),c.zb(1),c.oc("title",c.ic(10,17,"Next")),c.nc("disabled",!e.entries_canNextPage),c.zb(2),c.nc("flip",e.flip)}}function o9(e,t){1&e&&(c.Qb(0),c.Nb(1,"th"),c.Nb(2,"th"),c.Nb(3,"th"),c.Nb(4,"th"),c.Nb(5,"th"),c.Pb())}function r9(e,t){1&e&&c.Nb(0,"th")}function s9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",83),c.cc("click",function(){return c.Dc(e),c.gc(2).onDownloadTemplate()}),c.hc(1,"translate"),c.Nb(2,"fa-icon",84),c.Rb()}2&e&&c.nc("title",c.ic(1,1,"DownloadTemplate"))}function l9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",35),c.Sb(1,"button",85),c.cc("click",function(){return c.Dc(e),c.gc(),c.Ac(23).click()}),c.hc(2,"translate"),c.Nb(3,"fa-icon",86),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.nc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableImport),c.zb(1),c.nc("disabled",!!e.disableImport)("title",c.ic(2,4,"Import"))}}function a9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",52),c.Sb(1,"span",82),c.Lc(2),c.hc(3,"number"),c.hc(4,"number"),c.hc(5,"number"),c.Rb(),c.Sb(6,"button",56),c.cc("click",function(){return c.Dc(e),c.gc(2).ex_entries_onPreviousPage()}),c.hc(7,"translate"),c.Nb(8,"fa-icon",57),c.Rb(),c.Sb(9,"button",56),c.cc("click",function(){return c.Dc(e),c.gc(2).ex_entries_onNextPage()}),c.hc(10,"translate"),c.Nb(11,"fa-icon",58),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.zb(2),c.Pc(" ",c.ic(3,9,e.ex_entries_from)," - ",c.ic(4,11,e.ex_entries_to)," / ",c.ic(5,13,e.ex_entries_total),""),c.zb(4),c.oc("title",c.ic(7,15,"Previous")),c.nc("disabled",!e.ex_entries_canPreviousPage),c.zb(2),c.nc("flip",e.flip),c.zb(1),c.oc("title",c.ic(10,17,"Next")),c.nc("disabled",!e.ex_entries_canNextPage),c.zb(2),c.nc("flip",e.flip)}}function u9(e,t){1&e&&(c.Qb(0),c.Nb(1,"th",87),c.Nb(2,"th",88),c.Nb(3,"th",89),c.Nb(4,"th",89),c.Nb(5,"th",88),c.Pb())}function d9(e,t){1&e&&c.Nb(0,"th",74)}function b9(e,t){if(1&e&&(c.Sb(0,"t-view-link",31),c.Lc(1),c.Rb()),2&e){const e=c.gc().$implicit,t=c.gc(2);c.nc("link","../documents/"+e.entry.DocumentDefinitionId)("itemId",e.entry.DocumentId),c.zb(1),c.Nc(" ",t.formatSerialNumber(e.entry.DocumentSerialNumber,e.entry.DocumentDefinitionId)," ")}}function g9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",105),c.cc("click",function(){c.Dc(e);const t=c.gc(3).$implicit;return c.gc(2).onCloneAndReconcile(t)}),c.hc(1,"translate"),c.Nb(2,"fa-icon",106),c.Rb()}2&e&&c.nc("title",c.ic(1,1,"Clone"))}function f9(e,t){if(1&e&&(c.Qb(0),c.Jc(1,g9,3,3,"button",104),c.Pb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.nc("ngIf",!e.entryReconciliation&&!e.entryIsChecked)}}function m9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",109),c.Sb(1,"input",110),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).$implicit.entryIsChecked=t}),c.Rb(),c.Sb(2,"label",111),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3),t=e.index,n=e.$implicit;c.zb(1),c.pc("id","entryCheck",t,""),c.nc("ngModel",n.entryIsChecked),c.zb(1),c.pc("for","entryCheck",t,"")}}function h9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",112),c.cc("click",function(){c.Dc(e);const t=c.gc(3).$implicit;return c.gc(2).onUndoReconcileCheckedEntry(t)})("mouseenter",function(){c.Dc(e);const t=c.gc(3).$implicit;return c.gc(2).onReconciledEntryMouseEnter(t)})("mouseleave",function(){c.Dc(e);const t=c.gc(3).$implicit;return c.gc(2).onReconciledEntryMouseLeave(t)}),c.hc(1,"translate"),c.Sb(2,"span",113),c.Nb(3,"fa-icon",114),c.Rb(),c.Rb()}2&e&&c.nc("title",c.ic(1,1,"Unreconcile"))}function p9(e,t){if(1&e&&(c.Qb(0),c.Jc(1,m9,4,3,"div",107),c.Jc(2,h9,4,3,"ng-template",null,108,c.Kc),c.Pb()),2&e){const e=c.Ac(3),t=c.gc(2).$implicit;c.zb(1),c.nc("ngIf",!t.entryReconciliation)("ngIfElse",e)}}function S9(e,t){if(1&e&&(c.Sb(0,"div",115),c.Nb(1,"fa-icon",116),c.Rb()),2&e){c.gc();const e=c.Ac(18),t=c.gc(3);c.nc("ngbPopover",e)("placement",t.errorPopoverPlacement)}}function v9(e,t){if(1&e&&(c.Sb(0,"div",117),c.Nb(1,"fa-icon",118),c.Rb()),2&e){c.gc();const e=c.Ac(9),t=c.gc(3);c.nc("ngbPopover",e)("placement",t.errorPopoverPlacement)}}function I9(e,t){if(1&e&&(c.Sb(0,"p",121),c.Nb(1,"fa-icon",122),c.Lc(2),c.Rb()),2&e){const e=t.$implicit;c.zb(2),c.Nc(" \xa0 ",e," ")}}function M9(e,t){if(1&e&&(c.Sb(0,"div",119),c.Jc(1,I9,3,1,"p",120),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.nc("ngForOf",null==e.entryReconciliation||null==e.entryReconciliation.serverErrors?null:e.entryReconciliation.serverErrors.Entries)}}function R9(e,t){if(1&e&&(c.Sb(0,"div",117),c.Nb(1,"fa-icon",118),c.Rb()),2&e){c.gc();const e=c.Ac(13),t=c.gc(3);c.nc("ngbPopover",e)("placement",t.errorPopoverPlacement)}}function y9(e,t){if(1&e&&(c.Sb(0,"p",121),c.Nb(1,"fa-icon",122),c.Lc(2),c.Rb()),2&e){const e=t.$implicit;c.zb(2),c.Nc(" \xa0 ",e," ")}}function D9(e,t){if(1&e&&(c.Sb(0,"div",119),c.Jc(1,y9,3,1,"p",120),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.nc("ngForOf",null==e.exEntryReconciliation||null==e.exEntryReconciliation.serverErrors?null:e.exEntryReconciliation.serverErrors.ExternalEntries)}}function w9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",109),c.Sb(1,"input",110),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(3).$implicit.exEntryIsChecked=t}),c.Rb(),c.Sb(2,"label",111),c.Lc(3,"\u200c"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3),t=e.index,n=e.$implicit;c.zb(1),c.pc("id","exEntryCheck",t,""),c.nc("ngModel",n.exEntryIsChecked),c.zb(1),c.pc("for","exEntryCheck",t,"")}}function E9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",112),c.cc("click",function(){c.Dc(e);const t=c.gc(3).$implicit;return c.gc(2).onUndoReconciledCheckedExEntry(t)})("mouseenter",function(){c.Dc(e);const t=c.gc(3).$implicit;return c.gc(2).onReconciledExEntryMouseEnter(t)})("mouseleave",function(){c.Dc(e);const t=c.gc(3).$implicit;return c.gc(2).onReconciledExEntryMouseLeave(t)}),c.hc(1,"translate"),c.Sb(2,"span",113),c.Nb(3,"fa-icon",114),c.Rb(),c.Rb()}2&e&&c.nc("title",c.ic(1,1,"Unreconcile"))}function C9(e,t){if(1&e&&(c.Qb(0),c.Jc(1,w9,4,3,"div",107),c.Jc(2,E9,4,3,"ng-template",null,123,c.Kc),c.Pb()),2&e){const e=c.Ac(3),t=c.gc(2).$implicit;c.zb(1),c.nc("ngIf",!t.exEntryReconciliation)("ngIfElse",e)}}function x9(e,t){if(1&e&&(c.Sb(0,"div",115),c.Nb(1,"fa-icon",116),c.Rb()),2&e){c.gc();const e=c.Ac(18),t=c.gc(3);c.nc("ngbPopover",e)("placement",t.errorPopoverPlacement)}}const T9=function(e){return{0:e}};function z9(e,t){if(1&e&&(c.Sb(0,"div",119),c.Sb(1,"p",121),c.Nb(2,"fa-icon",124),c.Lc(3),c.hc(4,"translate"),c.hc(5,"dateFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc(4);c.zb(3),c.Nc(" \xa0 ",c.jc(4,1,"EntryReconciledAfter0",c.rc(6,T9,c.ic(5,4,e.toDate)))," ")}}function L9(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"td",95),c.Jc(2,f9,2,1,"ng-container",13),c.Rb(),c.Sb(3,"td",95),c.Jc(4,p9,4,2,"ng-container",13),c.Jc(5,S9,2,2,"div",96),c.Rb(),c.Sb(6,"td",97),c.Jc(7,v9,2,2,"div",98),c.Jc(8,M9,2,1,"ng-template",null,99,c.Kc),c.Rb(),c.Sb(10,"td",100),c.Jc(11,R9,2,2,"div",98),c.Jc(12,D9,2,1,"ng-template",null,101,c.Kc),c.Rb(),c.Sb(14,"td",102),c.Jc(15,C9,4,2,"ng-container",13),c.Jc(16,x9,2,2,"div",96),c.Rb(),c.Jc(17,z9,6,8,"ng-template",null,103,c.Kc),c.Pb()),2&e){const e=c.gc().$implicit;c.zb(2),c.nc("ngIf",e.entry&&!e.entry.IsReconciledLater),c.zb(2),c.nc("ngIf",e.entry&&!e.entry.IsReconciledLater),c.zb(1),c.nc("ngIf",e.entry&&e.entry.IsReconciledLater),c.zb(2),c.nc("ngIf",null==e.entryReconciliation||null==e.entryReconciliation.serverErrors?null:e.entryReconciliation.serverErrors.Entries),c.zb(4),c.nc("ngIf",null==e.exEntryReconciliation||null==e.exEntryReconciliation.serverErrors?null:e.exEntryReconciliation.serverErrors.ExternalEntries),c.zb(4),c.nc("ngIf",e.exEntry&&!e.exEntry.IsReconciledLater),c.zb(1),c.nc("ngIf",e.exEntry&&e.exEntry.IsReconciledLater)}}function k9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",105),c.cc("click",function(){c.Dc(e);const t=c.gc(2).$implicit;return c.gc(2).onDeleteReconciliation(t)}),c.hc(1,"translate"),c.Nb(2,"fa-icon",114),c.Rb()}2&e&&c.nc("title",c.ic(1,1,"Unreconcile"))}function O9(e,t){if(1&e&&(c.Sb(0,"td",125),c.Jc(1,k9,3,3,"button",104),c.Rb()),2&e){const e=c.gc().$implicit;c.Eb("border-top-0",!e.firstOne),c.zb(1),c.nc("ngIf",e.firstOne)}}function A9(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"td",94),c.Sb(2,"t-form-group-dynamic",126),c.Sb(3,"t-date-picker",127),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(),i=n.$implicit,o=n.index;return c.gc(2).onChangePostingDate(i,o,t)}),c.Rb(),c.Rb(),c.Rb(),c.Sb(4,"td",94),c.Sb(5,"t-form-group-dynamic",126),c.Sb(6,"t-text-editor",127),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(),i=n.$implicit,o=n.index;return c.gc(2).onChangeExternalReference(i,o,t)}),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"td",128),c.Sb(8,"t-form-group-dynamic",126),c.Sb(9,"t-decimal-editor",129),c.cc("ngModelChange",function(t){c.Dc(e);const n=c.gc(),i=n.$implicit,o=n.index;return c.gc(2).onChangeMonetaryValue(i,o,t)}),c.Rb(),c.Rb(),c.Rb(),c.Pb()}if(2&e){const e=c.gc().$implicit,t=c.gc(2);c.zb(2),c.nc("serverErrors",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.PostingDate),c.zb(1),c.nc("disabled",e.exEntryReconciliation)("ngModel",e.exEntry.PostingDate)("ngModelOptions",c.qc(14,K8)),c.zb(2),c.nc("serverErrors",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.ExternalReference),c.zb(1),c.nc("disabled",e.exEntryReconciliation)("ngModel",e.exEntry.ExternalReference)("ngModelOptions",c.qc(15,K8)),c.zb(2),c.nc("serverErrors",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.MonetaryValue),c.zb(1),c.nc("disabled",e.exEntryReconciliation)("ngModel",t.getMonetaryValue(e.exEntry))("ngModelOptions",c.qc(16,K8))("minDecimalPlaces",t.amountsDecimals)("maxDecimalPlaces",t.amountsDecimals)}}function N9(e,t){1&e&&c.Nb(0,"fa-icon",136)}function _9(e,t){if(1&e&&(c.Sb(0,"p",121),c.Nb(1,"fa-icon",122),c.Lc(2),c.Rb()),2&e){const e=t.$implicit;c.zb(2),c.Nc(" \xa0",e," ")}}function J9(e,t){if(1&e&&(c.Sb(0,"div",137),c.Jc(1,_9,3,1,"p",120),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.nc("ngForOf",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.PostingDate)}}function P9(e,t){1&e&&c.Nb(0,"fa-icon",136)}function F9(e,t){if(1&e&&(c.Sb(0,"p",121),c.Nb(1,"fa-icon",122),c.Lc(2),c.Rb()),2&e){const e=t.$implicit;c.zb(2),c.Nc(" \xa0",e," ")}}function V9(e,t){if(1&e&&(c.Sb(0,"div",137),c.Jc(1,F9,3,1,"p",120),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.nc("ngForOf",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.ExternalReference)}}function q9(e,t){1&e&&c.Nb(0,"fa-icon",136)}function j9(e,t){if(1&e&&(c.Sb(0,"p",121),c.Nb(1,"fa-icon",122),c.Lc(2),c.Rb()),2&e){const e=t.$implicit;c.zb(2),c.Nc(" \xa0",e," ")}}function $9(e,t){if(1&e&&(c.Sb(0,"div",137),c.Jc(1,j9,3,1,"p",120),c.Rb()),2&e){const e=c.gc(2).$implicit;c.zb(1),c.nc("ngForOf",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.MonetaryValue)}}function U9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"td",130),c.cc("dblclick",function(){c.Dc(e);const t=c.gc().$implicit;return c.gc(2).onRowDoubleClick(t)}),c.Jc(1,N9,1,0,"fa-icon",131),c.Lc(2),c.hc(3,"dateFormat"),c.Jc(4,J9,2,1,"ng-template",null,132,c.Kc),c.Rb(),c.Sb(6,"td",130),c.cc("dblclick",function(){c.Dc(e);const t=c.gc().$implicit;return c.gc(2).onRowDoubleClick(t)}),c.Jc(7,P9,1,0,"fa-icon",131),c.Lc(8),c.Jc(9,V9,2,1,"ng-template",null,133,c.Kc),c.Rb(),c.Sb(11,"td",134),c.cc("dblclick",function(){c.Dc(e);const t=c.gc().$implicit;return c.gc(2).onRowDoubleClick(t)}),c.Jc(12,q9,1,0,"fa-icon",131),c.Lc(13),c.hc(14,"accounting"),c.Jc(15,$9,2,1,"ng-template",null,135,c.Kc),c.Rb()}if(2&e){const e=c.Ac(5),t=c.Ac(10),n=c.gc().$implicit,i=c.gc(2);c.nc("ngbPopover",null!=n.exEntry&&null!=n.exEntry.serverErrors&&n.exEntry.serverErrors.PostingDate?e:null)("placement",i.errorPopoverPlacement),c.zb(1),c.nc("ngIf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.PostingDate),c.zb(1),c.Nc(" ",c.ic(3,12,null==n.exEntry?null:n.exEntry.PostingDate)," "),c.zb(4),c.nc("ngbPopover",null!=n.exEntry&&null!=n.exEntry.serverErrors&&n.exEntry.serverErrors.ExternalReference?t:null)("placement",i.errorPopoverPlacement),c.zb(1),c.nc("ngIf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.ExternalReference),c.zb(1),c.Nc(" ",null==n.exEntry?null:n.exEntry.ExternalReference," "),c.zb(3),c.nc("ngbPopover",null!=n.exEntry&&null!=n.exEntry.serverErrors&&n.exEntry.serverErrors.MonetaryValue?t:null)("placement",i.errorPopoverPlacement),c.zb(1),c.nc("ngIf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.MonetaryValue),c.zb(1),c.Nc(" ",n.exEntry?c.jc(14,14,(null==n.exEntry?null:n.exEntry.MonetaryValue)*(null==n.exEntry?null:n.exEntry.Direction),i.amountsFormat):""," ")}}function K9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",145),c.cc("click",function(){c.Dc(e);const t=c.gc(2).$implicit;return c.gc(2).onEditExEntry(t)}),c.Lc(1),c.hc(2,"translate"),c.Rb()}2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"Edit")," "))}function B9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",145),c.cc("click",function(){c.Dc(e);const t=c.gc(2),n=t.$implicit,i=t.index;return c.gc(2).onCancelEditExEntry(n,i)}),c.Lc(1),c.hc(2,"translate"),c.Rb()}2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"Cancel")," "))}function H9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",145),c.cc("click",function(){c.Dc(e);const t=c.gc(2),n=t.$implicit,i=t.index;return c.gc(2).onDeleteExEntry(n,i)}),c.Lc(1),c.hc(2,"translate"),c.Rb()}2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"Delete")," "))}function Q9(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",138),c.Sb(2,"button",139),c.Sb(3,"span",113),c.Nb(4,"fa-icon",140),c.Rb(),c.Rb(),c.Sb(5,"div",141),c.Jc(6,K9,3,3,"button",142),c.Jc(7,B9,3,3,"ng-template",null,143,c.Kc),c.Jc(9,H9,3,3,"button",144),c.Rb(),c.Rb(),c.Pb()),2&e){const e=c.Ac(8),t=c.gc().$implicit,n=c.gc(2);c.zb(1),c.nc("placement",n.commandsDropdownPlacement),c.zb(5),c.nc("ngIf",!t.exEntryIsEdit)("ngIfElse",e),c.zb(3),c.nc("ngIf",!(null==t.exEntry||!t.exEntry.Id))}}function W9(e,t){1&e&&c.Ob(0)}function G9(e,t){if(1&e&&(c.Qb(0),c.Jc(1,W9,1,0,"ng-container",146),c.Pb()),2&e){c.gc(2);const e=c.Ac(55);c.zb(1),c.nc("ngTemplateOutlet",e)}}function Y9(e,t){if(1&e&&(c.Sb(0,"tr"),c.Sb(1,"td",90),c.Lc(2," \xa0 "),c.Jc(3,b9,2,3,"t-view-link",29),c.Rb(),c.Sb(4,"td",90),c.Lc(5),c.hc(6,"dateFormat"),c.Rb(),c.Sb(7,"td",90),c.Lc(8),c.Rb(),c.Sb(9,"td",91),c.Lc(10),c.hc(11,"accounting"),c.Rb(),c.Jc(12,L9,19,7,"ng-container",64),c.Jc(13,O9,2,3,"ng-template",null,92,c.Kc),c.Jc(15,A9,10,17,"ng-container",64),c.Jc(16,U9,17,17,"ng-template",null,93,c.Kc),c.Sb(18,"td",94),c.Jc(19,Q9,10,4,"ng-container",13),c.Jc(20,G9,2,1,"ng-container",13),c.Rb(),c.Rb()),2&e){const e=t.$implicit,n=c.Ac(14),i=c.Ac(17),o=c.gc(2);c.Eb("t-highlight-a",e.entryIsChecked)("t-pale-a",e.entryReconciliation)("t-highlight-b",e.exEntryIsChecked)("t-pale-b",e.exEntryReconciliation)("t-yellow-a",o.isHoveredEntryReconciliation(e))("t-yellow-b",o.isHoveredExEntryReconciliation(e)),c.zb(3),c.nc("ngIf",e.entry),c.zb(2),c.Nc(" ",c.ic(6,22,null==e.entry?null:e.entry.PostingDate)," "),c.zb(3),c.Nc(" ",null==e.entry?null:e.entry.ExternalReference," "),c.zb(2),c.Nc(" ",e.entry?c.jc(11,24,(null==e.entry?null:e.entry.MonetaryValue)*(null==e.entry?null:e.entry.Direction),o.amountsFormat):""," "),c.zb(2),c.nc("ngIf",o.isUnreconciled)("ngIfElse",n),c.zb(3),c.nc("ngIf",e.exEntryIsEdit&&!e.exEntryReconciliation)("ngIfElse",i),c.zb(4),c.nc("ngIf",o.isUnreconciled&&!!e.exEntry&&!e.exEntryReconciliation),c.zb(1),c.nc("ngIf",e.exEntryIsCreate)}}function X9(e,t){1&e&&c.Ob(0)}function Z9(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr"),c.Nb(1,"td",147),c.Sb(2,"td",148),c.cc("dblclick",function(){return c.Dc(e),c.gc(2).onCreateExEntry()}),c.Rb(),c.Sb(3,"td"),c.Jc(4,X9,1,0,"ng-container",146),c.Rb(),c.Rb()}if(2&e){c.gc();const e=c.Ac(55),t=c.gc();c.zb(1),c.nc("colSpan",t.isUnreconciled?8:4),c.zb(1),c.nc("colSpan",t.isUnreconciled?4:3),c.zb(2),c.nc("ngTemplateOutlet",e)}}function eee(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",138),c.Sb(1,"button",139),c.Sb(2,"span",113),c.Nb(3,"fa-icon",140),c.Rb(),c.Rb(),c.Sb(4,"div",141),c.Sb(5,"button",145),c.cc("click",function(){return c.Dc(e),c.gc(2).onCreateExEntry()}),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2);c.nc("placement",e.commandsDropdownPlacement),c.zb(6),c.Nc(" ",c.ic(7,2,"Create")," ")}}function tee(e,t){1&e&&(c.Sb(0,"div",149),c.Nb(1,"t-spinner",150),c.Rb()),2&e&&(c.zb(1),c.nc("scale",2))}function nee(e,t){if(1&e&&(c.Sb(0,"div",151),c.Nb(1,"fa-icon",152),c.Lc(2),c.Rb()),2&e){const e=c.gc(2);c.zb(2),c.Nc(" \xa0 ",e.information()," ")}}function iee(e,t){1&e&&(c.Sb(0,"div",153),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"NoItemsFound")," "))}function cee(e,t){if(1&e&&(c.Sb(0,"div",154),c.Sb(1,"t-error-message"),c.Lc(2),c.Rb(),c.Rb()),2&e){const e=c.gc(2);c.zb(2),c.Nc(" ",e.errorMessage," ")}}function oee(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",59),c.Sb(1,"cdk-virtual-scroll-viewport",60),c.Sb(2,"table",61),c.Sb(3,"thead"),c.Sb(4,"tr"),c.Sb(5,"th",62),c.Sb(6,"div",63),c.Sb(7,"span"),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Jc(10,c9,12,19,"div",15),c.Rb(),c.Rb(),c.Jc(11,o9,6,0,"ng-container",64),c.Jc(12,r9,1,0,"ng-template",null,65,c.Kc),c.Sb(14,"th",62),c.Sb(15,"div",63),c.Sb(16,"div",52),c.Sb(17,"span"),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Jc(20,s9,3,3,"button",66),c.Jc(21,l9,4,6,"div",43),c.Sb(22,"input",67,68),c.cc("change",function(){c.Dc(e);const t=c.Ac(23);return c.gc().onSelectFileToImport(t)}),c.Rb(),c.Rb(),c.Jc(24,a9,12,19,"div",15),c.Rb(),c.Rb(),c.Rb(),c.Sb(25,"tr"),c.Sb(26,"th"),c.Lc(27),c.hc(28,"translate"),c.Rb(),c.Sb(29,"th"),c.Lc(30),c.hc(31,"translate"),c.Rb(),c.Sb(32,"th"),c.Lc(33),c.hc(34,"translate"),c.Rb(),c.Sb(35,"th",69),c.Lc(36),c.hc(37,"translate"),c.Rb(),c.Jc(38,u9,6,0,"ng-container",64),c.Jc(39,d9,1,0,"ng-template",null,70,c.Kc),c.Sb(41,"th",71),c.Lc(42),c.hc(43,"translate"),c.Rb(),c.Sb(44,"th",72),c.Lc(45),c.hc(46,"translate"),c.Rb(),c.Sb(47,"th",73),c.Lc(48),c.hc(49,"translate"),c.Rb(),c.Nb(50,"th",74),c.Rb(),c.Rb(),c.Sb(51,"tbody"),c.Jc(52,Y9,21,27,"tr",75),c.Jc(53,Z9,5,3,"tr",13),c.Rb(),c.Rb(),c.Jc(54,eee,8,4,"ng-template",null,76,c.Kc),c.Jc(56,tee,2,1,"div",77),c.Jc(57,nee,3,1,"div",78),c.Jc(58,iee,3,3,"div",79),c.Jc(59,cee,3,1,"div",80),c.Nb(60,"div",81),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(13),t=c.Ac(40),n=c.gc();c.zb(8),c.Nc(" \xa0 ",c.ic(9,23,"InternalEntries")," "),c.zb(2),c.nc("ngIf",n.isUnreconciled&&!n.isDirty),c.zb(1),c.nc("ngIf",n.isUnreconciled)("ngIfElse",e),c.zb(7),c.Mc(c.ic(19,25,"ExternalEntries")),c.zb(2),c.nc("ngIf",n.showDownloadTemplate),c.zb(1),c.nc("ngIf",n.showImport),c.zb(3),c.nc("ngIf",n.isUnreconciled&&!n.isDirty),c.zb(3),c.Nc(" \xa0 ",c.ic(28,27,"Line_Document")," "),c.zb(3),c.Nc(" ",c.ic(31,29,"Line_PostingDate")," "),c.zb(3),c.Nc(" ",c.ic(34,31,"Reconciliation_Reference")," "),c.zb(3),c.Nc(" ",c.ic(37,33,"Entry_MonetaryValue")," "),c.zb(2),c.nc("ngIf",n.isUnreconciled)("ngIfElse",t),c.zb(4),c.Nc(" ",c.ic(43,35,"Line_PostingDate")," "),c.zb(3),c.Nc(" ",c.ic(46,37,"Reconciliation_Reference")," "),c.zb(3),c.Nc(" ",c.ic(49,39,"Entry_MonetaryValue")," "),c.zb(4),c.nc("cdkVirtualForOf",n.rows),c.zb(1),c.nc("ngIf",n.showBuiltInCreateRow),c.zb(3),c.nc("ngIf",n.showSpinner),c.zb(1),c.nc("ngIf",n.showInformation),c.zb(1),c.nc("ngIf",n.showNoItemsFound),c.zb(1),c.nc("ngIf",n.showErrorMessage)}}function ree(e,t){1&e&&(c.Sb(0,"div",155),c.Nb(1,"t-spinner",150),c.Rb()),2&e&&(c.zb(1),c.nc("scale",2))}function see(e,t){if(1&e&&(c.Sb(0,"div",156),c.Sb(1,"h5",157),c.Nb(2,"fa-icon",118),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",158),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(6,"span",159),c.Lc(7,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",160),c.Lc(9),c.Rb(),c.Sb(10,"div",161),c.Sb(11,"button",162),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(12,"fa-icon",39),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc("\xa0\xa0",c.ic(4,3,"Error")," "),c.zb(6),c.Nc(" ",e.modalErrorMessage," "),c.zb(4),c.Nc(" \xa0",c.ic(14,5,"Dismiss")," ")}}function lee(e,t){if(1&e&&(c.Sb(0,"div",156),c.Sb(1,"h5",157),c.Nb(2,"fa-icon",163),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",158),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(6,"span",159),c.Lc(7,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",164),c.Lc(9),c.Rb(),c.Sb(10,"div",161),c.Sb(11,"button",162),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(12,"fa-icon",39),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc("\xa0\xa0",c.ic(4,3,"Success")," "),c.zb(6),c.Nc(" ",e.modalSuccessMessage," "),c.zb(4),c.Nc(" \xa0",c.ic(14,5,"Dismiss")," ")}}function aee(e,t){1&e&&(c.Sb(0,"div",156),c.Sb(1,"h5",157),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",158),c.cc("click",function(){return t.$implicit.dismiss(!1)}),c.Sb(5,"span",159),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",164),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Sb(10,"div",161),c.Sb(11,"button",165),c.cc("click",function(){return t.$implicit.close(!0)}),c.Nb(12,"fa-icon",166),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Sb(15,"button",167),c.cc("click",function(){return t.$implicit.close(!1)}),c.Nb(16,"fa-icon",39),c.Lc(17),c.hc(18,"translate"),c.Rb(),c.Rb()),2&e&&(c.zb(2),c.Nc(" ",c.ic(3,4,"Confirmation")," "),c.zb(6),c.Nc(" ",c.ic(9,6,"UnsavedChangesConfirmationMessage")," "),c.zb(5),c.Nc(" \xa0",c.ic(14,8,"Proceed")," "),c.zb(4),c.Nc(" \xa0",c.ic(18,10,"Cancel")," "))}function uee(e,t){if(1&e&&(c.Sb(0,"div",156),c.Sb(1,"h5",157),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",158),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",159),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",164),c.Sb(8,"div",168),c.Sb(9,"t-form-group",169),c.hc(10,"translate"),c.Lc(11),c.Rb(),c.Sb(12,"t-form-group",169),c.Lc(13),c.Rb(),c.Sb(14,"t-form-group",169),c.hc(15,"translate"),c.Lc(16),c.hc(17,"dateFormat"),c.Rb(),c.Rb(),c.Sb(18,"div",170),c.Sb(19,"table",171),c.Sb(20,"tbody"),c.Sb(21,"tr"),c.Sb(22,"td"),c.Lc(23),c.hc(24,"translate"),c.Rb(),c.Nb(25,"td"),c.Sb(26,"td",69),c.Lc(27),c.hc(28,"accounting"),c.Rb(),c.Rb(),c.Sb(29,"tr"),c.Sb(30,"td"),c.Lc(31),c.hc(32,"translate"),c.Rb(),c.Sb(33,"td",113),c.Nb(34,"fa-icon",172),c.Rb(),c.Sb(35,"td",69),c.Lc(36),c.hc(37,"accounting"),c.Rb(),c.Rb(),c.Sb(38,"tr"),c.Sb(39,"td"),c.Lc(40),c.hc(41,"translate"),c.Rb(),c.Sb(42,"td",113),c.Nb(43,"fa-icon",173),c.Rb(),c.Sb(44,"td",69),c.Lc(45),c.hc(46,"accounting"),c.Rb(),c.Rb(),c.Sb(47,"tr"),c.Sb(48,"td"),c.Lc(49),c.hc(50,"translate"),c.Rb(),c.Sb(51,"td",113),c.Nb(52,"fa-icon",174),c.Rb(),c.Sb(53,"td",69),c.Lc(54),c.hc(55,"accounting"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(56,"div",161),c.Sb(57,"button",162),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(58,"fa-icon",39),c.Lc(59),c.hc(60,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,16,"ReconciliationReport")," "),c.zb(7),c.nc("label",c.ic(10,18,"Entry_Account")),c.zb(2),c.Nc(" ",e.ws.getMultilingualValue("Account",e.accountId,"Name")," "),c.zb(1),c.nc("label",e.labelRelation_Manual),c.zb(1),c.Nc(" ",e.ws.getMultilingualValue("Relation",e.relationId,"Name")," "),c.zb(1),c.nc("label",c.ic(15,20,"AsOfDate")),c.zb(2),c.Nc(" ",e.toDate?c.ic(17,22,e.toDate):"-","\u200c "),c.zb(7),c.Mc(c.ic(24,24,"InternalBalance")),c.zb(4),c.Nc("",c.jc(28,26,e.entriesBalance,e.amountsFormat),"\u200c"),c.zb(4),c.Mc(c.ic(32,29,"InternalUnreconciledBalance")),c.zb(5),c.Nc("",c.jc(37,31,e.unreconciledEntriesBalance,e.amountsFormat),"\u200c"),c.zb(4),c.Mc(c.ic(41,34,"ExternalUnreconciledBalance")),c.zb(5),c.Nc("",c.jc(46,36,e.unreconciledExEntriesBalance,e.amountsFormat),"\u200c"),c.zb(4),c.Mc(c.ic(50,39,"ExternalBalance")),c.zb(5),c.Nc("",c.jc(55,41,e.exEntriesBalance,e.amountsFormat),"\u200c"),c.zb(5),c.Nc(" \xa0",c.ic(60,44,"Dismiss")," ")}}function dee(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",156),c.Sb(1,"h5",157),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",158),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",159),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",164),c.Sb(8,"div",175),c.Sb(9,"t-form-group",169),c.hc(10,"translate"),c.Sb(11,"t-selector",176),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().postingDateTolerance=t}),c.Rb(),c.Rb(),c.Sb(12,"t-form-group",169),c.hc(13,"translate"),c.Sb(14,"t-selector",176),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().externalRefTolerance=t}),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(15,"div",161),c.Sb(16,"button",177),c.cc("click",function(){c.Dc(e);const n=t.$implicit;return c.gc().onAutoReconcile(),n.close(!0)}),c.Nb(17,"fa-icon",37),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Sb(20,"button",178),c.cc("click",function(){return t.$implicit.close(!1)}),c.Nb(21,"fa-icon",39),c.Lc(22),c.hc(23,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc();c.zb(2),c.Nc(" ",c.ic(3,12,"AutoReconcile")," "),c.zb(7),c.nc("label",c.ic(10,14,"PostingDateTolerance")),c.zb(2),c.nc("ngModel",e.postingDateTolerance)("choices",e.postingDateToleranceChoices)("hideEmptyOption",!0),c.zb(1),c.nc("label",c.ic(13,16,"ExternalReferenceTolerance")),c.zb(2),c.nc("ngModel",e.externalRefTolerance)("choices",e.externalRefToleranceChoices)("hideEmptyOption",!0),c.zb(2),c.nc("disabled",!!e.disableAutoReconcile),c.zb(2),c.Nc(" \xa0",c.ic(19,18,"AutoReconcile")," "),c.zb(4),c.Nc(" \xa0",c.ic(23,20,"Cancel")," ")}}let bee=(()=>{class e{constructor(e,t,n,i,c,o,r){this.workspace=e,this.router=t,this.customUserSettings=n,this.route=i,this.apiService=c,this.translate=o,this.modalService=r,this.MIN_PAGE_SIZE=500,this.argumentsKey="reconciliation/arguments",this.notifyFetch$=new E.a,this.notifyDestruct$=new E.a,this.api=this.apiService.reconciliationApi(this.notifyDestruct$),this.viewChoices=[{value:"reconciled",name:()=>this.translate.instant("Reconciled")},{value:"unreconciled",name:()=>this.translate.instant("Unreconciled")}],this.numericKeys={account_id:void 0,relation_id:void 0,entries_top:this.MIN_PAGE_SIZE,entries_skip:0,ex_entries_top:this.MIN_PAGE_SIZE,ex_entries_skip:0,top:this.MIN_PAGE_SIZE,skip:0,from_amount:void 0,to_amount:void 0},this.stringKeys={view:"unreconciled",from_date:void 0,to_date:void 0,ex_ref_contains:void 0},this.initialized=!1,this._postingDateTolerance=0,this._externalRefTolerance=0,this._postingDateToleranceChoices=[{value:0,name:()=>this.translate.instant("ExactMatch")},{value:1,name:()=>"1"},{value:2,name:()=>"2"},{value:3,name:()=>"3"},{value:4,name:()=>"4"},{value:5,name:()=>"5"}],this._externalRefToleranceChoices=[{value:0,name:()=>this.translate.instant("ExactMatch")},{value:1,name:()=>this.translate.instant("StringDistance_1",{0:1})},{value:2,name:()=>this.translate.instant("StringDistance_2",{0:2})},{value:3,name:()=>this.translate.instant("StringDistance_3",{0:3})},{value:1e6,name:()=>this.translate.instant("IgnoreMatch")}],this._autoReconcileParamsKey="reconciliation/auto-reconcile-params",this._rows=[],this._showBuiltInCreateRow=!1,this.externalEntriesForSave=[],this.reconciliationsForSave=[],this.deletedExternalEntryIds=[],this.deletedReconciliationIds=[]}ngOnInit(){this.api=this.apiService.reconciliationApi(this.notifyDestruct$),this._subscriptions=new O.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(N.a)(()=>this.doFetch())).subscribe());const e=this.customUserSettings.get(this._autoReconcileParamsKey);e?(this.postingDateTolerance=+e.postingDateTolerance||0,this.externalRefTolerance=+e.externalRefTolerance||0):(this.postingDateTolerance=0,this.externalRefTolerance=0),this._subscriptions.add(this.route.paramMap.subscribe(e=>{let t=!1;const n=this.state.arguments;for(const i of Object.keys(this.stringKeys)){const c=e.get(i)||this.stringKeys[i];n[i]!==c&&(n[i]=c,t=!0)}for(const i of Object.keys(this.numericKeys)){const c=+e.get(i)||this.numericKeys[i];n[i]!==c&&(n[i]=c,t=!0)}n.collapse="true"===e.get("collapse"),t&&this.fetch()}))}ngAfterViewInit(){this.initialized||Object(cn.a)(1).subscribe(()=>this.initialized=!0)}ngOnDestroy(){this.notifyDestruct$.next(),this._subscriptions.unsubscribe()}urlStateChanged(){const e=this.state.arguments,t={};for(const i of Object.keys(this.stringKeys)){const n=e[i]||this.stringKeys[i];n&&(t[i]=n)}for(const i of Object.keys(this.numericKeys)){const n=e[i]||this.numericKeys[i];n&&(t[i]=n)}this.router.navigate([".",t],{relativeTo:this.route,replaceUrl:!0});const n=JSON.stringify(e);this.customUserSettings.save(this.argumentsKey,n)}parametersChanged(){this.resetEdits(),this.urlStateChanged(),this.fetch()}get UnreconciledArgs(){return{accountId:this.accountId,relationId:this.visibleRelationId,asOfDate:this.toDate,entriesTop:this.entriesTop,entriesSkip:this.entriesSkip,externalEntriesTop:this.externalEntriesTop,externalEntriesSkip:this.externalEntriesSkip}}get ReconciledArgs(){return{accountId:this.accountId,relationId:this.visibleRelationId,fromDate:this.fromDate,toDate:this.toDate,fromAmount:this.fromAmount,toAmount:this.toAmount,externalReferenceContains:this.externalReferenceContains,top:this.top,skip:this.skip}}fetch(){this.notifyFetch$.next()}doFetch(){const e=this.state;if(this.requiredParametersAreSet){if(this.loadingRequiredParameters)return e.reportStatus=L.i.loading,delete e.reconciled_response,delete e.unreconciled_response,Object(A.a)();{let t;return e.reportStatus=L.i.loading,this.isUnreconciled?(delete e.unreconciled_response,t=this.api.getUnreconciled(this.UnreconciledArgs).pipe(Object(us.a)(t=>{e.unreconciled_response=t,e.unreconciled_entries_count=t.UnreconciledEntriesCount,e.unreconciled_ex_entries_count=t.UnreconciledExternalEntriesCount}))):this.isReconciled?(delete e.reconciled_response,t=this.api.getReconciled(this.ReconciledArgs).pipe(Object(us.a)(t=>{e.reconciled_response=t,e.reconciled_count=t.ReconciledCount}))):console.error(`Unknown view ${this.view}`),t=t.pipe(Object(J.a)(t=>{e.reportStatus=L.i.loaded,this.resetEdits()}),Object(F.a)(t=>(e.reportStatus=L.i.error,e.errorMessage=t.error,Object(A.a)(null)))),t}}return e.reportStatus=L.i.information,e.information=()=>this.translate.instant("FillRequiredFields"),Object(A.a)()}get requiredParametersAreSet(){return!(!this.state.arguments.account_id||this.showRelationParameter&&!this.visibleRelationId)}get loadingRequiredParameters(){return!(!this.accountId||this.account())||!(!this.showRelationParameter||this.readonlyRelation_Manual||!this.relationId||this.ws.get("Relation",this.relationId))}get ws(){return this.workspace.currentTenant}get state(){const e=this.ws;return e.reconciliationState=e.reconciliationState||new L.h}canDeactivate(){if(this.isDirty){const e=this.modalService.open(this.unsavedChangesModal),t=new E.a;return e.result.then(e=>{t.next(e),t.complete()},e=>{t.next(!1),t.complete()}),t}return!0}account(e){return this.ws.get("Account",e=e||this.accountId)}onParameterLoaded(){this.state.reportStatus===L.i.loading&&this.fetch()}get view(){return this.state.arguments.view||"unreconciled"}set view(e){const t=this.state.arguments;t.view!==e&&(t.view=e,this.parametersChanged())}get isUnreconciled(){return"unreconciled"===this.view}get isReconciled(){return"reconciled"===this.view}get showErrorMessage(){return this.state.reportStatus===L.i.error}get errorMessage(){return this.state.errorMessage}get modalErrorMessage(){return this._modalErrorMessage}get modalSuccessMessage(){return this._modalSuccessMessage}get showInformation(){return this.state.reportStatus===L.i.information}information(){return this.state.information()}get showNoItemsFound(){return this.state.reportStatus===L.i.loaded&&0===this.rows.length&&!this.showBuiltInCreateRow}get showSpinner(){return this.state.reportStatus===L.i.loading}get accountId(){return this.state.arguments.account_id}set accountId(e){const t=this.state.arguments;t.account_id!==e&&(t.account_id=e,this.parametersChanged())}get relationId(){return this.state.arguments.relation_id}set relationId(e){const t=this.state.arguments;t.relation_id!==e&&(t.relation_id=e,this.parametersChanged())}get showRelationParameter(){const e=this.account();return!!e&&!!e.RelationDefinitionId}get labelRelation_Manual(){const e=this.account(),t=e?e.RelationDefinitionId:null;return Object(hh.a)(this.workspace,this.translate,t).titleSingular()}get readonlyRelation_Manual(){const e=this.account();return!!e&&!!e.RelationId}get readonlyValueRelationId_Manual(){const e=this.account();return e?e.RelationId:null}get definitionIdsRelation_Manual(){return[this.account().RelationDefinitionId]}get visibleRelationId(){if(this.showRelationParameter)return this.readonlyRelation_Manual?this.readonlyValueRelationId_Manual:this.state.arguments.relation_id}get toDate(){return this.state.arguments.to_date}set toDate(e){const t=this.state.arguments;t.to_date!==e&&(t.to_date=e,this.parametersChanged())}get fromDate(){return this.state.arguments.from_date}set fromDate(e){const t=this.state.arguments;t.from_date!==e&&(t.from_date=e,this.parametersChanged())}get top(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.top)}set top(e){const t=this.state.arguments;t.top!==e&&(t.top=e,this.parametersChanged())}get skip(){return this.state.arguments.skip}set skip(e){const t=this.state.arguments;t.skip!==e&&(t.skip=e,this.parametersChanged())}get entriesTop(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.entries_top)}set entriesTop(e){const t=this.state.arguments;t.entries_top!==e&&(t.entries_top=e,this.parametersChanged())}get entriesSkip(){return this.state.arguments.entries_skip}set entriesSkip(e){const t=this.state.arguments;t.entries_skip!==e&&(t.entries_skip=e,this.parametersChanged())}get externalEntriesTop(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.ex_entries_top)}set externalEntriesTop(e){const t=this.state.arguments;t.ex_entries_top!==e&&(t.ex_entries_top=e,this.parametersChanged())}get externalEntriesSkip(){return this.state.arguments.ex_entries_skip}set externalEntriesSkip(e){const t=this.state.arguments;t.ex_entries_skip!==e&&(t.ex_entries_skip=e,this.parametersChanged())}get fromAmount(){return this.state.arguments.from_amount}set fromAmount(e){const t=this.state.arguments;t.from_amount!==e&&(t.from_amount=e,this.parametersChanged())}get toAmount(){return this.state.arguments.to_amount}set toAmount(e){const t=this.state.arguments;t.to_amount!==e&&(t.to_amount=e,this.parametersChanged())}get externalReferenceContains(){return this.state.arguments.ex_ref_contains}set externalReferenceContains(e){const t=this.state.arguments;t.ex_ref_contains!==e&&(t.ex_ref_contains=e,this.parametersChanged())}get isLoaded(){return this.state.reportStatus===L.i.loaded}get showReport(){return this.isUnreconciled}get disableReport(){return this.isLoaded?null:this.translate.instant("Error_NotLoadedYet")}get entriesBalance(){const e=this.state.unreconciled_response;return e?e.EntriesBalance:0}get unreconciledEntriesBalance(){const e=this.state.unreconciled_response;return e?e.UnreconciledEntriesBalance:0}get unreconciledExEntriesBalance(){const e=this.state.unreconciled_response;return e?e.UnreconciledExternalEntriesBalance:0}get exEntriesBalance(){const e=this.state.unreconciled_response;return e?e.EntriesBalance-e.UnreconciledEntriesBalance+e.UnreconciledExternalEntriesBalance:0}get canEditPermissions(){return this.ws.canUpdate("reconciliation",null)}get canReadPermissions(){return this.ws.canRead("reconciliation")}onSelectFileToImport(e){if(this.disableImport)return;const t=e.files;if(0===t.length)return;const n=t[0];e.value="",this.api.import(n).subscribe(e=>{if(!this.isLoaded)return;let t=this.findIndexForCreate();const n=this._rows.length;for(const i of e)this.addCreatedExEntry(i,t),t++;n!==this._rows.length&&(this._rows=this._rows.slice()),this.fixCreateExEntryRow(t)},e=>{this.displayErrorModal(e.error)})}get showImport(){return this.isUnreconciled}get disableImport(){return this.isLoaded?this.canEditPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}onDownloadTemplate(){const e=[[this.translate.instant("Line_PostingDate"),this.translate.instant("Reconciliation_Reference"),this.translate.instant("Entry_MonetaryValue")]],t=Object(V.g)(e),n=this.translate.instant("ImportTemplate")+".csv";Object(V.i)(t,n)}get showDownloadTemplate(){return this.showImport}onExport(){if(!this.disableExport&&this.isUnreconciled){const e=this.UnreconciledArgs,t=this.labelRelation_Manual,n=this.amountsFormat,i=this.api.getUnreconciled(e);this.showExportSpinner=!0,i.pipe(Object(J.a)(i=>{this.showExportSpinner=!1;const c=`${this.translate.instant("Unreconciled")}.csv`,o=[[this.translate.instant("Entry_Account"),Object($w.a)(this.workspace,this.translate).format(this.ws.get("Account",e.accountId)),"","","","",""],[t,this.ws.getMultilingualValue("Relation",e.relationId,"Name"),"","","","",""],[this.translate.instant("AsOfDate"),e.asOfDate?Object(yi.c)(new Date(e.asOfDate)):"","","","","",""],["","","","","","",""],[this.translate.instant("InternalBalance"),Object(Ob.a)(i.EntriesBalance,n),"","","","",""],[this.translate.instant("InternalUnreconciledBalance"),Object(Ob.a)(i.UnreconciledEntriesBalance,n),"-","","","",""],[this.translate.instant("ExternalUnreconciledBalance"),Object(Ob.a)(i.UnreconciledExternalEntriesBalance,n),"+","","","",""],[this.translate.instant("ExternalBalance"),Object(Ob.a)(i.EntriesBalance-i.UnreconciledEntriesBalance+i.UnreconciledExternalEntriesBalance,n),"=","","","",""],["","","","","","",""],[this.translate.instant("InternalEntries"),"","","",this.translate.instant("ExternalEntries"),"",""],[this.translate.instant("Line_Document"),this.translate.instant("Line_PostingDate"),this.translate.instant("Reconciliation_Reference"),this.translate.instant("Entry_MonetaryValue"),this.translate.instant("Line_PostingDate"),this.translate.instant("Reconciliation_Reference"),this.translate.instant("Entry_MonetaryValue")]],r=Math.max(i.Entries.length,i.ExternalEntries.length);for(let e=0;e<r;e++){const t=i.Entries[e],c=i.ExternalEntries[e],r=[];t?(r.push(this.formatSerialNumber(t.DocumentSerialNumber,t.DocumentDefinitionId)),r.push(Object(yi.c)(new Date(t.PostingDate))),r.push(t.ExternalReference),r.push(Object(Ob.a)(t.MonetaryValue*t.Direction,n))):r.push("","","",""),c?(r.push(Object(yi.c)(new Date(c.PostingDate))),r.push(c.ExternalReference),r.push(Object(Ob.a)(c.MonetaryValue*c.Direction,n))):r.push("","",""),o.push(r)}const s=Object(V.g)(o);Object(V.i)(s,c)}),Object(F.a)(e=>(this.showExportSpinner=!1,this.displayErrorModal(e.error),Object(A.a)())),Object(ne.a)(()=>{this.showExportSpinner=!1})).subscribe()}}get disableExport(){return this.isLoaded?this.canReadPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}showExport(){return this.isUnreconciled}get postingDateTolerance(){return this._postingDateTolerance}set postingDateTolerance(e){this._postingDateTolerance=e}get postingDateToleranceChoices(){return this._postingDateToleranceChoices}get externalRefTolerance(){return this._externalRefTolerance}set externalRefTolerance(e){this._externalRefTolerance=e}get externalRefToleranceChoices(){return this._externalRefToleranceChoices}onAutoReconcile(){if(!this.disableAutoReconcile){const c=this.postingDateTolerance,o=this.externalRefTolerance,r=this.customUserSettings.get(this._autoReconcileParamsKey);function e(e,t){const n=Math.abs(e.entryDays-t.exEntryDays);return n>c?1/0:n}function t(e,t){const n=Object(J8.a)(e.entry.ExternalReference,t.exEntry.ExternalReference,o+1);return n>o?1/0:n}r&&r.postingDateTolerance===c&&r.externalRefTolerance===o||this.customUserSettings.save(this._autoReconcileParamsKey,JSON.stringify({postingDateTolerance:c,externalRefTolerance:o}));const s=this.rows.filter(e=>!!e.entry&&!e.entry.IsReconciledLater&&Object(V.n)(e.entry.MonetaryValue)&&e.entry.PostingDate&&!e.entryReconciliation),l=this.rows.filter(e=>!!e.exEntry&&Object(V.n)(e.exEntry.MonetaryValue)&&e.exEntry.PostingDate&&!e.exEntryReconciliation),a={};for(const e of s){e.entryDays=new Date(e.entry.PostingDate).getTime()/864e5;const t=e.entry.MonetaryValue*e.entry.Direction;a[t]=a[t]||[],a[t].push(e)}const u={};for(const e of l){e.exEntryDays=new Date(e.exEntry.PostingDate).getTime()/864e5;const t=e.exEntry.MonetaryValue*e.exEntry.Direction;u[t]=u[t]||[],u[t].push(e)}let d=0;for(const g of Object.keys(a)){const o=a[g],r=u[g];if(o&&o.length>0&&r&&r.length>0)if(1===o.length&&1===r.length){const n=o[0],i=r[0];e(n,i)!==1/0&&t(n,i)!==1/0&&(this.addReconciliation([n],[i]),d++)}else{o.sort((e,t)=>e.entryDays-t.entryDays),r.sort((e,t)=>e.exEntryDays-t.exEntryDays);const s=[];let l,a=0,u=0;for(let d=0;d<o.length;d++){const b=o[d];if(b.entryDays!==l){l=b.entryDays;const e=b.entryDays-c;for(;a<r.length&&r[a].exEntryDays<e;)a++;const t=b.entryDays+c;for(;u<r.length&&r[u].exEntryDays<=t;)u++}for(let c=a;c<u;c++){const o=e(n=b,i=r[c])+1e3*t(n,i);o<1/0&&s.push({eIndex:d,exIndex:c,diff:o})}}s.sort((e,t)=>e.diff-t.diff);const b={},g={};for(const e of s)b[e.eIndex]||g[e.exIndex]||(b[e.eIndex]=!0,g[e.exIndex]=!0,this.addReconciliation([o[e.eIndex]],[r[e.exIndex]]),d++)}}for(const e of this.rows)delete e.entryDays,delete e.exEntryDays;const b=this.translate.instant("AutoReconcileMessage",{0:d});this.displaySuccessModal(b)}var n,i}get showAutoReconcile(){return this.isUnreconciled}get disableAutoReconcile(){return this.isLoaded?this.canEditPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get commandsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}get errorPopoverPlacement(){return"bottom"}get flip(){return this.workspace.ws.isRtl?"horizontal":null}onRefresh(){this.state.reportStatus!==L.i.loading&&this.fetch()}get disableRefresh(){return!this.requiredParametersAreSet}get from(){return Math.min(this.state.arguments.skip+1,this.total)}get to(){const e=this.state.reconciled_response;return Math.min(this.state.arguments.skip+(e?e.Reconciliations.length:this.top),this.total)}get total(){return this.state.reconciled_count||0}onPreviousPage(){const e=this.state.arguments;e.skip=Math.max(e.skip-this.top,0),this.urlStateChanged(),this.fetch()}get canPreviousPage(){return this.state.arguments.skip>0}onNextPage(){const e=this.state.arguments;e.skip=e.skip+this.top,this.urlStateChanged(),this.fetch()}get canNextPage(){return this.to<this.total}get entries_from(){return Math.min(this.state.arguments.entries_skip+1,this.entries_total)}get entries_to(){const e=this.state.unreconciled_response;return Math.min(this.state.arguments.entries_skip+(e?e.Entries.length:this.entriesTop),this.entries_total)}get entries_total(){return this.state.unreconciled_entries_count||0}entries_onPreviousPage(){const e=this.state.arguments;e.entries_skip=Math.max(e.entries_skip-this.entriesTop,0),this.urlStateChanged(),this.fetch()}get entries_canPreviousPage(){return this.state.arguments.entries_skip>0}entries_onNextPage(){const e=this.state.arguments;e.entries_skip=e.entries_skip+this.entriesTop,this.urlStateChanged(),this.fetch()}get entries_canNextPage(){return this.entries_to<this.entries_total}get ex_entries_from(){return Math.min(this.state.arguments.ex_entries_skip+1,this.ex_entries_total)}get ex_entries_to(){const e=this.state.unreconciled_response;return Math.min(this.state.arguments.ex_entries_skip+(e?e.ExternalEntries.length:this.externalEntriesTop),this.ex_entries_total)}get ex_entries_total(){return this.state.unreconciled_ex_entries_count||0}ex_entries_onPreviousPage(){const e=this.state.arguments;e.ex_entries_skip=Math.max(e.ex_entries_skip-this.externalEntriesTop,0),this.urlStateChanged(),this.fetch()}get ex_entries_canPreviousPage(){return this.state.arguments.ex_entries_skip>0}ex_entries_onNextPage(){const e=this.state.arguments;e.ex_entries_skip=e.ex_entries_skip+this.externalEntriesTop,this.urlStateChanged(),this.fetch()}get ex_entries_canNextPage(){return this.ex_entries_to<this.ex_entries_total}get rows(){switch(this.view){case"reconciled":{const e=this.state.reconciled_response;if(this._rowsResponse!==e&&(this._rowsResponse=e,this._rows=[],e))for(const t of e.Reconciliations){const e=Math.max(t.Entries.length,t.ExternalEntries.length);for(let n=0;n<e;n++){const i={reconciliation:t};0===n&&(i.firstOne=e);const c=t.Entries[n];c&&(i.entry=c.Entry);const o=t.ExternalEntries[n];o&&o.ExternalEntryId&&(i.exEntry=o.ExternalEntry),this._rows.push(i)}}break}case"unreconciled":{const e=this.state.unreconciled_response;if(this._rowsResponse!==e&&(this._rowsResponse=e,this._rows=[],e)){const t=Math.max(e.Entries.length,e.ExternalEntries.length);for(let n=0;n<t;n++){const t={};t.entry=e.Entries[n],t.exEntry=e.ExternalEntries[n],this._rows.push(t)}this.fixCreateExEntryRow()}break}default:console.error(`Unknown view ${this.view}`),this._rows=[]}return this._rows}onDeleteReconciliation(e){const t=e.reconciliation;t&&(t.Id&&this.deletedReconciliationIds.push(+t.Id),this._rows=this._rows.filter(e=>e.reconciliation!==t))}get showBuiltInCreateRow(){return this._showBuiltInCreateRow&&this.isUnreconciled&&this.requiredParametersAreSet&&!this.showErrorMessage}fixCreateExEntryRow(e=-1){this._rows.forEach(e=>delete e.exEntryIsCreate),this._showBuiltInCreateRow=!1;const t=e>=0?e:this.findIndexForCreate();t>=this._rows.length?this._showBuiltInCreateRow=!0:this._rows[t].exEntryIsCreate=!0}findIndexForCreate(){let e=this._rows.length-1;for(;e>=0;e--){const t=this._rows[e];if(t.reconciliation||t.exEntry)break}return e+1}onRowDoubleClick(e){this.isUnreconciled&&(e.exEntryIsCreate?this.onCreateExEntry():this.onEditExEntry(e))}onCreateExEntryOld(){if(!this.isLoaded)return;const e=this.findIndexForCreate(),t={Direction:1};this.externalEntriesForSave.push(t);const n=this.externalEntriesForSave.length-1;if(this._rows.length<=e)this._rows.push({exEntryIsEdit:!0,exEntry:t,exEntryIndex:n}),this._rows=this._rows.slice();else{const i=this._rows[e];i.exEntry=t,i.exEntryIsEdit=!0,i.exEntryIndex=n}return this.fixCreateExEntryRow(e+1),e}onCreateExEntry(){if(!this.isLoaded)return;const e=this.findIndexForCreate(),t=this._rows.length;return this.addCreatedExEntry({Direction:1},e),t!==this._rows.length&&(this._rows=this._rows.slice()),this.fixCreateExEntryRow(e+1),e}addCreatedExEntry(e,t){this.externalEntriesForSave.push(e);const n=this.externalEntriesForSave.length-1;if(this._rows.length<=t)this._rows.push({exEntryIsEdit:!0,exEntry:e,exEntryIndex:n});else{const i=this._rows[t];i.exEntry=e,i.exEntryIsEdit=!0,i.exEntryIndex=n}return t}removeExternalEntryForSave(e){const t=this.externalEntriesForSave;t[e]=null;for(let n=t.length-1;n>=0&&!t[n];n--)t.pop()}onDeleteExEntry(e,t){const n=e.exEntryIndex;Object(V.n)(n)&&this.removeExternalEntryForSave(n),e.exEntry.Id&&this.deletedExternalEntryIds.push(+e.exEntry.Id),delete e.exEntry,delete e.exEntryOriginal,delete e.exEntryIsEdit,delete e.exEntryIndex,delete e.exEntryIsChecked,this.shiftAllExternalEntriesUp(t),this.fixCreateExEntryRow()}shiftAllExternalEntriesUp(e){for(let n=e+1;n<this._rows.length;n++){const e=this._rows[n-1],t=this._rows[n];e.exEntry=t.exEntry,e.exEntryOriginal=t.exEntryOriginal,e.exEntryIsEdit=t.exEntryIsEdit,e.exEntryIndex=t.exEntryIndex,e.exEntryIsChecked=t.exEntryIsChecked,e.exEntryReconciliation=t.exEntryReconciliation}const t=this._rows[this._rows.length-1];t.entry?(delete t.exEntry,delete t.exEntryOriginal,delete t.exEntryIsEdit,delete t.exEntryIndex,delete t.exEntryIsChecked,delete t.exEntryReconciliation):(this._rows.pop(),this._rows=this._rows.slice())}onEditExEntry(e){!e.exEntryIsEdit&&e.exEntry&&(e.exEntryIsEdit=!0,e.exEntryOriginal=e.exEntry,e.exEntry=JSON.parse(JSON.stringify(e.exEntryOriginal)))}onCancelEditExEntry(e,t){e.exEntry.Id?(Object(V.n)(e.exEntryIndex)&&this.removeExternalEntryForSave(e.exEntryIndex),e.exEntryIsEdit=!1,e.exEntry=e.exEntryOriginal,delete e.exEntryOriginal):this.onDeleteExEntry(e,t)}onChangeExEntry(e,t){Object(V.n)(e.exEntryIndex)||(this.externalEntriesForSave.push(e.exEntry),e.exEntryIndex=this.externalEntriesForSave.length-1)}onChangeExternalReference(e,t,n){this.onChangeExEntry(e,t),e.exEntry.ExternalReference=n}onChangePostingDate(e,t,n){this.onChangeExEntry(e,t),e.exEntry.PostingDate=n}onChangeMonetaryValue(e,t,n){this.onChangeExEntry(e,t),this.setMonetaryValue(e.exEntry,n)}resetEdits(){this.externalEntriesForSave=[],this.reconciliationsForSave=[],this.deletedExternalEntryIds=[],this.deletedReconciliationIds=[]}get canSave(){return!0}onSave(){if(this.canSave&&this.isDirty&&this.requiredParametersAreSet&&!this.loadingRequiredParameters){for(const i of this.externalEntriesForSave)i&&delete i.serverErrors;for(const i of this.reconciliationsForSave){delete i.serverErrors;for(const e of i.Entries)delete e.serverErrors;for(const e of i.ExternalEntries)delete e.serverErrors}const e={ExternalEntries:this.externalEntriesForSave,Reconciliations:this.reconciliationsForSave,DeletedExternalEntryIds:this.deletedExternalEntryIds,DeletedReconciliationIds:this.deletedReconciliationIds},t=this.state;let n;this.isUnreconciled?n=this.api.saveAndGetUnreconciled(e,this.UnreconciledArgs).pipe(Object(us.a)(e=>{t.unreconciled_response=e,t.unreconciled_entries_count=e.UnreconciledEntriesCount,t.unreconciled_ex_entries_count=e.UnreconciledExternalEntriesCount})):this.isReconciled?n=this.api.saveAndGetReconciled(e,this.ReconciledArgs).pipe(Object(us.a)(e=>{t.reconciled_response=e,t.reconciled_count=e.ReconciledCount})):console.error(`Unknown view ${this.view}`),n.pipe(Object(J.a)(e=>{t.reportStatus=L.i.loaded,this.resetEdits()}),Object(F.a)(t=>{if(422===t.status){const n=t.error,i=Object.keys(n),c=[];for(const t of i){const i=n[t],o=t.split("."),r=o[0];if(r.startsWith("ExternalEntries")&&o.length>1){const t=+r.substring(0,r.length-1).split("[")[1];if(isNaN(t))c.push(...i);else{const n=o[1];switch(n){case"PostingDate":case"ExternalReference":case"MonetaryValue":const o=e.ExternalEntries[t];o.serverErrors=o.serverErrors||{},o.serverErrors[n]=i;break;default:c.push(...i)}}}else if(r.startsWith("Reconciliations")&&o.length>2){const t=+r.substring(0,r.length-1).split("[")[1];if(isNaN(t))c.push(...i);else{const n=e.Reconciliations[t];n.serverErrors=n.serverErrors||{};const r=o[1];r.startsWith("Entries")?(n.serverErrors.Entries=n.serverErrors.Entries||[],n.serverErrors.Entries.push(...i)):r.startsWith("ExternalEntries")?(n.serverErrors.ExternalEntries=n.serverErrors.ExternalEntries||[],n.serverErrors.ExternalEntries.push(...i)):c.push(...i)}}else c.push(...i)}if(c.length>0){const e={};for(const r of c)e[r]=!0;const t=Object.keys(e),n="\n",i=10;let o=t.slice(0,i).map(e=>` - ${e}`).join(n);t.length>i&&(o+="..."),this.displayErrorModal(o)}}else this.displayErrorModal(t.error);return Object(A.a)(null)})).subscribe()}}displayErrorModal(e){this._modalErrorMessage=e,this.modalService.open(this.errorModal)}displaySuccessModal(e){this._modalSuccessMessage=e,this.modalService.open(this.successModal)}onCancel(){const e=this.canDeactivate();e instanceof kp.a?e.subscribe(e=>{e&&this.doCancel()}):e&&this.doCancel()}doCancel(){this.resetEdits(),delete this._rowsResponse}get showCheckedEntriesToolbar(){return!!this.rows&&this.rows.some(e=>e.entryIsChecked||e.exEntryIsChecked)}get showEditToolbar(){return this.isDirty&&!this.showCheckedEntriesToolbar}get showViewToolbar(){return!this.isDirty&&!this.showCheckedEntriesToolbar}get checkedEntries(){return this.rows?this.rows.filter(e=>!!e.entry&&e.entryIsChecked).map(e=>e.entry):[]}get checkedExEntries(){return this.rows?this.rows.filter(e=>!!e.exEntry&&e.exEntryIsChecked).map(e=>e.exEntry):[]}get checkedEntriesTotal(){return this.checkedEntries.map(e=>e.Direction*e.MonetaryValue).reduce((e,t)=>e+t,0)}get checkedExEntriesTotal(){return this.checkedExEntries.map(e=>e.Direction*(e.MonetaryValue||0)).reduce((e,t)=>e+t,0)}get isDirty(){return this.externalEntriesForSave.length>0||this.reconciliationsForSave.length>0||this.deletedExternalEntryIds.length>0||this.deletedReconciliationIds.length>0}uncheckAll(){if(this.rows)for(const e of this.rows)delete e.entryIsChecked,delete e.exEntryIsChecked}onCloneAndReconcile(e){const t=e.entry;if(t){const n=this.onCreateExEntry(),i=this.rows[n],c=i.exEntry;c.PostingDate=t.PostingDate,c.ExternalReference=t.ExternalReference,c.Direction=t.Direction,c.MonetaryValue=t.MonetaryValue,e.entryIsChecked=!0,i.exEntryIsChecked=!0}}onUndoCloneAndReconcile(e){const t=e.entryReconciliation,n=this._rows.map((e,t)=>({row:e,index:t})).filter(e=>e.row.exEntryReconciliation===t);for(const i of n)this.onDeleteExEntry(i.row,i.index);this.removeReconciliation(t)}onReconcileChecked(){if(!this.disableReconcileChecked){const e=[],t=[];for(const n of this._rows)n.entryIsChecked&&n.entry&&e.push(n),n.exEntryIsChecked&&n.exEntry&&t.push(n);this.addReconciliation(e,t)}}get disableReconcileChecked(){return this.canEditPermissions?this.checkedEntries.length>1&&this.checkedExEntries.length>1?this.translate.instant("Error_ManyToManyReconciliation"):Math.round(1e4*this.checkedEntriesTotal)!==Math.round(1e4*this.checkedExEntriesTotal)?this.translate.instant("Error_TotalsImbalance"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}addReconciliation(e,t){const n={Entries:[],ExternalEntries:[]};for(const i of e)delete i.entryIsChecked,i.entryReconciliation=n,n.Entries.push({EntryId:+i.entry.Id});for(const i of t)delete i.exEntryIsChecked,i.exEntryReconciliation=n,n.ExternalEntries.push({ExternalEntryId:+i.exEntry.Id||void 0,ExternalEntryIndex:i.exEntryIndex});this.reconciliationsForSave.push(n)}onUndoReconcileCheckedEntry(e){this.removeReconciliation(e.entryReconciliation)}onUndoReconciledCheckedExEntry(e){this.removeReconciliation(e.exEntryReconciliation)}removeReconciliation(e){if(e){this.reconciliationsForSave=this.reconciliationsForSave.filter(t=>t!==e);for(const t of this._rows)t.entryReconciliation===e&&delete t.entryReconciliation,t.exEntryReconciliation===e&&delete t.exEntryReconciliation}}onCancelReconcileChecked(){this.uncheckAll()}get amountsDecimals(){const e=this.ws.get("Relation",this.visibleRelationId),t=this.ws.get("Account",this.accountId);if(this.amountsDecimalsRelation!==e&&this.amountsDecimalsAccount!==t){this.amountsDecimalsRelation=e,this.amountsDecimalsAccount=t;const n=this.ws.get("Currency",(t?t.CurrencyId:null)||(e?e.CurrencyId:null));this.amountsDecimalsResult=n?n.E:this.ws.settings.FunctionalCurrencyDecimals}return this.amountsDecimalsResult}get amountsFormat(){const e=this.ws.get("Relation",this.visibleRelationId),t=this.ws.get("Account",this.accountId);if(this.amountsFormatRelation!==e&&this.amountsFormatAccount!==t){this.amountsFormatAccount=e,this.amountsFormatRelation=t;const n=this.amountsDecimals;this.amountsFormatResult=`1.${n}-${n}`}return this.amountsFormatResult}getMonetaryValue(e){return e?e.Direction*e.MonetaryValue:null}setMonetaryValue(e,t){e&&(e.Direction=t<0?-1:1,e.MonetaryValue=Math.abs(t))}formatSerialNumber(e,t){return Object(ph.b)(e,this.ws,t)}get collapseParameters(){return this.state.collapseParams}set collapseParameters(e){const t=this.state;t.collapseParams!==e&&(t.collapseParams=e)}onToggleCollapseParameters(){this.collapseParameters=!this.collapseParameters}onReconciledEntryMouseEnter(e){this._hoveredReconciliation=e.entryReconciliation}onReconciledEntryMouseLeave(e){delete this._hoveredReconciliation}onReconciledExEntryMouseEnter(e){this._hoveredReconciliation=e.exEntryReconciliation}onReconciledExEntryMouseLeave(e){delete this._hoveredReconciliation}isHoveredEntryReconciliation(e){return!!this._hoveredReconciliation&&this._hoveredReconciliation===e.entryReconciliation}isHoveredExEntryReconciliation(e){return!!this._hoveredReconciliation&&this._hoveredReconciliation===e.exEntryReconciliation}handleKeyboardEvent(e){this.workspace.ignoreKeyDownEvents||e.altKey&&"KeyR"===e.code&&this.showCheckedEntriesToolbar&&this.onReconcileChecked()}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(i.e),c.Mb(X.a),c.Mb(i.a),c.Mb(W.a),c.Mb(K.d),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-reconciliation"]],viewQuery:function(e,t){if(1&e&&(c.Qc(P8,3),c.Qc(F8,3),c.Qc(V8,3)),2&e){let e;c.zc(e=c.dc())&&(t.errorModal=e.first),c.zc(e=c.dc())&&(t.successModal=e.first),c.zc(e=c.dc())&&(t.unsavedChangesModal=e.first)}},hostBindings:function(e,t){1&e&&c.cc("keydown",function(e){return t.handleKeyboardEvent(e)},!1,c.Bc)},decls:46,vars:38,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["class","text-danger t-dirty-asterisk px-1",4,"ngIf"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],[1,"w-100"],[1,"row","m-0","px-0","px-lg-1","py-1"],[1,"t-form-group",3,"label"],[3,"ngModel","choices","ngModelOptions","disabled","hideEmptyOption","ngModelChange"],["additionalSelect","RelationDefinitionId,Relation.Name,Relation.Name2,Relation.Name3,Relation.Currency.E,Currency.E","filter","AccountType.Concept eq 'BalancesWithBanks'",3,"ngModel","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded"],["class","t-form-group",3,"label",4,"ngIf"],[4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],["class","d-inline",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"d-none","d-md-inline"],[1,"row","t-rest-of-screen"],["class","table-responsive",4,"ngIf","ngIfElse"],["spinner",""],["errorModal",""],["successModal",""],["unsavedChangesModal",""],["reconciliationReport",""],["autoReconcile",""],[1,"text-danger","t-dirty-asterisk","px-1"],["additionalSelect","Currency.E",3,"ngModel","definitionIds","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded",4,"ngIf"],[3,"link","itemId",4,"ngIf"],["additionalSelect","Currency.E",3,"ngModel","definitionIds","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded"],[3,"link","itemId"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],[1,"mx-2","t-vertical-align-middle"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","compress"],["type","button",1,"btn","btn-sm","btn-light","text-primary","t-white-button","t-toolbar-button",3,"click"],["icon","times"],[1,"btn","btn-sm","t-toolbar-button","btn-primary",3,"click"],["icon","save"],[1,"btn","btn-sm","t-toolbar-button","btn-light","text-primary","t-white-button",3,"click"],["class","d-inline-block","container","body",3,"placement","ngbTooltip",4,"ngIf"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","class","btn btn-light btn-sm text-primary t-white-button t-toolbar-button dropdown-toggle","ngbDropdownToggle","",4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["container","body",3,"placement","ngbTooltip",4,"ngIf"],["icon","chart-line"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["container","body",3,"placement","ngbTooltip"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"disabled","click"],[1,"d-inline"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"t-vertical-align-middle","small","mx-2"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],[1,"table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-sm","border-bottom","bg-white","t-master-table","text-nowrap","table-striped","table-hover"],["colSpan","4",1,"w-50"],[1,"d-flex","justify-content-between","align-items-baseline"],[4,"ngIf","ngIfElse"],["reconciledheader1",""],["class","btn btn-light text-primary t-white-button btn-sm py-0 px-1 mx-2 align-baseline",3,"title","click",4,"ngIf"],["type","file","accept",".csv,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",1,"d-none",3,"change"],["fileInput",""],[1,"text-right"],["reconciledheader2",""],[2,"width","12.5%"],[2,"width","25%"],[1,"text-right",2,"width","12.5%"],[1,"t-slimfit"],[3,"t-highlight-a","t-pale-a","t-highlight-b","t-pale-b","t-yellow-a","t-yellow-b",4,"cdkVirtualFor","cdkVirtualForOf"],["createMenu",""],["class","w-100 p-2 d-flex justify-content-center mt-3",4,"ngIf"],["class","w-100 p-3 px-4",4,"ngIf"],["class","w-100 pl-3 pr-3 mt-3",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],[1,"py-5","t-transparent"],[1,"t-vertical-align-middle","font-weight-normal","mx-2"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","mx-2","align-baseline",3,"title","click"],["icon","download","tabindex","-1"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"disabled","title","click"],["icon","upload","tabindex","-1"],[1,"t-slimfit",2,"min-width","33px"],[1,"t-slimfit",2,"min-width","42px"],[1,"t-slimfit","px-0"],[1,"t-a"],[1,"text-right","t-a"],["reconciledcolumns",""],["viewExEntry",""],[1,"t-b"],[1,"text-center","t-a"],["class","mx-2","container","body","triggers","mouseenter:mouseleave",3,"ngbPopover","placement",4,"ngIf"],[1,"px-0","t-a"],["class","mx-2","popoverClass","t-error-popover","container","body","triggers","mouseenter:mouseleave",3,"ngbPopover","placement",4,"ngIf"],["entryErrorsPopover",""],[1,"px-0","t-b"],["exEntryErrorsPopover",""],[1,"text-center","t-b"],["reconciledLaterInfo",""],["class","btn btn-light text-primary t-white-button btn-sm py-0 px-1 align-baseline",3,"title","click",4,"ngIf"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"title","click"],["icon","clone","tabindex","-1"],["class","custom-control custom-checkbox t-labelless-checkbox d-inline",4,"ngIf","ngIfElse"],["cancelButton",""],[1,"custom-control","custom-checkbox","t-labelless-checkbox","d-inline"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[1,"btn","btn-light","text-black-50","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"title","click","mouseenter","mouseleave"],[1,"small"],["icon","times","tabindex","-1"],["container","body","triggers","mouseenter:mouseleave",1,"mx-2",3,"ngbPopover","placement"],["icon","exclamation-circle",1,"text-muted"],["popoverClass","t-error-popover","container","body","triggers","mouseenter:mouseleave",1,"mx-2",3,"ngbPopover","placement"],["icon","exclamation-triangle",1,"text-danger"],[2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"],["excancelbutton",""],["icon","exclamation-circle"],[1,"bg-white","border-right","border-left"],[1,"t-form-group",3,"serverErrors"],[3,"disabled","ngModel","ngModelOptions","ngModelChange"],[1,"text-right","t-b"],["textAlignment","right",3,"disabled","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"t-b",3,"ngbPopover","placement","dblclick"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["postingDateErrors",""],["exRefErrors",""],["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"text-right","t-b",3,"ngbPopover","placement","dblclick"],["monetaryValueErrors",""],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["ngbDropdown","",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu","",2,"min-width","5rem"],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf","ngIfElse"],["cancelTemplate",""],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf"],["ngbDropdownItem","",1,"t-transparent-background",3,"click"],[4,"ngTemplateOutlet"],[3,"colSpan"],[3,"colSpan","dblclick"],[1,"w-100","p-2","d-flex","justify-content-center","mt-3"],[3,"scale"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"w-100","pl-3","pr-3","mt-3"],[1,"w-100","mt-3"],[1,"text-center","w-100"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",2,"white-space","pre"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","check",1,"text-success"],[1,"modal-body"],[1,"btn","btn-danger",3,"click"],["icon","check"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],[1,"row","pt-0","pb-3"],[1,"t-wide-form-group",3,"label"],[1,"table-responsive","mt-2"],[1,"table","table-sm","border-bottom","text-nowrap","table-striped"],["icon","minus",1,"t-vertical-align-middle"],["icon","plus",1,"t-vertical-align-middle"],["icon","equals",1,"t-vertical-align-middle"],[1,"row","pt-0","pb-3","px-2"],[3,"ngModel","choices","hideEmptyOption","ngModelChange"],["ngbAutofocus","",1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"]],template:function(e,t){if(1&e&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"div",2),c.Sb(3,"ul",3),c.Sb(4,"li",4),c.Lc(5),c.hc(6,"translate"),c.Jc(7,q8,2,0,"span",5),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",6),c.Sb(9,"div",7),c.Sb(10,"div",8),c.Sb(11,"t-form-group",9),c.hc(12,"translate"),c.Sb(13,"t-selector",10),c.cc("ngModelChange",function(e){return t.view=e}),c.Rb(),c.Rb(),c.Sb(14,"t-form-group",9),c.hc(15,"translate"),c.Sb(16,"t-accounts-picker",11),c.cc("ngModelChange",function(e){return t.accountId=e})("entityLoaded",function(){return t.onParameterLoaded()}),c.Rb(),c.Rb(),c.Jc(17,U8,3,3,"t-form-group",12),c.Jc(18,B8,4,7,"ng-container",13),c.Jc(19,H8,16,39,"ng-container",13),c.Rb(),c.Rb(),c.Rb(),c.Sb(20,"div",14),c.Jc(21,W8,17,22,"div",13),c.Jc(22,G8,9,6,"div",13),c.Jc(23,t9,7,5,"div",13),c.Sb(24,"div"),c.Jc(25,i9,5,5,"div",15),c.Sb(26,"button",16),c.cc("click",function(){return t.onToggleCollapseParameters()}),c.hc(27,"translate"),c.Nb(28,"fa-icon",17),c.Sb(29,"span",18),c.Lc(30),c.hc(31,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(32,"div",19),c.Jc(33,oee,61,41,"div",20),c.Jc(34,ree,2,1,"ng-template",null,21,c.Kc),c.Rb(),c.Rb(),c.Jc(36,see,15,7,"ng-template",null,22,c.Kc),c.Jc(38,lee,15,7,"ng-template",null,23,c.Kc),c.Jc(40,aee,19,12,"ng-template",null,24,c.Kc),c.Jc(42,uee,61,46,"ng-template",null,25,c.Kc),c.Jc(44,dee,24,22,"ng-template",null,26,c.Kc)),2&e){const e=c.Ac(35);c.zb(5),c.Nc(" ",c.ic(6,27,"BankReconciliation")," "),c.zb(2),c.nc("ngIf",t.isDirty),c.zb(1),c.Eb("d-none",t.collapseParameters),c.zb(3),c.nc("label",c.ic(12,29,"View")),c.zb(2),c.nc("ngModel",t.view)("choices",t.viewChoices)("ngModelOptions",c.qc(37,K8))("disabled",t.isDirty)("hideEmptyOption",!0),c.zb(1),c.nc("label",c.ic(15,31,"Entry_Account")),c.zb(2),c.nc("ngModel",t.accountId)("ensureAdditionalSelect",!0)("showCreate",!1)("disabled",t.isDirty),c.zb(1),c.nc("ngIf",t.showRelationParameter),c.zb(1),c.nc("ngIf",t.isUnreconciled),c.zb(1),c.nc("ngIf",t.isReconciled),c.zb(2),c.nc("ngIf",t.showCheckedEntriesToolbar),c.zb(1),c.nc("ngIf",t.showEditToolbar),c.zb(1),c.nc("ngIf",t.showViewToolbar),c.zb(2),c.nc("ngIf",!t.isDirty),c.zb(1),c.oc("title",c.ic(27,33,t.collapseParameters?"Expand":"Collapse")),c.zb(2),c.nc("icon",t.collapseParameters?"angle-down":"angle-up"),c.zb(2),c.Nc("\xa0\xa0",c.ic(31,35,t.collapseParameters?"Expand":"Collapse"),""),c.zb(3),c.nc("ngIf",t.initialized)("ngIfElse",e)}},directives:[C.l,he.a,pn.a,te.i,te.j,eC,ee.a,xb,ss,Vu,pe.a,vn,G.E,G.l,G.p,G.r,G.o,cc.d,cc.a,cc.c,te.a,G.C,C.k,ZA,C.p,fe.a,Se.a],pipes:[K.c,Ab,C.d,kb],encapsulation:2}),e})();function gee(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",9),c.Sb(4,"span",8),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.c[e].ToEmail),c.zb(3),c.Mc(n.c[e].Subject)}}function fee(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Email_Subject"),"\n")}function mee(e,t){if(1&e&&(c.Sb(0,"span",10),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.Mc(n.c[e].Subject)}}function hee(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Success")," ")}function pee(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Pending")," ")}function See(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Error")," ")}const vee=function(){return[]},Iee=function(e){return{template:e,expression:"State gt 2"}},Mee=function(e){return{template:e,expression:"State ge 0 and State le 2"}},Ree=function(e){return{template:e,expression:"State lt 0"}},yee=function(e,t,n){return[e,t,n]},Dee=function(e){return{State:e}};let wee=(()=>{class e extends xt.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.EmailForQuery}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-emails-master"]],features:[c.wb],decls:14,vars:27,consts:[["collection","EmailForQuery","selectDefault","ToEmail,State,StateSince","selectForTiles","ToEmail,Subject",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["success",""],["pending",""],["error",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,gee,6,2,"ng-template",null,1,c.Kc),c.Jc(4,fee,2,3,"ng-template",null,2,c.Kc),c.Jc(6,mee,2,1,"ng-template",null,3,c.Kc),c.Jc(8,hee,2,3,"ng-template",null,4,c.Kc),c.Jc(10,pee,2,3,"ng-template",null,5,c.Kc),c.Jc(12,See,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"Emails"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(14,vee))("filterDefinition",c.rc(25,Dee,c.tc(21,yee,c.rc(15,Iee,o),c.rc(17,Mee,r),c.rc(19,Ree,s))))}},directives:[Tt.a],pipes:[K.c],encapsulation:2}),e})();var Eee=n("d9Te");const Cee=["iframe"];function xee(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.model;c.zb(1),c.Mc(null==e?null:e.Subject)}}function Tee(e,t){if(1&e&&(c.Sb(0,"t-form-group",3),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"datetimeFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"Email_DeliveredAt")),c.zb(3),c.Mc(c.ic(4,4,null==e?null:e.DeliveredAt))}}function zee(e,t){if(1&e&&(c.Sb(0,"t-form-group",3),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"datetimeFormat"),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"Email_OpenedAt")),c.zb(3),c.Mc(c.ic(4,4,null==e?null:e.OpenedAt))}}function Lee(e,t){if(1&e&&(c.Sb(0,"t-form-group",3),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"Email_ErrorMessage")),c.zb(3),c.Mc(null==e?null:e.ErrorMessage)}}function kee(e,t){1&e&&(c.Qb(0),c.Nb(1,"div",8),c.Sb(2,"div",9),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"div",10),c.Nb(6,"iframe",11,12),c.Rb(),c.Pb()),2&e&&(c.zb(3),c.Nc(" ",c.ic(4,1,"Email_Body")," "))}function Oee(e,t){if(1&e&&(c.Sb(0,"t-form-group",3),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb(),c.Sb(4,"t-form-group",3),c.hc(5,"translate"),c.Sb(6,"div"),c.Lc(7),c.Rb(),c.Rb(),c.Nb(8,"div",4),c.Sb(9,"t-form-group",3),c.Sb(10,"div",5),c.Lc(11),c.Rb(),c.Rb(),c.Sb(12,"t-form-group",3),c.hc(13,"translate"),c.Sb(14,"div"),c.Lc(15),c.hc(16,"datetimeFormat"),c.Rb(),c.Rb(),c.Jc(17,Tee,5,6,"t-form-group",6),c.Jc(18,zee,5,6,"t-form-group",6),c.Jc(19,Lee,4,4,"t-form-group",6),c.Jc(20,kee,8,3,"ng-container",7)),2&e){const e=t.model,n=c.gc();c.nc("label",c.ic(1,14,"Email_Subject")),c.zb(3),c.Mc(null==e?null:e.Subject),c.zb(1),c.nc("label",c.ic(5,16,"Email_ToEmail")),c.zb(3),c.Mc(null==e?null:e.ToEmail),c.zb(2),c.nc("label","State"),c.zb(1),c.Ic("background",n.stateColor(null==e?null:e.State)),c.zb(1),c.Nc("",n.stateDisplay(null==e?null:e.State)," "),c.zb(1),c.nc("label",c.ic(13,18,"StateSince")),c.zb(3),c.Mc(c.ic(16,20,null==e?null:e.StateSince)),c.zb(2),c.nc("ngIf",!!e&&e.State<=-4||e.State>=3),c.zb(1),c.nc("ngIf",!!e&&e.State<=-4||e.State>=4),c.zb(1),c.nc("ngIf",!!e&&e.State<0),c.zb(1),c.nc("ngIf",n.watch(null==e?null:e.Body))}}const Aee=function(){return[]};let Nee=(()=>{class e extends mn.a{constructor(e,t){super(),this.workspace=e,this.translate=t,this.expand=""}set iframe(e){this._iframe!==e&&(this._iframe&&this._iframe.nativeElement.contentWindow.location.replace(void 0),this._iframe=e,this._iframe&&this._iframe.nativeElement.contentWindow.location.replace(this._url))}get iframe(){return this._iframe}ngOnDestroy(){this.emailBodyCleanup(),super.ngOnDestroy()}emailBodyCleanup(){this._url&&(window.URL.revokeObjectURL(this._url),delete this._url),delete this._body,this.iframe&&this.iframe.nativeElement.contentWindow.location.replace(void 0)}get ws(){return this.workspace.currentTenant}stateDisplay(e){if(!this._stateDesc){const e=Object(Eee.a)(null,this.translate);this._stateDesc=e.properties.State}return this._stateDesc.format(e)}stateColor(e){if(!this._stateDesc){const e=Object(Eee.a)(null,this.translate);this._stateDesc=e.properties.State}return this._stateDesc.color(e)}watch(e){if(e){if(e!==this._body){this._body=e;const t=new Blob([`<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8">\n</head>\n<body style="margin: 0; padding: 1rem;">\n  <div style="display: flex; justify-content: center;">\n    ${e}\n  </div>\n</body>\n</html>`],{type:"text/html"});this._url=window.URL.createObjectURL(t)+"#toolbar=0&navpanes=0&scrollbar=0",this.iframe&&this.iframe.nativeElement.contentWindow.location.replace(this._url)}}else this.emailBodyCleanup();return!!e}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-emails-details"]],viewQuery:function(e,t){if(1&e&&c.Qc(Cee,1),2&e){let e;c.zc(e=c.dc())&&(t.iframe=e.first)}},features:[c.wb],decls:6,vars:14,consts:[["collection","EmailForQuery",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"t-form-group",3,"label"],[1,"w-100"],[1,"text-white","px-2"],["class","t-form-group",3,"label",4,"ngIf"],[4,"ngIf"],[1,"w-100","mt-2"],[1,"small","font-weight-bold","t-form-group"],[1,"w-100","mt-2","border-top",2,"min-height","500px"],["sandbox","",1,"p-0","border-0","w-100","h-100","d-block"],["iframe",""]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,xee,2,1,"ng-template",null,1,c.Kc),c.Jc(4,Oee,21,22,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5);c.nc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",c.ic(1,11,"Emails"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.qc(13,Aee))}},directives:[q.a,he.a,C.l],pipes:[K.c,Me],encapsulation:2}),e})();var _ee=n("klyd");function Jee(e,t){if(1&e&&(c.Sb(0,"div",3),c.Lc(1),c.Rb()),2&e){const e=t.model;c.zb(1),c.Mc(null==e?null:e.Message)}}function Pee(e,t){if(1&e&&(c.Sb(0,"t-form-group",4),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb()),2&e){const e=c.gc().model;c.nc("label",c.ic(1,2,"SmsMessage_ErrorMessage")),c.zb(3),c.Mc(null==e?null:e.ErrorMessage)}}function Fee(e,t){if(1&e&&(c.Sb(0,"t-form-group",4),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.Rb(),c.Rb(),c.Nb(4,"div",5),c.Sb(5,"t-form-group",4),c.Sb(6,"div",6),c.Lc(7),c.Rb(),c.Rb(),c.Sb(8,"t-form-group",4),c.hc(9,"translate"),c.Sb(10,"div"),c.Lc(11),c.hc(12,"datetimeFormat"),c.Rb(),c.Rb(),c.Jc(13,Pee,4,4,"t-form-group",7),c.Sb(14,"t-form-group",8),c.hc(15,"translate"),c.Sb(16,"span",9),c.Lc(17),c.Rb(),c.Rb()),2&e){const e=t.model,n=c.gc();c.nc("label",c.ic(1,11,"SmsMessage_ToPhoneNumber")),c.zb(3),c.Mc(null==e?null:e.ToPhoneNumber),c.zb(2),c.nc("label","State"),c.zb(1),c.Ic("background",n.stateColor(null==e?null:e.State)),c.zb(1),c.Nc("",n.stateDisplay(null==e?null:e.State)," "),c.zb(1),c.nc("label",c.ic(9,13,"StateSince")),c.zb(3),c.Mc(c.ic(12,15,null==e?null:e.StateSince)),c.zb(2),c.nc("ngIf",!!e&&e.State<0),c.zb(1),c.nc("label",c.ic(15,17,"SmsMessage_Message")),c.zb(3),c.Mc(null==e?null:e.Message)}}const Vee=function(){return[]};let qee=(()=>{class e extends mn.a{constructor(e,t){super(),this.workspace=e,this.translate=t,this.expand=""}get ws(){return this.workspace.currentTenant}stateDisplay(e){if(!this._stateDesc){const e=Object(_ee.a)(null,this.translate);this._stateDesc=e.properties.State}return this._stateDesc.format(e)}stateColor(e){if(!this._stateDesc){const e=Object(_ee.a)(null,this.translate);this._stateDesc=e.properties.State}return this._stateDesc.color(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-sms-messages-details"]],features:[c.wb],decls:6,vars:14,consts:[["collection","SmsMessageForQuery",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"text-truncate",2,"max-width","200px"],[1,"t-form-group",3,"label"],[1,"w-100"],[1,"text-white","px-2"],["class","t-form-group",3,"label",4,"ngIf"],[1,"t-wide-form-group",3,"label"],[2,"white-space","pre"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Jee,2,1,"ng-template",null,1,c.Kc),c.Jc(4,Fee,18,19,"ng-template",null,2,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5);c.nc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",c.ic(1,11,"SmsMessages"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.qc(13,Vee))}},directives:[q.a,he.a,C.l],pipes:[K.c,Me],encapsulation:2}),e})();function jee(e,t){if(1&e&&(c.Sb(0,"div",7),c.Sb(1,"span",8),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"div",9),c.Sb(4,"span",8),c.Lc(5),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.c[e].ToPhoneNumber),c.zb(3),c.Mc(n.c[e].Message)}}function $ee(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"SmsMessage_Message"),"\n")}function Uee(e,t){if(1&e&&(c.Sb(0,"div",10),c.Lc(1),c.Rb()),2&e){const e=t.id,n=c.gc();c.nc("title",n.c[e].Message),c.zb(1),c.Mc(n.c[e].Message)}}function Kee(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Success")," ")}function Bee(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Pending")," ")}function Hee(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"Error")," ")}const Qee=function(){return[]},Wee=function(e){return{template:e,expression:"State eq 4"}},Gee=function(e){return{template:e,expression:"State ge 0 and State le 3"}},Yee=function(e){return{template:e,expression:"State lt 0"}},Xee=function(e,t,n){return[e,t,n]},Zee=function(e){return{State:e}};let ete=(()=>{class e extends xt.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.SmsMessageForQuery}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-sms-messages-master"]],features:[c.wb],decls:14,vars:27,consts:[["collection","SmsMessageForQuery","selectDefault","ToPhoneNumber,State,StateSince","selectForTiles","ToPhoneNumber,Message",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["success",""],["pending",""],["error",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate",2,"max-width","400px",3,"title"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,jee,6,2,"ng-template",null,1,c.Kc),c.Jc(4,$ee,2,3,"ng-template",null,2,c.Kc),c.Jc(6,Uee,2,2,"ng-template",null,3,c.Kc),c.Jc(8,Kee,2,3,"ng-template",null,4,c.Kc),c.Jc(10,Bee,2,3,"ng-template",null,5,c.Kc),c.Jc(12,Hee,2,3,"ng-template",null,6,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11),s=c.Ac(13);c.nc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"SmsMessages"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(14,Qee))("filterDefinition",c.rc(25,Zee,c.tc(21,Xee,c.rc(15,Wee,o),c.rc(17,Gee,r),c.rc(19,Yee,s))))}},directives:[Tt.a],pipes:[K.c],encapsulation:2}),e})();var tte=n("wHSu");function nte(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"dateFormat"),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(c.ic(2,1,null==e?null:e.ArchiveDate))}}const ite=function(){return{updateOn:"blur"}};function cte(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-date-picker",11),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ArchiveDate=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.ArchiveDate)("ngModelOptions",c.qc(2,ite))}}function ote(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc(null==e?null:e.FirstDayOfPeriod)}}function rte(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-decimal-editor",12),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.FirstDayOfPeriod=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.FirstDayOfPeriod)("ngModelOptions",c.qc(5,ite))("required",!0)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function ste(e,t){if(1&e&&(c.Sb(0,"t-view-link",13),c.Lc(1),c.Rb()),2&e){const e=c.gc().model,t=c.gc();c.nc("itemId",null==e?null:e.FunctionalCurrencyId),c.zb(1),c.Nc(" ",t.ws.getMultilingualValue("Currency",null==e?null:e.FunctionalCurrencyId,"Name")," ")}}function lte(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-currencies-picker",14),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.FunctionalCurrencyId=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.FunctionalCurrencyId)}}function ate(e,t){if(1&e&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&e){const e=c.gc().model;c.zb(1),c.Mc((null==e?null:e.TaxIdentificationNumber)||"-")}}function ute(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-text-editor",15),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.TaxIdentificationNumber=t}),c.Rb()}if(2&e){const e=c.gc().model;c.nc("ngModel",e.TaxIdentificationNumber)("ngModelOptions",c.qc(2,ite))}}function dte(e,t){if(1&e&&(c.Sb(0,"div",2),c.Sb(1,"div",3),c.Sb(2,"t-form-group-settings",4),c.hc(3,"translate"),c.hc(4,"translate"),c.Jc(5,nte,3,3,"div",5),c.Jc(6,cte,1,3,"t-date-picker",6),c.Rb(),c.Sb(7,"t-form-group-settings",4),c.hc(8,"translate"),c.hc(9,"translate"),c.Jc(10,ote,2,1,"div",5),c.Jc(11,rte,1,6,"t-decimal-editor",7),c.Rb(),c.Sb(12,"t-form-group-settings",4),c.hc(13,"translate"),c.hc(14,"translate"),c.Jc(15,ste,2,2,"t-view-link",8),c.Jc(16,lte,1,1,"t-currencies-picker",9),c.Rb(),c.Sb(17,"t-form-group-settings",4),c.hc(18,"translate"),c.hc(19,"translate"),c.Jc(20,ate,2,1,"div",5),c.Jc(21,ute,1,3,"t-text-editor",10),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.model,n=t.isEdit;c.zb(2),c.nc("label",c.ic(3,20,"Settings_ArchiveDate"))("description",c.ic(4,22,"Settings_ArchiveDateDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.ArchiveDate),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(8,24,"Settings_FirstDayOfPeriod"))("description",c.ic(9,26,"Settings_FirstDayOfPeriodDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.FirstDayOfPeriod),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(13,28,"Settings_FunctionalCurrency"))("description",c.ic(14,30,"Settings_FunctionalCurrencyDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.FunctionalCurrencyId),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(18,32,"Settings_TIN"))("description",c.ic(19,34,"Settings_TINDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.TaxIdentificationNumber),c.zb(3),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}let bte=(()=>{class e extends Hp{constructor(e){super(),this.workspace=e}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-financial-settings"]],features:[c.wb],decls:4,vars:4,consts:[["endpoint","financial-settings","view","financial-settings","expand","FunctionalCurrency",3,"title","template"],["template",""],[1,"m-0","pt-3","pt-sm-4","pb-3","pb-sm-5","pl-0","pl-sm-3","pr-0","pr-sm-3"],[1,"row","col-12","t-settings-section"],[1,"t-form-group",3,"label","description","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],["link","../currencies",3,"itemId",4,"ngIf"],["required","",3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["link","../currencies",3,"itemId"],["required","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-settings",0),c.hc(1,"translate"),c.Jc(2,dte,22,36,"ng-template",null,1,c.Kc)),2&e){const e=c.Ac(3);c.nc("title",c.ic(1,2,"FinancialSettings"))("template",e)}},directives:[Bp,eS,C.l,Vu,te.m,te.i,te.j,vn,ss,zu,pe.a],pipes:[K.c,kb],encapsulation:2}),e})();const gte=["errorModal"];function fte(e,t){if(1&e&&(c.Sb(0,"div",20),c.Sb(1,"ul",21),c.Sb(2,"li",22),c.Lc(3),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc(" ",e.title," ")}}function mte(e,t){1&e&&c.Nb(0,"t-spinner",23)}function hte(e,t){1&e&&(c.Sb(0,"div",24),c.Nb(1,"fa-icon",25),c.Lc(2),c.hc(3,"translate"),c.Rb()),2&e&&(c.zb(2),c.Nc(" \xa0 ",c.ic(3,1,"FillRequiredFields")," "))}function pte(e,t){if(1&e&&(c.Sb(0,"div",26),c.Sb(1,"h5",27),c.Nb(2,"fa-icon",28),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"button",29),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(6,"span",30),c.Lc(7,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(8,"div",31),c.Lc(9),c.Rb(),c.Sb(10,"div",32),c.Sb(11,"button",33),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(12,"fa-icon",34),c.Lc(13),c.hc(14,"translate"),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc("\xa0\xa0",c.ic(4,3,"Error")," "),c.zb(6),c.Nc(" ",e.errorMessage," "),c.zb(4),c.Nc(" \xa0",c.ic(14,5,"Dismiss")," ")}}let Ste=(()=>{class e{constructor(e,t,n,i,c){this.workspace=e,this.translate=t,this.router=n,this.route=i,this.modalService=c,this.refresh$=new E.a,this.export$=new E.a,this.exportStatus=L.g.loaded}ngOnInit(){this._subscriptions=new O.a,this._subscriptions.add(this.route.paramMap.subscribe(e=>{const t=+e.get("definitionId");t&&this.workspace.currentTenant.definitions.Reports[t]||this.router.navigate(["page-not-found"],{relativeTo:this.route.parent,replaceUrl:!0}),this.definitionId=t,this.filter=e.get("filter"),this.cacheBuster=e.get("cache_buster")}))}ngOnDestroy(){this._subscriptions.unsubscribe()}get originalDefinition(){return this.workspace.currentTenant.definitions.Reports[this.definitionId]}urlStateChanged(){const e={},t=this.state;this.cacheBuster&&(e.cache_buster=this.cacheBuster),this.filter&&(e.filter=this.filter),t.orderbyKey&&(e.$orderby=`${t.orderbyKey} ${t.orderbyDir}`),this.router.navigate([".",e],{relativeTo:this.route,replaceUrl:!0})}get modifiedDefinition(){const e=this.originalDefinition,t=this.state;if(this.filter!==t.drilldownFilter||this.cacheBuster!==t.drilldownCacheBuster||e!==t.drilldownOriginalDefinition){t.drilldownFilter=this.filter,t.drilldownCacheBuster=this.cacheBuster,t.drilldownOriginalDefinition=e;const n=JSON.parse(JSON.stringify(e));n.Type="Details",n.Filter=this.filter,t.drilldownModifiedDefinition=n}return this.state.drilldownModifiedDefinition}get stateKey(){return`${this.definitionId}/drilldown`}get state(){const e=this.stateKey,t=this.workspace.currentTenant.reportState;return t[e]||(t[e]=new L.j),t[e]}get flip(){return this.workspace.ws.isRtl?"horizontal":null}get title(){return`${this.workspace.currentTenant.getMultilingualValueImmediate(this.originalDefinition,"Title")} - ${this.translate.instant("Drilldown")}`}onExport(){let e=this.title;e&&(e+=".csv"),this.export$.next(e)}get showExportSpinner(){return this.exportStatus===L.g.loading}get canExport(){return!0}onExportStarting(){this.exportStatus=L.g.loading}onExportSuccess(){this.exportStatus=L.g.loaded}onExportError(e){this.exportStatus=L.g.error,this.errorMessage=e,this.modalService.open(this.errorModal)}get disableRefresh(){return this.badDefinition}onRefresh(){this.refresh$.next()}get skip(){return this.state.skip}get from(){return Math.min(this.state.skip+1,this.total)}get to(){const e=this.state;return Math.min(e.skip+is.DEFAULT_PAGE_SIZE,e.total)}get total(){return this.state.total}get totalDisplay(){const e=this.total;return e>=L.d?Object(C.w)(L.d-1,"en-GB")+"+":Object(C.w)(e,"en-GB")}onPreviousPage(){const e=this.state;e.skip=Math.max(e.skip-is.DEFAULT_PAGE_SIZE,0),this.refresh$.next()}get canPreviousPage(){return this.state.skip>0}onNextPage(){const e=this.state;e.skip=e.skip+is.DEFAULT_PAGE_SIZE,this.refresh$.next()}get canNextPage(){return this.to<this.total}get refresh(){return this.refresh$}get export(){return this.export$}onOrderByChange(){this.urlStateChanged()}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d),c.Mb(i.e),c.Mb(i.a),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-drilldown"]],viewQuery:function(e,t){if(1&e&&c.Qc(gte,3),2&e){let e;c.zc(e=c.dc())&&(t.errorModal=e.first)}},decls:39,vars:31,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","t-vertical-align-middle mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"d-inline"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],[1,"row","t-rest-of-screen"],["mode","screen",1,"h-100","w-100",3,"definition","refresh","export","state","exportStarting","exportSuccess","exportError","orderbyChange"],["fillRequiredFields",""],["errorModal",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"t-vertical-align-middle","mx-1"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Jc(2,fte,4,1,"div",2),c.Sb(3,"div",3),c.Sb(4,"div"),c.Sb(5,"button",4),c.cc("click",function(){return t.onExport()}),c.Nb(6,"fa-icon",5),c.Sb(7,"span",6),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Rb(),c.Jc(10,mte,1,0,"t-spinner",7),c.Rb(),c.Sb(11,"div"),c.Sb(12,"button",8),c.cc("click",function(){return t.onRefresh()}),c.hc(13,"translate"),c.Nb(14,"fa-icon",9),c.Rb(),c.Sb(15,"div",10),c.Sb(16,"div",11),c.Sb(17,"span",12),c.Sb(18,"span"),c.Lc(19),c.hc(20,"number"),c.Rb(),c.Lc(21," - "),c.Sb(22,"span"),c.Lc(23),c.hc(24,"number"),c.Rb(),c.Rb(),c.Sb(25,"span",12),c.Lc(26),c.Rb(),c.Rb(),c.Sb(27,"button",13),c.cc("click",function(){return t.onPreviousPage()}),c.hc(28,"translate"),c.Nb(29,"fa-icon",14),c.Rb(),c.Sb(30,"button",13),c.cc("click",function(){return t.onNextPage()}),c.hc(31,"translate"),c.Nb(32,"fa-icon",15),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(33,"div",16),c.Sb(34,"t-report-results",17),c.cc("exportStarting",function(){return t.onExportStarting()})("exportSuccess",function(){return t.onExportSuccess()})("exportError",function(e){return t.onExportError(e)})("orderbyChange",function(){return t.onOrderByChange()}),c.Rb(),c.Jc(35,hte,4,3,"ng-template",null,18,c.Kc),c.Rb(),c.Rb(),c.Jc(37,pte,15,7,"ng-template",null,19,c.Kc)),2&e&&(c.zb(2),c.nc("ngIf",!!t.title),c.zb(3),c.nc("disabled",!t.canExport),c.zb(3),c.Nc("\xa0\xa0",c.ic(9,19,"Export"),""),c.zb(2),c.nc("ngIf",t.showExportSpinner),c.zb(2),c.oc("title",c.ic(13,21,"Refresh")),c.nc("disabled",t.disableRefresh),c.zb(7),c.Mc(c.ic(20,23,t.from)),c.zb(4),c.Mc(c.ic(24,25,t.to)),c.zb(3),c.Nc(" / ",t.totalDisplay,""),c.zb(1),c.oc("title",c.ic(28,27,"Previous")),c.nc("disabled",!t.canPreviousPage),c.zb(2),c.nc("flip",t.flip),c.zb(1),c.oc("title",c.ic(31,29,"Next")),c.nc("disabled",!t.canNextPage),c.zb(2),c.nc("flip",t.flip),c.zb(2),c.nc("definition",t.modifiedDefinition)("refresh",t.refresh)("export",t.export)("state",t.state))},directives:[C.l,ee.a,is,fe.a],pipes:[K.c,C.d],encapsulation:2}),e})();function vte(e,t){if(1&e&&(c.Sb(0,"div",6),c.Sb(1,"span",7),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb(),c.Sb(4,"div",8),c.Sb(5,"span",7),c.Lc(6),c.Rb(),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(2),c.Mc(n.ws.getMultilingualValue("DashboardDefinition",e,"Title")||c.ic(3,2,"Untitled")),c.zb(4),c.Mc(n.ws.getMultilingualValue("DashboardDefinition",e,"Code"))}}function Ite(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"DashboardDefinition"),"\n")}function Mte(e,t){if(1&e&&(c.Sb(0,"span",9),c.Nb(1,"t-auto-cell",10),c.Rb()),2&e){const e=t.id,n=c.gc();c.zb(1),c.nc("entity",n.c[e])}}function Rte(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"VisibleInMainMenu")," ")}function yte(e,t){1&e&&(c.Lc(0),c.hc(1,"translate")),2&e&&c.Nc(" ",c.ic(1,1,"NotVisibleInMainMenu")," ")}const Dte=function(){return[]},wte=function(e){return{template:e,expression:"ShowInMainMenu eq true"}},Ete=function(e){return{template:e,expression:"ShowInMainMenu eq false"}},Cte=function(e,t){return[e,t]},xte=function(e){return{ShowInMainMenu:e}};let Tte=(()=>{class e extends xt.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.DashboardDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-dashboard-definitions-master"]],features:[c.wb],decls:12,vars:22,consts:[["collection","DashboardDefinition","selectDefault","Code,ShowInMainMenu","selectForTiles","Title,Title2,Title3,Code","theme","dark",3,"mode","showCreateButton","filterDefault","masterCrumb","additionalSelect","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["visibleInMainMenu",""],["notVisibleInMainMenu",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","DashboardDefinition",3,"entity"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,vte,7,4,"ng-template",null,1,c.Kc),c.Jc(4,Ite,2,3,"ng-template",null,2,c.Kc),c.Jc(6,Mte,2,1,"ng-template",null,3,c.Kc),c.Jc(8,Rte,2,3,"ng-template",null,4,c.Kc),c.Jc(10,yte,2,3,"ng-template",null,5,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5),i=c.Ac(7),o=c.Ac(9),r=c.Ac(11);c.nc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("masterCrumb",c.ic(1,10,"DashboardDefinitions"))("additionalSelect",t.additionalSelect)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.qc(12,Dte))("filterDefinition",c.rc(20,xte,c.sc(17,Cte,c.rc(13,wte,o),c.rc(15,Ete,r))))}},directives:[Tt.a,me.a],pipes:[K.c],encapsulation:2}),e})();const zte=(e,t,n,i,c,o,r,s)=>e+n>c&&e<c+r&&t+i>o&&t<o+s?t+i-o:0;function Lte(e,t){kte(t);const n=[e];for(;n.length>0;){const e=n.shift();for(const i of t){if(i===e)continue;const t=zte(e.OffsetX,e.OffsetY+(e.changeY||0),e.Width,e.Height,i.OffsetX,i.OffsetY+(i.changeY||0),i.Width,i.Height);t>0&&(i.changeY=(i.changeY||0)+t,n.push(i))}}}function kte(e){for(const t of e)delete t.changeY}const Ote=["dashboard"];function Ate(e,t){if(1&e&&(c.Sb(0,"div",14),c.Sb(1,"ul",15),c.Sb(2,"li",16),c.Lc(3),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.gc();c.zb(3),c.Nc(" ",e.title," ")}}function Nte(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",21),c.cc("click",function(){return c.Dc(e),c.gc(2).onEdit()}),c.Lc(1),c.hc(2,"translate"),c.Rb()}2&e&&(c.zb(1),c.Nc(" ",c.ic(2,1,"EditDefinition")," "))}function _te(e,t){if(1&e&&(c.Sb(0,"div",17),c.Sb(1,"button",18),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"div",19),c.Jc(5,Nte,3,3,"button",20),c.Rb(),c.Rb()),2&e){const e=c.gc();c.nc("placement",e.actionsDropdownPlacement),c.zb(2),c.Nc(" ",c.ic(3,3,"Actions")," "),c.zb(3),c.nc("ngIf",e.showEditDefinition)}}function Jte(e,t){if(1&e&&(c.Sb(0,"div",28),c.Nb(1,"div",29),c.Rb()),2&e){const e=c.gc(3);c.Ic("left",e.placeholderLeft,"px")("right",e.placeholderRight,"px")("top",e.placeholderTop,"px")("width",e.placeholderWidth,"px")("height",e.placeholderHeight,"px")}}function Pte(e,t){1&e&&c.Ob(0)}function Fte(e,t){1&e&&c.Ob(0)}const Vte=function(e,t){return{widget:e,i:t}};function qte(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",32),c.cc("dblclick",function(t){c.Dc(e);const n=c.gc().index;return c.gc(3).onDoubleClickWidget(t,n)})("cdkDragStarted",function(t){c.Dc(e);const n=c.gc().$implicit;return c.gc(3).onDragStarted(t,n)})("cdkDragMoved",function(t){c.Dc(e);const n=c.gc().$implicit;return c.gc(3).onDragMoved(t,n)})("cdkDragEnded",function(t){c.Dc(e);const n=c.gc().index;return c.gc(3).onDragEnded(t,n)}),c.Sb(1,"div",33),c.Sb(2,"div",34),c.Jc(3,Pte,1,0,"ng-container",35),c.Rb(),c.Jc(4,Fte,1,0,"ng-container",35),c.Rb(),c.Rb()}if(2&e){const e=c.gc(),t=e.$implicit,n=e.index;c.gc(2);const i=c.Ac(6),o=c.Ac(8),r=c.gc();c.Ic("left",r.left(t),"px")("right",r.right(t),"px")("top",r.top(t),"px")("width",r.width(t),"px")("height",r.height(t),"px"),c.nc("cdkDragDisabled",!r.isEdit),c.zb(2),c.Ic("cursor",r.isEdit?"move":"auto"),c.zb(1),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(17,Vte,t,n)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(20,Vte,t,n))}}function jte(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",36),c.cc("cdkDragStarted",function(t){c.Dc(e);const n=c.gc().$implicit;return c.gc(3).onResizeStarted(t,n)})("cdkDragMoved",function(t){c.Dc(e);const n=c.gc().$implicit;return c.gc(3).onResizeMoved(t,n)})("cdkDragEnded",function(t){c.Dc(e);const n=c.gc(),i=n.$implicit,o=n.index;return c.gc(3).onResizeEnded(t,i,o)}),c.Nb(1,"div",37),c.Rb()}if(2&e){const e=c.gc().$implicit,t=c.gc(3);c.Ic("width",t.resizeHandleSize,"px")("height",t.resizeHandleSize,"px")("left",t.leftResizeHandle(e),"px")("right",t.rightResizeHandle(e),"px")("top",t.topResizeHandle(e),"px")}}function $te(e,t){if(1&e&&(c.Qb(0),c.Jc(1,qte,5,23,"div",30),c.Jc(2,jte,2,10,"div",31),c.Pb()),2&e){const e=t.$implicit,n=c.gc(3);c.zb(1),c.nc("ngIf",n.renderWidget(e)),c.zb(1),c.nc("ngIf",n.isEdit)}}function Ute(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Jte,2,10,"div",26),c.Jc(2,$te,3,2,"ng-container",27),c.Pb()),2&e){const e=c.gc(2);c.zb(1),c.nc("ngIf",e.showPlaceholder),c.zb(1),c.nc("ngForOf",e.definition.Widgets)("ngForTrackBy",e.trackByReportId)}}function Kte(e,t){1&e&&c.Ob(0)}function Bte(e,t){1&e&&c.Ob(0)}function Hte(e,t){if(1&e&&(c.Sb(0,"div",39),c.Sb(1,"div",33),c.Sb(2,"div",40),c.Jc(3,Kte,1,0,"ng-container",35),c.Rb(),c.Jc(4,Bte,1,0,"ng-container",35),c.Rb(),c.Rb()),2&e){const e=c.gc(),t=e.$implicit,n=e.index;c.gc(2);const i=c.Ac(6),o=c.Ac(8),r=c.gc();c.Ic("height",r.height(t),"px"),c.zb(3),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(6,Vte,t,n)),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(9,Vte,t,n))}}function Qte(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Hte,5,12,"div",38),c.Pb()),2&e){const e=t.$implicit,n=c.gc(3);c.zb(1),c.nc("ngIf",n.renderWidget(e))}}function Wte(e,t){if(1&e&&c.Jc(0,Qte,2,1,"ng-container",27),2&e){const e=c.gc(2);c.nc("ngForOf",e.definition.Widgets)("ngForTrackBy",e.trackByReportId)}}function Gte(e,t){if(1&e&&(c.Sb(0,"div",57),c.Nb(1,"fa-icon",58),c.Rb()),2&e){c.gc();const e=c.Ac(37),t=c.gc(2);c.nc("ngbPopover",e)("container",null)("placement",t.popoverPlacement)}}function Yte(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",50),c.cc("click",function(){c.Dc(e);const t=c.gc().widget;return c.gc(2).onEditReportDefinition(t)}),c.Sb(1,"div",51),c.Nb(2,"fa-icon",59),c.Rb(),c.Sb(3,"div",52),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}2&e&&(c.zb(4),c.Nc(" ",c.ic(5,1,"EditDefinition")," "))}function Xte(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Nb(1,"hr"),c.Sb(2,"button",50),c.cc("click",function(){c.Dc(e);const t=c.gc().i;return c.gc(2).onEditWidget(t)}),c.Sb(3,"div",51),c.Nb(4,"fa-icon",60),c.Rb(),c.Sb(5,"div",52),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Sb(8,"button",50),c.cc("click",function(){c.Dc(e);const t=c.gc().i;return c.gc(2).onDeleteWidget(t)}),c.Sb(9,"div",51),c.Nb(10,"fa-icon",61),c.Rb(),c.Sb(11,"div",52),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Rb(),c.Pb()}2&e&&(c.zb(6),c.Nc(" ",c.ic(7,2,"Edit")," "),c.zb(6),c.Nc(" ",c.ic(13,4,"Delete")," "))}function Zte(e,t){if(1&e&&(c.Sb(0,"div",62),c.Sb(1,"p",63),c.Nb(2,"fa-icon",58),c.Lc(3),c.Rb(),c.Rb()),2&e){const e=c.gc().widget,t=c.gc(2);c.zb(3),c.Nc(" \xa0 ",t.errorMessage(e)," ")}}const ene=function(e){return{0:e}};function tne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",41),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Nb(3,"br"),c.Sb(4,"span",42),c.hc(5,"datetimeFormat"),c.Lc(6),c.hc(7,"translate"),c.hc(8,"datetimeFormat"),c.Rb(),c.Rb(),c.Sb(9,"div",43),c.Jc(10,Gte,2,3,"div",44),c.Rb(),c.Sb(11,"div",45),c.Sb(12,"button",46),c.Sb(13,"span",47),c.Nb(14,"fa-icon",48),c.Rb(),c.Rb(),c.Sb(15,"div",49),c.Sb(16,"button",50),c.cc("click",function(){c.Dc(e);const n=t.i;return c.gc(2).onRefreshWidget(n)}),c.Sb(17,"div",51),c.Nb(18,"fa-icon",9),c.Rb(),c.Sb(19,"div",52),c.Lc(20),c.hc(21,"translate"),c.Rb(),c.Rb(),c.Sb(22,"button",50),c.cc("click",function(){c.Dc(e);const n=t.widget;return c.gc(2).onExpandWidget(n)}),c.Sb(23,"div",51),c.Nb(24,"fa-icon",5),c.Rb(),c.Sb(25,"div",52),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Rb(),c.Sb(28,"button",50),c.cc("click",function(){c.Dc(e);const n=t.i;return c.gc(2).onExportWidget(n)}),c.Sb(29,"div",51),c.Nb(30,"fa-icon",53),c.Rb(),c.Sb(31,"div",52),c.Lc(32),c.hc(33,"translate"),c.Rb(),c.Rb(),c.Jc(34,Yte,6,3,"button",54),c.Jc(35,Xte,14,6,"ng-container",55),c.Rb(),c.Rb(),c.Jc(36,Zte,4,1,"ng-template",null,56,c.Kc)}if(2&e){const e=t.widget,n=c.gc(2);c.zb(2),c.Nc(" ",n.ws.getMultilingualValueImmediate(e,"Title")||n.ws.getMultilingualValueImmediate(n.reportDefinition(e),"Title")," "),c.zb(2),c.nc("title",c.kc(5,11,n.state(e).time,null,6)),c.zb(2),c.Mc(c.jc(7,15,"Refreshed0",c.rc(28,ene,c.kc(8,18,n.state(e).time,null,6)))),c.zb(4),c.nc("ngIf",n.showErrorIcon(e)),c.zb(1),c.nc("placement",n.popoverPlacement)("container",null),c.zb(9),c.Nc(" ",c.ic(21,22,"Refresh")," "),c.zb(6),c.Nc(" ",c.ic(27,24,"Expand")," "),c.zb(6),c.Nc(" ",c.ic(33,26,"Export")," "),c.zb(2),c.nc("ngIf",n.showEditReportDefinition),c.zb(1),c.nc("ngIf",n.isEdit)}}function nne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"t-report-results",64),c.cc("silentRefreshError",function(n){c.Dc(e);const i=t.widget,o=t.i;return c.gc(2).onSilentRefreshError(n,i,o)}),c.Rb()}if(2&e){const e=t.widget,n=t.i,i=c.gc(2);c.Eb("bg-light",i.isPivot(e)),c.nc("definition",i.reportDefinition(e))("view",i.reportView(e))("state",i.state(e))("refresh",i.refreshSubject(n))("export",i.exportSubject(n))("disableDrilldown",i.disableDrilldown)}}function ine(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",22),c.Jc(2,Ute,3,3,"ng-container",12),c.Jc(3,Wte,1,2,"ng-template",null,23,c.Kc),c.Jc(5,tne,38,30,"ng-template",null,24,c.Kc),c.Jc(7,nne,1,8,"ng-template",null,25,c.Kc),c.Rb(),c.Pb()),2&e){const e=c.Ac(4),t=c.gc();c.zb(1),c.Bb(t.isVerticalMode?"t-vertical-dashboard":"t-dashboard"),c.zb(1),c.nc("ngIf",!t.isVerticalMode)("ngIfElse",e)}}function cne(e,t){1&e&&(c.Sb(0,"div",65),c.Nb(1,"t-spinner",66),c.Rb()),2&e&&(c.zb(1),c.nc("scale",2))}let one=(()=>{class e{constructor(e,t,n,i,o,r,s){this.workspace=e,this.translate=t,this.appRef=n,this.router=i,this.route=o,this.modalService=r,this.zone=s,this.rendered=!1,this.mode="screen",this.disableDrilldown=!1,this.isEdit=!1,this.addWidget=new c.n,this.editWidget=new c.n,this.deleteWidget=new c.n,this.moveWidget=new c.n,this.resizeWidget=new c.n,this._refreshSubjects=[],this._autoRefreshSubscriptions=[],this._offlineRetrySubscriptions=[],this._exportSubjects=[],this.showPlaceholder=!1,this.resizeHandleSize=16,this.widgetPadding=5}ngOnInit(){const e=this.workspace;this._subscriptions=new O.a,this._subscriptions.add(this.route.paramMap.subscribe(t=>{if(this.isScreenMode){const n=+t.get("definitionId");n&&e.currentTenant.definitions.Dashboards[n]||this.router.navigate(["page-not-found"],{relativeTo:this.route.parent,replaceUrl:!0}),this.definitionId!==n&&(this.definitionId=n)}})),this._subscriptions.add(e.visibilityChanged$.subscribe(t=>{"visible"===e.visibility?this.startTimers():this.stopTimers()})),this.rendered=!1,this.definition.Widgets&&this.definition.Widgets.length<=4&&this.render()}ngAfterViewInit(){this.rendered||Object(cn.a)(1).subscribe(()=>this.render())}ngOnChanges(e){e.mode&&!e.mode.isFirstChange()&&this.resetTimers(),e.isEdit&&!e.isEdit.isFirstChange()&&this.resetTimers()}render(){this.rendered=!0}ngOnDestroy(){this.stopTimers(),this._subscriptions&&this._subscriptions.unsubscribe()}get isScreenMode(){return"screen"===this.mode}get isPreviewMode(){return"preview"===this.mode}get definition(){return this.isScreenMode?this.workspace.currentTenant.definitions.Dashboards[this.definitionId]:this.previewDefinition}get ws(){return this.workspace.currentTenant}get title(){return this.ws.getMultilingualValueImmediate(this.definition,"Title")}onFullScreen(){this.dashboard.nativeElement.requestFullscreen&&this.dashboard.nativeElement.requestFullscreen()}disableFullScreen(e){return e}onRefresh(){this._refreshSubjects&&(this._refreshSubjects.forEach(e=>e.next()),this.resetTimers())}get disableRefresh(){return!1}get showEditDefinition(){return this.isScreenMode&&this.ws.canDo("dashboard-definitions","Update",null)}get showActionsDropdown(){return this.showEditDefinition}onEdit(){const e=this.workspace;e.isEdit=!0,this.router.navigate(["../../dashboard-definitions",this.definitionId],{relativeTo:this.route}).then(t=>{t||delete e.isEdit}).catch(t=>delete e.isEdit)}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}renderWidget(e){return!!e&&!!e.ReportDefinitionId&&e.OffsetX>=0&&e.OffsetY>=0&&e.Width>0&&e.Height>0}horizontal(e){return 260*e.OffsetX}left(e){return this.workspace.ws.isRtl?null:this.horizontal(e)}right(e){return this.workspace.ws.isRtl?this.horizontal(e):null}top(e){return 180*(e.OffsetY+(e.changeY||0))}width(e){return 260*(e.Width+(e.changeW||0))}height(e){return 180*(e.Height+(e.changeH||0))}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}state(e){const t=e.ReportDefinitionId.toString(),n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new L.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}refreshSubject(e){const t=this.definition;return this._defForRefreshes!==t&&(this._defForRefreshes=t,this._refreshSubjects=t.Widgets.map(e=>new E.a),this.resetTimers()),this._refreshSubjects[e]}stopTimers(){this._autoRefreshSubscriptions.forEach(e=>e.unsubscribe()),this._autoRefreshSubscriptions=[],this._offlineRetrySubscriptions.forEach(e=>{e&&e.unsubscribe()}),this._offlineRetrySubscriptions=[]}startTimers(e){if("visible"===this.workspace.visibility&&!this.isEdit){e=e||this.definition;for(let t=0;t<e.Widgets.length;t++){const n=e.Widgets[t],i=this._refreshSubjects[t],c=60*(Object(V.n)(n.AutoRefreshPeriodInMinutes)?n.AutoRefreshPeriodInMinutes:e.AutoRefreshPeriodInMinutes||0)*1e3;if(c>0){const e=this.state(n).time;let t;if(e){const n=new Date(e);t=Math.min(Math.max(c-((new Date).getTime()-n.getTime()),0),c)}else t=c;const o=Math.floor(5e3*Math.random()),r=Object(cn.a)(t,c+o);this._autoRefreshSubscriptions.push(r.subscribe(e=>i.next(!0)))}}}}resetTimers(){this.stopTimers(),this.startTimers()}onSilentRefreshError(e,t,n){if(0===e.status||504===e.status){const e=this._refreshSubjects[n];if(e){const i=this._offlineRetrySubscriptions[n];i&&i.unsubscribe(),this._offlineRetrySubscriptions[n]=Object(cn.a)(3e4).subscribe(()=>{this.state(t).silentError&&e.next(!0)})}}}showErrorIcon(e){return this.state(e).silentError}errorMessage(e){return this.state(e).errorMessage}get popoverPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}onRefreshWidget(e){this.refreshSubject(e),this._refreshSubjects[e].next()}onExpandWidget(e){this.router.navigate(["../../report",e.ReportDefinitionId],{relativeTo:this.route})}onExportWidget(e){this.exportSubject(e),this._exportSubjects[e].next()}get showEditReportDefinition(){return this.workspace.currentTenant.canUpdate("report-definitions",void 0)}onEditReportDefinition(e){const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../report-definitions",e.ReportDefinitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)}exportSubject(e){const t=this.definition;return this._defForExports!==t&&(this._defForExports=t,this._exportSubjects=t.Widgets.map(e=>new E.a)),this._exportSubjects[e]}onDoubleClickSurface(e){if(this.isEdit&&!this.isVerticalMode){e.preventDefault(),e.stopPropagation();const t=this.dashboard.nativeElement,n=t.getBoundingClientRect(),i=Math.max(Math.floor((e.clientX+t.scrollLeft-n.left-5)/260),0),c=Math.max(Math.floor((e.clientY+t.scrollTop-n.top-5)/180),0);this.addWidget.emit({offsetX:i,offsetY:c})}}onDoubleClickWidget(e,t){this.isEdit&&!this.isVerticalMode&&(e.preventDefault(),e.stopPropagation(),this.onEditWidget(t))}onEditWidget(e){this.isEdit&&this.editWidget.emit({index:e})}onDeleteWidget(e){this.isEdit&&this.deleteWidget.emit({index:e})}onDragStarted(e,t){e.source.getRootElement().style.setProperty("z-index","10000"),this.showPlaceholder=!0,this._placeholderOffsetX=t.OffsetX,this._placeholderOffsetY=t.OffsetY,this._placeholderWidth=t.Width,this._placeholderHeight=t.Height}onDragMoved(e,t){if(this._placeholderOffsetX=Math.min(Math.max(t.OffsetX+Math.round((this.workspace.ws.isRtl?-1:1)*e.distance.x/260),0),1e3),this._placeholderOffsetY=Math.min(Math.max(t.OffsetY+Math.round(e.distance.y/180),0),1e3),this._placeholderOffsetX===t.OffsetX&&this._placeholderOffsetY===t.OffsetY)kte(this.definition.Widgets);else{const e=Object.assign({},t);e.OffsetX=this._placeholderOffsetX,e.OffsetY=this._placeholderOffsetY,Lte(e,this.definition.Widgets.filter(e=>e!==t))}}onDragEnded(e,t){e.source.reset(),e.source.getRootElement().style.removeProperty("z-index"),this.showPlaceholder=!1,this.moveWidget.emit({index:t,offsetX:this._placeholderOffsetX,offsetY:this._placeholderOffsetY})}get placeholderLeft(){return this.workspace.ws.isRtl?null:260*this._placeholderOffsetX}get placeholderRight(){return this.workspace.ws.isRtl?260*this._placeholderOffsetX:null}get placeholderTop(){return 180*this._placeholderOffsetY}get placeholderWidth(){return 260*this._placeholderWidth}get placeholderHeight(){return 180*this._placeholderHeight}trackByReportId(e,t){return t.ReportDefinitionId||t}topResizeHandle(e){return this.top(e)+180*e.Height-this.resizeHandleSize-this.widgetPadding}horizontalResizeHandle(e){return this.horizontal(e)+260*e.Width-this.resizeHandleSize-this.widgetPadding}leftResizeHandle(e){return this.workspace.ws.isRtl?0:this.horizontalResizeHandle(e)}rightResizeHandle(e){return this.workspace.ws.isRtl?this.horizontalResizeHandle(e):0}onResizeStarted(e,t){e.source.getRootElement().style.setProperty("z-index","10000"),this.showPlaceholder=!0,this._placeholderOffsetX=t.OffsetX,this._placeholderOffsetY=t.OffsetY,this._placeholderWidth=t.Width,this._placeholderHeight=t.Height}onResizeMoved(e,t){if(t.changeW=Math.max((this.workspace.ws.isRtl?-1:1)*e.distance.x/260,1-t.Width-.25),t.changeH=Math.max(e.distance.y/180,1-t.Height-.25),this._placeholderWidth=Math.min(t.Width+Math.round(.5+t.changeW-10/260),16),this._placeholderHeight=Math.min(t.Height+Math.round(.5+t.changeH-10/180),16),this._placeholderWidth===t.Width&&this._placeholderHeight===t.Height)kte(this.definition.Widgets);else{const e=Object.assign({},t);e.Width=this._placeholderWidth,e.Height=this._placeholderHeight,Lte(e,this.definition.Widgets.filter(e=>e!==t))}}onResizeEnded(e,t,n){e.source.reset(),e.source.getRootElement().style.removeProperty("z-index"),delete t.changeH,delete t.changeW,this.showPlaceholder=!1,this.resizeWidget.emit({index:n,width:this._placeholderWidth,height:this._placeholderHeight})}isPivot(e){const t=this.ws.definitions.Reports[e.ReportDefinitionId];return!(!t||"Summary"!==t.Type||t.Chart&&t.DefaultsToChart)}get isMdScreen(){return this.workspace.mediumDevice}get isVerticalMode(){return!this.workspace.mediumDevice}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d),c.Mb(c.g),c.Mb(i.e),c.Mb(i.a),c.Mb(G.t),c.Mb(c.A))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-dashboard"]],viewQuery:function(e,t){if(1&e&&c.Qc(Ote,1),2&e){let e;c.zc(e=c.dc())&&(t.dashboard=e.first)}},inputs:{mode:"mode",disableDrilldown:"disableDrilldown",isEdit:"isEdit",previewDefinition:"previewDefinition"},outputs:{addWidget:"addWidget",editWidget:"editWidget",deleteWidget:"deleteWidget",moveWidget:"moveWidget",resizeWidget:"resizeWidget"},features:[c.xb],decls:20,vars:12,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","expand"],[1,"d-none","d-md-inline"],["class","btn-group t-toolbar-button","ngbDropdown","",3,"placement",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"row","t-rest-of-screen","bg-light",2,"overflow","auto",3,"dblclick"],["dashboard",""],[4,"ngIf","ngIfElse"],["spinner",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],["id","dashboard",2,"position","relative","max-height","0"],["phoneView",""],["widgetHeader",""],["widgetBody",""],["class","t-dashboard-widget","style","position: absolute; z-index: 0",3,"left","right","top","width","height",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"t-dashboard-widget",2,"position","absolute","z-index","0"],[1,"w-100","h-100",2,"background-color","lightgrey"],["class","t-dashboard-widget","style","position: absolute","cdkDrag","",3,"left","right","top","width","height","cdkDragDisabled","dblclick","cdkDragStarted","cdkDragMoved","cdkDragEnded",4,"ngIf"],["class","t-drag-knob","style","position: absolute;","cdkDrag","",3,"width","height","left","right","top","cdkDragStarted","cdkDragMoved","cdkDragEnded",4,"ngIf"],["cdkDrag","",1,"t-dashboard-widget",2,"position","absolute",3,"cdkDragDisabled","dblclick","cdkDragStarted","cdkDragMoved","cdkDragEnded"],[1,"w-100","h-100","border","bg-white","shadow-sm","d-flex","flex-column","p-2"],["cdkDragHandle","",1,"t-widget-header","d-flex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkDrag","",1,"t-drag-knob",2,"position","absolute",3,"cdkDragStarted","cdkDragMoved","cdkDragEnded"],[1,"t-drag-knob-inner"],["class","t-dashboard-widget w-100",3,"height",4,"ngIf"],[1,"t-dashboard-widget","w-100"],[1,"t-widget-header","d-flex","w-100"],[1,"flex-grow-1","text-truncate"],[1,"small","text-muted",3,"title"],[1,"flex-grow-0","text-danger"],["popoverClass","t-error-popover","triggers","mouseenter:mouseleave",3,"ngbPopover","container","placement",4,"ngIf"],["ngbDropdown","",1,"flex-grow-0",3,"placement","container"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],[1,"small","text-muted"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"px-0",3,"click"],[1,"t-menu-icon"],[1,"t-menu-text"],["icon","download"],["ngbDropdownItem","","class","px-0",3,"click",4,"ngIf"],[4,"ngIf"],["errorPopover",""],["popoverClass","t-error-popover","triggers","mouseenter:mouseleave",3,"ngbPopover","container","placement"],["icon","exclamation-triangle"],["icon","edit"],["icon","pen"],["icon","trash"],[2,"width","200px"],[1,"m-0","p-0"],["mode","widget",1,"w-100","flex-grow-1","bg-light2","border-top2",2,"overflow","hidden",3,"definition","view","state","refresh","export","disableDrilldown","silentRefreshError"],[1,"text-center","pt-4","w-100"],[3,"scale"]],template:function(e,t){if(1&e&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Jc(2,Ate,4,1,"div",2),c.Sb(3,"div",3),c.Sb(4,"div"),c.Sb(5,"button",4),c.cc("click",function(){return t.onFullScreen()}),c.Nb(6,"fa-icon",5),c.Sb(7,"span",6),c.Lc(8),c.hc(9,"translate"),c.Rb(),c.Rb(),c.Jc(10,_te,6,5,"div",7),c.Rb(),c.Sb(11,"div"),c.Sb(12,"button",8),c.cc("click",function(){return t.onRefresh()}),c.hc(13,"translate"),c.Nb(14,"fa-icon",9),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(15,"div",10,11),c.cc("dblclick",function(e){return t.onDoubleClickSurface(e)}),c.Jc(17,ine,9,5,"ng-container",12),c.Jc(18,cne,2,1,"ng-template",null,13,c.Kc),c.Rb(),c.Rb()),2&e){const e=c.Ac(19);c.zb(2),c.nc("ngIf",!!t.title),c.zb(3),c.nc("disabled",t.disableFullScreen(t.isEdit)),c.zb(3),c.Nc("\xa0\xa0",c.ic(9,8,"FullScreen"),""),c.zb(2),c.nc("ngIf",t.showActionsDropdown),c.zb(2),c.oc("title",c.ic(13,10,"Refresh")),c.nc("disabled",t.disableRefresh),c.zb(5),c.nc("ngIf",t.rendered)("ngIfElse",e)}},directives:[C.l,ee.a,G.l,G.r,G.p,G.o,C.k,j.b,j.c,C.p,G.C,is,fe.a],pipes:[K.c,Me],encapsulation:2}),e})();const rne=["widgetConfigModal"];function sne(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&e){const e=t.model,n=c.gc();c.zb(1),c.Mc(n.getMultilingualValue(e,"Title",n.ws)||c.ic(2,1,"Untitled"))}}function lne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",44),c.cc("click",function(){return c.Dc(e),c.gc(3).onToggleDefinition()}),c.Sb(1,"div",45),c.Nb(2,"fa-icon",46),c.Rb(),c.Sb(3,"span"),c.Lc(4),c.hc(5,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(3);c.zb(2),c.nc("flip",e.flipIcon(!1)),c.zb(2),c.Mc(c.ic(5,2,"Definition"))}}function ane(e,t){1&e&&c.Nb(0,"fa-icon",47)}function une(e,t){1&e&&c.Ob(0)}function dne(e,t){1&e&&c.Ob(0)}function bne(e,t){1&e&&c.Ob(0)}const gne=function(){return{updateOn:"blur"}},fne=function(e,t){return{control:e,serverErrors:t}};function mne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",48),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",49,50),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Title2=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Title2")}),c.Rb(),c.Jc(6,bne,1,0,"ng-container",21),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Title2)),c.zb(2),c.Mc(c.ic(3,7,"Title")+n.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.Title2)("ngModelOptions",c.qc(9,gne)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,fne,e,null==t.serverErrors?null:t.serverErrors.Title2))}}function hne(e,t){1&e&&c.Ob(0)}function pne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",17),c.Sb(1,"label",51),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",52,53),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.Title3=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"Title3")}),c.Rb(),c.Jc(6,hne,1,0,"ng-container",21),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2).model,n=c.gc(),i=c.Ac(7);c.Eb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Title3)),c.zb(2),c.Mc(c.ic(3,7,"Title")+n.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.Title3)("ngModelOptions",c.qc(9,gne)),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(10,fne,e,null==t.serverErrors?null:t.serverErrors.Title3))}}function Sne(e,t){1&e&&c.Nb(0,"fa-icon",47)}function vne(e,t){1&e&&c.Nb(0,"fa-icon",47)}function Ine(e,t){1&e&&(c.Sb(0,"div",60),c.Lc(1," \u200c "),c.Rb())}function Mne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",54),c.Sb(1,"div",55),c.Jc(2,vne,1,0,"fa-icon",15),c.Sb(3,"span",56),c.Sb(4,"span"),c.Lc(5),c.Rb(),c.Rb(),c.Sb(6,"button",27),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onConfigureWidget(n,i)}),c.hc(7,"translate"),c.Nb(8,"fa-icon",57),c.Rb(),c.Lc(9," \xa0 "),c.Sb(10,"button",27),c.cc("click",function(){c.Dc(e);const n=t.index,i=c.gc(2).model;return c.gc().onDeleteWidget(n,i)}),c.hc(11,"translate"),c.Nb(12,"fa-icon",58),c.Rb(),c.Rb(),c.Jc(13,Ine,2,0,"div",59),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3);c.zb(2),c.nc("ngIf",n.weakEntityErrors(e)),c.zb(3),c.Nc(" ",n.ws.getMultilingualValueImmediate(e,"Title")||n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),c.zb(1),c.nc("title",c.ic(7,4,"Configure")),c.zb(4),c.nc("title",c.ic(11,6,"Delete"))}}function Rne(e,t){1&e&&c.Ob(0)}function yne(e,t){1&e&&c.Nb(0,"fa-icon",47)}function Dne(e,t){1&e&&c.Ob(0)}function wne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr"),c.Sb(1,"td",65),c.Sb(2,"t-roles-picker",66,67),c.cc("ngModelChange",function(e){return t.$implicit.RoleId=e}),c.Rb(),c.Jc(4,Dne,1,0,"ng-container",21),c.Rb(),c.Sb(5,"td"),c.Sb(6,"button",68),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=c.gc(3).model;return c.gc().onDeleteRow(n,i.Roles)}),c.Nb(7,"fa-icon",69),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,n=c.Ac(3);c.gc(4);const i=c.Ac(7);c.zb(2),c.nc("ngModel",e.RoleId)("showCreate",!1),c.zb(2),c.nc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.sc(4,fne,n,null==e||null==e.serverErrors?null:e.serverErrors.Key))}}function Ene(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",61),c.Sb(1,"label",26),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"table",62),c.Sb(5,"tbody"),c.Jc(6,wne,8,7,"tr",63),c.Rb(),c.Rb(),c.Sb(7,"button",64),c.cc("click",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onInsertRow(t.Roles)}),c.Nb(8,"fa-icon",28),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.gc(2).model;c.zb(2),c.Mc(c.ic(3,3,"ForMembersOfRoles")),c.zb(4),c.nc("ngForOf",e.Roles),c.zb(3),c.Nc("\xa0\xa0",c.ic(10,5,"Add")," ")}}function Cne(e,t){if(1&e&&(c.Sb(0,"option",81),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.oc("value",e.value),c.zb(1),c.Nc(" ",e.name(),"")}}function xne(e,t){1&e&&c.Ob(0)}function Tne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",82),c.cc("click",function(){c.Dc(e);const n=t.$implicit,i=c.gc(3).model;return c.gc().onIconClick(i,n)}),c.Nb(1,"fa-icon",83),c.Rb()}if(2&e){const e=t.$implicit,n=c.gc(3).model;c.Eb("t-highlighted",e.value===n.MainMenuIcon),c.nc("title",e.value),c.zb(1),c.nc("icon",e.value)}}function zne(e,t){1&e&&c.Ob(0)}function Lne(e,t){1&e&&c.Ob(0)}const kne=function(e){return{control:null,serverErrors:e}};function One(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"div",17),c.Sb(2,"label",70),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Sb(5,"select",71,72),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.MainMenuSection=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"MainMenuSection")}),c.Nb(7,"option",73),c.Jc(8,Cne,2,2,"option",74),c.Rb(),c.Jc(9,xne,1,0,"ng-container",21),c.Rb(),c.Sb(10,"div",17),c.Sb(11,"label",75),c.Lc(12),c.hc(13,"translate"),c.Rb(),c.Sb(14,"div",76),c.Jc(15,Tne,2,4,"div",77),c.Rb(),c.Jc(16,zne,1,0,"ng-container",21),c.Rb(),c.Sb(17,"div",17),c.Sb(18,"label",78),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Sb(21,"input",79,80),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).model.MainMenuSortKey=t})("ngModelChange",function(){c.Dc(e);const t=c.gc(2).model;return c.gc().onDefinitionChange(t,"MainMenuSortKey")}),c.Rb(),c.Jc(23,Lne,1,0,"ng-container",21),c.Rb(),c.Pb()}if(2&e){const e=c.Ac(6),t=c.Ac(22),n=c.gc(2).model,i=c.gc(),o=c.Ac(7);c.zb(3),c.Mc(c.ic(4,14,"MainMenuSection")),c.zb(2),c.nc("ngModel",n.MainMenuSection),c.zb(3),c.nc("ngForOf",i.allMainMenuSections),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(20,fne,e,null==n.serverErrors?null:n.serverErrors.MainMenuSection)),c.zb(3),c.Mc(c.ic(13,16,"MainMenuIcon")),c.zb(3),c.nc("ngForOf",i.allMainMenuIcons),c.zb(1),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.rc(23,kne,null==n.serverErrors?null:n.serverErrors.MainMenuIcon)),c.zb(3),c.Mc(c.ic(20,18,"MainMenuSortKey")),c.zb(2),c.nc("ngModel",n.MainMenuSortKey)("ngModelOptions",c.qc(25,gne)),c.zb(2),c.nc("ngTemplateOutlet",o)("ngTemplateOutletContext",c.sc(26,fne,t,null==n.serverErrors?null:n.serverErrors.MainMenuSortKey))}}function Ane(e,t){1&e&&(c.Sb(0,"div",84),c.Sb(1,"div",85),c.Sb(2,"span"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.zb(3),c.Mc(c.ic(4,1,"Preview")))}function Nne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",6),c.Jc(1,lne,6,4,"div",7),c.Sb(2,"div",8),c.Sb(3,"div",9),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleDefinition()}),c.Sb(4,"span"),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Sb(7,"div",10),c.Nb(8,"fa-icon",11),c.Rb(),c.Rb(),c.Sb(9,"div",12),c.Sb(10,"div",13),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Title")}),c.Lc(11," \xa0 "),c.Nb(12,"fa-icon",14),c.Lc(13),c.hc(14,"translate"),c.Jc(15,ane,1,0,"fa-icon",15),c.Rb(),c.Sb(16,"div",16),c.Sb(17,"div",17),c.Sb(18,"label",18),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Sb(21,"input",19,20),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Code=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Code")}),c.Rb(),c.Jc(23,une,1,0,"ng-container",21),c.Rb(),c.Sb(24,"div",17),c.Sb(25,"label",22),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Sb(28,"input",23,24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.Title=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"Title")}),c.Rb(),c.Jc(30,dne,1,0,"ng-container",21),c.Rb(),c.Jc(31,mne,7,13,"div",25),c.Jc(32,pne,7,13,"div",25),c.Rb(),c.Sb(33,"div",13),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("Widgets")}),c.Lc(34," \xa0 "),c.Nb(35,"fa-icon",14),c.Lc(36),c.hc(37,"translate"),c.Jc(38,Sne,1,0,"fa-icon",15),c.Rb(),c.Sb(39,"div",16),c.Sb(40,"div",17),c.Sb(41,"label",26),c.Lc(42),c.hc(43,"translate"),c.Rb(),c.Lc(44,"\xa0 "),c.Sb(45,"button",27),c.cc("click",function(){c.Dc(e);const t=c.gc().model;return c.gc().onCreateWidget(t)}),c.hc(46,"translate"),c.Nb(47,"fa-icon",28),c.Rb(),c.Sb(48,"div",29),c.cc("cdkDropListDropped",function(t){c.Dc(e);const n=c.gc().model;return c.gc().rowDrop(t,n)}),c.Jc(49,Mne,14,8,"div",30),c.Rb(),c.Rb(),c.Sb(50,"div",17),c.Sb(51,"label",31),c.Lc(52),c.hc(53,"translate"),c.Rb(),c.Sb(54,"input",32,33),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.AutoRefreshPeriodInMinutes=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t)}),c.Rb(),c.Jc(56,Rne,1,0,"ng-container",21),c.Rb(),c.Rb(),c.Sb(57,"div",13),c.cc("click",function(){return c.Dc(e),c.gc(2).onToggleSection("MainMenu")}),c.Lc(58," \xa0 "),c.Nb(59,"fa-icon",14),c.Lc(60),c.hc(61,"translate"),c.Jc(62,yne,1,0,"fa-icon",15),c.Rb(),c.Sb(63,"div",16),c.Sb(64,"div",34),c.Sb(65,"input",35),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().model.ShowInMainMenu=t})("ngModelChange",function(){c.Dc(e);const t=c.gc().model;return c.gc().onDefinitionChange(t,"ShowInMainMenu")}),c.Rb(),c.Sb(66,"label",36),c.Lc(67),c.hc(68,"translate"),c.Rb(),c.Rb(),c.Jc(69,Ene,11,7,"div",37),c.Jc(70,One,24,29,"ng-container",38),c.Rb(),c.Rb(),c.Rb(),c.Sb(71,"div",39),c.Jc(72,Ane,5,3,"div",40),c.Sb(73,"div",41),c.Sb(74,"div",42),c.Sb(75,"t-dashboard",43),c.cc("addWidget",function(t){c.Dc(e);const n=c.gc().model;return c.gc().onCreateWidget(n,t.offsetX,t.offsetY)})("editWidget",function(t){c.Dc(e);const n=c.gc().model;return c.gc().onConfigureWidget(t.index,n)})("deleteWidget",function(t){c.Dc(e);const n=c.gc().model;return c.gc().onDeleteWidget(t.index,n)})("moveWidget",function(t){c.Dc(e);const n=c.gc().model;return c.gc().onMoveWidget(t.index,n,t.offsetX,t.offsetY)})("resizeWidget",function(t){c.Dc(e);const n=c.gc().model;return c.gc().onResizeWidget(t.index,n,t.width,t.height)}),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(22),t=c.Ac(29),n=c.Ac(55),i=c.gc(),o=i.isEdit,r=i.model,s=c.gc(),l=c.Ac(7);c.zb(1),c.nc("ngIf",o&&s.collapseDefinition),c.zb(1),c.Eb("d-flex",o&&!s.collapseDefinition)("d-none",!o||s.collapseDefinition),c.zb(3),c.Mc(c.ic(6,59,"Definition")),c.zb(3),c.nc("flip",s.flipIcon(!1)),c.zb(4),c.nc("flip",s.flipIcon(s.showSection("Title")))("rotate",s.rotateIcon(s.showSection("Title"))),c.zb(1),c.Nc(" \xa0 ",c.ic(14,61,"Title")," "),c.zb(2),c.nc("ngIf",s.titleSectionErrors(r)),c.zb(1),c.Eb("d-none",!s.showSection("Title")),c.zb(1),c.Eb("is-invalid",s.invalid(e,null==r.serverErrors?null:r.serverErrors.Code)),c.zb(2),c.Mc(c.ic(20,63,"Code")),c.zb(2),c.nc("ngModel",r.Code)("ngModelOptions",c.qc(79,gne)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(80,fne,e,null==r.serverErrors?null:r.serverErrors.Code)),c.zb(1),c.Eb("is-invalid",s.invalid(t,null==r.serverErrors?null:r.serverErrors.Title)),c.zb(2),c.Mc(c.ic(27,65,"Title")+s.ws.primaryPostfix),c.zb(2),c.nc("ngModel",r.Title)("ngModelOptions",c.qc(83,gne)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(84,fne,t,null==r.serverErrors?null:r.serverErrors.Title)),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId),c.zb(3),c.nc("flip",s.flipIcon(s.showSection("Widgets")))("rotate",s.rotateIcon(s.showSection("Widgets"))),c.zb(1),c.Nc(" \xa0 ",c.ic(37,67,"DashboardDefinition_Widgets")," "),c.zb(2),c.nc("ngIf",s.widgetsSectionErrors(r)),c.zb(1),c.Eb("d-none",!s.showSection("Widgets")),c.zb(3),c.Mc(c.ic(43,69,"DashboardDefinition_Widgets")),c.zb(3),c.nc("title",c.ic(46,71,"Create")),c.zb(4),c.nc("ngForOf",s.getWidgets(r)),c.zb(1),c.Eb("is-invalid",s.invalid(n,null==r.serverErrors?null:r.serverErrors.AutoRefreshPeriodInMinutes)),c.zb(2),c.Mc(c.ic(53,73,"DashboardDefinition_AutoRefreshPeriodInMinutes")),c.zb(2),c.nc("ngModel",r.AutoRefreshPeriodInMinutes)("ngModelOptions",c.qc(87,gne)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(88,fne,n,null==r.serverErrors?null:r.serverErrors.AutoRefreshPeriodInMinutes)),c.zb(3),c.nc("flip",s.flipIcon(s.showSection("MainMenu")))("rotate",s.rotateIcon(s.showSection("MainMenu"))),c.zb(1),c.Nc(" \xa0 ",c.ic(61,75,"MainMenu")," "),c.zb(2),c.nc("ngIf",s.mainMenuSectionErrors(r)),c.zb(1),c.Eb("d-none",!s.showSection("MainMenu")),c.zb(2),c.nc("ngModel",r.ShowInMainMenu),c.zb(2),c.Mc(c.ic(68,77,"Definition_ShowInMainMenu")),c.zb(2),c.nc("ngIf",r.ShowInMainMenu),c.zb(1),c.nc("ngIf",r.ShowInMainMenu),c.zb(2),c.nc("ngIf",o),c.zb(3),c.nc("previewDefinition",s.getForClient(r))("disableDrilldown",s.isPopupMode)("isEdit",o)}}function _ne(e,t){if(1&e&&c.Jc(0,Nne,76,91,"div",5),2&e){const e=t.isEdit,n=c.gc();c.nc("ngIf",n.watchIsEdit(e))}}function Jne(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){const e=t.$implicit;c.zb(1),c.Nc(" ",e()," ")}}function Pne(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"div",86),c.Jc(2,Jne,2,1,"span",63),c.Rb(),c.Pb()),2&e){const e=c.gc(),t=e.control,n=e.serverErrors,i=c.gc();c.zb(2),c.nc("ngForOf",i.errors(t,n))}}function Fne(e,t){if(1&e&&c.Jc(0,Pne,3,1,"ng-container",38),2&e){const e=t.control,n=t.serverErrors,i=c.gc();c.nc("ngIf",i.invalid(e,n))}}function Vne(e,t){1&e&&c.Ob(0)}function qne(e,t){1&e&&c.Ob(0)}function jne(e,t){1&e&&c.Ob(0)}function $ne(e,t){1&e&&c.Ob(0)}function Une(e,t){1&e&&c.Ob(0)}function Kne(e,t){1&e&&c.Ob(0)}function Bne(e,t){1&e&&c.Ob(0)}function Hne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",97),c.Sb(1,"label",48),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",49,50),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).widgetToEdit.Title2=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).widgetToEditHasChanged=!0}),c.Rb(),c.Jc(6,Bne,1,0,"ng-container",21),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(7);c.zb(2),c.Mc(c.ic(3,5,"Title")+t.ws.secondaryPostfix),c.zb(2),c.nc("ngModel",t.widgetToEdit.Title2)("ngModelOptions",c.qc(7,gne)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(8,fne,e,null==t.widgetToEdit.serverErrors?null:t.widgetToEdit.serverErrors.Title2))}}function Qne(e,t){1&e&&c.Ob(0)}function Wne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",97),c.Sb(1,"label",51),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"input",52,53),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc(2).widgetToEdit.Title3=t})("ngModelChange",function(){return c.Dc(e),c.gc(2).widgetToEditHasChanged=!0}),c.Rb(),c.Jc(6,Qne,1,0,"ng-container",21),c.Rb()}if(2&e){const e=c.Ac(5),t=c.gc(2),n=c.Ac(7);c.zb(2),c.Mc(c.ic(3,5,"Title")+t.ws.ternaryPostfix),c.zb(2),c.nc("ngModel",t.widgetToEdit.Title3)("ngModelOptions",c.qc(7,gne)),c.zb(2),c.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.sc(8,fne,e,null==t.widgetToEdit.serverErrors?null:t.widgetToEdit.serverErrors.Title3))}}function Gne(e,t){if(1&e){const e=c.Tb();c.Sb(0,"div",87),c.Sb(1,"h5",88),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",89),c.cc("click",function(){return t.$implicit.dismiss()}),c.Sb(5,"span",90),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",91),c.Sb(8,"div",92),c.Sb(9,"div",93),c.Sb(10,"label",94),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Sb(13,"t-report-definitions-picker",95,96),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().widgetToEdit.ReportDefinitionId=t})("ngModelChange",function(){return c.Dc(e),c.gc().widgetToEditHasChanged=!0}),c.Rb(),c.Jc(15,Vne,1,0,"ng-container",21),c.Rb(),c.Sb(16,"div",97),c.Sb(17,"label",98),c.Lc(18),c.hc(19,"translate"),c.Rb(),c.Sb(20,"input",99,100),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().widgetToEdit.Width=t})("ngModelChange",function(){return c.Dc(e),c.gc().widgetToEditHasChanged=!0}),c.Rb(),c.Jc(22,qne,1,0,"ng-container",21),c.Rb(),c.Sb(23,"div",97),c.Sb(24,"label",101),c.Lc(25),c.hc(26,"translate"),c.Rb(),c.Sb(27,"input",102,103),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().widgetToEdit.Height=t})("ngModelChange",function(){return c.Dc(e),c.gc().widgetToEditHasChanged=!0}),c.Rb(),c.Jc(29,jne,1,0,"ng-container",21),c.Rb(),c.Sb(30,"div",97),c.Sb(31,"label",104),c.Lc(32),c.hc(33,"translate"),c.Rb(),c.Sb(34,"input",105,106),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().widgetToEdit.OffsetX=t})("ngModelChange",function(){return c.Dc(e),c.gc().widgetToEditHasChanged=!0}),c.Rb(),c.Jc(36,$ne,1,0,"ng-container",21),c.Rb(),c.Sb(37,"div",97),c.Sb(38,"label",107),c.Lc(39),c.hc(40,"translate"),c.Rb(),c.Sb(41,"input",108,109),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().widgetToEdit.OffsetY=t})("ngModelChange",function(){return c.Dc(e),c.gc().widgetToEditHasChanged=!0}),c.Rb(),c.Jc(43,Une,1,0,"ng-container",21),c.Rb(),c.Sb(44,"div",97),c.Sb(45,"label",22),c.Lc(46),c.hc(47,"translate"),c.Rb(),c.Sb(48,"input",23,24),c.cc("ngModelChange",function(t){return c.Dc(e),c.gc().widgetToEdit.Title=t})("ngModelChange",function(){return c.Dc(e),c.gc().widgetToEditHasChanged=!0}),c.Rb(),c.Jc(50,Kne,1,0,"ng-container",21),c.Rb(),c.Jc(51,Hne,7,11,"div",110),c.Jc(52,Wne,7,11,"div",110),c.Rb(),c.Rb(),c.Sb(53,"div",111),c.Sb(54,"button",112),c.cc("click",function(){return t.$implicit.close()}),c.Nb(55,"fa-icon",113),c.Lc(56),c.hc(57,"translate"),c.Rb(),c.Sb(58,"button",114),c.cc("click",function(){return t.$implicit.dismiss()}),c.Nb(59,"fa-icon",58),c.Lc(60),c.hc(61,"translate"),c.Rb(),c.Rb()}if(2&e){const e=c.Ac(14),t=c.Ac(21),n=c.Ac(28),i=c.Ac(35),o=c.Ac(42),r=c.Ac(49),s=c.gc(),l=c.Ac(7);c.zb(2),c.Nc(" ",c.ic(3,37,"Configure")," "),c.zb(7),c.Eb("is-invalid",s.invalid(e,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.ReportDefinitionId)),c.zb(2),c.Mc(c.ic(12,39,"DashboardDefinition_ReportDefinition")),c.zb(2),c.nc("ngModel",s.widgetToEdit.ReportDefinitionId),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(55,fne,e,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.ReportDefinitionId)),c.zb(3),c.Mc(c.ic(19,41,"DashboardDefinition_Width")),c.zb(2),c.nc("ngModel",s.widgetToEdit.Width)("ngModelOptions",c.qc(58,gne)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(59,fne,t,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.Width)),c.zb(3),c.Mc(c.ic(26,43,"DashboardDefinition_Height")),c.zb(2),c.nc("ngModel",s.widgetToEdit.Height)("ngModelOptions",c.qc(62,gne)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(63,fne,n,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.Height)),c.zb(3),c.Mc(c.ic(33,45,"DashboardDefinition_OffsetX")),c.zb(2),c.nc("ngModel",s.widgetToEdit.OffsetX)("ngModelOptions",c.qc(66,gne)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(67,fne,i,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.OffsetX)),c.zb(3),c.Mc(c.ic(40,47,"DashboardDefinition_OffsetY")),c.zb(2),c.nc("ngModel",s.widgetToEdit.OffsetY)("ngModelOptions",c.qc(70,gne)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(71,fne,o,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.OffsetY)),c.zb(3),c.Mc(c.ic(47,49,"Title")+s.ws.primaryPostfix),c.zb(2),c.nc("ngModel",s.widgetToEdit.Title)("ngModelOptions",c.qc(74,gne)),c.zb(2),c.nc("ngTemplateOutlet",l)("ngTemplateOutletContext",c.sc(75,fne,r,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.Title)),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),c.zb(1),c.nc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId),c.zb(2),c.nc("disabled",!s.canApplyWidget(s.widgetToEdit)),c.zb(2),c.Nc(" \xa0",c.ic(57,51,"Apply")," "),c.zb(4),c.Nc(" \xa0",c.ic(61,53,"Cancel")," ")}}const Yne=function(){return[]},Xne=[{path:":tenantId",component:Et,canActivate:[$.d],canActivateChild:[PS.a],children:[{path:"units",component:en,canDeactivate:[ci.a]},{path:"units/:id",component:ii,canDeactivate:[oi.a]},{path:"roles",component:bh,canDeactivate:[ci.a]},{path:"roles/:id",component:Lp,canDeactivate:[oi.a]},{path:"users",component:xa,canDeactivate:[ci.a]},{path:"users/:id",component:sa,canDeactivate:[oi.a]},{path:"relations",component:Ii,canDeactivate:[ci.a]},{path:"relations/:definitionId",component:Ii,canDeactivate:[ci.a]},{path:"relations/:definitionId/:id",component:Gm,canDeactivate:[oi.a]},{path:"agents",component:Mb,canDeactivate:[ci.a]},{path:"agents/:id",component:ab,canDeactivate:[oi.a]},{path:"lookups",component:Ad,canDeactivate:[ci.a]},{path:"lookups/:definitionId",component:Ad,canDeactivate:[ci.a]},{path:"lookups/:definitionId/:id",component:Id,canDeactivate:[oi.a]},{path:"currencies",component:Cu,canDeactivate:[ci.a]},{path:"currencies/:id",component:mu,canDeactivate:[oi.a]},{path:"resources",component:ZS,canDeactivate:[ci.a]},{path:"resources/:definitionId",component:ZS,canDeactivate:[ci.a]},{path:"resources/:definitionId/:id",component:NM,canDeactivate:[oi.a]},{path:"account-classifications",component:HM,canDeactivate:[ci.a]},{path:"account-classifications/:id",component:TR,canDeactivate:[oi.a]},{path:"ifrs-concepts",component:oU,canDeactivate:[ci.a]},{path:"ifrs-concepts/:id",component:fU,canDeactivate:[oi.a]},{path:"account-types",component:qR,canDeactivate:[ci.a]},{path:"account-types/:id",component:zw,canDeactivate:[oi.a]},{path:"accounts",component:jw,canDeactivate:[ci.a]},{path:"accounts/:id",component:YE,canDeactivate:[oi.a]},{path:"entry-types",component:xO,canDeactivate:[ci.a]},{path:"entry-types/:id",component:fA,canDeactivate:[oi.a]},{path:"documents",component:$A,canDeactivate:[ci.a]},{path:"documents/:definitionId",component:$A,canDeactivate:[ci.a]},{path:"documents/:definitionId/:id",component:Gj,canDeactivate:[oi.a]},{path:"d/:definitionId",redirectTo:"documents/:definitionId"},{path:"d/:definitionId/:id",redirectTo:"documents/:definitionId/:id"},{path:"inbox",component:j$,canDeactivate:[ci.a]},{path:"outbox",component:eU,canDeactivate:[ci.a]},{path:"report-definitions",component:sx,canDeactivate:[ci.a]},{path:"report-definitions/:id",component:ok,canDeactivate:[oi.a]},{path:"dashboard-definitions",component:Tte,canDeactivate:[ci.a]},{path:"dashboard-definitions/:id",component:(()=>{class e extends mn.a{constructor(e,t,n){super(),this.workspace=e,this.translate=t,this.modalService=n,this.expand="Widgets.ReportDefinition,Roles.Role",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Title=this.initialText:this.ws.isSecondaryLanguage?e.Title2=this.initialText:this.ws.isTernaryLanguage&&(e.Title3=this.initialText),e.ShowInMainMenu=!1,e.AutoRefreshPeriodInMinutes=5,e.Widgets=[],e.Roles=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Widgets&&t.Widgets.forEach(e=>e.Id=null),t.Roles&&t.Roles.forEach(e=>e.Id=null),t}return console.error("Cloning a non existing item"),null},this.isInactive=e=>null,this._currentModelModified=!1,this._isEdit=!1,this.collapseDefinition=!1,this._sections={Title:!0,Widgets:!0,MainMenu:!1},this.widgetToEditHasChanged=!1,this.widgetShowAdvancedOptions=!1,this.map=e=>Object.assign({},e),this.overlap=(e,t,n,i,c)=>zte(e,t,n,i,c.OffsetX,c.OffsetY,c.Width,c.Height)>0}get ws(){return this.workspace.currentTenant}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this.modelForClient=Object.assign({},e),e.Widgets&&(this.modelForClient.Widgets=e.Widgets.map(this.map),this.modelForClient.Widgets.forEach(e=>{e.OffsetX=Math.min(e.OffsetX,1e3),e.OffsetY=Math.min(e.OffsetY,1e3),e.Width=Math.min(e.Width,16),e.Height=Math.min(e.Height,16)}))),this.modelForClient):null}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e,window.dispatchEvent(new Event("resize"))),!0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition,window.dispatchEvent(new Event("resize"))}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}invalid(e,t){return Object(Qp.c)(e,t)}errors(e,t){return Object(Qp.d)(e,t,this.translate)}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(Qp.b)(e.serverErrors[t]))}titleSectionErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.Id)||Object(Qp.b)(e.serverErrors.Code)||Object(Qp.b)(e.serverErrors.Title)||Object(Qp.b)(e.serverErrors.Title2)||Object(Qp.b)(e.serverErrors.Title3))}widgetsSectionErrors(e){return!!e.serverErrors&&Object(Qp.b)(e.serverErrors.AutoRefreshPeriodInMinutes)||!!e.Widgets&&e.Widgets.some(e=>this.weakEntityErrors(e))}mainMenuSectionErrors(e){return!!e.serverErrors&&(Object(Qp.b)(e.serverErrors.ShowInMainMenu)||Object(Qp.b)(e.serverErrors.MainMenuSection)||Object(Qp.b)(e.serverErrors.MainMenuIcon)||Object(Qp.b)(e.serverErrors.MainMenuSortKey))||!!e.Roles&&e.Roles.some(e=>this.weakEntityErrors(e))}savePreprocessing(e){e.ShowInMainMenu||(e.Roles=[])}get allMainMenuSections(){const e=Object(lx.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Mi.c)(e)}get allMainMenuIcons(){const e=Object(lx.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Mi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}getWidgets(e){return e.Widgets=e.Widgets||[],e.Widgets}onCreateWidget(e,t,n){this.onConfigureWidget(e.Widgets.length,e,t,n)}chartReportDef(e){return!!e&&"Summary"===e.Type&&e.Chart&&e.DefaultsToChart}onConfigureWidget(e,t,n,i){this.widgetToEditHasChanged=!1;const c=t.Widgets[e],o=Object.assign({},c||this.createWidget(t,n,i));this.widgetToEdit=o,this.modelRef=t,this.modalService.open(this.widgetConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{if(this.widgetToEditHasChanged){const n=!!c&&(c.Width!==o.Width||c.Height!==o.Height)&&!!c.ReportDefinitionId&&c.ReportDefinitionId===o.ReportDefinitionId&&this.chartReportDef(this.ws.definitions.Reports[o.ReportDefinitionId]),i=!c||c.OffsetX!==o.OffsetX||c.OffsetY!==o.OffsetY||c.Width!==o.Width||c.Height!==o.Height;t.Widgets[e]=o,i&&this.rearrange(o,t),n&&window.dispatchEvent(new Event("resize")),this.onDefinitionChange(t)}},e=>{})}onDeleteWidget(e,t){t.Widgets.splice(e,1),this.onDefinitionChange(t)}onMoveWidget(e,t,n,i){const c=t.Widgets[e];c.OffsetX=n,c.OffsetY=i,this.rearrange(c,t),this.onDefinitionChange(t)}onResizeWidget(e,t,n,i){const c=t.Widgets[e];c.Width=n,c.Height=i,this.chartReportDef(this.ws.definitions.Reports[c.ReportDefinitionId])&&window.dispatchEvent(new Event("resize")),this.rearrange(c,t),this.onDefinitionChange(t)}rearrange(e,t){const n=t.Widgets.filter(t=>t!==e),i=n.map(this.map);Lte(this.map(e),i);for(let c=0;c<i.length;c++)n[c].OffsetY+=i[c].changeY||0}createWidget(e,t,n){if(void 0===t||void 0===n){t=0,n=0;let i=0,c=!1;for(;;){for(t=i,n=0;n<=i-1;){if(!e.Widgets.some(e=>this.overlap(t,n,1,1,e))){c=!0;break}n++}if(!c)for(t=0,n=i;t<=i;){if(!e.Widgets.some(e=>this.overlap(t,n,1,1,e))){c=!0;break}t++}if(c)break;i++}}return{OffsetX:t,OffsetY:n,Width:1,Height:1}}canApplyWidget(e){return!!e.ReportDefinitionId}rowDrop(e,t){Object(j.h)(t.Widgets,e.previousIndex,e.currentIndex),e.previousIndex!==e.currentIndex&&this.onDefinitionChange(t)}onDeleteRow(e,t){const n=t.indexOf(e);n>=0&&t.splice(n,1)}onInsertRow(e,t){const n=t?t():{Id:0};e.push(n)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(L.m),c.Mb(K.d),c.Mb(G.t))},e.\u0275cmp=c.Gb({type:e,selectors:[["t-dashboard-definitions-details"]],viewQuery:function(e,t){if(1&e&&c.Qc(rne,3),2&e){let e;c.zc(e=c.dc())&&(t.widgetConfigModal=e.first)}},features:[c.wb],decls:10,vars:15,consts:[["collection","DashboardDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["widgetConfigModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","title",1,"small"],["id","title","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",2,"height","15rem",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","",4,"ngFor","ngForOf"],["for","autorefreshperiodinminutes",1,"small"],["id","autorefreshperiodinminutes","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["autorefreshperiodinminutes","ngModel"],[1,"custom-control","custom-checkbox","form-group"],["type","checkbox","id","showInMainMenu",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showInMainMenu",1,"custom-control-label"],["class","form-group t-text-whitish",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"flex-grow-1"],[1,"col","bg-light","border","shadow","h-100"],["mode","preview",1,"h-100",3,"previewDefinition","disableDrilldown","isEdit","addWidget","editWidget","deleteWidget","moveWidget","resizeWidget"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","title2",1,"small"],["id","title2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title2","ngModel"],["for","title3",1,"small"],["id","title3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title3","ngModel"],["cdkDrag","",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],[1,"p-0"],["theme","dark",3,"ngModel","showCreate","ngModelChange"],["rolemodel","ngModel"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[3,"value"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"small","t-light-danger","text-wrap"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12"],["for","reportdefinition",1,"small"],["theme","dark","id","reportdefinition","required","",3,"ngModel","ngModelChange"],["reportdefinition","ngModel"],[1,"form-group","col-12","col-sm-6"],["for","width",1,"small"],["id","width","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["width","ngModel"],["for","height",1,"small"],["id","height","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["height","ngModel"],["for","offsetx",1,"small"],["id","offsetx","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["offsetx","ngModel"],["for","offsety",1,"small"],["id","offsety","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["offsety","ngModel"],["class","form-group col-12 col-sm-6",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,sne,3,3,"ng-template",null,1,c.Kc),c.Jc(4,_ne,1,1,"ng-template",null,2,c.Kc),c.Jc(6,Fne,1,1,"ng-template",null,3,c.Kc),c.Jc(8,Gne,62,78,"ng-template",null,4,c.Kc)),2&e){const e=c.Ac(3),n=c.Ac(5);c.nc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.ic(1,12,"DashboardDefinitions"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",c.qc(14,Yne))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,C.l,ee.a,te.c,te.i,te.j,C.p,j.f,C.k,te.l,te.a,one,j.b,j.d,$s,te.n,te.k,te.o,VU,te.m],pipes:[K.c],encapsulation:2}),e})(),canDeactivate:[oi.a]},{path:"centers",component:Pk,canDeactivate:[ci.a]},{path:"centers/:id",component:hO,canDeactivate:[oi.a]},{path:"exchange-rates",component:h$,canDeactivate:[ci.a]},{path:"exchange-rates/:id",component:z$,canDeactivate:[oi.a]},{path:"details-entries",component:s$,canDeactivate:[ci.a]},{path:"details-entries/:id",component:s$,canDeactivate:[oi.a]},{path:"markup-templates",component:LU,canDeactivate:[ci.a]},{path:"markup-templates/:id",component:P2,canDeactivate:[oi.a]},{path:"relation-definitions",component:U4,canDeactivate:[ci.a]},{path:"relation-definitions/:id",component:w4,canDeactivate:[oi.a]},{path:"resource-definitions",component:J7,canDeactivate:[ci.a]},{path:"resource-definitions/:id",component:S7,canDeactivate:[oi.a]},{path:"lookup-definitions",component:eB,canDeactivate:[ci.a]},{path:"lookup-definitions/:id",component:NK,canDeactivate:[oi.a]},{path:"line-definitions",component:zX,canDeactivate:[ci.a]},{path:"line-definitions/:id",component:MX,canDeactivate:[oi.a]},{path:"document-definitions",component:m1,canDeactivate:[ci.a]},{path:"document-definitions/:id",component:WZ,canDeactivate:[oi.a]},{path:"report/:definitionId",component:GC,canDeactivate:[ci.a]},{path:"dashboard/:definitionId",component:one,canDeactivate:[ci.a]},{path:"drilldown/:definitionId",component:Ste,canDeactivate:[ci.a]},{path:"account-statement",component:N8,canDeactivate:[ci.a]},{path:"relation-statement/:definitionId",component:_8,canDeactivate:[ci.a]},{path:"reconciliation",component:bee,canDeactivate:[oi.a]},{path:"emails",component:wee,canDeactivate:[ci.a]},{path:"emails/:id",component:Nee,canDeactivate:[oi.a]},{path:"sms-messages",component:ete,canDeactivate:[ci.a]},{path:"sms-messages/:id",component:qee,canDeactivate:[oi.a]},{path:"general-settings",component:JS,canDeactivate:[oi.a]},{path:"financial-settings",component:bte,canDeactivate:[oi.a]},{path:"main-menu",component:fn,canDeactivate:[ci.a]},{path:"",redirectTo:"main-menu",pathMatch:"full"},{path:"**",component:nn}]},{path:"",redirectTo:"/root/welcome",pathMatch:"full"}];let Zne=(()=>{class e{constructor(e){e.addIcons(tte.a,tte.b,tte.e,tte.h,tte.i,tte.j,tte.n,tte.p,tte.q,tte.s,tte.t,tte.u,tte.v,tte.y,tte.B,tte.C,tte.E,tte.D,tte.F,tte.G,tte.H,tte.I,tte.J,tte.K,tte.O,tte.Q,tte.R,tte.S,tte.U,tte.V,tte.W,tte.X,tte.ab,tte.bb,tte.cb,tte.db,tte.fb,tte.gb,tte.ib,tte.jb,tte.kb,tte.lb,tte.mb,tte.nb,tte.ob,tte.pb,tte.qb,tte.rb,tte.sb,tte.ub,tte.yb,tte.zb,tte.Ab,tte.Bb,tte.Cb,tte.Db,tte.Eb,tte.Fb,tte.Hb,tte.Ib,tte.Jb,tte.Kb,tte.Lb,tte.Mb,tte.Nb,tte.Ob,tte.Pb,tte.Rb,tte.Sb,tte.Tb,tte.Ub,tte.Vb,tte.Wb,tte.Xb,tte.Yb,tte.Zb,tte.ac,tte.bc,tte.cc,tte.dc,tte.ec,tte.fc,tte.hc,tte.ic,tte.jc,tte.lc,tte.mc,tte.nc,tte.oc,tte.pc,tte.qc,tte.sc,tte.tc,tte.uc,tte.vc,tte.wc,tte.xc,tte.yc,tte.zc,tte.Ac,tte.Bc,tte.Cc,tte.Dc,tte.Ec,tte.Fc,tte.Gc,tte.Ic,tte.Jc,tte.Kc,tte.Lc,tte.Mc,tte.Nc,tte.Oc,tte.Pc,tte.Qc,tte.Rc,tte.Sc,tte.Uc,tte.Vc,tte.Wc,tte.Yc,tte.Zc,tte.ad,tte.bd,tte.cd,tte.dd,tte.hd,tte.jd,tte.kd,tte.ld,tte.od,tte.md,tte.nd,tte.pd,tte.qd,tte.rd,tte.ud,tte.vd,tte.wd,tte.yd,tte.zd,tte.Ad,tte.Bd,tte.Ed,tte.Fd,tte.Hd,tte.Id,tte.Kd,tte.Ld,tte.Nd,tte.Pd,tte.Qd,tte.Rd,tte.Sd,tte.Ud,tte.Vd,tte.Xd,tte.Zd,tte.Yd,tte.ae,tte.be,tte.ce,tte.de,tte.ee,tte.je,tte.fe,tte.ge,tte.he,tte.ke,tte.le)}}return e.\u0275fac=function(t){return new(t||e)(c.Zb(ee.b))},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({imports:[[z.a,i.h.forChild(Xne),T]]}),e})();c.Gc(GM,[_s,TR,HM],[]),c.Gc(eR,[_s,qR,zw],[]),c.Gc(xb,[_s,Gm,Ii],[]),c.Gc(rv,[_s,NM,ZS],[]),c.Gc(Au,[_s,hO,Pk],[]),c.Gc($s,[_s,Lp,bh],[]),c.Gc(WR,[_s,fA,xO],[]),c.Gc(KR,[_s,w4,U4],[]),c.Gc(ZR,[_s,S7,J7],[]),c.Gc(LC,[C.m,C.n,pe.a,te.i,te.j,vn,HA,Vu,pn.a,te.a,GM,hU,eR,eC,Db,xb,zu,WR,Pd,nv,rv,Au,$s,La,KR,ZR,iB,S1,C.o],[K.c])}}]);