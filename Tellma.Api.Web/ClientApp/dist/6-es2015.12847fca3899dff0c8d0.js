(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ZMrW:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",function(){return Te});var i=n("tyNb"),s=n("PCNd"),c=n("fXoL"),r=n("PVj+"),o=n("sYmb"),a=n("ofXK"),l=n("6NWb");function u(t,e){if(1&t&&(c.Sb(0,"a",4),c.Sb(1,"div",5),c.Nb(2,"fa-icon",6),c.Rb(),c.Sb(3,"div",7),c.Lc(4),c.Rb(),c.Rb()),2&t){const t=e.$implicit,n=c.gc();c.Eb("d-none",!n.canView("admin-users")),c.nc("routerLink",t.link),c.zb(2),c.nc("icon",t.icon),c.zb(2),c.Nc(" ",t.label()," ")}}let d=(()=>{class t{constructor(t,e){this.workspace=t,this.translate=e,this.mainMenuItems=[{label:()=>this.translate.instant("AdminUsers"),icon:"users",view:"admin-users",link:"../admin-users"},{label:()=>this.translate.instant("IdentityServerUsers"),icon:"shield-alt",view:"identity-server-users",link:"../identity-server-users"}]}ngOnInit(){}canView(t){return this.workspace.admin.canRead(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(r.m),c.Mb(o.d))},t.\u0275cmp=c.Gb({type:t,selectors:[["t-admin-main-menu"]],decls:7,vars:4,consts:[[1,"container","py-4","px-5"],[1,"t-menu-section"],[1,"t-teal1"],["class","t-menu-item btn m-1",3,"d-none","routerLink",4,"ngFor","ngForOf"],[1,"t-menu-item","btn","m-1",3,"routerLink"],[1,"pt-4","pb-1","t-menu-item-icon"],[3,"icon"],[1,"px-2","t-menu-item-label"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"span"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb(),c.Sb(5,"div",2),c.Jc(6,u,5,5,"a",3),c.Rb(),c.Rb()),2&t&&(c.zb(3),c.Mc(c.ic(4,2,"AdminConsole")),c.zb(3),c.nc("ngForOf",e.mainMenuItems))},directives:[a.k,i.g,l.a],pipes:[o.c],encapsulation:2}),t})(),b=(()=>{class t{constructor(t){this.router=t}onHome(){this.router.navigate(["admin","console","main-menu"])}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(i.e))},t.\u0275cmp=c.Gb({type:t,selectors:[["t-admin-page-not-found"]],decls:11,vars:9,consts:[[1,"p-5"],[1,"text-danger"],[1,"text-muted"],[1,"mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"h2",1),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"p",2),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Sb(7,"div",3),c.Sb(8,"button",4),c.cc("click",function(){return e.onHome()}),c.Lc(9),c.hc(10,"translate"),c.Rb(),c.Rb(),c.Rb()),2&t&&(c.zb(2),c.Nc(" ",c.ic(3,3,"Error_PageNotFound")," "),c.zb(3),c.Mc(c.ic(6,5,"Error_PageNotFoundMessage")),c.zb(4),c.Mc(c.ic(10,7,"Home")))},pipes:[o.c],encapsulation:2}),t})();var m=n("XNiG"),h=n("LRne"),p=n("eIep"),g=n("vkgz"),f=n("JIr8"),v=n("WO2E"),w=n("k0Of"),S=n("AyGX"),y=n("1bxP"),M=n("KOvB"),A=n("eQPh"),I=n("rd7j"),R=n("0xbw"),N=n("o6Md"),C=n("1kSV"),E=n("OoQV"),z=n("AYjT"),D=n("2I7G"),L=n("3Pt+"),U=n("mrGz"),k=n("f3yp");const P=["myAccountModal"];function x(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",21),c.cc("click",function(){c.Dc(t);const e=c.gc();return e.onCollapse(),e.nav.onBack()}),c.Nb(1,"fa-icon",22),c.Rb()}if(2&t){const t=c.gc();c.nc("disabled",!t.nav.canBack),c.zb(1),c.nc("flip",t.flip)}}function _(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",21),c.cc("click",function(){c.Dc(t);const e=c.gc();return e.onCollapse(),e.nav.onForward()}),c.Nb(1,"fa-icon",23),c.Rb()}if(2&t){const t=c.gc();c.nc("disabled",!t.nav.canForward),c.zb(1),c.nc("flip",t.flip)}}function O(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",17),c.cc("click",function(){c.Dc(t);const e=c.gc().$implicit,n=c.gc();return n.onSetLanguage(e),n.onCollapse()}),c.Lc(1),c.Rb()}if(2&t){const t=c.gc().$implicit,e=c.gc();c.zb(1),c.Nc(" ",e.languageName(t)," ")}}function J(t,e){if(1&t&&(c.Qb(0),c.Jc(1,O,2,1,"button",24),c.Pb()),2&t){const t=e.$implicit,n=c.gc();c.zb(1),c.nc("ngIf",t!==n.currentLanguage)}}const T=function(){return{updateOn:"blur"}};function j(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",38),c.Sb(1,"t-form-group",39),c.Sb(2,"h2",40),c.Lc(3),c.Rb(),c.Rb(),c.Sb(4,"t-form-group",41),c.hc(5,"translate"),c.Sb(6,"t-text-editor",42),c.cc("ngModelChange",function(e){return c.Dc(t),c.gc(2).myUser.Name=e}),c.Rb(),c.Rb(),c.Rb()}if(2&t){const t=c.gc(2);c.zb(3),c.Mc(t.myEmail),c.zb(1),c.nc("label",c.ic(5,5,"Name"))("serverErrors",null==t.myUser||null==t.myUser.serverErrors?null:t.myUser.serverErrors.Name),c.zb(2),c.nc("ngModel",t.myUser.Name)("ngModelOptions",c.qc(7,T))}}function F(t,e){if(1&t&&(c.Sb(0,"t-error-message"),c.Lc(1),c.Rb()),2&t){const t=c.gc(2);c.zb(1),c.Nc(" ",t.saveErrorMessage," ")}}function K(t,e){if(1&t&&(c.Sb(0,"t-error-message"),c.Lc(1),c.Rb()),2&t){const t=c.gc(2);c.zb(1),c.Nc(" ",t.errorMessage," ")}}function V(t,e){1&t&&(c.Sb(0,"div",43),c.Nb(1,"t-spinner",44),c.Rb()),2&t&&(c.zb(1),c.nc("scale",2))}function q(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",25),c.Sb(1,"h5",26),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",27),c.cc("click",function(){return e.$implicit.dismiss(!1)}),c.Sb(5,"span",28),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",29),c.Jc(8,j,7,8,"div",30),c.Jc(9,F,2,1,"t-error-message",31),c.Jc(10,K,2,1,"t-error-message",31),c.Jc(11,V,2,1,"div",32),c.Rb(),c.Sb(12,"div",33),c.Sb(13,"button",34),c.cc("click",function(){c.Dc(t);const n=e.$implicit;return c.gc().onSave(n)}),c.Nb(14,"fa-icon",35),c.Lc(15),c.hc(16,"translate"),c.Rb(),c.Sb(17,"button",36),c.cc("click",function(){return e.$implicit.close(!1)}),c.Nb(18,"fa-icon",37),c.Lc(19),c.hc(20,"translate"),c.Rb(),c.Rb()}if(2&t){const t=c.gc();c.zb(2),c.Nc(" ",c.ic(3,8,"MyAdminAccount")," "),c.zb(6),c.nc("ngIf",t.isMyUserLoaded),c.zb(1),c.nc("ngIf",t.isMyUserLoaded&&!!t.saveErrorMessage),c.zb(1),c.nc("ngIf",t.isMyUserError),c.zb(1),c.nc("ngIf",t.isMyUserLoading),c.zb(2),c.nc("disabled",!t.canSave),c.zb(2),c.Nc(" \xa0",c.ic(16,10,"Save")," "),c.zb(4),c.Nc(" \xa0",c.ic(20,12,"Cancel")," ")}}const H=function(t){return{placeholder:t}};let B=(()=>{class t{constructor(t,e,n,i,s,c,r,o,a){this.workspace=t,this.nav=e,this.translate=n,this.progress=i,this.auth=s,this.storage=c,this.apiService=r,this.document=o,this.modalService=a,this.isCollapsed=!0,this.notifyDestruct$=new m.a,this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$),this.notifyFetch$=new m.a,this.notifyFetch$.pipe(Object(p.a)(()=>this.doFetch())).subscribe()}ngOnInit(){this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$)}ngOnDestroy(){this.notifyDestruct$.next(),this._subscription&&this._subscription.unsubscribe()}get activeLanguages(){return this._activeLanguages||(this._activeLanguages=Object.keys(y.a)),this._activeLanguages}languageName(t){return y.a[t]}onSetLanguage(t){this.translate.use(t),this.storage.setItem("user_culture",t)}get currentLanguage(){return this.workspace.ws.culture||this.translate.currentLang||this.translate.defaultLang||"en"}onToggleCollapse(){this.isCollapsed=!this.isCollapsed}onCollapse(){this.isCollapsed=!0}get settings(){return this.ws?this.ws.settings:null}get ws(){return this.workspace.admin}get userName(){return this.ws.userSettings.Name}get isRtl(){return this.workspace.ws.isRtl}onMySystemAccount(){location.href=v.b.identityAddress+"/identity/manage/"}onSignOut(){this.progress.startAsyncOperation("sign_out","RedirectingToSignOut"),this.auth.signOut()}get flip(){return this.isRtl?"horizontal":null}onMyAdminAccount(){this.fetch(),this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.myAccountModal,{windowClass:"t-myuser-modal"}).result.then(()=>this.onMyAdminAccountClose(),()=>this.onMyAdminAccountClose())}onMyAdminAccountClose(){this.workspace.ignoreKeyDownEvents=!1}fetch(){this.notifyFetch$.next(null)}doFetch(){return this.myUserStatus=r.c.loading,this.adminUsersApi.getMyUser().pipe(Object(g.a)(t=>{Object(w.b)(t,this.workspace),this.myUserStatus=r.c.loaded,this.onEdit()}),Object(f.a)(t=>(this._errorMessage=t.error,this.myUserStatus=r.c.error,Object(h.a)(null))))}onEdit(){const t=this.ws.get("AdminUser",this.ws.userSettings.UserId);this.myUser={Name:t.Name}}onSave(t){this._errorMessage=null,this._saveErrorMessage=null,Object(S.c)(this.myUser),this.adminUsersApi.saveMyUser(this.myUser).subscribe(e=>{Object(w.b)(e,this.workspace),t.close(!0)},t=>{if(422===t.status){const e=Object(S.b)(this.myUser,t.error);Object.keys(e).length>0&&console.error(e)}else this._saveErrorMessage=t.error;return Object(h.a)(null)})}get errorMessage(){return this._errorMessage}get saveErrorMessage(){return this._saveErrorMessage}get isMyUserLoaded(){return this.myUserStatus===r.c.loaded}get isMyUserError(){return this.myUserStatus===r.c.error}get isMyUserLoading(){return this.myUserStatus===r.c.loading}get myEmail(){return this.ws.get("AdminUser",this.ws.userSettings.UserId).Email}get canSave(){return this.isMyUserLoaded}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(r.m),c.Mb(M.a),c.Mb(o.d),c.Mb(A.a),c.Mb(I.b),c.Mb(R.a),c.Mb(N.a),c.Mb(a.c),c.Mb(C.u))},t.\u0275cmp=c.Gb({type:t,selectors:[["t-admin-shell"]],viewQuery:function(t,e){if(1&t&&c.Qc(P,3),2&t){let t;c.zc(t=c.dc())&&(e.myAccountModal=t.first)}},decls:41,vars:35,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-light","shadow-sm","border-bottom","bg-white","navbar-expand-sm","p-0","align-items-sm-stretch"],["routerLink","main-menu",1,"t-brand-link","t-navbar-button","d-flex","align-items-baseline",3,"title"],["theme","light",3,"scale"],[1,"mx-2","d-flex"],["class","t-navbar-button nav-link",3,"disabled","click",4,"ngIf"],["type","button",1,"navbar-toggler","mx-2",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse","align-items-stretch",3,"ngbCollapse"],[1,"nav","navbar-nav","px-4","px-lg-0"],[1,"nav","navbar-nav","p-0"],["ngbDropdown","","container","",1,"nav-item"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","align-items-center"],[1,"px-2"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow","m-0"],["type","button","ngbDropdownItem","","routerLink","/root/companies",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","","routerLink","/root/welcome",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[4,"ngFor","ngForOf"],[1,"t-rest-of-screen","container-fluid"],["myAccountModal",""],[1,"t-navbar-button","nav-link",3,"disabled","click"],["icon","arrow-left",3,"flip"],["icon","arrow-right",3,"flip"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0","bg-white"],["class","row m-0 px-1 px-sm-3 pt-3 pt-sm-4 pb-3 pb-sm-5",4,"ngIf"],[4,"ngIf"],["class","d-flex justify-content-center py-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"row","m-0","px-1","px-sm-3","pt-3","pt-sm-4","pb-3","pb-sm-5"],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","py-2"],[3,"scale"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"nav",1),c.Sb(2,"a",2),c.hc(3,"translate"),c.Nb(4,"t-brand",3),c.Rb(),c.Sb(5,"div",4),c.Jc(6,x,2,2,"button",5),c.Lc(7," \xa0 "),c.Jc(8,_,2,2,"button",5),c.Rb(),c.Sb(9,"button",6),c.cc("click",function(){return e.onToggleCollapse()}),c.Nb(10,"span",7),c.Rb(),c.Sb(11,"div",8),c.Nb(12,"ol",9),c.Sb(13,"ol",10),c.Sb(14,"li",11),c.Sb(15,"button",12),c.Sb(16,"span",13),c.Lc(17),c.Rb(),c.Rb(),c.Sb(18,"div",14),c.Sb(19,"button",15),c.cc("click",function(){return e.onCollapse()}),c.Lc(20),c.hc(21,"translate"),c.Rb(),c.Sb(22,"button",16),c.cc("click",function(){return e.onCollapse()}),c.Lc(23),c.hc(24,"translate"),c.Rb(),c.Sb(25,"button",17),c.cc("click",function(){return e.onMySystemAccount(),e.onCollapse()}),c.Lc(26),c.hc(27,"translate"),c.hc(28,"translate"),c.Rb(),c.Sb(29,"button",17),c.cc("click",function(){return e.onMyAdminAccount(),e.onCollapse()}),c.Lc(30),c.hc(31,"translate"),c.Rb(),c.Sb(32,"button",17),c.cc("click",function(){return e.onSignOut(),e.onCollapse()}),c.Lc(33),c.hc(34,"translate"),c.Rb(),c.Nb(35,"hr"),c.Jc(36,J,2,1,"ng-container",18),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(37,"main",19),c.Nb(38,"router-outlet"),c.Rb(),c.Rb(),c.Jc(39,q,21,14,"ng-template",null,20,c.Kc)),2&t&&(c.zb(2),c.nc("title",c.ic(3,18,"Home")),c.zb(2),c.nc("scale",1),c.zb(2),c.nc("ngIf",e.nav.showBack),c.zb(2),c.nc("ngIf",e.nav.showForward),c.zb(3),c.nc("ngbCollapse",e.isCollapsed),c.zb(1),c.Eb("mr-auto",!e.isRtl)("ml-auto",e.isRtl),c.zb(5),c.Mc(e.userName),c.zb(1),c.Eb("dropdown-menu-right",!e.isRtl),c.zb(2),c.Nc(" ",c.ic(21,20,"MyCompanies")," "),c.zb(3),c.Nc(" ",c.ic(24,22,"WelcomePage")," "),c.zb(3),c.Nc(" ",c.jc(27,24,"My0Account",c.rc(33,H,c.ic(28,27,"AppName")))," "),c.zb(4),c.Nc(" ",c.ic(31,29,"MyAdminAccount")," "),c.zb(3),c.Nc(" ",c.ic(34,31,"SignOut")," "),c.zb(3),c.nc("ngForOf",e.activeLanguages))},directives:[C.C,i.g,E.a,a.l,C.d,C.m,C.s,C.q,C.p,i.f,a.k,i.i,l.a,z.a,D.a,L.m,L.i,L.j,U.a,k.a],pipes:[o.c],encapsulation:2}),t})();var $=n("DWXW"),G=n("wqEn"),Q=n("TJ1c"),W=n("Y7zQ"),Y=n("O90C"),X=n("QFit"),Z=n("EoPe");function tt(t,e){if(1&t&&(c.Sb(0,"div",11),c.Nb(1,"t-auto-cell",12),c.Rb(),c.Sb(2,"div",13),c.Nb(3,"t-auto-cell",14),c.Nb(4,"t-auto-cell",15),c.Rb()),2&t){const t=e.id,n=c.gc();c.zb(1),c.nc("entity",n.c[t]),c.zb(2),c.nc("entity",n.c[t]),c.zb(1),c.nc("entity",n.c[t])}}function et(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"AdminUser"),"\n")}function nt(t,e){if(1&t&&c.Nb(0,"t-auto-cell",16),2&t){const t=e.id,n=c.gc();c.nc("entity",n.c[t])}}function it(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"SendInvitationEmail")," ")}function st(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function ct(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function rt(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"CreatedByMe")," ")}function ot(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"User_New")," ")}function at(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"User_Invited")," ")}function lt(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"User_Member")," ")}const ut=function(t,e,n,i,s){return{template:t,action:e,canInvite:n,actionTooltip:i,showAction:s}},dt=function(t,e,n,i){return{template:t,action:e,canAction:n,actionTooltip:i}},bt=function(t,e,n){return[t,e,n]},mt=function(t){return{template:t,expression:"CreatedById eq me"}},ht=function(t){return[t]},pt=function(t){return{template:t,expression:"State eq 0"}},gt=function(t){return{template:t,expression:"State eq 1"}},ft=function(t){return{template:t,expression:"State eq 2"}},vt=function(t,e){return{CreatedBy:t,State:e}};let wt=(()=>{class t extends Y.a{constructor(t,e,n){super(),this.workspace=t,this.api=e,this.translate=n,this.adminUsersApi=this.api.adminUsersApi(this.notifyDestruct$),this.onActivate=t=>this.adminUsersApi.activate(t,{returnEntities:!0}).pipe(Object(g.a)(t=>Object(w.c)(t,this.workspace))),this.onDeactivate=t=>this.adminUsersApi.deactivate(t,{returnEntities:!0}).pipe(Object(g.a)(t=>Object(w.c)(t,this.workspace))),this.canActivateDeactivateItem=t=>this.ws.canDo("admin-users","IsActive",null),this.activateDeactivateTooltip=t=>this.canActivateDeactivateItem(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.onInvite=t=>this.adminUsersApi.invite(t,{returnEntities:!0}).pipe(Object(g.a)(t=>Object(w.c)(t,this.workspace))),this.canInvite=t=>this.ws.canDo("admin-users","SendInvitationEmail",null),this.inviteTooltip=t=>this.canActivateDeactivateItem(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.showInvite=t=>this.workspace.globalSettings.CanInviteUsers,this.adminUsersApi=this.api.adminUsersApi(this.notifyDestruct$)}get c(){return this.ws.AdminUser}get ws(){return this.workspace.admin}filterStateFilters(t){const e=this.workspace.globalSettings;return this._filterStateFiltersInput===t&&this._globalSettings===e||(this._filterStateFiltersInput=t,e.CanInviteUsers?this._filterStateFiltersResult=t:t?this._filterStateFiltersResult=t.filter(t=>"State eq 1"!==t.expression):delete this._filterStateFiltersResult),this._filterStateFiltersResult}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(r.m),c.Mb(N.a),c.Mb(o.d))},t.\u0275cmp=c.Gb({type:t,selectors:[["t-admin-users-master"]],features:[c.wb],decls:22,vars:49,consts:[["collection","AdminUser","selectDefault","Email,State,LastAccess","selectForTiles","State,Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["invite",""],["activate",""],["deactivate",""],["createdByMe",""],["newUser",""],["invited",""],["member",""],[1,"d-flex","justify-content-between"],["collection","AdminUser","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","AdminUser","path","Email",3,"entity"],["collection","AdminUser","path","State",3,"entity"],["collection","AdminUser",3,"entity"]],template:function(t,e){if(1&t&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,tt,5,3,"ng-template",null,1,c.Kc),c.Jc(4,et,2,3,"ng-template",null,2,c.Kc),c.Jc(6,nt,1,1,"ng-template",null,3,c.Kc),c.Jc(8,it,2,3,"ng-template",null,4,c.Kc),c.Jc(10,st,2,3,"ng-template",null,5,c.Kc),c.Jc(12,ct,2,3,"ng-template",null,6,c.Kc),c.Jc(14,rt,2,3,"ng-template",null,7,c.Kc),c.Jc(16,ot,2,3,"ng-template",null,8,c.Kc),c.Jc(18,at,2,3,"ng-template",null,9,c.Kc),c.Jc(20,lt,2,3,"ng-template",null,10,c.Kc)),2&t){const t=c.Ac(3),n=c.Ac(5),i=c.Ac(7),s=c.Ac(9),r=c.Ac(11),o=c.Ac(13),a=c.Ac(15),l=c.Ac(17),u=c.Ac(19),d=c.Ac(21);c.nc("mode",e.mode)("showCreateButton",e.showCreate)("filterDefault",e.filter)("additionalSelect",e.additionalSelect)("masterCrumb",c.ic(1,10,"AdminUsers"))("tileTemplate",t)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",c.tc(28,bt,c.vc(12,ut,s,e.onInvite,e.canInvite,e.inviteTooltip,e.showInvite),c.uc(18,dt,r,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.uc(23,dt,o,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",c.sc(46,vt,c.rc(34,ht,c.rc(32,mt,a)),e.filterStateFilters(c.tc(42,bt,c.rc(36,pt,l),c.rc(38,gt,u),c.rc(40,ft,d)))))}},directives:[X.a,Z.a],pipes:[o.c],encapsulation:2}),t})();var St=n("CHDZ"),yt=n("U6XH"),Mt=n("ABE2"),At=n("88Q5"),It=n("1nIS"),Rt=n("56d8");function Nt(t,e){if(1&t&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&t){const t=e.model;c.zb(1),c.Mc(null==t?null:t.Name)}}function Ct(t,e){if(1&t&&(c.Sb(0,"div"),c.Sb(1,"span"),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Rb()),2&t){const t=c.gc().model;c.Eb("active",1===(null==t?null:t.State)),c.zb(2),c.Mc(c.ic(3,3,"User_Invited"))}}function Et(t,e){if(1&t&&(c.Sb(0,"div",7),c.Sb(1,"t-restricted",8),c.Sb(2,"div",9),c.Sb(3,"div"),c.Sb(4,"span"),c.Lc(5),c.hc(6,"translate"),c.Rb(),c.Rb(),c.Jc(7,Ct,4,5,"div",10),c.Sb(8,"div"),c.Sb(9,"span"),c.Lc(10),c.hc(11,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"div",11),c.Sb(13,"span"),c.Lc(14),c.hc(15,"translate"),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&t){const t=e.model,n=c.gc();c.zb(1),c.nc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.State),c.zb(2),c.Eb("active",!(null!=t&&t.Id)||0===(null==t?null:t.State)),c.zb(2),c.Mc(c.ic(6,9,"User_New")),c.zb(2),c.nc("ngIf",n.showInvitedState),c.zb(1),c.Eb("active",2===(null==t?null:t.State)),c.zb(2),c.Mc(c.ic(11,11,"User_Member")),c.zb(4),c.Mc(c.ic(15,13,2===(null==t?null:t.State)?"User_Member":1===(null==t?null:t.State)?"User_Invited":"User_New"))}}const zt=function(t){return{name:t}};function Dt(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",28),c.Sb(1,"span"),c.Nb(2,"fa-icon",29),c.Lc(3),c.hc(4,"translate"),c.Sb(5,"button",30),c.cc("click",function(){c.Dc(t);const e=c.gc().model;return c.gc().onInvite(e)}),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&t){const t=c.gc().model;c.zb(3),c.Nc("\xa0\xa0",c.jc(4,2,"AdminUserNewNotice",c.rc(7,zt,null==t?null:t.Name))," \xa0\xa0"),c.zb(3),c.Nc(" ",c.ic(7,5,"SendInvitationEmail"),"")}}const Lt=function(t){return{email:t}};function Ut(t,e){if(1&t&&(c.Sb(0,"div",28),c.Sb(1,"span"),c.Nb(2,"fa-icon",29),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&t){const t=c.gc().model;c.zb(3),c.Nc("\xa0\xa0",c.jc(4,1,"AdminUserFreshInvitedNotice",c.rc(4,Lt,null==t?null:t.Email)),"")}}function kt(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",28),c.Sb(1,"span"),c.Nb(2,"fa-icon",29),c.Lc(3),c.hc(4,"translate"),c.Sb(5,"button",30),c.cc("click",function(){c.Dc(t);const e=c.gc().model;return c.gc().onInvite(e)}),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Rb()}if(2&t){const t=c.gc().model;c.zb(3),c.Nc("\xa0\xa0",c.jc(4,2,"AdminUserExpiredInvitedNotice",c.rc(7,zt,null==t?null:t.Name))," \xa0\xa0"),c.zb(3),c.Nc(" ",c.ic(7,5,"SendInvitationEmail"),"")}}function Pt(t,e){if(1&t&&(c.Sb(0,"h2",31),c.Lc(1),c.Rb()),2&t){const t=c.gc().model;c.zb(1),c.Mc(null==t?null:t.Name)}}const xt=function(){return{updateOn:"blur"}};function _t(t,e){if(1&t){const t=c.Tb();c.Sb(0,"t-text-editor",32),c.cc("ngModelChange",function(e){return c.Dc(t),c.gc().model.Name=e}),c.hc(1,"translate"),c.Rb()}if(2&t){const t=c.gc().model;c.nc("focusIf",!t.Id)("ngModel",t.Name)("ngModelOptions",c.qc(6,xt))("placeholder",c.ic(1,4,"Name"))}}function Ot(t,e){if(1&t&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&t){const t=c.gc().model;c.zb(1),c.Mc(null==t?null:t.Email)}}function Jt(t,e){if(1&t){const t=c.Tb();c.Sb(0,"t-text-editor",33),c.cc("ngModelChange",function(e){return c.Dc(t),c.gc().model.Email=e}),c.Rb()}if(2&t){const t=c.gc().model,e=c.gc();c.nc("ngModel",t.Email)("ngModelOptions",c.qc(3,xt))("disabled",!e.isNew)}}function Tt(t,e){if(1&t&&(c.Sb(0,"t-form-group",34),c.hc(1,"translate"),c.Nb(2,"t-auto-cell",35),c.Rb()),2&t){const t=c.gc().model;c.nc("label",c.ic(1,2,"User_LastActivity")),c.zb(2),c.nc("entity",t)}}function jt(t,e){if(1&t&&(c.Sb(0,"t-form-group",34),c.hc(1,"translate"),c.Sb(2,"div"),c.Lc(3),c.hc(4,"translate"),c.Rb(),c.Rb()),2&t){const t=c.gc().model;c.nc("label",c.ic(1,2,"IsActive")),c.zb(3),c.Mc(c.ic(4,4,t?t.IsActive?"Yes":"No":""))}}function Ft(t,e){1&t&&(c.Sb(0,"span",36),c.Lc(1,"\xa0"),c.Nb(2,"fa-icon",37),c.Rb())}function Kt(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Mc(c.ic(1,1,"Permission_View"))}function Vt(t,e){if(1&t&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&t){const t=c.gc().item,e=c.gc(3);c.zb(1),c.Nc(" ",e.permissionViewLookup(t.View)," ")}}function qt(t,e){if(1&t){const t=c.Tb();c.Sb(0,"t-selector",49),c.cc("ngModelChange",function(e){return c.Dc(t),c.gc().item.View=e})("ngModelChange",function(){c.Dc(t);const e=c.gc(),n=e.item,i=e.update,s=c.gc(3);return i.call(null,n),s.onPermissionChanged(n)}),c.Rb()}if(2&t){const t=c.gc().item,e=c.gc(3);c.nc("choices",e.permissionViewChoices)("ngModel",t.View)("required",!t.PH)}}function Ht(t,e){if(1&t&&(c.Sb(0,"t-form-group-cell",47),c.Jc(1,Vt,2,1,"div",17),c.Jc(2,qt,1,3,"t-selector",48),c.Rb()),2&t){const t=e.item,n=c.gc(2).isEdit;c.nc("serverErrors",null==t.serverErrors?null:t.serverErrors.View),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Bt(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Mc(c.ic(1,1,"Permission_Action"))}function $t(t,e){if(1&t&&(c.Sb(0,"div"),c.Lc(1),c.hc(2,"translate"),c.Rb()),2&t){const t=c.gc().item,e=c.gc(3);c.zb(1),c.Mc(c.ic(2,1,e.permissionActionLookup(null==t?null:t.Action)))}}function Gt(t,e){if(1&t){const t=c.Tb();c.Sb(0,"t-selector",51),c.cc("ngModelChange",function(e){return c.Dc(t),c.gc().item.Action=e})("ngModelChange",function(){c.Dc(t);const e=c.gc(),n=e.item,i=e.update,s=c.gc(3);return i.call(null,n),s.onPermissionChanged(n)}),c.Rb()}if(2&t){const t=c.gc().item,e=c.gc(3);c.nc("ngModel",t.Action)("required",!t.PH)("ngModelOptions",c.qc(5,xt))("choices",e.permissionActionChoices(t))("disabled",!t.View)}}function Qt(t,e){if(1&t&&(c.Sb(0,"t-form-group-cell",47),c.Jc(1,$t,3,3,"div",17),c.Jc(2,Gt,1,6,"t-selector",50),c.Rb()),2&t){const t=e.item,n=c.gc(2).isEdit;c.nc("serverErrors",null==t.serverErrors?null:t.serverErrors.Action),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function Wt(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Mc(c.ic(1,1,"Permission_Criteria"))}function Yt(t,e){if(1&t&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&t){const t=c.gc().item;c.zb(1),c.Mc(t.Criteria)}}function Xt(t,e){if(1&t){const t=c.Tb();c.Sb(0,"t-text-editor",53),c.cc("ngModelChange",function(e){return c.Dc(t),c.gc().item.Criteria=e})("ngModelChange",function(){c.Dc(t);const e=c.gc();return e.update.call(null,e.item)}),c.Rb()}if(2&t){const t=c.gc().item,e=c.gc(3);c.nc("ngModel",t.Criteria)("ngModelOptions",c.qc(3,xt))("disabled",e.disableCriteria(t))}}function Zt(t,e){if(1&t&&(c.Sb(0,"t-form-group-cell",47),c.Jc(1,Yt,2,1,"div",17),c.Jc(2,Xt,1,4,"t-text-editor",52),c.Rb()),2&t){const t=e.item,n=c.gc(2).isEdit;c.nc("serverErrors",null==t.serverErrors?null:t.serverErrors.Criteria),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}function te(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Mc(c.ic(1,1,"Memo"))}function ee(t,e){if(1&t&&(c.Sb(0,"div"),c.Lc(1),c.Rb()),2&t){const t=c.gc().item;c.zb(1),c.Mc(t.Memo)}}function ne(t,e){if(1&t){const t=c.Tb();c.Sb(0,"t-text-editor",55),c.cc("ngModelChange",function(e){return c.Dc(t),c.gc().item.Memo=e})("ngModelChange",function(){c.Dc(t);const e=c.gc();return e.update.call(null,e.item)}),c.Rb()}if(2&t){const t=c.gc().item;c.nc("ngModel",t.Memo)("ngModelOptions",c.qc(2,xt))}}function ie(t,e){if(1&t&&(c.Sb(0,"t-form-group-cell",47),c.Jc(1,ee,2,1,"div",17),c.Jc(2,ne,1,3,"t-text-editor",54),c.Rb()),2&t){const t=e.item,n=c.gc(2).isEdit;c.nc("serverErrors",null==t.serverErrors?null:t.serverErrors.Memo),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n)}}const se=function(){return["View","Action","Criteria","Memo"]},ce=function(t,e){return{headerTemplate:t,rowTemplate:e,weight:1}},re=function(t,e,n,i){return{View:t,Action:e,Criteria:n,Memo:i}};function oe(t,e){if(1&t&&(c.Sb(0,"t-restricted",8),c.Nb(1,"t-table",38),c.Rb(),c.Jc(2,Kt,2,3,"ng-template",null,39,c.Kc),c.Jc(4,Ht,3,3,"ng-template",null,40,c.Kc),c.Jc(6,Bt,2,3,"ng-template",null,41,c.Kc),c.Jc(8,Qt,3,3,"ng-template",null,42,c.Kc),c.Jc(10,Wt,2,3,"ng-template",null,43,c.Kc),c.Jc(12,Zt,3,3,"ng-template",null,44,c.Kc),c.Jc(14,te,2,3,"ng-template",null,45,c.Kc),c.Jc(16,ie,3,3,"ng-template",null,46,c.Kc)),2&t){const t=c.Ac(3),e=c.Ac(5),n=c.Ac(7),i=c.Ac(9),s=c.Ac(11),r=c.Ac(13),o=c.Ac(15),a=c.Ac(17),l=c.gc(),u=l.model,d=l.isEdit;c.Eb("p-4",1===(null==u||null==u.EntityMetadata?null:u.EntityMetadata.Permissions)),c.nc("metadata",null==u||null==u.EntityMetadata?null:u.EntityMetadata.Permissions),c.zb(1),c.nc("dataSource",null==u?null:u.Permissions)("isEdit",d)("columnPaths",c.qc(7,se))("columnTemplates",c.uc(20,re,c.sc(8,ce,t,e),c.sc(11,ce,n,i),c.sc(14,ce,s,r),c.sc(17,ce,o,a)))}}function ae(t,e){if(1&t&&(c.Jc(0,Dt,8,9,"div",12),c.Jc(1,Ut,5,6,"div",12),c.Jc(2,kt,8,9,"div",12),c.Sb(3,"t-form-group",13),c.Jc(4,Pt,2,1,"h2",14),c.Jc(5,_t,2,7,"t-text-editor",15),c.Rb(),c.Sb(6,"t-form-group",16),c.hc(7,"translate"),c.Jc(8,Ot,2,1,"div",17),c.Jc(9,Jt,1,4,"t-text-editor",18),c.Rb(),c.Jc(10,Tt,3,4,"t-form-group",19),c.Jc(11,jt,5,6,"t-form-group",19),c.Sb(12,"ul",20,21),c.Sb(14,"li",22),c.Sb(15,"a",23),c.Sb(16,"span",24),c.Lc(17),c.hc(18,"translate"),c.hc(19,"number"),c.Rb(),c.Jc(20,Ft,3,0,"span",25),c.Rb(),c.Jc(21,oe,18,25,"ng-template",26),c.Rb(),c.Rb(),c.Nb(22,"div",27)),2&t){const t=e.model,n=e.isEdit,i=c.Ac(13),s=c.gc();c.nc("ngIf",s.showUserNewNotice(t,n)),c.zb(1),c.nc("ngIf",s.showUserFreshInvitedNotice(t)),c.zb(1),c.nc("ngIf",s.showUserExpiredInvitedNotice(t,n)),c.zb(1),c.nc("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("label",c.ic(7,17,"User_Email"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Email),c.zb(2),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("ngIf",!n),c.zb(1),c.nc("destroyOnHide",!0),c.zb(2),c.nc("disabled",!0),c.zb(3),c.Mc(c.ic(18,19,"User_Permissions")+(t.Id&&2!==(null==t||null==t.EntityMetadata?null:t.EntityMetadata.Permissions)?"":" ("+c.ic(19,21,null==t||null==t.Permissions?null:t.Permissions.length)+")")),c.zb(3),c.nc("ngIf",s.showPermissionsError(t)),c.zb(2),c.nc("ngbNavOutlet",i)}}function le(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"Activate")," ")}function ue(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"Deactivate")," ")}function de(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"SendInvitationEmail")," ")}const be=function(t,e,n,i,s){return{template:t,action:e,showAction:n,canAction:i,actionTooltip:s}},me=function(t,e,n){return[t,e,n]};let he=(()=>{class t extends St.a{constructor(t,e,n,i){super(),this.workspace=t,this.api=e,this.translate=n,this.route=i,this.showRoles=!0,this.expand="Permissions",this.adminUsersApi=this.api.adminUsersApi(this.notifyDestruct$),this._permissionActionChoices={},this._viewsDb=null,this._currentViewsDb=null,this._viewsForSelector=null,this.create=()=>{const t={};return t.Name=this.initialText,t.Permissions=[],t},this.clone=t=>{if(t){const e=JSON.parse(JSON.stringify(t));return e.Id=null,e.Permissions&&e.Permissions.forEach(t=>{t.Id=null}),e}return console.error("Cloning a non existing item"),null},this.onInvite=t=>{t&&t.Id&&this.adminUsersApi.invite([t.Id],{returnEntities:!0}).pipe(Object(g.a)(t=>Object(w.c)(t,this.workspace))).subscribe({error:this.details.handleActionError})},this.showInvite=t=>!!t&&t.State<=1&&this.showInvitedState,this.canInvite=t=>this.ws.canDo("admin-users","SendInvitationEmail",t.Id),this.inviteTooltip=t=>this.canInvite(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.onActivate=t=>{t&&t.Id&&this.adminUsersApi.activate([t.Id],{returnEntities:!0}).pipe(Object(g.a)(t=>Object(w.c)(t,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=t=>{t&&t.Id&&this.adminUsersApi.deactivate([t.Id],{returnEntities:!0}).pipe(Object(g.a)(t=>Object(w.c)(t,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=t=>!!t&&!t.IsActive,this.showDeactivate=t=>!!t&&t.IsActive,this.canActivateDeactivateItem=t=>this.ws.canDo("admin-users","IsActive",t.Id),this.activateDeactivateTooltip=t=>this.canActivateDeactivateItem(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.adminUsersApi=this.api.adminUsersApi(this.notifyDestruct$)}get showInvitedState(){return this.workspace.globalSettings.CanInviteUsers}showUserNewNotice(t,e){return!e&&!!t&&!!t.Id&&!t.State&&this.workspace.globalSettings.CanInviteUsers}showUserFreshInvitedNotice(t){return!!t&&!!t.Id&&1===t.State&&Object(w.h)(new Date(t.InvitedAt),new Date)<this.workspace.globalSettings.TokenExpiryInDays}showUserExpiredInvitedNotice(t,e){return!e&&!!t&&!!t.Id&&1===t.State&&Object(w.h)(new Date(t.InvitedAt),new Date)>=this.workspace.globalSettings.TokenExpiryInDays}get ws(){return this.workspace.admin}showInvitationInfo(t){return!!t&&!!t.Email&&this.isNew}get isNew(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}showPermissionsError(t){return!!t&&!!t.Permissions&&t.Permissions.some(t=>!!t.serverErrors)}get viewsDb(){if(this._currentLang!==this.translate.currentLang){this._currentLang=this.translate.currentLang,this._viewsDb={};for(const t of Object.keys(yt.b)){const e=yt.b[t],n={name:()=>this.translate.instant(e.name),actions:{}};n.actions.All={supportsCriteria:!1},e.read&&(n.actions.Read={supportsCriteria:!0}),e.update&&(n.actions.Update={supportsCriteria:!0}),e.delete&&(n.actions.Delete={supportsCriteria:!0});for(const t of e.actions)n.actions[t.action]={supportsCriteria:t.criteria};this._viewsDb[t]=n}}return this._viewsDb}get permissionViewChoices(){if(this._currentViewsDb!==this.viewsDb){const t=this.viewsDb;this._currentViewsDb=t,this._viewsForSelector=Object.keys(t).map(e=>({value:e,name:t[e].name})),this._viewsForSelector.sort((t,e)=>t.name()<e.name()?-1:t.name()>e.name()?1:0)}return this._viewsForSelector}permissionViewLookup(t){return t?this.viewsDb[t]?this.viewsDb[t].name():(console.error(`missing view ${t}`),""):""}onPermissionChanged(t){const e=this.permissionActionChoices(t);1===e.length?t.Action=e[0].value:t.Action&&e.every(e=>e.value!==t.Action)&&(t.Action=null),this.disableCriteria(t)&&(t.Criteria=null)}disableCriteria(t){if(!t||!t.View||!t.Action)return!0;const e=this.viewsDb[t.View];if(e&&e.actions){const n=e.actions[t.Action];return!(n&&n.supportsCriteria)}return!0}permissionActionChoices(t){if(!t.View)return[];if(!this._permissionActionChoices[t.View]){const e=this.viewsDb[t.View];this._permissionActionChoices[t.View]=e&&e.actions?Object.keys(e.actions).map(t=>({name:()=>this.translate.instant(yt.a[t]),value:t})):[]}return this._permissionActionChoices[t.View]}permissionActionLookup(t){return t?"All"===t?"View_All":yt.a[t]:""}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(r.m),c.Mb(N.a),c.Mb(o.d),c.Mb(i.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["t-admin-users-details"]],inputs:{showRoles:"showRoles"},features:[c.wb],decls:14,vars:35,consts:[["collection","AdminUser",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","documentHeaderTemplate","actions"],["detailsCrumb",""],["documentHeader",""],["document",""],["activate",""],["deactivate",""],["invite",""],[1,"w-100","t-document-header","d-flex","justify-content-end"],[3,"metadata"],[1,"t-flow-chart","small"],[3,"active",4,"ngIf"],[1,"small","t-lone-state","active","d-none"],["class","col-12 alert-primary p-2 px-3 mb-3 mb-sm-4",4,"ngIf"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","permissions",3,"disabled"],["ngbNavLink",""],[1,"small","t-slightly-bold"],["class","text-danger",4,"ngIf"],["ngbNavContent",""],[1,"w-100",3,"ngbNavOutlet"],[1,"col-12","alert-primary","p-2","px-3","mb-3","mb-sm-4"],["icon","info-circle"],[1,"btn","btn-primary","btn-sm","py-0","align-baseline",3,"click"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"t-form-group",3,"label"],["collection","AdminUser","path","LastAccess",3,"entity"],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_View",""],["row_View",""],["header_Action",""],["row_Action",""],["header_Criteria",""],["row_Criteria",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"choices","ngModel","required","ngModelChange",4,"ngIf"],[3,"choices","ngModel","required","ngModelChange"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){if(1&t&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Nt,2,1,"ng-template",null,1,c.Kc),c.Jc(4,Et,16,15,"ng-template",null,2,c.Kc),c.Jc(6,ae,23,23,"ng-template",null,3,c.Kc),c.Jc(8,le,2,3,"ng-template",null,4,c.Kc),c.Jc(10,ue,2,3,"ng-template",null,5,c.Kc),c.Jc(12,de,2,3,"ng-template",null,6,c.Kc)),2&t){const t=c.Ac(3),n=c.Ac(5),i=c.Ac(7),s=c.Ac(9),r=c.Ac(11),o=c.Ac(13);c.nc("expand",e.expand)("idString",e.idString)("createFunc",e.create)("cloneFunc",e.clone)("mode",e.mode)("additionalSelect",e.additionalSelect)("masterCrumb",c.ic(1,11,"AdminUsers"))("detailsCrumb",t)("documentTemplate",i)("documentHeaderTemplate",n)("actions",c.tc(31,me,c.vc(13,be,o,e.onInvite,e.showInvite,e.canInvite,e.inviteTooltip),c.vc(19,be,s,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.vc(25,be,r,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))}},directives:[S.a,Mt.a,a.l,z.a,C.w,C.y,C.z,C.x,C.B,l.a,D.a,L.m,L.i,L.j,L.d,Z.a,At.a,It.a,Rt.a],pipes:[o.c,a.d],encapsulation:2}),t})();var pe=n("wHSu");function ge(t,e){if(1&t&&(c.Sb(0,"div",8),c.Nb(1,"t-auto-cell",9),c.Rb(),c.Sb(2,"div",10),c.Sb(3,"span",11),c.Lc(4,"\xa0"),c.Rb(),c.Rb()),2&t){const t=e.id,n=c.gc();c.zb(1),c.nc("entity",n.c[t])}}function fe(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"IdentityServerUser"),"\n")}function ve(t,e){if(1&t&&c.Nb(0,"t-auto-cell",12),2&t){const t=e.id,n=c.gc();c.nc("entity",n.c[t])}}function we(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"EmailConfirmed")," ")}function Se(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"EmailNotConfirmed")," ")}function ye(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"PasswordIsSet")," ")}function Me(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"PasswordIsNotSet")," ")}const Ae=function(){return[]},Ie=function(t){return{template:t,expression:"EmailConfirmed eq true"}},Re=function(t){return{template:t,expression:"EmailConfirmed eq false"}},Ne=function(t,e){return[t,e]},Ce=function(t){return{template:t,expression:"PasswordSet eq true"}},Ee=function(t){return{template:t,expression:"PasswordSet eq false"}},ze=function(t,e){return{EmailConfirmed:t,PasswordSet:e}},De=["resetPasswordModal"];function Le(t,e){if(1&t&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&t){const t=e.model;c.zb(1),c.Mc(null==t?null:t.Email)}}function Ue(t,e){if(1&t&&(c.Sb(0,"t-form-group",5),c.Sb(1,"h2",6),c.Lc(2),c.Rb(),c.Rb(),c.Sb(3,"t-form-group",7),c.hc(4,"translate"),c.Sb(5,"div"),c.Lc(6),c.hc(7,"translate"),c.Rb(),c.Rb(),c.Sb(8,"t-form-group",7),c.hc(9,"translate"),c.Sb(10,"div"),c.Lc(11),c.hc(12,"translate"),c.Rb(),c.Rb(),c.Sb(13,"t-form-group",7),c.hc(14,"translate"),c.Sb(15,"div"),c.Lc(16),c.hc(17,"translate"),c.Rb(),c.Rb(),c.Sb(18,"t-form-group",7),c.hc(19,"translate"),c.Nb(20,"t-auto-cell",8),c.Rb()),2&t){const t=e.model;c.zb(2),c.Mc(null==t?null:t.Email),c.zb(1),c.nc("label",c.ic(4,9,"IdentityServerUser_EmailConfirmed")),c.zb(3),c.Nc("",c.ic(7,11,!0===t.EmailConfirmed?"Yes":!1===t.EmailConfirmed?"No":"")," "),c.zb(2),c.nc("label",c.ic(9,13,"IdentityServerUser_PasswordSet")),c.zb(3),c.Nc("",c.ic(12,15,!0===t.PasswordSet?"Yes":!1===t.PasswordSet?"No":"")," "),c.zb(2),c.nc("label",c.ic(14,17,"IdentityServerUser_TwoFactorEnabled")),c.zb(3),c.Nc("",c.ic(17,19,!0===t.TwoFactorEnabled?"Yes":!1===t.TwoFactorEnabled?"No":"")," "),c.zb(2),c.nc("label",c.ic(19,21,"IdentityServerUser_LockoutEnd")),c.zb(2),c.nc("entity",t)}}function ke(t,e){1&t&&(c.Lc(0),c.hc(1,"translate")),2&t&&c.Nc(" ",c.ic(1,1,"ResetPassword")," ")}function Pe(t,e){if(1&t&&(c.Sb(0,"t-error-message"),c.Lc(1),c.Rb()),2&t){const t=c.gc(2);c.zb(1),c.Nc(" ",t.resetPasswordError," ")}}function xe(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",9),c.Sb(1,"h5",10),c.Lc(2),c.hc(3,"translate"),c.Rb(),c.Sb(4,"button",11),c.cc("click",function(){return e.$implicit.dismiss()}),c.Sb(5,"span",12),c.Lc(6,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",13),c.Sb(8,"t-form-group",14),c.hc(9,"translate"),c.Sb(10,"div"),c.Lc(11),c.Rb(),c.Rb(),c.Sb(12,"t-form-group",14),c.hc(13,"translate"),c.Sb(14,"t-text-editor",15),c.cc("ngModelChange",function(e){return c.Dc(t),c.gc().newPassword=e}),c.Rb(),c.Sb(15,"label",16),c.cc("click",function(){return c.Dc(t),c.gc().togglePasswordVisibility()}),c.hc(16,"translate"),c.Nb(17,"fa-icon",17),c.Rb(),c.Rb(),c.Jc(18,Pe,2,1,"t-error-message",18),c.Rb(),c.Sb(19,"div",19),c.Sb(20,"button",20),c.cc("click",function(){c.Dc(t);const n=e.$implicit;return c.gc().resetPasswordClick(n)}),c.Nb(21,"fa-icon",21),c.Lc(22),c.hc(23,"translate"),c.Rb(),c.Sb(24,"button",22),c.cc("click",function(){return e.$implicit.dismiss()}),c.Nb(25,"fa-icon",23),c.Lc(26),c.hc(27,"translate"),c.Rb(),c.Rb()}if(2&t){const t=c.gc();c.zb(2),c.Nc(" ",c.ic(3,15,"ResetPassword")," "),c.zb(6),c.nc("label",c.ic(9,17,"User_Email"))("serverErrors",null),c.zb(3),c.Mc(null==t.modelRef?null:t.modelRef.Email),c.zb(1),c.nc("label",c.ic(13,19,"NewPassword"))("serverErrors",null),c.zb(2),c.nc("ngModel",t.newPassword)("type",t.passwordFieldType)("focusIf",!0),c.zb(1),c.oc("title",c.ic(16,21,"ShowHidePassword")),c.zb(2),c.nc("icon",t.isPasswordShown?"eye-slash":"eye"),c.zb(1),c.nc("ngIf",!!t.resetPasswordError),c.zb(2),c.nc("disabled",!t.newPassword),c.zb(2),c.Nc(" \xa0",c.ic(23,23,"ResetPassword")," "),c.zb(4),c.Nc(" \xa0",c.ic(27,25,"Cancel")," ")}}const _e=function(t,e,n,i,s){return{template:t,action:e,showAction:n,canAction:i,actionTooltip:s}},Oe=function(t){return[t]},Je=[{path:"console",component:B,canActivate:[G.d],canActivateChild:[Q.a],children:[{path:"identity-server-users",component:(()=>{class t extends Y.a{constructor(t){super(),this.workspace=t}get c(){return this.ws.IdentityServerUser}get ws(){return this.workspace.admin}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(r.m))},t.\u0275cmp=c.Gb({type:t,selectors:[["t-identity-server-users-master"]],features:[c.wb],decls:16,vars:32,consts:[["collection","IdentityServerUser","selectDefault","EmailConfirmed,PasswordSet,TwoFactorEnabled","selectForTiles","Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","showImportButton","showDeleteButton","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["emailConfirmed",""],["emailNotConfirmed",""],["passwordSet",""],["passwordNotSet",""],[1,"d-flex","justify-content-between"],["collection","IdentityServerUser","path","Email",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"d-block","text-truncate"],["collection","IdentityServerUser",3,"entity"]],template:function(t,e){if(1&t&&(c.Nb(0,"t-master",0),c.hc(1,"translate"),c.Jc(2,ge,5,1,"ng-template",null,1,c.Kc),c.Jc(4,fe,2,3,"ng-template",null,2,c.Kc),c.Jc(6,ve,1,1,"ng-template",null,3,c.Kc),c.Jc(8,we,2,3,"ng-template",null,4,c.Kc),c.Jc(10,Se,2,3,"ng-template",null,5,c.Kc),c.Jc(12,ye,2,3,"ng-template",null,6,c.Kc),c.Jc(14,Me,2,3,"ng-template",null,7,c.Kc)),2&t){const t=c.Ac(3),n=c.Ac(5),i=c.Ac(7),s=c.Ac(9),r=c.Ac(11),o=c.Ac(13),a=c.Ac(15);c.nc("mode",e.mode)("showCreateButton",!1)("filterDefault",e.filter)("additionalSelect",e.additionalSelect)("masterCrumb",c.ic(1,12,"IdentityServerUsers"))("tileTemplate",t)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("showImportButton",!1)("showDeleteButton",!1)("multiselectActions",c.qc(14,Ae))("filterDefinition",c.sc(29,ze,c.sc(19,Ne,c.rc(15,Ie,s),c.rc(17,Re,r)),c.sc(26,Ne,c.rc(22,Ce,o),c.rc(24,Ee,a))))}},directives:[X.a,Z.a],pipes:[o.c],encapsulation:2}),t})(),canDeactivate:[W.a]},{path:"identity-server-users/:id",component:(()=>{class t extends St.a{constructor(t,e,n,i){super(),this.workspace=t,this.api=e,this.translate=n,this.modalService=i,this.expand="",this._showPassword=!1,this.identityServerUsersApi=this.api.identityServerUsersApi(this.notifyDestruct$),this.onResetPassword=t=>{t&&t.Id&&(this.modelRef=t,this.modalService.open(this.resetPasswordModal).result.then(()=>{this.resetPasswordError=null,this.newPassword=null,this._showPassword=!1},t=>{this.resetPasswordError=null,this.newPassword=null,this._showPassword=!1}))},this.showResetPassword=t=>!!t,this.canResetPassword=t=>this.ws.canDo("identity-server-users","ResetPassword",t.Id),this.resetPasswordTooltip=t=>this.canResetPassword(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.identityServerUsersApi=this.api.identityServerUsersApi(this.notifyDestruct$)}get ws(){return this.workspace.admin}resetPasswordClick(t){this.resetPasswordError=null,this.identityServerUsersApi.resetPassword({userId:this.modelRef.Id,password:this.newPassword}).pipe(Object(g.a)(e=>{Object(w.c)(e,this.workspace),t.close(),this.details.displayModalMessage(this.translate.instant("PasswordWasSuccessfullyReset"))}),Object(f.a)(t=>this.resetPasswordError=t.error)).subscribe()}togglePasswordVisibility(){this._showPassword=!this._showPassword}get isPasswordShown(){return this._showPassword}get passwordFieldType(){return this.isPasswordShown?"text":"password"}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(r.m),c.Mb(N.a),c.Mb(o.d),c.Mb(C.u))},t.\u0275cmp=c.Gb({type:t,selectors:[["t-identity-server-users-details"]],viewQuery:function(t,e){if(1&t&&c.Qc(De,3),2&t){let t;c.zc(t=c.dc())&&(e.resetPasswordModal=t.first)}},features:[c.wb],decls:10,vars:21,consts:[["collection","IdentityServerUser",3,"expand","idString","mode","additionalSelect","showCreateButton","showDeleteButton","showEditButton","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["resetPassword",""],["resetPasswordModal",""],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label"],["collection","IdentityServerUser","path","LockoutEnd",3,"entity"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","type","focusIf","ngModelChange"],[1,"btn","btn-sm","text-primary","t-pointer","mx-1",3,"title","click"],[3,"icon"],[4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","check"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"]],template:function(t,e){if(1&t&&(c.Nb(0,"t-details",0),c.hc(1,"translate"),c.Jc(2,Le,2,1,"ng-template",null,1,c.Kc),c.Jc(4,Ue,21,23,"ng-template",null,2,c.Kc),c.Jc(6,ke,2,3,"ng-template",null,3,c.Kc),c.Jc(8,xe,28,27,"ng-template",null,4,c.Kc)),2&t){const t=c.Ac(3),n=c.Ac(5),i=c.Ac(7);c.nc("expand",e.expand)("idString",e.idString)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",!1)("showDeleteButton",!1)("showEditButton",!1)("masterCrumb",c.ic(1,11,"IdentityServerUsers"))("detailsCrumb",t)("documentTemplate",n)("actions",c.rc(19,Oe,c.vc(13,_e,i,e.onResetPassword,e.showResetPassword,e.canResetPassword,e.resetPasswordTooltip)))}},directives:[S.a,z.a,Z.a,D.a,L.m,L.i,L.j,l.a,a.l,U.a],pipes:[o.c],encapsulation:2}),t})(),canDeactivate:[$.a]},{path:"admin-users",component:wt,canDeactivate:[W.a]},{path:"admin-users/:id",component:he,canDeactivate:[$.a]},{path:"main-menu",component:d,canDeactivate:[W.a]},{path:"",redirectTo:"main-menu",pathMatch:"full"},{path:"**",component:b}]},{path:"",redirectTo:"/root/welcome",pathMatch:"full"}];let Te=(()=>{class t{constructor(t){t.addIcons(pe.od,pe.wb,pe.xb)}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(l.b))},t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({imports:[[s.a,i.h.forChild(Je)]]}),t})()}}]);