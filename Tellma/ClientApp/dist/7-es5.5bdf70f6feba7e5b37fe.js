function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw c}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ZMrW:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return Nt}));var r=n("tyNb"),i=n("PCNd"),c=n("fXoL"),a=n("PVj+"),s=n("sYmb"),o=n("ofXK"),l=n("6NWb");function u(e,t){if(1&e&&(c.Vb(0,"a",4),c.Vb(1,"div",5),c.Qb(2,"fa-icon",6),c.Ub(),c.Vb(3,"div",7),c.Tc(4),c.Ub(),c.Ub()),2&e){var n=t.$implicit,r=c.lc();c.Gb("d-none",!r.canView("admin-users")),c.sc("routerLink",n.link),c.Bb(2),c.sc("icon",n.icon),c.Bb(2),c.Vc(" ",n.label()," ")}}var d,b,m=((b=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.workspace=t,this.translate=n,this.mainMenuItems=[{label:function(){return r.translate.instant("AdminUsers")},icon:"users",view:"admin-users",link:"../admin-users"},{label:function(){return r.translate.instant("IdentityServerUsers")},icon:"shield-alt",view:"identity-server-users",link:"../identity-server-users"}]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"canView",value:function(e){return this.workspace.admin.canRead(e)}}]),e}()).\u0275fac=function(e){return new(e||b)(c.Pb(a.m),c.Pb(s.e))},b.\u0275cmp=c.Jb({type:b,selectors:[["t-admin-main-menu"]],decls:7,vars:4,consts:[[1,"container","py-4","px-5"],[1,"t-menu-section"],[1,"t-teal1"],["class","t-menu-item btn m-1",3,"d-none","routerLink",4,"ngFor","ngForOf"],[1,"t-menu-item","btn","m-1",3,"routerLink"],[1,"pt-4","pb-1","t-menu-item-icon"],[3,"icon"],[1,"px-2","t-menu-item-label"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Tc(3),c.mc(4,"translate"),c.Ub(),c.Ub(),c.Vb(5,"div",2),c.Rc(6,u,5,5,"a",3),c.Ub(),c.Ub()),2&e&&(c.Bb(3),c.Uc(c.nc(4,2,"AdminConsole")),c.Bb(3),c.sc("ngForOf",t.mainMenuItems))},directives:[o.t,r.h,l.b],pipes:[s.d],encapsulation:2}),b),f=((d=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"onHome",value:function(){this.router.navigate(["admin","console","main-menu"])}}]),e}()).\u0275fac=function(e){return new(e||d)(c.Pb(r.e))},d.\u0275cmp=c.Jb({type:d,selectors:[["t-admin-page-not-found"]],decls:11,vars:9,consts:[[1,"p-5"],[1,"text-danger"],[1,"text-muted"],[1,"mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"h2",1),c.Tc(2),c.mc(3,"translate"),c.Ub(),c.Vb(4,"p",2),c.Tc(5),c.mc(6,"translate"),c.Ub(),c.Vb(7,"div",3),c.Vb(8,"button",4),c.hc("click",(function(){return t.onHome()})),c.Tc(9),c.mc(10,"translate"),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.Bb(2),c.Vc(" ",c.nc(3,3,"Error_PageNotFound")," "),c.Bb(3),c.Uc(c.nc(6,5,"Error_PageNotFoundMessage")),c.Bb(4),c.Uc(c.nc(10,7,"Home")))},pipes:[s.d],encapsulation:2}),d),p=n("XNiG"),v=n("LRne"),g=n("eIep"),h=n("vkgz"),w=n("JIr8"),y=n("WO2E"),U=n("k0Of"),V=n("AyGX"),C=n("1bxP"),I=n("KOvB"),S=n("eQPh"),k=n("rd7j"),A=n("0xbw"),M=n("o6Md"),E=n("1kSV"),P=n("OoQV"),T=n("AYjT"),B=n("2I7G"),_=n("3Pt+"),R=n("mrGz"),O=n("f3yp"),x=["myAccountModal"];function D(e,t){if(1&e){var n=c.Wb();c.Vb(0,"button",21),c.hc("click",(function(){c.Ic(n);var e=c.lc();return e.onCollapse(),e.nav.onBack()})),c.Qb(1,"fa-icon",22),c.Ub()}if(2&e){var r=c.lc();c.sc("disabled",!r.nav.canBack),c.Bb(1),c.sc("flip",r.flip)}}function F(e,t){if(1&e){var n=c.Wb();c.Vb(0,"button",21),c.hc("click",(function(){c.Ic(n);var e=c.lc();return e.onCollapse(),e.nav.onForward()})),c.Qb(1,"fa-icon",23),c.Ub()}if(2&e){var r=c.lc();c.sc("disabled",!r.nav.canForward),c.Bb(1),c.sc("flip",r.flip)}}function N(e,t){if(1&e){var n=c.Wb();c.Vb(0,"button",17),c.hc("click",(function(){c.Ic(n);var e=c.lc().$implicit,t=c.lc();return t.onSetLanguage(e),t.onCollapse()})),c.Tc(1),c.Ub()}if(2&e){var r=c.lc().$implicit,i=c.lc();c.Bb(1),c.Vc(" ",i.languageName(r)," ")}}function j(e,t){if(1&e&&(c.Tb(0),c.Rc(1,N,2,1,"button",24),c.Sb()),2&e){var n=t.$implicit,r=c.lc();c.Bb(1),c.sc("ngIf",n!==r.currentLanguage)}}var L=function(){return{updateOn:"blur"}};function Q(e,t){if(1&e){var n=c.Wb();c.Vb(0,"div",38),c.Vb(1,"t-form-group",39),c.Vb(2,"h2",40),c.Tc(3),c.Ub(),c.Ub(),c.Vb(4,"t-form-group",41),c.mc(5,"translate"),c.Vb(6,"t-text-editor",42),c.hc("ngModelChange",(function(e){return c.Ic(n),c.lc(2).myUser.Name=e})),c.Ub(),c.Ub(),c.Ub()}if(2&e){var r=c.lc(2);c.Bb(3),c.Uc(r.myEmail),c.Bb(1),c.sc("label",c.nc(5,5,"Name"))("serverErrors",null==r.myUser||null==r.myUser.serverErrors?null:r.myUser.serverErrors.Name),c.Bb(2),c.sc("ngModel",r.myUser.Name)("ngModelOptions",c.vc(7,L))}}function H(e,t){if(1&e&&(c.Vb(0,"t-error-message"),c.Tc(1),c.Ub()),2&e){var n=c.lc(2);c.Bb(1),c.Vc(" ",n.saveErrorMessage," ")}}function $(e,t){if(1&e&&(c.Vb(0,"t-error-message"),c.Tc(1),c.Ub()),2&e){var n=c.lc(2);c.Bb(1),c.Vc(" ",n.errorMessage," ")}}function q(e,t){1&e&&(c.Vb(0,"div",43),c.Qb(1,"t-spinner",44),c.Ub()),2&e&&(c.Bb(1),c.sc("scale",2))}function W(e,t){if(1&e){var n=c.Wb();c.Vb(0,"div",25),c.Vb(1,"h5",26),c.Tc(2),c.mc(3,"translate"),c.Ub(),c.Vb(4,"button",27),c.hc("click",(function(){return t.$implicit.dismiss(!1)})),c.Vb(5,"span",28),c.Tc(6,"\xd7"),c.Ub(),c.Ub(),c.Ub(),c.Vb(7,"div",29),c.Rc(8,Q,7,8,"div",30),c.Rc(9,H,2,1,"t-error-message",31),c.Rc(10,$,2,1,"t-error-message",31),c.Rc(11,q,2,1,"div",32),c.Ub(),c.Vb(12,"div",33),c.Vb(13,"button",34),c.hc("click",(function(){c.Ic(n);var e=t.$implicit;return c.lc().onSave(e)})),c.Qb(14,"fa-icon",35),c.Tc(15),c.mc(16,"translate"),c.Ub(),c.Vb(17,"button",36),c.hc("click",(function(){return t.$implicit.close(!1)})),c.Qb(18,"fa-icon",37),c.Tc(19),c.mc(20,"translate"),c.Ub(),c.Ub()}if(2&e){var r=c.lc();c.Bb(2),c.Vc(" ",c.nc(3,8,"MyAdminAccount")," "),c.Bb(6),c.sc("ngIf",r.isMyUserLoaded),c.Bb(1),c.sc("ngIf",r.isMyUserLoaded&&!!r.saveErrorMessage),c.Bb(1),c.sc("ngIf",r.isMyUserError),c.Bb(1),c.sc("ngIf",r.isMyUserLoading),c.Bb(2),c.sc("disabled",!r.canSave),c.Bb(2),c.Vc(" \xa0",c.nc(16,10,"Save")," "),c.Bb(4),c.Vc(" \xa0",c.nc(20,12,"Cancel")," ")}}var J,G=function(e){return{placeholder:e}},z=((J=function(){function e(t,n,r,i,c,a,s,o,l){var u=this;_classCallCheck(this,e),this.workspace=t,this.nav=n,this.translate=r,this.progress=i,this.auth=c,this.storage=a,this.apiService=s,this.document=o,this.modalService=l,this.isCollapsed=!0,this.notifyDestruct$=new p.a,this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$),this.notifyFetch$=new p.a,this.notifyFetch$.pipe(Object(g.a)((function(){return u.doFetch()}))).subscribe()}return _createClass(e,[{key:"ngOnInit",value:function(){this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$)}},{key:"ngOnDestroy",value:function(){this.notifyDestruct$.next(),this._subscription&&this._subscription.unsubscribe()}},{key:"languageName",value:function(e){return C.a[e]}},{key:"onSetLanguage",value:function(e){this.translate.use(e),this.storage.setItem("user_culture",e)}},{key:"onToggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"onCollapse",value:function(){this.isCollapsed=!0}},{key:"onMySystemAccount",value:function(){location.href=y.b.identityAddress+"/identity/manage/"}},{key:"onSignOut",value:function(){this.progress.startAsyncOperation("sign_out","RedirectingToSignOut"),this.auth.signOut()}},{key:"onMyAdminAccount",value:function(){var e=this;this.fetch(),this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.myAccountModal,{windowClass:"t-myuser-modal"}).result.then((function(){return e.onMyAdminAccountClose()}),(function(){return e.onMyAdminAccountClose()}))}},{key:"onMyAdminAccountClose",value:function(){this.workspace.ignoreKeyDownEvents=!1}},{key:"fetch",value:function(){this.notifyFetch$.next(null)}},{key:"doFetch",value:function(){var e=this;return this.myUserStatus=a.c.loading,this.adminUsersApi.getMyUser().pipe(Object(h.a)((function(t){Object(U.b)(t,e.workspace),e.myUserStatus=a.c.loaded,e.onEdit()})),Object(w.a)((function(t){return e._errorMessage=t.error,e.myUserStatus=a.c.error,Object(v.a)(null)})))}},{key:"onEdit",value:function(){var e=this.ws.get("AdminUser",this.ws.userSettings.UserId);this.myUser={Name:e.Name}}},{key:"onSave",value:function(e){var t=this;this._errorMessage=null,this._saveErrorMessage=null,Object(V.c)(this.myUser),this.adminUsersApi.saveMyUser(this.myUser).subscribe((function(n){Object(U.b)(n,t.workspace),e.close(!0)}),(function(e){if(422===e.status){var n=Object(V.b)(t.myUser,e.error);Object.keys(n).length>0&&console.error(n)}else t._saveErrorMessage=e.error;return Object(v.a)(null)}))}},{key:"activeLanguages",get:function(){return this._activeLanguages||(this._activeLanguages=Object.keys(C.a)),this._activeLanguages}},{key:"currentLanguage",get:function(){return this.workspace.ws.culture||this.translate.currentLang||this.translate.defaultLang||"en"}},{key:"settings",get:function(){return this.ws?this.ws.settings:null}},{key:"ws",get:function(){return this.workspace.admin}},{key:"userName",get:function(){return this.ws.userSettings.Name}},{key:"isRtl",get:function(){return this.workspace.ws.isRtl}},{key:"flip",get:function(){return this.isRtl?"horizontal":null}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"saveErrorMessage",get:function(){return this._saveErrorMessage}},{key:"isMyUserLoaded",get:function(){return this.myUserStatus===a.c.loaded}},{key:"isMyUserError",get:function(){return this.myUserStatus===a.c.error}},{key:"isMyUserLoading",get:function(){return this.myUserStatus===a.c.loading}},{key:"myEmail",get:function(){return this.ws.get("AdminUser",this.ws.userSettings.UserId).Email}},{key:"canSave",get:function(){return this.isMyUserLoaded}}]),e}()).\u0275fac=function(e){return new(e||J)(c.Pb(a.m),c.Pb(I.a),c.Pb(s.e),c.Pb(S.a),c.Pb(k.b),c.Pb(A.a),c.Pb(M.a),c.Pb(o.e),c.Pb(E.t))},J.\u0275cmp=c.Jb({type:J,selectors:[["t-admin-shell"]],viewQuery:function(e,t){var n;1&e&&c.Oc(x,!0),2&e&&c.Ec(n=c.ic())&&(t.myAccountModal=n.first)},decls:41,vars:35,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-light","shadow-sm","border-bottom","bg-white","navbar-expand-sm","p-0","align-items-sm-stretch"],["routerLink","main-menu",1,"t-brand-link","t-navbar-button","d-flex","align-items-baseline",3,"title"],["theme","light",3,"scale"],[1,"mx-2","d-flex"],["class","t-navbar-button nav-link",3,"disabled","click",4,"ngIf"],["type","button",1,"navbar-toggler","mx-2",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse","align-items-stretch",3,"ngbCollapse"],[1,"nav","navbar-nav","px-4","px-lg-0"],[1,"nav","navbar-nav","p-0"],["ngbDropdown","","container","",1,"nav-item"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","align-items-center"],[1,"px-2"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow","m-0"],["type","button","ngbDropdownItem","","routerLink","/root/companies",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","","routerLink","/root/welcome",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[4,"ngFor","ngForOf"],[1,"t-rest-of-screen","container-fluid"],["myAccountModal",""],[1,"t-navbar-button","nav-link",3,"disabled","click"],["icon","arrow-left",3,"flip"],["icon","arrow-right",3,"flip"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0","bg-white"],["class","row m-0 px-1 px-sm-3 pt-3 pt-sm-4 pb-3 pb-sm-5",4,"ngIf"],[4,"ngIf"],["class","d-flex justify-content-center py-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"row","m-0","px-1","px-sm-3","pt-3","pt-sm-4","pb-3","pb-sm-5"],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","py-2"],[3,"scale"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Vb(1,"nav",1),c.Vb(2,"a",2),c.mc(3,"translate"),c.Qb(4,"t-brand",3),c.Ub(),c.Vb(5,"div",4),c.Rc(6,D,2,2,"button",5),c.Tc(7," \xa0 "),c.Rc(8,F,2,2,"button",5),c.Ub(),c.Vb(9,"button",6),c.hc("click",(function(){return t.onToggleCollapse()})),c.Qb(10,"span",7),c.Ub(),c.Vb(11,"div",8),c.Qb(12,"ol",9),c.Vb(13,"ol",10),c.Vb(14,"li",11),c.Vb(15,"button",12),c.Vb(16,"span",13),c.Tc(17),c.Ub(),c.Ub(),c.Vb(18,"div",14),c.Vb(19,"button",15),c.hc("click",(function(){return t.onCollapse()})),c.Tc(20),c.mc(21,"translate"),c.Ub(),c.Vb(22,"button",16),c.hc("click",(function(){return t.onCollapse()})),c.Tc(23),c.mc(24,"translate"),c.Ub(),c.Vb(25,"button",17),c.hc("click",(function(){return t.onMySystemAccount(),t.onCollapse()})),c.Tc(26),c.mc(27,"translate"),c.mc(28,"translate"),c.Ub(),c.Vb(29,"button",17),c.hc("click",(function(){return t.onMyAdminAccount(),t.onCollapse()})),c.Tc(30),c.mc(31,"translate"),c.Ub(),c.Vb(32,"button",17),c.hc("click",(function(){return t.onSignOut(),t.onCollapse()})),c.Tc(33),c.mc(34,"translate"),c.Ub(),c.Qb(35,"hr"),c.Rc(36,j,2,1,"ng-container",18),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(37,"main",19),c.Qb(38,"router-outlet"),c.Ub(),c.Ub(),c.Rc(39,W,21,14,"ng-template",null,20,c.Sc)),2&e&&(c.Bb(2),c.sc("title",c.nc(3,18,"Home")),c.Bb(2),c.sc("scale",1),c.Bb(2),c.sc("ngIf",t.nav.showBack),c.Bb(2),c.sc("ngIf",t.nav.showForward),c.Bb(3),c.sc("ngbCollapse",t.isCollapsed),c.Bb(1),c.Gb("mr-auto",!t.isRtl)("ml-auto",t.isRtl),c.Bb(5),c.Uc(t.userName),c.Bb(1),c.Gb("dropdown-menu-right",!t.isRtl),c.Bb(2),c.Vc(" ",c.nc(21,20,"MyCompanies")," "),c.Bb(3),c.Vc(" ",c.nc(24,22,"WelcomePage")," "),c.Bb(3),c.Vc(" ",c.oc(27,24,"My0Account",c.wc(33,G,c.nc(28,27,"AppName")))," "),c.Bb(4),c.Vc(" ",c.nc(31,29,"MyAdminAccount")," "),c.Bb(3),c.Vc(" ",c.nc(34,31,"SignOut")," "),c.Bb(3),c.sc("ngForOf",t.activeLanguages))},directives:[E.B,r.h,P.a,o.u,E.d,E.l,E.r,E.p,E.o,r.f,o.t,r.j,l.b,T.a,B.a,_.u,_.k,_.n,R.a,O.a],pipes:[s.d],encapsulation:2}),J),X=n("DWXW"),Y=n("wqEn"),K=n("TJ1c"),Z=n("Y7zQ"),ee=n("O90C"),te=n("QFit"),ne=n("EoPe");function re(e,t){if(1&e&&(c.Vb(0,"div",9),c.Qb(1,"t-auto-cell",10),c.Ub(),c.Vb(2,"div",11),c.Qb(3,"t-auto-cell",12),c.Qb(4,"t-auto-cell",13),c.Ub()),2&e){var n=t.id,r=c.lc();c.Bb(1),c.sc("entity",r.c[n]),c.Bb(2),c.sc("entity",r.c[n]),c.Bb(1),c.sc("entity",r.c[n])}}function ie(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"AdminUser"),"\n")}function ce(e,t){if(1&e&&c.Qb(0,"t-auto-cell",14),2&e){var n=t.id,r=c.lc();c.sc("entity",r.c[n])}}function ae(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"Activate")," ")}function se(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"Deactivate")," ")}function oe(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"CreatedByMe")," ")}function le(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"User_Invited")," ")}function ue(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"User_Member")," ")}var de,be=function(e,t,n,r){return{template:e,action:t,canAction:n,actionTooltip:r}},me=function(e,t){return[e,t]},fe=function(e){return{template:e,expression:"CreatedById eq me"}},pe=function(e){return[e]},ve=function(e){return{template:e,expression:"ExternalId eq null"}},ge=function(e){return{template:e,expression:"ExternalId ne null"}},he=function(e,t){return{CreatedBy:e,ExternalId:t}},we=((de=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var c;return _classCallCheck(this,n),(c=t.call(this)).workspace=e,c.api=r,c.translate=i,c.adminUsersApi=c.api.adminUsersApi(c.notifyDestruct$),c.onActivate=function(e){return c.adminUsersApi.activate(e,{returnEntities:!0}).pipe(Object(h.a)((function(e){return Object(U.c)(e,c.workspace)})))},c.onDeactivate=function(e){return c.adminUsersApi.deactivate(e,{returnEntities:!0}).pipe(Object(h.a)((function(e){return Object(U.c)(e,c.workspace)})))},c.canActivateDeactivateItem=function(e){return c.ws.canDo("admin-users","IsActive",null)},c.activateDeactivateTooltip=function(e){return c.canActivateDeactivateItem(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.adminUsersApi=c.api.adminUsersApi(c.notifyDestruct$),c}return _createClass(n,[{key:"c",get:function(){return this.ws.AdminUser}},{key:"ws",get:function(){return this.workspace.admin}}]),n}(ee.a)).\u0275fac=function(e){return new(e||de)(c.Pb(a.m),c.Pb(M.a),c.Pb(s.e))},de.\u0275cmp=c.Jb({type:de,selectors:[["t-admin-users-master"]],features:[c.yb],decls:18,vars:39,consts:[["collection","AdminUser","selectDefault","Email,State,LastAccess","selectForTiles","State,Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["new",""],["confirmed",""],[1,"d-flex","justify-content-between"],["collection","AdminUser","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","AdminUser","path","Email",3,"entity"],["collection","AdminUser","path","State",3,"entity"],["collection","AdminUser",3,"entity"]],template:function(e,t){if(1&e&&(c.Qb(0,"t-master",0),c.mc(1,"translate"),c.Rc(2,re,5,3,"ng-template",null,1,c.Sc),c.Rc(4,ie,2,3,"ng-template",null,2,c.Sc),c.Rc(6,ce,1,1,"ng-template",null,3,c.Sc),c.Rc(8,ae,2,3,"ng-template",null,4,c.Sc),c.Rc(10,se,2,3,"ng-template",null,5,c.Sc),c.Rc(12,oe,2,3,"ng-template",null,6,c.Sc),c.Rc(14,le,2,3,"ng-template",null,7,c.Sc),c.Rc(16,ue,2,3,"ng-template",null,8,c.Sc)),2&e){var n=c.Fc(3),r=c.Fc(5),i=c.Fc(7),a=c.Fc(9),s=c.Fc(11),o=c.Fc(13),l=c.Fc(15),u=c.Fc(17);c.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.nc(1,10,"AdminUsers"))("tileTemplate",n)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",r)("multiselectActions",c.xc(22,me,c.zc(12,be,a,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.zc(17,be,s,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",c.xc(36,he,c.wc(27,pe,c.wc(25,fe,o)),c.xc(33,me,c.wc(29,ve,l),c.wc(31,ge,u))))}},directives:[te.a,ne.a],pipes:[s.d],encapsulation:2}),de),ye=n("CHDZ"),Ue=n("U6XH"),Ve=n("ABE2"),Ce=n("88Q5"),Ie=n("1nIS"),Se=n("56d8");function ke(e,t){if(1&e&&(c.Vb(0,"span"),c.Tc(1),c.Ub()),2&e){var n=t.model;c.Bb(1),c.Uc(null==n?null:n.Name)}}function Ae(e,t){if(1&e&&(c.Vb(0,"div",7),c.Vb(1,"t-restricted",8),c.Vb(2,"div",9),c.Vb(3,"div"),c.Vb(4,"span"),c.Tc(5),c.mc(6,"translate"),c.Ub(),c.Ub(),c.Vb(7,"div"),c.Vb(8,"span"),c.Tc(9),c.mc(10,"translate"),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div",10),c.Vb(12,"span"),c.Tc(13),c.mc(14,"translate"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e){var n=t.model;c.Bb(1),c.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ExternalId),c.Bb(2),c.Gb("active",!(null!=n&&n.ExternalId)),c.Bb(2),c.Uc(c.nc(6,8,"User_Invited")),c.Bb(2),c.Gb("active",!(null==n||!n.ExternalId)),c.Bb(2),c.Uc(c.nc(10,10,"User_Member")),c.Bb(4),c.Uc(c.nc(14,12,null!=n&&n.ExternalId?"User_Invited":"User_Member"))}}function Me(e,t){if(1&e&&(c.Vb(0,"h2",27),c.Tc(1),c.Ub()),2&e){var n=c.lc().model;c.Bb(1),c.Uc(null==n?null:n.Name)}}var Ee=function(){return{updateOn:"blur"}};function Pe(e,t){if(1&e){var n=c.Wb();c.Vb(0,"t-text-editor",28),c.hc("ngModelChange",(function(e){return c.Ic(n),c.lc().model.Name=e})),c.mc(1,"translate"),c.Ub()}if(2&e){var r=c.lc().model;c.sc("focusIf",!r.Id)("ngModel",r.Name)("ngModelOptions",c.vc(6,Ee))("placeholder",c.nc(1,4,"Name"))}}function Te(e,t){if(1&e&&(c.Vb(0,"div"),c.Tc(1),c.Ub()),2&e){var n=c.lc().model;c.Bb(1),c.Uc(null==n?null:n.Email)}}function Be(e,t){if(1&e){var n=c.Wb();c.Vb(0,"t-text-editor",29),c.hc("ngModelChange",(function(e){return c.Ic(n),c.lc().model.Email=e})),c.Ub()}if(2&e){var r=c.lc().model,i=c.lc();c.sc("ngModel",r.Email)("ngModelOptions",c.vc(3,Ee))("disabled",!i.isNew)}}function _e(e,t){if(1&e&&(c.Vb(0,"t-form-group",30),c.mc(1,"translate"),c.Qb(2,"t-auto-cell",31),c.Ub()),2&e){var n=c.lc().model;c.sc("label",c.nc(1,2,"User_LastActivity")),c.Bb(2),c.sc("entity",n)}}function Re(e,t){if(1&e&&(c.Vb(0,"t-form-group",30),c.mc(1,"translate"),c.Vb(2,"div"),c.Tc(3),c.mc(4,"translate"),c.Ub(),c.Ub()),2&e){var n=c.lc().model;c.sc("label",c.nc(1,2,"IsActive")),c.Bb(3),c.Uc(c.nc(4,4,n?n.IsActive?"Active":"Inactive":""))}}var Oe=function(e){return{email:e}};function xe(e,t){if(1&e&&(c.Vb(0,"div",32),c.Vb(1,"span"),c.Tc(2),c.mc(3,"translate"),c.Ub(),c.Ub()),2&e){var n=c.lc().model;c.Bb(2),c.Uc(c.oc(3,1,"UserInvitationNotice",c.wc(4,Oe,null==n?null:n.Email)))}}function De(e,t){1&e&&(c.Vb(0,"span",33),c.Tc(1,"\xa0"),c.Qb(2,"fa-icon",34),c.Ub())}function Fe(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Uc(c.nc(1,1,"Permission_View"))}function Ne(e,t){if(1&e&&(c.Vb(0,"div"),c.Tc(1),c.Ub()),2&e){var n=c.lc().item,r=c.lc(3);c.Bb(1),c.Vc(" ",r.permissionViewLookup(n.View)," ")}}function je(e,t){if(1&e){var n=c.Wb();c.Vb(0,"t-selector",46),c.hc("ngModelChange",(function(e){return c.Ic(n),c.lc().item.View=e}))("ngModelChange",(function(){c.Ic(n);var e=c.lc(),t=e.item,r=e.update,i=c.lc(3);return r.call(null,t),i.onPermissionChanged(t)})),c.Ub()}if(2&e){var r=c.lc().item,i=c.lc(3);c.sc("choices",i.permissionViewChoices)("ngModel",r.View)("required",!r.PH)}}function Le(e,t){if(1&e&&(c.Vb(0,"t-form-group-cell",44),c.Rc(1,Ne,2,1,"div",15),c.Rc(2,je,1,3,"t-selector",45),c.Ub()),2&e){var n=t.item,r=c.lc(2).isEdit;c.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.View),c.Bb(1),c.sc("ngIf",!r),c.Bb(1),c.sc("ngIf",r)}}function Qe(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Uc(c.nc(1,1,"Permission_Action"))}function He(e,t){if(1&e&&(c.Vb(0,"div"),c.Tc(1),c.mc(2,"translate"),c.Ub()),2&e){var n=c.lc().item,r=c.lc(3);c.Bb(1),c.Uc(c.nc(2,1,r.permissionActionLookup(null==n?null:n.Action)))}}function $e(e,t){if(1&e){var n=c.Wb();c.Vb(0,"t-selector",48),c.hc("ngModelChange",(function(e){return c.Ic(n),c.lc().item.Action=e}))("ngModelChange",(function(){c.Ic(n);var e=c.lc(),t=e.item,r=e.update,i=c.lc(3);return r.call(null,t),i.onPermissionChanged(t)})),c.Ub()}if(2&e){var r=c.lc().item,i=c.lc(3);c.sc("ngModel",r.Action)("required",!r.PH)("ngModelOptions",c.vc(5,Ee))("choices",i.permissionActionChoices(r))("disabled",!r.View)}}function qe(e,t){if(1&e&&(c.Vb(0,"t-form-group-cell",44),c.Rc(1,He,3,3,"div",15),c.Rc(2,$e,1,6,"t-selector",47),c.Ub()),2&e){var n=t.item,r=c.lc(2).isEdit;c.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Action),c.Bb(1),c.sc("ngIf",!r),c.Bb(1),c.sc("ngIf",r)}}function We(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Uc(c.nc(1,1,"Permission_Criteria"))}function Je(e,t){if(1&e&&(c.Vb(0,"div"),c.Tc(1),c.Ub()),2&e){var n=c.lc().item;c.Bb(1),c.Uc(n.Criteria)}}function Ge(e,t){if(1&e){var n=c.Wb();c.Vb(0,"t-text-editor",50),c.hc("ngModelChange",(function(e){return c.Ic(n),c.lc().item.Criteria=e}))("ngModelChange",(function(){c.Ic(n);var e=c.lc();return e.update.call(null,e.item)})),c.Ub()}if(2&e){var r=c.lc().item,i=c.lc(3);c.sc("ngModel",r.Criteria)("ngModelOptions",c.vc(3,Ee))("disabled",i.disableCriteria(r))}}function ze(e,t){if(1&e&&(c.Vb(0,"t-form-group-cell",44),c.Rc(1,Je,2,1,"div",15),c.Rc(2,Ge,1,4,"t-text-editor",49),c.Ub()),2&e){var n=t.item,r=c.lc(2).isEdit;c.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Criteria),c.Bb(1),c.sc("ngIf",!r),c.Bb(1),c.sc("ngIf",r)}}function Xe(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Uc(c.nc(1,1,"Memo"))}function Ye(e,t){if(1&e&&(c.Vb(0,"div"),c.Tc(1),c.Ub()),2&e){var n=c.lc().item;c.Bb(1),c.Uc(n.Memo)}}function Ke(e,t){if(1&e){var n=c.Wb();c.Vb(0,"t-text-editor",52),c.hc("ngModelChange",(function(e){return c.Ic(n),c.lc().item.Memo=e}))("ngModelChange",(function(){c.Ic(n);var e=c.lc();return e.update.call(null,e.item)})),c.Ub()}if(2&e){var r=c.lc().item;c.sc("ngModel",r.Memo)("ngModelOptions",c.vc(2,Ee))}}function Ze(e,t){if(1&e&&(c.Vb(0,"t-form-group-cell",44),c.Rc(1,Ye,2,1,"div",15),c.Rc(2,Ke,1,3,"t-text-editor",51),c.Ub()),2&e){var n=t.item,r=c.lc(2).isEdit;c.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Memo),c.Bb(1),c.sc("ngIf",!r),c.Bb(1),c.sc("ngIf",r)}}var et=function(){return["View","Action","Criteria","Memo"]},tt=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},nt=function(e,t,n,r){return{View:e,Action:t,Criteria:n,Memo:r}};function rt(e,t){if(1&e&&(c.Vb(0,"t-restricted",8),c.Qb(1,"t-table",35),c.Ub(),c.Rc(2,Fe,2,3,"ng-template",null,36,c.Sc),c.Rc(4,Le,3,3,"ng-template",null,37,c.Sc),c.Rc(6,Qe,2,3,"ng-template",null,38,c.Sc),c.Rc(8,qe,3,3,"ng-template",null,39,c.Sc),c.Rc(10,We,2,3,"ng-template",null,40,c.Sc),c.Rc(12,ze,3,3,"ng-template",null,41,c.Sc),c.Rc(14,Xe,2,3,"ng-template",null,42,c.Sc),c.Rc(16,Ze,3,3,"ng-template",null,43,c.Sc)),2&e){var n=c.Fc(3),r=c.Fc(5),i=c.Fc(7),a=c.Fc(9),s=c.Fc(11),o=c.Fc(13),l=c.Fc(15),u=c.Fc(17),d=c.lc(),b=d.model,m=d.isEdit;c.Gb("p-4",1===(null==b||null==b.EntityMetadata?null:b.EntityMetadata.Permissions)),c.sc("metadata",null==b||null==b.EntityMetadata?null:b.EntityMetadata.Permissions),c.Bb(1),c.sc("dataSource",null==b?null:b.Permissions)("isEdit",m)("columnPaths",c.vc(7,et))("columnTemplates",c.zc(20,nt,c.xc(8,tt,n,r),c.xc(11,tt,i,a),c.xc(14,tt,s,o),c.xc(17,tt,l,u)))}}function it(e,t){if(1&e&&(c.Vb(0,"t-form-group",11),c.Rc(1,Me,2,1,"h2",12),c.Rc(2,Pe,2,7,"t-text-editor",13),c.Ub(),c.Vb(3,"t-form-group",14),c.mc(4,"translate"),c.Rc(5,Te,2,1,"div",15),c.Rc(6,Be,1,4,"t-text-editor",16),c.Ub(),c.Rc(7,_e,3,4,"t-form-group",17),c.Rc(8,Re,5,6,"t-form-group",17),c.Rc(9,xe,4,6,"div",18),c.Vb(10,"ul",19,20),c.Vb(12,"li",21),c.Vb(13,"a",22),c.Vb(14,"span",23),c.Tc(15),c.mc(16,"translate"),c.mc(17,"number"),c.Ub(),c.Rc(18,De,3,0,"span",24),c.Ub(),c.Rc(19,rt,18,25,"ng-template",25),c.Ub(),c.Ub(),c.Qb(20,"div",26)),2&e){var n=t.model,r=t.isEdit,i=c.Fc(11),a=c.lc();c.sc("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Name),c.Bb(1),c.sc("ngIf",!r),c.Bb(1),c.sc("ngIf",r),c.Bb(1),c.sc("label",c.nc(4,15,"User_Email"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Email),c.Bb(2),c.sc("ngIf",!r),c.Bb(1),c.sc("ngIf",r),c.Bb(1),c.sc("ngIf",!r),c.Bb(1),c.sc("ngIf",!r),c.Bb(1),c.sc("ngIf",a.showInvitationInfo(n)),c.Bb(1),c.sc("destroyOnHide",!0),c.Bb(2),c.sc("disabled",!0),c.Bb(3),c.Uc(c.nc(16,17,"User_Permissions")+(n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Permissions)?"":" ("+c.nc(17,19,null==n||null==n.Permissions?null:n.Permissions.length)+")")),c.Bb(3),c.sc("ngIf",a.showPermissionsError(n)),c.Bb(2),c.sc("ngbNavOutlet",i)}}function ct(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"Activate")," ")}function at(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"Deactivate")," ")}function st(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"ResendInvitationEmail")," ")}var ot,lt=function(e,t,n,r,i){return{template:e,action:t,showAction:n,canAction:r,actionTooltip:i}},ut=function(e,t,n){return[e,t,n]},dt=((ot=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=r,a.translate=i,a.route=c,a.showRoles=!0,a.expand="Permissions",a.adminUsersApi=a.api.adminUsersApi(a.notifyDestruct$),a._permissionActionChoices={},a._viewsDb=null,a._currentViewsDb=null,a._viewsForSelector=null,a.create=function(){var e={};return e.Name=a.initialText,e.Permissions=[],e},a.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Permissions&&t.Permissions.forEach((function(e){e.Id=null})),t}return console.error("Cloning a non existing item"),null},a.onInvite=function(e){e&&e.Id&&a.adminUsersApi.invite(e.Id).subscribe((function(){a.details.displayModalMessage(a.translate.instant("InvitationEmailSent"))}),a.details.handleActionError)},a.showInvite=function(e){return!!e&&!e.ExternalId},a.canInvite=function(e){return a.ws.canDo("admin-users","ResendInvitationEmail",e.Id)},a.inviteTooltip=function(e){return a.canInvite(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.onActivate=function(e){e&&e.Id&&a.adminUsersApi.activate([e.Id],{returnEntities:!0}).pipe(Object(h.a)((function(e){return Object(U.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onDeactivate=function(e){e&&e.Id&&a.adminUsersApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(h.a)((function(e){return Object(U.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.showActivate=function(e){return!!e&&!e.IsActive},a.showDeactivate=function(e){return!!e&&e.IsActive},a.canActivateDeactivateItem=function(e){return a.ws.canDo("admin-users","IsActive",e.Id)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.adminUsersApi=a.api.adminUsersApi(a.notifyDestruct$),a}return _createClass(n,[{key:"showInvitationInfo",value:function(e){return!!e&&!!e.Email&&this.isNew}},{key:"showPermissionsError",value:function(e){return!!e&&!!e.Permissions&&e.Permissions.some((function(e){return!!e.serverErrors}))}},{key:"permissionViewLookup",value:function(e){return e?this.viewsDb[e]?this.viewsDb[e].name():(console.error("missing view ".concat(e)),""):""}},{key:"onPermissionChanged",value:function(e){var t=this.permissionActionChoices(e);1===t.length?e.Action=t[0].value:e.Action&&t.every((function(t){return t.value!==e.Action}))&&(e.Action=null),this.disableCriteria(e)&&(e.Criteria=null)}},{key:"disableCriteria",value:function(e){if(!e||!e.View||!e.Action)return!0;var t=this.viewsDb[e.View];if(t&&t.actions){var n=t.actions[e.Action];return!(n&&n.supportsCriteria)}return!0}},{key:"permissionActionChoices",value:function(e){var t=this;if(!e.View)return[];if(!this._permissionActionChoices[e.View]){var n=this.viewsDb[e.View];this._permissionActionChoices[e.View]=n&&n.actions?Object.keys(n.actions).map((function(e){return{name:function(){return t.translate.instant(Ue.a[e])},value:e}})):[]}return this._permissionActionChoices[e.View]}},{key:"permissionActionLookup",value:function(e){return e?"All"===e?"View_All":Ue.a[e]:""}},{key:"ws",get:function(){return this.workspace.admin}},{key:"isNew",get:function(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}},{key:"viewsDb",get:function(){var e=this;if(this._currentLang!==this.translate.currentLang){this._currentLang=this.translate.currentLang,this._viewsDb={};for(var t=function(){var t=r[n],i=Ue.b[t],c={name:function(){return e.translate.instant(i.name)},actions:{}};c.actions.All={supportsCriteria:!1},i.read&&(c.actions.Read={supportsCriteria:!0}),i.update&&(c.actions.Update={supportsCriteria:!0}),i.delete&&(c.actions.Delete={supportsCriteria:!0});var a,s=_createForOfIteratorHelper(i.actions);try{for(s.s();!(a=s.n()).done;){var o=a.value;c.actions[o.action]={supportsCriteria:o.criteria}}}catch(l){s.e(l)}finally{s.f()}e._viewsDb[t]=c},n=0,r=Object.keys(Ue.b);n<r.length;n++)t()}return this._viewsDb}},{key:"permissionViewChoices",get:function(){if(this._currentViewsDb!==this.viewsDb){var e=this.viewsDb;this._currentViewsDb=e,this._viewsForSelector=Object.keys(e).map((function(t){return{value:t,name:e[t].name}})),this._viewsForSelector.sort((function(e,t){return e.name()<t.name()?-1:e.name()>t.name()?1:0}))}return this._viewsForSelector}}]),n}(ye.a)).\u0275fac=function(e){return new(e||ot)(c.Pb(a.m),c.Pb(M.a),c.Pb(s.e),c.Pb(r.a))},ot.\u0275cmp=c.Jb({type:ot,selectors:[["t-admin-users-details"]],inputs:{showRoles:"showRoles"},features:[c.yb],decls:14,vars:35,consts:[["collection","AdminUser",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","documentHeaderTemplate","actions"],["detailsCrumb",""],["documentHeader",""],["document",""],["activate",""],["deactivate",""],["invite",""],[1,"w-100","t-document-header","d-flex","justify-content-end"],[3,"metadata"],[1,"t-flow-chart","small"],[1,"small","t-lone-state","active","d-none"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["class","col-12 alert-primary p-2 px-3 mt-3 mt-sm-4",4,"ngIf"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","permissions",3,"disabled"],["ngbNavLink",""],[1,"small","t-slightly-bold"],["class","text-danger",4,"ngIf"],["ngbNavContent",""],[1,"w-100",3,"ngbNavOutlet"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"t-form-group",3,"label"],["collection","AdminUser","path","LastAccess",3,"entity"],[1,"col-12","alert-primary","p-2","px-3","mt-3","mt-sm-4"],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_View",""],["row_View",""],["header_Action",""],["row_Action",""],["header_Criteria",""],["row_Criteria",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"choices","ngModel","required","ngModelChange",4,"ngIf"],[3,"choices","ngModel","required","ngModelChange"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(c.Qb(0,"t-details",0),c.mc(1,"translate"),c.Rc(2,ke,2,1,"ng-template",null,1,c.Sc),c.Rc(4,Ae,15,14,"ng-template",null,2,c.Sc),c.Rc(6,it,21,21,"ng-template",null,3,c.Sc),c.Rc(8,ct,2,3,"ng-template",null,4,c.Sc),c.Rc(10,at,2,3,"ng-template",null,5,c.Sc),c.Rc(12,st,2,3,"ng-template",null,6,c.Sc)),2&e){var n=c.Fc(3),r=c.Fc(5),i=c.Fc(7),a=c.Fc(9),s=c.Fc(11),o=c.Fc(13);c.sc("expand",t.expand)("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",c.nc(1,11,"AdminUsers"))("detailsCrumb",n)("documentTemplate",i)("documentHeaderTemplate",r)("actions",c.yc(31,ut,c.Ac(13,lt,o,t.onInvite,t.showInvite,t.canInvite,t.inviteTooltip),c.Ac(19,lt,a,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),c.Ac(25,lt,s,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[V.a,Ve.a,T.a,o.u,E.v,E.x,E.y,E.w,E.A,B.a,_.u,_.k,_.n,_.d,ne.a,l.b,Ce.a,Ie.a,Se.a],pipes:[s.d,o.g],encapsulation:2}),ot),bt=n("wHSu");function mt(e,t){if(1&e&&(c.Vb(0,"div",8),c.Qb(1,"t-auto-cell",9),c.Ub(),c.Vb(2,"div",10),c.Vb(3,"span",11),c.Tc(4,"\xa0"),c.Ub(),c.Ub()),2&e){var n=t.id,r=c.lc();c.Bb(1),c.sc("entity",r.c[n])}}function ft(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"IdentityServerUser"),"\n")}function pt(e,t){if(1&e&&c.Qb(0,"t-auto-cell",12),2&e){var n=t.id,r=c.lc();c.sc("entity",r.c[n])}}function vt(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"EmailConfirmed")," ")}function gt(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"EmailNotConfirmed")," ")}function ht(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"PasswordIsSet")," ")}function wt(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"PasswordIsNotSet")," ")}var yt=function(){return[]},Ut=function(e){return{template:e,expression:"EmailConfirmed eq true"}},Vt=function(e){return{template:e,expression:"EmailConfirmed eq false"}},Ct=function(e,t){return[e,t]},It=function(e){return{template:e,expression:"PasswordSet eq true"}},St=function(e){return{template:e,expression:"PasswordSet eq false"}},kt=function(e,t){return{EmailConfirmed:e,PasswordSet:t}},At=["resetPasswordModal"];function Mt(e,t){if(1&e&&(c.Vb(0,"span"),c.Tc(1),c.Ub()),2&e){var n=t.model;c.Bb(1),c.Uc(null==n?null:n.Email)}}function Et(e,t){if(1&e&&(c.Vb(0,"t-form-group",5),c.Vb(1,"h2",6),c.Tc(2),c.Ub(),c.Ub(),c.Vb(3,"t-form-group",7),c.mc(4,"translate"),c.Vb(5,"div"),c.Tc(6),c.mc(7,"translate"),c.Ub(),c.Ub(),c.Vb(8,"t-form-group",7),c.mc(9,"translate"),c.Vb(10,"div"),c.Tc(11),c.mc(12,"translate"),c.Ub(),c.Ub(),c.Vb(13,"t-form-group",7),c.mc(14,"translate"),c.Vb(15,"div"),c.Tc(16),c.mc(17,"translate"),c.Ub(),c.Ub(),c.Vb(18,"t-form-group",7),c.mc(19,"translate"),c.Qb(20,"t-auto-cell",8),c.Ub()),2&e){var n=t.model;c.Bb(2),c.Uc(null==n?null:n.Email),c.Bb(1),c.sc("label",c.nc(4,9,"IdentityServerUser_EmailConfirmed")),c.Bb(3),c.Vc("",c.nc(7,11,!0===n.EmailConfirmed?"Yes":!1===n.EmailConfirmed?"No":"")," "),c.Bb(2),c.sc("label",c.nc(9,13,"IdentityServerUser_PasswordSet")),c.Bb(3),c.Vc("",c.nc(12,15,!0===n.PasswordSet?"Yes":!1===n.PasswordSet?"No":"")," "),c.Bb(2),c.sc("label",c.nc(14,17,"IdentityServerUser_TwoFactorEnabled")),c.Bb(3),c.Vc("",c.nc(17,19,!0===n.TwoFactorEnabled?"Yes":!1===n.TwoFactorEnabled?"No":"")," "),c.Bb(2),c.sc("label",c.nc(19,21,"IdentityServerUser_LockoutEnd")),c.Bb(2),c.sc("entity",n)}}function Pt(e,t){1&e&&(c.Tc(0),c.mc(1,"translate")),2&e&&c.Vc(" ",c.nc(1,1,"ResetPassword")," ")}function Tt(e,t){if(1&e&&(c.Vb(0,"t-error-message"),c.Tc(1),c.Ub()),2&e){var n=c.lc(2);c.Bb(1),c.Vc(" ",n.resetPasswordError," ")}}function Bt(e,t){if(1&e){var n=c.Wb();c.Vb(0,"div",9),c.Vb(1,"h5",10),c.Tc(2),c.mc(3,"translate"),c.Ub(),c.Vb(4,"button",11),c.hc("click",(function(){return t.$implicit.dismiss()})),c.Vb(5,"span",12),c.Tc(6,"\xd7"),c.Ub(),c.Ub(),c.Ub(),c.Vb(7,"div",13),c.Vb(8,"t-form-group",14),c.mc(9,"translate"),c.Vb(10,"div"),c.Tc(11),c.Ub(),c.Ub(),c.Vb(12,"t-form-group",14),c.mc(13,"translate"),c.Vb(14,"t-text-editor",15),c.hc("ngModelChange",(function(e){return c.Ic(n),c.lc().newPassword=e})),c.Ub(),c.Vb(15,"label",16),c.hc("click",(function(){return c.Ic(n),c.lc().togglePasswordVisibility()})),c.mc(16,"translate"),c.Qb(17,"fa-icon",17),c.Ub(),c.Ub(),c.Rc(18,Tt,2,1,"t-error-message",18),c.Ub(),c.Vb(19,"div",19),c.Vb(20,"button",20),c.hc("click",(function(){c.Ic(n);var e=t.$implicit;return c.lc().resetPasswordClick(e)})),c.Qb(21,"fa-icon",21),c.Tc(22),c.mc(23,"translate"),c.Ub(),c.Vb(24,"button",22),c.hc("click",(function(){return t.$implicit.dismiss()})),c.Qb(25,"fa-icon",23),c.Tc(26),c.mc(27,"translate"),c.Ub(),c.Ub()}if(2&e){var r=c.lc();c.Bb(2),c.Vc(" ",c.nc(3,15,"ResetPassword")," "),c.Bb(6),c.sc("label",c.nc(9,17,"User_Email"))("serverErrors",null),c.Bb(3),c.Uc(null==r.modelRef?null:r.modelRef.Email),c.Bb(1),c.sc("label",c.nc(13,19,"NewPassword"))("serverErrors",null),c.Bb(2),c.sc("ngModel",r.newPassword)("type",r.passwordFieldType)("focusIf",!0),c.Bb(1),c.tc("title",c.nc(16,21,"ShowHidePassword")),c.Bb(2),c.sc("icon",r.isPasswordShown?"eye-slash":"eye"),c.Bb(1),c.sc("ngIf",!!r.resetPasswordError),c.Bb(2),c.sc("disabled",!r.newPassword),c.Bb(2),c.Vc(" \xa0",c.nc(23,23,"ResetPassword")," "),c.Bb(4),c.Vc(" \xa0",c.nc(27,25,"Cancel")," ")}}var _t,Rt,Ot,xt=function(e,t,n,r,i){return{template:e,action:t,showAction:n,canAction:r,actionTooltip:i}},Dt=function(e){return[e]},Ft=[{path:"console",component:z,canActivate:[Y.d],canActivateChild:[K.a],children:[{path:"identity-server-users",component:(Rt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).workspace=e,r}return _createClass(n,[{key:"c",get:function(){return this.ws.IdentityServerUser}},{key:"ws",get:function(){return this.workspace.admin}}]),n}(ee.a),Rt.\u0275fac=function(e){return new(e||Rt)(c.Pb(a.m))},Rt.\u0275cmp=c.Jb({type:Rt,selectors:[["t-identity-server-users-master"]],features:[c.yb],decls:16,vars:32,consts:[["collection","IdentityServerUser","selectDefault","EmailConfirmed,PasswordSet,TwoFactorEnabled","selectForTiles","Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","showImportButton","showDeleteButton","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["emailConfirmed",""],["emailNotConfirmed",""],["passwordSet",""],["passwordNotSet",""],[1,"d-flex","justify-content-between"],["collection","IdentityServerUser","path","Email",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"d-block","text-truncate"],["collection","IdentityServerUser",3,"entity"]],template:function(e,t){if(1&e&&(c.Qb(0,"t-master",0),c.mc(1,"translate"),c.Rc(2,mt,5,1,"ng-template",null,1,c.Sc),c.Rc(4,ft,2,3,"ng-template",null,2,c.Sc),c.Rc(6,pt,1,1,"ng-template",null,3,c.Sc),c.Rc(8,vt,2,3,"ng-template",null,4,c.Sc),c.Rc(10,gt,2,3,"ng-template",null,5,c.Sc),c.Rc(12,ht,2,3,"ng-template",null,6,c.Sc),c.Rc(14,wt,2,3,"ng-template",null,7,c.Sc)),2&e){var n=c.Fc(3),r=c.Fc(5),i=c.Fc(7),a=c.Fc(9),s=c.Fc(11),o=c.Fc(13),l=c.Fc(15);c.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",c.nc(1,12,"IdentityServerUsers"))("tileTemplate",n)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",r)("showImportButton",!1)("showDeleteButton",!1)("multiselectActions",c.vc(14,yt))("filterDefinition",c.xc(29,kt,c.xc(19,Ct,c.wc(15,Ut,a),c.wc(17,Vt,s)),c.xc(26,Ct,c.wc(22,It,o),c.wc(24,St,l))))}},directives:[te.a,ne.a],pipes:[s.d],encapsulation:2}),Rt),canDeactivate:[Z.a]},{path:"identity-server-users/:id",component:(_t=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=r,a.translate=i,a.modalService=c,a.expand="",a._showPassword=!1,a.identityServerUsersApi=a.api.identityServerUsersApi(a.notifyDestruct$),a.onResetPassword=function(e){e&&e.Id&&(a.modelRef=e,a.modalService.open(a.resetPasswordModal).result.then((function(){a.resetPasswordError=null,a.newPassword=null,a._showPassword=!1}),(function(e){a.resetPasswordError=null,a.newPassword=null,a._showPassword=!1})))},a.showResetPassword=function(e){return!!e},a.canResetPassword=function(e){return a.ws.canDo("identity-server-users","ResetPassword",e.Id)},a.resetPasswordTooltip=function(e){return a.canResetPassword(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.identityServerUsersApi=a.api.identityServerUsersApi(a.notifyDestruct$),a}return _createClass(n,[{key:"resetPasswordClick",value:function(e){var t=this;this.resetPasswordError=null,this.identityServerUsersApi.resetPassword({userId:this.modelRef.Id,password:this.newPassword}).pipe(Object(h.a)((function(n){Object(U.c)(n,t.workspace),e.close(),t.details.displayModalMessage(t.translate.instant("PasswordWasSuccessfullyReset"))})),Object(w.a)((function(e){return t.resetPasswordError=e.error}))).subscribe()}},{key:"togglePasswordVisibility",value:function(){this._showPassword=!this._showPassword}},{key:"ws",get:function(){return this.workspace.admin}},{key:"isPasswordShown",get:function(){return this._showPassword}},{key:"passwordFieldType",get:function(){return this.isPasswordShown?"text":"password"}}]),n}(ye.a),_t.\u0275fac=function(e){return new(e||_t)(c.Pb(a.m),c.Pb(M.a),c.Pb(s.e),c.Pb(E.t))},_t.\u0275cmp=c.Jb({type:_t,selectors:[["t-identity-server-users-details"]],viewQuery:function(e,t){var n;1&e&&c.Oc(At,!0),2&e&&c.Ec(n=c.ic())&&(t.resetPasswordModal=n.first)},features:[c.yb],decls:10,vars:21,consts:[["collection","IdentityServerUser",3,"expand","idString","mode","additionalSelect","showCreateButton","showDeleteButton","showEditButton","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["resetPassword",""],["resetPasswordModal",""],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label"],["collection","IdentityServerUser","path","LockoutEnd",3,"entity"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","type","focusIf","ngModelChange"],[1,"btn","btn-sm","text-primary","t-pointer","mx-1",3,"title","click"],[3,"icon"],[4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","check"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(c.Qb(0,"t-details",0),c.mc(1,"translate"),c.Rc(2,Mt,2,1,"ng-template",null,1,c.Sc),c.Rc(4,Et,21,23,"ng-template",null,2,c.Sc),c.Rc(6,Pt,2,3,"ng-template",null,3,c.Sc),c.Rc(8,Bt,28,27,"ng-template",null,4,c.Sc)),2&e){var n=c.Fc(3),r=c.Fc(5),i=c.Fc(7);c.sc("expand",t.expand)("idString",t.idString)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showDeleteButton",!1)("showEditButton",!1)("masterCrumb",c.nc(1,11,"IdentityServerUsers"))("detailsCrumb",n)("documentTemplate",r)("actions",c.wc(19,Dt,c.Ac(13,xt,i,t.onResetPassword,t.showResetPassword,t.canResetPassword,t.resetPasswordTooltip)))}},directives:[V.a,T.a,ne.a,B.a,_.u,_.k,_.n,l.b,o.u,R.a],pipes:[s.d],encapsulation:2}),_t),canDeactivate:[X.a]},{path:"admin-users",component:we,canDeactivate:[Z.a]},{path:"admin-users/:id",component:dt,canDeactivate:[X.a]},{path:"main-menu",component:m,canDeactivate:[Z.a]},{path:"",redirectTo:"main-menu",pathMatch:"full"},{path:"**",component:f}]},{path:"",redirectTo:"/root/welcome",pathMatch:"full"}],Nt=((Ot=function e(t){_classCallCheck(this,e),t.addIcons(bt.fd,bt.rb,bt.sb)}).\u0275mod=c.Nb({type:Ot}),Ot.\u0275inj=c.Mb({factory:function(e){return new(e||Ot)(c.dc(l.c))},imports:[[i.a,r.i.forChild(Ft)]]}),Ot)}}]);