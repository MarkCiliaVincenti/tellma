(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ZMrW:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",(function(){return Te}));var s=n("tyNb"),i=n("PCNd"),c=n("fXoL"),r=n("PVj+"),o=n("sYmb"),a=n("ofXK"),l=n("6NWb");function u(t,e){if(1&t&&(c.Vb(0,"a",4),c.Vb(1,"div",5),c.Qb(2,"fa-icon",6),c.Ub(),c.Vb(3,"div",7),c.Tc(4),c.Ub(),c.Ub()),2&t){const t=e.$implicit,n=c.lc();c.Gb("d-none",!n.canView("admin-users")),c.sc("routerLink",t.link),c.Bb(2),c.sc("icon",t.icon),c.Bb(2),c.Vc(" ",t.label()," ")}}let d=(()=>{class t{constructor(t,e){this.workspace=t,this.translate=e,this.mainMenuItems=[{label:()=>this.translate.instant("AdminUsers"),icon:"users",view:"admin-users",link:"../admin-users"},{label:()=>this.translate.instant("IdentityServerUsers"),icon:"shield-alt",view:"identity-server-users",link:"../identity-server-users"}]}ngOnInit(){}canView(t){return this.workspace.admin.canRead(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(r.m),c.Pb(o.e))},t.\u0275cmp=c.Jb({type:t,selectors:[["t-admin-main-menu"]],decls:7,vars:4,consts:[[1,"container","py-4","px-5"],[1,"t-menu-section"],[1,"t-teal1"],["class","t-menu-item btn m-1",3,"d-none","routerLink",4,"ngFor","ngForOf"],[1,"t-menu-item","btn","m-1",3,"routerLink"],[1,"pt-4","pb-1","t-menu-item-icon"],[3,"icon"],[1,"px-2","t-menu-item-label"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"span"),c.Tc(3),c.mc(4,"translate"),c.Ub(),c.Ub(),c.Vb(5,"div",2),c.Rc(6,u,5,5,"a",3),c.Ub(),c.Ub()),2&t&&(c.Bb(3),c.Uc(c.nc(4,2,"AdminConsole")),c.Bb(3),c.sc("ngForOf",e.mainMenuItems))},directives:[a.t,s.h,l.b],pipes:[o.d],encapsulation:2}),t})(),m=(()=>{class t{constructor(t){this.router=t}onHome(){this.router.navigate(["admin","console","main-menu"])}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(s.e))},t.\u0275cmp=c.Jb({type:t,selectors:[["t-admin-page-not-found"]],decls:11,vars:9,consts:[[1,"p-5"],[1,"text-danger"],[1,"text-muted"],[1,"mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"h2",1),c.Tc(2),c.mc(3,"translate"),c.Ub(),c.Vb(4,"p",2),c.Tc(5),c.mc(6,"translate"),c.Ub(),c.Vb(7,"div",3),c.Vb(8,"button",4),c.hc("click",(function(){return e.onHome()})),c.Tc(9),c.mc(10,"translate"),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Bb(2),c.Vc(" ",c.nc(3,3,"Error_PageNotFound")," "),c.Bb(3),c.Uc(c.nc(6,5,"Error_PageNotFoundMessage")),c.Bb(4),c.Uc(c.nc(10,7,"Home")))},pipes:[o.d],encapsulation:2}),t})();var b=n("XNiG"),p=n("LRne"),h=n("eIep"),f=n("vkgz"),g=n("JIr8"),v=n("WO2E"),w=n("k0Of"),U=n("AyGX"),y=n("1bxP"),V=n("KOvB"),I=n("eQPh"),S=n("rd7j"),A=n("0xbw"),M=n("o6Md"),C=n("1kSV"),E=n("OoQV"),B=n("AYjT"),P=n("2I7G"),T=n("3Pt+"),k=n("mrGz"),R=n("f3yp");const x=["myAccountModal"];function D(t,e){if(1&t){const t=c.Wb();c.Vb(0,"button",21),c.hc("click",(function(){c.Ic(t);const e=c.lc();return e.onCollapse(),e.nav.onBack()})),c.Qb(1,"fa-icon",22),c.Ub()}if(2&t){const t=c.lc();c.sc("disabled",!t.nav.canBack),c.Bb(1),c.sc("flip",t.flip)}}function O(t,e){if(1&t){const t=c.Wb();c.Vb(0,"button",21),c.hc("click",(function(){c.Ic(t);const e=c.lc();return e.onCollapse(),e.nav.onForward()})),c.Qb(1,"fa-icon",23),c.Ub()}if(2&t){const t=c.lc();c.sc("disabled",!t.nav.canForward),c.Bb(1),c.sc("flip",t.flip)}}function _(t,e){if(1&t){const t=c.Wb();c.Vb(0,"button",17),c.hc("click",(function(){c.Ic(t);const e=c.lc().$implicit,n=c.lc();return n.onSetLanguage(e),n.onCollapse()})),c.Tc(1),c.Ub()}if(2&t){const t=c.lc().$implicit,e=c.lc();c.Bb(1),c.Vc(" ",e.languageName(t)," ")}}function F(t,e){if(1&t&&(c.Tb(0),c.Rc(1,_,2,1,"button",24),c.Sb()),2&t){const t=e.$implicit,n=c.lc();c.Bb(1),c.sc("ngIf",t!==n.currentLanguage)}}const N=function(){return{updateOn:"blur"}};function L(t,e){if(1&t){const t=c.Wb();c.Vb(0,"div",38),c.Vb(1,"t-form-group",39),c.Vb(2,"h2",40),c.Tc(3),c.Ub(),c.Ub(),c.Vb(4,"t-form-group",41),c.mc(5,"translate"),c.Vb(6,"t-text-editor",42),c.hc("ngModelChange",(function(e){return c.Ic(t),c.lc(2).myUser.Name=e})),c.Ub(),c.Ub(),c.Ub()}if(2&t){const t=c.lc(2);c.Bb(3),c.Uc(t.myEmail),c.Bb(1),c.sc("label",c.nc(5,5,"Name"))("serverErrors",null==t.myUser||null==t.myUser.serverErrors?null:t.myUser.serverErrors.Name),c.Bb(2),c.sc("ngModel",t.myUser.Name)("ngModelOptions",c.vc(7,N))}}function j(t,e){if(1&t&&(c.Vb(0,"t-error-message"),c.Tc(1),c.Ub()),2&t){const t=c.lc(2);c.Bb(1),c.Vc(" ",t.saveErrorMessage," ")}}function Q(t,e){if(1&t&&(c.Vb(0,"t-error-message"),c.Tc(1),c.Ub()),2&t){const t=c.lc(2);c.Bb(1),c.Vc(" ",t.errorMessage," ")}}function H(t,e){1&t&&(c.Vb(0,"div",43),c.Qb(1,"t-spinner",44),c.Ub()),2&t&&(c.Bb(1),c.sc("scale",2))}function $(t,e){if(1&t){const t=c.Wb();c.Vb(0,"div",25),c.Vb(1,"h5",26),c.Tc(2),c.mc(3,"translate"),c.Ub(),c.Vb(4,"button",27),c.hc("click",(function(){return e.$implicit.dismiss(!1)})),c.Vb(5,"span",28),c.Tc(6,"\xd7"),c.Ub(),c.Ub(),c.Ub(),c.Vb(7,"div",29),c.Rc(8,L,7,8,"div",30),c.Rc(9,j,2,1,"t-error-message",31),c.Rc(10,Q,2,1,"t-error-message",31),c.Rc(11,H,2,1,"div",32),c.Ub(),c.Vb(12,"div",33),c.Vb(13,"button",34),c.hc("click",(function(){c.Ic(t);const n=e.$implicit;return c.lc().onSave(n)})),c.Qb(14,"fa-icon",35),c.Tc(15),c.mc(16,"translate"),c.Ub(),c.Vb(17,"button",36),c.hc("click",(function(){return e.$implicit.close(!1)})),c.Qb(18,"fa-icon",37),c.Tc(19),c.mc(20,"translate"),c.Ub(),c.Ub()}if(2&t){const t=c.lc();c.Bb(2),c.Vc(" ",c.nc(3,8,"MyAdminAccount")," "),c.Bb(6),c.sc("ngIf",t.isMyUserLoaded),c.Bb(1),c.sc("ngIf",t.isMyUserLoaded&&!!t.saveErrorMessage),c.Bb(1),c.sc("ngIf",t.isMyUserError),c.Bb(1),c.sc("ngIf",t.isMyUserLoading),c.Bb(2),c.sc("disabled",!t.canSave),c.Bb(2),c.Vc(" \xa0",c.nc(16,10,"Save")," "),c.Bb(4),c.Vc(" \xa0",c.nc(20,12,"Cancel")," ")}}const q=function(t){return{placeholder:t}};let W=(()=>{class t{constructor(t,e,n,s,i,c,r,o,a){this.workspace=t,this.nav=e,this.translate=n,this.progress=s,this.auth=i,this.storage=c,this.apiService=r,this.document=o,this.modalService=a,this.isCollapsed=!0,this.notifyDestruct$=new b.a,this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$),this.notifyFetch$=new b.a,this.notifyFetch$.pipe(Object(h.a)(()=>this.doFetch())).subscribe()}ngOnInit(){this.adminUsersApi=this.apiService.adminUsersApi(this.notifyDestruct$)}ngOnDestroy(){this.notifyDestruct$.next(),this._subscription&&this._subscription.unsubscribe()}get activeLanguages(){return this._activeLanguages||(this._activeLanguages=Object.keys(y.a)),this._activeLanguages}languageName(t){return y.a[t]}onSetLanguage(t){this.translate.use(t),this.storage.setItem("user_culture",t)}get currentLanguage(){return this.workspace.ws.culture||this.translate.currentLang||this.translate.defaultLang||"en"}onToggleCollapse(){this.isCollapsed=!this.isCollapsed}onCollapse(){this.isCollapsed=!0}get settings(){return this.ws?this.ws.settings:null}get ws(){return this.workspace.admin}get userName(){return this.ws.userSettings.Name}get isRtl(){return this.workspace.ws.isRtl}onMySystemAccount(){location.href=v.b.identityAddress+"/identity/manage/"}onSignOut(){this.progress.startAsyncOperation("sign_out","RedirectingToSignOut"),this.auth.signOut()}get flip(){return this.isRtl?"horizontal":null}onMyAdminAccount(){this.fetch(),this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.myAccountModal,{windowClass:"t-myuser-modal"}).result.then(()=>this.onMyAdminAccountClose(),()=>this.onMyAdminAccountClose())}onMyAdminAccountClose(){this.workspace.ignoreKeyDownEvents=!1}fetch(){this.notifyFetch$.next(null)}doFetch(){return this.myUserStatus=r.c.loading,this.adminUsersApi.getMyUser().pipe(Object(f.a)(t=>{Object(w.b)(t,this.workspace),this.myUserStatus=r.c.loaded,this.onEdit()}),Object(g.a)(t=>(this._errorMessage=t.error,this.myUserStatus=r.c.error,Object(p.a)(null))))}onEdit(){const t=this.ws.get("AdminUser",this.ws.userSettings.UserId);this.myUser={Name:t.Name}}onSave(t){this._errorMessage=null,this._saveErrorMessage=null,Object(U.c)(this.myUser),this.adminUsersApi.saveMyUser(this.myUser).subscribe(e=>{Object(w.b)(e,this.workspace),t.close(!0)},t=>{if(422===t.status){const e=Object(U.b)(this.myUser,t.error);Object.keys(e).length>0&&console.error(e)}else this._saveErrorMessage=t.error;return Object(p.a)(null)})}get errorMessage(){return this._errorMessage}get saveErrorMessage(){return this._saveErrorMessage}get isMyUserLoaded(){return this.myUserStatus===r.c.loaded}get isMyUserError(){return this.myUserStatus===r.c.error}get isMyUserLoading(){return this.myUserStatus===r.c.loading}get myEmail(){return this.ws.get("AdminUser",this.ws.userSettings.UserId).Email}get canSave(){return this.isMyUserLoaded}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(r.m),c.Pb(V.a),c.Pb(o.e),c.Pb(I.a),c.Pb(S.b),c.Pb(A.a),c.Pb(M.a),c.Pb(a.e),c.Pb(C.t))},t.\u0275cmp=c.Jb({type:t,selectors:[["t-admin-shell"]],viewQuery:function(t,e){var n;1&t&&c.Oc(x,!0),2&t&&c.Ec(n=c.ic())&&(e.myAccountModal=n.first)},decls:41,vars:35,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-light","shadow-sm","border-bottom","bg-white","navbar-expand-sm","p-0","align-items-sm-stretch"],["routerLink","main-menu",1,"t-brand-link","t-navbar-button","d-flex","align-items-baseline",3,"title"],["theme","light",3,"scale"],[1,"mx-2","d-flex"],["class","t-navbar-button nav-link",3,"disabled","click",4,"ngIf"],["type","button",1,"navbar-toggler","mx-2",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse","align-items-stretch",3,"ngbCollapse"],[1,"nav","navbar-nav","px-4","px-lg-0"],[1,"nav","navbar-nav","p-0"],["ngbDropdown","","container","",1,"nav-item"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","align-items-center"],[1,"px-2"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow","m-0"],["type","button","ngbDropdownItem","","routerLink","/root/companies",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","","routerLink","/root/welcome",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[4,"ngFor","ngForOf"],[1,"t-rest-of-screen","container-fluid"],["myAccountModal",""],[1,"t-navbar-button","nav-link",3,"disabled","click"],["icon","arrow-left",3,"flip"],["icon","arrow-right",3,"flip"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0","bg-white"],["class","row m-0 px-1 px-sm-3 pt-3 pt-sm-4 pb-3 pb-sm-5",4,"ngIf"],[4,"ngIf"],["class","d-flex justify-content-center py-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"row","m-0","px-1","px-sm-3","pt-3","pt-sm-4","pb-3","pb-sm-5"],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","py-2"],[3,"scale"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"nav",1),c.Vb(2,"a",2),c.mc(3,"translate"),c.Qb(4,"t-brand",3),c.Ub(),c.Vb(5,"div",4),c.Rc(6,D,2,2,"button",5),c.Tc(7," \xa0 "),c.Rc(8,O,2,2,"button",5),c.Ub(),c.Vb(9,"button",6),c.hc("click",(function(){return e.onToggleCollapse()})),c.Qb(10,"span",7),c.Ub(),c.Vb(11,"div",8),c.Qb(12,"ol",9),c.Vb(13,"ol",10),c.Vb(14,"li",11),c.Vb(15,"button",12),c.Vb(16,"span",13),c.Tc(17),c.Ub(),c.Ub(),c.Vb(18,"div",14),c.Vb(19,"button",15),c.hc("click",(function(){return e.onCollapse()})),c.Tc(20),c.mc(21,"translate"),c.Ub(),c.Vb(22,"button",16),c.hc("click",(function(){return e.onCollapse()})),c.Tc(23),c.mc(24,"translate"),c.Ub(),c.Vb(25,"button",17),c.hc("click",(function(){return e.onMySystemAccount(),e.onCollapse()})),c.Tc(26),c.mc(27,"translate"),c.mc(28,"translate"),c.Ub(),c.Vb(29,"button",17),c.hc("click",(function(){return e.onMyAdminAccount(),e.onCollapse()})),c.Tc(30),c.mc(31,"translate"),c.Ub(),c.Vb(32,"button",17),c.hc("click",(function(){return e.onSignOut(),e.onCollapse()})),c.Tc(33),c.mc(34,"translate"),c.Ub(),c.Qb(35,"hr"),c.Rc(36,F,2,1,"ng-container",18),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(37,"main",19),c.Qb(38,"router-outlet"),c.Ub(),c.Ub(),c.Rc(39,$,21,14,"ng-template",null,20,c.Sc)),2&t&&(c.Bb(2),c.sc("title",c.nc(3,18,"Home")),c.Bb(2),c.sc("scale",1),c.Bb(2),c.sc("ngIf",e.nav.showBack),c.Bb(2),c.sc("ngIf",e.nav.showForward),c.Bb(3),c.sc("ngbCollapse",e.isCollapsed),c.Bb(1),c.Gb("mr-auto",!e.isRtl)("ml-auto",e.isRtl),c.Bb(5),c.Uc(e.userName),c.Bb(1),c.Gb("dropdown-menu-right",!e.isRtl),c.Bb(2),c.Vc(" ",c.nc(21,20,"MyCompanies")," "),c.Bb(3),c.Vc(" ",c.nc(24,22,"WelcomePage")," "),c.Bb(3),c.Vc(" ",c.oc(27,24,"My0Account",c.wc(33,q,c.nc(28,27,"AppName")))," "),c.Bb(4),c.Vc(" ",c.nc(31,29,"MyAdminAccount")," "),c.Bb(3),c.Vc(" ",c.nc(34,31,"SignOut")," "),c.Bb(3),c.sc("ngForOf",e.activeLanguages))},directives:[C.B,s.h,E.a,a.u,C.d,C.l,C.r,C.p,C.o,s.f,a.t,s.j,l.b,B.a,P.a,T.u,T.k,T.n,k.a,R.a],pipes:[o.d],encapsulation:2}),t})();var J=n("DWXW"),G=n("wqEn"),z=n("TJ1c"),X=n("Y7zQ"),Y=n("O90C"),K=n("QFit"),Z=n("EoPe");function tt(t,e){if(1&t&&(c.Vb(0,"div",9),c.Qb(1,"t-auto-cell",10),c.Ub(),c.Vb(2,"div",11),c.Qb(3,"t-auto-cell",12),c.Qb(4,"t-auto-cell",13),c.Ub()),2&t){const t=e.id,n=c.lc();c.Bb(1),c.sc("entity",n.c[t]),c.Bb(2),c.sc("entity",n.c[t]),c.Bb(1),c.sc("entity",n.c[t])}}function et(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"AdminUser"),"\n")}function nt(t,e){if(1&t&&c.Qb(0,"t-auto-cell",14),2&t){const t=e.id,n=c.lc();c.sc("entity",n.c[t])}}function st(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"Activate")," ")}function it(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"Deactivate")," ")}function ct(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"CreatedByMe")," ")}function rt(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"User_Invited")," ")}function ot(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"User_Member")," ")}const at=function(t,e,n,s){return{template:t,action:e,canAction:n,actionTooltip:s}},lt=function(t,e){return[t,e]},ut=function(t){return{template:t,expression:"CreatedById eq me"}},dt=function(t){return[t]},mt=function(t){return{template:t,expression:"ExternalId eq null"}},bt=function(t){return{template:t,expression:"ExternalId ne null"}},pt=function(t,e){return{CreatedBy:t,ExternalId:e}};let ht=(()=>{class t extends Y.a{constructor(t,e,n){super(),this.workspace=t,this.api=e,this.translate=n,this.adminUsersApi=this.api.adminUsersApi(this.notifyDestruct$),this.onActivate=t=>this.adminUsersApi.activate(t,{returnEntities:!0}).pipe(Object(f.a)(t=>Object(w.c)(t,this.workspace))),this.onDeactivate=t=>this.adminUsersApi.deactivate(t,{returnEntities:!0}).pipe(Object(f.a)(t=>Object(w.c)(t,this.workspace))),this.canActivateDeactivateItem=t=>this.ws.canDo("admin-users","IsActive",null),this.activateDeactivateTooltip=t=>this.canActivateDeactivateItem(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.adminUsersApi=this.api.adminUsersApi(this.notifyDestruct$)}get c(){return this.ws.AdminUser}get ws(){return this.workspace.admin}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(r.m),c.Pb(M.a),c.Pb(o.e))},t.\u0275cmp=c.Jb({type:t,selectors:[["t-admin-users-master"]],features:[c.yb],decls:18,vars:39,consts:[["collection","AdminUser","selectDefault","Email,State,LastAccess","selectForTiles","State,Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["new",""],["confirmed",""],[1,"d-flex","justify-content-between"],["collection","AdminUser","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","AdminUser","path","Email",3,"entity"],["collection","AdminUser","path","State",3,"entity"],["collection","AdminUser",3,"entity"]],template:function(t,e){if(1&t&&(c.Qb(0,"t-master",0),c.mc(1,"translate"),c.Rc(2,tt,5,3,"ng-template",null,1,c.Sc),c.Rc(4,et,2,3,"ng-template",null,2,c.Sc),c.Rc(6,nt,1,1,"ng-template",null,3,c.Sc),c.Rc(8,st,2,3,"ng-template",null,4,c.Sc),c.Rc(10,it,2,3,"ng-template",null,5,c.Sc),c.Rc(12,ct,2,3,"ng-template",null,6,c.Sc),c.Rc(14,rt,2,3,"ng-template",null,7,c.Sc),c.Rc(16,ot,2,3,"ng-template",null,8,c.Sc)),2&t){const t=c.Fc(3),n=c.Fc(5),s=c.Fc(7),i=c.Fc(9),r=c.Fc(11),o=c.Fc(13),a=c.Fc(15),l=c.Fc(17);c.sc("mode",e.mode)("showCreateButton",e.showCreate)("filterDefault",e.filter)("additionalSelect",e.additionalSelect)("masterCrumb",c.nc(1,10,"AdminUsers"))("tileTemplate",t)("tableSummaryColumnTemplate",s)("tableSummaryHeaderTemplate",n)("multiselectActions",c.xc(22,lt,c.zc(12,at,i,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.zc(17,at,r,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",c.xc(36,pt,c.wc(27,dt,c.wc(25,ut,o)),c.xc(33,lt,c.wc(29,mt,a),c.wc(31,bt,l))))}},directives:[K.a,Z.a],pipes:[o.d],encapsulation:2}),t})();var ft=n("CHDZ"),gt=n("U6XH"),vt=n("ABE2"),wt=n("88Q5"),Ut=n("1nIS"),yt=n("56d8");function Vt(t,e){if(1&t&&(c.Vb(0,"span"),c.Tc(1),c.Ub()),2&t){const t=e.model;c.Bb(1),c.Uc(null==t?null:t.Name)}}function It(t,e){if(1&t&&(c.Vb(0,"div",7),c.Vb(1,"t-restricted",8),c.Vb(2,"div",9),c.Vb(3,"div"),c.Vb(4,"span"),c.Tc(5),c.mc(6,"translate"),c.Ub(),c.Ub(),c.Vb(7,"div"),c.Vb(8,"span"),c.Tc(9),c.mc(10,"translate"),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div",10),c.Vb(12,"span"),c.Tc(13),c.mc(14,"translate"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t){const t=e.model;c.Bb(1),c.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.ExternalId),c.Bb(2),c.Gb("active",!(null!=t&&t.ExternalId)),c.Bb(2),c.Uc(c.nc(6,8,"User_Invited")),c.Bb(2),c.Gb("active",!(null==t||!t.ExternalId)),c.Bb(2),c.Uc(c.nc(10,10,"User_Member")),c.Bb(4),c.Uc(c.nc(14,12,null!=t&&t.ExternalId?"User_Invited":"User_Member"))}}function St(t,e){if(1&t&&(c.Vb(0,"h2",27),c.Tc(1),c.Ub()),2&t){const t=c.lc().model;c.Bb(1),c.Uc(null==t?null:t.Name)}}const At=function(){return{updateOn:"blur"}};function Mt(t,e){if(1&t){const t=c.Wb();c.Vb(0,"t-text-editor",28),c.hc("ngModelChange",(function(e){return c.Ic(t),c.lc().model.Name=e})),c.mc(1,"translate"),c.Ub()}if(2&t){const t=c.lc().model;c.sc("focusIf",!t.Id)("ngModel",t.Name)("ngModelOptions",c.vc(6,At))("placeholder",c.nc(1,4,"Name"))}}function Ct(t,e){if(1&t&&(c.Vb(0,"div"),c.Tc(1),c.Ub()),2&t){const t=c.lc().model;c.Bb(1),c.Uc(null==t?null:t.Email)}}function Et(t,e){if(1&t){const t=c.Wb();c.Vb(0,"t-text-editor",29),c.hc("ngModelChange",(function(e){return c.Ic(t),c.lc().model.Email=e})),c.Ub()}if(2&t){const t=c.lc().model,e=c.lc();c.sc("ngModel",t.Email)("ngModelOptions",c.vc(3,At))("disabled",!e.isNew)}}function Bt(t,e){if(1&t&&(c.Vb(0,"t-form-group",30),c.mc(1,"translate"),c.Qb(2,"t-auto-cell",31),c.Ub()),2&t){const t=c.lc().model;c.sc("label",c.nc(1,2,"User_LastActivity")),c.Bb(2),c.sc("entity",t)}}function Pt(t,e){if(1&t&&(c.Vb(0,"t-form-group",30),c.mc(1,"translate"),c.Vb(2,"div"),c.Tc(3),c.mc(4,"translate"),c.Ub(),c.Ub()),2&t){const t=c.lc().model;c.sc("label",c.nc(1,2,"IsActive")),c.Bb(3),c.Uc(c.nc(4,4,t?t.IsActive?"Active":"Inactive":""))}}const Tt=function(t){return{email:t}};function kt(t,e){if(1&t&&(c.Vb(0,"div",32),c.Vb(1,"span"),c.Tc(2),c.mc(3,"translate"),c.Ub(),c.Ub()),2&t){const t=c.lc().model;c.Bb(2),c.Uc(c.oc(3,1,"UserInvitationNotice",c.wc(4,Tt,null==t?null:t.Email)))}}function Rt(t,e){1&t&&(c.Vb(0,"span",33),c.Tc(1,"\xa0"),c.Qb(2,"fa-icon",34),c.Ub())}function xt(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Uc(c.nc(1,1,"Permission_View"))}function Dt(t,e){if(1&t&&(c.Vb(0,"div"),c.Tc(1),c.Ub()),2&t){const t=c.lc().item,e=c.lc(3);c.Bb(1),c.Vc(" ",e.permissionViewLookup(t.View)," ")}}function Ot(t,e){if(1&t){const t=c.Wb();c.Vb(0,"t-selector",46),c.hc("ngModelChange",(function(e){return c.Ic(t),c.lc().item.View=e}))("ngModelChange",(function(){c.Ic(t);const e=c.lc(),n=e.item,s=e.update,i=c.lc(3);return s.call(null,n),i.onPermissionChanged(n)})),c.Ub()}if(2&t){const t=c.lc().item,e=c.lc(3);c.sc("choices",e.permissionViewChoices)("ngModel",t.View)("required",!t.PH)}}function _t(t,e){if(1&t&&(c.Vb(0,"t-form-group-cell",44),c.Rc(1,Dt,2,1,"div",15),c.Rc(2,Ot,1,3,"t-selector",45),c.Ub()),2&t){const t=e.item,n=c.lc(2).isEdit;c.sc("serverErrors",null==t.serverErrors?null:t.serverErrors.View),c.Bb(1),c.sc("ngIf",!n),c.Bb(1),c.sc("ngIf",n)}}function Ft(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Uc(c.nc(1,1,"Permission_Action"))}function Nt(t,e){if(1&t&&(c.Vb(0,"div"),c.Tc(1),c.mc(2,"translate"),c.Ub()),2&t){const t=c.lc().item,e=c.lc(3);c.Bb(1),c.Uc(c.nc(2,1,e.permissionActionLookup(null==t?null:t.Action)))}}function Lt(t,e){if(1&t){const t=c.Wb();c.Vb(0,"t-selector",48),c.hc("ngModelChange",(function(e){return c.Ic(t),c.lc().item.Action=e}))("ngModelChange",(function(){c.Ic(t);const e=c.lc(),n=e.item,s=e.update,i=c.lc(3);return s.call(null,n),i.onPermissionChanged(n)})),c.Ub()}if(2&t){const t=c.lc().item,e=c.lc(3);c.sc("ngModel",t.Action)("required",!t.PH)("ngModelOptions",c.vc(5,At))("choices",e.permissionActionChoices(t))("disabled",!t.View)}}function jt(t,e){if(1&t&&(c.Vb(0,"t-form-group-cell",44),c.Rc(1,Nt,3,3,"div",15),c.Rc(2,Lt,1,6,"t-selector",47),c.Ub()),2&t){const t=e.item,n=c.lc(2).isEdit;c.sc("serverErrors",null==t.serverErrors?null:t.serverErrors.Action),c.Bb(1),c.sc("ngIf",!n),c.Bb(1),c.sc("ngIf",n)}}function Qt(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Uc(c.nc(1,1,"Permission_Criteria"))}function Ht(t,e){if(1&t&&(c.Vb(0,"div"),c.Tc(1),c.Ub()),2&t){const t=c.lc().item;c.Bb(1),c.Uc(t.Criteria)}}function $t(t,e){if(1&t){const t=c.Wb();c.Vb(0,"t-text-editor",50),c.hc("ngModelChange",(function(e){return c.Ic(t),c.lc().item.Criteria=e}))("ngModelChange",(function(){c.Ic(t);const e=c.lc();return e.update.call(null,e.item)})),c.Ub()}if(2&t){const t=c.lc().item,e=c.lc(3);c.sc("ngModel",t.Criteria)("ngModelOptions",c.vc(3,At))("disabled",e.disableCriteria(t))}}function qt(t,e){if(1&t&&(c.Vb(0,"t-form-group-cell",44),c.Rc(1,Ht,2,1,"div",15),c.Rc(2,$t,1,4,"t-text-editor",49),c.Ub()),2&t){const t=e.item,n=c.lc(2).isEdit;c.sc("serverErrors",null==t.serverErrors?null:t.serverErrors.Criteria),c.Bb(1),c.sc("ngIf",!n),c.Bb(1),c.sc("ngIf",n)}}function Wt(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Uc(c.nc(1,1,"Memo"))}function Jt(t,e){if(1&t&&(c.Vb(0,"div"),c.Tc(1),c.Ub()),2&t){const t=c.lc().item;c.Bb(1),c.Uc(t.Memo)}}function Gt(t,e){if(1&t){const t=c.Wb();c.Vb(0,"t-text-editor",52),c.hc("ngModelChange",(function(e){return c.Ic(t),c.lc().item.Memo=e}))("ngModelChange",(function(){c.Ic(t);const e=c.lc();return e.update.call(null,e.item)})),c.Ub()}if(2&t){const t=c.lc().item;c.sc("ngModel",t.Memo)("ngModelOptions",c.vc(2,At))}}function zt(t,e){if(1&t&&(c.Vb(0,"t-form-group-cell",44),c.Rc(1,Jt,2,1,"div",15),c.Rc(2,Gt,1,3,"t-text-editor",51),c.Ub()),2&t){const t=e.item,n=c.lc(2).isEdit;c.sc("serverErrors",null==t.serverErrors?null:t.serverErrors.Memo),c.Bb(1),c.sc("ngIf",!n),c.Bb(1),c.sc("ngIf",n)}}const Xt=function(){return["View","Action","Criteria","Memo"]},Yt=function(t,e){return{headerTemplate:t,rowTemplate:e,weight:1}},Kt=function(t,e,n,s){return{View:t,Action:e,Criteria:n,Memo:s}};function Zt(t,e){if(1&t&&(c.Vb(0,"t-restricted",8),c.Qb(1,"t-table",35),c.Ub(),c.Rc(2,xt,2,3,"ng-template",null,36,c.Sc),c.Rc(4,_t,3,3,"ng-template",null,37,c.Sc),c.Rc(6,Ft,2,3,"ng-template",null,38,c.Sc),c.Rc(8,jt,3,3,"ng-template",null,39,c.Sc),c.Rc(10,Qt,2,3,"ng-template",null,40,c.Sc),c.Rc(12,qt,3,3,"ng-template",null,41,c.Sc),c.Rc(14,Wt,2,3,"ng-template",null,42,c.Sc),c.Rc(16,zt,3,3,"ng-template",null,43,c.Sc)),2&t){const t=c.Fc(3),e=c.Fc(5),n=c.Fc(7),s=c.Fc(9),i=c.Fc(11),r=c.Fc(13),o=c.Fc(15),a=c.Fc(17),l=c.lc(),u=l.model,d=l.isEdit;c.Gb("p-4",1===(null==u||null==u.EntityMetadata?null:u.EntityMetadata.Permissions)),c.sc("metadata",null==u||null==u.EntityMetadata?null:u.EntityMetadata.Permissions),c.Bb(1),c.sc("dataSource",null==u?null:u.Permissions)("isEdit",d)("columnPaths",c.vc(7,Xt))("columnTemplates",c.zc(20,Kt,c.xc(8,Yt,t,e),c.xc(11,Yt,n,s),c.xc(14,Yt,i,r),c.xc(17,Yt,o,a)))}}function te(t,e){if(1&t&&(c.Vb(0,"t-form-group",11),c.Rc(1,St,2,1,"h2",12),c.Rc(2,Mt,2,7,"t-text-editor",13),c.Ub(),c.Vb(3,"t-form-group",14),c.mc(4,"translate"),c.Rc(5,Ct,2,1,"div",15),c.Rc(6,Et,1,4,"t-text-editor",16),c.Ub(),c.Rc(7,Bt,3,4,"t-form-group",17),c.Rc(8,Pt,5,6,"t-form-group",17),c.Rc(9,kt,4,6,"div",18),c.Vb(10,"ul",19,20),c.Vb(12,"li",21),c.Vb(13,"a",22),c.Vb(14,"span",23),c.Tc(15),c.mc(16,"translate"),c.mc(17,"number"),c.Ub(),c.Rc(18,Rt,3,0,"span",24),c.Ub(),c.Rc(19,Zt,18,25,"ng-template",25),c.Ub(),c.Ub(),c.Qb(20,"div",26)),2&t){const t=e.model,n=e.isEdit,s=c.Fc(11),i=c.lc();c.sc("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),c.Bb(1),c.sc("ngIf",!n),c.Bb(1),c.sc("ngIf",n),c.Bb(1),c.sc("label",c.nc(4,15,"User_Email"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Email),c.Bb(2),c.sc("ngIf",!n),c.Bb(1),c.sc("ngIf",n),c.Bb(1),c.sc("ngIf",!n),c.Bb(1),c.sc("ngIf",!n),c.Bb(1),c.sc("ngIf",i.showInvitationInfo(t)),c.Bb(1),c.sc("destroyOnHide",!0),c.Bb(2),c.sc("disabled",!0),c.Bb(3),c.Uc(c.nc(16,17,"User_Permissions")+(t.Id&&2!==(null==t||null==t.EntityMetadata?null:t.EntityMetadata.Permissions)?"":" ("+c.nc(17,19,null==t||null==t.Permissions?null:t.Permissions.length)+")")),c.Bb(3),c.sc("ngIf",i.showPermissionsError(t)),c.Bb(2),c.sc("ngbNavOutlet",s)}}function ee(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"Activate")," ")}function ne(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"Deactivate")," ")}function se(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"ResendInvitationEmail")," ")}const ie=function(t,e,n,s,i){return{template:t,action:e,showAction:n,canAction:s,actionTooltip:i}},ce=function(t,e,n){return[t,e,n]};let re=(()=>{class t extends ft.a{constructor(t,e,n,s){super(),this.workspace=t,this.api=e,this.translate=n,this.route=s,this.showRoles=!0,this.expand="Permissions",this.adminUsersApi=this.api.adminUsersApi(this.notifyDestruct$),this._permissionActionChoices={},this._viewsDb=null,this._currentViewsDb=null,this._viewsForSelector=null,this.create=()=>{const t={};return t.Name=this.initialText,t.Permissions=[],t},this.clone=t=>{if(t){const e=JSON.parse(JSON.stringify(t));return e.Id=null,e.Permissions&&e.Permissions.forEach(t=>{t.Id=null}),e}return console.error("Cloning a non existing item"),null},this.onInvite=t=>{t&&t.Id&&this.adminUsersApi.invite(t.Id).subscribe(()=>{this.details.displayModalMessage(this.translate.instant("InvitationEmailSent"))},this.details.handleActionError)},this.showInvite=t=>!!t&&!t.ExternalId,this.canInvite=t=>this.ws.canDo("admin-users","ResendInvitationEmail",t.Id),this.inviteTooltip=t=>this.canInvite(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.onActivate=t=>{t&&t.Id&&this.adminUsersApi.activate([t.Id],{returnEntities:!0}).pipe(Object(f.a)(t=>Object(w.c)(t,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=t=>{t&&t.Id&&this.adminUsersApi.deactivate([t.Id],{returnEntities:!0}).pipe(Object(f.a)(t=>Object(w.c)(t,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=t=>!!t&&!t.IsActive,this.showDeactivate=t=>!!t&&t.IsActive,this.canActivateDeactivateItem=t=>this.ws.canDo("admin-users","IsActive",t.Id),this.activateDeactivateTooltip=t=>this.canActivateDeactivateItem(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.adminUsersApi=this.api.adminUsersApi(this.notifyDestruct$)}get ws(){return this.workspace.admin}showInvitationInfo(t){return!!t&&!!t.Email&&this.isNew}get isNew(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}showPermissionsError(t){return!!t&&!!t.Permissions&&t.Permissions.some(t=>!!t.serverErrors)}get viewsDb(){if(this._currentLang!==this.translate.currentLang){this._currentLang=this.translate.currentLang,this._viewsDb={};for(const t of Object.keys(gt.b)){const e=gt.b[t],n={name:()=>this.translate.instant(e.name),actions:{}};n.actions.All={supportsCriteria:!1},e.read&&(n.actions.Read={supportsCriteria:!0}),e.update&&(n.actions.Update={supportsCriteria:!0}),e.delete&&(n.actions.Delete={supportsCriteria:!0});for(const t of e.actions)n.actions[t.action]={supportsCriteria:t.criteria};this._viewsDb[t]=n}}return this._viewsDb}get permissionViewChoices(){if(this._currentViewsDb!==this.viewsDb){const t=this.viewsDb;this._currentViewsDb=t,this._viewsForSelector=Object.keys(t).map(e=>({value:e,name:t[e].name})),this._viewsForSelector.sort((t,e)=>t.name()<e.name()?-1:t.name()>e.name()?1:0)}return this._viewsForSelector}permissionViewLookup(t){return t?this.viewsDb[t]?this.viewsDb[t].name():(console.error(`missing view ${t}`),""):""}onPermissionChanged(t){const e=this.permissionActionChoices(t);1===e.length?t.Action=e[0].value:t.Action&&e.every(e=>e.value!==t.Action)&&(t.Action=null),this.disableCriteria(t)&&(t.Criteria=null)}disableCriteria(t){if(!t||!t.View||!t.Action)return!0;const e=this.viewsDb[t.View];if(e&&e.actions){const n=e.actions[t.Action];return!(n&&n.supportsCriteria)}return!0}permissionActionChoices(t){if(!t.View)return[];if(!this._permissionActionChoices[t.View]){const e=this.viewsDb[t.View];this._permissionActionChoices[t.View]=e&&e.actions?Object.keys(e.actions).map(t=>({name:()=>this.translate.instant(gt.a[t]),value:t})):[]}return this._permissionActionChoices[t.View]}permissionActionLookup(t){return t?"All"===t?"View_All":gt.a[t]:""}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(r.m),c.Pb(M.a),c.Pb(o.e),c.Pb(s.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["t-admin-users-details"]],inputs:{showRoles:"showRoles"},features:[c.yb],decls:14,vars:35,consts:[["collection","AdminUser",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","documentHeaderTemplate","actions"],["detailsCrumb",""],["documentHeader",""],["document",""],["activate",""],["deactivate",""],["invite",""],[1,"w-100","t-document-header","d-flex","justify-content-end"],[3,"metadata"],[1,"t-flow-chart","small"],[1,"small","t-lone-state","active","d-none"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["class","col-12 alert-primary p-2 px-3 mt-3 mt-sm-4",4,"ngIf"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","permissions",3,"disabled"],["ngbNavLink",""],[1,"small","t-slightly-bold"],["class","text-danger",4,"ngIf"],["ngbNavContent",""],[1,"w-100",3,"ngbNavOutlet"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"t-form-group",3,"label"],["collection","AdminUser","path","LastAccess",3,"entity"],[1,"col-12","alert-primary","p-2","px-3","mt-3","mt-sm-4"],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_View",""],["row_View",""],["header_Action",""],["row_Action",""],["header_Criteria",""],["row_Criteria",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"choices","ngModel","required","ngModelChange",4,"ngIf"],[3,"choices","ngModel","required","ngModelChange"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){if(1&t&&(c.Qb(0,"t-details",0),c.mc(1,"translate"),c.Rc(2,Vt,2,1,"ng-template",null,1,c.Sc),c.Rc(4,It,15,14,"ng-template",null,2,c.Sc),c.Rc(6,te,21,21,"ng-template",null,3,c.Sc),c.Rc(8,ee,2,3,"ng-template",null,4,c.Sc),c.Rc(10,ne,2,3,"ng-template",null,5,c.Sc),c.Rc(12,se,2,3,"ng-template",null,6,c.Sc)),2&t){const t=c.Fc(3),n=c.Fc(5),s=c.Fc(7),i=c.Fc(9),r=c.Fc(11),o=c.Fc(13);c.sc("expand",e.expand)("idString",e.idString)("createFunc",e.create)("cloneFunc",e.clone)("mode",e.mode)("additionalSelect",e.additionalSelect)("masterCrumb",c.nc(1,11,"AdminUsers"))("detailsCrumb",t)("documentTemplate",s)("documentHeaderTemplate",n)("actions",c.yc(31,ce,c.Ac(13,ie,o,e.onInvite,e.showInvite,e.canInvite,e.inviteTooltip),c.Ac(19,ie,i,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),c.Ac(25,ie,r,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))}},directives:[U.a,vt.a,B.a,a.u,C.v,C.x,C.y,C.w,C.A,P.a,T.u,T.k,T.n,T.d,Z.a,l.b,wt.a,Ut.a,yt.a],pipes:[o.d,a.g],encapsulation:2}),t})();var oe=n("wHSu");function ae(t,e){if(1&t&&(c.Vb(0,"div",8),c.Qb(1,"t-auto-cell",9),c.Ub(),c.Vb(2,"div",10),c.Vb(3,"span",11),c.Tc(4,"\xa0"),c.Ub(),c.Ub()),2&t){const t=e.id,n=c.lc();c.Bb(1),c.sc("entity",n.c[t])}}function le(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"IdentityServerUser"),"\n")}function ue(t,e){if(1&t&&c.Qb(0,"t-auto-cell",12),2&t){const t=e.id,n=c.lc();c.sc("entity",n.c[t])}}function de(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"EmailConfirmed")," ")}function me(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"EmailNotConfirmed")," ")}function be(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"PasswordIsSet")," ")}function pe(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"PasswordIsNotSet")," ")}const he=function(){return[]},fe=function(t){return{template:t,expression:"EmailConfirmed eq true"}},ge=function(t){return{template:t,expression:"EmailConfirmed eq false"}},ve=function(t,e){return[t,e]},we=function(t){return{template:t,expression:"PasswordSet eq true"}},Ue=function(t){return{template:t,expression:"PasswordSet eq false"}},ye=function(t,e){return{EmailConfirmed:t,PasswordSet:e}},Ve=["resetPasswordModal"];function Ie(t,e){if(1&t&&(c.Vb(0,"span"),c.Tc(1),c.Ub()),2&t){const t=e.model;c.Bb(1),c.Uc(null==t?null:t.Email)}}function Se(t,e){if(1&t&&(c.Vb(0,"t-form-group",5),c.Vb(1,"h2",6),c.Tc(2),c.Ub(),c.Ub(),c.Vb(3,"t-form-group",7),c.mc(4,"translate"),c.Vb(5,"div"),c.Tc(6),c.mc(7,"translate"),c.Ub(),c.Ub(),c.Vb(8,"t-form-group",7),c.mc(9,"translate"),c.Vb(10,"div"),c.Tc(11),c.mc(12,"translate"),c.Ub(),c.Ub(),c.Vb(13,"t-form-group",7),c.mc(14,"translate"),c.Vb(15,"div"),c.Tc(16),c.mc(17,"translate"),c.Ub(),c.Ub(),c.Vb(18,"t-form-group",7),c.mc(19,"translate"),c.Qb(20,"t-auto-cell",8),c.Ub()),2&t){const t=e.model;c.Bb(2),c.Uc(null==t?null:t.Email),c.Bb(1),c.sc("label",c.nc(4,9,"IdentityServerUser_EmailConfirmed")),c.Bb(3),c.Vc("",c.nc(7,11,!0===t.EmailConfirmed?"Yes":!1===t.EmailConfirmed?"No":"")," "),c.Bb(2),c.sc("label",c.nc(9,13,"IdentityServerUser_PasswordSet")),c.Bb(3),c.Vc("",c.nc(12,15,!0===t.PasswordSet?"Yes":!1===t.PasswordSet?"No":"")," "),c.Bb(2),c.sc("label",c.nc(14,17,"IdentityServerUser_TwoFactorEnabled")),c.Bb(3),c.Vc("",c.nc(17,19,!0===t.TwoFactorEnabled?"Yes":!1===t.TwoFactorEnabled?"No":"")," "),c.Bb(2),c.sc("label",c.nc(19,21,"IdentityServerUser_LockoutEnd")),c.Bb(2),c.sc("entity",t)}}function Ae(t,e){1&t&&(c.Tc(0),c.mc(1,"translate")),2&t&&c.Vc(" ",c.nc(1,1,"ResetPassword")," ")}function Me(t,e){if(1&t&&(c.Vb(0,"t-error-message"),c.Tc(1),c.Ub()),2&t){const t=c.lc(2);c.Bb(1),c.Vc(" ",t.resetPasswordError," ")}}function Ce(t,e){if(1&t){const t=c.Wb();c.Vb(0,"div",9),c.Vb(1,"h5",10),c.Tc(2),c.mc(3,"translate"),c.Ub(),c.Vb(4,"button",11),c.hc("click",(function(){return e.$implicit.dismiss()})),c.Vb(5,"span",12),c.Tc(6,"\xd7"),c.Ub(),c.Ub(),c.Ub(),c.Vb(7,"div",13),c.Vb(8,"t-form-group",14),c.mc(9,"translate"),c.Vb(10,"div"),c.Tc(11),c.Ub(),c.Ub(),c.Vb(12,"t-form-group",14),c.mc(13,"translate"),c.Vb(14,"t-text-editor",15),c.hc("ngModelChange",(function(e){return c.Ic(t),c.lc().newPassword=e})),c.Ub(),c.Vb(15,"label",16),c.hc("click",(function(){return c.Ic(t),c.lc().togglePasswordVisibility()})),c.mc(16,"translate"),c.Qb(17,"fa-icon",17),c.Ub(),c.Ub(),c.Rc(18,Me,2,1,"t-error-message",18),c.Ub(),c.Vb(19,"div",19),c.Vb(20,"button",20),c.hc("click",(function(){c.Ic(t);const n=e.$implicit;return c.lc().resetPasswordClick(n)})),c.Qb(21,"fa-icon",21),c.Tc(22),c.mc(23,"translate"),c.Ub(),c.Vb(24,"button",22),c.hc("click",(function(){return e.$implicit.dismiss()})),c.Qb(25,"fa-icon",23),c.Tc(26),c.mc(27,"translate"),c.Ub(),c.Ub()}if(2&t){const t=c.lc();c.Bb(2),c.Vc(" ",c.nc(3,15,"ResetPassword")," "),c.Bb(6),c.sc("label",c.nc(9,17,"User_Email"))("serverErrors",null),c.Bb(3),c.Uc(null==t.modelRef?null:t.modelRef.Email),c.Bb(1),c.sc("label",c.nc(13,19,"NewPassword"))("serverErrors",null),c.Bb(2),c.sc("ngModel",t.newPassword)("type",t.passwordFieldType)("focusIf",!0),c.Bb(1),c.tc("title",c.nc(16,21,"ShowHidePassword")),c.Bb(2),c.sc("icon",t.isPasswordShown?"eye-slash":"eye"),c.Bb(1),c.sc("ngIf",!!t.resetPasswordError),c.Bb(2),c.sc("disabled",!t.newPassword),c.Bb(2),c.Vc(" \xa0",c.nc(23,23,"ResetPassword")," "),c.Bb(4),c.Vc(" \xa0",c.nc(27,25,"Cancel")," ")}}const Ee=function(t,e,n,s,i){return{template:t,action:e,showAction:n,canAction:s,actionTooltip:i}},Be=function(t){return[t]},Pe=[{path:"console",component:W,canActivate:[G.d],canActivateChild:[z.a],children:[{path:"identity-server-users",component:(()=>{class t extends Y.a{constructor(t){super(),this.workspace=t}get c(){return this.ws.IdentityServerUser}get ws(){return this.workspace.admin}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(r.m))},t.\u0275cmp=c.Jb({type:t,selectors:[["t-identity-server-users-master"]],features:[c.yb],decls:16,vars:32,consts:[["collection","IdentityServerUser","selectDefault","EmailConfirmed,PasswordSet,TwoFactorEnabled","selectForTiles","Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","showImportButton","showDeleteButton","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["emailConfirmed",""],["emailNotConfirmed",""],["passwordSet",""],["passwordNotSet",""],[1,"d-flex","justify-content-between"],["collection","IdentityServerUser","path","Email",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"d-block","text-truncate"],["collection","IdentityServerUser",3,"entity"]],template:function(t,e){if(1&t&&(c.Qb(0,"t-master",0),c.mc(1,"translate"),c.Rc(2,ae,5,1,"ng-template",null,1,c.Sc),c.Rc(4,le,2,3,"ng-template",null,2,c.Sc),c.Rc(6,ue,1,1,"ng-template",null,3,c.Sc),c.Rc(8,de,2,3,"ng-template",null,4,c.Sc),c.Rc(10,me,2,3,"ng-template",null,5,c.Sc),c.Rc(12,be,2,3,"ng-template",null,6,c.Sc),c.Rc(14,pe,2,3,"ng-template",null,7,c.Sc)),2&t){const t=c.Fc(3),n=c.Fc(5),s=c.Fc(7),i=c.Fc(9),r=c.Fc(11),o=c.Fc(13),a=c.Fc(15);c.sc("mode",e.mode)("showCreateButton",!1)("filterDefault",e.filter)("additionalSelect",e.additionalSelect)("masterCrumb",c.nc(1,12,"IdentityServerUsers"))("tileTemplate",t)("tableSummaryColumnTemplate",s)("tableSummaryHeaderTemplate",n)("showImportButton",!1)("showDeleteButton",!1)("multiselectActions",c.vc(14,he))("filterDefinition",c.xc(29,ye,c.xc(19,ve,c.wc(15,fe,i),c.wc(17,ge,r)),c.xc(26,ve,c.wc(22,we,o),c.wc(24,Ue,a))))}},directives:[K.a,Z.a],pipes:[o.d],encapsulation:2}),t})(),canDeactivate:[X.a]},{path:"identity-server-users/:id",component:(()=>{class t extends ft.a{constructor(t,e,n,s){super(),this.workspace=t,this.api=e,this.translate=n,this.modalService=s,this.expand="",this._showPassword=!1,this.identityServerUsersApi=this.api.identityServerUsersApi(this.notifyDestruct$),this.onResetPassword=t=>{t&&t.Id&&(this.modelRef=t,this.modalService.open(this.resetPasswordModal).result.then(()=>{this.resetPasswordError=null,this.newPassword=null,this._showPassword=!1},t=>{this.resetPasswordError=null,this.newPassword=null,this._showPassword=!1}))},this.showResetPassword=t=>!!t,this.canResetPassword=t=>this.ws.canDo("identity-server-users","ResetPassword",t.Id),this.resetPasswordTooltip=t=>this.canResetPassword(t)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.identityServerUsersApi=this.api.identityServerUsersApi(this.notifyDestruct$)}get ws(){return this.workspace.admin}resetPasswordClick(t){this.resetPasswordError=null,this.identityServerUsersApi.resetPassword({userId:this.modelRef.Id,password:this.newPassword}).pipe(Object(f.a)(e=>{Object(w.c)(e,this.workspace),t.close(),this.details.displayModalMessage(this.translate.instant("PasswordWasSuccessfullyReset"))}),Object(g.a)(t=>this.resetPasswordError=t.error)).subscribe()}togglePasswordVisibility(){this._showPassword=!this._showPassword}get isPasswordShown(){return this._showPassword}get passwordFieldType(){return this.isPasswordShown?"text":"password"}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(r.m),c.Pb(M.a),c.Pb(o.e),c.Pb(C.t))},t.\u0275cmp=c.Jb({type:t,selectors:[["t-identity-server-users-details"]],viewQuery:function(t,e){var n;1&t&&c.Oc(Ve,!0),2&t&&c.Ec(n=c.ic())&&(e.resetPasswordModal=n.first)},features:[c.yb],decls:10,vars:21,consts:[["collection","IdentityServerUser",3,"expand","idString","mode","additionalSelect","showCreateButton","showDeleteButton","showEditButton","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["resetPassword",""],["resetPasswordModal",""],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"t-form-group",3,"label"],["collection","IdentityServerUser","path","LockoutEnd",3,"entity"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","type","focusIf","ngModelChange"],[1,"btn","btn-sm","text-primary","t-pointer","mx-1",3,"title","click"],[3,"icon"],[4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","check"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"]],template:function(t,e){if(1&t&&(c.Qb(0,"t-details",0),c.mc(1,"translate"),c.Rc(2,Ie,2,1,"ng-template",null,1,c.Sc),c.Rc(4,Se,21,23,"ng-template",null,2,c.Sc),c.Rc(6,Ae,2,3,"ng-template",null,3,c.Sc),c.Rc(8,Ce,28,27,"ng-template",null,4,c.Sc)),2&t){const t=c.Fc(3),n=c.Fc(5),s=c.Fc(7);c.sc("expand",e.expand)("idString",e.idString)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",!1)("showDeleteButton",!1)("showEditButton",!1)("masterCrumb",c.nc(1,11,"IdentityServerUsers"))("detailsCrumb",t)("documentTemplate",n)("actions",c.wc(19,Be,c.Ac(13,Ee,s,e.onResetPassword,e.showResetPassword,e.canResetPassword,e.resetPasswordTooltip)))}},directives:[U.a,B.a,Z.a,P.a,T.u,T.k,T.n,l.b,a.u,k.a],pipes:[o.d],encapsulation:2}),t})(),canDeactivate:[J.a]},{path:"admin-users",component:ht,canDeactivate:[X.a]},{path:"admin-users/:id",component:re,canDeactivate:[J.a]},{path:"main-menu",component:d,canDeactivate:[X.a]},{path:"",redirectTo:"main-menu",pathMatch:"full"},{path:"**",component:m}]},{path:"",redirectTo:"/root/welcome",pathMatch:"full"}];let Te=(()=>{class t{constructor(t){t.addIcons(oe.fd,oe.rb,oe.sb)}}return t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({factory:function(e){return new(e||t)(c.dc(l.c))},imports:[[i.a,s.i.forChild(Pe)]]}),t})()}}]);