function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var c,a=e[Symbol.iterator]();!(i=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);i=!0);}catch(l){r=!0,o=l}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){a=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{LIG5:function(e,t,n){"use strict";n.r(t),n.d(t,"ApplicationModule",(function(){return Kue}));var i=n("tyNb"),r=n("fXoL"),o=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),c="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,a="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),l="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},s=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,d=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function o(){n&&(n=!1,e()),i&&a()}function c(){l(o)}function a(){var e=Date.now();if(n){if(e-r<2)return;i=!0}else n=!0,i=!1,setTimeout(c,20);r=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){c&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){c&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),b=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},m=v(0,0,0,0);function g(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+g(e["border-"+n+"-width"])}),0)}var h="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"==typeof e.getBBox};function v(e,t,n,i){return{x:e,y:t,width:n,height:i}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e,t=(e=this.target,c?h(e)?function(e){var t=e.getBBox();return v(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return m;var i=f(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n];t[r]=g(e["padding-"+r])}return t}(i),o=r.left+r.right,c=r.top+r.bottom,a=g(i.width),l=g(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=p(i,"left","right")+o),Math.round(l+c)!==n&&(l-=p(i,"top","bottom")+c)),!function(e){return e===f(e).document.documentElement}(e)){var s=Math.round(a+o)-t,u=Math.round(l+c)-n;1!==Math.abs(s)&&(a-=s),1!==Math.abs(u)&&(l-=u)}return v(r.left,r.top,a,l)}(e):m);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),I=function(e,t){var n,i,r,o,c,a,l,s=(i=(n=t).x,r=n.y,o=n.width,c=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),b(l,{x:i,y:r,width:o,height:c,top:r,right:i+o,bottom:c+r,left:i}),l);b(this,{target:e,contentRect:s})},C=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new o,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new I(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!=typeof WeakMap?new WeakMap:new o,k=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=d.getInstance(),i=new C(t,n,this);w.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){k.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var M,V,T=void 0!==a.ResizeObserver?a.ResizeObserver:k,E=n("IzEk"),U=n("XNiG"),x=n("ofXK"),R=((V=function(){function e(t,n,i,o){_classCallCheck(this,e),this.elementRef=t,this.renderer=n,this.ngZone=i,this.platformId=o,this.removeResizeListeners$=new U.a,this.ellipsisContent=null,this.moreClickEmitter=new r.n,this.changeEmitter=new r.n}return _createClass(e,[{key:"ngAfterViewInit",value:function(){if(Object(x.Q)(this.platformId)){""===this.ellipsisCharacters&&(this.ellipsisCharacters="..."),this.moreAnchor=this.renderer.createElement("a"),this.moreAnchor.className="ngx-ellipsis-more",this.moreAnchor.href="#",this.moreAnchor.textContent=this.ellipsisCharacters,this.ellipsisWordBoundaries||(this.ellipsisWordBoundaries=""),this.ellipsisWordBoundaries="["+this.ellipsisWordBoundaries.replace(/\\n/,"\n").replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"]",this.ellipsisSubstrFn||(this.ellipsisSubstrFn=function(e,t,n){return e.substr(t,n)}),this.elem=this.elementRef.nativeElement,null!=this.ellipsisContent?this.originalText=e.convertEllipsisInputToString(this.ellipsisContent):this.originalText||(this.originalText=this.elem.textContent.trim()),this.renderer.setProperty(this.elem,"innerHTML",""),this.innerElem=this.renderer.createElement("div"),this.renderer.addClass(this.innerElem,"ngx-ellipsis-inner");var t=this.renderer.createText(this.originalText);this.renderer.appendChild(this.innerElem,t),this.renderer.appendChild(this.elem,this.innerElem),this.previousDimensions={width:this.elem.clientWidth,height:this.elem.clientHeight},this.addResizeListener(!0)}}},{key:"ngOnChanges",value:function(t){var n=this.moreAnchor&&t.ellipsisCharacters;n&&(this.moreAnchor.textContent=this.ellipsisCharacters),this.elem&&void 0!==this.ellipsisContent&&(this.originalText!==e.convertEllipsisInputToString(this.ellipsisContent)||n)&&(this.originalText=e.convertEllipsisInputToString(this.ellipsisContent),this.applyEllipsis())}},{key:"ngOnDestroy",value:function(){Object(x.Q)(this.platformId)&&this.removeAllListeners()}},{key:"removeAllListeners",value:function(){this.destroyMoreClickListener&&this.destroyMoreClickListener(),this.removeResizeListener()}},{key:"addResizeListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(void 0===this.resizeDetectionStrategy&&(this.resizeDetectionStrategy=""),this.resizeDetectionStrategy){case"manual":break;case"window":this.addWindowResizeListener();break;default:"undefined"!=typeof console&&console.warn("No such ellipsis-resize-detection strategy: '".concat(this.resizeDetectionStrategy,"'. Using 'resize-observer' instead"));case"resize-observer":case"":this.addElementResizeListener()}e&&"manual"!==this.resizeDetectionStrategy&&this.applyEllipsis()}},{key:"addWindowResizeListener",value:function(){var e=this,t=this.renderer.listen("window","resize",(function(){e.ngZone.run((function(){e.applyEllipsis()}))}));this.removeResizeListeners$.pipe(Object(E.a)(1)).subscribe((function(){return t()}))}},{key:"addElementResizeListener",value:function(){var e=this,t=new T((function(){window.requestAnimationFrame((function(){e.previousDimensions.width===e.elem.clientWidth&&e.previousDimensions.height===e.elem.clientHeight||(e.ngZone.run((function(){e.applyEllipsis()})),e.previousDimensions.width=e.elem.clientWidth,e.previousDimensions.height=e.elem.clientHeight)}))}));t.observe(this.elem),this.removeResizeListeners$.pipe(Object(E.a)(1)).subscribe((function(){return t.disconnect()}))}},{key:"removeResizeListener",value:function(){this.removeResizeListeners$.next(),this.removeResizeListeners$.complete()}},{key:"getTruncatedText",value:function(e){if(!this.originalText||this.originalText.length<=e)return this.originalText;var t=this.ellipsisSubstrFn(this.originalText,0,e);if("[]"===this.ellipsisWordBoundaries||this.originalText.charAt(e).match(this.ellipsisWordBoundaries))return t;for(var n=e-1;n>0&&!t.charAt(n).match(this.ellipsisWordBoundaries);)n--;return this.ellipsisSubstrFn(t,0,n)}},{key:"truncateText",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getTruncatedText(e),r=i.length,o=r!==this.originalText.length;return o&&!this.showMoreLink&&(i+=this.ellipsisCharacters),this.renderer.setProperty(this.innerElem,"textContent",i),o&&this.showMoreLink&&this.renderer.appendChild(this.innerElem,this.moreAnchor),this.destroyMoreClickListener&&(this.destroyMoreClickListener(),this.destroyMoreClickListener=null),n&&o&&(this.destroyMoreClickListener=this.renderer.listen(this.moreAnchor,"click",(function(e){e.target&&"ngx-ellipsis-more"===e.target.className&&(e.preventDefault(),t.moreClickEmitter.emit(e))}))),r}},{key:"applyEllipsis",value:function(){var t=this;this.removeResizeListener();var n=e.numericBinarySearch(this.originalText.length,(function(e){return t.truncateText(e),!t.isOverflowing})),i=this.truncateText(n,this.showMoreLink);this.addResizeListener(),this.changeEmitter.observers.length>0&&this.changeEmitter.emit(this.originalText.length===i?null:i)}},{key:"isOverflowing",get:function(){var e=this.elem.style.overflow;e&&"visible"!==e||(this.elem.style.overflow="hidden");var t=this.elem.clientWidth<this.elem.scrollWidth-1||this.elem.clientHeight<this.elem.scrollHeight-1;return this.elem.style.overflow=e,t}},{key:"showMoreLink",get:function(){return this.moreClickEmitter.observers.length>0}}],[{key:"numericBinarySearch",value:function(e,t){for(var n,i=0,r=e,o=-1;i<=r;)t(n=~~((i+r)/2))?(o=n,i=n+1):r=n-1;return o}},{key:"convertEllipsisInputToString",value:function(e){return null==e?"":String(e)}}]),e}()).\u0275fac=function(e){return new(e||V)(r.Pb(r.l),r.Pb(r.E),r.Pb(r.z),r.Pb(r.B))},V.\u0275dir=r.Kb({type:V,selectors:[["","ellipsis",""]],inputs:{ellipsisContent:["ellipsis-content","ellipsisContent"],ellipsisCharacters:["ellipsis","ellipsisCharacters"],ellipsisWordBoundaries:["ellipsis-word-boundaries","ellipsisWordBoundaries"],ellipsisSubstrFn:["ellipsis-substr-fn","ellipsisSubstrFn"],resizeDetectionStrategy:["ellipsis-resize-detection","resizeDetectionStrategy"]},outputs:{moreClickEmitter:"ellipsis-click-more",changeEmitter:"ellipsis-change"},exportAs:["ellipsis"],features:[r.zb]}),V),D=((M=function e(){_classCallCheck(this,e)}).\u0275mod=r.Nb({type:M}),M.\u0275inj=r.Mb({factory:function(e){return new(e||M)},imports:[[]]}),M),B=n("PCNd"),S=n("PVj+"),_=n("WO2E"),O=n("quSY"),L=n("LRne"),F=n("eIep"),A=n("pLZG"),P=n("vkgz"),N=n("un/a"),j=n("JIr8"),W=n("k0Of"),q=n("AyGX"),Q=n("5+WD"),H=n("/CWu"),$=n("KOvB"),G=n("sYmb"),z=n("eQPh"),J=n("rd7j"),K=n("0xbw"),Y=n("o6Md"),X=n("1kSV"),Z=n("ZBji"),ee=n("v+w0"),te=n("OoQV"),ne=n("6NWb"),ie=n("3Pt+"),re=n("nYR2"),oe=["input"],ce=["errorModal"];function ae(e,t){if(1&e&&r.Qb(0,"img",9),2&e){var n=r.lc();r.Qc("max-width",n.size+n.sizeUnit)("max-height",n.size+n.sizeUnit),r.Gb("t-image-round",n.isRound),r.sc("src",n.dataUrl,r.Kc)}}function le(e,t){if(1&e&&r.Qb(0,"fa-icon",10),2&e){var n=r.lc();r.Qc("font-size",n.placeholderFontSize+"rem"),r.sc("icon",n.icon)}}function se(e,t){if(1&e&&(r.Qb(0,"fa-icon",11),r.mc(1,"translate")),2&e){var n=r.lc();r.Qc("font-size",n.errorSize,"rem"),r.sc("title",r.nc(1,3,"Error_FailedToLoadImage"))}}function ue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",12),r.Vb(1,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc().onEdit()})),r.Qb(2,"fa-icon",14),r.Ub(),r.Vb(3,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc().onDelete()})),r.Qb(4,"fa-icon",15),r.Ub(),r.Ub()}}var de=function(e){return{maxSize:e}};function be(e,t){if(1&e&&(r.Vb(0,"div",16),r.Vb(1,"h5",17),r.Qb(2,"fa-icon",18),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",19),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(6,"span",20),r.Tc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",21),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Vb(11,"div",22),r.Vb(12,"button",23),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(13,"fa-icon",24),r.Tc(14),r.mc(15,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,3,"Error")," "),r.Bb(6),r.Vc(" ",r.oc(10,5,"Error_ImageExceedsTheMaximumSizeOfX",r.wc(10,de,n.maxSize/1048576))," "),r.Bb(5),r.Vc(" \xa0",r.nc(15,8,"Dismiss")," ")}}var fe,me,ge,pe=function(e){return e[e.loading=1]="loading",e[e.loaded=2]="loaded",e[e.error=3]="error",e}({}),he=((fe=function(){function e(t,n,i,r,o){var c=this;_classCallCheck(this,e),this.api=t,this.workspace=n,this.cdr=i,this.storage=r,this.modalService=o,this.shape="square",this.icon="user",this.size=90,this.sizeUnit="px",this.isEdit=!1,this.notifyCancel$=new U.a,this._value=null,this.dataUrl=null,this.maxSize=5242880,this.isDisabled=!1,this.onChange=function(e){},this.onTouched=function(){},this.onValidatorChange=function(){},this.notifyUpdate$=new U.a,this.notifyUpdate$.pipe(Object(F.a)((function(){var e=c.doUpdate();return c.cdr.markForCheck(),e}))).subscribe()}return _createClass(e,[{key:"writeValue",value:function(e){e||""===e||(e=null),this._value!==e&&(this._value=e,this._metadataPrefix="data:image/jpeg;base64,",this.update())}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){e(n),t.onTouched()}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.isDisabled=e}},{key:"ngOnInit",value:function(){var e=this;this.update(),this._subscription=this.workspace.stateChanged$.subscribe({next:function(){e.cdr.markForCheck()}})}},{key:"ngOnDestroy",value:function(){this.notifyCancel$.next(),this._subscription&&this._subscription.unsubscribe()}},{key:"ngOnChanges",value:function(e){var t=[e.src,e.imageId],n=t.some((function(e){return!!e})),i=t.some((function(e){return!!e&&!e.isFirstChange()}));n&&(i&&this.ngOnDestroy(),e.src&&(this._src=e.src.currentValue),e.imageId&&(this._imageId=e.imageId.currentValue),i&&this.ngOnInit())}},{key:"update",value:function(){this.notifyUpdate$.next()}},{key:"doUpdate",value:function(){var e=this;if(this._value)return this.status=pe.loaded,this.dataUrl=this._metadataPrefix+","+this._value,Object(L.a)();if(""===this._value)return this.status=pe.loaded,this.dataUrl=null,Object(L.a)();if(this._src&&this._imageId){var t=this._src,n=this._imageId,i="".concat(this.workspace.ws.tenantId,"/").concat(t),r=this.storage.getItem(i),o=r?JSON.parse(r):null;return o&&o.imageId===n?(this.status=pe.loaded,this.dataUrl=o.dataUrl,Object(L.a)()):(r&&this.storage.removeItem(i),this.status=pe.loading,this.api.getImage(t,n,this.notifyCancel$).pipe(Object(F.a)((function(t){return Object(W.l)(t.image).pipe(Object(P.a)((function(r){e.status=pe.loaded,e.dataUrl=r,e.storage.setItem(i,JSON.stringify({imageId:t.imageId||n,dataUrl:r}))})))})),Object(j.a)((function(t){return 404===t.status?(e.status=pe.loaded,e.dataUrl=null):e.status=pe.error,Object(L.a)(null)})),Object(re.a)((function(){return e.cdr.markForCheck()}))))}return this._src&&this.storage.removeItem("".concat(this.workspace.ws.tenantId,"/").concat(this._src)),this.status=pe.loaded,this.dataUrl=null,Object(L.a)()}},{key:"onEdit",value:function(){this.input.nativeElement.click()}},{key:"onDelete",value:function(){this.canDelete&&(this._value="",this.onChange(this._value),this.update())}},{key:"onFileSelected",value:function(e){var t=this,n=e.files;if(n&&0!==n.length){var i=n[0];e.value="",i.size>this.maxSize?this.modalService.open(this.errorModal):Object(W.l)(i).subscribe((function(e){var n=e.indexOf(",");t._metadataPrefix=e.substr(0,n),t._value=e.substr(n+1),t.onChange(t._value),t.update()}),(function(e){console.error(e)}))}}},{key:"showIcon",get:function(){return!this.dataUrl&&this.status===pe.loaded}},{key:"showImg",get:function(){return this.dataUrl&&this.status===pe.loaded}},{key:"showEditControls",get:function(){return this.isEdit}},{key:"showError",get:function(){return this.status===pe.error}},{key:"isRound",get:function(){return"circle"===this.shape}},{key:"placeholderFontSize",get:function(){return this.size/90*3.2}},{key:"canDelete",get:function(){return!!this.dataUrl||this.status===pe.error}},{key:"errorSize",get:function(){return this.size/90*3}}]),e}()).\u0275fac=function(e){return new(e||fe)(r.Pb(Y.a),r.Pb(S.m),r.Pb(r.h),r.Pb(K.a),r.Pb(X.t))},fe.\u0275cmp=r.Jb({type:fe,selectors:[["t-image"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(oe,!0),r.Oc(ce,!0)),2&e&&(r.Ec(n=r.ic())&&(t.input=n.first),r.Ec(n=r.ic())&&(t.errorModal=n.first))},inputs:{shape:"shape",icon:"icon",size:"size",sizeUnit:"sizeUnit",isEdit:"isEdit",src:"src",imageId:"imageId"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:fe}]),r.zb],decls:10,vars:10,consts:[[1,"t-image"],[1,"d-flex","align-items-center","justify-content-center","w-100","h-100"],["alt","","alt","Picture",3,"src","t-image-round","max-width","max-height",4,"ngIf"],["class","t-image-placeholder",3,"icon","font-size",4,"ngIf"],["class","text-danger","icon","exclamation","style","font-size: 1.5rem",3,"font-size","title",4,"ngIf"],["class","t-image-controls w-100",4,"ngIf"],["type","file","accept",".jpg,.jpeg,.bmp,.png,.jfif",1,"d-none",3,"change"],["input",""],["errorModal",""],["alt","","alt","Picture",3,"src"],[1,"t-image-placeholder",3,"icon"],["icon","exclamation",1,"text-danger",2,"font-size","1.5rem",3,"title"],[1,"t-image-controls","w-100"],[1,"btn","btn-primary","p-0","pr-1","pl-1","w-50",3,"click"],["icon","pen"],["icon","trash"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",0),r.Vb(1,"div",1),r.Rc(2,ae,1,7,"img",2),r.Rc(3,le,1,3,"fa-icon",3),r.Rc(4,se,2,5,"fa-icon",4),r.Ub(),r.Rc(5,ue,5,0,"div",5),r.Ub(),r.Vb(6,"input",6,7),r.hc("change",(function(){r.Ic(n);var e=r.Fc(7);return t.onFileSelected(e)})),r.Ub(),r.Rc(8,be,16,12,"ng-template",null,8,r.Sc)}2&e&&(r.Qc("width",t.size+t.sizeUnit)("height",t.size+t.sizeUnit),r.Gb("t-image-round",t.isRound),r.Bb(2),r.sc("ngIf",t.showImg),r.Bb(1),r.sc("ngIf",t.showIcon),r.Bb(1),r.sc("ngIf",t.showError),r.Bb(1),r.sc("ngIf",t.showEditControls))},directives:[x.u,ne.b],pipes:[G.d],styles:[".t-image-placeholder[_ngcontent-%COMP%]{color:#d3d3d3}.t-image-controls[_ngcontent-%COMP%]{height:23px;margin-top:-23px}@media (min-width:768px){.t-image-controls[_ngcontent-%COMP%]{opacity:0;transition:opacity .1s ease}.t-image[_ngcontent-%COMP%]:hover   .t-image-controls[_ngcontent-%COMP%]{opacity:1}}.t-image-round[_ngcontent-%COMP%]{border-radius:50%}"],changeDetection:0}),fe),ve=n("r3gP"),ye=n("f3yp"),Ie=n("EoPe"),Ce=n("AYjT"),we=n("2I7G"),ke=n("mrGz"),Me=n("Kp4E"),Ve=((ge=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.workspace=t,this.translate=n,this._markForCheck=!0,this._subscriptions=new O.a,this._subscriptions.add(this.translate.onLangChange.subscribe((function(){i.markForCheck()}))),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:function(){i._wsTimeFormat&&i._wsTimeFormat!==i.workspace.timeFormat&&i.markForCheck()}}))}return _createClass(e,[{key:"markForCheck",value:function(){this._markForCheck=!0}},{key:"ngOnDestroy",value:function(){this._subscriptions&&this._subscriptions.unsubscribe()}},{key:"transform",value:function(e,t){return(this._markForCheck||this._isoDate!==e||this._granularity!==t)&&(this._markForCheck=!1,this._isoDate=e,this._granularity=t,this._wsTimeFormat=this.workspace.timeFormat,this._formattedValue=Object(Me.c)(e,this.workspace,this.translate,t)),this._formattedValue}}]),e}()).\u0275fac=function(e){return new(e||ge)(r.Pb(S.m),r.Pb(G.e))},ge.\u0275pipe=r.Ob({name:"timeFormat",type:ge,pure:!1}),ge),Te=((me=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.workspace=t,this.translate=n,this._markForCheck=!0,this._subscriptions=new O.a,this._subscriptions.add(this.translate.onLangChange.subscribe((function(){i.markForCheck()}))),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:function(){i._wsCalendar&&i._wsCalendar!==i.workspace.calendar&&i.markForCheck(),i._wsDateFormat&&i._wsDateFormat!==i.workspace.dateFormat&&i.markForCheck(),i._wsTimeFormat&&i._wsTimeFormat!==i.workspace.timeFormat&&i.markForCheck()}}))}return _createClass(e,[{key:"markForCheck",value:function(){this._markForCheck=!0}},{key:"ngOnDestroy",value:function(){this._subscriptions&&this._subscriptions.unsubscribe()}},{key:"transform",value:function(e,t,n){return(this._markForCheck||this._isoDate!==e||this._calendar!==t||this._granularity!==n)&&(this._markForCheck=!1,this._isoDate=e,this._calendar=t,this._granularity=n,this._wsCalendar=this.workspace.calendar,this._wsDateFormat=this.workspace.dateFormat,this._wsTimeFormat=this.workspace.timeFormat,this._formattedValue=Object(Me.b)(e,this.workspace,this.translate,t,n)),this._formattedValue}}]),e}()).\u0275fac=function(e){return new(e||me)(r.Pb(S.m),r.Pb(G.e))},me.\u0275pipe=r.Ob({name:"datetimeFormat",type:me,pure:!1}),me),Ee=["myAccountModal"],Ue=["inboxModal"],xe=["favoriteModal"];function Re(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",39),r.hc("click",(function(){r.Ic(n);var e=r.lc();return e.onCollapse(),e.nav.onBack()})),r.Qb(1,"fa-icon",40),r.Ub()}if(2&e){var i=r.lc();r.sc("disabled",!i.nav.canBack),r.Bb(1),r.sc("flip",i.flip)}}function De(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",39),r.hc("click",(function(){r.Ic(n);var e=r.lc();return e.onCollapse(),e.nav.onForward()})),r.Qb(1,"fa-icon",41),r.Ub()}if(2&e){var i=r.lc();r.sc("disabled",!i.nav.canForward),r.Bb(1),r.sc("flip",i.flip)}}function Be(e,t){1&e&&r.Rb(0)}function Se(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",42),r.Vb(1,"button",43),r.hc("click",(function(){return r.Ic(n),r.lc().onModalInbox()})),r.Rc(2,Be,1,0,"ng-container",44),r.Ub(),r.Ub()}if(2&e){r.lc();var i=r.Fc(57);r.Bb(2),r.sc("ngTemplateOutlet",i)}}function _e(e,t){if(1&e&&(r.Vb(0,"div",49),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc();r.Bb(1),r.Vc(" ",i.ws.getMultilingualValueImmediate(n,"label")," ")}}function Oe(e,t){1&e&&r.Qb(0,"div",50)}function Le(e,t){if(1&e){var n=r.Wb();r.Vb(0,"li",45),r.Vb(1,"button",46),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc().onClickFavorite(e.url)})),r.Tc(2),r.Ub(),r.Rc(3,_e,2,1,"div",47),r.Rc(4,Oe,1,0,"div",48),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(),c=r.Fc(16);r.sc("tContextMenu",c)("tContext",i),r.Bb(2),r.Vc(" ",o.ws.getMultilingualValueImmediate(i,"label")," ")}}function Fe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",51),r.Vb(1,"ul",52),r.Vb(2,"li",53),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.close;return r.lc().onEditFavorite(e),i()})),r.Vb(3,"div",54),r.Qb(4,"fa-icon",55),r.Ub(),r.Vb(5,"div",56),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Vb(8,"li",53),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.close;return r.lc().onDeleteFavorite(e),i()})),r.Vb(9,"div",54),r.Qb(10,"fa-icon",57),r.Ub(),r.Vb(11,"div",56),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Bb(6),r.Vc(" ",r.nc(7,2,"Edit")," "),r.Bb(6),r.Vc(" ",r.nc(13,4,"Delete")," "))}function Ae(e,t){1&e&&r.Rb(0)}function Pe(e,t){1&e&&r.Qb(0,"t-spinner",3),2&e&&r.sc("scale",1)}function Ne(e,t){1&e&&r.Rb(0)}function je(e,t){1&e&&r.Rb(0)}var We=function(){return{state_key:"navinbox"}},qe=function(e,t){return[e,t]},Qe=function(e){return{id:e}};function He(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",67),r.hc("click",(function(){return r.Ic(n),r.lc(),r.Fc(1).close()})),r.Rc(1,je,1,0,"ng-container",68),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2),c=r.Fc(59);r.Gb("bg-light",o.c[i].OpenedAt),r.sc("routerLink",r.xc(6,qe,"/app/"+o.tenantId+"/documents/"+(null==o.docs[i]?null:o.docs[i].DefinitionId)+"/"+(null==i?null:i.toString()),r.vc(5,We))),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.wc(9,Qe,i))}}function $e(e,t){1&e&&r.Rb(0)}var Ge=function(e){return{closable:e}};function ze(e,t){if(1&e&&(r.Vb(0,"div",69),r.Rc(1,$e,1,0,"ng-container",68),r.Ub()),2&e){r.lc();var n=r.Fc(1);r.lc();var i=r.Fc(63);r.Bb(1),r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Ge,n))}}function Je(e,t){if(1&e){var n=r.Wb();r.Vb(0,"li",58,59),r.hc("openChange",(function(e){return r.Ic(n),r.lc().onDropdownInbox(e)})),r.Vb(2,"button",60),r.Rc(3,Ae,1,0,"ng-container",44),r.Ub(),r.Vb(4,"div",61),r.Vb(5,"div",62),r.Vb(6,"div"),r.Tc(7),r.mc(8,"translate"),r.Rc(9,Pe,1,1,"t-spinner",63),r.Ub(),r.Vb(10,"a",64),r.hc("click",(function(){return r.Ic(n),r.Fc(1).close()})),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Ub(),r.Rc(13,Ne,1,0,"ng-container",44),r.Rc(14,He,2,11,"button",65),r.Rc(15,ze,2,4,"div",66),r.Ub(),r.Ub()}if(2&e){var i=r.lc(),o=r.Fc(57),c=r.Fc(61);r.Bb(3),r.sc("ngTemplateOutlet",o),r.Bb(1),r.Gb("dropdown-menu-right",!i.isRtl),r.Bb(3),r.Vc("",r.nc(8,10,"Inbox"),"\xa0"),r.Bb(2),r.sc("ngIf",i.showInboxSpinner),r.Bb(1),r.sc("routerLink","/app/"+i.tenantId+"/inbox"),r.Bb(1),r.Uc(r.nc(12,12,"SeeAll")),r.Bb(2),r.sc("ngTemplateOutlet",c),r.Bb(1),r.sc("ngForOf",i.ids),r.Bb(1),r.sc("ngIf",i.showSeeAll)}}function Ke(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",29),r.hc("click",(function(){r.Ic(n);var e=r.lc(2);return e.onPrimary(),e.onCollapse()})),r.Tc(1),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(1),r.Vc(" ",null==i.settings?null:i.settings.PrimaryLanguageName," ")}}function Ye(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",29),r.hc("click",(function(){r.Ic(n);var e=r.lc(2);return e.onSecondary(),e.onCollapse()})),r.Tc(1),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(1),r.Vc(" ",null==i.settings?null:i.settings.SecondaryLanguageName," ")}}function Xe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",29),r.hc("click",(function(){r.Ic(n);var e=r.lc(2);return e.onTernary(),e.onCollapse()})),r.Tc(1),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(1),r.Vc(" ",null==i.settings?null:i.settings.TernaryLanguageName," ")}}function Ze(e,t){if(1&e&&(r.Tb(0),r.Qb(1,"hr"),r.Rc(2,Ke,2,1,"button",70),r.Rc(3,Ye,2,1,"button",70),r.Rc(4,Xe,2,1,"button",70),r.Sb()),2&e){var n=r.lc();r.Bb(2),r.sc("ngIf",!n.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!n.ws.isSecondaryLanguage&&!(null==n.settings||!n.settings.SecondaryLanguageId)),r.Bb(1),r.sc("ngIf",!n.ws.isTernaryLanguage&&!(null==n.settings||!n.settings.TernaryLanguageId))}}function et(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",29),r.hc("click",(function(){r.Ic(n);var e=r.lc(2);return e.onPrimaryCalendar(),e.onCollapse()})),r.Tc(1),r.mc(2,"translate"),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(1),r.Vc(" ",r.nc(2,1,"Calendar_"+(null==i.settings?null:i.settings.PrimaryCalendar))," ")}}function tt(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",29),r.hc("click",(function(){r.Ic(n);var e=r.lc(2);return e.onSecondaryCalendar(),e.onCollapse()})),r.Tc(1),r.mc(2,"translate"),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(1),r.Vc(" ",r.nc(2,1,"Calendar_"+(null==i.settings?null:i.settings.SecondaryCalendar))," ")}}function nt(e,t){if(1&e&&(r.Tb(0),r.Qb(1,"hr"),r.Rc(2,et,3,3,"button",70),r.Rc(3,tt,3,3,"button",70),r.Sb()),2&e){var n=r.lc();r.Bb(2),r.sc("ngIf",!n.ws.isPrimaryCalendar),r.Bb(1),r.sc("ngIf",!n.ws.isSecondaryCalendar)}}function it(e,t){if(1&e&&(r.Vb(0,"div",74),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Qc("border-color",null==n.settings?null:n.settings.BrandColor),r.Bb(1),r.Vc(" ",n.unknownInboxCountDisplay," ")}}function rt(e,t){if(1&e&&(r.Vb(0,"div",71),r.Qb(1,"fa-icon",72),r.Rc(2,it,2,3,"div",73),r.Ub(),r.Vb(3,"div"),r.Tc(4),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.sc("ngIf",n.unknownInboxCountDisplay),r.Bb(2),r.Vc("\xa0\xa0",n.inboxCountDisplay,"")}}function ot(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().id,i=r.lc();r.Bb(1),r.Uc(" - "+i.docs[n].Memo)}}function ct(e,t){if(1&e&&(r.Vb(0,"div",84),r.Tc(1),r.Ub()),2&e){var n=r.lc().id,i=r.lc();r.Bb(1),r.Uc('"'+i.c[n].Comment+'"')}}function at(e,t){if(1&e&&(r.Vb(0,"div",75),r.Qb(1,"t-image",22),r.Qb(2,"div",76),r.Vb(3,"div",77),r.Vb(4,"div",78),r.Vb(5,"div",79),r.Tc(6),r.Ub(),r.Vb(7,"div",80),r.Tc(8),r.mc(9,"timeFormat"),r.mc(10,"datetimeFormat"),r.Ub(),r.Ub(),r.Vb(11,"div",81),r.Qb(12,"t-auto-cell",82),r.Rc(13,ot,2,1,"span",30),r.Ub(),r.Rc(14,ct,2,1,"div",83),r.Ub(),r.Ub()),2&e){var n,i=t.id,o=r.lc(),c=null==(n=o.ws.get("User",o.c[i].CreatedById))?null:n.ImageId;r.Bb(1),r.sc("src","users/"+o.c[i].CreatedById+"/image")("imageId",c)("size",32),r.Bb(5),r.Vc(" ",o.ws.getMultilingualValue("User",o.c[i].CreatedById,"Name")," "),r.Bb(2),r.Vc(" ",o.isToday(o.c[i].CreatedAt)?r.nc(9,9,o.c[i].CreatedAt):r.nc(10,11,o.c[i].CreatedAt)," "),r.Bb(4),r.sc("definitionId",o.docs[i].DefinitionId)("entity",o.docs[i]),r.Bb(1),r.sc("ngIf",o.docs[i].Memo),r.Bb(1),r.sc("ngIf",o.c[i].Comment)}}function lt(e,t){1&e&&(r.Vb(0,"div",86),r.Qb(1,"fa-icon",87),r.Tc(2),r.mc(3,"translate"),r.Ub()),2&e&&(r.Bb(2),r.Vc("\xa0\xa0\xa0",r.nc(3,1,"EmptyInboxMessage")," "))}function st(e,t){if(1&e&&r.Rc(0,lt,4,3,"div",85),2&e){var n=r.lc();r.sc("ngIf",n.showEmptyInboxMessage)}}function ut(e,t){if(1&e&&(r.Vb(0,"a",64),r.hc("click",(function(){return t.closable.close()})),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc();r.sc("routerLink","/app/"+n.tenantId+"/inbox"),r.Bb(1),r.Uc(r.nc(2,2,"SeeAll"))}}function dt(e,t){1&e&&r.Qb(0,"t-spinner",3),2&e&&r.sc("scale",1)}function bt(e,t){1&e&&r.Rb(0)}function ft(e,t){1&e&&r.Rb(0)}function mt(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",95),r.hc("click",(function(){return r.Ic(n),r.lc().$implicit.close()})),r.Rc(1,ft,1,0,"ng-container",68),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2),c=r.Fc(59);r.Gb("bg-light",o.c[i].OpenedAt),r.sc("routerLink",r.xc(6,qe,"/app/"+o.tenantId+"/documents/"+(null==o.docs[i]?null:o.docs[i].DefinitionId)+"/"+(null==i?null:i.toString()),r.vc(5,We))),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.wc(9,Qe,i))}}function gt(e,t){1&e&&r.Rb(0)}function pt(e,t){if(1&e&&(r.Vb(0,"div",96),r.Rc(1,gt,1,0,"ng-container",68),r.Ub()),2&e){var n=r.lc().$implicit;r.lc();var i=r.Fc(63);r.Bb(1),r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Ge,n))}}function ht(e,t){if(1&e&&(r.Vb(0,"div",88),r.Vb(1,"h5",89),r.Tc(2),r.mc(3,"translate"),r.Rc(4,dt,1,1,"t-spinner",63),r.Ub(),r.Vb(5,"button",90),r.hc("click",(function(){return t.$implicit.dismiss(!1)})),r.Vb(6,"span",91),r.Tc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",92),r.Rc(9,bt,1,0,"ng-container",44),r.Rc(10,mt,2,11,"button",93),r.Rc(11,pt,2,4,"div",94),r.Ub()),2&e){var n=r.lc(),i=r.Fc(61);r.Bb(2),r.Vc(" ",r.nc(3,5,"Inbox")+" ("+n.inboxCountDisplay+")","\xa0"),r.Bb(2),r.sc("ngIf",n.showInboxSpinner),r.Bb(5),r.sc("ngTemplateOutlet",i),r.Bb(1),r.sc("ngForOf",n.ids),r.Bb(1),r.sc("ngIf",n.showSeeAll)}}var vt=function(){return{updateOn:"blur"}};function yt(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",111),r.mc(1,"translate"),r.Vb(2,"t-text-editor",114),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).myUser.Name2=e})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.sc("label",r.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==i.myUser||null==i.myUser.serverErrors?null:i.myUser.serverErrors.Name2),r.Bb(2),r.sc("ngModel",i.myUser.Name2)("ngModelOptions",r.vc(6,vt))}}function It(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",111),r.mc(1,"translate"),r.Vb(2,"t-text-editor",114),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).myUser.Name3=e})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.sc("label",r.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==i.myUser||null==i.myUser.serverErrors?null:i.myUser.serverErrors.Name3),r.Bb(2),r.sc("ngModel",i.myUser.Name3)("ngModelOptions",r.vc(6,vt))}}function Ct(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",105),r.Vb(1,"t-form-group",106),r.Vb(2,"h2",107),r.Tc(3),r.Ub(),r.Ub(),r.Vb(4,"div",108),r.Vb(5,"div",109),r.Vb(6,"t-image",110),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).myUser.Image=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"t-form-group",111),r.mc(8,"translate"),r.Vb(9,"t-text-editor",112),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).myUser.Name=e})),r.Ub(),r.Ub(),r.Rc(10,yt,3,7,"t-form-group",113),r.Rc(11,It,3,7,"t-form-group",113),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(3),r.Uc(i.myEmail),r.Bb(3),r.sc("src","users/"+i.ws.userSettings.UserId+"/image")("imageId",i.myImageId)("ngModel",i.myUser.Image)("isEdit",!0)("size",70),r.Bb(1),r.sc("label",r.nc(8,12,"Name")+i.ws.primaryPostfix)("serverErrors",null==i.myUser||null==i.myUser.serverErrors?null:i.myUser.serverErrors.Name),r.Bb(2),r.sc("ngModel",i.myUser.Name)("ngModelOptions",r.vc(14,vt)),r.Bb(1),r.sc("ngIf",i.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",i.ws.settings.TernaryLanguageId)}}function wt(e,t){if(1&e&&(r.Vb(0,"t-error-message"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Vc(" ",n.saveErrorMessage," ")}}function kt(e,t){if(1&e&&(r.Vb(0,"t-error-message"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Vc(" ",n.errorMessage," ")}}function Mt(e,t){1&e&&(r.Vb(0,"div",115),r.Qb(1,"t-spinner",3),r.Ub()),2&e&&(r.Bb(1),r.sc("scale",2))}var Vt=function(e){return{placeholder:e}};function Tt(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",88),r.Vb(1,"h5",89),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",90),r.hc("click",(function(){return t.$implicit.dismiss(!1)})),r.Vb(5,"span",91),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",97),r.Rc(8,Ct,12,15,"div",98),r.Rc(9,wt,2,1,"t-error-message",30),r.Rc(10,kt,2,1,"t-error-message",30),r.Rc(11,Mt,2,1,"div",99),r.Ub(),r.Vb(12,"div",100),r.Vb(13,"button",101),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc().onSave(e)})),r.Qb(14,"fa-icon",102),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Vb(17,"button",103),r.hc("click",(function(){return t.$implicit.close(!1)})),r.Qb(18,"fa-icon",104),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Vc(" ",r.oc(3,8,"My0Account",r.wc(15,Vt,i.companyName))," "),r.Bb(6),r.sc("ngIf",i.isMyUserLoaded),r.Bb(1),r.sc("ngIf",i.isMyUserLoaded&&!!i.saveErrorMessage),r.Bb(1),r.sc("ngIf",i.isMyUserError),r.Bb(1),r.sc("ngIf",i.isMyUserLoading),r.Bb(2),r.sc("disabled",!i.canSave),r.Bb(2),r.Vc(" \xa0",r.nc(16,11,"Save")," "),r.Bb(4),r.Vc(" \xa0",r.nc(20,13,"Cancel")," ")}}function Et(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",120),r.mc(1,"translate"),r.Vb(2,"t-text-editor",122),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).favoriteToSave.label2=e})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.sc("label",r.nc(1,3,"Label")+i.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",i.favoriteToSave.label2)("focusIf",!0)}}function Ut(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",120),r.mc(1,"translate"),r.Vb(2,"t-text-editor",122),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).favoriteToSave.label3=e})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.sc("label",r.nc(1,3,"Label")+i.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",i.favoriteToSave.label3)("focusIf",!0)}}function xt(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Et,3,5,"t-form-group",124),r.Rc(2,Ut,3,5,"t-form-group",124),r.Sb()),2&e){var n=r.lc(2);r.Bb(1),r.sc("ngIf",!!n.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!!n.ws.settings.TernaryLanguageId)}}function Rt(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",88),r.Vb(1,"h5",89),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"div",116),r.Vb(5,"label",117),r.hc("click",(function(){return r.Ic(n),r.lc().onBasicFavoriteEditMode()})),r.mc(6,"translate"),r.Qb(7,"input",118),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Vb(10,"label",117),r.hc("click",(function(){return r.Ic(n),r.lc().onAdvancedFavoriteEditMode()})),r.mc(11,"translate"),r.Qb(12,"input",118),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub(),r.Vb(15,"button",90),r.hc("click",(function(){return t.$implicit.dismiss(!1)})),r.Vb(16,"span",91),r.Tc(17,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(18,"div",119),r.Vb(19,"t-form-group",120),r.mc(20,"translate"),r.Vb(21,"t-text-editor",121),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().favoriteToSave.url=e})),r.Ub(),r.Ub(),r.Vb(22,"t-form-group",120),r.mc(23,"translate"),r.Vb(24,"t-text-editor",122),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().favoriteToSave.label=e})),r.Ub(),r.Ub(),r.Rc(25,xt,3,2,"ng-container",30),r.Ub(),r.Vb(26,"div",100),r.Vb(27,"button",101),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(28,"fa-icon",102),r.Tc(29),r.mc(30,"translate"),r.Ub(),r.Vb(31,"button",123),r.hc("click",(function(){return t.$implicit.close(!1)})),r.Qb(32,"fa-icon",104),r.Tc(33),r.mc(34,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,18,"EditFavorite"),"\xa0\xa0\xa0"),r.Bb(3),r.Gb("active",i.isBasic),r.tc("title",r.nc(6,20,"Basic")),r.Bb(3),r.Vc(" ",r.nc(9,22,"Basic")," "),r.Bb(2),r.Gb("active",i.isAdvanced),r.tc("title",r.nc(11,24,"Advanced")),r.Bb(3),r.Vc(" ",r.nc(14,26,"Advanced")," "),r.Bb(6),r.sc("label",r.nc(20,28,"URL")),r.Bb(2),r.sc("ngModel",i.favoriteToSave.url),r.Bb(1),r.sc("label",r.nc(23,30,"Label")+(i.isAdvanced?i.ws.primaryPostfix:"")),r.Bb(2),r.sc("ngModel",i.favoriteToSave.label)("focusIf",!0),r.Bb(1),r.sc("ngIf",i.isAdvanced),r.Bb(2),r.sc("disabled",!(null!=i.favoriteToSave&&i.favoriteToSave.url&&null!=i.favoriteToSave&&i.favoriteToSave.label)),r.Bb(2),r.Vc(" \xa0",r.nc(30,32,"Save")," "),r.Bb(4),r.Vc(" \xa0",r.nc(34,34,"Cancel")," ")}}var Dt,Bt=((Dt=function(){function e(t,n,i,r,o,c,a,l,s,u,d,b){_classCallCheck(this,e),this.workspace=t,this.nav=n,this.router=i,this.translate=r,this.progress=o,this.auth=c,this.storage=a,this.api=l,this.document=s,this.modalService=u,this.notificationsService=d,this.userSettings=b,this.isCollapsed=!0,this._subscriptions=new O.a,this.notifyDestruct$=new U.a,this.usersApi=this.api.usersApi(this.notifyDestruct$),this.inboxCrud=this.api.crudFactory("inbox",this.notifyDestruct$),this.inboxApi=this.api.inboxApi(this.notifyDestruct$),this.inboxStateKey="navinbox",this._favorites=[],this.favoriteMode="basic"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.notifyFetch$=new U.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(F.a)((function(){return e.doFetch()}))).subscribe()),this.notifySavePreferredCalendar$=new U.a,this._subscriptions.add(this.notifySavePreferredCalendar$.pipe(Object(F.a)((function(t){return e.doSavePreferredCalendar(t)}))).subscribe()),this._subscriptions.add(this.notificationsService.inboxChanged$.pipe(Object(A.a)((function(e){return e.UpdateInboxList})),Object(F.a)((function(t){return e.doFetchInbox(t.Count)}))).subscribe()),this.restrictToCompanyLanguages(),this._subscriptions.add(this.workspace.stateChanged$.subscribe((function(){return e.restrictToCompanyLanguages()})))}},{key:"ngOnDestroy",value:function(){this.notifyDestruct$.next(),this._subscriptions&&this._subscriptions.unsubscribe();var e=this.document.documentElement.lang||"en",t=this.storage.getItem("user_culture")||e;this.translate.use(t)}},{key:"restrictToCompanyLanguages",value:function(){var e=this.settings.PrimaryLanguageId,t=this.settings.SecondaryLanguageId,n=this.settings.TernaryLanguageId,i=this.translate.currentLang;if(i!==e&&i!==t&&i!==n){var r=this.ws.userSettings.PreferredLanguage;this.translate.use(!r||r!==e&&r!==t&&r!==n?e:r)}}},{key:"onSetLanguage",value:function(e){this.translate.use(e),this.storage.setItem("user_culture",e)}},{key:"onSetCalendar",value:function(e){var t=this.ws,n=JSON.parse(JSON.stringify(t.userSettings));n.PreferredCalendar=e,t.userSettings=n,t.notifyStateChanged(),this.notifySavePreferredCalendar$.next(e)}},{key:"doSavePreferredCalendar",value:function(e){var t=this,n=this.workspace.currentTenant,i=this.workspace.ws.tenantId;return this.usersApi.saveUserPreferredCalendar(e).pipe(Object(P.a)((function(e){Object(H.i)(e,i,n,t.storage)})),Object(N.a)(2),Object(j.a)((function(e){return console.error(e),Object(L.a)(null)})))}},{key:"onToggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"onCollapse",value:function(){this.isCollapsed=!0}},{key:"onPrimary",value:function(){this.onSetLanguage(this.settings.PrimaryLanguageId)}},{key:"onSecondary",value:function(){this.onSetLanguage(this.settings.SecondaryLanguageId)}},{key:"onTernary",value:function(){this.onSetLanguage(this.settings.TernaryLanguageId)}},{key:"onPrimaryCalendar",value:function(){this.onSetCalendar(this.settings.PrimaryCalendar)}},{key:"onSecondaryCalendar",value:function(){this.onSetCalendar(this.settings.SecondaryCalendar)}},{key:"onMySystemAccount",value:function(){location.href=_.b.identityAddress+"/identity/manage/"}},{key:"onSignOut",value:function(){this.progress.startAsyncOperation("sign_out","RedirectingToSignOut"),this.auth.signOut()}},{key:"onMyCompanyAccount",value:function(){var e=this;this.fetch(),this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.myAccountModal,{windowClass:"t-myuser-modal"}).result.then((function(){return e.onMyCompanyAccountClose()}),(function(){return e.onMyCompanyAccountClose()}))}},{key:"fetch",value:function(){this.notifyFetch$.next(null)}},{key:"doFetch",value:function(){var e=this;return this.myUserStatus=S.c.loading,this.usersApi.getMyUser().pipe(Object(P.a)((function(t){Object(W.b)(t,e.workspace),e.myUserStatus=S.c.loaded,e.onEdit()})),Object(j.a)((function(t){return e._errorMessage=t.error,e.myUserStatus=S.c.error,Object(L.a)(null)})))}},{key:"onEdit",value:function(){var e=this.ws.get("User",this.ws.userSettings.UserId);this.myUser={Name:e.Name,Name2:e.Name2,Name3:e.Name3,PreferredLanguage:e.PreferredLanguage}}},{key:"onSave",value:function(e){var t=this;this._errorMessage=null,this._saveErrorMessage=null,Object(q.c)(this.myUser),this.usersApi.saveMyUser(this.myUser).subscribe((function(n){Object(W.b)(n,t.workspace),e.close(!0)}),(function(e){if(422===e.status){var n=Object(q.b)(t.myUser,e.error);Object.keys(n).length>0&&console.error(n)}else t._saveErrorMessage=e.error;return Object(L.a)(null)}))}},{key:"onMyCompanyAccountClose",value:function(){this.workspace.ignoreKeyDownEvents=!1}},{key:"doFetchInbox",value:function(e){var t=this,n=this.inboxState;if(n.masterStatus=S.g.loading,e){var i=this.workspace.ws.tenantId;return this.inboxCrud.getEntities({silent:!0,top:25,skip:0,select:"Comment,CreatedAt,CreatedBy.Name,CreatedBy.Name2,CreatedBy.Name3,\n      CreatedBy.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",countEntities:!0}).pipe(Object(P.a)((function(e){(n=t.inboxState).top=e.Top,n.skip=e.Skip,n.total=e.TotalCount,n.masterStatus=S.g.loaded,n.collectionName=e.CollectionName,n.flatIds=Object(W.c)(e,t.workspace);var r=e.ServerTime,o=e.TotalCount,c=Math.min(e.Extras.UnknownCount,e.TotalCount);t.notificationsService.handleFreshInboxCounts(i,r,o,c)})),Object(j.a)((function(e){return(n=t.inboxState).masterStatus=S.g.error,n.errorMessage=e.error,Object(L.a)(null)})))}return n.total=e,n.masterStatus=S.g.loaded,n.flatIds=[],Object(L.a)()}},{key:"isToday",value:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}},{key:"checkInbox",value:function(){if(this.unknownInboxCount>0){this.notificationsService.tenantState.inbox.unknownCount=0;var e=this.ids[0];e&&this.inboxApi.check(this.c[e].CreatedAt).subscribe()}}},{key:"onDropdownInbox",value:function(e){this.workspace.ignoreKeyDownEvents=e,e&&this.checkInbox()}},{key:"onModalInbox",value:function(){var e=this;this.workspace.ignoreKeyDownEvents=!0,this.checkInbox(),this.modalService.open(this.inboxModal,{windowClass:"t-inbox-modal"}).result.then((function(){return e.workspace.ignoreKeyDownEvents=!1}),(function(){return e.workspace.ignoreKeyDownEvents=!1}))}},{key:"onBasicFavoriteEditMode",value:function(){this.favoriteMode="basic"}},{key:"onAdvancedFavoriteEditMode",value:function(){this.favoriteMode="advanced"}},{key:"onToggleFavoriteEditMode",value:function(){this.favoriteMode="basic"===this.favoriteMode?"advanced":"basic"}},{key:"removeUrlPrefix",value:function(e){if(e&&e.startsWith("/app/")){var t=e.split("/");return t.shift(),t.shift(),t.shift(),"/"+t.join("/")}return e}},{key:"onAddFavorite",value:function(){var e=this.removeUrlPrefix(this.router.url);if(e){var t=this.favorites.findIndex((function(t){return t.url===e}));this.onEditFavorite(t<0?{id:0,label:"",url:e}:this.favorites[t])}}},{key:"onEditFavorite",value:function(e){this.favoriteToSave=JSON.parse(JSON.stringify(e)),this.showEditFavoriteModal()}},{key:"showEditFavoriteModal",value:function(){var e=this;this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.favoriteModal).result.then((function(t){return e.onCloseEditFavorite(t)}),(function(){return e.onCloseEditFavorite()}))}},{key:"onCloseEditFavorite",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.workspace.ignoreKeyDownEvents=!1,e){var t=this.favoriteToSave;0===t.id&&(t.id=this.maxId+1);var n=this.favorites.findIndex((function(e){return e.id===t.id}));n<0?this.favorites.push(t):this.favorites[n]=t,this.saveFavorites()}delete this.favoriteToSave}},{key:"onDeleteFavorite",value:function(e){this._favorites=this.favorites.filter((function(t){return t.id!==e.id})),this.saveFavorites()}},{key:"onDragDropFavorite",value:function(e){var t=this.favorites,n=this.workspace.ws.isRtl?t.length-e.currentIndex-1:e.currentIndex,i=e.previousIndex;i!==n&&(Object(Q.i)(t,i,n),this.saveFavorites())}},{key:"saveFavorites",value:function(){var e=JSON.stringify(this.favorites);this.userSettings.save("favorites",e)}},{key:"onClickFavorite",value:function(e){e=this.urlPrefix+this.removeUrlPrefix(e),this.onCollapse(),this.router.navigateByUrl(e)}},{key:"settings",get:function(){return this.ws?this.ws.settings:null}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"tenantId",get:function(){return this.workspace.ws.tenantId}},{key:"userName",get:function(){return this.ws.getMultilingualValueImmediate(this.ws.userSettings,"Name")}},{key:"companyName",get:function(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"ShortCompanyName")}},{key:"isRtl",get:function(){return this.workspace.ws.isRtl}},{key:"flip",get:function(){return this.isRtl?"horizontal":null}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"saveErrorMessage",get:function(){return this._saveErrorMessage}},{key:"isMyUserLoaded",get:function(){return this.myUserStatus===S.c.loaded}},{key:"isMyUserError",get:function(){return this.myUserStatus===S.c.error}},{key:"isMyUserLoading",get:function(){return this.myUserStatus===S.c.loading}},{key:"myEmail",get:function(){return this.ws.get("User",this.ws.userSettings.UserId).Email}},{key:"myImageId",get:function(){return this.ws.get("User",this.ws.userSettings.UserId).ImageId}},{key:"canSave",get:function(){return this.isMyUserLoaded}},{key:"inboxCountDisplay",get:function(){var e=this.inboxCount;return Object(W.n)(e)?e>99?"99+":e.toString():"..."}},{key:"unknownInboxCountDisplay",get:function(){var e=this.unknownInboxCount;return e?e>99?"99+":e.toString():""}},{key:"inboxCount",get:function(){var e=this.notificationsService.tenantState;return e?e.inbox.count:null}},{key:"unknownInboxCount",get:function(){var e=this.notificationsService.tenantState;return e?e.inbox.unknownCount:null}},{key:"showInboxSpinner",get:function(){return this.inboxState.masterStatus===S.g.loading}},{key:"showEmptyInboxMessage",get:function(){var e=this.inboxState;return e.masterStatus===S.g.loaded&&0===e.flatIds.length}},{key:"showSeeAll",get:function(){var e=this.inboxState;return e.flatIds.length<e.total}},{key:"inboxState",get:function(){var e=this.inboxStateKey,t=this.workspace.current.mdState;return t[e]||(t[e]=new S.e),t[e]}},{key:"ids",get:function(){return this.inboxState.flatIds}},{key:"c",get:function(){return this.workspace.currentTenant.InboxRecord}},{key:"docs",get:function(){return this.workspace.currentTenant.Document}},{key:"isMdScreen",get:function(){return this.workspace.mediumDevice}},{key:"favorites",get:function(){if(this._favoritesUserSettings!==this.ws.userSettings){this._favoritesUserSettings=this.ws.userSettings;var e=!1,t=this.ws.userSettings.CustomSettings.favorites;if(t)try{this._favorites=JSON.parse(t),e=!0}catch(n){}e||(this._favorites=[])}return this._favorites}},{key:"isBasic",get:function(){return"basic"===this.favoriteMode}},{key:"isAdvanced",get:function(){return"advanced"===this.favoriteMode}},{key:"urlPrefix",get:function(){return"/app/".concat(this.workspace.ws.tenantId)}},{key:"maxId",get:function(){var e,t=0,n=_createForOfIteratorHelper(this.favorites);try{for(n.s();!(e=n.n()).done;){var i=e.value;t<i.id&&(t=i.id)}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"menuOrientation",get:function(){return this.isMdScreen?"horizontal":"vertical"}}]),e}()).\u0275fac=function(e){return new(e||Dt)(r.Pb(S.m),r.Pb($.a),r.Pb(i.e),r.Pb(G.e),r.Pb(z.a),r.Pb(J.b),r.Pb(K.a),r.Pb(Y.a),r.Pb(x.e),r.Pb(X.t),r.Pb(Z.a),r.Pb(ee.a))},Dt.\u0275cmp=r.Jb({type:Dt,selectors:[["t-application-shell"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(Ee,!0),r.Oc(Ue,!0),r.Oc(xe,!0)),2&e&&(r.Ec(n=r.ic())&&(t.myAccountModal=n.first),r.Ec(n=r.ic())&&(t.inboxModal=n.first),r.Ec(n=r.ic())&&(t.favoriteModal=n.first))},decls:70,vars:48,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-dark","t-dark","navbar-expand-md","p-0","align-items-md-stretch"],["routerLink","main-menu",1,"t-brand-link","t-navbar-button",3,"title"],[3,"scale"],[1,"mx-2","d-flex"],["class","t-navbar-button nav-link",3,"disabled","click",4,"ngIf"],["class","nav navbar-nav",4,"ngIf"],["type","button",1,"navbar-toggler","mx-2",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse","align-items-stretch",3,"ngbCollapse"],["cdkDropList","",1,"nav","navbar-nav","px-4","px-md-0","flex-nowrap","flex-grow-1","t-md-zero-width","overflow-auto",3,"cdkDropListOrientation","cdkDropListDropped"],["class","nav-item","cdkDrag","",3,"tContextMenu","tContext",4,"ngFor","ngForOf"],["favoriteMenu",""],[1,"nav","navbar-nav","flex-nowrap"],[1,"nav-item"],[1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center",3,"title","click"],["icon","star"],["class","nav-item","ngbDropdown","","container","",3,"openChange",4,"ngIf"],["ngbDropdown","","container","",1,"nav-item"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow"],[1,"align-self-center"],[1,"t-dp-wrapper","t-dp-dark","bg-white","mx-1"],["shape","circle",3,"src","imageId","size"],[1,"d-flex","flex-column","justify-content-center","align-self-center"],[2,"line-height","1.1rem"],[1,"small","font-weight-bold"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow","m-0"],["type","button","ngbDropdownItem","","routerLink","/root/companies",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","","routerLink","/root/welcome",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[4,"ngIf"],[1,"t-rest-of-screen","container-fluid"],["inboxButtonContent",""],["inboxEntryContent",""],["emptyInboxMessage",""],["seeAllLink",""],["inboxModal",""],["myAccountModal",""],["favoriteModal",""],[1,"t-navbar-button","nav-link",3,"disabled","click"],["icon","arrow-left",3,"flip"],["icon","arrow-right",3,"flip"],[1,"nav","navbar-nav"],[1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center",3,"click"],[4,"ngTemplateOutlet"],["cdkDrag","",1,"nav-item",3,"tContextMenu","tContext"],[1,"t-navbar-button","nav-link","d-flex","flex-column","justify-content-center","h-100","text-nowrap",3,"click"],["class","t-dark d-flex flex-column justify-content-center text-white p-2","style","height:50px",4,"cdkDragPreview"],["class","bg-secondary p-2","style","cursor: unset; width: 4rem",4,"cdkDragPlaceholder"],[1,"t-dark","d-flex","flex-column","justify-content-center","text-white","p-2",2,"height","50px"],[1,"bg-secondary","p-2",2,"cursor","unset","width","4rem"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","pen"],[1,"t-menu-text"],["icon","trash"],["ngbDropdown","","container","",1,"nav-item",3,"openChange"],["inboxDrop","ngbDropdown"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center"],["ngbDropdownMenu","",1,"dropdown-menu","shadow","m-0","p-0",2,"width","27rem","max-height","30rem","overflow-y","auto"],[1,"px-2","py-1","border-bottom","d-flex","justify-content-between","t-slightly-bold"],[3,"scale",4,"ngIf"],[3,"routerLink","click"],["class","p-2 border-bottom t-inbox-item b","ngbDropdownItem","",3,"bg-light","routerLink","click",4,"ngFor","ngForOf"],["class","t-slightly-bold p-1 text-center",4,"ngIf"],["ngbDropdownItem","",1,"p-2","border-bottom","t-inbox-item","b",3,"routerLink","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"t-slightly-bold","p-1","text-center"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],[2,"position","relative"],["icon","inbox",2,"font-size","1.1rem"],["class","badge badge-danger t-notification-badge",3,"border-color",4,"ngIf"],[1,"badge","badge-danger","t-notification-badge"],[1,"d-flex"],[1,"px-1"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","font-weight-bold"],[1,"text-muted"],[1,"text-truncate","text-muted"],["collection","Document",3,"definitionId","entity"],["class","text-wrap",4,"ngIf"],[1,"text-wrap"],["class","p-2 my-2 alert-success text-center",4,"ngIf"],[1,"p-2","my-2","alert-success","text-center"],["icon","check"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0","bg-white","t-rest-of-screen"],["class","p-2 border-bottom t-inbox-item a","ngbDropdownItem","",3,"bg-light","routerLink","click",4,"ngFor","ngForOf"],["class","t-slightly-bold p-2 text-center",4,"ngIf"],["ngbDropdownItem","",1,"p-2","border-bottom","t-inbox-item","a",3,"routerLink","click"],[1,"t-slightly-bold","p-2","text-center"],[1,"modal-body","p-0","bg-white"],["class","row m-0 px-1 px-sm-3 pt-3 pt-sm-4 pb-3 pb-sm-5",4,"ngIf"],["class","d-flex justify-content-center py-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"row","m-0","px-1","px-sm-3","pt-3","pt-sm-4","pb-3","pb-sm-5"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"col-12","col-md-4","t-details-image-container"],[1,"border"],[3,"src","imageId","ngModel","isEdit","size","ngModelChange"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","py-2"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","editMode"],[1,"modal-body"],[1,"t-form-group",2,"margin-top","0!important",3,"label"],[3,"ngModel","ngModelChange"],[3,"ngModel","focusIf","ngModelChange"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["class","t-form-group","style","margin-top:0!important",3,"label",4,"ngIf"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"nav",1),r.Vb(2,"a",2),r.mc(3,"translate"),r.Qb(4,"t-brand",3),r.Ub(),r.Vb(5,"div",4),r.Rc(6,Re,2,2,"button",5),r.Tc(7," \xa0 "),r.Rc(8,De,2,2,"button",5),r.Ub(),r.Rc(9,Se,3,1,"div",6),r.Vb(10,"button",7),r.hc("click",(function(){return t.onToggleCollapse()})),r.Qb(11,"span",8),r.Ub(),r.Vb(12,"div",9),r.Vb(13,"ol",10),r.hc("cdkDropListDropped",(function(e){return t.onDragDropFavorite(e)})),r.Rc(14,Le,5,3,"li",11),r.Rc(15,Fe,14,6,"ng-template",null,12,r.Sc),r.Ub(),r.Vb(17,"ol",13),r.Vb(18,"li",14),r.Vb(19,"button",15),r.hc("click",(function(){return t.onAddFavorite()})),r.mc(20,"translate"),r.Qb(21,"fa-icon",16),r.Ub(),r.Ub(),r.Rc(22,Je,16,14,"li",17),r.Vb(23,"li",18),r.Vb(24,"button",19),r.Vb(25,"div",20),r.Vb(26,"div",21),r.Qb(27,"t-image",22),r.Ub(),r.Ub(),r.Tc(28," \xa0\xa0 "),r.Vb(29,"div",23),r.Vb(30,"div",24),r.Tc(31),r.Ub(),r.Vb(32,"div",25),r.Tc(33),r.Ub(),r.Ub(),r.Tc(34," \xa0\xa0 "),r.Ub(),r.Vb(35,"div",26),r.Vb(36,"button",27),r.hc("click",(function(){return t.onCollapse()})),r.Tc(37),r.mc(38,"translate"),r.Ub(),r.Vb(39,"button",28),r.hc("click",(function(){return t.onCollapse()})),r.Tc(40),r.mc(41,"translate"),r.Ub(),r.Vb(42,"button",29),r.hc("click",(function(){return t.onMySystemAccount(),t.onCollapse()})),r.Tc(43),r.mc(44,"translate"),r.mc(45,"translate"),r.Ub(),r.Vb(46,"button",29),r.hc("click",(function(){return t.onMyCompanyAccount(),t.onCollapse()})),r.Tc(47),r.mc(48,"translate"),r.Ub(),r.Vb(49,"button",29),r.hc("click",(function(){return t.onSignOut(),t.onCollapse()})),r.Tc(50),r.mc(51,"translate"),r.Ub(),r.Rc(52,Ze,5,3,"ng-container",30),r.Rc(53,nt,4,2,"ng-container",30),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(54,"main",31),r.Qb(55,"router-outlet"),r.Ub(),r.Ub(),r.Rc(56,rt,5,2,"ng-template",null,32,r.Sc),r.Rc(58,at,15,13,"ng-template",null,33,r.Sc),r.Rc(60,st,1,1,"ng-template",null,34,r.Sc),r.Rc(62,ut,3,4,"ng-template",null,35,r.Sc),r.Rc(64,ht,12,7,"ng-template",null,36,r.Sc),r.Rc(66,Tt,21,17,"ng-template",null,37,r.Sc),r.Rc(68,Rt,35,36,"ng-template",null,38,r.Sc)),2&e&&(r.Bb(1),r.Qc("background-color",null==t.settings?null:t.settings.BrandColor),r.Bb(1),r.sc("title",r.nc(3,26,"Home")),r.Bb(2),r.sc("scale",1),r.Bb(2),r.sc("ngIf",t.nav.showBack),r.Bb(2),r.sc("ngIf",t.nav.showForward),r.Bb(1),r.sc("ngIf",!t.isMdScreen),r.Bb(3),r.sc("ngbCollapse",t.isCollapsed),r.Bb(1),r.sc("cdkDropListOrientation",t.menuOrientation),r.Bb(1),r.sc("ngForOf",t.favorites),r.Bb(5),r.sc("title",r.nc(20,28,"AddScreenToFavorites")),r.Bb(3),r.sc("ngIf",t.isMdScreen),r.Bb(5),r.sc("src","users/"+(null==t.ws||null==t.ws.userSettings?null:t.ws.userSettings.UserId)+"/image")("imageId",null==t.ws||null==t.ws.userSettings?null:t.ws.userSettings.ImageId)("size",28),r.Bb(4),r.Uc(t.userName),r.Bb(2),r.Vc(" ",t.companyName,""),r.Bb(2),r.Gb("dropdown-menu-right",!t.isRtl),r.Bb(2),r.Vc(" ",r.nc(38,30,"ChangeCompany")," "),r.Bb(3),r.Vc(" ",r.nc(41,32,"WelcomePage")," "),r.Bb(3),r.Vc(" ",r.oc(44,34,"My0Account",r.wc(44,Vt,r.nc(45,37,"AppName")))," "),r.Bb(4),r.Vc(" ",r.oc(48,39,"My0Account",r.wc(46,Vt,t.companyName))," "),r.Bb(3),r.Vc(" ",r.nc(51,42,"SignOut")," "),r.Bb(2),r.sc("ngIf",(null==t.settings?null:t.settings.SecondaryLanguageId)||(null==t.settings?null:t.settings.TernaryLanguageId)),r.Bb(1),r.sc("ngIf",!(null==t.settings||!t.settings.SecondaryCalendar)))},directives:[X.B,i.h,te.a,x.u,X.d,Q.f,x.t,ne.b,X.l,X.r,he,X.p,X.o,i.f,i.j,x.B,Q.b,ve.a,Q.e,Q.d,ye.a,Ie.a,Ce.a,ie.k,ie.n,we.a,ie.u,ke.a],pipes:[G.d,Ve,Te],encapsulation:2}),Dt),St=n("6vYK"),_t=n("O90C"),Ot=n("QFit");function Lt(e,t){if(1&e&&(r.Vb(0,"div",13),r.Vb(1,"span",14),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",15),r.Vb(4,"span",14),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("Unit",n,"Name")),r.Bb(3),r.Uc(i.ws.getMultilingualValue("Unit",n,"Description"))}}function Ft(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Unit"),"\n")}function At(e,t){if(1&e&&(r.Vb(0,"span",16),r.Qb(1,"t-auto-cell",17),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function Pt(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function Nt(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function jt(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}function Wt(e,t){if(1&e&&(r.Tc(0),r.mc(1,"translate")),2&e){var n=r.lc();r.Vc(" ",r.nc(1,1,n.unitTypeLookup("Pure")),"")}}function qt(e,t){if(1&e&&(r.Tc(0),r.mc(1,"translate")),2&e){var n=r.lc();r.Vc(" ",r.nc(1,1,n.unitTypeLookup("Time")),"")}}function Qt(e,t){if(1&e&&(r.Tc(0),r.mc(1,"translate")),2&e){var n=r.lc();r.Vc(" ",r.nc(1,1,n.unitTypeLookup("Distance")),"")}}function Ht(e,t){if(1&e&&(r.Tc(0),r.mc(1,"translate")),2&e){var n=r.lc();r.Vc(" ",r.nc(1,1,n.unitTypeLookup("Count")),"")}}function $t(e,t){if(1&e&&(r.Tc(0),r.mc(1,"translate")),2&e){var n=r.lc();r.Vc(" ",r.nc(1,1,n.unitTypeLookup("Mass")),"")}}function Gt(e,t){if(1&e&&(r.Tc(0),r.mc(1,"translate")),2&e){var n=r.lc();r.Vc(" ",r.nc(1,1,n.unitTypeLookup("Volume")),"")}}var zt,Jt=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Kt=function(e,t){return[e,t]},Yt=function(e){return{template:e,expression:"CreatedById eq me"}},Xt=function(e){return[e]},Zt=function(e){return{template:e,expression:"UnitType eq 'Pure'"}},en=function(e){return{template:e,expression:"UnitType eq 'Time'"}},tn=function(e){return{template:e,expression:"UnitType eq 'Distance'"}},nn=function(e){return{template:e,expression:"UnitType eq 'Count'"}},rn=function(e){return{template:e,expression:"UnitType eq 'Mass'"}},on=function(e){return{template:e,expression:"UnitType eq 'Volume'"}},cn=function(e,t,n,i,r,o){return[e,t,n,i,r,o]},an=function(e,t){return{CreatedBy:e,UnitType:t}},ln=((zt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.unitsApi=o.api.unitsApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.unitsApi.activate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.unitsApi.deactivate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo("units","IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.unitsApi=o.api.unitsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"unitTypeLookup",value:function(e){return Object(St.a)(this.workspace,this.translate).properties.UnitType.format(e)}},{key:"c",get:function(){return this.ws.Unit}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||zt)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},zt.\u0275cmp=r.Jb({type:zt,selectors:[["t-units-master"]],features:[r.yb],decls:26,vars:51,consts:[["collection","Unit","selectDefault","Code,UnitType,UnitAmount,BaseAmount,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["pure",""],["time",""],["distance",""],["count",""],["mass",""],["volume",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Unit",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,Lt,6,2,"ng-template",null,1,r.Sc),r.Rc(4,Ft,2,3,"ng-template",null,2,r.Sc),r.Rc(6,At,2,1,"ng-template",null,3,r.Sc),r.Rc(8,Pt,2,3,"ng-template",null,4,r.Sc),r.Rc(10,Nt,2,3,"ng-template",null,5,r.Sc),r.Rc(12,jt,2,3,"ng-template",null,6,r.Sc),r.Rc(14,Wt,2,3,"ng-template",null,7,r.Sc),r.Rc(16,qt,2,3,"ng-template",null,8,r.Sc),r.Rc(18,Qt,2,3,"ng-template",null,9,r.Sc),r.Rc(20,Ht,2,3,"ng-template",null,10,r.Sc),r.Rc(22,$t,2,3,"ng-template",null,11,r.Sc),r.Rc(24,Gt,2,3,"ng-template",null,12,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21),f=r.Fc(23),m=r.Fc(25);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"Units"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(22,Kt,r.zc(12,Jt,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(17,Jt,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.xc(48,an,r.wc(27,Xt,r.wc(25,Yt,l)),r.Bc(41,cn,r.wc(29,Zt,s),r.wc(31,en,u),r.wc(33,tn,d),r.wc(35,nn,b),r.wc(37,rn,f),r.wc(39,on,m))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),zt);function sn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",4),r.Vb(1,"button",5),r.hc("click",(function(){return r.Ic(n),r.lc().onHome()})),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()}2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"Home")))}var un,dn=((un=function(){function e(t,n){_classCallCheck(this,e),this.router=t,this.workspace=n,this.showHome=!0}return _createClass(e,[{key:"onHome",value:function(){this.router.navigate(["app",this.workspace.ws.tenantId+"","main-menu"])}}]),e}()).\u0275fac=function(e){return new(e||un)(r.Pb(i.e),r.Pb(S.m))},un.\u0275cmp=r.Jb({type:un,selectors:[["t-application-page-not-found"]],inputs:{showHome:"showHome"},decls:8,vars:7,consts:[[1,"p-5"],[1,"text-danger"],[1,"text-muted"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"h2",1),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"p",2),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Rc(7,sn,4,3,"div",3),r.Ub()),2&e&&(r.Bb(2),r.Vc(" ",r.nc(3,3,"Error_PageNotFound")," "),r.Bb(3),r.Uc(r.nc(6,5,"Error_PageNotFoundMessage")),r.Bb(2),r.sc("ngIf",t.showHome))},directives:[x.u],pipes:[G.d],encapsulation:2}),un),bn=n("PqYM"),fn=n("lV2L"),mn=["searchInput"];function gn(e,t){1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound"),""))}function pn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"a",15),r.hc("focus",(function(){r.Ic(n);var e=t.index;return r.lc(2).onFocus(0,e)}))("blur",(function(){return r.Ic(n),r.lc(2).onBlur()}))("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc(2).onMenuItemClick(e)})),r.Vb(1,"div",16),r.Qb(2,"fa-icon",17),r.Ub(),r.Vb(3,"div",18),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=t.index,c=r.lc(2);r.Gb("d-none",!c.showItem(i)),r.sc("id",c.getId(0,o))("routerLink",c.linkArray(i))("title",i.label),r.Bb(2),r.sc("icon",i.icon),r.Bb(2),r.Vc(" ",r.nc(5,7,i.label)," ")}}function hn(e,t){if(1&e&&(r.Vb(0,"div",12),r.Vb(1,"div",13),r.Vb(2,"span"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Rc(5,pn,6,9,"a",14),r.Ub()),2&e){var n=r.lc();r.Gb("d-none",!n.showSection(n.quickAccess)),r.Bb(3),r.Uc(r.nc(4,4,"Menu_QuickAccess")),r.Bb(2),r.sc("ngForOf",n.quickAccess)}}function vn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"a",15),r.hc("focus",(function(){r.Ic(n);var e=t.index,i=r.lc().index;return r.lc(2).onFocus(i+1,e)}))("blur",(function(){return r.Ic(n),r.lc(3).onBlur()}))("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc(3).onMenuItemClick(e)})),r.Vb(1,"div",16),r.Qb(2,"fa-icon",17),r.Ub(),r.Vb(3,"div",18),r.Tc(4),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=t.index,c=r.lc().index,a=r.lc(2);r.Gb("d-none",!a.showItem(i)),r.sc("id",a.getId(c+1,o))("routerLink",a.linkArray(i))("title",i.label),r.Bb(2),r.sc("icon",i.icon),r.Bb(2),r.Vc(" ",i.label," ")}}function yn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",20),r.hc("dblclick",(function(){r.Ic(n);var e=t.$implicit;return r.lc(2).onSectionDoubleClick(e)})),r.Vb(2,"span"),r.Tc(3),r.Ub(),r.Ub(),r.Rc(4,vn,5,7,"a",14),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2);r.Eb("mb-4 mb-md-5 ",i.background,""),r.Gb("d-none",!o.showSection(null==i?null:i.items)),r.Bb(3),r.Uc(i.label),r.Bb(1),r.sc("ngForOf",i.items)}}function In(e,t){if(1&e&&(r.Tb(0),r.Rc(1,yn,5,7,"div",19),r.Sb()),2&e){var n=r.lc();r.Bb(1),r.sc("ngForOf",n.mainMenu)}}function Cn(e,t){1&e&&(r.Vb(0,"div",21),r.Qb(1,"t-spinner",22),r.Ub()),2&e&&(r.Bb(1),r.sc("scale",2))}var wn,kn,Mn=((wn=function(){function e(t,n,i,r,o,c){var a=this;_classCallCheck(this,e),this.router=t,this.route=n,this.document=i,this.translate=r,this.workspace=o,this.userSettings=c,this.MAX_TILES=6,this.TILE_WIDTH=135,this.TILE_MARGIN=4,this.CONTAINER_MARGIN=15,this.currentSection=-1,this.currentItem=-1,this.currentXMemory=-1,this.rendered=!1,this.mainMenuBase={Mail:{background:"t-blue1",items:[{label:"Inbox",icon:"inbox",link:"../inbox",sortKey:10},{label:"Outbox",icon:"share",link:"../outbox",sortKey:20}]},Financials:{background:"t-green1",items:[{label:"Accounts",icon:"coins",link:"../accounts",view:"accounts",sortKey:100},{label:"AccountStatement",icon:"file-alt",link:"../account-statement",canView:function(){return a.canView("accounts")&&a.canView("details-entries")},paramsFunc:function(){return a.userSettings.get("account-statement/arguments")},sortKey:101},{label:"EntryTypes",icon:"sitemap",link:"../entry-types",view:"entry-types",sortKey:200},{label:"AccountTypes",icon:"sitemap",link:"../account-types",view:"account-types",sortKey:300},{label:"AccountClassifications",icon:"indent",link:"../account-classifications",view:"account-classifications",sortKey:500},{label:"Centers",icon:"object-group",link:"../centers",view:"centers",sortKey:600},{label:"FinancialSettings",icon:"cog",link:"../financial-settings",view:"financial-settings",sortKey:700}]},Cash:{background:"t-teal2",items:[{label:"ExchangeRates",icon:"exchange-alt",link:"../exchange-rates",view:"exchange-rates",sortKey:100},{label:"BankReconciliation",icon:"tasks",link:"../reconciliation",view:"reconciliation",sortKey:200,paramsFunc:function(){return a.userSettings.get("reconciliation/arguments")}}]},FixedAssets:{background:"t-blue2",items:[]},Inventory:{background:"t-green2",items:[]},Production:{background:"t-teal3",items:[]},Purchasing:{background:"t-blue3",items:[]},Marketing:{background:"t-green3",items:[]},Sales:{background:"t-teal1",items:[]},HumanCapital:{background:"t-blue1",items:[]},Investments:{background:"t-green1",items:[]},Maintenance:{background:"t-teal2",items:[]},Administration:{background:"t-blue2",items:[{label:"Agents",icon:"id-badge",link:"../agents",view:"agents",sortKey:100},{label:"Units",icon:"ruler",link:"../units",view:"units",sortKey:200},{label:"Currencies",icon:"euro-sign",link:"../currencies",view:"currencies",sortKey:300},{label:"IfrsConcepts",icon:"stream",link:"../ifrs-concepts",view:"ifrs-concepts",sortKey:600},{label:"Emails",icon:"envelope",link:"../emails",sortKey:400,canView:function(){return a.workspace.globalSettings.EmailEnabled&&a.canView("emails")}},{label:"SmsMessages",icon:"sms",link:"../sms-messages",sortKey:500,canView:function(){return a.workspace.globalSettings.SmsEnabled&&a.workspace.currentTenant.settings.SmsEnabled&&a.canView("sms-messages")}},{label:"GeneralSettings",icon:"cog",link:"../general-settings",view:"general-settings",sortKey:700}]},Security:{background:"t-green2",items:[{label:"Users",icon:"users",link:"../users",view:"users",sortKey:100},{label:"Roles",icon:"shield-alt",link:"../roles",view:"roles",sortKey:200}]},Studio:{background:"t-black",items:[{label:"ReportDefinitions",icon:"tools",link:"../report-definitions",view:"report-definitions",sortKey:100},{label:"DashboardDefinitions",icon:"tools",link:"../dashboard-definitions",view:"dashboard-definitions",sortKey:150},{label:"LineDefinitions",icon:"tools",link:"../line-definitions",view:"line-definitions",sortKey:200},{label:"DocumentDefinitions",icon:"tools",link:"../document-definitions",view:"document-definitions",sortKey:225},{label:"RelationDefinitions",icon:"tools",link:"../relation-definitions",view:"relation-definitions",sortKey:250},{label:"CustodyDefinitions",icon:"tools",link:"../custody-definitions",view:"custody-definitions",sortKey:275},{label:"ResourceDefinitions",icon:"tools",link:"../resource-definitions",view:"resource-definitions",sortKey:300},{label:"LookupDefinitions",icon:"tools",link:"../lookup-definitions",view:"lookup-definitions",sortKey:400},{label:"MarkupTemplates",icon:"file-code",link:"../markup-templates",view:"markup-templates",sortKey:500}]},Help:{background:"t-blue2",items:[]},Miscellaneous:{background:"t-grey",items:[]}},this._permissions=null,this._definitions=null,this._settings=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.mainMenu.reduce((function(e,t){return e+t.items.length}),0);this.document.body.classList.add("t-banner"),e<60&&this.render(),"popstate"===this.workspace.lastNavigation&&(this.search=this.ws.mainMenuSearch,this.search&&this.render())}},{key:"ngAfterViewInit",value:function(){var e=this;this.rendered||Object(bn.a)(1).subscribe((function(){return e.render()}))}},{key:"ngOnDestroy",value:function(){this.document.body.classList.remove("t-banner"),this.ws.mainMenuSearch=this.search}},{key:"render",value:function(){this.rendered=!0}},{key:"initializeMainMenu",value:function(){var e=this,t=this.workspace.currentTenant;if(this._definitions!==t.definitions||this._settings!==t.settings||this._userSettings!==t.userSettings||this._currentCulture!==this.workspace.ws.culture||this._permissions!==t.permissions){this._definitions=t.definitions,this._settings=t.settings,this._userSettings=this.workspace.current.userSettings,this._currentCulture=this.workspace.ws.culture,this._permissions=t.permissions;for(var n=Object.assign({},this.mainMenuBase),i=0,r=Object.keys(this.mainMenuBase);i<r.length;i++){var o=r[i];n[o]=Object.assign({},n[o]),n[o].items=n[o].items.map((function(e){return Object.assign({},e)}));var c,a=_createForOfIteratorHelper(n[o].items);try{for(a.s();!(c=a.n()).done;){var l=c.value;l.label=this.translate.instant(l.label)}}catch(y){a.e(y)}finally{a.f()}}this.addDefinitions(n,t.definitions.Lookups,"lookups"),this.addDefinitions(n,t.definitions.Relations,"relations"),this.addDefinitions(n,t.definitions.Custodies,"custodies"),this.addDefinitions(n,t.definitions.Resources,"resources"),this.addDefinitions(n,t.definitions.Documents,"documents"),this.addReportDefinitions(n),this.addDashboardDefinitions(n),this._mainMenu=Object.keys(n).map((function(t){return{label:e.translate.instant("Menu_"+t),items:n[t].items.sort((function(e,t){return e.sortKey-t.sortKey})),background:n[t].background}}));var s=this.userSettings.get("main-menu/quick-access");if(s&&s.length){var u,d={},b=_createForOfIteratorHelper(s);try{for(b.s();!(u=b.n()).done;)d[u.value]=!0}catch(y){b.e(y)}finally{b.f()}var f,m={},g=_createForOfIteratorHelper(this._mainMenu);try{for(g.s();!(f=g.n()).done;){var p,h=_createForOfIteratorHelper(f.value.items);try{for(h.s();!(p=h.n()).done;){var v=p.value;d[v.link]&&(m[v.link]=v)}}catch(y){h.e(y)}finally{h.f()}}}catch(y){g.e(y)}finally{g.f()}this._quickAccess=s.map((function(e){return m[e]})).filter((function(e){return!!e}))}else this._quickAccess=[]}}},{key:"addReportDefinitions",value:function(e){var t,n=this.workspace.currentTenant,i={},r=_createForOfIteratorHelper(n.reportIds);try{for(r.s();!(t=r.n()).done;)i[t.value]=!0}catch(u){r.e(u)}finally{r.f()}for(var o=0,c=Object.keys(n.definitions.Reports);o<c.length;o++){var a=c[o],l=n.definitions.Reports[+a];if(l.ShowInMainMenu&&i[a]){var s=n.getMultilingualValueImmediate(l,"Title")||this.translate.instant("Untitled");e[e[l.MainMenuSection]?l.MainMenuSection:"Miscellaneous"].items.push({label:s,sortKey:l.MainMenuSortKey,icon:l.MainMenuIcon||"folder",link:"../report/".concat(a)})}}}},{key:"addDashboardDefinitions",value:function(e){var t,n=this.workspace.currentTenant,i={},r=_createForOfIteratorHelper(n.dashboardIds);try{for(r.s();!(t=r.n()).done;)i[t.value]=!0}catch(u){r.e(u)}finally{r.f()}for(var o=0,c=Object.keys(n.definitions.Dashboards);o<c.length;o++){var a=c[o],l=n.definitions.Dashboards[+a];if(l.ShowInMainMenu&&i[a]){var s=n.getMultilingualValueImmediate(l,"Title")||this.translate.instant("Untitled");e[e[l.MainMenuSection]?l.MainMenuSection:"Miscellaneous"].items.push({label:s,sortKey:l.MainMenuSortKey,icon:l.MainMenuIcon||"folder",link:"../dashboard/".concat(a)})}}}},{key:"linkArray",value:function(e){if(!e.linkArray&&(e.linkArray=[e.link],e.paramsFunc)){var t=e.paramsFunc();t&&e.linkArray.push(t)}return e.linkArray}},{key:"addDefinitions",value:function(e,t,n,i){var r=this;if(t){i=i||function(e){return r.workspace.currentTenant.getMultilingualValueImmediate(e,"TitlePlural")||r.translate.instant("Untitled")};var o,c=_createForOfIteratorHelper(Object.keys(t).filter((function(e){return r.canView("".concat(n,"/").concat(e))})));try{for(c.s();!(o=c.n()).done;){var a=o.value,l=t[a],s=i(l);e[l.MainMenuSection]||(l.MainMenuSection="Miscellaneous"),e[l.MainMenuSection].items.push({label:s,sortKey:l.MainMenuSortKey,icon:l.MainMenuIcon||"folder",link:"../".concat(n,"/").concat(a)})}}catch(u){c.e(u)}finally{c.f()}}}},{key:"handleKeyboardEvent",value:function(e){if(!this.workspace.ignoreKeyDownEvents){var t=e.key;if(!this.searchInputIsFocused&&t&&1===t.trim().length&&(this.currentXMemory=-1,this.searchInput.nativeElement.value="",this.searchInput.nativeElement.focus()),!e.altKey&&!e.ctrlKey&&W.a[t])switch(this.workspace.ws.isRtl&&(t===W.a.ArrowRight?t=W.a.ArrowLeft:t===W.a.ArrowLeft&&(t=W.a.ArrowRight)),t){case W.a.Escape:this.currentXMemory=-1,this.search="",this.currentItem=-1,this.currentSection=-1,this.document.activeElement.blur();break;case W.a.Tab:this.currentXMemory=-1;break;case W.a.ArrowLeft:if(this.currentIdExists){this.currentXMemory=-1;var n=this.computeGridModel(),i=n.currentX;(i-=1)<0&&(i=0);var r=n.grid[n.currentY][i];this.focusTile(r.sectionIndex,r.itemIndex,e)}break;case W.a.ArrowRight:if(!this.showNoItemsFound&&!this.searchInputIsFocused){this.currentXMemory=-1;var o=0,c=0,a=this.computeGridModel();this.currentIdExists&&(o=a.currentX,c=a.currentY,o+=1,a.grid[c][o]||(o-=1));var l=a.grid[c][o];this.focusTile(l.sectionIndex,l.itemIndex,e)}break;case W.a.ArrowUp:if(this.currentIdExists){var s=this.computeGridModel(),u=this.currentXMemory<0?s.currentX:this.currentXMemory,d=s.currentY;for((d-=1)<0&&(d=0),this.currentXMemory=Math.max(this.currentXMemory,u);!s.grid[d][u]&&u>0;)u--;var b=s.grid[d][u];this.focusTile(b.sectionIndex,b.itemIndex,e)}break;case W.a.ArrowDown:if(!this.showNoItemsFound){var f=0,m=0,g=this.computeGridModel();if(this.currentIdExists)for(f=this.currentXMemory<0?g.currentX:this.currentXMemory,m=g.currentY,(m+=1)>=g.height&&(m=g.height-1),this.currentXMemory=Math.max(this.currentXMemory,f);!g.grid[m][f]&&f>0;)f--;else this.currentXMemory=-1;var p=g.grid[m][f];this.focusTile(p.sectionIndex,p.itemIndex,e)}}}}},{key:"focusTile",value:function(e,t,n){this.document.getElementById(this.getId(e,t)).focus(),n.preventDefault(),n.stopPropagation()}},{key:"computeGridModel",value:function(){for(var e=this,t=this.rowTiles,n=-1,i=-1,r=[],o=function(o){var c=e.getSectionItems(o);if(e.showSectionIndex(o))for(var a=c.map((function(e,t){return{sectionIndex:o,itemIndex:t}})).filter((function(t){return e.showItemIndex(t.sectionIndex,t.itemIndex)})),l=0;l<a.length;l+=t){var s=a.slice(l,l+t);r.push(s);for(var u=0;u<t;u++){var d=s[u];d&&d.itemIndex===e.currentItem&&d.sectionIndex===e.currentSection&&(n=r.length-1,i=u)}}},c=0;c<this.sectionsLength;c++)o(c);return{currentX:i,currentY:n,width:t,height:r.length,grid:r}}},{key:"getSectionItems",value:function(e){return 0===e?this.quickAccess:this.mainMenu[e-1].items}},{key:"onFocus",value:function(e,t){this.currentSection=e,this.currentItem=t}},{key:"onBlur",value:function(){this.currentSection=-1,this.currentItem=-1}},{key:"getId",value:function(e,t){return"".concat(e,"_").concat(t)}},{key:"onNavigate",value:function(e){this.router.navigate([e],{relativeTo:this.route})}},{key:"showSection",value:function(e){var t=this;return(!this.search||e!==this.quickAccess)&&!!e&&e.some((function(e){return t.showItem(e)}))}},{key:"showItem",value:function(e){var t=this.search;return(!e.view||this.canView(e.view))&&(!e.canView||e.canView())&&(!t||-1!==this.translate.instant(e.label).toLowerCase().indexOf(t.toLowerCase()))}},{key:"showSectionIndex",value:function(e){var t=this.getSectionItems(e);return this.showSection(t)}},{key:"showItemIndex",value:function(e,t){var n=this.getSectionItems(e)[t];return this.showItem(n)}},{key:"canView",value:function(e){return this.workspace.currentTenant.canRead(e)}},{key:"onSectionDoubleClick",value:function(e){if(e&&e.items){console.log("------- Section: ".concat(e.label," -------"));var t,n=_createForOfIteratorHelper(e.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;console.log("".concat(i.sortKey," ").concat(i.label))}}catch(r){n.e(r)}finally{n.f()}}}},{key:"onMenuItemClick",value:function(e){if(!this.quickAccess[0]||e.link!==this.quickAccess[0].link){var t=this.quickAccess.filter((function(t){return t.link!==e.link})).map((function(e){return e.link}));for(t.unshift(e.link);t.length>6;)t.pop();var n=JSON.stringify(t);this.userSettings.save("main-menu/quick-access",n)}}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"mainMenu",get:function(){return this.initializeMainMenu(),this._mainMenu}},{key:"quickAccess",get:function(){return this.initializeMainMenu(),this._quickAccess}},{key:"searchInputIsFocused",get:function(){return this.searchInput.nativeElement===this.document.activeElement}},{key:"rowTiles",get:function(){for(var e=this.MAX_TILES;e>0;e--)if(window.matchMedia("(min-width: ".concat(2*this.CONTAINER_MARGIN+(this.TILE_WIDTH+2*this.TILE_MARGIN)*e,"px)")).matches)return e}},{key:"sectionsLength",get:function(){return 1+this.mainMenu.length}},{key:"currentIdExists",get:function(){return this.currentSection>=0&&this.currentItem>=0}},{key:"showNoItemsFound",get:function(){var e=this;return this.mainMenu.every((function(t){return!e.showSection(t.items)}))&&!this.showSection(this.quickAccess)}}]),e}()).\u0275fac=function(e){return new(e||wn)(r.Pb(i.e),r.Pb(i.a),r.Pb(x.e),r.Pb(G.e),r.Pb(S.m),r.Pb(ee.a))},wn.\u0275cmp=r.Jb({type:wn,selectors:[["t-main-menu"]],viewQuery:function(e,t){var n;1&e&&r.Oc(mn,!0),2&e&&r.Ec(n=r.ic())&&(t.searchInput=n.first)},hostBindings:function(e,t){1&e&&r.hc("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,r.Gc)},decls:15,vars:9,consts:[["tScrollMemory","main-menu",1,"pt-3","pt-md-4","t-menu-screen",3,"tScrollMemoryTrigger"],["rootDiv",""],[1,"t-menu-search-container","mb-4"],["id","searchIcon","icon","search",1,"d-inline"],[1,"form-control","t-menu-search",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],[1,"t-menu-container"],["contentDiv",""],[4,"ngIf"],["class","mb-4 mb-md-5 t-quickaccess",3,"d-none",4,"ngIf"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"mb-4","mb-md-5","t-quickaccess"],[1,"t-menu-section"],["class","t-menu-item btn m-1",3,"id","d-none","routerLink","title","focus","blur","click",4,"ngFor","ngForOf"],[1,"t-menu-item","btn","m-1",3,"id","routerLink","title","focus","blur","click"],[1,"pt-4","pb-1","t-menu-item-icon"],[3,"icon"],["ellipsis","",1,"px-2","t-menu-item-label"],[3,"class","d-none",4,"ngFor","ngForOf"],[1,"t-menu-section",3,"dblclick"],[1,"text-center","pt-4"],[3,"scale"]],template:function(e,t){if(1&e&&(r.Vb(0,"div",0,1),r.Vb(2,"div",2),r.Tc(3," \xa0\xa0\xa0 "),r.Qb(4,"fa-icon",3),r.Vb(5,"input",4,5),r.hc("ngModelChange",(function(e){return t.search=e})),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Vb(8,"div",6,7),r.Rc(10,gn,3,3,"div",8),r.Rc(11,hn,6,6,"div",9),r.Rc(12,In,2,1,"ng-container",10),r.Ub(),r.Rc(13,Cn,2,1,"ng-template",null,11,r.Sc),r.Ub()),2&e){var n=r.Fc(14);r.sc("tScrollMemoryTrigger",t.rendered+(t.search||"")),r.Bb(5),r.uc("placeholder","",r.nc(7,7,"Search"),"..."),r.sc("ngModel",t.search),r.Bb(5),r.sc("ngIf",t.showNoItemsFound),r.Bb(1),r.sc("ngIf",!t.search),r.Bb(1),r.sc("ngIf",t.rendered)("ngIfElse",n)}},directives:[fn.a,ne.b,ie.c,ie.k,ie.n,x.u,x.t,i.h,R,ye.a],pipes:[G.d],encapsulation:2}),wn),Vn=n("CHDZ"),Tn=n("ABE2"),En=n("56d8"),Un=["input"],xn=((kn=function(){function e(){_classCallCheck(this,e),this.placeholder="",this.textAlignment=null,this.maxDecimalPlaces=null,this.minDecimalPlaces=null,this.noSeparator=!1,this.theme="light",this.isPercentage=!1,this.w100=!0,this.isDisabled=!1,this.onChange=function(e){},this.onTouched=function(){},this.onValidatorChange=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){var t=this.format(e=this.isPercentage?100*e:e);this.input.nativeElement.value=t}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var i=t.parse(n);i=t.isPercentage?i/100:i,e(i)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.isDisabled=e}},{key:"ngOnChanges",value:function(e){if(e.maxDecimalPlaces&&!e.maxDecimalPlaces.isFirstChange()||e.minDecimalPlaces&&!e.minDecimalPlaces.isFirstChange()){var t=this.parse(this.input.nativeElement.value);this.input.nativeElement.value=this.format(t)}}},{key:"isBracketed",value:function(e){return e.startsWith("(")&&e.endsWith(")")}},{key:"removeBrackets",value:function(e){return e.substr(1,e.length-2)}},{key:"format",value:function(e){if(!e&&0!==e)return"";var t=e<0,n=_slicedToArray((Math.abs(e)||"0").toString().split(this.decimalSeparator),2),i=n[0],r=n[1],o=void 0===r?"":r,c=this.minDecimalPlaces;null===c&&(c=o.length);var a=Math.max(this.maxDecimalPlaces,c);null===a&&(a=o.length);var l=o.length;l=Math.max(c,l),o=(l=Math.min(a,l))>0?this.decimalSeparator+(o+this.padding).substring(0,l):"",this.noSeparator||(i=i.replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator));var s=i+o;return this.isPercentage&&(s+="%"),t&&(s="(".concat(s,")")),s}},{key:"parse",value:function(e){if(null!=e&&""!==e){e=(e||"").trim();var t=this.isBracketed(e);if(t&&(e=this.removeBrackets(e).trim()),this.isPercentage)for(;e.endsWith("%");)e=e.slice(0,-1);var n=_slicedToArray(e.split(this.decimalSeparator),2),i=n[0],r=n[1],o=void 0===r?"":r;i=i.replace(new RegExp(this.thousandsSeparator,"g"),"");var c=this.maxDecimalPlaces;null===c&&(c=o.length);var a=i+(o=parseInt(o,10)>0&&c>0?this.decimalSeparator+(o+this.padding).substring(0,c):""),l=a?+a:0;return t?-l:l}}},{key:"onBlur",value:function(e){this.onTouched(),this.input.nativeElement.value=this.format(this.parse(e))}},{key:"padding",get:function(){return"00000000"}},{key:"decimalSeparator",get:function(){return"."}},{key:"thousandsSeparator",get:function(){return","}},{key:"isDark",get:function(){return"dark"===this.theme}}]),e}()).\u0275fac=function(e){return new(e||kn)},kn.\u0275cmp=r.Jb({type:kn,selectors:[["t-decimal-editor"]],viewQuery:function(e,t){var n;1&e&&r.Oc(Un,!0),2&e&&r.Ec(n=r.ic())&&(t.input=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("w-100",t.w100)},inputs:{placeholder:"placeholder",textAlignment:"textAlignment",maxDecimalPlaces:"maxDecimalPlaces",minDecimalPlaces:"minDecimalPlaces",noSeparator:"noSeparator",theme:"theme",isPercentage:"isPercentage"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:kn}]),r.zb],decls:2,vars:8,consts:[["type","text",1,"form-control",3,"placeholder","disabled","input","blur"],["input",""]],template:function(e,t){1&e&&(r.Vb(0,"input",0,1),r.hc("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onBlur(e.target.value)})),r.Ub()),2&e&&(r.Qc("text-align",t.textAlignment),r.Gb("t-input",!t.isDark)("t-studio-input",t.isDark),r.sc("placeholder",t.placeholder)("disabled",t.isDisabled))},encapsulation:2}),kn);function Rn(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function Dn(e,t){if(1&e&&(r.Vb(0,"h2",16),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var Bn=function(){return{updateOn:"blur"}};function Sn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",17),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,Bn))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function _n(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",18),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,Bn))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function On(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",18),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,Bn))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function Ln(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function Fn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,Bn))}}function An(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Ln,2,1,"div",11),r.Rc(3,Fn,1,3,"t-text-editor",13),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Pn(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function Nn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,Bn))}}function jn(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Pn,2,1,"div",11),r.Rc(3,Nn,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Wn(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function qn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,Bn))}}function Qn(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Wn,2,1,"div",11),r.Rc(3,qn,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Hn(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function $n(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,Bn))}}function Gn(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Description)}}function zn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Description=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Description)("ngModelOptions",r.vc(2,Bn))}}function Jn(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Description2)}}function Kn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description2)("ngModelOptions",r.vc(2,Bn))}}function Yn(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Jn,2,1,"div",11),r.Rc(3,Kn,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Xn(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Description3)}}function Zn(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description3)("ngModelOptions",r.vc(2,Bn))}}function ei(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Xn,2,1,"div",11),r.Rc(3,Zn,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ti(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"t-restricted",21),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.UnitType),r.Bb(1),r.Vc(" ",r.nc(3,2,i.unitTypeLookup(null==n?null:n.UnitType))," ")}}function ni(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.UnitType=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.UnitType)("choices",o.unitTypeChoices)}}function ii(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"t-restricted",21),r.Tc(2),r.mc(3,"number"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.UnitAmount),r.Bb(1),r.Vc(" ",r.nc(3,2,null==n?null:n.UnitAmount),"")}}function ri(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.UnitAmount=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.UnitAmount)("ngModelOptions",r.vc(2,Bn))}}function oi(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"t-restricted",21),r.Tc(2),r.mc(3,"number"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.BaseAmount),r.Bb(1),r.Vc(" ",r.nc(3,2,null==n?null:n.BaseAmount),"")}}function ci(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.BaseAmount=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.BaseAmount)("ngModelOptions",r.vc(2,Bn))}}function ai(e,t){if(1&e&&(r.Vb(0,"t-form-group",23),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",24),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(2),r.sc("entity",n)}}function li(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,Dn,2,1,"h2",6),r.Rc(2,Sn,2,7,"t-text-editor",7),r.Rc(3,_n,2,7,"t-text-editor",8),r.Rc(4,On,2,7,"t-text-editor",8),r.Ub(),r.Rc(5,An,4,6,"t-form-group",9),r.Rc(6,jn,4,6,"t-form-group",9),r.Rc(7,Qn,4,6,"t-form-group",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Rc(10,Hn,2,1,"div",11),r.Rc(11,$n,1,3,"t-text-editor",12),r.Ub(),r.Vb(12,"t-form-group",10),r.mc(13,"translate"),r.Rc(14,Gn,2,1,"div",11),r.Rc(15,zn,1,3,"t-text-editor",13),r.Ub(),r.Rc(16,Yn,4,6,"t-form-group",9),r.Rc(17,ei,4,6,"t-form-group",9),r.Vb(18,"t-form-group",10),r.mc(19,"translate"),r.Rc(20,ti,4,4,"div",11),r.Rc(21,ni,1,2,"t-selector",14),r.Ub(),r.Vb(22,"t-form-group",10),r.mc(23,"translate"),r.Rc(24,ii,4,4,"div",11),r.Rc(25,ri,1,3,"t-decimal-editor",13),r.Ub(),r.Vb(26,"t-form-group",10),r.mc(27,"translate"),r.Rc(28,oi,4,4,"div",11),r.Rc(29,ci,1,3,"t-decimal-editor",13),r.Ub(),r.Rc(30,ai,3,4,"t-form-group",15)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,31,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(13,33,"Description")+o.ws.primaryPostfix)("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Description),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(19,35,"Unit_UnitType"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.UnitType),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(23,37,"Unit_UnitAmount"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.UnitAmount),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(27,39,"Unit_BaseAmount"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.BaseAmount),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i)}}function si(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function ui(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var di,bi=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},fi=function(e,t){return[e,t]},mi=((di=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.unitsApi=o.api.unitsApi(o.notifyDestruct$),o.expand="",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e.UnitAmount=1,e.BaseAmount=1,e},o.onActivate=function(e){e&&e.Id&&o.unitsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.onDeactivate=function(e){e&&e.Id&&o.unitsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.showActivate=function(e){return!!e&&!e.IsActive},o.showDeactivate=function(e){return!!e&&e.IsActive},o.canActivateDeactivateItem=function(e){return o.ws.canDo("units","IsActive",e.Id)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.unitsApi=o.api.unitsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"unitTypeLookup",value:function(e){return e?Object(St.a)(this.workspace,this.translate).properties.UnitType.format(e):""}},{key:"unitTypeChoices",get:function(){if(!this._unitTypeChoices){var e=Object(St.a)(this.workspace,this.translate).properties.UnitType;this._unitTypeChoices=e.choices.map((function(t){return{name:function(){return e.format(t)},value:t}}))}return this._unitTypeChoices}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||di)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},di.\u0275cmp=r.Jb({type:di,selectors:[["t-units-details"]],features:[r.yb],decls:10,vars:26,consts:[["collection","Unit",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],["required","",3,"ngModel","choices","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Unit","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,Rn,2,1,"ng-template",null,1,r.Sc),r.Rc(4,li,31,41,"ng-template",null,2,r.Sc),r.Rc(6,si,2,3,"ng-template",null,3,r.Sc),r.Rc(8,ui,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,9,"Units"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.xc(23,fi,r.Ac(11,bi,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(17,bi,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,we.a,ie.u,ie.k,ie.n,Tn.a,En.a,xn,Ie.a],pipes:[G.d,x.g],encapsulation:2}),di),gi=n("Y7zQ"),pi=n("DWXW"),hi=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},vi=function(e,t){return[e,t]},yi=function(e){return{template:e,expression:"CreatedById eq me"}},Ii=function(e){return[e]},Ci=function(e){return{CreatedBy:e}};function wi(e,t){if(1&e&&r.Qb(0,"t-master",8),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(8),c=r.Fc(6),a=r.Fc(10),l=r.Fc(12),s=r.Fc(14);r.sc("definitionId",n.definitionId)("mode",n.mode)("additionalSelect",n.additionalSelect)("showCreateButton",n.showCreate)("filterDefault",n.filter)("masterCrumb",n.masterCrumb)("tileTemplate",i)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",c)("multiselectActions",r.xc(21,vi,r.zc(11,hi,a,n.onActivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.zc(16,hi,l,n.onDeactivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip)))("filterDefinition",r.wc(28,Ci,r.wc(26,Ii,r.wc(24,yi,s))))}}function ki(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",9),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function Mi(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",16),r.Qb(2,"t-image",17),r.Ub(),r.Tc(3," \xa0\xa0\xa0 "),r.Sb()),2&e){var n=r.lc().id,i=r.lc();r.Bb(2),r.sc("src","relations/"+i.c[n].DefinitionId+"/"+i.c[n].Id+"/image")("imageId",i.c[n].ImageId)("size",42)}}function Vi(e,t){if(1&e&&(r.Vb(0,"div",10),r.Rc(1,Mi,4,3,"ng-container",11),r.Vb(2,"div",12),r.Vb(3,"div",13),r.Vb(4,"span",14),r.Tc(5),r.Ub(),r.Ub(),r.Vb(6,"div",15),r.Vb(7,"span"),r.Tc(8),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("ngIf",2===(null==i.c[n].EntityMetadata?null:i.c[n].EntityMetadata.ImageId)&&i.Image_isVisible),r.Bb(4),r.Uc(i.ws.getMultilingualValue("Relation",n,"Name")),r.Bb(3),r.Uc(i.c[n].Code)}}function Ti(e,t){if(1&e&&r.Tc(0),2&e){var n=r.lc();r.Vc(" ",n.summary,"\n")}}function Ei(e,t){if(1&e&&(r.Vb(0,"span",18),r.Qb(1,"t-auto-cell",19),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function Ui(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function xi(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function Ri(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var Di,Bi=((Di=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.router=r,a.route=o,a.translate=c,a.relationsApi=a.api.relationsApi(null,a.notifyDestruct$),a.expand="",a.onActivate=function(e){return a.relationsApi.activate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.onDeactivate=function(e){return a.relationsApi.deactivate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.canActivateDeactivateItem=function(e){return a.ws.canDo(a.view,"IsActive",null)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");e.definitionId!==n&&(e.definitionId=n)}}))}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.relationsApi=this.api.relationsApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"view",get:function(){return"relations/".concat(this.definitionId)}},{key:"c",get:function(){return this.workspace.currentTenant.Relation}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"definition",get:function(){return this.definitionId?this.ws.definitions.Relations[this.definitionId]:null}},{key:"found",get:function(){return!this.definitionId||!!this.definition}},{key:"masterCrumb",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Relations")}},{key:"summary",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Relation")}},{key:"Image_isVisible",get:function(){return!!this.definition.ImageVisibility}}]),n}(_t.a)).\u0275fac=function(e){return new(e||Di)(r.Pb(S.m),r.Pb(Y.a),r.Pb(i.e),r.Pb(i.a),r.Pb(G.e))},Di.\u0275cmp=r.Jb({type:Di,selectors:[["t-relations-master"]],inputs:{definitionId:"definitionId"},features:[r.yb],decls:15,vars:2,consts:[["collection","Relation","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Relation","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1","d-inline-block","t-mw-0"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"border","t-dp-wrapper2"],["icon","camera",3,"src","imageId","size"],[1,"text-truncate"],["collection","Relation",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(r.Rc(0,wi,1,30,"t-master",0),r.Rc(1,ki,1,1,"ng-template",null,1,r.Sc),r.Rc(3,Vi,9,3,"ng-template",null,2,r.Sc),r.Rc(5,Ti,1,1,"ng-template",null,3,r.Sc),r.Rc(7,Ei,2,2,"ng-template",null,4,r.Sc),r.Rc(9,Ui,2,3,"ng-template",null,5,r.Sc),r.Rc(11,xi,2,3,"ng-template",null,6,r.Sc),r.Rc(13,Ri,2,3,"ng-template",null,7,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,Ot.a,dn,he,Ie.a],pipes:[G.d],encapsulation:2}),Di),Si=n("X5Zs"),_i=n("zP0r"),Oi=n("7MUa"),Li=n("BFQD"),Fi=function(){function e(t,n){_classCallCheck(this,e),this.precedence=t,this.associativity=n}return _createClass(e,[{key:"isLeftAssociative",get:function(){return"left"===this.associativity}}]),e}(),Ai=["!=","<>","<=",">=","<",">","=","&&","||","!","(",")",",","+","-","*","/","%","contains","startsw","endsw","descof","not","and","or","gt","ge","lt","le","eq","ne","asc","desc"],Pi={"*":new Fi(2,"left"),"/":new Fi(2,"left"),"%":new Fi(2,"left"),"+":new Fi(3,"left"),"-":new Fi(3,"left"),"=":new Fi(4,"left"),"!=":new Fi(4,"left"),"<>":new Fi(4,"left"),"<=":new Fi(4,"left"),"<":new Fi(4,"left"),">":new Fi(4,"left"),">=":new Fi(4,"left"),eq:new Fi(4,"left"),ne:new Fi(4,"left"),le:new Fi(4,"left"),lt:new Fi(4,"left"),gt:new Fi(4,"left"),ge:new Fi(4,"left"),contains:new Fi(4,"left"),startsw:new Fi(4,"left"),endsw:new Fi(4,"left"),descof:new Fi(4,"left"),"!":new Fi(5,"left"),"&&":new Fi(6,"left"),"||":new Fi(7,"left"),not:new Fi(5,"left"),and:new Fi(6,"left"),or:new Fi(7,"left")};function Ni(e){return Pi[e.toLowerCase()]}function ji(e){switch(e=(e||"").toLowerCase()){case"asc":case"desc":return e;default:return null}}var Wi=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"parseSingle",value:function(t,n){var i=e.parse(t,n);if(i.length>1)throw new Error("Expression cannot contain top level commas.");if(1===i.length)return i[0]}},{key:"parse",value:function(t,n){if(!t||!t.trim())return[];var i=n||{expectDirKeywords:!1,expectPathsOnly:!1},r=e.tokenize(t);return e.parseTokenStream(r,t,!!i.expectDirKeywords,!!i.expectPathsOnly,i.placeholderReplacement)}},{key:"tokenize",value:function(e){var t=[],n=e.split(""),i=!1,r=[],o=0;function c(e){var t=Ai.find((function(t){return n.length-e>=t.length&&Array.from(Array(t.length).keys()).every((function(i){return t[i]===n[e+i].toLowerCase()}))}));if(function(e){switch(e){case"eq":case"ne":case"le":case"lt":case"gt":case"ge":case"contains":case"startsw":case"endsw":case"descof":case"not":case"and":case"or":case"asc":case"desc":return!0;default:return!1}}(t)){var i=e-1,r=i<0||!Hi.properChar(n[i]),o=e+t.length,c=o>=n.length||!Hi.properChar(n[o]);r&&c||(t=null)}if(t)return t=n.slice(e,e+t.length).join("")}for(;o<n.length;)if("'"===n[o]){var a=o+1<n.length&&"'"===n[o+1];r.push(n[o]),o++,i?a?o++:i=!1:i=!0}else{var l=void 0;if(!i&&(l=c(o))){if(r.length>0){var s=r.join("").trim();s&&t.push(s),r=[]}t.push(l.trim()),o+=l.length}else r.push(n[o]),o++}if(i)throw new Error("Uneven number of single quotation marks in ".concat(e,",\nquotation marks in string literals should be escaped by specifying them twice."));if(r.length>0){var u=r.join("").trim();u&&t.push(u)}return t}},{key:"parseTokenStream",value:function(e,t,n,i,r){var o=[],c=[],a=[],l=[];function s(){var e,t=c.pop(),n=t.op;if(t.usedAsUnaryOperator){if(!function(e){switch(e.toLowerCase()){case"-":case"+":case"!":case"not":return!0;default:return!1}}(n))throw new Error("Infix operator '".concat(n,"' is missing its first operand."));if(l.length<1)throw new Error("Unary operator '".concat(n,"' is missing its operand."));var i=l.pop();e=new zi(n,i)}else{if(!function(e){switch(e.toLowerCase()){case"!":case"not":return!1;default:return!0}}(n))throw new Error("Unary Operator '".concat(n,"' is used like an infix operator."));if(l.length<2)throw new Error("Infix operator '".concat(n,"' is missing its second operand."));var r=l.pop(),o=l.pop();e=new Gi(n,o,r)}l.push(e)}function u(){if(a.length>0){var e=a[a.length-1];e.isFunction&&e.arity===e.arguments.length&&e.arity++}}function d(e){if(e.arity>0){if(e.arguments.length!==e.arity-1)throw new Error("Blank function arguments are not allowed, pass null if that was your intention.");if(0===l.length)throw new Error("[Bug] Output stack is empty.");e.arguments.push(l.pop())}}var b,f=!1,m=!1,g=!1;function p(){return null==b||","===b||"("===b||!!Ni(b)}function h(){for(g=!0;c.length>0;){if("("===c[c.length-1].op)throw new Error("Expression contains mismatched brackets: ".concat(t,"."));s()}if(0!==l.length){if(l.length>1)throw new Error("Incorrectly formatted expression: ".concat(t,"."));var e,n=l.pop();(e=ji(b))&&(n.direction=e),o.push(n)}}var v,y=_createForOfIteratorHelper(e);try{var I=function(){var e,o=v.value;if(m=f,f=!1,g=!1,e=Ni(o)){u();var y=p();if(!y)for(var I=function(){if(0===c.length)return!1;var t=c[c.length-1].op,n=Ni(t);return"("!==t&&("("!==t&&!n||n.precedence<e.precedence||n.precedence===e.precedence&&n.isLeftAssociative)};I();)s();f=y&&$i.isValidFunctionName(o),c.push({op:o,usedAsUnaryOperator:y})}else if("("===o)m?Ni(b)||(l.pop(),c.push({op:b,usedAsUnaryOperator:!1})):u(),a.push(new qi(m)),c.push({op:o,usedAsUnaryOperator:!1});else if(")"===o){for(;c.length>0&&"("!==c[c.length-1].op;)s();if(!(c.length>0&&"("===c[c.length-1].op))throw new Error("Expression contains mismatched brackets.");c.pop();var C=a.pop();if(C.isFunction){d(C);var w=c.pop().op,k=new $i(w,C.arguments);if(k.isAggregation&&k.arguments.some((function(e){return e.aggregations().length>0})))throw new Error("The expression ".concat(k.toString()," contains an aggregation within an aggregation."));l.push(k)}else if("("===b)throw new Error("Invalid empty brackets ().")}else if(","===o)if(0===a.length)h();else{if(!a[a.length-1].isFunction)throw new Error("Unexpected comma ',' character. Commas are only used to separate function arguments: Func(arg1, arg2, arg3).");for(;c.length>0&&"("!==c[c.length-1].op;)s();d(a[a.length-1])}else if(ji(o)){if(!n)throw new Error("Unexpected keyword '".concat(o,"' in expression: ").concat(t))}else{var M;u(),f=p()&&$i.isValidFunctionName(o);var V=o.toLowerCase();switch(V){case"$":if(!r)throw new Error("Unrecognized token: ".concat(o));M=r.clone();break;case"null":M=new Yi;break;case"true":case"false":M=new Xi("true"===V);break;case"me":case"today":case"now":M=new $i(V,[]);break;default:var T=Ji.isValidQuote(o);if(void 0!==T){M=new Ji(T);break}var E=Ki.isValidNumber(o);if(void 0!==E){var U=E.value,x=E.decimals;M=new Ki(U,x);break}var R=Hi.isValidColumnAccess(o,i),D=R.pathArray,B=R.propName;if(D){M=new Hi(D,B);break}var S=Zi.isValidParameterName(o);if(S){M=new Zi(S);break}throw new Error("Unrecognized token: ".concat(o))}l.push(M)}if(ji(b)&&!g){var _=b.toLowerCase();throw new Error("Keyword '".concat(_,"' must come after the expression and outside any brackets like this: <exp1> ").concat(_,", <exp2> ").concat(_,"."))}b=o};for(y.s();!(v=y.n()).done;)I()}catch(C){y.e(C)}finally{y.f()}return h(),o}}]),e}(),qi=function e(t){_classCallCheck(this,e),this.isFunction=t,this.arity=0,this.arguments=[]},Qi=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"unaggregatedColumnAccesses",value:function(){var e=[];return this.unaggregatedColumnAccessesInner(e,!1),e}},{key:"columnAccesses",value:function(){var e=[];return this.columnAccessesInner(e),e}},{key:"aggregations",value:function(){var e=[];return this.aggregationsInner(e),e}},{key:"parameters",value:function(){var e=[];return this.parametersInner(e),e}},{key:"isAscending",get:function(){return"asc"===this.direction}},{key:"isDescending",get:function(){return"desc"===this.direction}},{key:"isAggregation",get:function(){if(this instanceof $i)switch(this.nameLower){case"sum":case"count":case"avg":case"max":case"min":return!0;default:return!1}return!1}}]),e}(),Hi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).path=e,r.property=i,r}return _createClass(n,[{key:"toString",value:function(){var e=this.path.join(".")||"",t=this.property||"";return"".concat(e).concat(e&&t?".":"").concat(t)}},{key:"children",value:function(){return[]}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){t||e.push(this)}},{key:"columnAccessesInner",value:function(e){e.push(this)}},{key:"aggregationsInner",value:function(e){}},{key:"parametersInner",value:function(e){}},{key:"clone",value:function(){var e=new n(this.path.slice(),this.property);return e.hasSecondary=this.hasSecondary,e.hasTernary=this.hasTernary,e}}],[{key:"properFirstChar",value:function(e){return!!e&&nr(e[0])}},{key:"properChar",value:function(e){return ir(e)||"_"===e||"."===e}},{key:"properChars",value:function(e){return!!e&&e.split("").every(n.properChar)}},{key:"notReservedKeyword",value:function(e){switch(e.toLowerCase()){case"null":case"true":case"false":case"asc":case"desc":return!1;default:return!0}}},{key:"isValidColumnAccess",value:function(e,t){if(this.properFirstChar(e)&&this.properChars(e)&&this.notReservedKeyword(e)){var n=e.split(".").map((function(e){return e.trim()})).filter((function(e){return!!e}));if(t)return{pathArray:n};var i=n.pop();return{pathArray:n,propName:i}}return{}}}]),n}(Qi),$i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).name=e,r.arguments=i,r.nameLower=e.toLowerCase(),r}return _createClass(n,[{key:"toString",value:function(){return"".concat(this.name,"(").concat(this.arguments.map((function(e){return er(e.toString())})).join(", "),")")}},{key:"children",value:function(){return this.arguments}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){this.isAggregation&&(t=!0);var n,i=_createForOfIteratorHelper(this.arguments);try{for(i.s();!(n=i.n()).done;){n.value.unaggregatedColumnAccessesInner(e,t)}}catch(r){i.e(r)}finally{i.f()}}},{key:"columnAccessesInner",value:function(e){var t,n=_createForOfIteratorHelper(this.arguments);try{for(n.s();!(t=n.n()).done;){t.value.columnAccessesInner(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"aggregationsInner",value:function(e){this.isAggregation&&e.push(this);var t,n=_createForOfIteratorHelper(this.arguments);try{for(n.s();!(t=n.n()).done;){t.value.aggregationsInner(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"parametersInner",value:function(e){var t,n=_createForOfIteratorHelper(this.arguments);try{for(n.s();!(t=n.n()).done;){t.value.parametersInner(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"clone",value:function(){return new n(this.name,this.arguments.map((function(e){return e.clone()})))}},{key:"setName",value:function(e){this.name=e,this.nameLower=e.toLowerCase()}}],[{key:"properFirstChar",value:function(e){return!!e&&nr(e[0])}},{key:"properChars",value:function(e){return!!e&&e.split("").every((function(e){return ir(e)||"_"===e}))}},{key:"notReservedKeyword",value:function(e){switch(e.toLowerCase()){case"null":case"true":case"false":case"asc":case"desc":return!1;default:return!0}}},{key:"isValidFunctionName",value:function(e){return this.properFirstChar(e)&&this.properChars(e)&&this.notReservedKeyword(e)}}]),n}(Qi),Gi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).operator=e,o.left=i,o.right=r,o}return _createClass(n,[{key:"toString",value:function(){return"(".concat(this.left.toString()," ").concat(this.operator," ").concat(this.right.toString(),")")}},{key:"children",value:function(){return[this.left,this.right]}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){this.left.unaggregatedColumnAccessesInner(e,t),this.right.unaggregatedColumnAccessesInner(e,t)}},{key:"columnAccessesInner",value:function(e){this.left.columnAccessesInner(e),this.right.columnAccessesInner(e)}},{key:"aggregationsInner",value:function(e){this.left.aggregationsInner(e),this.right.aggregationsInner(e)}},{key:"parametersInner",value:function(e){this.left.parametersInner(e),this.right.parametersInner(e)}},{key:"clone",value:function(){return new n(this.operator,this.left.clone(),this.right.clone())}}]),n}(Qi),zi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).operator=e,r.operand=i,r}return _createClass(n,[{key:"toString",value:function(){return"(".concat(this.operator," ").concat(this.operand.toString(),")")}},{key:"children",value:function(){return[this.operand]}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){this.operand.unaggregatedColumnAccessesInner(e,t)}},{key:"columnAccessesInner",value:function(e){this.operand.columnAccessesInner(e)}},{key:"aggregationsInner",value:function(e){this.operand.aggregationsInner(e)}},{key:"parametersInner",value:function(e){this.operand.parametersInner(e)}},{key:"clone",value:function(){return new n(this.operator,this.operand.clone())}}]),n}(Qi),Ji=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).value=e,i}return _createClass(n,[{key:"toString",value:function(){return"'".concat(this.value.replace("'","''"),"'")}},{key:"children",value:function(){return[]}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){}},{key:"columnAccessesInner",value:function(e){}},{key:"aggregationsInner",value:function(e){}},{key:"parametersInner",value:function(e){}},{key:"clone",value:function(){return new n(this.value)}}],[{key:"isValidQuote",value:function(e){if(e.length>=2&&e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1)}}]),n}(Qi),Ki=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).value=e,r.decimals=i,r}return _createClass(n,[{key:"toString",value:function(){return this.value.toFixed(this.decimals)}},{key:"children",value:function(){return[]}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){}},{key:"columnAccessesInner",value:function(e){}},{key:"aggregationsInner",value:function(e){}},{key:"parametersInner",value:function(e){}},{key:"clone",value:function(){return new n(this.value,this.decimals)}}],[{key:"isValidNumber",value:function(e){if(tr(e[0])&&tr(e[e.length-1])&&e.split("").every((function(e){return tr(e)||"."===e}))){var t=parseFloat(e),n=e.split(".");return{value:t,decimals:n.length<=1?0:n.pop().length}}}}]),n}(Qi),Yi=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"toString",value:function(){return"null"}},{key:"children",value:function(){return[]}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){}},{key:"columnAccessesInner",value:function(e){}},{key:"aggregationsInner",value:function(e){}},{key:"parametersInner",value:function(e){}},{key:"clone",value:function(){return new n}}]),n}(Qi),Xi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).value=e,i}return _createClass(n,[{key:"toString",value:function(){return(!!this.value).toString()}},{key:"children",value:function(){return[]}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){}},{key:"columnAccessesInner",value:function(e){}},{key:"aggregationsInner",value:function(e){}},{key:"parametersInner",value:function(e){}},{key:"clone",value:function(){return new n(this.value)}}]),n}(Qi),Zi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).key=e,i.keyLower=e.toLowerCase(),i}return _createClass(n,[{key:"toString",value:function(){return"@".concat(this.key)}},{key:"children",value:function(){return[]}},{key:"unaggregatedColumnAccessesInner",value:function(e,t){}},{key:"columnAccessesInner",value:function(e){}},{key:"aggregationsInner",value:function(e){}},{key:"parametersInner",value:function(e){e.push(this)}},{key:"clone",value:function(){return new n(this.key)}}],[{key:"properFirstChar",value:function(e){return!!e&&"@"===e[0]}},{key:"properChars",value:function(e){return!!e&&e.split("").slice(1).every((function(e){return ir(e)||"_"===e}))}},{key:"isValidParameterName",value:function(e){if(this.properFirstChar(e)&&this.properChars(e))return e.slice(1)}}]),n}(Qi);function er(e){if(!e||e.length<2)return e;for(var t=0,n=0;n<e.length-1;n++)if("("===e[n]&&t++,")"===e[n]&&t--,0===t)return e;return e.endsWith(")")&&(e=er(e.slice(1,-1))),e}function tr(e){return e>="0"&&e<="9"}function nr(e){return e.toLowerCase()!==e.toUpperCase()}function ir(e){return nr(e)||tr(e)}var rr=n("CpXl"),or=function(e){return function(){return e.instant("Expression")}};function cr(e){return e.hasOwnProperty("foreignKeyName")}function ar(e){switch(e){case"boolean":return 1;case"hierarchyid":return 2;case"geography":return 4;case"datetimeoffset":return 8;case"datetime":return 16;case"date":return 32;case"numeric":return 64;case"bit":return 128;case"string":return 256;case"null":return 512;case"entity":return 1024;default:throw new Error("Precedence: Unknown datatype ".concat(e))}}function lr(e,t,n,i){if("numeric"===e.datatype&&"numeric"===t.datatype){if("percent"===e.control&&"percent"===t.control)return{datatype:"numeric",control:"percent",minDecimalPlaces:Math.max(e.minDecimalPlaces,t.minDecimalPlaces),maxDecimalPlaces:Math.max(e.maxDecimalPlaces,t.maxDecimalPlaces),label:n,labelForParameter:i,isRightAligned:e.isRightAligned||t.isRightAligned,noSeparator:e.noSeparator&&t.noSeparator};var r="number"===e.control?e.maxDecimalPlaces:"percent"===e.control?e.maxDecimalPlaces-2:0,o="number"===t.control?t.maxDecimalPlaces:"percent"===t.control?t.maxDecimalPlaces-2:0,c=("number"===e.control||"percent"===e.control)&&e.isRightAligned,a=("number"===t.control||"percent"===t.control)&&t.isRightAligned,l=("number"===e.control||"percent"===e.control)&&e.noSeparator,s=("number"===t.control||"percent"===t.control)&&t.noSeparator;return{datatype:"numeric",control:"number",minDecimalPlaces:Math.max("number"===e.control?e.minDecimalPlaces:"percent"===e.control?e.minDecimalPlaces-2:0,"number"===t.control?t.minDecimalPlaces:"percent"===t.control?t.minDecimalPlaces-2:0),maxDecimalPlaces:Math.max(r,o),label:n,labelForParameter:i,isRightAligned:c||a,noSeparator:l&&s}}throw new Error("[Bug] Merging non numeric datatypes ".concat(e," and ").concat(t,"."))}function sr(e,t,n,i,r){switch(e.control){case"unsupported":return Object.assign(Object.assign({datatype:"boolean"},e),{label:t,labelForParameter:r});case"datetime":return Object.assign(Object.assign({datatype:"datetime"},e),{label:t,labelForParameter:r});case"date":return Object.assign(Object.assign({datatype:"date"},e),{label:t,labelForParameter:r});case"number":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:r});case"check":return Object.assign(Object.assign({datatype:"bit"},e),{label:t,labelForParameter:r});case"text":return Object.assign(Object.assign({datatype:"string"},e),{label:t,labelForParameter:r});case"serial":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:r});case"choice":return Object.assign(Object.assign({datatype:"string"},e),{label:t,labelForParameter:r});case"percent":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:r});case"null":return Object.assign(Object.assign({datatype:"null"},e),{label:t,labelForParameter:r});default:var o=Si.h[e.control](n,i,e.definitionId),c=o.properties.Id.datatype;if("numeric"===c)return Object.assign(Object.assign({datatype:"numeric"},e),{foreignKeyName:null,label:t,labelForParameter:r});if("string"===c)return Object.assign(Object.assign({datatype:"string"},e),{foreignKeyName:null,label:t,labelForParameter:r});throw new Error("[Bug] type ".concat(o.titleSingular()," has an Id that is neither string nor numeric"))}}function ur(e,t,n,i,r,o){switch(e.control){case"unsupported":switch(t){case"boolean":case"hierarchyid":case"geography":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o})}break;case"datetime":switch(t){case"datetimeoffset":case"datetime":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o})}break;case"date":switch(t){case"datetimeoffset":case"datetime":case"date":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o})}break;case"number":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"check":if("bit"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"text":if("string"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"serial":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"choice":if("string"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});if("numeric"===t&&e.choices.every((function(e){return!isNaN(+e)})))return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"percent":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;case"null":if("null"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:o});break;default:var c=Si.h[e.control](i,r,e.definitionId).properties.Id.datatype;if("numeric"===t&&"numeric"===c)return Object.assign(Object.assign({datatype:t},e),{foreignKeyName:null,label:n,labelForParameter:o});if("string"===t&&"string"===c)return Object.assign(Object.assign({datatype:t},e),{foreignKeyName:null,label:n,labelForParameter:o})}}function dr(e,t,n){switch(e){case"string":return{datatype:e,control:"text",label:t,labelForParameter:n};case"numeric":return{datatype:e,control:"number",label:t,labelForParameter:n,minDecimalPlaces:0,maxDecimalPlaces:4,isRightAligned:!1,noSeparator:!1};case"bit":return{datatype:e,control:"check",label:t,labelForParameter:n};case"date":return{datatype:e,control:"date",label:t,labelForParameter:n,granularity:Li.a.days};case"datetime":case"datetimeoffset":return{datatype:e,control:"datetime",label:t,labelForParameter:n,granularity:Li.b.minutes};case"geography":case"hierarchyid":return{datatype:e,control:"unsupported",label:t,labelForParameter:n}}}function br(e,t,n,i){if(e.datatype!==t.datatype)throw new Error("[Bug] Merging two different datatypes ".concat(e.datatype," and ").concat(t.datatype,"."));switch(e.datatype){case"string":return function(e,t,n,i){if("string"===e.datatype&&"string"===t.datatype){if(cr(e)&&cr(t)){if(e.definitionId===t.definitionId&&e.control===t.control){var r=e.filter;return r?t.filter&&(r="(".concat(r,") and (").concat(t.filter,")")):r=t.filter,{datatype:"string",control:e.control,definitionId:e.definitionId,filter:r,label:n,labelForParameter:i,foreignKeyName:e.foreignKeyName}}}else if("choice"===e.control&&"choice"===t.control){var o,c={},a=_createForOfIteratorHelper(e.choices);try{for(a.s();!(o=a.n()).done;){c[o.value]=!0}}catch(g){a.e(g)}finally{a.f()}var l,s=_createForOfIteratorHelper(t.choices);try{for(s.s();!(l=s.n()).done;){c[l.value]=!0}}catch(g){s.e(g)}finally{s.f()}var u=Object.keys(c),d=e.format,b=t.format,f=e.color,m=t.color;return{datatype:"string",control:"choice",format:function(e){return d(e)||b(e)},color:function(e){return(f?f(e):null)||(m?m(e):null)},choices:u,label:n,labelForParameter:i}}return{datatype:"string",control:"text",label:n,labelForParameter:i}}}(e,t,n,i);case"numeric":return function(e,t,n,i){if("numeric"===e.datatype&&"numeric"===t.datatype){if(cr(e)&&cr(t)){var r;if(e.definitionId===t.definitionId&&e.control===t.control)return e.filter===t.filter?r=e.filter:(r=e.filter)?t.filter&&(r="(".concat(r,") and (").concat(t.filter,")")):r=t.filter,{datatype:"numeric",control:e.control,definitionId:e.definitionId,filter:r,label:n,labelForParameter:i,foreignKeyName:e.foreignKeyName}}else{if("choice"===e.control&&"choice"===t.control){if(e.choices.length===t.choices.length){for(var o=!0,c=0;c<e.choices.length;c++)if(e.choices[c]!==t.choices[c]){o=!1;break}if(o)return Object.assign({},e)}var a,l={},s=_createForOfIteratorHelper(e.choices);try{for(s.s();!(a=s.n()).done;){l[a.value]=!0}}catch(h){s.e(h)}finally{s.f()}var u,d=_createForOfIteratorHelper(t.choices);try{for(d.s();!(u=d.n()).done;){l[u.value]=!0}}catch(h){d.e(h)}finally{d.f()}var b=Object.keys(l).map((function(e){return+e})),f=e.format,m=t.format,g=e.color,p=t.color;return{datatype:"numeric",control:"choice",format:function(e){return f(e)||m(e)},color:function(e){return(g?g(e):null)||(p?p(e):null)},choices:b,label:n,labelForParameter:i}}if("serial"===e.control&&"serial"===t.control&&e.prefix===t.prefix&&e.codeWidth===t.codeWidth)return{datatype:"numeric",control:"serial",prefix:e.prefix,codeWidth:e.codeWidth,label:n,labelForParameter:i}}return lr(e,t,n,i)}throw new Error("[Bug] Merging non numeric datatypes ".concat(e," and ").concat(t,"."))}(e,t,n,i);case"date":if("date"===t.datatype){var r=e.calendar===t.calendar?e.calendar:void 0;return{datatype:"date",control:"date",calendar:r,granularity:r?Math.max(e.granularity,t.granularity):Li.a.days,label:n,labelForParameter:i}}break;case"datetime":if("datetime"===t.datatype){var o=e.calendar===t.calendar?e.calendar:void 0,c=o?Math.max(e.granularity,t.granularity):Li.b.minutes;return{datatype:"datetime",control:"date"===e.control&&"date"===t.control?"date":"datetime",calendar:o,granularity:c,label:n,labelForParameter:i}}break;case"datetimeoffset":if("datetimeoffset"===t.datatype){var a=e.calendar===t.calendar?e.calendar:void 0,l=a?Math.max(e.granularity,t.granularity):Li.b.minutes;return{datatype:"datetimeoffset",control:"date"===e.control&&"date"===t.control?"date":"datetime",calendar:a,granularity:l,label:n,labelForParameter:i}}break;case"bit":return{datatype:"bit",control:"check",label:n,labelForParameter:i};case"geography":case"hierarchyid":case"boolean":return{datatype:e.datatype,control:"unsupported",label:n,labelForParameter:i};case"null":return{datatype:"null",control:"null",label:n,labelForParameter:i}}throw new Error("[Bug] Merging unhandled datatype ".concat(e.datatype,"."))}function fr(e,t,n){if(e.datatype===t)return e;var i;if("null"===e.datatype)return"boolean"!==t&&(i=n?Object.assign({},n):dr(t,e.label,e.labelForParameter)),i;if("bit"===e.datatype){if("numeric"===t)return{datatype:t,control:"number",minDecimalPlaces:0,maxDecimalPlaces:0,label:e.label,labelForParameter:e.labelForParameter,isRightAligned:!0,noSeparator:!1};if("boolean"===t)return{datatype:t,control:"unsupported",label:e.label,labelForParameter:e.labelForParameter}}}function mr(e,t){var n;if(t<e.arguments.length){var i=e.arguments[t];if(!(i instanceof Ji))throw new Error("Function '".concat(e.name,"': The ").concat(1===t?"second ":2===t?"third ":"","argument must be a simple quote like this: 'UQ'."));if(n=i.value.toUpperCase(),Li.c.indexOf(n)<0)throw new Error("Function '".concat(e.name,"': The ").concat(1===t?"second ":2===t?"third ":"","argument ").concat(i," must be one of the supported calendars: '").concat(Li.c.join("', '"),"'."))}return n}var gr=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"datePartDesc",value:function(e,t,n){return{datatype:"numeric",control:"number",label:e,labelForParameter:n,minDecimalPlaces:0,maxDecimalPlaces:0,isRightAligned:!1,noSeparator:!0}}},{key:"quarterDesc",value:function(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[1,2,3,4],format:function(e){return e?t.instant("ShortQuarter".concat(e)):""}}}},{key:"monthDesc",value:function(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[1,2,3,4,5,6,7,8,9,10,11,12],format:function(e){return e?t.instant("ShortMonth".concat(e)):""}}}},{key:"weekdayDesc",value:function(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[2,3,4,5,6,7,1],format:function(e){return e?t.instant("ShortDay".concat(1===e?7:e-1)):""}}}},{key:"needsQuotes",value:function(e){switch(e){case"string":case"date":case"datetime":case"datetimeoffset":return!0;default:return!1}}},{key:"stringify",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4?arguments[4]:void 0;return t?function t(c){if(c instanceof Zi){var a=i[c.keyLower],l=a.desc,s=a.datatype,u=a.isRequired,d=a.defaultExp,b=n[c.keyLower];if(!l)throw new Error("[Bug] The descriptor for parameter @".concat(c.key," was not supplied."));if(Object(W.n)(b))return e.needsQuotes(s)?"'".concat((b+"").replace(/\'/g,"''"),"'"):b+"";if(d)return d.toString();if(u)throw new Error("Required parameter @".concat(c.key," was not supplied."));return null}if(c instanceof Hi){var f=c.toString();return 2===r&&c.hasSecondary?f+="2":3===r&&c.hasTernary&&(f+="3"),o?"".concat(o,".").concat(f):f}if(c instanceof $i){var m=c.arguments.map((function(e){return er(t(e))}));return m.some((function(e){return null===e}))?null:"".concat(c.nameLower,"(").concat(m.join(", "),")")}if(!(c instanceof Gi)){if(c instanceof zi){var g=t(c.operand);return null===g?null:"(".concat(c.operator.toLowerCase()," ").concat(g,")")}return c.toString()}var p=t(c.left),h=t(c.right);switch(c.operator.toLowerCase()){case"and":case"or":case"&&":case"||":return null===p?h:null===h?p:"(".concat(p," ").concat(c.operator.toLowerCase()," ").concat(h,")");default:return null===p||null===h?null:"(".concat(p," ").concat(c.operator.toLowerCase()," ").concat(h,")")}}(t):null}},{key:"canShowAsTree",value:function(e,t,n){return!!e&&"entity"===e.datatype&&!!Si.h[e.control](t,n,e.definitionId).properties.Parent}},{key:"getReportInfos",value:function(t,n,i){var r=t.Collection,o=t.DefinitionId;if(!r)throw new Error("The collection was not specified");var c,a=n.currentTenant,l={},s={},u={},d={},b=_createForOfIteratorHelper(t.Parameters||[]);try{for(b.s();!(c=b.n()).done;){var f=c.value,m=f.Key.toLowerCase();f.Control&&(u[m]=Object(W.h)(n.currentTenant,f.Control,f.ControlOptions));var g=Wi.parseSingle(f.DefaultExpression);if(g){var p=g.aggregations(),h=g.columnAccesses(),v=g.parameters();if(p.length>0)throw new Error("Parameter default Expression cannot contain aggregation functions like '".concat(p[0].name,"'."));if(h.length>0)throw new Error("Parameter default Expression cannot contain column access literals like '".concat(h[0],"'."));if(v.length>0)throw new Error("Parameter default Expression cannot contain parameters like '".concat(v[0],"'."))}d[m]=g}}catch($e){b.e($e)}finally{b.f()}var y,I=Wi.parseSingle(t.Filter);if(I){var C=I.aggregations();if(C.length>0)throw new Error("Filter: Expression cannot contain aggregation functions like '".concat(C[0].name,"'."))}if("Summary"===t.Type&&(y=Wi.parseSingle(t.Having))){var w=y.unaggregatedColumnAccesses();if(w.length>0)throw new Error("Having: Expression cannot contain unaggregated column accesses like '".concat(w[0],"'."))}if("Details"===t.Type||t.IsCustomDrilldown){var k,M=_createForOfIteratorHelper(Wi.parse(t.OrderBy,{expectDirKeywords:!0}));try{for(M.s();!(k=M.n()).done;){var V=k.value,T=V.aggregations(),E=V.parameters(),U=V.columnAccesses();if(T.length>0)throw new Error("Order By: Expression cannot contain aggregation functions like '".concat(T[0].name,"'."));if(E.length>0)throw new Error("Order By: Expression cannot contain parameters like '".concat(E[0],"'."));if(0===U.length)throw new Error("Order By: Expression atom cannot be a constant like '".concat(V,"'."));var x=e.nativeDesc(V,u,l,r,o,n,i);switch(x.datatype){case"boolean":case"entity":throw new Error("Order By: Expression cannot be of type ".concat(x.datatype,"."))}}}catch($e){M.e($e)}finally{M.f()}}var R=function(t,c){var s,d,b,f,m,g,p=Wi.parseSingle(t.KeyExpression);if(!p)throw new Error("Dimension key Expression cannot be empty.");var h=p.aggregations(),v=p.parameters(),y=p.columnAccesses();if(h.length>0)throw new Error("Dimension key Expression cannot contain aggregation functions like '".concat(h[0].name,"'."));if(v.length>0)throw new Error("Dimension key Expression cannot contain parameters like '".concat(v[0],"'."));if(0===y.length)throw new Error("Dimension key Expression must contain at least one column access.");switch((s=e.nativeDesc(p,u,l,r,o,n,i)).datatype){case"boolean":case"hierarchyid":case"geography":throw new Error("Dimension key Expression cannot be of type ".concat(s.datatype,"."));case"entity":d=Si.h[s.control](n,i,s.definitionId)}var I=[];if("entity"===s.datatype){if(m=Wi.parseSingle(t.DisplayExpression)){var C=m.aggregations(),w=m.parameters();if(C.length>0)throw new Error("Dimension display Expression cannot contain aggregation functions like '".concat(C[0].name,"'."));if(w.length>0)throw new Error("Dimension display Expression cannot contain parameters like '".concat(w[0],"'."));switch((g=e.nativeDesc(m,u,l,s.control,s.definitionId,n,i)).datatype){case"boolean":case"entity":case"hierarchyid":case"geography":throw new Error("Dimension display Expression ".concat(m," cannot be of type ").concat(g.datatype,"."))}}var k,M=_createForOfIteratorHelper(t.Attributes||[]);try{var V=function(){var t=k.value,r=t.Localize,o=Wi.parseSingle(t.Expression);if(!o)throw new Error("Dimension attribute Expression cannot be empty.");var c=o.aggregations(),d=o.parameters();if(c.length>0)throw new Error("Dimension attribute expression cannot contain aggregation functions like '".concat(c[0].name,"'."));if(d.length>0)throw new Error("Dimension attribute expression cannot contain parameters like '".concat(d[0],"'."));var f,m=o.toString(),g=e.nativeDesc(o,u,l,s.control,s.definitionId,n,i);switch(g.datatype){case"boolean":case"hierarchyid":case"geography":throw new Error("Dimension attribute Expression ".concat(o," cannot be of type ").concat(g.datatype,"."));case"entity":f=Si.h[g.control](n,i,g.definitionId)}var p=!!t.OrderDirection;p&&(b=t.OrderDirection),I.push({exp:o,expToString:m,localize:r,desc:g,entityDesc:f,label:t.Label?function(){return a.localize(t.Label,t.Label2,t.Label3)}:g.label,isOrdered:p})};for(M.s();!(k=M.n()).done;)V()}catch($e){M.e($e)}finally{M.f()}}else if((f=t.Control?Object(W.h)(n.currentTenant,t.Control,t.ControlOptions):null)&&!ur(f,s.datatype,(function(){return""}),n,i))throw new Error("Dimension key expression ".concat(p," (").concat(s.datatype,") is incompatible with the selected control."));var T=t.Localize,E=t.Label?function(){return a.localize(t.Label,t.Label2,t.Label3)}:s.label,U=!!t.OrderDirection;U&&(b=t.OrderDirection);var x=t.AutoExpandLevel,R=t.ShowAsTree&&e.canShowAsTree(s,n,i);c.push({keyExp:p,dispExp:m,localize:T,keyDesc:s,desc:f||g||s,entityDesc:d,label:E,orderDir:b,isOrdered:U,attributes:I,autoExpandLevel:x,showAsTree:R})},D=[],B=[];if("Summary"===t.Type){var S,_=_createForOfIteratorHelper(t.Rows);try{for(_.s();!(S=_.n()).done;){R(S.value,D)}}catch($e){_.e($e)}finally{_.f()}var O,L=_createForOfIteratorHelper(t.Columns);try{for(L.s();!(O=L.n()).done;){R(O.value,B)}}catch($e){L.e($e)}finally{L.f()}}var F=[];if("Summary"===t.Type){var A,P=_createForOfIteratorHelper(t.Measures);try{var N=function(){var t=A.value,c=Wi.parseSingle(t.Expression);if(!c)throw new Error("Measure expression cannot be empty.");var a=c.unaggregatedColumnAccesses();if(a.length>0)throw new Error("Measure expression cannot contain unaggregated column accesses like '".concat(a[0],"'."));function s(t,a){var s=Wi.parseSingle(t,{placeholderReplacement:c});if(s){var d=s.unaggregatedColumnAccesses();if(d.length>0)throw new Error("Measure ".concat(a," expression cannot contain unaggregated column accesses like '").concat(d[0],"'."));if(e.tryBooleanDesc(s,u,l,r,o,n,i))return s;throw new Error("Measure ".concat(a," expression ").concat(s," could not be interpreted as a boolean."))}}var d=t.Control?Object(W.h)(n.currentTenant,t.Control,t.ControlOptions):null;F.push({measure:t,mainExp:c,visualDesc:d,orderDir:t.OrderDirection,success:s(t.SuccessWhen,"Success When"),warning:s(t.WarningWhen,"Warning When"),danger:s(t.DangerWhen,"Danger When")})};for(P.s();!(A=P.n()).done;)N()}catch($e){P.e($e)}finally{P.f()}}var j=[];if("Details"===t.Type||t.IsCustomDrilldown){var q,Q=_createForOfIteratorHelper(t.Select);try{for(Q.s();!(q=Q.n()).done;){var H=q.value,$=H.Localize,G=Wi.parseSingle(H.Expression);if(!G)throw new Error("Select expression cannot be empty.");var z=G.aggregations(),J=G.parameters();if(z.length>0)throw new Error("Select expression cannot contain aggregation functions like '".concat(z[0].name,"'."));if("Summary"===t.Type&&t.IsCustomDrilldown&&J.length>0)throw new Error("Expression cannot contain parameters like '".concat(J[0],"'."));var K=H.Control?Object(W.h)(n.currentTenant,H.Control,H.ControlOptions):null;j.push({exp:G,visualDesc:K,localize:$,select:H})}}catch($e){Q.e($e)}finally{Q.f()}}for(var Y=[],X=[];;){if(Y=[],X=[],I&&!e.tryBooleanDesc(I,u,l,r,o,n,i))throw new Error("Filter expression could not be interpreted as a boolean.");if(y&&!e.tryBooleanDesc(y,u,l,r,o,n,i))throw new Error("Having expression could not be interpreted as a boolean.");var Z,ee=_createForOfIteratorHelper(F);try{var te=function(){var t=Z.value,c=t.measure,s=t.mainExp,d=t.visualDesc,b=t.orderDir,f=t.success,m=t.warning,g=t.danger,p=e.nativeDesc(s,u,l,r,o,n,i);switch(p.datatype){case"boolean":case"entity":case"hierarchyid":case"geography":throw new Error("Measure expression ".concat(s," cannot be of type ").concat(p.datatype,"."))}function h(t,c){if(t&&!e.tryBooleanDesc(t,u,l,r,o,n,i))throw new Error("Measure ".concat(c," expression ").concat(t," could not be interpreted as a boolean."))}if(h(f,"Success When"),h(m,"Warning When"),h(g,"Danger When"),d&&!ur(d,p.datatype,(function(){return""}),n,i))throw new Error("Measure expression ".concat(s," (").concat(p.datatype,") is incompatible with the selected control."));var v=!!b;v&&D.forEach((function(e){return e.orderDir=b})),Y.push({exp:s,desc:d||p,label:c.Label?function(){return a.localize(c.Label,c.Label2,c.Label3)}:p.label,isNumeric:Object(Si.f)(p),isOrdered:v,success:f,warning:m,danger:g})};for(ee.s();!(Z=ee.n()).done;)te()}catch($e){ee.e($e)}finally{ee.f()}var ne,ie=_createForOfIteratorHelper(j);try{var re=function(){var t=ne.value,c=t.exp,s=t.visualDesc,d=t.localize,b=t.select,f=c.toString(),m=e.nativeDesc(c,u,l,r,o,n,i),g=void 0;switch(m.datatype){case"boolean":case"hierarchyid":case"geography":throw new Error("Select expression ".concat(c," cannot be of type ").concat(m.datatype,"."));case"entity":g=Si.h[m.control](n,i,m.definitionId)}if(s&&!ur(s,m.datatype,(function(){return""}),n,i))throw new Error("Select expression ".concat(c," (").concat(m.datatype,") is incompatible with the selected control."));X.push({exp:c,expToString:f,localize:d,desc:s||m,entityDesc:g,label:b.Label?function(){return a.localize(b.Label,b.Label2,b.Label3)}:m.label})};for(ie.s();!(ne=ie.n()).done;)re()}catch($e){ie.e($e)}finally{ie.f()}for(var oe=!1,ce=0,ae=Object.keys(l);ce<ae.length;ce++){var le=ae[ce],se=l[le],ue=s[le];if(!ue||ue.datatype!==se.datatype){oe=!0;break}}if(!oe)break;for(var de=0,be=Object.keys(l);de<be.length;de++){var fe=be[de];s[fe]=l[fe]}}var me=[],ge=[];I&&I.parametersInner(me),y&&y.parametersInner(me);for(var pe=0,he=Y;pe<he.length;pe++){var ve=he[pe],ye=ve.exp,Ie=ve.success,Ce=ve.warning,we=ve.danger;ye.parametersInner(me),ye.parametersInner(ge),Ie&&(Ie.parametersInner(me),Ie.parametersInner(ge)),Ce&&(Ce.parametersInner(me),Ce.parametersInner(ge)),we&&(we.parametersInner(me),we.parametersInner(ge))}for(var ke=0,Me=X;ke<Me.length;ke++){var Ve=Me[ke].exp;Ve.parametersInner(me),Ve.parametersInner(ge)}for(var Te={},Ee=[],Ue=0,xe=me;Ue<xe.length;Ue++){var Re=xe[Ue];Te[Re.keyLower]||(Te[Re.keyLower]=Re.key,Ee.push(Re.keyLower))}for(var De={},Be=0,Se=ge;Be<Se.length;Be++){De[Se[Be].keyLower]=!0}for(var _e={},Oe=0,Le=Ee;Oe<Le.length;Oe++){var Fe=Le[Oe],Ae=l[Fe];_e[Fe]={key:Te[Fe],keyLower:Fe,desc:Ae,datatype:Ae.datatype,label:Ae.label,isRequired:!!De[Fe]}}var Pe,Ne=[],je=_createForOfIteratorHelper(t.Parameters||[]);try{var We=function(){var t=Pe.value,c=t.Key.toLowerCase();if("None"===t.Visibility)delete _e[c];else{var l=_e[c];if(l){var s,u="Required"===t.Visibility,b=l.isRequired;if(!u)if(s=d[c]){if(!e.tryDesc(s,void 0,void 0,l.datatype,r,o,n,i))throw new Error("Parameter @".concat(t.Key,": Default Expression ").concat(s," could not be interpreted as a ").concat(l.datatype));l.defaultExp=s}else if(b)throw new Error("Parameter @".concat(t.Key," is used in a measure or a select expression making it required. Either specify its Default Expression or set its Visibility to Required."));l.isRequired=u,t.Label&&(l.label=function(){return a.localize(t.Label,t.Label2,t.Label3)}),Ne.push(l),delete _e[c]}}};for(je.s();!(Pe=je.n()).done;)We()}catch($e){je.e($e)}finally{je.f()}for(var qe=0,Qe=Object.keys(_e);qe<Qe.length;qe++){var He=Qe[qe];Ne.push(_e[He])}return{rows:D,columns:B,measures:Y,select:X,filter:I,having:y,parameters:Ne}}},{key:"nativeDesc",value:function(t,n,i,r,o,c,a){return e.tryDesc(t,n,i,null,r,o,c,a)}},{key:"tryBooleanDesc",value:function(t,n,i,r,o,c,a){return e.tryDesc(t,n,i,"boolean",r,o,c,a)}},{key:"tryDesc",value:function(t,n,i,r,o,c,a,l){function s(e,t){var r,o;if(function(e){return!!e&&!!e.datatype}(t)?(r=t,o=t.datatype):(r=null,o=t),e instanceof $i){var c=e.nameLower;switch(c){case"min":case"max":var g=s(d(e),t);if(g){var p=Object.assign({},g),h=p.label;return p.label=function(){return l.instant("DefaultAggregationMeasure",{0:l.instant("Aggregation_"+c),1:h()})},p}return;case"adddays":case"addmonths":case"addyears":if("date"===o||"datetime"===o||"datetimeoffset"===o){var v=s(m(e),t);return v?Object.assign(Object.assign({},v),{label:or(l)}):void 0}return;case"if":var y=b(e),I=y.arg2,C=y.arg3,w=s(I,t),k=s(C,t);return w&&k?br(w,k,or(l)):void 0;case"isnull":var M=f(e),V=M.arg1,T=M.arg2,E=s(V,t),U=s(T,t);return E&&U?br(E,U,or(l)):void 0;case"today":if(e.arguments.length>0)throw new Error("Function '".concat(e.name,"' does not accept any arguments."));switch(o){case"date":case"datetime":return{datatype:o,control:"date",label:function(){return l.instant("Today")},granularity:Li.a.days};default:return}}}else if(e instanceof Gi);else if(e instanceof Ji)switch(o){case"date":case"datetime":case"datetimeoffset":if(isNaN(Date.parse(e.value)))return;if(r)return r;var x=or(l);return"date"===o?{datatype:o,control:"date",label:x,granularity:Li.a.days}:{datatype:o,control:"datetime",label:x,granularity:Li.b.minutes}}else if(e instanceof Zi){var R,D,B=n[e.keyLower],S=r&&r.labelForParameter?r.labelForParameter:function(){return e.key};if(B?(R=ur(B,o,S,a,l))?D=R:D=fr(R=sr(B,S,a,l),o,r):r?D=R=Object.assign(Object.assign({},r),{label:S}):"boolean"===o?(R={datatype:"bit",control:"check",label:S},D={datatype:o,control:"unsupported",label:S}):D=R=dr(o,S),D){var _=i[e.keyLower];return _?ar(_.datatype)>ar(R.datatype)?(i[e.keyLower]=R,D):_.datatype===R.datatype?(i[e.keyLower]=br(_,R,R.label),D):void 0:(i[e.keyLower]=R,D)}return}return fr(u(e,r?r.labelForParameter:void 0),o,r)}function u(t,r){if(t instanceof Hi){var g=Object(Si.b)(t.path,o,c,a,l),p=Object(Si.d)(g,t.property);if(p){var h=g.properties[t.property],v=h?h.datatype:"numeric";return Object.assign(Object.assign({},p),{datatype:v,label:h?h.label:function(){return"".concat(p.label()," (").concat(l.instant("Id"),")")},labelForParameter:p.label})}var y=g.properties[t.property];if(!y)throw new Error("Property '".concat(t.property,"' does not exist on type ").concat(g.titleSingular(),"."));if("Id"===t.property&&("numeric"===y.datatype||"string"===y.datatype)){if(0===t.path.length)return{datatype:y.datatype,control:o,definitionId:c,foreignKeyName:null,label:y.label,labelForParameter:Si.h[o](a,l,c).titleSingular};var I=Object(Si.b)(t.path.slice(0,-1),o,c,a,l).properties[t.path[t.path.length-1]];return Object.assign(Object.assign({},I),{datatype:y.datatype,label:y.label,labelForParameter:I.label})}if("text"===y.control){var C=a.currentTenant.settings;if(C.SecondaryLanguageId){var w=g.properties[t.property+"2"];w&&"text"===w.control&&(t.hasSecondary=!0)}if(C.TernaryLanguageId){var k=g.properties[t.property+"3"];k&&"text"===k.control&&(t.hasTernary=!0)}}return y.labelForParameter=y.label,y}if(t instanceof $i){var M=t.nameLower;switch(M){case"count":case"sum":case"avg":case"min":case"max":var V,T=d(t);if("count"===M||"min"===M||"max"===M){if("boolean"===(V=u(T)).datatype||"entity"===V.datatype)throw new Error("Function '".concat(t.name,"': The first argument ").concat(T," cannot have type ").concat(V.datatype,"."));V="count"===M?{datatype:"numeric",control:"number",maxDecimalPlaces:0,minDecimalPlaces:0,isRightAligned:!0,label:V.label,labelForParameter:V.labelForParameter,noSeparator:!1}:Object.assign({},V)}else{if(!(V=s(T,"numeric")))throw new Error("Function '".concat(t.name,"': The first argument ").concat(T," could not be interpreted as a numeric."));V=lr(V,V,V.label,V.labelForParameter)}var E,U=V.label,x=V.labelForParameter;return x&&(E=function(){return l.instant("DefaultAggregationMeasure",{0:l.instant("Aggregation_"+M),1:x()})}),V.label=function(){return l.instant("DefaultAggregationMeasure",{0:l.instant("Aggregation_"+M),1:U()})},V.labelForParameter=E,V;case"year":case"quarter":case"month":case"day":if(t.arguments.length<1||t.arguments.length>2)throw new Error("No overload for function '".concat(t.name,"' accepts ").concat(t.arguments.length," arguments."));var R=M,D=t.arguments[0],B=s(D,"date")||s(D,"datetime")||s(D,"datetimeoffset");if(!B)throw new Error("Function '".concat(t.name,"': The first argument ").concat(D," could not be interpreted as a date, datetime or datetimeoffset."));var S=mr(t,1)||"GC",_=function(){return"".concat(B.label()," (").concat(l.instant("DatePart_"+R),")")},O=B.labelForParameter?function(){return"".concat(B.labelForParameter()," (").concat(l.instant("DatePart_"+R),")")}:void 0;switch(R){case"year":case"day":return e.datePartDesc(_,l,O);case"quarter":return e.quarterDesc(_,l,O);case"month":if("GC"===S)return e.monthDesc(_,l,O);if("UQ"===S)return{datatype:"numeric",control:"choice",label:_,choices:[1,2,3,4,5,6,7,8,9,10,11,12],format:function(e){return e?l.instant("FullMonthUq".concat(e)):""},labelForParameter:O};if("ET"===S)return{datatype:"numeric",control:"choice",label:_,choices:[1,2,3,4,5,6,7,8,9,10,11,12,13],format:function(e){return e?l.instant("FullMonthEt".concat(e)):""},labelForParameter:O};var L="Unknown calendar ".concat(S);throw console.error(L),new Error(L);default:throw new Error("Never")}case"weekday":case"hour":case"minute":case"second":if(1!==t.arguments.length)throw new Error("Function '".concat(t.name,"' accepts exactly ").concat(1," argument(s)."));var F=M,A="weekday"===F,P=t.arguments[0],N=(A?s(P,"date"):null)||s(P,"datetime")||s(P,"datetimeoffset");if(!N)throw new Error("Function '".concat(t.name,"': The first argument ").concat(P," could not be interpreted as a ").concat(A?"date, ":"","datetime or datetimeoffset."));var j=function(){return"".concat(N.label()," (").concat(l.instant("DatePart_"+F),")")},W=N.labelForParameter?function(){return"".concat(N.labelForParameter()," (").concat(l.instant("DatePart_"+F),")")}:void 0;switch(F){case"weekday":return e.weekdayDesc(j,l,W);case"hour":case"minute":case"second":return e.datePartDesc(j,l,W);default:throw new Error("Never")}case"addyears":case"addmonths":case"adddays":var q,Q,H=m(t),$=s(H,"date")||s(H,"datetime")||s(H,"datetimeoffset");if(!$)throw new Error("Function '".concat(t.name,"': The second argument ").concat(H," could not be interpreted as a date, datetime or datetimeoffset."));return"date"!==$.control&&"datetime"!==$.control||(Q=$.granularity,"adddays"===M?(Q=Math.max(Q,Li.a.days),q=$.calendar):"addmonths"===M?(Q=Math.max(Q,Li.a.months),q="GC"):q="GC"),Object.assign(Object.assign({},$),{granularity:Q,calendar:q,label:or(l)});case"startofyear":case"startofmonth":case"date":if(t.arguments.length<1||t.arguments.length>2)throw new Error("No overload for function '".concat(t.name,"' accepts ").concat(t.arguments.length," arguments."));var G=t.arguments[0],z=s(G,"date")||s(G,"datetime")||s(G,"datetimeoffset");if(z){var J=mr(t,1)||("date"===M?z.calendar:"GC"),K="startofyear"===M?Li.a.years:"startofmonth"===M?Li.a.months:Li.a.days;return{datatype:"date",control:"date",label:or(l),granularity:K,calendar:J}}throw new Error("Function '".concat(t.name,"': The argument ").concat(G," could not be interpreted as a date, datetime or datetimeoffset."));case"diffdays":case"diffhours":case"diffminutes":case"diffseconds":if(2!==t.arguments.length)throw new Error("Function '".concat(t.name,"' accepts exactly ").concat(2," argument(s)."));var Y=t.arguments[0];if(!(s(Y,"date")||s(Y,"datetime")||s(Y,"datetimeoffset")))throw new Error("Function '".concat(t.name,"': The argument ").concat(Y," could not be interpreted as a date, datetime or datetimeoffset."));var X=t.arguments[1];if(!(s(X,"date")||s(X,"datetime")||s(X,"datetimeoffset")))throw new Error("Function '".concat(t.name,"': The argument ").concat(X," could not be interpreted as a date, datetime or datetimeoffset."));var Z="diffseconds"===M?0:1;return{datatype:"numeric",control:"number",maxDecimalPlaces:Z,minDecimalPlaces:Z,noSeparator:!1,isRightAligned:!0,label:or(l)};case"not":if(1!==t.arguments.length)throw new Error("Function '".concat(t.name,"' accepts exactly ").concat(1," argument(s)."));var ee=t.arguments[0],te=s(ee,"boolean");if(te)return Object.assign({},te);throw new Error("Function '".concat(t.name,"': The argument ").concat(ee," could not be interpreted as a boolean."));case"abs":if(1!==t.arguments.length)throw new Error("Function '".concat(t.name,"' accepts exactly ").concat(1," argument(s)."));var ne=t.arguments[0],ie=s(ne,"numeric");if(ie)return Object.assign({},ie);throw new Error("Function '".concat(t.name,"': The argument ").concat(ne," could not be interpreted as a numeric."));case"if":var re=b(t),oe=re.arg2,ce=re.arg3,ae=u(oe),le=ae.datatype;if("boolean"===le||"entity"===le)throw new Error("Function '".concat(t.name,"': The second argument ").concat(oe," cannot have a type ").concat(le,"."));var se=u(ce),ue=se.datatype;if("boolean"===ue||"entity"===ue)throw new Error("Function '".concat(t.name,"': The third argument ").concat(ce," cannot have a type ").concat(ue,"."));if(ar(le)>ar(ue)?ae=s(oe,se):ar(ue)>ar(le)&&(se=s(ce,ae)),!ae||!se)throw new Error("Function '".concat(t.name,"' cannot be used on expressions ").concat(oe," (").concat(le,") and ").concat(ce," (").concat(ue,") because they have incompatible data types."));return br(ae,se,or(l));case"isnull":var de=f(t),be=de.arg1,fe=de.arg2,me=u(be),ge=me.datatype;if("boolean"===ge||"entity"===ge)throw new Error("Function '".concat(t.name,"': The first argument ").concat(be," cannot have type ").concat(ge,"."));var pe=u(fe),he=pe.datatype;if("boolean"===he||"entity"===he)throw new Error("Function '".concat(t.name,"': The second argument ").concat(fe," cannot have type ").concat(he,"."));if(ar(ge)>ar(he)?me=s(be,pe):ar(he)>ar(ge)&&(pe=s(fe,me)),!me||!pe)throw new Error("Function '".concat(t.name,"' cannot be used on expressions ").concat(be," (").concat(ge,") and ").concat(fe," (").concat(he,") because they have incompatible data types."));return br(me,pe,or(l));case"today":if(t.arguments.length>0)throw new Error("Function '".concat(t.name,"' does not accept any arguments."));return{datatype:"date",control:"date",label:function(){return l.instant("Today")},granularity:Li.a.days};case"now":if(t.arguments.length>0)throw new Error("Function '".concat(t.name,"' does not accept any arguments."));return{datatype:"datetimeoffset",control:"datetime",label:function(){return l.instant("Now")},granularity:Li.b.minutes};case"me":if(t.arguments.length>0)throw new Error("Function '".concat(t.name,"' does not accept any arguments."));return{datatype:"numeric",control:"number",minDecimalPlaces:0,maxDecimalPlaces:0,label:function(){return l.instant("CurrentUser")},isRightAligned:!1,noSeparator:!0};default:throw new Error("Unknown function '".concat(t.name,"'."))}}else if(t instanceof Gi)switch(t.operator.toLowerCase()){case"+":var ve=s(t.left,"numeric"),ye=s(t.right,ve||"numeric"),Ie=or(l);if(!ve||!ye){if(ve=s(t.left,"string"),ye=s(t.right,"string"),!ve||!ye){var Ce=u(t.left).datatype,we=u(t.right).datatype;throw new Error("Operator '".concat(t.operator,"' cannot be used on expressions ").concat(t.left," (").concat(Ce,") and ").concat(t.right," (").concat(we,") because they have incompatible data types."))}return{datatype:"string",control:"text",label:Ie}}return lr(ve,ye,Ie);case"-":case"*":case"/":case"%":var ke=s(t.left,"numeric");if(!ke)throw new Error("Operator '".concat(t.operator,"': Left operand ").concat(t.left," could not be interpreted as a numeric."));var Me=s(t.right,"numeric");if(!Me)throw new Error("Operator '".concat(t.operator,"': Right operand ").concat(t.right," could not be interpreted as a numeric."));return lr(ke,Me,or(l));case"&&":case"and":case"||":case"or":if(!s(t.left,"boolean"))throw new Error("Operator '".concat(t.operator,"': Left operand ").concat(t.left," could not be interpreted as a boolean."));if(!s(t.right,"boolean"))throw new Error("Operator '".concat(t.operator,"': Right operand ").concat(t.right," could not be interpreted as a boolean."));return{datatype:"boolean",control:"unsupported",label:or(l)};case"<>":case"!=":case"ne":case">":case"gt":case">=":case"ge":case"<":case"lt":case"<=":case"le":case"=":case"eq":var Ve=t.left,Te=u(Ve),Ee=Te.datatype;if("boolean"===Ee||"entity"===Ee)throw new Error("Operator '".concat(t.operator,"': The left operand ").concat(Ve," cannot have type ").concat(Ee,"."));var Ue=t.right,xe=u(Ue,Te.labelForParameter),Re=xe.datatype;if("boolean"===Re||"entity"===Re)throw new Error("Operator '".concat(t.operator,"': The right operand ").concat(Ue," cannot have type ").concat(Re,"."));if(ar(Ee)>ar(Re)?Te=s(Ve,xe):ar(Re)>ar(Ee)&&(xe=s(Ue,Te)),!Te||!xe)throw new Error("Operator '".concat(t.operator,"' cannot be used on expressions ").concat(Ve," (").concat(Ee,") and ").concat(Ue," (").concat(Re,") because they have incompatible data types."));return{datatype:"boolean",control:"unsupported",label:or(l)};case"descof":if(!(t.left instanceof Hi))throw new Error("Operator '".concat(t.operator,"': The left operand ").concat(t.left," must be a column access like AccountType.Concept."));var De=t.right.columnAccesses()[0];if(De===t.right)throw new Error("Operator '".concat(t.operator,"': The right operand cannot be a column access expression like ").concat(De,"."));if(De)throw new Error("Operator '".concat(t.operator,"': The right operand cannot contain a column access expression like ").concat(De,"."));var Be=t.left,Se=u(Be),_e=Se.datatype;if("boolean"===_e||"entity"===_e)throw new Error("Operator '".concat(t.operator,"': The left operand ").concat(Be," cannot have type ").concat(_e,"."));var Oe=t.right,Le=u(Oe,Se.labelForParameter),Fe=Le.datatype;if("boolean"===Fe||"entity"===Fe)throw new Error("Operator '".concat(t.operator,"': The right operand ").concat(Oe," cannot have type ").concat(Fe,"."));if(ar(_e)>ar(Fe)?Se=s(Be,Le):ar(Fe)>ar(_e)&&(Le=s(Oe,Se)),!Se||!Le)throw new Error("Operator '".concat(t.operator,"' cannot be used on expressions ").concat(Be," (").concat(_e,") and ").concat(Oe," (").concat(Fe,") because they have incompatible data types."));return{datatype:"boolean",control:"unsupported",label:or(l)};case"contains":case"startsw":case"endsw":var Ae=s(t.left,"string");if(!Ae)throw new Error("Operator '".concat(t.operator,"': Left operand ").concat(t.left," could not be interpreted as string."));if(!s(t.right,Ae))throw new Error("Operator '".concat(t.operator,"': Right operand ").concat(t.right," could not be interpreted as string."));return{datatype:"boolean",control:"unsupported",label:or(l)}}else{if(!(t instanceof zi)){if(t instanceof Ji)return{datatype:"string",control:"text",label:function(){return t.toString()}};if(t instanceof Ki)return{datatype:"numeric",control:"number",minDecimalPlaces:t.decimals,maxDecimalPlaces:t.decimals,label:function(){return t.toString()},isRightAligned:!0,noSeparator:!1};if(t instanceof Yi)return{datatype:"null",control:"null",label:function(){return""}};if(t instanceof Xi)return{datatype:"bit",control:"check",label:function(){return l.instant(t.value?"Yes":"No")}};if(t instanceof Zi){var Pe=n[t.keyLower];if(Pe){var Ne=sr(Pe,r||function(){return t.key},a,l);return i[t.keyLower]=Ne,Ne}var je=i[t.keyLower];if(je)return Object.assign({},je);var We={datatype:"null",control:"null",label:r||function(){return t.key}};return i[t.keyLower]=We,We}throw Error("[Bug] ".concat(t," has an unknown Queryex type."))}var qe=t.operator.toLowerCase();switch(qe){case"+":case"-":var Qe=s(t.operand,"numeric");if(!Qe)throw new Error("Operator '".concat(t.operator,"': Operand ").concat(t.operand," could not be interpreted as numeric."));return"+"===qe?Object.assign({},Qe):"number"===Qe.control||"percent"===Qe.control?{datatype:"numeric",control:Qe.control,maxDecimalPlaces:Qe.maxDecimalPlaces,minDecimalPlaces:Qe.minDecimalPlaces,label:or(l),isRightAligned:Qe.isRightAligned,noSeparator:Qe.noSeparator}:{datatype:"numeric",control:"number",maxDecimalPlaces:0,minDecimalPlaces:0,label:or(l),isRightAligned:!1,noSeparator:!1};case"!":case"not":if(!s(t.operand,"boolean"))throw new Error("Operator '".concat(t.operator,"': Operand ").concat(t.operand," could not be interpreted as boolean."));return{datatype:"boolean",control:"unsupported",label:or(l)}}}}function d(e){if(e.arguments.length<1||e.arguments.length>2)throw new Error("No overload for function '".concat(e.name,"' accepts ").concat(e.arguments.length," arguments."));var t=e.arguments[0];if(e.arguments.length>=2){var n=e.arguments[1];if(!s(n,"boolean"))throw new Error("Function '".concat(e.name,"': The second argument ").concat(n," could not be interpreted as a boolean."))}return t}function b(e){if(3!==e.arguments.length)throw new Error("Function '".concat(e.name,"' accepts exactly 3 argument(s)."));var t=e.arguments[0];if(!s(t,"boolean"))throw new Error("Function '".concat(e.name,"': The first argument ").concat(t," could not be interpreted as a boolean."));return{arg2:e.arguments[1],arg3:e.arguments[2]}}function f(e){if(2!==e.arguments.length)throw new Error("Function '".concat(e.name,"' accepts exactly 2 argument(s)."));return{arg1:e.arguments[0],arg2:e.arguments[1]}}function m(e){if(2!==e.arguments.length)throw new Error("Function '".concat(e.name,"' accepts exactly 2 argument(s)."));var t=e.arguments[0];if(!s(t,"numeric"))throw new Error("Function '".concat(e.name,"': The first argument ").concat(t," could not be interpreted as a numeric."));return e.arguments[1]}return r?s(t,r):u(t)}},{key:"evaluateExp",value:function(e,t,n,i){function r(e){return void 0===e?null:e}return function e(o){if(o instanceof Hi)throw new Error("Client side evaluation of QueryexColumnAccess not possible.");if(o instanceof $i){var c=o.name.toLowerCase();switch(c){case"count":case"sum":case"min":case"max":return r(t[o.index]);case"avg":var a=r(t[o.sumIndex]),l=r(t[o.countIndex]);return null===a||null===l?null:a/l;case"year":case"quarter":case"month":case"day":var s=e(o.arguments[0]);if(null===s)return null;var u="GC";o.arguments.length>1&&(u=e(o.arguments[1])||"GC");var d=new Date(s),b=Object(rr.g)(d,u);switch(c){case"year":return b.year;case"quarter":return Math.min(Math.floor((b.month-1)/3)+1,4);case"month":return b.month;case"day":return b.day;default:return}case"weekday":case"hour":case"minute":case"second":var f=e(o.arguments[0]);if(null===f)return null;var m=new Date(f);switch(c){case"weekday":return m.getDay()+1;case"hour":return m.getHours();case"minute":return m.getMinutes();case"second":return m.getSeconds();default:return}case"addyears":case"addmonths":case"adddays":var g=e(o.arguments[0]);if(null===g)return null;var p=e(o.arguments[1]);if(null===p)return null;var h=new Date(p);switch(c){case"adddays":h.setDate(h.getDate()+g);break;case"addmonths":h.setMonth(h.getMonth()+g);break;case"addyears":h.setFullYear(h.getFullYear()+g)}return p.endsWith("Z")?"".concat(h.toISOString().split(".")[0],".").concat(p.split(".")[1]):Object(Oi.d)(h);case"startofyear":case"startofmonth":case"date":var v=e(o.arguments[0]);if(null===v)return null;var y="GC";o.arguments.length>1&&(y=e(o.arguments[1])||"GC");var I=new Date(v),C=Object(rr.g)(I,y);switch(c){case"startofmonth":C.day=1;break;case"startofyear":C.day=1,C.month=1}return I=Object(rr.c)(C,y),"".concat(Object(Oi.c)(I),"T00:00:00.000");case"diffdays":case"diffhours":case"diffminutes":case"diffseconds":var w=e(o.arguments[0]);if(null===w)return null;var k,M=e(o.arguments[1]);if(null===M)return null;switch(c){case"diffdays":k=86400;break;case"diffhours":k=3600;break;case"diffminutes":k=60;break;case"diffseconds":k=1;break;default:return}var V=new Date(w),T=new Date(M);return Math.floor((T.getTime()-V.getTime())/1e3)/k;case"not":return!e(o.arguments[0]);case"abs":var E=e(o.arguments[0]);return null===E?null:Math.abs(E);case"if":var U=e(o.arguments[0]);return e(U?o.arguments[1]:o.arguments[2]);case"isnull":var x=e(o.arguments[0]);return null!==x?x:e(o.arguments[1]);case"today":return Object(Oi.e)();case"now":return Object(Oi.b)();case"me":return i.currentTenant.userSettings.UserId;default:throw new Error("Unknown function '".concat(o.name,"'."))}}else if(o instanceof Gi){var R=o.operator.toLowerCase(),D=e(o.left),B=e(o.right);switch(R){case"+":return null===D||null===B?null:D+B;case"-":return null===D||null===B?null:D-B;case"*":return null===D||null===B?null:D*B;case"/":return null===D||null===B?null:D/B;case"%":return null===D||null===B?null:D%B;case"&&":case"and":return D&&B;case"||":case"or":return D||B;case"<>":case"!=":case"ne":return D!==B;case">":case"gt":return null!==D&&null!==B&&D>B;case">=":case"ge":return null!==D&&null!==B&&D>=B;case"<":case"lt":return null!==D&&null!==B&&D<B;case"<=":case"le":return null!==D&&null!==B&&D<=B;case"=":case"eq":return D===B;case"descof":throw new Error("descof not implemented");case"contains":return null!==D&&null!==B&&D.includes(B);case"startsw":return null!==D&&null!==B&&D.startsWith(B);case"endsw":return null!==D&&null!==B&&D.endsWith(B)}}else{if(!(o instanceof zi)){if(o instanceof Ji)return o.value;if(o instanceof Ki)return o.value;if(o instanceof Yi)return null;if(o instanceof Xi)return o.value;if(o instanceof Zi){var S=n[o.keyLower];return Object(W.n)(S)?S:null}throw Error("[Bug] ".concat(o," has an unknown Queryex type."))}var _=o.operator.toLowerCase(),O=e(o.operand);switch(_){case"+":return O;case"-":return null===O?null:-O;case"!":case"not":return!O}}}(e)}}]),e}(),pr=n("vxfF"),hr=n("zQsl"),vr=["flatHeader"];function yr(e,t){if(1&e&&(r.Vb(0,"span",12),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.value,o=n.desc,c=n.entityDesc,a=r.lc();r.Qc("background-color",a.stateColor(i,o)),r.Bb(1),r.Uc(a.displayValue(i,o,c))}}function Ir(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.value,o=n.desc,c=n.entityDesc,a=r.lc();r.Bb(1),r.Uc(a.displayValue(i,o,c))}}function Cr(e,t){if(1&e&&(r.Vb(0,"div",9),r.Rc(1,yr,2,3,"span",10),r.Rc(2,Ir,2,1,"ng-template",null,11,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(2).desc,o=r.lc();r.Bb(1),r.sc("ngIf",o.hasColor(i))("ngIfElse",n)}}function wr(e,t){if(1&e&&(r.Vb(0,"span",13),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.desc,o=n.value,c=n.entityDesc,a=r.lc();r.Qc("float",a.descAlignment(i)),r.Bb(1),r.Vc("\u200c",a.displayValue(o,i,c),"\u200c")}}function kr(e,t){if(1&e&&(r.Vb(0,"span",13),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.desc,o=n.value,c=n.entityDesc,a=r.lc();r.Qc("float",a.descAlignment(i)),r.Bb(1),r.Vc("\u200c",a.displayValue(o,i,c),"\u200c")}}function Mr(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.value,o=n.desc,c=n.entityDesc,a=r.lc();r.Bb(1),r.Uc(a.displayValue(i,o,c))}}function Vr(e,t){if(1&e&&(r.Tb(0,5),r.Rc(1,Cr,4,2,"div",6),r.Rc(2,wr,2,3,"span",7),r.Rc(3,kr,2,3,"span",7),r.Rc(4,Mr,2,1,"span",8),r.Sb()),2&e){var n=r.lc().desc;r.sc("ngSwitch",n.control),r.Bb(1),r.sc("ngSwitchCase","choice"),r.Bb(1),r.sc("ngSwitchCase","number"),r.Bb(1),r.sc("ngSwitchCase","percent")}}function Tr(e,t){if(1&e&&r.Rc(0,Vr,5,4,"ng-container",4),2&e){var n=t.isUndefined;r.lc();var i=r.Fc(3);r.sc("ngIf",!n)("ngIfElse",i)}}function Er(e,t){1&e&&(r.Vb(0,"span",14),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Undefined")))}function Ur(e,t){if(1&e){var n=r.Wb();r.Vb(0,"th",23),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc(3).onOrderByFlat(e)})),r.Tc(1),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Qc("width",i.width),r.Gb("text-right",o.isRightAligned(i.desc))("dropdown-toggle",o.isOrdered(i)),r.Bb(1),r.Vc(" ",i.label()," ")}}function xr(e,t){if(1&e&&(r.Vb(0,"thead"),r.Vb(1,"tr",null,20),r.Qb(3,"th",21),r.Rc(4,Ur,2,7,"th",22),r.Qb(5,"th",21),r.Ub(),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Gb("t-pointer",n.canOrderByFlat)("dropup",n.isDescending),r.Bb(3),r.sc("ngForOf",n.selectInfos)}}function Rr(e,t){1&e&&r.Rb(0)}var Dr=function(e,t,n){return{value:e,desc:t,entityDesc:n}};function Br(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",23),r.hc("click",(function(){r.Ic(n);var e=r.lc().index;return r.lc(2).onFlatSelect(e)})),r.Rc(1,Rr,1,0,"ng-container",26),r.Ub()}if(2&e){var i=t.$implicit,o=t.index,c=r.lc().$implicit;r.lc(2);var a=r.Fc(1);r.Qc("width",i.width),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.yc(4,Dr,c[o],i.desc,i.entityDesc))}}function Sr(e,t){if(1&e&&(r.Vb(0,"tr",24),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Rc(3,Br,2,8,"td",25),r.Vb(4,"td"),r.Tc(5,"\u200c"),r.Ub(),r.Ub()),2&e){var n=r.lc(2);r.Gb("t-highlight",!1),r.Bb(3),r.sc("ngForOf",n.selectInfos)}}function _r(e,t){1&e&&r.Rb(0)}function Or(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",15),r.Vb(2,"cdk-virtual-scroll-viewport",16),r.Vb(3,"table",17),r.Rc(4,xr,6,5,"thead",2),r.Vb(5,"tbody"),r.Rc(6,Sr,6,3,"tr",18),r.Ub(),r.Ub(),r.Rc(7,_r,1,0,"ng-container",19),r.Ub(),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=r.Fc(7);r.Bb(4),r.sc("ngIf",n.selectInfos),r.Bb(2),r.sc("cdkVirtualForOf",n.flat),r.Bb(1),r.sc("ngTemplateOutlet",i)}}function Lr(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",31),r.Tc(2),r.Ub(),r.Vb(3,"td",32),r.Tc(4),r.Ub(),r.Ub()),2&e){var n=t.$implicit,i=r.lc(4);r.Bb(2),r.Uc(n.info.label()),r.Bb(2),r.Uc(i.displayValue(n.value,n.info.desc,n.info.entityDesc))}}function Fr(e,t){if(1&e&&(r.Vb(0,"table"),r.Vb(1,"tbody"),r.Rc(2,Lr,5,2,"tr",30),r.Ub(),r.Ub()),2&e){var n=t.dim;r.Bb(2),r.sc("ngForOf",n.attributes)}}function Ar(e,t){if(1&e&&(r.Vb(0,"td",43),r.Tc(1),r.Ub()),2&e){var n=t.$implicit,i=r.lc(9);r.sc("rowSpan",i.rowSpan),r.Bb(1),r.Vc(" ",n.label()," ")}}function Pr(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Ar,2,2,"td",42),r.Sb()),2&e){var n=r.lc(8);r.Bb(1),r.sc("ngForOf",n.singleRowDimension.attributes)}}function Nr(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"td",41),r.Tc(2," \u200c "),r.Ub(),r.Rc(3,Pr,2,1,"ng-container",2),r.Sb()),2&e){var n=r.lc(7);r.Bb(1),r.sc("colSpan",n.colSpan)("rowSpan",n.rowSpan),r.Bb(2),r.sc("ngIf",!!n.singleRowDimension)}}function jr(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"button",47),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).$implicit;return r.lc(7).onExpandColumn(e)})),r.Qb(2,"fa-icon",48),r.Ub(),r.Tc(3,"\xa0 "),r.Sb()}if(2&e){var i=r.lc(2).$implicit,o=r.lc(7);r.Bb(2),r.sc("flip",o.flipArrow(i))("rotate",o.rotateArrow(i))}}function Wr(e,t){1&e&&r.Rb(0)}var qr=function(e,t,n,i){return{value:e,desc:t,isUndefined:n,entityDesc:i}};function Qr(e,t){if(1&e&&(r.Vb(0,"td",46),r.Rc(1,jr,4,2,"ng-container",2),r.Rc(2,Wr,1,0,"ng-container",26),r.Ub()),2&e){var n=r.lc().$implicit,i=r.Fc(3),o=r.lc(7),c=r.Fc(1);r.sc("rowSpan",n.rowSpan)("colSpan",n.colSpan)("ngbPopover",i)("disablePopover",0===n.attributes.length),r.Bb(1),r.sc("ngIf",o.hasChildren(n)),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.zc(7,qr,n.value,n.info.desc,!o.isDefined(n),n.info.entityDesc))}}function Hr(e,t){1&e&&r.Rb(0)}var $r=function(e){return{dim:e}};function Gr(e,t){if(1&e&&r.Rc(0,Hr,1,0,"ng-container",26),2&e){var n=r.lc().$implicit;r.lc(5);var i=r.Fc(2);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,$r,n))}}function zr(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Qr,3,12,"td",44),r.Rc(2,Gr,1,4,"ng-template",null,45,r.Sc),r.Sb()),2&e){var n=t.$implicit;r.Bb(1),r.sc("ngIf",n.isVisible)}}function Jr(e,t){if(1&e&&(r.Vb(0,"td",49),r.Tc(1),r.Ub()),2&e){var n=r.lc(7);r.sc("rowSpan",n.columnsGrandTotalLabel.rowSpan)("colSpan",n.columnsGrandTotalLabel.colSpan),r.Bb(1),r.Vc(" ",n.columnsGrandTotalLabel.label()," ")}}function Kr(e,t){if(1&e&&(r.Vb(0,"tr"),r.Rc(1,Nr,4,3,"ng-container",2),r.Rc(2,zr,4,1,"ng-container",39),r.Rc(3,Jr,2,3,"td",40),r.Ub()),2&e){var n=r.lc(),i=n.index,o=n.$implicit,c=r.lc(5);r.Bb(1),r.sc("ngIf",0===i&&c.colSpan&&c.rowSpan),r.Bb(1),r.sc("ngForOf",o)("ngForTrackBy",c.trackByObject),r.Bb(1),r.sc("ngIf",0===i&&!!c.columnsGrandTotalLabel)}}function Yr(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Kr,4,4,"tr",2),r.Sb()),2&e){var n=t.index,i=r.lc(5);r.Bb(1),r.sc("ngIf",i.showHeaderRow(n))}}function Xr(e,t){if(1&e&&(r.Vb(0,"td",51),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n.label()," ")}}function Zr(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Xr,2,1,"td",50),r.Sb()),2&e){var n=r.lc(7);r.Bb(1),r.sc("ngForOf",n.singleRowDimension.attributes)}}function eo(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"td",41),r.Tc(2," \u200c "),r.Ub(),r.Rc(3,Zr,2,1,"ng-container",2),r.Sb()),2&e){var n=r.lc(6);r.Bb(1),r.sc("colSpan",n.colSpan)("rowSpan",1),r.Bb(2),r.sc("ngIf",!!n.singleRowDimension)}}function to(e,t){if(1&e&&(r.Vb(0,"td",51),r.Tc(1),r.Ub()),2&e){var n=t.$implicit,i=r.lc(2).$implicit;r.Gb("font-weight-bold",i.isTotal),r.Bb(1),r.Vc(" ",n.label()," ")}}function no(e,t){if(1&e&&(r.Tb(0),r.Rc(1,to,2,3,"td",52),r.Sb()),2&e){var n=r.lc(7);r.Bb(1),r.sc("ngForOf",n.measures)("ngForTrackBy",n.trackByObject)}}function io(e,t){if(1&e&&(r.Tb(0),r.Rc(1,no,2,2,"ng-container",2),r.Sb()),2&e){var n=t.$implicit,i=r.lc(6);r.Bb(1),r.sc("ngIf",i.isMeasureVisible(n))}}function ro(e,t){if(1&e&&(r.Vb(0,"td",51),r.Tc(1),r.Ub()),2&e){var n=t.$implicit,i=r.lc(7);r.Gb("font-weight-bold",!!i.columnsGrandTotalLabel),r.Bb(1),r.Vc(" ",n.label()," ")}}function oo(e,t){if(1&e&&(r.Tb(0),r.Rc(1,ro,2,3,"td",53),r.Sb()),2&e){var n=r.lc(6);r.Bb(1),r.sc("ngForOf",n.measures)}}function co(e,t){if(1&e&&(r.Vb(0,"tr"),r.Rc(1,eo,4,3,"ng-container",2),r.Rc(2,io,2,1,"ng-container",30),r.Rc(3,oo,2,1,"ng-container",2),r.Ub()),2&e){var n=r.lc(5);r.Bb(1),r.sc("ngIf",!n.showHeaderRow(0)&&!!n.colSpan&&!!n.rowSpan),r.Bb(1),r.sc("ngForOf",n.columnCells),r.Bb(1),r.sc("ngIf",n.showColumnsGrandTotalsMeasureLabels)}}function ao(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",57),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit;return r.lc(5).onExpandRow(e)})),r.Qb(1,"fa-icon",48),r.Ub()}if(2&e){var i=r.lc().$implicit,o=r.lc(5);r.Qc("margin-left",o.paddingLeft(i))("margin-right",o.paddingRight(i))("opacity",o.hasChildren(i)?1:0),r.sc("disabled",!o.hasChildren(i)),r.Bb(1),r.sc("flip",o.flipArrow(i))("rotate",o.rotateArrow(i))}}function lo(e,t){1&e&&r.Rb(0)}function so(e,t){1&e&&r.Rb(0)}function uo(e,t){if(1&e&&r.Rc(0,so,1,0,"ng-container",26),2&e){var n=r.lc().$implicit;r.lc(3);var i=r.Fc(2);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,$r,n))}}function bo(e,t){1&e&&r.Rb(0)}function fo(e,t){if(1&e&&(r.Vb(0,"td",59),r.Rc(1,bo,1,0,"ng-container",26),r.Ub()),2&e){var n=t.$implicit;r.lc(7);var i=r.Fc(1);r.Bb(1),r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.yc(2,Dr,n.value,n.info.desc,n.info.entityDesc))}}function mo(e,t){if(1&e&&(r.Tb(0),r.Rc(1,fo,2,6,"td",58),r.Sb()),2&e){var n=r.lc().$implicit;r.Bb(1),r.sc("ngForOf",n.attributes)}}function go(e,t){1&e&&r.Rb(0)}var po=function(e,t){return{value:e,desc:t,isUndefined:!1}};function ho(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",23),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).$implicit;return r.lc(6).onMeasureClick(i,e)})),r.Rc(1,go,1,0,"ng-container",26),r.Ub()}if(2&e){var i=t.index,o=r.lc(2).$implicit,c=r.lc(6),a=r.Fc(1);r.Eb("t-report-measure ",o.classes[i],""),r.Gb("t-disable-drilldown",o.disableDrilldown)("font-weight-bold",o.isTotal)("t-highlight",o.drilledIndex===i),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(11,po,o.values[i],c.measures[i].desc))}}function vo(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",62),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).$implicit;return r.lc(6).onMeasureClick(e,-1)})),r.Ub()}}function yo(e,t){if(1&e&&(r.Tb(0),r.Rc(1,ho,2,14,"td",60),r.Rc(2,vo,1,0,"td",61),r.Sb()),2&e){var n=r.lc(7);r.Bb(1),r.sc("ngForOf",n.measures),r.Bb(1),r.sc("ngIf",0===n.measures.length)}}function Io(e,t){if(1&e&&(r.Tb(0),r.Rc(1,yo,3,2,"ng-container",2),r.Sb()),2&e){var n=t.$implicit,i=r.lc(6);r.Bb(1),r.sc("ngIf",i.isMeasureVisible(n.column))}}function Co(e,t){if(1&e&&(r.Vb(0,"tr",54),r.Vb(1,"td",55),r.Rc(2,ao,2,9,"button",56),r.Tc(3,"\xa0 "),r.Rc(4,lo,1,0,"ng-container",26),r.Ub(),r.Rc(5,uo,1,4,"ng-template",null,45,r.Sc),r.Rc(7,mo,2,1,"ng-container",2),r.Rc(8,Io,2,1,"ng-container",30),r.Ub()),2&e){var n=t.$implicit,i=r.Fc(6),o=r.lc(5),c=r.Fc(1);r.Bb(1),r.sc("ngbPopover",i)("placement",o.rowAttributePlacement)("disablePopover",0===n.attributes.length||!!o.singleRowDimension),r.Bb(1),r.sc("ngIf",o.addRowExpanders),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.zc(8,qr,n.value,n.info.desc,!o.isDefined(n),n.info.entityDesc)),r.Bb(3),r.sc("ngIf",!!o.singleRowDimension),r.Bb(1),r.sc("ngForOf",n.measures)}}function wo(e,t){1&e&&(r.Vb(0,"button",66),r.Qb(1,"fa-icon",67),r.Ub())}function ko(e,t){if(1&e&&(r.Vb(0,"td",64),r.Rc(1,wo,2,0,"button",65),r.Tc(2),r.Ub()),2&e){var n=r.lc(6);r.Bb(1),r.sc("ngIf",n.addRowExpanders),r.Bb(1),r.Vc("\xa0 ",n.rowsGrandTotalLabel.label()," ")}}function Mo(e,t){1&e&&r.Qb(0,"td",59)}function Vo(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Mo,1,0,"td",58),r.Sb()),2&e){var n=r.lc(6);r.Bb(1),r.sc("ngForOf",n.singleRowDimension.attributes)}}function To(e,t){1&e&&r.Rb(0)}function Eo(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",23),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).$implicit;return r.lc(6).onMeasureClick(i,e)})),r.Rc(1,To,1,0,"ng-container",26),r.Ub()}if(2&e){var i=t.index,o=r.lc(2).$implicit,c=r.lc(6),a=r.Fc(1);r.Eb("t-report-measure ",o.classes[i],""),r.Gb("t-disable-drilldown",o.disableDrilldown)("font-weight-bold",o.isTotal)("t-highlight",o.drilledIndex===i),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(11,po,o.values[i],c.measures[i].desc))}}function Uo(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",62),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).$implicit;return r.lc(6).onMeasureClick(e,-1)})),r.Ub()}}function xo(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Eo,2,14,"td",60),r.Rc(2,Uo,1,0,"td",61),r.Sb()),2&e){var n=r.lc(7);r.Bb(1),r.sc("ngForOf",n.measures),r.Bb(1),r.sc("ngIf",0===n.measures.length)}}function Ro(e,t){if(1&e&&(r.Tb(0),r.Rc(1,xo,3,2,"ng-container",2),r.Sb()),2&e){var n=t.$implicit,i=r.lc(6);r.Bb(1),r.sc("ngIf",i.isMeasureVisible(n.column))}}function Do(e,t){if(1&e&&(r.Vb(0,"tr",54),r.Rc(1,ko,3,2,"td",63),r.Rc(2,Vo,2,1,"ng-container",2),r.Rc(3,Ro,2,1,"ng-container",30),r.Ub()),2&e){var n=r.lc(5);r.Bb(1),r.sc("ngIf",!!n.rowsGrandTotalLabel),r.Bb(1),r.sc("ngIf",!!n.singleRowDimension),r.Bb(1),r.sc("ngForOf",n.rowsGrandTotalMeasures)}}function Bo(e,t){if(1&e&&(r.Vb(0,"cdk-virtual-scroll-viewport",35),r.Vb(1,"table",36),r.Vb(2,"tbody"),r.Rc(3,Yr,2,1,"ng-container",30),r.Rc(4,co,4,3,"tr",2),r.Rc(5,Co,9,13,"tr",37),r.Rc(6,Do,4,3,"tr",38),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc(4);r.Bb(3),r.sc("ngForOf",n.columnHeaders),r.Bb(1),r.sc("ngIf",n.showMeasureLabelsRow),r.Bb(1),r.sc("cdkVirtualForOf",n.rows)("cdkVirtualForTrackBy",n.trackByObject),r.Bb(1),r.sc("ngIf",n.rowsGrandTotalMeasures)}}var So=function(e){return{0:e}};function _o(e,t){if(1&e&&(r.Vb(0,"div",68),r.Vb(1,"t-error-message"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(4);r.Bb(2),r.Vc(" ",r.oc(3,1,"Error_TooManyColumns0",r.wc(4,So,n.maximumColumns))," ")}}function Oo(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Bo,7,5,"cdk-virtual-scroll-viewport",33),r.Rc(2,_o,4,6,"ng-template",null,34,r.Sc),r.Sb()),2&e){var n=r.Fc(3),i=r.lc(3);r.Bb(1),r.sc("ngIf",!i.tooManyColumns)("ngIfElse",n)}}function Lo(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",77),r.Vb(1,"h1",23),r.hc("click",(function(){return r.Ic(n),r.lc(5).onPointSelect()})),r.Tc(2),r.Ub(),r.Ub()}if(2&e){var i=r.lc(5);r.Bb(1),r.Eb("display-4 t-report-measure mx-5 ",i.pointClass,""),r.Bb(1),r.Vc(" ",i.point," ")}}function Fo(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Lo,3,4,"div",76),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsPoint)("ngIfElse",n)}}function Ao(e,t){1&e&&r.Rb(0)}var Po=function(e){return{model:e}};function No(e,t){if(1&e&&r.Rc(0,Ao,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function jo(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-bar-vertical",79),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,No,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.monochromatic)("customColors",i.customColors)("results",i.single)("roundEdges",!1)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.firstDimensionLabel)("yAxisLabel",i.measureLabel)("xAxisTickFormatting",i.formatChartDimension)("yAxisTickFormatting",i.formatChartMeasureValue)}}function Wo(e,t){if(1&e&&(r.Tb(0),r.Rc(1,jo,3,13,"ngx-charts-bar-vertical",78),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle)("ngIfElse",n)}}function qo(e,t){1&e&&r.Rb(0)}function Qo(e,t){if(1&e&&r.Rc(0,qo,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Ho(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-bar-horizontal",82),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,Qo,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.monochromatic)("customColors",i.customColors)("results",i.single)("roundEdges",!1)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.measureLabel)("yAxisLabel",i.firstDimensionLabel)("yAxisTickFormatting",i.formatChartDimension)("xAxisTickFormatting",i.formatChartMeasureValue)}}function $o(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Ho,3,13,"ngx-charts-bar-horizontal",81),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle)("ngIfElse",n)}}function Go(e,t){1&e&&r.Rb(0)}function zo(e,t){if(1&e&&r.Rc(0,Go,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Jo(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-pie-chart",84),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,zo,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.alternativeCustomColors)("results",i.single)("labelFormatting",i.formatChartDimension)("labels",!0)("trimLabels",!1)}}function Ko(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Jo,3,7,"ngx-charts-pie-chart",83),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle)("ngIfElse",n)}}function Yo(e,t){1&e&&r.Rb(0)}function Xo(e,t){if(1&e&&r.Rc(0,Yo,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Zo(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-pie-chart",86),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,Xo,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.alternativeCustomColors)("results",i.single)("doughnut",!0)("labelFormatting",i.formatChartDimension)("labels",!0)("trimLabels",!1)}}function ec(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Zo,3,8,"ngx-charts-pie-chart",85),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle)("ngIfElse",n)}}function tc(e,t){1&e&&r.Rb(0)}function nc(e,t){if(1&e&&r.Rc(0,tc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function ic(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-tree-map",88),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,nc,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.alternativeCustomColors)("results",i.single)("labelFormatting",i.formatAlternativeChartDimension)("valueFormatting",i.formatChartMeasureValue)}}function rc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,ic,3,6,"ngx-charts-tree-map",87),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle)("ngIfElse",n)}}function oc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-number-card",90),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.alternativeCustomColors)("results",i.single)("labelFormatting",i.formatAlternativeChartDimension)("valueFormatting",i.formatAlternativeChartMeasureValue)}}function cc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,oc,1,6,"ngx-charts-number-card",89),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle)("ngIfElse",n)}}function ac(e,t){1&e&&r.Rb(0)}function lc(e,t){if(1&e&&r.Rc(0,ac,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function sc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-gauge",92),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,lc,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.monochromatic)("customColors",i.customColors)("results",i.single)("max",0)("showText",i.showGaugeTotal())("valueFormatting",i.formatChartMeasureValue)("axisTickFormatting",i.formatStringChartMeasureValue)("legend",i.legend)}}function uc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,sc,3,9,"ngx-charts-gauge",91),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle)("ngIfElse",n)}}function dc(e,t){1&e&&r.Rb(0)}function bc(e,t){if(1&e&&r.Rc(0,dc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function fc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-bar-vertical-2d",94),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,bc,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.customColors)("results",i.multi)("roundEdges",!1)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("legend",i.legend)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.firstDimensionLabel)("yAxisLabel",i.measureLabel)("xAxisTickFormatting",i.formatChartDimension)("yAxisTickFormatting",i.formatChartMeasureValue)}}function mc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,fc,3,14,"ngx-charts-bar-vertical-2d",93),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsMulti)("ngIfElse",n)}}function gc(e,t){1&e&&r.Rb(0)}function pc(e,t){if(1&e&&r.Rc(0,gc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function hc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-bar-vertical-stacked",96),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,pc,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.customColors)("results",i.multi)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("legend",i.legend)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.firstDimensionLabel)("yAxisLabel",i.measureLabel)("xAxisTickFormatting",i.formatChartDimension)("yAxisTickFormatting",i.formatChartMeasureValue)}}function vc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,hc,3,13,"ngx-charts-bar-vertical-stacked",95),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsMulti)("ngIfElse",n)}}function yc(e,t){1&e&&r.Rb(0)}function Ic(e,t){if(1&e&&r.Rc(0,yc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Cc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-bar-vertical-normalized",96),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,Ic,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.customColors)("results",i.multi)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("legend",i.legend)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.firstDimensionLabel)("yAxisLabel",i.measureLabel+" %")("xAxisTickFormatting",i.formatChartDimension)("yAxisTickFormatting",i.formatChartMeasureValue)}}function wc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Cc,3,13,"ngx-charts-bar-vertical-normalized",95),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsMulti)("ngIfElse",n)}}function kc(e,t){1&e&&r.Rb(0)}function Mc(e,t){if(1&e&&r.Rc(0,kc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Vc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-bar-horizontal-2d",98),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,Mc,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.customColors)("results",i.multi)("roundEdges",!1)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("legend",i.legend)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.measureLabel)("yAxisLabel",i.firstDimensionLabel)("yAxisTickFormatting",i.formatChartDimension)("xAxisTickFormatting",i.formatChartMeasureValue)}}function Tc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Vc,3,14,"ngx-charts-bar-horizontal-2d",97),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsMulti)("ngIfElse",n)}}function Ec(e,t){1&e&&r.Rb(0)}function Uc(e,t){if(1&e&&r.Rc(0,Ec,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function xc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-bar-horizontal-stacked",100),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,Uc,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.customColors)("results",i.multi)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("legend",i.legend)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.measureLabel)("yAxisLabel",i.firstDimensionLabel)("yAxisTickFormatting",i.formatChartDimension)("xAxisTickFormatting",i.formatChartMeasureValue)}}function Rc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,xc,3,13,"ngx-charts-bar-horizontal-stacked",99),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsMulti)("ngIfElse",n)}}function Dc(e,t){1&e&&r.Rb(0)}function Bc(e,t){if(1&e&&r.Rc(0,Dc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Sc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-bar-horizontal-normalized",100),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,Bc,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("customColors",i.customColors)("results",i.multi)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("legend",i.legend)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.measureLabel+" %")("yAxisLabel",i.firstDimensionLabel)("yAxisTickFormatting",i.formatChartDimension)("xAxisTickFormatting",i.formatChartMeasureValue)}}function _c(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Sc,3,13,"ngx-charts-bar-horizontal-normalized",99),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsMulti)("ngIfElse",n)}}function Oc(e,t){1&e&&r.Rb(0)}function Lc(e,t){if(1&e&&r.Rc(0,Oc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Fc(e,t){1&e&&r.Rb(0)}function Ac(e,t){if(1&e&&r.Rc(0,Fc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(24);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Pc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-line-chart",102),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,Lc,1,4,"ng-template",null,80,r.Sc),r.Rc(3,Ac,1,4,"ng-template",null,103,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("results",i.multi)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("showXAxisLabel",i.showXAxisLabel)("legend",i.legend)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.secondDimensionLabel||i.firstDimensionLabel)("yAxisLabel",i.measureLabel)("xAxisTickFormatting",i.formatChartDimension)("yAxisTickFormatting",i.formatChartMeasureValue)}}function Nc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Pc,5,12,"ngx-charts-line-chart",101),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle||i.supportsMulti)("ngIfElse",n)}}function jc(e,t){1&e&&r.Rb(0)}function Wc(e,t){if(1&e&&r.Rc(0,jc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(22);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function qc(e,t){1&e&&r.Rb(0)}function Qc(e,t){if(1&e&&r.Rc(0,qc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(24);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Hc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-area-chart",105),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,Wc,1,4,"ng-template",null,80,r.Sc),r.Rc(3,Qc,1,4,"ng-template",null,103,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.colorful)("results",i.multi)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("legend",i.legend)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.secondDimensionLabel||i.firstDimensionLabel)("yAxisLabel",i.measureLabel)("xAxisTickFormatting",i.formatChartDimension)("yAxisTickFormatting",i.formatChartMeasureValue)}}function $c(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Hc,5,12,"ngx-charts-area-chart",104),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsSingle||i.supportsMulti)("ngIfElse",n)}}function Gc(e,t){1&e&&r.Rb(0)}function zc(e,t){if(1&e&&r.Rc(0,Gc,1,0,"ng-container",26),2&e){var n=t.model;r.lc(3);var i=r.Fc(26);r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.wc(2,Po,n))}}function Jc(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ngx-charts-heat-map",105),r.hc("select",(function(e){return r.Ic(n),r.lc(5).onChartSelect(e.name)})),r.Rc(1,zc,1,4,"ng-template",null,80,r.Sc),r.Ub()}if(2&e){var i=r.lc(5);r.sc("animations",i.animations)("scheme",i.heat)("results",i.multi)("xAxis",i.showXAxis)("yAxis",i.showYAxis)("legend",i.legend)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.firstDimensionLabel)("yAxisLabel",i.secondDimensionLabel)("xAxisTickFormatting",i.formatChartDimension)("yAxisTickFormatting",i.formatChartDimension)}}function Kc(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Jc,3,12,"ngx-charts-heat-map",104),r.Sb()),2&e){r.lc();var n=r.Fc(20),i=r.lc(3);r.Bb(1),r.sc("ngIf",i.supportsMulti)("ngIfElse",n)}}var Yc=function(e){return{count:e}};function Xc(e,t){if(1&e&&(r.Vb(0,"div",106),r.Qb(1,"fa-icon",107),r.Tc(2),r.mc(3,"translate"),r.Ub()),2&e){var n=r.lc(4);r.Bb(2),r.Vc(" \xa0 ",r.oc(3,1,"ChartTypeDoesNotSupportNDimensions",r.wc(4,Yc,n.numberOfDimensions))," ")}}function Zc(e,t){if(1&e&&(r.Vb(0,"div",108),r.Vb(1,"span"),r.Tc(2),r.Ub(),r.Qb(3,"br"),r.Vb(4,"span",109),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.model,i=r.lc(4);r.Bb(2),r.Uc(n.name.display),r.Bb(3),r.Uc(i.formatChartMeasureValue(n.value))}}function ea(e,t){if(1&e&&(r.Vb(0,"div",112),r.Qb(1,"span",113),r.Tc(2),r.Ub()),2&e){var n=t.$implicit,i=r.lc(5);r.Bb(1),r.Qc("background-color",n.color),r.Bb(1),r.Vc(" ",(null==n.series?null:n.series.display)+": "+i.formatChartMeasureValue(n.value)," ")}}function ta(e,t){if(1&e&&(r.Vb(0,"div",110),r.Rc(1,ea,3,3,"div",111),r.Ub()),2&e){var n=t.model;r.Bb(1),r.sc("ngForOf",n)}}function na(e,t){if(1&e&&(r.Vb(0,"div",108),r.Vb(1,"span",109),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=t.model,i=r.lc(4);r.Bb(2),r.Uc(i.formatChartMeasureValue(n.value))}}function ia(e,t){if(1&e&&(r.Vb(0,"div",69),r.Vb(1,"div",70),r.Rc(2,Fo,2,2,"ng-container",71),r.Rc(3,Wo,2,2,"ng-container",71),r.Rc(4,$o,2,2,"ng-container",71),r.Rc(5,Ko,2,2,"ng-container",71),r.Rc(6,ec,2,2,"ng-container",71),r.Rc(7,rc,2,2,"ng-container",71),r.Rc(8,cc,2,2,"ng-container",71),r.Rc(9,uc,2,2,"ng-container",71),r.Rc(10,mc,2,2,"ng-container",71),r.Rc(11,vc,2,2,"ng-container",71),r.Rc(12,wc,2,2,"ng-container",71),r.Rc(13,Tc,2,2,"ng-container",71),r.Rc(14,Rc,2,2,"ng-container",71),r.Rc(15,_c,2,2,"ng-container",71),r.Rc(16,Nc,2,2,"ng-container",71),r.Rc(17,$c,2,2,"ng-container",71),r.Rc(18,Kc,2,2,"ng-container",71),r.Rc(19,Xc,4,6,"ng-template",null,72,r.Sc),r.Rc(21,Zc,6,2,"ng-template",null,73,r.Sc),r.Rc(23,ta,2,1,"ng-template",null,74,r.Sc),r.Rc(25,na,3,1,"ng-template",null,75,r.Sc),r.Ub(),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.sc("ngSwitch",n.chart),r.Bb(1),r.sc("ngSwitchCase","Card"),r.Bb(1),r.sc("ngSwitchCase","BarsVertical"),r.Bb(1),r.sc("ngSwitchCase","BarsHorizontal"),r.Bb(1),r.sc("ngSwitchCase","Pie"),r.Bb(1),r.sc("ngSwitchCase","Doughnut"),r.Bb(1),r.sc("ngSwitchCase","TreeMap"),r.Bb(1),r.sc("ngSwitchCase","NumberCards"),r.Bb(1),r.sc("ngSwitchCase","Gauge"),r.Bb(1),r.sc("ngSwitchCase","BarsVerticalGrouped"),r.Bb(1),r.sc("ngSwitchCase","BarsVerticalStacked"),r.Bb(1),r.sc("ngSwitchCase","BarsVerticalNormalized"),r.Bb(1),r.sc("ngSwitchCase","BarsHorizontalGrouped"),r.Bb(1),r.sc("ngSwitchCase","BarsHorizontalStacked"),r.Bb(1),r.sc("ngSwitchCase","BarsHorizontalNormalized"),r.Bb(1),r.sc("ngSwitchCase","Line"),r.Bb(1),r.sc("ngSwitchCase","Area"),r.Bb(1),r.sc("ngSwitchCase","HeatMap")}}function ra(e,t){1&e&&(r.Vb(0,"div",106),r.Qb(1,"fa-icon",107),r.Tc(2),r.mc(3,"translate"),r.Ub()),2&e&&(r.Bb(2),r.Vc(" \xa0 ",r.nc(3,1,"SpecifyNumericMeasure")," "))}function oa(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Fr,3,1,"ng-template",null,27,r.Sc),r.Rc(3,Oo,4,2,"ng-container",2),r.Rc(4,ia,27,18,"div",28),r.Rc(5,ra,4,3,"div",29),r.Sb()),2&e){var n=r.lc(2);r.Bb(3),r.sc("ngIf",n.showSummary),r.Bb(1),r.sc("ngIf",n.showChart),r.Bb(1),r.sc("ngIf",n.showSpecifyNumericMeasure)}}function ca(e,t){1&e&&r.Rb(0)}function aa(e,t){if(1&e&&(r.Tb(0),r.Rc(1,oa,6,3,"ng-container",2),r.Rc(2,ca,1,0,"ng-container",19),r.Sb()),2&e){var n=r.lc(),i=r.Fc(7);r.Bb(1),r.sc("ngIf",n.showResults),r.Bb(1),r.sc("ngTemplateOutlet",i)}}function la(e,t){1&e&&(r.Vb(0,"div",118),r.Qb(1,"t-spinner",119),r.Ub()),2&e&&(r.Bb(1),r.sc("scale",2))}function sa(e,t){1&e&&(r.Vb(0,"div",120),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function ua(e,t){if(1&e&&(r.Vb(0,"div",68),r.Vb(1,"t-error-message"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2);r.Bb(2),r.Vc(" ",n.errorMessage," ")}}function da(e,t){if(1&e&&(r.Vb(0,"div",121),r.Qb(1,"fa-icon",107),r.Tc(2),r.Ub()),2&e){var n=r.lc(2);r.Bb(2),r.Vc(" \xa0 ",n.information()," ")}}function ba(e,t){if(1&e&&(r.Rc(0,la,2,1,"div",114),r.Rc(1,sa,3,3,"div",115),r.Rc(2,ua,3,1,"div",116),r.Rc(3,da,3,1,"div",117)),2&e){var n=r.lc();r.sc("ngIf",n.showSpinner),r.Bb(1),r.sc("ngIf",n.showNoItemsFound),r.Bb(1),r.sc("ngIf",n.showErrorMessage),r.Bb(1),r.sc("ngIf",n.showInformation)}}var fa,ma=function(e){return e.pivot="pivot",e.chart="chart",e}({}),ga=["#1490A3","#128091","#10707F","#0D606D","#0B505B","#0D606D","#10707F","#128091"],pa=((fa=function(){function e(t,n,i,o,c,a){var l=this;_classCallCheck(this,e),this.workspace=t,this.translate=n,this.api=i,this.cdr=o,this.router=c,this.route=a,this.maximumColumns=130,this._rowAttributePlacement=["bottom","top","bottom-left","top-left"],this._rowAttributePlacementRtl=["bottom","top","bottom-right","top-right"],this.arguments={},this.mode="screen",this.disableDrilldown=!1,this.silentRefreshError=new r.n,this.exportStarting=new r.n,this.exportSuccess=new r.n,this.exportError=new r.n,this.orderbyChange=new r.n,this.notifyFetch$=new U.a,this.notifyDestruct$=new U.a,this.crud=this.api.crudFactory(this.apiEndpoint,this.notifyDestruct$),this.animations=!1,this.showXAxis=!0,this.showYAxis=!0,this.showXAxisLabel=!0,this.showYAxisLabel=!0,this.legend=!1,this.colorful={domain:ga},this.monochromatic={domain:[ga[1]]},this.heat={domain:["#96D5DF","#052429"]},this.chartDimensionCellFromDimensionCell=function(e,t,n,i,r,o){var c=Object(W.n)(n)?l.displayValue(t,e.desc,e.entityDesc):l.translate.instant("Undefined");return new S.a(c,n,e,r,i,o)},this.customColors=function(e){return e.color||ga[e.index%ga.length]},this.alternativeCustomColors=function(e){var t,n=l.state;if(!n.singleCellsHash){n.singleCellsHash={};var i,r=_createForOfIteratorHelper(l.single);try{for(r.s();!(i=r.n()).done;){var o=i.value,c=o.name.toString();c===S.n?n.singleCellsUndefined=o.name:n.singleCellsHash[c]=o.name}}catch(a){r.e(a)}finally{r.f()}}return t=e===S.n?n.singleCellsUndefined:n.singleCellsHash[e],l.customColors(t)},this.formatChartMeasureValue=function(e,t){var n=(t=t||l.state).measureInfos[t.singleNumericMeasureIndex];return Object(Ie.c)(e,n.desc,l.workspace,l.translate)},this.formatAlternativeChartMeasureValue=function(e){return l.formatChartMeasureValue(e.value)},this.formatStringChartMeasureValue=function(e){return e=e.replace(/,/g,""),l.formatChartMeasureValue(+e)},this.showGaugeTotal=function(){return l.state.totalEqualsSum}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.state=this.state||new S.j;var t=this.state;if(this._subscriptions=new O.a,this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:function(){return e.cdr.markForCheck()}})),this._subscriptions.add(this.notifyFetch$.pipe(Object(F.a)((function(t){return e.doFetch(t)}))).subscribe()),"screen"===this.mode){var n=function(t){var n=t.get("$orderby");try{var i=Wi.parse(n,{expectDirKeywords:!0});i.length>0?(e.orderbyKey=i[0].toString(),e.orderbyDir=i[0].direction||"asc"):(delete e.orderbyKey,delete e.orderbyDir)}catch(r){delete e.orderbyKey,delete e.orderbyDir}};n(this.route.snapshot.paramMap),this._subscriptions.add(this.route.paramMap.pipe(Object(_i.a)(1)).subscribe((function(t){n(t),e.applyChanges()&&e.fetch()})))}this.crud=this.api.crudFactory(this.apiEndpoint,this.notifyDestruct$),this.view=this.view||(this.definition.Chart&&this.definition.DefaultsToChart?ma.chart:ma.pivot);var i=this.applyChanges();if(t.reportStatus!==S.i.loaded||i)try{var r=gr.getReportInfos(this.definition,this.workspace,this.translate),o=r.filter,c=r.having,a=r.columns,l=r.rows,s=r.measures,u=r.select,d=r.parameters,b={};d.forEach((function(e){return b[e.keyLower]=e})),t.parameterInfos=b,t.filterExp=o,t.havingExp=c,t.columnInfos=a,t.rowInfos=l,t.measureInfos=s,t.uniqueMeasureAggregations=this.computeUniqueMeasureAggregations(s),t.selectInfos=u,t.dimensionInfos=t.columnInfos.concat(t.rowInfos),t.singleNumericMeasureIndex=this.state.measureInfos.findIndex((function(e){return e.isNumeric})),t.badDefinition=!1,this.fetch()}catch(f){t.parameterInfos=null,t.filterExp=null,t.havingExp=null,t.columnInfos=null,t.rowInfos=null,t.measureInfos=null,t.uniqueMeasureAggregations=null,t.selectInfos=null,t.dimensionInfos=null,t.singleNumericMeasureIndex=-1,t.badDefinition=!0,t.reportStatus=S.i.error,t.errorMessage=f,this.cdr.markForCheck()}this.subscribeRefresh(),this.subscribeExport()}},{key:"ngOnChanges",value:function(e){[e.state,e.definition,e.mode].some((function(e){return!!e&&!e.isFirstChange()}))?(this.ngOnDestroy(),this.ngOnInit()):([e.arguments].some((function(e){return!!e&&!e.isFirstChange()}))&&this.applyChanges()&&(this.state.skip=0,this.fetch()),e.refresh&&!e.refresh.isFirstChange()&&(this.unsubscribeRefresh(),this.subscribeRefresh()),e.export&&!e.export.isFirstChange()&&(this.unsubscribeExport(),this.subscribeExport()))}},{key:"unsubscribeRefresh",value:function(){this._refreshSubscription&&this._refreshSubscription.unsubscribe()}},{key:"subscribeRefresh",value:function(){var e=this;this.refresh&&(this._refreshSubscription=this.refresh.pipe(Object(A.a)((function(t){return!t&&e.state.reportStatus!==S.i.loading||t&&!e.state.silentQuery})),Object(P.a)((function(t){return e.fetch(t)}))).subscribe())}},{key:"unsubscribeExport",value:function(){this._exportSubscription&&this._exportSubscription.unsubscribe()}},{key:"subscribeExport",value:function(){var e=this;this.export&&(this._exportSubscription=this.export.pipe(Object(A.a)((function(t){return e.state.reportStatus!==S.i.loading})),Object(P.a)((function(t){return e.onExport(t)}))).subscribe())}},{key:"applyChanges",value:function(){var e=this.state,t=!1;this.definition!==e.definition&&(e.definition=this.definition,t=!0),this.isDetails&&this.canOrderByFlat&&(this.orderbyKey!==e.orderbyKey&&(e.orderbyKey=this.orderbyKey,t=!0),this.orderbyDir!==e.orderbyDir&&(e.orderbyDir=this.orderbyDir,t=!0));var n,i=this.arguments,r=this.state.arguments,o=_createForOfIteratorHelper(Object.keys(i).concat(Object.keys(r)));try{for(o.s();!(n=o.n()).done;){var c=n.value;r[c]!==i[c]&&(r[c]=i[c],t=!0)}}catch(a){o.e(a)}finally{o.f()}return t}},{key:"ngOnDestroy",value:function(){this.notifyDestruct$.next(),this.unsubscribeRefresh(),this.unsubscribeExport()}},{key:"fetch",value:function(e){this.notifyFetch$.next(e)}},{key:"doFetch",value:function(t){var n,i,r,o=this,c=this.state;if(c.badDefinition)return Object(L.a)(null);t?c.silentQuery=!0:c.reportStatus=S.i.loading;try{n=this.computeFilter(c),i=this.computeHaving(c)}catch(b){return c.silentQuery=!1,c.reportStatus=S.i.error,c.errorMessage=b.message,Object(L.a)(null)}if(this.cdr.markForCheck(),this.showDetails){var a,l,s=this.definition.Top||e.DEFAULT_PAGE_SIZE,u=this.definition.Top?0:c.skip;try{if(a=this.computeSelect(c),l=this.computeOrderBy(c),!a)return c.silentQuery=!1,c.reportStatus=S.i.information,c.information=function(){return o.translate.instant("DragSelect")},Object(L.a)(null)}catch(b){return c.silentQuery=!1,c.reportStatus=S.i.error,c.errorMessage=b.message,Object(L.a)(null)}this.rememberFlatColumnWidths(),r=this.crud.getFact({top:s,skip:u,orderby:l,select:a,filter:n,countEntities:!0,silent:t}).pipe(Object(P.a)((function(e){c.silentQuery=!1,c.reportStatus=S.i.loaded,c.top=e.Result.length,c.skip=u,c.total=e.TotalCount,c.result=e.Result,o.forgetFlatColumnWidths()})))}else{var d;try{if(!(d=this.computeAggregateSelect(c)))return c.silentQuery=!1,c.reportStatus=S.i.information,c.information=function(){return o.translate.instant("DragDimensionsOrMeasures")},Object(L.a)(null)}catch(b){return c.silentQuery=!1,c.reportStatus=S.i.error,c.errorMessage=b.message,Object(L.a)(null)}r=this.crud.getAggregate({top:this.definition.Top,select:d,filter:n,having:i,silent:t}).pipe(Object(P.a)((function(e){c.silentQuery=!1,c.reportStatus=S.i.loaded,c.result=e.Result,c.ancestorGroups={};var t,n=_createForOfIteratorHelper(e.DimensionAncestors||[]);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,o={},a=_createForOfIteratorHelper(r.Result);try{for(a.s();!(i=a.n()).done;){var l=i.value;o[l[r.IdIndex-r.MinIndex]]=l}}catch(s){a.e(s)}finally{a.f()}c.ancestorGroups[r.IdIndex]={minIndex:r.MinIndex,ancestors:o}}}catch(s){n.e(s)}finally{n.f()}})))}return r.pipe(Object(P.a)((function(){c.silentError=!1,c.time=Object(Oi.b)()})),Object(j.a)((function(e){return c=o.state,t?(c.silentQuery=!1,c.silentError=!0,o.silentRefreshError.emit(e)):c.reportStatus=S.i.error,c.errorMessage=e.error,Object(L.a)(null)})),Object(re.a)((function(){return o.cdr.markForCheck()})))}},{key:"computeUniqueMeasureAggregations",value:function(e){var t={},n=[];function i(e){var i=e.toString(),r=t[i];return void 0===r&&(r=n.length,t[i]=r,n.push({exp:e})),r}var r,o=[],c=_createForOfIteratorHelper(e);try{for(c.s();!(r=c.n()).done;){var a=r.value;a.exp.aggregationsInner(o),a.success&&a.success.aggregationsInner(o),a.warning&&a.warning.aggregationsInner(o),a.danger&&a.danger.aggregationsInner(o)}}catch(f){c.e(f)}finally{c.f()}for(var l=0,s=o;l<s.length;l++){var u=s[l];if("avg"===u.nameLower){var d=u.clone();d.setName("sum"),u.sumIndex=i(d);var b=u.clone();b.setName("count"),u.countIndex=i(b)}else u.index=i(u)}return n}},{key:"computeFilter",value:function(e){return this.definition?(e=e||this.state).filterExp?er(gr.stringify(e.filterExp,this.arguments,e.parameterInfos)):null:""}},{key:"computeHaving",value:function(e){return this.definition?(e=e||this.state).havingExp?er(gr.stringify(e.havingExp,this.arguments,e.parameterInfos)):null:""}},{key:"computeOrderBy",value:function(e){if(e=e||this.state,this.isDetails&&this.canOrderByFlat&&e.orderbyKey){var t=e.selectInfos.find((function(t){return t.expToString===e.orderbyKey})),n=this.orderDirection(t);if(n){var i=gr.stringify(t.exp,this.arguments,e.parameterInfos);if(t.entityDesc)return t.entityDesc.orderby().map((function(e){return"".concat(i,".").concat(e," ").concat(n)})).join(",");if(t.localize){var r=this.workspace.currentTenant,o=gr.stringify(t.exp,this.arguments,e.parameterInfos,r.isSecondaryLanguage?2:r.isTernaryLanguage?3:1);return i===o?i:"".concat(o," ").concat(n,",").concat(i," ").concat(n)}return"".concat(i," ").concat(n)}}return this.definition.OrderBy}},{key:"computeSelect",value:function(e){if(!this.definition)return"";var t=(e=e||this.state).selectInfos;if(!t||0===t.length)return"";var n=this.arguments,i=e.parameterInfos,r={},o=[];function c(e){e=er(e);var t=r[e];return void 0===t&&(t=o.length,r[e]=t,o.push(e)),t}var a=this.entityDescriptor;e.idIndex=a.properties.Id?c("Id"):-1,e.defIdIndex=!a.definitionId&&a.definitionIds?c("DefinitionId"):-1,a.navigateToDetailsSelect?e.navigateToDetailsIndices=a.navigateToDetailsSelect.map((function(e){return c(e)})):delete e.navigateToDetailsIndices;var l,s=_createForOfIteratorHelper(t);try{var u=function(){var e=l.value,t=[],r=e.exp,o=e.localize,a=e.entityDesc;if(a){var s,u=gr.stringify(r,n,i),d=_createForOfIteratorHelper(a.select);try{for(d.s();!(s=d.n()).done;){var b=s.value;t.push(c(u+"."+b))}}catch(h){d.e(h)}finally{d.f()}}else{for(var f=0,m=o?[1,2,3]:[1];f<m.length;f++){var g=m[f],p=gr.stringify(r,n,i,g);t.push(c(p))}t.every((function(e){return e===t[0]}))&&(t=[t[0]])}e.indices=t};for(s.s();!(l=s.n()).done;)u()}catch(d){s.e(d)}finally{s.f()}return o.join(",")}},{key:"computeAggregateSelect",value:function(e){if(!this.definition)return"";var t=this.arguments,n=(e=e||this.state).parameterInfos,i={},r=[];function o(e){e=er(e);var t=i[e];return void 0===t&&(t=r.length,i[e]=t,r.push(e)),t}var c,a=e.columnInfos,l=e.rowInfos,s=_createForOfIteratorHelper(a.concat(l));try{for(s.s();!(c=s.n()).done;){var u=c.value,d=u.keyExp,b=u.entityDesc,f=u.dispExp,m=u.localize,g=gr.stringify(d,t,n);if(b){if(u.keyIndex=o(g+".Id"),f)!function(){for(var e=[],i=0,r=m?[1,2,3]:[1];i<r.length;i++){var c=r[i],a=gr.stringify(f,t,n,c,g);e.push(o(a))}e.every((function(t){return t===e[0]}))&&(e=[e[0]]),u.indices=e}();else{u.indices=[];var p,h=_createForOfIteratorHelper(b.select);try{for(h.s();!(p=h.n()).done;){var v=p.value;u.indices.push(o(g+"."+v))}}catch(S){h.e(S)}finally{h.f()}}var y,I=_createForOfIteratorHelper(u.attributes);try{for(I.s();!(y=I.n()).done;){var C=y.value;C.indices=[];var w=C.exp,k=C.localize,M=C.entityDesc;if(M){C.indices=[];var V,T=gr.stringify(w,t,n,1,g),E=_createForOfIteratorHelper(M.select);try{for(E.s();!(V=E.n()).done;){var U=V.value;C.indices.push(o(T+"."+U))}}catch(S){E.e(S)}finally{E.f()}}else!function(){for(var e=[],i=0,r=k?[1,2,3]:[1];i<r.length;i++){var c=r[i],a=gr.stringify(w,t,n,c,g);e.push(o(a))}e.every((function(t){return t===e[0]}))&&(e=[e[0]]),C.indices=e}()}}catch(S){I.e(S)}finally{I.f()}u.showAsTree&&(u.parentKeyIndex=o(g+".ParentId"))}else u.keyIndex=o(g)}}catch(S){s.e(S)}finally{s.f()}var x,R=_createForOfIteratorHelper(e.uniqueMeasureAggregations);try{for(R.s();!(x=R.n()).done;){var D=x.value,B=gr.stringify(D.exp,t,n);D.index=o(B)}}catch(S){R.e(S)}finally{R.f()}return r.join(",")}},{key:"onExport",value:function(e){var t=this;try{var n=this.state;if(n.reportStatus===S.i.loaded)if(this.isDetails){var i=[],r=function(r){var o=n.selectInfos,c=[];i.push(c);var a,l=_createForOfIteratorHelper(o);try{for(l.s();!(a=l.n()).done;){var s=a.value;c.push(s.label())}}catch(h){l.e(h)}finally{l.f()}var u,d=_createForOfIteratorHelper(r);try{for(d.s();!(u=d.n()).done;){var b=u.value,f=[];i.push(f);for(var m=0;m<o.length;m++){var g=o[m],p=t.displayValue(b[m],g.desc,g.entityDesc);f.push(p)}}}catch(h){d.e(h)}finally{d.f()}t.downloadData(i,e),t.exportSuccess.emit()};if(this.definition.Top)r(this.flat);else{var o,c,a;try{o=this.computeFilter(n),c=this.computeSelect(),a=this.computeOrderBy()}catch(Ee){return void this.exportError.emit(Ee)}if(!c){var l=this.translate.instant("DragSelect");return void this.exportError.emit(l)}this.exportStarting.emit(),this.crud.getFact({top:2147483647,skip:0,orderby:a,select:c,filter:o}).pipe(Object(P.a)((function(e){var i=t.flatInner(e.Result,n);r(i),t.exportSuccess.emit()})),Object(j.a)((function(e){return t.exportError.emit(e.error),Object(L.a)()}))).subscribe()}}else{if(!this.isSummary)return;var s,u=[],d=n.pivot,b=d.columnHeaders,f=d.columns,m=d.rows,g=d.colSpan,p=d.columnsGrandTotalLabel,h=d.rowsGrandTotalLabel,v=d.rowsGrandTotalMeasures,y=n.measureInfos,I=this.singleRowDimension,C=I?I.attributes:[],w={},k=!0,M=_createForOfIteratorHelper(b);try{for(M.s();!(s=M.n()).done;){var V=s.value,T=[];u.push(T);for(var E=0;E<g;E++)T.push(null);if(I)if(k){var U,x=_createForOfIteratorHelper(C);try{for(x.s();!(U=x.n()).done;){var R=U.value;T.push(R.label())}}catch(Ue){x.e(Ue)}finally{x.f()}}else{var D,B=_createForOfIteratorHelper(C);try{for(B.s();!(D=B.n()).done;)D.value,T.push(null)}catch(Ue){B.e(Ue)}finally{B.f()}}var _,O=_createForOfIteratorHelper(V);try{for(O.s();!(_=O.n()).done;){for(var F=_.value;w[T.length];)T.push(null);var A;F.rowSpan>1&&(w[T.length]=!0),A=this.isDefined(F)?this.displayValue(F.value,F.info.desc,F.info.entityDesc):this.translate.instant("Undefined"),T.push(A);for(var N=1;N<F.expandedColSpan;N++)T.push(null)}}catch(Ue){O.e(Ue)}finally{O.f()}k&&p&&T.push(p.label()),k=!1}}catch(Ue){M.e(Ue)}finally{M.f()}if(this.showMeasureLabelsRow){var W=[];u.push(W);for(var q=0;q<g;q++)W.push(null);if(I)if(k){var Q,H=_createForOfIteratorHelper(C);try{for(H.s();!(Q=H.n()).done;){var $=Q.value;W.push($.label())}}catch(Ue){H.e(Ue)}finally{H.f()}}else{var G,z=_createForOfIteratorHelper(C);try{for(z.s();!(G=z.n()).done;)G.value,W.push(null)}catch(Ue){z.e(Ue)}finally{z.f()}}var J,K=_createForOfIteratorHelper(f);try{for(K.s();!(J=K.n()).done;)if(0===J.value.children.length){var Y,X=_createForOfIteratorHelper(y);try{for(X.s();!(Y=X.n()).done;){var Z=Y.value;W.push(Z.label())}}catch(Ue){X.e(Ue)}finally{X.f()}}}catch(Ue){K.e(Ue)}finally{K.f()}if(this.showColumnsGrandTotalsMeasureLabels){var ee,te=_createForOfIteratorHelper(y);try{for(te.s();!(ee=te.n()).done;){var ne=ee.value;W.push(ne.label())}}catch(Ue){te.e(Ue)}finally{te.f()}}}var ie,re=_createForOfIteratorHelper(m);try{for(re.s();!(ie=re.n()).done;){var oe=ie.value,ce=[];u.push(ce);for(var ae="",le=0;le<oe.level;le++)ae+="            ";if(this.isDefined(oe)?ae+=this.displayValue(oe.value,oe.info.desc,oe.info.entityDesc):ae+=this.translate.instant("Undefined"),ce.push(ae),I){var se,ue=_createForOfIteratorHelper(oe.attributes);try{for(ue.s();!(se=ue.n()).done;){var de=se.value,be=this.displayValue(de.value,de.info.desc,de.info.entityDesc);ce.push(be)}}catch(Ue){ue.e(Ue)}finally{ue.f()}}var fe,me=_createForOfIteratorHelper(oe.measures);try{for(me.s();!(fe=me.n()).done;){var ge=fe.value;if(!ge.column||0===ge.column.children.length){for(var pe=0;pe<y.length;pe++){var he=Object(Ie.c)(ge.values[pe],y[pe].desc,this.workspace,this.translate);ce.push(he)}0===y.length&&ce.push(null)}}}catch(Ue){me.e(Ue)}finally{me.f()}}}catch(Ue){re.e(Ue)}finally{re.f()}if(v){var ve=[];if(u.push(ve),h&&ve.push(h.label()),I){var ye,Ce=_createForOfIteratorHelper(C);try{for(Ce.s();!(ye=Ce.n()).done;)ye.value,ve.push(null)}catch(Ue){Ce.e(Ue)}finally{Ce.f()}}var we,ke=_createForOfIteratorHelper(v);try{for(ke.s();!(we=ke.n()).done;){var Me=we.value;if(!Me.column||0===Me.column.children.length)for(var Ve=0;Ve<y.length;Ve++){var Te=Object(Ie.c)(Me.values[Ve],y[Ve].desc,this.workspace,this.translate);ve.push(Te)}}}catch(Ue){ke.e(Ue)}finally{ke.f()}}this.downloadData(u,e),this.exportSuccess.emit()}}catch(Ue){this.exportError.emit(Ue)}}},{key:"downloadData",value:function(e,t){var n,i=0,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.length>i&&(i=o.length)}}catch(u){r.e(u)}finally{r.f()}var c,a=_createForOfIteratorHelper(e);try{for(a.s();!(c=a.n()).done;)for(var l=c.value;l.length<i;)l.push(null)}catch(u){a.e(u)}finally{a.f()}var s=Object(W.g)(e);Object(W.i)(s,t||this.translate.instant("Report")+".csv")}},{key:"information",value:function(){return this.state.information()}},{key:"extractValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.entityDesc?t.indices.map((function(t){return e[t-n]})):e[t.keyIndex-n]}},{key:"recomputeColumnSpans",value:function(e){var t=this.state,n=(e=e||t.pivot).columnHeaders,i=t.measureInfos.length;n.forEach((function(e){return e.forEach((function(e){e.colSpan=0,e.isVisible=!e.parent||e.parent.isVisible&&e.parent.isExpanded}))}));for(var r=n.length-1;r>=0;r--)for(var o=n[r].length-1;o>=0;o--){var c=n[r][o];c.colSpan=c.colSpan||i||1,c.parent&&c.parent.isExpanded&&(c.parent.colSpan+=c.colSpan)}e.maxVisibleLevel=-1,n.forEach((function(t){return t.forEach((function(t){t.isVisible&&t.level>e.maxVisibleLevel&&(e.maxVisibleLevel=t.level)}))})),n.forEach((function(t){return t.forEach((function(t){t.rowSpan=t.isExpanded?1:e.maxVisibleLevel+1-t.level}))}));var a=e.columnsGrandTotalLabel;a&&(a.colSpan=i||1,a.rowSpan=e.maxVisibleLevel+1),e.colSpan=0===t.rowInfos.length?0:1,e.rowSpan=e.maxVisibleLevel+1+(this.showMeasureLabelsRow?1:0)}},{key:"showHeaderRow",value:function(e){return e<=this.pivot.maxVisibleLevel}},{key:"onExpandRow",value:function(e){e.isExpanded=!e.isExpanded,this.recomputeVisibleRows()}},{key:"onExpandColumn",value:function(e){e.isExpanded=!e.isExpanded,this.recomputeColumnSpans()}},{key:"recomputeVisibleRows",value:function(){var e=this.state.pivot.rows;e.forEach((function(e){return e.isVisible=!e.parent||e.parent.isExpanded&&e.parent.isVisible})),this._modifiedRows=e.filter((function(e){return e.isVisible}))}},{key:"hasChildren",value:function(e){return!!e.children&&e.children.length>0}},{key:"flipArrow",value:function(e){return this.workspace.ws.isRtl&&!e.isExpanded?"horizontal":null}},{key:"rotateArrow",value:function(e){return e.isExpanded?90:0}},{key:"isMeasureVisible",value:function(e){return!e||e.isVisible&&!e.isExpanded}},{key:"trackByRow",value:function(e,t){return t[0]}},{key:"trackByObject",value:function(e,t){return t}},{key:"paddingLeft",value:function(e){return this.workspace.ws.isRtl?"0":30*e.level+"px"}},{key:"paddingRight",value:function(e){return this.workspace.ws.isRtl?30*e.level+"px":"0"}},{key:"computeFilterAtoms",value:function(e){for(var t=[],n=e;n;){var i=n.info,r=i.keyExp,o=i.keyDesc,c=i.entityDesc,a=void 0,l=void 0;if(n.isAncestor)a=c.properties.Id.datatype,l=gr.stringify(r,void 0,void 0)+".Id";else if("entity"===o.datatype){var s=r.clone();s.property=o.foreignKeyName,a=c.properties.Id.datatype,l=gr.stringify(s,void 0,void 0)}else a=o.datatype,l=gr.stringify(r,void 0,void 0);var u,d=n.valueId;u=Object(W.n)(d)?gr.needsQuotes(a)?"'".concat(d.replace(/\'/g,"''"),"'"):d+"":"null",t.push("(".concat(l," ").concat(n.isAncestor?"descof":"eq"," ").concat(u,")")),n=n.prevDimensionParent}return t}},{key:"computeMeasureAtoms",value:function(e){if(-1===e)return[];var t,n=this.state,i={},r=_createForOfIteratorHelper(n.measureInfos[e].exp.aggregations());try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.arguments.length<2)return[];i[gr.stringify(o.arguments[1],this.arguments,n.parameterInfos)]=!0}}catch(a){r.e(a)}finally{r.f()}var c=Object.keys(i);return 0===c.length?[]:1===c.length?c:["(".concat(c.reduce((function(e,t){return e+" or "+t})),")")]}},{key:"onMeasureClick",value:function(e,t){if(!e.disableDrilldown){var n,i=e.column,r=this.computeFilterAtoms(e.row),o=this.computeFilterAtoms(i),c=this.computeMeasureAtoms(t),a=r.concat(o).concat(c);n=0===a.length?null:1===a.length?a[0]:"(".concat(a.reduce((function(e,t){return e+" and "+t})),")");var l=this.state;l.drilledCell&&delete l.drilledCell.drilledIndex,e.drilledIndex=t,l.drilledCell=e,this.drilldown(n)}}},{key:"drilldown",value:function(t){if(!this.disableDrilldown){var n=this.state,i=gr.stringify(n.filterExp,this.arguments,n.parameterInfos),r=i&&t?"".concat(i," and ").concat(t):t?er(t):i?er(i):null,o={};r&&(o.filter=r);var c=this.workspace.ws.tenantId,a=this.definition;if(a.IsCustomDrilldown&&a.Id&&a.Select&&a.Select.length>0){var l=this.definition.Id;o.cache_buster=e.CACHE_BUSTER++,this.router.navigate(["app",c+"","drilldown",l+"",o])}else if(this.entityDescriptor.masterScreenUrl){var s=this.entityDescriptor.masterScreenUrl.split("/");o.inactive=!0,this.router.navigate(["app",c+""].concat(_toConsumableArray(s),[o]))}else console.error("No screen URL is defined for collection: '".concat(a.Collection,"', definitionId '").concat(a.DefinitionId,"'"))}}},{key:"isDefined",value:function(e){return Object(W.n)(e.valueId)}},{key:"displayValue",value:function(e,t,n){if(Array.isArray(e)){if(n)return n.formatFromVals(e);var i=this.workspace.currentTenant.localize(e[0],e[1],e[2]);return Object(Ie.c)(i,t,this.workspace,this.translate)}return Object(Ie.c)(e,t,this.workspace,this.translate)}},{key:"sortValue",value:function(e,t,n){return Array.isArray(e)?n?n.formatFromVals(e):this.workspace.currentTenant.localize(e[0],e[1],e[2]):e}},{key:"descAlignment",value:function(e){if(e.isRightAligned)return"right"}},{key:"hasColor",value:function(e){return!!e.color}},{key:"stateColor",value:function(e,t){if(t.color)return t.color(e)}},{key:"incrementDate",value:function(e,t){var n=t.info.keyDesc;if("date"===n.datatype){if(n.granularity===Li.a.days)e.setDate(e.getDate()+1);else{var i=n.calendar||"GC",r=Object(rr.g)(e,i);switch(1!==r.day&&console.error("Bug: incrementDate called on",r),n.granularity){case Li.a.years:r.year++;break;case Li.a.months:r.month++,r.month>Object(rr.f)(i)&&(r.month=1,r.year++)}e.setTime(Object(rr.c)(r,i).getTime())}return Object(Oi.d)(e)}}},{key:"minDate",value:function(e,t){var n,i,r=e.info;if("date"===r.keyDesc.datatype&&r.isOrdered&&"asc"===r.orderDir){var o=e;!(i=o.valueId)&&t&&(i=(o=t).valueId),i&&(n=Object(Oi.a)(i))}return{minDate:n,minString:i}}},{key:"colorFromClass",value:function(e){var t;switch(e){case"t-success":t="#28a745";break;case"t-warning":t="#ffc107";break;case"t-danger":t="#dc3545"}return t}},{key:"formatChartDimension",value:function(e){return e.display}},{key:"formatAlternativeChartDimension",value:function(e){return e.data.name.display}},{key:"onChartSelect",value:function(e){if(e){var t=this.computeFilterAtoms(e),n=t.length?t.reduce((function(e,t){return e+" and "+t})):null;this.drilldown(n)}}},{key:"onPointSelect",value:function(){this.drilldown(null)}},{key:"flatInner",value:function(e,t){var n=[];if(!e)return[];var i,r=_createForOfIteratorHelper(e);try{var o=function(){var e,r=i.value,o=[],c=_createForOfIteratorHelper(t.selectInfos);try{for(c.s();!(e=c.n()).done;){var a=e.value;o.push(a.entityDesc||a.indices.length>1?a.indices.map((function(e){return r[e]})):r[a.indices[0]])}}catch(l){c.e(l)}finally{c.f()}n.push(o)};for(r.s();!(i=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return n}},{key:"isRightAligned",value:function(e){switch(e.control){case"number":case"percent":return e.isRightAligned;default:return!1}}},{key:"onFlatSelect",value:function(e){var t=this.state,n=t.result[e],i=this.entityDescriptor;if(i.navigateToDetailsFromVals){var r=t.navigateToDetailsIndices.map((function(e){return n[e]}));i.navigateToDetailsFromVals(r,this.router)}else if(i.masterScreenUrl)if(t.idIndex>-1){var o=n[t.idIndex],c=["app",this.workspace.ws.tenantId+""].concat(_toConsumableArray(i.masterScreenUrl.split("/")));t.defIdIndex>-1&&c.push(n[t.defIdIndex]),c.push(o),this.router.navigate(c)}else{var a=this.definition;console.error("no screen URL is defined for collection: '".concat(a.Collection,"', definitionId '").concat(a.DefinitionId,"'"))}}},{key:"onOrderByFlat",value:function(e){if(this.canOrderByFlat&&0!==e.exp.columnAccesses().length){var t=this.state;t.skip=0;var n=e.exp.toString();t.orderbyKey===n?"asc"===t.orderbyDir?t.orderbyDir="desc":(delete t.orderbyKey,delete t.orderbyDir):(t.orderbyKey=n,t.orderbyDir="asc"),this.orderbyChange.emit(),this.rememberFlatColumnWidths(),this.fetch()}}},{key:"orderDirection",value:function(e){if(this.isOrdered(e))return this.state.orderbyDir}},{key:"isOrdered",value:function(e){if(e){var t=this.state;if(e.expToString===t.orderbyKey)return!!t.orderbyDir}}},{key:"rememberFlatColumnWidths",value:function(){if(this.flatHeader){var e=this.flatHeader.nativeElement;if(e)for(var t=this.selectInfos,n=1;n<e.cells.length-1;n++){var i=t[n-1];i&&(i.width=e.cells[n].offsetWidth+"px")}}}},{key:"forgetFlatColumnWidths",value:function(){this.state.selectInfos.forEach((function(e){return delete e.width}))}},{key:"entityDescriptor",get:function(){if(!this.definition)return null;var e=this.definition.Collection;if(!e)return null;var t=Si.h[e];return t?t(this.workspace,this.translate,this.definition.DefinitionId):null}},{key:"apiEndpoint",get:function(){var e=this.entityDescriptor;return e?e.apiEndpoint:null}},{key:"isDetails",get:function(){return!!this.definition&&"Details"===this.definition.Type}},{key:"isSummary",get:function(){return!!this.definition&&"Summary"===this.definition.Type}},{key:"showDetails",get:function(){return this.isDetails}},{key:"showSummary",get:function(){return this.isSummary&&this.view===ma.pivot}},{key:"showChart",get:function(){return this.isSummary&&this.view===ma.chart&&-1!==this.state.singleNumericMeasureIndex}},{key:"showSpecifyNumericMeasure",get:function(){return this.isSummary&&this.view===ma.chart&&-1===this.state.singleNumericMeasureIndex}},{key:"showResults",get:function(){return this.state.reportStatus===S.i.loaded&&!this.showNoItemsFound}},{key:"showErrorMessage",get:function(){return this.state.reportStatus===S.i.error}},{key:"showInformation",get:function(){return this.state.reportStatus===S.i.information}},{key:"showSpinner",get:function(){return this.state.reportStatus===S.i.loading}},{key:"showNoItemsFound",get:function(){var e=this.state;return e.reportStatus===S.i.loaded&&(!e.result||0===e.result.length)}},{key:"errorMessage",get:function(){return this.state.errorMessage}},{key:"chart",get:function(){return this.definition?this.definition.Chart:null}},{key:"pivot",get:function(){var e=this,t=this.state,n=this.definition,i=this.workspace.currentTenant;return t.currentResultForPivot!==t.result&&function(){var r=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(t[0].info.orderDir){case"asc":t.sort((function(e,t){return e.sortValue===t.sortValue?0:null===e.sortValue?-1:null===t.sortValue||e.sortValue>t.sortValue?1:e.sortValue<t.sortValue?-1:0}));break;case"desc":t.sort((function(e,t){return e.sortValue===t.sortValue?0:null===e.sortValue?1:null===t.sortValue||e.sortValue>t.sortValue?-1:e.sortValue<t.sortValue?1:0}))}var r,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var c=r.value;c.index=i++,n.push(c),c.children&&c.children.length>0?i=e(c.children,n,i):c.isExpanded=!1}}catch(a){o.e(a)}finally{o.f()}return i},o=function(e){return Object(W.n)(e)?e:null};t.currentResultForPivot=t.result;var c=t.columnInfos,a=c.length>0,l=t.measureInfos.length>0&&(n.ShowColumnsTotal||0===c.length),s=t.rowInfos,u=s.length>0,d=t.measureInfos.length>0&&(n.ShowRowsTotal||0===s.length),b=function(n,i){var r={cell:null},o=[],c=function(e){if(i){e.measures=[];for(var t=l?i.length+1:i.length,n=0;n<t;n++){var r=i[n];e.measures.push({aggValues:[],values:[],classes:[],column:r,row:e,isTotal:a&&!r})}}},s=function t(n,i,r,a){var l;return n?((l=r.ancestors[n])||function(){var s=a.ancestors[n],u=e.extractValue(s,i,a.minIndex),d=t(s[i.parentKeyIndex-a.minIndex],i,r,a);l={info:i,value:u,valueId:n,isExpanded:i.autoExpandLevel>(d?d.level+1:0)-(r.cell?r.cell.level:-1)-1,level:d?d.level+1:0,index:0,parent:d,prevDimensionParent:r.cell,children:[],attributes:[]};var b,f=_createForOfIteratorHelper(i.attributes);try{for(f.s();!(b=f.n()).done;){var m,g=b.value;m=g.entityDesc||g.indices.length>1?g.indices.map((function(e){return s[e-a.minIndex]})):s[g.indices[0]-a.minIndex],l.attributes.push({value:m,info:g}),g.isOrdered&&(l.sortValue=e.sortValue(m,g.desc,g.entityDesc))}}catch(p){f.e(p)}finally{f.f()}i.isOrdered&&(l.sortValue=e.sortValue(l.value,i.desc,i.entityDesc)),(d?d.children:o).push(l),c(l),r.ancestors[n]=l}(),l.isAncestor=!0):l=r.cell,l};if(n.length>0){var u,d=_createForOfIteratorHelper(t.result);try{var b=function(){var i,a=u.value,l=r,d=_createForOfIteratorHelper(n);try{for(d.s();!(i=d.n()).done;){var b=i.value,f=a[b.keyIndex],m=e.extractValue(a,b),g=void 0;if(Object(W.n)(f)?(l.values||(l.values={}),g=l.values[f]):g=l.undefined,!g){var p=void 0;if(b.showAsTree){l.ancestors||(l.ancestors={});var h=t.ancestorGroups[b.keyIndex];p=s(h.ancestors[f]?f:a[b.parentKeyIndex],b,l,h)}else p=l.cell;var v,y=p?p.level+1:0,I={info:b,value:m,valueId:f,isExpanded:b.autoExpandLevel>y-(l.cell?l.cell.level:-1)-1,level:y,index:0,parent:p,prevDimensionParent:l.cell,children:[],attributes:[]},C=_createForOfIteratorHelper(b.attributes);try{for(C.s();!(v=C.n()).done;){var w,k=v.value;w=k.entityDesc||k.indices.length>1?k.indices.map((function(e){return a[e]})):a[k.indices[0]],I.attributes.push({value:w,info:k}),k.isOrdered&&(I.sortValue=e.sortValue(w,k.desc,k.entityDesc))}}catch(M){C.e(M)}finally{C.f()}b.isOrdered&&(I.sortValue=e.sortValue(I.value,b.desc,b.entityDesc)),(p?p.children:o).push(I),c(I),g={cell:I},Object(W.n)(f)?l.values[f]=g:l.undefined=g}l=g}}catch(M){d.e(M)}finally{d.f()}};for(d.s();!(u=d.n()).done;)b()}catch(f){d.e(f)}finally{d.f()}}return{hash:r,roots:o}},f=b(c),m=f.hash,g=f.roots,p=[];g.length>0&&r(g,p);for(var h,v=[],y=0,I=p;y<I.length;y++){var C=I[y];v[C.level]?v[C.level].push(C):v[C.level]=[C]}l&&a&&(h={label:n.ColumnsTotalLabel?function(){return i.localize(n.ColumnsTotalLabel,n.ColumnsTotalLabel2,n.ColumnsTotalLabel3)}:function(){return e.translate.instant("GrandTotal")},isTotal:a});var w,k,M=b(s,p),V=M.hash,T=M.roots;if(d){u&&(w={label:n.RowsTotalLabel?function(){return i.localize(n.RowsTotalLabel,n.RowsTotalLabel2,n.RowsTotalLabel3)}:function(){return e.translate.instant("GrandTotal")},isTotal:u}),k=[];for(var E=l?p.length+1:p.length,U=0;U<E;U++)k.push({aggValues:[],values:[],classes:[],column:p[U],row:null,isTotal:u})}if(t.uniqueMeasureAggregations.length>0){var x,R=_createForOfIteratorHelper(t.result);try{var D=function(){var e,n=x.value,i=p.length,r=m,a=_createForOfIteratorHelper(c);try{for(a.s();!(e=a.n()).done;){var l=e.value,u=n[l.keyIndex];r=Object(W.n)(u)?r.values[u]:r.undefined,i=r.cell.index}}catch(w){a.e(w)}finally{a.f()}var d,b=void 0,f=k,g=V,h=_createForOfIteratorHelper(s);try{for(h.s();!(d=h.n()).done;){var v=d.value,y=n[v.keyIndex];(b=(g=Object(W.n)(y)?g.values[y]:g.undefined).cell).measures=b.measures||[],f=b.measures}}catch(w){h.e(w)}finally{h.f()}for(var I=f,C=function(){for(var e=i,r=I[e];r;)if(t.uniqueMeasureAggregations.forEach((function(e,t){var i=e.exp,c=e.index,a=o(n[c]),l=o(r.aggValues[t]);switch(i.nameLower){case"sum":case"count":r.aggValues[t]=null===l&&null===a?null:l+a;break;case"max":r.aggValues[t]=null===l?a:null===a?l:l<a?a:l;break;case"min":r.aggValues[t]=null===l?a:null===a||l<a?l:a}})),r.column&&r.column.parent)e=r.column.parent.index,r=I[e];else{if(e===p.length)break;r=I[e=p.length]}var c=I[i];if(c.row&&c.row.parent)I=c.row.parent.measures;else{if(I===k)return"break";I=k}};I&&"break"!==C(););};for(R.s();!(x=R.n()).done;)D()}catch(j){R.e(j)}finally{R.f()}}if(t.measureInfos.length>0){var B=function(n,i){t.measureInfos.forEach((function(r,o){var c=gr.evaluateExp(r.exp,n.aggValues,e.arguments,e.workspace);n.values[o]=c,n.classes[o]=r.danger&&gr.evaluateExp(r.danger,n.aggValues,e.arguments,e.workspace)?"t-danger":r.warning&&gr.evaluateExp(r.warning,n.aggValues,e.arguments,e.workspace)?"t-warning":r.success&&gr.evaluateExp(r.success,n.aggValues,e.arguments,e.workspace)?"t-success":null,t.havingExp&&(i||n.column&&n.column.children.length>0||!n.column&&t.columnInfos.length>0)&&(n.disableDrilldown=!0),r.isOrdered&&n.row&&(n.row.sortValue=c)}))};if(k){var S,_=t.rowInfos.length>0,O=_createForOfIteratorHelper(k);try{for(O.s();!(S=O.n()).done;){var L=S.value;B(L,_)}}catch(j){O.e(j)}finally{O.f()}}!function e(t){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,c=o.children.length>0,a=_createForOfIteratorHelper(o.measures);try{for(a.s();!(r=a.n()).done;){var l=r.value;B(l,c)}}catch(j){a.e(j)}finally{a.f()}c&&e(o.children)}}catch(j){i.e(j)}finally{i.f()}}(T)}var F=[];T.length>0&&r(T,F),t.pivot={maxVisibleLevel:0,rowSpan:0,colSpan:0,columnHeaders:v,columns:p,rows:F,rowsGrandTotalMeasures:k,columnsGrandTotalLabel:h,rowsGrandTotalLabel:w,columnsGrandTotalsIncluded:l},e.recomputeColumnSpans(t.pivot),v.forEach((function(e){return e.forEach((function(e){e.expandedColSpan=0}))}));for(var A=v.length-1;A>=0;A--)for(var P=v[A].length-1;P>=0;P--){var N=v[A][P];N.expandedColSpan=N.expandedColSpan||t.measureInfos.length||1,N.parent&&(N.parent.expandedColSpan+=N.expandedColSpan)}v.forEach((function(e){return e.forEach((function(e){e.expandedRowSpan=0===e.children.length?v.length-e.level:1}))}))}(),t.pivot}},{key:"rowAttributePlacement",get:function(){return this.workspace.ws.isRtl?this._rowAttributePlacementRtl:this._rowAttributePlacement}},{key:"columnHeaders",get:function(){return this.pivot.columnHeaders}},{key:"columnCells",get:function(){return this.pivot.columns}},{key:"tooManyColumns",get:function(){return this.pivot.columns.length*(this.measures.length||1)>this.maximumColumns}},{key:"rows",get:function(){var e=this.pivot;return this._currentRows!==e.rows&&(this._currentRows=e.rows,this.recomputeVisibleRows()),this._modifiedRows}},{key:"showRowDimensionLabel",get:function(){return!1}},{key:"singleRowDimension",get:function(){var e=this.state;if(e.rowInfos&&1===e.rowInfos.length)return e.rowInfos[0]}},{key:"showMeasureLabelsRow",get:function(){var e=this.state;if(e.measureInfos.length>0&&(e.measureInfos.length>1||0===e.columnInfos.length))return!0;var t=this.singleRowDimension;return!this.showHeaderRow(0)&&!!t&&t.attributes.length>0}},{key:"showColumnsGrandTotalsMeasureLabels",get:function(){return!!this.pivot.columnsGrandTotalsIncluded}},{key:"rowSpan",get:function(){return this.pivot.rowSpan}},{key:"colSpan",get:function(){return this.pivot.colSpan}},{key:"rowsGrandTotalMeasures",get:function(){return this.pivot.rowsGrandTotalMeasures}},{key:"columnsGrandTotalLabel",get:function(){return this.pivot.columnsGrandTotalLabel}},{key:"rowsGrandTotalLabel",get:function(){return this.pivot.rowsGrandTotalLabel}},{key:"measures",get:function(){return this.state.measureInfos}},{key:"addRowExpanders",get:function(){var e=this.state.rowInfos;return e.length>1||e.length>0&&e[0].showAsTree}},{key:"point",get:function(){var e=this.pivot,t=this.state;if(t.currentPivotForPoint!==e){t.currentPivotForPoint=e;var n=t.singleNumericMeasureIndex,i=t.measureInfos[n];if(!i||!e.rowsGrandTotalMeasures||e.rowsGrandTotalMeasures.length<1)t.point=null;else if(0===t.dimensionInfos.length){var r=e.rowsGrandTotalMeasures[0],o=r.values[n]||0;t.point=Object(Ie.c)(o,i.desc,this.workspace,this.translate),t.pointClass=r.classes[n]}else t.point=null,t.pointClass=null;delete t.singleCellsHash,delete t.singleCellsUndefined}return t.point}},{key:"pointClass",get:function(){return this.state.pointClass}},{key:"single",get:function(){var e=this.pivot,t=this.state;if(t.currentPivotForSingle!==e||t.currentLangForSingle!==this.translate.currentLang||t.currentCalendarForSingle!==this.workspace.calendar){t.currentPivotForSingle=e,t.currentLangForSingle=this.translate.currentLang,t.currentCalendarForSingle=this.workspace.calendar;var n=t.singleNumericMeasureIndex;if(t.measureInfos[n]&&e)if(1===t.dimensionInfos.length)try{var i,r=t.rowInfos.length>0?e.rows.map((function(e){return e.measures[0]})):e.rowsGrandTotalMeasures,o=r[0].row||r[0].column,c=r[1]?r[1].row||r[1].column:void 0,a=this.minDate(o,c),l=a.minDate,s=a.minString,u=l?new Date(l.getTime()):null,d=s,b=0,f=[],m=0,g=_createForOfIteratorHelper(r);try{for(g.s();!(i=g.n()).done;){var p=i.value,h=p.row||p.column;if(h&&!h.isAncestor){for(;d&&d<h.valueId;)f.push({name:this.chartDimensionCellFromDimensionCell(h.info,d,d,void 0,m++),value:0}),d=this.incrementDate(u,h);var v=this.colorFromClass(p.classes[n]),y=p.values[n]||0;b+=y,f.push({name:this.chartDimensionCellFromDimensionCell(h.info,h.value,h.valueId,v,m++),value:y}),d&&h.valueId&&(d=this.incrementDate(u,h))}}}catch(I){g.e(I)}finally{g.f()}t.single=f,e.rowsGrandTotalMeasures&&e.rowsGrandTotalMeasures.length>0&&(t.totalEqualsSum=Math.abs(Math.round(1e6*(e.rowsGrandTotalMeasures[e.rowsGrandTotalMeasures.length-1].values[n]||0))-Math.round(1e6*b))<2),delete t.singleCellsHash,delete t.singleCellsUndefined}catch(C){t.reportStatus=S.i.error,t.errorMessage=C.message}else t.single=null;else t.single=null}return t.single}},{key:"multi",get:function(){var e=this.pivot,t=this.state;if(t.currentPivotForMulti!==e||t.currentLangForMulti!==this.translate.currentLang||t.currentCalendarForMulti!==this.workspace.calendar){t.currentPivotForMulti=e,t.currentLangForMulti=this.translate.currentLang,t.currentCalendarForMulti=this.workspace.calendar;var n=t.singleNumericMeasureIndex,i=t.measureInfos[n];if(i&&e)if(1===t.dimensionInfos.length){var r=this.single,o=i.label(),c=new S.a(o,o,null,1);t.multi=[{name:c,series:r}]}else if(2===t.dimensionInfos.length){var a=t.dimensionInfos[0],l=t.dimensionInfos[1],s=[];if(2===t.rowInfos.length||2===t.columnInfos.length){var u,d,b,f;2===t.rowInfos.length?(d=e.rows,u=function(e){return e.measures[0]}):(d=e.columns,u=function(t){return e.rowsGrandTotalMeasures[t.index]});var m,g,p=0,h=_createForOfIteratorHelper(d);try{for(h.s();!(g=h.n()).done;){var v=g.value;if(!v.isAncestor&&(v.info===a&&(b=this.chartDimensionCellFromDimensionCell(v.info,v.value,v.valueId,void 0,p++),f=[],m=0,s.push({name:b,series:f})),v.info===l)){var y=u(v),I=this.colorFromClass(y.classes[n]),C=this.chartDimensionCellFromDimensionCell(v.info,v.value,v.valueId,I,m++,b);f.push({name:C,value:y.values[n]||0})}}}catch(q){h.e(q)}finally{h.f()}}else{var w,k=e.rows[0],M=e.rows[1],V=this.minDate(k,M),T=V.minDate,E=V.minString,U=0,x=_createForOfIteratorHelper(e.columns);try{for(x.s();!(w=x.n()).done;){var R=w.value;if(!R.isAncestor){var D=this.chartDimensionCellFromDimensionCell(R.info,R.value,R.valueId,void 0,U++),B=[];s.push({name:D,series:B});var _,O=0,L=T?new Date(T.getTime()):null,F=E,A=_createForOfIteratorHelper(e.rows);try{for(A.s();!(_=A.n()).done;){var P=_.value;if(!P.isAncestor){for(;F&&P.valueId>F;)B.push({name:this.chartDimensionCellFromDimensionCell(P.info,F,F,void 0,O++),value:0}),F=this.incrementDate(L,P);var N=P.measures[R.index],j=this.colorFromClass(N.classes[n]),W=this.chartDimensionCellFromDimensionCell(P.info,P.value,P.valueId,j,O++,D);B.push({name:W,value:N.values[n]||0}),F&&(F=this.incrementDate(L,P))}}}catch(q){A.e(q)}finally{A.f()}}}}catch(q){x.e(q)}finally{x.f()}}t.multi=s}else t.multi=null;else t.multi=null;delete t.singleCellsHash,delete t.singleCellsUndefined}return t.multi}},{key:"firstDimensionLabel",get:function(){var e=this.state.dimensionInfos[0];return e?e.label():""}},{key:"secondDimensionLabel",get:function(){var e=this.state.dimensionInfos[1];return e?e.label():""}},{key:"measureLabel",get:function(){var e=this.state,t=e.measureInfos[e.singleNumericMeasureIndex];return t?t.label():""}},{key:"numberOfDimensions",get:function(){return this.state.dimensionInfos.length}},{key:"supportsPoint",get:function(){return 0===this.numberOfDimensions}},{key:"supportsSingle",get:function(){return 1===this.numberOfDimensions}},{key:"supportsMulti",get:function(){return 2===this.numberOfDimensions}},{key:"selectInfos",get:function(){return this.state.selectInfos}},{key:"flat",get:function(){if(!this.showResults)return[];var e=this.state,t=e.result;return e.currentResultForFlat!==t&&(e.currentResultForFlat=t,e.flat=this.flatInner(t,e)),e.flat}},{key:"canOrderByFlat",get:function(){return!this.definition.Top}},{key:"isDescending",get:function(){return"desc"===this.state.orderbyDir}}]),e}()).DEFAULT_PAGE_SIZE=60,fa.CACHE_BUSTER=1,fa.\u0275fac=function(e){return new(e||fa)(r.Pb(S.m),r.Pb(G.e),r.Pb(Y.a),r.Pb(r.h),r.Pb(i.e),r.Pb(i.a))},fa.\u0275cmp=r.Jb({type:fa,selectors:[["t-report-results"]],viewQuery:function(e,t){var n;1&e&&r.Yc(vr,!0),2&e&&r.Ec(n=r.ic())&&(t.flatHeader=n.first)},inputs:{state:"state",definition:"definition",arguments:"arguments",view:"view",refresh:"refresh",export:"export",mode:"mode",disableDrilldown:"disableDrilldown"},outputs:{silentRefreshError:"silentRefreshError",exportStarting:"exportStarting",exportSuccess:"exportSuccess",exportError:"exportError",orderbyChange:"orderbyChange"},features:[r.zb],decls:8,vars:2,consts:[["autocell",""],["undefinedLabel",""],[4,"ngIf"],["nonresult",""],[3,"ngSwitch",4,"ngIf","ngIfElse"],[3,"ngSwitch"],["class","d-inline text-nowrap",4,"ngSwitchCase"],["class","d-inline",3,"float",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"d-inline","text-nowrap"],["class","text-white px-2 font-weight-normal",3,"background-color",4,"ngIf","ngIfElse"],["nocolor",""],[1,"text-white","px-2","font-weight-normal"],[1,"d-inline"],[1,"font-italic","text-muted"],[1,"w-100","h-100","table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-hover","table-striped","table-sm","bg-white","border-bottom","t-master-table","text-nowrap"],["class","t-pointer",3,"t-highlight",4,"cdkVirtualFor","cdkVirtualForOf"],[4,"ngTemplateOutlet"],["flatHeader",""],[2,"width","15px"],[3,"width","text-right","dropdown-toggle","click",4,"ngFor","ngForOf"],[3,"click"],[1,"t-pointer"],[3,"width","click",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["dimattribtues",""],["class","h-100 w-100","style","position: relative;",4,"ngIf"],["class","w-100 p-3 px-4",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-weight-bold","p-1"],[1,"p-1","align-middle","text-truncate"],["class","h-100","itemSize","32",4,"ngIf","ngIfElse"],["toomanycolumnserror",""],["itemSize","32",1,"h-100"],[1,"table","table-hover","table-bordered","border","table-sm","bg-white","t-report-table","text-nowrap"],["class","t-report-row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["class","t-report-row",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","font-weight-bold t-report-dimension align-middle",3,"rowSpan","colSpan",4,"ngIf"],[1,"t-report-dimension",3,"colSpan","rowSpan"],["class","t-report-dimension",3,"rowSpan",4,"ngFor","ngForOf"],[1,"t-report-dimension",3,"rowSpan"],["class","t-report-dimension","container","body","placement","bottom-left","triggers","click",3,"rowSpan","colSpan","ngbPopover","disablePopover",4,"ngIf"],["attributes",""],["container","body","placement","bottom-left","triggers","click",1,"t-report-dimension",3,"rowSpan","colSpan","ngbPopover","disablePopover"],[1,"border-0","px-2","h-100","font-weight-normal",2,"background-color","transparent",3,"click"],["icon","angle-right",3,"flip","rotate"],[1,"font-weight-bold","t-report-dimension","align-middle",3,"rowSpan","colSpan"],["class","t-report-dimension",4,"ngFor","ngForOf"],[1,"t-report-dimension"],["class","t-report-dimension",3,"font-weight-bold",4,"ngFor","ngForOf","ngForTrackBy"],["class","t-report-dimension",3,"font-weight-bold",4,"ngFor","ngForOf"],[1,"t-report-row"],["container","body","triggers","mouseenter:mouseleave",1,"t-report-dimension",3,"ngbPopover","placement","disablePopover"],["class","border-0 px-2 h-100 font-weight-normal","style","background-color: transparent",3,"margin-left","margin-right","opacity","disabled","click",4,"ngIf"],[1,"border-0","px-2","h-100","font-weight-normal",2,"background-color","transparent",3,"disabled","click"],["class","t-report-attribute",4,"ngFor","ngForOf"],[1,"t-report-attribute"],[3,"class","t-disable-drilldown","font-weight-bold","t-highlight","click",4,"ngFor","ngForOf"],["class","t-report-measure",3,"click",4,"ngIf"],[1,"t-report-measure",3,"click"],["class","font-weight-bold t-report-dimension align-middle",4,"ngIf"],[1,"font-weight-bold","t-report-dimension","align-middle"],["class","border-0 px-2 h-100 font-weight-normal","style","background-color: transparent","style","opacity: 0","disabled","",4,"ngIf"],["disabled","",1,"border-0","px-2","h-100","font-weight-normal",2,"opacity","0"],["icon","angle-right"],[1,"w-100","pt-3"],[1,"h-100","w-100",2,"position","relative"],[2,"position","absolute","left","0","right","0","top","0","bottom","0",3,"ngSwitch"],[4,"ngSwitchCase"],["notsupported",""],["tooltip",""],["seriesTooltip",""],["heatmapTooltip",""],["class","h-100 d-flex justify-content-center align-items-center py-4",4,"ngIf","ngIfElse"],[1,"h-100","d-flex","justify-content-center","align-items-center","py-4"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["tooltipTemplate",""],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","labelFormatting","labels","trimLabels","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","labels","trimLabels","select"],["class","t-ltr",3,"animations","scheme","customColors","results","doughnut","labelFormatting","labels","trimLabels","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","doughnut","labelFormatting","labels","trimLabels","select"],["class","t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select"],["class","t-ltr","cardColor","#EAF0F5","textColor","black",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select",4,"ngIf","ngIfElse"],["cardColor","#EAF0F5","textColor","black",1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","max","showText","valueFormatting","axisTickFormatting","legend","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","max","showText","valueFormatting","axisTickFormatting","legend","select"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","results","xAxis","yAxis","showXAxisLabel","legend","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","results","xAxis","yAxis","showXAxisLabel","legend","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["seriesTooltipTemplate",""],["class","t-ltr",3,"animations","scheme","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"text-white","p-1"],[2,"font-size","130%"],[1,"area-tooltip-container"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[1,"tooltip-item-color"],["class","w-100 pt-3 d-flex justify-content-center",4,"ngIf"],["class","w-100 px-3 pt-3",4,"ngIf"],["class","w-100 pt-3",4,"ngIf"],["class","w-100 px-4 pt-3",4,"ngIf"],[1,"w-100","pt-3","d-flex","justify-content-center"],[3,"scale"],[1,"w-100","px-3","pt-3"],[1,"w-100","px-4","pt-3"]],template:function(e,t){1&e&&(r.Rc(0,Tr,1,2,"ng-template",null,0,r.Sc),r.Rc(2,Er,3,3,"ng-template",null,1,r.Sc),r.Rc(4,Or,8,3,"ng-container",2),r.Rc(5,aa,3,2,"ng-container",2),r.Rc(6,ba,4,4,"ng-template",null,3,r.Sc)),2&e&&(r.Bb(4),r.sc("ngIf",t.isDetails),r.Bb(1),r.sc("ngIf",t.isSummary))},directives:[x.u,x.y,x.z,x.A,pr.e,pr.a,pr.d,x.B,x.t,X.C,ne.b,ke.a,hr.p,hr.k,hr.S,hr.kb,hr.Q,hr.D,hr.o,hr.r,hr.q,hr.j,hr.m,hr.l,hr.L,hr.c,hr.I,ye.a],pipes:[G.d],encapsulation:2,changeDetection:0}),fa),ha=function(e,t){return[e,t]};function va(e,t){if(1&e&&(r.Vb(0,"a",1),r.qc(1),r.Ub()),2&e){var n=r.lc();r.sc("routerLink",r.xc(1,ha,n.link,n.itemId))}}var ya,Ia=["*"],Ca=((ya=function(){function e(){_classCallCheck(this,e),this.w100=!0}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ya)},ya.\u0275cmp=r.Jb({type:ya,selectors:[["t-view-link"]],hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("w-100",t.w100)},inputs:{link:"link",itemId:"itemId"},ngContentSelectors:Ia,decls:1,vars:1,consts:[["class","t-view-link",3,"routerLink",4,"ngIf"],[1,"t-view-link",3,"routerLink"]],template:function(e,t){1&e&&(r.rc(),r.Rc(0,va,2,4,"a",0)),2&e&&r.sc("ngIf",t.itemId)},directives:[x.u,i.h],encapsulation:2}),ya),wa=n("xgIS"),ka=n("XqQ8"),Ma=n("lJxs"),Va=n("Kj3r"),Ta=["input"],Ea=["detailsWrapperTemplate"],Ua=["masterWrapperTemplate"],xa=["detailsOptionsTemplate"],Ra=["masterOptionsTemplate"];function Da(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",16),r.hc("click",(function(){return r.Ic(n),r.lc().onEditFromFocus()})),r.mc(1,"translate"),r.Qb(2,"fa-icon",17),r.Ub()}if(2&e){var i=r.lc();r.Gb("btn-light",!i.isDark)("text-primary",!i.isDark)("btn-secondary",i.isDark)("t-text-whitish",i.isDark),r.tc("title",r.nc(1,10,"Edit")),r.sc("disabled",i.disableEditSelected)}}function Ba(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",18),r.hc("click",(function(){return r.Ic(n),r.lc().openSearchModal()})),r.mc(1,"translate"),r.Qb(2,"fa-icon",19),r.Ub()}if(2&e){var i=r.lc();r.Gb("btn-light",!i.isDark)("text-primary",!i.isDark)("btn-secondary",i.isDark)("t-text-whitish",i.isDark),r.tc("title",r.nc(1,9,"Search"))}}function Sa(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",21),r.hc("mouseenter",(function(){r.Ic(n);var e=t.index;return r.lc(2).onMouseEnter(e)}))("focus",(function(){r.Ic(n);var e=t.$implicit;return r.lc(2).onFocus(e)})),r.Tc(1),r.Ub()}if(2&e){var i=t.$implicit,o=t.index,c=r.lc(2);r.Gb("active",o===c.highlightedIndex),r.Bb(1),r.Vc(" ",c.formatterInner(i)," ")}}function _a(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Sa,2,3,"button",20),r.Sb()),2&e){var n=r.lc();r.Bb(1),r.sc("ngForOf",n.searchResults)}}function Oa(e,t){1&e&&r.Qb(0,"t-spinner")}function La(e,t){if(1&e&&(r.Vb(0,"t-error-message"),r.Tc(1),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.Vc(" ",n.errorMessage,"")}}function Fa(e,t){1&e&&(r.Vb(0,"span",22),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"NoItemsFound")))}function Aa(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Qb(1,"hr"),r.Vb(2,"div",23),r.Vb(3,"button",24),r.hc("click",(function(){return r.Ic(n),r.lc().onCreateFromFocus()})),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Sb()}if(2&e){var i=r.lc();r.Bb(2),r.sc("placement",i.placement)("ngbTooltip",i.createNewTooltip),r.Bb(1),r.Gb("text-primary",i.canCreateNew&&!i.isDark)("t-text-whitish",i.canCreateNew&&i.isDark)("text-muted",!i.canCreateNew)("active",i.highlightCreateNew),r.sc("disabled",!i.canCreateNew),r.Bb(1),r.Vc(" ",r.nc(5,12,"Create"),"... ")}}function Pa(e,t){1&e&&r.Rb(0)}var Na=function(e,t,n,i,r){return{update:e,modal:t,initialText:n,idString:i,definitionId:r}};function ja(e,t){if(1&e&&r.Rc(0,Pa,1,0,"ng-container",25),2&e){var n=t.$implicit,i=r.lc();r.sc("ngTemplateOutlet",i.detailsTemplate)("ngTemplateOutletContext",r.Ac(2,Na,i.onUpdate,n,i.initialText,i.idString,i.definitionId))}}function Wa(e,t){1&e&&r.Rb(0)}var qa=function(e,t,n,i,r){return{create:e,update:t,modal:n,filter:i,definitionId:r}};function Qa(e,t){if(1&e&&r.Rc(0,Wa,1,0,"ng-container",25),2&e){var n=t.$implicit,i=r.lc();r.sc("ngTemplateOutlet",i.masterTemplate)("ngTemplateOutletContext",r.Ac(2,qa,i.onCreateFromMasterModal,i.onUpdate,n,i.filter,i.definitionId))}}function Ha(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",36),r.Vb(1,"button",37),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc().$implicit.close(e)})),r.Tc(2),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2);r.sc("placement",o.placement)("ngbTooltip",o.createFromOptionsTooltip(i)),r.Bb(1),r.sc("disabled",!o.canCreateFromOptions(i)),r.Bb(1),r.Vc(" ",o.createOptionName(i)," ")}}function $a(e,t){if(1&e&&(r.Vb(0,"div",26),r.Vb(1,"h5",27),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",28),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",29),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",30),r.Vb(8,"div",31),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Rc(11,Ha,3,4,"div",32),r.Ub(),r.Vb(12,"div",33),r.Vb(13,"button",34),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(14,"fa-icon",35),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,4,"CreateOptions")," "),r.Bb(7),r.Vc(" ",r.nc(10,6,"CreateOptionsMessage")," "),r.Bb(2),r.sc("ngForOf",n.createOptions),r.Bb(4),r.Vc(" \xa0",r.nc(16,8,"Cancel")," ")}}function Ga(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",36),r.Vb(1,"button",38),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc().$implicit.close(e)})),r.Tc(2),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2);r.sc("placement",o.placement)("ngbTooltip",o.createFromOptionsTooltip(i)),r.Bb(2),r.Vc(" ",o.searchOptionName(i)," ")}}function za(e,t){if(1&e&&(r.Vb(0,"div",26),r.Vb(1,"h5",27),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",28),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",29),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",30),r.Vb(8,"div",31),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Rc(11,Ga,3,3,"div",32),r.Ub(),r.Vb(12,"div",33),r.Vb(13,"button",34),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(14,"fa-icon",35),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,4,"SearchOptions")," "),r.Bb(7),r.Vc(" ",r.nc(10,6,"SearchOptionsMessage")," "),r.Bb(2),r.sc("ngForOf",n.searchOptions),r.Bb(4),r.Vc(" \xa0",r.nc(16,8,"Cancel")," ")}}var Ja,Ka,Ya=function(e){return e.showSpinner="showSpinner",e.showResults="showResults",e.showError="showError",e}({}),Xa=((Ka=function(){function e(t,n,i,o){var c=this;_classCallCheck(this,e),this.apiService=t,this.workspace=n,this.modalService=i,this.translate=o,this.additionalSelect=null,this.ensureAdditionalSelect=!1,this.includeInactive=!1,this.theme="light",this.definitionIds=[],this.entityLoaded=new r.n,this.w100=!0,this.MIN_CHARS_TO_SEARCH=1,this.SEARCH_PAGE_SIZE=15,this.cancelRunningCall$=new U.a,this.notifyFetchUnloadedItem$=new U.a,this._status=null,this._isDisabled=!1,this._searchResults=[],this._highlightedIndex=0,this._idString="new",this.api=this.apiService.crudFactory("",null),this.formatter=function(e){return c.descriptor.format(e)},this.focus=function(){c.input.nativeElement.focus()},this.onChange=function(e){},this.onTouched=function(){},this.formatterInner=function(e){var t=c.workspace.current.get(c.collection,e);return e&&(!t||c.ensureAdditionalSelect&&c.additionalSelectKey&&!t.EntityMetadata[c.additionalSelectKey])?(c.fetchUnloadedItem(e),""):c.formatter(t)},this.hasCreatePermissions=function(e){var t=c.apiEndpoint(e);return c.workspace.current.canCreate(t)},this.hasReadPermissions=function(e){var t=c.apiEndpoint(e);return c.workspace.current.canRead(t)},this.onUpdate=function(e){c.chooseItem(e)},this.onCreateFromKeyDown=function(){c.canCreateNew&&(c.status=null,c.onTouched(),c.openCreateModal())},this.onCreateFromMasterModal=function(){c.canCreateNew&&(c.onTouched(),c.openCreateModal(c.definitionId))},this.onCreateFromFocus=function(){c.canCreateNew&&c.openCreateModal()},this.onEditFromFocus=function(){c.canEdit&&c.openEditModalInner()},this.openSearchModal=function(){if((c.searchOptions.length||c.allDefinitionIds.length)>1){var e=c.isDark?"t-dark-theme":null;setTimeout((function(){c.modalService.open(c.masterOptionsTemplate,{windowClass:e}).result.then((function(e){c.openSearchModalInner(e)}),(function(e){}))}),0)}else c.openSearchModalInner(c.searchOptions[0]||c.allDefinitionIds[0])},this.openCreateModal=function(e){if(e&&c.createOptions.some((function(t){return t===e})))c.openCreateModalInner(e);else if(c.createOptions.length>1){var t=c.isDark?"t-dark-theme":null;setTimeout((function(){c.modalService.open(c.detailsOptionsTemplate,{windowClass:t}).result.then((function(e){c.canCreateFromOptions(e)&&c.openCreateModalInner(e)}),(function(e){}))}),0)}else c.openCreateModalInner(c.createOptions[0])},this.openCreateModalInner=function(e){c._definitionId=e,c._idString="new",setTimeout((function(){c.modalService.open(c.detailsWrapperTemplate,{windowClass:c.detailsModalWindowClass}).result.then(c.onFocusInput,c.onFocusInput)}),0)},this.openEditModalInner=function(){c.collection&&c.workspace.current[c.collection]&&c.workspace.current[c.collection][c.chosenItem]&&(c._idString=c.chosenItem.toString(),c._definitionId=c.chosenItemDefinitionId,c._idString&&c.modalService.open(c.detailsWrapperTemplate,{windowClass:c.detailsModalWindowClass}).result.then(c.onFocusInput,c.onFocusInput))},this.onFocusInput=function(){c.input.nativeElement.focus()},this.canUpdatePermissions=function(e){var t=c.apiEndpoint(e);return c.workspace.current.canUpdate(t,null)},this.canCreateFromOptions=function(e){return c.hasCreatePermissions(e)},this.createFromOptionsTooltip=function(e){return c.hasCreatePermissions(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.apiEndpoint(this.definitionIdsSingleOrDefault);this.api=this.apiService.crudFactory(t,this.cancelRunningCall$),this.subscriptions=new O.a,this.subscriptions.add(this.notifyFetchUnloadedItem$.pipe(Object(ka.a)((function(t){return e.doFetchUnloadedItem(t)}))).subscribe()),this.subscriptions.add(Object(wa.a)(this.input.nativeElement,"input").pipe(Object(Ma.a)((function(e){return e.target.value})),Object(P.a)((function(t){e._initialText=t,e._searchResults=[],e.status=null,e.cancelRunningCall$.next(),t||e.chooseItem(null)})),Object(Va.a)(20),Object(F.a)((function(t){if(!t||t.length<e.MIN_CHARS_TO_SEARCH)return Object(L.a)(null);e.status=Ya.showSpinner;var n={expand:e.expand,select:Object(W.e)(e.entityDescriptor(),e.additionalSelect),search:t,top:e.SEARCH_PAGE_SIZE,skip:0,filter:e.queryFilter};return e.api.getEntities(n).pipe(Object(P.a)((function(){return e.status=Ya.showResults})),Object(j.a)((function(t){return e._errorMessage=t.error,e.status=Ya.showError,Object(L.a)(null)})))}))).subscribe((function(t){if(t){var n=e.additionalSelectKey;if(n){var i,r=_createForOfIteratorHelper(t.Result);try{for(r.s();!(i=r.n()).done;)i.value.EntityMetadata[n]=2}catch(o){r.e(o)}finally{r.f()}}e._searchResults=Object(W.c)(t,e.workspace)}e._highlightedIndex=0}))),this.subscriptions.add(this.translate.onLangChange.subscribe((function(){e.updateUI(e.chosenItem)})))}},{key:"identical",value:function(e,t){return!e&&!t||!!e&&!!t&&e.length===t.length&&e.every((function(e,n){return e===t[n]}))}},{key:"ngOnChanges",value:function(e){(e.collection&&!e.collection.isFirstChange()||e.definitionIds&&!e.definitionIds.isFirstChange()&&!this.identical(e.definitionIds.currentValue,e.definitionIds.previousValue))&&(this.ngOnDestroy(),this.ngOnInit())}},{key:"ngOnDestroy",value:function(){this.subscriptions&&this.subscriptions.unsubscribe()}},{key:"entityDescriptor",value:function(e){var t=this.collection;return t?Si.h[t](this.workspace,this.translate,e):null}},{key:"apiEndpoint",value:function(e){var t=this.entityDescriptor(e);return t?t.apiEndpoint:null}},{key:"fetchUnloadedItem",value:function(e){this.notifyFetchUnloadedItem$.next(e)}},{key:"doFetchUnloadedItem",value:function(e){var t=this,n=this.descriptor.properties.Id,i={filter:n&&"text"===n.control?"Id eq '".concat(e,"'"):"Id eq ".concat(e),expand:this.expand,select:Object(W.e)(this.entityDescriptor(),this.additionalSelect)};return this.api.getEntities(i).pipe(Object(P.a)((function(n){var i=t.additionalSelectKey,r=n.Result[0];r?(i&&(r.EntityMetadata[i]=2),Object(W.c)(n,t.workspace),t.chosenItem===e&&t.updateUI(e),t.entityLoaded.emit()):t.chooseItem(null)})),Object(j.a)((function(e){return t.chooseItem(null),Object(L.a)(null)})))}},{key:"onDocumentClick",value:function(e){e.target!==this.input.nativeElement&&(this.status=null)}},{key:"chooseItem",value:function(e){this.chosenItem!==(e=e||void 0)&&(this.chosenItem=e,this.onChange(e)),this.updateUI(e),this.cancelRunningCall$.next(null),this.status=null}},{key:"updateUI",value:function(e){var t=e?this.formatterInner(e):"";this.input.nativeElement.value=t}},{key:"writeValue",value:function(e){e=e||void 0,this.cancelRunningCall$.next(null),this.chosenItem=e,this.updateUI(e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){e&&this.cancelRunningCall$.next(),this._isDisabled=e}},{key:"inactiveFilter",value:function(e){return this.entityDescriptor(e).inactiveFilter}},{key:"onMouseEnter",value:function(e){this._highlightedIndex=e}},{key:"onBlur",value:function(){this.cancelRunningCall$.next(),this.onTouched(),this.updateUI(this.chosenItem)}},{key:"onKeyDown",value:function(e){if(this.status){var t=e.key;if(W.a[t]){var n=0;this.showCreateNew&&this.canCreateNew&&(n+=1);var i=this._searchResults.length-1+n;switch(t){case W.a.ArrowDown:e.preventDefault(),this._searchResults&&(this._highlightedIndex<i?this._highlightedIndex++:this._highlightedIndex=0);break;case W.a.ArrowUp:e.preventDefault(),this._searchResults&&(this._highlightedIndex<=0?this._highlightedIndex=i:this._highlightedIndex--);break;case W.a.Enter:case W.a.Tab:if(this._highlightedIndex===this.indexCreateNew&&this.showCreateNew)this.onCreateFromKeyDown();else{var r=this._searchResults[this._highlightedIndex];r&&(e.preventDefault(),e.stopPropagation()),this.chooseItem(r)}break;case W.a.Escape:e.preventDefault(),this.cancelRunningCall$.next(null),this.status=null}}}}},{key:"onFocus",value:function(e){this.chooseItem(e)}},{key:"openSearchModalInner",value:function(e){this._initialText="",this._definitionId=e,this.modalService.open(this.masterWrapperTemplate,{windowClass:this.masterModalWindowClass}).result.then(this.onFocusInput,this.onFocusInput)}},{key:"searchOptionName",value:function(e){return this.entityDescriptor(e).titlePlural()}},{key:"createOptionName",value:function(e){return this.entityDescriptor(e).titleSingular()}},{key:"additionalSelectKey",get:function(){return this.additionalSelect?"__".concat(this.additionalSelect):null}},{key:"descriptor",get:function(){return Si.h[this.collection](this.workspace,this.translate,this.definitionIdsSingleOrDefault)}},{key:"chosenItemDefinitionId",get:function(){var e=this.entityDescriptor().definitionIds,t=this.workspace.current[this.collection][this.chosenItem];return e&&t?t.DefinitionId:null}},{key:"status",get:function(){return this._status},set:function(e){!this._status&&e&&this.resultsDropdown.open(),this._status&&!e&&this.resultsDropdown.close(),this._status=e}},{key:"isDefinitioned",get:function(){return!!this.entityDescriptor().definitionIds}},{key:"allDefinitionIds",get:function(){return this.isDefinitioned?this.definitionIds&&0!==this.definitionIds.filter((function(e){return!!e})).length?this.definitionIds.filter((function(e){return!!e})):this.entityDescriptor().definitionIds||[]:[]}},{key:"definitionIdsSingleOrDefault",get:function(){var e=this.allDefinitionIds;return e&&1===e.length?e[0]:null}},{key:"createDefinitionIds",get:function(){var e=this;return this.allDefinitionIds.filter((function(t){var n=e.entityDescriptor(t);return!!n&&!n.isArchived}))}},{key:"createDefinitionIdsSingleOrDefault",get:function(){var e=this.createDefinitionIds;return e&&1===e.length?e[0]:null}},{key:"querySelect",get:function(){return Object(W.e)(this.entityDescriptor(),this.additionalSelect)}},{key:"queryFilter",get:function(){var e=this.filter;if(!this.includeInactive){var t=this.inactiveFilter();t&&(e=e?"(".concat(t,") and (").concat(e,")"):t)}if(this.isDefinitioned&&!this.definitionIdsSingleOrDefault&&this.definitionIds&&this.definitionIds.filter((function(e){return!!e})).length>0){var n=this.definitionIds.filter((function(e){return!!e})).map((function(e){return"DefinitionId eq ".concat(e)})).reduce((function(e,t){return"".concat(e," or ").concat(t)}));e=e?"(".concat(n,") and (").concat(e,")"):n}return e}},{key:"searchResults",get:function(){return this._searchResults}},{key:"highlightedIndex",get:function(){return this._highlightedIndex}},{key:"isDisabled",get:function(){return this._isDisabled}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"showSpinner",get:function(){return this.status===Ya.showSpinner}},{key:"showError",get:function(){return this.status===Ya.showError}},{key:"showNoItemsFound",get:function(){return this.status===Ya.showResults&&!!this._searchResults&&0===this._searchResults.length}},{key:"showResults",get:function(){return this.status===Ya.showResults&&!!this._searchResults&&this._searchResults.length>0}},{key:"placement",get:function(){return this.workspace.ws.isRtl?["bottom-right","bottom-left","bottom"]:["bottom-left","bottom-right","bottom"]}},{key:"indexCreateNew",get:function(){return this.searchResults?this.searchResults.length:0}},{key:"showCreateNew",get:function(){return!!this.detailsTemplate&&(this.showNoItemsFound||this.showResults)&&(!this.isDefinitioned||this.createOptions.length>0)}},{key:"highlightCreateNew",get:function(){return this.indexCreateNew===this.highlightedIndex&&this.canCreateNew}},{key:"canCreateNewInner",get:function(){if(this.isDefinitioned){var e=this.createDefinitionIdsSingleOrDefault;return!e||this.hasCreatePermissions(e)}return this.hasCreatePermissions(null)}},{key:"canCreateNew",get:function(){return this.canCreateNewInner}},{key:"createNewTooltip",get:function(){return this.canCreateNewInner?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}},{key:"hasEditPermissions",get:function(){return this.canUpdatePermissions(this.chosenItemDefinitionId)}},{key:"canEdit",get:function(){return this.hasEditPermissions}},{key:"showMagnifier",get:function(){return!!this.masterTemplate}},{key:"showEditSelected",get:function(){return!!this.detailsTemplate&&!!this.chosenItem}},{key:"disableEditSelected",get:function(){return!this.canUpdatePermissions(this.chosenItemDefinitionId)}},{key:"searchOptions",get:function(){var e=this;return this.allDefinitionIds.filter((function(t){return e.hasReadPermissions(t)}))}},{key:"createOptions",get:function(){return this.createDefinitionIds||[]}},{key:"detailsModalWindowClass",get:function(){var e="t-details-modal";return this.isDark&&(e+=" t-dark-theme"),e}},{key:"masterModalWindowClass",get:function(){var e="t-master-modal";return this.isDark&&(e+=" t-dark-theme"),e}},{key:"initialText",get:function(){return this._initialText}},{key:"definitionId",get:function(){return this._definitionId}},{key:"idString",get:function(){return this._idString}},{key:"editSelectedLeftMargin",get:function(){return this.workspace.ws.isRtl?null:"-24px"}},{key:"editSelectedRightMargin",get:function(){return this.workspace.ws.isRtl?"-24px":null}},{key:"inputLeftPadding",get:function(){return this.showEditSelected&&this.workspace.ws.isRtl?"24px!important":null}},{key:"inputRightPadding",get:function(){return this.showEditSelected?this.workspace.ws.isRtl?null:"24px!important":null}},{key:"isDark",get:function(){return"dark"===this.theme}}]),e}()).\u0275fac=function(e){return new(e||Ka)(r.Pb(Y.a),r.Pb(S.m),r.Pb(X.t),r.Pb(G.e))},Ka.\u0275cmp=r.Jb({type:Ka,selectors:[["t-details-picker"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(Ta,!0),r.Oc(X.l,!0),r.Oc(Ea,!0),r.Oc(Ua,!0),r.Oc(xa,!0),r.Oc(Ra,!0)),2&e&&(r.Ec(n=r.ic())&&(t.input=n.first),r.Ec(n=r.ic())&&(t.resultsDropdown=n.first),r.Ec(n=r.ic())&&(t.detailsWrapperTemplate=n.first),r.Ec(n=r.ic())&&(t.masterWrapperTemplate=n.first),r.Ec(n=r.ic())&&(t.detailsOptionsTemplate=n.first),r.Ec(n=r.ic())&&(t.masterOptionsTemplate=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("w-100",t.w100)},inputs:{expand:"expand",additionalSelect:"additionalSelect",ensureAdditionalSelect:"ensureAdditionalSelect",selectTemplate:"selectTemplate",includeInactive:"includeInactive",filter:"filter",theme:"theme",collection:"collection",definitionIds:"definitionIds",masterTemplate:"masterTemplate",detailsTemplate:"detailsTemplate",formatter:"formatter"},outputs:{entityLoaded:"entityLoaded"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:Ka}]),r.zb],decls:24,vars:19,consts:[["ngbDropdown","",3,"placement"],["dropdown","ngbDropdown"],[1,"input-group"],["ngbDropdownAnchor","","autocomplete","off",1,"form-control",3,"disabled","blur","keydown"],["input",""],["class","btn btn-sm t-white-button p-0 px-1","tabindex","-1","type","button",3,"btn-light","text-primary","btn-secondary","t-text-whitish","title","disabled","click",4,"ngIf"],["class","btn btn-sm t-white-button p-0 px-1 t-magnifier-btn","style","width:22.6px;","tabindex","-1","type","button",3,"btn-light","text-primary","btn-secondary","t-text-whitish","title","click",4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","drop",1,"shadow",2,"z-index","1050"],[4,"ngIf"],[1,"text-center"],[1,"pl-2","pr-2"],["class","font-italic text-muted",4,"ngIf"],["detailsWrapperTemplate",""],["masterWrapperTemplate",""],["detailsOptionsTemplate",""],["masterOptionsTemplate",""],["tabindex","-1","type","button",1,"btn","btn-sm","t-white-button","p-0","px-1",3,"title","disabled","click"],["icon","external-link-alt"],["tabindex","-1","type","button",1,"btn","btn-sm","t-white-button","p-0","px-1","t-magnifier-btn",2,"width","22.6px",3,"title","click"],["icon","search"],["class","dropdown-item","style","cursor:default",3,"active","mouseenter","focus",4,"ngFor","ngForOf"],[1,"dropdown-item",2,"cursor","default",3,"mouseenter","focus"],[1,"font-italic","text-muted"],[3,"placement","ngbTooltip"],[1,"dropdown-item","t-slightly-bold",3,"disabled","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-2"],["class","d-inline-block",3,"placement","ngbTooltip",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","m-1",3,"disabled","click"],["ngbAutofocus","",1,"btn","btn-primary","m-1",3,"click"]],template:function(e,t){1&e&&(r.Vb(0,"div",0,1),r.Vb(2,"div",2),r.Vb(3,"input",3,4),r.hc("blur",(function(){return t.onBlur()}))("keydown",(function(e){return t.onKeyDown(e)})),r.Ub(),r.Rc(5,Da,3,12,"button",5),r.Rc(6,Ba,3,11,"button",6),r.Ub(),r.Vb(7,"div",7),r.Rc(8,_a,2,1,"ng-container",8),r.Vb(9,"div",9),r.Vb(10,"span"),r.Rc(11,Oa,1,0,"t-spinner",8),r.Ub(),r.Ub(),r.Vb(12,"div",10),r.Rc(13,La,2,1,"t-error-message",8),r.Rc(14,Fa,3,3,"span",11),r.Ub(),r.Rc(15,Aa,6,14,"ng-container",8),r.Ub(),r.Ub(),r.Rc(16,ja,1,8,"ng-template",null,12,r.Sc),r.Rc(18,Qa,1,8,"ng-template",null,13,r.Sc),r.Rc(20,$a,17,10,"ng-template",null,14,r.Sc),r.Rc(22,za,17,10,"ng-template",null,15,r.Sc)),2&e&&(r.sc("placement",t.placement),r.Bb(2),r.Gb("t-disabled-background",t.isDisabled),r.Bb(1),r.Gb("t-input",!t.isDark)("t-studio-input",t.isDark),r.sc("disabled",t.isDisabled),r.Bb(2),r.sc("ngIf",t.showEditSelected&&!t.isDisabled),r.Bb(1),r.sc("ngIf",t.showMagnifier&&!t.isDisabled),r.Bb(1),r.Gb("t-less-dark",t.isDark),r.Bb(1),r.sc("ngIf",t.showResults),r.Bb(2),r.Gb("t-text-whitish",t.isDark),r.Bb(1),r.sc("ngIf",t.showSpinner),r.Bb(2),r.sc("ngIf",t.showError),r.Bb(1),r.sc("ngIf",t.showNoItemsFound),r.Bb(1),r.sc("ngIf",t.showCreateNew))},directives:[X.l,X.m,x.u,X.p,ne.b,x.t,ye.a,ke.a,X.E,x.B],pipes:[G.d],encapsulation:2}),Ka),Za=((Ja=function(){function e(){_classCallCheck(this,e),this.showCreate=!0,this.ensureAdditionalSelect=!1,this.entityLoaded=new r.n,this.w100=!0}return _createClass(e,[{key:"writeValue",value:function(e){this.picker.writeValue(e)}},{key:"registerOnChange",value:function(e){this.picker.registerOnChange(e)}},{key:"registerOnTouched",value:function(e){this.picker.registerOnTouched(e)}},{key:"setDisabledState",value:function(e){this.picker.setDisabledState(e)}},{key:"onEntityLoaded",value:function(){this.entityLoaded.emit()}}]),e}()).\u0275fac=function(e){return new(e||Ja)},Ja.\u0275cmp=r.Jb({type:Ja,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&r.Oc(Xa,!0),2&e&&r.Ec(n=r.ic())&&(t.picker=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("w-100",t.w100)},inputs:{showCreate:"showCreate",filter:"filter",additionalSelect:"additionalSelect",ensureAdditionalSelect:"ensureAdditionalSelect",theme:"theme"},outputs:{entityLoaded:"entityLoaded"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),Ja),el=n("1bxP"),tl=n("88Q5"),nl=n("1nIS");function il(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-roles-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("showMembers",c.showMembers)("additionalSelect",c.additionalSelect)}}function rl(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-roles-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var ol,cl=((ol=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).showMembers=!0,e}return n}(Za)).\u0275fac=function(e){return al(e||ol)},ol.\u0275cmp=r.Jb({type:ol,selectors:[["t-roles-picker"]],inputs:{showMembers:"showMembers"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:ol}]),r.yb],decls:5,vars:6,consts:[["collection","Role",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","showMembers","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,il,2,4,"ng-template",null,1,r.Sc),r.Rc(3,rl,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),ol),al=r.Xb(cl);function ll(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function sl(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"t-restricted",8),r.Vb(2,"div",9),r.Vb(3,"div"),r.Vb(4,"span"),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Ub(),r.Vb(7,"div"),r.Vb(8,"span"),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Vb(11,"div",10),r.Vb(12,"span"),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e){var n=t.model;r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ExternalId),r.Bb(2),r.Gb("active",!(null!=n&&n.ExternalId)),r.Bb(2),r.Uc(r.nc(6,8,"User_Invited")),r.Bb(2),r.Gb("active",!(null==n||!n.ExternalId)),r.Bb(2),r.Uc(r.nc(10,10,"User_Member")),r.Bb(4),r.Uc(r.nc(14,12,null!=n&&n.ExternalId?"User_Member":"User_Invited"))}}function ul(e,t){if(1&e&&(r.Vb(0,"h2",24),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var dl=function(){return{updateOn:"blur"}};function bl(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,dl))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function fl(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",26),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,dl))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function ml(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",26),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,dl))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function gl(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-image",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Image=e})),r.Ub()}if(2&e){var i=r.lc(),o=i.model,c=i.isEdit;r.sc("src",o.Id?"users/"+o.Id+"/image":null)("imageId",null==o?null:o.ImageId)("ngModel",o.Image)("isEdit",c)}}function pl(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function hl(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",29),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,dl))}}function vl(e,t){if(1&e&&(r.Vb(0,"t-form-group",19),r.mc(1,"translate"),r.Rc(2,pl,2,1,"div",20),r.Rc(3,hl,1,3,"t-text-editor",28),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function yl(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function Il(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,dl))}}function Cl(e,t){if(1&e&&(r.Vb(0,"t-form-group",19),r.mc(1,"translate"),r.Rc(2,yl,2,1,"div",20),r.Rc(3,Il,1,3,"t-text-editor",30),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function wl(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function kl(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,dl))}}function Ml(e,t){if(1&e&&(r.Vb(0,"t-form-group",19),r.mc(1,"translate"),r.Rc(2,wl,2,1,"div",20),r.Rc(3,kl,1,3,"t-text-editor",30),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Vl(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Email)}}function Tl(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Email=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.Email)("ngModelOptions",r.vc(3,dl))("disabled",!o.isNew)}}function El(e,t){if(1&e&&(r.Vb(0,"t-form-group",33),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",34),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"User_LastActivity")),r.Bb(2),r.sc("entity",n)}}function Ul(e,t){if(1&e&&(r.Vb(0,"t-form-group",33),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(3),r.Uc(r.nc(4,4,n?n.IsActive?"Active":"Inactive":""))}}var xl=function(e){return{email:e}};function Rl(e,t){if(1&e&&(r.Vb(0,"div",35),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.Bb(2),r.Uc(r.oc(3,1,"UserInvitationNotice",r.wc(4,xl,null==n?null:n.Email)))}}function Dl(e,t){1&e&&(r.Vb(0,"span",46),r.Qb(1,"fa-icon",47),r.Tc(2,"\xa0 "),r.Ub())}function Bl(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"RoleMembership_Role"))}function Sl(e,t){if(1&e&&(r.Vb(0,"t-restricted",8),r.Vb(1,"t-view-link",56),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc().item,i=r.lc(5);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.Role),r.Bb(1),r.sc("itemId",null==n?null:n.RoleId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("Role",n.RoleId,"Name"))}}function _l(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-roles-picker",57),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.RoleId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item;r.sc("ngModel",i.RoleId)("required",!i.PH)("showMembers",!1)}}function Ol(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",53),r.Rc(1,Sl,3,3,"t-restricted",54),r.Rc(2,_l,1,3,"t-roles-picker",55),r.Ub()),2&e){var n=t.item,i=r.lc(4).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.RoleId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}function Ll(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Memo"))}function Fl(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"t-restricted",8),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc().item;r.Bb(1),r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.Memo),r.Bb(1),r.Uc(n.Memo)}}function Al(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.Memo=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item;r.sc("ngModel",i.Memo)("ngModelOptions",r.vc(2,dl))}}function Pl(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",53),r.Rc(1,Fl,3,2,"div",20),r.Rc(2,Al,1,3,"t-text-editor",30),r.Ub()),2&e){var n=t.item,i=r.lc(4).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Memo),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var Nl=function(){return["RoleId","Memo"]},jl=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Wl=function(e,t){return{RoleId:e,Memo:t}};function ql(e,t){if(1&e&&(r.Vb(0,"t-restricted",8),r.Qb(1,"t-table",48),r.Ub(),r.Rc(2,Bl,2,3,"ng-template",null,49,r.Sc),r.Rc(4,Ol,3,3,"ng-template",null,50,r.Sc),r.Rc(6,Ll,2,3,"ng-template",null,51,r.Sc),r.Rc(8,Pl,3,3,"ng-template",null,52,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.lc(3),l=a.model,s=a.isEdit;r.Gb("p-4",1===(null==l||null==l.EntityMetadata?null:l.EntityMetadata.Roles)),r.sc("metadata",null==l||null==l.EntityMetadata?null:l.EntityMetadata.Roles),r.Bb(1),r.sc("dataSource",null==l?null:l.Roles)("isEdit",s)("columnPaths",r.vc(7,Nl))("columnTemplates",r.xc(14,Wl,r.xc(8,jl,n,i),r.xc(11,jl,o,c)))}}function Ql(e,t){if(1&e&&(r.Vb(0,"li",41),r.Vb(1,"a",42),r.Rc(2,Dl,3,0,"span",43),r.Vb(3,"span",44),r.Tc(4),r.mc(5,"translate"),r.mc(6,"number"),r.Ub(),r.Ub(),r.Rc(7,ql,10,17,"ng-template",45),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(2),r.sc("ngIf",i.showRolesError(n)),r.Bb(2),r.Uc(r.nc(5,2,"User_Roles")+(n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Roles)?"":" ("+r.nc(6,4,null==n||null==n.Roles?null:n.Roles.length)+")"))}}function Hl(e,t){1&e&&(r.Vb(0,"span",46),r.Qb(1,"fa-icon",47),r.Tc(2,"\xa0 "),r.Ub())}function $l(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(5).model;r.Bb(1),r.Uc(null==n?null:n.ContactEmail)}}function Gl(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",63),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(6).model.ContactEmail=e})),r.Ub()}if(2&e){var i=r.lc(6).model;r.sc("ngModel",i.ContactEmail)}}function zl(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Rc(1,Gl,1,1,"t-text-editor",61),r.Vb(2,"button",62),r.hc("click",(function(){r.Ic(n);var e=r.lc(5).model;return r.lc().testEmail(null==e?null:e.ContactEmail)})),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Sb()}if(2&e){var i=r.lc(5),o=i.isEdit,c=i.model;r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("disabled",!(null!=c&&c.ContactEmail)),r.Bb(1),r.Uc(r.nc(4,3,"Test"))}}function Jl(e,t){if(1&e&&(r.Vb(0,"t-form-group",19),r.mc(1,"translate"),r.Rc(2,$l,2,1,"div",20),r.Rc(3,zl,5,5,"ng-container",20),r.Ub()),2&e){var n=r.lc(4),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Entity_ContactEmail"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ContactEmail),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Kl(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(5).model;r.Bb(1),r.Uc(null==n?null:n.ContactMobile)}}function Yl(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"t-text-editor",64),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).model.ContactMobile=e})),r.Ub(),r.Vb(2,"button",62),r.hc("click",(function(){r.Ic(n);var e=r.lc(5).model;return r.lc().testPhoneNumber(null==e?null:e.ContactMobile)})),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Sb()}if(2&e){var i=r.lc(5).model;r.Bb(1),r.sc("ngModel",i.ContactMobile),r.Bb(1),r.sc("disabled",!(null!=i&&i.ContactMobile)),r.Bb(1),r.Uc(r.nc(4,3,"Test"))}}function Xl(e,t){if(1&e&&(r.Vb(0,"t-form-group",19),r.mc(1,"translate"),r.Rc(2,Kl,2,1,"div",20),r.Rc(3,Yl,5,5,"ng-container",20),r.Ub()),2&e){var n=r.lc(4),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Entity_ContactMobile"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ContactMobile),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Zl(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"t-restricted",8),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(5).model,i=r.lc();r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.PreferredLanguage),r.Bb(1),r.Vc(" ",r.nc(3,2,i.languageLookup(null==n?null:n.PreferredLanguage))," ")}}function es(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",66),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).model.PreferredLanguage=e})),r.Ub()}if(2&e){var i=r.lc(5).model,o=r.lc();r.sc("ngModel",i.PreferredLanguage)("choices",o.languageChoices)}}function ts(e,t){if(1&e&&(r.Vb(0,"t-form-group",19),r.mc(1,"translate"),r.Rc(2,Zl,4,4,"div",20),r.Rc(3,es,1,2,"t-selector",65),r.Ub()),2&e){var n=r.lc(4),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"User_PreferredLanguage"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.PreferredLanguage),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ns(e,t){1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"NotifyByEmail")))}function is(e,t){1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"NotifyBySms")))}function rs(e,t){1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"NotifyByPush")))}function os(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(6).model;r.Bb(1),r.Uc(r.nc(2,1,n.EmailNewInboxItem?"Yes":"No"))}}function cs(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",70),r.Vb(1,"input",71),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(6).model.EmailNewInboxItem=e})),r.Ub(),r.Vb(2,"label",72),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(6).model;r.Bb(1),r.sc("ngModel",i.EmailNewInboxItem)}}function as(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,os,3,3,"span",20),r.Rc(2,cs,4,1,"div",69),r.Ub()),2&e){var n=r.lc(5).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function ls(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(6).model;r.Bb(1),r.Uc(r.nc(2,1,n.SmsNewInboxItem?"Yes":"No"))}}function ss(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",70),r.Vb(1,"input",73),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(6).model.SmsNewInboxItem=e})),r.Ub(),r.Vb(2,"label",74),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(6).model;r.Bb(1),r.sc("ngModel",i.SmsNewInboxItem)}}function us(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,ls,3,3,"span",20),r.Rc(2,ss,4,1,"div",69),r.Ub()),2&e){var n=r.lc(5).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function ds(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(6).model;r.Bb(1),r.Uc(r.nc(2,1,n.PushNewInboxItem?"Yes":"No"))}}function bs(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",70),r.Vb(1,"input",75),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(6).model.PushNewInboxItem=e})),r.Ub(),r.Vb(2,"label",76),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(6).model;r.Bb(1),r.sc("ngModel",i.PushNewInboxItem)}}function fs(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,ds,3,3,"span",20),r.Rc(2,bs,4,1,"div",69),r.Ub()),2&e){var n=r.lc(5).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function ms(e,t){if(1&e&&(r.Vb(0,"table",67),r.Vb(1,"thead"),r.Vb(2,"tr",68),r.Vb(3,"th"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Rc(6,ns,3,3,"th",20),r.Rc(7,is,3,3,"th",20),r.Rc(8,rs,3,3,"th",20),r.Ub(),r.Ub(),r.Vb(9,"tbody"),r.Vb(10,"tr"),r.Vb(11,"td"),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Rc(14,as,3,2,"td",20),r.Rc(15,us,3,2,"td",20),r.Rc(16,fs,3,2,"td",20),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc(4).model,i=r.lc();r.Bb(4),r.Uc(r.nc(5,8,"Trigger")),r.Bb(2),r.sc("ngIf",i.showEmailColumn(n)),r.Bb(1),r.sc("ngIf",i.showSmsColumn(n)),r.Bb(1),r.sc("ngIf",i.showPushColumn(n)),r.Bb(4),r.Uc(r.nc(13,10,"NewDocumentAssignment")),r.Bb(2),r.sc("ngIf",i.showEmailColumn(n)),r.Bb(1),r.sc("ngIf",i.showSmsColumn(n)),r.Bb(1),r.sc("ngIf",i.showPushColumn(n))}}function gs(e,t){if(1&e&&(r.Vb(0,"div",59),r.Rc(1,Jl,4,6,"t-form-group",18),r.Rc(2,Xl,4,6,"t-form-group",18),r.Rc(3,ts,4,6,"t-form-group",18),r.Rc(4,ms,17,12,"table",60),r.Ub()),2&e){var n=r.lc(3).model,i=r.lc();r.Bb(1),r.sc("ngIf",i.showEmail),r.Bb(1),r.sc("ngIf",i.showSms),r.Bb(1),r.sc("ngIf",i.showPreferredLanguage),r.Bb(1),r.sc("ngIf",i.showNotificationTriggers(n))}}function ps(e,t){if(1&e&&(r.Vb(0,"li",58),r.Vb(1,"a",42),r.Rc(2,Hl,3,0,"span",43),r.Vb(3,"span",44),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Rc(6,gs,5,4,"ng-template",45),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(2),r.sc("ngIf",i.showNotificationsError(n)),r.Bb(2),r.Uc(r.nc(5,2,"Notifications"))}}function hs(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"ul",36,37),r.hc("activeIdChange",(function(e){return r.Ic(n),r.lc(2).activeTab=e})),r.Rc(3,Ql,8,6,"li",38),r.Rc(4,ps,7,4,"li",39),r.Ub(),r.Qb(5,"div",40),r.Sb()}if(2&e){var i=r.Fc(2),o=r.lc(2);r.Bb(1),r.sc("activeId",o.activeTab)("destroyOnHide",!0),r.Bb(2),r.sc("ngIf",o.showRoles),r.Bb(1),r.sc("ngIf",o.showNotifications),r.Bb(1),r.sc("ngbNavOutlet",i)}}function vs(e,t){if(1&e&&(r.Vb(0,"t-form-group",11),r.Rc(1,ul,2,1,"h2",12),r.Rc(2,bl,2,7,"t-text-editor",13),r.Rc(3,fl,2,7,"t-text-editor",14),r.Rc(4,ml,2,7,"t-text-editor",14),r.Ub(),r.Vb(5,"div",15),r.Vb(6,"t-restricted",8),r.Vb(7,"div",16),r.Rc(8,gl,1,4,"t-image",17),r.Ub(),r.Ub(),r.Ub(),r.Rc(9,vl,4,6,"t-form-group",18),r.Rc(10,Cl,4,6,"t-form-group",18),r.Rc(11,Ml,4,6,"t-form-group",18),r.Vb(12,"t-form-group",19),r.mc(13,"translate"),r.Rc(14,Vl,2,1,"div",20),r.Rc(15,Tl,1,4,"t-text-editor",21),r.Ub(),r.Rc(16,El,3,4,"t-form-group",22),r.Rc(17,Ul,5,6,"t-form-group",22),r.Rc(18,Rl,4,6,"div",23),r.Rc(19,hs,6,5,"ng-container",20)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(2),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ImageId),r.Bb(2),r.sc("ngIf",!!n),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(13,18,"User_Email"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Email),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",o.showInvitationInfo(n)),r.Bb(1),r.sc("ngIf",o.showTabs)}}function ys(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function Is(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function Cs(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"ResendInvitationEmail")," ")}var ws,ks=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},Ms=function(e,t,n){return[e,t,n]},Vs=((ws=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var c;return _classCallCheck(this,n),(c=t.call(this)).workspace=e,c.api=i,c.translate=r,c.route=o,c.showRoles=!0,c.usersApi=c.api.usersApi(c.notifyDestruct$),c.expand="Roles.Role",c.create=function(){var e={};return c.ws.isPrimaryLanguage?e.Name=c.initialText:c.ws.isSecondaryLanguage?e.Name2=c.initialText:c.ws.isTernaryLanguage&&(e.Name3=c.initialText),e.EmailNewInboxItem=!1,e.SmsNewInboxItem=!1,e.PushNewInboxItem=!1,e.PreferredLanguage=c.ws.settings.PrimaryLanguageId,e.Roles=[],e},c.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Roles&&t.Roles.forEach((function(e){e.Id=null})),t}return console.error("Cloning a non existing item"),null},c.onInvite=function(e){e&&e.Id&&c.usersApi.invite(e.Id).subscribe((function(){c.details.displayModalMessage(c.translate.instant("InvitationEmailSent"))}),c.details.handleActionError)},c.showInvite=function(e){return!!e&&!e.ExternalId&&c.workspace.globalSettings.EmailEnabled},c.canInvite=function(e){return c.ws.canDo("users","ResendInvitationEmail",e.Id)},c.inviteTooltip=function(e){return c.canInvite(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.onActivate=function(e){e&&e.Id&&c.usersApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onDeactivate=function(e){e&&e.Id&&c.usersApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.showActivate=function(e){return!!e&&!e.IsActive},c.showDeactivate=function(e){return!!e&&e.IsActive},c.canActivateDeactivateItem=function(e){return c.ws.canDo("users","IsActive",e.Id)},c.activateDeactivateTooltip=function(e){return c.canActivateDeactivateItem(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.usersApi=c.api.usersApi(c.notifyDestruct$),c}return _createClass(n,[{key:"languageLookup",value:function(e){return el.a[e]}},{key:"showRolesError",value:function(e){return!!e&&!!e.Roles&&e.Roles.some((function(e){return!!e.serverErrors}))}},{key:"showNotificationsError",value:function(e){return!!(e&&e.serverErrors&&(e.serverErrors.PreferredLanguage||e.serverErrors.ContactEmail||e.serverErrors.ContactMobile||e.serverErrors.EmailNewInboxItem||e.serverErrors.SmsNewInboxItem||e.serverErrors.PushNewInboxItem))}},{key:"showInvitationInfo",value:function(e){return!!e&&!!e.Email&&this.isNew&&this.workspace.globalSettings.EmailEnabled}},{key:"showNotificationTriggers",value:function(e){return this.showEmailColumn(e)||this.showSmsColumn(e)||this.showPushColumn(e)}},{key:"showEmailColumn",value:function(e){return this.showEmail&&!!e&&!!e.ContactEmail}},{key:"showSmsColumn",value:function(e){return this.showSms&&!!e&&!!e.ContactMobile}},{key:"showPushColumn",value:function(e){return this.showPush&&!!e&&!!e.PushEnabled}},{key:"testEmail",value:function(e){var t=this.details;this.usersApi.testEmail(e).subscribe((function(e){return t.displayModalMessage(e.Message)}),(function(e){return t.displayErrorModal(e.error)}))}},{key:"testPhoneNumber",value:function(e){var t=this.details;this.usersApi.testPhone(e).subscribe((function(e){return t.displayModalMessage(e.Message)}),(function(e){return t.displayErrorModal(e.error)}))}},{key:"languageChoices",get:function(){var e=this;return this._languageChoices||(this._languageChoices=[{name:function(){return e.ws.settings.PrimaryLanguageName},value:this.ws.settings.PrimaryLanguageId}],this.ws.settings.SecondaryLanguageId&&this._languageChoices.push({name:function(){return e.ws.settings.SecondaryLanguageName},value:this.ws.settings.SecondaryLanguageId}),this.ws.settings.TernaryLanguageId&&this._languageChoices.push({name:function(){return e.ws.settings.TernaryLanguageName},value:this.ws.settings.TernaryLanguageId})),this._languageChoices}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"isNew",get:function(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}},{key:"showPreferredLanguage",get:function(){return!!this.ws.settings.SecondaryLanguageId||!!this.ws.settings.TernaryLanguageId}},{key:"showNotifications",get:function(){return this.showEmail||this.showSms||this.showPush}},{key:"showTabs",get:function(){return this.showRoles||this.showNotifications}},{key:"showSms",get:function(){return this.ws.settings.SmsEnabled&&this.workspace.globalSettings.SmsEnabled}},{key:"showEmail",get:function(){return this.workspace.globalSettings.EmailEnabled}},{key:"showPush",get:function(){return this.workspace.globalSettings.PushEnabled}},{key:"activeTab",get:function(){return this.ws.miscState.users_details_activeTab||"roles"},set:function(e){this.ws.miscState.users_details_activeTab=e}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||ws)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(i.a))},ws.\u0275cmp=r.Jb({type:ws,selectors:[["t-users-details"]],inputs:{showRoles:"showRoles"},features:[r.yb],decls:14,vars:35,consts:[["collection","User",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","documentHeaderTemplate","actions"],["detailsCrumb",""],["documentHeader",""],["document",""],["activate",""],["deactivate",""],["invite",""],[1,"w-100","t-document-header","d-flex","justify-content-end"],[3,"metadata"],[1,"t-flow-chart","small"],[1,"small","t-lone-state","active","d-none"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"col-12","col-md-4","t-details-image-container"],[1,"border"],[3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["class","col-12 alert-primary p-2 px-3 mt-3 mt-sm-4",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"t-form-group",3,"label"],["collection","User","path","LastAccess",3,"entity"],[1,"col-12","alert-primary","p-2","px-3","mt-3","mt-sm-4"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"activeId","destroyOnHide","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","roles",4,"ngIf"],["ngbNavItem","notifications",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","roles"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_RoleId",""],["row_RoleId",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"metadata",4,"ngIf"],[3,"ngModel","required","showMembers","ngModelChange",4,"ngIf"],["link","../../roles",3,"itemId"],[3,"ngModel","required","showMembers","ngModelChange"],["ngbNavItem","notifications"],[1,"row","m-0","pt-2","pt-sm-3"],["class","table mt-4 table-striped border-bottom text-nowrap",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn","btn-primary","btn-sm","py-0","px-1","mx-2","text-nowrap",3,"disabled","click"],[3,"ngModel","ngModelChange"],["placeholder","+000-00-000-0000",3,"ngModel","ngModelChange"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],[1,"table","mt-4","table-striped","border-bottom","text-nowrap"],[1,"small"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","EmailNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","EmailNewInboxItem",1,"custom-control-label","t-pointer"],["type","checkbox","id","SmsNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","SmsNewInboxItem",1,"custom-control-label","t-pointer"],["type","checkbox","id","PushNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","PushNewInboxItem",1,"custom-control-label","t-pointer"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,ll,2,1,"ng-template",null,1,r.Sc),r.Rc(4,sl,15,14,"ng-template",null,2,r.Sc),r.Rc(6,vs,20,20,"ng-template",null,3,r.Sc),r.Rc(8,ys,2,3,"ng-template",null,4,r.Sc),r.Rc(10,Is,2,3,"ng-template",null,5,r.Sc),r.Rc(12,Cs,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("expand",t.expand)("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,11,"Users"))("detailsCrumb",n)("documentTemplate",o)("documentHeaderTemplate",i)("actions",r.yc(31,Ms,r.Ac(13,ks,l,t.onInvite,t.showInvite,t.canInvite,t.inviteTooltip),r.Ac(19,ks,c,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(25,ks,a,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Tn.a,Ce.a,x.u,we.a,ie.u,ie.k,ie.n,he,ie.d,Ie.a,X.v,X.A,X.x,X.y,X.w,ne.b,tl.a,nl.a,Ca,cl,En.a,ie.a],pipes:[G.d,x.g],encapsulation:2}),ws);function Ts(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",19),r.Qb(2,"t-image",20),r.Ub(),r.Tc(3," \xa0\xa0\xa0 "),r.Sb()),2&e){var n=r.lc().id,i=r.lc();r.Bb(2),r.sc("src","users/"+i.c[n].Id+"/image")("imageId",i.c[n].ImageId)("size",42)}}function Es(e,t){if(1&e&&(r.Vb(0,"div",11),r.Rc(1,Ts,4,3,"ng-container",12),r.Vb(2,"div",13),r.Vb(3,"div",14),r.Qb(4,"t-auto-cell",15),r.Ub(),r.Vb(5,"div",16),r.Qb(6,"t-auto-cell",17),r.Qb(7,"t-auto-cell",18),r.Ub(),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("ngIf",2===(null==i.c[n].EntityMetadata?null:i.c[n].EntityMetadata.ImageId)),r.Bb(3),r.sc("entity",i.c[n]),r.Bb(2),r.sc("entity",i.c[n]),r.Bb(1),r.sc("entity",i.c[n])}}function Us(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"User"),"\n")}function xs(e,t){if(1&e&&r.Qb(0,"t-auto-cell",21),2&e){var n=t.id,i=r.lc();r.sc("entity",i.c[n])}}function Rs(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function Ds(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function Bs(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}function Ss(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"User_Invited")," ")}function _s(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"User_Member")," ")}function Os(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"WithPicture")," ")}function Ls(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"WithoutPicture")," ")}var Fs,As=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Ps=function(e,t){return[e,t]},Ns=function(e){return{template:e,expression:"CreatedById eq me"}},js=function(e){return[e]},Ws=function(e){return{template:e,expression:"ExternalId eq null"}},qs=function(e){return{template:e,expression:"ExternalId ne null"}},Qs=function(e){return{template:e,expression:"ImageId ne null"}},Hs=function(e){return{template:e,expression:"ImageId eq null"}},$s=function(e,t,n){return{CreatedBy:e,ExternalId:t,ImageId:n}},Gs=((Fs=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.usersApi=o.api.usersApi(o.notifyDestruct$),o.onActivate=function(e){return o.usersApi.activate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.usersApi.deactivate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo("users","IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.usersApi=o.api.usersApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.User}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||Fs)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},Fs.\u0275cmp=r.Jb({type:Fs,selectors:[["t-users-master"]],features:[r.yb],decls:22,vars:47,consts:[["collection","User","selectDefault","Email,State,LastAccess","selectForTiles","ImageId,State,Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["invited",""],["member",""],["withPicture",""],["withoutPicture",""],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1"],[1,"d-flex","justify-content-between"],["collection","User","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","User","path","Email",3,"entity"],["collection","User","path","State",3,"entity"],[1,"border"],[3,"src","imageId","size"],["collection","User",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,Es,8,4,"ng-template",null,1,r.Sc),r.Rc(4,Us,2,3,"ng-template",null,2,r.Sc),r.Rc(6,xs,1,1,"ng-template",null,3,r.Sc),r.Rc(8,Rs,2,3,"ng-template",null,4,r.Sc),r.Rc(10,Ds,2,3,"ng-template",null,5,r.Sc),r.Rc(12,Bs,2,3,"ng-template",null,6,r.Sc),r.Rc(14,Ss,2,3,"ng-template",null,7,r.Sc),r.Rc(16,_s,2,3,"ng-template",null,8,r.Sc),r.Rc(18,Os,2,3,"ng-template",null,9,r.Sc),r.Rc(20,Ls,2,3,"ng-template",null,10,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"Users"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(22,Ps,r.zc(12,As,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(17,As,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.yc(43,$s,r.wc(27,js,r.wc(25,Ns,l)),r.xc(33,Ps,r.wc(29,Ws,s),r.wc(31,qs,u)),r.xc(40,Ps,r.wc(36,Qs,d),r.wc(38,Hs,b))))}},directives:[Ot.a,x.u,Ie.a,he],pipes:[G.d],encapsulation:2}),Fs);function zs(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-users-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("showRoles",c.showRoles)("additionalSelect",c.additionalSelect)}}function Js(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-users-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var Ks,Ys=((Ks=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).showRoles=!0,e}return n}(Za)).\u0275fac=function(e){return Xs(e||Ks)},Ks.\u0275cmp=r.Jb({type:Ks,selectors:[["t-users-picker"]],inputs:{showRoles:"showRoles"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:Ks}]),r.yb],decls:5,vars:6,consts:[["collection","User",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","showRoles","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,zs,2,4,"ng-template",null,1,r.Sc),r.Rc(3,Js,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,Vs,Gs],encapsulation:2}),Ks),Xs=r.Xb(Ys),Zs=n("3bcy");function eu(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function tu(e,t){if(1&e&&(r.Vb(0,"h2",19),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var nu=function(){return{updateOn:"blur"}};function iu(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,nu))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function ru(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,nu))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function ou(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,nu))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function cu(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Id)}}function au(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Id=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.Id)("ngModelOptions",r.vc(3,nu))("disabled",!o.isNew)}}function lu(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function su(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,nu))}}function uu(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.mc(1,"translate"),r.Rc(2,lu,2,1,"div",10),r.Rc(3,su,1,3,"t-text-editor",13),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function du(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function bu(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,nu))}}function fu(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.mc(1,"translate"),r.Rc(2,du,2,1,"div",10),r.Rc(3,bu,1,3,"t-text-editor",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function mu(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function gu(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,nu))}}function pu(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.mc(1,"translate"),r.Rc(2,mu,2,1,"div",10),r.Rc(3,gu,1,3,"t-text-editor",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function hu(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Description)}}function vu(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Description=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Description)("ngModelOptions",r.vc(2,nu))}}function yu(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Description2)}}function Iu(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description2)("ngModelOptions",r.vc(2,nu))}}function Cu(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.mc(1,"translate"),r.Rc(2,yu,2,1,"div",10),r.Rc(3,Iu,1,3,"t-text-editor",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function wu(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Description3)}}function ku(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description3)("ngModelOptions",r.vc(2,nu))}}function Mu(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.mc(1,"translate"),r.Rc(2,wu,2,1,"div",10),r.Rc(3,ku,1,3,"t-text-editor",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Vu(e,t){if(1&e&&r.Qb(0,"t-auto-cell",26),2&e){var n=r.lc().model;r.sc("entity",n)}}function Tu(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.NumericCode=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.NumericCode)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function Eu(e,t){if(1&e&&r.Qb(0,"t-auto-cell",28),2&e){var n=r.lc().model;r.sc("entity",n)}}function Uu(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",29),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.E=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.E)("choices",o.decimalPlacesChoices)}}function xu(e,t){if(1&e&&(r.Vb(0,"t-form-group",30),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",31),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(2),r.sc("entity",n)}}function Ru(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,tu,2,1,"h2",6),r.Rc(2,iu,2,7,"t-text-editor",7),r.Rc(3,ru,2,7,"t-text-editor",8),r.Rc(4,ou,2,7,"t-text-editor",8),r.Ub(),r.Vb(5,"t-form-group",9),r.mc(6,"translate"),r.Rc(7,cu,2,1,"div",10),r.Rc(8,au,1,4,"t-text-editor",11),r.Ub(),r.Rc(9,uu,4,6,"t-form-group",12),r.Rc(10,fu,4,6,"t-form-group",12),r.Rc(11,pu,4,6,"t-form-group",12),r.Vb(12,"t-form-group",9),r.mc(13,"translate"),r.Rc(14,hu,2,1,"div",10),r.Rc(15,vu,1,3,"t-text-editor",13),r.Ub(),r.Rc(16,Cu,4,6,"t-form-group",12),r.Rc(17,Mu,4,6,"t-form-group",12),r.Vb(18,"t-form-group",9),r.mc(19,"translate"),r.Rc(20,Vu,1,1,"t-auto-cell",14),r.Rc(21,Tu,1,3,"t-decimal-editor",15),r.Ub(),r.Vb(22,"t-form-group",9),r.mc(23,"translate"),r.Rc(24,Eu,1,1,"t-auto-cell",16),r.Rc(25,Uu,1,2,"t-selector",17),r.Ub(),r.Rc(26,xu,3,4,"t-form-group",18)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("label",r.nc(6,27,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Id),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(13,29,"Description")+o.ws.primaryPostfix)("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Description),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(19,31,"Currency_NumericCode"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.E),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(23,33,"Currency_DecimalPlaces"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.E),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i)}}function Du(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function Bu(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var Su,_u=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},Ou=function(e,t){return[e,t]},Lu=((Su=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var c;return _classCallCheck(this,n),(c=t.call(this)).workspace=e,c.api=i,c.translate=r,c.route=o,c.currenciesApi=c.api.currenciesApi(c.notifyDestruct$),c.expand="",c.create=function(){var e={};return c.ws.isPrimaryLanguage?e.Name=c.initialText:c.ws.isSecondaryLanguage?e.Name2=c.initialText:c.ws.isTernaryLanguage&&(e.Name3=c.initialText),e.E=2,e},c.onActivate=function(e){e&&e.Id&&c.currenciesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onDeactivate=function(e){e&&e.Id&&c.currenciesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.showActivate=function(e){return!!e&&!e.IsActive},c.showDeactivate=function(e){return!!e&&e.IsActive},c.canActivateDeactivateItem=function(e){return c.ws.canDo("currencies","IsActive",e.Id)},c.activateDeactivateTooltip=function(e){return c.canActivateDeactivateItem(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.currenciesApi=c.api.currenciesApi(c.notifyDestruct$),c}return _createClass(n,[{key:"decimalPlacesLookup",value:function(e){return Object(Zs.a)(this.workspace,this.translate).properties.E.format(e)}},{key:"decimalPlacesChoices",get:function(){if(!this._decimalPlacesChoices){var e=Object(Zs.a)(this.workspace,this.translate).properties.E;this._decimalPlacesChoices=Object(Si.c)(e)}return this._decimalPlacesChoices}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"isNew",get:function(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||Su)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(i.a))},Su.\u0275cmp=r.Jb({type:Su,selectors:[["t-currencies-details"]],features:[r.yb],decls:10,vars:26,consts:[["collection","Currency",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["collection","Currency","path","NumericCode",3,"entity",4,"ngIf"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],["collection","Currency","path","E",3,"entity",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["collection","Currency","path","NumericCode",3,"entity"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["collection","Currency","path","E",3,"entity"],["required","",3,"ngModel","choices","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Currency","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,eu,2,1,"ng-template",null,1,r.Sc),r.Rc(4,Ru,27,35,"ng-template",null,2,r.Sc),r.Rc(6,Du,2,3,"ng-template",null,3,r.Sc),r.Rc(8,Bu,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,9,"Currencies"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.xc(23,Ou,r.Ac(11,_u,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(17,_u,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,we.a,ie.u,ie.k,ie.n,Ie.a,xn,En.a],pipes:[G.d],encapsulation:2}),Su);function Fu(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",9),r.Vb(4,"span",8),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("Currency",n,"Name")),r.Bb(3),r.Uc(i.ws.getMultilingualValue("Currency",n,"Description"))}}function Au(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Currency"),"\n")}function Pu(e,t){if(1&e&&(r.Vb(0,"span",10),r.Qb(1,"t-auto-cell",11),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function Nu(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function ju(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function Wu(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var qu,Qu=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Hu=function(e,t){return[e,t]},$u=function(e){return{template:e,expression:"CreatedById eq me"}},Gu=function(e){return[e]},zu=function(e){return{CreatedBy:e}},Ju=((qu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.currenciesApi=o.api.currenciesApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.currenciesApi.activate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.currenciesApi.deactivate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo("currencies","IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.currenciesApi=o.api.currenciesApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.Currency}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||qu)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},qu.\u0275cmp=r.Jb({type:qu,selectors:[["t-currencies-master"]],features:[r.yb],decls:14,vars:31,consts:[["collection","Currency","selectDefault","E,IsActive","selectForTiles","Name,Name2,Name3,Description,Description2,Description3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Currency",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,Fu,6,2,"ng-template",null,1,r.Sc),r.Rc(4,Au,2,3,"ng-template",null,2,r.Sc),r.Rc(6,Pu,2,1,"ng-template",null,3,r.Sc),r.Rc(8,Nu,2,3,"ng-template",null,4,r.Sc),r.Rc(10,ju,2,3,"ng-template",null,5,r.Sc),r.Rc(12,Wu,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"Currencies"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(22,Hu,r.zc(12,Qu,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(17,Qu,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.wc(29,zu,r.wc(27,Gu,r.wc(25,$u,l))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),qu);function Ku(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-currencies-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function Yu(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-currencies-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("filter",i)("showCreate",o.showCreate)("additionalSelect",o.additionalSelect)}}var Xu,Zu=((Xu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return ed(e||Xu)},Xu.\u0275cmp=r.Jb({type:Xu,selectors:[["t-currencies-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:Xu}]),r.yb],decls:5,vars:6,consts:[["collection","Currency",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,Ku,2,3,"ng-template",null,1,r.Sc),r.Rc(3,Yu,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,Lu,Ju],encapsulation:2}),Xu),ed=r.Xb(Zu);function td(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-centers-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function nd(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-centers-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("filter",i)("showCreate",o.showCreate)("additionalSelect",o.additionalSelect)}}var id,rd=((id=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return od(e||id)},id.\u0275cmp=r.Jb({type:id,selectors:[["t-centers-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:id}]),r.yb],decls:5,vars:6,consts:[["collection","Center",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,td,2,3,"ng-template",null,1,r.Sc),r.Rc(3,nd,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),id),od=r.Xb(rd),cd=["d"],ad=["i"];function ld(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"button",5),r.hc("click",(function(){return r.Ic(n),r.lc().onClick()})),r.Qb(2,"fa-icon",6),r.Ub(),r.Sb()}if(2&e){var i=r.lc(),o=r.Fc(6);r.Bb(1),r.sc("tContextMenu",o)("tDisableMenu",i.disableAltCalendar)}}function sd(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",7),r.Vb(1,"ul",8),r.Vb(2,"li",9),r.hc("click",(function(){r.Ic(n);var e=t.close;return r.lc().onAltCalendar(),e()})),r.Tc(3),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(3),r.Vc(" ",i.altCalendarName," ")}}var ud,dd=((ud=function(){function e(t,n){_classCallCheck(this,e),this.workspace=t,this.translate=n,this.w100=!0,this.isDisabled=!1,this._invalid=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._subscriptions=new O.a,this._subscriptions.add(this.translate.onLangChange.subscribe((function(){e.onFormatChange()}))),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:function(){e._calendar&&e._calendar!==e.workspace.calendar&&e.onCalendarChange(),e._dateFormat&&e._dateFormat!==e.workspace.dateFormat&&e.onFormatChange()}}))}},{key:"ngOnChanges",value:function(e){e.calendar&&!e.calendar.isFirstChange()&&this.onCalendarChange(),e.granularity&&!e.granularity.isFirstChange()&&this.onFormatChange()}},{key:"ngOnDestroy",value:function(){this._subscriptions&&this._subscriptions.unsubscribe()}},{key:"onCalendarChange",value:function(){this.deleteAltCalendarIfRedundant(),this.writeValue(this._value),this.picker.close()}},{key:"onFormatChange",value:function(){this.writeValue(this._value)}},{key:"setOverride",value:function(){this.workspace.calendarOverride=this.calendar||(this.disableAltCalendar?void 0:this.altCalendar),this.workspace.granularityOverride=this.granularity}},{key:"writeValue",value:function(e){this.setOverride(),this._invalid=!1,this._value=e,this._calendar=this.workspace.calendar,this._dateFormat=this.workspace.dateFormat,this.picker.writeValue(e)}},{key:"registerOnChange",value:function(e){var t=this;this.picker.registerOnChange((function(n){n&&n!==t.input.nativeElement.value?(t._invalid=!1,t._value=n,t._calendar=t.workspace.calendar,t._dateFormat=t.workspace.dateFormat,e(n)):(t._invalid=!!n,delete t._value,delete t._calendar,delete t._dateFormat,e(void 0))}))}},{key:"validate",value:function(e){var t=e.value;return this._invalid?{ngbDate:{invalid:t}}:null}},{key:"registerOnTouched",value:function(e){this.picker.registerOnTouched(e)}},{key:"setDisabledState",value:function(e){this.isDisabled=e,this.picker.setDisabledState(e)}},{key:"registerOnValidatorChange",value:function(e){this.picker.registerOnValidatorChange(e)}},{key:"onFocus",value:function(){this.setOverride()}},{key:"onClick",value:function(){this.setOverride(),this.picker.toggle()}},{key:"onAltCalendar",value:function(){this.altCalendar=this.getAltCalendar,this.onCalendarChange()}},{key:"deleteAltCalendarIfRedundant",value:function(){this.workspace.isApp&&this.workspace.currentTenant.calendar===this.altCalendar&&delete this.altCalendar}},{key:"format",get:function(){return this.workspace.dateFormatForPicker}},{key:"getAltCalendar",get:function(){if(this.workspace.isApp){var e=this.workspace.currentTenant,t=e.settings;if(t.SecondaryCalendar)return(this.altCalendar||e.calendar)===t.PrimaryCalendar?t.SecondaryCalendar:t.PrimaryCalendar}}},{key:"altCalendarName",get:function(){var e=this.getAltCalendar;if(e)return this.translate.instant("Calendar_"+e)}},{key:"disableAltCalendar",get:function(){return!!this.calendar||!this.workspace.isApp||!this.workspace.currentTenant.settings.SecondaryCalendar}}]),e}()).\u0275fac=function(e){return new(e||ud)(r.Pb(S.m),r.Pb(G.e))},ud.\u0275cmp=r.Jb({type:ud,selectors:[["t-date-picker"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(cd,!0),r.Oc(ad,!0)),2&e&&(r.Ec(n=r.ic())&&(t.picker=n.first),r.Ec(n=r.ic())&&(t.input=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("w-100",t.w100)},inputs:{calendar:"calendar",granularity:"granularity"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:ud},{provide:ie.h,multi:!0,useExisting:ud}]),r.zb],decls:7,vars:4,consts:[[1,"input-group"],["ngbDatepicker","","container","body","outsideDays","visible",1,"form-control","t-input",3,"placeholder","focus"],["i","","d","ngbDatepicker"],[4,"ngIf"],["altCalendar",""],["tabindex","-1","type","button",1,"btn","btn-light","btn-sm","text-primary","t-white-button","p-0","px-1","align-baseline",2,"width","22.6px",3,"tContextMenu","tDisableMenu","click"],["icon","calendar-alt"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","py-1",3,"click"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"input",1,2),r.hc("focus",(function(){return t.onFocus()})),r.Ub(),r.Rc(4,ld,3,2,"ng-container",3),r.Ub(),r.Rc(5,sd,4,1,"ng-template",null,4,r.Sc)),2&e&&(r.Gb("t-disabled-background",t.isDisabled),r.Bb(1),r.sc("placeholder",t.format),r.Bb(3),r.sc("ngIf",!t.isDisabled))},directives:[X.s,x.u,ve.a,ne.b],encapsulation:2}),ud),bd=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},fd=function(e,t,n){return{template:e,action:t,showAction:n}},md=function(e,t,n){return[e,t,n]};function gd(e,t){if(1&e&&r.Qb(0,"t-details",7),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(6),c=r.Fc(8),a=r.Fc(10),l=r.Fc(12);r.sc("definitionId",n.definitionId)("createFunc",n.create)("expand",n.expand)("mode",n.mode)("additionalSelect",n.additionalSelect)("masterCrumb",n.masterCrumb)("detailsCrumb",i)("idString",n.idString)("documentTemplate",o)("actions",r.yc(26,md,r.Ac(10,bd,c,n.onActivate,n.showActivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.Ac(16,bd,a,n.onDeactivate,n.showDeactivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.yc(22,fd,l,n.onEditDefinition,n.showEditDefinition)))}}function pd(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",8),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function hd(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function vd(e,t){if(1&e&&(r.Vb(0,"h2",18),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var yd=function(){return{updateOn:"blur"}};function Id(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,yd))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function Cd(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,yd))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function wd(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,yd))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function kd(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function Md(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,yd))}}function Vd(e,t){if(1&e&&(r.Vb(0,"t-form-group",14),r.mc(1,"translate"),r.Rc(2,kd,2,1,"div",15),r.Rc(3,Md,1,3,"t-text-editor",21),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Td(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function Ed(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,yd))}}function Ud(e,t){if(1&e&&(r.Vb(0,"t-form-group",14),r.mc(1,"translate"),r.Rc(2,Td,2,1,"div",15),r.Rc(3,Ed,1,3,"t-text-editor",16),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function xd(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function Rd(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,yd))}}function Dd(e,t){if(1&e&&(r.Vb(0,"t-form-group",14),r.mc(1,"translate"),r.Rc(2,xd,2,1,"div",15),r.Rc(3,Rd,1,3,"t-text-editor",16),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Bd(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function Sd(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,yd))}}function _d(e,t){if(1&e&&(r.Vb(0,"t-form-group",24),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",25),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("label",r.nc(1,3,"IsActive")),r.Bb(2),r.sc("definitionId",i.definitionId)("entity",n)}}var Od=function(e,t){return{id:e,cache_buster:t}};function Ld(e,t){if(1&e&&(r.Vb(0,"div",35),r.Qb(1,"t-report-results",36),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3).model,o=r.lc();r.Bb(1),r.sc("definition",o.reportDefinition(n))("arguments",r.xc(4,Od,null==i?null:i.Id,null==i||null==i.EntityMetadata?null:i.EntityMetadata.$refresh))("view",o.reportView(n))("state",o.state(n))}}function Fd(e,t){if(1&e&&(r.Vb(0,"li",31),r.Vb(1,"a",32),r.Vb(2,"span",33),r.Tc(3),r.Ub(),r.Ub(),r.Rc(4,Ld,2,7,"ng-template",34),r.Ub()),2&e){var n=t.$implicit;r.lc();var i=r.Fc(3),o=r.lc(3);r.sc("ngbNavItem",n.ReportDefinitionId),r.Bb(1),r.sc("tContextMenu",i)("tContext",n.ReportDefinitionId),r.Bb(2),r.Uc(o.reportTitle(n))}}function Ad(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",37),r.Vb(1,"ul",38),r.Vb(2,"li",39),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.close,o=r.lc(3).model;return r.lc().onExpandReport(e,o),i()})),r.Vb(3,"div",40),r.Qb(4,"fa-icon",41),r.Ub(),r.Vb(5,"div",42),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Bb(6),r.Vc(" ",r.nc(7,1,"Expand")," "))}function Pd(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Fd,5,4,"li",29),r.Rc(2,Ad,8,3,"ng-template",null,30,r.Sc),r.Sb()),2&e){var n=r.lc(3);r.Bb(1),r.sc("ngForOf",n.reports)}}function Nd(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"ul",26,27),r.hc("activeIdChange",(function(e){return r.Ic(n),r.lc(2).activeTab=e})),r.Rc(3,Pd,4,1,"ng-container",15),r.Ub(),r.Qb(4,"div",28),r.Sb()}if(2&e){var i=r.Fc(2),o=r.lc(),c=o.isEdit,a=o.model,l=r.lc();r.Bb(1),r.sc("destroyOnHide",!0)("activeId",l.activeTab),r.Bb(2),r.sc("ngIf",l.showReports(c,a)),r.Bb(1),r.sc("ngbNavOutlet",i)}}function jd(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.Rc(1,vd,2,1,"h2",10),r.Rc(2,Id,2,7,"t-text-editor",11),r.Rc(3,Cd,2,7,"t-text-editor",12),r.Rc(4,wd,2,7,"t-text-editor",12),r.Ub(),r.Rc(5,Vd,4,6,"t-form-group",13),r.Rc(6,Ud,4,6,"t-form-group",13),r.Rc(7,Dd,4,6,"t-form-group",13),r.Vb(8,"t-form-group",14),r.mc(9,"translate"),r.Rc(10,Bd,2,1,"div",15),r.Rc(11,Sd,1,3,"t-text-editor",16),r.Ub(),r.Rc(12,_d,3,5,"t-form-group",17),r.Rc(13,Nd,5,4,"ng-container",15)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,14,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",o.showTabs(i,n))}}function Wd(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function qd(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function Qd(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"EditDefinition")," ")}var Hd,$d=((Hd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.translate=r,a.router=o,a.route=c,a.lookupsApi=a.api.lookupsApi(null,a.notifyDestruct$),a.expand="",a.create=function(){var e={};return a.ws.isPrimaryLanguage?e.Name=a.initialText:a.ws.isSecondaryLanguage?e.Name2=a.initialText:a.ws.isTernaryLanguage&&(e.Name3=a.initialText),e},a.onActivate=function(e){e&&e.Id&&a.lookupsApi.activate([e.Id],{returnEntities:!0,expand:a.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onDeactivate=function(e){e&&e.Id&&a.lookupsApi.deactivate([e.Id],{returnEntities:!0,expand:a.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onEditDefinition=function(e){var t=a.workspace;t.isEdit=!0,a.router.navigate(["../../../lookup-definitions",a.definitionId],{relativeTo:a.route}).then((function(e){e||delete t.isEdit})).catch((function(){return delete t.isEdit}))},a.showActivate=function(e){return!!e&&!e.IsActive},a.showDeactivate=function(e){return!!e&&e.IsActive},a.showEditDefinition=function(e){return a.ws.canDo("lookup-definitions","Update",null)},a.canActivateDeactivateItem=function(e){return a.ws.canDo(a.view,"IsActive",e.Id)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");n&&e.ws.definitions.Lookups[n]||e.router.navigate(["page-not-found"],{relativeTo:e.route.parent,replaceUrl:!0}),e.definitionId!==n&&(e.definitionId=n)}}))}},{key:"showTabs",value:function(e,t){return this.reports.length>0&&this.showReports(e,t)}},{key:"showReports",value:function(e,t){return!!t&&!!t.Id}},{key:"reportDefinition",value:function(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}},{key:"reportTitle",value:function(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}},{key:"state",value:function(e){var t="lookups_details_".concat(this.definitionId,"_").concat(e.ReportDefinitionId),n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new S.j),n[t]}},{key:"reportView",value:function(e){var t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ma.chart:ma.pivot}},{key:"onExpandReport",value:function(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this._definitionId=e,this.lookupsApi=this.api.lookupsApi(e,this.notifyDestruct$))},get:function(){return this._definitionId}},{key:"view",get:function(){return"lookups/".concat(this.definitionId)}},{key:"definition",get:function(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Lookups[this.definitionId]:null)}},{key:"found",get:function(){return!!this.definition}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"masterCrumb",get:function(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}},{key:"reports",get:function(){return this.definition.ReportDefinitions}},{key:"activeTabKey",get:function(){return"lookups_details_".concat(this.definitionId,"_activeTab")}},{key:"activeTab",get:function(){var e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]},set:function(e){this.ws.miscState[this.activeTabKey]=e}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||Hd)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(i.e),r.Pb(i.a))},Hd.\u0275cmp=r.Jb({type:Hd,selectors:[["t-lookups-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[r.yb],decls:13,vars:2,consts:[["collection","Lookup",3,"definitionId","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Lookup",3,"definitionId","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],[3,"showHome"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Lookup","path","IsActive",3,"definitionId","entity"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],[1,"w-100",3,"ngbNavOutlet"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"]],template:function(e,t){if(1&e&&(r.Rc(0,gd,1,30,"t-details",0),r.Rc(1,pd,1,1,"ng-template",null,1,r.Sc),r.Rc(3,hd,2,1,"ng-template",null,2,r.Sc),r.Rc(5,jd,14,16,"ng-template",null,3,r.Sc),r.Rc(7,Wd,2,3,"ng-template",null,4,r.Sc),r.Rc(9,qd,2,3,"ng-template",null,5,r.Sc),r.Rc(11,Qd,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,q.a,dn,Ce.a,we.a,ie.u,ie.k,ie.n,Ie.a,X.v,X.A,x.t,X.x,X.y,ve.a,X.w,pa,ne.b],pipes:[G.d],encapsulation:2}),Hd),Gd=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},zd=function(e,t){return[e,t]},Jd=function(e){return{template:e,expression:"CreatedById eq me"}},Kd=function(e){return[e]},Yd=function(e){return{CreatedBy:e}};function Xd(e,t){if(1&e&&r.Qb(0,"t-master",8),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(8),c=r.Fc(6),a=r.Fc(10),l=r.Fc(12),s=r.Fc(14);r.sc("definitionId",n.definitionId)("mode",n.mode)("additionalSelect",n.additionalSelect)("showCreateButton",n.showCreate)("filterDefault",n.filter)("masterCrumb",n.masterCrumb)("tileTemplate",i)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",c)("multiselectActions",r.xc(21,zd,r.zc(11,Gd,a,n.onActivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.zc(16,Gd,l,n.onDeactivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip)))("filterDefinition",r.wc(28,Yd,r.wc(26,Kd,r.wc(24,Jd,s))))}}function Zd(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",9),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function eb(e,t){if(1&e&&(r.Vb(0,"div",10),r.Qb(1,"t-auto-cell",11),r.Ub(),r.Vb(2,"div",12),r.Qb(3,"t-auto-cell",13),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("definitionId",i.definitionId)("entity",i.c[n]),r.Bb(2),r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function tb(e,t){if(1&e&&r.Tc(0),2&e){var n=r.lc();r.Vc(" ",n.summary,"\n")}}function nb(e,t){if(1&e&&(r.Vb(0,"span",14),r.Qb(1,"t-auto-cell",15),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function ib(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function rb(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function ob(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var cb,ab=((cb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.router=r,a.route=o,a.translate=c,a.lookupsApi=a.api.lookupsApi(null,a.notifyDestruct$),a.expand="",a.onActivate=function(e){return a.lookupsApi.activate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.onDeactivate=function(e){return a.lookupsApi.deactivate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.canActivateDeactivateItem=function(e){return a.ws.canDo(a.view,"IsActive",null)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");e.definitionId!==n&&(e.definitionId=n)}}))}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.lookupsApi=this.api.lookupsApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"view",get:function(){return"lookups/".concat(this.definitionId)}},{key:"c",get:function(){return this.ws.Lookup}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"definition",get:function(){return this.definitionId?this.ws.definitions.Lookups[this.definitionId]:null}},{key:"found",get:function(){return!this.definitionId||!!this.definition}},{key:"masterCrumb",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Lookups")}},{key:"summary",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Lookup")}}]),n}(_t.a)).\u0275fac=function(e){return new(e||cb)(r.Pb(S.m),r.Pb(Y.a),r.Pb(i.e),r.Pb(i.a),r.Pb(G.e))},cb.\u0275cmp=r.Jb({type:cb,selectors:[["t-lookups-master"]],inputs:{definitionId:"definitionId"},features:[r.yb],decls:15,vars:2,consts:[["collection","Lookup","selectDefault","Code,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Lookup","selectDefault","Code,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex","justify-content-between"],["collection","Lookup","path","",3,"definitionId","entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","Lookup","path","Code",3,"definitionId","entity"],[1,"text-truncate"],["collection","Lookup",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(r.Rc(0,Xd,1,30,"t-master",0),r.Rc(1,Zd,1,1,"ng-template",null,1,r.Sc),r.Rc(3,eb,4,4,"ng-template",null,2,r.Sc),r.Rc(5,tb,1,1,"ng-template",null,3,r.Sc),r.Rc(7,nb,2,2,"ng-template",null,4,r.Sc),r.Rc(9,ib,2,3,"ng-template",null,5,r.Sc),r.Rc(11,rb,2,3,"ng-template",null,6,r.Sc),r.Rc(13,ob,2,3,"ng-template",null,7,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,Ot.a,dn,Ie.a],pipes:[G.d],encapsulation:2}),cb);function lb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-lookups-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=t.definitionId,a=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("definitionId",c)("additionalSelect",a.additionalSelect)}}function sb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-lookups-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.definitionId,o=t.filter,c=r.lc();r.Bb(1),r.sc("definitionId",i)("filter",o)("showCreate",c.showCreate)("additionalSelect",c.additionalSelect)}}var ub,db=function(e){return[e]},bb=((ub=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return fb(e||ub)},ub.\u0275cmp=r.Jb({type:ub,selectors:[["t-lookups-picker"]],inputs:{definitionId:"definitionId"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:ub}]),r.yb],decls:5,vars:9,consts:[["collection","Lookup",3,"definitionIds","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","filter","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,lb,2,4,"ng-template",null,1,r.Sc),r.Rc(3,sb,2,4,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("definitionIds",r.wc(7,db,t.definitionId))("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("filter",t.filter)("additionalSelect",t.additionalSelect)}},directives:[Xa,$d,ab],encapsulation:2}),ub),fb=r.Xb(bb);function mb(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function gb(e,t){if(1&e&&(r.Vb(0,"h2",14),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var pb=function(){return{updateOn:"blur"}};function hb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",15),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,pb))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function vb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",16),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,pb))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function yb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",16),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,pb))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function Ib(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function Cb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,pb))}}function wb(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Ib,2,1,"div",17),r.Rc(3,Cb,1,3,"t-text-editor",18),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function kb(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function Mb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,pb))}}function Vb(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,kb,2,1,"div",17),r.Rc(3,Mb,1,3,"t-text-editor",20),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Tb(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function Eb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,pb))}}function Ub(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Tb,2,1,"div",17),r.Rc(3,Eb,1,3,"t-text-editor",20),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function xb(e,t){if(1&e&&(r.Vb(0,"t-restricted",22),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc().model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.IsRelated),r.Bb(1),r.Vc(" ",r.nc(2,2,null!=n&&n.IsRelated?"Yes":"No")," ")}}function Rb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",23),r.Vb(1,"input",24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.IsRelated=e})),r.Ub(),r.Vb(2,"label",25),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc().model;r.Bb(1),r.sc("ngModel",i.IsRelated)}}function Db(e,t){if(1&e&&(r.Vb(0,"t-form-group",26),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",27),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(2),r.sc("entity",n)}}function Bb(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,gb,2,1,"h2",6),r.Rc(2,hb,2,7,"t-text-editor",7),r.Rc(3,vb,2,7,"t-text-editor",8),r.Rc(4,yb,2,7,"t-text-editor",8),r.Ub(),r.Rc(5,wb,4,6,"t-form-group",9),r.Rc(6,Vb,4,6,"t-form-group",9),r.Rc(7,Ub,4,6,"t-form-group",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Rc(10,xb,3,4,"t-restricted",11),r.Rc(11,Rb,4,1,"div",12),r.Ub(),r.Rc(12,Db,3,4,"t-form-group",13)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,13,"Agent_IsRelated"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.IsRelated),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i)}}function Sb(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function _b(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var Ob,Lb=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},Fb=function(e,t){return[e,t]},Ab=((Ob=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.agentsApi=o.api.agentsApi(o.notifyDestruct$),o.expand="",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e.IsRelated=!1,e},o.onActivate=function(e){e&&e.Id&&o.agentsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.onDeactivate=function(e){e&&e.Id&&o.agentsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.showActivate=function(e){return!!e&&!e.IsActive},o.showDeactivate=function(e){return!!e&&e.IsActive},o.canActivateDeactivateItem=function(e){return o.ws.canDo("agents","IsActive",e.Id)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.agentsApi=o.api.agentsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||Ob)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},Ob.\u0275cmp=r.Jb({type:Ob,selectors:[["t-agents-details"]],features:[r.yb],decls:10,vars:26,consts:[["collection","Agent",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[3,"metadata",4,"ngIf"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isRelated",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isRelated",1,"custom-control-label","t-pointer"],[1,"t-form-group",3,"label"],["collection","Unit","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,mb,2,1,"ng-template",null,1,r.Sc),r.Rc(4,Bb,13,15,"ng-template",null,2,r.Sc),r.Rc(6,Sb,2,3,"ng-template",null,3,r.Sc),r.Rc(8,_b,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,9,"Agents"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.xc(23,Fb,r.Ac(11,Lb,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(17,Lb,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,we.a,ie.u,ie.k,ie.n,Tn.a,ie.a,Ie.a],pipes:[G.d],encapsulation:2}),Ob);function Pb(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",9),r.Vb(4,"span",8),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("Agent",n,"Name")),r.Bb(3),r.Uc(i.ws.getMultilingualValue("Agent",n,"Description"))}}function Nb(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Agent"),"\n")}function jb(e,t){if(1&e&&(r.Vb(0,"span",10),r.Qb(1,"t-auto-cell",11),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function Wb(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function qb(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function Qb(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var Hb,$b=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Gb=function(e,t){return[e,t]},zb=function(e){return{template:e,expression:"CreatedById eq me"}},Jb=function(e){return[e]},Kb=function(e){return{CreatedBy:e}},Yb=((Hb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.agentsApi=o.api.agentsApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.agentsApi.activate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.agentsApi.deactivate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo("agents","IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.agentsApi=o.api.agentsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.Agent}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||Hb)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},Hb.\u0275cmp=r.Jb({type:Hb,selectors:[["t-agents-master"]],features:[r.yb],decls:14,vars:31,consts:[["collection","Agent","selectDefault","IsRelated,IsActive","selectForTiles","Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Agent",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,Pb,6,2,"ng-template",null,1,r.Sc),r.Rc(4,Nb,2,3,"ng-template",null,2,r.Sc),r.Rc(6,jb,2,1,"ng-template",null,3,r.Sc),r.Rc(8,Wb,2,3,"ng-template",null,4,r.Sc),r.Rc(10,qb,2,3,"ng-template",null,5,r.Sc),r.Rc(12,Qb,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"Agents"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(22,Gb,r.zc(12,$b,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(17,$b,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.wc(29,Kb,r.wc(27,Jb,r.wc(25,zb,l))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),Hb);function Xb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-agents-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function Zb(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-agents-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("filter",i)("showCreate",o.showCreate)("additionalSelect",o.additionalSelect)}}var ef,tf=((ef=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return nf(e||ef)},ef.\u0275cmp=r.Jb({type:ef,selectors:[["t-agents-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:ef}]),r.yb],decls:5,vars:6,consts:[["collection","Agent",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,Xb,2,3,"ng-template",null,1,r.Sc),r.Rc(3,Zb,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,Ab,Yb],encapsulation:2}),ef),nf=r.Xb(tf);function rf(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-relations-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=t.definitionId,a=r.lc();r.Bb(1),r.sc("idString",o)("initialText",i)("definitionId",c)("additionalSelect",a.additionalSelect)}}function of(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-relations-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.definitionId,o=t.filter,c=r.lc();r.Bb(1),r.sc("definitionId",i)("filter",o)("showCreate",c.showCreate)("additionalSelect",c.additionalSelect)}}var cf,af,lf=((cf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return sf(e||cf)},cf.\u0275cmp=r.Jb({type:cf,selectors:[["t-relations-picker"]],inputs:{definitionIds:"definitionIds"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:cf}]),r.yb],decls:5,vars:7,consts:[["collection","Relation",3,"masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","definitionIds","filter","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"idString","initialText","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,rf,2,4,"ng-template",null,1,r.Sc),r.Rc(3,of,2,4,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("definitionIds",t.definitionIds)("filter",t.filter)("additionalSelect",t.additionalSelect)}},encapsulation:2}),cf),sf=r.Xb(lf),uf=["input"],df=((af=function(){function e(){_classCallCheck(this,e),this.placeholder="",this.w100=!0,this.onChangeFn=function(e){},this.onTouchedFn=function(){}}return _createClass(e,[{key:"focus",value:function(){this.input.nativeElement&&this.input.nativeElement.focus()}},{key:"select",value:function(){this.input.nativeElement&&this.input.nativeElement.select()}},{key:"writeValue",value:function(e){this.input.nativeElement.value=e=e||""}},{key:"registerOnChange",value:function(e){this.onChangeFn=e}},{key:"registerOnTouched",value:function(e){this.onTouchedFn=e}},{key:"setDisabledState",value:function(e){this.input.nativeElement.disabled=e}},{key:"onChange",value:function(e){this.onChangeFn(e||void 0)}}]),e}()).\u0275fac=function(e){return new(e||af)},af.\u0275cmp=r.Jb({type:af,selectors:[["t-multiline-editor"]],viewQuery:function(e,t){var n;1&e&&r.Oc(uf,!0),2&e&&r.Ec(n=r.ic())&&(t.input=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("w-100",t.w100)},inputs:{placeholder:"placeholder"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:af}])],decls:2,vars:1,consts:[["autocomplete","off","rows","3",1,"form-control","t-input",3,"placeholder","input","blur"],["input",""]],template:function(e,t){1&e&&(r.Vb(0,"textarea",0,1),r.hc("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouchedFn()})),r.Ub()),2&e&&r.sc("placeholder",t.placeholder)},encapsulation:2}),af),bf=n("mrSG"),ff=n("HDdC"),mf=n("2Vo4"),gf=n("Cfvw"),pf=n("DH7j"),hf=n("n6bG"),vf=n("VRyK"),yf=n("jtHE");n("8Qeq"),n("z+Ro"),n("z6cu");var If=n("5+tZ"),Cf=n("l7GE"),wf=n("ZUHj"),kf=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var n=new Mf(e),i=t.subscribe(n);return i.add(Object(wf.a)(n,this.notifier)),i}}]),e}(),Mf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).hasValue=!1,e}return _createClass(n,[{key:"_next",value:function(e){this.value=e,this.hasValue=!0}},{key:"notifyNext",value:function(e,t,n,i,r){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}]),n}(Cf.a),Vf=n("UXun"),Tf=n("/uUt"),Ef=n("1G5W"),Uf=n("JX91");n("oB13");var xf,Rf,Df,Bf,Sf,_f,Of,Lf,Ff,Af,Pf,Nf,jf,Wf,qf,Qf,Hf,$f,Gf,zf=["*"],Jf=((Sf=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Sf)},Sf.\u0275prov=r.Lb({token:Sf,factory:Sf.\u0275fac}),Sf),Kf=((Bf=function(){function e(t,n){var i=this;_classCallCheck(this,e),this._loader=t,this._zone=n,this._map=new Promise((function(e){i._mapResolver=e}))}return _createClass(e,[{key:"createMap",value:function(e,t){var n=this;return this._zone.runOutsideAngular((function(){return n._loader.load().then((function(){var i=new google.maps.Map(e,t);n._mapResolver(i)}))}))}},{key:"setMapOptions",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){t._map.then((function(t){t.setOptions(e)}))}))}},{key:"createMarker",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return n&&(t.map=e),new google.maps.Marker(t)}))}))}},{key:"createInfoWindow",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(){return new google.maps.InfoWindow(e)}))}))}},{key:"createCircle",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return"string"==typeof e.strokePosition&&(e.strokePosition=google.maps.StrokePosition[e.strokePosition]),e.map=t,new google.maps.Circle(e)}))}))}},{key:"createRectangle",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return e.map=t,new google.maps.Rectangle(e)}))}))}},{key:"createPolyline",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t.getNativeMap().then((function(t){var n=new google.maps.Polyline(e);return n.setMap(t),n}))}))}},{key:"createPolygon",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t.getNativeMap().then((function(t){var n=new google.maps.Polygon(e);return n.setMap(t),n}))}))}},{key:"createDataLayer",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){var n=new google.maps.Data(e);return n.setMap(t),n}))}))}},{key:"createTransitLayer",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){var n=new google.maps.TransitLayer;return n.setMap(e.visible?t:null),n}))}))}},{key:"createBicyclingLayer",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){var n=new google.maps.BicyclingLayer;return n.setMap(e.visible?t:null),n}))}))}},{key:"containsLocation",value:function(e,t){return google.maps.geometry.poly.containsLocation(e,t)}},{key:"subscribeToMapEvent",value:function(e){var t=this;return new ff.a((function(n){t._map.then((function(i){i.addListener(e,(function(e){t._zone.run((function(){return n.next(e)}))}))}))}))}},{key:"clearInstanceListeners",value:function(){var e=this;return this._zone.runOutsideAngular((function(){e._map.then((function(e){google.maps.event.clearInstanceListeners(e)}))}))}},{key:"setCenter",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.setCenter(e)}))}))}},{key:"getZoom",value:function(){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.getZoom()}))}))}},{key:"getBounds",value:function(){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.getBounds()}))}))}},{key:"getMapTypeId",value:function(){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.getMapTypeId()}))}))}},{key:"setZoom",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.setZoom(e)}))}))}},{key:"getCenter",value:function(){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.getCenter()}))}))}},{key:"panTo",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.panTo(e)}))}))}},{key:"panBy",value:function(e,t){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.panBy(e,t)}))}))}},{key:"fitBounds",value:function(e,t){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.fitBounds(e,t)}))}))}},{key:"panToBounds",value:function(e,t){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.panToBounds(e,t)}))}))}},{key:"getNativeMap",value:function(){return this._map}},{key:"triggerMapEvent",value:function(e){return this._map.then((function(t){return google.maps.event.trigger(t,e)}))}}]),e}()).\u0275fac=function(e){return new(e||Bf)(r.dc(Jf),r.dc(r.z))},Bf.\u0275prov=r.Lb({token:Bf,factory:Bf.\u0275fac}),Bf),Yf=((Df=function(){function e(t){_classCallCheck(this,e),this._wrapper=t,this._layers=new Map}return _createClass(e,[{key:"addTransitLayer",value:function(e,t){var n=this._wrapper.createTransitLayer(t);this._layers.set(e,n)}},{key:"addBicyclingLayer",value:function(e,t){var n=this._wrapper.createBicyclingLayer(t);this._layers.set(e,n)}},{key:"deleteLayer",value:function(e){var t=this;return this._layers.get(e).then((function(n){n.setMap(null),t._layers.delete(e)}))}},{key:"toggleLayerVisibility",value:function(e,t){var n=this;return this._layers.get(e).then((function(e){return t.visible?n._wrapper.getNativeMap().then((function(t){e.setMap(t)})):void e.setMap(null)}))}}]),e}()).\u0275fac=function(e){return new(e||Df)(r.dc(Kf))},Df.\u0275prov=r.Lb({token:Df,factory:Df.\u0275fac}),Df),Xf=0,Zf=((Rf=function(){function e(t){_classCallCheck(this,e),this._manager=t,this._addedToManager=!1,this._id=(Xf++).toString(),this.visible=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this._addedToManager||(this._manager.addBicyclingLayer(this,{visible:this.visible}),this._addedToManager=!0)}},{key:"ngOnChanges",value:function(e){this._addedToManager&&null!=e.visible&&this._manager.toggleLayerVisibility(this,{visible:e.visible.currentValue})}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmBicyclingLayer-".concat(this._id.toString())}},{key:"ngOnDestroy",value:function(){this._manager.deleteLayer(this)}}]),e}()).\u0275fac=function(e){return new(e||Rf)(r.Pb(Yf))},Rf.\u0275dir=r.Kb({type:Rf,selectors:[["agm-bicycling-layer"]],inputs:{visible:"visible"},features:[r.zb]}),Rf),em=((xf=function(){function e(t,n){_classCallCheck(this,e),this._apiWrapper=t,this._zone=n,this._circles=new Map}return _createClass(e,[{key:"addCircle",value:function(e){this._circles.set(e,this._apiWrapper.createCircle({center:{lat:e.latitude,lng:e.longitude},clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,radius:e.radius,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokePosition:e.strokePosition,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex}))}},{key:"removeCircle",value:function(e){var t=this;return this._circles.get(e).then((function(n){n.setMap(null),t._circles.delete(e)}))}},{key:"setOptions",value:function(e,t){return this._circles.get(e).then((function(e){"string"==typeof t.strokePosition&&(t.strokePosition=google.maps.StrokePosition[t.strokePosition]),e.setOptions(t)}))}},{key:"getBounds",value:function(e){return this._circles.get(e).then((function(e){return e.getBounds()}))}},{key:"getCenter",value:function(e){return this._circles.get(e).then((function(e){return e.getCenter()}))}},{key:"getRadius",value:function(e){return this._circles.get(e).then((function(e){return e.getRadius()}))}},{key:"setCenter",value:function(e){return this._circles.get(e).then((function(t){return t.setCenter({lat:e.latitude,lng:e.longitude})}))}},{key:"setEditable",value:function(e){return this._circles.get(e).then((function(t){return t.setEditable(e.editable)}))}},{key:"setDraggable",value:function(e){return this._circles.get(e).then((function(t){return t.setDraggable(e.draggable)}))}},{key:"setVisible",value:function(e){return this._circles.get(e).then((function(t){return t.setVisible(e.visible)}))}},{key:"setRadius",value:function(e){return this._circles.get(e).then((function(t){return t.setRadius(e.radius)}))}},{key:"getNativeCircle",value:function(e){return this._circles.get(e)}},{key:"createEventObservable",value:function(e,t){var n=this;return new ff.a((function(i){var r=null;return n._circles.get(t).then((function(t){r=t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))})),function(){null!==r&&r.remove()}}))}}]),e}()).\u0275fac=function(e){return new(e||xf)(r.dc(Kf),r.dc(r.z))},xf.\u0275prov=r.Lb({token:xf,factory:xf.\u0275fac}),xf),tm=((Lf=_f=function(){function e(t){_classCallCheck(this,e),this._manager=t,this.clickable=!0,this.draggable=!1,this.editable=!1,this.radius=0,this.strokePosition="CENTER",this.strokeWeight=0,this.visible=!0,this.centerChange=new r.n,this.circleClick=new r.n,this.circleDblClick=new r.n,this.drag=new r.n,this.dragEnd=new r.n,this.dragStart=new r.n,this.mouseDown=new r.n,this.mouseMove=new r.n,this.mouseOut=new r.n,this.mouseOver=new r.n,this.mouseUp=new r.n,this.radiusChange=new r.n,this.rightClick=new r.n,this._circleAddedToManager=!1,this._eventSubscriptions=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this._manager.addCircle(this),this._circleAddedToManager=!0,this._registerEventListeners()}},{key:"ngOnChanges",value:function(e){this._circleAddedToManager&&((e.latitude||e.longitude)&&this._manager.setCenter(this),e.editable&&this._manager.setEditable(this),e.draggable&&this._manager.setDraggable(this),e.visible&&this._manager.setVisible(this),e.radius&&this._manager.setRadius(this),this._updateCircleOptionsChanges(e))}},{key:"_updateCircleOptionsChanges",value:function(e){var t={},n=Object.keys(e).filter((function(e){return-1!==_f._mapOptions.indexOf(e)}));n.forEach((function(n){t[n]=e[n].currentValue})),n.length>0&&this._manager.setOptions(this,t)}},{key:"_registerEventListeners",value:function(){var e=this,t=new Map;t.set("center_changed",this.centerChange),t.set("click",this.circleClick),t.set("dblclick",this.circleDblClick),t.set("drag",this.drag),t.set("dragend",this.dragEnd),t.set("dragstart",this.dragStart),t.set("mousedown",this.mouseDown),t.set("mousemove",this.mouseMove),t.set("mouseout",this.mouseOut),t.set("mouseover",this.mouseOver),t.set("mouseup",this.mouseUp),t.set("radius_changed",this.radiusChange),t.set("rightclick",this.rightClick),t.forEach((function(t,n){e._eventSubscriptions.push(e._manager.createEventObservable(n,e).subscribe((function(i){switch(n){case"radius_changed":e._manager.getRadius(e).then((function(e){return t.emit(e)}));break;case"center_changed":e._manager.getCenter(e).then((function(e){return t.emit({lat:e.lat(),lng:e.lng()})}));break;default:t.emit({coords:{lat:i.latLng.lat(),lng:i.latLng.lng()}})}})))}))}},{key:"ngOnDestroy",value:function(){this._eventSubscriptions.forEach((function(e){e.unsubscribe()})),this._eventSubscriptions=null,this._manager.removeCircle(this)}},{key:"getBounds",value:function(){return this._manager.getBounds(this)}},{key:"getCenter",value:function(){return this._manager.getCenter(this)}}]),e}()).\u0275fac=function(e){return new(e||Lf)(r.Pb(em))},Lf.\u0275dir=r.Kb({type:Lf,selectors:[["agm-circle"]],inputs:{clickable:"clickable",draggable:["circleDraggable","draggable"],editable:"editable",radius:"radius",strokePosition:"strokePosition",strokeWeight:"strokeWeight",visible:"visible",latitude:"latitude",longitude:"longitude",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",zIndex:"zIndex"},outputs:{centerChange:"centerChange",circleClick:"circleClick",circleDblClick:"circleDblClick",drag:"drag",dragEnd:"dragEnd",dragStart:"dragStart",mouseDown:"mouseDown",mouseMove:"mouseMove",mouseOut:"mouseOut",mouseOver:"mouseOver",mouseUp:"mouseUp",radiusChange:"radiusChange",rightClick:"rightClick"},features:[r.zb]}),Lf._mapOptions=["fillColor","fillOpacity","strokeColor","strokeOpacity","strokePosition","strokeWeight","visible","zIndex","clickable"],Lf),nm=((Of=function(){function e(t,n){_classCallCheck(this,e),this._wrapper=t,this._zone=n,this._layers=new Map}return _createClass(e,[{key:"addDataLayer",value:function(e){var t=this,n=this._wrapper.createDataLayer({style:e.style}).then((function(n){return e.geoJson&&t.getDataFeatures(n,e.geoJson).then((function(e){return n.features=e})),n}));this._layers.set(e,n)}},{key:"deleteDataLayer",value:function(e){var t=this;this._layers.get(e).then((function(n){n.setMap(null),t._layers.delete(e)}))}},{key:"updateGeoJson",value:function(e,t){var n=this;this._layers.get(e).then((function(e){e.forEach((function(t){e.remove(t);var n=e.features.indexOf(t,0);n>-1&&e.features.splice(n,1)})),n.getDataFeatures(e,t).then((function(t){return e.features=t}))}))}},{key:"setDataOptions",value:function(e,t){this._layers.get(e).then((function(e){e.setControlPosition(t.controlPosition),e.setControls(t.controls),e.setDrawingMode(t.drawingMode),e.setStyle(t.style)}))}},{key:"createEventObservable",value:function(e,t){var n=this;return new ff.a((function(i){n._layers.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}},{key:"getDataFeatures",value:function(e,t){return new Promise((function(n,i){if("object"==typeof t)try{n(e.addGeoJson(t))}catch(r){i(r)}else"string"==typeof t?e.loadGeoJson(t,null,n):i("Impossible to extract features from geoJson: wrong argument type")}))}}]),e}()).\u0275fac=function(e){return new(e||Of)(r.dc(Kf),r.dc(r.z))},Of.\u0275prov=r.Lb({token:Of,factory:Of.\u0275fac}),Of),im=0,rm=((Af=Ff=function(){function e(t){_classCallCheck(this,e),this._manager=t,this._addedToManager=!1,this._id=(im++).toString(),this._subscriptions=[],this.layerClick=new r.n,this.geoJson=null}return _createClass(e,[{key:"ngOnInit",value:function(){this._addedToManager||(this._manager.addDataLayer(this),this._addedToManager=!0,this._addEventListeners())}},{key:"_addEventListeners",value:function(){var e=this;[{name:"click",handler:function(t){return e.layerClick.emit(t)}}].forEach((function(t){var n=e._manager.createEventObservable(t.name,e).subscribe(t.handler);e._subscriptions.push(n)}))}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmDataLayer-".concat(this._id.toString())}},{key:"ngOnDestroy",value:function(){this._manager.deleteDataLayer(this),this._subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"ngOnChanges",value:function(e){var t=this;if(this._addedToManager){var n=e.geoJson;n&&this._manager.updateGeoJson(this,n.currentValue);var i={};Ff._dataOptionsAttributes.forEach((function(n){return i[n]=e.hasOwnProperty(n)?e[n].currentValue:t[n]})),this._manager.setDataOptions(this,i)}}}]),e}()).\u0275fac=function(e){return new(e||Af)(r.Pb(nm))},Af.\u0275dir=r.Kb({type:Af,selectors:[["agm-data-layer"]],inputs:{geoJson:"geoJson",style:"style"},outputs:{layerClick:"layerClick"},features:[r.zb]}),Af._dataOptionsAttributes=["style"],Af),om=function e(){_classCallCheck(this,e)},cm=((Wf=function(){function e(t){var n,i=this;_classCallCheck(this,e),this._boundsChangeSampleTime$=new mf.a(200),this._includeInBounds$=new mf.a(new Map),this.bounds$=Object(gf.a)(t.load()).pipe(Object(If.a)((function(){return i._includeInBounds$})),(n=this._boundsChangeSampleTime$.pipe(Object(F.a)((function(e){return Object(bn.a)(0,e)}))),function(e){return e.lift(new kf(n))}),Object(Ma.a)((function(e){return i._generateBounds(e)})),Object(Vf.a)(1))}return _createClass(e,[{key:"_generateBounds",value:function(e){var t=new google.maps.LatLngBounds;return e.forEach((function(e){return t.extend(e)})),t}},{key:"addToBounds",value:function(e){var t=this._createIdentifier(e);if(!this._includeInBounds$.value.has(t)){var n=this._includeInBounds$.value;n.set(t,e),this._includeInBounds$.next(n)}}},{key:"removeFromBounds",value:function(e){var t=this._includeInBounds$.value;t.delete(this._createIdentifier(e)),this._includeInBounds$.next(t)}},{key:"changeFitBoundsChangeSampleTime",value:function(e){this._boundsChangeSampleTime$.next(e)}},{key:"getBounds$",value:function(){return this.bounds$}},{key:"_createIdentifier",value:function(e){return"".concat(e.lat,"+").concat(e.lng)}}]),e}()).\u0275fac=function(e){return new(e||Wf)(r.dc(Jf))},Wf.\u0275prov=r.Lb({token:Wf,factory:Wf.\u0275fac}),Wf),am=((jf=function(){function e(t,n){_classCallCheck(this,e),this._fitBoundsAccessor=t,this._fitBoundsService=n,this.agmFitBounds=!0,this._destroyed$=new U.a,this._latestFitBoundsDetails=null}return _createClass(e,[{key:"ngOnChanges",value:function(){this._updateBounds()}},{key:"ngOnInit",value:function(){var e=this;this._fitBoundsAccessor.getFitBoundsDetails$().pipe(Object(Tf.a)((function(e,t){return e.latLng.lat===t.latLng.lat&&e.latLng.lng===t.latLng.lng})),Object(Ef.a)(this._destroyed$)).subscribe((function(t){return e._updateBounds(t)}))}},{key:"_updateBounds",value:function(e){this._latestFitBoundsDetails&&this._fitBoundsService.removeFromBounds(this._latestFitBoundsDetails.latLng),e&&(this._latestFitBoundsDetails=e),this._latestFitBoundsDetails&&!0===this.agmFitBounds&&this._fitBoundsService.addToBounds(this._latestFitBoundsDetails.latLng)}},{key:"ngOnDestroy",value:function(){this._destroyed$.next(),this._destroyed$.complete(),null!==this._latestFitBoundsDetails&&this._fitBoundsService.removeFromBounds(this._latestFitBoundsDetails.latLng)}}]),e}()).\u0275fac=function(e){return new(e||jf)(r.Pb(om,2),r.Pb(cm))},jf.\u0275dir=r.Kb({type:jf,selectors:[["","agmFitBounds",""]],inputs:{agmFitBounds:"agmFitBounds"},features:[r.zb]}),jf),lm=((Nf=function(){function e(t,n){_classCallCheck(this,e),this._mapsWrapper=t,this._zone=n,this._markers=new Map}return _createClass(e,[{key:"convertAnimation",value:function(e){return Object(bf.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===e?null:this._mapsWrapper.getNativeMap().then((function(){return google.maps.Animation[e]})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"deleteMarker",value:function(e){var t=this,n=this._markers.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.setMap(null),t._markers.delete(e)}))}))}},{key:"updateMarkerPosition",value:function(e){return this._markers.get(e).then((function(t){return t.setPosition({lat:e.latitude,lng:e.longitude})}))}},{key:"updateTitle",value:function(e){return this._markers.get(e).then((function(t){return t.setTitle(e.title)}))}},{key:"updateLabel",value:function(e){return this._markers.get(e).then((function(t){t.setLabel(e.label)}))}},{key:"updateDraggable",value:function(e){return this._markers.get(e).then((function(t){return t.setDraggable(e.draggable)}))}},{key:"updateIcon",value:function(e){return this._markers.get(e).then((function(t){return t.setIcon(e.iconUrl)}))}},{key:"updateOpacity",value:function(e){return this._markers.get(e).then((function(t){return t.setOpacity(e.opacity)}))}},{key:"updateVisible",value:function(e){return this._markers.get(e).then((function(t){return t.setVisible(e.visible)}))}},{key:"updateZIndex",value:function(e){return this._markers.get(e).then((function(t){return t.setZIndex(e.zIndex)}))}},{key:"updateClickable",value:function(e){return this._markers.get(e).then((function(t){return t.setClickable(e.clickable)}))}},{key:"updateAnimation",value:function(e){return Object(bf.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._markers.get(e);case 2:return t.t0=t.sent,t.next=5,this.convertAnimation(e.animation);case 5:t.t1=t.sent,t.t0.setAnimation.call(t.t0,t.t1);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"addMarker",value:function(e){var t=this,n=new Promise((function(n){return Object(bf.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this._mapsWrapper,t.t1={lat:e.latitude,lng:e.longitude},t.t2=e.label,t.t3=e.draggable,t.t4=e.iconUrl,t.t5=e.opacity,t.t6=e.visible,t.t7=e.zIndex,t.t8=e.title,t.t9=e.clickable,t.next=12,this.convertAnimation(e.animation);case 12:return t.t10=t.sent,t.t11={position:t.t1,label:t.t2,draggable:t.t3,icon:t.t4,opacity:t.t5,visible:t.t6,zIndex:t.t7,title:t.t8,clickable:t.t9,animation:t.t10},t.abrupt("return",t.t0.createMarker.call(t.t0,t.t11).then(n));case 15:case"end":return t.stop()}}),t,this)})))}));this._markers.set(e,n)}},{key:"getNativeMarker",value:function(e){return this._markers.get(e)}},{key:"createEventObservable",value:function(e,t){var n=this;return new ff.a((function(i){n._markers.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||Nf)(r.dc(Kf),r.dc(r.z))},Nf.\u0275prov=r.Lb({token:Nf,factory:Nf.\u0275fac}),Nf),sm=((Pf=function(){function e(t,n,i){_classCallCheck(this,e),this._mapsWrapper=t,this._zone=n,this._markerManager=i,this._infoWindows=new Map}return _createClass(e,[{key:"deleteInfoWindow",value:function(e){var t=this,n=this._infoWindows.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.close(),t._infoWindows.delete(e)}))}))}},{key:"setPosition",value:function(e){return this._infoWindows.get(e).then((function(t){return t.setPosition({lat:e.latitude,lng:e.longitude})}))}},{key:"setZIndex",value:function(e){return this._infoWindows.get(e).then((function(t){return t.setZIndex(e.zIndex)}))}},{key:"open",value:function(e){var t=this;return this._infoWindows.get(e).then((function(n){return null!=e.hostMarker?t._markerManager.getNativeMarker(e.hostMarker).then((function(e){return t._mapsWrapper.getNativeMap().then((function(t){return n.open(t,e)}))})):t._mapsWrapper.getNativeMap().then((function(e){return n.open(e)}))}))}},{key:"close",value:function(e){return this._infoWindows.get(e).then((function(e){return e.close()}))}},{key:"setOptions",value:function(e,t){return this._infoWindows.get(e).then((function(e){return e.setOptions(t)}))}},{key:"addInfoWindow",value:function(e){var t={content:e.content,maxWidth:e.maxWidth,zIndex:e.zIndex,disableAutoPan:e.disableAutoPan};"number"==typeof e.latitude&&"number"==typeof e.longitude&&(t.position={lat:e.latitude,lng:e.longitude});var n=this._mapsWrapper.createInfoWindow(t);this._infoWindows.set(e,n)}},{key:"createEventObservable",value:function(e,t){var n=this;return new ff.a((function(i){n._infoWindows.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||Pf)(r.dc(Kf),r.dc(r.z),r.dc(lm))},Pf.\u0275prov=r.Lb({token:Pf,factory:Pf.\u0275fac}),Pf),um=0,dm=((Hf=qf=function(){function e(t,n){_classCallCheck(this,e),this._infoWindowManager=t,this._el=n,this.isOpen=!1,this.infoWindowClose=new r.n,this._infoWindowAddedToManager=!1,this._id=(um++).toString()}return _createClass(e,[{key:"ngOnInit",value:function(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()}},{key:"ngOnChanges",value:function(e){this._infoWindowAddedToManager&&((e.latitude||e.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),e.zIndex&&this._infoWindowManager.setZIndex(this),e.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(e))}},{key:"_registerEventListeners",value:function(){var e=this;this._infoWindowManager.createEventObservable("closeclick",this).subscribe((function(){e.isOpen=!1,e.infoWindowClose.emit()}))}},{key:"_updateOpenState",value:function(){this.isOpen?this.open():this.close()}},{key:"_setInfoWindowOptions",value:function(e){var t={};Object.keys(e).filter((function(e){return-1!==qf._infoWindowOptionsInputs.indexOf(e)})).forEach((function(n){t[n]=e[n].currentValue})),this._infoWindowManager.setOptions(this,t)}},{key:"open",value:function(){return this._infoWindowManager.open(this)}},{key:"close",value:function(){var e=this;return this._infoWindowManager.close(this).then((function(){e.infoWindowClose.emit()}))}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmInfoWindow-"+this._id.toString()}},{key:"ngOnDestroy",value:function(){this._infoWindowManager.deleteInfoWindow(this)}}]),e}()).\u0275fac=function(e){return new(e||Hf)(r.Pb(sm),r.Pb(r.l))},Hf.\u0275cmp=r.Jb({type:Hf,selectors:[["agm-info-window"]],inputs:{isOpen:"isOpen",latitude:"latitude",longitude:"longitude",disableAutoPan:"disableAutoPan",zIndex:"zIndex",maxWidth:"maxWidth"},outputs:{infoWindowClose:"infoWindowClose"},features:[r.zb],ngContentSelectors:zf,decls:2,vars:0,consts:[[1,"agm-info-window-content"]],template:function(e,t){1&e&&(r.rc(),r.Vb(0,"div",0),r.qc(1),r.Ub())},encapsulation:2}),Hf._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],Hf),bm=((Qf=function(){function e(t,n){_classCallCheck(this,e),this._wrapper=t,this._zone=n,this._layers=new Map}return _createClass(e,[{key:"addKmlLayer",value:function(e){var t=this._wrapper.getNativeMap().then((function(t){return new google.maps.KmlLayer({clickable:e.clickable,map:t,preserveViewport:e.preserveViewport,screenOverlays:e.screenOverlays,suppressInfoWindows:e.suppressInfoWindows,url:e.url,zIndex:e.zIndex})}));this._layers.set(e,t)}},{key:"setOptions",value:function(e,t){this._layers.get(e).then((function(e){return e.setOptions(t)}))}},{key:"deleteKmlLayer",value:function(e){var t=this;this._layers.get(e).then((function(n){n.setMap(null),t._layers.delete(e)}))}},{key:"createEventObservable",value:function(e,t){var n=this;return new ff.a((function(i){n._layers.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||Qf)(r.dc(Kf),r.dc(r.z))},Qf.\u0275prov=r.Lb({token:Qf,factory:Qf.\u0275fac}),Qf),fm=0,mm=((Gf=$f=function(){function e(t){_classCallCheck(this,e),this._manager=t,this._addedToManager=!1,this._id=(fm++).toString(),this._subscriptions=[],this.clickable=!0,this.preserveViewport=!1,this.screenOverlays=!0,this.suppressInfoWindows=!1,this.url=null,this.zIndex=null,this.layerClick=new r.n,this.defaultViewportChange=new r.n,this.statusChange=new r.n}return _createClass(e,[{key:"ngOnInit",value:function(){this._addedToManager||(this._manager.addKmlLayer(this),this._addedToManager=!0,this._addEventListeners())}},{key:"ngOnChanges",value:function(e){this._addedToManager&&this._updatePolygonOptions(e)}},{key:"_updatePolygonOptions",value:function(e){var t=Object.keys(e).filter((function(e){return-1!==$f._kmlLayerOptions.indexOf(e)})).reduce((function(t,n){return t[n]=e[n].currentValue,t}),{});Object.keys(t).length>0&&this._manager.setOptions(this,t)}},{key:"_addEventListeners",value:function(){var e=this;[{name:"click",handler:function(t){return e.layerClick.emit(t)}},{name:"defaultviewport_changed",handler:function(){return e.defaultViewportChange.emit()}},{name:"status_changed",handler:function(){return e.statusChange.emit()}}].forEach((function(t){var n=e._manager.createEventObservable(t.name,e).subscribe(t.handler);e._subscriptions.push(n)}))}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmKmlLayer-".concat(this._id.toString())}},{key:"ngOnDestroy",value:function(){this._manager.deleteKmlLayer(this),this._subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||Gf)(r.Pb(bm))},Gf.\u0275dir=r.Kb({type:Gf,selectors:[["agm-kml-layer"]],inputs:{clickable:"clickable",preserveViewport:"preserveViewport",screenOverlays:"screenOverlays",suppressInfoWindows:"suppressInfoWindows",url:"url",zIndex:"zIndex"},outputs:{layerClick:"layerClick",defaultViewportChange:"defaultViewportChange",statusChange:"statusChange"},features:[r.zb]}),Gf._kmlLayerOptions=["clickable","preserveViewport","screenOverlays","suppressInfoWindows","url","zIndex"],Gf);function gm(e){var t=["insert_at","remove_at","set_at"];return function e(t,n,i){return i?e(t,n).pipe(Object(Ma.a)((function(e){return Object(pf.a)(e)?i.apply(void 0,_toConsumableArray(e)):i(e)}))):new ff.a((function(e){var i,r=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.next(1===n.length?n[0]:n)};try{i=t(r)}catch(o){return void e.error(o)}if(Object(hf.a)(n))return function(){return n(r,i)}}))}((function(n){return t.map((function(t){return e.addListener(t,(function(i,r){return n.apply(e,[{newArr:e.getArray(),evName:t,index:i,previous:r}])}))}))}),(function(e,t){return t.forEach((function(e){return e.remove()}))}))}var pm,hm,vm,ym,Im,Cm,wm,km,Mm,Vm,Tm,Em,Um,xm,Rm,Dm,Bm,Sm,_m,Om,Lm,Fm,Am,Pm,Nm=((pm=function(){function e(t,n){_classCallCheck(this,e),this._mapsWrapper=t,this._zone=n,this._polygons=new Map}return _createClass(e,[{key:"addPolygon",value:function(e){var t=this._mapsWrapper.createPolygon({clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,geodesic:e.geodesic,paths:e.paths,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex});this._polygons.set(e,t)}},{key:"updatePolygon",value:function(e){var t=this,n=this._polygons.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.setPaths(e.paths)}))}))}},{key:"setPolygonOptions",value:function(e,t){return this._polygons.get(e).then((function(e){e.setOptions(t)}))}},{key:"deletePolygon",value:function(e){var t=this,n=this._polygons.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.setMap(null),t._polygons.delete(e)}))}))}},{key:"getPath",value:function(e){return this._polygons.get(e).then((function(e){return e.getPath().getArray()}))}},{key:"getPaths",value:function(e){return this._polygons.get(e).then((function(e){return e.getPaths().getArray().map((function(e){return e.getArray()}))}))}},{key:"createEventObservable",value:function(e,t){var n=this;return new ff.a((function(i){n._polygons.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}},{key:"createPathEventObservable",value:function(e){return Object(bf.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._polygons.get(e);case 2:return n=t.sent.getPaths(),t.abrupt("return",gm(n).pipe(Object(Uf.a)({newArr:n.getArray()}),Object(F.a)((function(e){return Object(vf.a).apply(void 0,_toConsumableArray(e.newArr.map((function(t,n){return gm(t).pipe(Object(Ma.a)((function(t){return{parentMVEvent:e,chMVCEvent:t,pathIndex:n}})))})))).pipe(Object(Uf.a)({parentMVEvent:e,chMVCEvent:null,pathIndex:null}))})),Object(_i.a)(1),Object(Ma.a)((function(e){var t,n=e.parentMVEvent,i=e.chMVCEvent,r=e.pathIndex;return i?(t={newArr:n.newArr.map((function(e){return e.getArray().map((function(e){return e.toJSON()}))})),pathIndex:r,eventName:i.evName,index:i.index},i.previous&&(t.previous=i.previous)):(t={newArr:n.newArr.map((function(e){return e.getArray().map((function(e){return e.toJSON()}))})),eventName:n.evName,index:n.index},n.previous&&(t.previous=n.previous.getArray())),t}))));case 4:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||pm)(r.dc(Kf),r.dc(r.z))},pm.\u0275prov=r.Lb({token:pm,factory:pm.\u0275fac}),pm),jm=((ym=hm=function(){function e(t,n){_classCallCheck(this,e),this._mapsWrapper=t,this._zone=n,this._polylines=new Map}return _createClass(e,[{key:"addPolyline",value:function(e){var t=this,n=this._mapsWrapper.getNativeMap().then((function(){return[hm._convertPoints(e),hm._convertIcons(e)]})).then((function(n){var i=_slicedToArray(n,2),r=i[0],o=i[1];return t._mapsWrapper.createPolyline({clickable:e.clickable,draggable:e.draggable,editable:e.editable,geodesic:e.geodesic,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex,path:r,icons:o})}));this._polylines.set(e,n)}},{key:"updatePolylinePoints",value:function(e){var t=this,n=hm._convertPoints(e),i=this._polylines.get(e);return null==i?Promise.resolve():i.then((function(e){return t._zone.run((function(){e.setPath(n)}))}))}},{key:"updateIconSequences",value:function(e){return Object(bf.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._mapsWrapper.getNativeMap();case 2:if(n=hm._convertIcons(e),null==(i=this._polylines.get(e))){t.next=5;break}return t.abrupt("return",i.then((function(e){return r._zone.run((function(){return e.setOptions({icons:n})}))})));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setPolylineOptions",value:function(e,t){return this._polylines.get(e).then((function(e){e.setOptions(t)}))}},{key:"deletePolyline",value:function(e){var t=this,n=this._polylines.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.setMap(null),t._polylines.delete(e)}))}))}},{key:"getMVCPath",value:function(e){return Object(bf.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._polylines.get(e);case 2:return t.abrupt("return",t.sent.getPath());case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getPath",value:function(e){return Object(bf.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMVCPath(e);case 2:return t.abrupt("return",t.sent.getArray());case 3:case"end":return t.stop()}}),t,this)})))}},{key:"createEventObservable",value:function(e,t){var n=this;return new ff.a((function(i){n._polylines.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}},{key:"createPathEventObservable",value:function(e){return Object(bf.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gm,t.next=3,this.getMVCPath(e);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t,this)})))}}],[{key:"_convertPoints",value:function(e){return e._getPoints().map((function(e){return{lat:e.latitude,lng:e.longitude}}))}},{key:"_convertPath",value:function(e){var t=google.maps.SymbolPath[e];return"number"==typeof t?t:e}},{key:"_convertIcons",value:function(e){var t=e._getIcons().map((function(e){return{fixedRotation:e.fixedRotation,offset:e.offset,repeat:e.repeat,icon:{anchor:new google.maps.Point(e.anchorX,e.anchorY),fillColor:e.fillColor,fillOpacity:e.fillOpacity,path:hm._convertPath(e.path),rotation:e.rotation,scale:e.scale,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight}}}));return t.forEach((function(e){Object.entries(e).forEach((function(t){var n=_slicedToArray(t,2),i=n[0];void 0===n[1]&&delete e[i]})),void 0!==e.icon.anchor.x&&void 0!==e.icon.anchor.y||delete e.icon.anchor})),t}}]),e}()).\u0275fac=function(e){return new(e||ym)(r.dc(Kf),r.dc(r.z))},ym.\u0275prov=r.Lb({token:ym,factory:ym.\u0275fac}),ym),Wm=((vm=function(){function e(t,n){_classCallCheck(this,e),this._apiWrapper=t,this._zone=n,this._rectangles=new Map}return _createClass(e,[{key:"addRectangle",value:function(e){this._rectangles.set(e,this._apiWrapper.createRectangle({bounds:{north:e.north,east:e.east,south:e.south,west:e.west},clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokePosition:e.strokePosition,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex}))}},{key:"removeRectangle",value:function(e){var t=this;return this._rectangles.get(e).then((function(n){n.setMap(null),t._rectangles.delete(e)}))}},{key:"setOptions",value:function(e,t){return this._rectangles.get(e).then((function(e){return e.setOptions(t)}))}},{key:"getBounds",value:function(e){return this._rectangles.get(e).then((function(e){return e.getBounds()}))}},{key:"setBounds",value:function(e){return this._rectangles.get(e).then((function(t){return t.setBounds({north:e.north,east:e.east,south:e.south,west:e.west})}))}},{key:"setEditable",value:function(e){return this._rectangles.get(e).then((function(t){return t.setEditable(e.editable)}))}},{key:"setDraggable",value:function(e){return this._rectangles.get(e).then((function(t){return t.setDraggable(e.draggable)}))}},{key:"setVisible",value:function(e){return this._rectangles.get(e).then((function(t){return t.setVisible(e.visible)}))}},{key:"createEventObservable",value:function(e,t){var n=this;return ff.a.create((function(i){var r=null;return n._rectangles.get(t).then((function(t){r=t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))})),function(){null!==r&&r.remove()}}))}}]),e}()).\u0275fac=function(e){return new(e||vm)(r.dc(Kf),r.dc(r.z))},vm.\u0275prov=r.Lb({token:vm,factory:vm.\u0275fac}),vm),qm=((Cm=Im=function(){function e(t,n,i,o,c){_classCallCheck(this,e),this._elem=t,this._mapsWrapper=n,this._platformId=i,this._fitBoundsService=o,this._zone=c,this.longitude=0,this.latitude=0,this.zoom=8,this.draggable=!0,this.disableDoubleClickZoom=!1,this.disableDefaultUI=!1,this.scrollwheel=!0,this.keyboardShortcuts=!0,this.styles=[],this.usePanning=!1,this.fitBounds=!1,this.scaleControl=!1,this.mapTypeControl=!1,this.panControl=!1,this.rotateControl=!1,this.fullscreenControl=!1,this.mapTypeId="roadmap",this.clickableIcons=!0,this.showDefaultInfoWindow=!0,this.gestureHandling="auto",this.tilt=0,this._observableSubscriptions=[],this.mapClick=new r.n,this.mapRightClick=new r.n,this.mapDblClick=new r.n,this.centerChange=new r.n,this.boundsChange=new r.n,this.mapTypeIdChange=new r.n,this.idle=new r.n,this.zoomChange=new r.n,this.mapReady=new r.n,this.tilesLoaded=new r.n}return _createClass(e,[{key:"ngOnInit",value:function(){if(!Object(x.R)(this._platformId)){var e=this._elem.nativeElement.querySelector(".agm-map-container-inner");this._initMapInstance(e)}}},{key:"_initMapInstance",value:function(e){var t=this;this._mapsWrapper.createMap(e,{center:{lat:this.latitude||0,lng:this.longitude||0},zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,controlSize:this.controlSize,disableDefaultUI:this.disableDefaultUI,disableDoubleClickZoom:this.disableDoubleClickZoom,scrollwheel:this.scrollwheel,backgroundColor:this.backgroundColor,draggable:this.draggable,draggableCursor:this.draggableCursor,draggingCursor:this.draggingCursor,keyboardShortcuts:this.keyboardShortcuts,styles:this.styles,zoomControl:this.zoomControl,zoomControlOptions:this.zoomControlOptions,streetViewControl:this.streetViewControl,streetViewControlOptions:this.streetViewControlOptions,scaleControl:this.scaleControl,scaleControlOptions:this.scaleControlOptions,mapTypeControl:this.mapTypeControl,mapTypeControlOptions:this.mapTypeControlOptions,panControl:this.panControl,panControlOptions:this.panControlOptions,rotateControl:this.rotateControl,rotateControlOptions:this.rotateControlOptions,fullscreenControl:this.fullscreenControl,fullscreenControlOptions:this.fullscreenControlOptions,mapTypeId:this.mapTypeId,clickableIcons:this.clickableIcons,gestureHandling:this.gestureHandling,tilt:this.tilt,restriction:this.restriction}).then((function(){return t._mapsWrapper.getNativeMap()})).then((function(e){return t.mapReady.emit(e)})),this._handleMapCenterChange(),this._handleMapZoomChange(),this._handleMapMouseEvents(),this._handleBoundsChange(),this._handleMapTypeIdChange(),this._handleTilesLoadedEvent(),this._handleIdleEvent()}},{key:"ngOnDestroy",value:function(){this._observableSubscriptions.forEach((function(e){return e.unsubscribe()})),this._mapsWrapper.clearInstanceListeners(),this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe()}},{key:"ngOnChanges",value:function(e){this._updateMapOptionsChanges(e),this._updatePosition(e)}},{key:"_updateMapOptionsChanges",value:function(e){var t={};Object.keys(e).filter((function(e){return-1!==Im._mapOptionsAttributes.indexOf(e)})).forEach((function(n){t[n]=e[n].currentValue})),this._mapsWrapper.setMapOptions(t)}},{key:"triggerResize",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(n){setTimeout((function(){return e._mapsWrapper.triggerMapEvent("resize").then((function(){t&&(null!=e.fitBounds?e._fitBounds():e._setCenter()),n()}))}))}))}},{key:"_updatePosition",value:function(e){(null!=e.latitude||null!=e.longitude||e.fitBounds)&&("fitBounds"in e?this._fitBounds():"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._setCenter())}},{key:"_setCenter",value:function(){var e={lat:this.latitude,lng:this.longitude};this.usePanning?this._mapsWrapper.panTo(e):this._mapsWrapper.setCenter(e)}},{key:"_fitBounds",value:function(){switch(this.fitBounds){case!0:this._subscribeToFitBoundsUpdates();break;case!1:this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe();break;default:this._updateBounds(this.fitBounds,this.fitBoundsPadding)}}},{key:"_subscribeToFitBoundsUpdates",value:function(){var e=this;this._zone.runOutsideAngular((function(){e._fitBoundsSubscription=e._fitBoundsService.getBounds$().subscribe((function(t){e._zone.run((function(){return e._updateBounds(t,e.fitBoundsPadding)}))}))}))}},{key:"_updateBounds",value:function(e,t){if(e){if(this._isLatLngBoundsLiteral(e)&&"undefined"!=typeof google&&google&&google.maps&&google.maps.LatLngBounds){var n=new google.maps.LatLngBounds;n.union(e),e=n}this.usePanning?this._mapsWrapper.panToBounds(e,t):this._mapsWrapper.fitBounds(e,t)}}},{key:"_isLatLngBoundsLiteral",value:function(e){return null!=e&&void 0===e.extend}},{key:"_handleMapCenterChange",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("center_changed").subscribe((function(){e._mapsWrapper.getCenter().then((function(t){e.latitude=t.lat(),e.longitude=t.lng(),e.centerChange.emit({lat:e.latitude,lng:e.longitude})}))}));this._observableSubscriptions.push(t)}},{key:"_handleBoundsChange",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("bounds_changed").subscribe((function(){e._mapsWrapper.getBounds().then((function(t){e.boundsChange.emit(t)}))}));this._observableSubscriptions.push(t)}},{key:"_handleMapTypeIdChange",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("maptypeid_changed").subscribe((function(){e._mapsWrapper.getMapTypeId().then((function(t){e.mapTypeIdChange.emit(t)}))}));this._observableSubscriptions.push(t)}},{key:"_handleMapZoomChange",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("zoom_changed").subscribe((function(){e._mapsWrapper.getZoom().then((function(t){e.zoom=t,e.zoomChange.emit(t)}))}));this._observableSubscriptions.push(t)}},{key:"_handleIdleEvent",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("idle").subscribe((function(){e.idle.emit(void 0)}));this._observableSubscriptions.push(t)}},{key:"_handleTilesLoadedEvent",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("tilesloaded").subscribe((function(){return e.tilesLoaded.emit(void 0)}));this._observableSubscriptions.push(t)}},{key:"_handleMapMouseEvents",value:function(){var e=this;[{name:"click",emitter:this.mapClick},{name:"rightclick",emitter:this.mapRightClick},{name:"dblclick",emitter:this.mapDblClick}].forEach((function(t){var n=e._mapsWrapper.subscribeToMapEvent(t.name).subscribe((function(n){var i={coords:{lat:n.latLng.lat(),lng:n.latLng.lng()},placeId:n.placeId};i.placeId&&!e.showDefaultInfoWindow&&n.stop(),t.emitter.emit(i)}));e._observableSubscriptions.push(n)}))}}]),e}()).\u0275fac=function(e){return new(e||Cm)(r.Pb(r.l),r.Pb(Kf),r.Pb(r.B),r.Pb(cm),r.Pb(r.z))},Cm.\u0275cmp=r.Jb({type:Cm,selectors:[["agm-map"]],hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("sebm-google-map-container",!0)},inputs:{longitude:"longitude",latitude:"latitude",zoom:"zoom",draggable:["mapDraggable","draggable"],disableDoubleClickZoom:"disableDoubleClickZoom",disableDefaultUI:"disableDefaultUI",scrollwheel:"scrollwheel",keyboardShortcuts:"keyboardShortcuts",styles:"styles",usePanning:"usePanning",fitBounds:"fitBounds",scaleControl:"scaleControl",mapTypeControl:"mapTypeControl",panControl:"panControl",rotateControl:"rotateControl",fullscreenControl:"fullscreenControl",mapTypeId:"mapTypeId",clickableIcons:"clickableIcons",showDefaultInfoWindow:"showDefaultInfoWindow",gestureHandling:"gestureHandling",tilt:"tilt",minZoom:"minZoom",maxZoom:"maxZoom",controlSize:"controlSize",backgroundColor:"backgroundColor",draggableCursor:"draggableCursor",draggingCursor:"draggingCursor",zoomControl:"zoomControl",zoomControlOptions:"zoomControlOptions",streetViewControl:"streetViewControl",streetViewControlOptions:"streetViewControlOptions",fitBoundsPadding:"fitBoundsPadding",scaleControlOptions:"scaleControlOptions",mapTypeControlOptions:"mapTypeControlOptions",panControlOptions:"panControlOptions",rotateControlOptions:"rotateControlOptions",fullscreenControlOptions:"fullscreenControlOptions",restriction:"restriction"},outputs:{mapClick:"mapClick",mapRightClick:"mapRightClick",mapDblClick:"mapDblClick",centerChange:"centerChange",boundsChange:"boundsChange",mapTypeIdChange:"mapTypeIdChange",idle:"idle",zoomChange:"zoomChange",mapReady:"mapReady",tilesLoaded:"tilesLoaded"},features:[r.Ab([em,nm,nm,cm,Kf,sm,bm,Yf,lm,Nm,jm,Wm]),r.zb],ngContentSelectors:zf,decls:3,vars:0,consts:[[1,"agm-map-container-inner","sebm-google-map-container-inner"],[1,"agm-map-content"]],template:function(e,t){1&e&&(r.rc(),r.Qb(0,"div",0),r.Vb(1,"div",1),r.qc(2),r.Ub())},styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"]}),Cm._mapOptionsAttributes=["disableDoubleClickZoom","scrollwheel","draggable","draggableCursor","draggingCursor","keyboardShortcuts","zoomControl","zoomControlOptions","styles","streetViewControl","streetViewControlOptions","zoom","mapTypeControl","mapTypeControlOptions","minZoom","maxZoom","panControl","panControlOptions","rotateControl","rotateControlOptions","fullscreenControl","fullscreenControlOptions","scaleControl","scaleControlOptions","mapTypeId","clickableIcons","gestureHandling","tilt","restriction"],Cm),Qm=0,Hm=((km=wm=function(){function e(t){_classCallCheck(this,e),this._markerManager=t,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.animationChange=new r.n,this.markerClick=new r.n,this.markerDblClick=new r.n,this.markerRightClick=new r.n,this.dragStart=new r.n,this.drag=new r.n,this.dragEnd=new r.n,this.mouseOver=new r.n,this.mouseOut=new r.n,this.infoWindow=new r.D,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new yf.a(1),this._id=(Qm++).toString()}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe((function(){return e.handleInfoWindowUpdate()}))}},{key:"handleInfoWindowUpdate",value:function(){var e=this;if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach((function(t){t.hostMarker=e}))}},{key:"ngOnChanges",value:function(e){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(e.latitude||e.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),e.title&&this._markerManager.updateTitle(this),e.label&&this._markerManager.updateLabel(this),e.draggable&&this._markerManager.updateDraggable(this),e.iconUrl&&this._markerManager.updateIcon(this),e.opacity&&this._markerManager.updateOpacity(this),e.visible&&this._markerManager.updateVisible(this),e.zIndex&&this._markerManager.updateZIndex(this),e.clickable&&this._markerManager.updateClickable(this),e.animation&&this._markerManager.updateAnimation(this)}}},{key:"getFitBoundsDetails$",value:function(){return this._fitBoundsDetails$.asObservable()}},{key:"_updateFitBoundsDetails",value:function(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})}},{key:"_addEventListeners",value:function(){var e=this,t=this._markerManager.createEventObservable("click",this).subscribe((function(){e.openInfoWindow&&e.infoWindow.forEach((function(e){return e.open()})),e.markerClick.emit(e)}));this._observableSubscriptions.push(t);var n=this._markerManager.createEventObservable("dblclick",this).subscribe((function(){e.markerDblClick.emit(null)}));this._observableSubscriptions.push(n);var i=this._markerManager.createEventObservable("rightclick",this).subscribe((function(){e.markerRightClick.emit(null)}));this._observableSubscriptions.push(i);var r=this._markerManager.createEventObservable("dragstart",this).subscribe((function(t){e.dragStart.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(r);var o=this._markerManager.createEventObservable("drag",this).subscribe((function(t){e.drag.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(o);var c=this._markerManager.createEventObservable("dragend",this).subscribe((function(t){e.dragEnd.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(c);var a=this._markerManager.createEventObservable("mouseover",this).subscribe((function(t){e.mouseOver.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(a);var l=this._markerManager.createEventObservable("mouseout",this).subscribe((function(t){e.mouseOut.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(l);var s=this._markerManager.createEventObservable("animation_changed",this).subscribe((function(){e.animationChange.emit(e.animation)}));this._observableSubscriptions.push(s)}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmMarker-"+this._id.toString()}},{key:"ngOnDestroy",value:function(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||km)(r.Pb(lm))},km.\u0275dir=r.Kb({type:km,selectors:[["agm-marker"]],contentQueries:function(e,t,n){var i;1&e&&r.Hb(n,dm,!1),2&e&&r.Ec(i=r.ic())&&(t.infoWindow=i)},inputs:{latitude:"latitude",longitude:"longitude",title:"title",label:"label",draggable:["markerDraggable","draggable"],iconUrl:"iconUrl",openInfoWindow:"openInfoWindow",opacity:"opacity",visible:"visible",zIndex:"zIndex",animation:"animation",clickable:["markerClickable","clickable"]},outputs:{markerClick:"markerClick",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",mouseOver:"mouseOver",mouseOut:"mouseOut",animationChange:"animationChange",markerDblClick:"markerDblClick",markerRightClick:"markerRightClick"},features:[r.Ab([{provide:om,useExisting:Object(r.T)((function(){return wm}))}]),r.zb]}),km),$m=((Tm=Mm=function(){function e(t){_classCallCheck(this,e),this._polygonManager=t,this.clickable=!0,this.draggable=!1,this.editable=!1,this.geodesic=!1,this.paths=[],this.polyClick=new r.n,this.polyDblClick=new r.n,this.polyDrag=new r.n,this.polyDragEnd=new r.n,this.polyDragStart=new r.n,this.polyMouseDown=new r.n,this.polyMouseMove=new r.n,this.polyMouseOut=new r.n,this.polyMouseOver=new r.n,this.polyMouseUp=new r.n,this.polyRightClick=new r.n,this.polyPathsChange=new r.n,this._polygonAddedToManager=!1,this._subscriptions=[]}return _createClass(e,[{key:"ngAfterContentInit",value:function(){this._polygonAddedToManager||this._init()}},{key:"ngOnChanges",value:function(e){this._polygonAddedToManager?this._polygonManager.setPolygonOptions(this,this._updatePolygonOptions(e)):this._init()}},{key:"_init",value:function(){this._polygonManager.addPolygon(this),this._polygonAddedToManager=!0,this._addEventListeners()}},{key:"_addEventListeners",value:function(){var e=this;[{name:"click",handler:function(t){return e.polyClick.emit(t)}},{name:"dblclick",handler:function(t){return e.polyDblClick.emit(t)}},{name:"drag",handler:function(t){return e.polyDrag.emit(t)}},{name:"dragend",handler:function(t){return e.polyDragEnd.emit(t)}},{name:"dragstart",handler:function(t){return e.polyDragStart.emit(t)}},{name:"mousedown",handler:function(t){return e.polyMouseDown.emit(t)}},{name:"mousemove",handler:function(t){return e.polyMouseMove.emit(t)}},{name:"mouseout",handler:function(t){return e.polyMouseOut.emit(t)}},{name:"mouseover",handler:function(t){return e.polyMouseOver.emit(t)}},{name:"mouseup",handler:function(t){return e.polyMouseUp.emit(t)}},{name:"rightclick",handler:function(t){return e.polyRightClick.emit(t)}}].forEach((function(t){var n=e._polygonManager.createEventObservable(t.name,e).subscribe(t.handler);e._subscriptions.push(n)})),this._polygonManager.createPathEventObservable(this).then((function(t){var n=t.subscribe((function(t){return e.polyPathsChange.emit(t)}));e._subscriptions.push(n)}))}},{key:"_updatePolygonOptions",value:function(e){return Object.keys(e).filter((function(e){return-1!==Mm._polygonOptionsAttributes.indexOf(e)})).reduce((function(t,n){return t[n]=e[n].currentValue,t}),{})}},{key:"id",value:function(){return this._id}},{key:"ngOnDestroy",value:function(){this._polygonManager.deletePolygon(this),this._subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"getPath",value:function(){return this._polygonManager.getPath(this)}},{key:"getPaths",value:function(){return this._polygonManager.getPaths(this)}}]),e}()).\u0275fac=function(e){return new(e||Tm)(r.Pb(Nm))},Tm.\u0275dir=r.Kb({type:Tm,selectors:[["agm-polygon"]],inputs:{clickable:"clickable",draggable:["polyDraggable","draggable"],editable:"editable",geodesic:"geodesic",paths:"paths",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight",visible:"visible",zIndex:"zIndex"},outputs:{polyClick:"polyClick",polyDblClick:"polyDblClick",polyDrag:"polyDrag",polyDragEnd:"polyDragEnd",polyDragStart:"polyDragStart",polyMouseDown:"polyMouseDown",polyMouseMove:"polyMouseMove",polyMouseOut:"polyMouseOut",polyMouseOver:"polyMouseOver",polyMouseUp:"polyMouseUp",polyRightClick:"polyRightClick",polyPathsChange:"polyPathsChange"},features:[r.zb]}),Tm._polygonOptionsAttributes=["clickable","draggable","editable","fillColor","fillOpacity","geodesic","icon","map","paths","strokeColor","strokeOpacity","strokeWeight","visible","zIndex","draggable","editable","visible"],Tm),Gm=((Vm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){if(null==this.path)throw new Error("Icon Sequence path is required")}}]),e}()).\u0275fac=function(e){return new(e||Vm)},Vm.\u0275dir=r.Kb({type:Vm,selectors:[["agm-icon-sequence"]],inputs:{fixedRotation:"fixedRotation",offset:"offset",repeat:"repeat",anchorX:"anchorX",anchorY:"anchorY",fillColor:"fillColor",fillOpacity:"fillOpacity",path:"path",rotation:"rotation",scale:"scale",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight"}}),Vm),zm=((Um=Em=function(){function e(){_classCallCheck(this,e),this.positionChanged=new r.n}return _createClass(e,[{key:"ngOnChanges",value:function(e){(e.latitude||e.longitude)&&this.positionChanged.emit({lat:e.latitude?e.latitude.currentValue:this.latitude,lng:e.longitude?e.longitude.currentValue:this.longitude})}},{key:"getFitBoundsDetails$",value:function(){return this.positionChanged.pipe(Object(Uf.a)({lat:this.latitude,lng:this.longitude}),Object(Ma.a)((function(e){return{latLng:e}})))}}]),e}()).\u0275fac=function(e){return new(e||Um)},Um.\u0275dir=r.Kb({type:Um,selectors:[["agm-polyline-point"]],inputs:{latitude:"latitude",longitude:"longitude"},outputs:{positionChanged:"positionChanged"},features:[r.Ab([{provide:om,useExisting:Object(r.T)((function(){return Em}))}]),r.zb]}),Um),Jm=0,Km=((Rm=xm=function(){function e(t){_classCallCheck(this,e),this._polylineManager=t,this.clickable=!0,this.draggable=!1,this.editable=!1,this.geodesic=!1,this.visible=!0,this.lineClick=new r.n,this.lineDblClick=new r.n,this.lineDrag=new r.n,this.lineDragEnd=new r.n,this.lineDragStart=new r.n,this.lineMouseDown=new r.n,this.lineMouseMove=new r.n,this.lineMouseOut=new r.n,this.lineMouseOver=new r.n,this.lineMouseUp=new r.n,this.lineRightClick=new r.n,this.polyPathChange=new r.n,this._polylineAddedToManager=!1,this._subscriptions=[],this._id=(Jm++).toString()}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.points.length&&this.points.forEach((function(t){var n=t.positionChanged.subscribe((function(){e._polylineManager.updatePolylinePoints(e)}));e._subscriptions.push(n)})),this._polylineAddedToManager||this._init();var t=this.points.changes.subscribe((function(){return e._polylineManager.updatePolylinePoints(e)}));this._subscriptions.push(t),this._polylineManager.updatePolylinePoints(this);var n=this.iconSequences.changes.subscribe((function(){return e._polylineManager.updateIconSequences(e)}));this._subscriptions.push(n)}},{key:"ngOnChanges",value:function(e){if(this._polylineAddedToManager){var t={};Object.keys(e).filter((function(e){return-1!==xm._polylineOptionsAttributes.indexOf(e)})).forEach((function(n){return t[n]=e[n].currentValue})),this._polylineManager.setPolylineOptions(this,t)}else this._init()}},{key:"getPath",value:function(){return this._polylineManager.getPath(this)}},{key:"_init",value:function(){this._polylineManager.addPolyline(this),this._polylineAddedToManager=!0,this._addEventListeners()}},{key:"_addEventListeners",value:function(){var e=this;[{name:"click",handler:function(t){return e.lineClick.emit(t)}},{name:"dblclick",handler:function(t){return e.lineDblClick.emit(t)}},{name:"drag",handler:function(t){return e.lineDrag.emit(t)}},{name:"dragend",handler:function(t){return e.lineDragEnd.emit(t)}},{name:"dragstart",handler:function(t){return e.lineDragStart.emit(t)}},{name:"mousedown",handler:function(t){return e.lineMouseDown.emit(t)}},{name:"mousemove",handler:function(t){return e.lineMouseMove.emit(t)}},{name:"mouseout",handler:function(t){return e.lineMouseOut.emit(t)}},{name:"mouseover",handler:function(t){return e.lineMouseOver.emit(t)}},{name:"mouseup",handler:function(t){return e.lineMouseUp.emit(t)}},{name:"rightclick",handler:function(t){return e.lineRightClick.emit(t)}}].forEach((function(t){var n=e._polylineManager.createEventObservable(t.name,e).subscribe(t.handler);e._subscriptions.push(n)})),this._polylineManager.createPathEventObservable(this).then((function(t){var n=t.subscribe((function(t){return e.polyPathChange.emit(t)}));e._subscriptions.push(n)}))}},{key:"_getPoints",value:function(){return this.points?this.points.toArray():[]}},{key:"_getIcons",value:function(){return this.iconSequences?this.iconSequences.toArray():[]}},{key:"id",value:function(){return this._id}},{key:"ngOnDestroy",value:function(){this._polylineManager.deletePolyline(this),this._subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||Rm)(r.Pb(jm))},Rm.\u0275dir=r.Kb({type:Rm,selectors:[["agm-polyline"]],contentQueries:function(e,t,n){var i;1&e&&(r.Hb(n,zm,!1),r.Hb(n,Gm,!1)),2&e&&(r.Ec(i=r.ic())&&(t.points=i),r.Ec(i=r.ic())&&(t.iconSequences=i))},inputs:{clickable:"clickable",draggable:["polylineDraggable","draggable"],editable:"editable",geodesic:"geodesic",visible:"visible",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight",zIndex:"zIndex"},outputs:{lineClick:"lineClick",lineDblClick:"lineDblClick",lineDrag:"lineDrag",lineDragEnd:"lineDragEnd",lineDragStart:"lineDragStart",lineMouseDown:"lineMouseDown",lineMouseMove:"lineMouseMove",lineMouseOut:"lineMouseOut",lineMouseOver:"lineMouseOver",lineMouseUp:"lineMouseUp",lineRightClick:"lineRightClick",polyPathChange:"polyPathChange"},features:[r.zb]}),Rm._polylineOptionsAttributes=["draggable","editable","visible","geodesic","strokeColor","strokeOpacity","strokeWeight","zIndex"],Rm),Ym=((Sm=Dm=function(){function e(t){_classCallCheck(this,e),this._manager=t,this.clickable=!0,this.draggable=!1,this.editable=!1,this.strokePosition="CENTER",this.strokeWeight=0,this.visible=!0,this.boundsChange=new r.n,this.rectangleClick=new r.n,this.rectangleDblClick=new r.n,this.drag=new r.n,this.dragEnd=new r.n,this.dragStart=new r.n,this.mouseDown=new r.n,this.mouseMove=new r.n,this.mouseOut=new r.n,this.mouseOver=new r.n,this.mouseUp=new r.n,this.rightClick=new r.n,this._rectangleAddedToManager=!1,this._eventSubscriptions=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this._manager.addRectangle(this),this._rectangleAddedToManager=!0,this._registerEventListeners()}},{key:"ngOnChanges",value:function(e){this._rectangleAddedToManager&&((e.north||e.east||e.south||e.west)&&this._manager.setBounds(this),e.editable&&this._manager.setEditable(this),e.draggable&&this._manager.setDraggable(this),e.visible&&this._manager.setVisible(this),this._updateRectangleOptionsChanges(e))}},{key:"_updateRectangleOptionsChanges",value:function(e){var t={},n=Object.keys(e).filter((function(e){return-1!==Dm._mapOptions.indexOf(e)}));n.forEach((function(n){t[n]=e[n].currentValue})),n.length>0&&this._manager.setOptions(this,t)}},{key:"_registerEventListeners",value:function(){var e=this,t=new Map;t.set("bounds_changed",this.boundsChange),t.set("click",this.rectangleClick),t.set("dblclick",this.rectangleDblClick),t.set("drag",this.drag),t.set("dragend",this.dragEnd),t.set("dragStart",this.dragStart),t.set("mousedown",this.mouseDown),t.set("mousemove",this.mouseMove),t.set("mouseout",this.mouseOut),t.set("mouseover",this.mouseOver),t.set("mouseup",this.mouseUp),t.set("rightclick",this.rightClick),t.forEach((function(t,n){e._eventSubscriptions.push(e._manager.createEventObservable(n,e).subscribe((function(i){switch(n){case"bounds_changed":e._manager.getBounds(e).then((function(e){return t.emit({north:e.getNorthEast().lat(),east:e.getNorthEast().lng(),south:e.getSouthWest().lat(),west:e.getSouthWest().lng()})}));break;default:t.emit({coords:{lat:i.latLng.lat(),lng:i.latLng.lng()}})}})))}))}},{key:"ngOnDestroy",value:function(){this._eventSubscriptions.forEach((function(e){e.unsubscribe()})),this._eventSubscriptions=null,this._manager.removeRectangle(this)}},{key:"getBounds",value:function(){return this._manager.getBounds(this)}}]),e}()).\u0275fac=function(e){return new(e||Sm)(r.Pb(Wm))},Sm.\u0275dir=r.Kb({type:Sm,selectors:[["agm-rectangle"]],inputs:{clickable:"clickable",draggable:["rectangleDraggable","draggable"],editable:"editable",strokePosition:"strokePosition",strokeWeight:"strokeWeight",visible:"visible",north:"north",east:"east",south:"south",west:"west",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",zIndex:"zIndex"},outputs:{boundsChange:"boundsChange",rectangleClick:"rectangleClick",rectangleDblClick:"rectangleDblClick",drag:"drag",dragEnd:"dragEnd",dragStart:"dragStart",mouseDown:"mouseDown",mouseMove:"mouseMove",mouseOut:"mouseOut",mouseOver:"mouseOver",mouseUp:"mouseUp",rightClick:"rightClick"},features:[r.zb]}),Sm._mapOptions=["fillColor","fillOpacity","strokeColor","strokeOpacity","strokePosition","strokeWeight","visible","zIndex","clickable"],Sm),Xm=0,Zm=((Bm=function(){function e(t){_classCallCheck(this,e),this._manager=t,this._addedToManager=!1,this._id=(Xm++).toString(),this.visible=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this._addedToManager||(this._manager.addTransitLayer(this,{visible:this.visible}),this._addedToManager=!0)}},{key:"ngOnChanges",value:function(e){this._addedToManager&&null!=e.visible&&this._manager.toggleLayerVisibility(this,{visible:e.visible.currentValue})}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmTransitLayer-".concat(this._id.toString())}},{key:"ngOnDestroy",value:function(){this._manager.deleteLayer(this)}}]),e}()).\u0275fac=function(e){return new(e||Bm)(r.Pb(Yf))},Bm.\u0275dir=r.Kb({type:Bm,selectors:[["agm-transit-layer"]],inputs:{visible:"visible"},features:[r.zb]}),Bm),eg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getNativeWindow",value:function(){return window}}]),e}(),tg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getNativeDocument",value:function(){return document}}]),e}(),ng=[eg,tg],ig=function(e){return e[e.HTTP=1]="HTTP",e[e.HTTPS=2]="HTTPS",e[e.AUTO=3]="AUTO",e}({}),rg=new r.q("angular-google-maps LAZY_MAPS_API_CONFIG"),og=((_m=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,n),(e=t.call(this)).localeId=c,e._SCRIPT_ID="agmGoogleMapsApiScript",e.callbackName="agmLazyMapsAPILoader",e._config=i||{},e._windowRef=r,e._documentRef=o,e}return _createClass(n,[{key:"load",value:function(){var e=this._windowRef.getNativeWindow();if(e.google&&e.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var t=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(t)return this._assignScriptLoadingPromise(t),this._scriptLoadingPromise;var n=this._documentRef.getNativeDocument().createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.id=this._SCRIPT_ID,n.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(n),this._documentRef.getNativeDocument().body.appendChild(n),this._scriptLoadingPromise}},{key:"_assignScriptLoadingPromise",value:function(e){var t=this;this._scriptLoadingPromise=new Promise((function(n,i){t._windowRef.getNativeWindow()[t.callbackName]=function(){n()},e.onerror=function(e){i(e)}}))}},{key:"_getScriptSrc",value:function(e){var t;switch(this._config&&this._config.protocol||ig.HTTPS){case ig.AUTO:t="";break;case ig.HTTP:t="http:";break;case ig.HTTPS:t="https:"}var n={v:this._config.apiVersion||"quarterly",callback:e,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language||"en-US"!==this.localeId?this.localeId:null};return"".concat(t,"//").concat(this._config.hostAndPath||"maps.googleapis.com/maps/api/js","?").concat(Object.keys(n).filter((function(e){return null!=n[e]})).filter((function(e){return!Array.isArray(n[e])||Array.isArray(n[e])&&n[e].length>0})).map((function(e){var t=n[e];return Array.isArray(t)?{key:e,value:t.join(",")}:{key:e,value:n[e]}})).map((function(e){return"".concat(e.key,"=").concat(e.value)})).join("&"))}}]),n}(Jf)).\u0275fac=function(e){return new(e||_m)(r.dc(rg,8),r.dc(eg),r.dc(tg),r.dc(r.u))},_m.\u0275prov=r.Lb({token:_m,factory:_m.\u0275fac}),_m),cg=((Lm=Om=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(e){return{ngModule:Om,providers:[].concat(ng,[{provide:Jf,useClass:og},{provide:rg,useValue:e}])}}}]),e}()).\u0275mod=r.Nb({type:Lm}),Lm.\u0275inj=r.Mb({factory:function(e){return new(e||Lm)}}),Lm),ag=n("NNvV"),lg=((Am=function(){function e(){_classCallCheck(this,e),this._fitBoundsDetails$=new U.a}return _createClass(e,[{key:"getFitBoundsDetails$",value:function(){return this._fitBoundsDetails$}},{key:"geoJson",set:function(e){var t=this;this._geoJson=e;try{var n;if(!(n="max"===this.type?{lat:Object(ag.yMax)(e),lng:Object(ag.xMax)(e)}:{lat:Object(ag.yMin)(e),lng:Object(ag.xMin)(e)}).lat||!n.lng||Math.abs(n.lat)===1/0||Math.abs(n.lng)===1/0)return;setTimeout((function(){t._fitBoundsDetails$.next({latLng:n})}))}catch(i){}},get:function(){return this._geoJson}}]),e}()).\u0275fac=function(e){return new(e||Am)},Am.\u0275cmp=r.Jb({type:Am,selectors:[["t-map-bounds-fitter"]],inputs:{type:"type",geoJson:"geoJson"},features:[r.Ab([{provide:om,useExisting:Object(r.T)((function(){return Am}))}])],decls:0,vars:0,template:function(e,t){},encapsulation:2}),Am),sg=((Fm=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.workspace=t,this.translate=n,this._markForCheck=!0,this._subscriptions=new O.a,this._subscriptions.add(this.translate.onLangChange.subscribe((function(){i.markForCheck()}))),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:function(){i._wsCalendar&&i._wsCalendar!==i.workspace.calendar&&i.markForCheck(),i._wsDateFormat&&i._wsDateFormat!==i.workspace.dateFormat&&i.markForCheck()}}))}return _createClass(e,[{key:"markForCheck",value:function(){this._markForCheck=!0}},{key:"ngOnDestroy",value:function(){this._subscriptions&&this._subscriptions.unsubscribe()}},{key:"transform",value:function(e,t,n){return(this._markForCheck||this._isoDate!==e||this._calendar!==t||this._granularity!==n)&&(this._markForCheck=!1,this._isoDate=e,this._calendar=t,this._granularity=n,this._wsCalendar=this.workspace.calendar,this._wsDateFormat=this.workspace.dateFormat,this._formattedValue=Object(Me.a)(e,this.workspace,this.translate,t,n)),this._formattedValue}}]),e}()).\u0275fac=function(e){return new(e||Fm)(r.Pb(S.m),r.Pb(G.e))},Fm.\u0275pipe=r.Ob({name:"dateFormat",type:Fm,pure:!1}),Fm),ug=n("Uqe3"),dg=((Pm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){return Object(W.n)(e)?Object(ug.a)(e,t):null}}]),e}()).\u0275fac=function(e){return new(e||Pm)},Pm.\u0275pipe=r.Ob({name:"accounting",type:Pm,pure:!0}),Pm),bg=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},fg=function(e,t,n){return{template:e,action:t,showAction:n}},mg=function(e,t,n){return[e,t,n]};function gg(e,t){if(1&e&&r.Qb(0,"t-details",7),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(6),c=r.Fc(8),a=r.Fc(10),l=r.Fc(12);r.sc("definitionId",n.definitionId)("createFunc",n.create)("cloneFunc",n.clone)("expand",n.expand)("mode",n.mode)("additionalSelect",n.additionalSelect)("idString",n.idString)("masterCrumb",n.masterCrumb)("detailsCrumb",i)("documentTemplate",o)("actions",r.yc(27,mg,r.Ac(11,bg,c,n.onActivate,n.showActivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.Ac(17,bg,a,n.onDeactivate,n.showDeactivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.yc(23,fg,l,n.onEditDefinition,n.showEditDefinition)))}}function pg(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",8),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function hg(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function vg(e,t){if(1&e&&(r.Vb(0,"h2",20),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var yg=function(){return{updateOn:"blur"}};function Ig(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,yg))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function Cg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,yg))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function wg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,yg))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function kg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-image",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Image=e})),r.Ub()}if(2&e){var i=r.lc(2),o=i.model,c=i.isEdit,a=r.lc();r.sc("src",o.Id?"relations/"+a.definitionId+"/"+o.Id+"/image":null)("imageId",null==o?null:o.ImageId)("ngModel",o.Image)("isEdit",c)}}function Mg(e,t){if(1&e&&(r.Vb(0,"div",23),r.Vb(1,"t-restricted",24),r.Vb(2,"div",25),r.Rc(3,kg,1,4,"t-image",26),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ImageId),r.Bb(2),r.sc("ngIf",!!n)}}function Vg(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function Tg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",29),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,yg))}}function Eg(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Vg,2,1,"div",16),r.Rc(3,Tg,1,3,"t-text-editor",28),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Ug(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function xg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,yg))}}function Rg(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Ug,2,1,"div",16),r.Rc(3,xg,1,3,"t-text-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Dg(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function Bg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,yg))}}function Sg(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Dg,2,1,"div",16),r.Rc(3,Bg,1,3,"t-text-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function _g(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function Og(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,yg))}}function Lg(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",33),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Users),r.Bb(1),r.sc("itemId",i.getUserId(n)),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("User",i.getUserId(n),"Name")," ")}}function Fg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-users-picker",34),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).model;return r.lc().setUserId(t,e)})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",o.getUserId(i))}}function Ag(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Lg,3,3,"t-restricted",31),r.Rc(3,Fg,1,1,"t-users-picker",32),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Relation_User"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Users),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Pg(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",36),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Currency),r.Bb(1),r.sc("itemId",null==n?null:n.CurrencyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Currency",n.CurrencyId,"Name")," ")}}function Ng(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",37),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CurrencyId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CurrencyId)("required",o.Currency_isRequired)}}function jg(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Pg,3,3,"t-restricted",31),r.Rc(2,Ng,1,2,"t-currencies-picker",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Currency_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CurrencyId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Wg(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",38),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Center),r.Bb(1),r.sc("itemId",null==n?null:n.CenterId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Center",n.CenterId,"Name")," ")}}function qg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",37),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CenterId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CenterId)("required",o.Center_isRequired)}}function Qg(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Wg,3,3,"t-restricted",31),r.Rc(2,qg,1,2,"t-centers-picker",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Center_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CenterId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Hg(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.DateOfBirth),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.DateOfBirth))}}function $g(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.DateOfBirth=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.DateOfBirth)("ngModelOptions",r.vc(3,yg))("required",o.DateOfBirth_isRequired)}}function Gg(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Hg,4,4,"t-restricted",31),r.Rc(3,$g,1,4,"t-date-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Relation_DateOfBirth"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.DateOfBirth),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function zg(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ContactEmail),r.Bb(2),r.Uc(null==n?null:n.ContactEmail)}}function Jg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ContactEmail=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ContactEmail)("ngModelOptions",r.vc(3,yg))("required",o.ContactEmail_isRequired)}}function Kg(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,zg,3,2,"t-restricted",31),r.Rc(3,Jg,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Entity_ContactEmail"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ContactEmail),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Yg(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ContactMobile),r.Bb(2),r.Uc(null==n?null:n.ContactMobile)}}function Xg(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ContactMobile=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ContactMobile)("ngModelOptions",r.vc(3,yg))("required",o.ContactMobile_isRequired)}}function Zg(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Yg,3,2,"t-restricted",31),r.Rc(3,Xg,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Entity_ContactMobile"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ContactMobile),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ep(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ContactAddress),r.Bb(2),r.Uc(null==n?null:n.ContactAddress)}}function tp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ContactAddress=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ContactAddress)("ngModelOptions",r.vc(3,yg))("required",o.ContactAddress_isRequired)}}function np(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,ep,3,2,"t-restricted",31),r.Rc(3,tp,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Entity_ContactAddress"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ContactAddress),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ip(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup1Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup1),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup1Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup1Id,"Name")," ")}}function rp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup1Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup1Id)("definitionId",o.Lookup1_DefinitionId)("required",o.Lookup1_isRequired)}}function op(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,ip,3,4,"t-restricted",31),r.Rc(2,rp,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup1Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function cp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup2Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup2),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup2Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup2Id,"Name")," ")}}function ap(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup2Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup2Id)("definitionId",o.Lookup2_DefinitionId)("required",o.Lookup2_isRequired)}}function lp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,cp,3,4,"t-restricted",31),r.Rc(2,ap,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup2Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function sp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup3Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup3),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup3Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup3Id,"Name")," ")}}function up(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup3Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup3Id)("definitionId",o.Lookup3_DefinitionId)("required",o.Lookup3_isRequired)}}function dp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,sp,3,4,"t-restricted",31),r.Rc(2,up,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup3_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup3Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function bp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup4Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup4),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup4Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup4Id,"Name")," ")}}function fp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup4Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup4Id)("definitionId",o.Lookup4_DefinitionId)("required",o.Lookup4_isRequired)}}function mp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,bp,3,4,"t-restricted",31),r.Rc(2,fp,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup4_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup4Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function gp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup5Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup5),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup5Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup5Id,"Name")," ")}}function pp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup5Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup5Id)("definitionId",o.Lookup5_DefinitionId)("required",o.Lookup5_isRequired)}}function hp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,gp,3,4,"t-restricted",31),r.Rc(2,pp,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup5_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup5Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function vp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup6Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup6),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup6Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup6Id,"Name")," ")}}function yp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup6Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup6Id)("definitionId",o.Lookup6_DefinitionId)("required",o.Lookup6_isRequired)}}function Ip(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,vp,3,4,"t-restricted",31),r.Rc(2,yp,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup6_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup6Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Cp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup7Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup7),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup7Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup7Id,"Name")," ")}}function wp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup7Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup7Id)("definitionId",o.Lookup7_DefinitionId)("required",o.Lookup7_isRequired)}}function kp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Cp,3,4,"t-restricted",31),r.Rc(2,wp,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup7_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup7Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Mp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup8Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup8),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup8Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup8Id,"Name")," ")}}function Vp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup8Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup8Id)("definitionId",o.Lookup8_DefinitionId)("required",o.Lookup8_isRequired)}}function Tp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Mp,3,4,"t-restricted",31),r.Rc(2,Vp,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup8_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup8Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Ep(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Date1),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.Date1))}}function Up(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Date1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Date1)("ngModelOptions",r.vc(3,yg))("required",o.Date1_isRequired)}}function xp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Ep,4,4,"t-restricted",31),r.Rc(2,Up,1,4,"t-date-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Date1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Date1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Rp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Date2),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.Date2))}}function Dp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Date2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Date2)("ngModelOptions",r.vc(3,yg))("required",o.Date2_isRequired)}}function Bp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Rp,4,4,"t-restricted",31),r.Rc(2,Dp,1,4,"t-date-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Date2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Date2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Sp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Date3),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.Date3))}}function _p(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Date3=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Date3)("ngModelOptions",r.vc(3,yg))("required",o.Date3_isRequired)}}function Op(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Sp,4,4,"t-restricted",31),r.Rc(2,_p,1,4,"t-date-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Date3_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Date3),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Lp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Date4),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.Date4))}}function Fp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Date4=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Date4)("ngModelOptions",r.vc(3,yg))("required",o.Date4_isRequired)}}function Ap(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Lp,4,4,"t-restricted",31),r.Rc(2,Fp,1,4,"t-date-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Date4_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Date4),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Pp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Decimal1),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Decimal1,"1.0-4"))}}function Np(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Decimal1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Decimal1)("ngModelOptions",r.vc(5,yg))("required",o.Decimal1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function jp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Pp,4,5,"t-restricted",31),r.Rc(2,Np,1,6,"t-decimal-editor",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Decimal1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Decimal1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Wp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Decimal2),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Decimal2,"1.0-4"))}}function qp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Decimal2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Decimal2)("ngModelOptions",r.vc(5,yg))("required",o.Decimal2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Qp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Wp,4,5,"t-restricted",31),r.Rc(2,qp,1,6,"t-decimal-editor",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Decimal2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Decimal2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Hp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Int1),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Int1,"1.0-0"))}}function $p(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Int1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Int1)("ngModelOptions",r.vc(5,yg))("required",o.Int1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function Gp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Hp,4,5,"t-restricted",31),r.Rc(2,$p,1,6,"t-decimal-editor",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Int1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Int1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function zp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Int2),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Int2,"1.0-0"))}}function Jp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Int2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Int2)("ngModelOptions",r.vc(5,yg))("required",o.Int2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function Kp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,zp,4,5,"t-restricted",31),r.Rc(2,Jp,1,6,"t-decimal-editor",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Int2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Int2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Yp(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Text1),r.Bb(2),r.Uc(null==n?null:n.Text1)}}function Xp(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Text1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Text1)("ngModelOptions",r.vc(3,yg))("required",o.Text1_isRequired)}}function Zp(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Yp,3,2,"t-restricted",31),r.Rc(2,Xp,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Text1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Text1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function eh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Text2),r.Bb(2),r.Uc(null==n?null:n.Text2)}}function th(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Text2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Text2)("ngModelOptions",r.vc(3,yg))("required",o.Text2_isRequired)}}function nh(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,eh,3,2,"t-restricted",31),r.Rc(2,th,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Text2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Text2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ih(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Text3),r.Bb(2),r.Uc(null==n?null:n.Text3)}}function rh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Text3=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Text3)("ngModelOptions",r.vc(3,yg))("required",o.Text3_isRequired)}}function oh(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,ih,3,2,"t-restricted",31),r.Rc(2,rh,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Text3_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Text3),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ch(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Text4),r.Bb(2),r.Uc(null==n?null:n.Text4)}}function ah(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Text4=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Text4)("ngModelOptions",r.vc(3,yg))("required",o.Text4_isRequired)}}function lh(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,ch,3,2,"t-restricted",31),r.Rc(2,ah,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Text4_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Text4),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function sh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.FromDate),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.FromDate))}}function uh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.FromDate=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.FromDate)("ngModelOptions",r.vc(3,yg))("required",o.FromDate_isRequired)}}function dh(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,sh,4,4,"t-restricted",31),r.Rc(2,uh,1,4,"t-date-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.FromDate_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.FromDate),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function bh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ToDate),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.ToDate))}}function fh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ToDate=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ToDate)("ngModelOptions",r.vc(3,yg))("required",o.ToDate_isRequired)}}function mh(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,bh,4,4,"t-restricted",31),r.Rc(2,fh,1,4,"t-date-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.ToDate_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ToDate),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function gh(e,t){if(1&e&&(r.Vb(0,"t-view-link",47),r.Qb(1,"t-auto-cell",48),r.Ub()),2&e){var n=r.lc(2).model;r.sc("itemId",null==n?null:n.AgentId),r.Bb(1),r.sc("entity",n)}}function ph(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-agents-picker",37),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.AgentId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.AgentId)("required",o.Agent_isRequired)}}function hh(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,gh,2,2,"t-view-link",46),r.Rc(3,ph,1,2,"t-agents-picker",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Relation_Agent"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.AgentId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function vh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.TaxIdentificationNumber),r.Bb(2),r.Uc(null==n?null:n.TaxIdentificationNumber)}}function yh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TaxIdentificationNumber=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.TaxIdentificationNumber)("ngModelOptions",r.vc(3,yg))("required",o.TaxIdentificationNumber_isRequired)}}function Ih(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,vh,3,2,"t-restricted",31),r.Rc(3,yh,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Relation_TaxIdentificationNumber"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.TaxIdentificationNumber),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Ch(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.BankAccountNumber),r.Bb(2),r.Uc(null==n?null:n.BankAccountNumber)}}function wh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.BankAccountNumber=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.BankAccountNumber)("ngModelOptions",r.vc(3,yg))("required",o.BankAccountNumber_isRequired)}}function kh(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Ch,3,2,"t-restricted",31),r.Rc(3,wh,1,4,"t-text-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Relation_BankAccountNumber"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.BankAccountNumber),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Mh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../relations/"+(null==(n=o.ws.get("Relation",i.Relation1Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Relation1),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Relation1Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Relation",i.Relation1Id,"Name")," ")}}function Vh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",50),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Relation1Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Relation1Id)("definitionIds",o.Relation1_DefinitionIds)("required",o.Relation1_isRequired)}}function Th(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Mh,3,4,"t-restricted",31),r.Rc(2,Vh,1,3,"t-relations-picker",49),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Relation1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Relation1Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Eh(e,t){if(1&e&&(r.Vb(0,"div",52),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description)}}function Uh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,Eh,2,1,"div",51),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description),r.Bb(1),r.sc("ngIf",!o)}}function xh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Description)("ngModelOptions",r.vc(3,yg))("required",o.Description_isRequired)}}function Rh(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Uh,2,2,"t-restricted",31),r.Rc(3,xh,1,4,"t-multiline-editor",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Dh(e,t){if(1&e&&(r.Vb(0,"div",52),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description2)}}function Bh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,Dh,2,1,"div",51),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description2),r.Bb(1),r.sc("ngIf",!o)}}function Sh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description2)("ngModelOptions",r.vc(2,yg))}}function _h(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Bh,2,2,"t-restricted",31),r.Rc(3,Sh,1,3,"t-multiline-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Oh(e,t){if(1&e&&(r.Vb(0,"div",52),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description3)}}function Lh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,Oh,2,1,"div",51),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description3),r.Bb(1),r.sc("ngIf",!o)}}function Fh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description3)("ngModelOptions",r.vc(2,yg))}}function Ah(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Lh,2,2,"t-restricted",31),r.Rc(3,Fh,1,3,"t-multiline-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Ph(e,t){if(1&e&&(r.Vb(0,"t-form-group",53),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(3),r.Uc(r.nc(4,4,n?n.IsActive?"Active":"Inactive":""))}}function Nh(e,t){1&e&&(r.Vb(0,"span",65),r.Qb(1,"fa-icon",66),r.Tc(2,"\xa0 "),r.Ub())}function jh(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"RelationUser_User"))}function Wh(e,t){if(1&e&&(r.Vb(0,"t-view-link",33),r.Tc(1),r.Ub()),2&e){var n=r.lc().item,i=r.lc(5);r.sc("itemId",n.UserId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("User",n.UserId,"Name")," ")}}function qh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-users-picker",37),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.UserId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item;r.sc("ngModel",i.UserId)("required",!i.PH)}}function Qh(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",70),r.Rc(1,Wh,2,2,"t-view-link",71),r.Rc(2,qh,1,2,"t-users-picker",35),r.Ub()),2&e){var n=t.item,i=r.lc(4).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.UserId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var Hh=function(){return["User"]},$h=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Gh=function(e){return{User:e}};function zh(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Qb(1,"t-table",67),r.Ub(),r.Rc(2,jh,2,3,"ng-template",null,68,r.Sc),r.Rc(4,Qh,3,3,"ng-template",null,69,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.lc(3),c=o.model,a=o.isEdit;r.Gb("p-4",1===(null==c||null==c.EntityMetadata?null:c.EntityMetadata.Users)),r.sc("metadata",null==c||null==c.EntityMetadata?null:c.EntityMetadata.Users),r.Bb(1),r.sc("dataSource",null==c?null:c.Users)("isEdit",a)("columnPaths",r.vc(7,Hh))("columnTemplates",r.wc(11,Gh,r.xc(8,$h,n,i)))}}function Jh(e,t){if(1&e&&(r.Vb(0,"li",64),r.Vb(1,"a",59),r.Rc(2,Nh,3,0,"span",60),r.Vb(3,"span",61),r.Tc(4),r.mc(5,"translate"),r.mc(6,"number"),r.Ub(),r.Ub(),r.Rc(7,zh,6,13,"ng-template",62),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(2),r.sc("ngIf",i.Users_showError(n)),r.Bb(2),r.Uc(r.nc(5,2,"Relation_Users")+(n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Users)?"":" ("+r.nc(6,4,i.Users_count(n))+")"))}}function Kh(e,t){1&e&&(r.Vb(0,"span",65),r.Qb(1,"fa-icon",66),r.Tc(2,"\xa0 "),r.Ub())}function Yh(e,t){if(1&e&&r.Qb(0,"agm-data-layer",87),2&e){var n=r.lc(4).model,i=r.lc();r.Pc(i.styleFunc),r.sc("geoJson",i.parseJson(null==n?null:n.LocationJson))}}function Xh(e,t){if(1&e&&(r.Vb(0,"t-error-message",88),r.Tc(1),r.Ub()),2&e){var n=r.lc(5);r.Bb(1),r.Vc(" ",n.parseJsonError," ")}}function Zh(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-restricted",24),r.Vb(1,"div",73),r.Vb(2,"div",74),r.Vb(3,"textarea",75),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.LocationJson=e})),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"agm-map",76),r.hc("centerChange",(function(e){return r.Ic(n),r.lc(4).onCenterChange(e)})),r.Qb(6,"t-map-bounds-fitter",77),r.Qb(7,"t-map-bounds-fitter",78),r.Rc(8,Yh,1,3,"agm-data-layer",79),r.Ub(),r.Ub(),r.Vb(9,"div",80),r.Vb(10,"label",81),r.hc("click",(function(){return r.Ic(n),r.lc(4).onView("map")})),r.mc(11,"translate"),r.Qb(12,"input",82),r.Qb(13,"fa-icon",83),r.Vb(14,"span",84),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Ub(),r.Vb(17,"label",81),r.hc("click",(function(){return r.Ic(n),r.lc(4).onView("json")})),r.mc(18,"translate"),r.Qb(19,"input",82),r.Qb(20,"fa-icon",85),r.Vb(21,"span",84),r.Tc(22),r.mc(23,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Rc(24,Xh,2,1,"t-error-message",86),r.Ub()}if(2&e){var i=r.lc(3),o=i.model,c=i.isEdit,a=r.lc();r.Gb("p-4",1===(null==o||null==o.EntityMetadata?null:o.EntityMetadata.LocationJson)),r.sc("metadata",null==o||null==o.EntityMetadata?null:o.EntityMetadata.LocationJson),r.Bb(2),r.Gb("d-none",!a.isView("json"))("t-hidden-cursor",!c),r.Bb(1),r.sc("readonly",!c)("placeholder",r.nc(4,34,"GeoJSON")+"...")("ngModel",o.LocationJson),r.Bb(2),r.Gb("d-none",!a.isView("map")),r.sc("latitude",a.latitude)("longitude",a.longitude)("zoom",6)("mapTypeControl",!0)("panControl",!0)("streetViewControl",!1)("fitBounds",!(null==o||!o.Id))("fitBoundsPadding",100),r.Bb(1),r.sc("agmFitBounds",!0)("geoJson",a.parseJson(null==o?null:o.LocationJson)),r.Bb(1),r.sc("agmFitBounds",!0)("geoJson",a.parseJson(null==o?null:o.LocationJson)),r.Bb(1),r.sc("ngIf",!!a.parseJson(null==o?null:o.LocationJson)),r.Bb(2),r.Gb("active",a.isView("map")),r.tc("title",r.nc(11,36,"Map")),r.Bb(5),r.Vc("\xa0\xa0",r.nc(16,38,"Map"),""),r.Bb(2),r.Gb("active",a.isView("json")),r.tc("title",r.nc(18,40,"GeoJSON")),r.Bb(5),r.Vc("\xa0\xa0",r.nc(23,42,"GeoJSON"),""),r.Bb(2),r.sc("ngIf",!!a.parseJsonError)}}function ev(e,t){if(1&e&&(r.Vb(0,"li",72),r.Vb(1,"a",59),r.Rc(2,Kh,3,0,"span",60),r.Vb(3,"span",61),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Rc(6,Zh,25,44,"ng-template",62),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(2),r.sc("ngIf",i.Map_showError(n)),r.Bb(2),r.Uc(r.nc(5,2,"Entity_Location"))}}var tv=function(e,t){return{id:e,cache_buster:t}};function nv(e,t){if(1&e&&(r.Vb(0,"div",93),r.Qb(1,"t-report-results",94),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3).model,o=r.lc();r.Bb(1),r.sc("definition",o.reportDefinition(n))("arguments",r.xc(4,tv,null==i?null:i.Id,null==i||null==i.EntityMetadata?null:i.EntityMetadata.$refresh))("view",o.reportView(n))("state",o.state(n))}}function iv(e,t){if(1&e&&(r.Vb(0,"li",91),r.Vb(1,"a",92),r.Vb(2,"span",61),r.Tc(3),r.Ub(),r.Ub(),r.Rc(4,nv,2,7,"ng-template",62),r.Ub()),2&e){var n=t.$implicit;r.lc();var i=r.Fc(3),o=r.lc(3);r.sc("ngbNavItem",n.ReportDefinitionId),r.Bb(1),r.sc("tContextMenu",i)("tContext",n.ReportDefinitionId),r.Bb(2),r.Uc(o.reportTitle(n))}}function rv(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",95),r.Vb(1,"ul",96),r.Vb(2,"li",97),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.close,o=r.lc(3).model;return r.lc().onExpandReport(e,o),i()})),r.Vb(3,"div",98),r.Qb(4,"fa-icon",99),r.Ub(),r.Vb(5,"div",100),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Bb(6),r.Vc(" ",r.nc(7,1,"Expand")," "))}function ov(e,t){if(1&e&&(r.Tb(0),r.Rc(1,iv,5,4,"li",89),r.Rc(2,rv,8,3,"ng-template",null,90,r.Sc),r.Sb()),2&e){var n=r.lc(3);r.Bb(1),r.sc("ngForOf",n.reports)}}function cv(e,t){1&e&&(r.Vb(0,"span",65),r.Qb(1,"fa-icon",66),r.Tc(2,"\xa0 "),r.Ub())}function av(e,t){1&e&&(r.Vb(0,"div",106),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"NoItemsFound")))}function lv(e,t){1&e&&(r.Vb(0,"div",122),r.Qb(1,"t-spinner",123),r.Ub())}function sv(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",119),r.Vb(1,"button",120),r.hc("click",(function(){r.Ic(n);var e=r.lc().index,t=r.lc(4).model;return r.lc().onDownloadAttachment(t,e)})),r.Tc(2),r.Ub(),r.Rc(3,lv,2,0,"div",121),r.Ub()}if(2&e){var i=r.lc().$implicit,o=r.lc(5);r.Bb(2),r.Uc(o.fileName(i)),r.Bb(1),r.sc("ngIf",i.downloading)}}function uv(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",124),r.Vb(1,"t-form-group",125),r.Vb(2,"t-text-editor",29),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.attachment.FileName=e})),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc().$implicit;r.Bb(1),r.sc("serverErrors",null==i.attachment||null==i.attachment.serverErrors?null:i.attachment.serverErrors.FileName),r.Bb(1),r.sc("ngModel",i.attachment.FileName)("ngModelOptions",r.vc(3,yg))}}var dv=function(e,t){return{0:e,1:t}};function bv(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.mc(3,"datetimeFormat"),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(5);r.Bb(1),r.Vc("",r.oc(2,1,"AttachmentAudit",r.xc(6,dv,r.nc(3,4,n.attachment.CreatedAt),i.ws.getMultilingualValue("User",n.attachment.CreatedById,"Name"))),"\xa0")}}function fv(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",129),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).index,t=r.lc(4).model;return r.lc().onDownloadAttachment(t,e)})),r.mc(1,"translate"),r.Qb(2,"fa-icon",131),r.Ub()}2&e&&r.sc("title",r.nc(1,1,"Download"))}function mv(e,t){1&e&&(r.Vb(0,"div",132),r.Qb(1,"t-spinner",123),r.Ub())}function gv(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",126),r.Rc(1,fv,3,3,"button",127),r.Rc(2,mv,2,0,"ng-template",null,128,r.Sc),r.Vb(4,"button",129),r.hc("click",(function(){r.Ic(n);var e=r.lc().index,t=r.lc(4).model;return r.lc().onDeleteAttachment(t,e)})),r.mc(5,"translate"),r.Qb(6,"fa-icon",130),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(3),o=r.lc().$implicit;r.Bb(1),r.sc("ngIf",!o.downloading)("ngIfElse",i),r.Bb(3),r.sc("title",r.nc(5,3,"Delete"))}}function pv(e,t){if(1&e&&(r.Vb(0,"div",109),r.Vb(1,"div",110),r.Vb(2,"div",111),r.Qb(3,"fa-icon",112),r.Ub(),r.Vb(4,"div",113),r.Rc(5,sv,4,2,"div",114),r.Rc(6,uv,3,4,"ng-template",null,115,r.Sc),r.Vb(8,"div",116),r.Vb(9,"div",117),r.Rc(10,bv,4,9,"span",16),r.Vb(11,"span"),r.Tc(12),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Rc(13,gv,7,5,"div",118),r.Ub(),r.Ub()),2&e){var n=t.$implicit,i=t.index,o=r.Fc(7),c=r.lc(4).isEdit,a=r.lc();r.Gb("bg-light",i%2==1e3),r.Bb(3),r.Qc("color",a.colorFromExtension(n.attachment.FileExtension)),r.sc("icon",a.iconFromExtension(n.attachment.FileExtension)),r.Bb(2),r.sc("ngIf",!c)("ngIfElse",o),r.Bb(5),r.sc("ngIf",n.attachment.CreatedById),r.Bb(2),r.Vc("(",a.size(n),")"),r.Bb(1),r.sc("ngIf",c)}}function hv(e,t){if(1&e&&(r.Vb(0,"div",107),r.Rc(1,pv,14,10,"div",108),r.Ub()),2&e){var n=r.lc(3).model,i=r.lc();r.Bb(1),r.sc("ngForOf",i.attachmentWrappers(n))}}function vv(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",133),r.Vb(1,"button",134),r.hc("click",(function(){return r.Ic(n),r.lc(),r.Fc(4).click()})),r.Qb(2,"fa-icon",135),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3).model;r.Bb(3),r.Vc(" \xa0\xa0",r.nc(4,1,(null==i||null==i.Attachments?null:i.Attachments.length)>0?"UploadMore":"Upload")," ")}}function yv(e,t){if(1&e){var n=r.Wb();r.Rc(0,av,4,3,"div",101),r.Rc(1,hv,2,1,"div",102),r.Rc(2,vv,5,3,"div",103),r.Vb(3,"input",104,105),r.hc("change",(function(){r.Ic(n);var e=r.Fc(4),t=r.lc(2).model;return r.lc().onFileSelected(e,t)})),r.Ub()}if(2&e){var i=r.lc(2),o=i.model,c=i.isEdit;r.sc("ngIf",!(null!=o&&null!=o.Attachments&&o.Attachments.length||c)),r.Bb(1),r.sc("ngIf",!(null==o||null==o.Attachments||!o.Attachments.length)),r.Bb(1),r.sc("ngIf",c)}}function Iv(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"ul",54,55),r.hc("activeIdChange",(function(e){return r.Ic(n),r.lc(2).activeTab=e})),r.Rc(3,Jh,8,6,"li",56),r.Rc(4,ev,7,4,"li",57),r.Rc(5,ov,4,1,"ng-container",16),r.Vb(6,"li",58),r.Vb(7,"a",59),r.Rc(8,cv,3,0,"span",60),r.Vb(9,"span",61),r.Tc(10),r.mc(11,"translate"),r.mc(12,"number"),r.Ub(),r.Ub(),r.Rc(13,yv,5,3,"ng-template",62),r.Ub(),r.Ub(),r.Qb(14,"div",63),r.Sb()}if(2&e){var i=r.Fc(2),o=r.lc(),c=o.isEdit,a=o.model,l=r.lc();r.Bb(1),r.sc("destroyOnHide",!0)("activeId",l.activeTab),r.Bb(2),r.sc("ngIf",l.Users_isVisible),r.Bb(1),r.sc("ngIf",l.Location_isVisible),r.Bb(1),r.sc("ngIf",l.showReports(c,a)),r.Bb(3),r.sc("ngIf",l.showAttachmentsErrors(a)),r.Bb(2),r.Uc(r.nc(11,8,"Relation_Attachments")+(a.Id&&2!==(null==a||null==a.EntityMetadata?null:a.EntityMetadata.Attachments)?"":" ("+r.nc(12,10,null==a||null==a.Attachments?null:a.Attachments.length)+")")),r.Bb(4),r.sc("ngbNavOutlet",i)}}function Cv(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.Rc(1,vg,2,1,"h2",10),r.Rc(2,Ig,2,7,"t-text-editor",11),r.Rc(3,Cg,2,7,"t-text-editor",12),r.Rc(4,wg,2,7,"t-text-editor",12),r.Ub(),r.Rc(5,Mg,4,2,"div",13),r.Rc(6,Eg,4,6,"t-form-group",14),r.Rc(7,Rg,4,6,"t-form-group",14),r.Rc(8,Sg,4,6,"t-form-group",14),r.Vb(9,"t-form-group",15),r.mc(10,"translate"),r.Rc(11,_g,2,1,"div",16),r.Rc(12,Og,1,3,"t-text-editor",17),r.Ub(),r.Rc(13,Ag,4,6,"t-form-group",14),r.Rc(14,jg,3,4,"t-form-group",14),r.Rc(15,Qg,3,4,"t-form-group",14),r.Rc(16,Gg,4,6,"t-form-group",14),r.Rc(17,Kg,4,6,"t-form-group",14),r.Rc(18,Zg,4,6,"t-form-group",14),r.Rc(19,np,4,6,"t-form-group",14),r.Rc(20,op,3,4,"t-form-group",14),r.Rc(21,lp,3,4,"t-form-group",14),r.Rc(22,dp,3,4,"t-form-group",14),r.Rc(23,mp,3,4,"t-form-group",14),r.Rc(24,hp,3,4,"t-form-group",14),r.Rc(25,Ip,3,4,"t-form-group",14),r.Rc(26,kp,3,4,"t-form-group",14),r.Rc(27,Tp,3,4,"t-form-group",14),r.Rc(28,xp,3,4,"t-form-group",14),r.Rc(29,Bp,3,4,"t-form-group",14),r.Rc(30,Op,3,4,"t-form-group",14),r.Rc(31,Ap,3,4,"t-form-group",14),r.Rc(32,jp,3,4,"t-form-group",14),r.Rc(33,Qp,3,4,"t-form-group",14),r.Rc(34,Gp,3,4,"t-form-group",14),r.Rc(35,Kp,3,4,"t-form-group",14),r.Rc(36,Zp,3,4,"t-form-group",14),r.Rc(37,nh,3,4,"t-form-group",14),r.Rc(38,oh,3,4,"t-form-group",14),r.Rc(39,lh,3,4,"t-form-group",14),r.Rc(40,dh,3,4,"t-form-group",14),r.Rc(41,mh,3,4,"t-form-group",14),r.Rc(42,hh,4,6,"t-form-group",14),r.Rc(43,Ih,4,6,"t-form-group",14),r.Rc(44,kh,4,6,"t-form-group",14),r.Rc(45,Th,3,4,"t-form-group",14),r.Qb(46,"div",18),r.Rc(47,Rh,4,6,"t-form-group",14),r.Rc(48,_h,4,6,"t-form-group",14),r.Rc(49,Ah,4,6,"t-form-group",14),r.Rc(50,Ph,5,6,"t-form-group",19),r.Rc(51,Iv,15,12,"ng-container",16)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",o.Image_isVisible),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(10,51,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",o.User_isVisible),r.Bb(1),r.sc("ngIf",o.Currency_isVisible),r.Bb(1),r.sc("ngIf",o.Center_isVisible),r.Bb(1),r.sc("ngIf",o.DateOfBirth_isVisible),r.Bb(1),r.sc("ngIf",o.ContactEmail_isVisible),r.Bb(1),r.sc("ngIf",o.ContactMobile_isVisible),r.Bb(1),r.sc("ngIf",o.ContactAddress_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup1_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup2_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup3_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup4_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup5_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup6_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup7_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup8_isVisible),r.Bb(1),r.sc("ngIf",o.Date1_isVisible),r.Bb(1),r.sc("ngIf",o.Date2_isVisible),r.Bb(1),r.sc("ngIf",o.Date3_isVisible),r.Bb(1),r.sc("ngIf",o.Date4_isVisible),r.Bb(1),r.sc("ngIf",o.Decimal1_isVisible),r.Bb(1),r.sc("ngIf",o.Decimal2_isVisible),r.Bb(1),r.sc("ngIf",o.Int1_isVisible),r.Bb(1),r.sc("ngIf",o.Int2_isVisible),r.Bb(1),r.sc("ngIf",o.Text1_isVisible),r.Bb(1),r.sc("ngIf",o.Text2_isVisible),r.Bb(1),r.sc("ngIf",o.Text3_isVisible),r.Bb(1),r.sc("ngIf",o.Text4_isVisible),r.Bb(1),r.sc("ngIf",o.FromDate_isVisible),r.Bb(1),r.sc("ngIf",o.ToDate_isVisible),r.Bb(1),r.sc("ngIf",o.Agent_isVisible),r.Bb(1),r.sc("ngIf",o.TaxIdentificationNumber_isVisible),r.Bb(1),r.sc("ngIf",o.BankAccountNumber_isVisible),r.Bb(1),r.sc("ngIf",o.Relation1_isVisible),r.Bb(2),r.sc("ngIf",o.Description_isVisible),r.Bb(1),r.sc("ngIf",o.Description_isVisible&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",o.Description_isVisible&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",o.showTabs(i,n))}}function wv(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function kv(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function Mv(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"EditDefinition")," ")}var Vv,Tv=((Vv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.translate=r,a.router=o,a.route=c,a.relationsApi=a.api.relationsApi(null,a.notifyDestruct$),a.expand="Currency,Center,Lookup1,Lookup2,Lookup3,Lookup4,Lookup5,Lookup6,Lookup7,Lookup8,\nRelation1,Agent,Users.User,Attachments.Category,Attachments.CreatedBy",a.create=function(){var e={};return a.ws.isPrimaryLanguage?e.Name=a.initialText:a.ws.isSecondaryLanguage?e.Name2=a.initialText:a.ws.isTernaryLanguage&&(e.Name3=a.initialText),e.Users=[],e.Attachments=[],e},a.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Attachments=[],t.Users&&t.Users.forEach((function(e){e.Id=null,delete e.RelationId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById})),t}return console.error("Cloning a non existing item"),null},a.onActivate=function(e){e&&e.Id&&a.relationsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onDeactivate=function(e){e&&e.Id&&a.relationsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onEditDefinition=function(e){var t=a.workspace;t.isEdit=!0,a.router.navigate(["../../../relation-definitions",a.definitionId],{relativeTo:a.route}).then((function(e){e||delete t.isEdit})).catch((function(){return delete t.isEdit}))},a.showActivate=function(e){return!!e&&!e.IsActive},a.showDeactivate=function(e){return!!e&&e.IsActive},a.showEditDefinition=function(e){return a.ws.canDo("relation-definitions","Update",null)},a.canActivateDeactivateItem=function(e){return a.ws.canDo(a.view,"IsActive",e.Id)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.styleFunc=function(e){for(var t={clickable:!1},n=0,i=["fillColor","fillOpacity","icon","strokeColor","shape","strokeOpacity","strokeWeight","visible"];n<i.length;n++){var r=i[n],o=e.getProperty(r);null!=o&&(t[r]=o)}return t},a.locationView="map",a.registerPristineFunc=function(e){a._pristineModel=JSON.stringify(e)},a.isDirtyFunc=function(e){return!!(e&&e.Attachments&&e.Attachments.some((function(e){return!!e.File})))||a._pristineModel!==JSON.stringify(e)},a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");e.definitionId!==n&&(e.definitionId=n)}}))}},{key:"showTabs",value:function(e,t){return this.Users_isVisible||this.Location_isVisible||this.Attachments_isVisible||this.reports.length>0&&this.showReports(e,t)}},{key:"getUserId",value:function(e){if(e&&e.Users&&e.Users[0])return e.Users[0].UserId}},{key:"setUserId",value:function(e,t){e&&(e.Users=t?[{UserId:t}]:[])}},{key:"Users_count",value:function(e){return e&&e.Users?e.Users.length:0}},{key:"Users_showError",value:function(e){return!!e&&!!e.Users&&e.Users.some((function(e){return!!e.serverErrors}))}},{key:"Attachments_count",value:function(e){return e&&e.Attachments?e.Attachments.length:0}},{key:"Attachments_showError",value:function(e){return!!e&&!!e.Users&&e.Users.some((function(e){return!!e.serverErrors}))}},{key:"Map_showError",value:function(e){return!!e&&!!e.serverErrors&&!!e.serverErrors.LocationJson}},{key:"onCenterChange",value:function(e){localStorage.map_latitude=e.lat,localStorage.map_longitude=e.lng}},{key:"parseJson",value:function(e){if(this.parseJsonString!==(e=e||void 0))if(this.parseJsonString=e,e)try{this.parseJsonResult=JSON.parse(e),delete this.parseJsonError}catch(t){this.parseJsonError=t,delete this.parseJsonResult}else delete this.parseJsonResult,delete this.parseJsonError;return this.parseJsonResult}},{key:"onView",value:function(e){this.locationView=e}},{key:"isView",value:function(e){return this.locationView===e}},{key:"showReports",value:function(e,t){return!!t&&!!t.Id}},{key:"reportDefinition",value:function(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}},{key:"reportTitle",value:function(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}},{key:"state",value:function(e){var t="relations_details_".concat(this.definitionId,"_").concat(e.ReportDefinitionId),n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new S.j),n[t]}},{key:"reportView",value:function(e){var t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ma.chart:ma.pivot}},{key:"onExpandReport",value:function(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}},{key:"showAttachmentsErrors",value:function(e){return!!e&&!!e.Attachments&&e.Attachments.some((function(e){return!!e.serverErrors}))}},{key:"attachmentWrappers",value:function(e){return e&&e.Attachments?(this._attachmentsAttachments!==e.Attachments&&(this._attachmentsAttachments=e.Attachments,this._attachmentsResult=e.Attachments.map((function(e){return{attachment:e}}))),this._attachmentsResult):[]}},{key:"onFileSelected",value:function(e,t){var n=this,i=this.attachmentWrappers(t).map((function(e){return e.file?e.file.size:0})).reduce((function(e,t){return e+t}),0);Object(W.q)(e,i,this.translate).subscribe((function(e){t.Attachments.push(e.attachment),n.attachmentWrappers(t).push(e)}),(function(e){n.details.displayErrorModal(e)}))}},{key:"onDeleteAttachment",value:function(e,t){this.attachmentWrappers(e).splice(t,1),e.Attachments.splice(t,1)}},{key:"onDownloadAttachment",value:function(e,t){var n=this,i=e.Id,r=this.attachmentWrappers(e)[t];r.attachment.Id?(r.downloading=!0,this.relationsApi.getAttachment(i,r.attachment.Id).pipe(Object(P.a)((function(e){delete r.downloading,Object(W.i)(e,n.fileName(r))})),Object(j.a)((function(e){return delete r.downloading,n.details.handleActionError(e),Object(L.a)(null)})),Object(re.a)((function(){delete r.downloading}))).subscribe()):r.file&&Object(W.i)(r.file,this.fileName(r))}},{key:"fileName",value:function(e){var t=e.attachment;return t.FileName&&t.FileExtension?"".concat(t.FileName,".").concat(t.FileExtension):t.FileName||(e.file?e.file.name:"Attachment")}},{key:"size",value:function(e){var t=e.attachment;return Object(W.j)(t.Size||(e.file?e.file.size:null))}},{key:"colorFromExtension",value:function(e){return Object(W.d)(e)}},{key:"iconFromExtension",value:function(e){return Object(W.m)(e)}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.relationsApi=this.api.relationsApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"view",get:function(){return"relations/".concat(this.definitionId)}},{key:"definition",get:function(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Relations[this.definitionId]:null)}},{key:"found",get:function(){return!!this.definition}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"masterCrumb",get:function(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}},{key:"Currency_isVisible",get:function(){return!!this.definition.CurrencyVisibility}},{key:"Currency_isRequired",get:function(){return"Required"===this.definition.CurrencyVisibility}},{key:"Currency_label",get:function(){return this.translate.instant("Entity_Currency")}},{key:"Center_isVisible",get:function(){return!!this.definition.CenterVisibility}},{key:"Center_isRequired",get:function(){return"Required"===this.definition.CenterVisibility}},{key:"Center_label",get:function(){return this.translate.instant("Entity_Center")}},{key:"Image_isVisible",get:function(){return!!this.definition.ImageVisibility}},{key:"Description_isVisible",get:function(){return!!this.definition.DescriptionVisibility}},{key:"Description_isRequired",get:function(){return"Required"===this.definition.DescriptionVisibility}},{key:"FromDate_isVisible",get:function(){return!!this.definition.FromDateVisibility}},{key:"FromDate_isRequired",get:function(){return"Required"===this.definition.FromDateVisibility}},{key:"FromDate_label",get:function(){return this.definition.FromDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"FromDateLabel"):this.translate.instant("Entity_FromDate")}},{key:"ToDate_isVisible",get:function(){return!!this.definition.ToDateVisibility}},{key:"ToDate_isRequired",get:function(){return"Required"===this.definition.ToDateVisibility}},{key:"ToDate_label",get:function(){return this.definition.ToDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"ToDateLabel"):this.translate.instant("Entity_ToDate")}},{key:"Date1_isVisible",get:function(){return!!this.definition.Date1Visibility}},{key:"Date1_isRequired",get:function(){return"Required"===this.definition.Date1Visibility}},{key:"Date1_label",get:function(){return this.definition.Date1Label?this.ws.getMultilingualValueImmediate(this.definition,"Date1Label"):this.translate.instant("Entity_Date1")}},{key:"Date2_isVisible",get:function(){return!!this.definition.Date2Visibility}},{key:"Date2_isRequired",get:function(){return"Required"===this.definition.Date2Visibility}},{key:"Date2_label",get:function(){return this.definition.Date2Label?this.ws.getMultilingualValueImmediate(this.definition,"Date2Label"):this.translate.instant("Entity_Date2")}},{key:"Date3_isVisible",get:function(){return!!this.definition.Date3Visibility}},{key:"Date3_isRequired",get:function(){return"Required"===this.definition.Date3Visibility}},{key:"Date3_label",get:function(){return this.definition.Date3Label?this.ws.getMultilingualValueImmediate(this.definition,"Date3Label"):this.translate.instant("Entity_Date3")}},{key:"Date4_isVisible",get:function(){return!!this.definition.Date4Visibility}},{key:"Date4_isRequired",get:function(){return"Required"===this.definition.Date4Visibility}},{key:"Date4_label",get:function(){return this.definition.Date4Label?this.ws.getMultilingualValueImmediate(this.definition,"Date4Label"):this.translate.instant("Entity_Date4")}},{key:"Decimal1_isVisible",get:function(){return!!this.definition.Decimal1Visibility}},{key:"Decimal1_isRequired",get:function(){return"Required"===this.definition.Decimal1Visibility}},{key:"Decimal1_label",get:function(){return this.definition.Decimal1Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal1Label"):this.translate.instant("Entity_Decimal1")}},{key:"Decimal2_isVisible",get:function(){return!!this.definition.Decimal2Visibility}},{key:"Decimal2_isRequired",get:function(){return"Required"===this.definition.Decimal2Visibility}},{key:"Decimal2_label",get:function(){return this.definition.Decimal2Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal2Label"):this.translate.instant("Entity_Decimal2")}},{key:"Int1_isVisible",get:function(){return!!this.definition.Int1Visibility}},{key:"Int1_isRequired",get:function(){return"Required"===this.definition.Int1Visibility}},{key:"Int1_label",get:function(){return this.definition.Int1Label?this.ws.getMultilingualValueImmediate(this.definition,"Int1Label"):this.translate.instant("Entity_Int1")}},{key:"Int2_isVisible",get:function(){return!!this.definition.Int2Visibility}},{key:"Int2_isRequired",get:function(){return"Required"===this.definition.Int2Visibility}},{key:"Int2_label",get:function(){return this.definition.Int2Label?this.ws.getMultilingualValueImmediate(this.definition,"Int2Label"):this.translate.instant("Entity_Int2")}},{key:"Lookup1_isVisible",get:function(){return!!this.definition.Lookup1Visibility}},{key:"Lookup1_isRequired",get:function(){return"Required"===this.definition.Lookup1Visibility}},{key:"Lookup1_label",get:function(){return this.definition.Lookup1Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup1Label"):this.translate.instant("Entity_Lookup1")}},{key:"Lookup1_DefinitionId",get:function(){return this.definition.Lookup1DefinitionId}},{key:"Lookup2_isVisible",get:function(){return!!this.definition.Lookup2Visibility}},{key:"Lookup2_isRequired",get:function(){return"Required"===this.definition.Lookup2Visibility}},{key:"Lookup2_label",get:function(){return this.definition.Lookup2Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup2Label"):this.translate.instant("Entity_Lookup2")}},{key:"Lookup2_DefinitionId",get:function(){return this.definition.Lookup2DefinitionId}},{key:"Lookup3_isVisible",get:function(){return!!this.definition.Lookup3Visibility}},{key:"Lookup3_isRequired",get:function(){return"Required"===this.definition.Lookup3Visibility}},{key:"Lookup3_label",get:function(){return this.definition.Lookup3Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup3Label"):this.translate.instant("Entity_Lookup3")}},{key:"Lookup3_DefinitionId",get:function(){return this.definition.Lookup3DefinitionId}},{key:"Lookup4_isVisible",get:function(){return!!this.definition.Lookup4Visibility}},{key:"Lookup4_isRequired",get:function(){return"Required"===this.definition.Lookup4Visibility}},{key:"Lookup4_label",get:function(){return this.definition.Lookup4Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup4Label"):this.translate.instant("Entity_Lookup4")}},{key:"Lookup4_DefinitionId",get:function(){return this.definition.Lookup4DefinitionId}},{key:"Lookup5_isVisible",get:function(){return!!this.definition.Lookup5Visibility}},{key:"Lookup5_isRequired",get:function(){return"Required"===this.definition.Lookup5Visibility}},{key:"Lookup5_label",get:function(){return this.definition.Lookup5Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup5Label"):this.translate.instant("Entity_Lookup5")}},{key:"Lookup5_DefinitionId",get:function(){return this.definition.Lookup5DefinitionId}},{key:"Lookup6_isVisible",get:function(){return!!this.definition.Lookup6Visibility}},{key:"Lookup6_isRequired",get:function(){return"Required"===this.definition.Lookup6Visibility}},{key:"Lookup6_label",get:function(){return this.definition.Lookup6Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup6Label"):this.translate.instant("Entity_Lookup6")}},{key:"Lookup6_DefinitionId",get:function(){return this.definition.Lookup6DefinitionId}},{key:"Lookup7_isVisible",get:function(){return!!this.definition.Lookup7Visibility}},{key:"Lookup7_isRequired",get:function(){return"Required"===this.definition.Lookup7Visibility}},{key:"Lookup7_label",get:function(){return this.definition.Lookup7Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup7Label"):this.translate.instant("Entity_Lookup7")}},{key:"Lookup7_DefinitionId",get:function(){return this.definition.Lookup7DefinitionId}},{key:"Lookup8_isVisible",get:function(){return!!this.definition.Lookup8Visibility}},{key:"Lookup8_isRequired",get:function(){return"Required"===this.definition.Lookup8Visibility}},{key:"Lookup8_label",get:function(){return this.definition.Lookup8Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup8Label"):this.translate.instant("Entity_Lookup8")}},{key:"Lookup8_DefinitionId",get:function(){return this.definition.Lookup8DefinitionId}},{key:"Text1_isVisible",get:function(){return!!this.definition.Text1Visibility}},{key:"Text1_isRequired",get:function(){return"Required"===this.definition.Text1Visibility}},{key:"Text1_label",get:function(){return this.definition.Text1Label?this.ws.getMultilingualValueImmediate(this.definition,"Text1Label"):this.translate.instant("Entity_Text1")}},{key:"Text2_isVisible",get:function(){return!!this.definition.Text2Visibility}},{key:"Text2_isRequired",get:function(){return"Required"===this.definition.Text2Visibility}},{key:"Text2_label",get:function(){return this.definition.Text2Label?this.ws.getMultilingualValueImmediate(this.definition,"Text2Label"):this.translate.instant("Entity_Text2")}},{key:"Text3_isVisible",get:function(){return!!this.definition.Text3Visibility}},{key:"Text3_isRequired",get:function(){return"Required"===this.definition.Text3Visibility}},{key:"Text3_label",get:function(){return this.definition.Text3Label?this.ws.getMultilingualValueImmediate(this.definition,"Text3Label"):this.translate.instant("Entity_Text3")}},{key:"Text4_isVisible",get:function(){return!!this.definition.Text4Visibility}},{key:"Text4_isRequired",get:function(){return"Required"===this.definition.Text4Visibility}},{key:"Text4_label",get:function(){return this.definition.Text4Label?this.ws.getMultilingualValueImmediate(this.definition,"Text4Label"):this.translate.instant("Entity_Text4")}},{key:"Agent_isVisible",get:function(){return!!this.definition.AgentVisibility}},{key:"Agent_isRequired",get:function(){return"Required"===this.definition.AgentVisibility}},{key:"TaxIdentificationNumber_isVisible",get:function(){return!!this.definition.TaxIdentificationNumberVisibility}},{key:"TaxIdentificationNumber_isRequired",get:function(){return"Required"===this.definition.TaxIdentificationNumberVisibility}},{key:"Job_isVisible",get:function(){return!!this.definition.JobVisibility}},{key:"Job_isRequired",get:function(){return"Required"===this.definition.JobVisibility}},{key:"BankAccountNumber_isVisible",get:function(){return!!this.definition.BankAccountNumberVisibility}},{key:"BankAccountNumber_isRequired",get:function(){return"Required"===this.definition.BankAccountNumberVisibility}},{key:"DateOfBirth_isVisible",get:function(){return!!this.definition.DateOfBirthVisibility}},{key:"DateOfBirth_isRequired",get:function(){return"Required"===this.definition.DateOfBirthVisibility}},{key:"ContactEmail_isVisible",get:function(){return!!this.definition.ContactEmailVisibility}},{key:"ContactEmail_isRequired",get:function(){return"Required"===this.definition.ContactEmailVisibility}},{key:"ContactMobile_isVisible",get:function(){return!!this.definition.ContactMobileVisibility}},{key:"ContactMobile_isRequired",get:function(){return"Required"===this.definition.ContactMobileVisibility}},{key:"ContactAddress_isVisible",get:function(){return!!this.definition.ContactAddressVisibility}},{key:"ContactAddress_isRequired",get:function(){return"Required"===this.definition.ContactAddressVisibility}},{key:"Relation1_isVisible",get:function(){return!!this.definition.Relation1Visibility}},{key:"Relation1_isRequired",get:function(){return"Required"===this.definition.Relation1Visibility}},{key:"Relation1_label",get:function(){return this.definition.Relation1Label?this.ws.getMultilingualValueImmediate(this.definition,"Relation1Label"):this.translate.instant("Entity_Relation1")}},{key:"Relation1_DefinitionIds",get:function(){return this.definition.Relation1DefinitionId?[this.definition.Relation1DefinitionId]:[]}},{key:"User_isVisible",get:function(){return"Single"===this.definition.UserCardinality}},{key:"Users_isVisible",get:function(){return"Multiple"===this.definition.UserCardinality}},{key:"Attachments_isVisible",get:function(){return!!this.definition.HasAttachments}},{key:"Location_isVisible",get:function(){return!!this.definition.LocationVisibility}},{key:"zoom",get:function(){return+localStorage.map_zoom||2},set:function(e){localStorage.map_zoom=e}},{key:"latitude",get:function(){return void 0===this._lat&&(this._lat=+localStorage.map_latitude||0),this._lat}},{key:"longitude",get:function(){return void 0===this._lng&&(this._lng=+localStorage.map_longitude||0),this._lng}},{key:"reports",get:function(){return this.definition.ReportDefinitions}},{key:"activeTabKey",get:function(){return"relations_details_".concat(this.definitionId,"_activeTab")}},{key:"activeTab",get:function(){var e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.Users_isVisible?"users":this.Attachments_isVisible?"attachments":this.Location_isVisible?"location":this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]},set:function(e){this.ws.miscState[this.activeTabKey]=e}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||Vv)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(i.e),r.Pb(i.a))},Vv.\u0275cmp=r.Jb({type:Vv,selectors:[["t-relations-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[r.yb],decls:13,vars:2,consts:[["collection","Relation",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Relation",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions"],[3,"showHome"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 t-details-image-container",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"w-100"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"col-12","col-md-4","t-details-image-container"],[3,"metadata"],[1,"border"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../../users",3,"itemId"],[3,"ngModel","ngModelChange"],[3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../currencies",3,"itemId"],[3,"ngModel","required","ngModelChange"],["link","../../../centers",3,"itemId"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"ngModel","definitionId","required","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionId","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["link","../../../agents/",3,"itemId",4,"ngIf"],["link","../../../agents/",3,"itemId"],["collection","Relation","path","Agent",3,"entity"],[3,"ngModel","definitionIds","required","ngModelChange",4,"ngIf"],[3,"ngModel","definitionIds","required","ngModelChange"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[1,"t-form-group",3,"label"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","users",4,"ngIf"],["ngbNavItem","location",4,"ngIf"],["ngbNavItem","attachments"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","users"],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_User",""],["row_User",""],[1,"t-form-group",3,"serverErrors"],["link","../../../users",3,"itemId",4,"ngIf"],["ngbNavItem","location"],[2,"height","450px"],[1,"h-100","border-bottom","border-left","border-right"],["spellcheck","false",1,"form-control","t-input","p-1","h-100",2,"resize","none",3,"readonly","placeholder","ngModel","ngModelChange"],[1,"h-100",3,"latitude","longitude","zoom","mapTypeControl","panControl","streetViewControl","fitBounds","fitBoundsPadding","centerChange"],["type","max",3,"agmFitBounds","geoJson"],["type","min",3,"agmFitBounds","geoJson"],[3,"geoJson","style",4,"ngIf"],[1,"btn-group","btn-group-toggle","pt-1"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","locationView"],["icon","map-marker-alt"],[1,"d-none","d-md-inline"],["icon","code"],["style","margin-top: -40px",4,"ngIf"],[3,"geoJson"],[2,"margin-top","-40px"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"],["class","p-3 font-italic font-weight-light2 text-muted",4,"ngIf"],["class","w-100 mx-0 mb-1 p-2 p-sm-3 overflow-auto","style","max-height: 450px;",4,"ngIf"],["class","py-2 px-3 col-12 d-flex align-items-center justify-content-end",4,"ngIf"],["type","file","multiple","",1,"d-none",3,"change"],["fileInput",""],[1,"p-3","font-italic","font-weight-light2","text-muted"],[1,"w-100","mx-0","mb-1","p-2","p-sm-3","overflow-auto",2,"max-height","450px"],["class","text-nowrap",3,"bg-light",4,"ngFor","ngForOf"],[1,"text-nowrap"],[1,"border-bottom","d-flex","align-items-center"],[1,"px-3","pt-1","pb-2"],[2,"font-size","200%",3,"icon"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","px-1",2,"min-width","0px"],["class","d-flex align-items-stretch","style","max-width: 750px;",4,"ngIf","ngIfElse"],["editAttachment",""],[1,"d-flex","align-items-stretch"],[1,"flex-grow-1","small","text-muted","text-truncate",2,"min-width","0px"],["class","mx-1",4,"ngIf"],[1,"d-flex","align-items-stretch",2,"max-width","750px"],["type","button",1,"btn","btn-link","p-0","text-primary","border-top-0","border-left-0","border-right-0","text-truncate",3,"click"],["class","mx-2 flex-grow-1","style","min-width: 0;",4,"ngIf"],[1,"mx-2","flex-grow-1",2,"min-width","0"],[1,"text-black"],[2,"max-width","500px"],[3,"serverErrors"],[1,"mx-1"],["class","btn btn-sm text-primary p-0 px-1 t-toolbar-button btn-light t-white-button",3,"title","click",4,"ngIf","ngIfElse"],["spinner",""],[1,"btn","btn-sm","text-primary","p-0","px-1","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","trash"],["icon","download"],[1,"px-1","t-toolbar-button","d-inline","t-vertical-align-middle"],[1,"py-2","px-3","col-12","d-flex","align-items-center","justify-content-end"],[1,"btn","btn-sm","btn-primary","text-primary2","btn-light2","t-white-button2",3,"click"],["icon","upload"]],template:function(e,t){if(1&e&&(r.Rc(0,gg,1,31,"t-details",0),r.Rc(1,pg,1,1,"ng-template",null,1,r.Sc),r.Rc(3,hg,2,1,"ng-template",null,2,r.Sc),r.Rc(5,Cv,52,53,"ng-template",null,3,r.Sc),r.Rc(7,wv,2,3,"ng-template",null,4,r.Sc),r.Rc(9,kv,2,3,"ng-template",null,5,r.Sc),r.Rc(11,Mv,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,q.a,dn,Ce.a,we.a,ie.u,ie.k,ie.n,Tn.a,he,Ca,Ys,Zu,rd,dd,bb,xn,Ie.a,tf,lf,df,X.v,X.x,X.y,X.w,X.A,ne.b,tl.a,nl.a,ie.c,qm,lg,am,rm,ke.a,x.t,ve.a,pa,ye.a],pipes:[G.d,sg,dg,x.g,Te],encapsulation:2}),Vv);function Ev(e,t){if(1&e&&(r.Vb(0,"div",9),r.Vb(1,"span",10),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",11),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("Role",n,"Name")),r.Bb(3),r.Uc(i.c[n].Code)}}function Uv(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Role"),"\n")}function xv(e,t){if(1&e&&(r.Vb(0,"span",12),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.ws.getMultilingualValue("Role",n,"Name"))}}function Rv(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function Dv(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function Bv(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SavedByMe")," ")}function Sv(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Public")," ")}function _v(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"NotPublic")," ")}var Ov,Lv=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Fv=function(e,t){return[e,t]},Av=function(e){return{template:e,expression:"SavedById eq me"}},Pv=function(e){return[e]},Nv=function(e){return{template:e,expression:"IsPublic eq true"}},jv=function(e){return{template:e,expression:"IsPublic eq false"}},Wv=function(e,t){return{SavedBy:e,IsPublic:t}},qv=((Ov=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.rolesApi=o.api.rolesApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.rolesApi.activate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.rolesApi.deactivate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo("roles","IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.rolesApi=o.api.rolesApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.Role}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||Ov)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},Ov.\u0275cmp=r.Jb({type:Ov,selectors:[["t-roles-master"]],features:[r.yb],decls:18,vars:39,consts:[["collection","Role","selectForTiles","Code","selectDefault","Code,IsPublic,IsActive",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["savedByMe",""],["isPublic",""],["isNotPublic",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,Ev,6,2,"ng-template",null,1,r.Sc),r.Rc(4,Uv,2,3,"ng-template",null,2,r.Sc),r.Rc(6,xv,2,1,"ng-template",null,3,r.Sc),r.Rc(8,Rv,2,3,"ng-template",null,4,r.Sc),r.Rc(10,Dv,2,3,"ng-template",null,5,r.Sc),r.Rc(12,Bv,2,3,"ng-template",null,6,r.Sc),r.Rc(14,Sv,2,3,"ng-template",null,7,r.Sc),r.Rc(16,_v,2,3,"ng-template",null,8,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"Roles"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(22,Fv,r.zc(12,Lv,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(17,Lv,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.xc(36,Wv,r.wc(27,Pv,r.wc(25,Av,l)),r.xc(33,Fv,r.wc(29,Nv,s),r.wc(31,jv,u))))}},directives:[Ot.a],pipes:[G.d],encapsulation:2}),Ov),Qv=n("U6XH"),Hv=n("gQLD"),$v=n("Jfee"),Gv=n("tHLm"),zv=n("03Gx"),Jv=n("yG3f"),Kv=n("GfJL");function Yv(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function Xv(e,t){if(1&e&&(r.Vb(0,"h2",20),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var Zv=function(){return{updateOn:"blur"}};function ey(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,Zv))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function ty(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,Zv))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function ny(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,Zv))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function iy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function ry(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,Zv))}}function oy(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,iy,2,1,"div",11),r.Rc(3,ry,1,3,"t-text-editor",23),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function cy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function ay(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,Zv))}}function ly(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,cy,2,1,"div",11),r.Rc(3,ay,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function sy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function uy(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,Zv))}}function dy(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,sy,2,1,"div",11),r.Rc(3,uy,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function by(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function fy(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,Zv))}}function my(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(r.nc(2,1,null!=n&&n.IsPublic?"Yes":"No"))}}function gy(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",28),r.Vb(1,"input",29),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.IsPublic=e})),r.Ub(),r.Vb(2,"label",30),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(1),r.sc("ngModel",i.IsPublic)}}function py(e,t){if(1&e&&(r.Vb(0,"t-form-group",26),r.mc(1,"translate"),r.Rc(2,my,3,3,"div",11),r.Rc(3,gy,4,1,"div",27),r.Ub()),2&e){var n=r.lc().isEdit;r.sc("label",r.nc(1,3,"Role_IsPublic")),r.Bb(2),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function hy(e,t){if(1&e&&(r.Vb(0,"t-form-group",26),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(3),r.Uc(r.nc(4,4,n?n.IsActive?"Active":"Inactive":""))}}function vy(e,t){1&e&&(r.Vb(0,"t-warning-message",31),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"PublicRoleWarning")," "))}function yy(e,t){1&e&&(r.Vb(0,"span",37),r.Qb(1,"fa-icon",38),r.Tc(2,"\xa0 "),r.Ub())}function Iy(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Permission_View"))}function Cy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().item,i=r.lc(4);r.Bb(1),r.Vc(" ",i.permissionViewLookup(n.View)," ")}}function wy(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",53),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.View=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(),t=e.item,i=e.update,o=r.lc(4);return i.call(null,t),o.onPermissionChanged(t)})),r.Ub()}if(2&e){var i=r.lc().item,o=r.lc(4);r.sc("choices",o.permissionViewChoices)("ngModel",i.View)("required",!i.PH)}}function ky(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",51),r.Rc(1,Cy,2,1,"div",11),r.Rc(2,wy,1,3,"t-selector",52),r.Ub()),2&e){var n=t.item,i=r.lc(3).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.View),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}function My(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Permission_Action"))}function Vy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc().item,i=r.lc(4);r.Bb(1),r.Uc(r.nc(2,1,i.permissionActionLookup(null==n?null:n.Action)))}}function Ty(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",55),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.Action=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(),t=e.item,i=e.update,o=r.lc(4);return i.call(null,t),o.onPermissionChanged(t)})),r.Ub()}if(2&e){var i=r.lc().item,o=r.lc(4);r.sc("ngModel",i.Action)("required",!i.PH)("ngModelOptions",r.vc(5,Zv))("choices",o.permissionActionChoices(i))("disabled",!i.View)}}function Ey(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",51),r.Rc(1,Vy,3,3,"div",11),r.Rc(2,Ty,1,6,"t-selector",54),r.Ub()),2&e){var n=t.item,i=r.lc(3).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Action),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}function Uy(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Permission_Criteria"))}function xy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().item;r.Bb(1),r.Uc(n.Criteria)}}function Ry(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",57),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.Criteria=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item,o=r.lc(4);r.sc("ngModel",i.Criteria)("ngModelOptions",r.vc(3,Zv))("disabled",o.disableCriteria(i))}}function Dy(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",51),r.Rc(1,xy,2,1,"div",11),r.Rc(2,Ry,1,4,"t-text-editor",56),r.Ub()),2&e){var n=t.item,i=r.lc(3).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Criteria),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}function By(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Permission_Mask"))}function Sy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().item;r.Bb(1),r.Uc(n.Mask)}}function _y(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",57),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.Mask=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item,o=r.lc(4);r.sc("ngModel",i.Mask)("ngModelOptions",r.vc(3,Zv))("disabled",o.disableMask(i))}}function Oy(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",51),r.Rc(1,Sy,2,1,"div",11),r.Rc(2,_y,1,4,"t-text-editor",56),r.Ub()),2&e){var n=t.item,i=r.lc(3).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Mask),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}function Ly(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Memo"))}function Fy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().item;r.Bb(1),r.Uc(n.Memo)}}function Ay(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.Memo=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item;r.sc("ngModel",i.Memo)("ngModelOptions",r.vc(2,Zv))}}function Py(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",51),r.Rc(1,Fy,2,1,"div",11),r.Rc(2,Ay,1,3,"t-text-editor",12),r.Ub()),2&e){var n=t.item,i=r.lc(3).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Memo),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var Ny=function(){return["View","Action","Criteria","Memo"]},jy=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Wy=function(e,t,n,i,r){return{View:e,Action:t,Criteria:n,Mask:i,Memo:r}};function qy(e,t){if(1&e&&(r.Vb(0,"t-restricted",39),r.Qb(1,"t-table",40),r.Ub(),r.Rc(2,Iy,2,3,"ng-template",null,41,r.Sc),r.Rc(4,ky,3,3,"ng-template",null,42,r.Sc),r.Rc(6,My,2,3,"ng-template",null,43,r.Sc),r.Rc(8,Ey,3,3,"ng-template",null,44,r.Sc),r.Rc(10,Uy,2,3,"ng-template",null,45,r.Sc),r.Rc(12,Dy,3,3,"ng-template",null,46,r.Sc),r.Rc(14,By,2,3,"ng-template",null,47,r.Sc),r.Rc(16,Oy,3,3,"ng-template",null,48,r.Sc),r.Rc(18,Ly,2,3,"ng-template",null,49,r.Sc),r.Rc(20,Py,3,3,"ng-template",null,50,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21),f=r.lc(2),m=f.model,g=f.isEdit;r.Gb("p-4",1===(null==m||null==m.EntityMetadata?null:m.EntityMetadata.Permissions)),r.sc("metadata",null==m||null==m.EntityMetadata?null:m.EntityMetadata.Permissions),r.Bb(1),r.sc("dataSource",null==m?null:m.Permissions)("isEdit",g)("columnPaths",r.vc(7,Ny))("columnTemplates",r.Ac(23,Wy,r.xc(8,jy,n,i),r.xc(11,jy,o,c),r.xc(14,jy,a,l),r.xc(17,jy,s,u),r.xc(20,jy,d,b)))}}function Qy(e,t){if(1&e&&(r.Vb(0,"li",32),r.Vb(1,"a",33),r.Rc(2,yy,3,0,"span",34),r.Vb(3,"span",35),r.Tc(4),r.mc(5,"translate"),r.mc(6,"number"),r.Ub(),r.Ub(),r.Rc(7,qy,22,29,"ng-template",36),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(2),r.sc("ngIf",i.showPermissionsError(n)),r.Bb(2),r.Uc(r.nc(5,2,"Permissions")+(n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Permissions)?"":" ("+r.nc(6,4,i.permissionsCount(n))+")"))}}function Hy(e,t){1&e&&(r.Vb(0,"span",37),r.Qb(1,"fa-icon",38),r.Tc(2,"\xa0 "),r.Ub())}function $y(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"RoleMembership_User"))}function Gy(e,t){if(1&e&&(r.Vb(0,"t-view-link",63),r.Tc(1),r.Ub()),2&e){var n=r.lc().item,i=r.lc(4);r.sc("itemId",null==n?null:n.UserId),r.Bb(1),r.Vc(" ",i.getMultilingualValue(i.ws.User[n.UserId],"Name",i.ws)," ")}}function zy(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-users-picker",64),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.UserId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item;r.sc("ngModel",i.UserId)("showRoles",!1)("required",!i.PH)}}function Jy(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",51),r.Rc(1,Gy,2,2,"t-view-link",61),r.Rc(2,zy,1,3,"t-users-picker",62),r.Ub()),2&e){var n=t.item,i=r.lc(3).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.UserId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}function Ky(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Memo"))}function Yy(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().item;r.Bb(1),r.Uc(n.Memo)}}function Xy(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.Memo=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item;r.sc("ngModel",i.Memo)("ngModelOptions",r.vc(2,Zv))}}function Zy(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",51),r.Rc(1,Yy,2,1,"div",11),r.Rc(2,Xy,1,3,"t-text-editor",12),r.Ub()),2&e){var n=t.item,i=r.lc(3).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Memo),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var eI=function(){return["UserId","Memo"]},tI=function(e,t){return{UserId:e,Memo:t}};function nI(e,t){if(1&e&&(r.Vb(0,"t-restricted",39),r.Qb(1,"t-table",40),r.Ub(),r.Rc(2,$y,2,3,"ng-template",null,59,r.Sc),r.Rc(4,Jy,3,3,"ng-template",null,60,r.Sc),r.Rc(6,Ky,2,3,"ng-template",null,49,r.Sc),r.Rc(8,Zy,3,3,"ng-template",null,50,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.lc(2),l=a.model,s=a.isEdit;r.Gb("p-4",1===(null==l||null==l.EntityMetadata?null:l.EntityMetadata.Members)),r.sc("metadata",null==l||null==l.EntityMetadata?null:l.EntityMetadata.Members),r.Bb(1),r.sc("dataSource",null==l?null:l.Members)("isEdit",s)("columnPaths",r.vc(7,eI))("columnTemplates",r.xc(14,tI,r.xc(8,jy,n,i),r.xc(11,jy,o,c)))}}function iI(e,t){if(1&e&&(r.Vb(0,"li",58),r.Vb(1,"a",33),r.Rc(2,Hy,3,0,"span",34),r.Vb(3,"span",35),r.Tc(4),r.mc(5,"translate"),r.mc(6,"number"),r.Ub(),r.Ub(),r.Rc(7,nI,10,17,"ng-template",36),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(2),r.sc("ngIf",i.showMembersError(n)),r.Bb(2),r.Uc(r.nc(5,2,"Members")+(n.Id&&2!=(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Members)?"":" ("+r.nc(6,4,i.membersCount(n))+")"))}}function rI(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,Xv,2,1,"h2",6),r.Rc(2,ey,2,7,"t-text-editor",7),r.Rc(3,ty,2,7,"t-text-editor",8),r.Rc(4,ny,2,7,"t-text-editor",8),r.Ub(),r.Rc(5,oy,4,6,"t-form-group",9),r.Rc(6,ly,4,6,"t-form-group",9),r.Rc(7,dy,4,6,"t-form-group",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Rc(10,by,2,1,"div",11),r.Rc(11,fy,1,3,"t-text-editor",12),r.Ub(),r.Rc(12,py,4,5,"t-form-group",13),r.Rc(13,hy,5,6,"t-form-group",13),r.Rc(14,vy,3,3,"t-warning-message",14),r.Vb(15,"ul",15,16),r.Rc(17,Qy,8,6,"li",17),r.Rc(18,iI,8,6,"li",18),r.Ub(),r.Qb(19,"div",19)),2&e){var n=t.model,i=t.isEdit,o=r.Fc(16),c=r.lc();r.sc("serverErrors",c.getMultilingualValue(null==n?null:n.serverErrors,"Name",c.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&c.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&c.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&c.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!c.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!c.ws.isSecondaryLanguage&&c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!c.ws.isTernaryLanguage&&c.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,19,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",c.showIsPublic),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",c.showPublicRoleWarning(n)),r.Bb(1),r.sc("destroyOnHide",!0),r.Bb(2),r.sc("ngIf",c.showPermissions),r.Bb(1),r.sc("ngIf",c.showMembersTab(n)),r.Bb(1),r.sc("ngbNavOutlet",o)}}function oI(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function cI(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var aI,lI=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},sI=function(e,t){return[e,t]},uI=((aI=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.showMembers=!0,o.showPermissions=!0,o.showIsPublic=!0,o._permissionActionChoices={},o._viewsDb=null,o._currentViewsDb=null,o._viewsForSelector=null,o.rolesApi=o.api.rolesApi(o.notifyDestruct$),o.expand="Permissions,Members.User",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e.IsPublic=!1,e.Permissions=[],e.Members=[],e},o.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Permissions&&t.Permissions.forEach((function(e){e.Id=null,delete e.RoleId})),t.Members&&t.Members.forEach((function(e){e.Id=null,delete e.RoleId})),t}return console.error("Cloning a non existing item"),null},o.onActivate=function(e){e&&e.Id&&o.rolesApi.activate([e.Id],{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.onDeactivate=function(e){e&&e.Id&&o.rolesApi.deactivate([e.Id],{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.showActivate=function(e){return!!e&&!e.IsActive},o.showDeactivate=function(e){return!!e&&e.IsActive},o.canActivateDeactivateItem=function(e){return o.ws.canDo("roles","IsActive",e.Id)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.permissionViewLookup=function(e){return e?o.viewsDb[e]?o.viewsDb[e].name():(console.error("missing view ".concat(e)),""):""},o.rolesApi=o.api.rolesApi(o.notifyDestruct$),o}return _createClass(n,[{key:"permissionActionChoices",value:function(e){var t=this;if(!e.View)return[];if(!this._permissionActionChoices[e.View]){var n=this.viewsDb[e.View];this._permissionActionChoices[e.View]=n&&n.actions?Object.keys(n.actions).map((function(e){return{name:function(){return t.translate.instant(Qv.a[e])},value:e}})):[]}return this._permissionActionChoices[e.View]}},{key:"permissionActionLookup",value:function(e){return e?"All"===e?"View_All":Qv.a[e]:""}},{key:"disableCriteria",value:function(e){if(!e||!e.View||!e.Action)return!0;var t=this.viewsDb[e.View];if(t&&t.actions){var n=t.actions[e.Action];return!(n&&n.supportsCriteria)}return!0}},{key:"disableMask",value:function(e){if(!e||!e.View||!e.Action)return!0;var t=this.viewsDb[e.View];if(t&&t.actions){var n=t.actions[e.Action];return!(n&&n.supportsMask)}return!0}},{key:"onPermissionChanged",value:function(e){var t=this.permissionActionChoices(e);1===t.length?e.Action=t[0].value:e.Action&&t.every((function(t){return t.value!==e.Action}))&&(e.Action=null),this.disableMask(e)&&(e.Mask=null),this.disableCriteria(e)&&(e.Criteria=null)}},{key:"permissionsCount",value:function(e){return e&&e.Permissions?e.Permissions.length:0}},{key:"membersCount",value:function(e){return e&&e.Members?e.Members.length:0}},{key:"showMembersTab",value:function(e){return this.showMembers&&(!e||!e.IsPublic)}},{key:"showPublicRoleWarning",value:function(e){return!e||e.IsPublic}},{key:"showPermissionsError",value:function(e){return!!e&&!!e.Permissions&&e.Permissions.some((function(e){return!!e.serverErrors}))}},{key:"showMembersError",value:function(e){return!!e&&!!e.Members&&e.Members.some((function(e){return!!e.serverErrors}))}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"viewsDb",get:function(){var e=this;if(this._currentLang!==this.translate.currentLang||this._currentDefinition!==this.ws.definitions){this._currentLang=this.translate.currentLang,this._currentDefinition=this.ws.definitions,this._viewsDb={};for(var t=function(){var t=i[n],r=Qv.c[t],o={name:function(){return e.translate.instant(r.name)},actions:{}};o.actions.All={supportsCriteria:!1,supportsMask:!1},r.read&&(o.actions.Read={supportsCriteria:!0,supportsMask:!0}),r.update&&(o.actions.Update={supportsCriteria:!0,supportsMask:!0}),r.delete&&(o.actions.Delete={supportsCriteria:!0,supportsMask:!1});var c,a=_createForOfIteratorHelper(r.actions);try{for(a.s();!(c=a.n()).done;){var l=c.value;o.actions[l.action]={supportsCriteria:l.criteria,supportsMask:!1}}}catch(s){a.e(s)}finally{a.f()}e._viewsDb[t]=o},n=0,i=Object.keys(Qv.c);n<i.length;n++)t();var r,o=this.ws.definitions.Lookups,c=_createForOfIteratorHelper(Object.keys(o).map((function(e){return+e})));try{for(c.s();!(r=c.n()).done;){var a=r.value,l=Object(Hv.a)(this.workspace,this.translate,a);l?this._viewsDb[l.apiEndpoint]={name:l.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error("Could not find lookup definitionId '".concat(a,"'"))}}catch(x){c.e(x)}finally{c.f()}var s,u=this.ws.definitions.Relations,d=_createForOfIteratorHelper(Object.keys(u).map((function(e){return+e})));try{for(d.s();!(s=d.n()).done;){var b=s.value,f=Object(Gv.a)(this.workspace,this.translate,b);f?this._viewsDb[f.apiEndpoint]={name:f.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error("Could not find relation definitionId '".concat(b,"'"))}}catch(x){d.e(x)}finally{d.f()}var m,g=this.ws.definitions.Custodies,p=_createForOfIteratorHelper(Object.keys(g).map((function(e){return+e})));try{for(p.s();!(m=p.n()).done;){var h=m.value,v=Object(Jv.a)(this.workspace,this.translate,h);v?this._viewsDb[v.apiEndpoint]={name:v.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error("Could not find custody definitionId '".concat(h,"'"))}}catch(x){p.e(x)}finally{p.f()}var y,I=this.ws.definitions.Resources,C=_createForOfIteratorHelper(Object.keys(I).map((function(e){return+e})));try{for(C.s();!(y=C.n()).done;){var w=y.value,k=Object($v.a)(this.workspace,this.translate,w);k?this._viewsDb[k.apiEndpoint]={name:k.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error("Could not find resource definitionId '".concat(w,"'"))}}catch(x){C.e(x)}finally{C.f()}var M,V=this.ws.definitions.Documents,T=_createForOfIteratorHelper(Object.keys(V).map((function(e){return+e})));try{for(T.s();!(M=T.n()).done;){var E=M.value,U=Object(zv.c)(this.workspace,this.translate,E);U&&(this._viewsDb[U.apiEndpoint]={name:U.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},State:{supportsCriteria:!0,supportsMask:!1}}})}}catch(x){T.e(x)}finally{T.f()}}return this._viewsDb}},{key:"permissionViewChoices",get:function(){if(this._currentViewsDb!==this.viewsDb){var e=this.viewsDb;this._currentViewsDb=e,this._viewsForSelector=Object.keys(e).map((function(t){return{value:t,name:e[t].name}})),this._viewsForSelector.sort((function(e,t){return e.name()<t.name()?-1:e.name()>t.name()?1:0}))}return this._viewsForSelector}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||aI)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},aI.\u0275cmp=r.Jb({type:aI,selectors:[["t-roles-details"]],inputs:{showMembers:"showMembers",showPermissions:"showPermissions",showIsPublic:"showIsPublic"},features:[r.yb],decls:10,vars:27,consts:[["collection","Role",3,"expand","createFunc","cloneFunc","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["class","pt-3 pt-sm-4 w-100",4,"ngIf"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","permissions",4,"ngIf"],["ngbNavItem","members",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isPublic",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isPublic",1,"custom-control-label","t-pointer"],[1,"pt-3","pt-sm-4","w-100"],["ngbNavItem","permissions"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"metadata"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_View",""],["row_View",""],["header_Action",""],["row_Action",""],["header_Criteria",""],["row_Criteria",""],["header_Mask",""],["row_Mask",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"choices","ngModel","required","ngModelChange",4,"ngIf"],[3,"choices","ngModel","required","ngModelChange"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],["ngbNavItem","members"],["header_UserId",""],["row_UserId",""],["link","../../users",3,"itemId",4,"ngIf"],[3,"ngModel","showRoles","required","ngModelChange",4,"ngIf"],["link","../../users",3,"itemId"],[3,"ngModel","showRoles","required","ngModelChange"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,Yv,2,1,"ng-template",null,1,r.Sc),r.Rc(4,rI,20,21,"ng-template",null,2,r.Sc),r.Rc(6,oI,2,3,"ng-template",null,3,r.Sc),r.Rc(8,cI,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("expand",t.expand)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("idString",t.idString)("masterCrumb",r.nc(1,10,"Roles"))("detailsCrumb",n)("documentTemplate",i)("actions",r.xc(24,sI,r.Ac(12,lI,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(18,lI,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,X.v,X.A,we.a,ie.u,ie.k,ie.n,ie.a,Kv.a,X.x,X.y,X.w,ne.b,Tn.a,tl.a,nl.a,En.a,Ca,Ys],pipes:[G.d,x.g],encapsulation:2}),aI),dI=["errorModal"],bI=["unsavedChangesModal"];function fI(e,t){1&e&&(r.Vb(0,"span",14),r.Tc(1,"\xa0*"),r.Ub())}function mI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",15),r.Vb(2,"button",16),r.hc("click",(function(){return r.Ic(n),r.lc().onEdit()})),r.Qb(3,"fa-icon",17),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(1),r.sc("placement",i.placement)("ngbTooltip",i.editTooltip),r.Bb(1),r.sc("disabled",!i.canEdit),r.Bb(2),r.Vc("\xa0\xa0",r.nc(5,4,"Edit")," ")}}function gI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div"),r.Vb(1,"button",18),r.hc("click",(function(){return r.Ic(n),r.lc().onSave()})),r.Qb(2,"fa-icon",19),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",20),r.hc("click",(function(){return r.Ic(n),r.lc().onCancel()})),r.Qb(6,"fa-icon",21),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Ub()}2&e&&(r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,2,"Save")," "),r.Bb(4),r.Vc("\xa0\xa0",r.nc(8,4,"Cancel")," "))}function pI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",22),r.hc("click",(function(){return r.Ic(n),r.lc().onRefresh()})),r.mc(1,"translate"),r.Qb(2,"fa-icon",23),r.Ub()}2&e&&r.tc("title",r.nc(1,1,"Refresh"))}function hI(e,t){1&e&&r.Rb(0)}var vI=function(e,t){return{model:e,isEdit:t}};function yI(e,t){if(1&e&&(r.Vb(0,"div",24),r.Rc(1,hI,1,0,"ng-container",25),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.sc("ngTemplateOutlet",n.template)("ngTemplateOutletContext",r.xc(2,vI,n.activeModel,n.isEdit))}}function II(e,t){1&e&&(r.Vb(0,"div",26),r.Vb(1,"div",27),r.Qb(2,"t-spinner",28),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.sc("scale",2))}function CI(e,t){if(1&e&&(r.Vb(0,"div",26),r.Vb(1,"t-error-message"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.Vc(" ",n.errorMessage," ")}}function wI(e,t){if(1&e&&(r.Vb(0,"div",29),r.Vb(1,"h5",30),r.Qb(2,"fa-icon",31),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",32),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(6,"span",33),r.Tc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",34),r.Tc(9),r.Ub(),r.Vb(10,"div",35),r.Vb(11,"button",36),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(12,"fa-icon",21),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,3,"Error")," "),r.Bb(6),r.Vc(" ",n.modalErrorMessage," "),r.Bb(4),r.Vc(" \xa0",r.nc(14,5,"Dismiss")," ")}}function kI(e,t){1&e&&(r.Vb(0,"div",29),r.Vb(1,"h5",30),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",32),r.hc("click",(function(){return t.$implicit.dismiss(!1)})),r.Vb(5,"span",33),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",34),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Vb(10,"div",35),r.Vb(11,"button",37),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(12,"fa-icon",38),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Vb(15,"button",39),r.hc("click",(function(){return t.$implicit.close(!1)})),r.Qb(16,"fa-icon",21),r.Tc(17),r.mc(18,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Vc(" ",r.nc(3,4,"Confirmation")," "),r.Bb(6),r.Vc(" ",r.nc(9,6,"UnsavedChangesConfirmationMessage")," "),r.Bb(5),r.Vc(" \xa0",r.nc(14,8,"Proceed")," "),r.Bb(4),r.Vc(" \xa0",r.nc(18,10,"Cancel")," "))}var MI,VI,TI=((VI=function(){function e(t,n,i,r,o){var c=this;_classCallCheck(this,e),this.workspace=t,this.api=n,this.storage=i,this.modalService=r,this.translate=o,this.notifyDestruct$=new U.a,this.crud=this.api.settingsFactory("",this.notifyDestruct$),this._unboundServerErrors=[],this.notifyFetch$=new U.a,this.notifyFetch$.pipe(Object(F.a)((function(){return c.doFetch()}))).subscribe()}return _createClass(e,[{key:"doSomething",value:function(e){this.isDirty&&(e.returnValue=this.translate.instant("UnsavedChangesConfirmationMessage"))}},{key:"displayModalError",value:function(e){this._modalErrorMessage=e,this.modalService.open(this.errorModal)}},{key:"ngOnInit",value:function(){this.clearErrors(),this.crud=this.api.settingsFactory(this.endpoint,this.notifyDestruct$),this.fetch()}},{key:"ngOnDestroy",value:function(){this.notifyDestruct$.next()}},{key:"canDeactivate",value:function(){if(this.isDirty){var e=this.modalService.open(this.unsavedChangesModal),t=new U.a;return e.result.then((function(e){t.next(e),t.complete()}),(function(e){t.next(!1),t.complete()})),t}return!0}},{key:"clearErrors",value:function(){this._errorMessage=null,this._modalErrorMessage=null,this._unboundServerErrors=[]}},{key:"fetch",value:function(){this.notifyFetch$.next(null)}},{key:"doFetch",value:function(){var e=this;return this.clearErrors(),this.detailsStatus=S.c.loading,this.crud.get({expand:this.expand}).pipe(Object(P.a)((function(t){e._viewModel=t.Result,Object(W.o)(t.RelatedEntities,e.workspace),e.workspace.notifyStateChanged(),e.detailsStatus=S.c.loaded})),Object(j.a)((function(t){return e.detailsStatus=S.c.error,e._errorMessage=t.error,Object(L.a)(null)})))}},{key:"onRefresh",value:function(){this.detailsStatus!==S.c.loading&&this.fetch()}},{key:"onEdit",value:function(){this.canEdit&&this._viewModel&&(this._viewModelJson=JSON.stringify(this._viewModel),this._editModel=JSON.parse(this._viewModelJson),this.detailsStatus=S.c.edit)}},{key:"onSave",value:function(){var e=this;this.isDirty?(this.clearErrors(),Object(q.c)(this._editModel),this.crud.save(this._editModel,{expand:this.expand,returnEntities:!0}).subscribe((function(t){e._viewModel=t.Result,Object(W.o)(t.RelatedEntities,e.workspace),e.workspace.notifyStateChanged(),t.SettingsForClient&&Object(H.h)(t.SettingsForClient,e.workspace.ws.tenantId,e.workspace.currentTenant,e.storage),e.detailsStatus=S.c.loaded,e._editModel=null}),(function(t){e.workspace.current.unauthorized||(422===t.status?e.apply422ErrorsToModel(t.error):e.displayModalError(t.error))}))):(this.clearErrors(),Object(q.c)(this._editModel),this._editModel=null,this.detailsStatus=S.c.loaded)}},{key:"onCancel",value:function(){var e=this,t=this.canDeactivate();t instanceof ff.a?t.subscribe((function(t){t&&e.doCancel()})):t&&this.doCancel()}},{key:"doCancel",value:function(){this._editModel=null,this.clearErrors(),this.detailsStatus=S.c.loaded}},{key:"apply422ErrorsToModel",value:function(e){var t=this;this._unboundServerErrors=[];var n=Object(q.b)(this._editModel,e);Object.keys(n).forEach((function(e){n[e].forEach((function(e){t._unboundServerErrors.push(e)}))}))}},{key:"isDirty",get:function(){return this.isEdit&&this._viewModelJson!==JSON.stringify(this._editModel)}},{key:"isEdit",get:function(){return this.detailsStatus===S.c.edit}},{key:"placement",get:function(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"modalErrorMessage",get:function(){return this._modalErrorMessage}},{key:"activeModel",get:function(){return this.isEdit?this._editModel:this._viewModel}},{key:"showSpinner",get:function(){return this.detailsStatus===S.c.loading}},{key:"showDocument",get:function(){return this.detailsStatus===S.c.loaded||this.detailsStatus===S.c.edit}},{key:"showRefresh",get:function(){return!this.isEdit}},{key:"showViewToolbar",get:function(){return!this.showEditToolbar}},{key:"showEditToolbar",get:function(){return this.detailsStatus===S.c.edit}},{key:"showErrorMessage",get:function(){return this.detailsStatus===S.c.error}},{key:"canEditPermissions",get:function(){return this.workspace.currentTenant.canUpdate(this.view,null)}},{key:"canEdit",get:function(){return!!this.showDocument&&this.canEditPermissions}},{key:"editTooltip",get:function(){return this.canEditPermissions?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}}]),e}()).\u0275fac=function(e){return new(e||VI)(r.Pb(S.m),r.Pb(Y.a),r.Pb(K.a),r.Pb(X.t),r.Pb(G.e))},VI.\u0275cmp=r.Jb({type:VI,selectors:[["t-settings"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(dI,!0),r.Oc(bI,!0)),2&e&&(r.Ec(n=r.ic())&&(t.errorModal=n.first),r.Ec(n=r.ic())&&(t.unsavedChangesModal=n.first))},hostBindings:function(e,t){1&e&&r.hc("beforeunload",(function(e){return t.doSomething(e)}),!1,r.Hc)},inputs:{title:"title",endpoint:"endpoint",expand:"expand",view:"view",template:"template"},decls:20,vars:8,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-6","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["class","text-danger t-dirty-asterisk px-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[4,"ngIf"],["class","btn btn-light btn-sm t-white-button t-toolbar-button","type","button",3,"title","click",4,"ngIf"],[1,"row","t-rest-of-screen","bg-white"],["class","w-100 h-100 p-0 d-flex flex-column",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],["errorModal",""],["unsavedChangesModal",""],[1,"text-danger","t-dirty-asterisk","px-1"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","pen"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"click"],["icon","save"],[1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button",3,"click"],["icon","times"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","click"],["icon","sync-alt"],[1,"w-100","h-100","p-0","d-flex","flex-column"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-100","mt-3"],[1,"w-100","p-2","d-flex","justify-content-center"],[3,"scale"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],["icon","check"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"ul",3),r.Vb(4,"li",4),r.Tc(5),r.Rc(6,fI,2,0,"span",5),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",6),r.Rc(8,mI,6,6,"div",7),r.Rc(9,gI,9,6,"div",7),r.Vb(10,"div"),r.Rc(11,pI,3,3,"button",8),r.Ub(),r.Ub(),r.Ub(),r.Vb(12,"div",9),r.Rc(13,yI,2,5,"div",10),r.Rc(14,II,3,1,"div",11),r.Rc(15,CI,3,1,"div",11),r.Ub(),r.Ub(),r.Rc(16,wI,15,7,"ng-template",null,12,r.Sc),r.Rc(18,kI,19,12,"ng-template",null,13,r.Sc)),2&e&&(r.Bb(5),r.Vc(" ",t.title," "),r.Bb(1),r.sc("ngIf",t.isDirty),r.Bb(2),r.sc("ngIf",t.showViewToolbar),r.Bb(1),r.sc("ngIf",t.showEditToolbar),r.Bb(2),r.sc("ngIf",t.showRefresh),r.Bb(2),r.sc("ngIf",t.showDocument),r.Bb(1),r.sc("ngIf",t.showSpinner),r.Bb(1),r.sc("ngIf",t.showErrorMessage))},directives:[x.u,X.E,ne.b,x.B,ye.a,ke.a],pipes:[G.d],encapsulation:2}),VI),EI=((MI=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"canDeactivate",value:function(){return!this.settings||this.settings.canDeactivate()}}]),e}()).\u0275fac=function(e){return new(e||MI)},MI.\u0275cmp=r.Jb({type:MI,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&r.Yc(TI,!0),2&e&&r.Ec(n=r.ic())&&(t.settings=n.first)},decls:0,vars:0,template:function(e,t){},encapsulation:2}),MI),UI=n("nM1v");function xI(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.Gb("text-danger",n.invalid),r.sc("title",n.label),r.Bb(1),r.Uc(n.label)}}function RI(e,t){1&e&&r.Qb(0,"fa-icon",9)}function DI(e,t){if(1&e&&(r.Vb(0,"p",12),r.Qb(1,"fa-icon",13),r.Tc(2),r.Ub()),2&e){var n=t.$implicit;r.Bb(2),r.Vc(" \xa0",n()," ")}}function BI(e,t){if(1&e&&(r.Vb(0,"div",10),r.Rc(1,DI,3,1,"p",11),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.sc("ngForOf",n.errors)}}var SI,_I=["*"],OI=((SI=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(UI.a)).\u0275fac=function(e){return LI(e||SI)},SI.\u0275cmp=r.Jb({type:SI,selectors:[["t-form-group-settings"]],inputs:{description:"description"},features:[r.yb],ngContentSelectors:_I,decls:10,vars:14,consts:[["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"row",3,"ngbPopover","placement"],["class","font-weight-bold small col-12 text-truncate",4,"ngIf"],[1,"text-muted","small","col-12","mb-2","text-nowrap",3,"title"],[1,"t-vertical-align-middle"],[1,"col-12","d-flex","form-group-container"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["errorsPopover",""],[1,"font-weight-bold","small","col-12","text-truncate"],[1,"t-vertical-align-middle",3,"title"],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"]],template:function(e,t){if(1&e&&(r.rc(),r.Vb(0,"div",0),r.Rc(1,xI,3,4,"div",1),r.Vb(2,"div",2),r.Vb(3,"span",3),r.Tc(4),r.Ub(),r.Ub(),r.Vb(5,"div",4),r.qc(6),r.Rc(7,RI,1,0,"fa-icon",5),r.Ub(),r.Ub(),r.Rc(8,BI,2,1,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(9);r.Gb("border-left",!t.isRtl)("border-right",t.isRtl),r.sc("ngbPopover",t.invalid?n:null)("placement",t.popoverPlacement),r.Bb(1),r.sc("ngIf",t.showLabel),r.Bb(1),r.sc("title",t.description),r.Bb(2),r.Uc(t.description),r.Bb(1),r.Gb("is-invalid",t.invalid)("col-lg-8",t.showLabel),r.Bb(2),r.sc("ngIf",t.areServerErrors)}},directives:[X.C,x.u,ne.b,x.t],encapsulation:2}),SI),LI=r.Xb(OI);function FI(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.ShortCompanyName)}}var AI=function(){return{updateOn:"blur"}};function PI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",12),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ShortCompanyName=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.ShortCompanyName)("ngModelOptions",r.vc(2,AI))}}function NI(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.ShortCompanyName2)}}function jI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",14),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ShortCompanyName2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.ShortCompanyName2)("ngModelOptions",r.vc(2,AI))}}function WI(e,t){if(1&e&&(r.Vb(0,"t-form-group-settings",5),r.mc(1,"translate"),r.mc(2,"translate"),r.Rc(3,NI,2,1,"div",6),r.Rc(4,jI,1,3,"t-text-editor",13),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,5,"Settings_ShortCompanyName")+c.secondaryPostfix)("description",r.nc(2,7,"Settings_ShortCompanyNameDescription"))("serverErrors",null==i.serverErrors?null:i.serverErrors.ShortCompanyName2),r.Bb(3),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function qI(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.ShortCompanyName3)}}function QI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",14),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ShortCompanyName3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.ShortCompanyName3)("ngModelOptions",r.vc(2,AI))}}function HI(e,t){if(1&e&&(r.Vb(0,"t-form-group-settings",5),r.mc(1,"translate"),r.mc(2,"translate"),r.Rc(3,qI,2,1,"div",6),r.Rc(4,QI,1,3,"t-text-editor",13),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,5,"Settings_ShortCompanyName")+c.ternaryPostfix)("description",r.nc(2,7,"Settings_ShortCompanyNameDescription"))("serverErrors",null==i.serverErrors?null:i.serverErrors.ShortCompanyName3),r.Bb(3),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function $I(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.cultureName(null==n?null:n.PrimaryLanguageId)||"-")}}function GI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",15),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.PrimaryLanguageId=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.PrimaryLanguageId)("choices",o.cultures)}}function zI(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.cultureName(null==n?null:n.SecondaryLanguageId)||"-")}}function JI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",16),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.SecondaryLanguageId=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.SecondaryLanguageId)("choices",o.cultures)}}function KI(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.cultureName(null==n?null:n.TernaryLanguageId)||"-")}}function YI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",16),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TernaryLanguageId=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.TernaryLanguageId)("choices",o.cultures)}}function XI(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc((null==n?null:n.PrimaryLanguageSymbol)||"-")}}function ZI(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",14),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.PrimaryLanguageSymbol=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.PrimaryLanguageSymbol)("ngModelOptions",r.vc(2,AI))}}function eC(e,t){if(1&e&&(r.Vb(0,"t-form-group-settings",5),r.mc(1,"translate"),r.mc(2,"translate"),r.Rc(3,XI,2,1,"div",6),r.Rc(4,ZI,1,3,"t-text-editor",13),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,5,"Settings_PrimaryLanguageSymbol"))("description",r.nc(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==i.serverErrors?null:i.serverErrors.PrimaryLanguageSymbol),r.Bb(3),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function tC(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc((null==n?null:n.SecondaryLanguageSymbol)||"-")}}function nC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",14),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.SecondaryLanguageSymbol=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.SecondaryLanguageSymbol)("ngModelOptions",r.vc(2,AI))}}function iC(e,t){if(1&e&&(r.Vb(0,"t-form-group-settings",5),r.mc(1,"translate"),r.mc(2,"translate"),r.Rc(3,tC,2,1,"div",6),r.Rc(4,nC,1,3,"t-text-editor",13),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,5,"Settings_SecondaryLanguageSymbol"))("description",r.nc(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==i.serverErrors?null:i.serverErrors.SecondaryLanguageSymbol),r.Bb(3),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function rC(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc((null==n?null:n.TernaryLanguageSymbol)||"-")}}function oC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",14),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TernaryLanguageSymbol=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.TernaryLanguageSymbol)("ngModelOptions",r.vc(2,AI))}}function cC(e,t){if(1&e&&(r.Vb(0,"t-form-group-settings",5),r.mc(1,"translate"),r.mc(2,"translate"),r.Rc(3,rC,2,1,"div",6),r.Rc(4,oC,1,3,"t-text-editor",13),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,5,"Settings_TernaryLanguageSymbol"))("description",r.nc(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==i.serverErrors?null:i.serverErrors.TernaryLanguageSymbol),r.Bb(3),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function aC(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.calendarName(null==n?null:n.PrimaryCalendar)||"-")}}function lC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",15),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.PrimaryCalendar=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.PrimaryCalendar)("choices",o.calendars)}}function sC(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.calendarName(null==n?null:n.SecondaryCalendar)||"-")}}function uC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",16),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.SecondaryCalendar=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.SecondaryCalendar)("choices",o.calendars)}}function dC(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.dateFormatDisplay(null==n?null:n.DateFormat)||"-")}}function bC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",16),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.DateFormat=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.DateFormat)("choices",o.dateFormats)}}function fC(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.timeFormatDisplay(null==n?null:n.TimeFormat)||"-")}}function mC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",16),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TimeFormat=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.TimeFormat)("choices",o.timeFormats)}}function gC(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc((null==n?null:n.BrandColor)||"-")}}function pC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",17),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.BrandColor=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.BrandColor)("ngModelOptions",r.vc(2,AI))}}function hC(e,t){if(1&e&&(r.Vb(0,"div",2),r.Vb(1,"h5",3),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"div",4),r.Vb(5,"t-form-group-settings",5),r.mc(6,"translate"),r.mc(7,"translate"),r.Rc(8,FI,2,1,"div",6),r.Rc(9,PI,1,3,"t-text-editor",7),r.Ub(),r.Rc(10,WI,5,9,"t-form-group-settings",8),r.Rc(11,HI,5,9,"t-form-group-settings",8),r.Vb(12,"t-form-group-settings",5),r.mc(13,"translate"),r.mc(14,"translate"),r.Rc(15,$I,2,1,"div",6),r.Rc(16,GI,1,2,"t-selector",9),r.Ub(),r.Vb(17,"t-form-group-settings",5),r.mc(18,"translate"),r.mc(19,"translate"),r.Rc(20,zI,2,1,"div",6),r.Rc(21,JI,1,2,"t-selector",10),r.Ub(),r.Vb(22,"t-form-group-settings",5),r.mc(23,"translate"),r.mc(24,"translate"),r.Rc(25,KI,2,1,"div",6),r.Rc(26,YI,1,2,"t-selector",10),r.Ub(),r.Rc(27,eC,5,9,"t-form-group-settings",8),r.Rc(28,iC,5,9,"t-form-group-settings",8),r.Rc(29,cC,5,9,"t-form-group-settings",8),r.Ub(),r.Vb(30,"h5",3),r.Tc(31),r.mc(32,"translate"),r.Ub(),r.Vb(33,"div",4),r.Vb(34,"t-form-group-settings",5),r.mc(35,"translate"),r.mc(36,"translate"),r.Rc(37,aC,2,1,"div",6),r.Rc(38,lC,1,2,"t-selector",9),r.Ub(),r.Vb(39,"t-form-group-settings",5),r.mc(40,"translate"),r.mc(41,"translate"),r.Rc(42,sC,2,1,"div",6),r.Rc(43,uC,1,2,"t-selector",10),r.Ub(),r.Vb(44,"t-form-group-settings",5),r.mc(45,"translate"),r.mc(46,"translate"),r.Rc(47,dC,2,1,"div",6),r.Rc(48,bC,1,2,"t-selector",10),r.Ub(),r.Vb(49,"t-form-group-settings",5),r.mc(50,"translate"),r.mc(51,"translate"),r.Rc(52,fC,2,1,"div",6),r.Rc(53,mC,1,2,"t-selector",10),r.Ub(),r.Ub(),r.Vb(54,"h5",3),r.Tc(55),r.mc(56,"translate"),r.Ub(),r.Vb(57,"div",4),r.Vb(58,"t-form-group-settings",5),r.mc(59,"translate"),r.mc(60,"translate"),r.Rc(61,gC,2,1,"div",6),r.Rc(62,pC,1,3,"t-text-editor",11),r.Ub(),r.Ub(),r.Ub()),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,53,"GeneralSettings")," "),r.Bb(3),r.sc("label",r.nc(6,55,"Settings_ShortCompanyName")+o.primaryPostfix)("description",r.nc(7,57,"Settings_ShortCompanyNameDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.ShortCompanyName),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",n.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",n.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(13,59,"Settings_PrimaryLanguage"))("description",r.nc(14,61,"Settings_PrimaryLanguageDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.PrimaryLanguageId),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(18,63,"Settings_SecondaryLanguage"))("description",r.nc(19,65,"Settings_SecondaryLanguageDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.SecondaryLanguageId),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(23,67,"Settings_TernaryLanguage"))("description",r.nc(24,69,"Settings_TernaryLanguageDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.TernaryLanguageId),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",n.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",n.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",n.TernaryLanguageId),r.Bb(2),r.Vc(" ",r.nc(32,71,"DatesAndTimes")," "),r.Bb(3),r.sc("label",r.nc(35,73,"Settings_PrimaryCalendar"))("description",r.nc(36,75,"Settings_PrimaryCalendarDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.PrimaryCalendar),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(40,77,"Settings_SecondaryCalendar"))("description",r.nc(41,79,"Settings_SecondaryCalendarDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.SecondaryCalendar),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(45,81,"Settings_DateFormat"))("description",r.nc(46,83,"Settings_DateFormatDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.DateFormat),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(50,85,"Settings_TimeFormat"))("description",r.nc(51,87,"Settings_TimeFormatDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.TimeFormat),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(2),r.Vc(" ",r.nc(56,89,"Branding")," "),r.Bb(3),r.sc("label",r.nc(59,91,"Settings_BrandColor"))("description",r.nc(60,93,"Settings_BrandColorDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.BrandColor),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var vC,yC=((vC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).workspace=e,r.translate=i,r}return _createClass(n,[{key:"cultureName",value:function(e){return el.a[e]}},{key:"calendarName",value:function(e){return e?this.translate.instant("Calendar_"+e):null}},{key:"dateFormatDisplay",value:function(e){var t={day:1,month:2,year:(new Date).getFullYear()};return Object(rr.d)(t,e,this.translate,"GC")}},{key:"timeFormatDisplay",value:function(e){return Object(rr.e)({hour:13,minute:5,second:27},e,this.translate)}},{key:"primaryPostfix",get:function(){return this.workspace.currentTenant.primaryPostfix}},{key:"secondaryPostfix",get:function(){return this.workspace.currentTenant.secondaryPostfix}},{key:"ternaryPostfix",get:function(){return this.workspace.currentTenant.ternaryPostfix}},{key:"cultures",get:function(){return this._cultures||(this._cultures=Object.keys(el.a).map((function(e){return{name:function(){return el.a[e]},value:e}}))),this._cultures}},{key:"calendars",get:function(){var e=this;return this._calendars||(this._calendars=Li.c.map((function(t){return{name:function(){return e.calendarName(t)},value:t}}))),this._calendars}},{key:"dateFormats",get:function(){var e=this;return this._dateFormats||(this._dateFormats=Li.k.map((function(t){return{name:function(){return e.dateFormatDisplay(t)},value:t}}))),this._dateFormats}},{key:"timeFormats",get:function(){var e=this;return this._timeFormats||(this._timeFormats=Li.f.map((function(t){return{name:function(){return e.timeFormatDisplay(t)},value:t}}))),this._timeFormats}}]),n}(EI)).\u0275fac=function(e){return new(e||vC)(r.Pb(S.m),r.Pb(G.e))},vC.\u0275cmp=r.Jb({type:vC,selectors:[["t-general-settings"]],features:[r.yb],decls:4,vars:4,consts:[["endpoint","general-settings","view","general-settings","expand","",3,"title","template"],["template",""],[1,"m-0","pt-3","pt-sm-4","pb-3","pb-sm-5","pl-0","pl-sm-3","pr-0","pr-sm-3"],[1,"col-12","bg-light","t-settings-header"],[1,"row","col-12","t-settings-section"],[1,"t-form-group",3,"label","description","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","description","serverErrors",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["isOptional","true",3,"ngModel","choices","ngModelChange",4,"ngIf"],["placeholder","e.g. #343A40",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","choices","ngModelChange"],["isOptional","true",3,"ngModel","choices","ngModelChange"],["placeholder","e.g. #343A40",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-settings",0),r.mc(1,"translate"),r.Rc(2,hC,63,95,"ng-template",null,1,r.Sc)),2&e){var n=r.Fc(3);r.sc("title",r.nc(1,2,"GeneralSettings"))("template",n)}},directives:[TI,OI,x.u,we.a,ie.u,ie.k,ie.n,En.a],pipes:[G.d],encapsulation:2}),vC),IC=n("TJ1c"),CC=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},wC=function(e,t){return[e,t]},kC=function(e){return{template:e,expression:"CreatedById eq me"}},MC=function(e){return[e]},VC=function(e){return{CreatedBy:e}};function TC(e,t){if(1&e&&r.Qb(0,"t-master",8),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(8),c=r.Fc(6),a=r.Fc(10),l=r.Fc(12),s=r.Fc(14);r.sc("definitionId",n.definitionId)("mode",n.mode)("additionalSelect",n.additionalSelect)("showCreateButton",n.showCreate)("filterDefault",n.filter)("masterCrumb",n.masterCrumb)("tileTemplate",i)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",c)("multiselectActions",r.xc(21,wC,r.zc(11,CC,a,n.onActivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.zc(16,CC,l,n.onDeactivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip)))("filterDefinition",r.wc(28,VC,r.wc(26,MC,r.wc(24,kC,s))))}}function EC(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",9),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function UC(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",16),r.Qb(2,"t-image",17),r.Ub(),r.Tc(3," \xa0\xa0\xa0 "),r.Sb()),2&e){var n=r.lc().id,i=r.lc();r.Bb(2),r.sc("src","resources/"+i.c[n].DefinitionId+"/"+i.c[n].Id+"/image")("imageId",i.c[n].ImageId)("size",42)}}function xC(e,t){if(1&e&&(r.Vb(0,"div",10),r.Rc(1,UC,4,3,"ng-container",11),r.Vb(2,"div",12),r.Vb(3,"div",13),r.Vb(4,"span",14),r.Tc(5),r.Ub(),r.Ub(),r.Vb(6,"div",15),r.Vb(7,"span"),r.Tc(8),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("ngIf",2===(null==i.c[n].EntityMetadata?null:i.c[n].EntityMetadata.ImageId)&&i.Image_isVisible),r.Bb(4),r.Uc(i.ws.getMultilingualValue("Resource",n,"Name")),r.Bb(3),r.Uc(i.c[n].Code)}}function RC(e,t){if(1&e&&r.Tc(0),2&e){var n=r.lc();r.Vc(" ",n.summary,"\n")}}function DC(e,t){if(1&e&&(r.Vb(0,"span",18),r.Qb(1,"t-auto-cell",19),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function BC(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function SC(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function _C(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var OC,LC=((OC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.router=r,a.route=o,a.translate=c,a.resourcesApi=a.api.resourcesApi(null,a.notifyDestruct$),a.expand="",a.onActivate=function(e){return a.resourcesApi.activate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.onDeactivate=function(e){return a.resourcesApi.deactivate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.canActivateDeactivateItem=function(e){return a.ws.canDo(a.view,"IsActive",null)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");e.definitionId!==n&&(e.definitionId=n)}}))}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.resourcesApi=this.api.resourcesApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"view",get:function(){return"resources/".concat(this.definitionId)}},{key:"c",get:function(){return this.ws.Resource}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"definition",get:function(){return this.definitionId?this.ws.definitions.Resources[this.definitionId]:null}},{key:"found",get:function(){return!this.definitionId||!!this.definition}},{key:"masterCrumb",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Resources")}},{key:"summary",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Resource")}},{key:"Image_isVisible",get:function(){return!!this.definition.ImageVisibility}}]),n}(_t.a)).\u0275fac=function(e){return new(e||OC)(r.Pb(S.m),r.Pb(Y.a),r.Pb(i.e),r.Pb(i.a),r.Pb(G.e))},OC.\u0275cmp=r.Jb({type:OC,selectors:[["t-resources-master"]],inputs:{definitionId:"definitionId"},features:[r.yb],decls:15,vars:2,consts:[["collection","Resource","selectDefault","Code,IsActive","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Resource","selectDefault","Code,IsActive","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1","d-inline-block","t-mw-0"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"border","t-dp-wrapper2"],["icon","camera",3,"src","imageId","size"],[1,"text-truncate"],["collection","Resource",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(r.Rc(0,TC,1,30,"t-master",0),r.Rc(1,EC,1,1,"ng-template",null,1,r.Sc),r.Rc(3,xC,9,3,"ng-template",null,2,r.Sc),r.Rc(5,RC,1,1,"ng-template",null,3,r.Sc),r.Rc(7,DC,2,2,"ng-template",null,4,r.Sc),r.Rc(9,BC,2,3,"ng-template",null,5,r.Sc),r.Rc(11,SC,2,3,"ng-template",null,6,r.Sc),r.Rc(13,_C,2,3,"ng-template",null,7,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,Ot.a,dn,he,Ie.a],pipes:[G.d],encapsulation:2}),OC);function FC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-units-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function AC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-units-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("filter",i)("showCreate",o.showCreate)("additionalSelect",o.additionalSelect)}}var PC,NC=((PC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return jC(e||PC)},PC.\u0275cmp=r.Jb({type:PC,selectors:[["t-units-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:PC}]),r.yb],decls:5,vars:6,consts:[["collection","Unit",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,FC,2,3,"ng-template",null,1,r.Sc),r.Rc(3,AC,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,mi,ln],encapsulation:2}),PC),jC=r.Xb(NC),WC=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},qC=function(e,t,n){return{template:e,action:t,showAction:n}},QC=function(e,t,n){return[e,t,n]};function HC(e,t){if(1&e&&r.Qb(0,"t-details",7),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(6),c=r.Fc(8),a=r.Fc(10),l=r.Fc(12);r.sc("definitionId",n.definitionId)("createFunc",n.create)("cloneFunc",n.clone)("expand",n.expand)("mode",n.mode)("additionalSelect",n.additionalSelect)("masterCrumb",n.masterCrumb)("detailsCrumb",i)("idString",n.idString)("documentTemplate",o)("savePreprocessing",n.savePreprocessing)("actions",r.yc(28,QC,r.Ac(12,WC,c,n.onActivate,n.showActivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.Ac(18,WC,a,n.onDeactivate,n.showDeactivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.yc(24,qC,l,n.onEditDefinition,n.showEditDefinition)))}}function $C(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",8),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function GC(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function zC(e,t){if(1&e&&(r.Vb(0,"h2",20),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var JC=function(){return{updateOn:"blur"}};function KC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,JC))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function YC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,JC))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function XC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,JC))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function ZC(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-image",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Image=e})),r.Ub()}if(2&e){var i=r.lc(2),o=i.model,c=i.isEdit,a=r.lc();r.sc("src",o.Id?"resources/"+a.definitionId+"/"+o.Id+"/image":null)("imageId",null==o?null:o.ImageId)("ngModel",o.Image)("isEdit",c)}}function ew(e,t){if(1&e&&(r.Vb(0,"div",23),r.Vb(1,"t-restricted",24),r.Vb(2,"div",25),r.Rc(3,ZC,1,4,"t-image",26),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ImageId),r.Bb(2),r.sc("ngIf",!!n)}}function tw(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function nw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",29),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,JC))}}function iw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,tw,2,1,"div",16),r.Rc(3,nw,1,3,"t-text-editor",28),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function rw(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function ow(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,JC))}}function cw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,rw,2,1,"div",16),r.Rc(3,ow,1,3,"t-text-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function aw(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function lw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,JC))}}function sw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,aw,2,1,"div",16),r.Rc(3,lw,1,3,"t-text-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function uw(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function dw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,JC))}}function bw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",33),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Unit),r.Bb(1),r.sc("itemId",null==n?null:n.UnitId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Unit",null==n?null:n.UnitId,"Name")," ")}}function fw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-units-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.UnitId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.UnitId)("required",o.Unit_isRequired)}}function mw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,bw,3,3,"t-restricted",31),r.Rc(3,fw,1,2,"t-units-picker",32),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Resource_Unit"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.UnitId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function gw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.UnitMass),r.Bb(2),r.Vc(" ",r.oc(3,2,null==n?null:n.UnitMass,"1.0-4")," ")}}function pw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.UnitMass=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.UnitMass)("ngModelOptions",r.vc(5,JC))("required",o.UnitMass_isRequired)("minDecimalPlaces",4)("maxDecimalPlaces",4)}}function hw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,gw,4,5,"t-restricted",31),r.Rc(3,pw,1,6,"t-decimal-editor",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Resource_UnitMass"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.UnitMass),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function vw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",33),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.UnitMassUnit),r.Bb(1),r.sc("itemId",null==n?null:n.UnitMassUnitId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Unit",null==n?null:n.UnitMassUnitId,"Name")," ")}}function yw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-units-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.UnitMassUnitId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.UnitMassUnitId)("required",o.UnitMass_isRequired)}}function Iw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,vw,3,3,"t-restricted",31),r.Rc(3,yw,1,2,"t-units-picker",32),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Resource_UnitMassUnit"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.UnitMassUnitId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Cw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.MonetaryValue),r.Bb(2),r.Vc(" ",r.oc(3,2,null==n?null:n.MonetaryValue,"1."+i.MonetaryValue_decimals(n)+"-"+i.MonetaryValue_decimals(n))," ")}}function ww(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.MonetaryValue=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.MonetaryValue)("ngModelOptions",r.vc(5,JC))("required",o.MonetaryValue_isRequired)("minDecimalPlaces",o.MonetaryValue_decimals(i))("maxDecimalPlaces",o.MonetaryValue_decimals(i))}}function kw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Cw,4,5,"t-restricted",31),r.Rc(2,ww,1,6,"t-decimal-editor",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.MonetaryValue_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.MonetaryValue),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Mw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",38),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Participant),r.Bb(1),r.sc("link","../../../relations/"+i.Participant_definitionIds[0])("itemId",null==n?null:n.ParticipantId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Relation",n.ParticipantId,"Name")," ")}}function Vw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",39),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ParticipantId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ParticipantId)("definitionIds",o.Participant_definitionIds)("required",o.Participant_isRequired)}}function Tw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Mw,3,4,"t-restricted",31),r.Rc(2,Vw,1,3,"t-relations-picker",37),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Participant_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ParticipantId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Ew(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",40),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Currency),r.Bb(1),r.sc("itemId",null==n?null:n.CurrencyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Currency",n.CurrencyId,"Name")," ")}}function Uw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CurrencyId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CurrencyId)("required",o.Currency_isRequired)}}function xw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Ew,3,3,"t-restricted",31),r.Rc(2,Uw,1,2,"t-currencies-picker",32),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Currency_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CurrencyId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Rw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",41),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Center),r.Bb(1),r.sc("itemId",null==n?null:n.CenterId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Center",n.CenterId,"Name")," ")}}function Dw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CenterId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CenterId)("required",o.Center_isRequired)}}function Bw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Rw,3,3,"t-restricted",31),r.Rc(2,Dw,1,2,"t-centers-picker",32),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Center_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CenterId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Sw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",41),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.CostCenter),r.Bb(1),r.sc("itemId",null==n?null:n.CostCenterId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Center",n.CostCenterId,"Name")," ")}}function _w(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CostCenterId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CostCenterId)("required",o.CostCenter_isRequired)}}function Ow(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Sw,3,3,"t-restricted",31),r.Rc(2,_w,1,2,"t-centers-picker",32),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.CostCenter_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CostCenterId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Lw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",38),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lookup1),r.Bb(1),r.sc("link","../../../lookups/"+i.Lookup1_DefinitionId)("itemId",null==n?null:n.Lookup1Id),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Lookup",n.Lookup1Id,"Name")," ")}}function Fw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup1Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup1Id)("definitionId",o.Lookup1_DefinitionId)("required",o.Lookup1_isRequired)}}function Aw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Lw,3,4,"t-restricted",31),r.Rc(2,Fw,1,3,"t-lookups-picker",42),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup1Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Pw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",38),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lookup2),r.Bb(1),r.sc("link","../../../lookups/"+i.Lookup2_DefinitionId)("itemId",null==n?null:n.Lookup2Id),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Lookup",n.Lookup2Id,"Name")," ")}}function Nw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup2Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup2Id)("definitionId",o.Lookup2_DefinitionId)("required",o.Lookup2_isRequired)}}function jw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Pw,3,4,"t-restricted",31),r.Rc(2,Nw,1,3,"t-lookups-picker",42),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup2Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Ww(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",38),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lookup3),r.Bb(1),r.sc("link","../../../lookups/"+i.Lookup3_DefinitionId)("itemId",null==n?null:n.Lookup3Id),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Lookup",n.Lookup3Id,"Name")," ")}}function qw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup3Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup3Id)("definitionId",o.Lookup3_DefinitionId)("required",o.Lookup3_isRequired)}}function Qw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Ww,3,4,"t-restricted",31),r.Rc(2,qw,1,3,"t-lookups-picker",42),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup3_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup3Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Hw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",38),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lookup4),r.Bb(1),r.sc("link","../../../lookups/"+i.Lookup4_DefinitionId)("itemId",null==n?null:n.Lookup4Id),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Lookup",n.Lookup4Id,"Name")," ")}}function $w(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup4Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup4Id)("definitionId",o.Lookup4_DefinitionId)("required",o.Lookup4_isRequired)}}function Gw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Hw,3,4,"t-restricted",31),r.Rc(2,$w,1,3,"t-lookups-picker",42),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup4_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup4Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function zw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Decimal1),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Decimal1,"1.0-4"))}}function Jw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Decimal1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Decimal1)("ngModelOptions",r.vc(5,JC))("required",o.Decimal1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Kw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,zw,4,5,"t-restricted",31),r.Rc(2,Jw,1,6,"t-decimal-editor",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Decimal1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Decimal1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Yw(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Decimal2),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Decimal2,"1.0-4"))}}function Xw(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Decimal2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Decimal2)("ngModelOptions",r.vc(5,JC))("required",o.Decimal2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Zw(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,Yw,4,5,"t-restricted",31),r.Rc(2,Xw,1,6,"t-decimal-editor",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Decimal2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Decimal2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ek(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Int1),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Int1,"1.0-0"))}}function tk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Int1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Int1)("ngModelOptions",r.vc(5,JC))("required",o.Int1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function nk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,ek,4,5,"t-restricted",31),r.Rc(2,tk,1,6,"t-decimal-editor",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Int1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Int1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ik(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Int2),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Int2,"1.0-0"))}}function rk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Int2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Int2)("ngModelOptions",r.vc(5,JC))("required",o.Int2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function ok(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,ik,4,5,"t-restricted",31),r.Rc(2,rk,1,6,"t-decimal-editor",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Int2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Int2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ck(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Text1),r.Bb(2),r.Uc(null==n?null:n.Text1)}}function ak(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Text1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Text1)("ngModelOptions",r.vc(3,JC))("required",o.Text1_isRequired)}}function lk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,ck,3,2,"t-restricted",31),r.Rc(2,ak,1,4,"t-text-editor",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Text1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Text1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function sk(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Text2),r.Bb(2),r.Uc(null==n?null:n.Text2)}}function uk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Text2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Text2)("ngModelOptions",r.vc(3,JC))("required",o.Text2_isRequired)}}function dk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,sk,3,2,"t-restricted",31),r.Rc(2,uk,1,4,"t-text-editor",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Text2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Text2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function bk(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.FromDate),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.FromDate))}}function fk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.FromDate=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.FromDate)("ngModelOptions",r.vc(3,JC))("required",o.FromDate_isRequired)}}function mk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,bk,4,4,"t-restricted",31),r.Rc(2,fk,1,4,"t-date-picker",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.FromDate_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.FromDate),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function gk(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ToDate),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.ToDate))}}function pk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ToDate=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ToDate)("ngModelOptions",r.vc(3,JC))("required",o.ToDate_isRequired)}}function hk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,gk,4,4,"t-restricted",31),r.Rc(2,pk,1,4,"t-date-picker",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.ToDate_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ToDate),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function vk(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Identifier),r.Bb(2),r.Uc(null==n?null:n.Identifier)}}function yk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Identifier=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Identifier)("ngModelOptions",r.vc(3,JC))("required",o.Identifier_isRequired)}}function Ik(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,vk,3,2,"t-restricted",31),r.Rc(2,yk,1,4,"t-text-editor",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Identifier_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Identifier),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Ck(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"percent"),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(r.oc(2,1,null==n?null:n.VatRate,"1.2-4"))}}function wk(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,Ck,3,4,"div",16),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.VatRate),r.Bb(1),r.sc("ngIf",!o)}}function kk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",47),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.VatRate=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.VatRate)("ngModelOptions",r.vc(6,JC))("required",o.VatRate_isRequired)("minDecimalPlaces",2)("maxDecimalPlaces",4)("isPercentage",!0)}}function Mk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,wk,2,2,"t-restricted",31),r.Rc(3,kk,1,7,"t-decimal-editor",46),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Resource_VatRate"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.VatRate),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Vk(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"accounting"),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(r.oc(2,1,null==n?null:n.ReorderLevel,"1.0-4"))}}function Tk(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,Vk,3,4,"div",16),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.ReorderLevel),r.Bb(1),r.sc("ngIf",!o)}}function Ek(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ReorderLevel=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ReorderLevel)("ngModelOptions",r.vc(5,JC))("required",o.ReorderLevel_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Uk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Tk,2,2,"t-restricted",31),r.Rc(3,Ek,1,6,"t-decimal-editor",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Resource_ReorderLevel"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ReorderLevel),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function xk(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"accounting"),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(r.oc(2,1,null==n?null:n.EconomicOrderQuantity,"1.0-4"))}}function Rk(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,xk,3,4,"div",16),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.EconomicOrderQuantity),r.Bb(1),r.sc("ngIf",!o)}}function Dk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.EconomicOrderQuantity=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.EconomicOrderQuantity)("ngModelOptions",r.vc(5,JC))("required",o.EconomicOrderQuantity_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Bk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Rk,2,2,"t-restricted",31),r.Rc(3,Dk,1,6,"t-decimal-editor",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Resource_EconomicOrderQuantity"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.EconomicOrderQuantity),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Sk(e,t){if(1&e&&(r.Vb(0,"div",49),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description)}}function _k(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,Sk,2,1,"div",48),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description),r.Bb(1),r.sc("ngIf",!o)}}function Ok(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Description)("ngModelOptions",r.vc(3,JC))("required",o.Description_isRequired)}}function Lk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,_k,2,2,"t-restricted",31),r.Rc(3,Ok,1,4,"t-multiline-editor",44),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Fk(e,t){if(1&e&&(r.Vb(0,"div",49),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description2)}}function Ak(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,Fk,2,1,"div",48),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description2),r.Bb(1),r.sc("ngIf",!o)}}function Pk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description2)("ngModelOptions",r.vc(2,JC))}}function Nk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Ak,2,2,"t-restricted",31),r.Rc(3,Pk,1,3,"t-multiline-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function jk(e,t){if(1&e&&(r.Vb(0,"div",49),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description3)}}function Wk(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,jk,2,1,"div",48),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description3),r.Bb(1),r.sc("ngIf",!o)}}function qk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description3)("ngModelOptions",r.vc(2,JC))}}function Qk(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,Wk,2,2,"t-restricted",31),r.Rc(3,qk,1,3,"t-multiline-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Hk(e,t){if(1&e&&(r.Vb(0,"t-form-group",50),r.mc(1,"translate"),r.Tc(2),r.mc(3,"translate"),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(2),r.Vc(" ",r.nc(3,4,null!=n&&n.IsActive?"Yes":"No")," ")}}function $k(e,t){1&e&&(r.Vb(0,"span",61),r.Qb(1,"fa-icon",62),r.Tc(2,"\xa0 "),r.Ub())}function Gk(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"ResourceUnit_Unit"))}function zk(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().item,i=r.lc(5);r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Unit",n.UnitId,"Name")," ")}}function Jk(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-units-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.UnitId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item;r.sc("ngModel",i.UnitId)("required",!i.PH)}}function Kk(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",66),r.Rc(1,zk,2,1,"div",16),r.Rc(2,Jk,1,2,"t-units-picker",32),r.Ub()),2&e){var n=t.item,i=r.lc(4).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.UnitId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var Yk=function(){return["Unit"]},Xk=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Zk=function(e){return{Unit:e}};function eM(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Qb(1,"t-table",63),r.Ub(),r.Rc(2,Gk,2,3,"ng-template",null,64,r.Sc),r.Rc(4,Kk,3,3,"ng-template",null,65,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.lc(3),c=o.model,a=o.isEdit;r.Gb("p-4",1===(null==c||null==c.EntityMetadata?null:c.EntityMetadata.Units)),r.sc("metadata",null==c||null==c.EntityMetadata?null:c.EntityMetadata.Units),r.Bb(1),r.sc("dataSource",null==c?null:c.Units)("isEdit",a)("columnPaths",r.vc(7,Yk))("columnTemplates",r.wc(11,Zk,r.xc(8,Xk,n,i)))}}function tM(e,t){if(1&e&&(r.Vb(0,"li",56),r.Vb(1,"a",57),r.Rc(2,$k,3,0,"span",58),r.Vb(3,"span",59),r.Tc(4),r.mc(5,"translate"),r.mc(6,"number"),r.Ub(),r.Ub(),r.Rc(7,eM,6,13,"ng-template",60),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(2),r.sc("ngIf",i.Units_showError(n)),r.Bb(2),r.Uc(r.nc(5,2,"Resource_Units")+(n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Units)?"":" ("+r.nc(6,4,i.Units_count(n))+")"))}}function nM(e,t){1&e&&(r.Vb(0,"span",61),r.Qb(1,"fa-icon",62),r.Tc(2,"\xa0 "),r.Ub())}function iM(e,t){if(1&e&&r.Qb(0,"agm-data-layer",82),2&e){var n=r.lc(4).model,i=r.lc();r.Pc(i.styleFunc),r.sc("geoJson",i.parseJson(null==n?null:n.LocationJson))}}function rM(e,t){if(1&e&&(r.Vb(0,"t-error-message",83),r.Tc(1),r.Ub()),2&e){var n=r.lc(5);r.Bb(1),r.Vc(" ",n.parseJsonError," ")}}function oM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-restricted",24),r.Vb(1,"div",68),r.Vb(2,"div",69),r.Vb(3,"textarea",70),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.LocationJson=e})),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"agm-map",71),r.hc("centerChange",(function(e){return r.Ic(n),r.lc(4).onCenterChange(e)})),r.Qb(6,"t-map-bounds-fitter",72),r.Qb(7,"t-map-bounds-fitter",73),r.Rc(8,iM,1,3,"agm-data-layer",74),r.Ub(),r.Ub(),r.Vb(9,"div",75),r.Vb(10,"label",76),r.hc("click",(function(){return r.Ic(n),r.lc(4).onView("map")})),r.mc(11,"translate"),r.Qb(12,"input",77),r.Qb(13,"fa-icon",78),r.Vb(14,"span",79),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Ub(),r.Vb(17,"label",76),r.hc("click",(function(){return r.Ic(n),r.lc(4).onView("json")})),r.mc(18,"translate"),r.Qb(19,"input",77),r.Qb(20,"fa-icon",80),r.Vb(21,"span",79),r.Tc(22),r.mc(23,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Rc(24,rM,2,1,"t-error-message",81),r.Ub()}if(2&e){var i=r.lc(3),o=i.model,c=i.isEdit,a=r.lc();r.Gb("p-4",1===(null==o||null==o.EntityMetadata?null:o.EntityMetadata.LocationJson)),r.sc("metadata",null==o||null==o.EntityMetadata?null:o.EntityMetadata.LocationJson),r.Bb(2),r.Gb("d-none",!a.isView("json"))("t-hidden-cursor",!c),r.Bb(1),r.sc("readonly",!c)("placeholder",r.nc(4,34,"GeoJSON")+"...")("ngModel",o.LocationJson),r.Bb(2),r.Gb("d-none",!a.isView("map")),r.sc("latitude",a.latitude)("longitude",a.longitude)("zoom",6)("mapTypeControl",!0)("panControl",!0)("streetViewControl",!1)("fitBounds",!(null==o||!o.Id))("fitBoundsPadding",100),r.Bb(1),r.sc("agmFitBounds",!0)("geoJson",a.parseJson(null==o?null:o.LocationJson)),r.Bb(1),r.sc("agmFitBounds",!0)("geoJson",a.parseJson(null==o?null:o.LocationJson)),r.Bb(1),r.sc("ngIf",!!a.parseJson(null==o?null:o.LocationJson)),r.Bb(2),r.Gb("active",a.isView("map")),r.tc("title",r.nc(11,36,"Map")),r.Bb(5),r.Vc("\xa0\xa0",r.nc(16,38,"Map"),""),r.Bb(2),r.Gb("active",a.isView("json")),r.tc("title",r.nc(18,40,"GeoJSON")),r.Bb(5),r.Vc("\xa0\xa0",r.nc(23,42,"GeoJSON"),""),r.Bb(2),r.sc("ngIf",!!a.parseJsonError)}}function cM(e,t){if(1&e&&(r.Vb(0,"li",67),r.Vb(1,"a",57),r.Rc(2,nM,3,0,"span",58),r.Vb(3,"span",59),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Rc(6,oM,25,44,"ng-template",60),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(2),r.sc("ngIf",i.Map_showError(n)),r.Bb(2),r.Uc(r.nc(5,2,"Entity_Location"))}}var aM=function(e,t){return{id:e,cache_buster:t}};function lM(e,t){if(1&e&&(r.Vb(0,"div",88),r.Qb(1,"t-report-results",89),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3).model,o=r.lc();r.Bb(1),r.sc("definition",o.reportDefinition(n))("arguments",r.xc(4,aM,null==i?null:i.Id,null==i||null==i.EntityMetadata?null:i.EntityMetadata.$refresh))("view",o.reportView(n))("state",o.state(n))}}function sM(e,t){if(1&e&&(r.Vb(0,"li",86),r.Vb(1,"a",87),r.Vb(2,"span",59),r.Tc(3),r.Ub(),r.Ub(),r.Rc(4,lM,2,7,"ng-template",60),r.Ub()),2&e){var n=t.$implicit;r.lc();var i=r.Fc(3),o=r.lc(3);r.sc("ngbNavItem",n.ReportDefinitionId),r.Bb(1),r.sc("tContextMenu",i)("tContext",n.ReportDefinitionId),r.Bb(2),r.Uc(o.reportTitle(n))}}function uM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",90),r.Vb(1,"ul",91),r.Vb(2,"li",92),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.close,o=r.lc(3).model;return r.lc().onExpandReport(e,o),i()})),r.Vb(3,"div",93),r.Qb(4,"fa-icon",94),r.Ub(),r.Vb(5,"div",95),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Bb(6),r.Vc(" ",r.nc(7,1,"Expand")," "))}function dM(e,t){if(1&e&&(r.Tb(0),r.Rc(1,sM,5,4,"li",84),r.Rc(2,uM,8,3,"ng-template",null,85,r.Sc),r.Sb()),2&e){var n=r.lc(3);r.Bb(1),r.sc("ngForOf",n.reports)}}function bM(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"ul",51,52),r.hc("activeIdChange",(function(e){return r.Ic(n),r.lc(2).activeTab=e})),r.Rc(3,tM,8,6,"li",53),r.Rc(4,cM,7,4,"li",54),r.Rc(5,dM,4,1,"ng-container",16),r.Ub(),r.Qb(6,"div",55),r.Sb()}if(2&e){var i=r.Fc(2),o=r.lc(),c=o.isEdit,a=o.model,l=r.lc();r.Bb(1),r.sc("destroyOnHide",!0)("activeId",l.activeTab),r.Bb(2),r.sc("ngIf",l.Units_isVisible),r.Bb(1),r.sc("ngIf",l.Location_isVisible),r.Bb(1),r.sc("ngIf",l.showReports(c,a)),r.Bb(1),r.sc("ngbNavOutlet",i)}}function fM(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.Rc(1,zC,2,1,"h2",10),r.Rc(2,KC,2,7,"t-text-editor",11),r.Rc(3,YC,2,7,"t-text-editor",12),r.Rc(4,XC,2,7,"t-text-editor",12),r.Ub(),r.Rc(5,ew,4,2,"div",13),r.Rc(6,iw,4,6,"t-form-group",14),r.Rc(7,cw,4,6,"t-form-group",14),r.Rc(8,sw,4,6,"t-form-group",14),r.Vb(9,"t-form-group",15),r.mc(10,"translate"),r.Rc(11,uw,2,1,"div",16),r.Rc(12,dw,1,3,"t-text-editor",17),r.Ub(),r.Rc(13,mw,4,6,"t-form-group",14),r.Rc(14,hw,4,6,"t-form-group",14),r.Rc(15,Iw,4,6,"t-form-group",14),r.Rc(16,kw,3,4,"t-form-group",14),r.Rc(17,Tw,3,4,"t-form-group",14),r.Rc(18,xw,3,4,"t-form-group",14),r.Rc(19,Bw,3,4,"t-form-group",14),r.Rc(20,Ow,3,4,"t-form-group",14),r.Rc(21,Aw,3,4,"t-form-group",14),r.Rc(22,jw,3,4,"t-form-group",14),r.Rc(23,Qw,3,4,"t-form-group",14),r.Rc(24,Gw,3,4,"t-form-group",14),r.Rc(25,Kw,3,4,"t-form-group",14),r.Rc(26,Zw,3,4,"t-form-group",14),r.Rc(27,nk,3,4,"t-form-group",14),r.Rc(28,ok,3,4,"t-form-group",14),r.Rc(29,lk,3,4,"t-form-group",14),r.Rc(30,dk,3,4,"t-form-group",14),r.Rc(31,mk,3,4,"t-form-group",14),r.Rc(32,hk,3,4,"t-form-group",14),r.Rc(33,Ik,3,4,"t-form-group",14),r.Rc(34,Mk,4,6,"t-form-group",14),r.Rc(35,Uk,4,6,"t-form-group",14),r.Rc(36,Bk,4,6,"t-form-group",14),r.Qb(37,"div",18),r.Rc(38,Lk,4,6,"t-form-group",14),r.Rc(39,Nk,4,6,"t-form-group",14),r.Rc(40,Qk,4,6,"t-form-group",14),r.Rc(41,Hk,4,6,"t-form-group",19),r.Rc(42,bM,7,6,"ng-container",16)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",o.Image_isVisible),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(10,42,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",o.Unit_isVisible),r.Bb(1),r.sc("ngIf",o.UnitMass_isVisible),r.Bb(1),r.sc("ngIf",o.UnitMass_isVisible),r.Bb(1),r.sc("ngIf",o.MonetaryValue_isVisible),r.Bb(1),r.sc("ngIf",o.Participant_isVisible),r.Bb(1),r.sc("ngIf",o.Currency_isVisible),r.Bb(1),r.sc("ngIf",o.Center_isVisible),r.Bb(1),r.sc("ngIf",o.CostCenter_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup1_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup2_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup3_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup4_isVisible),r.Bb(1),r.sc("ngIf",o.Decimal1_isVisible),r.Bb(1),r.sc("ngIf",o.Decimal2_isVisible),r.Bb(1),r.sc("ngIf",o.Int1_isVisible),r.Bb(1),r.sc("ngIf",o.Int2_isVisible),r.Bb(1),r.sc("ngIf",o.Text1_isVisible),r.Bb(1),r.sc("ngIf",o.Text2_isVisible),r.Bb(1),r.sc("ngIf",o.FromDate_isVisible),r.Bb(1),r.sc("ngIf",o.ToDate_isVisible),r.Bb(1),r.sc("ngIf",o.Identifier_isVisible),r.Bb(1),r.sc("ngIf",o.VatRate_isVisible),r.Bb(1),r.sc("ngIf",o.ReorderLevel_isVisible),r.Bb(1),r.sc("ngIf",o.EconomicOrderQuantity_isVisible),r.Bb(2),r.sc("ngIf",o.Description_isVisible),r.Bb(1),r.sc("ngIf",o.Description_isVisible&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",o.Description_isVisible&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",o.showTabs(i,n))}}function mM(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function gM(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function pM(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"EditDefinition")," ")}var hM,vM=((hM=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.translate=r,a.router=o,a.route=c,a.resourcesApi=a.api.resourcesApi(null,a.notifyDestruct$),a.expand="Currency,Center,CostCenter,Lookup1,Lookup2,Lookup3,Lookup4,Participant,Unit,UnitMassUnit,Units.Unit",a.create=function(){var e={};a.ws.isPrimaryLanguage?e.Name=a.initialText:a.ws.isSecondaryLanguage?e.Name2=a.initialText:a.ws.isTernaryLanguage&&(e.Name3=a.initialText);var t=a.definition;return e.VatRate=t.DefaultVatRate,e.UnitId=t.DefaultUnitId,e.UnitMassUnitId=t.DefaultUnitMassUnitId,e.Units=[],e},a.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Units&&t.Units.forEach((function(e){e.Id=null,delete e.ResourceId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById})),t}return console.error("Cloning a non existing item"),null},a.onActivate=function(e){e&&e.Id&&a.resourcesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onDeactivate=function(e){e&&e.Id&&a.resourcesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onEditDefinition=function(e){var t=a.workspace;t.isEdit=!0,a.router.navigate(["../../../resource-definitions",a.definitionId],{relativeTo:a.route}).then((function(e){e||delete t.isEdit})).catch((function(){return delete t.isEdit}))},a.showActivate=function(e){return!!e&&!e.IsActive},a.showDeactivate=function(e){return!!e&&e.IsActive},a.showEditDefinition=function(e){return a.ws.canDo("resource-definitions","Update",null)},a.canActivateDeactivateItem=function(e){return a.ws.canDo(a.view,"IsActive",e.Id)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.styleFunc=function(e){for(var t={clickable:!1},n=0,i=["fillColor","fillOpacity","icon","strokeColor","shape","strokeOpacity","strokeWeight","visible"];n<i.length;n++){var r=i[n],o=e.getProperty(r);null!=o&&(t[r]=o)}return t},a.locationView="map",a.savePreprocessing=function(e){},a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");e.definitionId!==n&&(e.definitionId=n)}}))}},{key:"showTabs",value:function(e,t){return this.Units_isVisible||this.Location_isVisible||this.reports.length>0&&this.showReports(e,t)}},{key:"Units_count",value:function(e){return e&&e.Units?e.Units.length:0}},{key:"Units_showError",value:function(e){return!!e&&!!e.Units&&e.Units.some((function(e){return!!e.serverErrors}))}},{key:"currencyPostfix",value:function(e){return e&&e.CurrencyId?" (".concat(this.ws.getMultilingualValue("Currency",e.CurrencyId,"Name"),")"):" (".concat(this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName"),")")}},{key:"MonetaryValue_decimals",value:function(e){var t=this.ws.get("Currency",e.CurrencyId);return t?t.E:this.ws.settings.FunctionalCurrencyDecimals}},{key:"Map_showError",value:function(e){return!!e&&!!e.serverErrors&&!!e.serverErrors.LocationJson}},{key:"onCenterChange",value:function(e){localStorage.map_latitude=e.lat,localStorage.map_longitude=e.lng}},{key:"parseJson",value:function(e){if(this.parseJsonString!==(e=e||void 0))if(this.parseJsonString=e,e)try{this.parseJsonResult=JSON.parse(e),delete this.parseJsonError}catch(t){this.parseJsonError=t,delete this.parseJsonResult}else delete this.parseJsonResult,delete this.parseJsonError;return this.parseJsonResult}},{key:"onView",value:function(e){this.locationView=e}},{key:"isView",value:function(e){return this.locationView===e}},{key:"showReports",value:function(e,t){return!!t&&!!t.Id}},{key:"reportDefinition",value:function(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}},{key:"reportTitle",value:function(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}},{key:"state",value:function(e){var t="resources_details_".concat(this.definitionId,"_").concat(e.ReportDefinitionId),n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new S.j),n[t]}},{key:"reportView",value:function(e){var t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ma.chart:ma.pivot}},{key:"onExpandReport",value:function(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.resourcesApi=this.api.resourcesApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"view",get:function(){return"resources/".concat(this.definitionId)}},{key:"definition",get:function(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Resources[this.definitionId]:null)}},{key:"found",get:function(){return!!this.definition}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"masterCrumb",get:function(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}},{key:"Currency_isVisible",get:function(){return!!this.definition.CurrencyVisibility}},{key:"Currency_isRequired",get:function(){return"Required"===this.definition.CurrencyVisibility}},{key:"Currency_label",get:function(){return this.translate.instant("Entity_Currency")}},{key:"Center_isVisible",get:function(){return!!this.definition.CenterVisibility}},{key:"Center_isRequired",get:function(){return"Required"===this.definition.CenterVisibility}},{key:"Center_label",get:function(){return this.translate.instant("Entity_Center")}},{key:"CostCenter_isVisible",get:function(){return!!this.definition.CostCenterVisibility}},{key:"CostCenter_isRequired",get:function(){return"Required"===this.definition.CostCenterVisibility}},{key:"CostCenter_label",get:function(){return this.translate.instant("Resource_CostCenter")}},{key:"Image_isVisible",get:function(){return!!this.definition.ImageVisibility}},{key:"Description_isVisible",get:function(){return!!this.definition.DescriptionVisibility}},{key:"Description_isRequired",get:function(){return"Required"===this.definition.DescriptionVisibility}},{key:"FromDate_isVisible",get:function(){return!!this.definition.FromDateVisibility}},{key:"FromDate_isRequired",get:function(){return"Required"===this.definition.FromDateVisibility}},{key:"FromDate_label",get:function(){return this.definition.FromDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"FromDateLabel"):this.translate.instant("Entity_FromDate")}},{key:"ToDate_isVisible",get:function(){return!!this.definition.ToDateVisibility}},{key:"ToDate_isRequired",get:function(){return"Required"===this.definition.ToDateVisibility}},{key:"ToDate_label",get:function(){return this.definition.ToDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"ToDateLabel"):this.translate.instant("Entity_ToDate")}},{key:"Decimal1_isVisible",get:function(){return!!this.definition.Decimal1Visibility}},{key:"Decimal1_isRequired",get:function(){return"Required"===this.definition.Decimal1Visibility}},{key:"Decimal1_label",get:function(){return this.definition.Decimal1Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal1Label"):this.translate.instant("Entity_Decimal1")}},{key:"Decimal2_isVisible",get:function(){return!!this.definition.Decimal2Visibility}},{key:"Decimal2_isRequired",get:function(){return"Required"===this.definition.Decimal2Visibility}},{key:"Decimal2_label",get:function(){return this.definition.Decimal2Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal2Label"):this.translate.instant("Entity_Decimal2")}},{key:"Int1_isVisible",get:function(){return!!this.definition.Int1Visibility}},{key:"Int1_isRequired",get:function(){return"Required"===this.definition.Int1Visibility}},{key:"Int1_label",get:function(){return this.definition.Int1Label?this.ws.getMultilingualValueImmediate(this.definition,"Int1Label"):this.translate.instant("Entity_Int1")}},{key:"Int2_isVisible",get:function(){return!!this.definition.Int2Visibility}},{key:"Int2_isRequired",get:function(){return"Required"===this.definition.Int2Visibility}},{key:"Int2_label",get:function(){return this.definition.Int2Label?this.ws.getMultilingualValueImmediate(this.definition,"Int2Label"):this.translate.instant("Entity_Int2")}},{key:"Lookup1_isVisible",get:function(){return!!this.definition.Lookup1Visibility}},{key:"Lookup1_isRequired",get:function(){return"Required"===this.definition.Lookup1Visibility}},{key:"Lookup1_label",get:function(){return this.definition.Lookup1Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup1Label"):this.translate.instant("Entity_Lookup1")}},{key:"Lookup1_DefinitionId",get:function(){return this.definition.Lookup1DefinitionId}},{key:"Lookup2_isVisible",get:function(){return!!this.definition.Lookup2Visibility}},{key:"Lookup2_isRequired",get:function(){return"Required"===this.definition.Lookup2Visibility}},{key:"Lookup2_label",get:function(){return this.definition.Lookup2Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup2Label"):this.translate.instant("Entity_Lookup2")}},{key:"Lookup2_DefinitionId",get:function(){return this.definition.Lookup2DefinitionId}},{key:"Lookup3_isVisible",get:function(){return!!this.definition.Lookup3Visibility}},{key:"Lookup3_isRequired",get:function(){return"Required"===this.definition.Lookup3Visibility}},{key:"Lookup3_label",get:function(){return this.definition.Lookup3Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup3Label"):this.translate.instant("Entity_Lookup3")}},{key:"Lookup3_DefinitionId",get:function(){return this.definition.Lookup3DefinitionId}},{key:"Lookup4_isVisible",get:function(){return!!this.definition.Lookup4Visibility}},{key:"Lookup4_isRequired",get:function(){return"Required"===this.definition.Lookup4Visibility}},{key:"Lookup4_label",get:function(){return this.definition.Lookup4Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup4Label"):this.translate.instant("Entity_Lookup4")}},{key:"Lookup4_DefinitionId",get:function(){return this.definition.Lookup4DefinitionId}},{key:"Text1_isVisible",get:function(){return!!this.definition.Text1Visibility}},{key:"Text1_isRequired",get:function(){return"Required"===this.definition.Text1Visibility}},{key:"Text1_label",get:function(){return this.definition.Text1Label?this.ws.getMultilingualValueImmediate(this.definition,"Text1Label"):this.translate.instant("Entity_Text1")}},{key:"Text2_isVisible",get:function(){return!!this.definition.Text2Visibility}},{key:"Text2_isRequired",get:function(){return"Required"===this.definition.Text2Visibility}},{key:"Text2_label",get:function(){return this.definition.Text2Label?this.ws.getMultilingualValueImmediate(this.definition,"Text2Label"):this.translate.instant("Entity_Text2")}},{key:"Unit_isVisible",get:function(){return!!this.definition.UnitCardinality}},{key:"Unit_isRequired",get:function(){return!this.definition.DefaultUnitId}},{key:"Unit_default",get:function(){return this.definition.DefaultUnitId}},{key:"UnitMass_isVisible",get:function(){return!!this.definition.UnitMassVisibility}},{key:"UnitMass_isRequired",get:function(){return"Required"===this.definition.UnitMassVisibility}},{key:"Units_isVisible",get:function(){return"Multiple"===this.definition.UnitCardinality}},{key:"Identifier_isVisible",get:function(){return!!this.definition.IdentifierVisibility}},{key:"Identifier_isRequired",get:function(){return"Required"===this.definition.IdentifierVisibility}},{key:"Identifier_label",get:function(){return this.definition.IdentifierLabel?this.ws.getMultilingualValueImmediate(this.definition,"IdentifierLabel"):this.translate.instant("Resource_Identifier")}},{key:"VatRate_isVisible",get:function(){return!!this.definition.VatRateVisibility}},{key:"VatRate_isRequired",get:function(){return"Required"===this.definition.VatRateVisibility}},{key:"functionalDecimals",get:function(){return this.ws.settings.FunctionalCurrencyDecimals}},{key:"functionalPostfix",get:function(){return" (".concat(this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName"),")")}},{key:"ReorderLevel_isVisible",get:function(){return!!this.definition.ReorderLevelVisibility}},{key:"ReorderLevel_isRequired",get:function(){return"Required"===this.definition.ReorderLevelVisibility}},{key:"EconomicOrderQuantity_isVisible",get:function(){return!!this.definition.EconomicOrderQuantityVisibility}},{key:"EconomicOrderQuantity_isRequired",get:function(){return"Required"===this.definition.EconomicOrderQuantityVisibility}},{key:"MonetaryValue_isVisible",get:function(){return!!this.definition.MonetaryValueVisibility}},{key:"MonetaryValue_isRequired",get:function(){return"Required"===this.definition.MonetaryValueVisibility}},{key:"MonetaryValue_label",get:function(){return this.translate.instant("Resource_MonetaryValue")}},{key:"Participant_isVisible",get:function(){return!!this.definition.ParticipantVisibility}},{key:"Participant_isRequired",get:function(){return"Required"===this.definition.ParticipantVisibility}},{key:"Participant_label",get:function(){var e=this.ws.definitions.Relations[this.definition.ParticipantDefinitionId];return e?this.ws.getMultilingualValueImmediate(e,"TitleSingular"):this.translate.instant("Resource_Participant")}},{key:"Participant_definitionIds",get:function(){return[this.definition.ParticipantDefinitionId]}},{key:"Location_isVisible",get:function(){return!!this.definition.LocationVisibility}},{key:"zoom",get:function(){return+localStorage.map_zoom||2},set:function(e){localStorage.map_zoom=e}},{key:"latitude",get:function(){return void 0===this._lat&&(this._lat=+localStorage.map_latitude||0),this._lat}},{key:"longitude",get:function(){return void 0===this._lng&&(this._lng=+localStorage.map_longitude||0),this._lng}},{key:"reports",get:function(){return this.definition.ReportDefinitions}},{key:"activeTabKey",get:function(){return"resources_details_".concat(this.definitionId,"_activeTab")}},{key:"activeTab",get:function(){var e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.Units_isVisible?"units":this.Location_isVisible?"location":this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]},set:function(e){this.ws.miscState[this.activeTabKey]=e}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||hM)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(i.e),r.Pb(i.a))},hM.\u0275cmp=r.Jb({type:hM,selectors:[["t-resources-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[r.yb],decls:13,vars:2,consts:[["collection","Resource",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","savePreprocessing","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Resource",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","savePreprocessing","actions"],[3,"showHome"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 t-details-image-container",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"w-100"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"col-12","col-md-4","t-details-image-container"],[3,"metadata"],[1,"border"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../units",3,"itemId"],[3,"ngModel","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],[3,"ngModel","definitionIds","required","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionIds","required","ngModelChange"],["link","../../../currencies",3,"itemId"],["link","../../../centers",3,"itemId"],[3,"ngModel","definitionId","required","ngModelChange",4,"ngIf"],[3,"ngModel","definitionId","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[1,"t-form-group",3,"label"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","units",4,"ngIf"],["ngbNavItem","location",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","units"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_Unit",""],["row_Unit",""],[1,"t-form-group",3,"serverErrors"],["ngbNavItem","location"],[2,"height","500px"],[1,"h-100","border-bottom","border-left","border-right"],["spellcheck","false",1,"form-control","t-input","p-1","h-100",2,"resize","none",3,"readonly","placeholder","ngModel","ngModelChange"],[1,"h-100",3,"latitude","longitude","zoom","mapTypeControl","panControl","streetViewControl","fitBounds","fitBoundsPadding","centerChange"],["type","max",3,"agmFitBounds","geoJson"],["type","min",3,"agmFitBounds","geoJson"],[3,"geoJson","style",4,"ngIf"],[1,"btn-group","btn-group-toggle","pt-1"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","locationView"],["icon","map-marker-alt"],[1,"d-none","d-md-inline"],["icon","code"],["style","margin-top: -40px",4,"ngIf"],[3,"geoJson"],[2,"margin-top","-40px"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"]],template:function(e,t){if(1&e&&(r.Rc(0,HC,1,32,"t-details",0),r.Rc(1,$C,1,1,"ng-template",null,1,r.Sc),r.Rc(3,GC,2,1,"ng-template",null,2,r.Sc),r.Rc(5,fM,43,44,"ng-template",null,3,r.Sc),r.Rc(7,mM,2,3,"ng-template",null,4,r.Sc),r.Rc(9,gM,2,3,"ng-template",null,5,r.Sc),r.Rc(11,pM,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,q.a,dn,Ce.a,we.a,ie.u,ie.k,ie.n,Tn.a,he,Ca,NC,xn,lf,Zu,rd,bb,dd,df,X.v,X.A,X.x,X.y,X.w,ne.b,tl.a,nl.a,ie.c,qm,lg,am,rm,ke.a,x.t,ve.a,pa],pipes:[G.d,dg,sg,x.D,x.g],encapsulation:2}),hM);function yM(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",9),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("AccountClassification",n,"Name")),r.Bb(3),r.Uc(i.c[n].Code)}}function IM(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"AccountClassification"),"\n")}function CM(e,t){if(1&e&&(r.Vb(0,"span",10),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.ws.getMultilingualValue("AccountClassification",n,"Name"))}}function wM(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function kM(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function MM(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var VM,TM=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},EM=function(e,t){return[e,t]},UM=function(e){return{template:e,expression:"CreatedById eq me"}},xM=function(e){return[e]},RM=function(e){return{CreatedBy:e}},DM=((VM=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.accountClassificationApi=o.api.accountClassificationsApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.accountClassificationApi.activate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.accountClassificationApi.deactivate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo("account-classifications","IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.accountClassificationApi=o.api.accountClassificationsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.AccountClassification}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||VM)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},VM.\u0275cmp=r.Jb({type:VM,selectors:[["t-account-classifications-master"]],features:[r.yb],decls:14,vars:32,consts:[["collection","AccountClassification","selectDefault","Code","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,yM,6,2,"ng-template",null,1,r.Sc),r.Rc(4,IM,2,3,"ng-template",null,2,r.Sc),r.Rc(6,CM,2,1,"ng-template",null,3,r.Sc),r.Rc(8,wM,2,3,"ng-template",null,4,r.Sc),r.Rc(10,kM,2,3,"ng-template",null,5,r.Sc),r.Rc(12,MM,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",r.nc(1,11,"AccountClassifications"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(23,EM,r.zc(13,TM,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(18,TM,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.wc(30,RM,r.wc(28,xM,r.wc(26,UM,l))))}},directives:[Ot.a],pipes:[G.d],encapsulation:2}),VM);function BM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-account-classifications-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function SM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-account-classifications-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("filter",i)("showCreate",o.showCreate)("additionalSelect",o.additionalSelect)}}var _M,OM=((_M=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return LM(e||_M)},_M.\u0275cmp=r.Jb({type:_M,selectors:[["t-account-classifications-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:_M}]),r.yb],decls:5,vars:6,consts:[["collection","AccountClassification",3,"masterTemplate","ensureAdditionalSelect","theme","filter","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,BM,2,3,"ng-template",null,1,r.Sc),r.Rc(3,SM,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("filter",t.filter)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),_M),LM=r.Xb(OM);function FM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-account-types-master",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("filter",i)("showCreate",o.showCreate)("additionalSelect",o.additionalSelect)}}function AM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-account-types-details",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}var PM,NM=((PM=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return jM(e||PM)},PM.\u0275cmp=r.Jb({type:PM,selectors:[["t-account-types-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:PM}]),r.yb],decls:5,vars:6,consts:[["collection","AccountType",3,"masterTemplate","ensureAdditionalSelect","theme","filter","detailsTemplate","additionalSelect","entityLoaded"],["master",""],["details",""],[1,"modal-body"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,FM,2,3,"ng-template",null,1,r.Sc),r.Rc(3,AM,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("filter",t.filter)("detailsTemplate",t.showCreate?i:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),PM),jM=r.Xb(NM);function WM(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function qM(e,t){if(1&e&&(r.Vb(0,"h2",18),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var QM=function(){return{updateOn:"blur"}};function HM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,QM))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function $M(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,QM))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function GM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,QM))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function zM(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function JM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,QM))}}function KM(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,zM,2,1,"div",11),r.Rc(3,JM,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function YM(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function XM(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,QM))}}function ZM(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,YM,2,1,"div",11),r.Rc(3,XM,1,3,"t-text-editor",22),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function eV(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function tV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,QM))}}function nV(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,eV,2,1,"div",11),r.Rc(3,tV,1,3,"t-text-editor",22),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function iV(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function rV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,QM))}}function oV(e,t){if(1&e&&(r.Vb(0,"t-view-link",24),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("itemId",null==n?null:n.ParentId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("AccountClassification",null==n?null:n.ParentId,"Name"))}}function cV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-classifications-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ParentId=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.ParentId)}}function aV(e,t){if(1&e&&(r.Vb(0,"t-view-link",26),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("itemId",null==n?null:n.AccountTypeParentId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("AccountType",null==n?null:n.AccountTypeParentId,"Name"))}}function lV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-types-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.AccountTypeParentId=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.AccountTypeParentId)}}function sV(e,t){if(1&e&&(r.Vb(0,"t-form-group",27),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",28),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(2),r.sc("entity",n)}}function uV(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,qM,2,1,"h2",6),r.Rc(2,HM,2,7,"t-text-editor",7),r.Rc(3,$M,2,7,"t-text-editor",8),r.Rc(4,GM,2,7,"t-text-editor",8),r.Ub(),r.Rc(5,KM,4,6,"t-form-group",9),r.Rc(6,ZM,4,6,"t-form-group",9),r.Rc(7,nV,4,6,"t-form-group",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Rc(10,iV,2,1,"div",11),r.Rc(11,rV,1,3,"t-text-editor",12),r.Ub(),r.Vb(12,"t-form-group",10),r.mc(13,"translate"),r.Vb(14,"t-restricted",13),r.Rc(15,oV,2,2,"t-view-link",14),r.Ub(),r.Rc(16,cV,1,1,"t-account-classifications-picker",15),r.Ub(),r.Vb(17,"t-form-group",10),r.mc(18,"translate"),r.Vb(19,"t-restricted",13),r.Rc(20,aV,2,2,"t-view-link",16),r.Ub(),r.Rc(21,lV,1,1,"t-account-types-picker",15),r.Ub(),r.Rc(22,sV,3,4,"t-form-group",17)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,23,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(13,25,"TreeParent"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.ParentId),r.Bb(2),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Parent),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(18,27,"AccountClassification_AccountTypeParent"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.AccountTypeParentId),r.Bb(2),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.AccountTypeParentId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i)}}function dV(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function bV(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var fV,mV=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},gV=function(e,t){return[e,t]},pV=((fV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.accountClassificationsApi=o.api.accountClassificationsApi(o.notifyDestruct$),o.expand="Parent,AccountTypeParent",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e},o.onActivate=function(e){e&&e.Id&&o.accountClassificationsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.onDeactivate=function(e){e&&e.Id&&o.accountClassificationsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.showActivate=function(e){return!!e&&!e.IsActive},o.showDeactivate=function(e){return!!e&&e.IsActive},o.canActivateDeactivateItem=function(e){return o.ws.canDo("account-classifications","IsActive",e.Id)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.accountClassificationsApi=o.api.accountClassificationsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||fV)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},fV.\u0275cmp=r.Jb({type:fV,selectors:[["t-account-classifications-details"]],features:[r.yb],decls:10,vars:26,consts:[["collection","AccountClassification",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../account-classifications",3,"itemId",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../account-types",3,"itemId",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["link","../../account-classifications",3,"itemId"],[3,"ngModel","ngModelChange"],["link","../../account-types",3,"itemId"],[1,"t-form-group",3,"label"],["collection","AccountClassification","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,WM,2,1,"ng-template",null,1,r.Sc),r.Rc(4,uV,23,29,"ng-template",null,2,r.Sc),r.Rc(6,dV,2,3,"ng-template",null,3,r.Sc),r.Rc(8,bV,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,9,"AccountClassifications"))("detailsCrumb",n)("documentTemplate",i)("actions",r.xc(23,gV,r.Ac(11,mV,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(17,mV,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,Tn.a,we.a,ie.u,ie.k,ie.n,Ca,OM,NM,Ie.a],pipes:[G.d],encapsulation:2}),fV);function hV(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",9),r.Qb(4,"t-auto-cell",10),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("AccountType",n,"Name")),r.Bb(2),r.sc("entity",i.c[n])}}function vV(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"AccountType"),"\n")}function yV(e,t){if(1&e&&(r.Vb(0,"span",11),r.Qb(1,"t-auto-cell",12),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function IV(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function CV(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function wV(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SavedByMe")," ")}var kV,MV=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},VV=function(e,t){return[e,t]},TV=function(e){return{template:e,expression:"SavedById eq me"}},EV=function(e){return[e]},UV=function(e){return{SavedBy:e}},xV=((kV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.accountTypesApi=o.api.accountTypesApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.accountTypesApi.activate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.accountTypesApi.deactivate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo(o.view,"IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.accountTypesApi=o.api.accountTypesApi(o.notifyDestruct$),o}return _createClass(n,[{key:"view",get:function(){return"account-types"}},{key:"c",get:function(){return this.workspace.currentTenant.AccountType}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||kV)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},kV.\u0275cmp=r.Jb({type:kV,selectors:[["t-account-types-master"]],features:[r.yb],decls:14,vars:32,consts:[["collection","AccountType","selectDefault","IsAssignable,IsActive","selectForTiles","Name,Name2,Name3,Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["savedByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","AccountType","path","Code",3,"entity"],[1,"text-truncate"],["collection","AccountType",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,hV,5,2,"ng-template",null,1,r.Sc),r.Rc(4,vV,2,3,"ng-template",null,2,r.Sc),r.Rc(6,yV,2,1,"ng-template",null,3,r.Sc),r.Rc(8,IV,2,3,"ng-template",null,4,r.Sc),r.Rc(10,CV,2,3,"ng-template",null,5,r.Sc),r.Rc(12,wV,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",r.nc(1,11,"AccountTypes"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(23,VV,r.zc(13,MV,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(18,MV,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.wc(30,UV,r.wc(28,EV,r.wc(26,TV,l))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),kV),RV=n("19uq");function DV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-relation-definitions-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function BV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-relation-definitions-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var SV,_V=((SV=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return OV(e||SV)},SV.\u0275cmp=r.Jb({type:SV,selectors:[["t-relation-definitions-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:SV}]),r.yb],decls:5,vars:6,consts:[["collection","RelationDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,DV,2,3,"ng-template",null,1,r.Sc),r.Rc(3,BV,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),SV),OV=r.Xb(_V);function LV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-entry-types-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function FV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-entry-types-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var AV,PV=((AV=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return NV(e||AV)},AV.\u0275cmp=r.Jb({type:AV,selectors:[["t-entry-types-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:AV}]),r.yb],decls:5,vars:6,consts:[["collection","EntryType",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,LV,2,3,"ng-template",null,1,r.Sc),r.Rc(3,FV,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),AV),NV=r.Xb(PV),jV=n("Fhnx"),WV=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},qV=function(e,t,n){return{template:e,action:t,showAction:n}},QV=function(e,t,n){return[e,t,n]};function HV(e,t){if(1&e&&r.Qb(0,"t-details",7),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(6),c=r.Fc(8),a=r.Fc(10),l=r.Fc(12);r.sc("definitionId",n.definitionId)("createFunc",n.create)("cloneFunc",n.clone)("expand",n.expand)("mode",n.mode)("additionalSelect",n.additionalSelect)("idString",n.idString)("masterCrumb",n.masterCrumb)("detailsCrumb",i)("documentTemplate",o)("actions",r.yc(27,QV,r.Ac(11,WV,c,n.onActivate,n.showActivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.Ac(17,WV,a,n.onDeactivate,n.showDeactivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.yc(23,qV,l,n.onEditDefinition,n.showEditDefinition)))}}function $V(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",8),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function GV(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function zV(e,t){if(1&e&&(r.Vb(0,"h2",20),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var JV=function(){return{updateOn:"blur"}};function KV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,JV))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function YV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,JV))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function XV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,JV))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function ZV(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-image",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Image=e})),r.Ub()}if(2&e){var i=r.lc(2),o=i.model,c=i.isEdit,a=r.lc();r.sc("src",o.Id?"custodies/"+a.definitionId+"/"+o.Id+"/image":null)("imageId",null==o?null:o.ImageId)("ngModel",o.Image)("isEdit",c)}}function eT(e,t){if(1&e&&(r.Vb(0,"div",23),r.Vb(1,"t-restricted",24),r.Vb(2,"div",25),r.Rc(3,ZV,1,4,"t-image",26),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ImageId),r.Bb(2),r.sc("ngIf",!!n)}}function tT(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function nT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",29),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,JV))}}function iT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,tT,2,1,"div",16),r.Rc(3,nT,1,3,"t-text-editor",28),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function rT(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function oT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,JV))}}function cT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,rT,2,1,"div",16),r.Rc(3,oT,1,3,"t-text-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function aT(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function lT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,JV))}}function sT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,aT,2,1,"div",16),r.Rc(3,lT,1,3,"t-text-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function uT(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function dT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,JV))}}function bT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",33),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Currency),r.Bb(1),r.sc("itemId",null==n?null:n.CurrencyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Currency",n.CurrencyId,"Name")," ")}}function fT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CurrencyId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CurrencyId)("required",o.Currency_isRequired)}}function mT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,bT,3,3,"t-restricted",31),r.Rc(2,fT,1,2,"t-currencies-picker",32),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Currency_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CurrencyId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function gT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",36),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Center),r.Bb(1),r.sc("itemId",null==n?null:n.CenterId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Center",n.CenterId,"Name")," ")}}function pT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",37),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CenterId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CenterId)("required",o.Center_isRequired)}}function hT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,gT,3,3,"t-restricted",31),r.Rc(2,pT,1,2,"t-centers-picker",35),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Center_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CenterId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function vT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",39),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Custodian),r.Bb(1),r.sc("link","../../../relations/"+i.Custodian_definitionIds[0])("itemId",null==n?null:n.CustodianId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Relation",n.CustodianId,"Name")," ")}}function yT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CustodianId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CustodianId)("definitionIds",o.Custodian_definitionIds)("required",o.Custodian_isRequired)}}function IT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,vT,3,4,"t-restricted",31),r.Rc(2,yT,1,3,"t-relations-picker",38),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Custodian_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CustodianId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function CT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",39),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup1Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup1),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup1Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup1Id,"Name")," ")}}function wT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",42),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup1Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup1Id)("definitionId",o.Lookup1_DefinitionId)("required",o.Lookup1_isRequired)}}function kT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,CT,3,4,"t-restricted",31),r.Rc(2,wT,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup1Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function MT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",39),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup2Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup2),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup2Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup2Id,"Name")," ")}}function VT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",42),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup2Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup2Id)("definitionId",o.Lookup2_DefinitionId)("required",o.Lookup2_isRequired)}}function TT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,MT,3,4,"t-restricted",31),r.Rc(2,VT,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup2Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ET(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",39),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup3Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup3),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup3Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup3Id,"Name")," ")}}function UT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",42),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup3Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup3Id)("definitionId",o.Lookup3_DefinitionId)("required",o.Lookup3_isRequired)}}function xT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,ET,3,4,"t-restricted",31),r.Rc(2,UT,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup3_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup3Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function RT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"t-view-link",39),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).model,o=r.lc(),c="../../../lookups/"+(null==(n=o.ws.get("Lookup",i.Lookup4Id))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lookup4),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.Lookup4Id),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Lookup",i.Lookup4Id,"Name")," ")}}function DT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",42),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Lookup4Id=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Lookup4Id)("definitionId",o.Lookup4_DefinitionId)("required",o.Lookup4_isRequired)}}function BT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,RT,3,4,"t-restricted",31),r.Rc(2,DT,1,3,"t-lookups-picker",41),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Lookup4_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Lookup4Id),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ST(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Decimal1),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Decimal1,"1.0-4"))}}function _T(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",44),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Decimal1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Decimal1)("ngModelOptions",r.vc(5,JV))("required",o.Decimal1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function OT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,ST,4,5,"t-restricted",31),r.Rc(2,_T,1,6,"t-decimal-editor",43),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Decimal1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Decimal1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function LT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Decimal2),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Decimal2,"1.0-4"))}}function FT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",44),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Decimal2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Decimal2)("ngModelOptions",r.vc(5,JV))("required",o.Decimal2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function AT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,LT,4,5,"t-restricted",31),r.Rc(2,FT,1,6,"t-decimal-editor",43),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Decimal2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Decimal2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function PT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Int1),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Int1,"1.0-0"))}}function NT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",44),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Int1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Int1)("ngModelOptions",r.vc(5,JV))("required",o.Int1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function jT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,PT,4,5,"t-restricted",31),r.Rc(2,NT,1,6,"t-decimal-editor",43),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Int1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Int1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function WT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Int2),r.Bb(2),r.Uc(r.oc(3,2,null==n?null:n.Int2,"1.0-0"))}}function qT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",44),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Int2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Int2)("ngModelOptions",r.vc(5,JV))("required",o.Int2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function QT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,WT,4,5,"t-restricted",31),r.Rc(2,qT,1,6,"t-decimal-editor",43),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Int2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Int2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function HT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Text1),r.Bb(2),r.Uc(null==n?null:n.Text1)}}function $T(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Text1=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Text1)("ngModelOptions",r.vc(3,JV))("required",o.Text1_isRequired)}}function GT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,HT,3,2,"t-restricted",31),r.Rc(2,$T,1,4,"t-text-editor",45),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Text1_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Text1),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function zT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Text2),r.Bb(2),r.Uc(null==n?null:n.Text2)}}function JT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Text2=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Text2)("ngModelOptions",r.vc(3,JV))("required",o.Text2_isRequired)}}function KT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,zT,3,2,"t-restricted",31),r.Rc(2,JT,1,4,"t-text-editor",45),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.Text2_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Text2),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function YT(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.FromDate),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.FromDate))}}function XT(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.FromDate=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.FromDate)("ngModelOptions",r.vc(3,JV))("required",o.FromDate_isRequired)}}function ZT(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,YT,4,4,"t-restricted",31),r.Rc(2,XT,1,4,"t-date-picker",45),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.FromDate_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.FromDate),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function eE(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ToDate),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.ToDate))}}function tE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ToDate=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ToDate)("ngModelOptions",r.vc(3,JV))("required",o.ToDate_isRequired)}}function nE(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,eE,4,4,"t-restricted",31),r.Rc(2,tE,1,4,"t-date-picker",45),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.ToDate_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ToDate),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function iE(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ExternalReference),r.Bb(2),r.Uc(null==n?null:n.ExternalReference)}}function rE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ExternalReference=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ExternalReference)("ngModelOptions",r.vc(3,JV))("required",o.ExternalReference_isRequired)}}function oE(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.Rc(1,iE,3,2,"t-restricted",31),r.Rc(2,rE,1,4,"t-text-editor",45),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.ExternalReference_label)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ExternalReference),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function cE(e,t){if(1&e&&(r.Vb(0,"div",48),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description)}}function aE(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,cE,2,1,"div",47),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description),r.Bb(1),r.sc("ngIf",!o)}}function lE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Description)("ngModelOptions",r.vc(3,JV))("required",o.Description_isRequired)}}function sE(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,aE,2,2,"t-restricted",31),r.Rc(3,lE,1,4,"t-multiline-editor",45),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function uE(e,t){if(1&e&&(r.Vb(0,"div",48),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description2)}}function dE(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,uE,2,1,"div",47),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description2),r.Bb(1),r.sc("ngIf",!o)}}function bE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description2)("ngModelOptions",r.vc(2,JV))}}function fE(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,dE,2,2,"t-restricted",31),r.Rc(3,bE,1,3,"t-multiline-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function mE(e,t){if(1&e&&(r.Vb(0,"div",48),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description3)}}function gE(e,t){if(1&e&&(r.Vb(0,"t-restricted",24),r.Rc(1,mE,2,1,"div",47),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Description3),r.Bb(1),r.sc("ngIf",!o)}}function pE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description3)("ngModelOptions",r.vc(2,JV))}}function hE(e,t){if(1&e&&(r.Vb(0,"t-form-group",15),r.mc(1,"translate"),r.Rc(2,gE,2,2,"t-restricted",31),r.Rc(3,pE,1,3,"t-multiline-editor",17),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function vE(e,t){if(1&e&&(r.Vb(0,"t-form-group",49),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(3),r.Uc(r.nc(4,4,n?n.IsActive?"Active":"Inactive":""))}}function yE(e,t){1&e&&(r.Vb(0,"span",59),r.Qb(1,"fa-icon",60),r.Tc(2,"\xa0 "),r.Ub())}function IE(e,t){if(1&e&&r.Qb(0,"agm-data-layer",75),2&e){var n=r.lc(4).model,i=r.lc();r.Pc(i.styleFunc),r.sc("geoJson",i.parseJson(null==n?null:n.LocationJson))}}function CE(e,t){if(1&e&&(r.Vb(0,"t-error-message",76),r.Tc(1),r.Ub()),2&e){var n=r.lc(5);r.Bb(1),r.Vc(" ",n.parseJsonError," ")}}function wE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-restricted",24),r.Vb(1,"div",61),r.Vb(2,"div",62),r.Vb(3,"textarea",63),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.LocationJson=e})),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"agm-map",64),r.hc("centerChange",(function(e){return r.Ic(n),r.lc(4).onCenterChange(e)})),r.Qb(6,"t-map-bounds-fitter",65),r.Qb(7,"t-map-bounds-fitter",66),r.Rc(8,IE,1,3,"agm-data-layer",67),r.Ub(),r.Ub(),r.Vb(9,"div",68),r.Vb(10,"label",69),r.hc("click",(function(){return r.Ic(n),r.lc(4).onView("map")})),r.mc(11,"translate"),r.Qb(12,"input",70),r.Qb(13,"fa-icon",71),r.Vb(14,"span",72),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Ub(),r.Vb(17,"label",69),r.hc("click",(function(){return r.Ic(n),r.lc(4).onView("json")})),r.mc(18,"translate"),r.Qb(19,"input",70),r.Qb(20,"fa-icon",73),r.Vb(21,"span",72),r.Tc(22),r.mc(23,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Rc(24,CE,2,1,"t-error-message",74),r.Ub()}if(2&e){var i=r.lc(3),o=i.model,c=i.isEdit,a=r.lc();r.Gb("p-4",1===(null==o||null==o.EntityMetadata?null:o.EntityMetadata.LocationJson)),r.sc("metadata",null==o||null==o.EntityMetadata?null:o.EntityMetadata.LocationJson),r.Bb(2),r.Gb("d-none",!a.isView("json"))("t-hidden-cursor",!c),r.Bb(1),r.sc("readonly",!c)("placeholder",r.nc(4,34,"GeoJSON")+"...")("ngModel",o.LocationJson),r.Bb(2),r.Gb("d-none",!a.isView("map")),r.sc("latitude",a.latitude)("longitude",a.longitude)("zoom",6)("mapTypeControl",!0)("panControl",!0)("streetViewControl",!1)("fitBounds",!(null==o||!o.Id))("fitBoundsPadding",100),r.Bb(1),r.sc("agmFitBounds",!0)("geoJson",a.parseJson(null==o?null:o.LocationJson)),r.Bb(1),r.sc("agmFitBounds",!0)("geoJson",a.parseJson(null==o?null:o.LocationJson)),r.Bb(1),r.sc("ngIf",!!a.parseJson(null==o?null:o.LocationJson)),r.Bb(2),r.Gb("active",a.isView("map")),r.tc("title",r.nc(11,36,"Map")),r.Bb(5),r.Vc("\xa0\xa0",r.nc(16,38,"Map"),""),r.Bb(2),r.Gb("active",a.isView("json")),r.tc("title",r.nc(18,40,"GeoJSON")),r.Bb(5),r.Vc("\xa0\xa0",r.nc(23,42,"GeoJSON"),""),r.Bb(2),r.sc("ngIf",!!a.parseJsonError)}}function kE(e,t){if(1&e&&(r.Vb(0,"li",54),r.Vb(1,"a",55),r.Rc(2,yE,3,0,"span",56),r.Vb(3,"span",57),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Rc(6,wE,25,44,"ng-template",58),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(2),r.sc("ngIf",i.Map_showError(n)),r.Bb(2),r.Uc(r.nc(5,2,"Entity_Location"))}}var ME=function(e,t){return{id:e,cache_buster:t}};function VE(e,t){if(1&e&&(r.Vb(0,"div",81),r.Qb(1,"t-report-results",82),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3).model,o=r.lc();r.Bb(1),r.sc("definition",o.reportDefinition(n))("arguments",r.xc(4,ME,null==i?null:i.Id,null==i||null==i.EntityMetadata?null:i.EntityMetadata.$refresh))("view",o.reportView(n))("state",o.state(n))}}function TE(e,t){if(1&e&&(r.Vb(0,"li",79),r.Vb(1,"a",80),r.Vb(2,"span",57),r.Tc(3),r.Ub(),r.Ub(),r.Rc(4,VE,2,7,"ng-template",58),r.Ub()),2&e){var n=t.$implicit;r.lc();var i=r.Fc(3),o=r.lc(3);r.sc("ngbNavItem",n.ReportDefinitionId),r.Bb(1),r.sc("tContextMenu",i)("tContext",n.ReportDefinitionId),r.Bb(2),r.Uc(o.reportTitle(n))}}function EE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",83),r.Vb(1,"ul",84),r.Vb(2,"li",85),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.close,o=r.lc(3).model;return r.lc().onExpandReport(e,o),i()})),r.Vb(3,"div",86),r.Qb(4,"fa-icon",87),r.Ub(),r.Vb(5,"div",88),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Bb(6),r.Vc(" ",r.nc(7,1,"Expand")," "))}function UE(e,t){if(1&e&&(r.Tb(0),r.Rc(1,TE,5,4,"li",77),r.Rc(2,EE,8,3,"ng-template",null,78,r.Sc),r.Sb()),2&e){var n=r.lc(3);r.Bb(1),r.sc("ngForOf",n.reports)}}function xE(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"ul",50,51),r.hc("activeIdChange",(function(e){return r.Ic(n),r.lc(2).activeTab=e})),r.Rc(3,kE,7,4,"li",52),r.Rc(4,UE,4,1,"ng-container",16),r.Ub(),r.Qb(5,"div",53),r.Sb()}if(2&e){var i=r.Fc(2),o=r.lc(),c=o.isEdit,a=o.model,l=r.lc();r.Bb(1),r.sc("destroyOnHide",!0)("activeId",l.activeTab),r.Bb(2),r.sc("ngIf",l.Location_isVisible),r.Bb(1),r.sc("ngIf",l.showReports(c,a)),r.Bb(1),r.sc("ngbNavOutlet",i)}}function RE(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.Rc(1,zV,2,1,"h2",10),r.Rc(2,KV,2,7,"t-text-editor",11),r.Rc(3,YV,2,7,"t-text-editor",12),r.Rc(4,XV,2,7,"t-text-editor",12),r.Ub(),r.Rc(5,eT,4,2,"div",13),r.Rc(6,iT,4,6,"t-form-group",14),r.Rc(7,cT,4,6,"t-form-group",14),r.Rc(8,sT,4,6,"t-form-group",14),r.Vb(9,"t-form-group",15),r.mc(10,"translate"),r.Rc(11,uT,2,1,"div",16),r.Rc(12,dT,1,3,"t-text-editor",17),r.Ub(),r.Rc(13,mT,3,4,"t-form-group",14),r.Rc(14,hT,3,4,"t-form-group",14),r.Rc(15,IT,3,4,"t-form-group",14),r.Rc(16,kT,3,4,"t-form-group",14),r.Rc(17,TT,3,4,"t-form-group",14),r.Rc(18,xT,3,4,"t-form-group",14),r.Rc(19,BT,3,4,"t-form-group",14),r.Rc(20,OT,3,4,"t-form-group",14),r.Rc(21,AT,3,4,"t-form-group",14),r.Rc(22,jT,3,4,"t-form-group",14),r.Rc(23,QT,3,4,"t-form-group",14),r.Rc(24,GT,3,4,"t-form-group",14),r.Rc(25,KT,3,4,"t-form-group",14),r.Rc(26,ZT,3,4,"t-form-group",14),r.Rc(27,nE,3,4,"t-form-group",14),r.Rc(28,oE,3,4,"t-form-group",14),r.Qb(29,"div",18),r.Rc(30,sE,4,6,"t-form-group",14),r.Rc(31,fE,4,6,"t-form-group",14),r.Rc(32,hE,4,6,"t-form-group",14),r.Rc(33,vE,5,6,"t-form-group",19),r.Rc(34,xE,6,5,"ng-container",16)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",o.Image_isVisible),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(10,34,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",o.Currency_isVisible),r.Bb(1),r.sc("ngIf",o.Center_isVisible),r.Bb(1),r.sc("ngIf",o.Custodian_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup1_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup2_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup3_isVisible),r.Bb(1),r.sc("ngIf",o.Lookup4_isVisible),r.Bb(1),r.sc("ngIf",o.Decimal1_isVisible),r.Bb(1),r.sc("ngIf",o.Decimal2_isVisible),r.Bb(1),r.sc("ngIf",o.Int1_isVisible),r.Bb(1),r.sc("ngIf",o.Int2_isVisible),r.Bb(1),r.sc("ngIf",o.Text1_isVisible),r.Bb(1),r.sc("ngIf",o.Text2_isVisible),r.Bb(1),r.sc("ngIf",o.FromDate_isVisible),r.Bb(1),r.sc("ngIf",o.ToDate_isVisible),r.Bb(1),r.sc("ngIf",o.ExternalReference_isVisible),r.Bb(2),r.sc("ngIf",o.Description_isVisible),r.Bb(1),r.sc("ngIf",o.Description_isVisible&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",o.Description_isVisible&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",o.showTabs(i,n))}}function DE(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function BE(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function SE(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"EditDefinition")," ")}var _E,OE,LE=((_E=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.translate=r,a.router=o,a.route=c,a.custodiesApi=a.api.custodiesApi(null,a.notifyDestruct$),a.expand="Currency,Center,Lookup1,Lookup2,Lookup3,Lookup4,Custodian",a.create=function(){var e={};return a.ws.isPrimaryLanguage?e.Name=a.initialText:a.ws.isSecondaryLanguage?e.Name2=a.initialText:a.ws.isTernaryLanguage&&(e.Name3=a.initialText),e},a.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t}return console.error("Cloning a non existing item"),null},a.onActivate=function(e){e&&e.Id&&a.custodiesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onDeactivate=function(e){e&&e.Id&&a.custodiesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)}))).subscribe({error:a.details.handleActionError})},a.onEditDefinition=function(e){var t=a.workspace;t.isEdit=!0,a.router.navigate(["../../../custody-definitions",a.definitionId],{relativeTo:a.route}).then((function(e){e||delete t.isEdit})).catch((function(){return delete t.isEdit}))},a.showActivate=function(e){return!!e&&!e.IsActive},a.showDeactivate=function(e){return!!e&&e.IsActive},a.showEditDefinition=function(e){return a.ws.canDo("custody-definitions","Update",null)},a.canActivateDeactivateItem=function(e){return a.ws.canDo(a.view,"IsActive",e.Id)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a.styleFunc=function(e){for(var t={clickable:!1},n=0,i=["fillColor","fillOpacity","icon","strokeColor","shape","strokeOpacity","strokeWeight","visible"];n<i.length;n++){var r=i[n],o=e.getProperty(r);null!=o&&(t[r]=o)}return t},a.locationView="map",a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");e.definitionId!==n&&(e.definitionId=n)}}))}},{key:"showTabs",value:function(e,t){return this.Location_isVisible||this.reports.length>0&&this.showReports(e,t)}},{key:"Map_showError",value:function(e){return!!e&&!!e.serverErrors&&!!e.serverErrors.LocationJson}},{key:"onCenterChange",value:function(e){localStorage.map_latitude=e.lat,localStorage.map_longitude=e.lng}},{key:"parseJson",value:function(e){if(this.parseJsonString!==(e=e||void 0))if(this.parseJsonString=e,e)try{this.parseJsonResult=JSON.parse(e),delete this.parseJsonError}catch(t){this.parseJsonError=t,delete this.parseJsonResult}else delete this.parseJsonResult,delete this.parseJsonError;return this.parseJsonResult}},{key:"onView",value:function(e){this.locationView=e}},{key:"isView",value:function(e){return this.locationView===e}},{key:"showReports",value:function(e,t){return!!t&&!!t.Id}},{key:"reportDefinition",value:function(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}},{key:"reportTitle",value:function(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}},{key:"state",value:function(e){var t="custodies_details_".concat(this.definitionId,"_").concat(e.ReportDefinitionId),n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new S.j),n[t]}},{key:"reportView",value:function(e){var t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ma.chart:ma.pivot}},{key:"onExpandReport",value:function(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.custodiesApi=this.api.custodiesApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"view",get:function(){return"custodies/".concat(this.definitionId)}},{key:"definition",get:function(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Custodies[this.definitionId]:null)}},{key:"found",get:function(){return!!this.definition}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"masterCrumb",get:function(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}},{key:"Currency_isVisible",get:function(){return!!this.definition.CurrencyVisibility}},{key:"Currency_isRequired",get:function(){return"Required"===this.definition.CurrencyVisibility}},{key:"Currency_label",get:function(){return this.translate.instant("Entity_Currency")}},{key:"Center_isVisible",get:function(){return!!this.definition.CenterVisibility}},{key:"Center_isRequired",get:function(){return"Required"===this.definition.CenterVisibility}},{key:"Center_label",get:function(){return this.translate.instant("Entity_Center")}},{key:"Custodian_isVisible",get:function(){return!!this.definition.CustodianVisibility}},{key:"Custodian_isRequired",get:function(){return"Required"===this.definition.CustodianVisibility}},{key:"Custodian_label",get:function(){var e=this.ws.definitions.Relations[this.definition.CustodianDefinitionId];return e?this.ws.getMultilingualValueImmediate(e,"TitleSingular"):this.translate.instant("Custody_Custodian")}},{key:"Custodian_definitionIds",get:function(){return[this.definition.CustodianDefinitionId]}},{key:"Image_isVisible",get:function(){return!!this.definition.ImageVisibility}},{key:"Description_isVisible",get:function(){return!!this.definition.DescriptionVisibility}},{key:"Description_isRequired",get:function(){return"Required"===this.definition.DescriptionVisibility}},{key:"FromDate_isVisible",get:function(){return!!this.definition.FromDateVisibility}},{key:"FromDate_isRequired",get:function(){return"Required"===this.definition.FromDateVisibility}},{key:"FromDate_label",get:function(){return this.definition.FromDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"FromDateLabel"):this.translate.instant("Entity_FromDate")}},{key:"ToDate_isVisible",get:function(){return!!this.definition.ToDateVisibility}},{key:"ToDate_isRequired",get:function(){return"Required"===this.definition.ToDateVisibility}},{key:"ToDate_label",get:function(){return this.definition.ToDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"ToDateLabel"):this.translate.instant("Entity_ToDate")}},{key:"Decimal1_isVisible",get:function(){return!!this.definition.Decimal1Visibility}},{key:"Decimal1_isRequired",get:function(){return"Required"===this.definition.Decimal1Visibility}},{key:"Decimal1_label",get:function(){return this.definition.Decimal1Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal1Label"):this.translate.instant("Entity_Decimal1")}},{key:"Decimal2_isVisible",get:function(){return!!this.definition.Decimal2Visibility}},{key:"Decimal2_isRequired",get:function(){return"Required"===this.definition.Decimal2Visibility}},{key:"Decimal2_label",get:function(){return this.definition.Decimal2Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal2Label"):this.translate.instant("Entity_Decimal2")}},{key:"Int1_isVisible",get:function(){return!!this.definition.Int1Visibility}},{key:"Int1_isRequired",get:function(){return"Required"===this.definition.Int1Visibility}},{key:"Int1_label",get:function(){return this.definition.Int1Label?this.ws.getMultilingualValueImmediate(this.definition,"Int1Label"):this.translate.instant("Entity_Int1")}},{key:"Int2_isVisible",get:function(){return!!this.definition.Int2Visibility}},{key:"Int2_isRequired",get:function(){return"Required"===this.definition.Int2Visibility}},{key:"Int2_label",get:function(){return this.definition.Int2Label?this.ws.getMultilingualValueImmediate(this.definition,"Int2Label"):this.translate.instant("Entity_Int2")}},{key:"Lookup1_isVisible",get:function(){return!!this.definition.Lookup1Visibility}},{key:"Lookup1_isRequired",get:function(){return"Required"===this.definition.Lookup1Visibility}},{key:"Lookup1_label",get:function(){return this.definition.Lookup1Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup1Label"):this.translate.instant("Entity_Lookup1")}},{key:"Lookup1_DefinitionId",get:function(){return this.definition.Lookup1DefinitionId}},{key:"Lookup2_isVisible",get:function(){return!!this.definition.Lookup2Visibility}},{key:"Lookup2_isRequired",get:function(){return"Required"===this.definition.Lookup2Visibility}},{key:"Lookup2_label",get:function(){return this.definition.Lookup2Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup2Label"):this.translate.instant("Entity_Lookup2")}},{key:"Lookup2_DefinitionId",get:function(){return this.definition.Lookup2DefinitionId}},{key:"Lookup3_isVisible",get:function(){return!!this.definition.Lookup3Visibility}},{key:"Lookup3_isRequired",get:function(){return"Required"===this.definition.Lookup3Visibility}},{key:"Lookup3_label",get:function(){return this.definition.Lookup3Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup3Label"):this.translate.instant("Entity_Lookup3")}},{key:"Lookup3_DefinitionId",get:function(){return this.definition.Lookup3DefinitionId}},{key:"Lookup4_isVisible",get:function(){return!!this.definition.Lookup4Visibility}},{key:"Lookup4_isRequired",get:function(){return"Required"===this.definition.Lookup4Visibility}},{key:"Lookup4_label",get:function(){return this.definition.Lookup4Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup4Label"):this.translate.instant("Entity_Lookup4")}},{key:"Lookup4_DefinitionId",get:function(){return this.definition.Lookup4DefinitionId}},{key:"Text1_isVisible",get:function(){return!!this.definition.Text1Visibility}},{key:"Text1_isRequired",get:function(){return"Required"===this.definition.Text1Visibility}},{key:"Text1_label",get:function(){return this.definition.Text1Label?this.ws.getMultilingualValueImmediate(this.definition,"Text1Label"):this.translate.instant("Entity_Text1")}},{key:"Text2_isVisible",get:function(){return!!this.definition.Text2Visibility}},{key:"Text2_isRequired",get:function(){return"Required"===this.definition.Text2Visibility}},{key:"Text2_label",get:function(){return this.definition.Text2Label?this.ws.getMultilingualValueImmediate(this.definition,"Text2Label"):this.translate.instant("Entity_Text2")}},{key:"ExternalReference_isVisible",get:function(){return!!this.definition.ExternalReferenceVisibility}},{key:"ExternalReference_isRequired",get:function(){return"Required"===this.definition.ExternalReferenceVisibility}},{key:"ExternalReference_label",get:function(){return this.definition.ExternalReferenceLabel?this.ws.getMultilingualValueImmediate(this.definition,"ExternalReferenceLabel"):this.translate.instant("Custody_ExternalReference")}},{key:"Location_isVisible",get:function(){return!!this.definition.LocationVisibility}},{key:"zoom",get:function(){return+localStorage.map_zoom||2},set:function(e){localStorage.map_zoom=e}},{key:"latitude",get:function(){return void 0===this._lat&&(this._lat=+localStorage.map_latitude||0),this._lat}},{key:"longitude",get:function(){return void 0===this._lng&&(this._lng=+localStorage.map_longitude||0),this._lng}},{key:"reports",get:function(){return this.definition.ReportDefinitions}},{key:"activeTabKey",get:function(){return"custodies_details_".concat(this.definitionId,"_activeTab")}},{key:"activeTab",get:function(){var e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.Location_isVisible?"location":this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]},set:function(e){this.ws.miscState[this.activeTabKey]=e}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||_E)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(i.e),r.Pb(i.a))},_E.\u0275cmp=r.Jb({type:_E,selectors:[["t-custodies-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[r.yb],decls:13,vars:2,consts:[["collection","Custody",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Custody",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions"],[3,"showHome"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 t-details-image-container",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"w-100"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"col-12","col-md-4","t-details-image-container"],[3,"metadata"],[1,"border"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../currencies",3,"itemId"],[3,"ngModel","required","ngModelChange"],["filter","CenterType eq 'BusinessUnit'",3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../centers",3,"itemId"],["filter","CenterType eq 'BusinessUnit'",3,"ngModel","required","ngModelChange"],[3,"ngModel","definitionIds","required","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionIds","required","ngModelChange"],[3,"ngModel","definitionId","required","ngModelChange",4,"ngIf"],[3,"ngModel","definitionId","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[1,"t-form-group",3,"label"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","location",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","location"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[2,"height","500px"],[1,"h-100","border-bottom","border-left","border-right"],["spellcheck","false",1,"form-control","t-input","p-1","h-100",2,"resize","none",3,"readonly","placeholder","ngModel","ngModelChange"],[1,"h-100",3,"latitude","longitude","zoom","mapTypeControl","panControl","streetViewControl","fitBounds","fitBoundsPadding","centerChange"],["type","max",3,"agmFitBounds","geoJson"],["type","min",3,"agmFitBounds","geoJson"],[3,"geoJson","style",4,"ngIf"],[1,"btn-group","btn-group-toggle","pt-1"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","locationView"],["icon","map-marker-alt"],[1,"d-none","d-md-inline"],["icon","code"],["style","margin-top: -40px",4,"ngIf"],[3,"geoJson"],[2,"margin-top","-40px"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"]],template:function(e,t){if(1&e&&(r.Rc(0,HV,1,31,"t-details",0),r.Rc(1,$V,1,1,"ng-template",null,1,r.Sc),r.Rc(3,GV,2,1,"ng-template",null,2,r.Sc),r.Rc(5,RE,35,36,"ng-template",null,3,r.Sc),r.Rc(7,DE,2,3,"ng-template",null,4,r.Sc),r.Rc(9,BE,2,3,"ng-template",null,5,r.Sc),r.Rc(11,SE,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,q.a,dn,Ce.a,we.a,ie.u,ie.k,ie.n,Tn.a,he,Ca,Zu,rd,lf,bb,xn,dd,df,X.v,X.A,X.x,X.y,X.w,ne.b,ie.c,qm,lg,am,rm,ke.a,x.t,ve.a,pa],pipes:[G.d,dg,sg],encapsulation:2}),_E),FE=n("GQwt"),AE=n("+NbP"),PE=((OE=function(){function e(){_classCallCheck(this,e),this.lastId=0}return _createClass(e,[{key:"getId",value:function(){return this.lastId++,this.lastId}}]),e}()).\u0275fac=function(e){return new(e||OE)},OE.\u0275prov=r.Lb({token:OE,factory:OE.\u0275fac,providedIn:"root"}),OE);function NE(e,t){1&e&&(r.Vb(0,"span",14),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NotSupportedForDisplay")," "))}function jE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",15),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)}}function WE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",16),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("minDecimalPlaces",i.minDecimalPlaces)("maxDecimalPlaces",i.maxDecimalPlaces)("noSeparator",i.noSeparator)}}function qE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",17),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("minDecimalPlaces",i.minDecimalPlaces)("maxDecimalPlaces",i.maxDecimalPlaces)("noSeparator",i.noSeparator)("isPercentage",!0)}}function QE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-serial-editor",18),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("prefix",i.prefix)("codeWidth",i.codeWidth)}}function HE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("calendar",i.calendar)("granularity",i.dateGranularity)}}function $E(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("calendar",i.calendar)}}function GE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("choices",i.choices)}}function zE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",22),r.Vb(1,"input",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub(),r.Vb(2,"label",24),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(1),r.tc("id",i.checkboxId),r.sc("ngModel",i.value),r.Bb(1),r.tc("for",i.checkboxId)}}function JE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-classifications-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function KE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-ifrs-concepts-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function YE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-types-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function XE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-accounts-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function ZE(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-agents-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function eU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",26),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("definitionIds",i.definitionIds)("showCreate",!1)("filter",i.filter)}}function tU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function nU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function iU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("definitionId",i.definitionId)("showCreate",!1)("filter",i.filter)}}function rU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-units-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function oU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custodies-picker",26),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("definitionIds",i.definitionIds)("showCreate",!1)("filter",i.filter)}}function cU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resources-picker",26),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("definitionIds",i.definitionIds)("showCreate",!1)("filter",i.filter)}}function aU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function lU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-roles-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function sU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-users-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function uU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relation-definitions-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function dU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custody-definitions-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function bU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resource-definitions-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function fU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookup-definitions-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function mU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-document-definitions-picker",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().value=e})),r.Ub()}if(2&e){var i=r.lc();r.sc("ngModel",i.value)("showCreate",!1)("filter",i.filter)}}function gU(e,t){if(1&e&&(r.Vb(0,"div",28),r.Tc(1),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.Vc(" TODO: control for '",n.desc.control,"'' ")}}var pU,hU=((pU=function(){function e(t){_classCallCheck(this,e),this.id=t,this.w100=!0,this.definitionIdArray=[],this.isDisabled=!1,this.onChangeFn=function(e){},this.onTouchedFn=function(){}}return _createClass(e,[{key:"initializeNewControl",value:function(e){if(e&&e.valueAccessor){var t=e.valueAccessor;t.writeValue(this.value),t.registerOnChange(this.onChangeFn),t.registerOnTouched(this.onTouchedFn),t.setDisabledState&&t.setDisabledState(this.isDisabled)}}},{key:"writeValue",value:function(e){this.value=e;var t=this.control;t&&t.valueAccessor&&t.valueAccessor.writeValue(this.value)}},{key:"registerOnChange",value:function(e){this.onChangeFn=e;var t=this.control;t&&t.valueAccessor&&t.valueAccessor.registerOnChange(this.onChangeFn)}},{key:"registerOnTouched",value:function(e){this.onTouchedFn=e;var t=this.control;t&&t.valueAccessor&&t.valueAccessor.registerOnTouched(this.onTouchedFn)}},{key:"setDisabledState",value:function(e){this.isDisabled=e;var t=this.control;t&&t.valueAccessor&&t.valueAccessor.setDisabledState&&t.valueAccessor.setDisabledState(this.isDisabled)}},{key:"validate",value:function(e){return this.control&&this.control.validator?this.control.validator(e):null}},{key:"control",get:function(){return this._control},set:function(e){this._control!==e&&(this._control=e,this.initializeNewControl(e))}},{key:"checkboxId",get:function(){return this._checkboxId||(this._checkboxId=this.id.getId()+""),this._checkboxId}},{key:"minDecimalPlaces",get:function(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.minDecimalPlaces:(console.error("Editor error: requesting minDecimalPlaces from a ".concat(this.desc.control)),0)}},{key:"maxDecimalPlaces",get:function(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.maxDecimalPlaces:(console.error("Editor error: requesting maxDecimalPlaces from a ".concat(this.desc.control)),0)}},{key:"noSeparator",get:function(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.noSeparator:(console.error("Editor error: requesting noSeparator from a ".concat(this.desc.control)),!0)}},{key:"prefix",get:function(){return"serial"===this.desc.control?this.desc.prefix:(console.error("Editor error: requesting prefix from a ".concat(this.desc.control)),"")}},{key:"codeWidth",get:function(){return"serial"===this.desc.control?this.desc.codeWidth:(console.error("Editor error: requesting codeWidth from a ".concat(this.desc.control)),4)}},{key:"choices",get:function(){return"choice"===this.desc.control?Object(Si.c)(this.desc):(console.error("Editor error: requesting choices from a ".concat(this.desc.control)),[])}},{key:"dateGranularity",get:function(){if("date"===this.desc.control)return this.desc.granularity;console.error("Editor error: requesting granularity from a ".concat(this.desc.control))}},{key:"dateTimeGranularity",get:function(){if("datetime"===this.desc.control)return this.desc.granularity;console.error("Editor error: requesting granularity from a ".concat(this.desc.control))}},{key:"calendar",get:function(){if("date"===this.desc.control||"datetime"===this.desc.control)return this.desc.calendar;console.error("Editor error: requesting calendar from a ".concat(this.desc.control))}},{key:"filter",get:function(){return this.desc.filter}},{key:"definitionId",get:function(){return this.desc.definitionId}},{key:"definitionIds",get:function(){var e=this.desc.definitionId;return this.definitionIdForArray!==e&&(this.definitionIdForArray=e,this.definitionIdArray=e?[e]:[]),this.definitionIdArray}}]),e}()).\u0275fac=function(e){return new(e||pU)(r.Pb(PE))},pU.\u0275cmp=r.Jb({type:pU,selectors:[["t-editor"]],viewQuery:function(e,t){var n;1&e&&r.Yc(ie.j,!0),2&e&&r.Ec(n=r.ic())&&(t.control=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("w-100",t.w100)},inputs:{desc:"desc"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:pU},{provide:ie.h,multi:!0,useExisting:pU}])],decls:31,vars:30,consts:[[3,"ngSwitch"],["class","font-italic text-muted",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","isPercentage","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","prefix","codeWidth","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","calendar","granularity","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","calendar","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","choices","ngModelChange",4,"ngSwitchCase"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngSwitchCase"],[3,"ngModel","showCreate","filter","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionIds","showCreate","filter","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionId","showCreate","filter","ngModelChange",4,"ngSwitchCase"],["class","text-danger font-weight-bold",4,"ngSwitchDefault"],[1,"font-italic","text-muted"],[3,"ngModel","ngModelChange"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","ngModelChange"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","isPercentage","ngModelChange"],[3,"ngModel","prefix","codeWidth","ngModelChange"],[3,"ngModel","calendar","granularity","ngModelChange"],[3,"ngModel","calendar","ngModelChange"],[3,"ngModel","choices","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModel","id","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[3,"ngModel","showCreate","filter","ngModelChange"],[3,"ngModel","definitionIds","showCreate","filter","ngModelChange"],[3,"ngModel","definitionId","showCreate","filter","ngModelChange"],[1,"text-danger","font-weight-bold"]],template:function(e,t){1&e&&(r.Tb(0,0),r.Rc(1,NE,3,3,"span",1),r.Rc(2,jE,1,1,"t-text-editor",2),r.Rc(3,WE,1,4,"t-decimal-editor",3),r.Rc(4,qE,1,5,"t-decimal-editor",4),r.Rc(5,QE,1,3,"t-serial-editor",5),r.Rc(6,HE,1,3,"t-date-picker",6),r.Rc(7,$E,1,2,"t-date-picker",7),r.Rc(8,GE,1,2,"t-selector",8),r.Rc(9,zE,4,3,"div",9),r.Rc(10,JE,1,3,"t-account-classifications-picker",10),r.Rc(11,KE,1,3,"t-ifrs-concepts-picker",10),r.Rc(12,YE,1,3,"t-account-types-picker",10),r.Rc(13,XE,1,3,"t-accounts-picker",10),r.Rc(14,ZE,1,3,"t-agents-picker",10),r.Rc(15,eU,1,4,"t-relations-picker",11),r.Rc(16,tU,1,3,"t-currencies-picker",10),r.Rc(17,nU,1,3,"t-entry-types-picker",10),r.Rc(18,iU,1,4,"t-lookups-picker",12),r.Rc(19,rU,1,3,"t-units-picker",10),r.Rc(20,oU,1,4,"t-custodies-picker",11),r.Rc(21,cU,1,4,"t-resources-picker",11),r.Rc(22,aU,1,3,"t-centers-picker",10),r.Rc(23,lU,1,3,"t-roles-picker",10),r.Rc(24,sU,1,3,"t-users-picker",10),r.Rc(25,uU,1,3,"t-relation-definitions-picker",10),r.Rc(26,dU,1,3,"t-custody-definitions-picker",10),r.Rc(27,bU,1,3,"t-resource-definitions-picker",10),r.Rc(28,fU,1,3,"t-lookup-definitions-picker",10),r.Rc(29,mU,1,3,"t-document-definitions-picker",10),r.Rc(30,gU,2,1,"div",13),r.Sb()),2&e&&(r.sc("ngSwitch",null==t.desc?null:t.desc.control),r.Bb(1),r.sc("ngSwitchCase","unsupported"),r.Bb(1),r.sc("ngSwitchCase","text"),r.Bb(1),r.sc("ngSwitchCase","number"),r.Bb(1),r.sc("ngSwitchCase","percent"),r.Bb(1),r.sc("ngSwitchCase","serial"),r.Bb(1),r.sc("ngSwitchCase","date"),r.Bb(1),r.sc("ngSwitchCase","datetime"),r.Bb(1),r.sc("ngSwitchCase","choice"),r.Bb(1),r.sc("ngSwitchCase","check"),r.Bb(1),r.sc("ngSwitchCase","AccountClassification"),r.Bb(1),r.sc("ngSwitchCase","IfrsConcept"),r.Bb(1),r.sc("ngSwitchCase","AccountType"),r.Bb(1),r.sc("ngSwitchCase","Account"),r.Bb(1),r.sc("ngSwitchCase","Agent"),r.Bb(1),r.sc("ngSwitchCase","Relation"),r.Bb(1),r.sc("ngSwitchCase","Currency"),r.Bb(1),r.sc("ngSwitchCase","EntryType"),r.Bb(1),r.sc("ngSwitchCase","Lookup"),r.Bb(1),r.sc("ngSwitchCase","Unit"),r.Bb(1),r.sc("ngSwitchCase","Custody"),r.Bb(1),r.sc("ngSwitchCase","Resource"),r.Bb(1),r.sc("ngSwitchCase","Center"),r.Bb(1),r.sc("ngSwitchCase","Role"),r.Bb(1),r.sc("ngSwitchCase","User"),r.Bb(1),r.sc("ngSwitchCase","RelationDefinition"),r.Bb(1),r.sc("ngSwitchCase","CustodyDefinition"),r.Bb(1),r.sc("ngSwitchCase","ResourceDefinition"),r.Bb(1),r.sc("ngSwitchCase","LookupDefinition"),r.Bb(1),r.sc("ngSwitchCase","DocumentDefinition"))},encapsulation:2}),pU),vU=["errorModal"];function yU(e,t){if(1&e&&(r.Vb(0,"div",20),r.Vb(1,"ul",21),r.Vb(2,"li",22),r.Tc(3),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc(" ",n.title," ")}}var IU=function(e){return{updateOn:e}};function CU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",28),r.Vb(1,"t-editor",29),r.hc("ngModelChange",(function(e){r.Ic(n);var i=t.$implicit;return r.lc(3).arguments[i.keyLower]=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).onArgumentChange()})),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.sc("label",i.label()+(i.isRequired?" *":"")),r.Bb(1),r.sc("ngModel",o.arguments[i.keyLower])("ngModelOptions",r.wc(5,IU,o.updateOn(i.desc)))("required",i.isRequired)("desc",i.desc)}}function wU(e,t){if(1&e&&(r.Vb(0,"div",25),r.Vb(1,"div",26),r.Rc(2,CU,2,7,"t-form-group",27),r.Ub(),r.Ub()),2&e){var n=r.lc(2);r.Bb(2),r.sc("ngForOf",n.parameters)}}function kU(e,t){if(1&e&&(r.Vb(0,"div",23),r.Rc(1,wU,3,1,"div",24),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.sc("ngIf",n.showParameters)}}function MU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",34),r.hc("click",(function(){r.Ic(n);var e=r.lc(2),t=r.Fc(25);return e.modalService.open(t)})),r.Tc(1),r.mc(2,"translate"),r.Ub()}2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"Description")," "))}function VU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",34),r.hc("click",(function(){return r.Ic(n),r.lc(2).onEdit()})),r.Tc(1),r.mc(2,"translate"),r.Ub()}2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"EditDefinition")," "))}function TU(e,t){if(1&e&&(r.Vb(0,"div",30),r.Vb(1,"button",31),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"div",32),r.Rc(5,MU,3,3,"button",33),r.Rc(6,VU,3,3,"button",33),r.Ub(),r.Ub()),2&e){var n=r.lc();r.sc("placement",n.actionsDropdownPlacement),r.Bb(2),r.Vc(" ",r.nc(3,4,"Data")," "),r.Bb(3),r.sc("ngIf",n.description),r.Bb(1),r.sc("ngIf",n.showEditDefinition)}}function EU(e,t){1&e&&r.Qb(0,"t-spinner",35)}function UU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",36),r.Vb(1,"div",37),r.Vb(2,"span",38),r.Vb(3,"span"),r.Tc(4),r.mc(5,"number"),r.Ub(),r.Tc(6," - "),r.Vb(7,"span"),r.Tc(8),r.mc(9,"number"),r.Ub(),r.Ub(),r.Vb(10,"span",38),r.Tc(11),r.Ub(),r.Ub(),r.Vb(12,"button",39),r.hc("click",(function(){return r.Ic(n),r.lc().onPreviousPage()})),r.mc(13,"translate"),r.Qb(14,"fa-icon",40),r.Ub(),r.Vb(15,"button",39),r.hc("click",(function(){return r.Ic(n),r.lc().onNextPage()})),r.mc(16,"translate"),r.Qb(17,"fa-icon",41),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(4),r.Uc(r.nc(5,9,i.from)),r.Bb(4),r.Uc(r.nc(9,11,i.to)),r.Bb(3),r.Vc(" / ",i.totalDisplay,""),r.Bb(1),r.tc("title",r.nc(13,13,"Previous")),r.sc("disabled",!i.canPreviousPage),r.Bb(2),r.sc("flip",i.flip),r.Bb(1),r.tc("title",r.nc(16,15,"Next")),r.sc("disabled",!i.canNextPage),r.Bb(2),r.sc("flip",i.flip)}}function xU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",42),r.hc("click",(function(){return r.Ic(n),r.lc().onToggleCollapseParameters()})),r.mc(1,"translate"),r.Qb(2,"fa-icon",43),r.Vb(3,"span",7),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.tc("title",r.nc(1,3,i.collapseParameters?"Expand":"Collapse")),r.Bb(2),r.sc("icon",i.collapseParameters?"angle-down":"angle-up"),r.Bb(2),r.Vc("\xa0\xa0",r.nc(5,5,i.collapseParameters?"Expand":"Collapse"),"")}}function RU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"label",46),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc(2).onView(e.view)})),r.mc(1,"translate"),r.Qb(2,"input",47),r.Qb(3,"fa-icon",43),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2);r.Gb("active",o.isActive(i.view)),r.tc("title",r.nc(1,5,i.label)),r.Bb(2),r.tc("name",i.view),r.Bb(1),r.sc("icon",i.icon)}}function DU(e,t){if(1&e&&(r.Vb(0,"div",44),r.Rc(1,RU,4,7,"label",45),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.sc("ngForOf",n.views)}}function BU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-report-results",48),r.hc("exportStarting",(function(){return r.Ic(n),r.lc().onExportStarting()}))("exportSuccess",(function(){return r.Ic(n),r.lc().onExportSuccess()}))("exportError",(function(e){return r.Ic(n),r.lc().onExportError(e)}))("orderbyChange",(function(){return r.Ic(n),r.lc().onOrderByChange()})),r.Ub()}if(2&e){var i=r.lc();r.sc("definition",i.definition)("arguments",i.immutableArguments)("view",i.view)("refresh",i.refresh)("export",i.export)("state",i.state)("mode",i.mode)("disableDrilldown",i.disableDrilldown)}}function SU(e,t){1&e&&(r.Vb(0,"div",49),r.Qb(1,"fa-icon",50),r.Tc(2),r.mc(3,"translate"),r.Ub()),2&e&&(r.Bb(2),r.Vc(" \xa0 ",r.nc(3,1,"FillRequiredFields")," "))}function _U(e,t){if(1&e&&(r.Vb(0,"div",51),r.Vb(1,"h5",52),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",53),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",54),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",55),r.Tc(8),r.Ub(),r.Vb(9,"div",56),r.Vb(10,"button",57),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(11,"fa-icon",58),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,3,"Description")," "),r.Bb(6),r.Vc(" ",n.description," "),r.Bb(4),r.Vc(" \xa0",r.nc(13,5,"OK")," ")}}function OU(e,t){if(1&e&&(r.Vb(0,"div",51),r.Vb(1,"h5",52),r.Qb(2,"fa-icon",59),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",53),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(6,"span",54),r.Tc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",55),r.Tc(9),r.Ub(),r.Vb(10,"div",56),r.Vb(11,"button",60),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(12,"fa-icon",61),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,3,"Error")," "),r.Bb(6),r.Vc(" ",n.errorMessage," "),r.Bb(4),r.Vc(" \xa0",r.nc(14,5,"Dismiss")," ")}}var LU,FU=((LU=function(){function e(t,n,i,r,o,c){_classCallCheck(this,e),this.workspace=t,this.translate=n,this.router=i,this.route=r,this.modalService=o,this.customUserSettings=c,this.mode="screen",this.disableDrilldown=!1,this.badDefinition=!1,this._parameterCount=null,this.refresh$=new U.a,this.export$=new U.a,this._currentParameters=[],this._views=[{view:ma.pivot,label:"Table",icon:"table"},{view:ma.chart,label:"Chart",icon:"chart-pie"}],this.arguments={},this.immutableArguments={},this.exportStatus=S.g.loaded}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._subscriptions=new O.a,this._subscriptions.add(this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");if(n&&e.workspace.currentTenant.definitions.Reports[n]||e.router.navigate(["page-not-found"],{relativeTo:e.route.parent,replaceUrl:!0}),e.definitionId!==n&&(e.definitionId=n),"Summary"===e.definition.Type){var i=t.get("view");i&&ma[i]&&(e.view=ma[i])}"Details"===e.definition.Type&&(e.state.skip=+t.get("skip")||0);var r,o=_createForOfIteratorHelper(e.parameters);try{for(o.s();!(r=o.n()).done;){var c=r.value,a=void 0;if(t.has(c.keyLower)){var l=t.get(c.keyLower);try{switch(c.datatype){case"datetimeoffset":var s=new Date(l);isNaN(s.getTime())||(a=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{7}Z$/.test(l)?l:s.toISOString().replace("Z","0000Z"));break;case"datetime":case"date":var u=new Date(l);isNaN(u.getTime())||(a=Object(Oi.d)(u));break;case"string":a=l;break;case"numeric":a=+l;break;case"bit":a="true"===l.toLowerCase();break;case"boolean":case"hierarchyid":case"geography":case"entity":case"null":default:console.error("Unsupported parameter datatype ".concat(c.datatype,"."))}}catch(d){console.error(d)}}e.arguments[c.keyLower]=a}}catch(b){o.e(b)}finally{o.f()}e.immutableArguments=Object.assign({},e.arguments)}}))),this.view=this.view||(this.definition.Chart&&this.definition.DefaultsToChart?ma.chart:ma.pivot)}},{key:"ngOnDestroy",value:function(){this._subscriptions.unsubscribe()}},{key:"urlStateChanged",value:function(){var e=this;if(this.isScreenMode){var t={};if(this.definition&&"Summary"===this.definition.Type&&(t.view=this.view),this.definition&&"Details"===this.definition.Type){var n=this.state;n.skip&&(t.skip=n.skip),n.orderbyKey&&(t.$orderby="".concat(n.orderbyKey," ").concat(n.orderbyDir))}this.parameters.forEach((function(n){var i=e.arguments[n.keyLower];Object(W.n)(i)&&(t[n.keyLower]=i+"")})),this.router.navigate([".",t],{relativeTo:this.route,replaceUrl:!0})}}},{key:"onOrderByChange",value:function(){this.urlStateChanged()}},{key:"choices",value:function(e){return Object(Si.c)(e)}},{key:"onExport",value:function(){var e=this.title;e&&(e+=".csv"),this.export$.next(e)}},{key:"onExportStarting",value:function(){this.exportStatus=S.g.loading}},{key:"onExportSuccess",value:function(){this.exportStatus=S.g.loaded}},{key:"onExportError",value:function(e){this.exportStatus=S.g.error,this.errorMessage=e,this.modalService.open(this.errorModal)}},{key:"onRefresh",value:function(){this.refresh$.next()}},{key:"onArgumentChange",value:function(){if(this.immutableArguments=Object.assign({},this.arguments),this.isScreenMode){for(var e={},t=0,n=Object.keys(this.arguments);t<n.length;t++){var i=n[t];Object(W.n)(this.arguments[i])&&(e[i]=this.arguments[i])}var r=JSON.stringify(e);this.customUserSettings.save("report/".concat(this.definitionId,"/arguments"),r)}this.urlStateChanged()}},{key:"updateOn",value:function(e){return Object(W.s)(e)}},{key:"isActive",value:function(e){return e===this.view}},{key:"onView",value:function(e){this.view=e,this.urlStateChanged()}},{key:"onSkipChange",value:function(e){this.urlStateChanged()}},{key:"onPreviousPage",value:function(){var e=this.state;e.skip=Math.max(e.skip-pa.DEFAULT_PAGE_SIZE,0),this.onSkipChange(e.skip),this.refresh$.next()}},{key:"onNextPage",value:function(){var e=this.state;e.skip=e.skip+pa.DEFAULT_PAGE_SIZE,this.onSkipChange(e.skip),this.refresh$.next()}},{key:"onEdit",value:function(){var e=this.workspace;e.isEdit=!0,this.router.navigate(["../../report-definitions",this.definitionId],{relativeTo:this.route}).then((function(t){t||delete e.isEdit})).catch((function(t){return delete e.isEdit}))}},{key:"onToggleCollapseParameters",value:function(){this.collapseParameters=!this.collapseParameters,window.dispatchEvent(new Event("resize"))}},{key:"showChart",get:function(){return this._showChart},set:function(e){this._showChart!==e&&(this.view=e?ma.chart:ma.pivot,this._showChart=e)}},{key:"isScreenMode",get:function(){return"screen"===this.mode}},{key:"isPreviewMode",get:function(){return"preview"===this.mode}},{key:"definition",get:function(){return this.isScreenMode?this.workspace.currentTenant.definitions.Reports[this.definitionId]:this.previewDefinition}},{key:"entityDescriptor",get:function(){if(!this.definition)return null;var e=this.definition.Collection;if(!e)return null;var t=Si.h[e];return t?t(this.workspace,this.translate,this.definition.DefinitionId):null}},{key:"apiEndpoint",get:function(){var e=this.entityDescriptor;return e?e.apiEndpoint:null}},{key:"state",get:function(){var e=this.stateKey,t=this.workspace.currentTenant.reportState;return t[e]||(t[e]=new S.j),t[e]}},{key:"stateKey",get:function(){return"screen"===this.mode?this.definitionId.toString():"".concat(this.definition.Id||"new","/preview")}},{key:"title",get:function(){return this.workspace.currentTenant.getMultilingualValueImmediate(this.definition,"Title")}},{key:"views",get:function(){return this._views}},{key:"parameters",get:function(){if(this.definition!==this._currentDefinition||this.entityDescriptor!==this._currentEntityDescriptor){if(this._currentDefinition=this.definition,this._currentEntityDescriptor=this.entityDescriptor,this._currentParameters=[],this.definition)try{var e=gr.getReportInfos(this.definition,this.workspace,this.translate).parameters;this._currentParameters=e,this.badDefinition=!1}catch(t){this.badDefinition=!0}this._currentParameters.length!==this._parameterCount&&null!==this._parameterCount&&this.isChart&&window.dispatchEvent(new Event("resize")),this._parameterCount=this._currentParameters.length}return this._currentParameters}},{key:"actionsDropdownPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}},{key:"canExport",get:function(){return!0}},{key:"showExportSpinner",get:function(){return this.exportStatus===S.g.loading}},{key:"showReportViewToggle",get:function(){return!!this.definition&&"Summary"===this.definition.Type&&!!this.definition.Chart}},{key:"isChart",get:function(){return this.view===ma.chart&&!!this.definition&&"Summary"===this.definition.Type}},{key:"showParametersSection",get:function(){return this.showParameters&&!this.collapseParameters}},{key:"showParameters",get:function(){return this.parameters.length>0}},{key:"areAllRequiredParamsSpecified",get:function(){var e=this.arguments;return this.parameters.every((function(t){return!t.isRequired||Object(W.n)(e[t.keyLower])}))}},{key:"showPreview",get:function(){return this.badDefinition||this.areAllRequiredParamsSpecified}},{key:"disableRefresh",get:function(){return this.badDefinition||!this.areAllRequiredParamsSpecified}},{key:"refresh",get:function(){return this.refresh$}},{key:"export",get:function(){return this.export$}},{key:"showPagingControls",get:function(){return!!this.definition&&"Details"===this.definition.Type&&!this.definition.Top}},{key:"skip",get:function(){return this.showPagingControls?this.state.skip:0}},{key:"from",get:function(){return Math.min(this.state.skip+1,this.total)}},{key:"to",get:function(){var e=this.state;return Math.min(e.skip+pa.DEFAULT_PAGE_SIZE,e.total)}},{key:"total",get:function(){return this.state.total}},{key:"totalDisplay",get:function(){var e=this.total;return e>=S.d?Object(x.L)(S.d-1,"en-GB")+"+":Object(x.L)(e,"en-GB")}},{key:"canPreviousPage",get:function(){return this.state.skip>0}},{key:"canNextPage",get:function(){return this.to<this.total}},{key:"flip",get:function(){return this.workspace.ws.isRtl?"horizontal":null}},{key:"overflow",get:function(){return this.isChart?"hidden":"auto"}},{key:"description",get:function(){return this.workspace.currentTenant.getMultilingualValueImmediate(this.definition,"Description")}},{key:"showEditDefinition",get:function(){return this.isScreenMode&&this.workspace.currentTenant.canDo("report-definitions","Update",null)}},{key:"showDataDropdown",get:function(){return!!this.description||this.showEditDefinition}},{key:"collapseParameters",get:function(){return this.state.collapseParams},set:function(e){var t=this.state;t.collapseParams!==e&&(t.collapseParams=e)}}]),e}()).\u0275fac=function(e){return new(e||LU)(r.Pb(S.m),r.Pb(G.e),r.Pb(i.e),r.Pb(i.a),r.Pb(X.t),r.Pb(ee.a))},LU.\u0275cmp=r.Jb({type:LU,selectors:[["t-report"]],viewQuery:function(e,t){var n;1&e&&r.Oc(vU,!0),2&e&&r.Ec(n=r.ic())&&(t.errorModal=n.first)},inputs:{mode:"mode",disableDrilldown:"disableDrilldown",previewDefinition:"previewDefinition",showChart:"showChart"},decls:28,vars:19,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],["class","mx-auto mb-3 w-100","style","max-width: 700px",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","btn-group t-toolbar-button","ngbDropdown","",3,"placement",4,"ngIf"],["class","t-vertical-align-middle mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],["class","d-inline",4,"ngIf"],["class","btn btn-sm t-toolbar-button btn-light t-white-button font-weight-normal","type","button",3,"title","click",4,"ngIf"],["class","btn-group btn-group-toggle t-toolbar-button",4,"ngIf"],[1,"row","t-rest-of-screen"],["class","h-100 w-100",3,"definition","arguments","view","refresh","export","state","mode","disableDrilldown","exportStarting","exportSuccess","exportError","orderbyChange",4,"ngIf","ngIfElse"],["fillRequiredFields",""],["descModal",""],["errorModal",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"row","m-0","px-0","px-lg-1","py-1"],["class","t-form-group",3,"label",4,"ngFor","ngForOf"],[1,"t-form-group",3,"label"],[3,"ngModel","ngModelOptions","required","desc","ngModelChange"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[1,"t-vertical-align-middle","mx-1"],[1,"d-inline"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],["class","btn btn-sm btn-light t-pointer",3,"active","title","click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio",3,"name"],[1,"h-100","w-100",3,"definition","arguments","view","refresh","export","state","mode","disableDrilldown","exportStarting","exportSuccess","exportError","orderbyChange"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"],["icon","check"],["icon","exclamation-triangle",1,"text-danger"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Rc(2,yU,4,1,"div",2),r.Rc(3,kU,2,1,"div",3),r.Vb(4,"div",4),r.Vb(5,"div"),r.Vb(6,"button",5),r.hc("click",(function(){return t.onExport()})),r.Qb(7,"fa-icon",6),r.Vb(8,"span",7),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Ub(),r.Rc(11,TU,7,6,"div",8),r.Rc(12,EU,1,0,"t-spinner",9),r.Ub(),r.Vb(13,"div"),r.Vb(14,"button",10),r.hc("click",(function(){return t.onRefresh()})),r.mc(15,"translate"),r.Qb(16,"fa-icon",11),r.Ub(),r.Rc(17,UU,18,17,"div",12),r.Rc(18,xU,6,7,"button",13),r.Rc(19,DU,2,1,"div",14),r.Ub(),r.Ub(),r.Ub(),r.Vb(20,"div",15),r.Rc(21,BU,1,8,"t-report-results",16),r.Rc(22,SU,4,3,"ng-template",null,17,r.Sc),r.Ub(),r.Ub(),r.Rc(24,_U,14,7,"ng-template",null,18,r.Sc),r.Rc(26,OU,15,7,"ng-template",null,19,r.Sc)),2&e){var n=r.Fc(23);r.Bb(2),r.sc("ngIf",!!t.title),r.Bb(1),r.sc("ngIf",t.showParametersSection),r.Bb(3),r.sc("disabled",!t.canExport),r.Bb(3),r.Vc("\xa0\xa0",r.nc(10,15,"Export"),""),r.Bb(2),r.sc("ngIf",t.showDataDropdown),r.Bb(1),r.sc("ngIf",t.showExportSpinner),r.Bb(2),r.tc("title",r.nc(15,17,"Refresh")),r.sc("disabled",t.disableRefresh),r.Bb(3),r.sc("ngIf",t.showPagingControls),r.Bb(1),r.sc("ngIf",t.showParameters),r.Bb(1),r.sc("ngIf",t.showReportViewToggle),r.Bb(1),r.Qc("overflow",t.overflow),r.Bb(1),r.sc("ngIf",t.showPreview)("ngIfElse",n)}},directives:[x.u,ne.b,x.t,Ce.a,hU,ie.k,ie.n,ie.u,X.l,X.r,X.p,X.o,ye.a,pa],pipes:[G.d,x.g],encapsulation:2}),LU);function AU(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Vc("",n.options.minDecimalPlaces,"\u200c")}}var PU=function(){return{updateOn:"blur"}};function NU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",6),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).options.minDecimalPlaces=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc(2);r.sc("ngModel",i.options.minDecimalPlaces)("ngModelOptions",r.vc(2,PU))}}function jU(e,t){if(1&e&&(r.Vb(0,"div",2),r.Vb(1,"label",3),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,AU,2,1,"div",4),r.Rc(5,NU,1,3,"ng-template",null,5,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"ControlOptions_minDecimalPlaces")),r.Bb(2),r.sc("ngIf",!i.isEdit)("ngIfElse",n)}}function WU(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Vc("",n.options.maxDecimalPlaces,"\u200c")}}function qU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",9),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).options.maxDecimalPlaces=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc(2);r.sc("ngModel",i.options.maxDecimalPlaces)("ngModelOptions",r.vc(2,PU))}}function QU(e,t){if(1&e&&(r.Vb(0,"div",2),r.Vb(1,"label",7),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,WU,2,1,"div",4),r.Rc(5,qU,1,3,"ng-template",null,8,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"ControlOptions_maxDecimalPlaces")),r.Bb(2),r.sc("ngIf",!i.isEdit)("ngIfElse",n)}}function HU(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Vc("",n.options.prefix,"\u200c")}}function $U(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",12),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).options.prefix=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc(2);r.sc("ngModel",i.options.prefix)("ngModelOptions",r.vc(2,PU))}}function GU(e,t){if(1&e&&(r.Vb(0,"div",2),r.Vb(1,"label",10),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,HU,2,1,"div",4),r.Rc(5,$U,1,3,"ng-template",null,11,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"ControlOptions_prefix")),r.Bb(2),r.sc("ngIf",!i.isEdit)("ngIfElse",n)}}function zU(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Vc("",n.options.codeWidth,"\u200c")}}function JU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",15),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).options.codeWidth=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc(2);r.sc("ngModel",i.options.codeWidth)("ngModelOptions",r.vc(2,PU))}}function KU(e,t){if(1&e&&(r.Vb(0,"div",2),r.Vb(1,"label",13),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,zU,2,1,"div",4),r.Rc(5,JU,1,3,"ng-template",null,14,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"ControlOptions_codeWidth")),r.Bb(2),r.sc("ngIf",!i.isEdit)("ngIfElse",n)}}function YU(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Vc("",n.options.filter,"\u200c")}}function XU(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",18),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).options.filter=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc(2);r.sc("ngModel",i.options.filter)("ngModelOptions",r.vc(2,PU))}}function ZU(e,t){if(1&e&&(r.Vb(0,"div",2),r.Vb(1,"label",16),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,YU,2,1,"div",4),r.Rc(5,XU,1,3,"ng-template",null,17,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"ControlOptions_filter")),r.Bb(2),r.sc("ngIf",!i.isEdit)("ngIfElse",n)}}function ex(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Vc("",n.definitionIdDisplay(n.options.definitionId),"\u200c")}}function tx(e,t){if(1&e&&(r.Vb(0,"option",25),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function nx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",21,22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).setDefId(e)})),r.Qb(2,"option",23),r.Rc(3,tx,2,2,"option",24),r.Ub()}if(2&e){var i=r.lc(2);r.sc("ngModel",i.options.definitionId),r.Bb(3),r.sc("ngForOf",i.definitionIdOptions)}}function ix(e,t){if(1&e&&(r.Vb(0,"div",2),r.Vb(1,"label",19),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,ex,2,1,"div",4),r.Rc(5,nx,4,2,"ng-template",null,20,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"ControlOptions_definitionId")),r.Bb(2),r.sc("ngIf",!i.isEdit)("ngIfElse",n)}}function rx(e,t){1&e&&r.Qb(0,"th",35)}function ox(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Uc(r.nc(2,1,"Name")+n.ws.secondaryPostfix)}}function cx(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Uc(r.nc(2,1,"Name")+n.ws.ternaryPostfix)}}function ax(e,t){1&e&&r.Qb(0,"th",35)}function lx(e,t){1&e&&(r.Vb(0,"td",42),r.Tc(1,"\u200c"),r.Ub())}function sx(e,t){if(1&e&&(r.Vb(0,"div",43),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(2);r.Bb(1),r.Vc(" ",i.ws.getMultilingualValueImmediate(n,"name")||n.value,"\u200c")}}function ux(e,t){1&e&&(r.Vb(0,"td",44),r.Qb(1,"fa-icon",45),r.Ub())}function dx(e,t){if(1&e&&(r.Tb(0),r.Tc(1),r.Sb()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Vc(" ",n.value,"")}}function bx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.value=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc().$implicit;r.sc("ngModel",i.value)("ngModelOptions",r.vc(2,PU))}}function fx(e,t){if(1&e&&(r.Tb(0),r.Tc(1),r.Sb()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Vc(" ",n.name,"")}}function mx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.name=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc().$implicit;r.sc("ngModel",i.name)("ngModelOptions",r.vc(2,PU))}}function gx(e,t){if(1&e&&(r.Tb(0),r.Tc(1),r.Sb()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Vc(" ",n.name2,"")}}function px(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.name2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(4).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc(2).$implicit;r.sc("ngModel",i.name2)("ngModelOptions",r.vc(2,PU))}}function hx(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,gx,2,1,"ng-container",4),r.Rc(2,px,1,3,"ng-template",null,47,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(3);r.Gb("p-0",i.isEdit),r.Bb(1),r.sc("ngIf",!i.isEdit)("ngIfElse",n)}}function vx(e,t){if(1&e&&(r.Tb(0),r.Tc(1),r.Sb()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Vc(" ",n.name3,"")}}function yx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.name3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(4).onOptionsChange()})),r.Ub()}if(2&e){var i=r.lc(2).$implicit;r.sc("ngModel",i.name3)("ngModelOptions",r.vc(2,PU))}}function Ix(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,vx,2,1,"ng-container",4),r.Rc(2,yx,1,3,"ng-template",null,48,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(3);r.Gb("p-0",i.isEdit),r.Bb(1),r.sc("ngIf",!i.isEdit)("ngIfElse",n)}}function Cx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td"),r.Vb(1,"button",49),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(2);return t.onDeleteRow(e,t.options.choices)})),r.Qb(2,"fa-icon",50),r.Ub(),r.Ub()}}function wx(e,t){if(1&e&&(r.Vb(0,"tr",36),r.Rc(1,lx,2,0,"td",37),r.Rc(2,sx,2,1,"div",38),r.Rc(3,ux,2,0,"td",39),r.Vb(4,"td"),r.Rc(5,dx,2,1,"ng-container",4),r.Rc(6,bx,1,3,"ng-template",null,23,r.Sc),r.Ub(),r.Vb(8,"td"),r.Rc(9,fx,2,1,"ng-container",4),r.Rc(10,mx,1,3,"ng-template",null,40,r.Sc),r.Ub(),r.Rc(12,hx,4,4,"td",41),r.Rc(13,Ix,4,4,"td",41),r.Rc(14,Cx,3,0,"td",30),r.Ub()),2&e){var n=r.Fc(7),i=r.Fc(11),o=r.lc(2);r.Bb(3),r.sc("ngIf",o.isEdit),r.Bb(1),r.Gb("p-0",o.isEdit),r.Bb(1),r.sc("ngIf",!o.isEdit)("ngIfElse",n),r.Bb(3),r.Gb("p-0",o.isEdit),r.Bb(1),r.sc("ngIf",!o.isEdit)("ngIfElse",i),r.Bb(3),r.sc("ngIf",o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("ngIf",o.isEdit)}}function kx(e,t){1&e&&(r.Vb(0,"div",51),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function Mx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",52),r.hc("click",(function(){return r.Ic(n),r.lc(2).onInsertChoice()})),r.Qb(1,"fa-icon",53),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}var Vx=function(){return[]};function Tx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",26),r.Vb(1,"label",10),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"table",27),r.Vb(5,"thead",28),r.Vb(6,"tr"),r.Rc(7,rx,1,0,"th",29),r.Vb(8,"th"),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Vb(11,"th"),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Rc(14,ox,3,3,"th",30),r.Rc(15,cx,3,3,"th",30),r.Rc(16,ax,1,0,"th",29),r.Ub(),r.Ub(),r.Vb(17,"tbody",31),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc();return t.rowDrop(e,t.options.choices)})),r.Rc(18,wx,15,12,"tr",32),r.Ub(),r.Ub(),r.Rc(19,kx,3,3,"div",33),r.Rc(20,Mx,4,3,"button",34),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Uc(r.nc(3,11,"ControlOptions_choices")),r.Bb(5),r.sc("ngIf",i.isEdit),r.Bb(2),r.Uc(r.nc(10,13,"ControlOptions_value")),r.Bb(3),r.Uc(r.nc(13,15,"Name")+i.ws.primaryPostfix),r.Bb(2),r.sc("ngIf",i.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",i.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("ngIf",i.isEdit),r.Bb(1),r.sc("cdkDropListDisabled",!i.isEdit),r.Bb(1),r.sc("ngForOf",i.options.choices||r.vc(17,Vx)),r.Bb(1),r.sc("ngIf",!(i.isEdit||null!=i.options.choices&&i.options.choices.length)),r.Bb(1),r.sc("ngIf",i.isEdit)}}var Ex,Ux=((Ex=function(){function e(t){_classCallCheck(this,e),this.workspace=t,this.classValue="row m-0",this.options={},this.isDisabled=!1,this.onChangeFn=function(e){},this.onTouchedFn=function(){}}return _createClass(e,[{key:"ngOnChanges",value:function(e){}},{key:"writeValue",value:function(e){if(this.optionsJSON=e,e)try{this.options=JSON.parse(e)}catch(t){console.error("Failed to parse ControlOptions JSON",t),this.options={}}else this.options={}}},{key:"registerOnChange",value:function(e){this.onChangeFn=e}},{key:"registerOnTouched",value:function(e){this.onTouchedFn=e}},{key:"setDisabledState",value:function(e){this.isDisabled=e}},{key:"onOptionsChange",value:function(){for(var e=0,t=Object.keys(this.options);e<t.length;e++){var n=t[e];Object(W.n)(this.options[n])&&0!==this.options[n].length||delete this.options[n]}this.onTouchedFn(),this.optionsJSON=JSON.stringify(this.options),this.onChangeFn("{}"===this.optionsJSON?void 0:this.optionsJSON)}},{key:"definitionIdDisplay",value:function(e){var t=this.ws,n=t.definitions;switch(this.control){case"Document":return t.getMultilingualValueImmediate(n.Documents[e],"TitleSingular");case"Resource":return t.getMultilingualValueImmediate(n.Resources[e],"TitleSingular");case"Custody":return t.getMultilingualValueImmediate(n.Custodies[e],"TitleSingular");case"Relation":return t.getMultilingualValueImmediate(n.Relations[e],"TitleSingular");case"Lookup":return t.getMultilingualValueImmediate(n.Lookups[e],"TitleSingular");default:return e}}},{key:"setDefId",value:function(e){e?this.options.definitionId=+e:delete this.options.definitionId,this.onOptionsChange()}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t,e.previousIndex,e.currentIndex),this.onOptionsChange()}},{key:"onDeleteRow",value:function(e,t){var n=t.indexOf(e);n>=0&&t.splice(n,1),this.onOptionsChange()}},{key:"onInsertRow",value:function(e,t){var n=t?t():{};e.push(n),this.onOptionsChange()}},{key:"onInsertChoice",value:function(){this.options.choices=this.options.choices||[],this.onInsertRow(this.options.choices)}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"showDecimalPlaces",get:function(){return"number"===this.control||"percent"===this.control}},{key:"showPrefix",get:function(){return"serial"===this.control}},{key:"showCodeWidth",get:function(){return"serial"===this.control}},{key:"definitionIdOptions",get:function(){var e=this.ws,t=e.definitions,n=this.control;if(this._definitionIdOptionsDefs!==t||this._definitionIdOptionsControl!==n){var i;switch(this._definitionIdOptionsDefs=t,this._definitionIdOptionsControl=n,n){case"Document":i=Object.keys(t.Documents).map((function(n){var i=t.Documents[n];return{value:+n,name:function(){return e.getMultilingualValueImmediate(i,"TitleSingular")}}}));break;case"Resource":i=Object.keys(t.Resources).map((function(n){var i=t.Resources[n];return{value:+n,name:function(){return e.getMultilingualValueImmediate(i,"TitleSingular")}}}));break;case"Custody":i=Object.keys(t.Custodies).map((function(n){var i=t.Custodies[n];return{value:+n,name:function(){return e.getMultilingualValueImmediate(i,"TitleSingular")}}}));break;case"Relation":i=Object.keys(t.Relations).map((function(n){var i=t.Relations[n];return{value:+n,name:function(){return e.getMultilingualValueImmediate(i,"TitleSingular")}}}));break;case"Lookup":i=Object.keys(t.Lookups).map((function(n){var i=t.Lookups[n];return{value:+n,name:function(){return e.getMultilingualValueImmediate(i,"TitleSingular")}}}));break;default:i=[]}this._definitionIdOptionsResult=i}return this._definitionIdOptionsResult}},{key:"showDefinitionId",get:function(){switch(this.control){case"Document":case"Resource":case"Custody":case"Relation":case"Lookup":return!0}return!1}},{key:"showFilter",get:function(){return!!this.control&&!!Si.h[this.control]}},{key:"showChoices",get:function(){return"choice"===this.control}}]),e}()).\u0275fac=function(e){return new(e||Ex)(r.Pb(S.m))},Ex.\u0275cmp=r.Jb({type:Ex,selectors:[["t-control-options"]],hostVars:2,hostBindings:function(e,t){2&e&&r.Db(t.classValue)},inputs:{control:"control",isEdit:"isEdit"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:Ex}]),r.zb],decls:7,vars:7,consts:[["class","form-group col-12 col-sm-6 t-text-whitish",4,"ngIf"],["class","form-group t-wide-form-group t-text-whitish",4,"ngIf"],[1,"form-group","col-12","col-sm-6","t-text-whitish"],["for","mindecimalplaces",1,"small"],[4,"ngIf","ngIfElse"],["mindecimalplaces",""],["id","mindecimalplaces","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","maxdecimalplaces",1,"small"],["maxdecimalplaces",""],["id","maxdecimalplaces","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","prefix",1,"small"],["prefix",""],["id","prefix","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","codewidth",1,"small"],["codewidth",""],["id","codewidth","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","filter",1,"small"],["filter",""],["id","filter","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","definitionid",1,"small"],["definitionid",""],["id","definitionid",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionid","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-group","t-wide-form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[1,"small","font-weight-normal"],["style","width: 1px;",4,"ngIf"],[4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","font-italic mx-2",4,"ngIf"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal",3,"click",4,"ngIf"],[2,"width","1px"],["cdkDrag","","cdkDragLockAxis","y"],["colspan","1000",4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","","class","px-2","style","cursor: move;",4,"ngIf"],["name",""],[3,"p-0",4,"ngIf"],["colspan","1000"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name2",""],["name3",""],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],[1,"font-italic","mx-2"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],["icon","plus"]],template:function(e,t){1&e&&(r.Rc(0,jU,7,5,"div",0),r.Rc(1,QU,7,5,"div",0),r.Rc(2,GU,7,5,"div",0),r.Rc(3,KU,7,5,"div",0),r.Rc(4,ZU,7,5,"div",0),r.Rc(5,ix,7,5,"div",0),r.Rc(6,Tx,21,18,"div",1)),2&e&&(r.sc("ngIf",t.showDecimalPlaces),r.Bb(1),r.sc("ngIf",t.showDecimalPlaces),r.Bb(1),r.sc("ngIf",t.showPrefix),r.Bb(1),r.sc("ngIf",t.showCodeWidth),r.Bb(1),r.sc("ngIf",t.showFilter),r.Bb(1),r.sc("ngIf",t.showDefinitionId),r.Bb(1),r.sc("ngIf",t.showChoices))},directives:[x.u,ie.q,ie.c,ie.k,ie.n,ie.v,ie.p,ie.x,x.t,Q.f,Q.b,Q.d,Q.e,Q.c,ne.b],pipes:[G.d],encapsulation:2}),Ex),xx=["dimensionConfigModal"],Rx=["measureConfigModal"],Dx=["selectConfigModal"],Bx=["paramConfigModal"],Sx=["totalLabelsModal"];function _x(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Title",i.ws)||r.nc(2,1,"Untitled"))}}function Ox(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",92),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleFields()})),r.Vb(1,"div",93),r.Qb(2,"fa-icon",94),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Fields"))}}function Lx(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function Fx(e,t){1&e&&r.Rb(0)}function Ax(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function Px(e,t){1&e&&r.Rb(0)}var Nx=function(e,t){return{control:e,serverErrors:t}};function jx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",96),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"select",97,98),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.DefinitionId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionIdChange(e)})),r.Qb(6,"option",99),r.Rc(7,Ax,2,2,"option",21),r.Ub(),r.Rc(8,Px,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.DefinitionId)),r.Bb(2),r.Uc(r.nc(3,7,"ReportDefinition_DefinitionId")),r.Bb(2),r.sc("ngModel",o.DefinitionId),r.Bb(3),r.sc("ngForOf",c.allDefinitionIds(o)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(9,Nx,i,null==o.serverErrors?null:o.serverErrors.DefinitionId))}}function Wx(e,t){1&e&&(r.Vb(0,"div",105),r.Tc(1," \xa0 "),r.Ub())}function qx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",100),r.hc("dblclick",(function(){r.Ic(n);var e=t.$implicit;return r.lc(3).copyPathToClipboard(e.path)})),r.Vb(1,"div",101),r.Vb(2,"div",102),r.Vb(3,"button",103),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.index,o=r.lc(2).model;return r.lc().onExpand(e,i,o)})),r.Qb(4,"fa-icon",30),r.Ub(),r.Vb(5,"span",48),r.Tc(6),r.Ub(),r.Ub(),r.Rc(7,Wx,2,0,"div",104),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(1),r.Gb("d-none",!o.showTreeNode(i)),r.Bb(1),r.Qc("padding-left",o.paddingLeft(i))("padding-right",o.paddingRight(i)),r.Bb(1),r.Qc("opacity",o.hasChildren(i)?1:0)("cursor",o.hasChildren(i)?null:"inherit"),r.sc("disabled",!o.hasChildren(i)),r.Bb(1),r.sc("flip",o.flipNode(i))("rotate",o.rotateNode(i)),r.Bb(2),r.Uc(i.desc.label())}}function Qx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",92),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleDefinition()})),r.Vb(1,"div",93),r.Qb(2,"fa-icon",94),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Definition"))}}function Hx(e,t){1&e&&r.Qb(0,"fa-icon",106)}function $x(e,t){1&e&&r.Rb(0)}function Gx(e,t){1&e&&r.Rb(0)}function zx(e,t){1&e&&r.Rb(0)}function Jx(e,t){1&e&&r.Rb(0)}var Kx=function(){return{updateOn:"blur"}};function Yx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",107),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",108,109),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Title2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Title2")})),r.Ub(),r.Rc(6,Jx,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Title2)),r.Bb(2),r.Uc(r.nc(3,7,"Title")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.Title2)("ngModelOptions",r.vc(9,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,Nx,i,null==o.serverErrors?null:o.serverErrors.Title2))}}function Xx(e,t){1&e&&r.Rb(0)}function Zx(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",110),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"textarea",111,112),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Description2")})),r.Ub(),r.Rc(6,Xx,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Description2)),r.Bb(2),r.Uc(r.nc(3,7,"Description")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.Description2)("ngModelOptions",r.vc(9,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,Nx,i,null==o.serverErrors?null:o.serverErrors.Description2))}}function eR(e,t){1&e&&r.Rb(0)}function tR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",113),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",114,115),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Title3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Title3")})),r.Ub(),r.Rc(6,eR,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Title3)),r.Bb(2),r.Uc(r.nc(3,7,"Title")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.Title3)("ngModelOptions",r.vc(9,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,Nx,i,null==o.serverErrors?null:o.serverErrors.Title3))}}function nR(e,t){1&e&&r.Rb(0)}function iR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",116),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"textarea",117,118),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Description3")})),r.Ub(),r.Rc(6,nR,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Description3)),r.Bb(2),r.Uc(r.nc(3,7,"Description")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.Description3)("ngModelOptions",r.vc(9,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,Nx,i,null==o.serverErrors?null:o.serverErrors.Description3))}}function rR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function oR(e,t){1&e&&(r.Vb(0,"div",119),r.Vb(1,"span",120),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"DragFieldsHere")))}function cR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function aR(e,t){1&e&&(r.Vb(0,"div",127),r.Tc(1," \u200c "),r.Ub())}function lR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",121),r.Vb(1,"div",122),r.Rc(2,cR,1,0,"fa-icon",31),r.Vb(3,"span",123),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub(),r.Vb(6,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureRow(e,i)})),r.mc(7,"translate"),r.Qb(8,"fa-icon",124),r.Ub(),r.Tc(9," \xa0 "),r.Vb(10,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteRow(e,i)})),r.mc(11,"translate"),r.Qb(12,"fa-icon",125),r.Ub(),r.Ub(),r.Rc(13,aR,2,0,"div",126),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.dimensionErrors(i)),r.Bb(3),r.Vc(" ",i.KeyExpression," "),r.Bb(1),r.sc("title",r.nc(7,4,"Configure")),r.Bb(4),r.sc("title",r.nc(11,6,"Delete"))}}function sR(e,t){1&e&&(r.Vb(0,"div",119),r.Vb(1,"span",120),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"DragFieldsHere")))}function uR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function dR(e,t){1&e&&(r.Vb(0,"div",127),r.Tc(1," \u200c "),r.Ub())}function bR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",121),r.Vb(1,"div",122),r.Rc(2,uR,1,0,"fa-icon",31),r.Vb(3,"span",123),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub(),r.Vb(6,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureColumn(e,i)})),r.mc(7,"translate"),r.Qb(8,"fa-icon",124),r.Ub(),r.Tc(9," \xa0 "),r.Vb(10,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteColumn(e,i)})),r.mc(11,"translate"),r.Qb(12,"fa-icon",125),r.Ub(),r.Ub(),r.Rc(13,dR,2,0,"div",126),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.dimensionErrors(i)),r.Bb(3),r.Vc(" ",i.KeyExpression," "),r.Bb(1),r.sc("title",r.nc(7,4,"Configure")),r.Bb(4),r.sc("title",r.nc(11,6,"Delete"))}}function fR(e,t){1&e&&(r.Vb(0,"div",119),r.Vb(1,"span",120),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"DragFieldsHere")))}function mR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function gR(e,t){1&e&&(r.Vb(0,"div",127),r.Tc(1," \u200c "),r.Ub())}function pR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",121),r.Vb(1,"div",122),r.Rc(2,mR,1,0,"fa-icon",31),r.Vb(3,"span",123),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub(),r.Vb(6,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureMeasure(e,i)})),r.mc(7,"translate"),r.Qb(8,"fa-icon",124),r.Ub(),r.Tc(9," \xa0 "),r.Vb(10,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteMeasure(e,i)})),r.mc(11,"translate"),r.Qb(12,"fa-icon",125),r.Ub(),r.Ub(),r.Rc(13,gR,2,0,"div",126),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(3),r.Vc(" ",i.Expression," "),r.Bb(1),r.sc("title",r.nc(7,4,"Configure")),r.Bb(4),r.sc("title",r.nc(11,6,"Delete"))}}function hR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",71),r.Vb(1,"input",128),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ShowColumnsTotal=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(2,"label",129),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(1),r.sc("ngModel",i.ShowColumnsTotal),r.Bb(2),r.Uc(r.nc(4,2,"ReportDefinition_ShowColumnsTotal"))}}function vR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",71),r.Vb(1,"input",130),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ShowRowsTotal=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(2,"label",131),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(1),r.sc("ngModel",i.ShowRowsTotal),r.Bb(2),r.Uc(r.nc(4,2,"ReportDefinition_ShowRowsTotal"))}}function yR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function IR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",132),r.Vb(1,"button",133),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onConfigureTotalLabels(e)})),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,yR,1,0,"fa-icon",31),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.Bb(2),r.Vc("",r.nc(3,2,"CustomizeLabels"),"..."),r.Bb(2),r.sc("ngIf",o.customizeLabelsErrors(i))}}function CR(e,t){1&e&&(r.Vb(0,"div",119),r.Vb(1,"span",120),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"DragFieldsHere")))}function wR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function kR(e,t){1&e&&(r.Vb(0,"div",127),r.Tc(1," \u200c "),r.Ub())}function MR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",121),r.Vb(1,"div",122),r.Rc(2,wR,1,0,"fa-icon",31),r.Vb(3,"span",123),r.Tc(4),r.Ub(),r.Vb(5,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureSelect(e,i)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",124),r.Ub(),r.Tc(8," \xa0 "),r.Vb(9,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteSelect(e,i)})),r.mc(10,"translate"),r.Qb(11,"fa-icon",125),r.Ub(),r.Ub(),r.Rc(12,kR,2,0,"div",126),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(2),r.Vc(" ",i.Expression," "),r.Bb(1),r.sc("title",r.nc(6,4,"Configure")),r.Bb(4),r.sc("title",r.nc(10,6,"Delete"))}}function VR(e,t){1&e&&r.Rb(0)}function TR(e,t){1&e&&r.Rb(0)}function ER(e,t){1&e&&r.Qb(0,"fa-icon",106)}function UR(e,t){1&e&&r.Rb(0)}function xR(e,t){1&e&&r.Rb(0)}function RR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",134),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"textarea",135,136),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Having=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onHavingChanged(e)})),r.mc(6,"translate"),r.Ub(),r.Rc(7,xR,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Having)),r.Bb(2),r.Uc(r.nc(3,8,"ReportDefinition_Having")),r.Bb(2),r.sc("ngModel",o.Having)("ngModelOptions",r.vc(12,Kx))("placeholder",r.nc(6,10,"Expression")),r.Bb(3),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(13,Nx,i,null==o.serverErrors?null:o.serverErrors.Having))}}function DR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function BR(e,t){1&e&&(r.Vb(0,"div",127),r.Tc(1," \u200c "),r.Ub())}function SR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",121),r.Vb(1,"div",122),r.Rc(2,DR,1,0,"fa-icon",31),r.Vb(3,"span",123),r.Tc(4),r.Ub(),r.Vb(5,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(3).model;return r.lc().onConfigureParameter(e,i)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",124),r.Ub(),r.Ub(),r.Rc(8,BR,2,0,"div",126),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(4);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(2),r.Vc(" ","@"+i.Key," "),r.Bb(1),r.sc("title",r.nc(6,3,"Configure"))}}function _R(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",48),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"div",137),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc(2).model;return r.lc().drop(e,t)})),r.Rc(5,SR,9,5,"div",54),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"ReportDefinition_Parameters")),r.Bb(2),r.sc("cdkDropListData",o.getParameters(i)),r.Bb(1),r.sc("ngForOf",o.getParameters(i))}}function OR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function LR(e,t){1&e&&(r.Vb(0,"div",119),r.Vb(1,"span",120),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"DragFieldsHere")))}function FR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function AR(e,t){1&e&&(r.Vb(0,"div",127),r.Tc(1," \u200c "),r.Ub())}function PR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",121),r.Vb(1,"div",122),r.Rc(2,FR,1,0,"fa-icon",31),r.Vb(3,"span",123),r.Tc(4),r.Ub(),r.Vb(5,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureSelect(e,i)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",124),r.Ub(),r.Tc(8," \xa0 "),r.Vb(9,"button",49),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteSelect(e,i)})),r.mc(10,"translate"),r.Qb(11,"fa-icon",125),r.Ub(),r.Ub(),r.Rc(12,AR,2,0,"div",126),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(2),r.Vc(" ",i.Expression," "),r.Bb(1),r.sc("title",r.nc(6,4,"Configure")),r.Bb(4),r.sc("title",r.nc(10,6,"Delete"))}}function NR(e,t){1&e&&r.Rb(0)}function jR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function WR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",29),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleSection("Chart")})),r.Tc(1," \xa0 "),r.Qb(2,"fa-icon",30),r.Tc(3),r.mc(4,"translate"),r.Rc(5,jR,1,0,"fa-icon",31),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.Bb(2),r.sc("flip",o.flipIcon(o.showSection("Chart")))("rotate",o.rotateIcon(o.showSection("Chart"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(4,4,"Chart")," "),r.Bb(2),r.sc("ngIf",o.chartSectionErrors(i))}}function qR(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function QR(e,t){1&e&&r.Rb(0)}function HR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",71),r.Vb(1,"input",141),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.DefaultsToChart=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onDefinitionChange(e,"DefaultsToChart")})),r.Ub(),r.Vb(2,"label",142),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3).model;r.Bb(1),r.sc("ngModel",i.DefaultsToChart),r.Bb(2),r.Uc(r.nc(4,2,"ReportDefinition_DefaultsToChart"))}}function $R(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",32),r.Vb(1,"div",17),r.Vb(2,"label",138),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",139,140),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).model;return r.lc().onChartChange(e,t)})),r.Qb(7,"option",99),r.Rc(8,qR,2,2,"option",21),r.Ub(),r.Rc(9,QR,1,0,"ng-container",22),r.Ub(),r.Rc(10,HR,5,4,"div",57),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("d-none",!c.showSection("Chart")),r.Bb(1),r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Chart)),r.Bb(2),r.Uc(r.nc(4,10,"ReportDefinition_Chart")),r.Bb(2),r.sc("ngModel",o.Chart),r.Bb(3),r.sc("ngForOf",c.allCharts),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(12,Nx,i,null==o.serverErrors?null:o.serverErrors.Chart)),r.Bb(1),r.sc("ngIf",!!o.Chart)}}function GR(e,t){1&e&&r.Qb(0,"fa-icon",106)}function zR(e,t){1&e&&r.Rb(0)}function JR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td",147),r.Vb(2,"t-roles-picker",148,149),r.hc("ngModelChange",(function(e){return r.Ic(n),t.$implicit.RoleId=e})),r.Ub(),r.Rc(4,zR,1,0,"ng-container",22),r.Ub(),r.Vb(5,"td"),r.Vb(6,"button",150),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(3).model;return r.lc().onDeleteRole(i,e)})),r.Qb(7,"fa-icon",151),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.Fc(3);r.lc(4);var c=r.Fc(7);r.Bb(2),r.sc("ngModel",i.RoleId)("showCreate",!1),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(4,Nx,o,null==i||null==i.serverErrors?null:i.serverErrors.Key))}}function KR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",143),r.Vb(1,"label",48),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"table",144),r.Vb(5,"tbody"),r.Rc(6,JR,8,7,"tr",145),r.Ub(),r.Ub(),r.Vb(7,"button",146),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onInsertRole(e)})),r.Qb(8,"fa-icon",50),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(2),r.Uc(r.nc(3,3,"ForMembersOfRoles")),r.Bb(4),r.sc("ngForOf",i.Roles),r.Bb(3),r.Vc("\xa0\xa0",r.nc(10,5,"Add")," ")}}function YR(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function XR(e,t){1&e&&r.Rb(0)}function ZR(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",161),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(3).model;return r.lc().onIconClick(i,e)})),r.Qb(1,"fa-icon",162),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3).model;r.Gb("t-highlighted",i.value===o.MainMenuIcon),r.sc("title",i.value),r.Bb(1),r.sc("icon",i.value)}}function eD(e,t){1&e&&r.Rb(0)}function tD(e,t){1&e&&r.Rb(0)}var nD=function(e){return{control:null,serverErrors:e}};function iD(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",17),r.Vb(2,"label",152),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",153,154),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.MainMenuSection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"MainMenuSection")})),r.Qb(7,"option",99),r.Rc(8,YR,2,2,"option",21),r.Ub(),r.Rc(9,XR,1,0,"ng-container",22),r.Ub(),r.Vb(10,"div",17),r.Vb(11,"label",155),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Vb(14,"div",156),r.Rc(15,ZR,2,4,"div",157),r.Ub(),r.Rc(16,eD,1,0,"ng-container",22),r.Ub(),r.Vb(17,"div",17),r.Vb(18,"label",158),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"input",159,160),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.MainMenuSortKey=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"MainMenuSortKey")})),r.Ub(),r.Rc(23,tD,1,0,"ng-container",22),r.Ub(),r.Sb()}if(2&e){var i=r.Fc(6),o=r.Fc(22),c=r.lc(2).model,a=r.lc(),l=r.Fc(7);r.Bb(3),r.Uc(r.nc(4,14,"MainMenuSection")),r.Bb(2),r.sc("ngModel",c.MainMenuSection),r.Bb(3),r.sc("ngForOf",a.allMainMenuSections),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.xc(20,Nx,i,null==c.serverErrors?null:c.serverErrors.MainMenuSection)),r.Bb(3),r.Uc(r.nc(13,16,"MainMenuIcon")),r.Bb(3),r.sc("ngForOf",a.allMainMenuIcons),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.wc(23,nD,null==c.serverErrors?null:c.serverErrors.MainMenuIcon)),r.Bb(3),r.Uc(r.nc(20,18,"MainMenuSortKey")),r.Bb(2),r.sc("ngModel",c.MainMenuSortKey)("ngModelOptions",r.vc(25,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.xc(26,Nx,o,null==c.serverErrors?null:c.serverErrors.MainMenuSortKey))}}function rD(e,t){1&e&&(r.Vb(0,"div",163),r.Vb(1,"div",164),r.Vb(2,"span"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Ub()),2&e&&(r.Bb(3),r.Uc(r.nc(4,1,"Preview")))}var oD=function(e,t,n,i,r){return[e,t,n,i,r]},cD=function(e,t,n){return[e,t,n]},aD=function(e){return[e]};function lD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",10),r.Rc(1,Ox,6,4,"div",11),r.Vb(2,"div",12),r.Vb(3,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleFields()})),r.Vb(4,"span"),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Vb(7,"div",14),r.Qb(8,"fa-icon",15),r.Ub(),r.Ub(),r.Vb(9,"div",16),r.Vb(10,"div",17),r.Vb(11,"label",18),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Vb(14,"select",19,20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Collection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCollectionChange(e)})),r.Rc(16,Lx,2,2,"option",21),r.Ub(),r.Rc(17,Fx,1,0,"ng-container",22),r.Ub(),r.Rc(18,jx,9,12,"div",23),r.Qb(19,"hr"),r.Vb(20,"div",17),r.Vb(21,"input",24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).search=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onSearchChanged(e)})),r.mc(22,"translate"),r.Ub(),r.Ub(),r.Vb(23,"div",25,26),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().drop(e,t)})),r.Rc(25,qx,8,14,"div",27),r.Ub(),r.Ub(),r.Ub(),r.Rc(26,Qx,6,4,"div",11),r.Vb(27,"div",12),r.Vb(28,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleDefinition()})),r.Vb(29,"span"),r.Tc(30),r.mc(31,"translate"),r.Ub(),r.Vb(32,"div",14),r.Qb(33,"fa-icon",15),r.Ub(),r.Ub(),r.Vb(34,"div",28),r.Vb(35,"div",29),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Title")})),r.Tc(36," \xa0 "),r.Qb(37,"fa-icon",30),r.Tc(38),r.mc(39,"translate"),r.Rc(40,Hx,1,0,"fa-icon",31),r.Ub(),r.Vb(41,"div",32),r.Vb(42,"div",17),r.Vb(43,"label",33),r.Tc(44),r.mc(45,"translate"),r.Ub(),r.Vb(46,"input",34,35),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Code")})),r.Ub(),r.Rc(48,$x,1,0,"ng-container",22),r.Ub(),r.Vb(49,"div",17),r.Vb(50,"label",36),r.Tc(51),r.mc(52,"translate"),r.Ub(),r.Vb(53,"input",37,38),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Title=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Title")})),r.Ub(),r.Rc(55,Gx,1,0,"ng-container",22),r.Ub(),r.Vb(56,"div",17),r.Vb(57,"label",39),r.Tc(58),r.mc(59,"translate"),r.Ub(),r.Vb(60,"textarea",40,41),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Description=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Description")})),r.Ub(),r.Rc(62,zx,1,0,"ng-container",22),r.Ub(),r.Rc(63,Yx,7,13,"div",23),r.Rc(64,Zx,7,13,"div",23),r.Rc(65,tR,7,13,"div",23),r.Rc(66,iR,7,13,"div",23),r.Ub(),r.Vb(67,"div",29),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Data")})),r.Tc(68," \xa0 "),r.Qb(69,"fa-icon",30),r.Tc(70),r.mc(71,"translate"),r.Rc(72,rR,1,0,"fa-icon",31),r.Ub(),r.Vb(73,"div",32),r.Vb(74,"div",17),r.Vb(75,"label",42),r.Tc(76),r.mc(77,"translate"),r.Ub(),r.Vb(78,"div",43),r.Vb(79,"input",44),r.hc("change",(function(){r.Ic(n);var e=r.lc().model,t=r.lc();return e.Type="Summary",t.onDefinitionChange(e)})),r.Ub(),r.Vb(80,"label",45),r.Tc(81),r.mc(82,"translate"),r.Ub(),r.Ub(),r.Tc(83," \xa0\xa0 "),r.Vb(84,"div",43),r.Vb(85,"input",46),r.hc("change",(function(){r.Ic(n);var e=r.lc().model,t=r.lc();return e.Type="Details",t.onDefinitionChange(e)})),r.Ub(),r.Vb(86,"label",47),r.Tc(87),r.mc(88,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Vb(89,"div"),r.Vb(90,"div",17),r.Vb(91,"label",48),r.Tc(92),r.mc(93,"translate"),r.Ub(),r.Tc(94,"\xa0 "),r.Vb(95,"button",49),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateRow(e)})),r.mc(96,"translate"),r.Qb(97,"fa-icon",50),r.Ub(),r.Vb(98,"div",51,52),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().drop(e,t)})),r.Rc(100,oR,4,3,"div",53),r.Rc(101,lR,14,8,"div",54),r.Ub(),r.Ub(),r.Vb(102,"div",17),r.Vb(103,"label",48),r.Tc(104),r.mc(105,"translate"),r.Ub(),r.Tc(106,"\xa0 "),r.Vb(107,"button",49),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateColumn(e)})),r.mc(108,"translate"),r.Qb(109,"fa-icon",50),r.Ub(),r.Vb(110,"div",51,55),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().drop(e,t)})),r.Rc(112,sR,4,3,"div",53),r.Rc(113,bR,14,8,"div",54),r.Ub(),r.Ub(),r.Vb(114,"div",17),r.Vb(115,"label",48),r.Tc(116),r.mc(117,"translate"),r.Ub(),r.Tc(118,"\xa0 "),r.Vb(119,"button",49),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateMeasure(e)})),r.mc(120,"translate"),r.Qb(121,"fa-icon",50),r.Ub(),r.Vb(122,"div",51,56),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().drop(e,t)})),r.Rc(124,fR,4,3,"div",53),r.Rc(125,pR,14,8,"div",54),r.Ub(),r.Ub(),r.Rc(126,hR,5,4,"div",57),r.Rc(127,vR,5,4,"div",57),r.Rc(128,IR,5,4,"div",58),r.Ub(),r.Vb(129,"div"),r.Vb(130,"div",17),r.Vb(131,"label",48),r.Tc(132),r.mc(133,"translate"),r.Ub(),r.Tc(134,"\xa0 "),r.Vb(135,"button",49),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateSelect(e)})),r.mc(136,"translate"),r.Qb(137,"fa-icon",50),r.Ub(),r.Vb(138,"div",59,60),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().drop(e,t)})),r.Rc(140,CR,4,3,"div",53),r.Rc(141,MR,13,8,"div",54),r.Ub(),r.Ub(),r.Vb(142,"div",17),r.Vb(143,"label",61),r.Tc(144),r.mc(145,"translate"),r.Ub(),r.Vb(146,"input",62,63),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.OrderBy=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(148,VR,1,0,"ng-container",22),r.Ub(),r.Vb(149,"div",17),r.Vb(150,"label",64),r.Tc(151),r.mc(152,"translate"),r.Ub(),r.Vb(153,"input",65,66),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Top=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(155,TR,1,0,"ng-container",22),r.Ub(),r.Ub(),r.Ub(),r.Vb(156,"div",29),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Filter")})),r.Tc(157," \xa0 "),r.Qb(158,"fa-icon",30),r.Tc(159),r.mc(160,"translate"),r.Rc(161,ER,1,0,"fa-icon",31),r.Ub(),r.Vb(162,"div",32),r.Vb(163,"div",17),r.Vb(164,"label",67),r.Tc(165),r.mc(166,"translate"),r.Ub(),r.Vb(167,"textarea",68,69),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Filter=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onFilterChanged(e)})),r.mc(169,"translate"),r.Ub(),r.Rc(170,UR,1,0,"ng-container",22),r.Ub(),r.Rc(171,RR,8,16,"div",23),r.Rc(172,_R,6,5,"div",70),r.Ub(),r.Vb(173,"div"),r.Vb(174,"div",29),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Drilldown")})),r.Tc(175," \xa0 "),r.Qb(176,"fa-icon",30),r.Tc(177),r.mc(178,"translate"),r.Rc(179,OR,1,0,"fa-icon",31),r.Ub(),r.Vb(180,"div",32),r.Vb(181,"div",71),r.Vb(182,"input",72),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.IsCustomDrilldown=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(183,"label",73),r.Tc(184),r.mc(185,"translate"),r.Ub(),r.Ub(),r.Vb(186,"div",74),r.Vb(187,"div",17),r.Vb(188,"label",48),r.Tc(189),r.mc(190,"translate"),r.Ub(),r.Tc(191,"\xa0 "),r.Vb(192,"button",49),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateSelect(e)})),r.mc(193,"translate"),r.Qb(194,"fa-icon",50),r.Ub(),r.Vb(195,"div",59,75),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().drop(e,t)})),r.Rc(197,LR,4,3,"div",53),r.Rc(198,PR,13,8,"div",54),r.Ub(),r.Ub(),r.Vb(199,"div",17),r.Vb(200,"label",76),r.Tc(201),r.mc(202,"translate"),r.Ub(),r.Vb(203,"input",77,63),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.OrderBy=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onOrderByChanged(e)})),r.Ub(),r.Rc(205,NR,1,0,"ng-container",22),r.Ub(),r.Vb(206,"div",71),r.Vb(207,"input",78),r.hc("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().togglePreviewDrilldown(e)}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(208,"label",79),r.Tc(209),r.mc(210,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Rc(211,WR,6,6,"div",80),r.Rc(212,$R,11,15,"div",81),r.Vb(213,"div",29),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("MainMenu")})),r.Tc(214," \xa0 "),r.Qb(215,"fa-icon",30),r.Tc(216),r.mc(217,"translate"),r.Rc(218,GR,1,0,"fa-icon",31),r.Ub(),r.Vb(219,"div",32),r.Vb(220,"div",82),r.Vb(221,"input",83),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ShowInMainMenu=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"ShowInMainMenu")})),r.Ub(),r.Vb(222,"label",84),r.Tc(223),r.mc(224,"translate"),r.Ub(),r.Ub(),r.Rc(225,KR,11,7,"div",85),r.Rc(226,iD,24,29,"ng-container",86),r.Ub(),r.Ub(),r.Ub(),r.Vb(227,"div",87),r.Rc(228,rD,5,3,"div",88),r.Vb(229,"div",89),r.Vb(230,"div",90),r.Qb(231,"t-report",91),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(15),o=r.Fc(24),c=r.Fc(47),a=r.Fc(54),l=r.Fc(61),s=r.Fc(99),u=r.Fc(111),d=r.Fc(123),b=r.Fc(139),f=r.Fc(147),m=r.Fc(154),g=r.Fc(168),p=r.Fc(196),h=r.lc(),v=h.isEdit,y=h.model,I=r.lc(),C=r.Fc(7);r.Bb(1),r.sc("ngIf",v&&I.collapseFields),r.Bb(1),r.Gb("d-flex",v&&!I.collapseFields)("d-none",!v||I.collapseFields),r.Bb(3),r.Uc(r.nc(6,173,"Fields")),r.Bb(3),r.sc("flip",I.flipIcon(!1)),r.Bb(2),r.Gb("is-invalid",I.invalid(i,null==y.serverErrors?null:y.serverErrors.Collection)),r.Bb(2),r.Uc(r.nc(13,175,"ReportDefinition_Collection")),r.Bb(2),r.sc("ngModel",y.Collection),r.Bb(2),r.sc("ngForOf",I.allCollections),r.Bb(1),r.sc("ngTemplateOutlet",C)("ngTemplateOutletContext",r.xc(239,Nx,i,null==y.serverErrors?null:y.serverErrors.Collection)),r.Bb(1),r.sc("ngIf",I.showDefinitionIdSelector(y)),r.Bb(3),r.sc("ngModel",I.search)("placeholder",r.nc(22,177,"Search")+"..."),r.Bb(2),r.sc("cdkDropListConnectedTo",r.Ac(242,oD,s,u,d,b,p))("cdkDropListData",I.allFields(y)),r.Bb(2),r.sc("ngForOf",I.allFields(y)),r.Bb(1),r.sc("ngIf",v&&I.collapseDefinition),r.Bb(1),r.Gb("d-flex",v&&!I.collapseDefinition)("d-none",!v||I.collapseDefinition),r.Bb(3),r.Uc(r.nc(31,179,"Definition")),r.Bb(3),r.sc("flip",I.flipIcon(!1)),r.Bb(4),r.sc("flip",I.flipIcon(I.showSection("Title")))("rotate",I.rotateIcon(I.showSection("Title"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(39,181,"Title")," "),r.Bb(2),r.sc("ngIf",I.titleSectionErrors(y)),r.Bb(1),r.Gb("d-none",!I.showSection("Title")),r.Bb(1),r.Gb("is-invalid",I.invalid(c,null==y.serverErrors?null:y.serverErrors.Code)),r.Bb(2),r.Uc(r.nc(45,183,"Code")),r.Bb(2),r.sc("ngModel",y.Code)("ngModelOptions",r.vc(248,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",C)("ngTemplateOutletContext",r.xc(249,Nx,c,null==y.serverErrors?null:y.serverErrors.Code)),r.Bb(1),r.Gb("is-invalid",I.invalid(a,null==y.serverErrors?null:y.serverErrors.Title)),r.Bb(2),r.Uc(r.nc(52,185,"Title")+I.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",y.Title)("ngModelOptions",r.vc(252,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",C)("ngTemplateOutletContext",r.xc(253,Nx,a,null==y.serverErrors?null:y.serverErrors.Title)),r.Bb(1),r.Gb("is-invalid",I.invalid(l,null==y.serverErrors?null:y.serverErrors.Description)),r.Bb(2),r.Uc(r.nc(59,187,"Description")+I.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",y.Description)("ngModelOptions",r.vc(256,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",C)("ngTemplateOutletContext",r.xc(257,Nx,l,null==y.serverErrors?null:y.serverErrors.Description)),r.Bb(1),r.sc("ngIf",null==I.ws.settings?null:I.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==I.ws.settings?null:I.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==I.ws.settings?null:I.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("ngIf",null==I.ws.settings?null:I.ws.settings.TernaryLanguageId),r.Bb(3),r.sc("flip",I.flipIcon(I.showSection("Data")))("rotate",I.rotateIcon(I.showSection("Data"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(71,189,"Data")," "),r.Bb(2),r.sc("ngIf",I.dataSectionErrors(y)),r.Bb(1),r.Gb("d-none",!I.showSection("Data")),r.Bb(3),r.Uc(r.nc(77,191,"ReportDefinition_Type")),r.Bb(3),r.sc("checked","Summary"===y.Type),r.Bb(2),r.Uc(r.nc(82,193,"ReportDefinition_Type_Summary")),r.Bb(4),r.sc("checked","Details"===y.Type),r.Bb(2),r.Uc(r.nc(88,195,"ReportDefinition_Type_Details")),r.Bb(2),r.Gb("d-none","Summary"!==y.Type),r.Bb(3),r.Uc(r.nc(93,197,"ReportDefinition_Rows")),r.Bb(3),r.sc("title",r.nc(96,199,"Create")),r.Bb(3),r.sc("cdkDropListConnectedTo",r.yc(260,cD,o,u,d))("cdkDropListData",I.getRows(y)),r.Bb(2),r.sc("ngIf",!I.getRows(y).length),r.Bb(1),r.sc("ngForOf",I.getRows(y)),r.Bb(3),r.Uc(r.nc(105,201,"ReportDefinition_Columns")),r.Bb(3),r.sc("title",r.nc(108,203,"Create")),r.Bb(3),r.sc("cdkDropListConnectedTo",r.yc(264,cD,o,s,d))("cdkDropListData",I.getColumns(y)),r.Bb(2),r.sc("ngIf",!I.getColumns(y).length),r.Bb(1),r.sc("ngForOf",I.getColumns(y)),r.Bb(3),r.Uc(r.nc(117,205,"ReportDefinition_Measures")),r.Bb(3),r.sc("title",r.nc(120,207,"Create")),r.Bb(3),r.sc("cdkDropListConnectedTo",r.yc(268,cD,o,s,u))("cdkDropListData",I.getMeasures(y)),r.Bb(2),r.sc("ngIf",!I.getMeasures(y).length),r.Bb(1),r.sc("ngForOf",I.getMeasures(y)),r.Bb(1),r.sc("ngIf",!(null==y.Columns||!y.Columns.length)),r.Bb(1),r.sc("ngIf",!(null==y.Rows||!y.Rows.length)),r.Bb(1),r.sc("ngIf",!(null==y.Rows||!y.Rows.length)&&y.ShowRowsTotal||!(null==y.Columns||!y.Columns.length)&&y.ShowColumnsTotal),r.Bb(1),r.Gb("d-none","Details"!==y.Type),r.Bb(3),r.Uc(r.nc(133,209,"ReportDefinition_Select")),r.Bb(3),r.sc("title",r.nc(136,211,"Create")),r.Bb(3),r.sc("cdkDropListConnectedTo",r.wc(272,aD,o))("cdkDropListData",I.getSelect(y)),r.Bb(2),r.sc("ngIf",!I.getSelect(y).length),r.Bb(1),r.sc("ngForOf",I.getSelect(y)),r.Bb(1),r.Gb("is-invalid",I.invalid(f,null==y.serverErrors?null:y.serverErrors.OrderBy)),r.Bb(2),r.Uc(r.nc(145,213,"ReportDefinition_OrderBy")),r.Bb(2),r.sc("ngModel",y.OrderBy)("ngModelOptions",r.vc(274,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",C)("ngTemplateOutletContext",r.xc(275,Nx,f,null==y.serverErrors?null:y.serverErrors.OrderBy)),r.Bb(1),r.Gb("is-invalid",I.invalid(m,null==y.serverErrors?null:y.serverErrors.Top)),r.Bb(2),r.Uc(r.nc(152,215,"ReportDefinition_Top")),r.Bb(2),r.sc("ngModel",y.Top)("ngModelOptions",r.vc(278,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",C)("ngTemplateOutletContext",r.xc(279,Nx,m,null==y.serverErrors?null:y.serverErrors.Top)),r.Bb(3),r.sc("flip",I.flipIcon(I.showSection("Filter")))("rotate",I.rotateIcon(I.showSection("Filter"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(160,217,"Filter")," "),r.Bb(2),r.sc("ngIf",I.filterSectionErrors(y)),r.Bb(1),r.Gb("d-none",!I.showSection("Filter")),r.Bb(1),r.Gb("is-invalid",I.invalid(g,null==y.serverErrors?null:y.serverErrors.Filter)),r.Bb(2),r.Uc(r.nc(166,219,"ReportDefinition_Filter")),r.Bb(2),r.sc("ngModel",y.Filter)("ngModelOptions",r.vc(282,Kx))("placeholder",r.nc(169,221,"Expression")),r.Bb(3),r.sc("ngTemplateOutlet",C)("ngTemplateOutletContext",r.xc(283,Nx,g,null==y.serverErrors?null:y.serverErrors.Filter)),r.Bb(1),r.sc("ngIf",I.showHaving(y)),r.Bb(1),r.sc("ngIf",!!I.getParameters(y).length),r.Bb(1),r.Gb("d-none","Summary"!==y.Type),r.Bb(3),r.sc("flip",I.flipIcon(I.showSection("Drilldown")))("rotate",I.rotateIcon(I.showSection("Drilldown"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(178,223,"Drilldown")," "),r.Bb(2),r.sc("ngIf",I.drilldownSectionErrors(y)),r.Bb(1),r.Gb("d-none",!I.showSection("Drilldown")),r.Bb(2),r.sc("ngModel",y.IsCustomDrilldown),r.Bb(2),r.Uc(r.nc(185,225,"ReportDefinition_IsCustomDrilldown")),r.Bb(2),r.Gb("d-none",!y.IsCustomDrilldown),r.Bb(3),r.Uc(r.nc(190,227,"ReportDefinition_Select")),r.Bb(3),r.sc("title",r.nc(193,229,"Create")),r.Bb(3),r.sc("cdkDropListConnectedTo",r.wc(286,aD,o))("cdkDropListData",I.getSelect(y)),r.Bb(2),r.sc("ngIf",!I.getSelect(y).length),r.Bb(1),r.sc("ngForOf",I.getSelect(y)),r.Bb(1),r.Gb("is-invalid",I.invalid(f,null==y.serverErrors?null:y.serverErrors.OrderBy)),r.Bb(2),r.Uc(r.nc(202,231,"ReportDefinition_OrderBy")),r.Bb(2),r.sc("ngModel",y.OrderBy)("ngModelOptions",r.vc(288,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",C)("ngTemplateOutletContext",r.xc(289,Nx,f,null==y.serverErrors?null:y.serverErrors.OrderBy)),r.Bb(2),r.sc("ngModel",I.previewDrilldown),r.Bb(2),r.Uc(r.nc(210,233,"Preview")),r.Bb(2),r.sc("ngIf","Summary"===y.Type),r.Bb(1),r.sc("ngIf","Summary"===y.Type),r.Bb(3),r.sc("flip",I.flipIcon(I.showSection("MainMenu")))("rotate",I.rotateIcon(I.showSection("MainMenu"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(217,235,"MainMenu")," "),r.Bb(2),r.sc("ngIf",I.mainMenuSectionErrors(y)),r.Bb(1),r.Gb("d-none",!I.showSection("MainMenu")),r.Bb(2),r.sc("ngModel",y.ShowInMainMenu),r.Bb(2),r.Uc(r.nc(224,237,"Definition_ShowInMainMenu")),r.Bb(2),r.sc("ngIf",y.ShowInMainMenu),r.Bb(1),r.sc("ngIf",y.ShowInMainMenu),r.Bb(2),r.sc("ngIf",v),r.Bb(3),r.sc("previewDefinition",I.getForClient(y))("showChart",y.DefaultsToChart)("disableDrilldown",I.isPopupMode)}}function sD(e,t){if(1&e&&r.Rc(0,lD,232,292,"div",9),2&e){var n=t.isEdit,i=r.lc();r.sc("ngIf",i.watchIsEdit(n))}}function uD(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function dD(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",165),r.Rc(2,uD,2,1,"span",145),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(2),r.sc("ngForOf",c.errors(i,o))}}function bD(e,t){if(1&e&&r.Rc(0,dD,3,1,"ng-container",86),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}function fD(e,t){1&e&&r.Rb(0)}function mD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",195),r.Vb(1,"button",196),r.Vb(2,"span",48),r.Qb(3,"fa-icon",197),r.Ub(),r.Ub(),r.Vb(4,"div",198),r.Vb(5,"div",71),r.Vb(6,"input",199),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).dimToEdit.Localize=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3);return e.dimToEditHasChanged=!0,e.validateDimension(e.dimToEdit,e.modelRef)})),r.Ub(),r.Vb(7,"label",200),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.sc("placement",i.commandsDropdownPlacement),r.Bb(6),r.sc("ngModel",i.dimToEdit.Localize),r.Bb(2),r.Uc(r.nc(9,3,"ReportDefinition_Localize"))}}function gD(e,t){1&e&&r.Rb(0)}function pD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",191),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"div",122),r.Vb(6,"input",192,193),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).dimToEdit.DisplayExpression=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.dimToEditHasChanged=!0,e.validateDimension(e.dimToEdit,e.modelRef)})),r.mc(8,"translate"),r.Ub(),r.Rc(9,mD,10,5,"div",194),r.Ub(),r.Rc(10,gD,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(7),o=r.lc(2),c=r.Fc(7);r.Gb("is-invalid",o.invalid(i,null==o.dimToEdit.serverErrors?null:o.dimToEdit.serverErrors.DisplayExpression)),r.Bb(2),r.Wc("",r.nc(3,10,"ReportDefinition_DisplayExpression")," (",r.nc(4,12,"Visibility_Optional"),")"),r.Bb(4),r.sc("ngModel",o.dimToEdit.DisplayExpression)("placeholder",r.nc(8,14,"Expression"))("ngModelOptions",r.vc(16,Kx)),r.Bb(3),r.sc("ngIf",o.isMultilingual),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(17,Nx,i,null==o.dimToEdit.serverErrors?null:o.dimToEdit.serverErrors.DisplayExpression))}}function hD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",201),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",202),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).dimToEdit.Label2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).dimToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,3,"Label")+i.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",i.dimToEdit.Label2)("ngModelOptions",r.vc(5,Kx))}}function vD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",203),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",204),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).dimToEdit.Label3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).dimToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,3,"Label")+i.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",i.dimToEdit.Label3)("ngModelOptions",r.vc(5,Kx))}}function yD(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n),r.Bb(1),r.Vc(" ",r.nc(2,2,"ReportDefinition_OrderDirection_"+n),"")}}function ID(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",48),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"div",205),r.Vb(5,"input",206),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).dimToEdit.ShowAsTree=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).dimToEditHasChanged=!0})),r.Ub(),r.Vb(6,"label",207),r.Tc(7,"\u200c"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,2,"ReportDefinition_ShowAsTree")),r.Bb(3),r.sc("ngModel",i.dimToEdit.ShowAsTree)}}function CD(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",177),r.Vb(2,"label",208),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",209),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).dimToEdit.AutoExpandLevel=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).dimToEditHasChanged=!0})),r.Ub(),r.Ub(),r.Sb()}if(2&e){var i=r.lc(2);r.Bb(3),r.Uc(r.nc(4,3,"ReportDefinition_AutoExpandLevel")),r.Bb(2),r.sc("ngModel",i.dimToEdit.AutoExpandLevel)("ngModelOptions",r.vc(5,Kx))}}function wD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",48),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"div",205),r.Vb(5,"input",210),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2);return t.dimToEdit.AutoExpandLevel=e?1e3:0,t.dimToEditHasChanged=!0})),r.Ub(),r.Vb(6,"label",211),r.Tc(7,"\u200c"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,2,"ReportDefinition_AutoExpand")),r.Bb(3),r.sc("ngModel",i.dimToEdit.AutoExpandLevel>0)}}function kD(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.Uc(r.nc(2,1,"Label")+n.ws.secondaryPostfix)}}function MD(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.Vc("",r.nc(2,1,"Label")+n.ws.ternaryPostfix," ")}}function VD(e,t){1&e&&(r.Tb(0),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Sb())}function TD(e,t){if(1&e&&(r.Vb(0,"div",230),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Vc(" ",n.Expression,"")}}function ED(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",195),r.Vb(1,"button",231),r.Vb(2,"span",48),r.Qb(3,"fa-icon",197),r.Ub(),r.Ub(),r.Vb(4,"div",198),r.Vb(5,"div",71),r.Vb(6,"input",232),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Localize=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4);return e.dimToEditHasChanged=!0,e.validateDimension(e.dimToEdit,e.modelRef)})),r.Ub(),r.Vb(7,"label",233),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(),o=i.index,c=i.$implicit,a=r.lc(3);r.sc("placement",a.commandsDropdownPlacement),r.Bb(6),r.uc("id","attlocalize",o,""),r.sc("ngModel",c.Localize),r.Bb(1),r.uc("for","attlocalize",o,""),r.Bb(1),r.Uc(r.nc(9,5,"ReportDefinition_Localize"))}}function UD(e,t){1&e&&r.Rb(0)}function xD(e,t){1&e&&r.Rb(0)}function RD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",147),r.Vb(1,"input",227),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Label2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(4).dimToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc().$implicit;r.Bb(1),r.sc("ngModel",i.Label2)("ngModelOptions",r.vc(2,Kx))}}function DD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",147),r.Vb(1,"input",227),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Label3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(4).dimToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc().$implicit;r.Bb(1),r.sc("ngModel",i.Label3)("ngModelOptions",r.vc(2,Kx))}}function BD(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n),r.Bb(1),r.Vc(" ",r.nc(2,2,"ReportDefinition_OrderDirection_"+n),"")}}var SD=function(){return["asc","desc"]};function _D(e,t){if(1&e){var n=r.Wb();r.Vb(0,"tr",220),r.Rc(1,VD,3,0,"ng-container",221),r.Rc(2,TD,2,1,"div",222),r.Vb(3,"td",223),r.Qb(4,"fa-icon",224),r.Ub(),r.Vb(5,"td",147),r.Vb(6,"div",122),r.Vb(7,"div",89),r.Vb(8,"input",225,226),r.hc("ngModelChange",(function(e){return r.Ic(n),t.$implicit.Expression=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3);return e.dimToEditHasChanged=!0,e.validateDimension(e.dimToEdit,e.modelRef)})),r.mc(10,"translate"),r.Ub(),r.Ub(),r.Rc(11,ED,10,7,"div",194),r.Ub(),r.Rc(12,UD,1,0,"ng-container",22),r.Ub(),r.Vb(13,"td",147),r.Vb(14,"input",227,228),r.hc("ngModelChange",(function(e){return r.Ic(n),t.$implicit.Label=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).dimToEditHasChanged=!0})),r.Ub(),r.Rc(16,xD,1,0,"ng-container",22),r.Ub(),r.Rc(17,RD,2,3,"td",229),r.Rc(18,DD,2,3,"td",229),r.Vb(19,"td",147),r.Vb(20,"select",182),r.hc("ngModelChange",(function(e){return r.Ic(n),t.$implicit.OrderDirection=e}))("ngModelChange",(function(){r.Ic(n);var e=t.index,i=r.lc(3);return i.onSetDimOrderDirection(i.dimToEdit,e)})),r.Qb(21,"option",99),r.Rc(22,BD,3,4,"option",21),r.Ub(),r.Ub(),r.Vb(23,"td"),r.Vb(24,"button",150),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(3);return i.onDeleteAttribute(e,i.dimToEdit)})),r.Qb(25,"fa-icon",151),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.Fc(9),c=r.Fc(15),a=r.lc(3),l=r.Fc(7);r.Bb(5),r.Gb("is-invalid",a.invalid(o,null==i.serverErrors?null:i.serverErrors.Expression)),r.Bb(3),r.sc("ngModel",i.Expression)("placeholder",r.nc(10,16,"Expression"))("ngModelOptions",r.vc(18,Kx)),r.Bb(3),r.sc("ngIf",a.isMultilingual),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.xc(19,Nx,o,null==i||null==i.serverErrors?null:i.serverErrors.Expression)),r.Bb(2),r.sc("ngModel",i.Label)("ngModelOptions",r.vc(22,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.xc(23,Nx,c,null==i||null==i.serverErrors?null:i.serverErrors.Label)),r.Bb(1),r.sc("ngIf",null==a.ws.settings?null:a.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==a.ws.settings?null:a.ws.settings.SecondaryLanguageId),r.Bb(2),r.sc("ngModel",i.OrderDirection),r.Bb(2),r.sc("ngForOf",r.vc(26,SD))}}function OD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",212),r.Vb(1,"label",181),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"table",144),r.Vb(5,"thead",213),r.Vb(6,"tr"),r.Qb(7,"th",214),r.Vb(8,"th",215),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Vb(11,"th"),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Rc(14,kD,3,3,"th",86),r.Rc(15,MD,3,3,"th",86),r.Vb(16,"th",216),r.Tc(17),r.mc(18,"translate"),r.Ub(),r.Qb(19,"th",214),r.Ub(),r.Ub(),r.Vb(20,"tbody",217),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc(2);return t.rowDrop(e,t.dimToEdit.Attributes),t.dimToEditHasChanged=!0})),r.Rc(21,_D,26,27,"tr",218),r.Ub(),r.Ub(),r.Vb(22,"button",219),r.hc("click",(function(){r.Ic(n);var e=r.lc(2);return e.onInsertAttribute(e.dimToEdit)})),r.Qb(23,"fa-icon",50),r.Tc(24),r.mc(25,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,8,"ReportDefinition_Attributes")),r.Bb(7),r.Uc(r.nc(10,10,"ReportDefinition_Expression")),r.Bb(3),r.Uc(r.nc(13,12,"Label")+i.ws.primaryPostfix),r.Bb(2),r.sc("ngIf",null==i.ws.settings?null:i.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==i.ws.settings?null:i.ws.settings.TernaryLanguageId),r.Bb(2),r.Vc(" ",r.nc(18,14,"ReportDefinition_OrderDirection")," "),r.Bb(4),r.sc("ngForOf",i.dimToEdit.Attributes),r.Bb(3),r.Vc("\xa0\xa0",r.nc(25,16,"Add")," ")}}function LD(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function FD(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function AD(e,t){1&e&&r.Rb(0)}function PD(e,t){1&e&&r.Rb(0)}function ND(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",238),r.Vb(1,"t-control-options",239,240),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).dimToEdit.ControlOptions=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).dimToEditHasChanged=!0})),r.Ub(),r.Rc(3,PD,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(2),o=r.lc(3),c=r.Fc(7);r.Bb(1),r.sc("control",o.dimToEdit.Control)("isEdit",!0)("ngModel",o.dimToEdit.ControlOptions),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,Nx,i,null==o.dimToEdit||null==o.dimToEdit.serverErrors?null:o.dimToEdit.serverErrors.ControlOptions))}}function jD(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",177),r.Vb(2,"label",181),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",234,235),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).dimToEdit.Control=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.dimToEditHasChanged=!0,e.validateDimension(e.dimToEdit,e.modelRef)})),r.Qb(7,"option",99),r.Rc(8,LD,2,2,"option",21),r.Vb(9,"option",236),r.Tc(10," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),r.Ub(),r.Rc(11,FD,2,2,"option",21),r.Ub(),r.Rc(12,AD,1,0,"ng-container",22),r.Ub(),r.Rc(13,ND,4,8,"div",237),r.Sb()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=r.Fc(7);r.Bb(3),r.Uc(r.nc(4,7,"Definition_Control")),r.Bb(2),r.sc("ngModel",o.dimToEdit.Control),r.Bb(3),r.sc("ngForOf",o.controlSimpleChoices()),r.Bb(3),r.sc("ngForOf",o.controlEntityChoices()),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(9,Nx,i,null==o.dimToEdit||null==o.dimToEdit.serverErrors?null:o.dimToEdit.serverErrors.Control)),r.Bb(1),r.sc("ngIf",o.showOptions(o.dimToEdit.Control))}}function WD(e,t){1&e&&(r.Vb(0,"div",241),r.Qb(1,"fa-icon",242),r.Tc(2),r.mc(3,"translate"),r.Ub()),2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"SettingHereWillClearFromMeasures")," "))}function qD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",166),r.Vb(1,"h5",167),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",168),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",169),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",170),r.Vb(8,"div",171),r.Vb(9,"div",172),r.Vb(10,"label",173),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"input",174,175),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().dimToEdit.KeyExpression=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.dimToEditHasChanged=!0,e.validateDimension(e.dimToEdit,e.modelRef)})),r.mc(15,"translate"),r.Ub(),r.Rc(16,fD,1,0,"ng-container",22),r.Ub(),r.Rc(17,pD,11,20,"div",176),r.Vb(18,"div",177),r.Vb(19,"label",178),r.Tc(20),r.mc(21,"translate"),r.Ub(),r.Vb(22,"input",179),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().dimToEdit.Label=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().dimToEditHasChanged=!0})),r.Ub(),r.Ub(),r.Rc(23,hD,5,6,"div",180),r.Rc(24,vD,5,6,"div",180),r.Vb(25,"div",177),r.Vb(26,"label",181),r.Tc(27),r.mc(28,"translate"),r.Ub(),r.Vb(29,"select",182),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().dimToEdit.OrderDirection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.onSetDimOrderDirection(e.dimToEdit,-1)})),r.Qb(30,"option",99),r.Rc(31,yD,3,4,"option",21),r.Ub(),r.Ub(),r.Rc(32,ID,8,4,"div",180),r.Rc(33,CD,6,6,"ng-container",183),r.Rc(34,wD,8,4,"ng-template",null,184,r.Sc),r.Rc(36,OD,26,18,"div",185),r.Rc(37,jD,14,12,"ng-container",86),r.Rc(38,WD,4,3,"div",186),r.Ub(),r.Ub(),r.Vb(39,"div",187),r.Vb(40,"button",188),r.hc("click",(function(){return t.$implicit.close()})),r.Qb(41,"fa-icon",189),r.Tc(42),r.mc(43,"translate"),r.Ub(),r.Vb(44,"button",190),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(45,"fa-icon",125),r.Tc(46),r.mc(47,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(14),o=r.Fc(35),c=r.lc(),a=r.Fc(7);r.Bb(2),r.Vc(" ",r.nc(3,29,"Configure")," "),r.Bb(7),r.Gb("col-sm-6",c.showDisplayExpression(c.dimToEdit,c.modelRef))("is-invalid",c.invalid(i,null==c.dimToEdit.serverErrors?null:c.dimToEdit.serverErrors.KeyExpression)),r.Bb(2),r.Uc(r.nc(12,31,"ReportDefinition_KeyExpression")),r.Bb(2),r.sc("ngModel",c.dimToEdit.KeyExpression)("placeholder",r.nc(15,33,"Expression"))("ngModelOptions",r.vc(43,Kx)),r.Bb(3),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(44,Nx,i,null==c.dimToEdit.serverErrors?null:c.dimToEdit.serverErrors.KeyExpression)),r.Bb(1),r.sc("ngIf",c.showDisplayExpression(c.dimToEdit,c.modelRef)),r.Bb(3),r.Uc(r.nc(21,35,"Label")+c.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",c.dimToEdit.Label)("ngModelOptions",r.vc(47,Kx)),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.TernaryLanguageId),r.Bb(3),r.Uc(r.nc(28,37,"ReportDefinition_OrderDirection")),r.Bb(2),r.sc("ngModel",c.dimToEdit.OrderDirection),r.Bb(2),r.sc("ngForOf",r.vc(48,SD)),r.Bb(1),r.sc("ngIf",c.showShowAsTree(c.dimToEdit,c.modelRef)),r.Bb(1),r.sc("ngIf",c.showShowAsTree(c.dimToEdit,c.modelRef)&&c.dimToEdit.ShowAsTree)("ngIfElse",o),r.Bb(3),r.sc("ngIf",c.showDimensionAttributes(c.dimToEdit,c.modelRef)),r.Bb(1),r.sc("ngIf",c.showDimensionControl(c.dimToEdit,c.modelRef)),r.Bb(1),r.sc("ngIf",c.showClearOrderDirectionMessage(c.dimToEdit)),r.Bb(2),r.sc("disabled",!c.canApplyDimension(c.dimToEdit)),r.Bb(2),r.Vc(" \xa0",r.nc(43,39,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(47,41,"Cancel")," ")}}function QD(e,t){1&e&&r.Rb(0)}function HD(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",201),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",202),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).measureToEdit.Label2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).measureToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,3,"Label")+i.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",i.measureToEdit.Label2)("ngModelOptions",r.vc(5,Kx))}}function $D(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",203),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",204),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).measureToEdit.Label3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).measureToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,3,"Label")+i.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",i.measureToEdit.Label3)("ngModelOptions",r.vc(5,Kx))}}function GD(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n),r.Bb(1),r.Vc(" ",r.nc(2,2,"ReportDefinition_OrderDirection_"+n),"")}}function zD(e,t){1&e&&(r.Vb(0,"div",172),r.Qb(1,"fa-icon",242),r.Tc(2),r.mc(3,"translate"),r.Ub()),2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"SettingHereWillClearFromRowsAndMeasures")," "))}function JD(e,t){1&e&&r.Rb(0)}function KD(e,t){1&e&&r.Rb(0)}function YD(e,t){1&e&&r.Rb(0)}function XD(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function ZD(e,t){1&e&&r.Rb(0)}function eB(e,t){1&e&&r.Rb(0)}function tB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",238),r.Vb(1,"t-control-options",239,259),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).measureToEdit.ControlOptions=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).measureToEditHasChanged=!0})),r.Ub(),r.Rc(3,eB,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(2),o=r.lc(3),c=r.Fc(7);r.Bb(1),r.sc("control",o.measureToEdit.Control)("isEdit",!0)("ngModel",o.measureToEdit.ControlOptions),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,Nx,i,null==o.measureToEdit||null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.ControlOptions))}}function nB(e,t){if(1&e){var n=r.Wb();r.Tb(0,null,248),r.Vb(2,"div",177),r.Vb(3,"label",249),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Vb(6,"input",250,251),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).measureToEdit.SuccessWhen=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.measureToEditHasChanged=!0,e.validateMeasure(e.measureToEdit,e.modelRef)})),r.mc(8,"translate"),r.Ub(),r.Rc(9,JD,1,0,"ng-container",22),r.Ub(),r.Vb(10,"div",177),r.Vb(11,"label",252),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Vb(14,"input",253,254),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).measureToEdit.WarningWhen=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.measureToEditHasChanged=!0,e.validateMeasure(e.measureToEdit,e.modelRef)})),r.mc(16,"translate"),r.Ub(),r.Rc(17,KD,1,0,"ng-container",22),r.Ub(),r.Vb(18,"div",177),r.Vb(19,"label",255),r.Tc(20),r.mc(21,"translate"),r.Ub(),r.Vb(22,"input",256,257),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).measureToEdit.DangerWhen=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.measureToEditHasChanged=!0,e.validateMeasure(e.measureToEdit,e.modelRef)})),r.mc(24,"translate"),r.Ub(),r.Rc(25,YD,1,0,"ng-container",22),r.Ub(),r.Vb(26,"div",177),r.Vb(27,"label",181),r.Tc(28),r.mc(29,"translate"),r.Ub(),r.Vb(30,"select",234,258),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).measureToEdit.Control=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.measureToEditHasChanged=!0,e.validateMeasure(e.measureToEdit,e.modelRef)})),r.Qb(32,"option",99),r.Rc(33,XD,2,2,"option",21),r.Ub(),r.Rc(34,ZD,1,0,"ng-container",22),r.Ub(),r.Rc(35,tB,4,8,"div",237),r.Sb()}if(2&e){var i=r.Fc(7),o=r.Fc(15),c=r.Fc(23),a=r.Fc(31),l=r.lc(2),s=r.Fc(7);r.Bb(2),r.Gb("is-invalid",l.invalid(i,null==l.measureToEdit.serverErrors?null:l.measureToEdit.serverErrors.SuccessWhen)),r.Bb(2),r.Uc(r.nc(5,30,"ReportDefinition_SuccessWhen")),r.Bb(2),r.sc("ngModel",l.measureToEdit.SuccessWhen)("placeholder",r.nc(8,32,"Expression"))("ngModelOptions",r.vc(44,Kx)),r.Bb(3),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.xc(45,Nx,i,null==l.measureToEdit.serverErrors?null:l.measureToEdit.serverErrors.SuccessWhen)),r.Bb(1),r.Gb("is-invalid",l.invalid(o,null==l.measureToEdit.serverErrors?null:l.measureToEdit.serverErrors.WarningWhen)),r.Bb(2),r.Uc(r.nc(13,34,"ReportDefinition_WarningWhen")),r.Bb(2),r.sc("ngModel",l.measureToEdit.WarningWhen)("placeholder",r.nc(16,36,"Expression"))("ngModelOptions",r.vc(48,Kx)),r.Bb(3),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.xc(49,Nx,o,null==l.measureToEdit.serverErrors?null:l.measureToEdit.serverErrors.WarningWhen)),r.Bb(1),r.Gb("is-invalid",l.invalid(c,null==l.measureToEdit.serverErrors?null:l.measureToEdit.serverErrors.DangerWhen)),r.Bb(2),r.Uc(r.nc(21,38,"ReportDefinition_DangerWhen")),r.Bb(2),r.sc("ngModel",l.measureToEdit.DangerWhen)("placeholder",r.nc(24,40,"Expression"))("ngModelOptions",r.vc(52,Kx)),r.Bb(3),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.xc(53,Nx,c,null==l.measureToEdit.serverErrors?null:l.measureToEdit.serverErrors.DangerWhen)),r.Bb(3),r.Uc(r.nc(29,42,"Definition_Control")),r.Bb(2),r.sc("ngModel",l.measureToEdit.Control),r.Bb(3),r.sc("ngForOf",l.controlSimpleChoices()),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.xc(56,Nx,a,null==l.measureToEdit||null==l.measureToEdit.serverErrors?null:l.measureToEdit.serverErrors.Control)),r.Bb(1),r.sc("ngIf",l.showOptions(l.measureToEdit.Control))}}function iB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",166),r.Vb(1,"h5",167),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",168),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",169),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",170),r.Vb(8,"div",171),r.Vb(9,"div",172),r.Vb(10,"label",243),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"input",244,245),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().measureToEdit.Expression=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.measureToEditHasChanged=!0,e.validateMeasure(e.measureToEdit,e.modelRef)})),r.mc(15,"translate"),r.Ub(),r.Rc(16,QD,1,0,"ng-container",22),r.Ub(),r.Vb(17,"div",177),r.Vb(18,"label",178),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"input",179),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().measureToEdit.Label=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().measureToEditHasChanged=!0})),r.Ub(),r.Ub(),r.Rc(22,HD,5,6,"div",180),r.Rc(23,$D,5,6,"div",180),r.Vb(24,"div",177),r.Vb(25,"label",181),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Vb(28,"select",182),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().measureToEdit.OrderDirection=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().measureToEditHasChanged=!0})),r.Qb(29,"option",99),r.Rc(30,GD,3,4,"option",21),r.Ub(),r.Ub(),r.Rc(31,zD,4,3,"div",246),r.Vb(32,"div",172),r.Vb(33,"button",247),r.hc("click",(function(){return r.Ic(n),r.lc().onToggleMeasureAdvancedOptions()})),r.Tc(34),r.mc(35,"translate"),r.Ub(),r.Ub(),r.Rc(36,nB,36,59,"ng-container",86),r.Ub(),r.Ub(),r.Vb(37,"div",187),r.Vb(38,"button",188),r.hc("click",(function(){return t.$implicit.close()})),r.Qb(39,"fa-icon",189),r.Tc(40),r.mc(41,"translate"),r.Ub(),r.Vb(42,"button",190),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(43,"fa-icon",125),r.Tc(44),r.mc(45,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(14),o=r.lc(),c=r.Fc(7);r.Bb(2),r.Vc(" ",r.nc(3,23,"Configure")," "),r.Bb(7),r.Gb("is-invalid",o.invalid(i,null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.Expression)),r.Bb(2),r.Uc(r.nc(12,25,"ReportDefinition_Expression")),r.Bb(2),r.sc("ngModel",o.measureToEdit.Expression)("placeholder",r.nc(15,27,"Expression"))("ngModelOptions",r.vc(39,Kx)),r.Bb(3),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(40,Nx,i,null==o.measureToEdit.serverErrors?null:o.measureToEdit.serverErrors.Expression)),r.Bb(3),r.Uc(r.nc(20,29,"Label")+o.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",o.measureToEdit.Label)("ngModelOptions",r.vc(43,Kx)),r.Bb(1),r.sc("ngIf",null==o.ws.settings?null:o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==o.ws.settings?null:o.ws.settings.TernaryLanguageId),r.Bb(3),r.Uc(r.nc(27,31,"ReportDefinition_OrderDirection")),r.Bb(2),r.sc("ngModel",o.measureToEdit.OrderDirection),r.Bb(2),r.sc("ngForOf",r.vc(44,SD)),r.Bb(1),r.sc("ngIf",!!o.measureToEdit.OrderDirection),r.Bb(3),r.Vc("",r.nc(35,33,o.measureShowAdvancedOptions?"AdvancedOptionsHide":"AdvancedOptionsShow"),"..."),r.Bb(2),r.sc("ngIf",o.measureShowAdvancedOptions),r.Bb(2),r.sc("disabled",!o.canApplyMeasure(o.measureToEdit)),r.Bb(2),r.Vc(" \xa0",r.nc(41,35,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(45,37,"Cancel")," ")}}function rB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",195),r.Vb(1,"button",196),r.Vb(2,"span",48),r.Qb(3,"fa-icon",197),r.Ub(),r.Ub(),r.Vb(4,"div",198),r.Vb(5,"div",71),r.Vb(6,"input",262),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).selectToEdit.Localize=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.selectToEditHasChanged=!0,e.validateSelect(e.selectToEdit,e.modelRef)})),r.Ub(),r.Vb(7,"label",263),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.sc("placement",i.commandsDropdownPlacement),r.Bb(6),r.sc("ngModel",i.selectToEdit.Localize),r.Bb(2),r.Uc(r.nc(9,3,"ReportDefinition_Localize"))}}function oB(e,t){1&e&&r.Rb(0)}function cB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",201),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",202),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).selectToEdit.Label2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).selectToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,3,"Label")+i.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",i.selectToEdit.Label2)("ngModelOptions",r.vc(5,Kx))}}function aB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",203),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",204),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).selectToEdit.Label3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).selectToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,3,"Label")+i.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",i.selectToEdit.Label3)("ngModelOptions",r.vc(5,Kx))}}function lB(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function sB(e,t){1&e&&r.Rb(0)}function uB(e,t){1&e&&r.Rb(0)}function dB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",238),r.Vb(1,"t-control-options",239,264),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).selectToEdit.ControlOptions=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).selectToEditHasChanged=!0})),r.Ub(),r.Rc(3,uB,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(2),o=r.lc(2),c=r.Fc(7);r.Bb(1),r.sc("control",o.selectToEdit.Control)("isEdit",!0)("ngModel",o.selectToEdit.ControlOptions),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,Nx,i,null==o.selectToEdit||null==o.selectToEdit.serverErrors?null:o.selectToEdit.serverErrors.ControlOptions))}}function bB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",166),r.Vb(1,"h5",167),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",168),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",169),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",170),r.Vb(8,"div",171),r.Vb(9,"div",172),r.Vb(10,"label",243),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"div",122),r.Vb(14,"input",260,245),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().selectToEdit.Expression=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.selectToEditHasChanged=!0,e.validateSelect(e.selectToEdit,e.modelRef)})),r.mc(16,"translate"),r.Ub(),r.Rc(17,rB,10,5,"div",194),r.Ub(),r.Rc(18,oB,1,0,"ng-container",22),r.Ub(),r.Vb(19,"div",177),r.Vb(20,"label",178),r.Tc(21),r.mc(22,"translate"),r.Ub(),r.Vb(23,"input",179),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().selectToEdit.Label=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().selectToEditHasChanged=!0})),r.Ub(),r.Ub(),r.Rc(24,cB,5,6,"div",180),r.Rc(25,aB,5,6,"div",180),r.Vb(26,"div",177),r.Vb(27,"label",181),r.Tc(28),r.mc(29,"translate"),r.Ub(),r.Vb(30,"select",234,261),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().selectToEdit.Control=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.selectToEditHasChanged=!0,e.validateSelect(e.selectToEdit,e.modelRef)})),r.Qb(32,"option",99),r.Rc(33,lB,2,2,"option",21),r.Ub(),r.Rc(34,sB,1,0,"ng-container",22),r.Ub(),r.Rc(35,dB,4,8,"div",237),r.Ub(),r.Ub(),r.Vb(36,"div",187),r.Vb(37,"button",188),r.hc("click",(function(){return t.$implicit.close()})),r.Qb(38,"fa-icon",189),r.Tc(39),r.mc(40,"translate"),r.Ub(),r.Vb(41,"button",190),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(42,"fa-icon",125),r.Tc(43),r.mc(44,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(15),o=r.Fc(31),c=r.lc(),a=r.Fc(7);r.Bb(2),r.Vc(" ",r.nc(3,24,"Configure")," "),r.Bb(7),r.Gb("is-invalid",c.invalid(i,null==c.selectToEdit.serverErrors?null:c.selectToEdit.serverErrors.Expression)),r.Bb(2),r.Uc(r.nc(12,26,"ReportDefinition_Expression")),r.Bb(3),r.sc("ngModel",c.selectToEdit.Expression)("placeholder",r.nc(16,28,"Expression"))("ngModelOptions",r.vc(38,Kx)),r.Bb(3),r.sc("ngIf",c.isMultilingual),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(39,Nx,i,null==c.selectToEdit.serverErrors?null:c.selectToEdit.serverErrors.Expression)),r.Bb(3),r.Uc(r.nc(22,30,"Label")+c.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",c.selectToEdit.Label)("ngModelOptions",r.vc(42,Kx)),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.TernaryLanguageId),r.Bb(3),r.Uc(r.nc(29,32,"Definition_Control")),r.Bb(2),r.sc("ngModel",c.selectToEdit.Control),r.Bb(3),r.sc("ngForOf",c.controlSimpleChoices()),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(43,Nx,o,null==c.selectToEdit||null==c.selectToEdit.serverErrors?null:c.selectToEdit.serverErrors.Control)),r.Bb(1),r.sc("ngIf",c.showOptions(c.selectToEdit.Control)),r.Bb(2),r.sc("disabled",!c.canApplySelect(c.selectToEdit)),r.Bb(2),r.Vc(" \xa0",r.nc(40,34,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(44,36,"Cancel")," ")}}function fB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",201),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",202),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).paramToEdit.Label2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).paramToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,3,"Label")+i.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",i.paramToEdit.Label2)("ngModelOptions",r.vc(5,Kx))}}function mB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",203),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",204),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).paramToEdit.Label3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).paramToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Uc(r.nc(3,3,"Label")+i.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",i.paramToEdit.Label3)("ngModelOptions",r.vc(5,Kx))}}function gB(e,t){1&e&&r.Rb(0)}function pB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",273),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",274,275),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).paramToEdit.DefaultExpression=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.paramToEditHasChanged=!0,e.validateParam(e.paramToEdit,e.modelRef)})),r.mc(6,"translate"),r.Ub(),r.Rc(7,gB,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(7);r.Gb("is-invalid",o.invalid(i,null==o.paramToEdit.serverErrors?null:o.paramToEdit.serverErrors.DefaultExpression)),r.Bb(2),r.Uc(r.nc(3,8,"ReportDefinition_DefaultExpression")),r.Bb(2),r.sc("ngModel",o.paramToEdit.DefaultExpression)("placeholder",r.nc(6,10,"Expression"))("ngModelOptions",r.vc(12,Kx)),r.Bb(3),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(13,Nx,i,null==o.paramToEdit.serverErrors?null:o.paramToEdit.serverErrors.DefaultExpression))}}function hB(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function vB(e,t){if(1&e&&(r.Vb(0,"option",95),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function yB(e,t){1&e&&r.Rb(0)}function IB(e,t){1&e&&r.Rb(0)}function CB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",238),r.Vb(1,"t-control-options",239,276),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).paramToEdit.ControlOptions=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).paramToEditHasChanged=!0})),r.Ub(),r.Rc(3,IB,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(2),o=r.lc(2),c=r.Fc(7);r.Bb(1),r.sc("control",o.paramToEdit.Control)("isEdit",!0)("ngModel",o.paramToEdit.ControlOptions),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,Nx,i,null==o.paramToEdit||null==o.paramToEdit.serverErrors?null:o.paramToEdit.serverErrors.ControlOptions))}}function wB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",166),r.Vb(1,"h5",167),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",168),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",169),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",170),r.Vb(8,"div",171),r.Vb(9,"div",177),r.Vb(10,"label",265),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"span",266),r.Tc(14),r.Ub(),r.Ub(),r.Qb(15,"div",267),r.Vb(16,"div",177),r.Vb(17,"label",178),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"input",179),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().paramToEdit.Label=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().paramToEditHasChanged=!0})),r.Ub(),r.Ub(),r.Rc(21,fB,5,6,"div",180),r.Rc(22,mB,5,6,"div",180),r.Vb(23,"div",177),r.Vb(24,"label",268),r.Tc(25),r.mc(26,"translate"),r.Ub(),r.Vb(27,"select",269),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().paramToEdit.Visibility=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().paramToEditHasChanged=!0})),r.Vb(28,"option",270),r.Tc(29),r.mc(30,"translate"),r.Ub(),r.Vb(31,"option",271),r.Tc(32),r.mc(33,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Rc(34,pB,8,16,"div",176),r.Vb(35,"div",177),r.Vb(36,"label",181),r.Tc(37),r.mc(38,"translate"),r.Ub(),r.Vb(39,"select",234,272),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().paramToEdit.Control=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.paramToEditHasChanged=!0,e.validateParam(e.paramToEdit,e.modelRef)})),r.Qb(41,"option",99),r.Rc(42,hB,2,2,"option",21),r.Vb(43,"option",236),r.Tc(44," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),r.Ub(),r.Rc(45,vB,2,2,"option",21),r.Ub(),r.Rc(46,yB,1,0,"ng-container",22),r.Ub(),r.Rc(47,CB,4,8,"div",237),r.Ub(),r.Ub(),r.Vb(48,"div",187),r.Vb(49,"button",188),r.hc("click",(function(){return t.$implicit.close()})),r.Qb(50,"fa-icon",189),r.Tc(51),r.mc(52,"translate"),r.Ub(),r.Vb(53,"button",190),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(54,"fa-icon",125),r.Tc(55),r.mc(56,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(40),o=r.lc(),c=r.Fc(7);r.Bb(2),r.Vc(" ",r.nc(3,23,"Configure")," "),r.Bb(9),r.Uc(r.nc(12,25,"Parameter_Key")),r.Bb(3),r.Uc("@"+o.paramToEdit.Key),r.Bb(4),r.Uc(r.nc(19,27,"Label")+o.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",o.paramToEdit.Label)("ngModelOptions",r.vc(41,Kx)),r.Bb(1),r.sc("ngIf",null==o.ws.settings?null:o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==o.ws.settings?null:o.ws.settings.TernaryLanguageId),r.Bb(3),r.Uc(r.nc(26,29,"Parameter_Visibility")),r.Bb(2),r.sc("ngModel",o.paramToEdit.Visibility),r.Bb(2),r.Uc(r.nc(30,31,"Visibility_Optional")),r.Bb(3),r.Uc(r.nc(33,33,"Visibility_Required")),r.Bb(2),r.sc("ngIf",o.showParamDefaultExpression(o.paramToEdit)),r.Bb(3),r.Uc(r.nc(38,35,"Definition_Control")),r.Bb(2),r.sc("ngModel",o.paramToEdit.Control),r.Bb(3),r.sc("ngForOf",o.controlSimpleChoices()),r.Bb(3),r.sc("ngForOf",o.controlEntityChoices()),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(42,Nx,i,null==o.paramToEdit||null==o.paramToEdit.serverErrors?null:o.paramToEdit.serverErrors.Control)),r.Bb(1),r.sc("ngIf",o.showOptions(o.paramToEdit.Control)),r.Bb(2),r.sc("disabled",!o.canApplyParam(o.paramToEdit)),r.Bb(2),r.Vc(" \xa0",r.nc(52,37,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(56,39,"Cancel")," ")}}function kB(e,t){1&e&&r.Rb(0)}function MB(e,t){1&e&&r.Rb(0)}function VB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",281),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",282,283),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).totalLabelsToEdit.ColumnsTotalLabel2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).totalLabelsToEditHasChanged=!0})),r.Ub(),r.Rc(6,MB,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(3),c=r.Fc(7);r.Bb(2),r.Uc(r.nc(3,5,"ReportDefinition_ColumnsTotalLabel")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.totalLabelsToEdit.ColumnsTotalLabel2)("ngModelOptions",r.vc(7,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(8,Nx,i,null==o.totalLabelsToEdit||null==o.totalLabelsToEdit.serverErrors?null:o.totalLabelsToEdit.serverErrors.ColumnsTotalLabel2))}}function TB(e,t){1&e&&r.Rb(0)}function EB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",284),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",285,286),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).totalLabelsToEdit.ColumnsTotalLabel3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).totalLabelsToEditHasChanged=!0})),r.Ub(),r.Rc(6,TB,1,0,"ng-container",22),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(3),c=r.Fc(7);r.Bb(2),r.Uc(r.nc(3,5,"ReportDefinition_ColumnsTotalLabel")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.totalLabelsToEdit.ColumnsTotalLabel3)("ngModelOptions",r.vc(7,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(8,Nx,i,null==o.totalLabelsToEdit||null==o.totalLabelsToEdit.serverErrors?null:o.totalLabelsToEdit.serverErrors.ColumnsTotalLabel3))}}function UB(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",177),r.Vb(2,"label",278),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",279,280),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).totalLabelsToEdit.ColumnsTotalLabel=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).totalLabelsToEditHasChanged=!0})),r.Ub(),r.Rc(7,kB,1,0,"ng-container",22),r.Ub(),r.Rc(8,VB,7,11,"div",180),r.Rc(9,EB,7,11,"div",180),r.Sb()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=r.Fc(7);r.Bb(3),r.Uc(r.nc(4,7,"ReportDefinition_ColumnsTotalLabel")+o.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",o.totalLabelsToEdit.ColumnsTotalLabel)("ngModelOptions",r.vc(9,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,Nx,i,null==o.totalLabelsToEdit||null==o.totalLabelsToEdit.serverErrors?null:o.totalLabelsToEdit.serverErrors.ColumnsTotalLabel)),r.Bb(1),r.sc("ngIf",null==o.ws.settings?null:o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==o.ws.settings?null:o.ws.settings.TernaryLanguageId)}}function xB(e,t){1&e&&r.Rb(0)}function RB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",290),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",291),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).totalLabelsToEdit.RowsTotalLabel2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).totalLabelsToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.Uc(r.nc(3,3,"ReportDefinition_RowsTotalLabel")+i.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",i.totalLabelsToEdit.RowsTotalLabel2)("ngModelOptions",r.vc(5,Kx))}}function DB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",177),r.Vb(1,"label",292),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",293),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).totalLabelsToEdit.RowsTotalLabel3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(3).totalLabelsToEditHasChanged=!0})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.Uc(r.nc(3,3,"ReportDefinition_RowsTotalLabel")+i.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",i.totalLabelsToEdit.RowsTotalLabel3)("ngModelOptions",r.vc(5,Kx))}}function BB(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",177),r.Vb(2,"label",287),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",288,289),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).totalLabelsToEdit.RowsTotalLabel=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).totalLabelsToEditHasChanged=!0})),r.Ub(),r.Rc(7,xB,1,0,"ng-container",22),r.Ub(),r.Rc(8,RB,5,6,"div",180),r.Rc(9,DB,5,6,"div",180),r.Sb()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=r.Fc(7);r.Bb(3),r.Uc(r.nc(4,7,"ReportDefinition_RowsTotalLabel")+o.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",o.totalLabelsToEdit.RowsTotalLabel)("ngModelOptions",r.vc(9,Kx)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,Nx,i,null==o.totalLabelsToEdit||null==o.totalLabelsToEdit.serverErrors?null:o.totalLabelsToEdit.serverErrors.RowsTotalLabel)),r.Bb(1),r.sc("ngIf",null==o.ws.settings?null:o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==o.ws.settings?null:o.ws.settings.TernaryLanguageId)}}function SB(e,t){if(1&e&&(r.Vb(0,"div",166),r.Vb(1,"h5",167),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",168),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",169),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",170),r.Vb(8,"div",171),r.Rc(9,UB,10,13,"ng-container",86),r.Qb(10,"div",267),r.Rc(11,BB,10,13,"ng-container",86),r.Ub(),r.Ub(),r.Vb(12,"div",187),r.Vb(13,"button",277),r.hc("click",(function(){return t.$implicit.close()})),r.Qb(14,"fa-icon",189),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Vb(17,"button",190),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(18,"fa-icon",125),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,5,"Configure")," "),r.Bb(7),r.sc("ngIf",!(null==n.modelRef.Columns||!n.modelRef.Columns.length)&&n.modelRef.ShowColumnsTotal),r.Bb(2),r.sc("ngIf",!(null==n.modelRef.Rows||!n.modelRef.Rows.length)&&n.modelRef.ShowRowsTotal),r.Bb(4),r.Vc(" \xa0",r.nc(16,7,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(20,9,"Cancel")," ")}}var _B,OB=function(){return[]},LB=((_B=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.translate=i,o.modalService=r,o._isEdit=!1,o._sections={Title:!1,Data:!0,Filter:!1,Drilldown:!1,Chart:!1,MainMenu:!1},o.expand="Parameters,Select,Rows.Attributes,Columns.Attributes,Measures,Roles.Role",o.collapseFields=!1,o.collapseDefinition=!1,o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Title=o.initialText:o.ws.isSecondaryLanguage?e.Title2=o.initialText:o.ws.isTernaryLanguage&&(e.Title3=o.initialText),e.ShowInMainMenu=!1,e.Collection="DetailsEntry",e.Type="Summary",e.Rows=[],e.Columns=[],e.Measures=[],e.Select=[],e.Parameters=[],e.ShowColumnsTotal=!0,e.ShowRowsTotal=!0,e.IsCustomDrilldown=!1,e},o.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Rows&&t.Rows.forEach((function(e){e.Id=null,e.Attributes&&e.Attributes.forEach((function(e){return e.Id=null}))})),t.Columns&&t.Columns.forEach((function(e){e.Id=null,e.Attributes&&e.Attributes.forEach((function(e){return e.Id=null}))})),t.Measures&&t.Measures.forEach((function(e){return e.Id=null})),t.Select&&t.Select.forEach((function(e){return e.Id=null})),t.Parameters&&t.Parameters.forEach((function(e){return e.Id=null})),t}return console.error("Cloning a non existing item"),null},o.isInactive=function(e){return null},o._currentModelModified=!1,o.dimToEditHasChanged=!1,o.dimToEditIsRow=!1,o.measureToEditHasChanged=!1,o.measureShowAdvancedOptions=!1,o.selectToEditHasChanged=!1,o.paramToEditHasChanged=!1,o.totalLabelsToEditHasChanged=!1,o.controlDisplay=function(e){var t=o.ws.definitions;if(o._controlChoicesDefinitions!==t){o._controlChoicesDefinitions=t,o._controlDisplayCache={};var n,i=_createForOfIteratorHelper(o.controlSimpleChoices());try{for(i.s();!(n=i.n()).done;){var r=n.value;o._controlDisplayCache[r.value]=r.name}}catch(u){i.e(u)}finally{i.f()}var c,a=_createForOfIteratorHelper(o.controlEntityChoices());try{for(a.s();!(c=a.n()).done;){var l=c.value;o._controlDisplayCache[l.value]=l.name}}catch(u){a.e(u)}finally{a.f()}}var s=o._controlDisplayCache[e];return s?s():""},o.previewDrilldown=!1,o}return _createClass(n,[{key:"onDefinitionChange",value:function(e,t){this.showDefinitionIdSelector(e)||delete e.DefinitionId,t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}},{key:"getForClient",value:function(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this.modelForClient=Object.assign({},e),this.previewDrilldown&&this._isEdit&&(this.modelForClient.Type="Details")),this.modelForClient):null}},{key:"watchIsEdit",value:function(e){return this._isEdit!==e&&(this._isEdit=e,window.dispatchEvent(new Event("resize")),this.previewDrilldown=!1),!0}},{key:"onCollectionChange",value:function(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}},{key:"onDefinitionIdChange",value:function(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}},{key:"showDefinitionIdSelector",value:function(e){return!!(e&&e.Collection&&Si.h[e.Collection]&&Si.h[e.Collection](this.workspace,this.translate,null).definitionIds)}},{key:"allDefinitionIds",value:function(e){var t=this;if(e&&e.Collection){var n=Si.h[e.Collection],i=n(this.workspace,this.translate,null);return i.definitionIds&&!i.definitionIdsArray&&(i.definitionIdsArray=i.definitionIds.map((function(e){return{value:e,name:n(t.workspace,t.translate,e).titlePlural}}))),i.definitionIdsArray}return null}},{key:"onChartChange",value:function(e,t){!t.Chart&&e&&(t.DefaultsToChart=!0),t.Chart&&!e&&(t.DefaultsToChart=!1),t.Chart=e,this.onDefinitionChange(t)}},{key:"createDimension",value:function(e){return{Id:0,KeyExpression:e,Localize:!0,AutoExpandLevel:1e3,ShowAsTree:!0,Attributes:[]}}},{key:"createMeasure",value:function(e){return{Id:0,Expression:e}}},{key:"createSelect",value:function(e){return{Id:0,Expression:e,Localize:!1}}},{key:"drop",value:function(e,t){var n=this.allFields(t),i=t.Rows,r=t.Columns,o=t.Measures,c=t.Select,a=e.previousContainer.data,l=e.previousIndex,s=e.container.data,u=e.currentIndex,d=!1;if(a===n&&s===n);else if(a===s&&s!==n)l!==u&&(Object(Q.i)(s,l,u),d=!0);else if(a!==n||s!==i&&s!==r)if(a===n&&s===o){var b=a[l],f=b.path;"entity"===b.desc.datatype&&(f+=".Id");var m=Object(Si.f)(b.desc)&&"Id"!==f?"Sum":"Count",g=this.createMeasure("".concat(m,"(").concat(f,")"));s.splice(u,0,g),d=!0}else if(a===n&&s===c){var p=this.createSelect(a[l].path);s.splice(u,0,p),d=!0}else if(a!==n&&s===n)a.splice(l,1),d=!0;else if(a!==o||s!==i&&s!==r)if(a!==i&&a!==r||s!==o)a===i&&s===r||a===r&&s===i?(Object(Q.j)(a,s,l,u),d=!0):console.error("Unhandled drop case.");else{var h,v=a.splice(l,1)[0];try{var y=Wi.parseSingle(v.KeyExpression);if(y.aggregations().length>0)h=null;else if(y instanceof Hi&&0===y.path.length&&"Id"===y.property)h="Count";else{var I=gr.nativeDesc(y,{},{},t.Collection,t.DefinitionId,this.workspace,this.translate);Object(Si.f)(I)&&(h="Sum")}}catch(E){}var C=Object.assign({},v);C.Expression=h?"".concat(h,"(").concat(v.KeyExpression,")"):v.KeyExpression,s.splice(u,0,C),d=!0}else{var w,k=a.splice(l,1)[0];try{var M=Wi.parseSingle(k.Expression);M&&M instanceof $i&&M.isAggregation&&1===M.arguments.length&&(w=er(M.arguments[0].toString()))}catch(U){}var V=Object.assign({},k);V.Id=0,V.KeyExpression=w||k.Expression,void 0===V.Localize&&(V.Localize=!0),void 0===V.AutoExpandLevel&&(V.AutoExpandLevel=1),void 0===V.ShowAsTree&&(V.ShowAsTree=!0),void 0===V.Attributes&&(V.Attributes=[]),s.splice(u,0,V),d=!0}else{var T=this.createDimension(a[l].path);s.splice(u,0,T),d=!0}d&&(this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))}},{key:"allFields",value:function(e){return this._allFields&&this._currentCollection===e.Collection&&this._currentDefinitionId===e.DefinitionId||(this._currentCollection=e.Collection,this._currentDefinitionId=e.DefinitionId,this._allFields=this.getChildren(e.Collection,e.DefinitionId),this.onSearchChanged(e)),this._allFields}},{key:"hasChildren",value:function(e){switch(e.desc.datatype){case"entity":case"date":case"datetime":case"datetimeoffset":return!0;default:return!1}}},{key:"showTreeNode",value:function(e){var t=e.parent;return(!this.search||e.match)&&(!t||t.isExpanded&&this.showTreeNode(t))}},{key:"getChildren",value:function(e,t,n){if(!e)return[];var i=Si.h[e];if(!i)return[];var r=i(this.workspace,this.translate,t),o=n?n.level+1:0,c=n?"".concat(n.path,"."):"";return Object.keys(r.properties).map((function(e){return{path:"".concat(c).concat(e),desc:r.properties[e],level:o,parent:n}}))}},{key:"getDateParts",value:function(e){var t=this,n=e.level+1;return[{path:"Year(".concat(e.path,")"),desc:gr.datePartDesc((function(){return t.translate.instant("DatePart_year")}),this.translate),level:n,parent:e},{path:"Quarter(".concat(e.path,")"),desc:gr.quarterDesc((function(){return t.translate.instant("DatePart_quarter")}),this.translate),level:n,parent:e},{path:"Month(".concat(e.path,")"),desc:gr.monthDesc((function(){return t.translate.instant("DatePart_month")}),this.translate),level:n,parent:e},{path:"Day(".concat(e.path,")"),desc:gr.datePartDesc((function(){return t.translate.instant("DatePart_day")}),this.translate),level:n,parent:e},{path:"Weekday(".concat(e.path,")"),desc:gr.weekdayDesc((function(){return t.translate.instant("DatePart_weekday")}),this.translate),level:n,parent:e}]}},{key:"onExpand",value:function(e,t,n){if(e.isExpanded=!e.isExpanded,e.isExpanded&&!e.childrenLoaded){var i,r;switch(e.desc.datatype){case"entity":r=this.getChildren(e.desc.control,e.desc.definitionId,e);break;case"date":case"datetime":case"datetimeoffset":r=this.getDateParts(e)}(i=this.allFields(n)).splice.apply(i,[t+1,0].concat(_toConsumableArray(r))),e.childrenLoaded=!0,this.onSearchChanged(n)}}},{key:"copyPathToClipboard",value:function(e){Object(W.f)(e)}},{key:"paddingLeft",value:function(e){return this.workspace.ws.isRtl?"0":20*e.level+"px"}},{key:"paddingRight",value:function(e){return this.workspace.ws.isRtl?20*e.level+"px":"0"}},{key:"flipNode",value:function(e){return this.flipIcon(e.isExpanded)}},{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateNode",value:function(e){return this.rotateIcon(e.isExpanded)}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"onSearchChanged",value:function(e){var t=this.allFields(e);if(this.search){var n=this.search.toLowerCase();t.forEach((function(e){return e.match=!1})),t.forEach((function(e){var t=e.desc.label();if(t&&t.toLowerCase().indexOf(n)>=0)for(var i=e;i&&!i.match;)i.match=!0,i=i.parent}))}}},{key:"onToggleSection",value:function(e){this._sections[e]=!this._sections[e]}},{key:"showSection",value:function(e){return this._sections[e]}},{key:"onIconClick",value:function(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}},{key:"onToggleFields",value:function(){this.collapseFields=!this.collapseFields,window.dispatchEvent(new Event("resize"))}},{key:"onToggleDefinition",value:function(){this.collapseDefinition=!this.collapseDefinition,window.dispatchEvent(new Event("resize"))}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"weakEntityErrors",value:function(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some((function(t){return Object(UI.b)(e.serverErrors[t])}))}},{key:"dimensionErrors",value:function(e){var t=this;return this.weakEntityErrors(e)||!!e.Attributes&&e.Attributes.some((function(e){return t.weakEntityErrors(e)}))}},{key:"customizeLabelsErrors",value:function(e){return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.ColumnsTotalLabel)||Object(UI.b)(e.serverErrors.ColumnsTotalLabel2)||Object(UI.b)(e.serverErrors.ColumnsTotalLabel3)||Object(UI.b)(e.serverErrors.RowsTotalLabel)||Object(UI.b)(e.serverErrors.RowsTotalLabel2)||Object(UI.b)(e.serverErrors.RowsTotalLabel3))}},{key:"dataSectionErrors",value:function(e){var t=this,n="Details"===e.Type;return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.Type)||Object(UI.b)(e.serverErrors.ShowColumnsTotal)||Object(UI.b)(e.serverErrors.ShowRowsTotal)||this.customizeLabelsErrors(e)||n&&Object(UI.b)(e.serverErrors.OrderBy)||Object(UI.b)(e.serverErrors.Top))||!!e.Rows&&e.Rows.some((function(e){return t.dimensionErrors(e)}))||!!e.Columns&&e.Columns.some((function(e){return t.dimensionErrors(e)}))||!!e.Measures&&e.Measures.some((function(e){return t.weakEntityErrors(e)}))||n&&!!e.Select&&e.Select.some((function(e){return t.weakEntityErrors(e)}))}},{key:"filterSectionErrors",value:function(e){var t=this;return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.Filter)||Object(UI.b)(e.serverErrors.Having))||!!e.Parameters&&e.Parameters.some((function(e){return t.weakEntityErrors(e)}))}},{key:"drilldownSectionErrors",value:function(e){var t=this;return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.OrderBy)||Object(UI.b)(e.serverErrors.IsCustomDrilldown))||!!e.Select&&e.Select.some((function(e){return t.weakEntityErrors(e)}))}},{key:"chartSectionErrors",value:function(e){return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.Chart)||Object(UI.b)(e.serverErrors.ChartOptions)||Object(UI.b)(e.serverErrors.DefaultsToChart))}},{key:"titleSectionErrors",value:function(e){return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.Id)||Object(UI.b)(e.serverErrors.Code)||Object(UI.b)(e.serverErrors.Title)||Object(UI.b)(e.serverErrors.Description)||Object(UI.b)(e.serverErrors.Title2)||Object(UI.b)(e.serverErrors.Description2)||Object(UI.b)(e.serverErrors.Title3)||Object(UI.b)(e.serverErrors.Description3))}},{key:"mainMenuSectionErrors",value:function(e){return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.ShowInMainMenu)||Object(UI.b)(e.serverErrors.MainMenuSection)||Object(UI.b)(e.serverErrors.MainMenuIcon)||Object(UI.b)(e.serverErrors.MainMenuSortKey))}},{key:"savePreprocessing",value:function(e){"Details"===e.Type&&(e.Rows=[],e.Columns=[],e.Measures=[],delete e.Having),"Summary"===e.Type&&(delete e.Top,e.IsCustomDrilldown||(e.Select=[],delete e.OrderBy)),0===e.Columns.length&&(e.ShowColumnsTotal=!0),0!==e.Columns.length&&e.ShowColumnsTotal||(delete e.ColumnsTotalLabel,delete e.ColumnsTotalLabel2,delete e.ColumnsTotalLabel3),0===e.Rows.length&&(e.ShowRowsTotal=!0),0!==e.Rows.length&&e.ShowRowsTotal||(delete e.RowsTotalLabel,delete e.RowsTotalLabel2,delete e.RowsTotalLabel3),e.ShowInMainMenu||(e.Roles=[])}},{key:"dimKeyExpressionDesc",value:function(e,t){if(this._dimKeyExpression!==e){this._dimKeyExpression=e,this._dimKeyExpressionDesc=null;try{var n,i=Wi.parseSingle(e);if(i&&0===i.aggregations().length&&(n=i),n){var r=gr.nativeDesc(n,{},{},t.Collection,t.DefinitionId,this.workspace,this.translate);switch(r.datatype){case"boolean":case"hierarchyid":case"geography":return}this._dimKeyExpressionDesc=r}}catch(o){}}return this._dimKeyExpressionDesc}},{key:"isDisplayDimensionDesc",value:function(e){return!!e&&"entity"===e.datatype}},{key:"isDisplayDimension",value:function(e,t){var n=this.dimKeyExpressionDesc(e,t);return this.isDisplayDimensionDesc(n)}},{key:"showDisplayExpression",value:function(e,t){return this.isDisplayDimension(e.KeyExpression,t)}},{key:"showDimensionAttributes",value:function(e,t){return this.isDisplayDimension(e.KeyExpression,t)}},{key:"showShowAsTree",value:function(e,t){var n=this.dimKeyExpressionDesc(e.KeyExpression,t);return gr.canShowAsTree(n,this.workspace,this.translate)}},{key:"showDimensionControl",value:function(e,t){var n=this.dimKeyExpressionDesc(e.KeyExpression,t);return!!n&&"entity"!==n.datatype}},{key:"validateDimension",value:function(e,t){if(e){e.serverErrors={};var n,i=_createForOfIteratorHelper(e.Attributes);try{for(i.s();!(n=i.n()).done;)n.value.serverErrors={}}catch(y){i.e(y)}finally{i.f()}try{var r=Wi.parseSingle(e.KeyExpression);if(r){var o=r.aggregations(),c=r.parameters(),a=r.columnAccesses();o.length>0?h("Expression cannot contain aggregation functions like '".concat(o[0].name,"'.")):c.length>0?h("Expression cannot contain parameters like '".concat(c[0],"'.")):0===a.length&&h("Expression must contain at least one column access.")}else h("Expression cannot be empty.")}catch(I){h(I.message)}if(this.showDisplayExpression(e,t))try{var l=Wi.parseSingle(e.DisplayExpression);if(l){var s=l.aggregations(),u=l.parameters();s.length>0?v("Expression cannot contain aggregation functions like '".concat(s[0].name,"'.")):u.length>0&&v("Expression cannot contain parameters like '".concat(u[0],"'."))}}catch(I){v(I.message)}if(this.showDimensionAttributes(e,t)){var d,b=_createForOfIteratorHelper(e.Attributes);try{var f=function(){var e=d.value;function t(t){e.serverErrors.Expression=e.serverErrors.Expression||[],e.serverErrors.Expression.push(t)}try{var n=Wi.parseSingle(e.Expression);if(n){var i=n.aggregations(),r=n.parameters();i.length>0?t("Expression cannot contain aggregation functions like '".concat(i[0].name,"'.")):r.length>0&&t("Expression cannot contain parameters like '".concat(r[0],"'."))}else t("Expression cannot be empty.")}catch(I){t(I.message)}};for(b.s();!(d=b.n()).done;)f()}catch(y){b.e(y)}finally{b.f()}}0===Object.keys(e.serverErrors).length&&delete e.serverErrors;var m,g=_createForOfIteratorHelper(e.Attributes);try{for(g.s();!(m=g.n()).done;){var p=m.value;0===Object.keys(p.serverErrors).length&&delete p.serverErrors}}catch(y){g.e(y)}finally{g.f()}}function h(t){e.serverErrors.KeyExpression=e.serverErrors.KeyExpression||[],e.serverErrors.KeyExpression.push(t)}function v(t){e.serverErrors.DisplayExpression=e.serverErrors.DisplayExpression||[],e.serverErrors.DisplayExpression.push(t)}}},{key:"onSetDimOrderDirection",value:function(e,t){t>=0&&(e.OrderDirection=null);for(var n=0;n<e.Attributes.length;n++)n!==t&&(e.Attributes[n].OrderDirection=null);this.dimToEditHasChanged=!0}},{key:"getColumns",value:function(e){return e.Columns=e.Columns||[],e.Columns}},{key:"getRows",value:function(e){return e.Rows=e.Rows||[],e.Rows}},{key:"onConfigureDimension",value:function(e,t,n){var i=this;this.dimToEditHasChanged=!1;var r=t[e]||this.createDimension(),o=JSON.parse(JSON.stringify(r));this.dimToEdit=o,this.modelRef=n,this.dimToEditIsRow=t===n.Rows,this.modalService.open(this.dimensionConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then((function(){i.dimToEditHasChanged&&(t[e]=o,i.showDisplayExpression(o,n)||delete o.DisplayExpression,i.showDimensionAttributes(o,n)||(o.Attributes=[]),i.showClearOrderDirectionMessage(o)&&o.OrderDirection&&n.Measures&&n.Measures.forEach((function(e){return delete e.OrderDirection})),i.validateModel(n),i.synchronizeParameters(n),i.onDefinitionChange(n))}),(function(e){}))}},{key:"showClearOrderDirectionMessage",value:function(e){return this.dimToEditIsRow&&(!!e.OrderDirection||e.Attributes&&e.Attributes.some((function(e){return!!e.OrderDirection})))}},{key:"onCreateRow",value:function(e){this.onConfigureDimension(e.Rows.length,e.Rows,e)}},{key:"onConfigureRow",value:function(e,t){this.onConfigureDimension(e,t.Rows,t)}},{key:"onDeleteRow",value:function(e,t){t.Rows.splice(e,1),this.onDefinitionChange(t)}},{key:"onCreateColumn",value:function(e){this.onConfigureDimension(e.Columns.length,e.Columns,e)}},{key:"onConfigureColumn",value:function(e,t){this.onConfigureDimension(e,t.Columns,t)}},{key:"onDeleteColumn",value:function(e,t){t.Columns.splice(e,1),this.onDefinitionChange(t)}},{key:"onDeleteAttribute",value:function(e,t){t.Attributes.splice(e,1),this.dimToEditHasChanged=!0}},{key:"onInsertAttribute",value:function(e){e.Attributes.push({Localize:!1}),this.dimToEditHasChanged=!0}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t,e.previousIndex,e.currentIndex)}},{key:"canApplyDimension",value:function(e){return!!e.KeyExpression}},{key:"getMeasures",value:function(e){return e.Measures=e.Measures||[],e.Measures}},{key:"onCreateMeasure",value:function(e){this.onConfigureMeasure(e.Measures.length,e)}},{key:"onConfigureMeasure",value:function(e,t){var n=this;this.measureToEditHasChanged=!1;var i=Object.assign({},t.Measures[e]||this.createMeasure());this.measureToEdit=i,this.modelRef=t,this.measureShowAdvancedOptions=!!(i.Control||i.DangerWhen||i.WarningWhen||i.SuccessWhen),this.modalService.open(this.measureConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then((function(){n.measureToEditHasChanged&&(t.Measures[e]=i,i.OrderDirection&&(t.Rows&&t.Rows.forEach((function(e){delete e.OrderDirection,e.Attributes&&e.Attributes.forEach((function(e){return delete e.OrderDirection}))})),t.Measures.forEach((function(e){e!==i&&delete e.OrderDirection}))),n.validateModel(t),n.synchronizeParameters(t),n.onDefinitionChange(t))}),(function(e){}))}},{key:"validateMeasure",value:function(e,t){if(e){var n;e.serverErrors={};try{if(n=Wi.parseSingle(e.Expression)){var i=n.unaggregatedColumnAccesses();i.length>0&&o("Expression cannot contain unaggregated column accesses like '".concat(i[0],"'."))}else o("Expression cannot be empty.")}catch(c){o(c.message)}if(n){var r=function(t,i){function r(t){e.serverErrors[i]=e.serverErrors[i]||[],e.serverErrors[i].push(t)}try{var o=Wi.parseSingle(t,{placeholderReplacement:n});if(o){var a=o.unaggregatedColumnAccesses();a.length>0&&r("Expression cannot contain unaggregated column accesses like '".concat(a[0],"'."))}}catch(c){r(c.message)}};r(e.SuccessWhen,"SuccessWhen"),r(e.WarningWhen,"WarningWhen"),r(e.DangerWhen,"DangerWhen")}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}function o(t){e.serverErrors.Expression=e.serverErrors.Expression||[],e.serverErrors.Expression.push(t)}}},{key:"onDeleteMeasure",value:function(e,t){t.Measures.splice(e,1),this.onDefinitionChange(t)}},{key:"onToggleMeasureAdvancedOptions",value:function(){this.measureShowAdvancedOptions=!this.measureShowAdvancedOptions}},{key:"canApplyMeasure",value:function(e){return!!e.Expression}},{key:"getSelect",value:function(e){return e.Select=e.Select||[],e.Select}},{key:"onDeleteSelect",value:function(e,t){t.Select.splice(e,1),this.onDefinitionChange(t)}},{key:"onCreateSelect",value:function(e){this.onConfigureSelect(e.Select.length,e)}},{key:"onConfigureSelect",value:function(e,t){var n=this;this.selectToEditHasChanged=!1;var i=Object.assign({},t.Select[e]||this.createSelect());this.selectToEdit=i,this.modelRef=t,this.modalService.open(this.selectConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then((function(){n.selectToEditHasChanged&&(t.Select[e]=i,n.validateModel(t),n.synchronizeParameters(t),n.onDefinitionChange(t))}),(function(e){}))}},{key:"validateSelect",value:function(e,t){if(e){e.serverErrors={};try{var n=Wi.parseSingle(e.Expression);if(n){var i=n.aggregations();if(i.length>0)o("Expression cannot contain aggregation functions like '".concat(i[0].name,"'."));else if("Summary"===t.Type&&t.IsCustomDrilldown){var r=n.parameters();r.length>0&&o("Expression cannot contain parameters like '".concat(r[0],"'."))}}else o("Expression cannot be empty.")}catch(c){o(c.message)}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}function o(t){e.serverErrors.Expression=e.serverErrors.Expression||[],e.serverErrors.Expression.push(t)}}},{key:"canApplySelect",value:function(e){return!!e.Expression}},{key:"getParameters",value:function(e){return e.Parameters=e.Parameters||[],e.Parameters}},{key:"onConfigureParameter",value:function(e,t){var n=this;this.paramToEditHasChanged=!1;var i=Object.assign({},t.Parameters[e]);this.paramToEdit=i,this.modelRef=t,this.modalService.open(this.paramConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then((function(){n.paramToEditHasChanged&&(n.showParamDefaultExpression(i)||delete i.DefaultExpression,t.Parameters[e]=i,n.validateModel(t),n.synchronizeParameters(t),n.onDefinitionChange(t))}),(function(e){}))}},{key:"validateParam",value:function(e,t){if(e){var n;e.serverErrors={};try{if(n=Wi.parseSingle(e.DefaultExpression)){var i=n.aggregations(),r=n.columnAccesses(),o=n.parameters();i.length>0?c("Expression cannot contain aggregation functions like '".concat(i[0].name,"'.")):r.length>0?c("Expression cannot contain column access literals like '".concat(r[0],"'.")):o.length>0&&c("Expression cannot contain parameters like '".concat(o[0],"'."))}}catch(a){c(a.message)}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}function c(t){e.serverErrors.DefaultExpression=e.serverErrors.DefaultExpression||[],e.serverErrors.DefaultExpression.push(t)}}},{key:"showParamDefaultExpression",value:function(e){return"Optional"===e.Visibility}},{key:"canApplyParam",value:function(e){return!0}},{key:"onConfigureTotalLabels",value:function(e){var t=this;this.totalLabelsToEditHasChanged=!1;var n={ColumnsTotalLabel:e.ColumnsTotalLabel,ColumnsTotalLabel2:e.ColumnsTotalLabel2,ColumnsTotalLabel3:e.ColumnsTotalLabel3,RowsTotalLabel:e.RowsTotalLabel,RowsTotalLabel2:e.RowsTotalLabel2,RowsTotalLabel3:e.RowsTotalLabel3,serverErrors:e.serverErrors};this.totalLabelsToEdit=n,this.modelRef=e,this.modalService.open(this.totalLabelsModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then((function(){t.totalLabelsToEditHasChanged&&(e.ColumnsTotalLabel=n.ColumnsTotalLabel,e.ColumnsTotalLabel2=n.ColumnsTotalLabel2,e.ColumnsTotalLabel3=n.ColumnsTotalLabel3,e.RowsTotalLabel=n.RowsTotalLabel,e.RowsTotalLabel2=n.RowsTotalLabel2,e.RowsTotalLabel3=n.RowsTotalLabel3,t.onDefinitionChange(e))}),(function(e){}))}},{key:"onFilterChanged",value:function(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}},{key:"showHaving",value:function(e){return"Summary"===e.Type}},{key:"onHavingChanged",value:function(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}},{key:"onOrderByChanged",value:function(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}},{key:"validateModel",value:function(e){if(e){if(e.serverErrors={},e.Filter){var t=function(t){e.serverErrors.Filter=e.serverErrors.Filter||[],e.serverErrors.Filter.push(t)};try{var n=Wi.parseSingle(e.Filter);if(n){var i=n.aggregations();i.length>0&&t("Expression cannot contain aggregation functions like '".concat(i[0].name,"'."))}}catch(x){t(x.message)}}if("Summary"===e.Type&&e.Having){var r=function(t){e.serverErrors.Having=e.serverErrors.Having||[],e.serverErrors.Having.push(t)};try{var o=Wi.parseSingle(e.Having);if(o){var c=o.unaggregatedColumnAccesses();c.length>0&&r("Expression cannot contain unaggregated column accesses like '".concat(c[0],"'."))}}catch(x){r(x.message)}}if(("Details"===e.Type||e.IsCustomDrilldown)&&e.OrderBy){var a=function(t){e.serverErrors.OrderBy=e.serverErrors.OrderBy||[],e.serverErrors.OrderBy.push(t)};try{var l,s=_createForOfIteratorHelper(Wi.parse(e.OrderBy,{expectDirKeywords:!0}));try{for(s.s();!(l=s.n()).done;){var u=l.value,d=u.aggregations(),b=u.columnAccesses(),f=u.parameters();d.length>0?a("Expression cannot contain aggregation functions like '".concat(d[0].name,"'.")):f.length>0?a("Expression cannot contain parameters like '".concat(f[0],"'.")):0===b.length&&a("Expression atom cannot be a constant like '".concat(u,"'."))}}catch(R){s.e(R)}finally{s.f()}}catch(x){a(x.message)}}if("Summary"===e.Type){var m,g=_createForOfIteratorHelper(e.Columns);try{for(g.s();!(m=g.n()).done;){var p=m.value;this.validateDimension(p,e)}}catch(R){g.e(R)}finally{g.f()}var h,v=_createForOfIteratorHelper(e.Rows);try{for(v.s();!(h=v.n()).done;){var y=h.value;this.validateDimension(y,e)}}catch(R){v.e(R)}finally{v.f()}var I,C=_createForOfIteratorHelper(e.Measures);try{for(C.s();!(I=C.n()).done;){var w=I.value;this.validateMeasure(w,e)}}catch(R){C.e(R)}finally{C.f()}}if("Details"===e.Type||e.IsCustomDrilldown){var k,M=_createForOfIteratorHelper(e.Select);try{for(M.s();!(k=M.n()).done;){var V=k.value;this.validateSelect(V,e)}}catch(R){M.e(R)}finally{M.f()}}var T,E=_createForOfIteratorHelper(e.Parameters);try{for(E.s();!(T=E.n()).done;){var U=T.value;this.validateParam(U,e)}}catch(R){E.e(R)}finally{E.f()}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}}},{key:"synchronizeParameters",value:function(e){try{var t=e,n=gr.getReportInfos(t,this.workspace,this.translate).parameters;if(0===n.length)e.Parameters=[];else{var i={};n.forEach((function(e){return i[e.keyLower]=e}));var r=Object.keys(i),o=e.Parameters.filter((function(e){return!!i[e.Key.toLowerCase()]})),c={};o.forEach((function(e){return c[e.Key.toLowerCase()]=e}));for(var a=0,l=r;a<l.length;a++){var s=l[a],u=i[s],d=c[s];d||(d={Id:0,Visibility:u.isRequired?"Required":"Optional"},c[s]=d,o.push(d)),d.Key=u.key}e.Parameters=o}}catch(b){console.error(b.message)}}},{key:"controlSimpleChoices",value:function(){return Object(Si.i)(this.translate)}},{key:"controlEntityChoices",value:function(){return Object(Si.a)(this.workspace,this.translate,!0)}},{key:"showOptions",value:function(e){return!!e&&Object(Si.e)(e)}},{key:"togglePreviewDrilldown",value:function(e){this.previewDrilldown=!this.previewDrilldown,this._currentModelModified=!0,this.onDefinitionChange(e)}},{key:"onDeleteRole",value:function(e,t){t>=0&&e.Roles.splice(t,1)}},{key:"onInsertRole",value:function(e){e.Roles.push({Id:0})}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"allCollections",get:function(){return Object(Si.a)(this.workspace,this.translate)}},{key:"allCharts",get:function(){var e=Object(AE.a)(this.workspace,this.translate).properties.Chart;return Object(Si.c)(e)}},{key:"allMainMenuSections",get:function(){var e=Object(AE.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Si.c)(e)}},{key:"allMainMenuIcons",get:function(){var e=Object(AE.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Si.c)(e)}},{key:"commandsDropdownPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}},{key:"isMultilingual",get:function(){return!!this.ws.settings.SecondaryLanguageId||!!this.ws.settings.TernaryLanguageId}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||_B)(r.Pb(S.m),r.Pb(G.e),r.Pb(X.t))},_B.\u0275cmp=r.Jb({type:_B,selectors:[["t-report-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(xx,!0),r.Oc(Rx,!0),r.Oc(Dx,!0),r.Oc(Bx,!0),r.Oc(Sx,!0)),2&e&&(r.Ec(n=r.ic())&&(t.dimensionConfigModal=n.first),r.Ec(n=r.ic())&&(t.measureConfigModal=n.first),r.Ec(n=r.ic())&&(t.selectConfigModal=n.first),r.Ec(n=r.ic())&&(t.paramConfigModal=n.first),r.Ec(n=r.ic())&&(t.totalLabelsModal=n.first))},features:[r.yb],decls:18,vars:15,consts:[["collection","ReportDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["dimensionConfigModal",""],["measureConfigModal",""],["selectConfigModal",""],["paramConfigModal",""],["totalLabelsModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"p-2","flex-grow-1","h-100","overflow-auto"],[1,"form-group"],["for","collection",1,"small"],["id","collection","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["collection","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","form-group",3,"is-invalid",4,"ngIf"],["id","search","type","text","autocomplete","off",1,"form-control","t-studio-input",2,"text-shadow","none",3,"ngModel","placeholder","ngModelChange"],["cdkDropList","","cdkDropListSortingDisabled","",1,"t-studio-source-area",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["fields","cdkDropList"],["cdkDrag","",3,"dblclick",4,"ngFor","ngForOf"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","title",1,"small"],["id","title","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],[1,"small","d-block"],[1,"custom-control","custom-radio","custom-control-inline","mx-0"],["type","radio","name","type","id","type_summary","value","Summary",1,"custom-control-input",3,"checked","change"],["for","type_summary",1,"custom-control-label"],["type","radio","name","type","id","type_details","value","Details",1,"custom-control-input",3,"checked","change"],["for","type_details",1,"custom-control-label"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["rows","cdkDropList"],["class","py-1 px-2 t-drag-label",4,"ngIf"],["class","t-studio-drop-row t-draggable","cdkDrag","",4,"ngFor","ngForOf"],["columns","cdkDropList"],["measures","cdkDropList"],["class","custom-control custom-checkbox",4,"ngIf"],["class","custom-control custom-checkbox pt-2",4,"ngIf"],["cdkDropList","",1,"t-studio-drop-area",2,"height","10rem",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["select","cdkDropList"],["for","orderby",1,"small"],["id","orderby","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["orderby","ngModel"],["for","top",1,"small"],["id","top","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["top","ngModel"],["for","filter",1,"small"],["rows","6","id","filter","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["filter","ngModel"],["class","form-group",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","iscustomdrilldown",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","iscustomdrilldown",1,"custom-control-label"],[1,"pt-3"],["drilldown_select","cdkDropList"],["for","drilldown_orderby",1,"small"],["id","drilldown_orderby","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["type","checkbox","id","previewdrilldown",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","previewdrilldown",1,"custom-control-label"],["class","text-truncate t-studio-section-header t-pointer",3,"click",4,"ngIf"],["class","p-2 t-studio-section",3,"d-none",4,"ngIf"],[1,"custom-control","custom-checkbox","form-group"],["type","checkbox","id","showInMainMenu",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showInMainMenu",1,"custom-control-label"],["class","form-group t-text-whitish",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"flex-grow-1"],[1,"col","bg-light","border","shadow","h-100"],["mode","preview",1,"h-100",3,"previewDefinition","showChart","disableDrilldown"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],[3,"value"],["for","definitionId",1,"small"],["id","definitionId",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionId","ngModel"],["value",""],["cdkDrag","",3,"dblclick"],[1,"t-studio-source-row","t-draggable"],[1,"text-truncate","d-flex"],[1,"btn","btn-sm","m-0","py-0","px-2","border-0","text-white","t-pointer","t-transparent",3,"disabled","click"],["class","t-studio-source-row",4,"cdkDragPlaceholder"],[1,"t-studio-source-row"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","title2",1,"small"],["id","title2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title2","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","title3",1,"small"],["id","title3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title3","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],[1,"py-1","px-2","t-drag-label"],[1,"small","t-studio-area-watermark"],["cdkDrag","",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],["type","checkbox","id","showColumnsTotal",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showColumnsTotal",1,"custom-control-label"],["type","checkbox","id","showRowsTotal",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showRowsTotal",1,"custom-control-label"],[1,"custom-control","custom-checkbox","pt-2"],[1,"btn","btn-sm","t-text-whitish","btn-link","p-0","border-0","font-weight-normal",3,"click"],["for","having",1,"small"],["rows","6","id","having","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["having","ngModel"],["cdkDropList","",1,"t-studio-drop-area",2,"border-style","solid",3,"cdkDropListData","cdkDropListDropped"],["for","chart",1,"small"],["id","chart",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["chart","ngModel"],["type","checkbox","id","defaultsToChart",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","defaultsToChart",1,"custom-control-label"],[1,"form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],[1,"p-0"],["theme","dark",3,"ngModel","showCreate","ngModelChange"],["rolemodel","ngModel"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"small","t-light-danger","text-wrap"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12"],["for","keyexpression",1,"small"],["id","keyexpression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["keyexpression","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"form-group","col-12","col-sm-6"],["for","label",1,"small"],["id","label","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["class","form-group col-12 col-sm-6",4,"ngIf"],["for","orderdirection",1,"small"],["id","orderdirection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["autoexpandlevelfield",""],["class","form-group col-12 overflow-auto",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","displayexpression",1,"small"],["id","displayexpression","type","text","autocomplete","off",1,"form-control","t-studio-input","flex-grow-1",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["displayexpression","ngModel"],["ngbDropdown","","container","body","class","flex-grow-0",3,"placement",4,"ngIf"],["ngbDropdown","","container","body",1,"flex-grow-0",3,"placement"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1","t-no-arrow"],["icon","ellipsis-v"],["ngbDropdownMenu","",1,"t-studio-dropdown"],["type","checkbox","id","dimlocalize",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","dimlocalize",1,"custom-control-label","t-large"],["for","label2",1,"small"],["id","label2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","label3",1,"small"],["id","label3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","showastree",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showastree",1,"custom-control-label"],["for","autoexpandlevel",1,"small"],["id","autoexpandlevel","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["type","checkbox","id","autoexpandlevel",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","autoexpandlevel",1,"custom-control-label"],[1,"form-group","col-12","overflow-auto"],[1,"small","font-weight-normal"],[2,"width","1px"],[2,"width","30%"],[2,"width","20%"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1",3,"click"],["cdkDrag","","cdkDragLockAxis","y"],[4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["attexpression","ngModel"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["attlabel","ngModel"],["class","p-0",4,"ngIf"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","m-0","t-no-arrow"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label","t-large",3,"for"],[1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["dimcontrol","ngModel"],["disabled",""],["class","form-group w-100",4,"ngIf"],[1,"form-group","w-100"],[3,"control","isEdit","ngModel","ngModelChange"],["dimcontroloptions","ngModel"],[1,"col-12"],["icon","info-circle"],["for","expression",1,"small"],["id","expression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["expression","ngModel"],["class","form-group col-12",4,"ngIf"],[1,"btn","btn-sm","t-text-whitish","btn-link","py-0","font-weight-normal",3,"click"],["measureAdvancedOptions",""],["for","successwhen",1,"small"],["id","successwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["successwhen","ngModel"],["for","warningwhen",1,"small"],["id","warningwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["warningwhen","ngModel"],["for","dangerwhen",1,"small"],["id","dangerwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["dangerwhen","ngModel"],["measurecontrol","ngModel"],["measurecontroloptions","ngModel"],["id","expression","type","text","autocomplete","off",1,"form-control","t-studio-input","flex-grow-1",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["selectcontrol","ngModel"],["type","checkbox","id","selectlocalize",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","selectlocalize",1,"custom-control-label","t-large"],["selectcontroloptions","ngModel"],["for","key",1,"small"],["id","key",1,"form-control","t-studio-input",2,"opacity","0.5"],[1,"w-100"],["for","visibility",1,"small"],["id","visibility",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["value","Optional"],["value","Required"],["paramcontrol","ngModel"],["for","defaultexpression",1,"small"],["id","defaultexpression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["defaultexpression","ngModel"],["paramcontroloptions","ngModel"],[1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","columnstotallabel",1,"small"],["id","columnstotallabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel","ngModel"],["for","columnstotallabel2",1,"small"],["id","columnstotallabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel2","ngModel"],["for","columnstotallabel3",1,"small"],["id","columnstotallabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel3","ngModel"],["for","rowstotallabel",1,"small"],["id","rowstotallabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["rowstotallabel","ngModel"],["for","rowstotallabel2",1,"small"],["id","rowstotallabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","rowstotallabel3",1,"small"],["id","rowstotallabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,_x,3,3,"ng-template",null,1,r.Sc),r.Rc(4,sD,1,1,"ng-template",null,2,r.Sc),r.Rc(6,bD,1,1,"ng-template",null,3,r.Sc),r.Rc(8,qD,48,49,"ng-template",null,4,r.Sc),r.Rc(10,iB,46,45,"ng-template",null,5,r.Sc),r.Rc(12,bB,45,46,"ng-template",null,6,r.Sc),r.Rc(14,wB,57,45,"ng-template",null,7,r.Sc),r.Rc(16,SB,21,11,"ng-template",null,8,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5);r.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"ReportDefinitions"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.vc(14,OB))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,x.u,ne.b,ie.v,ie.u,ie.k,ie.n,x.t,x.B,ie.c,Q.f,ie.q,ie.a,FU,ie.p,ie.x,Q.b,Q.d,cl,X.l,X.r,X.p,Q.e,Q.c,Ux],pipes:[G.d],encapsulation:2}),_B);function FB(e,t){if(1&e&&(r.Vb(0,"div",6),r.Vb(1,"span",7),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub(),r.Vb(4,"div",8),r.Vb(5,"span",7),r.Tc(6),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("ReportDefinition",n,"Title")||r.nc(3,2,"Untitled")),r.Bb(4),r.Uc(i.ws.getMultilingualValue("ReportDefinition",n,"Description"))}}function AB(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"ReportDefinition"),"\n")}function PB(e,t){if(1&e&&(r.Vb(0,"span",9),r.Qb(1,"t-auto-cell",10),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function NB(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"VisibleInMainMenu")," ")}function jB(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"NotVisibleInMainMenu")," ")}var WB,qB=function(){return[]},QB=function(e){return{template:e,expression:"ShowInMainMenu eq true"}},HB=function(e){return{template:e,expression:"ShowInMainMenu eq false"}},$B=function(e,t){return[e,t]},GB=function(e){return{ShowInMainMenu:e}},zB=((WB=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i}return _createClass(n,[{key:"c",get:function(){return this.ws.ReportDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||WB)(r.Pb(S.m))},WB.\u0275cmp=r.Jb({type:WB,selectors:[["t-report-definitions-master"]],features:[r.yb],decls:12,vars:22,consts:[["collection","ReportDefinition","selectDefault","Type,ShowInMainMenu","selectForTiles","Title,Title2,Title3,Description,Description2,Description3","theme","dark",3,"mode","showCreateButton","filterDefault","masterCrumb","additionalSelect","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["visibleInMainMenu",""],["notVisibleInMainMenu",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","ReportDefinition",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,FB,7,4,"ng-template",null,1,r.Sc),r.Rc(4,AB,2,3,"ng-template",null,2,r.Sc),r.Rc(6,PB,2,1,"ng-template",null,3,r.Sc),r.Rc(8,NB,2,3,"ng-template",null,4,r.Sc),r.Rc(10,jB,2,3,"ng-template",null,5,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("masterCrumb",r.nc(1,10,"ReportDefinitions"))("additionalSelect",t.additionalSelect)("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(12,qB))("filterDefinition",r.wc(20,GB,r.xc(17,$B,r.wc(13,QB,c),r.wc(15,HB,a))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),WB);function JB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-report-definitions-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function KB(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-report-definitions-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var YB,XB=((YB=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return ZB(e||YB)},YB.\u0275cmp=r.Jb({type:YB,selectors:[["t-report-definitions-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:YB}]),r.yb],decls:5,vars:6,consts:[["collection","ReportDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,JB,2,3,"ng-template",null,1,r.Sc),r.Rc(3,KB,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,LB,zB],encapsulation:2}),YB),ZB=r.Xb(XB),eS=["reportDefinitionModal"];function tS(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function nS(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function iS(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}function rS(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"TitleSingular",i.ws)||r.nc(2,1,"Untitled"))}}function oS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",55),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleDefinition()})),r.Vb(1,"div",56),r.Qb(2,"fa-icon",57),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Definition"))}}function cS(e,t){1&e&&r.Qb(0,"fa-icon",58)}function aS(e,t){1&e&&r.Rb(0)}function lS(e,t){1&e&&r.Rb(0)}function sS(e,t){1&e&&r.Rb(0)}var uS=function(){return{updateOn:"blur"}},dS=function(e,t){return{control:e,serverErrors:t}};function bS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",20),r.Vb(1,"label",59),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",60,61),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular2")})),r.Ub(),r.Rc(6,sS,1,0,"ng-container",24),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular2)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular2)("ngModelOptions",r.vc(9,uS)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,dS,i,null==o.serverErrors?null:o.serverErrors.TitleSingular2))}}function fS(e,t){1&e&&r.Rb(0)}function mS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",20),r.Vb(1,"label",62),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",63,64),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular3")})),r.Ub(),r.Rc(6,fS,1,0,"ng-container",24),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular3)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular3)("ngModelOptions",r.vc(9,uS)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,dS,i,null==o.serverErrors?null:o.serverErrors.TitleSingular3))}}function gS(e,t){1&e&&r.Rb(0)}function pS(e,t){1&e&&r.Rb(0)}function hS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",20),r.Vb(1,"label",65),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",66,67),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural2")})),r.Ub(),r.Rc(6,pS,1,0,"ng-container",24),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural2)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural2)("ngModelOptions",r.vc(9,uS)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,dS,i,null==o.serverErrors?null:o.serverErrors.TitlePlural2))}}function vS(e,t){1&e&&r.Rb(0)}function yS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",20),r.Vb(1,"label",68),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",69,70),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural3")})),r.Ub(),r.Rc(6,vS,1,0,"ng-container",24),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural3)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural3)("ngModelOptions",r.vc(9,uS)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,dS,i,null==o.serverErrors?null:o.serverErrors.TitlePlural3))}}function IS(e,t){1&e&&r.Qb(0,"fa-icon",58)}function CS(e,t){1&e&&r.Qb(0,"fa-icon",58)}function wS(e,t){1&e&&(r.Vb(0,"div",77),r.Tc(1," \u200c "),r.Ub())}function kS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",71),r.Vb(1,"div",72),r.Rc(2,CS,1,0,"fa-icon",18),r.Vb(3,"span",73),r.Tc(4),r.Ub(),r.Vb(5,"button",33),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureReportDefinition(e,i)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",74),r.Ub(),r.Tc(8," \xa0 "),r.Vb(9,"button",33),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteReportDefinition(e,i)})),r.mc(10,"translate"),r.Qb(11,"fa-icon",75),r.Ub(),r.Ub(),r.Rc(12,wS,2,0,"div",76),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(2),r.Vc(" ",o.ws.getMultilingualValue("ReportDefinition",i.ReportDefinitionId,"Title")," "),r.Bb(1),r.sc("title",r.nc(6,4,"Configure")),r.Bb(4),r.sc("title",r.nc(10,6,"Delete"))}}function MS(e,t){if(1&e&&(r.Vb(0,"span",78),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n," ")}}function VS(e,t){1&e&&r.Qb(0,"fa-icon",58)}function TS(e,t){if(1&e&&(r.Vb(0,"option",79),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function ES(e,t){1&e&&r.Rb(0)}function US(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",80),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(2).model;return r.lc().onIconClick(i,e)})),r.Qb(1,"fa-icon",81),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2).model;r.Gb("t-highlighted",i.value===o.MainMenuIcon),r.sc("title",i.value),r.Bb(1),r.sc("icon",i.value)}}function xS(e,t){1&e&&r.Rb(0)}function RS(e,t){1&e&&r.Rb(0)}function DS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",82),r.Vb(1,"div",83),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeHidden(e)})),r.Vb(2,"span",84),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"div",83),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeVisible(e)})),r.Vb(6,"span",84),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Ub(),r.Vb(9,"div",83),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeArchived(e)})),r.Vb(10,"span",84),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(1),r.Gb("t-pointer","Hidden"!==i.State)("t-less-dark","Hidden"===i.State),r.Bb(2),r.Uc(r.nc(4,15,"Definition_State_Hidden")),r.Bb(2),r.Gb("t-pointer","Visible"!==i.State)("t-less-dark","Visible"===i.State),r.Bb(2),r.Uc(r.nc(8,17,"Definition_State_Visible")),r.Bb(2),r.Gb("t-pointer","Archived"!==i.State)("t-less-dark","Archived"===i.State),r.Bb(2),r.Uc(r.nc(12,19,"Definition_State_Archived"))}}var BS=function(e){return{control:null,serverErrors:e}};function SS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",9),r.Rc(1,oS,6,4,"div",10),r.Vb(2,"div",11),r.Vb(3,"div",12),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleDefinition()})),r.Vb(4,"span"),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Vb(7,"div",13),r.Qb(8,"fa-icon",14),r.Ub(),r.Ub(),r.Vb(9,"div",15),r.Vb(10,"div",16),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Title")})),r.Tc(11," \xa0 "),r.Qb(12,"fa-icon",17),r.Tc(13),r.mc(14,"translate"),r.Rc(15,cS,1,0,"fa-icon",18),r.Ub(),r.Vb(16,"div",19),r.Vb(17,"div",20),r.Vb(18,"label",21),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"input",22,23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Code")})),r.Ub(),r.Rc(23,aS,1,0,"ng-container",24),r.Ub(),r.Vb(24,"div",20),r.Vb(25,"label",25),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Vb(28,"input",26,27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitleSingular=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitleSingular")})),r.Ub(),r.Rc(30,lS,1,0,"ng-container",24),r.Ub(),r.Rc(31,bS,7,13,"div",28),r.Rc(32,mS,7,13,"div",28),r.Vb(33,"div",20),r.Vb(34,"label",29),r.Tc(35),r.mc(36,"translate"),r.Ub(),r.Vb(37,"input",30,31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitlePlural=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitlePlural")})),r.Ub(),r.Rc(39,gS,1,0,"ng-container",24),r.Ub(),r.Rc(40,hS,7,13,"div",28),r.Rc(41,yS,7,13,"div",28),r.Ub(),r.Vb(42,"div",16),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Reports")})),r.Tc(43," \xa0 "),r.Qb(44,"fa-icon",17),r.Tc(45),r.mc(46,"translate"),r.Rc(47,IS,1,0,"fa-icon",18),r.Ub(),r.Vb(48,"div",19),r.Vb(49,"div",20),r.Vb(50,"label",32),r.Tc(51),r.mc(52,"translate"),r.Ub(),r.Tc(53,"\xa0 "),r.Vb(54,"button",33),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateReportDefinition(e)})),r.mc(55,"translate"),r.Qb(56,"fa-icon",34),r.Ub(),r.Vb(57,"div",35),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().rowDrop(e,t.ReportDefinitions)})),r.Rc(58,kS,13,8,"div",36),r.Ub(),r.Rc(59,MS,2,1,"span",37),r.Ub(),r.Ub(),r.Vb(60,"div",16),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Menu")})),r.Tc(61," \xa0 "),r.Qb(62,"fa-icon",17),r.Tc(63),r.mc(64,"translate"),r.Rc(65,VS,1,0,"fa-icon",18),r.Ub(),r.Vb(66,"div",19),r.Vb(67,"div",20),r.Vb(68,"label",38),r.Tc(69),r.mc(70,"translate"),r.Ub(),r.Vb(71,"select",39,40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSection")})),r.Qb(73,"option",41),r.Rc(74,TS,2,2,"option",42),r.Ub(),r.Rc(75,ES,1,0,"ng-container",24),r.Ub(),r.Vb(76,"div",20),r.Vb(77,"label",43),r.Tc(78),r.mc(79,"translate"),r.Ub(),r.Vb(80,"div",44),r.Rc(81,US,2,4,"div",45),r.Ub(),r.Rc(82,xS,1,0,"ng-container",24),r.Ub(),r.Vb(83,"div",20),r.Vb(84,"label",46),r.Tc(85),r.mc(86,"translate"),r.Ub(),r.Vb(87,"input",47,48),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSortKey=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSortKey")})),r.Ub(),r.Rc(89,RS,1,0,"ng-container",24),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(90,"div",49),r.Vb(91,"div",50),r.Vb(92,"div",51),r.Vb(93,"span"),r.Tc(94),r.mc(95,"translate"),r.Ub(),r.Ub(),r.Rc(96,DS,13,21,"div",52),r.Ub(),r.Vb(97,"div",53),r.Qb(98,"t-lookups-details",54),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(22),o=r.Fc(29),c=r.Fc(38),a=r.Fc(72),l=r.Fc(88),s=r.lc(),u=s.isEdit,d=s.model,b=r.lc(),f=r.Fc(13);r.Bb(1),r.sc("ngIf",u&&b.collapseDefinition),r.Bb(1),r.Gb("d-flex",u&&!b.collapseDefinition)("d-none",!u||b.collapseDefinition),r.Bb(3),r.Uc(r.nc(6,71,"Definition")),r.Bb(3),r.sc("flip",b.flipIcon(!1)),r.Bb(4),r.sc("flip",b.flipIcon(b.showSection("Title")))("rotate",b.rotateIcon(b.showSection("Title"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(14,73,"Title")," "),r.Bb(2),r.sc("ngIf",b.sectionErrors("Title",d)),r.Bb(1),r.Gb("d-none",!b.showSection("Title")),r.Bb(1),r.Gb("is-invalid",b.invalid(i,null==d.serverErrors?null:d.serverErrors.Code)),r.Bb(2),r.Uc(r.nc(20,75,"Code")),r.Bb(2),r.sc("ngModel",d.Code)("ngModelOptions",r.vc(97,uS)),r.Bb(2),r.sc("ngTemplateOutlet",f)("ngTemplateOutletContext",r.xc(98,dS,i,null==d.serverErrors?null:d.serverErrors.Code)),r.Bb(1),r.Gb("is-invalid",b.invalid(o,null==d.serverErrors?null:d.serverErrors.TitleSingular)),r.Bb(2),r.Uc(r.nc(27,77,"TitleSingular")+b.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",d.TitleSingular)("ngModelOptions",r.vc(101,uS)),r.Bb(2),r.sc("ngTemplateOutlet",f)("ngTemplateOutletContext",r.xc(102,dS,o,null==d.serverErrors?null:d.serverErrors.TitleSingular)),r.Bb(1),r.sc("ngIf",null==b.ws.settings?null:b.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==b.ws.settings?null:b.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",b.invalid(c,null==d.serverErrors?null:d.serverErrors.TitlePlural)),r.Bb(2),r.Uc(r.nc(36,79,"TitlePlural")+b.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",d.TitlePlural)("ngModelOptions",r.vc(105,uS)),r.Bb(2),r.sc("ngTemplateOutlet",f)("ngTemplateOutletContext",r.xc(106,dS,c,null==d.serverErrors?null:d.serverErrors.TitlePlural)),r.Bb(1),r.sc("ngIf",null==b.ws.settings?null:b.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==b.ws.settings?null:b.ws.settings.TernaryLanguageId),r.Bb(3),r.sc("flip",b.flipIcon(b.showSection("Reports")))("rotate",b.rotateIcon(b.showSection("Reports"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(46,81,"Reports")," "),r.Bb(2),r.sc("ngIf",b.sectionErrors("Reports",d)),r.Bb(1),r.Gb("d-none",!b.showSection("Reports")),r.Bb(3),r.Uc(r.nc(52,83,"Definition_ReportDefinitions")),r.Bb(3),r.sc("title",r.nc(55,85,"Create")),r.Bb(4),r.sc("ngForOf",d.ReportDefinitions),r.Bb(1),r.sc("ngForOf",null==d.serverErrors?null:d.serverErrors.ReportDefinitions),r.Bb(3),r.sc("flip",b.flipIcon(b.showSection("Menu")))("rotate",b.rotateIcon(b.showSection("Menu"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(64,87,"Menu")," "),r.Bb(2),r.sc("ngIf",b.sectionErrors("Menu",d)),r.Bb(1),r.Gb("d-none",!b.showSection("Menu")),r.Bb(3),r.Uc(r.nc(70,89,"MainMenuSection")),r.Bb(2),r.sc("ngModel",d.MainMenuSection),r.Bb(3),r.sc("ngForOf",b.allMainMenuSections),r.Bb(1),r.sc("ngTemplateOutlet",f)("ngTemplateOutletContext",r.xc(109,dS,a,null==d.serverErrors?null:d.serverErrors.MainMenuSection)),r.Bb(3),r.Uc(r.nc(79,91,"MainMenuIcon")),r.Bb(3),r.sc("ngForOf",b.allMainMenuIcons),r.Bb(1),r.sc("ngTemplateOutlet",f)("ngTemplateOutletContext",r.wc(112,BS,null==d.serverErrors?null:d.serverErrors.MainMenuIcon)),r.Bb(3),r.Uc(r.nc(86,93,"MainMenuSortKey")),r.Bb(2),r.sc("ngModel",d.MainMenuSortKey)("ngModelOptions",r.vc(114,uS)),r.Bb(2),r.sc("ngTemplateOutlet",f)("ngTemplateOutletContext",r.xc(115,dS,l,null==d.serverErrors?null:d.serverErrors.MainMenuSortKey)),r.Bb(5),r.Uc(r.nc(95,95,"Preview")),r.Bb(2),r.sc("ngIf",!u),r.Bb(2),r.sc("previewDefinition",b.getForClient(d))}}function _S(e,t){if(1&e&&r.Rc(0,SS,99,118,"div",8),2&e){var n=t.isEdit,i=r.lc();r.sc("ngIf",i.watchIsEdit(n))}}function OS(e,t){if(1&e&&(r.Vb(0,"span",87),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function LS(e,t){if(1&e&&(r.Tb(0),r.Rc(1,OS,2,1,"span",86),r.Sb()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(1),r.sc("ngForOf",c.errors(i,o))}}function FS(e,t){if(1&e&&r.Rc(0,LS,2,1,"ng-container",85),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}function AS(e,t){1&e&&r.Rb(0)}function PS(e,t){1&e&&r.Rb(0)}function NS(e,t){1&e&&r.Rb(0)}function jS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",94),r.Vb(1,"label",105),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",106,107),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reportDefinitionToEdit.Name2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onItemToEditChange()})),r.Ub(),r.Rc(6,NS,1,0,"ng-container",24),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(13);r.Gb("is-invalid",o.invalid(i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name2)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.reportDefinitionToEdit.Name2)("ngModelOptions",r.vc(9,uS)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,dS,i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name2))}}function WS(e,t){1&e&&r.Rb(0)}function qS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",94),r.Vb(1,"label",108),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",109,110),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reportDefinitionToEdit.Name3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onItemToEditChange()})),r.Ub(),r.Rc(6,WS,1,0,"ng-container",24),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(13);r.Gb("is-invalid",o.invalid(i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name3)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.reportDefinitionToEdit.Name3)("ngModelOptions",r.vc(9,uS)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,dS,i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name3))}}function QS(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",88),r.Vb(1,"h5",89),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",90),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",91),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",92),r.Vb(8,"div",93),r.Vb(9,"div",94),r.Vb(10,"label",32),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"t-report-definitions-picker",95,96),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().reportDefinitionToEdit.ReportDefinitionId=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(15,AS,1,0,"ng-container",24),r.Ub(),r.Vb(16,"div",94),r.Vb(17,"label",97),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"input",98,99),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().reportDefinitionToEdit.Name=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(22,PS,1,0,"ng-container",24),r.Ub(),r.Rc(23,jS,7,13,"div",100),r.Rc(24,qS,7,13,"div",100),r.Ub(),r.Ub(),r.Vb(25,"div",101),r.Vb(26,"button",102),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(27,"fa-icon",103),r.Tc(28),r.mc(29,"translate"),r.Ub(),r.Vb(30,"button",104),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(31,"fa-icon",75),r.Tc(32),r.mc(33,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(14),o=r.Fc(21),c=r.lc(),a=r.Fc(13);r.Bb(2),r.Vc(" ",r.nc(3,19,"Configure")," "),r.Bb(7),r.Gb("is-invalid",c.invalid(i,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),r.Bb(2),r.Uc(r.nc(12,21,"Definition_ReportDefinition")),r.Bb(2),r.sc("ngModel",c.reportDefinitionToEdit.ReportDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(29,dS,i,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),r.Bb(1),r.Gb("is-invalid",c.invalid(o,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.Name)),r.Bb(2),r.Uc(r.nc(19,23,"Name")+c.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",c.reportDefinitionToEdit.Name)("ngModelOptions",r.vc(32,uS)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(33,dS,o,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.Name)),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.TernaryLanguageId),r.Bb(2),r.sc("disabled",!c.reportDefinitionToEdit.ReportDefinitionId),r.Bb(2),r.Vc(" \xa0",r.nc(29,25,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(33,27,"Cancel")," ")}}var HS,$S=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},GS=function(e,t,n){return[e,t,n]},zS=((HS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var c;return _classCallCheck(this,n),(c=t.call(this)).workspace=e,c.api=i,c.translate=r,c.modalService=o,c.lookupDefinitionsApi=c.api.lookupDefinitionsApi(c.notifyDestruct$),c.expand="ReportDefinitions.ReportDefinition",c.create=function(){var e={};return c.ws.isPrimaryLanguage?e.TitleSingular=c.initialText:c.ws.isSecondaryLanguage?e.TitleSingular2=c.initialText:c.ws.isTernaryLanguage&&(e.TitleSingular3=c.initialText),e.ReportDefinitions=[],e},c.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach((function(e){e.Id=null})),t}return console.error("Cloning a non existing item"),null},c.collapseDefinition=!1,c._isEdit=!1,c.isInactive=function(e){return null},c._sections={Title:!0,MainMenu:!1},c._currentModelModified=!1,c.onMakeHidden=function(e){e&&e.Id&&"Hidden"!==e.State&&c.lookupDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeVisible=function(e){e&&e.Id&&"Visible"!==e.State&&c.lookupDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeArchived=function(e){e&&e.Id&&"Archived"!==e.State&&c.lookupDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.showMakeHidden=function(e){return!!e&&"Hidden"!==e.State},c.showMakeVisible=function(e){return!!e&&"Visible"!==e.State},c.showMakeArchived=function(e){return!!e&&"Archived"!==e.State},c.hasStatePermission=function(e){return c.ws.canDo("lookup-definitions","State",e.Id)},c.stateTooltip=function(e){return c.hasStatePermission(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.itemToEditHasChanged=!1,c.lookupDefinitionsApi=c.api.lookupDefinitionsApi(c.notifyDestruct$),c}return _createClass(n,[{key:"allVisibilityProps",value:function(){for(var e=Object(FE.a)(this.workspace,this.translate).properties,t=[],n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];r.endsWith("Visibility")&&t.push(r)}return t}},{key:"onToggleDefinition",value:function(){this.collapseDefinition=!this.collapseDefinition}},{key:"watchIsEdit",value:function(e){return this._isEdit!==e&&(this._isEdit=e),!0}},{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"onToggleSection",value:function(e){this._sections[e]=!this._sections[e]}},{key:"showSection",value:function(e){return this._sections[e]}},{key:"weakEntityErrors",value:function(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some((function(t){return Object(UI.b)(e.serverErrors[t])}))}},{key:"sectionErrors",value:function(e,t){var n=this;return"Title"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.Code)||Object(UI.b)(t.serverErrors.TitleSingular)||Object(UI.b)(t.serverErrors.TitleSingular2)||Object(UI.b)(t.serverErrors.TitleSingular3)||Object(UI.b)(t.serverErrors.TitlePlural)||Object(UI.b)(t.serverErrors.TitlePlural2)||Object(UI.b)(t.serverErrors.TitlePlural3)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some((function(e){return n.weakEntityErrors(e)})):"MainMenu"===e&&!!t.serverErrors&&(Object(UI.b)(t.serverErrors.MainMenuIcon)||Object(UI.b)(t.serverErrors.MainMenuSection)||Object(UI.b)(t.serverErrors.MainMenuSortKey))}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"onDefinitionChange",value:function(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}},{key:"getForClient",value:function(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e)),this._getForClientResult):null}},{key:"onIconClick",value:function(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}},{key:"onItemToEditChange",value:function(){this.itemToEditHasChanged=!0}},{key:"onCreateReportDefinition",value:function(e){var t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(n){n&&e.ReportDefinitions.push(t)}),(function(e){}))}},{key:"onConfigureReportDefinition",value:function(e,t){var n=this;this.itemToEditHasChanged=!1;var i=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=i,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(r){r&&n.itemToEditHasChanged&&(t.ReportDefinitions[e]=i)}),(function(e){}))}},{key:"onDeleteReportDefinition",value:function(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t,e.previousIndex,e.currentIndex)}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"allMainMenuSections",get:function(){var e=Object(FE.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Si.c)(e)}},{key:"allMainMenuIcons",get:function(){var e=Object(FE.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Si.c)(e)}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||HS)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(X.t))},HS.\u0275cmp=r.Jb({type:HS,selectors:[["t-lookup-definitions-details"]],viewQuery:function(e,t){var n;1&e&&r.Oc(eS,!0),2&e&&r.Ec(n=r.ic())&&(t.reportDefinitionModal=n.first)},features:[r.yb],decls:16,vars:35,consts:[["collection","LookupDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[3,"value"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],[4,"ngIf"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,tS,2,3,"ng-template",null,1,r.Sc),r.Rc(4,nS,2,3,"ng-template",null,2,r.Sc),r.Rc(6,iS,2,3,"ng-template",null,3,r.Sc),r.Rc(8,rS,3,3,"ng-template",null,4,r.Sc),r.Rc(10,_S,1,1,"ng-template",null,5,r.Sc),r.Rc(12,FS,1,1,"ng-template",null,6,r.Sc),r.Rc(14,QS,34,36,"ng-template",null,7,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,11,"LookupDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",a)("actions",r.yc(31,GS,r.Ac(13,$S,n,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(19,$S,i,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(25,$S,o,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)}},directives:[q.a,x.u,ne.b,ie.c,ie.u,ie.k,ie.n,x.B,Q.f,x.t,ie.v,ie.p,ie.x,ie.q,$d,Q.b,Q.d,XB],pipes:[G.d],encapsulation:2}),HS);function JS(e,t){if(1&e&&(r.Vb(0,"div",11),r.Vb(1,"span",12),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",13),r.Vb(4,"div",14),r.Qb(5,"t-auto-cell",15),r.Ub(),r.Qb(6,"t-auto-cell",16),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("LookupDefinition",n,"TitleSingular")),r.Bb(3),r.sc("entity",i.c[n]),r.Bb(1),r.sc("entity",i.c[n])}}function KS(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"LookupDefinition"),"\n")}function YS(e,t){if(1&e&&(r.Vb(0,"span",17),r.Qb(1,"t-auto-cell",18),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function XS(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SavedByMe")," ")}function ZS(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Hidden")," ")}function e_(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Visible")," ")}function t_(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Archived")," ")}function n_(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function i_(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function r_(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}var o_,c_=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},a_=function(e,t,n){return[e,t,n]},l_=function(e){return{template:e,expression:"SavedById eq me"}},s_=function(e){return[e]},u_=function(e){return{template:e,expression:"State eq 'Hidden'"}},d_=function(e){return{template:e,expression:"State eq 'Visible'"}},b_=function(e){return{template:e,expression:"State eq 'Archived'"}},f_=function(e,t){return{SavedBy:e,State:t}},m_=((o_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.lookupsDefinitionsApi=o.api.lookupDefinitionsApi(o.notifyDestruct$),o.expand="",o.onMakeHidden=function(e){return o.lookupsDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeHidden=function(e){return e.some((function(e){var t=o.ws.get("LookupDefinition",e);return!!t&&"Hidden"!==t.State}))},o.onMakeVisible=function(e){return o.lookupsDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeVisible=function(e){return e.some((function(e){var t=o.ws.get("LookupDefinition",e);return!!t&&"Visible"!==t.State}))},o.onMakeArchived=function(e){return o.lookupsDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeArchived=function(e){return e.some((function(e){var t=o.ws.get("LookupDefinition",e);return!!t&&"Archived"!==t.State}))},o.hasStatePermission=function(e){return o.ws.canDo("lookup-definitions","State",null)},o.stateTooltip=function(e){return o.hasStatePermission(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.lookupsDefinitionsApi=o.api.lookupDefinitionsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.LookupDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||o_)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},o_.\u0275cmp=r.Jb({type:o_,selectors:[["t-lookup-definitions-master"]],features:[r.yb],decls:22,vars:51,consts:[["collection","LookupDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","LookupDefinition","path","Code",3,"entity"],["collection","LookupDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","LookupDefinition",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,JS,7,3,"ng-template",null,1,r.Sc),r.Rc(4,KS,2,3,"ng-template",null,2,r.Sc),r.Rc(6,YS,2,1,"ng-template",null,3,r.Sc),r.Rc(8,XS,2,3,"ng-template",null,4,r.Sc),r.Rc(10,ZS,2,3,"ng-template",null,5,r.Sc),r.Rc(12,e_,2,3,"ng-template",null,6,r.Sc),r.Rc(14,t_,2,3,"ng-template",null,7,r.Sc),r.Rc(16,n_,2,3,"ng-template",null,8,r.Sc),r.Rc(18,i_,2,3,"ng-template",null,9,r.Sc),r.Rc(20,r_,2,3,"ng-template",null,10,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"LookupDefinitions"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.yc(30,a_,r.Ac(12,c_,u,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(18,c_,d,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(24,c_,b,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",r.xc(48,f_,r.wc(36,s_,r.wc(34,l_,c)),r.yc(44,a_,r.wc(38,u_,a),r.wc(40,d_,l),r.wc(42,b_,s))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),o_);function g_(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-lookup-definitions-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function p_(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-lookup-definitions-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var h_,v_=((h_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return y_(e||h_)},h_.\u0275cmp=r.Jb({type:h_,selectors:[["t-lookup-definitions-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:h_}]),r.yb],decls:5,vars:6,consts:[["collection","LookupDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,g_,2,3,"ng-template",null,1,r.Sc),r.Rc(3,p_,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,zS,m_],encapsulation:2}),h_),y_=r.Xb(v_),I_=["reportDefinitionModal"],C_=["scriptModal"];function w_(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function k_(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function M_(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}function V_(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"TitleSingular",i.ws)||r.nc(2,1,"Untitled"))}}function T_(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",66),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleDefinition()})),r.Vb(1,"div",67),r.Qb(2,"fa-icon",68),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Definition"))}}function E_(e,t){1&e&&r.Qb(0,"fa-icon",69)}function U_(e,t){1&e&&r.Rb(0)}function x_(e,t){1&e&&r.Rb(0)}function R_(e,t){1&e&&r.Rb(0)}var D_=function(){return{updateOn:"blur"}},B_=function(e,t){return{control:e,serverErrors:t}};function S_(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",70),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",71,72),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular2")})),r.Ub(),r.Rc(6,R_,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular2)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular2)("ngModelOptions",r.vc(9,D_)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,B_,i,null==o.serverErrors?null:o.serverErrors.TitleSingular2))}}function __(e,t){1&e&&r.Rb(0)}function O_(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",73),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",74,75),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular3")})),r.Ub(),r.Rc(6,__,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular3)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular3)("ngModelOptions",r.vc(9,D_)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,B_,i,null==o.serverErrors?null:o.serverErrors.TitleSingular3))}}function L_(e,t){1&e&&r.Rb(0)}function F_(e,t){1&e&&r.Rb(0)}function A_(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",76),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",77,78),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural2")})),r.Ub(),r.Rc(6,F_,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural2)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural2)("ngModelOptions",r.vc(9,D_)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,B_,i,null==o.serverErrors?null:o.serverErrors.TitlePlural2))}}function P_(e,t){1&e&&r.Rb(0)}function N_(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",79),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",80,81),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural3")})),r.Ub(),r.Rc(6,P_,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural3)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural3)("ngModelOptions",r.vc(9,D_)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,B_,i,null==o.serverErrors?null:o.serverErrors.TitlePlural3))}}function j_(e,t){1&e&&r.Qb(0,"fa-icon",69)}function W_(e,t){1&e&&r.Rb(0)}function q_(e,t){1&e&&r.Rb(0)}function Q_(e,t){1&e&&r.Rb(0)}function H_(e,t){1&e&&r.Rb(0)}function $_(e,t){1&e&&r.Rb(0)}function G_(e,t){1&e&&r.Rb(0)}function z_(e,t){1&e&&r.Rb(0)}function J_(e,t){1&e&&r.Rb(0)}function K_(e,t){1&e&&r.Rb(0)}function Y_(e,t){1&e&&r.Rb(0)}function X_(e,t){1&e&&r.Rb(0)}function Z_(e,t){1&e&&r.Rb(0)}function eO(e,t){1&e&&r.Rb(0)}function tO(e,t){1&e&&r.Rb(0)}function nO(e,t){1&e&&r.Rb(0)}function iO(e,t){1&e&&r.Rb(0)}function rO(e,t){1&e&&r.Rb(0)}function oO(e,t){1&e&&r.Rb(0)}function cO(e,t){1&e&&r.Rb(0)}function aO(e,t){1&e&&r.Rb(0)}var lO=function(e){return{0:e}};function sO(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",44),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-relation-definitions-picker",82,83),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CustodianDefinitionId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,aO,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o||null==o.serverErrors?null:o.serverErrors.CustodianDefinitionId)),r.Bb(2),r.Uc(r.oc(3,6,"Field0Definition",r.wc(11,lO,r.nc(4,9,"Custody_Custodian")))),r.Bb(3),r.sc("ngModel",o.CustodianDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(13,B_,i,null==o||null==o.serverErrors?null:o.serverErrors.CustodianDefinitionId))}}function uO(e,t){if(1&e&&(r.Vb(0,"option",87),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function dO(e,t){1&e&&r.Rb(0)}function bO(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",84),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",85,86),r.hc("ngModelChange",(function(e){r.Ic(n);var i=t.prop;return r.lc(2).model[i+"Visibility"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Rc(7,uO,2,2,"option",53),r.Ub(),r.Rc(8,dO,1,0,"ng-container",25),r.Ub()}if(2&e){var i=t.prop,o=t.propLower,c=t.fieldName,a=r.Fc(6),l=r.lc(2).model,s=r.lc(),u=r.Fc(13);r.Gb("is-invalid",s.invalid(a,s.serverErrors(l,i+"Visibility"))),r.Bb(1),r.uc("for","",o,"visibility"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Visibility",r.wc(14,lO,r.nc(4,12,c||"Entity_"+i)))),r.Bb(3),r.uc("id","",o,"visibility"),r.sc("ngModel",l[i+"Visibility"]),r.Bb(2),r.sc("ngForOf",s.visibilityChoices),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.xc(16,B_,a,s.serverErrors(l,i+"Visibility")))}}function fO(e,t){1&e&&r.Rb(0)}function mO(e,t){1&e&&r.Rb(0)}function gO(e,t){1&e&&r.Rb(0)}function pO(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",84),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",89,91),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).prop;return r.lc(2).model[t+"Label2"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label2")})),r.Ub(),r.Rc(7,gO,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label2"))),r.Bb(1),r.uc("for","",a,"label2"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Label",r.wc(14,lO,r.nc(4,12,l||"Entity_"+c)))+u.ws.secondaryPostfix),r.Bb(3),r.uc("id","",a,"label2"),r.sc("ngModel",s[c+"Label2"])("ngModelOptions",r.vc(16,D_)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(17,B_,i,u.serverErrors(s,c+"Label2")))}}function hO(e,t){1&e&&r.Rb(0)}function vO(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",84),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",89,92),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).prop;return r.lc(2).model[t+"Label3"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label3")})),r.Ub(),r.Rc(7,hO,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label3"))),r.Bb(1),r.uc("for","",a,"label3"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Label",r.wc(14,lO,r.nc(4,12,l||"Entity_"+c)))+u.ws.ternaryPostfix),r.Bb(3),r.uc("id","",a,"label3"),r.sc("ngModel",s[c+"Label3"])("ngModelOptions",r.vc(16,D_)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(17,B_,i,u.serverErrors(s,c+"Label3")))}}function yO(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",21),r.Vb(2,"label",84),r.Tc(3),r.mc(4,"translate"),r.mc(5,"translate"),r.Ub(),r.Vb(6,"input",89,90),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc().prop;return r.lc(2).model[t+"Label"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label")})),r.Ub(),r.Rc(8,mO,1,0,"ng-container",25),r.Ub(),r.Rc(9,pO,8,20,"div",29),r.Rc(10,vO,8,20,"div",29),r.Sb()}if(2&e){var i=r.Fc(7),o=r.lc(),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Bb(1),r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label"))),r.Bb(1),r.uc("for","",a,"label"),r.Bb(1),r.Uc(r.oc(4,11,"Field0Label",r.wc(16,lO,r.nc(5,14,l||"Entity_"+c)))+u.ws.primaryPostfix),r.Bb(3),r.uc("id","",a,"label"),r.sc("ngModel",s[c+"Label"])("ngModelOptions",r.vc(18,D_)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(19,B_,i,u.serverErrors(s,c+"Label"))),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.TernaryLanguageId)}}var IO=function(e,t,n){return{prop:e,propLower:t,fieldName:n}};function CO(e,t){if(1&e&&(r.Rc(0,fO,1,0,"ng-container",25),r.Rc(1,yO,11,22,"ng-container",88)),2&e){var n=t.prop,i=t.propLower,o=t.fieldName;r.lc();var c=r.Fc(70),a=r.lc().model,l=r.lc();r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.yc(3,IO,n,i,o)),r.Bb(1),r.sc("ngIf",l.isVisible(a[n+"Visibility"]))}}function wO(e,t){1&e&&r.Rb(0)}function kO(e,t){1&e&&r.Rb(0)}function MO(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",44),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-lookup-definitions-picker",82,83),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc().prop;return r.lc(2).model[t+"DefinitionId"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,kO,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(),c=o.prop,a=o.fieldName,l=r.lc(2).model,s=r.lc(),u=r.Fc(13);r.Gb("is-invalid",s.invalid(i,s.serverErrors(l,c+"DefinitionId"))),r.Bb(2),r.Uc(r.oc(3,6,"Field0Definition",r.wc(11,lO,r.nc(4,9,a||"Entity_"+c)))),r.Bb(3),r.sc("ngModel",l[c+"DefinitionId"]),r.Bb(2),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.xc(13,B_,i,s.serverErrors(l,c+"DefinitionId")))}}function VO(e,t){if(1&e&&(r.Rc(0,wO,1,0,"ng-container",25),r.Rc(1,MO,8,16,"div",29)),2&e){var n=t.prop,i=t.propLower,o=t.fieldName;r.lc();var c=r.Fc(72),a=r.lc().model,l=r.lc();r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.yc(3,IO,n,i,o)),r.Bb(1),r.sc("ngIf",l.isVisible(a[n+"Visibility"]))}}function TO(e,t){1&e&&r.Qb(0,"fa-icon",69)}function EO(e,t){1&e&&r.Rb(0)}function UO(e,t){1&e&&r.Rb(0)}function xO(e,t){1&e&&r.Qb(0,"fa-icon",69)}function RO(e,t){1&e&&r.Qb(0,"fa-icon",69)}function DO(e,t){1&e&&(r.Vb(0,"div",99),r.Tc(1," \u200c "),r.Ub())}function BO(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",93),r.Vb(1,"div",94),r.Rc(2,RO,1,0,"fa-icon",19),r.Vb(3,"span",95),r.Tc(4),r.Ub(),r.Vb(5,"button",37),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureReportDefinition(e,i)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",96),r.Ub(),r.Tc(8," \xa0 "),r.Vb(9,"button",37),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteReportDefinition(e,i)})),r.mc(10,"translate"),r.Qb(11,"fa-icon",97),r.Ub(),r.Ub(),r.Rc(12,DO,2,0,"div",98),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(2),r.Vc(" ",o.ws.getMultilingualValue("ReportDefinition",i.ReportDefinitionId,"Title")," "),r.Bb(1),r.sc("title",r.nc(6,4,"Configure")),r.Bb(4),r.sc("title",r.nc(10,6,"Delete"))}}function SO(e,t){if(1&e&&(r.Vb(0,"span",100),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n," ")}}function _O(e,t){1&e&&r.Qb(0,"fa-icon",69)}function OO(e,t){if(1&e&&(r.Vb(0,"option",87),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function LO(e,t){1&e&&r.Rb(0)}function FO(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",101),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(2).model;return r.lc().onIconClick(i,e)})),r.Qb(1,"fa-icon",102),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2).model;r.Gb("t-highlighted",i.value===o.MainMenuIcon),r.sc("title",i.value),r.Bb(1),r.sc("icon",i.value)}}function AO(e,t){1&e&&r.Rb(0)}function PO(e,t){1&e&&r.Rb(0)}function NO(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",103),r.Vb(1,"div",104),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeHidden(e)})),r.Vb(2,"span",105),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"div",104),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeVisible(e)})),r.Vb(6,"span",105),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Ub(),r.Vb(9,"div",104),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeArchived(e)})),r.Vb(10,"span",105),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(1),r.Gb("t-pointer","Hidden"!==i.State)("t-less-dark","Hidden"===i.State),r.Bb(2),r.Uc(r.nc(4,15,"Definition_State_Hidden")),r.Bb(2),r.Gb("t-pointer","Visible"!==i.State)("t-less-dark","Visible"===i.State),r.Bb(2),r.Uc(r.nc(8,17,"Definition_State_Visible")),r.Bb(2),r.Gb("t-pointer","Archived"!==i.State)("t-less-dark","Archived"===i.State),r.Bb(2),r.Uc(r.nc(12,19,"Definition_State_Archived"))}}var jO=function(){return{prop:"Currency",propLower:"currency"}},WO=function(){return{prop:"Center",propLower:"center"}},qO=function(){return{prop:"Image",propLower:"image",fieldName:"Image"}},QO=function(){return{prop:"Description",propLower:"description",fieldName:"Description"}},HO=function(){return{prop:"Location",propLower:"location"}},$O=function(){return{prop:"FromDate",propLower:"fromdate"}},GO=function(){return{prop:"ToDate",propLower:"todate"}},zO=function(){return{prop:"Decimal1",propLower:"decimal1"}},JO=function(){return{prop:"Decimal2",propLower:"decimal2"}},KO=function(){return{prop:"Int1",propLower:"int1"}},YO=function(){return{prop:"Int2",propLower:"int2"}},XO=function(){return{prop:"Lookup1",propLower:"lookup1"}},ZO=function(){return{prop:"Lookup2",propLower:"lookup2"}},eL=function(){return{prop:"Lookup3",propLower:"lookup3"}},tL=function(){return{prop:"Lookup4",propLower:"lookup4"}},nL=function(){return{prop:"Text1",propLower:"text1"}},iL=function(){return{prop:"Text2",propLower:"text2"}},rL=function(){return{prop:"ExternalReference",propLower:"externalreference",fieldName:"Custody_ExternalReference"}},oL=function(){return{prop:"Custodian",propLower:"custodian",fieldName:"Custody_Custodian"}},cL=function(e){return{control:null,serverErrors:e}};function aL(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",10),r.Rc(1,T_,6,4,"div",11),r.Vb(2,"div",12),r.Vb(3,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleDefinition()})),r.Vb(4,"span"),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Vb(7,"div",14),r.Qb(8,"fa-icon",15),r.Ub(),r.Ub(),r.Vb(9,"div",16),r.Vb(10,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Title")})),r.Tc(11," \xa0 "),r.Qb(12,"fa-icon",18),r.Tc(13),r.mc(14,"translate"),r.Rc(15,E_,1,0,"fa-icon",19),r.Ub(),r.Vb(16,"div",20),r.Vb(17,"div",21),r.Vb(18,"label",22),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"input",23,24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Code")})),r.Ub(),r.Rc(23,U_,1,0,"ng-container",25),r.Ub(),r.Vb(24,"div",21),r.Vb(25,"label",26),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Vb(28,"input",27,28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitleSingular=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitleSingular")})),r.Ub(),r.Rc(30,x_,1,0,"ng-container",25),r.Ub(),r.Rc(31,S_,7,13,"div",29),r.Rc(32,O_,7,13,"div",29),r.Vb(33,"div",21),r.Vb(34,"label",30),r.Tc(35),r.mc(36,"translate"),r.Ub(),r.Vb(37,"input",31,32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitlePlural=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitlePlural")})),r.Ub(),r.Rc(39,L_,1,0,"ng-container",25),r.Ub(),r.Rc(40,A_,7,13,"div",29),r.Rc(41,N_,7,13,"div",29),r.Ub(),r.Vb(42,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Fields")})),r.Tc(43," \xa0 "),r.Qb(44,"fa-icon",18),r.Tc(45),r.mc(46,"translate"),r.Rc(47,j_,1,0,"fa-icon",19),r.Ub(),r.Vb(48,"div",20),r.Rc(49,W_,1,0,"ng-container",25),r.Rc(50,q_,1,0,"ng-container",25),r.Rc(51,Q_,1,0,"ng-container",25),r.Rc(52,H_,1,0,"ng-container",25),r.Rc(53,$_,1,0,"ng-container",25),r.Rc(54,G_,1,0,"ng-container",25),r.Rc(55,z_,1,0,"ng-container",25),r.Rc(56,J_,1,0,"ng-container",25),r.Rc(57,K_,1,0,"ng-container",25),r.Rc(58,Y_,1,0,"ng-container",25),r.Rc(59,X_,1,0,"ng-container",25),r.Rc(60,Z_,1,0,"ng-container",25),r.Rc(61,eO,1,0,"ng-container",25),r.Rc(62,tO,1,0,"ng-container",25),r.Rc(63,nO,1,0,"ng-container",25),r.Rc(64,iO,1,0,"ng-container",25),r.Rc(65,rO,1,0,"ng-container",25),r.Rc(66,oO,1,0,"ng-container",25),r.Rc(67,cO,1,0,"ng-container",25),r.Rc(68,sO,8,16,"div",29),r.Rc(69,bO,9,19,"ng-template",null,33,r.Sc),r.Rc(71,CO,2,7,"ng-template",null,34,r.Sc),r.Rc(73,VO,2,7,"ng-template",null,35,r.Sc),r.Ub(),r.Vb(75,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Scripts")})),r.Tc(76," \xa0 "),r.Qb(77,"fa-icon",18),r.Tc(78),r.mc(79,"translate"),r.Rc(80,TO,1,0,"fa-icon",19),r.Ub(),r.Vb(81,"div",20),r.Vb(82,"div",21),r.Vb(83,"label",36),r.Tc(84),r.mc(85,"translate"),r.Ub(),r.Tc(86,"\xa0 "),r.Vb(87,"button",37),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onEditScript("PreprocessScript",e)})),r.mc(88,"translate"),r.Qb(89,"fa-icon",38),r.Ub(),r.Vb(90,"textarea",39,40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.PreprocessScript=e})),r.Ub(),r.Rc(92,EO,1,0,"ng-container",25),r.Ub(),r.Vb(93,"div",21),r.Vb(94,"label",41),r.Tc(95),r.mc(96,"translate"),r.Ub(),r.Tc(97,"\xa0 "),r.Vb(98,"button",37),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onEditScript("ValidateScript",e)})),r.mc(99,"translate"),r.Qb(100,"fa-icon",38),r.Ub(),r.Vb(101,"textarea",42,43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ValidateScript=e})),r.Ub(),r.Rc(103,UO,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Vb(104,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Reports")})),r.Tc(105," \xa0 "),r.Qb(106,"fa-icon",18),r.Tc(107),r.mc(108,"translate"),r.Rc(109,xO,1,0,"fa-icon",19),r.Ub(),r.Vb(110,"div",20),r.Vb(111,"div",21),r.Vb(112,"label",44),r.Tc(113),r.mc(114,"translate"),r.Ub(),r.Tc(115,"\xa0 "),r.Vb(116,"button",37),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateReportDefinition(e)})),r.mc(117,"translate"),r.Qb(118,"fa-icon",45),r.Ub(),r.Vb(119,"div",46),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().rowDrop(e,t.ReportDefinitions)})),r.Rc(120,BO,13,8,"div",47),r.Ub(),r.Rc(121,SO,2,1,"span",48),r.Ub(),r.Ub(),r.Vb(122,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Menu")})),r.Tc(123," \xa0 "),r.Qb(124,"fa-icon",18),r.Tc(125),r.mc(126,"translate"),r.Rc(127,_O,1,0,"fa-icon",19),r.Ub(),r.Vb(128,"div",20),r.Vb(129,"div",21),r.Vb(130,"label",49),r.Tc(131),r.mc(132,"translate"),r.Ub(),r.Vb(133,"select",50,51),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSection")})),r.Qb(135,"option",52),r.Rc(136,OO,2,2,"option",53),r.Ub(),r.Rc(137,LO,1,0,"ng-container",25),r.Ub(),r.Vb(138,"div",21),r.Vb(139,"label",54),r.Tc(140),r.mc(141,"translate"),r.Ub(),r.Vb(142,"div",55),r.Rc(143,FO,2,4,"div",56),r.Ub(),r.Rc(144,AO,1,0,"ng-container",25),r.Ub(),r.Vb(145,"div",21),r.Vb(146,"label",57),r.Tc(147),r.mc(148,"translate"),r.Ub(),r.Vb(149,"input",58,59),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSortKey=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSortKey")})),r.Ub(),r.Rc(151,PO,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(152,"div",60),r.Vb(153,"div",61),r.Vb(154,"div",62),r.Vb(155,"span"),r.Tc(156),r.mc(157,"translate"),r.Ub(),r.Ub(),r.Rc(158,NO,13,21,"div",63),r.Ub(),r.Vb(159,"div",64),r.Qb(160,"t-custodies-details",65),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(22),o=r.Fc(29),c=r.Fc(38),a=r.Fc(70),l=r.Fc(72),s=r.Fc(74),u=r.Fc(91),d=r.Fc(102),b=r.Fc(134),f=r.Fc(150),m=r.lc(),g=m.isEdit,p=m.model,h=r.lc(),v=r.Fc(13);r.Bb(1),r.sc("ngIf",g&&h.collapseDefinition),r.Bb(1),r.Gb("d-flex",g&&!h.collapseDefinition)("d-none",!g||h.collapseDefinition),r.Bb(3),r.Uc(r.nc(6,138,"Definition")),r.Bb(3),r.sc("flip",h.flipIcon(!1)),r.Bb(4),r.sc("flip",h.flipIcon(h.showSection("Title")))("rotate",h.rotateIcon(h.showSection("Title"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(14,140,"Title")," "),r.Bb(2),r.sc("ngIf",h.sectionErrors("Title",p)),r.Bb(1),r.Gb("d-none",!h.showSection("Title")),r.Bb(1),r.Gb("is-invalid",h.invalid(i,null==p.serverErrors?null:p.serverErrors.Code)),r.Bb(2),r.Uc(r.nc(20,142,"Code")),r.Bb(2),r.sc("ngModel",p.Code)("ngModelOptions",r.vc(176,D_)),r.Bb(2),r.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",r.xc(177,B_,i,null==p.serverErrors?null:p.serverErrors.Code)),r.Bb(1),r.Gb("is-invalid",h.invalid(o,null==p.serverErrors?null:p.serverErrors.TitleSingular)),r.Bb(2),r.Uc(r.nc(27,144,"TitleSingular")+h.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",p.TitleSingular)("ngModelOptions",r.vc(180,D_)),r.Bb(2),r.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",r.xc(181,B_,o,null==p.serverErrors?null:p.serverErrors.TitleSingular)),r.Bb(1),r.sc("ngIf",null==h.ws.settings?null:h.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==h.ws.settings?null:h.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",h.invalid(c,null==p.serverErrors?null:p.serverErrors.TitlePlural)),r.Bb(2),r.Uc(r.nc(36,146,"TitlePlural")+h.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",p.TitlePlural)("ngModelOptions",r.vc(184,D_)),r.Bb(2),r.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",r.xc(185,B_,c,null==p.serverErrors?null:p.serverErrors.TitlePlural)),r.Bb(1),r.sc("ngIf",null==h.ws.settings?null:h.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==h.ws.settings?null:h.ws.settings.TernaryLanguageId),r.Bb(3),r.sc("flip",h.flipIcon(h.showSection("Fields")))("rotate",h.rotateIcon(h.showSection("Fields"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(46,148,"Fields")," "),r.Bb(2),r.sc("ngIf",h.sectionErrors("Fields",p)),r.Bb(1),r.Gb("d-none",!h.showSection("Fields")),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.vc(188,jO)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.vc(189,WO)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.vc(190,qO)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.vc(191,QO)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.vc(192,HO)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(193,$O)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(194,GO)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(195,zO)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(196,JO)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(197,KO)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(198,YO)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(199,XO)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(200,ZO)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(201,eL)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(202,tL)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(203,nL)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(204,iL)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(205,rL)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.vc(206,oL)),r.Bb(1),r.sc("ngIf",h.isVisible(p.CustodianVisibility)),r.Bb(9),r.sc("flip",h.flipIcon(h.showSection("Scripts")))("rotate",h.rotateIcon(h.showSection("Scripts"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(79,150,"Scripts")," "),r.Bb(2),r.sc("ngIf",h.sectionErrors("Scripts",p)),r.Bb(1),r.Gb("d-none",!h.showSection("Scripts")),r.Bb(1),r.Gb("is-invalid",h.invalid(u,null==p.serverErrors?null:p.serverErrors.PreprocessScript)),r.Bb(2),r.Uc(r.nc(85,152,"Definition_PreprocessScript")),r.Bb(3),r.sc("title",r.nc(88,154,"Expand")),r.Bb(3),r.sc("ngModel",p.PreprocessScript)("ngModelOptions",r.vc(207,D_)),r.Bb(2),r.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",r.xc(208,B_,u,null==p.serverErrors?null:p.serverErrors.PreprocessScript)),r.Bb(1),r.Gb("is-invalid",h.invalid(d,null==p.serverErrors?null:p.serverErrors.ValidateScript)),r.Bb(2),r.Vc("",r.nc(96,156,"Definition_ValidateScript")," "),r.Bb(3),r.sc("title",r.nc(99,158,"Expand")),r.Bb(3),r.sc("ngModel",p.ValidateScript)("ngModelOptions",r.vc(211,D_)),r.Bb(2),r.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",r.xc(212,B_,d,null==p.serverErrors?null:p.serverErrors.ValidateScript)),r.Bb(3),r.sc("flip",h.flipIcon(h.showSection("Reports")))("rotate",h.rotateIcon(h.showSection("Reports"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(108,160,"Reports")," "),r.Bb(2),r.sc("ngIf",h.sectionErrors("Reports",p)),r.Bb(1),r.Gb("d-none",!h.showSection("Reports")),r.Bb(3),r.Uc(r.nc(114,162,"Definition_ReportDefinitions")),r.Bb(3),r.sc("title",r.nc(117,164,"Create")),r.Bb(4),r.sc("ngForOf",p.ReportDefinitions),r.Bb(1),r.sc("ngForOf",null==p.serverErrors?null:p.serverErrors.ReportDefinitions),r.Bb(3),r.sc("flip",h.flipIcon(h.showSection("Menu")))("rotate",h.rotateIcon(h.showSection("Menu"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(126,166,"Menu")," "),r.Bb(2),r.sc("ngIf",h.sectionErrors("Menu",p)),r.Bb(1),r.Gb("d-none",!h.showSection("Menu")),r.Bb(3),r.Uc(r.nc(132,168,"MainMenuSection")),r.Bb(2),r.sc("ngModel",p.MainMenuSection),r.Bb(3),r.sc("ngForOf",h.allMainMenuSections),r.Bb(1),r.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",r.xc(215,B_,b,null==p.serverErrors?null:p.serverErrors.MainMenuSection)),r.Bb(3),r.Uc(r.nc(141,170,"MainMenuIcon")),r.Bb(3),r.sc("ngForOf",h.allMainMenuIcons),r.Bb(1),r.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",r.wc(218,cL,null==p.serverErrors?null:p.serverErrors.MainMenuIcon)),r.Bb(3),r.Uc(r.nc(148,172,"MainMenuSortKey")),r.Bb(2),r.sc("ngModel",p.MainMenuSortKey)("ngModelOptions",r.vc(220,D_)),r.Bb(2),r.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",r.xc(221,B_,f,null==p.serverErrors?null:p.serverErrors.MainMenuSortKey)),r.Bb(5),r.Uc(r.nc(157,174,"Preview")),r.Bb(2),r.sc("ngIf",!g),r.Bb(2),r.sc("previewDefinition",h.getForClient(p))}}function lL(e,t){if(1&e&&r.Rc(0,aL,161,224,"div",9),2&e){var n=t.isEdit,i=r.lc();r.sc("ngIf",i.watchIsEdit(n))}}function sL(e,t){if(1&e&&(r.Vb(0,"span",107),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function uL(e,t){if(1&e&&(r.Tb(0),r.Rc(1,sL,2,1,"span",106),r.Sb()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(1),r.sc("ngForOf",c.errors(i,o))}}function dL(e,t){if(1&e&&r.Rc(0,uL,2,1,"ng-container",88),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}function bL(e,t){1&e&&r.Rb(0)}function fL(e,t){1&e&&r.Rb(0)}function mL(e,t){1&e&&r.Rb(0)}function gL(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",114),r.Vb(1,"label",125),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",126,127),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reportDefinitionToEdit.Name2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onItemToEditChange()})),r.Ub(),r.Rc(6,mL,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(13);r.Gb("is-invalid",o.invalid(i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name2)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.reportDefinitionToEdit.Name2)("ngModelOptions",r.vc(9,D_)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,B_,i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name2))}}function pL(e,t){1&e&&r.Rb(0)}function hL(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",114),r.Vb(1,"label",128),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",129,130),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reportDefinitionToEdit.Name3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onItemToEditChange()})),r.Ub(),r.Rc(6,pL,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(13);r.Gb("is-invalid",o.invalid(i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name3)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.reportDefinitionToEdit.Name3)("ngModelOptions",r.vc(9,D_)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,B_,i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name3))}}function vL(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",108),r.Vb(1,"h5",109),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",110),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",111),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",112),r.Vb(8,"div",113),r.Vb(9,"div",114),r.Vb(10,"label",44),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"t-report-definitions-picker",115,116),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().reportDefinitionToEdit.ReportDefinitionId=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(15,bL,1,0,"ng-container",25),r.Ub(),r.Vb(16,"div",114),r.Vb(17,"label",117),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"input",118,119),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().reportDefinitionToEdit.Name=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(22,fL,1,0,"ng-container",25),r.Ub(),r.Rc(23,gL,7,13,"div",120),r.Rc(24,hL,7,13,"div",120),r.Ub(),r.Ub(),r.Vb(25,"div",121),r.Vb(26,"button",122),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(27,"fa-icon",123),r.Tc(28),r.mc(29,"translate"),r.Ub(),r.Vb(30,"button",124),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(31,"fa-icon",97),r.Tc(32),r.mc(33,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(14),o=r.Fc(21),c=r.lc(),a=r.Fc(13);r.Bb(2),r.Vc(" ",r.nc(3,19,"Configure")," "),r.Bb(7),r.Gb("is-invalid",c.invalid(i,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),r.Bb(2),r.Uc(r.nc(12,21,"Definition_ReportDefinition")),r.Bb(2),r.sc("ngModel",c.reportDefinitionToEdit.ReportDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(29,B_,i,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),r.Bb(1),r.Gb("is-invalid",c.invalid(o,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.Name)),r.Bb(2),r.Uc(r.nc(19,23,"Name")+c.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",c.reportDefinitionToEdit.Name)("ngModelOptions",r.vc(32,D_)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(33,B_,o,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.Name)),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.TernaryLanguageId),r.Bb(2),r.sc("disabled",!c.reportDefinitionToEdit.ReportDefinitionId),r.Bb(2),r.Vc(" \xa0",r.nc(29,25,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(33,27,"Cancel")," ")}}function yL(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",108),r.Vb(1,"h5",109),r.Tc(2),r.Ub(),r.Vb(3,"button",110),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(4,"span",111),r.Tc(5,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",112),r.Vb(7,"div",131),r.Vb(8,"textarea",132,133),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().script=e}))("keydown",(function(e){r.Ic(n);var t=r.Fc(10);return r.lc().onScriptKeydown(t,e)})),r.Tc(11,"                "),r.Ub(),r.Ub(),r.Ub(),r.Vb(12,"div",121),r.Vb(13,"button",134),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(14,"fa-icon",123),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Vb(17,"button",134),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(18,"fa-icon",97),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Vc(" ",i.scriptModalLabel()," "),r.Bb(6),r.sc("ngModel",i.script),r.Bb(7),r.Vc(" \xa0",r.nc(16,4,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(20,6,"Cancel")," ")}}var IL,CL=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},wL=function(e,t,n){return[e,t,n]},kL=((IL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var c;return _classCallCheck(this,n),(c=t.call(this)).workspace=e,c.api=i,c.translate=r,c.modalService=o,c.custodyDefinitionsApi=c.api.custodyDefinitionsApi(c.notifyDestruct$),c.expand="ReportDefinitions.ReportDefinition,\nLookup1Definition,Lookup2Definition,Lookup3Definition,Lookup4Definition,CustodianDefinition",c.create=function(){var e={};c.ws.isPrimaryLanguage?e.TitleSingular=c.initialText:c.ws.isSecondaryLanguage?e.TitleSingular2=c.initialText:c.ws.isTernaryLanguage&&(e.TitleSingular3=c.initialText);var t,n=_createForOfIteratorHelper(c.allVisibilityProps());try{for(n.s();!(t=n.n()).done;)e[t.value]="None"}catch(i){n.e(i)}finally{n.f()}return e.ReportDefinitions=[],e},c.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach((function(e){e.Id=null})),t}return console.error("Cloning a non existing item"),null},c.savePreprocessing=function(e){var t,n=_createForOfIteratorHelper(c.allVisibilityProps());try{for(n.s();!(t=n.n()).done;){var i=t.value;if("None"===e[i]){var r=i.substr(0,i.length-"Visibility".length);delete e[r+"Label"],delete e[r+"Label2"],delete e[r+"Label3"],delete e[r+"DefinitionId"]}}}catch(o){n.e(o)}finally{n.f()}},c.collapseDefinition=!1,c._isEdit=!1,c.isInactive=function(e){return null},c._sections={Title:!0,Fields:!1,Scripts:!1,Reports:!1,MainMenu:!1},c._currentModelModified=!1,c.onMakeHidden=function(e){e&&e.Id&&"Hidden"!==e.State&&c.custodyDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeVisible=function(e){e&&e.Id&&"Visible"!==e.State&&c.custodyDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeArchived=function(e){e&&e.Id&&"Archived"!==e.State&&c.custodyDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.showMakeHidden=function(e){return!!e&&"Hidden"!==e.State},c.showMakeVisible=function(e){return!!e&&"Visible"!==e.State},c.showMakeArchived=function(e){return!!e&&"Archived"!==e.State},c.hasStatePermission=function(e){return c.ws.canDo("custody-definitions","State",e.Id)},c.stateTooltip=function(e){return c.hasStatePermission(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.itemToEditHasChanged=!1,c.custodyDefinitionsApi=c.api.custodyDefinitionsApi(c.notifyDestruct$),c}return _createClass(n,[{key:"allVisibilityProps",value:function(){for(var e=Object(jV.a)(this.workspace,this.translate).properties,t=[],n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];r.endsWith("Visibility")&&t.push(r)}return t}},{key:"onToggleDefinition",value:function(){this.collapseDefinition=!this.collapseDefinition}},{key:"watchIsEdit",value:function(e){return this._isEdit!==e&&(this._isEdit=e),!0}},{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"onToggleSection",value:function(e){this._sections[e]=!this._sections[e]}},{key:"showSection",value:function(e){return this._sections[e]}},{key:"weakEntityErrors",value:function(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some((function(t){return Object(UI.b)(e.serverErrors[t])}))}},{key:"sectionErrors",value:function(e,t){var n=this;return"Title"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.Code)||Object(UI.b)(t.serverErrors.TitleSingular)||Object(UI.b)(t.serverErrors.TitleSingular2)||Object(UI.b)(t.serverErrors.TitleSingular3)||Object(UI.b)(t.serverErrors.TitlePlural)||Object(UI.b)(t.serverErrors.TitlePlural2)||Object(UI.b)(t.serverErrors.TitlePlural3)):"Fields"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.CurrencyVisibility)||Object(UI.b)(t.serverErrors.CenterVisibility)||Object(UI.b)(t.serverErrors.ImageVisibility)||Object(UI.b)(t.serverErrors.DescriptionVisibility)||Object(UI.b)(t.serverErrors.LocationVisibility)||Object(UI.b)(t.serverErrors.FromDateLabel)||Object(UI.b)(t.serverErrors.FromDateLabel2)||Object(UI.b)(t.serverErrors.FromDateLabel3)||Object(UI.b)(t.serverErrors.FromDateVisibility)||Object(UI.b)(t.serverErrors.ToDateLabel)||Object(UI.b)(t.serverErrors.ToDateLabel2)||Object(UI.b)(t.serverErrors.ToDateLabel3)||Object(UI.b)(t.serverErrors.ToDateVisibility)||Object(UI.b)(t.serverErrors.Decimal1Label)||Object(UI.b)(t.serverErrors.Decimal1Label2)||Object(UI.b)(t.serverErrors.Decimal1Label3)||Object(UI.b)(t.serverErrors.Decimal1Visibility)||Object(UI.b)(t.serverErrors.Decimal2Label)||Object(UI.b)(t.serverErrors.Decimal2Label2)||Object(UI.b)(t.serverErrors.Decimal2Label3)||Object(UI.b)(t.serverErrors.Decimal2Visibility)||Object(UI.b)(t.serverErrors.Int1Label)||Object(UI.b)(t.serverErrors.Int1Label2)||Object(UI.b)(t.serverErrors.Int1Label3)||Object(UI.b)(t.serverErrors.Int1Visibility)||Object(UI.b)(t.serverErrors.Int2Label)||Object(UI.b)(t.serverErrors.Int2Label2)||Object(UI.b)(t.serverErrors.Int2Label3)||Object(UI.b)(t.serverErrors.Int2Visibility)||Object(UI.b)(t.serverErrors.Lookup1Label)||Object(UI.b)(t.serverErrors.Lookup1Label2)||Object(UI.b)(t.serverErrors.Lookup1Label3)||Object(UI.b)(t.serverErrors.Lookup1Visibility)||Object(UI.b)(t.serverErrors.Lookup1DefinitionId)||Object(UI.b)(t.serverErrors.Lookup2Label)||Object(UI.b)(t.serverErrors.Lookup2Label2)||Object(UI.b)(t.serverErrors.Lookup2Label3)||Object(UI.b)(t.serverErrors.Lookup2Visibility)||Object(UI.b)(t.serverErrors.Lookup2DefinitionId)||Object(UI.b)(t.serverErrors.Lookup3Label)||Object(UI.b)(t.serverErrors.Lookup3Label2)||Object(UI.b)(t.serverErrors.Lookup3Label3)||Object(UI.b)(t.serverErrors.Lookup3Visibility)||Object(UI.b)(t.serverErrors.Lookup3DefinitionId)||Object(UI.b)(t.serverErrors.Lookup4Label)||Object(UI.b)(t.serverErrors.Lookup4Label2)||Object(UI.b)(t.serverErrors.Lookup4Label3)||Object(UI.b)(t.serverErrors.Lookup4Visibility)||Object(UI.b)(t.serverErrors.Lookup4DefinitionId)||Object(UI.b)(t.serverErrors.Text1Label)||Object(UI.b)(t.serverErrors.Text1Label2)||Object(UI.b)(t.serverErrors.Text1Label3)||Object(UI.b)(t.serverErrors.Text1Visibility)||Object(UI.b)(t.serverErrors.Text2Label)||Object(UI.b)(t.serverErrors.Text2Label2)||Object(UI.b)(t.serverErrors.Text2Label3)||Object(UI.b)(t.serverErrors.Text2Visibility)||Object(UI.b)(t.serverErrors.CustodianVisibility)||Object(UI.b)(t.serverErrors.CustodianDefinitionId)||Object(UI.b)(t.serverErrors.ExternalReferenceLabel)||Object(UI.b)(t.serverErrors.ExternalReferenceLabel2)||Object(UI.b)(t.serverErrors.ExternalReferenceLabel3)||Object(UI.b)(t.serverErrors.ExternalReferenceVisibility)):"Scripts"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.PreprocessScript)||Object(UI.b)(t.serverErrors.ValidateScript)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some((function(e){return n.weakEntityErrors(e)})):"MainMenu"===e&&!!t.serverErrors&&(Object(UI.b)(t.serverErrors.MainMenuIcon)||Object(UI.b)(t.serverErrors.MainMenuSection)||Object(UI.b)(t.serverErrors.MainMenuSortKey))}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"serverErrors",value:function(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}},{key:"onDefinitionChange",value:function(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}},{key:"getForClient",value:function(e){if(!e)return null;if(this._currentModel!==e||this._currentModelModified){this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e);var t,n=_createForOfIteratorHelper(this.allVisibilityProps());try{for(n.s();!(t=n.n()).done;){var i=t.value;"None"===this._getForClientResult[i]&&delete this._getForClientResult[i]}}catch(r){n.e(r)}finally{n.f()}console.log(this._getForClientResult)}return this._getForClientResult}},{key:"isVisible",value:function(e){return"Optional"===e||"Required"===e}},{key:"onIconClick",value:function(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}},{key:"onItemToEditChange",value:function(){this.itemToEditHasChanged=!0}},{key:"onCreateReportDefinition",value:function(e){var t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(n){n&&e.ReportDefinitions.push(t)}),(function(e){}))}},{key:"onConfigureReportDefinition",value:function(e,t){var n=this;this.itemToEditHasChanged=!1;var i=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=i,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(r){r&&n.itemToEditHasChanged&&(t.ReportDefinitions[e]=i)}),(function(e){}))}},{key:"onDeleteReportDefinition",value:function(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t,e.previousIndex,e.currentIndex)}},{key:"onEditScript",value:function(e,t){var n=this;this.script=t[e],this.scriptModalLabel=function(){return n.translate.instant("Definition_"+e)},this.modalService.open(this.scriptModal,{windowClass:"t-dark-theme t-details-modal"}).result.then((function(i){i&&(t[e]=n.script)}),(function(e){}))}},{key:"onScriptKeydown",value:function(e,t){var n=this;Object(W.p)(e,t,(function(e){return n.script=e}))}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"visibilityChoices",get:function(){var e=this;return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:function(){return e.translate.instant("Visibility_None")}},{value:"Optional",name:function(){return e.translate.instant("Visibility_Optional")}},{value:"Required",name:function(){return e.translate.instant("Visibility_Required")}}]),this._visibilityChoices}},{key:"cardinalityChoices",get:function(){var e=this;return this._cardinalityChoices||(this._cardinalityChoices=[{value:"None",name:function(){return e.translate.instant("Cardinality_None")}},{value:"Single",name:function(){return e.translate.instant("Cardinality_Single")}},{value:"Multiple",name:function(){return e.translate.instant("Cardinality_Multiple")}}]),this._cardinalityChoices}},{key:"allMainMenuSections",get:function(){var e=Object(jV.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Si.c)(e)}},{key:"allMainMenuIcons",get:function(){var e=Object(jV.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Si.c)(e)}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||IL)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(X.t))},IL.\u0275cmp=r.Jb({type:IL,selectors:[["t-custody-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(I_,!0),r.Oc(C_,!0)),2&e&&(r.Ec(n=r.ic())&&(t.reportDefinitionModal=n.first),r.Ec(n=r.ic())&&(t.scriptModal=n.first))},features:[r.yb],decls:18,vars:36,consts:[["collection","CustodyDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["scriptModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["unlabeledProp",""],["labeledProp",""],["definitionedProp",""],["for","preprocessscript",1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","expand"],["rows","6","id","preprocessscript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["preprocessscript","ngModel"],["for","validatescript",1,"small"],["rows","6","id","validatescript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["validatescript","ngModel"],[1,"small"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["theme","dark",3,"ngModel","ngModelChange"],["defId","ngModel"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[3,"value"],[4,"ngIf"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"id","ngModel","ngModelOptions","ngModelChange"],["label","ngModel"],["label2","ngModel"],["label3","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"],[1,"row","h-100","t-much-less-dark"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","ngbAutoFocus","",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["scriptnmodel","ngModel","pstextarea",""],[1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,w_,2,3,"ng-template",null,1,r.Sc),r.Rc(4,k_,2,3,"ng-template",null,2,r.Sc),r.Rc(6,M_,2,3,"ng-template",null,3,r.Sc),r.Rc(8,V_,3,3,"ng-template",null,4,r.Sc),r.Rc(10,lL,1,1,"ng-template",null,5,r.Sc),r.Rc(12,dL,1,1,"ng-template",null,6,r.Sc),r.Rc(14,vL,34,36,"ng-template",null,7,r.Sc),r.Rc(16,yL,21,8,"ng-template",null,8,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"CustodyDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",a)("actions",r.yc(32,wL,r.Ac(14,CL,n,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(20,CL,i,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(26,CL,o,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,x.u,ne.b,ie.c,ie.u,ie.k,ie.n,x.B,Q.f,x.t,ie.v,ie.p,ie.x,ie.q,LE,_V,v_,Q.b,Q.d,XB],pipes:[G.d],encapsulation:2}),IL);function ML(e,t){if(1&e&&(r.Vb(0,"div",11),r.Vb(1,"span",12),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",13),r.Vb(4,"div",14),r.Qb(5,"t-auto-cell",15),r.Ub(),r.Qb(6,"t-auto-cell",16),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("CustodyDefinition",n,"TitleSingular")),r.Bb(3),r.sc("entity",i.c[n]),r.Bb(1),r.sc("entity",i.c[n])}}function VL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CustodyDefinition"),"\n")}function TL(e,t){if(1&e&&(r.Vb(0,"span",17),r.Qb(1,"t-auto-cell",18),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function EL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SavedByMe")," ")}function UL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Hidden")," ")}function xL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Visible")," ")}function RL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Archived")," ")}function DL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function BL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function SL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}var _L,OL=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},LL=function(e,t,n){return[e,t,n]},FL=function(e){return{template:e,expression:"SavedById eq me"}},AL=function(e){return[e]},PL=function(e){return{template:e,expression:"State eq 'Hidden'"}},NL=function(e){return{template:e,expression:"State eq 'Visible'"}},jL=function(e){return{template:e,expression:"State eq 'Archived'"}},WL=function(e,t){return{SavedBy:e,State:t}},qL=((_L=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.custodyDefinitionsApi=o.api.custodyDefinitionsApi(o.notifyDestruct$),o.expand="",o.onMakeHidden=function(e){return o.custodyDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeHidden=function(e){return e.some((function(e){var t=o.ws.get("CustodyDefinition",e);return!!t&&"Hidden"!==t.State}))},o.onMakeVisible=function(e){return o.custodyDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeVisible=function(e){return e.some((function(e){var t=o.ws.get("CustodyDefinition",e);return!!t&&"Visible"!==t.State}))},o.onMakeArchived=function(e){return o.custodyDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeArchived=function(e){return e.some((function(e){var t=o.ws.get("CustodyDefinition",e);return!!t&&"Archived"!==t.State}))},o.hasStatePermission=function(e){return o.ws.canDo("custody-definitions","State",null)},o.stateTooltip=function(e){return o.hasStatePermission(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.custodyDefinitionsApi=o.api.custodyDefinitionsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.CustodyDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||_L)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},_L.\u0275cmp=r.Jb({type:_L,selectors:[["t-custody-definitions-master"]],features:[r.yb],decls:22,vars:51,consts:[["collection","CustodyDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","CustodyDefinition","path","Code",3,"entity"],["collection","CustodyDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","CustodyDefinition",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,ML,7,3,"ng-template",null,1,r.Sc),r.Rc(4,VL,2,3,"ng-template",null,2,r.Sc),r.Rc(6,TL,2,1,"ng-template",null,3,r.Sc),r.Rc(8,EL,2,3,"ng-template",null,4,r.Sc),r.Rc(10,UL,2,3,"ng-template",null,5,r.Sc),r.Rc(12,xL,2,3,"ng-template",null,6,r.Sc),r.Rc(14,RL,2,3,"ng-template",null,7,r.Sc),r.Rc(16,DL,2,3,"ng-template",null,8,r.Sc),r.Rc(18,BL,2,3,"ng-template",null,9,r.Sc),r.Rc(20,SL,2,3,"ng-template",null,10,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"CustodyDefinitions"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.yc(30,LL,r.Ac(12,OL,u,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(18,OL,d,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(24,OL,b,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",r.xc(48,WL,r.wc(36,AL,r.wc(34,FL,c)),r.yc(44,LL,r.wc(38,PL,a),r.wc(40,NL,l),r.wc(42,jL,s))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),_L);function QL(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-custody-definitions-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function HL(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-custody-definitions-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var $L,GL=(($L=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return zL(e||$L)},$L.\u0275cmp=r.Jb({type:$L,selectors:[["t-custody-definitions-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:$L}]),r.yb],decls:5,vars:6,consts:[["collection","CustodyDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,QL,2,3,"ng-template",null,1,r.Sc),r.Rc(3,HL,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,kL,qL],encapsulation:2}),$L),zL=r.Xb(GL),JL=n("UWPD"),KL=["reportDefinitionModal"],YL=["scriptModal"];function XL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function ZL(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function eF(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}function tF(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"TitleSingular",i.ws)||r.nc(2,1,"Untitled"))}}function nF(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",72),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleDefinition()})),r.Vb(1,"div",73),r.Qb(2,"fa-icon",74),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Definition"))}}function iF(e,t){1&e&&r.Qb(0,"fa-icon",75)}function rF(e,t){1&e&&r.Rb(0)}function oF(e,t){1&e&&r.Rb(0)}function cF(e,t){1&e&&r.Rb(0)}var aF=function(){return{updateOn:"blur"}},lF=function(e,t){return{control:e,serverErrors:t}};function sF(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",76),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",77,78),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular2")})),r.Ub(),r.Rc(6,cF,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular2)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular2)("ngModelOptions",r.vc(9,aF)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,lF,i,null==o.serverErrors?null:o.serverErrors.TitleSingular2))}}function uF(e,t){1&e&&r.Rb(0)}function dF(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",79),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",80,81),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular3")})),r.Ub(),r.Rc(6,uF,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular3)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular3)("ngModelOptions",r.vc(9,aF)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,lF,i,null==o.serverErrors?null:o.serverErrors.TitleSingular3))}}function bF(e,t){1&e&&r.Rb(0)}function fF(e,t){1&e&&r.Rb(0)}function mF(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",82),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",83,84),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural2")})),r.Ub(),r.Rc(6,fF,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural2)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural2)("ngModelOptions",r.vc(9,aF)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,lF,i,null==o.serverErrors?null:o.serverErrors.TitlePlural2))}}function gF(e,t){1&e&&r.Rb(0)}function pF(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",85),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",86,87),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural3")})),r.Ub(),r.Rc(6,gF,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural3)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural3)("ngModelOptions",r.vc(9,aF)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,lF,i,null==o.serverErrors?null:o.serverErrors.TitlePlural3))}}function hF(e,t){if(1&e&&(r.Vb(0,"option",88),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function vF(e,t){1&e&&r.Rb(0)}function yF(e,t){1&e&&r.Qb(0,"fa-icon",75)}function IF(e,t){1&e&&r.Rb(0)}function CF(e,t){1&e&&r.Rb(0)}function wF(e,t){1&e&&r.Rb(0)}function kF(e,t){1&e&&r.Rb(0)}function MF(e,t){1&e&&r.Rb(0)}function VF(e,t){1&e&&r.Rb(0)}function TF(e,t){1&e&&r.Rb(0)}function EF(e,t){1&e&&r.Rb(0)}function UF(e,t){1&e&&r.Rb(0)}function xF(e,t){1&e&&r.Rb(0)}function RF(e,t){1&e&&r.Rb(0)}function DF(e,t){1&e&&r.Rb(0)}function BF(e,t){1&e&&r.Rb(0)}function SF(e,t){1&e&&r.Rb(0)}function _F(e,t){1&e&&r.Rb(0)}function OF(e,t){1&e&&r.Rb(0)}function LF(e,t){1&e&&r.Rb(0)}function FF(e,t){1&e&&r.Rb(0)}function AF(e,t){1&e&&r.Rb(0)}function PF(e,t){1&e&&r.Rb(0)}function NF(e,t){1&e&&r.Rb(0)}var jF=function(e){return{0:e}};function WF(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",89),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-decimal-editor",90,91),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.DefaultVatRate=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,NF,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,c.serverErrors(o,"DefaultVatRate"))),r.Bb(2),r.Uc(r.oc(3,9,"Field0Default",r.wc(14,jF,r.nc(4,12,"Resource_VatRate")))),r.Bb(3),r.sc("ngModel",o.DefaultVatRate)("minDecimalPlaces",2)("maxDecimalPlaces",4)("isPercentage",!0),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(16,lF,i,c.serverErrors(o,"DefaultVatRate")))}}function qF(e,t){1&e&&r.Rb(0)}function QF(e,t){1&e&&r.Rb(0)}function HF(e,t){if(1&e&&(r.Vb(0,"option",88),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function $F(e,t){1&e&&r.Rb(0)}function GF(e,t){1&e&&r.Rb(0)}function zF(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",92),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-units-picker",93,94),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.DefaultUnitId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,GF,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,c.serverErrors(o,"DefaultUnitId"))),r.Bb(2),r.Uc(r.oc(3,6,"Field0Default",r.wc(11,jF,r.nc(4,9,"Resource_Unit")))),r.Bb(3),r.sc("ngModel",o.DefaultUnitId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(13,lF,i,c.serverErrors(o,"DefaultUnitId")))}}function JF(e,t){1&e&&r.Rb(0)}function KF(e,t){1&e&&r.Rb(0)}function YF(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",95),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-units-picker",96,97),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.DefaultUnitMassUnitId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,KF,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,c.serverErrors(o,"DefaultUnitMassUnitId"))),r.Bb(2),r.Uc(r.oc(3,6,"Field0Default",r.wc(11,jF,r.nc(4,9,"Resource_UnitMassUnit")))),r.Bb(3),r.sc("ngModel",o.DefaultUnitMassUnitId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(13,lF,i,c.serverErrors(o,"DefaultUnitMassUnitId")))}}function XF(e,t){1&e&&r.Rb(0)}function ZF(e,t){1&e&&r.Rb(0)}function eA(e,t){1&e&&r.Rb(0)}function tA(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",98),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-relation-definitions-picker",99,100),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ParticipantDefinitionId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,eA,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o||null==o.serverErrors?null:o.serverErrors.ParticipantDefinitionId)),r.Bb(2),r.Uc(r.oc(3,6,"Field0Definition",r.wc(11,jF,r.nc(4,9,"Resource_Participant")))),r.Bb(3),r.sc("ngModel",o.ParticipantDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(13,lF,i,null==o||null==o.serverErrors?null:o.serverErrors.ParticipantDefinitionId))}}function nA(e,t){if(1&e&&(r.Vb(0,"option",88),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function iA(e,t){1&e&&r.Rb(0)}function rA(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",101),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",102,103),r.hc("ngModelChange",(function(e){r.Ic(n);var i=t.prop;return r.lc(2).model[i+"Visibility"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Rc(7,nA,2,2,"option",36),r.Ub(),r.Rc(8,iA,1,0,"ng-container",25),r.Ub()}if(2&e){var i=t.prop,o=t.propLower,c=t.fieldName,a=r.Fc(6),l=r.lc(2).model,s=r.lc(),u=r.Fc(13);r.Gb("is-invalid",s.invalid(a,s.serverErrors(l,i+"Visibility"))),r.Bb(1),r.uc("for","",o,"visibility"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Visibility",r.wc(14,jF,r.nc(4,12,c||"Entity_"+i)))),r.Bb(3),r.uc("id","",o,"visibility"),r.sc("ngModel",l[i+"Visibility"]),r.Bb(2),r.sc("ngForOf",s.visibilityChoices),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.xc(16,lF,a,s.serverErrors(l,i+"Visibility")))}}function oA(e,t){1&e&&r.Rb(0)}function cA(e,t){1&e&&r.Rb(0)}function aA(e,t){1&e&&r.Rb(0)}function lA(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",101),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",105,107),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).prop;return r.lc(2).model[t+"Label2"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label2")})),r.Ub(),r.Rc(7,aA,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label2"))),r.Bb(1),r.uc("for","",a,"label2"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Label",r.wc(14,jF,r.nc(4,12,l||"Entity_"+c)))+u.ws.secondaryPostfix),r.Bb(3),r.uc("id","",a,"label2"),r.sc("ngModel",s[c+"Label2"])("ngModelOptions",r.vc(16,aF)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(17,lF,i,u.serverErrors(s,c+"Label2")))}}function sA(e,t){1&e&&r.Rb(0)}function uA(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",101),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",105,108),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).prop;return r.lc(2).model[t+"Label3"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label3")})),r.Ub(),r.Rc(7,sA,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label3"))),r.Bb(1),r.uc("for","",a,"label3"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Label",r.wc(14,jF,r.nc(4,12,l||"Entity_"+c)))+u.ws.ternaryPostfix),r.Bb(3),r.uc("id","",a,"label3"),r.sc("ngModel",s[c+"Label3"])("ngModelOptions",r.vc(16,aF)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(17,lF,i,u.serverErrors(s,c+"Label3")))}}function dA(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",21),r.Vb(2,"label",101),r.Tc(3),r.mc(4,"translate"),r.mc(5,"translate"),r.Ub(),r.Vb(6,"input",105,106),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc().prop;return r.lc(2).model[t+"Label"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label")})),r.Ub(),r.Rc(8,cA,1,0,"ng-container",25),r.Ub(),r.Rc(9,lA,8,20,"div",29),r.Rc(10,uA,8,20,"div",29),r.Sb()}if(2&e){var i=r.Fc(7),o=r.lc(),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Bb(1),r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label"))),r.Bb(1),r.uc("for","",a,"label"),r.Bb(1),r.Uc(r.oc(4,11,"Field0Label",r.wc(16,jF,r.nc(5,14,l||"Entity_"+c)))+u.ws.primaryPostfix),r.Bb(3),r.uc("id","",a,"label"),r.sc("ngModel",s[c+"Label"])("ngModelOptions",r.vc(18,aF)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(19,lF,i,u.serverErrors(s,c+"Label"))),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.TernaryLanguageId)}}var bA=function(e,t,n){return{prop:e,propLower:t,fieldName:n}};function fA(e,t){if(1&e&&(r.Rc(0,oA,1,0,"ng-container",25),r.Rc(1,dA,11,22,"ng-container",104)),2&e){var n=t.prop,i=t.propLower,o=t.fieldName;r.lc();var c=r.Fc(95),a=r.lc().model,l=r.lc();r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.yc(3,bA,n,i,o)),r.Bb(1),r.sc("ngIf",l.isVisible(a[n+"Visibility"]))}}function mA(e,t){1&e&&r.Rb(0)}function gA(e,t){1&e&&r.Rb(0)}function pA(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",51),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-lookup-definitions-picker",99,100),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc().prop;return r.lc(2).model[t+"DefinitionId"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,gA,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(),c=o.prop,a=o.fieldName,l=r.lc(2).model,s=r.lc(),u=r.Fc(13);r.Gb("is-invalid",s.invalid(i,s.serverErrors(l,c+"DefinitionId"))),r.Bb(2),r.Uc(r.oc(3,6,"Field0Definition",r.wc(11,jF,r.nc(4,9,a||"Entity_"+c)))),r.Bb(3),r.sc("ngModel",l[c+"DefinitionId"]),r.Bb(2),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.xc(13,lF,i,s.serverErrors(l,c+"DefinitionId")))}}function hA(e,t){if(1&e&&(r.Rc(0,mA,1,0,"ng-container",25),r.Rc(1,pA,8,16,"div",29)),2&e){var n=t.prop,i=t.propLower,o=t.fieldName;r.lc();var c=r.Fc(97),a=r.lc().model,l=r.lc();r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.yc(3,bA,n,i,o)),r.Bb(1),r.sc("ngIf",l.isVisible(a[n+"Visibility"]))}}function vA(e,t){1&e&&r.Qb(0,"fa-icon",75)}function yA(e,t){1&e&&r.Rb(0)}function IA(e,t){1&e&&r.Rb(0)}function CA(e,t){1&e&&r.Qb(0,"fa-icon",75)}function wA(e,t){1&e&&r.Qb(0,"fa-icon",75)}function kA(e,t){1&e&&(r.Vb(0,"div",115),r.Tc(1," \u200c "),r.Ub())}function MA(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",109),r.Vb(1,"div",110),r.Rc(2,wA,1,0,"fa-icon",19),r.Vb(3,"span",111),r.Tc(4),r.Ub(),r.Vb(5,"button",44),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureReportDefinition(e,i)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",112),r.Ub(),r.Tc(8," \xa0 "),r.Vb(9,"button",44),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteReportDefinition(e,i)})),r.mc(10,"translate"),r.Qb(11,"fa-icon",113),r.Ub(),r.Ub(),r.Rc(12,kA,2,0,"div",114),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(2),r.Vc(" ",o.ws.getMultilingualValue("ReportDefinition",i.ReportDefinitionId,"Title")," "),r.Bb(1),r.sc("title",r.nc(6,4,"Configure")),r.Bb(4),r.sc("title",r.nc(10,6,"Delete"))}}function VA(e,t){if(1&e&&(r.Vb(0,"span",116),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n," ")}}function TA(e,t){1&e&&r.Qb(0,"fa-icon",75)}function EA(e,t){if(1&e&&(r.Vb(0,"option",88),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function UA(e,t){1&e&&r.Rb(0)}function xA(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",117),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(2).model;return r.lc().onIconClick(i,e)})),r.Qb(1,"fa-icon",118),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2).model;r.Gb("t-highlighted",i.value===o.MainMenuIcon),r.sc("title",i.value),r.Bb(1),r.sc("icon",i.value)}}function RA(e,t){1&e&&r.Rb(0)}function DA(e,t){1&e&&r.Rb(0)}function BA(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",119),r.Vb(1,"div",120),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeHidden(e)})),r.Vb(2,"span",121),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"div",120),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeVisible(e)})),r.Vb(6,"span",121),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Ub(),r.Vb(9,"div",120),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeArchived(e)})),r.Vb(10,"span",121),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(1),r.Gb("t-pointer","Hidden"!==i.State)("t-less-dark","Hidden"===i.State),r.Bb(2),r.Uc(r.nc(4,15,"Definition_State_Hidden")),r.Bb(2),r.Gb("t-pointer","Visible"!==i.State)("t-less-dark","Visible"===i.State),r.Bb(2),r.Uc(r.nc(8,17,"Definition_State_Visible")),r.Bb(2),r.Gb("t-pointer","Archived"!==i.State)("t-less-dark","Archived"===i.State),r.Bb(2),r.Uc(r.nc(12,19,"Definition_State_Archived"))}}var SA=function(){return{prop:"Currency",propLower:"currency"}},_A=function(){return{prop:"Center",propLower:"center"}},OA=function(){return{prop:"CostCenter",propLower:"costcenter",fieldName:"Resource_CostCenter"}},LA=function(){return{prop:"Image",propLower:"image",fieldName:"Image"}},FA=function(){return{prop:"Description",propLower:"description",fieldName:"Description"}},AA=function(){return{prop:"Location",propLower:"location"}},PA=function(){return{prop:"FromDate",propLower:"fromdate"}},NA=function(){return{prop:"ToDate",propLower:"todate"}},jA=function(){return{prop:"Decimal1",propLower:"decimal1"}},WA=function(){return{prop:"Decimal2",propLower:"decimal2"}},qA=function(){return{prop:"Int1",propLower:"int1"}},QA=function(){return{prop:"Int2",propLower:"int2"}},HA=function(){return{prop:"Lookup1",propLower:"lookup1"}},$A=function(){return{prop:"Lookup2",propLower:"lookup2"}},GA=function(){return{prop:"Lookup3",propLower:"lookup3"}},zA=function(){return{prop:"Lookup4",propLower:"lookup4"}},JA=function(){return{prop:"Text1",propLower:"text1"}},KA=function(){return{prop:"Text2",propLower:"text2"}},YA=function(){return{prop:"Identifier",propLower:"identifier",fieldName:"Resource_Identifier"}},XA=function(){return{prop:"VatRate",propLower:"vatrate",fieldName:"Resource_VatRate"}},ZA=function(){return{prop:"ReorderLevel",propLower:"reorderlevel",fieldName:"Resource_ReorderLevel"}},eP=function(){return{prop:"EconomicOrderQuantity",propLower:"economicorderquantity",fieldName:"Resource_EconomicOrderQuantity"}},tP=function(){return{prop:"UnitMass",propLower:"unitmass",fieldName:"Resource_UnitMass"}},nP=function(){return{prop:"MonetaryValue",propLower:"monetaryvalue",fieldName:"Resource_MonetaryValue"}},iP=function(){return{prop:"Participant",propLower:"participant",fieldName:"Resource_Participant"}},rP=function(e){return{control:null,serverErrors:e}};function oP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",10),r.Rc(1,nF,6,4,"div",11),r.Vb(2,"div",12),r.Vb(3,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleDefinition()})),r.Vb(4,"span"),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Vb(7,"div",14),r.Qb(8,"fa-icon",15),r.Ub(),r.Ub(),r.Vb(9,"div",16),r.Vb(10,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Title")})),r.Tc(11," \xa0 "),r.Qb(12,"fa-icon",18),r.Tc(13),r.mc(14,"translate"),r.Rc(15,iF,1,0,"fa-icon",19),r.Ub(),r.Vb(16,"div",20),r.Vb(17,"div",21),r.Vb(18,"label",22),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"input",23,24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Code")})),r.Ub(),r.Rc(23,rF,1,0,"ng-container",25),r.Ub(),r.Vb(24,"div",21),r.Vb(25,"label",26),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Vb(28,"input",27,28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitleSingular=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitleSingular")})),r.Ub(),r.Rc(30,oF,1,0,"ng-container",25),r.Ub(),r.Rc(31,sF,7,13,"div",29),r.Rc(32,dF,7,13,"div",29),r.Vb(33,"div",21),r.Vb(34,"label",30),r.Tc(35),r.mc(36,"translate"),r.Ub(),r.Vb(37,"input",31,32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitlePlural=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitlePlural")})),r.Ub(),r.Rc(39,bF,1,0,"ng-container",25),r.Ub(),r.Rc(40,mF,7,13,"div",29),r.Rc(41,pF,7,13,"div",29),r.Vb(42,"div",21),r.Vb(43,"label",33),r.Tc(44),r.mc(45,"translate"),r.Ub(),r.Vb(46,"select",34,35),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ResourceDefinitionType=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Rc(48,hF,2,2,"option",36),r.Ub(),r.Rc(49,vF,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Vb(50,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Fields")})),r.Tc(51," \xa0 "),r.Qb(52,"fa-icon",18),r.Tc(53),r.mc(54,"translate"),r.Rc(55,yF,1,0,"fa-icon",19),r.Ub(),r.Vb(56,"div",20),r.Rc(57,IF,1,0,"ng-container",25),r.Rc(58,CF,1,0,"ng-container",25),r.Rc(59,wF,1,0,"ng-container",25),r.Rc(60,kF,1,0,"ng-container",25),r.Rc(61,MF,1,0,"ng-container",25),r.Rc(62,VF,1,0,"ng-container",25),r.Rc(63,TF,1,0,"ng-container",25),r.Rc(64,EF,1,0,"ng-container",25),r.Rc(65,UF,1,0,"ng-container",25),r.Rc(66,xF,1,0,"ng-container",25),r.Rc(67,RF,1,0,"ng-container",25),r.Rc(68,DF,1,0,"ng-container",25),r.Rc(69,BF,1,0,"ng-container",25),r.Rc(70,SF,1,0,"ng-container",25),r.Rc(71,_F,1,0,"ng-container",25),r.Rc(72,OF,1,0,"ng-container",25),r.Rc(73,LF,1,0,"ng-container",25),r.Rc(74,FF,1,0,"ng-container",25),r.Rc(75,AF,1,0,"ng-container",25),r.Rc(76,PF,1,0,"ng-container",25),r.Rc(77,WF,8,19,"div",29),r.Rc(78,qF,1,0,"ng-container",25),r.Rc(79,QF,1,0,"ng-container",25),r.Vb(80,"div",21),r.Vb(81,"label",37),r.Tc(82),r.mc(83,"translate"),r.Ub(),r.Vb(84,"select",38,39),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.UnitCardinality=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Rc(86,HF,2,2,"option",36),r.Ub(),r.Rc(87,$F,1,0,"ng-container",25),r.Ub(),r.Rc(88,zF,8,16,"div",29),r.Rc(89,JF,1,0,"ng-container",25),r.Rc(90,YF,8,16,"div",29),r.Rc(91,XF,1,0,"ng-container",25),r.Rc(92,ZF,1,0,"ng-container",25),r.Rc(93,tA,8,16,"div",29),r.Rc(94,rA,9,19,"ng-template",null,40,r.Sc),r.Rc(96,fA,2,7,"ng-template",null,41,r.Sc),r.Rc(98,hA,2,7,"ng-template",null,42,r.Sc),r.Ub(),r.Vb(100,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Scripts")})),r.Tc(101," \xa0 "),r.Qb(102,"fa-icon",18),r.Tc(103),r.mc(104,"translate"),r.Rc(105,vA,1,0,"fa-icon",19),r.Ub(),r.Vb(106,"div",20),r.Vb(107,"div",21),r.Vb(108,"label",43),r.Tc(109),r.mc(110,"translate"),r.Ub(),r.Tc(111,"\xa0 "),r.Vb(112,"button",44),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onEditScript("PreprocessScript",e)})),r.mc(113,"translate"),r.Qb(114,"fa-icon",45),r.Ub(),r.Vb(115,"textarea",46,47),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.PreprocessScript=e})),r.Ub(),r.Rc(117,yA,1,0,"ng-container",25),r.Ub(),r.Vb(118,"div",21),r.Vb(119,"label",48),r.Tc(120),r.mc(121,"translate"),r.Ub(),r.Tc(122,"\xa0 "),r.Vb(123,"button",44),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onEditScript("ValidateScript",e)})),r.mc(124,"translate"),r.Qb(125,"fa-icon",45),r.Ub(),r.Vb(126,"textarea",49,50),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ValidateScript=e})),r.Ub(),r.Rc(128,IA,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Vb(129,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Reports")})),r.Tc(130," \xa0 "),r.Qb(131,"fa-icon",18),r.Tc(132),r.mc(133,"translate"),r.Rc(134,CA,1,0,"fa-icon",19),r.Ub(),r.Vb(135,"div",20),r.Vb(136,"div",21),r.Vb(137,"label",51),r.Tc(138),r.mc(139,"translate"),r.Ub(),r.Tc(140,"\xa0 "),r.Vb(141,"button",44),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateReportDefinition(e)})),r.mc(142,"translate"),r.Qb(143,"fa-icon",52),r.Ub(),r.Vb(144,"div",53),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().rowDrop(e,t.ReportDefinitions)})),r.Rc(145,MA,13,8,"div",54),r.Ub(),r.Rc(146,VA,2,1,"span",55),r.Ub(),r.Ub(),r.Vb(147,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Menu")})),r.Tc(148," \xa0 "),r.Qb(149,"fa-icon",18),r.Tc(150),r.mc(151,"translate"),r.Rc(152,TA,1,0,"fa-icon",19),r.Ub(),r.Vb(153,"div",20),r.Vb(154,"div",21),r.Vb(155,"label",56),r.Tc(156),r.mc(157,"translate"),r.Ub(),r.Vb(158,"select",57,58),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSection")})),r.Qb(160,"option",59),r.Rc(161,EA,2,2,"option",36),r.Ub(),r.Rc(162,UA,1,0,"ng-container",25),r.Ub(),r.Vb(163,"div",21),r.Vb(164,"label",60),r.Tc(165),r.mc(166,"translate"),r.Ub(),r.Vb(167,"div",61),r.Rc(168,xA,2,4,"div",62),r.Ub(),r.Rc(169,RA,1,0,"ng-container",25),r.Ub(),r.Vb(170,"div",21),r.Vb(171,"label",63),r.Tc(172),r.mc(173,"translate"),r.Ub(),r.Vb(174,"input",64,65),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSortKey=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSortKey")})),r.Ub(),r.Rc(176,DA,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(177,"div",66),r.Vb(178,"div",67),r.Vb(179,"div",68),r.Vb(180,"span"),r.Tc(181),r.mc(182,"translate"),r.Ub(),r.Ub(),r.Rc(183,BA,13,21,"div",69),r.Ub(),r.Vb(184,"div",70),r.Qb(185,"t-resources-details",71),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(22),o=r.Fc(29),c=r.Fc(38),a=r.Fc(47),l=r.Fc(85),s=r.Fc(95),u=r.Fc(97),d=r.Fc(99),b=r.Fc(116),f=r.Fc(127),m=r.Fc(159),g=r.Fc(175),p=r.lc(),h=p.isEdit,v=p.model,y=r.lc(),I=r.Fc(13);r.Bb(1),r.sc("ngIf",h&&y.collapseDefinition),r.Bb(1),r.Gb("d-flex",h&&!y.collapseDefinition)("d-none",!h||y.collapseDefinition),r.Bb(3),r.Uc(r.nc(6,167,"Definition")),r.Bb(3),r.sc("flip",y.flipIcon(!1)),r.Bb(4),r.sc("flip",y.flipIcon(y.showSection("Title")))("rotate",y.rotateIcon(y.showSection("Title"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(14,169,"Title")," "),r.Bb(2),r.sc("ngIf",y.sectionErrors("Title",v)),r.Bb(1),r.Gb("d-none",!y.showSection("Title")),r.Bb(1),r.Gb("is-invalid",y.invalid(i,null==v.serverErrors?null:v.serverErrors.Code)),r.Bb(2),r.Uc(r.nc(20,171,"Code")),r.Bb(2),r.sc("ngModel",v.Code)("ngModelOptions",r.vc(209,aF)),r.Bb(2),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(210,lF,i,null==v.serverErrors?null:v.serverErrors.Code)),r.Bb(1),r.Gb("is-invalid",y.invalid(o,null==v.serverErrors?null:v.serverErrors.TitleSingular)),r.Bb(2),r.Uc(r.nc(27,173,"TitleSingular")+y.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",v.TitleSingular)("ngModelOptions",r.vc(213,aF)),r.Bb(2),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(214,lF,o,null==v.serverErrors?null:v.serverErrors.TitleSingular)),r.Bb(1),r.sc("ngIf",null==y.ws.settings?null:y.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==y.ws.settings?null:y.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",y.invalid(c,null==v.serverErrors?null:v.serverErrors.TitlePlural)),r.Bb(2),r.Uc(r.nc(36,175,"TitlePlural")+y.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",v.TitlePlural)("ngModelOptions",r.vc(217,aF)),r.Bb(2),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(218,lF,c,null==v.serverErrors?null:v.serverErrors.TitlePlural)),r.Bb(1),r.sc("ngIf",null==y.ws.settings?null:y.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==y.ws.settings?null:y.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",y.invalid(a,y.serverErrors(v,"ResourceDefinitionType"))),r.Bb(2),r.Uc(r.nc(45,177,"ResourceDefinition_ResourceDefinitionType")),r.Bb(2),r.sc("ngModel",v.ResourceDefinitionType),r.Bb(2),r.sc("ngForOf",y.resourceDefinitionTypeChoices),r.Bb(1),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(221,lF,a,y.serverErrors(v,"ResourceDefinitionType"))),r.Bb(3),r.sc("flip",y.flipIcon(y.showSection("Fields")))("rotate",y.rotateIcon(y.showSection("Fields"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(54,179,"Fields")," "),r.Bb(2),r.sc("ngIf",y.sectionErrors("Fields",v)),r.Bb(1),r.Gb("d-none",!y.showSection("Fields")),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(224,SA)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(225,_A)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(226,OA)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(227,LA)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(228,FA)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(229,AA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(230,PA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(231,NA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(232,jA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(233,WA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(234,qA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(235,QA)),r.Bb(1),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.vc(236,HA)),r.Bb(1),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.vc(237,$A)),r.Bb(1),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.vc(238,GA)),r.Bb(1),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.vc(239,zA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(240,JA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(241,KA)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(242,YA)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(243,XA)),r.Bb(1),r.sc("ngIf",y.isVisible(v.VatRateVisibility)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(244,ZA)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(245,eP)),r.Bb(1),r.Gb("is-invalid",y.invalid(l,y.serverErrors(v,"UnitCardinality"))),r.Bb(2),r.Uc(r.nc(83,181,"ResourceDefinition_UnitCardinality")),r.Bb(2),r.sc("ngModel",v.UnitCardinality),r.Bb(2),r.sc("ngForOf",y.cardinalityChoices),r.Bb(1),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(246,lF,l,y.serverErrors(v,"UnitCardinality"))),r.Bb(1),r.sc("ngIf",y.isCardinalityVisible(v.UnitCardinality)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(249,tP)),r.Bb(1),r.sc("ngIf",y.isVisible(v.UnitMassVisibility)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(250,nP)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(251,iP)),r.Bb(1),r.sc("ngIf",y.isVisible(v.ParticipantVisibility)),r.Bb(9),r.sc("flip",y.flipIcon(y.showSection("Scripts")))("rotate",y.rotateIcon(y.showSection("Scripts"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(104,183,"Scripts")," "),r.Bb(2),r.sc("ngIf",y.sectionErrors("Scripts",v)),r.Bb(1),r.Gb("d-none",!y.showSection("Scripts")),r.Bb(1),r.Gb("is-invalid",y.invalid(b,null==v.serverErrors?null:v.serverErrors.PreprocessScript)),r.Bb(2),r.Uc(r.nc(110,185,"Definition_PreprocessScript")),r.Bb(3),r.sc("title",r.nc(113,187,"Expand")),r.Bb(3),r.sc("ngModel",v.PreprocessScript)("ngModelOptions",r.vc(252,aF)),r.Bb(2),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(253,lF,b,null==v.serverErrors?null:v.serverErrors.PreprocessScript)),r.Bb(1),r.Gb("is-invalid",y.invalid(f,null==v.serverErrors?null:v.serverErrors.ValidateScript)),r.Bb(2),r.Vc("",r.nc(121,189,"Definition_ValidateScript")," "),r.Bb(3),r.sc("title",r.nc(124,191,"Expand")),r.Bb(3),r.sc("ngModel",v.ValidateScript)("ngModelOptions",r.vc(256,aF)),r.Bb(2),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(257,lF,f,null==v.serverErrors?null:v.serverErrors.ValidateScript)),r.Bb(3),r.sc("flip",y.flipIcon(y.showSection("Reports")))("rotate",y.rotateIcon(y.showSection("Reports"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(133,193,"Reports")," "),r.Bb(2),r.sc("ngIf",y.sectionErrors("Reports",v)),r.Bb(1),r.Gb("d-none",!y.showSection("Reports")),r.Bb(3),r.Uc(r.nc(139,195,"Definition_ReportDefinitions")),r.Bb(3),r.sc("title",r.nc(142,197,"Create")),r.Bb(4),r.sc("ngForOf",v.ReportDefinitions),r.Bb(1),r.sc("ngForOf",null==v.serverErrors?null:v.serverErrors.ReportDefinitions),r.Bb(3),r.sc("flip",y.flipIcon(y.showSection("Menu")))("rotate",y.rotateIcon(y.showSection("Menu"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(151,199,"Menu")," "),r.Bb(2),r.sc("ngIf",y.sectionErrors("Menu",v)),r.Bb(1),r.Gb("d-none",!y.showSection("Menu")),r.Bb(3),r.Uc(r.nc(157,201,"MainMenuSection")),r.Bb(2),r.sc("ngModel",v.MainMenuSection),r.Bb(3),r.sc("ngForOf",y.allMainMenuSections),r.Bb(1),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(260,lF,m,null==v.serverErrors?null:v.serverErrors.MainMenuSection)),r.Bb(3),r.Uc(r.nc(166,203,"MainMenuIcon")),r.Bb(3),r.sc("ngForOf",y.allMainMenuIcons),r.Bb(1),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.wc(263,rP,null==v.serverErrors?null:v.serverErrors.MainMenuIcon)),r.Bb(3),r.Uc(r.nc(173,205,"MainMenuSortKey")),r.Bb(2),r.sc("ngModel",v.MainMenuSortKey)("ngModelOptions",r.vc(265,aF)),r.Bb(2),r.sc("ngTemplateOutlet",I)("ngTemplateOutletContext",r.xc(266,lF,g,null==v.serverErrors?null:v.serverErrors.MainMenuSortKey)),r.Bb(5),r.Uc(r.nc(182,207,"Preview")),r.Bb(2),r.sc("ngIf",!h),r.Bb(2),r.sc("previewDefinition",y.getForClient(v))}}function cP(e,t){if(1&e&&r.Rc(0,oP,186,269,"div",9),2&e){var n=t.isEdit,i=r.lc();r.sc("ngIf",i.watchIsEdit(n))}}function aP(e,t){if(1&e&&(r.Vb(0,"span",123),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function lP(e,t){if(1&e&&(r.Tb(0),r.Rc(1,aP,2,1,"span",122),r.Sb()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(1),r.sc("ngForOf",c.errors(i,o))}}function sP(e,t){if(1&e&&r.Rc(0,lP,2,1,"ng-container",104),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}function uP(e,t){1&e&&r.Rb(0)}function dP(e,t){1&e&&r.Rb(0)}function bP(e,t){1&e&&r.Rb(0)}function fP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",130),r.Vb(1,"label",141),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",142,143),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reportDefinitionToEdit.Name2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onItemToEditChange()})),r.Ub(),r.Rc(6,bP,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(13);r.Gb("is-invalid",o.invalid(i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name2)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.reportDefinitionToEdit.Name2)("ngModelOptions",r.vc(9,aF)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,lF,i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name2))}}function mP(e,t){1&e&&r.Rb(0)}function gP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",130),r.Vb(1,"label",144),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",145,146),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reportDefinitionToEdit.Name3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onItemToEditChange()})),r.Ub(),r.Rc(6,mP,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(13);r.Gb("is-invalid",o.invalid(i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name3)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.reportDefinitionToEdit.Name3)("ngModelOptions",r.vc(9,aF)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,lF,i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name3))}}function pP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",124),r.Vb(1,"h5",125),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",126),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",127),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",128),r.Vb(8,"div",129),r.Vb(9,"div",130),r.Vb(10,"label",51),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"t-report-definitions-picker",131,132),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().reportDefinitionToEdit.ReportDefinitionId=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(15,uP,1,0,"ng-container",25),r.Ub(),r.Vb(16,"div",130),r.Vb(17,"label",133),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"input",134,135),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().reportDefinitionToEdit.Name=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(22,dP,1,0,"ng-container",25),r.Ub(),r.Rc(23,fP,7,13,"div",136),r.Rc(24,gP,7,13,"div",136),r.Ub(),r.Ub(),r.Vb(25,"div",137),r.Vb(26,"button",138),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(27,"fa-icon",139),r.Tc(28),r.mc(29,"translate"),r.Ub(),r.Vb(30,"button",140),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(31,"fa-icon",113),r.Tc(32),r.mc(33,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(14),o=r.Fc(21),c=r.lc(),a=r.Fc(13);r.Bb(2),r.Vc(" ",r.nc(3,19,"Configure")," "),r.Bb(7),r.Gb("is-invalid",c.invalid(i,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),r.Bb(2),r.Uc(r.nc(12,21,"Definition_ReportDefinition")),r.Bb(2),r.sc("ngModel",c.reportDefinitionToEdit.ReportDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(29,lF,i,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),r.Bb(1),r.Gb("is-invalid",c.invalid(o,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.Name)),r.Bb(2),r.Uc(r.nc(19,23,"Name")+c.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",c.reportDefinitionToEdit.Name)("ngModelOptions",r.vc(32,aF)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(33,lF,o,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.Name)),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.TernaryLanguageId),r.Bb(2),r.sc("disabled",!c.reportDefinitionToEdit.ReportDefinitionId),r.Bb(2),r.Vc(" \xa0",r.nc(29,25,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(33,27,"Cancel")," ")}}function hP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",124),r.Vb(1,"h5",125),r.Tc(2),r.Ub(),r.Vb(3,"button",126),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(4,"span",127),r.Tc(5,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",128),r.Vb(7,"div",147),r.Vb(8,"textarea",148,149),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().script=e}))("keydown",(function(e){r.Ic(n);var t=r.Fc(10);return r.lc().onScriptKeydown(t,e)})),r.Tc(11,"                "),r.Ub(),r.Ub(),r.Ub(),r.Vb(12,"div",137),r.Vb(13,"button",150),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(14,"fa-icon",139),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Vb(17,"button",150),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(18,"fa-icon",113),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Vc(" ",i.scriptModalLabel()," "),r.Bb(6),r.sc("ngModel",i.script),r.Bb(7),r.Vc(" \xa0",r.nc(16,4,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(20,6,"Cancel")," ")}}var vP,yP=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},IP=function(e,t,n){return[e,t,n]},CP=((vP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var c;return _classCallCheck(this,n),(c=t.call(this)).workspace=e,c.api=i,c.translate=r,c.modalService=o,c.resourceDefinitionsApi=c.api.resourceDefinitionsApi(c.notifyDestruct$),c.expand="DefaultUnit,DefaultUnitMassUnit,ReportDefinitions.ReportDefinition,\nLookup1Definition,Lookup2Definition,Lookup3Definition,Lookup4Definition,ParticipantDefinition",c.create=function(){var e={};c.ws.isPrimaryLanguage?e.TitleSingular=c.initialText:c.ws.isSecondaryLanguage?e.TitleSingular2=c.initialText:c.ws.isTernaryLanguage&&(e.TitleSingular3=c.initialText);var t,n=_createForOfIteratorHelper(c.allVisibilityProps());try{for(n.s();!(t=n.n()).done;)e[t.value]="None"}catch(i){n.e(i)}finally{n.f()}return e.UnitCardinality="None",e.ReportDefinitions=[],e},c.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach((function(e){e.Id=null})),t}return console.error("Cloning a non existing item"),null},c.savePreprocessing=function(e){var t,n=_createForOfIteratorHelper(c.allVisibilityProps());try{for(n.s();!(t=n.n()).done;){var i=t.value;if("None"===e[i]){var r=i.substr(0,i.length-"Visibility".length);delete e[r+"Label"],delete e[r+"Label2"],delete e[r+"Label3"],delete e[r+"DefinitionId"]}}}catch(o){n.e(o)}finally{n.f()}},c.collapseDefinition=!1,c._isEdit=!1,c.isInactive=function(e){return null},c._sections={Title:!0,Fields:!1,Scripts:!1,Reports:!1,MainMenu:!1},c._currentModelModified=!1,c.onMakeHidden=function(e){e&&e.Id&&"Hidden"!==e.State&&c.resourceDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeVisible=function(e){e&&e.Id&&"Visible"!==e.State&&c.resourceDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeArchived=function(e){e&&e.Id&&"Archived"!==e.State&&c.resourceDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.showMakeHidden=function(e){return!!e&&"Hidden"!==e.State},c.showMakeVisible=function(e){return!!e&&"Visible"!==e.State},c.showMakeArchived=function(e){return!!e&&"Archived"!==e.State},c.hasStatePermission=function(e){return c.ws.canDo("resource-definitions","State",e.Id)},c.stateTooltip=function(e){return c.hasStatePermission(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.itemToEditHasChanged=!1,c.resourceDefinitionsApi=c.api.resourceDefinitionsApi(c.notifyDestruct$),c}return _createClass(n,[{key:"allVisibilityProps",value:function(){for(var e=Object(JL.a)(this.workspace,this.translate).properties,t=[],n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];r.endsWith("Visibility")&&t.push(r)}return t}},{key:"onToggleDefinition",value:function(){this.collapseDefinition=!this.collapseDefinition}},{key:"watchIsEdit",value:function(e){return this._isEdit!==e&&(this._isEdit=e),!0}},{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"onToggleSection",value:function(e){this._sections[e]=!this._sections[e]}},{key:"showSection",value:function(e){return this._sections[e]}},{key:"weakEntityErrors",value:function(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some((function(t){return Object(UI.b)(e.serverErrors[t])}))}},{key:"sectionErrors",value:function(e,t){var n=this;return"Title"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.Code)||Object(UI.b)(t.serverErrors.TitleSingular)||Object(UI.b)(t.serverErrors.TitleSingular2)||Object(UI.b)(t.serverErrors.TitleSingular3)||Object(UI.b)(t.serverErrors.TitlePlural)||Object(UI.b)(t.serverErrors.TitlePlural2)||Object(UI.b)(t.serverErrors.TitlePlural3)):"Fields"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.CurrencyVisibility)||Object(UI.b)(t.serverErrors.CenterVisibility)||Object(UI.b)(t.serverErrors.ImageVisibility)||Object(UI.b)(t.serverErrors.DescriptionVisibility)||Object(UI.b)(t.serverErrors.LocationVisibility)||Object(UI.b)(t.serverErrors.FromDateLabel)||Object(UI.b)(t.serverErrors.FromDateLabel2)||Object(UI.b)(t.serverErrors.FromDateLabel3)||Object(UI.b)(t.serverErrors.FromDateVisibility)||Object(UI.b)(t.serverErrors.ToDateLabel)||Object(UI.b)(t.serverErrors.ToDateLabel2)||Object(UI.b)(t.serverErrors.ToDateLabel3)||Object(UI.b)(t.serverErrors.ToDateVisibility)||Object(UI.b)(t.serverErrors.Decimal1Label)||Object(UI.b)(t.serverErrors.Decimal1Label2)||Object(UI.b)(t.serverErrors.Decimal1Label3)||Object(UI.b)(t.serverErrors.Decimal1Visibility)||Object(UI.b)(t.serverErrors.Decimal2Label)||Object(UI.b)(t.serverErrors.Decimal2Label2)||Object(UI.b)(t.serverErrors.Decimal2Label3)||Object(UI.b)(t.serverErrors.Decimal2Visibility)||Object(UI.b)(t.serverErrors.Int1Label)||Object(UI.b)(t.serverErrors.Int1Label2)||Object(UI.b)(t.serverErrors.Int1Label3)||Object(UI.b)(t.serverErrors.Int1Visibility)||Object(UI.b)(t.serverErrors.Int2Label)||Object(UI.b)(t.serverErrors.Int2Label2)||Object(UI.b)(t.serverErrors.Int2Label3)||Object(UI.b)(t.serverErrors.Int2Visibility)||Object(UI.b)(t.serverErrors.Lookup1Label)||Object(UI.b)(t.serverErrors.Lookup1Label2)||Object(UI.b)(t.serverErrors.Lookup1Label3)||Object(UI.b)(t.serverErrors.Lookup1Visibility)||Object(UI.b)(t.serverErrors.Lookup1DefinitionId)||Object(UI.b)(t.serverErrors.Lookup2Label)||Object(UI.b)(t.serverErrors.Lookup2Label2)||Object(UI.b)(t.serverErrors.Lookup2Label3)||Object(UI.b)(t.serverErrors.Lookup2Visibility)||Object(UI.b)(t.serverErrors.Lookup2DefinitionId)||Object(UI.b)(t.serverErrors.Lookup3Label)||Object(UI.b)(t.serverErrors.Lookup3Label2)||Object(UI.b)(t.serverErrors.Lookup3Label3)||Object(UI.b)(t.serverErrors.Lookup3Visibility)||Object(UI.b)(t.serverErrors.Lookup3DefinitionId)||Object(UI.b)(t.serverErrors.Lookup4Label)||Object(UI.b)(t.serverErrors.Lookup4Label2)||Object(UI.b)(t.serverErrors.Lookup4Label3)||Object(UI.b)(t.serverErrors.Lookup4Visibility)||Object(UI.b)(t.serverErrors.Lookup4DefinitionId)||Object(UI.b)(t.serverErrors.Text1Label)||Object(UI.b)(t.serverErrors.Text1Label2)||Object(UI.b)(t.serverErrors.Text1Label3)||Object(UI.b)(t.serverErrors.Text1Visibility)||Object(UI.b)(t.serverErrors.Text2Label)||Object(UI.b)(t.serverErrors.Text2Label2)||Object(UI.b)(t.serverErrors.Text2Label3)||Object(UI.b)(t.serverErrors.Text2Visibility)||Object(UI.b)(t.serverErrors.IdentifierLabel)||Object(UI.b)(t.serverErrors.IdentifierLabel2)||Object(UI.b)(t.serverErrors.IdentifierLabel3)||Object(UI.b)(t.serverErrors.IdentifierVisibility)||Object(UI.b)(t.serverErrors.ReorderLevelVisibility)||Object(UI.b)(t.serverErrors.EconomicOrderQuantityVisibility)||Object(UI.b)(t.serverErrors.UnitCardinality)||Object(UI.b)(t.serverErrors.DefaultUnitId)||Object(UI.b)(t.serverErrors.UnitMassVisibility)||Object(UI.b)(t.serverErrors.DefaultUnitMassUnitId)||Object(UI.b)(t.serverErrors.MonetaryValueVisibility)||!1):"Scripts"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.PreprocessScript)||Object(UI.b)(t.serverErrors.ValidateScript)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some((function(e){return n.weakEntityErrors(e)})):"MainMenu"===e&&!!t.serverErrors&&(Object(UI.b)(t.serverErrors.MainMenuIcon)||Object(UI.b)(t.serverErrors.MainMenuSection)||Object(UI.b)(t.serverErrors.MainMenuSortKey))}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"serverErrors",value:function(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}},{key:"onDefinitionChange",value:function(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}},{key:"getForClient",value:function(e){if(!e)return null;if(this._currentModel!==e||this._currentModelModified){this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e);var t,n=_createForOfIteratorHelper(this.allVisibilityProps());try{for(n.s();!(t=n.n()).done;){var i=t.value;"None"===this._getForClientResult[i]&&delete this._getForClientResult[i]}}catch(r){n.e(r)}finally{n.f()}"None"===this._getForClientResult.UnitCardinality&&delete this._getForClientResult.UnitCardinality}return this._getForClientResult}},{key:"isVisible",value:function(e){return"Optional"===e||"Required"===e}},{key:"isCardinalityVisible",value:function(e){return"Single"===e||"Multiple"===e}},{key:"onIconClick",value:function(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}},{key:"onItemToEditChange",value:function(){this.itemToEditHasChanged=!0}},{key:"onCreateReportDefinition",value:function(e){var t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(n){n&&e.ReportDefinitions.push(t)}),(function(e){}))}},{key:"onConfigureReportDefinition",value:function(e,t){var n=this;this.itemToEditHasChanged=!1;var i=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=i,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(r){r&&n.itemToEditHasChanged&&(t.ReportDefinitions[e]=i)}),(function(e){}))}},{key:"onDeleteReportDefinition",value:function(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t,e.previousIndex,e.currentIndex)}},{key:"onEditScript",value:function(e,t){var n=this;this.script=t[e],this.scriptModalLabel=function(){return n.translate.instant("Definition_"+e)},this.modalService.open(this.scriptModal,{windowClass:"t-dark-theme t-details-modal"}).result.then((function(i){i&&(t[e]=n.script)}),(function(e){}))}},{key:"onScriptKeydown",value:function(e,t){var n=this;Object(W.p)(e,t,(function(e){return n.script=e}))}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"resourceDefinitionTypeChoices",get:function(){if(!this._resourceDefinitionTypeChoices){var e=Object(JL.a)(this.workspace,this.translate).properties.ResourceDefinitionType;this._resourceDefinitionTypeChoices=Object(Si.c)(e)}return this._resourceDefinitionTypeChoices}},{key:"visibilityChoices",get:function(){var e=this;return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:function(){return e.translate.instant("Visibility_None")}},{value:"Optional",name:function(){return e.translate.instant("Visibility_Optional")}},{value:"Required",name:function(){return e.translate.instant("Visibility_Required")}}]),this._visibilityChoices}},{key:"cardinalityChoices",get:function(){var e=this;return this._cardinalityChoices||(this._cardinalityChoices=[{value:"None",name:function(){return e.translate.instant("Cardinality_None")}},{value:"Single",name:function(){return e.translate.instant("Cardinality_Single")}},{value:"Multiple",name:function(){return e.translate.instant("Cardinality_Multiple")}}]),this._cardinalityChoices}},{key:"allMainMenuSections",get:function(){var e=Object(JL.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Si.c)(e)}},{key:"allMainMenuIcons",get:function(){var e=Object(JL.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Si.c)(e)}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||vP)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(X.t))},vP.\u0275cmp=r.Jb({type:vP,selectors:[["t-resource-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(KL,!0),r.Oc(YL,!0)),2&e&&(r.Ec(n=r.ic())&&(t.reportDefinitionModal=n.first),r.Ec(n=r.ic())&&(t.scriptModal=n.first))},features:[r.yb],decls:18,vars:36,consts:[["collection","ResourceDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["scriptModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","resourcedefinitointype",1,"small"],["id","resourcedefinitointype","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["resourcedefinitointype","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","unitcardinality",1,"small"],["id","unitcardinality",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["unitcardinality","ngModel"],["unlabeledProp",""],["labeledProp",""],["definitionedProp",""],["for","preprocessscript",1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","expand"],["rows","6","id","preprocessscript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["preprocessscript","ngModel"],["for","validatescript",1,"small"],["rows","6","id","validatescript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["validatescript","ngModel"],[1,"small"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],[3,"value"],["for","defaultvatrate",1,"small"],["theme","dark","id","defaultvatrate",3,"ngModel","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange"],["defaultvatrate","ngModel"],["for","defaultunit",1,"small"],["theme","dark","id","defaultunit",3,"ngModel","ngModelChange"],["defaultunit","ngModel"],["for","defaultunitmassunit",1,"small"],["theme","dark","id","defaultunitmassunit",3,"ngModel","ngModelChange"],["defaultunitmassunit","ngModel"],["for","participantdefinitionId",1,"small"],["theme","dark",3,"ngModel","ngModelChange"],["defId","ngModel"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[4,"ngIf"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"id","ngModel","ngModelOptions","ngModelChange"],["label","ngModel"],["label2","ngModel"],["label3","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"],[1,"row","h-100","t-much-less-dark"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","ngbAutoFocus","",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["scriptnmodel","ngModel","pstextarea",""],[1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,XL,2,3,"ng-template",null,1,r.Sc),r.Rc(4,ZL,2,3,"ng-template",null,2,r.Sc),r.Rc(6,eF,2,3,"ng-template",null,3,r.Sc),r.Rc(8,tF,3,3,"ng-template",null,4,r.Sc),r.Rc(10,cP,1,1,"ng-template",null,5,r.Sc),r.Rc(12,sP,1,1,"ng-template",null,6,r.Sc),r.Rc(14,pP,34,36,"ng-template",null,7,r.Sc),r.Rc(16,hP,21,8,"ng-template",null,8,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"ResourceDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",a)("actions",r.yc(32,IP,r.Ac(14,yP,n,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(20,yP,i,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(26,yP,o,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,x.u,ne.b,ie.c,ie.u,ie.k,ie.n,x.B,ie.v,x.t,Q.f,ie.p,ie.x,ie.q,vM,xn,NC,_V,v_,Q.b,Q.d,XB],pipes:[G.d],encapsulation:2}),vP);function wP(e,t){if(1&e&&(r.Vb(0,"div",11),r.Vb(1,"span",12),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",13),r.Vb(4,"div",14),r.Qb(5,"t-auto-cell",15),r.Ub(),r.Qb(6,"t-auto-cell",16),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("ResourceDefinition",n,"TitleSingular")),r.Bb(3),r.sc("entity",i.c[n]),r.Bb(1),r.sc("entity",i.c[n])}}function kP(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"ResourceDefinition"),"\n")}function MP(e,t){if(1&e&&(r.Vb(0,"span",17),r.Qb(1,"t-auto-cell",18),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function VP(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SavedByMe")," ")}function TP(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Hidden")," ")}function EP(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Visible")," ")}function UP(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Archived")," ")}function xP(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function RP(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function DP(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}var BP,SP=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},_P=function(e,t,n){return[e,t,n]},OP=function(e){return{template:e,expression:"SavedById eq me"}},LP=function(e){return[e]},FP=function(e){return{template:e,expression:"State eq 'Hidden'"}},AP=function(e){return{template:e,expression:"State eq 'Visible'"}},PP=function(e){return{template:e,expression:"State eq 'Archived'"}},NP=function(e,t){return{SavedBy:e,State:t}},jP=((BP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.resourcesDefinitionsApi=o.api.resourceDefinitionsApi(o.notifyDestruct$),o.expand="",o.onMakeHidden=function(e){return o.resourcesDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeHidden=function(e){return e.some((function(e){var t=o.ws.get("ResourceDefinition",e);return!!t&&"Hidden"!==t.State}))},o.onMakeVisible=function(e){return o.resourcesDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeVisible=function(e){return e.some((function(e){var t=o.ws.get("ResourceDefinition",e);return!!t&&"Visible"!==t.State}))},o.onMakeArchived=function(e){return o.resourcesDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeArchived=function(e){return e.some((function(e){var t=o.ws.get("ResourceDefinition",e);return!!t&&"Archived"!==t.State}))},o.hasStatePermission=function(e){return o.ws.canDo("resource-definitions","State",null)},o.stateTooltip=function(e){return o.hasStatePermission(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.resourcesDefinitionsApi=o.api.resourceDefinitionsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.ResourceDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||BP)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},BP.\u0275cmp=r.Jb({type:BP,selectors:[["t-resource-definitions-master"]],features:[r.yb],decls:22,vars:51,consts:[["collection","ResourceDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","ResourceDefinition","path","Code",3,"entity"],["collection","ResourceDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","ResourceDefinition",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,wP,7,3,"ng-template",null,1,r.Sc),r.Rc(4,kP,2,3,"ng-template",null,2,r.Sc),r.Rc(6,MP,2,1,"ng-template",null,3,r.Sc),r.Rc(8,VP,2,3,"ng-template",null,4,r.Sc),r.Rc(10,TP,2,3,"ng-template",null,5,r.Sc),r.Rc(12,EP,2,3,"ng-template",null,6,r.Sc),r.Rc(14,UP,2,3,"ng-template",null,7,r.Sc),r.Rc(16,xP,2,3,"ng-template",null,8,r.Sc),r.Rc(18,RP,2,3,"ng-template",null,9,r.Sc),r.Rc(20,DP,2,3,"ng-template",null,10,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"ResourceDefinitions"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.yc(30,_P,r.Ac(12,SP,u,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(18,SP,d,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(24,SP,b,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",r.xc(48,NP,r.wc(36,LP,r.wc(34,OP,c)),r.yc(44,_P,r.wc(38,FP,a),r.wc(40,AP,l),r.wc(42,PP,s))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),BP);function WP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-resource-definitions-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function qP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-resource-definitions-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var QP,HP=((QP=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return $P(e||QP)},QP.\u0275cmp=r.Jb({type:QP,selectors:[["t-resource-definitions-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:QP}]),r.yb],decls:5,vars:6,consts:[["collection","ResourceDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,WP,2,3,"ng-template",null,1,r.Sc),r.Rc(3,qP,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,CP,jP],encapsulation:2}),QP),$P=r.Xb(HP);function GP(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function zP(e,t){if(1&e&&(r.Vb(0,"h2",29),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var JP=function(){return{updateOn:"blur"}};function KP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,JP))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function YP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,JP))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function XP(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,JP))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function ZP(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function eN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,JP))}}function tN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,ZP,2,1,"div",11),r.Rc(3,eN,1,3,"t-text-editor",13),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function nN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function iN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,JP))}}function rN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,nN,2,1,"div",11),r.Rc(3,iN,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function oN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function cN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,JP))}}function aN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,oN,2,1,"div",11),r.Rc(3,cN,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function lN(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function sN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",35),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("disabled",i.IsSystem)("ngModel",i.Code)("ngModelOptions",r.vc(3,JP))}}function uN(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Concept)}}function dN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Concept=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Concept)("ngModelOptions",r.vc(2,JP))}}function bN(e,t){if(1&e&&(r.Vb(0,"t-restricted",36),r.Vb(1,"t-view-link",37),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Parent),r.Bb(1),r.sc("itemId",null==n?null:n.ParentId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("AccountType",null==n?null:n.ParentId,"Name"))}}function fN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-types-picker",38),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ParentId=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.ParentId)}}function mN(e,t){if(1&e&&(r.Vb(0,"t-restricted",36),r.Vb(1,"t-view-link",40),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.CustodianDefinition),r.Bb(1),r.sc("itemId",null==n?null:n.CustodianDefinitionId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("RelationDefinition",null==n?null:n.CustodianDefinitionId,"TitleSingular"))}}function gN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relation-definitions-picker",41),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CustodianDefinitionId=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.CustodianDefinitionId)}}function pN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,mN,3,3,"t-restricted",14),r.Rc(3,gN,1,1,"t-relation-definitions-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"AccountType_CustodianDefinition"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CustodianDefinitionId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function hN(e,t){if(1&e&&(r.Vb(0,"t-restricted",36),r.Vb(1,"t-view-link",40),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ParticipantDefinition),r.Bb(1),r.sc("itemId",null==n?null:n.ParticipantDefinitionId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("RelationDefinition",null==n?null:n.ParticipantDefinitionId,"TitleSingular"))}}function vN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relation-definitions-picker",41),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ParticipantDefinitionId=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.ParticipantDefinitionId)}}function yN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,hN,3,3,"t-restricted",14),r.Rc(3,vN,1,1,"t-relation-definitions-picker",39),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"AccountType_ParticipantDefinition"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ParticipantDefinitionId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function IN(e,t){if(1&e&&(r.Vb(0,"t-restricted",36),r.Vb(1,"t-view-link",42),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.EntryTypeParent),r.Bb(1),r.sc("itemId",null==n?null:n.EntryTypeParentId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("EntryType",null==n?null:n.EntryTypeParentId,"Name"))}}function CN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",38),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.EntryTypeParentId=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.EntryTypeParentId)}}function wN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,IN,3,3,"t-restricted",14),r.Rc(3,CN,1,1,"t-entry-types-picker",15),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"AccountType_EntryTypeParent"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.EntryTypeParentId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function kN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(r.nc(2,1,null!=n&&n.IsAssignable?"Yes":"No"))}}function MN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",43),r.Vb(1,"input",44),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.IsAssignable=e})),r.Ub(),r.Vb(2,"label",45),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc().model;r.Bb(1),r.sc("ngModel",i.IsAssignable)}}function VN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(r.nc(2,1,null!=n&&n.StandardAndPure?"Yes":"No"))}}function TN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",43),r.Vb(1,"input",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.StandardAndPure=e})),r.Ub(),r.Vb(2,"label",47),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc().model;r.Bb(1),r.sc("ngModel",i.StandardAndPure)}}function EN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(r.nc(2,1,null!=n&&n.IsMonetary?"Yes":"No"))}}function UN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",43),r.Vb(1,"input",48),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.IsMonetary=e})),r.Ub(),r.Vb(2,"label",49),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc().model;r.Bb(1),r.sc("ngModel",i.IsMonetary)}}function xN(e,t){if(1&e&&(r.Vb(0,"t-form-group",50),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",51),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(2),r.sc("entity",n)}}function RN(e,t){if(1&e&&(r.Vb(0,"t-form-group",50),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsSystem")),r.Bb(3),r.Uc(r.nc(4,4,n?n.IsSystem?"Yes":"No":""))}}function DN(e,t){1&e&&(r.Vb(0,"span",52),r.Qb(1,"fa-icon",53),r.Tc(2,"\xa0 "),r.Ub())}function BN(e,t){if(1&e&&(r.Vb(0,"div",56),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Description)}}function SN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description)("ngModelOptions",r.vc(2,JP))}}function _N(e,t){if(1&e&&(r.Vb(0,"div",56),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description2)}}function ON(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Description2=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.Description2)("ngModelOptions",r.vc(2,JP))}}function LN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,_N,2,1,"div",55),r.Rc(3,ON,1,3,"t-multiline-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function FN(e,t){if(1&e&&(r.Vb(0,"div",56),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Description3)}}function AN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Description3=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.Description3)("ngModelOptions",r.vc(2,JP))}}function PN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,FN,2,1,"div",55),r.Rc(3,AN,1,3,"t-multiline-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function NN(e,t){if(1&e&&(r.Vb(0,"div",54),r.Vb(1,"t-form-group",10),r.mc(2,"translate"),r.Rc(3,BN,2,1,"div",55),r.Rc(4,SN,1,3,"t-multiline-editor",33),r.Ub(),r.Rc(5,LN,4,6,"t-form-group",9),r.Rc(6,PN,4,6,"t-form-group",9),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.Bb(1),r.sc("label",r.nc(2,6,"Description")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("ngIf",c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",c.ws.settings.TernaryLanguageId)}}function jN(e,t){1&e&&(r.Vb(0,"span",52),r.Qb(1,"fa-icon",53),r.Tc(2,"\xa0 "),r.Ub())}function WN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Time1Label)}}function qN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Time1Label=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Time1Label)("ngModelOptions",r.vc(2,JP))}}function QN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Time1Label2)}}function HN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Time1Label2=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.Time1Label2)("ngModelOptions",r.vc(2,JP))}}function $N(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,QN,2,1,"div",11),r.Rc(3,HN,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_Time1Label")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Time1Label2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function GN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Time1Label3)}}function zN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Time1Label3=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.Time1Label3)("ngModelOptions",r.vc(2,JP))}}function JN(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,GN,2,1,"div",11),r.Rc(3,zN,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_Time1Label")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Time1Label3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function KN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Time2Label)}}function YN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Time2Label=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Time2Label)("ngModelOptions",r.vc(2,JP))}}function XN(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Time2Label2)}}function ZN(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Time2Label2=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.Time2Label2)("ngModelOptions",r.vc(2,JP))}}function ej(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,XN,2,1,"div",11),r.Rc(3,ZN,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_Time2Label")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Time2Label2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function tj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.Time2Label3)}}function nj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Time2Label3=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.Time2Label3)("ngModelOptions",r.vc(2,JP))}}function ij(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,tj,2,1,"div",11),r.Rc(3,nj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_Time2Label")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Time2Label3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function rj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.ExternalReferenceLabel)}}function oj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ExternalReferenceLabel=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.ExternalReferenceLabel)("ngModelOptions",r.vc(2,JP))}}function cj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.ExternalReferenceLabel2)}}function aj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.ExternalReferenceLabel2=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.ExternalReferenceLabel2)("ngModelOptions",r.vc(2,JP))}}function lj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,cj,2,1,"div",11),r.Rc(3,aj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_ExternalReferenceLabel")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ExternalReferenceLabel2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function sj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.ExternalReferenceLabel3)}}function uj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.ExternalReferenceLabel3=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.ExternalReferenceLabel3)("ngModelOptions",r.vc(2,JP))}}function dj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,sj,2,1,"div",11),r.Rc(3,uj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_ExternalReferenceLabel")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ExternalReferenceLabel3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function bj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.InternalReferenceLabel)}}function fj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.InternalReferenceLabel=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.InternalReferenceLabel)("ngModelOptions",r.vc(2,JP))}}function mj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.InternalReferenceLabel2)}}function gj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.InternalReferenceLabel2=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.InternalReferenceLabel2)("ngModelOptions",r.vc(2,JP))}}function pj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,mj,2,1,"div",11),r.Rc(3,gj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_InternalReferenceLabel")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.InternalReferenceLabel2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function hj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.InternalReferenceLabel3)}}function vj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.InternalReferenceLabel3=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.InternalReferenceLabel3)("ngModelOptions",r.vc(2,JP))}}function yj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,hj,2,1,"div",11),r.Rc(3,vj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_InternalReferenceLabel")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.InternalReferenceLabel3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Ij(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.NotedAgentNameLabel)}}function Cj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.NotedAgentNameLabel=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.NotedAgentNameLabel)("ngModelOptions",r.vc(2,JP))}}function wj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.NotedAgentNameLabel2)}}function kj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.NotedAgentNameLabel2=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.NotedAgentNameLabel2)("ngModelOptions",r.vc(2,JP))}}function Mj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,wj,2,1,"div",11),r.Rc(3,kj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_NotedAgentNameLabel")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedAgentNameLabel2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Vj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.NotedAgentNameLabel3)}}function Tj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.NotedAgentNameLabel3=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.NotedAgentNameLabel3)("ngModelOptions",r.vc(2,JP))}}function Ej(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Vj,2,1,"div",11),r.Rc(3,Tj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_NotedAgentNameLabel")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedAgentNameLabel3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Uj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.NotedAmountLabel)}}function xj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.NotedAmountLabel=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.NotedAmountLabel)("ngModelOptions",r.vc(2,JP))}}function Rj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.NotedAmountLabel2)}}function Dj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.NotedAmountLabel2=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.NotedAmountLabel2)("ngModelOptions",r.vc(2,JP))}}function Bj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Rj,2,1,"div",11),r.Rc(3,Dj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_NotedAmountLabel")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedAmountLabel2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Sj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.NotedAmountLabel3)}}function _j(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.NotedAmountLabel3=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.NotedAmountLabel3)("ngModelOptions",r.vc(2,JP))}}function Oj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Sj,2,1,"div",11),r.Rc(3,_j,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_NotedAmountLabel")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedAmountLabel3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Lj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.NotedDateLabel)}}function Fj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.NotedDateLabel=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.NotedDateLabel)("ngModelOptions",r.vc(2,JP))}}function Aj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.NotedDateLabel2)}}function Pj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.NotedDateLabel2=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.NotedDateLabel2)("ngModelOptions",r.vc(2,JP))}}function Nj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Aj,2,1,"div",11),r.Rc(3,Pj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_NotedDateLabel")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedDateLabel2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function jj(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(null==n?null:n.NotedDateLabel3)}}function Wj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.NotedDateLabel3=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.NotedDateLabel3)("ngModelOptions",r.vc(2,JP))}}function qj(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,jj,2,1,"div",11),r.Rc(3,Wj,1,3,"t-text-editor",33),r.Ub()),2&e){var n=r.lc(2),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"AccountType_NotedDateLabel")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedDateLabel3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Qj(e,t){if(1&e&&(r.Vb(0,"div",54),r.Vb(1,"t-form-group",10),r.mc(2,"translate"),r.Rc(3,WN,2,1,"div",11),r.Rc(4,qN,1,3,"t-text-editor",33),r.Ub(),r.Rc(5,$N,4,6,"t-form-group",9),r.Rc(6,JN,4,6,"t-form-group",9),r.Vb(7,"t-form-group",10),r.mc(8,"translate"),r.Rc(9,KN,2,1,"div",11),r.Rc(10,YN,1,3,"t-text-editor",33),r.Ub(),r.Rc(11,ej,4,6,"t-form-group",9),r.Rc(12,ij,4,6,"t-form-group",9),r.Vb(13,"t-form-group",10),r.mc(14,"translate"),r.Rc(15,rj,2,1,"div",11),r.Rc(16,oj,1,3,"t-text-editor",33),r.Ub(),r.Rc(17,lj,4,6,"t-form-group",9),r.Rc(18,dj,4,6,"t-form-group",9),r.Vb(19,"t-form-group",10),r.mc(20,"translate"),r.Rc(21,bj,2,1,"div",11),r.Rc(22,fj,1,3,"t-text-editor",33),r.Ub(),r.Rc(23,pj,4,6,"t-form-group",9),r.Rc(24,yj,4,6,"t-form-group",9),r.Vb(25,"t-form-group",10),r.mc(26,"translate"),r.Rc(27,Ij,2,1,"div",11),r.Rc(28,Cj,1,3,"t-text-editor",33),r.Ub(),r.Rc(29,Mj,4,6,"t-form-group",9),r.Rc(30,Ej,4,6,"t-form-group",9),r.Vb(31,"t-form-group",10),r.mc(32,"translate"),r.Rc(33,Uj,2,1,"div",11),r.Rc(34,xj,1,3,"t-text-editor",33),r.Ub(),r.Rc(35,Bj,4,6,"t-form-group",9),r.Rc(36,Oj,4,6,"t-form-group",9),r.Vb(37,"t-form-group",10),r.mc(38,"translate"),r.Rc(39,Lj,2,1,"div",11),r.Rc(40,Fj,1,3,"t-text-editor",33),r.Ub(),r.Rc(41,Nj,4,6,"t-form-group",9),r.Rc(42,qj,4,6,"t-form-group",9),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.Bb(1),r.sc("label",r.nc(2,42,"AccountType_Time1Label")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Time1Label),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("ngIf",c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",c.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(8,44,"AccountType_Time2Label")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Time2Label),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("ngIf",c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",c.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(14,46,"AccountType_ExternalReferenceLabel")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ExternalReferenceLabel),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("ngIf",c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",c.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(20,48,"AccountType_InternalReferenceLabel")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.InternalReferenceLabel),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("ngIf",c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",c.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(26,50,"AccountType_NotedAgentNameLabel")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedAgentNameLabel),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("ngIf",c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",c.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(32,52,"AccountType_NotedAmountLabel")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedAmountLabel),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("ngIf",c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",c.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(38,54,"AccountType_NotedDateLabel")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.NotedDateLabel),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o),r.Bb(1),r.sc("ngIf",c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",c.ws.settings.TernaryLanguageId)}}function Hj(e,t){1&e&&(r.Vb(0,"span",52),r.Qb(1,"fa-icon",53),r.Tc(2,"\xa0 "),r.Ub())}function $j(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Account_CustodyDefinition"))}function Gj(e,t){if(1&e&&(r.Vb(0,"t-view-link",63),r.Tc(1),r.Ub()),2&e){var n=r.lc().item,i=r.lc(3);r.sc("itemId",null==n?null:n.CustodyDefinitionId),r.Bb(1),r.Vc(" ",i.getMultilingualValue(i.ws.CustodyDefinition[n.CustodyDefinitionId],"TitleSingular",i.ws)," ")}}function zj(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custody-definitions-picker",64),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.CustodyDefinitionId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item,o=r.lc(2).model,c=r.lc();r.sc("ngModel",i.CustodyDefinitionId)("required",!i.PH)("filter",c.custodyDefinitionFilter(o))}}function Jj(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",60),r.Rc(1,Gj,2,2,"t-view-link",61),r.Rc(2,zj,1,3,"t-custody-definitions-picker",62),r.Ub()),2&e){var n=t.item,i=r.lc(2).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.CustodyDefinitionId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var Kj=function(){return["Definition"]},Yj=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Xj=function(e){return{Definition:e}};function Zj(e,t){if(1&e&&(r.Qb(0,"t-table",57),r.Rc(1,$j,2,3,"ng-template",null,58,r.Sc),r.Rc(3,Jj,3,3,"ng-template",null,59,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4),o=r.lc(),c=o.model,a=o.isEdit;r.sc("dataSource",null==c?null:c.CustodyDefinitions)("isEdit",a)("columnPaths",r.vc(4,Kj))("columnTemplates",r.wc(8,Xj,r.xc(5,Yj,n,i)))}}function eW(e,t){1&e&&(r.Vb(0,"span",52),r.Qb(1,"fa-icon",53),r.Tc(2,"\xa0 "),r.Ub())}function tW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Account_ResourceDefinition"))}function nW(e,t){if(1&e&&(r.Vb(0,"t-view-link",66),r.Tc(1),r.Ub()),2&e){var n=r.lc().item,i=r.lc(3);r.sc("itemId",null==n?null:n.ResourceDefinitionId),r.Bb(1),r.Vc(" ",i.getMultilingualValue(i.ws.ResourceDefinition[n.ResourceDefinitionId],"TitleSingular",i.ws)," ")}}function iW(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resource-definitions-picker",64),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.ResourceDefinitionId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item,o=r.lc(2).model,c=r.lc();r.sc("ngModel",i.ResourceDefinitionId)("required",!i.PH)("filter",c.resourceDefinitionFilter(o))}}function rW(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",60),r.Rc(1,nW,2,2,"t-view-link",65),r.Rc(2,iW,1,3,"t-resource-definitions-picker",62),r.Ub()),2&e){var n=t.item,i=r.lc(2).isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.ResourceDefinitionId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}function oW(e,t){if(1&e&&(r.Qb(0,"t-table",57),r.Rc(1,tW,2,3,"ng-template",null,58,r.Sc),r.Rc(3,rW,3,3,"ng-template",null,59,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4),o=r.lc(),c=o.model,a=o.isEdit;r.sc("dataSource",null==c?null:c.ResourceDefinitions)("isEdit",a)("columnPaths",r.vc(4,Kj))("columnTemplates",r.wc(8,Xj,r.xc(5,Yj,n,i)))}}function cW(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,zP,2,1,"h2",6),r.Rc(2,KP,2,7,"t-text-editor",7),r.Rc(3,YP,2,7,"t-text-editor",8),r.Rc(4,XP,2,7,"t-text-editor",8),r.Ub(),r.Rc(5,tN,4,6,"t-form-group",9),r.Rc(6,rN,4,6,"t-form-group",9),r.Rc(7,aN,4,6,"t-form-group",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Rc(10,lN,2,1,"span",11),r.Rc(11,sN,1,4,"t-text-editor",12),r.Ub(),r.Vb(12,"t-form-group",10),r.mc(13,"translate"),r.Rc(14,uN,2,1,"span",11),r.Rc(15,dN,1,3,"t-text-editor",13),r.Ub(),r.Vb(16,"t-form-group",10),r.mc(17,"translate"),r.Rc(18,bN,3,3,"t-restricted",14),r.Rc(19,fN,1,1,"t-account-types-picker",15),r.Ub(),r.Rc(20,pN,4,6,"t-form-group",9),r.Rc(21,yN,4,6,"t-form-group",9),r.Rc(22,wN,4,6,"t-form-group",9),r.Vb(23,"t-form-group",10),r.mc(24,"translate"),r.Rc(25,kN,3,3,"div",11),r.Rc(26,MN,4,1,"div",16),r.Ub(),r.Vb(27,"t-form-group",10),r.mc(28,"translate"),r.Rc(29,VN,3,3,"div",11),r.Rc(30,TN,4,1,"div",16),r.Ub(),r.Vb(31,"t-form-group",10),r.mc(32,"translate"),r.Rc(33,EN,3,3,"div",11),r.Rc(34,UN,4,1,"div",16),r.Ub(),r.Rc(35,xN,3,4,"t-form-group",17),r.Rc(36,RN,5,6,"t-form-group",17),r.Vb(37,"ul",18,19),r.Vb(39,"li",20),r.Vb(40,"a",21),r.Rc(41,DN,3,0,"span",22),r.Vb(42,"span",23),r.Tc(43),r.mc(44,"translate"),r.Ub(),r.Ub(),r.Rc(45,NN,7,8,"ng-template",24),r.Ub(),r.Vb(46,"li",25),r.Vb(47,"a",21),r.Rc(48,jN,3,0,"span",22),r.Vb(49,"span",23),r.Tc(50),r.mc(51,"translate"),r.Ub(),r.Ub(),r.Rc(52,Qj,43,56,"ng-template",24),r.Ub(),r.Vb(53,"li",26),r.Vb(54,"a",21),r.Rc(55,Hj,3,0,"span",22),r.Vb(56,"span",23),r.Tc(57),r.mc(58,"translate"),r.mc(59,"number"),r.Ub(),r.Ub(),r.Rc(60,Zj,5,10,"ng-template",24),r.Ub(),r.Vb(61,"li",27),r.Vb(62,"a",21),r.Rc(63,eW,3,0,"span",22),r.Vb(64,"span",23),r.Tc(65),r.mc(66,"translate"),r.mc(67,"number"),r.Ub(),r.Ub(),r.Rc(68,oW,5,10,"ng-template",24),r.Ub(),r.Ub(),r.Qb(69,"div",28)),2&e){var n=t.model,i=t.isEdit,o=r.Fc(38),c=r.lc();r.sc("serverErrors",c.getMultilingualValue(null==n?null:n.serverErrors,"Name",c.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&c.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&c.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&c.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!c.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!c.ws.isSecondaryLanguage&&c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!c.ws.isTernaryLanguage&&c.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,47,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(13,49,"AccountType_Concept"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Concept),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(17,51,"TreeParent"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.ParentId),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",c.showCustodianDefinition(n)),r.Bb(1),r.sc("ngIf",c.showParticipantDefinition(n)),r.Bb(1),r.sc("ngIf",c.showEntryTypeParent(n)),r.Bb(1),r.sc("label",r.nc(24,53,"IsAssignable"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.IsAssignable),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(28,55,"AccountType_StandardAndPure"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.StandardAndPure),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(32,57,"AccountType_IsMonetary"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.IsMonetary),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("destroyOnHide",!0),r.Bb(4),r.sc("ngIf",c.showDescriptionsError(n)),r.Bb(2),r.Uc(r.nc(44,59,"Description")),r.Bb(5),r.sc("ngIf",c.showLabelsError(n)),r.Bb(2),r.Uc(r.nc(51,61,"Labels")),r.Bb(5),r.sc("ngIf",c.showCustodyDefinitionsError(n)),r.Bb(2),r.Uc(r.nc(58,63,"AccountType_CustodyDefinitions")+" ("+r.nc(59,65,null==n||null==n.CustodyDefinitions?null:n.CustodyDefinitions.length)+")"),r.Bb(6),r.sc("ngIf",c.showResourceDefinitionsError(n)),r.Bb(2),r.Uc(r.nc(66,67,"AccountType_ResourceDefinitions")+" ("+r.nc(67,69,null==n||null==n.ResourceDefinitions?null:n.ResourceDefinitions.length)+")"),r.Bb(4),r.sc("ngbNavOutlet",o)}}function aW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function lW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var sW,uW=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},dW=function(e,t){return[e,t]},bW=((sW=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.accountTypesApi=o.api.accountTypesApi(o.notifyDestruct$),o.expand="Parent,CustodianDefinition,ParticipantDefinition,EntryTypeParent,\nCustodyDefinitions.CustodyDefinition,ResourceDefinitions.ResourceDefinition",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e.IsAssignable=!0,e.StandardAndPure=!1,e.CustodyDefinitions=[],e.ResourceDefinitions=[],e},o.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.CustodyDefinitions&&t.CustodyDefinitions.forEach((function(e){e.Id=null})),t.ResourceDefinitions&&t.ResourceDefinitions.forEach((function(e){e.Id=null})),t.IsSystem=!1,t}return console.error("Cloning a non existing item"),null},o.onActivate=function(e){e&&e.Id&&o.accountTypesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.onDeactivate=function(e){e&&e.Id&&o.accountTypesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.showActivate=function(e){return!!e&&!e.IsActive},o.showDeactivate=function(e){return!!e&&e.IsActive},o.canActivateDeactivateItem=function(e){return o.ws.canDo(o.view,"IsActive",e.Id)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.isInactive=function(e){return e&&!e.IsActive?"Error_CannotModifyInactiveItemPleaseActivate":null},o.accountTypesApi=o.api.accountTypesApi(o.notifyDestruct$),o}return _createClass(n,[{key:"showCustodianDefinition",value:function(e){return!0}},{key:"showParticipantDefinition",value:function(e){return!0}},{key:"showEntryTypeParent",value:function(e){return!0}},{key:"resourceDefinitionFilter",value:function(e){var t="State ne 'Hidden'";return e&&e.ParticipantDefinitionId&&(t+=" and (ParticipantDefinitionId eq ".concat(e.ParticipantDefinitionId," or ParticipantDefinitionId eq null)")),t}},{key:"custodyDefinitionFilter",value:function(e){var t="State ne 'Hidden'";return e&&e.CustodianDefinitionId&&(t+=" and (CustodianDefinitionId eq ".concat(e.CustodianDefinitionId," or CustodianDefinitionId eq null)")),t}},{key:"showDescriptionsError",value:function(e){return!(!e||!e.serverErrors||!e.serverErrors.Description&&!e.serverErrors.Description2&&!e.serverErrors.Description3)}},{key:"showLabelsError",value:function(e){return!!e&&!!e.serverErrors&&Object.keys(e.serverErrors).some((function(e){return e.endsWith("Label")||e.endsWith("Label2")||e.endsWith("Label3")}))}},{key:"showCustodyDefinitionsError",value:function(e){return!!e&&!!e.CustodyDefinitions&&e.CustodyDefinitions.some((function(e){return!!e.serverErrors}))}},{key:"showResourceDefinitionsError",value:function(e){return!!e&&!!e.ResourceDefinitions&&e.ResourceDefinitions.some((function(e){return!!e.serverErrors}))}},{key:"view",get:function(){return"account-types"}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"masterCrumb",get:function(){var e=Object(RV.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||sW)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},sW.\u0275cmp=r.Jb({type:sW,selectors:[["t-account-types-details"]],features:[r.yb],decls:9,vars:26,consts:[["collection","AccountType",3,"idString","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","isInactive","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["ngbNav","",1,"w-100","pt-3","pt-sm-4","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","description"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["ngbNavItem","labels"],["ngbNavItem","custodyDefs"],["ngbNavItem","resourceDefs"],[1,"w-100",3,"ngbNavOutlet"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],["link","../../account-types",3,"itemId"],[3,"ngModel","ngModelChange"],["filter","State ne 'Hidden'",3,"ngModel","ngModelChange",4,"ngIf"],["link","../../relation-definitions",3,"itemId"],["filter","State ne 'Hidden'",3,"ngModel","ngModelChange"],["link","../../entry-types",3,"itemId"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isAssignable",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isAssignable",1,"custom-control-label","t-pointer"],["type","checkbox","id","standardandpure",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","standardandpure",1,"custom-control-label","t-pointer"],["type","checkbox","id","ismonetary",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","ismonetary",1,"custom-control-label","t-pointer"],[1,"t-form-group",3,"label"],["collection","AccountType","path","IsActive",3,"entity"],[1,"text-danger"],["icon","exclamation"],[1,"row","m-0","pt-2","pt-sm-3"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header",""],["row",""],[1,"t-form-group",3,"serverErrors"],["link","../../custody-definitions",3,"itemId",4,"ngIf"],[3,"ngModel","required","filter","ngModelChange",4,"ngIf"],["link","../../custody-definitions",3,"itemId"],[3,"ngModel","required","filter","ngModelChange"],["link","../../resource-definitions",3,"itemId",4,"ngIf"],["link","../../resource-definitions",3,"itemId"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.Rc(1,GP,2,1,"ng-template",null,1,r.Sc),r.Rc(3,cW,70,71,"ng-template",null,2,r.Sc),r.Rc(5,aW,2,3,"ng-template",null,3,r.Sc),r.Rc(7,lW,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4),o=r.Fc(6),c=r.Fc(8);r.sc("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",n)("documentTemplate",i)("isInactive",t.isInactive)("actions",r.xc(23,dW,r.Ac(11,uW,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(17,uW,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,X.v,X.x,X.y,X.w,X.A,we.a,ie.u,ie.k,ie.n,Tn.a,Ca,NM,_V,PV,ie.a,Ie.a,ne.b,df,tl.a,nl.a,GL,HP],pipes:[G.d,x.g],encapsulation:2}),sW);function fW(e,t){if(1&e&&(r.Vb(0,"div",7),r.Qb(1,"t-auto-cell",8),r.Ub(),r.Vb(2,"div",9),r.Qb(3,"t-auto-cell",10),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n]),r.Bb(2),r.sc("entity",i.c[n])}}function mW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Account"),"\n")}function gW(e,t){if(1&e&&(r.Vb(0,"span",11),r.Qb(1,"t-auto-cell",12),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function pW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function hW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function vW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var yW,IW=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},CW=function(e,t){return[e,t]},wW=function(e){return{template:e,expression:"CreatedById eq me"}},kW=function(e){return[e]},MW=function(e){return{CreatedBy:e}},VW=((yW=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.accountsApi=o.api.accountsApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.accountsApi.activate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.accountsApi.deactivate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo(o.view,"IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.accountsApi=o.api.accountsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"view",get:function(){return"accounts"}},{key:"c",get:function(){return this.workspace.currentTenant.Account}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||yW)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},yW.\u0275cmp=r.Jb({type:yW,selectors:[["t-accounts-master"]],features:[r.yb],decls:14,vars:31,consts:[["collection","Account","selectDefault","Classification,Classification.Code,Currency,Center","selectForTiles","Code,Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between","truncate"],["collection","Account",1,"text-truncate",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","Account","path","Code",1,"text-truncate",3,"entity"],[1,"text-truncate"],["collection","Account",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,fW,4,2,"ng-template",null,1,r.Sc),r.Rc(4,mW,2,3,"ng-template",null,2,r.Sc),r.Rc(6,gW,2,1,"ng-template",null,3,r.Sc),r.Rc(8,pW,2,3,"ng-template",null,4,r.Sc),r.Rc(10,hW,2,3,"ng-template",null,5,r.Sc),r.Rc(12,vW,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"Accounts"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(22,CW,r.zc(12,IW,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(17,IW,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.wc(29,MW,r.wc(27,kW,r.wc(25,wW,l))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),yW),TW=n("bllQ");function EW(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-resources-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.definitionId,c=t.idString,a=r.lc();r.Bb(1),r.sc("idString",c)("initialText",i)("definitionId",o)("additionalSelect",a.additionalSelect)}}function UW(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-resources-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.definitionId,o=t.filter,c=r.lc();r.Bb(1),r.sc("definitionId",i)("filter",o)("showCreate",c.showCreate)("additionalSelect",c.additionalSelect)}}var xW,RW=((xW=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return DW(e||xW)},xW.\u0275cmp=r.Jb({type:xW,selectors:[["t-resources-picker"]],inputs:{definitionIds:"definitionIds"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:xW}]),r.yb],decls:5,vars:7,consts:[["collection","Resource",3,"masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","filter","definitionIds","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"idString","initialText","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,EW,2,4,"ng-template",null,1,r.Sc),r.Rc(3,UW,2,4,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("filter",t.filter)("definitionIds",t.definitionIds)("additionalSelect",t.additionalSelect)}},directives:[Xa,vM,LC],encapsulation:2}),xW),DW=r.Xb(RW),BW=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},SW=function(e,t){return[e,t]},_W=function(e){return{template:e,expression:"CreatedById eq me"}},OW=function(e){return[e]},LW=function(e){return{CreatedBy:e}};function FW(e,t){if(1&e&&r.Qb(0,"t-master",8),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(8),c=r.Fc(6),a=r.Fc(10),l=r.Fc(12),s=r.Fc(14);r.sc("definitionId",n.definitionId)("mode",n.mode)("additionalSelect",n.additionalSelect)("showCreateButton",n.showCreate)("filterDefault",n.filter)("masterCrumb",n.masterCrumb)("tileTemplate",i)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",c)("multiselectActions",r.xc(21,SW,r.zc(11,BW,a,n.onActivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip),r.zc(16,BW,l,n.onDeactivate,n.canActivateDeactivateItem,n.activateDeactivateTooltip)))("filterDefinition",r.wc(28,LW,r.wc(26,OW,r.wc(24,_W,s))))}}function AW(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",9),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function PW(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",16),r.Qb(2,"t-image",17),r.Ub(),r.Tc(3," \xa0\xa0\xa0 "),r.Sb()),2&e){var n=r.lc().id,i=r.lc();r.Bb(2),r.sc("src","custodies/"+i.c[n].DefinitionId+"/"+i.c[n].Id+"/image")("imageId",i.c[n].ImageId)("size",42)}}function NW(e,t){if(1&e&&(r.Vb(0,"div",10),r.Rc(1,PW,4,3,"ng-container",11),r.Vb(2,"div",12),r.Vb(3,"div",13),r.Vb(4,"span",14),r.Tc(5),r.Ub(),r.Ub(),r.Vb(6,"div",15),r.Vb(7,"span"),r.Tc(8),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("ngIf",2===(null==i.c[n].EntityMetadata?null:i.c[n].EntityMetadata.ImageId)&&i.Image_isVisible),r.Bb(4),r.Uc(i.ws.getMultilingualValue("Custody",n,"Name")),r.Bb(3),r.Uc(i.c[n].Code)}}function jW(e,t){if(1&e&&r.Tc(0),2&e){var n=r.lc();r.Vc(" ",n.summary,"\n")}}function WW(e,t){if(1&e&&(r.Vb(0,"span",18),r.Qb(1,"t-auto-cell",19),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function qW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function QW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function HW(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var $W,GW=(($W=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.router=r,a.route=o,a.translate=c,a.custodiesApi=a.api.custodiesApi(null,a.notifyDestruct$),a.expand="",a.onActivate=function(e){return a.custodiesApi.activate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.onDeactivate=function(e){return a.custodiesApi.deactivate(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.canActivateDeactivateItem=function(e){return a.ws.canDo(a.view,"IsActive",null)},a.activateDeactivateTooltip=function(e){return a.canActivateDeactivateItem(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){if(e.isScreenMode){var n=+t.get("definitionId");e.definitionId!==n&&(e.definitionId=n)}}))}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.custodiesApi=this.api.custodiesApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"view",get:function(){return"custodies/".concat(this.definitionId)}},{key:"c",get:function(){return this.workspace.currentTenant.Custody}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"definition",get:function(){return this.definitionId?this.ws.definitions.Custodies[this.definitionId]:null}},{key:"found",get:function(){return!this.definitionId||!!this.definition}},{key:"masterCrumb",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Custodies")}},{key:"summary",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Custody")}},{key:"Image_isVisible",get:function(){return!!this.definition.ImageVisibility}}]),n}(_t.a)).\u0275fac=function(e){return new(e||$W)(r.Pb(S.m),r.Pb(Y.a),r.Pb(i.e),r.Pb(i.a),r.Pb(G.e))},$W.\u0275cmp=r.Jb({type:$W,selectors:[["t-custodies-master"]],inputs:{definitionId:"definitionId"},features:[r.yb],decls:15,vars:2,consts:[["collection","Custody","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Custody","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1","d-inline-block","t-mw-0"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"border","t-dp-wrapper2"],["icon","camera",3,"src","imageId","size"],[1,"text-truncate"],["collection","Custody",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(r.Rc(0,FW,1,30,"t-master",0),r.Rc(1,AW,1,1,"ng-template",null,1,r.Sc),r.Rc(3,NW,9,3,"ng-template",null,2,r.Sc),r.Rc(5,jW,1,1,"ng-template",null,3,r.Sc),r.Rc(7,WW,2,2,"ng-template",null,4,r.Sc),r.Rc(9,qW,2,3,"ng-template",null,5,r.Sc),r.Rc(11,QW,2,3,"ng-template",null,6,r.Sc),r.Rc(13,HW,2,3,"ng-template",null,7,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,Ot.a,dn,he,Ie.a],pipes:[G.d],encapsulation:2}),$W);function zW(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-custodies-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=t.definitionId,a=r.lc();r.Bb(1),r.sc("idString",o)("initialText",i)("definitionId",c)("additionalSelect",a.additionalSelect)}}function JW(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-custodies-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.definitionId,o=t.filter,c=r.lc();r.Bb(1),r.sc("definitionId",i)("filter",o)("showCreate",c.showCreate)("additionalSelect",c.additionalSelect)}}var KW,YW=((KW=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return XW(e||KW)},KW.\u0275cmp=r.Jb({type:KW,selectors:[["t-custodies-picker"]],inputs:{definitionIds:"definitionIds"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:KW}]),r.yb],decls:5,vars:7,consts:[["collection","Custody",3,"masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","definitionIds","filter","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"idString","initialText","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,zW,2,4,"ng-template",null,1,r.Sc),r.Rc(3,JW,2,4,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("definitionIds",t.definitionIds)("filter",t.filter)("additionalSelect",t.additionalSelect)}},directives:[Xa,LE,GW],encapsulation:2}),KW),XW=r.Xb(YW);function ZW(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function eq(e,t){if(1&e&&(r.Vb(0,"h2",18),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var tq=function(){return{updateOn:"blur"}};function nq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",19),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,tq))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function iq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,tq))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function rq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,tq))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function oq(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function cq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",22),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,tq))}}function aq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,oq,2,1,"div",11),r.Rc(3,cq,1,3,"t-text-editor",21),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function lq(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function sq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,tq))}}function uq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,lq,2,1,"div",11),r.Rc(3,sq,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function dq(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function bq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,tq))}}function fq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,dq,2,1,"div",11),r.Rc(3,bq,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function mq(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function gq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,tq))}}function pq(e,t){if(1&e&&(r.Vb(0,"t-view-link",24),r.Qb(1,"t-auto-cell",25),r.Ub()),2&e){var n=r.lc().model;r.sc("itemId",null==n?null:n.ClassificationId),r.Bb(1),r.sc("entity",n)}}function hq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-classifications-picker",26),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ClassificationId=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.ClassificationId)}}function vq(e,t){if(1&e&&(r.Vb(0,"t-view-link",27),r.Qb(1,"t-auto-cell",28),r.Ub()),2&e){var n=r.lc().model;r.sc("itemId",null==n?null:n.AccountTypeId),r.Bb(1),r.sc("entity",n)}}function yq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-types-picker",29),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.AccountTypeId=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.AccountTypeId)("additionalSelect",o.accountTypeAdditionalSelect)("filter",o.filterAccountType(i))}}function Iq(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(1),r.Uc(i.formatResourceDefinitionId(n.ResourceDefinitionId))}}function Cq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ResourceDefinitionId=e}))("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).model;return r.lc().onResourceDefinitionChange(e,t)})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ResourceDefinitionId)("choices",o.choicesResourceDefinitionId(i))}}function wq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Iq,2,1,"div",11),r.Rc(3,Cq,1,2,"t-selector",30),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Account_ResourceDefinition"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ResourceDefinitionId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function kq(e,t){if(1&e&&(r.Vb(0,"t-view-link",34),r.Qb(1,"t-auto-cell",35),r.Ub()),2&e){var n,i=r.lc(2).model,o="../../resources/"+(null==(n=r.lc().ws.get("Resource",null==i?null:i.ResourceId))?null:n.DefinitionId);r.sc("link",o)("itemId",null==i?null:i.ResourceId),r.Bb(1),r.sc("entity",i)}}function Mq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resources-picker",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ResourceId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ResourceId)("definitionIds",o.definitionIdsResource(i))("additionalSelect",o.resourceAdditionalSelect)}}function Vq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.Rc(1,kq,2,3,"t-view-link",32),r.Rc(2,Mq,1,3,"t-resources-picker",33),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.labelResource(i))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ResourceId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Tq(e,t){if(1&e&&(r.Vb(0,"t-view-link",34),r.Qb(1,"t-auto-cell",38),r.Ub()),2&e){var n,i=r.lc(2).model,o="../../relations/"+(null==(n=r.lc().ws.get("Relation",null==i?null:i.ParticipantId))?null:n.DefinitionId);r.sc("link",o)("itemId",null==i?null:i.ParticipantId),r.Bb(1),r.sc("entity",i)}}function Eq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",39),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ParticipantId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.ParticipantId)("definitionIds",o.definitionIdsParticipant(i))}}function Uq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.Rc(1,Tq,2,3,"t-view-link",32),r.Rc(2,Eq,1,2,"t-relations-picker",37),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.labelParticipant(i))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ParticipantId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function xq(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(1),r.Uc(i.formatCustodyDefinitionId(n.CustodyDefinitionId))}}function Rq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CustodyDefinitionId=e}))("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).model;return r.lc().onCustodyDefinitionChange(e,t)})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CustodyDefinitionId)("choices",o.choicesCustodyDefinitionId(i))}}function Dq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,xq,2,1,"div",11),r.Rc(3,Rq,1,2,"t-selector",30),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Account_CustodyDefinition"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CustodyDefinitionId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Bq(e,t){if(1&e&&(r.Vb(0,"t-view-link",34),r.Qb(1,"t-auto-cell",40),r.Ub()),2&e){var n,i=r.lc(2).model,o="../../custodies/"+(null==(n=r.lc().ws.get("Custody",null==i?null:i.CustodyId))?null:n.DefinitionId);r.sc("link",o)("itemId",null==i?null:i.CustodyId),r.Bb(1),r.sc("entity",i)}}function Sq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custodies-picker",36),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CustodyId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CustodyId)("definitionIds",o.definitionIdsCustody(i))("additionalSelect",o.custodyAdditionalSelect)}}function _q(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.Rc(1,Bq,2,3,"t-view-link",32),r.Rc(2,Sq,1,3,"t-custodies-picker",33),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.labelCustody(i))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CustodyId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Oq(e,t){if(1&e&&(r.Vb(0,"t-view-link",34),r.Qb(1,"t-auto-cell",41),r.Ub()),2&e){var n,i=r.lc(2).model,o="../../relations/"+(null==(n=r.lc().ws.get("Relation",null==i?null:i.CustodianId))?null:n.DefinitionId);r.sc("link",o)("itemId",null==i?null:i.CustodianId),r.Bb(1),r.sc("entity",i)}}function Lq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",39),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CustodianId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CustodianId)("definitionIds",o.definitionIdsCustodian(i))}}function Fq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.Rc(1,Oq,2,3,"t-view-link",32),r.Rc(2,Lq,1,2,"t-relations-picker",37),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",c.labelCustodian(i))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CustodianId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Aq(e,t){if(1&e&&(r.Vb(0,"t-restricted",43),r.Vb(1,"t-view-link",44),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Currency),r.Bb(1),r.sc("itemId",null==n?null:n.CurrencyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Currency",null==n?null:n.CurrencyId,"Name")," ")}}function Pq(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model,i=r.lc();r.Bb(1),r.Uc(i.ws.getMultilingualValue("Currency",i.readonlyValueCurrencyId(n),"Name"))}}function Nq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.CurrencyId=e})),r.Ub()}if(2&e){var i=r.lc(3).model;r.sc("ngModel",i.CurrencyId)}}function jq(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Pq,2,1,"span",11),r.Rc(2,Nq,1,1,"t-currencies-picker",45),r.Sb()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(1),r.sc("ngIf",i.readonlyCurrencyId(n)),r.Bb(1),r.sc("ngIf",!i.readonlyCurrencyId(n))}}function Wq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Aq,3,3,"t-restricted",42),r.Rc(3,jq,3,2,"ng-container",11),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Account_Currency"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CurrencyId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function qq(e,t){if(1&e&&(r.Vb(0,"t-view-link",48),r.Qb(1,"t-auto-cell",49),r.Ub()),2&e){var n=r.lc(2).model;r.sc("itemId",null==n?null:n.CenterId),r.Bb(1),r.sc("entity",n)}}function Qq(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model,i=r.lc();r.Bb(1),r.Uc(i.ws.getMultilingualValue("Center",i.readonlyValueCenterId(n),"Name"))}}function Hq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",51),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.CenterId=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.CenterId)("filter",o.filterCenter(i))}}function $q(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Qq,2,1,"span",11),r.Rc(2,Hq,1,2,"t-centers-picker",50),r.Sb()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(1),r.sc("ngIf",i.readonlyCenterId(n)),r.Bb(1),r.sc("ngIf",!i.readonlyCenterId(n))}}function Gq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,qq,2,2,"t-view-link",47),r.Rc(3,$q,3,2,"ng-container",11),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Account_Center"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CenterId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function zq(e,t){if(1&e&&(r.Vb(0,"t-view-link",53),r.Qb(1,"t-auto-cell",54),r.Ub()),2&e){var n=r.lc(2).model;r.sc("itemId",null==n?null:n.EntryTypeId),r.Bb(1),r.sc("entity",n)}}function Jq(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",51),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.EntryTypeId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.EntryTypeId)("filter",o.filterEntryType(i))}}function Kq(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,zq,2,2,"t-view-link",52),r.Rc(3,Jq,1,2,"t-entry-types-picker",50),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Account_EntryType"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.EntryTypeId),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Yq(e,t){if(1&e&&(r.Vb(0,"t-form-group",55),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",56),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(2),r.sc("entity",n)}}function Xq(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,eq,2,1,"h2",6),r.Rc(2,nq,2,7,"t-text-editor",7),r.Rc(3,iq,2,7,"t-text-editor",8),r.Rc(4,rq,2,7,"t-text-editor",8),r.Ub(),r.Rc(5,aq,4,6,"t-form-group",9),r.Rc(6,uq,4,6,"t-form-group",9),r.Rc(7,fq,4,6,"t-form-group",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Rc(10,mq,2,1,"div",11),r.Rc(11,gq,1,3,"t-text-editor",12),r.Ub(),r.Vb(12,"t-form-group",10),r.mc(13,"translate"),r.Rc(14,pq,2,2,"t-view-link",13),r.Rc(15,hq,1,1,"t-account-classifications-picker",14),r.Ub(),r.Vb(16,"t-form-group",10),r.mc(17,"translate"),r.Rc(18,vq,2,2,"t-view-link",15),r.Rc(19,yq,1,3,"t-account-types-picker",16),r.Ub(),r.Rc(20,wq,4,6,"t-form-group",9),r.Rc(21,Vq,3,4,"t-form-group",9),r.Rc(22,Uq,3,4,"t-form-group",9),r.Rc(23,Dq,4,6,"t-form-group",9),r.Rc(24,_q,3,4,"t-form-group",9),r.Rc(25,Fq,3,4,"t-form-group",9),r.Rc(26,Wq,4,6,"t-form-group",9),r.Rc(27,Gq,4,6,"t-form-group",9),r.Rc(28,Kq,4,6,"t-form-group",9),r.Rc(29,Yq,3,4,"t-form-group",17)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,30,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(13,32,"Account_Classification"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.ClassificationId),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(17,34,"Account_Type"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.AccountTypeId),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",o.showResourceDefinitionId(n)),r.Bb(1),r.sc("ngIf",o.showResource(n)),r.Bb(1),r.sc("ngIf",o.showParticipant(n)),r.Bb(1),r.sc("ngIf",o.showCustodyDefinitionId(n)),r.Bb(1),r.sc("ngIf",o.showCustody(n)),r.Bb(1),r.sc("ngIf",o.showCustodian(n)),r.Bb(1),r.sc("ngIf",o.showCurrency(n)),r.Bb(1),r.sc("ngIf",o.showCenter(n)),r.Bb(1),r.sc("ngIf",o.showEntryType(n)),r.Bb(1),r.sc("ngIf",!i)}}function Zq(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function eQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var tQ,nQ=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},iQ=function(e,t){return[e,t]},rQ=((tQ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.accountsApi=o.api.accountsApi(o.notifyDestruct$),o.expand="AccountType.CustodyDefinitions,AccountType.ResourceDefinitions,Classification,\nCurrency,Center,Custody,Resource.Currency,Custody.Currency,Resource.Center,Custody.Center,EntryType,Participant,Custodian",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e},o.onActivate=function(e){e&&e.Id&&o.accountsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.onDeactivate=function(e){e&&e.Id&&o.accountsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.showActivate=function(e){return!!e&&!e.IsActive},o.showDeactivate=function(e){return!!e&&e.IsActive},o.canActivateDeactivateItem=function(e){return o.ws.canDo(o.view,"IsActive",e.Id)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o._choicesCustodyDefinitionIdResult=[],o._choicesResourceDefinitionIdResult=[],o.custodyAdditionalSelect="DefinitionId,Currency.Name,Currency.Name2,Currency.Name3,Currency.E,Center.Name,Center.Name2,Center.Name3",o.accountsApi=o.api.accountsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"showCenter",value:function(e){return!0}},{key:"readonlyCenterId",value:function(e){if(!e)return!0;var t=this.accountType(e);if(!t)return!0;var n=this.ws.get("Resource",e.ResourceId),i=this.ws.get("Custody",e.CustodyId);return t.IsBusinessUnit?!!e.ResourceId&&!!n.CenterId||!!e.CustodyId&&!!i.CenterId:!!e.ResourceId&&!!n.CostCenterId}},{key:"readonlyValueCenterId",value:function(e){if(!e)return null;var t=this.accountType(e);if(!t)return null;if(t.IsBusinessUnit){if(e.ResourceId){var n=this.ws.get("Resource",e.ResourceId);if(n.CenterId)return n.CenterId}if(e.CustodyId){var i=this.ws.get("Custody",e.CustodyId);if(i.CenterId)return i.CenterId}}else if(e.ResourceId){var r=this.ws.get("Resource",e.ResourceId);if(r.CostCenterId)return r.CostCenterId}return null}},{key:"filterCenter",value:function(e){if(!e)return null;var t=this.accountType(e);return t&&t.IsBusinessUnit?"CenterType eq 'BusinessUnit'":null}},{key:"showCurrency",value:function(e){return!0}},{key:"readonlyCurrencyId",value:function(e){if(!e)return!0;var t=this.ws.get("Resource",e.ResourceId),n=this.ws.get("Custody",e.CustodyId);return!!e.ResourceId&&!!t.CurrencyId||!!e.CustodyId&&!!n.CurrencyId}},{key:"readonlyValueCurrencyId",value:function(e){if(!e)return null;if(e.ResourceId){var t=this.ws.get("Resource",e.ResourceId);if(t.CurrencyId)return t.CurrencyId}if(e.CustodyId){var n=this.ws.get("Custody",e.CustodyId);if(n.CurrencyId)return n.CurrencyId}return null}},{key:"formatRelationDefinitionId",value:function(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Relations[e],"TitlePlural"):""}},{key:"choicesCustodyDefinitionId",value:function(e){var t=this.ws,n=t.definitions,i=this.accountType(e);return this._choicesCustodyDefinitionIdAccountType===i&&this._choicesCustodyDefinitionIdDefinitions===n||(this._choicesCustodyDefinitionIdAccountType=i,this._choicesCustodyDefinitionIdDefinitions=n,this._choicesCustodyDefinitionIdResult=i&&i.CustodyDefinitions?i.CustodyDefinitions.filter((function(e){return!!n.Custodies[e.CustodyDefinitionId]})).map((function(e){return{value:e.CustodyDefinitionId,name:function(){return t.getMultilingualValueImmediate(n.Custodies[e.CustodyDefinitionId],"TitleSingular")}}})):[]),this._choicesCustodyDefinitionIdResult}},{key:"showCustodyDefinitionId",value:function(e){return this.choicesCustodyDefinitionId(e).length>0}},{key:"onCustodyDefinitionChange",value:function(e,t){if(e){var n=this.ws.get("Custody",t.CustodyId);n&&n.DefinitionId!==e&&delete t.CustodyId}}},{key:"formatCustodyDefinitionId",value:function(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Custodies[e],"TitlePlural"):""}},{key:"showCustody",value:function(e){return this.showCustodyDefinitionId(e)&&!!e.CustodyDefinitionId}},{key:"labelCustody",value:function(e){var t="";if(e&&e.CustodyDefinitionId){var n=this.ws.definitions.Custodies[e.CustodyDefinitionId];n&&(t=" (".concat(this.ws.getMultilingualValueImmediate(n,"TitleSingular"),")"))}return this.translate.instant("Account_Custody")+t}},{key:"definitionIdsCustody",value:function(e){return e&&e.CustodyDefinitionId?[e.CustodyDefinitionId]:[]}},{key:"showCustodian",value:function(e){var t=this.accountType(e);return!!t&&!!t.CustodianDefinitionId&&!this.showCustodyDefinitionId(e)}},{key:"labelCustodian",value:function(e){var t="",n=this.accountType(e);if(n&&n.CustodianDefinitionId){var i=this.ws.definitions.Relations[n.CustodianDefinitionId];i&&(t=" (".concat(this.ws.getMultilingualValueImmediate(i,"TitleSingular"),")"))}return this.translate.instant("Account_Custodian")+t}},{key:"definitionIdsCustodian",value:function(e){var t=this.accountType(e);return t&&t.CustodianDefinitionId?[t.CustodianDefinitionId]:[]}},{key:"showParticipant",value:function(e){var t=this.accountType(e);return!!t&&!!t.ParticipantDefinitionId&&!this.showCustodyDefinitionId(e)}},{key:"labelParticipant",value:function(e){var t="",n=this.accountType(e);if(n&&n.ParticipantDefinitionId){var i=this.ws.definitions.Relations[n.ParticipantDefinitionId];i&&(t=" (".concat(this.ws.getMultilingualValueImmediate(i,"TitleSingular"),")"))}return this.translate.instant("Account_Participant")+t}},{key:"definitionIdsParticipant",value:function(e){var t=this.accountType(e);return t&&t.ParticipantDefinitionId?[t.ParticipantDefinitionId]:[]}},{key:"choicesResourceDefinitionId",value:function(e){var t=this.ws,n=t.definitions,i=this.accountType(e);return this._choicesResourceDefinitionIdAccountType===i&&this._choicesResourceDefinitionIdDefinitions===n||(this._choicesResourceDefinitionIdAccountType=i,this._choicesResourceDefinitionIdDefinitions=n,this._choicesResourceDefinitionIdResult=i&&i.ResourceDefinitions?i.ResourceDefinitions.filter((function(e){return!!n.Resources[e.ResourceDefinitionId]})).map((function(e){return{value:e.ResourceDefinitionId,name:function(){return t.getMultilingualValueImmediate(n.Resources[e.ResourceDefinitionId],"TitleSingular")}}})):[]),this._choicesResourceDefinitionIdResult}},{key:"showResourceDefinitionId",value:function(e){return this.choicesResourceDefinitionId(e).length>0}},{key:"formatResourceDefinitionId",value:function(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Resources[e],"TitlePlural"):""}},{key:"onResourceDefinitionChange",value:function(e,t){if(e){var n=this.ws.get("Resource",t.ResourceId);n&&n.DefinitionId!==e&&delete t.ResourceId}}},{key:"labelResource",value:function(e){var t="";if(e&&e.ResourceDefinitionId){var n=this.ws.definitions.Resources[e.ResourceDefinitionId];n&&(t=" (".concat(this.ws.getMultilingualValueImmediate(n,"TitleSingular"),")"))}return this.translate.instant("Account_Resource")+t}},{key:"showResource",value:function(e){return this.showResourceDefinitionId(e)&&!!e.ResourceDefinitionId}},{key:"definitionIdsResource",value:function(e){return e&&e.ResourceDefinitionId?[e.ResourceDefinitionId]:[]}},{key:"showEntryType",value:function(e){var t=this.accountType(e);return!!t&&!!t.EntryTypeParentId}},{key:"filterEntryType",value:function(e){var t="IsAssignable eq true",n=this.accountType(e);return n&&n.EntryTypeParentId&&(t+=" and Id descof ".concat(n.EntryTypeParentId)),t}},{key:"accountType",value:function(e){return e?this.ws.get("AccountType",e.AccountTypeId):null}},{key:"filterAccountType",value:function(e){var t=this.ws.get("AccountClassification",e.ClassificationId);return t&&t.AccountTypeParentId?"Id descof ".concat(t.AccountTypeParentId):""}},{key:"view",get:function(){return"accounts"}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"p",get:function(){return Object(TW.a)(this.workspace,this.translate).properties}},{key:"accountTypeAdditionalSelect",get:function(){var e="CustodyDefinitions.CustodyDefinitionId,\n    ResourceDefinitions.ResourceDefinitionId,EntryTypeParentId,CustodianDefinitionId,ParticipantDefinitionId";return"$DocumentDetails"===this.additionalSelect?"$DocumentDetails,"+e:e}},{key:"resourceAdditionalSelect",get:function(){var e="DefinitionId,Currency.Name,Currency.Name2,Currency.Name3,Center.Name,Center.Name2,Center.Name3,\nCostCenter.Name,CostCenter.Name2,CostCenter.Name3";return"$DocumentDetails"===this.additionalSelect?"$DocumentDetails,"+e:e}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||tQ)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},tQ.\u0275cmp=r.Jb({type:tQ,selectors:[["t-accounts-details"]],features:[r.yb],decls:10,vars:26,consts:[["collection","Account",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["link","../../account-classifications",3,"itemId",4,"ngIf"],["additionalSelect","AccountTypeParentId",3,"ngModel","ngModelChange",4,"ngIf"],["link","../../account-types",3,"itemId",4,"ngIf"],["required","",3,"ngModel","additionalSelect","filter","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],["link","../../account-classifications",3,"itemId"],["collection","Account","path","Classification",3,"entity"],["additionalSelect","AccountTypeParentId",3,"ngModel","ngModelChange"],["link","../../account-types",3,"itemId"],["collection","Account","path","AccountType",3,"entity"],["required","",3,"ngModel","additionalSelect","filter","ngModelChange"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],[3,"link","itemId",4,"ngIf"],[3,"ngModel","definitionIds","additionalSelect","ngModelChange",4,"ngIf"],[3,"link","itemId"],["collection","Account","path","Resource",3,"entity"],[3,"ngModel","definitionIds","additionalSelect","ngModelChange"],[3,"ngModel","definitionIds","ngModelChange",4,"ngIf"],["collection","Account","path","Participant",3,"entity"],[3,"ngModel","definitionIds","ngModelChange"],["collection","Account","path","Custody",3,"entity"],["collection","Account","path","Custodian",3,"entity"],[3,"metadata",4,"ngIf"],[3,"metadata"],["link","../../currencies",3,"itemId"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],["link","../../centers",3,"itemId",4,"ngIf"],["link","../../centers",3,"itemId"],["collection","Account","path","Center",3,"entity"],[3,"ngModel","filter","ngModelChange",4,"ngIf"],[3,"ngModel","filter","ngModelChange"],["link","../../entry-types",3,"itemId",4,"ngIf"],["link","../../entry-types",3,"itemId"],["collection","Account","path","EntryType",3,"entity"],[1,"t-form-group",3,"label"],["collection","Account","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,ZW,2,1,"ng-template",null,1,r.Sc),r.Rc(4,Xq,30,36,"ng-template",null,2,r.Sc),r.Rc(6,Zq,2,3,"ng-template",null,3,r.Sc),r.Rc(8,eQ,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,9,"Accounts"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.xc(23,iQ,r.Ac(11,nQ,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(17,nQ,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,we.a,ie.u,ie.k,ie.n,Ca,Ie.a,OM,NM,En.a,RW,lf,YW,Tn.a,Zu,rd,PV],pipes:[G.d],encapsulation:2}),tQ);function oQ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-accounts-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function cQ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-accounts-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var aQ,lQ=((aQ=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return sQ(e||aQ)},aQ.\u0275cmp=r.Jb({type:aQ,selectors:[["t-accounts-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:aQ}]),r.yb],decls:5,vars:6,consts:[["collection","Account",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,oQ,2,3,"ng-template",null,1,r.Sc),r.Rc(3,cQ,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,rQ,VW],encapsulation:2}),aQ),sQ=r.Xb(lQ);function uQ(e,t){if(1&e&&(r.Vb(0,"div",17),r.Vb(1,"span",18),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",19),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("Center",n,"Name")),r.Bb(3),r.Uc(i.c[n].Code)}}function dQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center"),"\n")}function bQ(e,t){if(1&e&&(r.Vb(0,"span",20),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.ws.getMultilingualValue("Center",n,"Name"))}}function fQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function mQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function gQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}function pQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_Abstract")," ")}function hQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_BusinessUnit")," ")}function vQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_CostOfSales")," ")}function yQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_SellingGeneralAndAdministration")," ")}function IQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_SharedExpenseControl")," ")}function CQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_InvestmentPropertyUnderConstructionOrDevelopmentExpendituresControl")," ")}function wQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_CurrentInventoriesInTransitExpendituresControl")," ")}function kQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_ConstructionInProgressExpendituresControl")," ")}function MQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_WorkInProgressExpendituresControl")," ")}function VQ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Center_CenterType_OtherPL")," ")}var TQ,EQ=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},UQ=function(e,t){return[e,t]},xQ=function(e){return{template:e,expression:"CreatedById eq me"}},RQ=function(e){return[e]},DQ=function(e){return{template:e,expression:"CenterType eq 'Abstract'"}},BQ=function(e){return{template:e,expression:"CenterType eq 'BusinessUnit'"}},SQ=function(e){return{template:e,expression:"CenterType eq 'CostOfSales'"}},_Q=function(e){return{template:e,expression:"CenterType eq 'SellingGeneralAndAdministration'"}},OQ=function(e){return{template:e,expression:"CenterType eq 'SharedExpenseControl'"}},LQ=function(e){return{template:e,expression:"CenterType eq 'InvestmentPropertyUnderConstructionOrDevelopmentExpendituresControl'"}},FQ=function(e){return{template:e,expression:"CenterType eq 'CurrentInventoriesInTransitExpendituresControl'"}},AQ=function(e){return{template:e,expression:"CenterType eq 'ConstructionInProgressExpendituresControl'"}},PQ=function(e){return{template:e,expression:"CenterType eq 'WorkInProgressExpendituresControl'"}},NQ=function(e){return{template:e,expression:"CenterType eq 'OtherPL'"}},jQ=function(e,t,n,i,r,o,c,a,l,s){return[e,t,n,i,r,o,c,a,l,s]},WQ=function(e,t){return{CreatedBy:e,CenterType:t}},qQ=((TQ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.centersApi=o.api.centersApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.centersApi.activate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.centersApi.deactivate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo("centers","IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.centersApi=o.api.centersApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.Center}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||TQ)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},TQ.\u0275cmp=r.Jb({type:TQ,selectors:[["t-centers-master"]],features:[r.yb],decls:34,vars:64,consts:[["collection","Center","selectDefault","Code,CenterType","selectForTiles","Code,CenterType",3,"mode","showCreateButton","filterDefault","enableTreeView","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["abstract",""],["businessunit",""],["cos",""],["selling",""],["shared",""],["rentals",""],["transit",""],["construction",""],["wip",""],["opl",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,uQ,6,2,"ng-template",null,1,r.Sc),r.Rc(4,dQ,2,3,"ng-template",null,2,r.Sc),r.Rc(6,bQ,2,1,"ng-template",null,3,r.Sc),r.Rc(8,fQ,2,3,"ng-template",null,4,r.Sc),r.Rc(10,mQ,2,3,"ng-template",null,5,r.Sc),r.Rc(12,gQ,2,3,"ng-template",null,6,r.Sc),r.Rc(14,pQ,2,3,"ng-template",null,7,r.Sc),r.Rc(16,hQ,2,3,"ng-template",null,8,r.Sc),r.Rc(18,vQ,2,3,"ng-template",null,9,r.Sc),r.Rc(20,yQ,2,3,"ng-template",null,10,r.Sc),r.Rc(22,IQ,2,3,"ng-template",null,11,r.Sc),r.Rc(24,CQ,2,3,"ng-template",null,12,r.Sc),r.Rc(26,wQ,2,3,"ng-template",null,13,r.Sc),r.Rc(28,kQ,2,3,"ng-template",null,14,r.Sc),r.Rc(30,MQ,2,3,"ng-template",null,15,r.Sc),r.Rc(32,VQ,2,3,"ng-template",null,16,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21),f=r.Fc(23),m=r.Fc(25),g=r.Fc(27),p=r.Fc(29),h=r.Fc(31),v=r.Fc(33);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("enableTreeView",!0)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,11,"Centers"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(23,UQ,r.zc(13,EQ,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(18,EQ,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.xc(61,WQ,r.wc(28,RQ,r.wc(26,xQ,l)),r.Dc(50,jQ,[r.wc(30,DQ,s),r.wc(32,BQ,u),r.wc(34,SQ,d),r.wc(36,_Q,b),r.wc(38,OQ,f),r.wc(40,LQ,m),r.wc(42,FQ,g),r.wc(44,AQ,p),r.wc(46,PQ,h),r.wc(48,NQ,v)])))}},directives:[Ot.a],pipes:[G.d],encapsulation:2}),TQ),QQ=n("X/EE");function HQ(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function $Q(e,t){if(1&e&&(r.Vb(0,"h2",19),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var GQ=function(){return{updateOn:"blur"}};function zQ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,GQ))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function JQ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,GQ))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function KQ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",21),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,GQ))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function YQ(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function XQ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",23),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,GQ))}}function ZQ(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,YQ,2,1,"div",11),r.Rc(3,XQ,1,3,"t-text-editor",22),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function eH(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function tH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,GQ))}}function nH(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,eH,2,1,"div",11),r.Rc(3,tH,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function iH(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function rH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,GQ))}}function oH(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,iH,2,1,"div",11),r.Rc(3,rH,1,3,"t-text-editor",12),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function cH(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Code)}}function aH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Code)("ngModelOptions",r.vc(2,GQ))}}function lH(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"t-restricted",14),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.CenterType),r.Bb(1),r.Vc(" ",r.nc(3,2,i.centerTypeLookup(null==n?null:n.CenterType))," ")}}function sH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.CenterType=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.CenterType)("choices",o.centerTypeChoices)}}function uH(e,t){if(1&e&&(r.Vb(0,"t-view-link",26),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("itemId",null==n?null:n.ManagerId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("Agent",null==n?null:n.ManagerId,"Name"))}}function dH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-agents-picker",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ManagerId=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.ManagerId)}}function bH(e,t){if(1&e&&(r.Vb(0,"t-view-link",28),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("itemId",null==n?null:n.ParentId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("Center",null==n?null:n.ParentId,"Name"))}}function fH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ParentId=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.ParentId)}}function mH(e,t){if(1&e&&(r.Vb(0,"t-form-group",29),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsLeaf")),r.Bb(3),r.Uc(r.nc(4,4,null!=n&&n.IsLeaf?"Yes":"No"))}}function gH(e,t){if(1&e&&(r.Vb(0,"t-form-group",29),r.mc(1,"translate"),r.Qb(2,"t-auto-cell",30),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(2),r.sc("entity",n)}}function pH(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,$Q,2,1,"h2",6),r.Rc(2,zQ,2,7,"t-text-editor",7),r.Rc(3,JQ,2,7,"t-text-editor",8),r.Rc(4,KQ,2,7,"t-text-editor",8),r.Ub(),r.Rc(5,ZQ,4,6,"t-form-group",9),r.Rc(6,nH,4,6,"t-form-group",9),r.Rc(7,oH,4,6,"t-form-group",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Rc(10,cH,2,1,"div",11),r.Rc(11,aH,1,3,"t-text-editor",12),r.Ub(),r.Vb(12,"t-form-group",10),r.mc(13,"translate"),r.Rc(14,lH,4,4,"div",11),r.Rc(15,sH,1,2,"t-selector",13),r.Ub(),r.Vb(16,"t-form-group",10),r.mc(17,"translate"),r.Vb(18,"t-restricted",14),r.Rc(19,uH,2,2,"t-view-link",15),r.Ub(),r.Rc(20,dH,1,1,"t-agents-picker",16),r.Ub(),r.Vb(21,"t-form-group",10),r.mc(22,"translate"),r.Rc(23,bH,2,2,"t-view-link",17),r.Rc(24,fH,1,1,"t-centers-picker",16),r.Ub(),r.Rc(25,mH,5,6,"t-form-group",18),r.Rc(26,gH,3,4,"t-form-group",18)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,27,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(13,29,"Center_CenterType"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.CenterType),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(17,31,"Center_Manager"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.ManagerId),r.Bb(2),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ManagerId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(22,33,"TreeParent"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.ParentId),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",!i)}}function hH(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function vH(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var yH,IH=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},CH=function(e,t){return[e,t]},wH=((yH=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.centersApi=o.api.centersApi(o.notifyDestruct$),o.expand="Parent,Manager",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e},o.onActivate=function(e){e&&e.Id&&o.centersApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.onDeactivate=function(e){e&&e.Id&&o.centersApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.showActivate=function(e){return!!e&&!e.IsActive},o.showDeactivate=function(e){return!!e&&e.IsActive},o.canActivateDeactivateItem=function(e){return o.ws.canDo("centers","IsActive",e.Id)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.centersApi=o.api.centersApi(o.notifyDestruct$),o}return _createClass(n,[{key:"centerTypeLookup",value:function(e){return Object(QQ.a)(this.workspace,this.translate).properties.CenterType.format(e)}},{key:"centerTypeChoices",get:function(){var e=Object(QQ.a)(this.workspace,this.translate).properties.CenterType;return Object(Si.c)(e)}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||yH)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},yH.\u0275cmp=r.Jb({type:yH,selectors:[["t-centers-details"]],features:[r.yb],decls:10,vars:26,consts:[["collection","Center",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../agents/",3,"itemId",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../centers",3,"itemId",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","choices","ngModelChange"],["link","../../agents/",3,"itemId"],[3,"ngModel","ngModelChange"],["link","../../centers",3,"itemId"],[1,"t-form-group",3,"label"],["collection","Center","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,HQ,2,1,"ng-template",null,1,r.Sc),r.Rc(4,pH,27,35,"ng-template",null,2,r.Sc),r.Rc(6,hH,2,3,"ng-template",null,3,r.Sc),r.Rc(8,vH,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,9,"Centers"))("detailsCrumb",n)("documentTemplate",i)("actions",r.xc(23,CH,r.Ac(11,IH,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(17,IH,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,Tn.a,we.a,ie.u,ie.k,ie.n,En.a,Ca,tf,rd,Ie.a],pipes:[G.d],encapsulation:2}),yH);function kH(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",9),r.Vb(4,"span",8),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("EntryType",n,"Name")),r.Bb(3),r.Uc(i.c[n].Code)}}function MH(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"EntryType"),"\n")}function VH(e,t){if(1&e&&(r.Vb(0,"span",10),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.ws.getMultilingualValue("EntryType",n,"Name"))}}function TH(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function EH(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function UH(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var xH,RH=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},DH=function(e,t){return[e,t]},BH=function(e){return{template:e,expression:"CreatedById eq me"}},SH=function(e){return[e]},_H=function(e){return{CreatedBy:e}},OH=((xH=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.entryTypesApi=o.api.entryTypesApi(o.notifyDestruct$),o.expand="",o.onActivate=function(e){return o.entryTypesApi.activate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.onDeactivate=function(e){return o.entryTypesApi.deactivate(e,{returnEntities:!0,expand:o.expand}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.canActivateDeactivateItem=function(e){return o.ws.canDo(o.view,"IsActive",null)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.entryTypesApi=o.api.entryTypesApi(o.notifyDestruct$),o}return _createClass(n,[{key:"view",get:function(){return"entry-types"}},{key:"c",get:function(){return this.ws.EntryType}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||xH)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},xH.\u0275cmp=r.Jb({type:xH,selectors:[["t-entry-types-master"]],features:[r.yb],decls:14,vars:32,consts:[["collection","EntryType","selectDefault","IsAssignable","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,kH,6,2,"ng-template",null,1,r.Sc),r.Rc(4,MH,2,3,"ng-template",null,2,r.Sc),r.Rc(6,VH,2,1,"ng-template",null,3,r.Sc),r.Rc(8,TH,2,3,"ng-template",null,4,r.Sc),r.Rc(10,EH,2,3,"ng-template",null,5,r.Sc),r.Rc(12,UH,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",r.nc(1,11,"EntryTypes"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.xc(23,DH,r.zc(13,RH,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.zc(18,RH,a,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",r.wc(30,_H,r.wc(28,SH,r.wc(26,BH,l))))}},directives:[Ot.a],pipes:[G.d],encapsulation:2}),xH),LH=n("wfSO");function FH(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function AH(e,t){if(1&e&&(r.Vb(0,"h2",24),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}var PH=function(){return{updateOn:"blur"}};function NH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",25),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name)("ngModelOptions",r.vc(6,PH))("placeholder",r.nc(1,4,"Name")+o.ws.primaryPostfix+"...")}}function jH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",26),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name2=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name2)("ngModelOptions",r.vc(6,PH))("placeholder",r.nc(1,4,"Name")+o.ws.secondaryPostfix+"...")}}function WH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",26),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Name3=e})),r.mc(1,"translate"),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("focusIf",!i.Id)("ngModel",i.Name3)("ngModelOptions",r.vc(6,PH))("placeholder",r.nc(1,4,"Name")+o.ws.ternaryPostfix+"...")}}function qH(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name)}}function QH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name)("ngModelOptions",r.vc(2,PH))}}function HH(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,qH,2,1,"div",13),r.Rc(3,QH,1,3,"t-text-editor",14),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.primaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function $H(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name2)}}function GH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name2)("ngModelOptions",r.vc(2,PH))}}function zH(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,$H,2,1,"div",13),r.Rc(3,GH,1,3,"t-text-editor",23),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function JH(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Name3)}}function KH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Name3)("ngModelOptions",r.vc(2,PH))}}function YH(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,JH,2,1,"div",13),r.Rc(3,KH,1,3,"t-text-editor",23),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Name")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Name3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function XH(e,t){if(1&e&&(r.Vb(0,"span",29),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.sc("title",null==n?null:n.Code),r.Bb(1),r.Uc(null==n?null:n.Code)}}function ZH(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("disabled",i.IsSystem)("ngModel",i.Code)("ngModelOptions",r.vc(3,PH))}}function e$(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Concept)}}function t$(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",27),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Concept=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Concept)("ngModelOptions",r.vc(2,PH))}}function n$(e,t){if(1&e&&(r.Vb(0,"t-view-link",31),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("itemId",null==n?null:n.ParentId),r.Bb(1),r.Uc(i.ws.getMultilingualValue("EntryType",null==n?null:n.ParentId,"Name"))}}function i$(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ParentId=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("disabled",i.IsSystem)("ngModel",i.ParentId)}}function r$(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(r.nc(2,1,null!=n&&n.IsAssignable?"Yes":"No"))}}function o$(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",33),r.Vb(1,"input",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.IsAssignable=e})),r.Ub(),r.Vb(2,"label",35),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc().model;r.Bb(1),r.sc("ngModel",i.IsAssignable)}}function c$(e,t){if(1&e&&(r.Vb(0,"t-form-group",18),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsActive")),r.Bb(3),r.Uc(r.nc(4,4,n?n.IsActive?"Active":"Inactive":""))}}function a$(e,t){if(1&e&&(r.Vb(0,"t-form-group",18),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"IsSystem")),r.Bb(3),r.Uc(r.nc(4,4,n?n.IsSystem?"Yes":"No":""))}}function l$(e,t){if(1&e&&(r.Vb(0,"div",36),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(null==n?null:n.Description)}}function s$(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Description=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.Description)("ngModelOptions",r.vc(2,PH))}}function u$(e,t){if(1&e&&(r.Vb(0,"div",36),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Description2)}}function d$(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description2=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description2)("ngModelOptions",r.vc(2,PH))}}function b$(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,u$,2,1,"div",22),r.Rc(3,d$,1,3,"t-multiline-editor",23),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.secondaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description2),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function f$(e,t){if(1&e&&(r.Vb(0,"div",36),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Description3)}}function m$(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-multiline-editor",28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description3=e})),r.Ub()}if(2&e){var i=r.lc(2).model;r.sc("ngModel",i.Description3)("ngModelOptions",r.vc(2,PH))}}function g$(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,f$,2,1,"div",22),r.Rc(3,m$,1,3,"t-multiline-editor",23),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.lc();r.sc("label",r.nc(1,4,"Description")+c.ws.ternaryPostfix)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Description3),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function p$(e,t){if(1&e&&(r.Vb(0,"t-form-group",5),r.Rc(1,AH,2,1,"h2",6),r.Rc(2,NH,2,7,"t-text-editor",7),r.Rc(3,jH,2,7,"t-text-editor",8),r.Rc(4,WH,2,7,"t-text-editor",8),r.Ub(),r.Rc(5,HH,4,6,"t-form-group",9),r.Rc(6,zH,4,6,"t-form-group",9),r.Rc(7,YH,4,6,"t-form-group",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Rc(10,XH,2,2,"span",11),r.Rc(11,ZH,1,4,"t-text-editor",12),r.Ub(),r.Vb(12,"t-form-group",10),r.mc(13,"translate"),r.Rc(14,e$,2,1,"span",13),r.Rc(15,t$,1,3,"t-text-editor",14),r.Ub(),r.Vb(16,"t-form-group",10),r.mc(17,"translate"),r.Vb(18,"t-restricted",15),r.Rc(19,n$,2,2,"t-view-link",16),r.Ub(),r.Rc(20,i$,1,2,"t-entry-types-picker",17),r.Ub(),r.Vb(21,"t-form-group",18),r.mc(22,"translate"),r.Rc(23,r$,3,3,"div",13),r.Rc(24,o$,4,1,"div",19),r.Ub(),r.Rc(25,c$,5,6,"t-form-group",20),r.Rc(26,a$,5,6,"t-form-group",20),r.Qb(27,"div",21),r.Vb(28,"t-form-group",10),r.mc(29,"translate"),r.Rc(30,l$,2,1,"div",22),r.Rc(31,s$,1,3,"t-multiline-editor",23),r.Ub(),r.Rc(32,b$,4,6,"t-form-group",9),r.Rc(33,g$,4,6,"t-form-group",9)),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("serverErrors",o.getMultilingualValue(null==n?null:n.serverErrors,"Name",o.ws)),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i&&o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isSecondaryLanguage),r.Bb(1),r.sc("ngIf",i&&o.ws.isTernaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!o.ws.isSecondaryLanguage&&o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!o.ws.isTernaryLanguage&&o.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(9,32,"Code"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Code),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(13,34,"AccountType_Concept"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Concept),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(17,36,"TreeParent"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.ParentId),r.Bb(2),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Parent),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(22,38,"IsAssignable")),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",!i),r.Bb(2),r.sc("label",r.nc(29,40,"Description")+o.ws.primaryPostfix)("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Description),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("ngIf",o.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",o.ws.settings.TernaryLanguageId)}}function h$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function v$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}var y$,I$=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},C$=function(e,t){return[e,t]},w$=((y$=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.entryTypesApi=o.api.entryTypesApi(o.notifyDestruct$),o.expand="Parent",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e.IsAssignable=!0,e},o.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.IsSystem=!1,t}return console.error("Cloning a non existing item"),null},o.onActivate=function(e){e&&e.Id&&o.entryTypesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.onDeactivate=function(e){e&&e.Id&&o.entryTypesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)}))).subscribe({error:o.details.handleActionError})},o.showActivate=function(e){return!!e&&!e.IsActive},o.showDeactivate=function(e){return!!e&&e.IsActive},o.canActivateDeactivateItem=function(e){return o.ws.canDo(o.view,"IsActive",e.Id)},o.activateDeactivateTooltip=function(e){return o.canActivateDeactivateItem(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.entryTypesApi=o.api.entryTypesApi(o.notifyDestruct$),o}return _createClass(n,[{key:"view",get:function(){return"entry-types"}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"masterCrumb",get:function(){var e=Object(LH.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||y$)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},y$.\u0275cmp=r.Jb({type:y$,selectors:[["t-entry-types-details"]],features:[r.yb],decls:9,vars:25,consts:[["collection","EntryType",3,"idString","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[3,"title",4,"ngIf"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../entry-types",3,"itemId",4,"ngIf"],[3,"disabled","ngModel","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"w-100"],["class","t-multiline",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"title"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["link","../../entry-types",3,"itemId"],[3,"disabled","ngModel","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isAssignable",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isAssignable",1,"custom-control-label","t-pointer"],[1,"t-multiline"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.Rc(1,FH,2,1,"ng-template",null,1,r.Sc),r.Rc(3,p$,34,42,"ng-template",null,2,r.Sc),r.Rc(5,h$,2,3,"ng-template",null,3,r.Sc),r.Rc(7,v$,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4),o=r.Fc(6),c=r.Fc(8);r.sc("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",n)("documentTemplate",i)("actions",r.xc(22,C$,r.Ac(10,I$,o,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),r.Ac(16,I$,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[q.a,Ce.a,x.u,Tn.a,we.a,ie.u,ie.k,ie.n,Ca,PV,ie.a,df],pipes:[G.d],encapsulation:2}),y$),k$=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},M$=function(e,t,n,i){return[e,t,n,i]},V$=function(e){return{template:e,expression:"CreatedById eq me"}},T$=function(e){return{template:e,expression:"AssigneeId eq me"}},E$=function(e,t){return[e,t]},U$=function(e){return{template:e,expression:"State eq 0"}},x$=function(e){return{template:e,expression:"State eq 1"}},R$=function(e){return{template:e,expression:"State eq -1"}},D$=function(e,t,n){return[e,t,n]},B$=function(e,t){return{CreatedBy:e,State:t}};function S$(e,t){if(1&e&&r.Qb(0,"t-master",16),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(8),c=r.Fc(6),a=r.Fc(24),l=r.Fc(28),s=r.Fc(26),u=r.Fc(30),d=r.Fc(14),b=r.Fc(16),f=r.Fc(18),m=r.Fc(22),g=r.Fc(20);r.sc("definitionId",n.definitionId)("mode",n.mode)("additionalSelect",n.additionalSelect)("showCreateButton",n.showCreate)("filterDefault",n.filter)("masterCrumb",n.masterCrumb)("tileTemplate",i)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",c)("selectDefault",n.selectDefault)("multiselectActions",r.zc(36,M$,r.Ac(12,k$,a,n.onClose,n.showClose,n.hasStatePermission,n.stateTooltip),r.Ac(18,k$,l,n.onCancel,n.showCancel,n.hasStatePermission,n.stateTooltip),r.Ac(24,k$,s,n.onOpen,n.showOpen,n.hasStatePermission,n.stateTooltip),r.Ac(30,k$,u,n.onUncancel,n.showUncancel,n.hasStatePermission,n.stateTooltip)))("filterDefinition",r.xc(58,B$,r.xc(45,E$,r.wc(41,V$,d),r.wc(43,T$,b)),r.yc(54,D$,r.wc(48,U$,f),r.wc(50,x$,m),r.wc(52,R$,g))))}}function _$(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",17),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function O$(e,t){if(1&e&&r.Qb(0,"t-auto-cell",25),2&e){var n=r.lc().id,i=r.lc();r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function L$(e,t){if(1&e&&r.Qb(0,"t-auto-cell",26),2&e){var n=r.lc().id,i=r.lc();r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function F$(e,t){if(1&e&&(r.Vb(0,"div",18),r.Qb(1,"t-auto-cell",19),r.Rc(2,O$,1,2,"t-auto-cell",20),r.Ub(),r.Vb(3,"div",21),r.Vb(4,"div",22),r.Rc(5,L$,1,2,"t-auto-cell",23),r.Ub(),r.Qb(6,"t-auto-cell",24),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("definitionId",i.definitionId)("entity",i.c[n]),r.Bb(1),r.sc("ngIf",i.showDocumentPostingDate),r.Bb(3),r.sc("ngIf",i.showDocumentMemo),r.Bb(1),r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function A$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Document_SerialNumber"),"\n")}function P$(e,t){if(1&e&&(r.Vb(0,"span",27),r.Qb(1,"t-auto-cell",28),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("definitionId",i.definitionId)("entity",i.c[n])}}function N$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function j$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function W$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}function q$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"AssignedToMe")," ")}function Q$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Document_State_0")," ")}function H$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Document_State_minus_1")," ")}function $$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Document_State_1")," ")}function G$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Close")," ")}function z$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Open")," ")}function J$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Cancel")," ")}function K$(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Uncancel")," ")}var Y$,X$,Z$,eG=((X$=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c){var a;return _classCallCheck(this,n),(a=t.call(this)).workspace=e,a.api=i,a.router=r,a.route=o,a.translate=c,a.documentsApi=a.api.documentsApi(null,a.notifyDestruct$),a.expand="",a.onClose=function(e){return a.documentsApi.close(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.onCancel=function(e){return a.documentsApi.cancel(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.onOpen=function(e){return a.documentsApi.open(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.onUncancel=function(e){return a.documentsApi.uncancel(e,{returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,a.workspace)})))},a.showClose=function(e){return e.some((function(e){var t=a.ws.get("Document",e);return!!t&&0===t.State}))},a.showCancel=function(e){return e.some((function(e){var t=a.ws.get("Document",e);return!!t&&0===t.State}))},a.showOpen=function(e){return e.some((function(e){var t=a.ws.get("Document",e);return!!t&&1===t.State}))},a.showUncancel=function(e){return e.some((function(e){var t=a.ws.get("Document",e);return!!t&&-1===t.State}))},a.hasStatePermission=function(e){return a.ws.canDo(a.view,"State",null)},a.stateTooltip=function(e){return a.hasStatePermission(e)?"":a.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){e.isScreenMode&&(e.definitionId=+t.get("definitionId"))}))}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.documentsApi=this.api.documentsApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"view",get:function(){return"documents/".concat(this.definitionId)}},{key:"c",get:function(){return this.ws.Document}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"definition",get:function(){return this.definitionId?this.ws.definitions.Documents[this.definitionId]:null}},{key:"found",get:function(){return!this.definitionId||!!this.definition}},{key:"masterCrumb",get:function(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Documents")}},{key:"selectDefault",get:function(){var e=this.definition;if(this._selectDefaultDefinition!==e){this._selectDefaultDefinition=e;var t="State,Assignee,AssignedAt";e&&e.PostingDateVisibility&&(t="PostingDate,"+t),e&&e.MemoVisibility&&(t+=",Memo"),this._selectDefaultResult=t}return this._selectDefaultResult}},{key:"showDocumentPostingDate",get:function(){var e=this.definition;return!e||!!e.PostingDateVisibility}},{key:"showDocumentMemo",get:function(){var e=this.definition;return!e||!!e.MemoVisibility}}]),n}(_t.a)).\u0275fac=function(e){return new(e||X$)(r.Pb(S.m),r.Pb(Y.a),r.Pb(i.e),r.Pb(i.a),r.Pb(G.e))},X$.\u0275cmp=r.Jb({type:X$,selectors:[["t-documents-master"]],inputs:{definitionId:"definitionId"},features:[r.yb],decls:31,vars:2,consts:[["collection","Document","selectForTiles","PostingDate,State,Memo",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","selectDefault","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["assignedToMe",""],["state_0",""],["state_minus_1",""],["state_1",""],["close",""],["open",""],["cancel",""],["uncancel",""],["collection","Document","selectForTiles","PostingDate,State,Memo",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","selectDefault","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex","justify-content-between"],["collection","Document","path","",3,"definitionId","entity"],["collection","Document","path","PostingDate",3,"definitionId","entity",4,"ngIf"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","Document","path","Memo",3,"definitionId","entity",4,"ngIf"],["collection","Document","path","State",3,"definitionId","entity"],["collection","Document","path","PostingDate",3,"definitionId","entity"],["collection","Document","path","Memo",3,"definitionId","entity"],[1,"text-truncate"],["collection","Document",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(r.Rc(0,S$,1,61,"t-master",0),r.Rc(1,_$,1,1,"ng-template",null,1,r.Sc),r.Rc(3,F$,7,6,"ng-template",null,2,r.Sc),r.Rc(5,A$,2,3,"ng-template",null,3,r.Sc),r.Rc(7,P$,2,2,"ng-template",null,4,r.Sc),r.Rc(9,N$,2,3,"ng-template",null,5,r.Sc),r.Rc(11,j$,2,3,"ng-template",null,6,r.Sc),r.Rc(13,W$,2,3,"ng-template",null,7,r.Sc),r.Rc(15,q$,2,3,"ng-template",null,8,r.Sc),r.Rc(17,Q$,2,3,"ng-template",null,9,r.Sc),r.Rc(19,H$,2,3,"ng-template",null,10,r.Sc),r.Rc(21,$$,2,3,"ng-template",null,11,r.Sc),r.Rc(23,G$,2,3,"ng-template",null,12,r.Sc),r.Rc(25,z$,2,3,"ng-template",null,13,r.Sc),r.Rc(27,J$,2,3,"ng-template",null,14,r.Sc),r.Rc(29,K$,2,3,"ng-template",null,15,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,Ot.a,dn,Ie.a],pipes:[G.d],encapsulation:2}),X$),tG=((Y$=function(){function e(){_classCallCheck(this,e),this.initialized=!1}return _createClass(e,[{key:"initialize",value:function(){this.initialized||(this.initialized=!0,window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(this.audioContext=new window.AudioContext))}},{key:"beep",value:function(e,t,n){if(this.initialize(),this.audioContext){var i=this.audioContext.createOscillator(),r=this.audioContext.createGain();i.connect(r),i.frequency.value=t,i.type="square",r.connect(this.audioContext.destination),r.gain.value=.01*e,i.start(this.audioContext.currentTime),i.stop(this.audioContext.currentTime+.001*n)}}}]),e}()).\u0275fac=function(e){return new(e||Y$)},Y$.\u0275prov=r.Lb({token:Y$,factory:Y$.\u0275fac,providedIn:"root"}),Y$),nG=["input"],iG=((Z$=function(){function e(){_classCallCheck(this,e),this.codeWidth=4,this.prefix="",this.w100=!0,this.isDisabled=!1,this.onChange=function(e){},this.onTouched=function(){},this.onValidatorChange=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this.input.nativeElement.value=this.format(e)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){e(t.parse(n))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.isDisabled=e}},{key:"ngOnChanges",value:function(e){e.codeWidth&&!e.codeWidth.isFirstChange()&&(this.input.nativeElement.value=this.format(this.input.nativeElement.value))}},{key:"format",value:function(e){if(null==e||""===e)return"";var t=+e.toString();return Object(zv.a)(t,"",this.codeWidth)}},{key:"parse",value:function(e){if(e&&e.length>this.codeWidth&&(e=void 0),null!=e&&""!==e){var t=+e;return isNaN(t)?void 0:t}}},{key:"onBlur",value:function(e){this.onTouched(),this.input.nativeElement.value=this.format(this.parse(e))}},{key:"zeros",get:function(){return Object(zv.a)(0,"",this.codeWidth)}}]),e}()).\u0275fac=function(e){return new(e||Z$)},Z$.\u0275cmp=r.Jb({type:Z$,selectors:[["t-serial-editor"]],viewQuery:function(e,t){var n;1&e&&r.Oc(nG,!0),2&e&&r.Ec(n=r.ic())&&(t.input=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&r.Gb("w-100",t.w100)},inputs:{codeWidth:"codeWidth",prefix:"prefix"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:Z$}]),r.zb],decls:5,vars:3,consts:[[1,"d-flex","flex-nowrap","text-nowrap","w-100"],[1,"t-prefix"],["type","text",1,"form-control","t-input",3,"placeholder","disabled","input","blur"],["input",""]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"span",1),r.Tc(2),r.Ub(),r.Vb(3,"input",2,3),r.hc("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onBlur(e.target.value)})),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Uc(t.prefix),r.Bb(1),r.sc("placeholder",t.zeros)("disabled",t.isDisabled))},encapsulation:2}),Z$);function rG(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"span",5),r.Tc(2),r.Ub(),r.Tc(3," \xa0\xa0 "),r.Sb()),2&e){var n=r.lc();r.Bb(1),r.Gb("text-danger",n.invalid),r.sc("title",n.label),r.Bb(1),r.Uc(n.label)}}function oG(e,t){1&e&&r.Qb(0,"fa-icon",6)}function cG(e,t){if(1&e&&(r.Vb(0,"p",9),r.Qb(1,"fa-icon",10),r.Tc(2),r.Ub()),2&e){var n=t.$implicit;r.Bb(2),r.Vc(" \xa0",n()," ")}}function aG(e,t){if(1&e&&(r.Vb(0,"div",7),r.Rc(1,cG,3,1,"p",8),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.sc("ngForOf",n.errors)}}var lG,sG=["*"],uG=((lG=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(UI.a)).\u0275fac=function(e){return dG(e||lG)},lG.\u0275cmp=r.Jb({type:lG,selectors:[["t-form-group-dynamic"]],features:[r.yb],ngContentSelectors:sG,decls:7,vars:6,consts:[["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"d-flex","align-items-center","text-nowrap",3,"ngbPopover","placement"],[4,"ngIf"],[1,"d-flex","flex-grow-1","form-group-container","t-dynamic-container"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["errorsPopover",""],[1,"t-vertical-align-middle","font-weight-bold",3,"title"],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"]],template:function(e,t){if(1&e&&(r.rc(),r.Vb(0,"div",0),r.Rc(1,rG,4,4,"ng-container",1),r.Vb(2,"div",2),r.Rc(3,oG,1,0,"fa-icon",3),r.qc(4),r.Ub(),r.Ub(),r.Rc(5,aG,2,1,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(6);r.sc("ngbPopover",t.invalid?n:null)("placement",t.popoverPlacement),r.Bb(1),r.sc("ngIf",t.showLabel),r.Bb(1),r.Gb("is-invalid",t.invalid),r.Bb(1),r.sc("ngIf",t.areServerErrors)}},directives:[X.C,x.u,ne.b,x.t],encapsulation:2}),lG),dG=r.Xb(uG),bG=["confirmModal"],fG=["signatureModal"],mG=["autoGenerateModal"],gG=function(){return[]};function pG(e,t){if(1&e&&r.Qb(0,"t-details",10),2&e){var n=r.lc(),i=r.Fc(4),o=r.Fc(10),c=r.Fc(8),a=r.Fc(12),l=r.Fc(6);r.sc("definitionId",n.definitionId)("createFunc",n.create)("cloneFunc",n.clone)("mode",n.mode)("additionalSelect",n.additionalSelect)("masterCrumb",n.masterCrumb)("detailsCrumb",i)("idString",n.idString)("documentTemplate",o)("isInactive",n.isInactive)("documentHeaderTemplate",c)("actions",r.vc(21,gG))("sidebarTemplate",n.showSidebar?a:null)("registerPristineFunc",n.registerPristineFunc)("isDirtyFunc",n.isDirtyFunc)("extraParams",n.extraParams)("handleFreshExtras",n.handleFreshExtras)("toolbarTemplate",l)("encodeCustomStateFunc",n.encodeCustomStateFunc)("select",n.select)("savePreprocessing",n.savePreprocessing)}}function hG(e,t){if(1&e&&r.Qb(0,"t-application-page-not-found",11),2&e){var n=r.lc();r.sc("showHome",!n.isPopupMode)}}function vG(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.formatSerial(null==n?null:n.SerialNumber))}}function yG(e,t){1&e&&r.Qb(0,"div",14)}function IG(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",15),r.Vb(1,"button",16),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onOpen(e)})),r.Qb(2,"fa-icon",17),r.Vb(3,"span",18),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("placement",o.actionsDropdownPlacement)("ngbTooltip",o.updateStateTooltip(i)),r.Bb(1),r.sc("disabled",!o.hasPermissionToUpdateState(i)),r.Bb(3),r.Vc("\xa0\xa0",r.nc(5,4,"Open"),"")}}function CG(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",15),r.Vb(1,"button",19),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCancel(e)})),r.Qb(2,"fa-icon",20),r.Vb(3,"span",18),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(),o=i.model,c=i.extras,a=r.lc();r.sc("placement",a.actionsDropdownPlacement)("ngbTooltip",a.cancelTooltip(o,null==c?null:c.RequiredSignatures)),r.Bb(1),r.sc("disabled",a.disableCancel(o,null==c?null:c.RequiredSignatures)),r.Bb(3),r.Vc("\xa0\xa0",r.nc(5,4,"Cancel"),"")}}function wG(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",15),r.Vb(1,"button",21),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onClose(e)})),r.Qb(2,"fa-icon",22),r.Vb(3,"span",18),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(),o=i.model,c=i.extras,a=r.lc();r.sc("placement",a.actionsDropdownPlacement)("ngbTooltip",a.closeTooltip(o,null==c?null:c.RequiredSignatures)),r.Bb(1),r.sc("disabled",a.disableClose(o,null==c?null:c.RequiredSignatures)),r.Bb(3),r.Vc("\xa0\xa0",r.nc(5,4,"Close"),"")}}function kG(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",15),r.Vb(1,"button",16),r.hc("click",(function(){r.Ic(n);var e=r.lc(),t=e.isEdit,i=e.model,o=r.lc();return!t&&o.onUncancel(i)})),r.Qb(2,"fa-icon",17),r.Vb(3,"span",18),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("placement",o.actionsDropdownPlacement)("ngbTooltip",o.updateStateTooltip(i)),r.Bb(1),r.sc("disabled",!o.hasPermissionToUpdateState(i)),r.Bb(3),r.Vc("\xa0\xa0",r.nc(5,4,"Uncancel"),"")}}function MG(e,t){if(1&e&&(r.Rc(0,yG,1,0,"div",12),r.Rc(1,IG,6,6,"div",13),r.Rc(2,CG,6,6,"div",13),r.Rc(3,wG,6,6,"div",13),r.Rc(4,kG,6,6,"div",13)),2&e){var n=t.model,i=t.extras,o=t.isEdit,c=r.lc();r.sc("ngIf",!o&&c.showClose(n,null==i?null:i.RequiredSignatures)||c.showClose(n,null==i?null:i.RequiredSignatures)),r.Bb(1),r.sc("ngIf",!o&&c.showOpen(n,null==i?null:i.RequiredSignatures)),r.Bb(1),r.sc("ngIf",!o&&c.showCancel(n,null==i?null:i.RequiredSignatures)),r.Bb(1),r.sc("ngIf",!o&&c.showClose(n,null==i?null:i.RequiredSignatures)),r.Bb(1),r.sc("ngIf",!o&&c.showUncancel(n,null==i?null:i.RequiredSignatures))}}function VG(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Gb("active",i.isStateActive(0,n)),r.Bb(2),r.Uc(r.nc(3,3,"Line_State_0"))}}function TG(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Gb("active",i.isStateActive(1,n)),r.Bb(2),r.Uc(r.nc(3,3,"Line_State_1"))}}function EG(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Gb("active",i.isStateActive(2,n)),r.Bb(2),r.Uc(r.nc(3,3,"Line_State_2"))}}function UG(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Gb("active",i.isStateActive(3,n)),r.Bb(2),r.Uc(r.nc(3,3,"Line_State_3"))}}function xG(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Gb("active",i.isStateActive(4,n)),r.Bb(2),r.Uc(r.nc(3,3,"Line_State_4"))}}function RG(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Gb("active",i.isDocumentStateActive(0,n)),r.Bb(2),r.Uc(r.nc(3,3,"Document_State_0"))}}function DG(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Gb("active",i.isDocumentStateActive(1,n)),r.Bb(2),r.Uc(r.nc(3,3,"Document_State_1"))}}function BG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_0")))}function SG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_1")))}function _G(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_2")))}function OG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_3")))}function LG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_4")))}function FG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Document_State_0")))}function AG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Document_State_1")))}function PG(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",26),r.Rc(2,VG,4,5,"div",27),r.Rc(3,TG,4,5,"div",27),r.Rc(4,EG,4,5,"div",27),r.Rc(5,UG,4,5,"div",27),r.Rc(6,xG,4,5,"div",27),r.Rc(7,RG,4,5,"div",27),r.Rc(8,DG,4,5,"div",27),r.Ub(),r.Vb(9,"div",28),r.Rc(10,BG,3,3,"span",29),r.Rc(11,SG,3,3,"span",29),r.Rc(12,_G,3,3,"span",29),r.Rc(13,OG,3,3,"span",29),r.Rc(14,LG,3,3,"span",29),r.Rc(15,FG,3,3,"span",29),r.Rc(16,AG,3,3,"span",29),r.Ub(),r.Sb()),2&e){var n=r.lc().model,i=r.lc();r.Bb(2),r.sc("ngIf",i.isStateVisible(0,n)),r.Bb(1),r.sc("ngIf",i.isStateVisible(1,n)),r.Bb(1),r.sc("ngIf",i.isStateVisible(2,n)),r.Bb(1),r.sc("ngIf",i.isStateVisible(3,n)),r.Bb(1),r.sc("ngIf",i.isStateVisible(4,n)),r.Bb(1),r.sc("ngIf",i.isDocumentStateVisible(0,n)),r.Bb(1),r.sc("ngIf",i.isDocumentStateVisible(1,n)),r.Bb(2),r.sc("ngIf",i.isStateActive(0,n)),r.Bb(1),r.sc("ngIf",i.isStateActive(1,n)),r.Bb(1),r.sc("ngIf",i.isStateActive(2,n)),r.Bb(1),r.sc("ngIf",i.isStateActive(3,n)),r.Bb(1),r.sc("ngIf",i.isStateActive(4,n)),r.Bb(1),r.sc("ngIf",i.isDocumentStateActive(0,n)),r.Bb(1),r.sc("ngIf",i.isDocumentStateActive(1,n))}}function NG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_minus_1")))}function jG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_minus_2")))}function WG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_minus_3")))}function qG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Line_State_minus_4")))}function QG(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Document_State_minus_1")))}function HG(e,t){if(1&e&&(r.Vb(0,"div",30),r.Rc(1,NG,3,3,"span",29),r.Rc(2,jG,3,3,"span",29),r.Rc(3,WG,3,3,"span",29),r.Rc(4,qG,3,3,"span",29),r.Rc(5,QG,3,3,"span",29),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.sc("ngIf",i.isNegativeStateActive(1,n)),r.Bb(1),r.sc("ngIf",i.isNegativeStateActive(2,n)),r.Bb(1),r.sc("ngIf",i.isNegativeStateActive(3,n)),r.Bb(1),r.sc("ngIf",i.isNegativeStateActive(4,n)),r.Bb(1),r.sc("ngIf",i.isNegativeDocumentStateActive(1,n))}}function $G(e,t){if(1&e&&(r.Vb(0,"div",23),r.Rc(1,PG,17,14,"ng-container",24),r.Rc(2,HG,6,5,"ng-template",null,25,r.Sc),r.Ub()),2&e){var n=t.model,i=r.Fc(3),o=r.lc();r.Bb(1),r.sc("ngIf",o.isPositiveState(n))("ngIfElse",i)}}function GG(e,t){if(1&e&&(r.Vb(0,"h2",77),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(1),r.Vc("",i.formatSerial(null==n?null:n.SerialNumber)," ")}}var zG=function(){return{updateOn:"blur"}};function JG(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-serial-editor",78),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.SerialNumber=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("ngModel",i.SerialNumber)("ngModelOptions",r.vc(4,zG))("codeWidth",o.codeWidth)("prefix",o.serialPrefix)}}function KG(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.PostingDate),r.Bb(2),r.Uc(r.nc(3,2,null==n?null:n.PostingDate))}}function YG(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",83),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.PostingDate=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("disabled",o.readonlyDocumentPostingDate(i))("required",o.requireDocumentPostingDate(i))("ngModel",i.PostingDate)("ngModelOptions",r.vc(4,zG))}}function XG(e,t){if(1&e&&(r.Vb(0,"t-form-group",79),r.Rc(1,KG,4,4,"t-restricted",80),r.Rc(2,YG,1,5,"t-date-picker",81),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.lc();r.sc("label",a.labelDocumentPostingDate(i))("labelContextMenu",c)("disableLabelMenu",!(o&&a.showDocumentPostingDateIsCommon(i)))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.PostingDate),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function ZG(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Clearance),r.Bb(2),r.Uc(i.clearanceDisplay(null==n?null:n.Clearance))}}function ez(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-selector",86),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Clearance=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Clearance)("choices",o.clearanceChoices)}}function tz(e,t){if(1&e&&(r.Vb(0,"t-form-group",84),r.mc(1,"translate"),r.Rc(2,ZG,3,2,"t-restricted",80),r.Rc(3,ez,1,2,"t-selector",85),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit;r.sc("label",r.nc(1,4,"Document_Clearance"))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Clearance),r.Bb(2),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function nz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(3).model,o=r.lc(),c="../../../relations/"+(null==(n=o.ws.get("Relation",null==i?null:i.CustodianId))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.CustodianId),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.CustodianId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Relation",null==i?null:i.CustodianId,"Name")," ")}}function iz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",90),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.CustodianId=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.CustodianId)("definitionIds",o.documentCustodianDefinitionIds(i))("filter",o.filterDocumentCustodian(i))("required",o.requireDocumentCustodian(i))("disabled",o.readonlyDocumentCustodian(i))}}function rz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,nz,3,4,"t-restricted",80),r.Rc(2,iz,1,5,"t-relations-picker",88),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function oz(e,t){if(1&e&&(r.Vb(0,"t-form-group",87),r.Rc(1,rz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentCustodian(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CustodianId),r.Bb(1),r.sc("ngIf",null==i?null:i.CustodianIsCommon)("ngIfElse",a)}}function cz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(3).model,o=r.lc(),c="../../../custodies/"+(null==(n=o.ws.get("Custody",null==i?null:i.CustodyId))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.CustodyId),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.CustodyId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Custody",null==i?null:i.CustodyId,"Name")," ")}}function az(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custodies-picker",90),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.CustodyId=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.CustodyId)("definitionIds",o.documentCustodyDefinitionIds(i))("filter",o.filterDocumentCustody(i))("required",o.requireDocumentCustody(i))("disabled",o.readonlyDocumentCustody(i))}}function lz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,cz,3,4,"t-restricted",80),r.Rc(2,az,1,5,"t-custodies-picker",88),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function sz(e,t){if(1&e&&(r.Vb(0,"t-form-group",91),r.Rc(1,lz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentCustody(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CustodyId),r.Bb(1),r.sc("ngIf",null==i?null:i.CustodyIsCommon)("ngIfElse",a)}}function uz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(3).model,o=r.lc(),c="../../../relations/"+(null==(n=o.ws.get("Relation",null==i?null:i.ParticipantId))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.ParticipantId),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.ParticipantId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Relation",null==i?null:i.ParticipantId,"Name")," ")}}function dz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",90),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.ParticipantId=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.ParticipantId)("definitionIds",o.documentParticipantDefinitionIds(i))("filter",o.filterDocumentParticipant(i))("required",o.requireDocumentParticipant(i))("disabled",o.readonlyDocumentParticipant(i))}}function bz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,uz,3,4,"t-restricted",80),r.Rc(2,dz,1,5,"t-relations-picker",88),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function fz(e,t){if(1&e&&(r.Vb(0,"t-form-group",92),r.Rc(1,bz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentParticipant(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ParticipantId),r.Bb(1),r.sc("ngIf",null==i?null:i.ParticipantIsCommon)("ngIfElse",a)}}function mz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(3).model,o=r.lc(),c="../../../resources/"+(null==(n=o.ws.get("Resource",null==i?null:i.ResourceId))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.ResourceId),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.ResourceId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Resource",null==i?null:i.ResourceId,"Name")," ")}}function gz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resources-picker",90),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.ResourceId=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.ResourceId)("definitionIds",o.documentResourceDefinitionIds(i))("filter",o.filterDocumentResource(i))("required",o.requireDocumentResource(i))("disabled",o.readonlyDocumentResource(i))}}function pz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,mz,3,4,"t-restricted",80),r.Rc(2,gz,1,5,"t-resources-picker",88),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function hz(e,t){if(1&e&&(r.Vb(0,"t-form-group",93),r.Rc(1,pz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentResource(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ResourceId),r.Bb(1),r.sc("ngIf",null==i?null:i.ResourceIsCommon)("ngIfElse",a)}}function vz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",96),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.CenterId),r.Bb(1),r.sc("itemId",null==n?null:n.CenterId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Center",null==n?null:n.CenterId,"Name")," ")}}function yz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",97),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.CenterId=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.CenterId)("required",o.requireDocumentCenter(i))("disabled",o.readonlyDocumentCenter(i))("filter",o.filterDocumentCenter(i))}}function Iz(e,t){if(1&e&&(r.Vb(0,"t-form-group",94),r.Rc(1,vz,3,3,"t-restricted",80),r.Rc(2,yz,1,4,"t-centers-picker",95),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.lc();r.sc("label",a.labelDocumentCenter(i))("labelContextMenu",c)("disableLabelMenu",!(o&&a.showDocumentCenterIsCommon(i)))("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CenterId),r.Bb(1),r.sc("ngIf",!o),r.Bb(1),r.sc("ngIf",o)}}function Cz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",100),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(3).model,i=r.lc();r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.CurrencyId),r.Bb(1),r.sc("itemId",null==n?null:n.CurrencyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Currency",null==n?null:n.CurrencyId,"Name")," ")}}function wz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",101),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.CurrencyId=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.CurrencyId)("filter",o.filterDocumentCurrency(i))("required",o.requireDocumentCurrency(i))("disabled",o.readonlyDocumentCurrency(i))}}function kz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Cz,3,3,"t-restricted",80),r.Rc(2,wz,1,4,"t-currencies-picker",99),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function Mz(e,t){if(1&e&&(r.Vb(0,"t-form-group",98),r.Rc(1,kz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentCurrency(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.CurrencyId),r.Bb(1),r.sc("ngIf",null==i?null:i.CurrencyIsCommon)("ngIfElse",a)}}function Vz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.mc(2,"accounting"),r.Ub()),2&e){var n=r.lc(3).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Quantity),r.Bb(1),r.Vc(" ",r.oc(2,2,null==n?null:n.Quantity,"1.0-4")," ")}}function Tz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",104),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Quantity=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.Quantity)("ngModelOptions",r.vc(6,zG))("minDecimalPlaces",0)("maxDecimalPlaces",4)("required",o.requireDocumentQuantity(i))("disabled",o.readonlyDocumentQuantity(i))}}function Ez(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Vz,3,5,"t-restricted",80),r.Rc(2,Tz,1,7,"t-decimal-editor",103),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function Uz(e,t){if(1&e&&(r.Vb(0,"t-form-group",102),r.Rc(1,Ez,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentQuantity(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Quantity),r.Bb(1),r.sc("ngIf",null==i?null:i.QuantityIsCommon)("ngIfElse",a)}}function xz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(3).model,o=r.lc(),c="../../../units/"+(null==(n=o.ws.get("Unit",null==i?null:i.UnitId))?null:n.DefinitionId);r.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.UnitId),r.Bb(1),r.sc("link",c)("itemId",null==i?null:i.UnitId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Unit",null==i?null:i.UnitId,"Name")," ")}}function Rz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-units-picker",101),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.UnitId=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.UnitId)("filter",o.filterDocumentUnit(i))("required",o.requireDocumentUnit(i))("disabled",o.readonlyDocumentUnit(i))}}function Dz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,xz,3,4,"t-restricted",80),r.Rc(2,Rz,1,4,"t-units-picker",99),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function Bz(e,t){if(1&e&&(r.Vb(0,"t-form-group",105),r.Rc(1,Dz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentUnit(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.UnitId),r.Bb(1),r.sc("ngIf",null==i?null:i.UnitIsCommon)("ngIfElse",a)}}function Sz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(3).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Time1),r.Bb(1),r.Vc(" ",r.nc(2,2,null==n?null:n.Time1)," ")}}function _z(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Time1=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.Time1)("ngModelOptions",r.vc(4,zG))("required",o.requireDocumentTime1(i))("disabled",o.readonlyDocumentTime1(i))}}function Oz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Sz,3,4,"t-restricted",80),r.Rc(2,_z,1,5,"t-date-picker",107),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function Lz(e,t){if(1&e&&(r.Vb(0,"t-form-group",106),r.Rc(1,Oz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentTime1(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Time1),r.Bb(1),r.sc("ngIf",null==i?null:i.Time1IsCommon)("ngIfElse",a)}}function Fz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(3).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Time2),r.Bb(1),r.Vc(" ",r.nc(2,2,null==n?null:n.Time2)," ")}}function Az(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Time2=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.Time2)("ngModelOptions",r.vc(4,zG))("required",o.requireDocumentTime2(i))("disabled",o.readonlyDocumentTime2(i))}}function Pz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Fz,3,4,"t-restricted",80),r.Rc(2,Az,1,5,"t-date-picker",107),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function Nz(e,t){if(1&e&&(r.Vb(0,"t-form-group",109),r.Rc(1,Pz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentTime2(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.Time2),r.Bb(1),r.sc("ngIf",null==i?null:i.Time2IsCommon)("ngIfElse",a)}}function jz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.ExternalReference),r.Bb(1),r.Vc(" ",null==n?null:n.ExternalReference," ")}}function Wz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.ExternalReference=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.ExternalReference)("ngModelOptions",r.vc(4,zG))("required",o.requireDocumentExternalReference(i))("disabled",o.readonlyDocumentExternalReference(i))}}function qz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,jz,2,2,"t-restricted",80),r.Rc(2,Wz,1,5,"t-text-editor",107),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function Qz(e,t){if(1&e&&(r.Vb(0,"t-form-group",110),r.Rc(1,qz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentExternalReference(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.ExternalReference),r.Bb(1),r.sc("ngIf",null==i?null:i.ExternalReferenceIsCommon)("ngIfElse",a)}}function Hz(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.InternalReference),r.Bb(1),r.Vc(" ",null==n?null:n.InternalReference," ")}}function $z(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.InternalReference=e})),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.sc("ngModel",i.InternalReference)("ngModelOptions",r.vc(4,zG))("required",o.requireDocumentInternalReference(i))("disabled",o.readonlyDocumentInternalReference(i))}}function Gz(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Hz,2,2,"t-restricted",80),r.Rc(2,$z,1,5,"t-text-editor",107),r.Sb()),2&e){var n=r.lc(2).isEdit;r.Bb(1),r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function zz(e,t){if(1&e&&(r.Vb(0,"t-form-group",111),r.Rc(1,Gz,3,2,"ng-container",24),r.Ub()),2&e){var n=r.lc(),i=n.model,o=n.isEdit,c=r.Fc(23),a=r.Fc(19),l=r.lc();r.sc("label",l.labelDocumentInternalReference(i))("labelContextMenu",c)("disableLabelMenu",!o)("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.InternalReference),r.Bb(1),r.sc("ngIf",null==i?null:i.InternalReferenceIsCommon)("ngIfElse",a)}}function Jz(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(null==n?null:n.Memo)}}function Kz(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Memo=e})),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.sc("ngModel",i.Memo)("ngModelOptions",r.vc(4,zG))("required",o.requireDocumentMemo(i))("disabled",o.readonlyDocumentMemo(i))}}function Yz(e,t){if(1&e&&(r.Vb(0,"t-form-group",112),r.mc(1,"translate"),r.Rc(2,Jz,2,1,"div",29),r.Rc(3,Kz,1,5,"t-text-editor",107),r.Ub()),2&e){var n=r.lc(),i=n.isEdit,o=n.model,c=r.Fc(23),a=r.lc();r.sc("label",r.nc(1,6,"Memo"))("labelContextMenu",c)("disableLabelMenu",!(i&&a.showDocumentMemoIsCommon(o)))("serverErrors",null==o||null==o.serverErrors?null:o.serverErrors.Memo),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}function Xz(e,t){if(1&e&&(r.Vb(0,"div",113),r.Vb(1,"span",114),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().isEdit;r.Gb("t-disabled-background",n)("border-bottom",n),r.Bb(2),r.Uc("("+r.nc(3,5,"SpecifiedPerTab")+")")}}function Zz(e,t){if(1&e&&(r.Vb(0,"div",113),r.Vb(1,"span",114),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc().isEdit;r.Gb("t-disabled-background",n)("border-bottom",n),r.Bb(2),r.Uc("("+r.nc(3,5,"SpecifiedPerLine")+")")}}function eJ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",115),r.Vb(1,"ul",116),r.Vb(2,"li",117),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.close,o=r.lc().model;return r.lc().onToggleDocumentIsCommon(o,e),i()})),r.Vb(3,"div",118),r.Qb(4,"fa-icon",119),r.Ub(),r.Vb(5,"div",120),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc().model;r.Bb(4),r.sc("icon",o[i]?"expand":"compress"),r.Bb(2),r.Vc(" ",r.nc(7,2,o[i]?"SpecifyPerTab":"SpecifyForAllTabs")," ")}}function tJ(e,t){1&e&&(r.Vb(0,"span",128),r.Qb(1,"fa-icon",129),r.Tc(2,"\xa0 "),r.Ub())}function nJ(e,t){1&e&&r.Rb(0)}function iJ(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Qb(1,"div",142),r.Tc(2," \xa0 "),r.Vb(3,"button",143),r.hc("click",(function(){r.Ic(n);var e=r.lc(5).$implicit,t=r.lc().model;return r.lc().onDeleteForm(e,t)})),r.Qb(4,"fa-icon",144),r.mc(5,"translate"),r.Ub(),r.Tc(6," \xa0 "),r.Vb(7,"button",143),r.hc("click",(function(){r.Ic(n);var e=r.lc(5).$implicit,t=r.lc().model;return r.lc().onCreateForm(e,t)})),r.Qb(8,"fa-icon",145),r.mc(9,"translate"),r.Ub(),r.Sb()}2&e&&(r.Bb(4),r.sc("title",r.nc(5,2,"Delete")),r.Bb(4),r.sc("title",r.nc(9,4,"AddAnotherSwitchToTable")))}function rJ(e,t){1&e&&r.Rb(0)}var oJ=function(e,t,n){return{item:e,argument:t,index:0,update:n,isForm:!0}};function cJ(e,t){if(1&e&&(r.Tb(0),r.Rc(1,rJ,1,0,"ng-container",140),r.Sb()),2&e){var n=t.$implicit;r.lc(4);var i=r.Fc(7),o=r.lc().$implicit,c=r.lc().model,a=r.lc();r.Bb(1),r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.yc(2,oJ,a.lines(o,c)[0],n,a.dummyUpdate))}}var aJ=function(e){return{item:e}};function lJ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",139),r.Rc(2,nJ,1,0,"ng-container",140),r.Tc(3," \xa0\xa0 "),r.Rc(4,iJ,10,6,"ng-container",29),r.Ub(),r.Rc(5,cJ,2,6,"ng-container",141),r.Sb()),2&e){var n=r.lc(4).$implicit,i=r.lc(),o=i.model,c=i.isEdit,a=r.Fc(28),l=r.lc();r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.wc(4,aJ,l.lines(n,o)[0])),r.Bb(2),r.sc("ngIf",c),r.Bb(1),r.sc("ngForOf",l.smartColumnIndices(n,o))}}function sJ(e,t){1&e&&(r.Vb(0,"div",147),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NotAdded")," "))}function uJ(e,t){if(1&e&&r.Rc(0,sJ,3,3,"div",146),2&e){var n=r.lc(5).isEdit;r.sc("ngIf",!n)}}function dJ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",150),r.hc("click",(function(){r.Ic(n);var e=r.lc(5).$implicit,t=r.lc().model;return r.lc().onCreateForm(e,t)})),r.Qb(1,"fa-icon",151),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}function bJ(e,t){if(1&e&&(r.Vb(0,"div",148),r.Rc(1,dJ,4,3,"button",149),r.Ub()),2&e){var n=r.lc(4).$implicit,i=r.lc().model,o=r.lc();r.Bb(1),r.sc("ngIf",0===o.lines(n,i).length)}}function fJ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",136),r.Rc(2,lJ,6,6,"ng-container",24),r.Rc(3,uJ,1,1,"ng-template",null,137,r.Sc),r.Ub(),r.Rc(5,bJ,2,1,"div",138),r.Sb()),2&e){var n=r.Fc(4),i=r.lc(3).$implicit,o=r.lc(),c=o.model,a=o.isEdit,l=r.lc();r.Bb(1),r.Qc("background-color",l.formColor(i,c)),r.Bb(1),r.sc("ngIf",l.lines(i,c).length>0)("ngIfElse",n),r.Bb(3),r.sc("ngIf",a)}}function mJ(e,t){1&e&&r.Rb(0)}var gJ=function(e,t){return{columnIndex:e,update:t,isForm:!0}};function pJ(e,t){if(1&e&&(r.Tb(0),r.Rc(1,mJ,1,0,"ng-container",140),r.Sb()),2&e){var n=r.lc().$implicit;r.lc(4);var i=r.Fc(9),o=r.lc(3);r.Bb(1),r.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",r.xc(2,gJ,n,o.dummyUpdate))}}function hJ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group",160),r.Rc(2,pJ,2,5,"ng-container",24),r.Ub(),r.Sb()),2&e){var n=t.$implicit,i=r.lc(5).$implicit,o=r.Fc(10),c=r.lc(),a=c.isEdit,l=c.model,s=r.Fc(21),u=r.lc();r.Bb(1),r.sc("labelContextMenu",o)("labelContext",n)("disableLabelMenu",!a)("serverErrors",u.tabHeaderServerErrors(i,n,l))("label",u.columnLabel(i,n)),r.Bb(1),r.sc("ngIf",u.tabIsCommon(i,n,l))("ngIfElse",s)}}function vJ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",161),r.Vb(1,"t-text-editor",162),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(5).$implicit,i=r.lc().model;return r.lc().setBarcode(t,i,e)}))("enter",(function(){r.Ic(n),r.lc(2);var e=r.Fc(2),t=r.lc(3).$implicit,i=r.lc().model;return r.lc().onBarcodeEnter(t,i,e)})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(5).$implicit,o=r.lc().model,c=r.lc();r.Bb(1),r.sc("ngModel",c.getBarcode(i,o))("placeholder",c.barcodeFieldPlaceholder(i))}}function yJ(e,t){1&e&&(r.Vb(0,"div",161),r.Qb(1,"t-spinner"),r.Ub())}function IJ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",163),r.Vb(1,"t-error-message",164),r.hc("dismiss",(function(){return r.Ic(n),r.lc(7).clearBarcodeError()})),r.Tc(2),r.Ub(),r.Ub()}if(2&e){var i=r.lc(5).$implicit,o=r.lc().model,c=r.lc();r.Bb(2),r.Vc(" ",c.getBarcodeError(i,o)," ")}}function CJ(e,t){if(1&e&&(r.Vb(0,"div",156),r.Rc(1,hJ,3,7,"ng-container",141),r.Qb(2,"div",157),r.Rc(3,vJ,2,2,"t-form-group",158),r.Rc(4,yJ,2,0,"div",158),r.Rc(5,IJ,3,1,"div",159),r.Ub()),2&e){var n=r.lc(4).$implicit,i=r.lc(),o=i.model,c=i.isEdit,a=r.lc();r.Bb(1),r.sc("ngForOf",a.smartTabHeaderColumnPaths(n,o)),r.Bb(2),r.sc("ngIf",a.showBarcodeField(n,c)),r.Bb(1),r.sc("ngIf",a.isBarcodeLoading(n,o)),r.Bb(1),r.sc("ngIf",a.showBarcodeError(n,o))}}var wJ=function(e){return{0:e}};function kJ(e,t){if(1&e&&(r.Vb(0,"tr"),r.Qb(1,"td",168),r.Vb(2,"td",169),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"td",170),r.Tc(6),r.mc(7,"accounting"),r.Ub(),r.Ub()),2&e){var n=t.$implicit,i=r.lc(5).$implicit,o=r.lc().model,c=r.lc();r.Bb(3),r.Vc(" ",r.oc(4,2,"Total0",r.wc(8,wJ,c.columnLabel(i,n))),"\xa0\xa0\xa0 "),r.Bb(3),r.Vc(" ",r.oc(7,5,c.smartTotal(i,n,o),c.functional_format)," ")}}function MJ(e,t){if(1&e&&(r.Vb(0,"div",165),r.Vb(1,"table",166),r.Vb(2,"tr"),r.Qb(3,"td",167),r.Ub(),r.Rc(4,kJ,8,10,"tr",141),r.Vb(5,"tr"),r.Qb(6,"td",167),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc(4).$implicit,i=r.lc(),o=i.model,c=i.isEdit,a=r.lc();r.Bb(4),r.sc("ngForOf",a.smartTotalsColumnIndices(n,o,c))}}function VJ(e,t){if(1&e){var n=r.Wb();r.Rc(0,CJ,6,4,"div",152),r.Vb(1,"t-table",153,154),r.hc("insert",(function(e){r.Ic(n);var t=r.lc(4).model;return r.lc().onInsertSmartLine(e,t)}))("delete",(function(e){r.Ic(n);var t=r.lc(4).model;return r.lc().onDeleteSmartLine(e,t)})),r.Ub(),r.Rc(3,MJ,7,1,"div",155)}if(2&e){r.lc(2);var i=r.Fc(5),o=r.Fc(7),c=r.lc().$implicit,a=r.Fc(8),l=r.lc(),s=l.model,u=l.isEdit,d=r.Fc(28),b=r.lc();r.sc("ngIf",b.showTabHeader(c,s,u)),r.Bb(1),r.sc("dataSource",b.lines(c,s))("isEdit",u)("columnPaths",b.smartColumnPathsForTable(c,s))("headerTemplate",i)("rowTemplate",o)("columnTemplates",b.columnTemplates(c,a,d))("onNewItem",b.onNewSmartLineFactory(c))("highlightFunc",b.highlightLineFactory(s))("attentionItem",b.attentionItem),r.Bb(2),r.sc("ngIf",b.smartTotalsColumnIndices(c,s,u).length>0)}}function TJ(e,t){if(1&e&&(r.Rc(0,fJ,6,5,"ng-container",24),r.Rc(1,VJ,4,11,"ng-template",null,135,r.Sc)),2&e){var n=r.Fc(2),i=r.lc(2).$implicit,o=r.lc().model,c=r.lc();r.sc("ngIf",c.showAsForm(i,o))("ngIfElse",n)}}function EJ(e,t){1&e&&r.Rb(0)}function UJ(e,t){if(1&e&&(r.Tb(0),r.Rc(1,EJ,1,0,"ng-container",171),r.Vb(2,"div",165),r.Vb(3,"table",172),r.Vb(4,"tr"),r.Qb(5,"td",168),r.Vb(6,"td",173),r.Tc(7),r.mc(8,"translate"),r.mc(9,"translate"),r.Ub(),r.Vb(10,"td",174),r.Tc(11),r.mc(12,"accounting"),r.Ub(),r.Ub(),r.Vb(13,"tr"),r.Qb(14,"td"),r.Vb(15,"td",175),r.Tc(16),r.mc(17,"translate"),r.mc(18,"translate"),r.Ub(),r.Vb(19,"td",176),r.Tc(20),r.mc(21,"accounting"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Sb()),2&e){var n=r.lc(3).model,i=r.Fc(36),o=r.lc();r.Bb(1),r.sc("ngTemplateOutlet",i),r.Bb(6),r.Vc(" ",r.oc(8,5,"Total0",r.wc(21,wJ,r.nc(9,8,"Debit")))+o.functionalPostfix,"\xa0\xa0\xa0 "),r.Bb(4),r.Vc(" ",r.oc(12,10,o.total(n,1,!0),o.functional_format)," "),r.Bb(5),r.Vc(" ",r.oc(17,13,"Total0",r.wc(23,wJ,r.nc(18,16,"Credit")))+o.functionalPostfix,"\xa0\xa0\xa0 "),r.Bb(4),r.Vc(" ",r.oc(21,18,o.total(n,-1,!0),o.functional_format)," ")}}function xJ(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=t.argument,i=r.lc(2).$implicit,o=r.lc().isEdit,c=r.lc();r.Qc("text-align",c.columnLabelAlignment(i,n))("min-width",o?120:0,"px"),r.Bb(1),r.Vc(" ",c.columnLabel(i,n),"\xa0\xa0")}}function RJ(e,t){1&e&&r.Rb(0)}var DJ=function(e,t,n,i,r){return{columnIndex:e,rowIndex:t,line:n,update:i,isForm:r}};function BJ(e,t){if(1&e&&(r.Vb(0,"t-form-group-cell",179),r.Rc(1,RJ,1,0,"ng-container",140),r.Ub()),2&e){var n=r.lc(),i=n.argument,o=n.item,c=n.index,a=n.update,l=n.isForm;r.lc();var s=r.Fc(9),u=r.lc().$implicit,d=r.lc(2);r.sc("serverErrors",d.lineEntryServerErrors(u,i,o)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.Ac(3,DJ,i,c,o,a,l))}}function SJ(e,t){1&e&&r.Rb(0)}function _J(e,t){if(1&e&&(r.Vb(0,"t-form-group",180),r.Rc(1,SJ,1,0,"ng-container",140),r.Ub()),2&e){var n=r.lc(),i=n.argument,o=n.item,c=n.index,a=n.update,l=n.isForm;r.lc();var s=r.Fc(9),u=r.lc().$implicit,d=r.lc(2);r.sc("serverErrors",d.lineEntryServerErrors(u,i,o))("label",d.columnLabel(u,i)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.Ac(4,DJ,i,c,o,a,l))}}function OJ(e,t){if(1&e&&(r.Rc(0,BJ,2,9,"t-form-group-cell",177),r.Rc(1,_J,2,10,"t-form-group",178)),2&e){var n=t.isForm;r.sc("ngIf",!n),r.Bb(1),r.sc("ngIf",n)}}function LJ(e,t){if(1&e&&(r.Vb(0,"t-view-link",192),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.sc("itemId",l.getFieldValue(c,i,o,a)),r.Bb(1),r.Vc(" ",l.accountDisplay(l.getFieldValue(c,i,o,a))," ")}}function FJ(e,t){if(1&e&&(r.Vb(0,"t-view-link",100),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.sc("itemId",l.getFieldValue(c,i,o,a)),r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("Currency",l.getFieldValue(c,i,o,a),"Name")," ")}}function AJ(e,t){if(1&e&&(r.Vb(0,"t-view-link",89),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(2),o=i.columnIndex,c=i.line,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc(),u="../../../relations/"+(null==(n=s.ws.get("Relation",s.getFieldValue(a,o,c,l)))?null:n.DefinitionId);r.sc("link",u)("itemId",s.getFieldValue(a,o,c,l)),r.Bb(1),r.Vc(" ",s.ws.getMultilingualValue("Relation",s.getFieldValue(a,o,c,l),"Name")," ")}}function PJ(e,t){if(1&e&&(r.Vb(0,"t-view-link",89),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(2),o=i.columnIndex,c=i.line,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc(),u="../../../custodies/"+(null==(n=s.ws.get("Custody",s.getFieldValue(a,o,c,l)))?null:n.DefinitionId);r.sc("link",u)("itemId",s.getFieldValue(a,o,c,l)),r.Bb(1),r.Vc(" ",s.ws.getMultilingualValue("Custody",s.getFieldValue(a,o,c,l),"Name")," ")}}function NJ(e,t){if(1&e&&(r.Vb(0,"t-view-link",89),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(2),o=i.columnIndex,c=i.line,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc(),u="../../../relations/"+(null==(n=s.ws.get("Relation",s.getFieldValue(a,o,c,l)))?null:n.DefinitionId);r.sc("link",u)("itemId",s.getFieldValue(a,o,c,l)),r.Bb(1),r.Vc(" ",s.ws.getMultilingualValue("Relation",s.getFieldValue(a,o,c,l),"Name")," ")}}function jJ(e,t){if(1&e&&(r.Vb(0,"t-view-link",89),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(2),o=i.columnIndex,c=i.line,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc(),u="../../../resources/"+(null==(n=s.ws.get("Resource",s.getFieldValue(a,o,c,l)))?null:n.DefinitionId);r.sc("link",u)("itemId",s.getFieldValue(a,o,c,l)),r.Bb(1),r.Vc(" ",s.ws.getMultilingualValue("Resource",s.getFieldValue(a,o,c,l),"Name")," ")}}function WJ(e,t){if(1&e&&(r.Vb(0,"t-view-link",96),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.sc("itemId",l.getFieldValue(c,i,o,a)),r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("Center",l.getFieldValue(c,i,o,a),"Name")," ")}}function qJ(e,t){if(1&e&&(r.Vb(0,"t-view-link",193),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.sc("itemId",l.getFieldValue(c,i,o,a)),r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("EntryType",l.getFieldValue(c,i,o,a),"Name")," ")}}function QJ(e,t){if(1&e&&(r.Vb(0,"div",194),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(2),r.Uc(r.oc(3,1,l.getFieldValue(c,i,o,a),l.MonetaryValue_format(l.entry(c,i,o))))}}function HJ(e,t){if(1&e&&(r.Vb(0,"div",194),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(2),r.Uc(r.oc(3,1,l.getFieldValue(c,i,o,a),"1.0-4"))}}function $J(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(l.ws.getMultilingualValue("Unit",l.getFieldValue(c,i,o,a),"Name"))}}function GJ(e,t){if(1&e&&(r.Vb(0,"div",194),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(2),r.Uc(r.oc(3,1,l.getFieldValue(c,i,o,a),l.functional_format))}}function zJ(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(r.nc(2,1,l.getFieldValue(c,i,o,a)))}}function JJ(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(r.nc(2,1,l.getFieldValue(c,i,o,a)))}}function KJ(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(l.getFieldValue(c,i,o,a))}}function YJ(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(l.getFieldValue(c,i,o,a))}}function XJ(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(l.getFieldValue(c,i,o,a))}}function ZJ(e,t){if(1&e&&(r.Vb(0,"div",194),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(2),r.Uc(r.oc(3,1,l.getFieldValue(c,i,o,a),l.MonetaryValue_format(l.entry(c,i,o))))}}function eK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(r.nc(2,1,l.getFieldValue(c,i,o,a)))}}function tK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(l.getFieldValue(c,i,o,a))}}function nK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(l.getFieldValue(c,i,o,a)?"Yes":r.nc(2,1,"No"))}}function iK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"accounting"),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(r.oc(2,1,l.getFieldValue(c,i,o,a),"1.0-4"))}}function rK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(l.getFieldValue(c,i,o,a))}}function oK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(r.nc(2,1,l.getFieldValue(c,i,o,a)))}}function cK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Uc(l.getFieldValue(c,i,o,a))}}function aK(e,t){if(1&e&&(r.Tb(0,183),r.Rc(1,LJ,2,2,"t-view-link",184),r.Rc(2,FJ,2,2,"t-view-link",185),r.Rc(3,AJ,2,3,"t-view-link",186),r.Rc(4,PJ,2,3,"t-view-link",186),r.Rc(5,NJ,2,3,"t-view-link",186),r.Rc(6,jJ,2,3,"t-view-link",186),r.Rc(7,WJ,2,2,"t-view-link",187),r.Rc(8,qJ,2,2,"t-view-link",188),r.Rc(9,QJ,4,4,"div",189),r.Rc(10,HJ,4,4,"div",189),r.Rc(11,$J,2,1,"span",190),r.Rc(12,GJ,4,4,"div",189),r.Rc(13,zJ,3,3,"span",190),r.Rc(14,JJ,3,3,"span",190),r.Rc(15,KJ,2,1,"span",190),r.Rc(16,YJ,2,1,"span",190),r.Rc(17,XJ,2,1,"span",190),r.Rc(18,ZJ,4,4,"div",189),r.Rc(19,eK,3,3,"span",190),r.Rc(20,tK,2,1,"span",190),r.Rc(21,nK,3,3,"span",190),r.Rc(22,iK,3,4,"span",190),r.Rc(23,rK,2,1,"span",190),r.Rc(24,oK,3,3,"span",190),r.Rc(25,cK,2,1,"span",191),r.Sb()),2&e){var n=r.lc().columnIndex,i=r.lc(2).$implicit,o=r.lc(2);r.sc("ngSwitch",o.columnName(i,n)),r.Bb(1),r.sc("ngSwitchCase","AccountId"),r.Bb(1),r.sc("ngSwitchCase","CurrencyId"),r.Bb(1),r.sc("ngSwitchCase","CustodianId"),r.Bb(1),r.sc("ngSwitchCase","CustodyId"),r.Bb(1),r.sc("ngSwitchCase","ParticipantId"),r.Bb(1),r.sc("ngSwitchCase","ResourceId"),r.Bb(1),r.sc("ngSwitchCase","CenterId"),r.Bb(1),r.sc("ngSwitchCase","EntryTypeId"),r.Bb(1),r.sc("ngSwitchCase","MonetaryValue"),r.Bb(1),r.sc("ngSwitchCase","Quantity"),r.Bb(1),r.sc("ngSwitchCase","UnitId"),r.Bb(1),r.sc("ngSwitchCase","Value"),r.Bb(1),r.sc("ngSwitchCase","Time1"),r.Bb(1),r.sc("ngSwitchCase","Time2"),r.Bb(1),r.sc("ngSwitchCase","ExternalReference"),r.Bb(1),r.sc("ngSwitchCase","InternalReference"),r.Bb(1),r.sc("ngSwitchCase","NotedAgentName"),r.Bb(1),r.sc("ngSwitchCase","NotedAmount"),r.Bb(1),r.sc("ngSwitchCase","NotedDate"),r.Bb(1),r.sc("ngSwitchCase","Memo"),r.Bb(1),r.sc("ngSwitchCase","Boolean1"),r.Bb(1),r.sc("ngSwitchCase","Decimal1"),r.Bb(1),r.sc("ngSwitchCase","Text1"),r.Bb(1),r.sc("ngSwitchCase","PostingDate")}}function lK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc(" ",l.accountDisplay(l.getFieldValue(c,i,o,a)),"\u200c ")}}function sK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("Currency",l.getFieldValue(c,i,o,a),"Name"),"\u200c ")}}function uK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("Relation",l.getFieldValue(c,i,o,a),"Name"),"\u200c ")}}function dK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("Custody",l.getFieldValue(c,i,o,a),"Name"),"\u200c ")}}function bK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("Relation",l.getFieldValue(c,i,o,a),"Name"),"\u200c ")}}function fK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("Resource",l.getFieldValue(c,i,o,a),"Name"),"\u200c ")}}function mK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("Center",l.getFieldValue(c,i,o,a),"Name"),"\u200c ")}}function gK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc(" ",l.ws.getMultilingualValue("EntryType",l.getFieldValue(c,i,o,a),"Name"),"\u200c ")}}function pK(e,t){if(1&e&&(r.Vb(0,"div",194),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(2),r.Vc("",r.oc(3,1,l.getFieldValue(c,i,o,a),l.MonetaryValue_format(l.entry(c,i,o))),"\u200c")}}function hK(e,t){if(1&e&&(r.Vb(0,"div",194),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(2),r.Uc(r.oc(3,1,l.getFieldValue(c,i,o,a),"1.0-4"))}}function vK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",l.ws.getMultilingualValue("Unit",l.getFieldValue(c,i,o,a),"Name"),"\u200c")}}function yK(e,t){if(1&e&&(r.Vb(0,"div",194),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(2),r.Vc("",r.oc(3,1,l.getFieldValue(c,i,o,a),l.functional_format),"\u200c")}}function IK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",r.nc(2,1,l.getFieldValue(c,i,o,a)),"\u200c")}}function CK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",r.nc(2,1,l.getFieldValue(c,i,o,a)),"\u200c")}}function wK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",l.getFieldValue(c,i,o,a),"\u200c")}}function kK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",l.getFieldValue(c,i,o,a),"\u200c")}}function MK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",l.getFieldValue(c,i,o,a),"\u200c")}}function VK(e,t){if(1&e&&(r.Vb(0,"div",194),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(2),r.Vc("",r.oc(3,1,l.getFieldValue(c,i,o,a),l.MonetaryValue_format(l.entry(c,i,o))),"\u200c")}}function TK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",r.nc(2,1,l.getFieldValue(c,i,o,a)),"\u200c")}}function EK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",l.getFieldValue(c,i,o,a),"\u200c")}}function UK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",l.getFieldValue(c,i,o,a)?"Yes":r.nc(2,1,"No"),"\u200c")}}function xK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"accounting"),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",r.oc(2,1,l.getFieldValue(c,i,o,a),"1.0-4"),"\u200c")}}function RK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",l.getFieldValue(c,i,o,a),"\u200c")}}function DK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",r.nc(2,1,l.getFieldValue(c,i,o,a)),"\u200c")}}function BK(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3),i=n.columnIndex,o=n.line,c=r.lc(2).$implicit,a=r.lc().model,l=r.lc();r.Bb(1),r.Vc("",l.getFieldValue(c,i,o,a),"\u200c")}}function SK(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",196),r.Rc(2,lK,2,1,"span",190),r.Rc(3,sK,2,1,"span",190),r.Rc(4,uK,2,1,"span",190),r.Rc(5,dK,2,1,"span",190),r.Rc(6,bK,2,1,"span",190),r.Rc(7,fK,2,1,"span",190),r.Rc(8,mK,2,1,"span",190),r.Rc(9,gK,2,1,"span",190),r.Rc(10,pK,4,4,"div",189),r.Rc(11,hK,4,4,"div",189),r.Rc(12,vK,2,1,"span",190),r.Rc(13,yK,4,4,"div",189),r.Rc(14,IK,3,3,"span",190),r.Rc(15,CK,3,3,"span",190),r.Rc(16,wK,2,1,"span",190),r.Rc(17,kK,2,1,"span",190),r.Rc(18,MK,2,1,"span",190),r.Rc(19,VK,4,4,"div",189),r.Rc(20,TK,3,3,"span",190),r.Rc(21,EK,2,1,"span",190),r.Rc(22,UK,3,3,"span",190),r.Rc(23,xK,3,4,"span",190),r.Rc(24,RK,2,1,"span",190),r.Rc(25,DK,3,3,"span",190),r.Rc(26,BK,2,1,"span",191),r.Ub(),r.Sb()),2&e){var n=r.lc(2).columnIndex,i=r.lc(2).$implicit,o=r.lc(2);r.Bb(1),r.sc("ngSwitch",o.columnName(i,n)),r.Bb(1),r.sc("ngSwitchCase","AccountId"),r.Bb(1),r.sc("ngSwitchCase","CurrencyId"),r.Bb(1),r.sc("ngSwitchCase","CustodianId"),r.Bb(1),r.sc("ngSwitchCase","CustodyId"),r.Bb(1),r.sc("ngSwitchCase","ParticipantId"),r.Bb(1),r.sc("ngSwitchCase","ResourceId"),r.Bb(1),r.sc("ngSwitchCase","CenterId"),r.Bb(1),r.sc("ngSwitchCase","EntryTypeId"),r.Bb(1),r.sc("ngSwitchCase","MonetaryValue"),r.Bb(1),r.sc("ngSwitchCase","Quantity"),r.Bb(1),r.sc("ngSwitchCase","UnitId"),r.Bb(1),r.sc("ngSwitchCase","Value"),r.Bb(1),r.sc("ngSwitchCase","Time1"),r.Bb(1),r.sc("ngSwitchCase","Time2"),r.Bb(1),r.sc("ngSwitchCase","ExternalReference"),r.Bb(1),r.sc("ngSwitchCase","InternalReference"),r.Bb(1),r.sc("ngSwitchCase","NotedAgentName"),r.Bb(1),r.sc("ngSwitchCase","NotedAmount"),r.Bb(1),r.sc("ngSwitchCase","NotedDate"),r.Bb(1),r.sc("ngSwitchCase","Memo"),r.Bb(1),r.sc("ngSwitchCase","Boolean1"),r.Bb(1),r.sc("ngSwitchCase","Decimal1"),r.Bb(1),r.sc("ngSwitchCase","Text1"),r.Bb(1),r.sc("ngSwitchCase","PostingDate")}}function _K(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-accounts-picker",205),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("filter",s.getFilter(a,c))}}function OK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",206),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("filter",s.getFilter(a,c))}}function LK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",207),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("definitionIds",s.definitionIdsCustodian_Smart(a,c))("ngModel",s.getFieldValue(a,c,o,l))("filter",s.getFilter(a,c))("additionalSelect",s.additionalSelectCustodian_Smart(a))}}function FK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custodies-picker",207),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("definitionIds",s.definitionIdsCustody_Smart(a,c))("ngModel",s.getFieldValue(a,c,o,l))("filter",s.getFilter(a,c))("additionalSelect",s.additionalSelectCustody_Smart(a))}}function AK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",207),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("definitionIds",s.definitionIdsParticipant_Smart(a,c))("ngModel",s.getFieldValue(a,c,o,l))("filter",s.getFilter(a,c))("additionalSelect",s.additionalSelectParticipant_Smart(a))}}function PK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resources-picker",207),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("definitionIds",s.definitionIdsResource_Smart(a,c))("ngModel",s.getFieldValue(a,c,o,l))("filter",s.getFilter(a,c))("additionalSelect",s.additionalSelectResource_Smart(a))}}function NK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",208),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("filter",s.getFilter(a,c))}}function jK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",209),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("filter",s.entryTypeFilter(a,c))("ngModel",s.getFieldValue(a,c,o,l))}}function WK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",210),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=i.isForm,l=r.lc(2).$implicit,s=r.lc().model,u=r.lc();r.sc("required",!(o&&o.PH)&&u.isRequired(l,c,o,s))("ngModel",u.getFieldValue(l,c,o,s))("ngModelOptions",r.vc(6,zG))("minDecimalPlaces",u.MonetaryValue_decimals(u.entry(l,c,o)))("maxDecimalPlaces",u.MonetaryValue_decimals(u.entry(l,c,o)))("textAlignment",a?null:"right")}}function qK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",210),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=i.isForm,l=r.lc(2).$implicit,s=r.lc().model,u=r.lc();r.sc("required",!(o&&o.PH)&&u.isRequired(l,c,o,s))("ngModel",u.getFieldValue(l,c,o,s))("ngModelOptions",r.vc(6,zG))("minDecimalPlaces",0)("maxDecimalPlaces",4)("textAlignment",a?null:"right")}}function QK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-units-picker",208),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("filter",s.getFilter(a,c))}}function HK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",210),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=i.isForm,l=r.lc(2).$implicit,s=r.lc().model,u=r.lc();r.sc("required",!(o&&o.PH)&&u.isRequired(l,c,o,s))("ngModel",u.getFieldValue(l,c,o,s))("ngModelOptions",r.vc(6,zG))("minDecimalPlaces",u.functional_decimals)("maxDecimalPlaces",u.functional_decimals)("textAlignment",a?null:"right")}}function $K(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function GK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function zK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function JK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function KK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function YK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",210),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=i.isForm,l=r.lc(2).$implicit,s=r.lc().model,u=r.lc();r.sc("required",!(o&&o.PH)&&u.isRequired(l,c,o,s))("ngModel",u.getFieldValue(l,c,o,s))("ngModelOptions",r.vc(6,zG))("minDecimalPlaces",u.MonetaryValue_decimals(u.entry(l,c,o)))("maxDecimalPlaces",u.MonetaryValue_decimals(u.entry(l,c,o)))("textAlignment",a?null:"right")}}function XK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function ZK(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function eY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",212),r.Vb(1,"input",213),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub(),r.Vb(2,"label",214),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3),o=i.rowIndex,c=i.columnIndex,a=i.line,l=r.lc(2).$implicit,s=r.lc().model,u=r.lc();r.Bb(1),r.uc("id","standardandpure",o,""),r.sc("ngModel",u.getFieldValue(l,c,a,s))("required",!(a&&a.PH)&&u.isRequired(l,c,a,s)),r.Bb(1),r.uc("for","standardandpure",o,"")}}function tY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",210),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=i.isForm,l=r.lc(2).$implicit,s=r.lc().model,u=r.lc();r.sc("required",!(o&&o.PH)&&u.isRequired(l,c,o,s))("ngModel",u.getFieldValue(l,c,o,s))("ngModelOptions",r.vc(6,zG))("minDecimalPlaces",0)("maxDecimalPlaces",4)("textAlignment",a?null:"right")}}function nY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function iY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",211),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(3),i=t.columnIndex,o=t.line,c=t.update,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();return s.setFieldValue(a,i,o,l,e),s.onSmartLineUpdated(c,o,l)})),r.Ub()}if(2&e){var i=r.lc(3),o=i.line,c=i.columnIndex,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("required",!(o&&o.PH)&&s.isRequired(a,c,o,l))("ngModel",s.getFieldValue(a,c,o,l))("ngModelOptions",r.vc(3,zG))}}function rY(e,t){if(1&e&&(r.Tb(0,183),r.Rc(1,_K,1,3,"t-accounts-picker",197),r.Rc(2,OK,1,3,"t-currencies-picker",198),r.Rc(3,LK,1,5,"t-relations-picker",199),r.Rc(4,FK,1,5,"t-custodies-picker",199),r.Rc(5,AK,1,5,"t-relations-picker",199),r.Rc(6,PK,1,5,"t-resources-picker",199),r.Rc(7,NK,1,3,"t-centers-picker",200),r.Rc(8,jK,1,3,"t-entry-types-picker",201),r.Rc(9,WK,1,7,"t-decimal-editor",202),r.Rc(10,qK,1,7,"t-decimal-editor",202),r.Rc(11,QK,1,3,"t-units-picker",200),r.Rc(12,HK,1,7,"t-decimal-editor",202),r.Rc(13,$K,1,4,"t-date-picker",203),r.Rc(14,GK,1,4,"t-date-picker",203),r.Rc(15,zK,1,4,"t-text-editor",203),r.Rc(16,JK,1,4,"t-text-editor",203),r.Rc(17,KK,1,4,"t-text-editor",203),r.Rc(18,YK,1,7,"t-decimal-editor",202),r.Rc(19,XK,1,4,"t-date-picker",203),r.Rc(20,ZK,1,4,"t-text-editor",203),r.Rc(21,eY,4,4,"div",204),r.Rc(22,tY,1,7,"t-decimal-editor",202),r.Rc(23,nY,1,4,"t-text-editor",203),r.Rc(24,iY,1,4,"t-date-picker",203),r.Sb()),2&e){var n=r.lc(2).columnIndex,i=r.lc(2).$implicit,o=r.lc(2);r.sc("ngSwitch",o.columnName(i,n)),r.Bb(1),r.sc("ngSwitchCase","AccountId"),r.Bb(1),r.sc("ngSwitchCase","CurrencyId"),r.Bb(1),r.sc("ngSwitchCase","CustodianId"),r.Bb(1),r.sc("ngSwitchCase","CustodyId"),r.Bb(1),r.sc("ngSwitchCase","ParticipantId"),r.Bb(1),r.sc("ngSwitchCase","ResourceId"),r.Bb(1),r.sc("ngSwitchCase","CenterId"),r.Bb(1),r.sc("ngSwitchCase","EntryTypeId"),r.Bb(1),r.sc("ngSwitchCase","MonetaryValue"),r.Bb(1),r.sc("ngSwitchCase","Quantity"),r.Bb(1),r.sc("ngSwitchCase","UnitId"),r.Bb(1),r.sc("ngSwitchCase","Value"),r.Bb(1),r.sc("ngSwitchCase","Time1"),r.Bb(1),r.sc("ngSwitchCase","Time2"),r.Bb(1),r.sc("ngSwitchCase","ExternalReference"),r.Bb(1),r.sc("ngSwitchCase","InternalReference"),r.Bb(1),r.sc("ngSwitchCase","NotedAgentName"),r.Bb(1),r.sc("ngSwitchCase","NotedAmount"),r.Bb(1),r.sc("ngSwitchCase","NotedDate"),r.Bb(1),r.sc("ngSwitchCase","Memo"),r.Bb(1),r.sc("ngSwitchCase","Boolean1"),r.Bb(1),r.sc("ngSwitchCase","Decimal1"),r.Bb(1),r.sc("ngSwitchCase","Text1"),r.Bb(1),r.sc("ngSwitchCase","PostingDate")}}function oY(e,t){if(1&e&&(r.Rc(0,SK,27,25,"ng-container",24),r.Rc(1,rY,25,25,"ng-template",null,195,r.Sc)),2&e){var n=r.Fc(2),i=r.lc(),o=i.columnIndex,c=i.line,a=r.lc(2).$implicit,l=r.lc().model,s=r.lc();r.sc("ngIf",s.isReadOnly(a,o,c,l))("ngIfElse",n)}}function cY(e,t){if(1&e&&(r.Rc(0,aK,26,25,"ng-container",181),r.Rc(1,oY,3,2,"ng-template",null,182,r.Sc)),2&e){var n=r.Fc(2),i=r.lc(3).isEdit;r.sc("ngIf",!i)("ngIfElse",n)}}function aY(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Vb(3,"t-view-link",232),r.Tc(4),r.Ub(),r.Ub()),2&e){var n=r.lc(2).$implicit,i=r.lc(5);r.Bb(1),r.Vc(" ",r.nc(2,3,"OnBehalfOf"),""),r.Bb(2),r.sc("itemId",n.OnBehalfOfUserId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("User",n.OnBehalfOfUserId,"Name")," ")}}function lY(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span",236),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=r.lc(3).$implicit,i=r.lc(3).$implicit,o=r.lc(2);r.Bb(2),r.Vc("",r.nc(3,2,"Signature_Reason"),":\xa0"),r.Bb(3),r.Uc(o.reasonDisplay(i,n.ReasonId))}}function sY(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span",236),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=r.lc(3).$implicit;r.Bb(2),r.Vc("",r.nc(3,2,"Signature_ReasonDetails"),":\xa0"),r.Bb(3),r.Uc(n.ReasonDetails)}}function uY(e,t){if(1&e&&(r.Tb(0),r.Tc(1," \xa0\xa0 "),r.Vb(2,"div",235),r.Rc(3,lY,6,4,"div",29),r.Rc(4,sY,6,4,"div",29),r.Ub(),r.Sb()),2&e){var n=r.lc(2).$implicit;r.Bb(3),r.sc("ngIf",!!n.ReasonId),r.Bb(1),r.sc("ngIf",!!n.ReasonDetails)}}function dY(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",229),r.Qb(2,"t-image",230),r.Ub(),r.Vb(3,"div",231),r.Vb(4,"span"),r.Vb(5,"t-view-link",232),r.Tc(6),r.Ub(),r.Rc(7,aY,5,5,"span",29),r.Ub(),r.Ub(),r.Vb(8,"div",233),r.Vb(9,"div",234),r.Vb(10,"span"),r.Tc(11),r.Ub(),r.Ub(),r.Ub(),r.Rc(12,uY,5,2,"ng-container",29),r.Sb()),2&e){var n,i=r.lc().$implicit,o=r.lc(5),c=null==(n=o.ws.get("User",i.SignedById))?null:n.ImageId;r.Bb(2),r.sc("src","users/"+i.SignedById+"/image")("imageId",c)("size",36),r.Bb(3),r.sc("itemId",i.SignedById),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("User",i.SignedById,"Name")," "),r.Bb(1),r.sc("ngIf",!!i.OnBehalfOfUserId&&i.SignedById!==i.OnBehalfOfUserId),r.Bb(1),r.Gb("text-success",i.ToState>0)("text-danger",i.ToState<0),r.Bb(1),r.Gb("t-positive-stamp",i.ToState>0)("t-negative-stamp",i.ToState<0),r.Bb(2),r.Uc(o.actionDisplay(i.ToState)),r.Bb(1),r.sc("ngIf",!!i.ReasonDetails||!!i.ReasonId)}}function bY(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Vb(4,"t-view-link",232),r.Tc(5),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc(2).$implicit,i=r.lc(5);r.Bb(2),r.Vc(" ",r.nc(3,3,"OnBehalfOf"),""),r.Bb(2),r.sc("itemId",n.OnBehalfOfUserId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("User",n.OnBehalfOfUserId,"Name")," ")}}function fY(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",237),r.Vb(2,"button",238),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(3).$implicit;return r.lc(2).onSignNo(t,e)})),r.Qb(3,"fa-icon",119),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",237),r.Vb(7,"button",239),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit;return r.lc(5).onSignYes(e)})),r.Qb(8,"fa-icon",119),r.Vb(9,"span"),r.Tc(10),r.Ub(),r.Ub(),r.Ub(),r.Rc(11,bY,6,5,"div",29),r.Sb()}if(2&e){var i=r.lc().$implicit,o=r.lc(3).$implicit,c=r.lc().model,a=r.lc();r.Bb(1),r.sc("ngbTooltip",a.signTooltip(i,o,c)),r.Bb(1),r.sc("disabled",a.disableSign(i,o,c)),r.Bb(1),r.sc("icon",a.negativeActionIcon(i.ToState)),r.Bb(2),r.Vc("\xa0\xa0",a.negativeActionDisplay(i.ToState),""),r.Bb(1),r.sc("ngbTooltip",a.signTooltip(i,o,c)),r.Bb(1),r.sc("disabled",a.disableSign(i,o,c)),r.Bb(1),r.sc("icon",a.positiveActionIcon(i.ToState)),r.Bb(2),r.Vc("\xa0\xa0",a.positiveActionDisplay(i.ToState),""),r.Bb(1),r.sc("ngIf",!i.CanSign&&!!i.OnBehalfOfUserId)}}function mY(e,t){1&e&&r.Rb(0)}function gY(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(5);r.Bb(1),r.Vc("",i.requiredSignatureDisplay(n),"\xa0")}}function pY(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(5);r.Bb(1),r.Uc(i.requiredSignatoryDisplay(n))}}function hY(e,t){if(1&e&&(r.Vb(0,"t-view-link",240),r.Vb(1,"span"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(5);r.sc("itemId",n.RoleId),r.Bb(2),r.Uc(i.ws.getMultilingualValue("Role",n.RoleId,"Name"))}}function vY(e,t){if(1&e&&(r.Vb(0,"t-view-link",89),r.Vb(1,"span"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc().$implicit,o=r.lc(5),c="../../../relations/"+(null==(n=o.ws.get("Relation",i.CustodianId))?null:n.DefinitionId);r.sc("link",c)("itemId",i.CustodianId),r.Bb(2),r.Uc(o.ws.getMultilingualValue("Relation",i.CustodianId,"Name"))}}function yY(e,t){if(1&e&&(r.Vb(0,"t-view-link",232),r.Vb(1,"span"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(5);r.sc("itemId",n.UserId),r.Bb(2),r.Uc(i.ws.getMultilingualValue("User",n.UserId,"Name"))}}function IY(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.mc(3,"number"),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(5);r.Bb(1),r.Vc("\xa0","- "+r.oc(2,1,"Count0Lines",r.wc(6,wJ,r.nc(3,4,i.lineIds(n).length))),"")}}function CY(e,t){if(1&e&&(r.Vb(0,"span",241),r.Tc(1),r.mc(2,"datetimeFormat"),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Vc(" \xa0",r.nc(2,1,n.SignedAt)," ")}}function wY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",242),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit;return r.lc(5).onUnsign(e)})),r.mc(1,"translate"),r.Qb(2,"fa-icon",243),r.Ub()}if(2&e){var i=r.lc().$implicit,o=r.lc(4).model,c=r.lc();r.sc("title",c.disableUnsign(i,o)?"":r.nc(1,2,"Delete"))("disabled",c.disableUnsign(i,o))}}function kY(e,t){if(1&e&&(r.Vb(0,"div",218),r.Vb(1,"div",219),r.Qb(2,"div",220),r.Rc(3,dY,13,16,"ng-container",29),r.Rc(4,fY,12,9,"ng-container",29),r.Rc(5,mY,1,0,"ng-container",29),r.Ub(),r.Vb(6,"div",221),r.Vb(7,"div",222),r.Vb(8,"span"),r.Rc(9,gY,2,1,"span",29),r.Rc(10,pY,2,1,"span",29),r.Rc(11,hY,3,2,"t-view-link",223),r.Rc(12,vY,3,3,"t-view-link",224),r.Rc(13,yY,3,2,"t-view-link",225),r.Rc(14,IY,4,8,"span",29),r.Ub(),r.Ub(),r.Vb(15,"div"),r.Rc(16,CY,3,3,"span",226),r.Vb(17,"div",227),r.Rc(18,wY,3,4,"button",228),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e){var n=t.$implicit,i=r.lc(3).$implicit,o=r.lc().model,c=r.lc();r.Bb(3),r.sc("ngIf",!!n.SignedById),r.Bb(1),r.sc("ngIf",!n.SignedById&&(n.CanSign||n.CanSignOnBehalf)),r.Bb(1),r.sc("ngIf",!n.SignedById&&!(n.CanSign||n.CanSignOnBehalf)),r.Bb(4),r.sc("ngIf","Public"!==n.RuleType),r.Bb(1),r.sc("ngIf","Public"===n.RuleType),r.Bb(1),r.sc("ngIf","ByRole"===n.RuleType),r.Bb(1),r.sc("ngIf","ByCustodian"===n.RuleType),r.Bb(1),r.sc("ngIf","ByUser"===n.RuleType),r.Bb(1),r.sc("ngIf",c.lineIds(n).length!==c.lines(i,o).length),r.Bb(2),r.sc("ngIf",n.SignedAt),r.Bb(1),r.sc("ngbTooltip",c.unsignTooltip(n,o)),r.Bb(1),r.sc("ngIf",c.canUnsign(n))}}function MY(e,t){if(1&e&&(r.Vb(0,"div",215),r.Vb(1,"div",216),r.Vb(2,"span",169),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Rc(5,kY,19,12,"div",217),r.Ub()),2&e){var n=r.lc(2).$implicit,i=r.lc(),o=i.model,c=i.extras,a=r.lc();r.Bb(3),r.Uc(r.nc(4,2,"SignaturesAndStamps")),r.Bb(2),r.sc("ngForOf",a.requiredSignaturesForLineDef(o,n,c))}}function VY(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Rc(1,TJ,3,2,"ng-template",null,130,r.Sc),r.Rc(3,UJ,22,25,"ng-container",24),r.Ub(),r.Rc(4,xJ,2,5,"ng-template",null,131,r.Sc),r.Rc(6,OJ,2,2,"ng-template",null,132,r.Sc),r.Rc(8,cY,3,2,"ng-template",null,133,r.Sc),r.Rc(10,MY,6,4,"div",134)),2&e){var n=r.Fc(2),i=r.lc().$implicit,o=r.lc(),c=o.model,a=o.isEdit,l=o.extras,s=r.lc(),u=null,d=!a&&(null==(u=s.requiredSignaturesForLineDef(c,i,l))?null:u.length)>0;r.Gb("p-4",1===(null==c||null==c.EntityMetadata?null:c.EntityMetadata.Lines)),r.sc("metadata",null==c||null==c.EntityMetadata?null:c.EntityMetadata.Lines),r.Bb(3),r.sc("ngIf",s.isManualLine(i))("ngIfElse",n),r.Bb(7),r.sc("ngIf",d)}}function TY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",250),r.hc("click",(function(){r.Ic(n);var e=r.lc(3).$implicit,t=r.lc(),i=t.model,o=t.isEdit;return r.lc().onAutoGenerate(e,i,o)})),r.Tc(1),r.Ub()}if(2&e){var i=r.lc(3).$implicit,o=r.lc(2);r.Bb(1),r.Vc(" ",o.autoGenerateLabel(i)," ")}}function EY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",245),r.Vb(1,"button",246),r.Vb(2,"span",247),r.Qb(3,"fa-icon",248),r.Ub(),r.Ub(),r.Vb(4,"div",249),r.Vb(5,"button",250),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).$implicit,t=r.lc(),i=t.model,o=t.isEdit;return r.lc().onDeleteAll(e,i,o)})),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Rc(8,TY,2,1,"button",251),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).$implicit,o=r.lc().isEdit,c=r.lc();r.sc("placement",c.commandsDropdownPlacement),r.Bb(6),r.Vc(" ",r.nc(7,3,"DeleteAll")," "),r.Bb(2),r.sc("ngIf",c.showAutoGenerate(i,o))}}function UY(e,t){if(1&e&&r.Rc(0,EY,9,5,"div",244),2&e){var n=r.lc(2).isEdit;r.sc("ngIf",n)}}function xY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",115),r.Vb(1,"ul",116),r.Vb(2,"li",117),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.close,o=r.lc().$implicit,c=r.lc().model;return r.lc().onToggleTabIsCommon(o,e,c),i()})),r.Vb(3,"div",118),r.Qb(4,"fa-icon",119),r.Ub(),r.Vb(5,"div",120),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc().$implicit,c=r.lc().model,a=r.lc();r.Bb(4),r.sc("icon",a.tabIsCommon(o,i,c)?"expand":"compress"),r.Bb(2),r.Vc(" ",r.nc(7,2,a.tabIsCommon(o,i,c)?"SpecifyPerLine":"SpecifyForAllLines")," ")}}function RY(e,t){if(1&e&&(r.Vb(0,"li",121),r.Vb(1,"a",122),r.Rc(2,tJ,3,0,"span",123),r.Vb(3,"span",124),r.Tc(4),r.mc(5,"number"),r.Ub(),r.Ub(),r.Rc(6,VY,11,6,"ng-template",125),r.Rc(7,UY,1,1,"ng-template",null,126,r.Sc),r.Rc(9,xY,8,4,"ng-template",null,127,r.Sc),r.Ub()),2&e){var n=t.$implicit,i=r.lc().model,o=r.lc();r.sc("ngbNavItem",n),r.Bb(1),r.Qc("background-color",o.smartTabColor(n,i)),r.Bb(1),r.sc("ngIf",o.showTabErrors(n,i)),r.Bb(2),r.Uc(o.tabTitle(n,i)+(null!=i&&i.Id&&2!==(null==i||null==i.EntityMetadata?null:i.EntityMetadata.Lines)?"":" ("+(o.isManualLine(n)?o.manualEntries(i).length:r.nc(5,5,o.lines(n,i).length))+")"))}}function DY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",245),r.Vb(1,"button",252),r.Vb(2,"span",247),r.Qb(3,"fa-icon",253),r.Ub(),r.Ub(),r.Vb(4,"div",249),r.Vb(5,"button",250),r.hc("click",(function(){r.Ic(n);var e=r.lc().item,t=r.lc().model;return r.lc().toggleHighlight(e,t)})),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc().item,o=r.lc().model,c=r.lc();r.sc("placement",c.commandsDropdownPlacement),r.Bb(6),r.Vc(" ",r.nc(7,2,c.isHighlighted(i,o)?"RemoveHighlight":"AddHighlight")," ")}}function BY(e,t){1&e&&r.Rc(0,DY,8,4,"div",244),2&e&&r.sc("ngIf",!t.item.PH)}function SY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",250),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(2).model;return r.lc().onOtherTab(e,i)})),r.Tc(1),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2).model,c=r.lc();r.Bb(1),r.Uc(c.tabTitle(i,o))}}function _Y(e,t){if(1&e&&(r.Vb(0,"li",254),r.Vb(1,"a",255),r.hc("click",(function(){return!1})),r.Vb(2,"span",124),r.Qb(3,"fa-icon",256),r.Ub(),r.Ub(),r.Vb(4,"div",249),r.Rc(5,SY,2,1,"button",257),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Bb(5),r.sc("ngForOf",i.invisibleTabs(n))}}function OY(e,t){1&e&&r.Rb(0)}function LY(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",260),r.Vb(2,"h5",261),r.Tc(3),r.Ub(),r.Ub(),r.Rc(4,OY,1,0,"ng-container",171),r.Sb()),2&e){var n=r.lc(3).model,i=r.Fc(36),o=r.lc();r.Bb(3),r.Vc(" ",o.bookkeepingManualAdjustmentsTitle(n)+" ("+o.manualEntries(n).length+")"," "),r.Bb(1),r.sc("ngTemplateOutlet",i)}}var FY=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:3,argument:!0}},AY=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1,argument:!0}},PY=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:2,argument:!0}},NY=function(e){return{rowTemplate:e}},jY=function(e,t,n,i,r,o,c){return{AccountId:e,Debit:t,Credit:n,Center:i,Memo:r,ModifiedWarning:o,Commands:c}};function WY(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div",260),r.Vb(2,"h5",261),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Qb(5,"t-table",262),r.Rc(6,LY,5,2,"ng-container",29),r.Vb(7,"div",165),r.Vb(8,"table",172),r.Vb(9,"tr"),r.Qb(10,"td",168),r.Vb(11,"td",173),r.Tc(12),r.mc(13,"translate"),r.mc(14,"translate"),r.Ub(),r.Vb(15,"td",174),r.Tc(16),r.mc(17,"accounting"),r.Ub(),r.Ub(),r.Vb(18,"tr"),r.Qb(19,"td"),r.Vb(20,"td",175),r.Tc(21),r.mc(22,"translate"),r.mc(23,"translate"),r.Ub(),r.Vb(24,"td",176),r.Tc(25),r.mc(26,"accounting"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.Fc(38),o=r.Fc(40),c=r.Fc(46),a=r.Fc(48),l=r.Fc(50),s=r.Fc(52),u=r.Fc(42),d=r.Fc(44),b=r.Fc(56),f=r.Fc(58),m=r.Fc(60),g=r.Fc(62),p=r.lc();r.Gb("p-4",1===(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lines)),r.sc("metadata",null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lines),r.Bb(3),r.Vc(" ",r.nc(4,15,"SmartEntries")+" ("+p.smartEntries(n).length+")",""),r.Bb(2),r.sc("dataSource",p.smartEntries(n))("itemSize",70)("visibleRows",5)("highlightFunc",p.highlightPairFactory(n))("columnPaths",p.manualColumnPaths(n,!0))("columnTemplates",r.Cc(52,jY,r.xc(33,FY,i,o),r.xc(36,AY,c,a),r.xc(39,AY,l,s),r.xc(42,AY,u,d),r.xc(45,PY,b,f),r.wc(48,NY,m),r.wc(50,NY,g))),r.Bb(1),r.sc("ngIf",p.hasManualLines),r.Bb(6),r.Vc(" ",r.oc(13,17,"Total0",r.wc(60,wJ,r.nc(14,20,"Debit")))+p.functionalPostfix,"\xa0\xa0\xa0 "),r.Bb(4),r.Vc(" ",r.oc(17,22,p.total(n,1),p.functional_format)," "),r.Bb(5),r.Vc(" ",r.oc(22,25,"Total0",r.wc(62,wJ,r.nc(23,28,"Credit")))+p.functionalPostfix,"\xa0\xa0\xa0 "),r.Bb(4),r.Vc(" ",r.oc(26,30,p.total(n,-1),p.functional_format)," ")}}function qY(e,t){if(1&e&&(r.Vb(0,"li",121),r.Vb(1,"a",258),r.mc(2,"translate"),r.Vb(3,"span",124),r.Qb(4,"fa-icon",259),r.Vb(5,"span"),r.Tc(6),r.mc(7,"number"),r.Ub(),r.Ub(),r.Ub(),r.Rc(8,WY,27,64,"ng-template",125),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Db(i.attachmentsClass),r.sc("ngbNavItem",-10),r.Bb(1),r.Qc("background-color",i.bookkeepingTabColor(n)),r.sc("title",r.nc(2,8,"Bookkeeping")),r.Bb(5),r.Vc("\xa0\xa0",null!=n&&n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lines)?"":"("+r.nc(7,10,i.entriesCount(n))+")","")}}function QY(e,t){1&e&&(r.Vb(0,"span",128),r.Qb(1,"fa-icon",129),r.Tc(2,"\xa0 "),r.Ub())}function HY(e,t){1&e&&(r.Vb(0,"div",269),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"NoItemsFound")))}function $Y(e,t){1&e&&(r.Vb(0,"div",285),r.Qb(1,"t-spinner",286),r.Ub())}function GY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",282),r.Vb(1,"button",283),r.hc("click",(function(){r.Ic(n);var e=r.lc().index,t=r.lc(4).model;return r.lc().onDownloadAttachment(t,e)})),r.Tc(2),r.Ub(),r.Rc(3,$Y,2,0,"div",284),r.Ub()}if(2&e){var i=r.lc().$implicit,o=r.lc(5);r.Bb(2),r.Uc(o.fileName(i)),r.Bb(1),r.sc("ngIf",i.downloading)}}function zY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",287),r.Vb(1,"t-form-group",288),r.Vb(2,"t-text-editor",289),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.attachment.FileName=e})),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc().$implicit;r.Bb(1),r.sc("serverErrors",null==i.attachment||null==i.attachment.serverErrors?null:i.attachment.serverErrors.FileName),r.Bb(1),r.sc("ngModel",i.attachment.FileName)("ngModelOptions",r.vc(3,zG))}}var JY=function(e,t){return{0:e,1:t}};function KY(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.mc(3,"datetimeFormat"),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(5);r.Bb(1),r.Vc("",r.oc(2,1,"AttachmentAudit",r.xc(6,JY,r.nc(3,4,n.attachment.CreatedAt),i.ws.getMultilingualValue("User",n.attachment.CreatedById,"Name"))),"\xa0")}}function YY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",293),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).index,t=r.lc(4).model;return r.lc().onDownloadAttachment(t,e)})),r.mc(1,"translate"),r.Qb(2,"fa-icon",294),r.Ub()}2&e&&r.sc("title",r.nc(1,1,"Download"))}function XY(e,t){1&e&&(r.Vb(0,"div",295),r.Qb(1,"t-spinner",286),r.Ub())}function ZY(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",290),r.Rc(1,YY,3,3,"button",291),r.Rc(2,XY,2,0,"ng-template",null,292,r.Sc),r.Vb(4,"button",293),r.hc("click",(function(){r.Ic(n);var e=r.lc().index,t=r.lc(4).model;return r.lc().onDeleteAttachment(t,e)})),r.mc(5,"translate"),r.Qb(6,"fa-icon",243),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(3),o=r.lc().$implicit;r.Bb(1),r.sc("ngIf",!o.downloading)("ngIfElse",i),r.Bb(3),r.sc("title",r.nc(5,3,"Delete"))}}function eX(e,t){if(1&e&&(r.Vb(0,"div",272),r.Vb(1,"div",273),r.Vb(2,"div",274),r.Qb(3,"fa-icon",275),r.Ub(),r.Vb(4,"div",276),r.Rc(5,GY,4,2,"div",277),r.Rc(6,zY,3,4,"ng-template",null,278,r.Sc),r.Vb(8,"div",279),r.Vb(9,"div",280),r.Rc(10,KY,4,9,"span",29),r.Vb(11,"span"),r.Tc(12),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Rc(13,ZY,7,5,"div",281),r.Ub(),r.Ub()),2&e){var n=t.$implicit,i=t.index,o=r.Fc(7),c=r.lc(4).isEdit,a=r.lc();r.Gb("bg-light",i%2==1e3),r.Bb(3),r.Qc("color",a.colorFromExtension(n.attachment.FileExtension)),r.sc("icon",a.iconFromExtension(n.attachment.FileExtension)),r.Bb(2),r.sc("ngIf",!c)("ngIfElse",o),r.Bb(5),r.sc("ngIf",n.attachment.CreatedById),r.Bb(2),r.Vc("(",a.size(n),")"),r.Bb(1),r.sc("ngIf",c)}}function tX(e,t){if(1&e&&(r.Vb(0,"div",270),r.Rc(1,eX,14,10,"div",271),r.Ub()),2&e){var n=r.lc(3).model,i=r.lc();r.Bb(1),r.sc("ngForOf",i.attachmentWrappers(n))}}function nX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",296),r.Vb(1,"button",297),r.hc("click",(function(){return r.Ic(n),r.lc(3),r.Fc(34).click()})),r.Qb(2,"fa-icon",298),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3).model;r.Bb(3),r.Vc(" \xa0\xa0",r.nc(4,1,(null==i||null==i.Attachments?null:i.Attachments.length)>0?"UploadMore":"Upload")," ")}}function iX(e,t){if(1&e&&(r.Rc(0,HY,4,3,"div",266),r.Rc(1,tX,2,1,"div",267),r.Rc(2,nX,5,3,"div",268)),2&e){var n=r.lc(2),i=n.model,o=n.isEdit;r.sc("ngIf",!(null!=i&&null!=i.Attachments&&i.Attachments.length||o)),r.Bb(1),r.sc("ngIf",!(null==i||null==i.Attachments||!i.Attachments.length)),r.Bb(1),r.sc("ngIf",o)}}function rX(e,t){if(1&e&&(r.Vb(0,"li",121),r.Vb(1,"a",263),r.Vb(2,"span",264),r.mc(3,"translate"),r.Rc(4,QY,3,0,"span",123),r.Vb(5,"span"),r.Qb(6,"fa-icon",265),r.Vb(7,"span"),r.Tc(8),r.mc(9,"number"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Rc(10,iX,3,3,"ng-template",125),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.Db(i.showBookkeepingTab?"":i.attachmentsClass),r.sc("ngbNavItem",-20),r.Bb(2),r.sc("title",r.nc(3,7,"Document_Attachments")),r.Bb(2),r.sc("ngIf",i.showAttachmentsErrors(n)),r.Bb(4),r.Vc("\xa0\xa0",null!=n&&n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Attachments)?"":"("+r.nc(9,9,null==n||null==n.Attachments?null:n.Attachments.length)+")","")}}function oX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n,i,o=r.lc(4).model,c=r.lc(),a=null==(n=c.manualLine(o))||null==n.EntityMetadata?null:n.EntityMetadata.PostingDate;r.sc("metadata",a),r.Bb(2),r.Uc(r.nc(3,2,null==(i=c.manualLine(o))?null:i.PostingDate))}}function cX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",289),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(4).model;return r.lc().manualLine(t).PostingDate=e})),r.Ub()}if(2&e){var i=r.lc(4).model,o=r.lc();r.sc("ngModel",o.manualLine(i).PostingDate)("ngModelOptions",r.vc(2,zG))}}function aX(e,t){if(1&e&&(r.Vb(0,"t-form-group",84),r.mc(1,"translate"),r.Rc(2,oX,4,4,"t-restricted",80),r.Rc(3,cX,1,3,"t-date-picker",302),r.Ub()),2&e){var n,i=r.lc(3),o=i.model,c=i.isEdit,a=null==(n=r.lc().manualLine(o))||null==n.serverErrors?null:n.serverErrors.PostingDate;r.sc("label",r.nc(1,4,"Line_PostingDate"))("serverErrors",a),r.Bb(2),r.sc("ngIf",!c),r.Bb(1),r.sc("ngIf",c)}}function lX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i,o=r.lc(4).model,c=r.lc(),a=null==(n=c.manualLine(o))||null==n.EntityMetadata?null:n.EntityMetadata.Memo;r.sc("metadata",a),r.Bb(2),r.Uc(null==(i=c.manualLine(o))?null:i.Memo)}}function sX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",289),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(4).model;return r.lc().manualLine(t).Memo=e})),r.Ub()}if(2&e){var i=r.lc(4).model,o=r.lc();r.sc("ngModel",o.manualLine(i).Memo)("ngModelOptions",r.vc(2,zG))}}function uX(e,t){if(1&e&&(r.Vb(0,"t-form-group",84),r.mc(1,"translate"),r.Rc(2,lX,3,2,"t-restricted",80),r.Rc(3,sX,1,3,"t-text-editor",302),r.Ub()),2&e){var n,i=r.lc(3),o=i.model,c=i.isEdit,a=null==(n=r.lc().manualLine(o))||null==n.serverErrors?null:n.serverErrors.Memo;r.sc("label",r.nc(1,4,"Memo"))("serverErrors",a),r.Bb(2),r.sc("ngIf",!c),r.Bb(1),r.sc("ngIf",c)}}function dX(e,t){if(1&e&&(r.Vb(0,"div",301),r.Rc(1,aX,4,6,"t-form-group",35),r.Rc(2,uX,4,6,"t-form-group",35),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(1),r.sc("ngIf",!i.showDocumentPostingDate(n)),r.Bb(1),r.sc("ngIf",!i.showDocumentMemo(n))}}var bX=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:3}},fX=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},mX=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:2}},gX=function(e,t){return{headerTemplate:e,rowTemplate:t}},pX=function(e,t,n,i,r,o){return{AccountId:e,Debit:t,Credit:n,Center:i,Memo:r,Commands:o}};function hX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-table",299),r.hc("insert",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().onInsertManualEntry(e,t)}))("delete",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().onDeleteManualEntry(e,t)})),r.Ub(),r.Rc(1,dX,3,2,"div",300)}if(2&e){var i=r.lc(),o=i.model,c=i.isEdit,a=r.Fc(38),l=r.Fc(40),s=r.Fc(46),u=r.Fc(48),d=r.Fc(50),b=r.Fc(52),f=r.Fc(42),m=r.Fc(44),g=r.Fc(56),p=r.Fc(58),h=r.Fc(64),v=r.Fc(66),y=r.lc();r.sc("dataSource",y.manualEntries(o))("isEdit",c)("itemSize",70)("columnPaths",y.manualColumnPaths(o))("columnTemplates",r.Bc(25,pX,r.xc(7,bX,a,l),r.xc(10,fX,s,u),r.xc(13,fX,d,b),r.xc(16,fX,f,m),r.xc(19,mX,g,p),r.xc(22,gX,h,v)))("onNewItem",y.onNewManualEntry),r.Bb(1),r.sc("ngIf",y.showManualLineProps(o))}}function vX(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Entry_Account"))}function yX(e,t){1&e&&(r.Vb(0,"span",306),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"Undefined")))}function IX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",192),r.Tc(2),r.Ub(),r.Rc(3,yX,3,3,"span",305),r.Ub()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc(2);r.sc("metadata",null==i.EntityMetadata?null:i.EntityMetadata.AccountId),r.Bb(1),r.sc("itemId",null==i?null:i.AccountId),r.Bb(1),r.Vc(" ",c.accountDisplay(null==i?null:i.AccountId),""),r.Bb(1),r.sc("ngIf",o&&!(null!=i&&i.AccountId))}}function CX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-accounts-picker",307),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.entry.AccountId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(),o=i.item.entry,c=i.item,a=i.argument,l=r.lc(2);r.sc("ngModel",o.AccountId)("additionalSelect",l.additionalSelectAccount)("filter",l.filterAccount(c,a))}}function wX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",100),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.CurrencyId),r.Bb(1),r.sc("itemId",n.CurrencyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Currency",n.CurrencyId,"Name")," ")}}function kX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",310),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.CurrencyId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry;r.sc("ngModel",i.CurrencyId)}}function MX(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.mc(2,"translate"),r.Rc(3,wX,3,3,"t-restricted",80),r.Rc(4,kX,1,1,"t-currencies-picker",309),r.Tc(5," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit;r.Bb(1),r.sc("label",r.nc(2,4,"Entry_Currency"))("serverErrors",null==i.serverErrors?null:i.serverErrors.CurrencyId),r.Bb(2),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function VX(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-restricted",82),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Sb()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.Bb(1),r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.MonetaryValue),r.Bb(1),r.Vc(" ",r.oc(3,2,n.MonetaryValue,i.MonetaryValue_format(n))," ")}}function TX(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"t-decimal-editor",311),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.MonetaryValue=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub(),r.Sb()}if(2&e){var i=r.lc(2).item.entry,o=r.lc(2);r.Bb(1),r.sc("ngModel",i.MonetaryValue)("maxDecimalPlaces",o.MonetaryValue_decimals(i))("minDecimalPlaces",o.MonetaryValue_decimals(i))("ngModelOptions",r.vc(4,zG))}}function EX(e,t){if(1&e&&(r.Tb(0),r.Tc(1," \xa0 "),r.Vb(2,"t-restricted",82),r.Tc(3),r.Ub(),r.Sb()),2&e){var n=r.lc(2).item.entry,i=r.lc().isEdit,o=r.lc();r.Bb(2),r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.CurrencyId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Currency",i?o.readonlyValueCurrencyId(n):n.CurrencyId,"Name")," ")}}function UX(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.mc(2,"translate"),r.Rc(3,VX,4,5,"ng-container",29),r.Rc(4,TX,2,5,"ng-container",29),r.Rc(5,EX,4,2,"ng-container",29),r.Tc(6," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",r.nc(2,5,"Entry_MonetaryValue"))("serverErrors",null==i.serverErrors?null:i.serverErrors.MonetaryValue),r.Bb(2),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o),r.Bb(1),r.sc("ngIf",!a.showCurrency(i))}}function xX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).item.entry,o=r.lc(2),c="../../../custodies/"+(null==(n=o.ws.get("Custody",i.CustodyId))?null:n.DefinitionId);r.sc("metadata",null==i.EntityMetadata?null:i.EntityMetadata.CustodyId),r.Bb(1),r.sc("link",c)("itemId",i.CustodyId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Custody",i.CustodyId,"Name")," ")}}function RX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custodies-picker",313),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).item.entry.CustodyId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(3).item.entry,o=r.lc(2);r.sc("ngModel",i.CustodyId)("additionalSelect",o.additionalSelectCustody)("definitionIds",o.definitionIdsCustody_Manual(i))}}function DX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.CustodyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Custody",i.readonlyValueCustodyId_Manual(n),"Name")," ")}}function BX(e,t){if(1&e&&(r.Tb(0),r.Rc(1,RX,1,3,"t-custodies-picker",312),r.Rc(2,DX,2,2,"t-restricted",80),r.Sb()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.Bb(1),r.sc("ngIf",!i.readonlyCustody_Manual(n)),r.Bb(1),r.sc("ngIf",i.readonlyCustody_Manual(n))}}function SX(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,xX,3,4,"t-restricted",80),r.Rc(3,BX,3,2,"ng-container",29),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelCustody_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.CustodyId),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function _X(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).item.entry,o=r.lc(2),c="../../../relations/"+(null==(n=o.ws.get("Relation",i.CustodianId))?null:n.DefinitionId);r.sc("metadata",null==i.EntityMetadata?null:i.EntityMetadata.CustodianId),r.Bb(1),r.sc("link",c)("itemId",i.CustodianId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Relation",i.CustodianId,"Name")," ")}}function OX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",315),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).item.entry.CustodianId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(3).item.entry,o=r.lc(2);r.sc("ngModel",i.CustodianId)("definitionIds",o.definitionIdsCustodian_Manual(i))}}function LX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.CustodianId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Relation",i.readonlyValueCustodianId_Manual(n),"Name")," ")}}function FX(e,t){if(1&e&&(r.Tb(0),r.Rc(1,OX,1,2,"t-relations-picker",314),r.Rc(2,LX,2,2,"t-restricted",80),r.Sb()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.Bb(1),r.sc("ngIf",!i.readonlyCustodian_Manual(n)),r.Bb(1),r.sc("ngIf",i.readonlyCustodian_Manual(n))}}function AX(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,_X,3,4,"t-restricted",80),r.Rc(3,FX,3,2,"ng-container",29),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelCustodian_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.CustodianId),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function PX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).item.entry,o=r.lc(2),c="../../../resources/"+(null==(n=o.ws.get("Resource",i.ResourceId))?null:n.DefinitionId);r.sc("metadata",null==i.EntityMetadata?null:i.EntityMetadata.ResourceId),r.Bb(1),r.sc("link",c)("itemId",i.ResourceId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Resource",i.ResourceId,"Name")," ")}}function NX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resources-picker",313),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).item.entry.ResourceId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(3).item.entry,o=r.lc(2);r.sc("ngModel",i.ResourceId)("additionalSelect",o.additionalSelectResource)("definitionIds",o.definitionIdsResource_Manual(i))}}function jX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.ResourceId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Resource",i.readonlyValueResourceId_Manual(n),"Name")," ")}}function WX(e,t){if(1&e&&(r.Tb(0),r.Rc(1,NX,1,3,"t-resources-picker",312),r.Rc(2,jX,2,2,"t-restricted",80),r.Sb()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.Bb(1),r.sc("ngIf",!i.readonlyResource_Manual(n)),r.Bb(1),r.sc("ngIf",i.readonlyResource_Manual(n))}}function qX(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,PX,3,4,"t-restricted",80),r.Rc(3,WX,3,2,"ng-container",29),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelResource_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.ResourceId),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function QX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",89),r.Tc(2),r.Ub(),r.Ub()),2&e){var n,i=r.lc(2).item.entry,o=r.lc(2),c="../../../relations/"+(null==(n=o.ws.get("Relation",i.ParticipantId))?null:n.DefinitionId);r.sc("metadata",null==i.EntityMetadata?null:i.EntityMetadata.ParticipantId),r.Bb(1),r.sc("link",c)("itemId",i.ParticipantId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("Relation",i.ParticipantId,"Name")," ")}}function HX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",315),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).item.entry.ParticipantId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(3).item.entry,o=r.lc(2);r.sc("ngModel",i.ParticipantId)("definitionIds",o.definitionIdsParticipant_Manual(i))}}function $X(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.ParticipantId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Relation",i.readonlyValueParticipantId_Manual(n),"Name")," ")}}function GX(e,t){if(1&e&&(r.Tb(0),r.Rc(1,HX,1,2,"t-relations-picker",314),r.Rc(2,$X,2,2,"t-restricted",80),r.Sb()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.Bb(1),r.sc("ngIf",!i.readonlyParticipant_Manual(n)),r.Bb(1),r.sc("ngIf",i.readonlyParticipant_Manual(n))}}function zX(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,QX,3,4,"t-restricted",80),r.Rc(3,GX,3,2,"ng-container",29),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelParticipant_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.ParticipantId),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function JX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"span"),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).item.entry;r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.Quantity),r.Bb(2),r.Uc(r.oc(3,2,n.Quantity,"1.0-4"))}}function KX(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",317),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.Quantity=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry;r.sc("ngModel",i.Quantity)("maxDecimalPlaces",4)("minDecimalPlaces",0)("ngModelOptions",r.vc(4,zG))}}function YX(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.mc(2,"translate"),r.Rc(3,JX,4,5,"t-restricted",80),r.Rc(4,KX,1,5,"t-decimal-editor",316),r.Tc(5," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit;r.Bb(1),r.sc("label",r.nc(2,4,"Entry_Quantity"))("serverErrors",null==i.serverErrors?null:i.serverErrors.Quantity),r.Bb(2),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function XX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.UnitId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Unit",n.UnitId,"Name")," ")}}function ZX(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.UnitId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Unit",i.readonlyValueUnitId(n),"Name")," ")}}function eZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-units-picker",319),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).item.entry.UnitId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(3).item.entry,o=r.lc(2);r.sc("ngModel",i.UnitId)("filter",o.filterUnitId(i))}}function tZ(e,t){if(1&e&&(r.Tb(0),r.Rc(1,ZX,2,2,"t-restricted",80),r.Rc(2,eZ,1,2,"t-units-picker",318),r.Sb()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.Bb(1),r.sc("ngIf",i.readonlyUnit(n)),r.Bb(1),r.sc("ngIf",!i.readonlyUnit(n))}}function nZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.mc(2,"translate"),r.Rc(3,XX,2,2,"t-restricted",80),r.Rc(4,tZ,3,2,"ng-container",29),r.Tc(5," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit;r.Bb(1),r.sc("label",r.nc(2,4,"Entry_Unit"))("serverErrors",null==i.serverErrors?null:i.serverErrors.UnitId),r.Bb(2),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function iZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(2).item.entry;r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.Time1),r.Bb(1),r.Vc(" ",r.nc(2,2,n.Time1)," ")}}function rZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",321),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.Time1=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry;r.sc("ngModel",i.Time1)("ngModelOptions",r.vc(2,zG))}}function oZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,iZ,3,4,"t-restricted",80),r.Rc(3,rZ,1,3,"t-date-picker",320),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelTime1_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.Time1),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function cZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc(2).item.entry;r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.Time2),r.Bb(1),r.Vc(" ",r.nc(2,2,n.Time2)," ")}}function aZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",321),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.Time2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry;r.sc("ngModel",i.Time2)("ngModelOptions",r.vc(2,zG))}}function lZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,cZ,3,4,"t-restricted",80),r.Rc(3,aZ,1,3,"t-date-picker",320),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelTime2_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.Time2),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function sZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",193),r.Vb(2,"div",222),r.Tc(3),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.EntryTypeId),r.Bb(1),r.sc("itemId",n.EntryTypeId),r.Bb(2),r.Vc(" ",i.ws.getMultilingualValue("EntryType",n.EntryTypeId,"Name")," ")}}function uZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",323),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).item.entry.EntryTypeId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(3).item.entry,o=r.lc(2);r.sc("ngModel",i.EntryTypeId)("filter",o.filterEntryType_Manual(i))}}function dZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div",222),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(3).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.EntryTypeId),r.Bb(2),r.Vc(" ",i.ws.getMultilingualValue("EntryType",i.readonlyValueEntryTypeId_Manual(n),"Name")," ")}}function bZ(e,t){if(1&e&&(r.Tb(0),r.Rc(1,uZ,1,2,"t-entry-types-picker",322),r.Rc(2,dZ,3,2,"t-restricted",80),r.Sb()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.Bb(1),r.sc("ngIf",!i.readonlyEntryType_Manual(n)),r.Bb(1),r.sc("ngIf",i.readonlyEntryType_Manual(n))}}function fZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.mc(2,"translate"),r.Rc(3,sZ,4,3,"t-restricted",80),r.Rc(4,bZ,3,2,"ng-container",29),r.Tc(5," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit;r.Bb(1),r.sc("label",r.nc(2,4,"Entry_EntryType"))("serverErrors",null==i.serverErrors?null:i.serverErrors.EntryTypeId),r.Bb(2),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function mZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div",222),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).item.entry;r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.ExternalReference),r.Bb(2),r.Vc(" ",n.ExternalReference," ")}}function gZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",325),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.ExternalReference=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry;r.sc("ngModel",i.ExternalReference)}}function pZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,mZ,3,2,"t-restricted",80),r.Rc(3,gZ,1,1,"t-text-editor",324),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelExternalReference_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.ExternalReference),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function hZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div",222),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).item.entry;r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.InternalReference),r.Bb(2),r.Vc(" ",n.InternalReference," ")}}function vZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",325),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.InternalReference=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry;r.sc("ngModel",i.InternalReference)}}function yZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,hZ,3,2,"t-restricted",80),r.Rc(3,vZ,1,1,"t-text-editor",324),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelInternalReference_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.InternalReference),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function IZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div",222),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2).item.entry;r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.NotedAgentName),r.Bb(2),r.Vc(" ",n.NotedAgentName," ")}}function CZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",325),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.NotedAgentName=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry;r.sc("ngModel",i.NotedAgentName)}}function wZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,IZ,3,2,"t-restricted",80),r.Rc(3,CZ,1,1,"t-text-editor",324),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelNotedAgentName_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.NotedAgentName),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function kZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div",222),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.NotedAmount),r.Bb(2),r.Vc(" ",r.oc(3,2,n.NotedAmount,i.MonetaryValue_format(n))," ")}}function MZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",327),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.NotedAmount=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry,o=r.lc(2);r.sc("minDecimalPlaces",o.MonetaryValue_decimals(i))("maxDecimalPlaces",o.MonetaryValue_decimals(i))("ngModel",i.NotedAmount)}}function VZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,kZ,4,5,"t-restricted",80),r.Rc(3,MZ,1,3,"t-decimal-editor",326),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelNotedAmount_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.NotedAmount),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function TZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"div",222),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(2).item.entry;r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.NotedDate),r.Bb(2),r.Vc(" ",r.nc(3,2,n.NotedDate)," ")}}function EZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",325),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.NotedDate=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry;r.sc("ngModel",i.NotedDate)}}function UZ(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",308),r.Rc(2,TZ,4,4,"t-restricted",80),r.Rc(3,EZ,1,1,"t-date-picker",324),r.Tc(4," \xa0\xa0 "),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.item.entry,o=n.argument,c=r.lc().isEdit,a=r.lc();r.Bb(1),r.sc("label",a.labelNotedDate_Manual(i))("serverErrors",null==i.serverErrors?null:i.serverErrors.NotedDate),r.Bb(1),r.sc("ngIf",!c||o),r.Bb(1),r.sc("ngIf",c&&!o)}}function xZ(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"t-form-group-dynamic",179),r.Rc(2,IX,4,4,"t-restricted",80),r.Rc(3,CX,1,3,"t-accounts-picker",303),r.Ub(),r.Ub(),r.Vb(4,"div",304),r.Rc(5,MX,6,6,"ng-container",29),r.Rc(6,UX,7,7,"ng-container",29),r.Rc(7,SX,5,4,"ng-container",29),r.Rc(8,AX,5,4,"ng-container",29),r.Rc(9,qX,5,4,"ng-container",29),r.Rc(10,zX,5,4,"ng-container",29),r.Rc(11,YX,6,6,"ng-container",29),r.Rc(12,nZ,6,6,"ng-container",29),r.Rc(13,oZ,5,4,"ng-container",29),r.Rc(14,lZ,5,4,"ng-container",29),r.Rc(15,fZ,6,6,"ng-container",29),r.Rc(16,pZ,5,4,"ng-container",29),r.Rc(17,yZ,5,4,"ng-container",29),r.Rc(18,wZ,5,4,"ng-container",29),r.Rc(19,VZ,5,4,"ng-container",29),r.Rc(20,UZ,5,4,"ng-container",29),r.Ub()),2&e){var n=t.item.entry,i=r.lc().isEdit,o=r.lc();r.Bb(1),r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.AccountId),r.Bb(1),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(2),r.sc("ngIf",o.showCurrency(n)),r.Bb(1),r.sc("ngIf",o.showMonetaryValue(n)),r.Bb(1),r.sc("ngIf",o.showCustody_Manual(n)),r.Bb(1),r.sc("ngIf",o.showCustodian_Manual(n)),r.Bb(1),r.sc("ngIf",o.showResource_Manual(n)),r.Bb(1),r.sc("ngIf",o.showParticipant_Manual(n)),r.Bb(1),r.sc("ngIf",o.showQuantity(n)),r.Bb(1),r.sc("ngIf",o.showUnit(n)),r.Bb(1),r.sc("ngIf",o.showTime1_Manual(n)),r.Bb(1),r.sc("ngIf",o.showTime2_Manual(n)),r.Bb(1),r.sc("ngIf",o.showEntryType_Manual(n)),r.Bb(1),r.sc("ngIf",o.showExternalReference_Manual(n)),r.Bb(1),r.sc("ngIf",o.showInternalReference_Manual(n)),r.Bb(1),r.sc("ngIf",o.showNotedAgentName_Manual(n)),r.Bb(1),r.sc("ngIf",o.showNotedAmount_Manual(n)),r.Bb(1),r.sc("ngIf",o.showNotedDate_Manual(n))}}function RZ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Entry_Center"))}function DZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Vb(1,"t-view-link",96),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc().item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.CenterId),r.Bb(1),r.sc("itemId",n.CenterId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Center",n.CenterId,"Name")," ")}}function BZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",319),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).item.entry.CenterId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2);return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc(2).item.entry,o=r.lc(2);r.sc("ngModel",i.CenterId)("filter",o.filterCenter_Manual(i))}}function SZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",82),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.CenterId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Center",i.readonlyValueCenterId_Manual(n),"Name")," ")}}function _Z(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"t-form-group-dynamic",179),r.Rc(2,BZ,1,2,"t-centers-picker",318),r.Rc(3,SZ,2,2,"t-restricted",80),r.Ub(),r.Sb()),2&e){var n=r.lc().item.entry,i=r.lc(2);r.Bb(1),r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.CenterId),r.Bb(1),r.sc("ngIf",!i.readonlyCenter_Manual(n)),r.Bb(1),r.sc("ngIf",i.readonlyCenter_Manual(n))}}function OZ(e,t){if(1&e&&(r.Rc(0,DZ,3,3,"t-restricted",80),r.Rc(1,_Z,4,3,"ng-container",29)),2&e){var n=t.argument,i=r.lc().isEdit;r.sc("ngIf",!i||n),r.Bb(1),r.sc("ngIf",i&&!n)}}function LZ(e,t){if(1&e&&(r.Vb(0,"div",328),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Uc(r.nc(2,1,"Debit")+n.functionalPostfix)}}function FZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",330),r.Vb(1,"div",328),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc().item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.Value),r.Bb(2),r.Uc(r.oc(3,2,i.getDebit(n),i.functional_format))}}function AZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group-dynamic",179),r.Vb(1,"t-decimal-editor",331),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(),i=t.item.entry,o=t.item,c=t.update;return r.lc(2).setDebit(i,e),c.call(null,o)})),r.Ub(),r.Ub()}if(2&e){var i=r.lc().item.entry,o=r.lc(2);r.sc("serverErrors",null==i.serverErrors?null:i.serverErrors.Value),r.Bb(1),r.sc("ngModel",o.getDebit(i))("maxDecimalPlaces",o.functional_decimals)("minDecimalPlaces",o.functional_decimals)("ngModelOptions",r.vc(5,zG))}}function PZ(e,t){1&e&&r.Rb(0)}var NZ=function(e,t){return{direction:1,pair:e,bookkeeping:t}};function jZ(e,t){if(1&e&&(r.Rc(0,FZ,4,5,"t-restricted",329),r.Rc(1,AZ,2,6,"t-form-group-dynamic",177),r.Rc(2,PZ,1,0,"ng-container",140)),2&e){var n=t.item,i=t.argument,o=r.lc().isEdit,c=r.Fc(54);r.sc("ngIf",!o||i),r.Bb(1),r.sc("ngIf",o&&!i),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(4,NZ,n,i))}}function WZ(e,t){if(1&e&&(r.Vb(0,"div",328),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Uc(r.nc(2,1,"Credit")+n.functionalPostfix)}}function qZ(e,t){if(1&e&&(r.Vb(0,"t-restricted",330),r.Vb(1,"div",328),r.Tc(2),r.mc(3,"accounting"),r.Ub(),r.Ub()),2&e){var n=r.lc().item.entry,i=r.lc(2);r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.Value),r.Bb(2),r.Uc(r.oc(3,2,i.getCredit(n),i.functional_format))}}function QZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group-dynamic",179),r.Vb(1,"t-decimal-editor",331),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(),i=t.item.entry,o=t.item,c=t.update;return r.lc(2).setCredit(i,e),c.call(null,o)})),r.Ub(),r.Ub()}if(2&e){var i=r.lc().item.entry,o=r.lc(2);r.sc("serverErrors",null==i.serverErrors?null:i.serverErrors.Value),r.Bb(1),r.sc("ngModel",o.getCredit(i))("maxDecimalPlaces",o.functional_decimals)("minDecimalPlaces",o.functional_decimals)("ngModelOptions",r.vc(5,zG))}}function HZ(e,t){1&e&&r.Rb(0)}var $Z=function(e,t,n){return{direction:e,pair:t,bookkeeping:n}};function GZ(e,t){if(1&e&&(r.Rc(0,qZ,4,5,"t-restricted",329),r.Rc(1,QZ,2,6,"t-form-group-dynamic",177),r.Rc(2,HZ,1,0,"ng-container",140)),2&e){var n=t.item,i=t.argument,o=r.lc().isEdit,c=r.Fc(54);r.sc("ngIf",!o||i),r.Bb(1),r.sc("ngIf",o&&!i),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.yc(4,$Z,-1,n,i))}}function zZ(e,t){1&e&&r.Qb(0,"t-spinner")}function JZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",333),r.Rc(1,zZ,1,0,"t-spinner",29),r.Vb(2,"button",334),r.hc("click",(function(){r.Ic(n);var e=r.lc(),t=e.pair,i=e.direction,o=r.lc().model;return r.lc().onAutofillFromExchangeRate(t,o,i)})),r.Qb(3,"fa-icon",335),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(),o=i.pair,c=i.direction;r.Bb(1),r.sc("ngIf",!!o.subscription&&o.direction===c),r.Bb(2),r.sc("title",r.nc(4,2,"AutofillFromExchangeRate"))}}function KZ(e,t){if(1&e&&r.Rc(0,JZ,5,4,"div",332),2&e){var n=t.pair,i=t.bookkeeping,o=r.lc().isEdit,c=r.lc();r.sc("ngIf",!i&&o&&!n.PH&&c.showMonetaryValue(n.entry))}}function YZ(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Uc(r.nc(1,1,"Memo"))}function XZ(e,t){if(1&e&&(r.Vb(0,"div"),r.Vb(1,"t-restricted",82),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc().item.line;r.Bb(1),r.sc("metadata",null==n.EntityMetadata?null:n.EntityMetadata.Memo),r.Bb(1),r.Uc(n.Memo)}}function ZZ(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",321),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().item.line.Memo=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc();return e.update.call(null,e.item)})),r.Ub()}if(2&e){var i=r.lc().item.line;r.sc("ngModel",i.Memo)("ngModelOptions",r.vc(2,zG))}}function e1(e,t){if(1&e&&(r.Vb(0,"t-form-group-dynamic",179),r.Rc(1,XZ,3,2,"div",29),r.Rc(2,ZZ,1,3,"t-text-editor",320),r.Ub()),2&e){var n=t.item.line,i=t.argument,o=r.lc().isEdit;r.sc("serverErrors",null==n.serverErrors?null:n.serverErrors.Memo),r.Bb(1),r.sc("ngIf",!o||i),r.Bb(1),r.sc("ngIf",o&&!i)}}function t1(e,t){if(1&e&&(r.Qb(0,"fa-icon",337),r.mc(1,"translate")),2&e){var n=r.lc(3);r.sc("placement",n.modifiedTooltipPlacement)("ngbTooltip",r.nc(1,2,"ModifiedLineWarning"))}}function n1(e,t){if(1&e&&r.Rc(0,t1,2,4,"fa-icon",336),2&e){var n=t.item.line,i=r.lc().model,o=r.lc();r.sc("ngIf",o.getIsModified(n,i))}}function i1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",250),r.hc("click",(function(){r.Ic(n);var e=r.lc().item,t=r.lc(),i=t.model,o=t.isEdit;return r.lc().onReverse(e,i,o)})),r.Tc(1),r.mc(2,"translate"),r.Ub()}2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"Reverse")," "))}function r1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",245),r.Vb(1,"button",246),r.Vb(2,"span",247),r.Qb(3,"fa-icon",248),r.Ub(),r.Ub(),r.Vb(4,"div",249),r.Vb(5,"button",250),r.hc("click",(function(){r.Ic(n);var e=t.item.line,i=r.lc().model;return r.lc().toggleHighlight(e,i)})),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Rc(8,i1,3,3,"button",251),r.Ub(),r.Ub()}if(2&e){var i=t.item.line,o=r.lc(),c=o.model,a=o.isEdit,l=r.lc();r.sc("placement",l.commandsDropdownPlacement),r.Bb(6),r.Vc(" ",r.nc(7,3,l.isHighlighted(i,c)?"RemoveHighlight":"AddHighlight")," "),r.Bb(2),r.sc("ngIf",l.hasManualLines&&a)}}function o1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",245),r.Vb(1,"button",246),r.Vb(2,"span",247),r.Qb(3,"fa-icon",248),r.Ub(),r.Ub(),r.Vb(4,"div",249),r.Vb(5,"button",250),r.hc("click",(function(){r.Ic(n);var e=r.lc(2),t=e.model,i=e.isEdit;return r.lc().onDeleteAllManualEntries(t,i)})),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.sc("placement",i.commandsDropdownPlacement),r.Bb(6),r.Vc(" ",r.nc(7,2,"DeleteAll")," ")}}function c1(e,t){if(1&e&&r.Rc(0,o1,8,4,"div",244),2&e){var n=r.lc().isEdit;r.sc("ngIf",n)}}function a1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",245),r.Vb(1,"button",252),r.Vb(2,"span",247),r.Qb(3,"fa-icon",253),r.Ub(),r.Ub(),r.Vb(4,"div",249),r.Vb(5,"button",250),r.hc("click",(function(){r.Ic(n);var e=r.lc(),t=e.item,i=e.update,o=r.lc().model;return r.lc().onAutoBalance(t,o,i)})),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Vb(8,"button",250),r.hc("click",(function(){r.Ic(n);var e=r.lc().item,t=r.lc(),i=t.model,o=t.isEdit;return r.lc().onCloneManualLine(e,i,o)})),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.sc("placement",i.commandsDropdownPlacement),r.Bb(6),r.Vc(" ",r.nc(7,3,"AutoBalance")," "),r.Bb(3),r.Vc(" ",r.nc(10,5,"Clone")," ")}}function l1(e,t){if(1&e&&r.Rc(0,a1,11,7,"div",244),2&e){var n=r.lc().isEdit;r.sc("ngIf",n)}}function s1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",31),r.Rc(1,GG,2,1,"h2",32),r.Rc(2,JG,1,5,"t-serial-editor",33),r.Ub(),r.Rc(3,XG,3,6,"t-form-group",34),r.Rc(4,tz,4,6,"t-form-group",35),r.Rc(5,oz,2,6,"t-form-group",36),r.Rc(6,sz,2,6,"t-form-group",37),r.Rc(7,fz,2,6,"t-form-group",38),r.Rc(8,hz,2,6,"t-form-group",39),r.Rc(9,Iz,3,6,"t-form-group",40),r.Rc(10,Mz,2,6,"t-form-group",41),r.Rc(11,Uz,2,6,"t-form-group",42),r.Rc(12,Bz,2,6,"t-form-group",43),r.Rc(13,Lz,2,6,"t-form-group",44),r.Rc(14,Nz,2,6,"t-form-group",45),r.Rc(15,Qz,2,6,"t-form-group",46),r.Rc(16,zz,2,6,"t-form-group",47),r.Rc(17,Yz,4,8,"t-form-group",48),r.Rc(18,Xz,4,7,"ng-template",null,49,r.Sc),r.Rc(20,Zz,4,7,"ng-template",null,50,r.Sc),r.Rc(22,eJ,8,4,"ng-template",null,51,r.Sc),r.Vb(24,"ul",52,53),r.hc("activeIdChange",(function(e){return r.Ic(n),r.lc().setActiveTab(e)})),r.Rc(26,RY,11,7,"li",54),r.Rc(27,BY,1,1,"ng-template",null,55,r.Sc),r.Rc(29,_Y,6,1,"li",56),r.Rc(30,qY,9,12,"li",57),r.Rc(31,rX,11,11,"li",57),r.Ub(),r.Qb(32,"div",58),r.Vb(33,"input",59,60),r.hc("change",(function(){r.Ic(n);var e=t.model,i=r.Fc(34);return r.lc().onFileSelected(i,e)})),r.Ub(),r.Rc(35,hX,2,32,"ng-template",null,61,r.Sc),r.Rc(37,vX,2,3,"ng-template",null,62,r.Sc),r.Rc(39,xZ,21,19,"ng-template",null,63,r.Sc),r.Rc(41,RZ,2,3,"ng-template",null,64,r.Sc),r.Rc(43,OZ,2,2,"ng-template",null,65,r.Sc),r.Rc(45,LZ,3,3,"ng-template",null,66,r.Sc),r.Rc(47,jZ,3,7,"ng-template",null,67,r.Sc),r.Rc(49,WZ,3,3,"ng-template",null,68,r.Sc),r.Rc(51,GZ,3,8,"ng-template",null,69,r.Sc),r.Rc(53,KZ,1,1,"ng-template",null,70,r.Sc),r.Rc(55,YZ,2,3,"ng-template",null,71,r.Sc),r.Rc(57,e1,3,3,"ng-template",null,72,r.Sc),r.Rc(59,n1,1,1,"ng-template",null,73,r.Sc),r.Rc(61,r1,9,5,"ng-template",null,74,r.Sc),r.Rc(63,c1,1,1,"ng-template",null,75,r.Sc),r.Rc(65,l1,1,1,"ng-template",null,76,r.Sc)}if(2&e){var i=t.model,o=t.isEdit,c=r.Fc(25),a=r.lc();r.sc("serverErrors",null==i||null==i.serverErrors?null:i.serverErrors.SerialNumber),r.Bb(1),r.sc("ngIf",!o||a.isOriginalDocument),r.Bb(1),r.sc("ngIf",o&&!a.isOriginalDocument),r.Bb(1),r.sc("ngIf",a.showDocumentPostingDate(i)),r.Bb(1),r.sc("ngIf",a.showClearance(i)),r.Bb(1),r.sc("ngIf",a.showDocumentCustodian(i)),r.Bb(1),r.sc("ngIf",a.showDocumentCustody(i)),r.Bb(1),r.sc("ngIf",a.showDocumentParticipant(i)),r.Bb(1),r.sc("ngIf",a.showDocumentResource(i)),r.Bb(1),r.sc("ngIf",a.showDocumentCenter(i)),r.Bb(1),r.sc("ngIf",a.showDocumentCurrency(i)),r.Bb(1),r.sc("ngIf",a.showDocumentQuantity(i)),r.Bb(1),r.sc("ngIf",a.showDocumentUnit(i)),r.Bb(1),r.sc("ngIf",a.showDocumentTime1(i)),r.Bb(1),r.sc("ngIf",a.showDocumentTime2(i)),r.Bb(1),r.sc("ngIf",a.showDocumentExternalReference(i)),r.Bb(1),r.sc("ngIf",a.showDocumentInternalReference(i)),r.Bb(1),r.sc("ngIf",a.showDocumentMemo(i)),r.Bb(7),r.sc("destroyOnHide",!0)("activeId",a.getActiveTab(i)),r.Bb(2),r.sc("ngForOf",a.visibleTabs(i)),r.Bb(3),r.sc("ngIf",o&&a.invisibleTabs(i).length>0),r.Bb(1),r.sc("ngIf",a.showBookkeepingTab),r.Bb(1),r.sc("ngIf",a.showAttachmentsTab),r.Bb(1),r.sc("ngbNavOutlet",c)}}function u1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",345),r.Vb(1,"div",346),r.Vb(2,"label",347),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"div",348),r.Vb(6,"t-users-picker",349),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).assigneeId=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",346),r.Vb(8,"textarea",350),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).comment=e})),r.mc(9,"translate"),r.Ub(),r.Ub(),r.Vb(10,"button",351),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onAssign(e)})),r.Tc(11),r.mc(12,"translate"),r.Qb(13,"fa-icon",119),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2),o=i.model,c=i.isEdit,a=r.lc();r.Qc("margin-left",a.marginLeft,"px")("margin-right",a.marginRight,"px"),r.Bb(3),r.Uc(r.nc(4,13,"AssignTo")),r.Bb(3),r.sc("ngModel",a.assigneeId)("filter","Id ne "+o.AssigneeId)("showCreate",!1),r.Bb(2),r.tc("placeholder",r.nc(9,15,"OptionalMessage")),r.sc("ngModel",a.comment),r.Bb(2),r.sc("disabled",!a.canAssign(o,c)),r.Bb(1),r.Vc("",r.nc(12,17,"Assign"),"\xa0\xa0"),r.Bb(2),r.sc("icon",a.assignIcon)}}function d1(e,t){if(1&e&&(r.Vb(0,"div",341),r.Vb(1,"div",342),r.Qb(2,"t-image",230),r.Vb(3,"div",343),r.Vb(4,"t-view-link",232),r.Tc(5),r.Ub(),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Rc(8,u1,14,19,"div",344),r.Ub()),2&e){var n,i=r.lc().model,o=r.lc(),c=null==(n=o.ws.get("User",i.AssigneeId))?null:n.ImageId;r.Bb(2),r.sc("src","users/"+i.AssigneeId+"/image")("imageId",c)("size",o.picSize),r.Bb(2),r.sc("itemId",i.AssigneeId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("User",i.AssigneeId,"Name"),""),r.Bb(1),r.Vc(" ",r.nc(7,7,"OwnsThisDocument")," "),r.Bb(2),r.sc("ngIf",o.showAssignDocument(i))}}function b1(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",342),r.Qb(2,"t-image",230),r.Vb(3,"div",343),r.Vb(4,"t-view-link",232),r.Tc(5),r.Ub(),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Vb(8,"div",354),r.Vb(9,"span",355),r.Tc(10),r.mc(11,"timeFormat"),r.Ub(),r.Ub(),r.Ub(),r.Sb()),2&e){var n,i=r.lc().$implicit,o=r.lc(3),c=null==(n=o.ws.get("User",i.userId))?null:n.ImageId;r.Bb(2),r.sc("src","users/"+i.userId+"/image")("imageId",c)("size",36),r.Bb(2),r.sc("itemId",i.userId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("User",i.userId,"Name"),""),r.Bb(1),r.Vc(" ",r.nc(7,7,o.stateUpdateDisplay(i))," "),r.Bb(4),r.Vc(" ",r.nc(11,9,i.time)," ")}}function f1(e,t){if(1&e&&(r.Vb(0,"div",361),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit,i=r.lc(3);r.Qc("margin-left",i.marginLeft,"px")("margin-right",i.marginRight,"px"),r.Bb(1),r.Vc(" ",i.reassignment(n).comment," ")}}function m1(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",356),r.Qb(2,"t-image",230),r.Vb(3,"div",343),r.Vb(4,"t-view-link",232),r.Tc(5),r.Ub(),r.Ub(),r.Tc(6," \xa0 "),r.Vb(7,"div",357),r.Qb(8,"fa-icon",358),r.Ub(),r.Tc(9," \xa0 \xa0 "),r.Qb(10,"t-image",230),r.Vb(11,"div",343),r.Vb(12,"t-view-link",232),r.Tc(13),r.Ub(),r.Ub(),r.Vb(14,"div",354),r.Vb(15,"span",359),r.Tc(16),r.mc(17,"timeFormat"),r.Ub(),r.Ub(),r.Ub(),r.Rc(18,f1,2,5,"div",360),r.Sb()),2&e){var n,i,o=r.lc().$implicit,c=r.lc(3),a=null==(n=c.ws.get("User",o.userId))?null:n.ImageId,l=null==(i=c.ws.get("User",c.reassignment(o).assigneeId))?null:i.ImageId;r.Bb(2),r.sc("src","users/"+o.userId+"/image")("imageId",a)("size",36),r.Bb(2),r.sc("itemId",o.userId),r.Bb(1),r.Vc(" ",c.ws.getMultilingualValue("User",o.userId,"Name")," "),r.Bb(3),r.sc("flip",c.flip)("size",120),r.Bb(2),r.sc("src","users/"+c.reassignment(o).assigneeId+"/image")("imageId",l)("size",36),r.Bb(2),r.sc("itemId",c.reassignment(o).assigneeId),r.Bb(1),r.Vc(" ",c.ws.getMultilingualValue("User",c.reassignment(o).assigneeId,"Name")," "),r.Bb(3),r.Vc(" ",r.nc(17,14,o.time)," "),r.Bb(2),r.sc("ngIf",!!c.reassignment(o).comment)}}function g1(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",342),r.Qb(2,"t-image",230),r.Vb(3,"div",343),r.Vb(4,"t-view-link",232),r.Tc(5),r.Ub(),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Vb(8,"div",354),r.Vb(9,"span",355),r.Tc(10),r.mc(11,"timeFormat"),r.Ub(),r.Ub(),r.Ub(),r.Sb()),2&e){var n,i=r.lc().$implicit,o=r.lc(3),c=null==(n=o.ws.get("User",i.userId))?null:n.ImageId;r.Bb(2),r.sc("src","users/"+i.userId+"/image")("imageId",c)("size",36),r.Bb(2),r.sc("itemId",i.userId),r.Bb(1),r.Vc(" ",o.ws.getMultilingualValue("User",i.userId,"Name"),""),r.Bb(1),r.Vc(" ",r.nc(7,7,"CreatedThisDocument")," "),r.Bb(4),r.Vc(" ",r.nc(11,9,i.time)," ")}}function p1(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",353),r.Rc(2,b1,12,11,"ng-container",190),r.Rc(3,m1,19,16,"ng-container",190),r.Rc(4,g1,12,11,"ng-container",190),r.Ub(),r.Sb()),2&e){var n=t.$implicit,i=t.index;r.Bb(1),r.Gb("border-top",0===i),r.sc("ngSwitch",n.type),r.Bb(1),r.sc("ngSwitchCase","state"),r.Bb(1),r.sc("ngSwitchCase","reassignment"),r.Bb(1),r.sc("ngSwitchCase","creation")}}function h1(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",352),r.Tc(2),r.Ub(),r.Rc(3,p1,5,6,"ng-container",141),r.Sb()),2&e){var n=t.$implicit;r.Bb(2),r.Uc(n.date),r.Bb(1),r.sc("ngForOf",n.events)}}function v1(e,t){if(1&e&&(r.Vb(0,"div",338),r.Vb(1,"div",339),r.Rc(2,d1,9,9,"div",340),r.Rc(3,h1,4,2,"ng-container",141),r.Ub(),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(2),r.sc("ngIf",!!n.AssigneeId),r.Bb(1),r.sc("ngForOf",i.sortChronologically(n))}}function y1(e,t){if(1&e&&(r.Vb(0,"div",362),r.Vb(1,"h5",363),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",364),r.hc("click",(function(){return t.$implicit.dismiss(!1)})),r.Vb(5,"span",365),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",366),r.Tc(8),r.Ub(),r.Vb(9,"div",367),r.Vb(10,"button",368),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(11,"fa-icon",22),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Vb(14,"button",369),r.hc("click",(function(){return t.$implicit.close(!1)})),r.Qb(15,"fa-icon",20),r.Tc(16),r.mc(17,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,4,"Confirmation")," "),r.Bb(6),r.Vc(" ",n.confirmationMessage," "),r.Bb(4),r.Vc(" \xa0",r.nc(13,6,"Yes")," "),r.Bb(4),r.Vc(" \xa0",r.nc(17,8,"No")," ")}}function I1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",373),r.Vb(1,"div",374),r.Vb(2,"span",375),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"t-users-picker",376),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).onBehalfOfUserId=e})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(3),r.Uc(r.nc(4,2,"Signature_OnBehalfOfUser")),r.Bb(2),r.sc("ngModel",i.onBehalfOfUserId)}}function C1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",377),r.Vb(1,"div",374),r.Vb(2,"span",375),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"t-selector",86),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reasonId=e})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(3),r.Uc(r.nc(4,3,"Signature_Reason")),r.Bb(2),r.sc("ngModel",i.reasonId)("choices",i.reasonChoicesForNegativeModal)}}function w1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",373),r.Vb(1,"div",374),r.Vb(2,"span",375),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"t-text-editor",321),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reasonDetails=e})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(3),r.Uc(r.nc(4,3,"Signature_ReasonDetails")),r.Bb(2),r.sc("ngModel",i.reasonDetails)("ngModelOptions",r.vc(5,zG))}}function k1(e,t){if(1&e&&(r.Vb(0,"div",362),r.Vb(1,"h5",363),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",364),r.hc("click",(function(){return t.$implicit.dismiss(!1)})),r.Vb(5,"span",365),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",366),r.Rc(8,I1,6,4,"div",370),r.Rc(9,C1,6,5,"div",371),r.Rc(10,w1,6,6,"div",370),r.Ub(),r.Vb(11,"div",367),r.Vb(12,"button",372),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(13,"fa-icon",22),r.Tc(14),r.mc(15,"translate"),r.Ub(),r.Vb(16,"button",369),r.hc("click",(function(){return t.$implicit.close(!1)})),r.Qb(17,"fa-icon",20),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,11,"AdditionalInformation")," "),r.Bb(6),r.sc("ngIf",n.onBehalfOfUserAmbiguous),r.Bb(1),r.sc("ngIf",n.isNegative&&(null==n.reasonChoicesForNegativeModal?null:n.reasonChoicesForNegativeModal.length)>0),r.Bb(1),r.sc("ngIf",n.isNegative),r.Bb(2),r.Gb("btn-danger",n.isNegative)("btn-success",!n.isNegative),r.sc("disabled",n.onBehalfOfUserAmbiguous&&!n.onBehalfOfUserId),r.Bb(2),r.Vc(" \xa0",r.nc(15,13,"Confirm")," "),r.Bb(4),r.Vc(" \xa0",r.nc(19,15,"Cancel")," ")}}var M1=function(e){return{updateOn:e}};function V1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",381),r.Vb(1,"t-editor",382),r.hc("ngModelChange",(function(e){r.Ic(n);var i=t.$implicit;return r.lc(2).autoGenerateArgs[i.Key]=e})),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2);r.sc("label",o.parameterLabel(i)),r.Bb(1),r.sc("ngModel",o.autoGenerateArgs[i.Key])("desc",o.parameterDesc(i))("ngModelOptions",r.wc(4,M1,o.updateOn(i)))}}function T1(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",362),r.Vb(1,"h5",363),r.Tc(2),r.Ub(),r.Vb(3,"button",364),r.hc("click",(function(){return t.$implicit.dismiss(!1)})),r.Vb(4,"span",365),r.Tc(5,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",366),r.Rc(7,V1,2,6,"t-form-group",378),r.Ub(),r.Vb(8,"div",367),r.Vb(9,"button",379),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc().onDoAutoGenerate(e)})),r.Qb(10,"fa-icon",380),r.Tc(11),r.Ub(),r.Vb(12,"button",369),r.hc("click",(function(){return t.$implicit.close(!1)})),r.Qb(13,"fa-icon",20),r.Tc(14),r.mc(15,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Vc(" ",i.autoGenerateLabel(i.autoGenerateLineDefId)," "),r.Bb(5),r.sc("ngForOf",i.autoGenerateLineDef.GenerateParameters)("ngForTrackBy",i.trackByKey),r.Bb(2),r.sc("disabled",!i.autoGenerateRequiredParamsAreSet),r.Bb(2),r.Vc(" \xa0",i.autoGenerateLabel(i.autoGenerateLineDefId)," "),r.Bb(3),r.Vc(" \xa0",r.nc(15,6,"Cancel")," ")}}var E1,U1=((E1=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o,c,a){var l;return _classCallCheck(this,n),(l=t.call(this)).workspace=e,l.api=i,l.translate=r,l.route=o,l.modalService=c,l.audio=a,l.documentsApi=l.api.documentsApi(null,l.notifyDestruct$),l.localState=new S.e,l.picSize=36,l.selectBase="$Details",l.additionalSelectAccount="$DocumentDetails",l.additionalSelectResource="$DocumentDetails",l.additionalSelectCustody="$DocumentDetails",l.additionalSelectRelation="$DocumentDetails",l.encodeCustomStateFunc=function(e){var t=l.state.detailsState;t.tab&&(e.tab=t.tab)},l.create=function(){var e={Clearance:0,LineDefinitionEntries:[],Lines:[],Attachments:[]};return l.isJV?(e.PostingDate=Object(Oi.e)(),e.PostingDateIsCommon=!0,e.MemoIsCommon=!0,e.CurrencyIsCommon=!1,e.CenterIsCommon=!1,e.CustodianIsCommon=!1,e.CustodyIsCommon=!1,e.ParticipantIsCommon=!1,e.ResourceIsCommon=!1,e.QuantityIsCommon=!1,e.UnitIsCommon=!1,e.Time1IsCommon=!1,e.Time2IsCommon=!1,e.ExternalReferenceIsCommon=!1,e.InternalReferenceIsCommon=!1):(l.definition.HasWorkflow||(e.PostingDate=Object(Oi.e)()),e.PostingDateIsCommon=!0,e.MemoIsCommon=!0,e.CurrencyIsCommon=!0,e.CenterIsCommon=!0,e.CustodianIsCommon=!0,e.CustodyIsCommon=!0,e.ParticipantIsCommon=!0,e.ResourceIsCommon=!0,e.QuantityIsCommon=!0,e.UnitIsCommon=!0,e.Time1IsCommon=!0,e.Time2IsCommon=!0,e.ExternalReferenceIsCommon=!0,e.InternalReferenceIsCommon=!0),e},l.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,delete t.EntityMetadata,delete t.serverErrors,delete t.SerialNumber,t.Attachments=[],delete t.State,delete t.StateAt,delete t.Comment,delete t.AssigneeId,delete t.AssignedAt,delete t.AssignedById,delete t.OpenedAt,delete t.CreatedAt,delete t.CreatedById,delete t.ModifiedAt,delete t.ModifiedById,t.AssignmentsHistory=[],t.StatesHistory=[],t.LineDefinitionEntries&&t.LineDefinitionEntries.forEach((function(e){e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.DocumentId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById})),t.Lines&&t.Lines.forEach((function(e){e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.DocumentId,delete e.State,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById,e.Entries&&e.Entries.forEach(l.processEntryClone)})),t}return console.error("Cloning a non existing item"),null},l._sortChronologicallyResult=[],l.registerPristineFunc=function(e){l._pristineDocJson=JSON.stringify(e)},l.isDirtyFunc=function(e){return!!(e&&e.Attachments&&e.Attachments.some((function(e){return!!e.File})))||l._pristineDocJson!==JSON.stringify(e)},l.extraParams={includeRequiredSignatures:!0},l._requiredSignatureProps=["ToState","RuleType","RoleId","CustodianId","UserId","SignedById","SignedAt","OnBehalfOfUserId","LastUnsignedState","LastNegativeState","CanSign","ProxyRoleId","CanSignOnBehalf","ReasonId","ReasonDetails"],l.onNewManualEntry=function(e){return e.entry={Id:0,Direction:1},e},l._defaultTabEntry={PostingDateIsCommon:!0,MemoIsCommon:!0,CurrencyIsCommon:!0,CenterIsCommon:!0,CustodianIsCommon:!0,CustodyIsCommon:!0,ParticipantIsCommon:!0,ResourceIsCommon:!0,QuantityIsCommon:!0,UnitIsCommon:!0,Time1IsCommon:!0,Time2IsCommon:!0,ExternalReferenceIsCommon:!0,InternalReferenceIsCommon:!0},l._smartTabHeaderColumnPathsIsCommonHasChanged=!1,l._smartColumnIndicesIsCommonHasChanged=!1,l.savePreprocessing=function(e){var t,n=_createForOfIteratorHelper(l.definition.LineDefinitions.map((function(e){return e.LineDefinitionId})));try{for(n.s();!(t=n.n()).done;){var i,r=t.value,o=_createForOfIteratorHelper(l.lineDefinition(r).Columns);try{for(o.s();!(i=o.n()).done;){var c=i.value;l.tabEntry(r,c,e)||l.addNewTabEntry(r,c,e)}}catch(a){o.e(a)}finally{o.f()}}}catch(a){n.e(a)}finally{n.f()}},l.dummyUpdate=function(){},l.isNegativeStateActive=function(e,t){return l.isStateActive(-e,t)},l.isNegativeDocumentStateActive=function(e,t){return l.isDocumentStateActive(-e,t)},l._flags={},l._documentStateResult=null,l.autoGenerateArgs={},l.attentionItem=null,l._barcodeScanCount={},l._isBarcodeLoading={},l}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this,t=function(t){if(e.isScreenMode){e.definitionId=+t.get("definitionId")||null;var n=e.state.detailsState,i=!1,r=+t.get("tab");r?n.tab=r:n.tab&&(i=!0),i&&e.details&&e.details.urlStateChange()}};this._subscriptions.add(this.route.paramMap.pipe(Object(_i.a)(1)).subscribe(t)),t(this.route.snapshot.paramMap)}},{key:"setActiveTab",value:function(e){var t=this;this.state.detailsState.tab=e,setTimeout((function(){t.details.urlStateChange()}))}},{key:"getActiveTab",value:function(e){var t=this.state.detailsState;if(this.showAttachmentsTab&&-20===t.tab||this.showBookkeepingTab&&-10===t.tab)return t.tab;var n=this.visibleTabs(e);return n.some((function(e){return e===t.tab}))?t.tab:n[0]||(this.showBookkeepingTab?-10:null)||(this.showAttachmentsTab?-20:null)}},{key:"isManualLine",value:function(e){return e===this.ws.definitions.ManualLinesDefinitionId}},{key:"processEntryClone",value:function(e){return e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.LineId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById,e}},{key:"formatSerial",value:function(e){if(!e)return"(".concat(this.translate.instant("New"),")");var t=this.definition;return Object(zv.a)(e,t.Prefix,t.CodeWidth||4)}},{key:"isInactive",value:function(e){return e?1===e.State?"Error_OpenDocumentBeforeEdit":-1===e.State?"Error_UncancelDocumentBeforeEdit":null:""}},{key:"getDebit",value:function(e){return this.isDebit(e)?e.Value:null}},{key:"setDebit",value:function(e,t){e.Value=t,e.Direction=1}},{key:"getCredit",value:function(e){return this.isCredit(e)?e.Value:null}},{key:"setCredit",value:function(e,t){e.Value=t,e.Direction=-1}},{key:"isCredit",value:function(e){return-1===e.Direction}},{key:"isDebit",value:function(e){return 1===e.Direction}},{key:"sortChronologically",value:function(e){if(!e)return null;if(e!==this._sortChronologicallyDoc){this._sortChronologicallyDoc=e;var t=e.StatesHistory||[],n=(e.AssignmentsHistory||[]).map((function(e){return{type:"reassignment",time:e.CreatedAt,userId:e.CreatedById,assigneeId:e.AssigneeId,comment:e.Comment}})),i=t.map((function(e){return{type:"state",userId:e.ModifiedById,time:e.ModifiedAt,fromState:e.FromState,toState:e.ToState}})),r=n.concat(i);e.CreatedById&&r.push({type:"creation",userId:e.CreatedById,time:e.CreatedAt});var o,c=r.sort((function(e,t){return e.time<t.time?1:e.time>t.time?-1:0})),a={},l=_createForOfIteratorHelper(c);try{for(l.s();!(o=l.n()).done;){var s=o.value,u=Object(Oi.c)(new Date(s.time));a[u]||(a[u]=[]),a[u].push(s)}}catch(d){l.e(d)}finally{l.f()}this._sortChronologicallyResult=Object.keys(a).map((function(e){return{date:e,events:a[e]}}))}return this._sortChronologicallyResult}},{key:"reassignment",value:function(e){return e}},{key:"showAssignDocument",value:function(e){return!!e&&!!e.AssigneeId}},{key:"stateUpdateDisplay",value:function(e){return 1===e.toState?"ClosedThisDocument":-1===e.toState?"CanceledThisDocument":1===e.fromState?"OpenedThisDocument":"UncanceledThisDocument"}},{key:"onAssign",value:function(e){var t=this;this.assigneeId&&this.documentsApi.assign([e.Id],{returnEntities:!0,select:this.select,assigneeId:this.assigneeId,comment:this.comment},{includeRequiredSignatures:!0}).pipe(Object(P.a)((function(e){Object(W.c)(e,t.workspace),t.details.state.extras=e.Extras,t.handleFreshExtras(e.Extras),t.assigneeId=null,t.comment=null}))).subscribe({error:this.details.handleActionError})}},{key:"canAssign",value:function(e,t){return!!this.assigneeId&&!t}},{key:"showClearance",value:function(e){return!!this.definition.ClearanceVisibility}},{key:"clearanceDisplay",value:function(e){return null==e?"":Object(zv.c)(this.workspace,this.translate,null).properties.Clearance.format(e)}},{key:"showDocumentPostingDate",value:function(e){return!!this.definition.PostingDateVisibility}},{key:"showDocumentPostingDateIsCommon",value:function(e){return this.definition.PostingDateIsCommonVisibility}},{key:"requireDocumentPostingDate",value:function(e){return this.computeDocumentSettings(e),"Required"===this.definition.PostingDateVisibility||this._requireDocumentPostingDate}},{key:"readonlyDocumentPostingDate",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentPostingDate&&!this.isJV}},{key:"labelDocumentPostingDate",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"PostingDateLabel")||this.translate.instant("Document_PostingDate")}},{key:"showDocumentCenter",value:function(e){return!!this.definition.CenterVisibility&&!this.ws.settings.SingleBusinessUnitId}},{key:"showDocumentCenterIsCommon",value:function(e){return this.definition.CenterIsCommonVisibility}},{key:"requireDocumentCenter",value:function(e){return this.computeDocumentSettings(e),"Required"===this.definition.CenterVisibility||this._requireDocumentCenter}},{key:"readonlyDocumentCenter",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentCenter&&!this.isJV}},{key:"labelDocumentCenter",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"CenterLabel")||this.translate.instant("Document_Center")}},{key:"filterDocumentCenter",value:function(e){return this.definition.CenterFilter}},{key:"showDocumentMemo",value:function(e){return!!this.definition.MemoVisibility}},{key:"showDocumentMemoIsCommon",value:function(e){return this.definition.MemoIsCommonVisibility}},{key:"requireDocumentMemo",value:function(e){return this.computeDocumentSettings(e),"Required"===this.definition.MemoVisibility||this._requireDocumentMemo}},{key:"readonlyDocumentMemo",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentMemo&&!this.isJV}},{key:"labelDocumentMemo",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"MemoLabel")||this.translate.instant("Memo")}},{key:"showDocumentCurrency",value:function(e){return this.definition.CurrencyVisibility}},{key:"requireDocumentCurrency",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentCurrency}},{key:"readonlyDocumentCurrency",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentCurrency}},{key:"labelDocumentCurrency",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"CurrencyLabel")||this.translate.instant("Entry_Currency")}},{key:"filterDocumentCurrency",value:function(e){return this.definition.CurrencyFilter}},{key:"showDocumentCustodian",value:function(e){return this.definition.CustodianVisibility}},{key:"requireDocumentCustodian",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentCustodian}},{key:"readonlyDocumentCustodian",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentCustodian}},{key:"labelDocumentCustodian",value:function(e){var t=this.ws.getMultilingualValueImmediate(this.definition,"CustodianLabel");if(t)return t;if(1===this.definition.CustodianDefinitionIds.length){var n=this.ws.definitions.Relations[this.definition.CustodianDefinitionIds[0]];n&&(t=this.ws.getMultilingualValueImmediate(n,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Custodian")),t}},{key:"documentCustodianDefinitionIds",value:function(e){return this.definition.CustodianDefinitionIds}},{key:"filterDocumentCustodian",value:function(e){return this.definition.CustodianFilter}},{key:"showDocumentCustody",value:function(e){return this.definition.CustodyVisibility}},{key:"requireDocumentCustody",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentCustody}},{key:"readonlyDocumentCustody",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentCustody}},{key:"labelDocumentCustody",value:function(e){var t=this.ws.getMultilingualValueImmediate(this.definition,"CustodyLabel");if(t)return t;if(1===this.definition.CustodyDefinitionIds.length){var n=this.ws.definitions.Custodies[this.definition.CustodyDefinitionIds[0]];n&&(t=this.ws.getMultilingualValueImmediate(n,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Custody")),t}},{key:"documentCustodyDefinitionIds",value:function(e){return this.definition.CustodyDefinitionIds}},{key:"filterDocumentCustody",value:function(e){return this.definition.CustodyFilter}},{key:"showDocumentParticipant",value:function(e){return this.definition.ParticipantVisibility}},{key:"requireDocumentParticipant",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentParticipant}},{key:"readonlyDocumentParticipant",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentParticipant}},{key:"labelDocumentParticipant",value:function(e){var t=this.ws.getMultilingualValueImmediate(this.definition,"ParticipantLabel");if(t)return t;if(1===this.definition.ParticipantDefinitionIds.length){var n=this.ws.definitions.Relations[this.definition.ParticipantDefinitionIds[0]];n&&(t=this.ws.getMultilingualValueImmediate(n,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Participant")),t}},{key:"documentParticipantDefinitionIds",value:function(e){return this.definition.ParticipantDefinitionIds}},{key:"filterDocumentParticipant",value:function(e){return this.definition.ParticipantFilter}},{key:"showDocumentResource",value:function(e){return this.definition.ResourceVisibility}},{key:"requireDocumentResource",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentResource}},{key:"readonlyDocumentResource",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentResource}},{key:"labelDocumentResource",value:function(e){var t=this.ws.getMultilingualValueImmediate(this.definition,"ResourceLabel");if(t)return t;if(1===this.definition.ResourceDefinitionIds.length){var n=this.ws.definitions.Resources[this.definition.ResourceDefinitionIds[0]];n&&(t=this.ws.getMultilingualValueImmediate(n,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Resource")),t}},{key:"documentResourceDefinitionIds",value:function(e){return this.definition.ResourceDefinitionIds}},{key:"filterDocumentResource",value:function(e){return this.definition.ResourceFilter}},{key:"showDocumentQuantity",value:function(e){return this.definition.QuantityVisibility}},{key:"requireDocumentQuantity",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentQuantity}},{key:"readonlyDocumentQuantity",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentQuantity}},{key:"labelDocumentQuantity",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"QuantityLabel")||this.translate.instant("Entry_Quantity")}},{key:"showDocumentUnit",value:function(e){return this.definition.UnitVisibility}},{key:"requireDocumentUnit",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentUnit}},{key:"readonlyDocumentUnit",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentUnit}},{key:"labelDocumentUnit",value:function(e){var t=this.ws.getMultilingualValueImmediate(this.definition,"UnitLabel");return t||(t||(t=this.translate.instant("Entry_Unit")),t)}},{key:"filterDocumentUnit",value:function(e){return this.definition.UnitFilter}},{key:"showDocumentTime1",value:function(e){return this.definition.Time1Visibility}},{key:"requireDocumentTime1",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentTime1}},{key:"readonlyDocumentTime1",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentTime1}},{key:"labelDocumentTime1",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"Time1Label")||this.translate.instant("Entry_Time1")}},{key:"showDocumentTime2",value:function(e){return this.definition.Time2Visibility}},{key:"requireDocumentTime2",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentTime2}},{key:"readonlyDocumentTime2",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentTime2}},{key:"labelDocumentTime2",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"Time2Label")||this.translate.instant("Entry_Time2")}},{key:"showDocumentExternalReference",value:function(e){return this.definition.ExternalReferenceVisibility}},{key:"requireDocumentExternalReference",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentExternalReference}},{key:"readonlyDocumentExternalReference",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentExternalReference}},{key:"labelDocumentExternalReference",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"ExternalReferenceLabel")||this.translate.instant("Entry_ExternalReference")}},{key:"showDocumentInternalReference",value:function(e){return this.definition.InternalReferenceVisibility}},{key:"requireDocumentInternalReference",value:function(e){return this.computeDocumentSettings(e),this._requireDocumentInternalReference}},{key:"readonlyDocumentInternalReference",value:function(e){return this.computeDocumentSettings(e),this._readonlyDocumentInternalReference}},{key:"labelDocumentInternalReference",value:function(e){return this.ws.getMultilingualValueImmediate(this.definition,"InternalReferenceLabel")||this.translate.instant("Entry_InternalReference")}},{key:"computeDocumentSettings",value:function(e){var t=this;if(!e||!e.Lines)return this._requireDocumentPostingDate=!1,this._readonlyDocumentPostingDate=!1,this._requireDocumentMemo=!1,this._readonlyDocumentMemo=!1,this._requireDocumentCurrency=!1,this._readonlyDocumentCurrency=!1,this._requireDocumentCenter=!1,this._readonlyDocumentCenter=!1,this._requireDocumentCustodian=!1,this._readonlyDocumentCustodian=!1,this._requireDocumentCustody=!1,this._readonlyDocumentCustody=!1,this._requireDocumentParticipant=!1,this._readonlyDocumentParticipant=!1,this._requireDocumentResource=!1,this._readonlyDocumentResource=!1,this._requireDocumentQuantity=!1,this._readonlyDocumentQuantity=!1,this._requireDocumentUnit=!1,this._readonlyDocumentUnit=!1,this._requireDocumentTime1=!1,this._readonlyDocumentTime1=!1,this._requireDocumentTime2=!1,this._readonlyDocumentTime2=!1,this._requireDocumentExternalReference=!1,this._readonlyDocumentExternalReference=!1,this._requireDocumentInternalReference=!1,void(this._readonlyDocumentInternalReference=!1);var n=this.definition;if(this._computeDocumentSettingsDoc!==e||this._computeDocumentSettingsDef!==n){this._computeDocumentSettingsDoc=e,this._computeDocumentSettingsDef=n,this._requireDocumentPostingDate=0===n.PostingDateRequiredState,this._readonlyDocumentPostingDate=0===n.PostingDateReadOnlyState,this._requireDocumentMemo=0===n.MemoRequiredState,this._readonlyDocumentMemo=0===n.MemoReadOnlyState,this._requireDocumentCurrency=0===n.CurrencyRequiredState,this._readonlyDocumentCurrency=0===n.CurrencyReadOnlyState,this._requireDocumentCenter=0===n.CenterRequiredState,this._readonlyDocumentCenter=0===n.CenterReadOnlyState,this._requireDocumentCustodian=0===n.CustodianRequiredState,this._readonlyDocumentCustodian=0===n.CustodianReadOnlyState,this._requireDocumentCustody=0===n.CustodyRequiredState,this._readonlyDocumentCustody=0===n.CustodyReadOnlyState,this._requireDocumentParticipant=0===n.ParticipantRequiredState,this._readonlyDocumentParticipant=0===n.ParticipantReadOnlyState,this._requireDocumentResource=0===n.ResourceRequiredState,this._readonlyDocumentResource=0===n.ResourceReadOnlyState,this._requireDocumentQuantity=0===n.QuantityRequiredState,this._readonlyDocumentQuantity=0===n.QuantityRequiredState,this._requireDocumentUnit=0===n.UnitRequiredState,this._readonlyDocumentUnit=0===n.UnitRequiredState,this._requireDocumentTime1=0===n.Time1RequiredState,this._readonlyDocumentTime1=0===n.Time1RequiredState,this._requireDocumentTime2=0===n.Time2RequiredState,this._readonlyDocumentTime2=0===n.Time2RequiredState,this._requireDocumentInternalReference=0===n.InternalReferenceRequiredState,this._readonlyDocumentInternalReference=0===n.InternalReferenceReadOnlyState,this._requireDocumentExternalReference=0===n.ExternalReferenceRequiredState,this._readonlyDocumentExternalReference=0===n.ExternalReferenceReadOnlyState;var i,r=_createForOfIteratorHelper(n.LineDefinitions.map((function(e){return e.LineDefinitionId})));try{for(r.s();!(i=r.n()).done;){var o,c=i.value,a=_createForOfIteratorHelper(this.lineDefinition(c).Columns.filter((function(e){return 2===e.InheritsFromHeader})));try{var l=function(){var n=o.value;switch(n.ColumnName){case"PostingDate":!t._requireDocumentPostingDate&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentPostingDate=!0),!t._readonlyDocumentPostingDate&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentPostingDate=!0);break;case"Memo":!t._requireDocumentMemo&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentMemo=!0),!t._readonlyDocumentMemo&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentMemo=!0);break;case"CurrencyId":!t._requireDocumentCurrency&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentCurrency=!0),!t._readonlyDocumentCurrency&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentCurrency=!0);break;case"CenterId":!t._requireDocumentCenter&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentCenter=!0),!t._readonlyDocumentCenter&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentCenter=!0);break;case"CustodianId":!t._requireDocumentCustodian&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentCustodian=!0),!t._readonlyDocumentCustodian&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentCustodian=!0);break;case"CustodyId":!t._requireDocumentCustody&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentCustody=!0),!t._readonlyDocumentCustody&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentCustody=!0);break;case"ParticipantId":!t._requireDocumentParticipant&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentParticipant=!0),!t._readonlyDocumentParticipant&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentParticipant=!0);break;case"ResourceId":!t._requireDocumentResource&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentResource=!0),!t._readonlyDocumentResource&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentResource=!0);break;case"Quantity":!t._requireDocumentQuantity&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentQuantity=!0),!t._readonlyDocumentQuantity&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentQuantity=!0);break;case"UnitId":!t._requireDocumentUnit&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentUnit=!0),!t._readonlyDocumentUnit&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentUnit=!0);break;case"Time1":!t._requireDocumentTime1&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentTime1=!0),!t._readonlyDocumentTime1&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentTime1=!0);break;case"Time2":!t._requireDocumentTime2&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentTime2=!0),!t._readonlyDocumentTime2&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentTime2=!0);break;case"ExternalReference":!t._requireDocumentExternalReference&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentExternalReference=!0),!t._readonlyDocumentExternalReference&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentExternalReference=!0);break;case"InternalReference":!t._requireDocumentInternalReference&&t.lines(c,e).some((function(e){return(e.State||0)>=n.RequiredState}))&&(t._requireDocumentInternalReference=!0),!t._readonlyDocumentInternalReference&&t.lines(c,e).some((function(e){return(e.State||0)>=n.ReadOnlyState||(e.State||0)<0}))&&(t._readonlyDocumentInternalReference=!0)}};for(a.s();!(o=a.n()).done;)l()}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}}}},{key:"account",value:function(e){return this.ws.get("Account",e.AccountId)}},{key:"accountType",value:function(e){var t=this.account(e);return t&&t.AccountTypeId?this.ws.get("AccountType",t.AccountTypeId):null}},{key:"resource",value:function(e){var t=this.account(e);return this.ws.get("Resource",(t?t.ResourceId:null)||(t&&t.ResourceDefinitionId?e.ResourceId:null))}},{key:"resourceDefinition",value:function(e){var t=this.resource(e),n=t?t.DefinitionId:null;return n?this.ws.definitions.Resources[n]:null}},{key:"accountDisplay",value:function(e){var t=this.ws.get("Account",e);return t?Object(TW.a)(this.workspace,this.translate).format(t):""}},{key:"filterAccount",value:function(e,t){if(!t)return null;var n=e.entry,i=e.entryIndex,r=this.lineDefinition(e.line.DefinitionId);if(r&&r.Entries){var o=r.Entries[i];if(o&&o.ParentAccountTypeId){var c="AccountType.Id descof ".concat(o.ParentAccountTypeId),a=n.CurrencyId;a&&(c+=" and (CurrencyId eq null or CurrencyId eq '".concat(a.replace("'","''"),"')"));var l=n.CenterId;l&&(c+=" and (CenterId eq null or CenterId eq ".concat(l,")"));var s=this.ws.get("Resource",n.ResourceId),u=s?s.DefinitionId:null;c+=u?" and ResourceDefinitionId eq ".concat(u):" and ResourceDefinitionId eq null";var d=this.ws.get("Custody",n.CustodyId),b=d?d.DefinitionId:null;c+=b?" and CustodyDefinitionId eq ".concat(b):" and CustodyDefinitionId eq null";var f=n.ResourceId;f&&(c+=" and (ResourceId eq null or ResourceId eq ".concat(f,")"));var m=n.CustodyId;m&&(c+=" and (CustodyId eq null or CustodyId eq ".concat(m,")"));var g=n.EntryTypeId;return g&&(c+=" and (EntryTypeId eq null or EntryTypeId eq ".concat(g,")")),c}}return null}},{key:"readonlyCenter_Manual",value:function(e){return!!this.getAccountResourceCustodyCenterId(e)}},{key:"readonlyValueCenterId_Manual",value:function(e){return this.getAccountResourceCustodyCenterId(e)}},{key:"getAccountResourceCustodyCenterId",value:function(e){if(!e)return null;var t=this.account(e),n=this.resource(e),i=this.custody(e);return(t?t.CenterId:null)||(n?t.IsBusinessUnit?n.CenterId:n.CostCenterId:null)||(i&&t.IsBusinessUnit?i.CenterId:null)}},{key:"filterCenter_Manual",value:function(e){if(!e)return null;var t=this.account(e);return t&&t.IsBusinessUnit?"CenterType eq 'BusinessUnit'":null}},{key:"showCustodian_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.CustodianDefinitionId}},{key:"readonlyCustodian_Manual",value:function(e){var t=this.account(e),n=this.custody(e);return!!t&&!!t.CustodianId||!!n&&!!n.CustodianId}},{key:"readonlyValueCustodianId_Manual",value:function(e){var t=this.account(e),n=this.custody(e);return t?t.CustodianId:n?n.CustodianId:null}},{key:"labelCustodian_Manual",value:function(e){var t=this.accountType(e),n=t?t.CustodianDefinitionId:null;return Object(Gv.a)(this.workspace,this.translate,n).titleSingular()}},{key:"definitionIdsCustodian_Manual",value:function(e){return[this.accountType(e).CustodianDefinitionId]}},{key:"showCustody_Manual",value:function(e){var t=this.account(e);return!!t&&!!t.CustodyDefinitionId}},{key:"readonlyCustody_Manual",value:function(e){var t=this.account(e);return!!t&&!!t.CustodyId}},{key:"readonlyValueCustodyId_Manual",value:function(e){var t=this.account(e);return t?t.CustodyId:null}},{key:"labelCustody_Manual",value:function(e){var t=this.account(e),n=t?t.CustodyDefinitionId:null;return Object(Jv.a)(this.workspace,this.translate,n).titleSingular()}},{key:"definitionIdsCustody_Manual",value:function(e){return[this.account(e).CustodyDefinitionId]}},{key:"custody",value:function(e){var t=this.account(e);return this.ws.get("Custody",(t?t.CustodyId:null)||(t&&t.CustodyDefinitionId?e.CustodyId:null))}},{key:"showParticipant_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.ParticipantDefinitionId}},{key:"readonlyParticipant_Manual",value:function(e){var t=this.account(e),n=this.resource(e);return!!t&&!!t.ParticipantId||!!n&&!!n.ParticipantId}},{key:"readonlyValueParticipantId_Manual",value:function(e){var t=this.account(e),n=this.resource(e);return t?t.CustodianId:n?n.ParticipantId:null}},{key:"labelParticipant_Manual",value:function(e){var t=this.accountType(e),n=t?t.ParticipantDefinitionId:null;return Object(Gv.a)(this.workspace,this.translate,n).titleSingular()}},{key:"definitionIdsParticipant_Manual",value:function(e){return[this.accountType(e).ParticipantDefinitionId]}},{key:"showResource_Manual",value:function(e){var t=this.account(e);return!!t&&!!t.ResourceDefinitionId}},{key:"readonlyResource_Manual",value:function(e){var t=this.account(e);return!!t&&!!t.ResourceId}},{key:"readonlyValueResourceId_Manual",value:function(e){var t=this.account(e);return t?t.ResourceId:null}},{key:"labelResource_Manual",value:function(e){var t=this.account(e),n=t?t.ResourceDefinitionId:null;return Object($v.a)(this.workspace,this.translate,n).titleSingular()}},{key:"definitionIdsResource_Manual",value:function(e){return[this.account(e).ResourceDefinitionId]}},{key:"showQuantity",value:function(e){return!!this.resource(e)}},{key:"showUnit",value:function(e){var t=this.resource(e),n=t&&t.DefinitionId?this.ws.definitions.Resources[t.DefinitionId]:null;return!!n&&!!n.UnitCardinality}},{key:"readonlyUnit",value:function(e){var t=this.resourceDefinition(e);if(t&&"Single"===t.UnitCardinality&&"PropertyPlantAndEquipment"!==t.ResourceDefinitionType&&"InvestmentProperty"!==t.ResourceDefinitionType&&"IntangibleAssetsOtherThanGoodwill"!==t.ResourceDefinitionType){var n=this.resource(e);if(n)return!!n.UnitId}return!1}},{key:"readonlyValueUnitId",value:function(e){var t=this.resource(e);return t?t.UnitId:null}},{key:"filterUnitId",value:function(e){var t,n=this.resource(e);if(n&&(n.UnitId&&(t="Id eq ".concat(n.UnitId)),n.Units&&n.Units.length>0)){var i=n.Units.map((function(e){return"Id eq ".concat(e.UnitId)})).join(" or ");t?t+=" or ".concat(i):t=i}var r=this.accountType(e);return r&&r.StandardAndPure&&(t?t+=" or ".concat("UnitType eq 'Pure'"):t="UnitType eq 'Pure'"),t}},{key:"showTime1_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.Time1Label}},{key:"labelTime1_Manual",value:function(e){var t=this.accountType(e);return this.ws.getMultilingualValueImmediate(t,"Time1Label")}},{key:"showTime2_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.Time2Label}},{key:"labelTime2_Manual",value:function(e){var t=this.accountType(e);return this.ws.getMultilingualValueImmediate(t,"Time2Label")}},{key:"showCurrency",value:function(e){return!!this.account(e)&&!this.getAccountResourceCustodyCurrencyId(e)}},{key:"getAccountResourceCustodyCurrencyId",value:function(e){if(!e)return null;var t=this.account(e),n=this.resource(e),i=this.custody(e);return(t?t.CurrencyId:null)||(n?n.CurrencyId:null)||(i?i.CurrencyId:null)}},{key:"readonlyValueCurrencyId",value:function(e){return e?this.getAccountResourceCustodyCurrencyId(e)||e.CurrencyId:null}},{key:"showMonetaryValue",value:function(e){var t=this.account(e),n=this.readonlyValueCurrencyId(e);return!!t&&!!n&&n!==this.functionalId}},{key:"MonetaryValue_decimals",value:function(e){var t=this.readonlyValueCurrencyId(e),n=this.ws.get("Currency",t);return n?n.E:this.ws.settings.FunctionalCurrencyDecimals}},{key:"MonetaryValue_format",value:function(e){var t=this.MonetaryValue_decimals(e);return"1.".concat(t,"-").concat(t)}},{key:"showEntryType_Manual",value:function(e){var t=this.accountType(e);if(t){var n=this.ws.get("EntryType",t.EntryTypeParentId);return!!n&&n.IsActive}return!1}},{key:"readonlyEntryType_Manual",value:function(e){var t=this.account(e);return!!t&&!!t.EntryTypeId}},{key:"readonlyValueEntryTypeId_Manual",value:function(e){var t=this.account(e);return t?t.EntryTypeId:null}},{key:"filterEntryType_Manual",value:function(e){return"IsAssignable eq true and Id descof ".concat(this.accountType(e).EntryTypeParentId)}},{key:"showExternalReference_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.ExternalReferenceLabel}},{key:"labelExternalReference_Manual",value:function(e){var t=this.accountType(e);return t.ExternalReferenceLabel?this.ws.getMultilingualValueImmediate(t,"ExternalReferenceLabel"):this.translate.instant("Entry_ExternalReference")}},{key:"showInternalReference_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.InternalReferenceLabel}},{key:"labelInternalReference_Manual",value:function(e){var t=this.accountType(e);return t.InternalReferenceLabel?this.ws.getMultilingualValueImmediate(t,"InternalReferenceLabel"):this.translate.instant("Entry_InternalReference")}},{key:"showNotedAgentName_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.NotedAgentNameLabel}},{key:"labelNotedAgentName_Manual",value:function(e){var t=this.accountType(e);return t.NotedAgentNameLabel?this.ws.getMultilingualValueImmediate(t,"NotedAgentNameLabel"):this.translate.instant("Entry_NotedAgentName")}},{key:"showNotedAmount_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.NotedAmountLabel}},{key:"labelNotedAmount_Manual",value:function(e){var t=this.accountType(e);return t.NotedAmountLabel?this.ws.getMultilingualValueImmediate(t,"NotedAmountLabel"):this.translate.instant("Entry_NotedAmount")}},{key:"showNotedDate_Manual",value:function(e){var t=this.accountType(e);return!!t&&!!t.NotedDateLabel}},{key:"labelNotedDate_Manual",value:function(e){var t=this.accountType(e);return t.NotedDateLabel?this.ws.getMultilingualValueImmediate(t,"NotedDateLabel"):this.translate.instant("Entry_NotedDate")}},{key:"showAttachmentsErrors",value:function(e){return!!e&&!!e.Attachments&&e.Attachments.some((function(e){return!!e.serverErrors}))}},{key:"attachmentWrappers",value:function(e){return e&&e.Attachments?(this._attachmentsAttachments!==e.Attachments&&(this._attachmentsAttachments=e.Attachments,this._attachmentsResult=e.Attachments.map((function(e){return{attachment:e}}))),this._attachmentsResult):[]}},{key:"onFileSelected",value:function(e,t){var n=this,i=this.attachmentWrappers(t).map((function(e){return e.file?e.file.size:0})).reduce((function(e,t){return e+t}),0);Object(W.q)(e,i,this.translate).subscribe((function(e){t.Attachments.push(e.attachment),n.attachmentWrappers(t).push(e)}),(function(e){n.details.displayErrorModal(e)}))}},{key:"onDeleteAttachment",value:function(e,t){this.attachmentWrappers(e).splice(t,1),e.Attachments.splice(t,1)}},{key:"onDownloadAttachment",value:function(e,t){var n=this,i=e.Id,r=this.attachmentWrappers(e)[t];r.attachment.Id?(r.downloading=!0,this.documentsApi.getAttachment(i,r.attachment.Id).pipe(Object(P.a)((function(e){delete r.downloading,Object(W.i)(e,n.fileName(r))})),Object(j.a)((function(e){return delete r.downloading,n.details.handleActionError(e),Object(L.a)(null)})),Object(re.a)((function(){delete r.downloading}))).subscribe()):r.file&&Object(W.i)(r.file,this.fileName(r))}},{key:"fileName",value:function(e){var t=e.attachment;return t.FileName&&t.FileExtension?"".concat(t.FileName,".").concat(t.FileExtension):t.FileName||(e.file?e.file.name:"Attachment")}},{key:"size",value:function(e){var t=e.attachment;return Object(W.j)(t.Size||(e.file?e.file.size:null))}},{key:"colorFromExtension",value:function(e){return Object(W.d)(e)}},{key:"iconFromExtension",value:function(e){return Object(W.m)(e)}},{key:"handleFreshExtras",value:function(e){if(e){var t=e.RequiredSignaturesRelatedEntities;t&&Object(W.o)(t,this.workspace)}}},{key:"requiredSignaturesForLineDef",value:function(e,t,n){return this._requiredSignaturesForLineDefModel===e&&this._requiredSignaturesForLineDefLineDefId===t||(this._requiredSignaturesForLineDefModel=e,this._requiredSignaturesForLineDefLineDefId=t,this._requiredSignaturesForLineDefLineIds=e.Lines.filter((function(e){return!!e.Id&&e.DefinitionId===t})).map((function(e){return e.Id}))),this.requiredSignaturesSummaryInner(this._requiredSignaturesForLineDefLineIds,n)}},{key:"requiredSignaturesSummaryInner",value:function(e,t){if(!e||!t||!t.RequiredSignatures)return[];var n=t.RequiredSignatures;if(n!==this._requiredSignaturesDetailed||e!==this._requiredSignaturesLineIds){this._requiredSignaturesDetailed=n,this._requiredSignaturesLineIds=e;var i,r={},o=_createForOfIteratorHelper(e);try{for(o.s();!(i=o.n()).done;){var c=i.value;r[c]=!0}}catch(v){o.e(v)}finally{o.f()}var a,l={},s=[],u=_createForOfIteratorHelper(n.filter((function(e){return(!e.LastNegativeState||!!e.SignedById)&&r[e.LineId]})));try{for(u.s();!(a=u.n()).done;){var d,b=a.value,f=l,m=!1,g=_createForOfIteratorHelper(this._requiredSignatureProps);try{for(g.s();!(d=g.n()).done;){var p=b[d.value];null==p?(f.undefined||(f.undefined={},m=!0),f=f.undefined):(f.values||(f.values={}),void 0===f.values[p]&&(f.values[p]={},m=!0),f=f.values[p])}}catch(v){g.e(v)}finally{g.f()}if(f.lineIds||(f.lineIds=[]),f.signatureIds||(f.signatureIds=[]),f.lineIds.push(b.LineId),b.LineSignatureId&&f.signatureIds.push(b.LineSignatureId),m){var h=Object.assign({},b);delete h.LineId,s.push(h)}}}catch(v){u.e(v)}finally{u.f()}this._requiredSignaturesLineIdsHash=l,this._requiredSignaturesSummary=s.sort((function(e,t){var n=Math.abs(e.ToState)-Math.abs(t.ToState);if(0===n){var i=e.RuleType||"0",r=t.RuleType||"0";n=i>r?1:i<r?-1:0}return 0===n&&(n=(e.RoleId||0)-(t.RoleId||0)),0===n&&(n=(e.UserId||0)-(t.UserId||0)),n}))}return this._requiredSignaturesSummary}},{key:"lineIds",value:function(e){return e?this.getHash(e).lineIds:[]}},{key:"signatureIds",value:function(e){return e?this.getHash(e).signatureIds:[]}},{key:"getHash",value:function(e){if(!e)return null;var t,n=this._requiredSignaturesLineIdsHash,i=_createForOfIteratorHelper(this._requiredSignatureProps);try{for(i.s();!(t=i.n()).done;){var r=e[t.value];n=null==r?n.undefined:n.values[r]}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"onSignYes",value:function(e){var t=this;if(e.CanSign)this.onSign(e,!0,null);else{if(!e.CanSignOnBehalf)return void console.error("Should not be able to sign");e.OnBehalfOfUserId?this.onSign(e,!0,e.OnBehalfOfUserId):(this.reasonDetails=null,this.reasonId=null,this.onBehalfOfUserId=null,this.reasonChoicesForNegativeModal=[],this.isNegative=!1,this.onBehalfOfUserAmbiguous=!0,this.modalService.open(this.signatureModal).result.then((function(n){n&&t.onSign(e,!0,t.onBehalfOfUserId)}),(function(e){})))}}},{key:"reasonDisplay",value:function(e,t){if(!t)return"";var n=this.lineDefinition(e);if(n.StateReasons){var i,r=_createForOfIteratorHelper(n.StateReasons);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.Id===t)return this.ws.getMultilingualValueImmediate(o,"Name")}}catch(c){r.e(c)}finally{r.f()}}return""}},{key:"onSignNo",value:function(e,t){var n=this;if(t.CanSign||t.CanSignOnBehalf){this.reasonDetails=null,this.reasonId=null,this.onBehalfOfUserId=!t.CanSign&&t.CanSignOnBehalf?t.OnBehalfOfUserId:null;var i=this.lineDefinition(e);this.reasonChoicesForNegativeModal=(i&&i.StateReasons||[]).filter((function(e){return Math.abs(e.State)===Math.abs(t.ToState)})).map((function(e){return{name:function(){return n.ws.getMultilingualValueImmediate(e,"Name")},value:e.Id}})),this.isNegative=!0,this.onBehalfOfUserAmbiguous=!t.CanSign&&t.CanSignOnBehalf&&!this.onBehalfOfUserId,this.modalService.open(this.signatureModal).result.then((function(e){e&&n.onSign(t,!1,n.onBehalfOfUserId)}),(function(e){}))}else console.error("Should not be able to sign")}},{key:"onSign",value:function(e,t,n){var i=this,r=this.lineIds(e);this.documentsApi.sign(r,{returnEntities:!0,select:this.select,onBehalfOfUserId:n,toState:t?Math.abs(e.ToState):-Math.abs(e.ToState),roleId:e.RoleId,ruleType:e.RuleType,reasonDetails:t?null:this.reasonDetails,reasonId:t?null:this.reasonId,signedAt:null},{includeRequiredSignatures:!0}).pipe(Object(P.a)((function(e){Object(W.c)(e,i.workspace),i.details.state.extras=e.Extras,i.handleFreshExtras(e.Extras)}))).subscribe({error:this.details.handleActionError})}},{key:"onUnsign",value:function(e){var t=this;this.confirmationMessage=this.translate.instant("AreYouSureYouWantToDeleteYourSignature"),this.modalService.open(this.confirmModal).result.then((function(n){n&&t.documentsApi.unsign(t.signatureIds(e),{returnEntities:!0,select:t.select},{includeRequiredSignatures:!0}).pipe(Object(P.a)((function(e){Object(W.c)(e,t.workspace),t.details.state.extras=e.Extras,t.handleFreshExtras(e.Extras)}))).subscribe({error:t.details.handleActionError})}),(function(e){}))}},{key:"canUnsign",value:function(e){return!!e.SignedById&&(e.SignedById===this.ws.userSettings.UserId||e.OnBehalfOfUserId===this.ws.userSettings.UserId)}},{key:"disableUnsign",value:function(e,t){return!t||!!t.State}},{key:"unsignTooltip",value:function(e,t){return t?1===t.State?this.translate.instant("Error_OpenDocumentBeforeEdit"):-1===t.State?this.translate.instant("Error_UncancelDocumentBeforeEdit"):null:null}},{key:"positiveActionDisplay",value:function(e){return this.actionDisplay(Math.abs(e))}},{key:"positiveActionIcon",value:function(e){return this.actionIcon(Math.abs(e))}},{key:"negativeActionDisplay",value:function(e){return this.actionDisplay(-Math.abs(e))}},{key:"negativeActionIcon",value:function(e){return this.actionIcon(-Math.abs(e))}},{key:"actionIcon",value:function(e){switch(e){case 1:return this.workspace.ws.isRtl?"arrow-left":"arrow-right";case 2:return"thumbs-up";case 3:case 4:return"check";case-1:return"times";case-2:return"thumbs-down";case-3:case-4:return"times";default:return""}}},{key:"actionDisplay",value:function(e){return this.translate.instant(e>=0?"Line_State_"+e:"Line_State_minus_"+-e)}},{key:"requiredSignatureDisplay",value:function(e){return this.translate.instant("RequiredSignature_"+Math.abs(e.ToState))}},{key:"requiredSignatoryDisplay",value:function(e){return this.translate.instant("RequiredSigner_"+Math.abs(e.ToState))}},{key:"isTooEarlyForThisSignature",value:function(e){return e.LastUnsignedState<e.ToState}},{key:"areNegativeLines",value:function(e){return!!e.LastNegativeState}},{key:"disableSign",value:function(e,t,n){return!!n&&(-1===n.State||1===n.State||this.isTooEarlyForThisSignature(e)||this.areNegativeLines(e))}},{key:"signTooltip",value:function(e,t,n){if(n){if(1===n.State)return this.translate.instant("Error_OpenDocumentBeforeEdit");if(-1===n.State)return this.translate.instant("Error_UncancelDocumentBeforeEdit");if(this.areNegativeLines(e)){var i=this.actionDisplay(e.LastNegativeState),r=this.lineIds(e)||[];return this.translate.instant(1===r.length?"LineAlreadyInState0":"LinesAlreadyInState0",{0:i})}if(this.isTooEarlyForThisSignature(e)){var o=this.actionDisplay(e.LastUnsignedState),c=this.lineIds(e)||[];return this.translate.instant(1===c.length?"LineIsNotYetInState0":"LinesAreNotYetInState0",{0:o})}return null}return null}},{key:"onInsertSmartLine",value:function(e,t){t.Lines.push(e),this._computeEntriesModel=null,this._linesModel=null}},{key:"onDeleteSmartLine",value:function(e,t){var n=t.Lines.indexOf(e);n>-1&&t.Lines.splice(n,1),this._computeEntriesModel=null}},{key:"computeTabs",value:function(e){if(!e)return this._computeTabsLines=null,this._visibleTabs=[],void(this._invisibleTabs=[]);if(this._computeTabsLines!==e.Lines||this._computeTabsDefinitions!==this.definition){this._computeTabsLines=e.Lines,this._computeTabsDefinitions=this.definition;var t={};if(e.Lines){var n,i=_createForOfIteratorHelper(e.Lines);try{for(i.s();!(n=i.n()).done;)t[n.value.DefinitionId]=!0}catch(v){i.e(v)}finally{i.f()}}var r,o=[],c=[],a={},l={},s=this.definition.LineDefinitions,u=_createForOfIteratorHelper(s.filter((function(e){return e.IsVisibleByDefault})).map((function(e){return e.LineDefinitionId})));try{for(u.s();!(r=u.n()).done;){var d=r.value;l[d]||(l[d]=!0,o.push(d))}}catch(v){u.e(v)}finally{u.f()}var b,f=_createForOfIteratorHelper(s.filter((function(e){return!e.IsVisibleByDefault})).map((function(e){return e.LineDefinitionId})));try{for(f.s();!(b=f.n()).done;){var m=b.value;t[m]?l[m]||(l[m]=!0,o.push(m)):a[m]||(a[m]=!0,c.push(m))}}catch(v){f.e(v)}finally{f.f()}var g,p=_createForOfIteratorHelper(Object.keys(t).map((function(e){return+e})));try{for(p.s();!(g=p.n()).done;){var h=g.value;l[h]||(l[h]=!0,o.push(h))}}catch(v){p.e(v)}finally{p.f()}this._visibleTabs=o,this._invisibleTabs=c}}},{key:"visibleTabs",value:function(e){return this.computeTabs(e),this._visibleTabs}},{key:"invisibleTabs",value:function(e){return this.computeTabs(e),this._invisibleTabs}},{key:"onOtherTab",value:function(e,t){this._visibleTabs.push(e),this._visibleTabs=this._visibleTabs.slice(),this._invisibleTabs=this._invisibleTabs.filter((function(t){return t!==e})),this.setActiveTab(e)}},{key:"bookkeepingManualAdjustmentsTitle",value:function(e){return this.tabTitle(this.ws.definitions.ManualLinesDefinitionId,e)}},{key:"tabTitle",value:function(e,t){if(this.isJV&&this.isManualLine(e))return this.translate.instant("Entries");var n=this.lineDefinition(e),i=this.showAsForm(e,t);return n?this.ws.getMultilingualValueImmediate(n,i?"TitleSingular":"TitlePlural"):this.translate.instant("Undefined")}},{key:"lines",value:function(e,t){if(!t)return[];if(this._linesModel!==t&&(this._linesModel=t,this._lines={},t.Lines)){var n,i=_createForOfIteratorHelper(t.Lines);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._lines[r.DefinitionId]||(this._lines[r.DefinitionId]=[]),this._lines[r.DefinitionId].push(r)}}catch(o){i.e(o)}finally{i.f()}}return this._lines[e]||(this._lines[e]=[]),this._lines[e]}},{key:"tabEntries",value:function(e,t){if(!t)return[];if(this._tabEntriesModel!==t&&(this._tabEntriesModel=t,this._tabEntries={},t.LineDefinitionEntries)){var n,i=_createForOfIteratorHelper(t.LineDefinitionEntries);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._tabEntries[r.LineDefinitionId]||(this._tabEntries[r.LineDefinitionId]=[]),this._tabEntries[r.LineDefinitionId][r.EntryIndex]=r}}catch(o){i.e(o)}finally{i.f()}}return this._tabEntries[e]||(this._tabEntries[e]=[]),this._tabEntries[e]}},{key:"manualLine",value:function(e){var t=this;return this._manualLineModel!==e&&(this._manualLineModel=e,this._manualLineResult=e.Lines.find((function(e){return t.isManualLine(e.DefinitionId)}))),this._manualLineResult}},{key:"showManualLineProps",value:function(e){return!(!this.manualLine(e)||this.showDocumentPostingDate(e)&&this.showDocumentMemo(e))}},{key:"onInsertManualEntry",value:function(e,t){this.addManualEntry(e.entry,t),e.line=this.manualLine(t)}},{key:"addManualEntry",value:function(e,t){var n=this.manualLine(t);n||(n={PostingDate:Object(Oi.e)(),DefinitionId:this.ws.definitions.ManualLinesDefinitionId,Entries:[],_flags:{isModified:!0}},t.Lines.push(n),this._manualLineModel=t,this._manualLineResult=n),n.Entries.push(e)}},{key:"onDeleteManualEntry",value:function(e,t){this.cancelAutofill(e);var n=e.line.Entries.indexOf(e.entry);if(n>-1&&e.line.Entries.splice(n,1),0===e.line.Entries.length){var i=t.Lines.indexOf(e.line);t.Lines.splice(i),this._manualLineModel=t,this._manualLineResult=null}}},{key:"computeEntries",value:function(e){var t=this;e&&this._computeEntriesModel!==e&&(this._computeEntriesModel=e,this._smartEntries=[],this._manualEntries=[],e.Lines&&e.Lines.forEach((function(e){e.Entries&&e.Entries.forEach((function(n,i){t.isManualLine(e.DefinitionId)?t._manualEntries.push({entry:n,line:e,entryIndex:i}):(e.State||0)>=0&&t._smartEntries.push({entry:n,line:e,entryIndex:i})}))})))}},{key:"smartEntries",value:function(e){return this.computeEntries(e),this._smartEntries}},{key:"manualEntries",value:function(e){return this.computeEntries(e),this._manualEntries}},{key:"showTabErrors",value:function(e,t){var n=this.tabEntries(e,t),i=this.lines(e,t);return!!n&&n.some((function(e){return!!e.serverErrors}))||!!i&&i.some((function(e){return!!e.serverErrors||!!e.Entries&&e.Entries.some((function(e){return!!e.serverErrors}))}))}},{key:"manualColumnPaths",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=["AccountId","Center","Debit","Credit"];return t&&n.push("Memo"),t&&n.push("ModifiedWarning"),n.push("Commands"),n}},{key:"smartTabHeaderColumnPaths",value:function(e,t){if(this._smartTabHeaderColumnPathsIsCommonHasChanged||this._smartTabHeaderColumnPathsModel!==t||this._smartTabHeaderColumnPathsLineDefId!==e||this._smartTabHeaderColumnPathsDefinitions!==this.ws.definitions){this._smartTabHeaderColumnPathsIsCommonHasChanged=!1,this._smartTabHeaderColumnPathsModel=t,this._smartTabHeaderColumnPathsLineDefId=e,this._smartTabHeaderColumnPathsDefinitions=this.ws.definitions;var n=this.lineDefinition(e),i=n&&n.Columns?n.Columns.map((function(e,t){return{column:e,index:t}})).filter((function(e){var i=e.column;if(i.InheritsFromHeader>=2&&(t.PostingDateIsCommon&&"PostingDate"===i.ColumnName||t.MemoIsCommon&&"Memo"===i.ColumnName||t.CurrencyIsCommon&&"CurrencyId"===i.ColumnName||t.CenterIsCommon&&"CenterId"===i.ColumnName||t.CustodianIsCommon&&"CustodianId"===i.ColumnName||t.CustodyIsCommon&&"CustodyId"===i.ColumnName||t.ParticipantIsCommon&&"ParticipantId"===i.ColumnName||t.ResourceIsCommon&&"ResourceId"===i.ColumnName||t.QuantityIsCommon&&"Quantity"===i.ColumnName||t.UnitIsCommon&&"UnitId"===i.ColumnName||t.Time1IsCommon&&"Time1"===i.ColumnName||t.Time2IsCommon&&"Time2"===i.ColumnName||t.ExternalReferenceIsCommon&&"ExternalReference"===i.ColumnName||t.InternalReferenceIsCommon&&"InternalReference"===i.ColumnName))return!1;if(!n.ViewDefaultsToForm&&i.InheritsFromHeader>=1)switch(i.ColumnName){case"PostingDate":case"Memo":case"CurrencyId":case"CenterId":case"CustodianId":case"CustodyId":case"ParticipantId":case"ResourceId":case"Quantity":case"UnitId":case"Time1":case"Time2":case"ExternalReference":case"InternalReference":return!0}return!1})).map((function(e){return e.index})):[];this._smartTabHeaderColumnPathsResult=i}return this._smartTabHeaderColumnPathsResult}},{key:"smartColumnIndices",value:function(e,t){var n=this;if(this._smartColumnIndicesIsCommonHasChanged||this._smartColumnIndicesModel!==t||this._smartColumnIndicesLineDefId!==e||this._smartColumnIndicesDefinitions!==this.ws.definitions){this._smartColumnIndicesIsCommonHasChanged=!1,this._smartColumnIndicesModel=t,this._smartColumnIndicesLineDefId=e,this._smartColumnIndicesDefinitions=this.ws.definitions;var i=this.lineDefinition(e),r=[];if(t.LineDefinitionEntries){var o,c=_createForOfIteratorHelper(t.LineDefinitionEntries.filter((function(t){return t.LineDefinitionId===e})));try{for(c.s();!(o=c.n()).done;){var a=o.value;r[a.EntryIndex]=a}}catch(s){c.e(s)}finally{c.f()}}var l=i&&i.Columns?i.Columns.map((function(e,t){return{column:e,index:t}})).filter((function(e){var o=e.column;if(o.InheritsFromHeader>=2&&(t.PostingDateIsCommon&&"PostingDate"===o.ColumnName||t.MemoIsCommon&&"Memo"===o.ColumnName||t.CurrencyIsCommon&&"CurrencyId"===o.ColumnName||t.CenterIsCommon&&"CenterId"===o.ColumnName||t.CustodianIsCommon&&"CustodianId"===o.ColumnName||t.CustodyIsCommon&&"CustodyId"===o.ColumnName||t.ParticipantIsCommon&&"ParticipantId"===o.ColumnName||t.ResourceIsCommon&&"ResourceId"===o.ColumnName||t.QuantityIsCommon&&"Quantity"===o.ColumnName||t.UnitIsCommon&&"UnitId"===o.ColumnName||t.Time1IsCommon&&"Time1"===o.ColumnName||t.Time2IsCommon&&"Time2"===o.ColumnName||t.ExternalReferenceIsCommon&&"ExternalReference"===o.ColumnName||t.InternalReferenceIsCommon&&"InternalReference"===o.ColumnName))return!1;var c=n.tabEntryIndex(o),a=r[c]||n._defaultTabEntry;return!(!i.ViewDefaultsToForm&&o.InheritsFromHeader>=1&&(a.PostingDateIsCommon&&"PostingDate"===o.ColumnName||a.MemoIsCommon&&"Memo"===o.ColumnName||a.CurrencyIsCommon&&"CurrencyId"===o.ColumnName||a.CenterIsCommon&&"CenterId"===o.ColumnName||a.CustodianIsCommon&&"CustodianId"===o.ColumnName||a.CustodyIsCommon&&"CustodyId"===o.ColumnName||a.ParticipantIsCommon&&"ParticipantId"===o.ColumnName||a.ResourceIsCommon&&"ResourceId"===o.ColumnName||a.QuantityIsCommon&&"Quantity"===o.ColumnName||a.UnitIsCommon&&"UnitId"===o.ColumnName||a.Time1IsCommon&&"Time1"===o.ColumnName||a.Time2IsCommon&&"Time2"===o.ColumnName||a.ExternalReferenceIsCommon&&"ExternalReference"===o.ColumnName||a.InternalReferenceIsCommon&&"InternalReference"===o.ColumnName))})).map((function(e){return e.index})):[];this._smartColumnIndicesResult=l}return this._smartColumnIndicesResult}},{key:"smartColumnPathsForTable",value:function(e,t){var n=this.smartColumnIndices(e,t);if(this._smartColumnPathsForTableNumberPaths!==n){this._smartColumnPathsForTableNumberPaths=n;var i=this.smartColumnIndices(e,t).map((function(e){return e+""}));i.push("Commands"),this._smartColumnPathsForTableResult=i}return this._smartColumnPathsForTableResult}},{key:"smartTotalsColumnIndices",value:function(e,t,n){var i,r=this,o=[],c=_createForOfIteratorHelper(this.smartColumnIndices(e,t));try{var a=function(){var c=i.value,a=r.columnDefinition(e,c),l=r.lines(e,t);switch(a.ColumnName){case"Value":o.push(c);break;case"MonetaryValue":if(!l||l.length<=1)o.push(c);else{var s=l[0].Entries[a.EntryIndex],u=n?r.readonlyValueCurrencyId(s):s.CurrencyId;l.every((function(e){var t=e.Entries[a.EntryIndex],i=n?r.readonlyValueCurrencyId(t):t.CurrencyId;return!i||i===u}))&&o.push(c)}break;case"Quantity":if(!l||l.length<=1)o.push(c);else{var d=l[0].Entries[a.EntryIndex],b=n&&r.readonlyUnit(d)?r.readonlyValueUnitId(d):d.UnitId;l.every((function(e){var t=e.Entries[a.EntryIndex],i=n&&r.readonlyUnit(t)?r.readonlyValueUnitId(t):t.UnitId;return!i||i===b}))&&o.push(c)}}};for(c.s();!(i=c.n()).done;)a()}catch(l){c.e(l)}finally{c.f()}return o}},{key:"smartTotal",value:function(e,t,n){var i,r=this.columnDefinition(e,t),o=r.EntryIndex;switch(r.ColumnName){case"Value":i=function(e){return e.Value};break;case"MonetaryValue":i=function(e){return e.MonetaryValue};break;case"Quantity":i=function(e){return e.Quantity}}return this.lines(e,n).filter((function(e){return(e.State||0)>=0})).map((function(e){return e.Entries&&i(e.Entries[o])||0})).reduce((function(e,t){return e+t}),0)}},{key:"columnTemplates",value:function(e,t,n){var i=this.definition;if(this._columnTemplatesLineDefId===e&&this._columnTemplatesDef===i||(this._columnTemplatesLineDefId=e,this._columnTemplatesDef=i,this._columnTemplatesResult=null),!this._columnTemplatesResult){for(var r={},o=this.lineDefinition(e),c=(o?o.Columns:[]).length,a=0;a<c;a++)r[a+""]={weight:1,argument:a};r.Commands={headerTemplate:t,rowTemplate:n},this._columnTemplatesResult=r}return this._columnTemplatesResult}},{key:"lineDefinition",value:function(e){return e?this.ws.definitions.Lines[e]:null}},{key:"columnDefinition",value:function(e,t){var n=this.lineDefinition(e);return n?n.Columns[t]:null}},{key:"entryDefinition",value:function(e,t){var n=this.lineDefinition(e),i=this.columnDefinition(e,t);return n&&n.Entries&&i?n.Entries[i.EntryIndex]:null}},{key:"columnName",value:function(e,t){var n=this.columnDefinition(e,t);return n?n.ColumnName:null}},{key:"columnLabel",value:function(e,t){var n=this.columnDefinition(e,t);return this.ws.getMultilingualValueImmediate(n,"Label")}},{key:"entity",value:function(e,t){if(e)switch(e.ColumnName){case"Memo":case"PostingDate":case"Boolean1":case"Decimal1":case"Text1":return t;default:return t&&t.Entries?t.Entries[e.EntryIndex]:null}}},{key:"tabEntryIndex",value:function(e){switch(e.ColumnName){case"Memo":case"PostingDate":case"Boolean1":case"Decimal1":case"Text1":return 0;default:return e.EntryIndex}}},{key:"tabEntry",value:function(e,t,n){if(n.LineDefinitionEntries){var i=this.tabEntryIndex(t);return this.tabEntries(e,n)[i]}}},{key:"entry",value:function(e,t,n){var i=this.columnDefinition(e,t);return i&&"Memo"!==i.ColumnName&&"PostingDate"!==i.ColumnName&&"Boolean1"!==i.ColumnName&&"Decimal1"!==i.ColumnName&&"Text1"!==i.ColumnName&&n&&n.Entries?n.Entries[i.EntryIndex]:null}},{key:"definitionIdsCustodian_Smart",value:function(e,t){var n=this.entryDefinition(e,t);return n&&n.CustodianDefinitionIds?n.CustodianDefinitionIds:[]}},{key:"definitionIdsCustody_Smart",value:function(e,t){var n=this.entryDefinition(e,t);return n&&n.CustodyDefinitionIds?n.CustodyDefinitionIds:[]}},{key:"definitionIdsParticipant_Smart",value:function(e,t){var n=this.entryDefinition(e,t);return n&&n.ParticipantDefinitionIds?n.ParticipantDefinitionIds:[]}},{key:"definitionIdsResource_Smart",value:function(e,t){var n=this.entryDefinition(e,t);return n&&n.ResourceDefinitionIds?n.ResourceDefinitionIds:[]}},{key:"getFilter",value:function(e,t){var n=this.columnDefinition(e,t);return n?n.Filter:null}},{key:"entryTypeFilter",value:function(e,t){var n=this.entryDefinition(e,t),i=n&&n.EntryTypeParentId?"Id descof ".concat(n.EntryTypeParentId):null,r=this.getFilter(e,t);return i&&r?"(".concat(i,") and (").concat(r,")"):i||r||null}},{key:"lineEntryServerErrors",value:function(e,t,n){var i=this.columnDefinition(e,t),r=this.entity(i,n);return r&&r.serverErrors?r.serverErrors[i.ColumnName]:null}},{key:"tabHeaderServerErrors",value:function(e,t,n){var i=this.columnDefinition(e,t),r=this.tabEntry(e,i,n);return r&&r.serverErrors?r.serverErrors[i.ColumnName]:null}},{key:"getFieldValue",value:function(e,t,n,i){var r=this.columnDefinition(e,t);if(n){var o=this.entity(r,n);return o?o[r.ColumnName]:null}var c=this.tabEntry(e,r,i);return c||(c=this._defaultTabEntry),c[r.ColumnName]}},{key:"addNewTabEntry",value:function(e,t,n){var i=Object.assign({EntryIndex:this.tabEntryIndex(t),LineDefinitionId:e},this._defaultTabEntry);return n.LineDefinitionEntries.push(i),this.tabEntries(e,n)[i.EntryIndex]=i,i}},{key:"isCommonPropertyName",value:function(e){switch(e){case"PostingDate":return"PostingDateIsCommon";case"Memo":return"MemoIsCommon";case"CurrencyId":return"CurrencyIsCommon";case"CenterId":return"CenterIsCommon";case"CustodianId":return"CustodianIsCommon";case"CustodyId":return"CustodyIsCommon";case"ParticipantId":return"ParticipantIsCommon";case"ResourceId":return"ResourceIsCommon";case"Quantity":return"QuantityIsCommon";case"UnitId":return"UnitIsCommon";case"Time1":return"Time1IsCommon";case"Time2":return"Time2IsCommon";case"ExternalReference":return"ExternalReferenceIsCommon";case"InternalReference":return"InternalReferenceIsCommon";default:return console.error("Could not determine IsCommon version of column name ".concat(e)),""}}},{key:"setFieldValue",value:function(e,t,n,i,r){var o=this.columnDefinition(e,t);if(n){var c=this.entity(o,n);c&&(c[o.ColumnName]=r)}else(this.tabEntry(e,o,i)||this.addNewTabEntry(e,o,i))[o.ColumnName]=r}},{key:"onToggleDocumentIsCommon",value:function(e,t){e&&t&&(e[t]=!e[t],this._smartTabHeaderColumnPathsIsCommonHasChanged=!0,this._smartColumnIndicesIsCommonHasChanged=!0)}},{key:"onToggleTabIsCommon",value:function(e,t,n){var i=this.columnDefinition(e,t),r=this.tabEntry(e,i,n)||this.addNewTabEntry(e,i,n),o=this.isCommonPropertyName(i.ColumnName);r[o]=!r[o],this._smartColumnIndicesIsCommonHasChanged=!0}},{key:"tabIsCommon",value:function(e,t,n){var i=this.columnDefinition(e,t);return(this.tabEntry(e,i,n)||this._defaultTabEntry)[this.isCommonPropertyName(i.ColumnName)]}},{key:"isReadOnly",value:function(e,t,n,i){var r=this.columnDefinition(e,t),o=this.lines(e,i),c=function(e){var t=e.State||0;return t<0||t>=r.ReadOnlyState};return n?c(n):o.some(c)}},{key:"isRequired",value:function(e,t,n,i){var r=this.columnDefinition(e,t),o=this.lines(e,i),c=function(e){return(e.State||0)>=r.RequiredState};return n?c(n):o.some(c)}},{key:"onNewSmartLineFactory",value:function(e){var t=this;return this._onNewLineFactoryLineDefId!==e&&(this._onNewLineFactoryLineDefId=e,this._onNewLineFactoryResult=function(n){n.DefinitionId=e,n.Boolean1=!1,n._flags={isModified:!0},n.Entries=[];var i=t.lineDefinition(e);if(i)if(i.Entries)for(var r=0;r<i.Entries.length;r++)n.Entries[r]={Id:0,Direction:i.Entries[r].Direction,Value:0};else console.error("Line definition ".concat(e," is missing its Entries"));else console.error("Missing line definition ".concat(e));return n}),this._onNewLineFactoryResult}},{key:"columnLabelAlignment",value:function(e,t){if(this.workspace.ws.isRtl)return null;switch(this.columnName(e,t)){case"MonetaryValue":case"Quantity":case"Value":case"NotedAmount":return"right";default:return null}}},{key:"defaultsToForm",value:function(e){var t=this.lineDefinition(e);return!!t&&t.ViewDefaultsToForm}},{key:"showAsForm",value:function(e,t){return!(this.lines(e,t).length>1)&&this.defaultsToForm(e)}},{key:"showTabHeader",value:function(e,t,n){return this.smartTabHeaderColumnPaths(e,t).length>0||this.showBarcodeField(e,n)}},{key:"onCreateForm",value:function(e,t){this.onAddNewLine(e,t)}},{key:"onDeleteForm",value:function(e,t){if(t){var n=this.lines(e,t);if(1===n.length){var i=n.pop();this.onDeleteSmartLine(i,t)}}}},{key:"onAddNewLine",value:function(e,t){if(t){var n={};return n=this.onNewSmartLineFactory(e)(n),this.lines(e,t).push(n),this.onInsertSmartLine(n,t),n}}},{key:"isStateActive",value:function(e,t){if(!t)return!1;var n=this.definition;return!!n&&!t.State&&n.HasWorkflow&&this.getDocState(t)===e}},{key:"isDocumentStateActive",value:function(e,t){if(!t)return!1;var n=this.definition;return!!n&&(0===e?!t.State&&!n.HasWorkflow:t.State===e)}},{key:"isStateVisible",value:function(e,t){if(t&&(t.State<0||this.getDocState(t)<0))return!1;var n=this.definition;return 0===e||4===e?!!n&&n.HasWorkflow:this.isStateActive(e,t)||!!n&&n.HasWorkflow&&n["CanReachState"+e]}},{key:"isDocumentStateVisible",value:function(e,t){var n=this.definition;return 0!==e||!n||!n.HasWorkflow}},{key:"isPositiveState",value:function(e){var t=this;return[0,1,2,3,4].some((function(n){return t.isStateActive(n,e)}))||[0,1].some((function(n){return t.isDocumentStateActive(n,e)}))}},{key:"onDocumentState",value:function(e,t){var n=this;this.details&&this.details.state.detailsStatus===S.c.loaded&&t([e.Id],{returnEntities:!0,select:this.select},{includeRequiredSignatures:!0}).pipe(Object(P.a)((function(e){Object(W.c)(e,n.workspace),n.details.state.extras=e.Extras,n.handleFreshExtras(e.Extras)}))).subscribe({error:this.details.handleActionError})}},{key:"onClose",value:function(e){this.onDocumentState(e,this.documentsApi.close)}},{key:"onOpen",value:function(e){this.onDocumentState(e,this.documentsApi.open)}},{key:"onCancel",value:function(e){this.onDocumentState(e,this.documentsApi.cancel)}},{key:"onUncancel",value:function(e){this.onDocumentState(e,this.documentsApi.uncancel)}},{key:"hasPermissionToUpdateState",value:function(e){return this.ws.canDo(this.view,"State",e?e.CreatedById:null)}},{key:"missingSignatures",value:function(e,t){return!!t&&t.some((function(e){return!e.LastNegativeState&&!e.SignedById}))}},{key:"someWorkflowLinesAreNotNegative",value:function(e,t){return!!t&&t.length>0&&t.some((function(e){return!e.LastNegativeState}))}},{key:"showClose",value:function(e,t){return!!e&&!e.State}},{key:"disableClose",value:function(e,t){return!e||!e.Id||!this.hasPermissionToUpdateState(e)||this.missingSignatures(e,t)}},{key:"closeTooltip",value:function(e,t){return this.hasPermissionToUpdateState(e)?this.missingSignatures(e,t)?this.translate.instant("Error_LineIsMissingSignatures"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}},{key:"showCancel",value:function(e,t){return!!e&&!e.State}},{key:"disableCancel",value:function(e,t){return!e||!e.Id||!this.hasPermissionToUpdateState(e)||this.someWorkflowLinesAreNotNegative(e,t)}},{key:"cancelTooltip",value:function(e,t){return this.hasPermissionToUpdateState(e)?this.someWorkflowLinesAreNotNegative(e,t)?this.translate.instant("Error_AllLinesMustBeInNegativeState"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}},{key:"showOpen",value:function(e,t){return!!e&&!!e.Id&&1===e.State}},{key:"showUncancel",value:function(e,t){return!!e&&!!e.Id&&-1===e.State}},{key:"updateStateTooltip",value:function(e){return this.hasPermissionToUpdateState(e)?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}},{key:"entriesCount",value:function(e){return this.smartEntries(e).length+this.manualEntries(e).length}},{key:"flags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._flagsModel!==t&&(this._flagsModel=t,this._flags={}),e.Id){var i=this._flags[e.Id];return n&&!i&&(i=this._flags[e.Id]={}),i}var r=e._flags;return n&&!r&&(r=e._flags={}),r}},{key:"getIsModified",value:function(e,t){var n=this.flags(e,t);return!!n&&n.isModified}},{key:"setModified",value:function(e,t){this.flags(e,t,!0).isModified=!0}},{key:"onSmartLineUpdated",value:function(e,t,n){t&&(this.setModified(t,n),e(t))}},{key:"highlightPairFactory",value:function(e){var t=this;return this._highlightPairFactoryModel!==e&&(this._highlightPairFactoryModel=e,this._highlightPairFactoryResult=null),this._highlightPairFactoryResult||(this._highlightPairFactoryResult=function(n){var i=t.flags(n.line,e);return!!i&&i.isHighlighted}),this._highlightPairFactoryResult}},{key:"highlightLineFactory",value:function(e){var t=this;return this._highlightLineFactoryModel!==e&&(this._highlightLineFactoryModel=e,this._highlightLineFactoryResult=null),this._highlightLineFactoryResult||(this._highlightLineFactoryResult=function(n){var i=t.flags(n,e);return!!i&&i.isHighlighted}),this._highlightLineFactoryResult}},{key:"toggleHighlight",value:function(e,t){var n=this.flags(e,t,!0);n.isHighlighted=!n.isHighlighted,this._highlightLineFactoryResult=null,this._highlightPairFactoryResult=null}},{key:"isHighlighted",value:function(e,t){return this.highlightLineFactory(t)(e)}},{key:"highlightSmartTab",value:function(e,t){var n=this.highlightLineFactory(t);return this.lines(e,t).some(n)}},{key:"smartTabColor",value:function(e,t){return this.highlightSmartTab(e,t)?"#eeff44":null}},{key:"highlightBookkeepingTab",value:function(e){var t=this.highlightLineFactory(e);return!!e&&!!e.Lines&&e.Lines.some((function(e){return(e.State||0)>=0&&t(e)}))}},{key:"bookkeepingTabColor",value:function(e){return this.highlightBookkeepingTab(e)?"#eeff44":null}},{key:"formColor",value:function(e,t){var n=this.highlightLineFactory(t),i=this.lines(e,t);return 1===i.length&&n(i[0])?"#eeff44":null}},{key:"getDocState",value:function(e){if(this._documentStateDoc!==e&&(this._documentStateDoc=e,this._documentStateResult=null),null===this._documentStateResult)if(e&&e.Lines){var t=e.Lines.map((function(e){return e.State||0})),n=t.filter((function(e){return e>=0}));if(n.length>0)this._documentStateResult=Math.min.apply(Math,_toConsumableArray(n));else if(t.length>0){var i=t.filter((function(e){return e<0}));this._documentStateResult=Math.min.apply(Math,_toConsumableArray(i))}else this._documentStateResult=0}else this._documentStateResult=0;return this._documentStateResult}},{key:"onAutofillFromExchangeRate",value:function(e,t,n){var i=this;this.cancelAutofill(e);var r=e.entry,o=r.MonetaryValue;if(o){var c=t.PostingDate||Object(Oi.e)(),a=this.readonlyValueCurrencyId(e.entry);a&&(e.direction=n,e.subscription=this.api.exchangeRatesApi(this.notifyDestruct$).convertToFunctional(c,a,o).pipe(Object(P.a)((function(l){i.cancelAutofill(e);var s=r.MonetaryValue,u=i.readonlyValueCurrencyId(e.entry);i.details.isEdit&&s===o&&u===a&&(t.PostingDate||c)===c&&(r.Value=l,r.Direction=n)})),Object(j.a)((function(t){if(i.cancelAutofill(e),404===t.status){var n=i.translate.instant("Error_NoExRateFoundForCurrency0Date1",{0:i.ws.getMultilingualValue("Currency",a,"Name"),1:Object(Me.a)(c,i.workspace,i.translate)});i.details.displayErrorModal(n)}else i.details.displayErrorModal(t.error);return Object(L.a)(null)})),Object(re.a)((function(){return i.cancelAutofill(e)}))).subscribe())}else r.Value=0}},{key:"cancelAutofill",value:function(e){e.subscription&&(e.subscription.unsubscribe(),delete e.subscription,delete e.direction)}},{key:"onAutoBalance",value:function(e,t,n){if(t&&t.Lines){var i=e.entry,r=(i.Value||0)*(i.Direction||1),o=t.Lines.filter((function(e){return(e.State||0)>=0})).map((function(e){return e.Entries?e.Entries.map((function(e){return(e.Value||0)*(e.Direction||1)})).reduce((function(e,t){return e+t}),0):0})).reduce((function(e,t){return e+t}),0)-r;o>0?(i.Direction=-1,i.Value=Math.abs(o),n(e)):o<0?(i.Direction=1,i.Value=Math.abs(o),n(e)):e.PH||(i.Direction=1,delete i.Value,n(e))}}},{key:"onReverse",value:function(e,t,n){if(n){var i=this.processEntryClone(JSON.parse(JSON.stringify(e.entry)));i.Direction=1===i.Direction?-1:1,this.addManualEntry(i,t),this._computeEntriesModel=null}}},{key:"onDeleteAll",value:function(e,t,n){n&&(t.Lines=t.Lines.filter((function(t){return t.DefinitionId!==e})),this._computeEntriesModel=null,this._linesModel=null)}},{key:"onDeleteAllManualEntries",value:function(e,t){this.onDeleteAll(this.ws.definitions.ManualLinesDefinitionId,e,t)}},{key:"onCloneManualLine",value:function(e,t,n){if(n){var i=this.processEntryClone(JSON.parse(JSON.stringify(e.entry)));this.addManualEntry(i,t),this._computeEntriesModel=null}}},{key:"showAutoGenerate",value:function(e,t){if(!t)return!1;var n=this.lineDefinition(e);return!!n&&n.GenerateScript}},{key:"autoGenerateLabel",value:function(e){var t=this.lineDefinition(e);return this.ws.getMultilingualValueImmediate(t,"GenerateLabel")||this.translate.instant("AutoGenerate")}},{key:"parameterLabel",value:function(e){var t=this.ws.getMultilingualValueImmediate(e,"Label");return"Required"===e.Visibility&&(t="".concat(t," *")),t}},{key:"parameterDesc",value:function(e){return e.desc||(e.desc=Object(W.h)(this.ws,e.Control,e.ControlOptions))}},{key:"updateOn",value:function(e){var t=this.parameterDesc(e);return Object(W.s)(t)}},{key:"trackByKey",value:function(e){return e.Key}},{key:"onAutoGenerate",value:function(e,t,n){if(n){var i=this.lineDefinition(e);this.autoGenerateLineDefId===e&&this.autoGenerateDoc===t||(this.autoGenerateDoc=t,this.autoGenerateLineDefId=e,this.autoGenerateArgs={}),i.GenerateParameters.length>0?this.modalService.open(this.autoGenerateModal):this.onDoAutoGenerate()}}},{key:"onDoAutoGenerate",value:function(e){var t=this,n=this.autoGenerateDoc;this.autoGenerateRequiredParamsAreSet&&this.documentsApi.autoGenerate(this.autoGenerateLineDefId,this.autoGenerateArgs).pipe(Object(P.a)((function(i){if(e&&e.close(),i.Result.length>0){var r;Object(W.o)(i.RelatedEntities,t.workspace),t.workspace.notifyStateChanged();var o,c=_createForOfIteratorHelper(i.Result);try{for(c.s();!(o=c.n()).done;)o.value._flags={isModified:!0}}catch(l){c.e(l)}finally{c.f()}(r=n.Lines).push.apply(r,_toConsumableArray(i.Result)),t._computeEntriesModel=null,t._linesModel=null}else{var a=t.translate.instant("Message_AutoGenerateReturnedNothing");t.details.displayModalMessage(a)}}))).subscribe({error:this.details.handleActionError})}},{key:"total",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t=t,!e||!e.Lines)return null;var i=e.Lines;if(n){var r=this.ws.definitions.ManualLinesDefinitionId;i=i.filter((function(e){return e.DefinitionId===r}))}return t*i.filter((function(e){return(e.State||0)>=0})).map((function(e){return e.Entries?e.Entries.filter((function(e){return e.Direction===t})).map((function(e){return(e.Value||0)*(e.Direction||1)})).reduce((function(e,t){return e+t}),0):0})).reduce((function(e,t){return e+t}),0)}},{key:"barcodeColumnCollection",value:function(e){var t=this.lineDefinition(e),n=t.Columns[t.BarcodeColumnIndex];if(n)switch(n.ColumnName){case"CustodianId":case"ParticipantId":return"Relation";case"CustodyId":return"Custody";case"ResourceId":return"Resource"}else console.error("BarcodeColumnIndex ".concat(t.BarcodeColumnIndex," is out of range"))}},{key:"barcodeColumnIndex",value:function(e){return this.lineDefinition(e).BarcodeColumnIndex}},{key:"barcodeQuantityColumnIndex",value:function(e){var t=this.lineDefinition(e);if(this.barcodeQuantityColumnIndexDefinition!==t){this.barcodeQuantityColumnIndexDefinition=t;var n=t.Columns[t.BarcodeColumnIndex];n?this.barcodeQuantityColumnIndexResult=t.Columns.findIndex((function(e){return"Quantity"===e.ColumnName&&e.EntryIndex===n.EntryIndex})):console.error("Could not find suitable quantity column for barcode")}return this.barcodeQuantityColumnIndexResult}},{key:"showBarcodeField",value:function(e,t){if(!t)return!1;var n=this.lineDefinition(e);return Object(W.n)(n.BarcodeColumnIndex)}},{key:"barcodeFieldPlaceholder",value:function(e){var t=this.barcodeColumnIndex(e),n=this.columnLabel(e,t);return this.translate.instant("Scan0",{0:n})}},{key:"getBarcode",value:function(e,t){return this.barcodeModel===t&&this.barcodeLineDefId===e||(this.barcodeModel=t,this.barcodeLineDefId=e,this.barcode=null),this.barcode}},{key:"setBarcode",value:function(e,t,n){this.barcodeModel===t&&this.barcodeLineDefId===e||(this.barcodeModel=t,this.barcodeLineDefId=e,this.barcode=null),this.barcode!==n&&(this.barcode=n,this.clearBarcodeError())}},{key:"drawAttentionToLine",value:function(e,t,n){var i=this;this.attentionItem=e,setTimeout((function(){return i.attentionItem=null}),250),null===t?setTimeout((function(){return n.scrollToEnd()}),50):setTimeout((function(){return n.scrollTo(t)}),50)}},{key:"onBarcodeSuccess",value:function(e){e.BarcodeBeepsEnabled&&this.audio.beep(100,920,150)}},{key:"getBarcodeError",value:function(e,t){return this.barcodeErrorsModel===t&&this.barcodeErrorsLineDefId===e||(this.barcodeErrorsModel=t,this.barcodeErrorsLineDefId=e,this.clearBarcodeError()),this.barcodeError?this.barcodeError():null}},{key:"showBarcodeError",value:function(e,t){return this.barcodeErrorsModel===t&&this.barcodeErrorsLineDefId===e||(this.barcodeErrorsModel=t,this.barcodeErrorsLineDefId=e,this.clearBarcodeError()),!!this.barcodeError}},{key:"onBarcodeError",value:function(e,t){this.barcodeError=t,e.BarcodeBeepsEnabled&&this.audio.beep(999,150,300)}},{key:"clearBarcodeError",value:function(){this.barcodeError=null}},{key:"getBarcodeScanCount",value:function(e,t,n){return this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={}),this._barcodeScanCount["".concat(e,"/").concat(n)]||0}},{key:"incrementBarcodeScanCount",value:function(e,t,n){this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={});var i="".concat(e,"/").concat(n);this._barcodeScanCount[i]=this._barcodeScanCount[i]?this._barcodeScanCount[i]+1:1}},{key:"clearBarcodeScanCount",value:function(e,t,n){this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={});var i="".concat(e,"/").concat(n),r=this._barcodeScanCount[i];return delete this._barcodeScanCount[i],r}},{key:"isBarcodeLoading",value:function(e,t){return this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]>0}},{key:"onBarcodeStartLoading",value:function(e,t,n){this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]=this._isBarcodeLoading[e]?this._isBarcodeLoading[e]+1:1,this.incrementBarcodeScanCount(e,t,n)}},{key:"onBarcodeFinishedLoading",value:function(e,t,n){return this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]&&(this._isBarcodeLoading[e]=Math.max(0,this._isBarcodeLoading[e]-1)),this.clearBarcodeScanCount(e,t,n)}},{key:"onBarcodeEnter",value:function(e,t,n){var i=this,r=this.getBarcode(e,t);if(r){this.setBarcode(e,t,null);var o=this.lineDefinition(e),c=this.barcodeColumnCollection(e),a=this.barcodeColumnIndex(e),l=o.BarcodeProperty,s=function(c,l){if("IncrementQuantity"===o.BarcodeExistingItemHandling){var s=i.barcodeQuantityColumnIndex(e),u=i.getFieldValue(e,s,c,t)||0;i.setFieldValue(e,s,c,t,u+1),i.drawAttentionToLine(c,l,n),i.onBarcodeSuccess(o)}else if("AddNewLine"===o.BarcodeExistingItemHandling){var d=i.onAddNewLine(e,t),b=i.getFieldValue(e,a,c,t);i.setFieldValue(e,a,d,t,b),i.drawAttentionToLine(d,null,n),i.onBarcodeSuccess(o)}else"ThrowError"===o.BarcodeExistingItemHandling?(i.drawAttentionToLine(c,l,n),i.onBarcodeError(o,(function(){return i.translate.instant("Error_Barcode0AlreadyAdded",{0:r})}))):"DoNothing"===o.BarcodeExistingItemHandling?(i.drawAttentionToLine(c,l,n),i.onBarcodeSuccess(o)):console.error("Unknown value '".concat(o.BarcodeExistingItemHandling,"' for BarcodeExistingItemHandling"))},u=this.lines(e,t),d=u.findIndex((function(n){var o=i.getFieldValue(e,a,n,t),s=i.ws.get(c,o);return!!s&&s[l]===r})),b=u[d];if(b)s(b,d);else if(this.getBarcodeScanCount(e,t,r)>0)this.incrementBarcodeScanCount(e,t,r);else{var f,m,g,p;switch(o.Columns[o.BarcodeColumnIndex].ColumnName){case"CustodianId":m=(f=this.definitionIdsCustodian_Smart(e,a))&&1===f.length?f[0]:null,p=(g=Object(Gv.a)(this.workspace,this.translate,m)).select+",DefinitionId,"+this.additionalSelectCustodian_Smart(e);break;case"CustodyId":m=(f=this.definitionIdsCustody_Smart(e,a))&&1===f.length?f[0]:null,p=(g=Object(Jv.a)(this.workspace,this.translate,m)).select+",DefinitionId,"+this.additionalSelectCustody_Smart(e);break;case"ParticipantId":m=(f=this.definitionIdsParticipant_Smart(e,a))&&1===f.length?f[0]:null,p=(g=Object(Gv.a)(this.workspace,this.translate,m)).select+",DefinitionId,"+this.additionalSelectParticipant_Smart(e);break;case"ResourceId":m=(f=this.definitionIdsResource_Smart(e,a))&&1===f.length?f[0]:null,p=(g=Object($v.a)(this.workspace,this.translate,m)).select+",DefinitionId,"+this.additionalSelectResource_Smart(e)}var h=g.properties[l];if(!h)return void console.error("Barcode Property '".concat(l,"' could not be found"));var v=Object(Si.g)(h)?"'".concat(r.replace("'","''"),"'"):r.toString(),y="".concat(l," eq ").concat(v),I=this.getFilter(e,a),C=f.length>1?f.map((function(e){return"DefinitionId eq ".concat(e)})).reduce((function(e,t){return"".concat(e," or ").concat(t)})):null,w={select:p,filter:y+" and IsActive eq true"+(I?" and (".concat(I,")"):"")+(C?" and (".concat(C,")"):""),top:2,skip:0};this.onBarcodeStartLoading(e,t,r),this.api.crudFactory(g.apiEndpoint,this.notifyDestruct$).getEntities(w).pipe(Object(P.a)((function(c){var u=i.onBarcodeFinishedLoading(e,t,r);if(c&&c.Result&&c.Result.length>0)if(c.Result.length>1)i.onBarcodeError(o,(function(){return i.translate.instant("Error_MoreThanOneRecordWithBarcode0",{0:r})}));else{var d=Object(W.c)(c,i.workspace)[0];if(i.ws.get(c.CollectionName,d)[l]!==r)i.onBarcodeError(o,(function(){return i.translate.instant("Error_CouldNotFindBarcode0",{0:r})}));else{var b=i.lines(e,t),f=b.findIndex((function(n){return d===i.getFieldValue(e,a,n,t)})),m=b[f];m?s(m,f):function(){var r=i.onAddNewLine(e,t);if(i.setFieldValue(e,a,r,t,d),"IncrementQuantity"===o.BarcodeExistingItemHandling){var c=i.barcodeQuantityColumnIndex(e);i.setFieldValue(e,c,r,t,1)}if(i.drawAttentionToLine(r,null,n),i.onBarcodeSuccess(o),u>1)for(var l=1;l<u;l++)Object(bn.a)(160*l).pipe(Object(P.a)((function(){return s(r,null)})),Object(Ef.a)(i.notifyDestruct$)).subscribe()}()}}else i.onBarcodeError(o,(function(){return i.translate.instant("Error_CouldNotFindBarcode0",{0:r})}))})),Object(j.a)((function(n){return i.onBarcodeError(o,(function(){return n.error})),i.onBarcodeFinishedLoading(e,t,r),Object(L.a)(null)})),Object(Ef.a)(this.notifyDestruct$)).subscribe()}}}},{key:"additionalSelectCustodian_Smart",value:function(e){return this.lineDefinition(e).BarcodeProperty||""}},{key:"additionalSelectCustody_Smart",value:function(e){return"CurrencyId,".concat(this.lineDefinition(e).BarcodeProperty||"")}},{key:"additionalSelectParticipant_Smart",value:function(e){return this.lineDefinition(e).BarcodeProperty||""}},{key:"additionalSelectResource_Smart",value:function(e){return"CurrencyId,UnitId,".concat(this.lineDefinition(e).BarcodeProperty||"")}},{key:"definitionId",set:function(e){this._definitionId!==e&&(this.documentsApi=this.api.documentsApi(e,this.notifyDestruct$),this._definitionId=e)},get:function(){return this._definitionId}},{key:"showBookkeepingTab",get:function(){return this.definition.HasBookkeeping}},{key:"showAttachmentsTab",get:function(){return this.definition.HasAttachments}},{key:"isJV",get:function(){return"ManualJournalVoucher"===this.definition.Code}},{key:"state",get:function(){return this.isPopupMode?(this.localState||(this.localState=new S.e),this.localState):this.globalState}},{key:"globalState",get:function(){var e="documents/"+this.definitionId;return this.workspace.current.mdState[e]||(this.workspace.current.mdState[e]=new S.e),this.workspace.current.mdState[e]}},{key:"view",get:function(){return"documents/".concat(this.definitionId)}},{key:"definition",get:function(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Documents[this.definitionId]:null)}},{key:"found",get:function(){return!!this.definition}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"masterCrumb",get:function(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}},{key:"serialPrefix",get:function(){return this.definition.Prefix}},{key:"codeWidth",get:function(){return this.definition.CodeWidth}},{key:"showSidebar",get:function(){return this.isScreenMode&&"new"!==this.route.snapshot.paramMap.get("id")}},{key:"functional_decimals",get:function(){return this.ws.settings.FunctionalCurrencyDecimals}},{key:"functional_format",get:function(){var e=this.functional_decimals;return"1.".concat(e,"-").concat(e)}},{key:"functionalPostfix",get:function(){return" ("+this.functionalName+")"}},{key:"flip",get:function(){return this.workspace.ws.isRtl?"horizontal":null}},{key:"marginLeft",get:function(){return this.workspace.ws.isRtl?0:36}},{key:"marginRight",get:function(){return this.workspace.ws.isRtl?36:0}},{key:"attachmentsClass",get:function(){return this.workspace.ws.isRtl?"mr-md-auto":"ml-md-auto"}},{key:"clearanceChoices",get:function(){var e=Object(zv.c)(this.workspace,this.translate,null).properties.Clearance;return Object(Si.c)(e)}},{key:"functionalId",get:function(){return this.ws.settings.FunctionalCurrencyId}},{key:"assignIcon",get:function(){return this.workspace.ws.isRtl?"angle-left":"angle-right"}},{key:"actionsDropdownPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}},{key:"modifiedTooltipPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}},{key:"commandsDropdownPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}},{key:"isOriginalDocument",get:function(){return this.definition.IsOriginalDocument}},{key:"hasManualLines",get:function(){var e=this;return this.definition.LineDefinitions.some((function(t){return e.isManualLine(t.LineDefinitionId)}))}},{key:"autoGenerateLineDef",get:function(){return this.lineDefinition(this.autoGenerateLineDefId)}},{key:"autoGenerateRequiredParamsAreSet",get:function(){var e=this.autoGenerateLineDef;if(e&&e.GenerateParameters.length>0){var t,n=_createForOfIteratorHelper(e.GenerateParameters);try{for(n.s();!(t=n.n()).done;){var i=t.value;if("Required"===i.Visibility&&!Object(W.n)(this.autoGenerateArgs[i.Key]))return!1}}catch(r){n.e(r)}finally{n.f()}}return!0}},{key:"functionalName",get:function(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")}},{key:"select",get:function(){var e=this.definition;if(this.selectDefinition!==e){this.selectDefinition=e;var t,n={},i=_createForOfIteratorHelper(e.LineDefinitions.map((function(e){return e.LineDefinitionId})));try{for(i.s();!(t=i.n()).done;){var r=t.value,o=this.ws.definitions.Lines[r];if(Object(W.n)(o.BarcodeColumnIndex)&&o.BarcodeProperty){var c=o.Columns[o.BarcodeColumnIndex];if(c)switch(c.ColumnName){case"CustodianId":n["Lines.Entries.Custodian.".concat(o.BarcodeProperty)]=!0;break;case"ParticipantId":n["Lines.Entries.Participant.".concat(o.BarcodeProperty)]=!0;break;case"CustodyId":n["Lines.Entries.Custody.".concat(o.BarcodeProperty)]=!0;break;case"ResourceId":n["Lines.Entries.Resource.".concat(o.BarcodeProperty)]=!0}}}}catch(u){i.e(u)}finally{i.f()}for(var a=this.selectBase,l=0,s=Object.keys(n);l<s.length;l++)a+=","+s[l];this.selectResult=a}return this.selectResult}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||E1)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(i.a),r.Pb(X.t),r.Pb(tG))},E1.\u0275cmp=r.Jb({type:E1,selectors:[["t-documents-details"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(bG,!0),r.Oc(fG,!0),r.Oc(mG,!0)),2&e&&(r.Ec(n=r.ic())&&(t.confirmModal=n.first),r.Ec(n=r.ic())&&(t.signatureModal=n.first),r.Ec(n=r.ic())&&(t.autoGenerateModal=n.first))},inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[r.yb],decls:19,vars:2,consts:[["collection","Document",3,"definitionId","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","isInactive","documentHeaderTemplate","actions","sidebarTemplate","registerPristineFunc","isDirtyFunc","extraParams","handleFreshExtras","toolbarTemplate","encodeCustomStateFunc","select","savePreprocessing",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["toolbar",""],["documentHeader",""],["document",""],["sidebar",""],["confirmModal",""],["signatureModal",""],["autoGenerateModal",""],["collection","Document",3,"definitionId","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","isInactive","documentHeaderTemplate","actions","sidebarTemplate","registerPristineFunc","isDirtyFunc","extraParams","handleFreshExtras","toolbarTemplate","encodeCustomStateFunc","select","savePreprocessing"],[3,"showHome"],["class","mx-2 d-inline-block",4,"ngIf"],["class","d-inline-block","container","body",3,"placement","ngbTooltip",4,"ngIf"],[1,"mx-2","d-inline-block"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-sm","btn-light","t-white-button","text-primary","t-toolbar-button",3,"disabled","click"],["icon","undo"],[1,"d-none","d-md-inline"],[1,"btn","btn-sm","btn-danger","t-toolbar-button",3,"disabled","click"],["icon","times"],[1,"btn","btn-sm","btn-success","t-toolbar-button",3,"disabled","click"],["icon","check"],[1,"w-100","t-document-header","d-flex","justify-content-end"],[4,"ngIf","ngIfElse"],["negativeStates",""],[1,"t-flow-chart","small","d-none","d-lg-block"],[3,"active",4,"ngIf"],[1,"small","t-lone-state","active","d-block","d-lg-none"],[4,"ngIf"],[1,"small","t-lone-state","active","d-block"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","codeWidth","prefix","ngModelChange",4,"ngIf"],["class","t-form-group","labelContext","PostingDateIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CustodianIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CustodyIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ParticipantIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ResourceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CenterIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CurrencyIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","QuantityIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","UnitIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","Time1IsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","Time2IsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ExternalReferenceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","InternalReferenceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","MemoIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["perTab",""],["perLine",""],["documentIsCommonMenu",""],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["smartCommands",""],["ngbDropdown","",4,"ngIf"],[3,"class","ngbNavItem",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["type","file","multiple","",1,"d-none",3,"change"],["fileInput",""],["manualLines",""],["header_Account",""],["row_Account",""],["header_Center",""],["row_Center",""],["header_Debit",""],["row_Debit",""],["header_Credit",""],["row_Credit",""],["autofillFromExchangeRate",""],["header_Memo",""],["row_Memo",""],["row_ModifiedWarning",""],["row_SmartEntryCommands",""],["header_ManualEntryCommands",""],["row_ManualEntryCommands",""],[1,"font-weight-normal"],["required","",3,"ngModel","ngModelOptions","codeWidth","prefix","ngModelChange"],["labelContext","PostingDateIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"metadata",4,"ngIf"],[3,"disabled","required","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],[3,"disabled","required","ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label","serverErrors"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],["labelContext","CustodianIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","definitionIds","filter","required","disabled","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionIds","filter","required","disabled","ngModelChange"],["labelContext","CustodyIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ParticipantIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ResourceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","CenterIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","required","disabled","filter","ngModelChange",4,"ngIf"],["link","../../../centers",3,"itemId"],[3,"ngModel","required","disabled","filter","ngModelChange"],["labelContext","CurrencyIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","filter","required","disabled","ngModelChange",4,"ngIf"],["link","../../../currencies",3,"itemId"],[3,"ngModel","filter","required","disabled","ngModelChange"],["labelContext","QuantityIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","required","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","required","disabled","ngModelChange"],["labelContext","UnitIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","Time1IsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","ngModelOptions","required","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","disabled","ngModelChange"],["labelContext","Time2IsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ExternalReferenceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","InternalReferenceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","MemoIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[1,"flex-grow-1"],[1,"font-italic","text-muted"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],[3,"icon"],[1,"t-menu-text"],[3,"ngbNavItem"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["smartHeaderCommands",""],["tabIsCommonMenu",""],[1,"text-danger"],["icon","exclamation"],["smartTab",""],["smartHeader",""],["smartRow",""],["formGroupContent",""],["class","row mx-0",4,"ngIf"],["tableTab",""],[1,"row","m-0","pt-2","t-form"],["noFormMessage",""],["class","col-12 py-1 px-3 d-flex",4,"ngIf"],[1,"col-12","d-flex","justify-content-end"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[1,"h-100","border-left"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1",3,"click"],["icon","trash",3,"title"],["icon","plus",3,"title"],["class","px-3 text-muted font-italic",4,"ngIf"],[1,"px-3","text-muted","font-italic"],[1,"col-12","py-1","px-3","d-flex"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],["icon","plus"],["class","row m-0 pt-2 pb-3 t-form border-bottom",4,"ngIf"],[3,"dataSource","isEdit","columnPaths","headerTemplate","rowTemplate","columnTemplates","onNewItem","highlightFunc","attentionItem","insert","delete"],["tableComponent",""],["class","d-flex justify-content-end mt-3",4,"ngIf"],[1,"row","m-0","pt-2","pb-3","t-form","border-bottom"],[1,"w-100"],["class","t-form-group",4,"ngIf"],["class","w-100 pt-3",4,"ngIf"],[1,"t-form-group",3,"labelContextMenu","labelContext","disableLabelMenu","serverErrors","label"],[1,"t-form-group"],[3,"ngModel","placeholder","ngModelChange","enter"],[1,"w-100","pt-3"],["dismissable","true",3,"dismiss"],[1,"d-flex","justify-content-end","mt-3"],[1,"border-top","border-bottom","py-1"],["colspan","10",1,"p-1"],[2,"width","20px"],[1,"small","font-weight-bold"],[2,"text-align","right"],[4,"ngTemplateOutlet"],[1,"border-top","border-bottom"],[1,"small","font-weight-bold","pb-12","pt-2"],[1,"px-1","pt-2",2,"text-align","right"],[1,"small","font-weight-bold","pt-12","pb-2"],[1,"px-1","pb-2","align-right",2,"text-align","right"],["class","t-form-group",3,"serverErrors",4,"ngIf"],["class","t-form-group",3,"serverErrors","label",4,"ngIf"],[1,"t-form-group",3,"serverErrors"],[1,"t-form-group",3,"serverErrors","label"],[3,"ngSwitch",4,"ngIf","ngIfElse"],["editMode",""],[3,"ngSwitch"],["link","../../../accounts",3,"itemId",4,"ngSwitchCase"],["link","../../../currencies",3,"itemId",4,"ngSwitchCase"],[3,"link","itemId",4,"ngSwitchCase"],["link","../../../centers",3,"itemId",4,"ngSwitchCase"],["link","../../../entry-types",3,"itemId",4,"ngSwitchCase"],["class","t-right-aligned",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["link","../../../accounts",3,"itemId"],["link","../../../entry-types",3,"itemId"],[1,"t-right-aligned"],["editableFormGroupContent",""],[1,"w-100","t-disabled-background","border-bottom",3,"ngSwitch"],["additionalSelect","CurrencyId",3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],["additionalSelect","E",3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],[3,"required","definitionIds","ngModel","filter","additionalSelect","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],[3,"required","filter","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","textAlignment","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","ngModelOptions","ngModelChange",4,"ngSwitchCase"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngSwitchCase"],["additionalSelect","CurrencyId",3,"required","ngModel","filter","ngModelChange"],["additionalSelect","E",3,"required","ngModel","filter","ngModelChange"],[3,"required","definitionIds","ngModel","filter","additionalSelect","ngModelChange"],[3,"required","ngModel","filter","ngModelChange"],[3,"required","filter","ngModel","ngModelChange"],[3,"required","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","textAlignment","ngModelChange"],[3,"required","ngModel","ngModelOptions","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModel","required","id","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[1,"row","mx-0"],[1,"col-12","mt-3"],["class","col-12 col-lg-6 px-2 px-lg-5 mt-3 mb-1",4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","px-2","px-lg-5","mt-3","mb-1"],[1,"border-bottom","d-flex","align-items-stretch","p-2","bg-light"],[2,"height","37px"],[1,"px-2","small","p-1","d-flex","justify-content-between"],[1,"text-truncate"],["link","../../../roles",3,"itemId",4,"ngIf"],[3,"link","itemId",4,"ngIf"],["link","../../../users",3,"itemId",4,"ngIf"],["class","text-muted",4,"ngIf"],["placement","bottom","container","body",1,"d-inline",3,"ngbTooltip"],["class","btn btn-sm btn-light text-primary t-white-button btn-sm h-100 py-0 px-1","style","margin-top:-4px",3,"title","disabled","click",4,"ngIf"],[1,"d-flex","align-items-center","justify-content"],["shape","circle",3,"src","imageId","size"],[1,"p-2","flex-grow-1","text-truncate","d-flex","align-items-center"],["link","../../../users",3,"itemId"],[1,"d-flex","align-items-center"],[1,"px-1","font-weight-bold","t-large"],[1,"text-danger","small","align-items-center",2,"max-width","120px"],[1,"font-weight-bold"],["placement","bottom","container","body",1,"w-50","px-1",3,"ngbTooltip"],[1,"btn","btn-danger","px-2","w-100","h-100",3,"disabled","click"],[1,"btn","btn-success","px-2","w-100","h-100",3,"disabled","click"],["link","../../../roles",3,"itemId"],[1,"text-muted"],[1,"btn","btn-sm","btn-light","text-primary","t-white-button","btn-sm","h-100","py-0","px-1",2,"margin-top","-4px",3,"title","disabled","click"],["icon","trash"],["ngbDropdown","",3,"placement",4,"ngIf"],["ngbDropdown","",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],[1,"small"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"t-transparent-background",3,"click"],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],["icon","ellipsis-v"],["ngbDropdown",""],["href","","ngbDropdownToggle","",1,"nav-link","t-no-arrow",3,"click"],["icon","ellipsis-h"],["class","t-transparent-background","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["ngbNavLink","",1,"px-2",3,"title"],["icon","book"],[1,"col-12","mt-3","pb-2","border-bottom"],[1,"small2","font-weight-bold2"],[3,"dataSource","itemSize","visibleRows","highlightFunc","columnPaths","columnTemplates"],["ngbNavLink","",1,"px-2"],[1,"small","t-slightly-bold",3,"title"],["icon","paperclip"],["class","p-3 font-italic font-weight-light2 text-muted",4,"ngIf"],["class","w-100 mx-0 mb-1 p-2 p-sm-3 overflow-auto","style","max-height: 450px;",4,"ngIf"],["class","py-2 px-3 col-12 d-flex align-items-center justify-content-end",4,"ngIf"],[1,"p-3","font-italic","font-weight-light2","text-muted"],[1,"w-100","mx-0","mb-1","p-2","p-sm-3","overflow-auto",2,"max-height","450px"],["class","text-nowrap",3,"bg-light",4,"ngFor","ngForOf"],[1,"text-nowrap"],[1,"border-bottom","d-flex","align-items-center"],[1,"px-3","pt-1","pb-2"],[2,"font-size","200%",3,"icon"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","px-1",2,"min-width","0px"],["class","d-flex align-items-stretch","style","max-width: 750px;",4,"ngIf","ngIfElse"],["editAttachment",""],[1,"d-flex","align-items-stretch"],[1,"flex-grow-1","small","text-muted","text-truncate",2,"min-width","0px"],["class","mx-1",4,"ngIf"],[1,"d-flex","align-items-stretch",2,"max-width","750px"],["type","button",1,"btn","btn-link","p-0","text-primary","border-top-0","border-left-0","border-right-0","text-truncate",3,"click"],["class","mx-2 flex-grow-1","style","min-width: 0;",4,"ngIf"],[1,"mx-2","flex-grow-1",2,"min-width","0"],[1,"text-black"],[2,"max-width","500px"],[3,"serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"mx-1"],["class","btn btn-sm text-primary p-0 px-1 t-toolbar-button btn-light t-white-button",3,"title","click",4,"ngIf","ngIfElse"],["spinner",""],[1,"btn","btn-sm","text-primary","p-0","px-1","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","download"],[1,"px-1","t-toolbar-button","d-inline","t-vertical-align-middle"],[1,"py-2","px-3","col-12","d-flex","align-items-center","justify-content-end"],[1,"btn","btn-sm","btn-primary","text-primary2","btn-light2","t-white-button2",3,"click"],["icon","upload"],[3,"dataSource","isEdit","itemSize","columnPaths","columnTemplates","onNewItem","insert","delete"],["class","row m-0 py-2",4,"ngIf"],[1,"row","m-0","py-2"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["style","min-width: 150px;",3,"ngModel","additionalSelect","filter","ngModelChange",4,"ngIf"],[1,"small","d-flex","flex-wrap","px-2","pt-1"],["class","text-muted font-italic",4,"ngIf"],[1,"text-muted","font-italic"],[2,"min-width","150px",3,"ngModel","additionalSelect","filter","ngModelChange"],[3,"label","serverErrors"],["required","",3,"ngModel","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelChange"],["textAlignment","right","required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],["required","",3,"ngModel","additionalSelect","definitionIds","ngModelChange",4,"ngIf"],["required","",3,"ngModel","additionalSelect","definitionIds","ngModelChange"],["required","",3,"ngModel","definitionIds","ngModelChange",4,"ngIf"],["required","",3,"ngModel","definitionIds","ngModelChange"],["required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],[3,"ngModel","filter","ngModelChange",4,"ngIf"],[3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","filter","ngModelChange",4,"ngIf"],["required","",3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"minDecimalPlaces","maxDecimalPlaces","ngModel","ngModelChange",4,"ngIf"],[3,"minDecimalPlaces","maxDecimalPlaces","ngModel","ngModelChange"],[2,"float","right"],["class","h-100",3,"metadata",4,"ngIf"],[1,"h-100",3,"metadata"],["textAlignment","right",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],["class","d-flex justify-content-end pt-1",4,"ngIf"],[1,"d-flex","justify-content-end","pt-1"],["tabindex","-1",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1",3,"click"],["icon","exchange-alt",3,"title"],["icon","exclamation-triangle","class","text-warning","container","body",3,"placement","ngbTooltip",4,"ngIf"],["icon","exclamation-triangle","container","body",1,"text-warning",3,"placement","ngbTooltip"],[1,"d-flex","justify-content-center","px-0","px-sm-2"],[1,"w-100","t-paper-width"],["class","bg-light border-bottom py-2 px-3",4,"ngIf"],[1,"bg-light","border-bottom","py-2","px-3"],[1,"d-flex"],[1,"p-2","text-truncate"],["class","px-2 pb-2 pt-0",3,"margin-left","margin-right",4,"ngIf"],[1,"px-2","pb-2","pt-0"],[1,"form-group"],["for","user",1,"small","font-weight-bold"],[1,"bg-white","border","t-borderless-input","p-1"],["id","user",3,"ngModel","filter","showCreate","ngModelChange"],["id","message",1,"form-control","t-input","p-1","border","bg-white",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"px-3","py-3","small","font-weight-bold"],[1,"bg-light","border-bottom","pt-2","pb-2","px-3",3,"ngSwitch"],[1,"py-2","text-truncate"],[1,"small","text-muted"],[1,"d-flex","flex-wrap"],[1,"pt-2"],["icon","angle-right",3,"flip","size"],[1,"my-auto","t-vertical-alignment-center","small","text-muted"],["class","pt-1 pb-2 px-2",3,"margin-left","margin-right",4,"ngIf"],[1,"pt-1","pb-2","px-2"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-danger",3,"click"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["class","mt-3 mb-2",4,"ngIf"],["class","mt-1",4,"ngIf"],[1,"btn",3,"disabled","click"],[1,"mt-3","mb-2"],[1,"font-weight-bold","small"],[1,"t-vertical-align-middle"],["filter","Id ne me",3,"ngModel","ngModelChange"],[1,"mt-1"],["class","t-form-group","style","margin-top:0!important",3,"label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn","btn-primary",3,"disabled","click"],["icon","bolt"],[1,"t-form-group",2,"margin-top","0!important",3,"label"],[3,"ngModel","desc","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(r.Rc(0,pG,1,22,"t-details",0),r.Rc(1,hG,1,1,"ng-template",null,1,r.Sc),r.Rc(3,vG,2,1,"ng-template",null,2,r.Sc),r.Rc(5,MG,5,5,"ng-template",null,3,r.Sc),r.Rc(7,$G,4,2,"ng-template",null,4,r.Sc),r.Rc(9,s1,67,25,"ng-template",null,5,r.Sc),r.Rc(11,v1,4,2,"ng-template",null,6,r.Sc),r.Rc(13,y1,18,10,"ng-template",null,7,r.Sc),r.Rc(15,k1,20,17,"ng-template",null,8,r.Sc),r.Rc(17,T1,16,8,"ng-template",null,9,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,q.a,dn,X.E,ne.b,Ce.a,X.v,x.t,X.A,iG,ie.u,ie.k,ie.n,Tn.a,dd,En.a,Ca,lf,YW,RW,rd,Zu,xn,NC,we.a,X.x,X.y,X.w,x.B,tl.a,ye.a,ke.a,nl.a,x.y,x.z,x.A,lQ,PV,ie.a,ie.b,he,X.l,X.r,X.p,X.o,uG,Ys,ie.c,hU],pipes:[G.d,sg,dg,x.g,Te,Ve],encapsulation:2}),E1);function x1(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Entry_Direction_Debit")," ")}function R1(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Entry_Direction_Credit")," ")}function D1(e,t){if(1&e&&(r.Vb(0,"div",6),r.Vb(1,"div",7),r.Vb(2,"span"),r.Tc(3),r.mc(4,"accounting"),r.Ub(),r.Ub(),r.Vb(5,"div",8),r.Vb(6,"div",9),r.Qb(7,"t-auto-cell",10),r.Ub(),r.Qb(8,"t-auto-cell",11),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(3),r.Vc(" ",r.oc(4,3,i.c[n].Direction*i.c[n].Value,i.functional_format),""),r.Bb(4),r.sc("entity",i.c[n]),r.Bb(1),r.sc("entity",i.c[n])}}function B1(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Memo"),"\n")}function S1(e,t){if(1&e&&(r.Vb(0,"span",12),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.ws.get("LineForQuery",i.c[n].LineId).Memo)}}var _1,O1=function(){return[]},L1=function(e){return{template:e,expression:"Direction eq 1"}},F1=function(e){return{template:e,expression:"Direction eq -1"}},A1=function(e,t){return[e,t]},P1=function(e){return{OpenedAt:e}},N1=((_1=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).workspace=e,r.translate=i,r}return _createClass(n,[{key:"c",get:function(){return this.ws.DetailsEntry}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"functional_format",get:function(){var e=this.ws.settings.FunctionalCurrencyDecimals;return"1.".concat(e,"-").concat(e)}}]),n}(_t.a)).\u0275fac=function(e){return new(e||_1)(r.Pb(S.m),r.Pb(G.e))},_1.\u0275cmp=r.Jb({type:_1,selectors:[["t-details-entries"]],features:[r.yb],decls:12,vars:24,consts:[["collection","DetailsEntry","selectDefault","Line.PostingDate,Account,Line.State,Direction,Value","selectForTiles","Line.PostingDate,Line.State,Account.Name,Account.Name2,Account.Name3,Direction,Value,Line.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["debit",""],["credit",""],["tile",""],["summaryHeader",""],["summaryColumn",""],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","DetailsEntry","path","Line.PostingDate",3,"entity"],["collection","DetailsEntry","path","Line.State",3,"entity"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,x1,2,3,"ng-template",null,1,r.Sc),r.Rc(4,R1,2,3,"ng-template",null,2,r.Sc),r.Rc(6,D1,9,6,"ng-template",null,3,r.Sc),r.Rc(8,B1,2,3,"ng-template",null,4,r.Sc),r.Rc(10,S1,2,1,"ng-template",null,5,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"DetailsEntries"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",o)("tableSummaryColumnTemplate",a)("tableSummaryHeaderTemplate",c)("multiselectActions",r.vc(14,O1))("filterDefinition",r.wc(22,P1,r.xc(19,A1,r.wc(15,L1,n),r.wc(17,F1,i))))}},directives:[Ot.a,Ie.a],pipes:[G.d,dg],encapsulation:2}),_1);function j1(e,t){if(1&e&&(r.Vb(0,"div",5),r.Vb(1,"span",6),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",7),r.Vb(4,"span"),r.Tc(5),r.mc(6,"dateFormat"),r.Ub(),r.Ub()),2&e){var n,i=t.id,o=r.lc();r.Bb(2),r.Uc(o.ws.getMultilingualValue("Currency",null==(n=o.ws.get("ExchangeRate",i))?null:n.CurrencyId,"Name")),r.Bb(3),r.Uc(r.nc(6,2,o.c[i].ValidAsOf))}}function W1(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"ExchangeRate"),"\n")}function q1(e,t){if(1&e&&r.Tc(0),2&e){var n=t.id,i=r.lc();r.Vc(" ",i.exchangeRateDisplay(n),"\n")}}function Q1(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}var H1,$1=function(){return[]},G1=function(e){return{template:e,expression:"CreatedById eq me"}},z1=function(e){return[e]},J1=function(e){return{CreatedBy:e}},K1=((H1=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i.expand="",i}return _createClass(n,[{key:"exchangeRateDisplay",value:function(e){var t=this.ws.get("ExchangeRate",e);return t?"".concat(Object(Oi.c)(new Date(t.ValidAsOf)),"-").concat(t.CurrencyId):""}},{key:"c",get:function(){return this.ws.ExchangeRate}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||H1)(r.Pb(S.m))},H1.\u0275cmp=r.Jb({type:H1,selectors:[["t-exchange-rates-master"]],features:[r.yb],decls:10,vars:19,consts:[["collection","ExchangeRate","selectDefault","ValidAsOf,AmountInCurrency,Currency,AmountInFunctional","selectForTiles","ValidAsOf,Currency.Name,Currency.Name2,Currency.Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,j1,7,4,"ng-template",null,1,r.Sc),r.Rc(4,W1,2,3,"ng-template",null,2,r.Sc),r.Rc(6,q1,1,1,"ng-template",null,3,r.Sc),r.Rc(8,Q1,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"ExchangeRates"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(12,$1))("filterDefinition",r.wc(17,J1,r.wc(15,z1,r.wc(13,G1,c))))}},directives:[Ot.a],pipes:[G.d,sg],encapsulation:2}),H1),Y1=n("yf4G");function X1(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.exchangeRateDisplay(n))}}function Z1(e,t){if(1&e&&(r.Vb(0,"t-view-link",9),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("itemId",null==n?null:n.CurrencyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Currency",null==n?null:n.CurrencyId,"Name")," ")}}function e2(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"t-currencies-picker",10),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.CurrencyId=e})),r.Ub(),r.Sb()}if(2&e){var i=r.lc().model,o=r.lc();r.Bb(1),r.sc("ngModel",i.CurrencyId)("filter",o.currenciesFilter)}}function t2(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(r.nc(2,1,null==n?null:n.ValidAsOf))}}var n2=function(){return{updateOn:"blur"}};function i2(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",11),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ValidAsOf=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.ValidAsOf)("ngModelOptions",r.vc(3,n2))("required",!0)}}function r2(e,t){if(1&e&&(r.Vb(0,"span",12),r.Tc(1),r.mc(2,"accounting"),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("title",null==n?null:n.AmountInCurrency),r.Bb(1),r.Uc(r.oc(2,2,null==n?null:n.AmountInCurrency,i.AmountInCurrency_format(n)))}}function o2(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",13),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.AmountInCurrency=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("disabled",i.IsSystem)("ngModel",i.AmountInCurrency)("minDecimalPlaces",o.AmountInCurrency_decimals(i))("maxDecimalPlaces",6)("ngModelOptions",r.vc(5,n2))}}function c2(e,t){if(1&e&&(r.Vb(0,"span",12),r.Tc(1),r.mc(2,"accounting"),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("title",null==n?null:n.AmountInFunctional),r.Bb(1),r.Uc(r.oc(2,2,null==n?null:n.AmountInFunctional,i.functional_format))}}function a2(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",13),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.AmountInFunctional=e})),r.Ub()}if(2&e){var i=r.lc().model,o=r.lc();r.sc("disabled",i.IsSystem)("ngModel",i.AmountInFunctional)("minDecimalPlaces",o.functional_decimals)("maxDecimalPlaces",6)("ngModelOptions",r.vc(5,n2))}}function l2(e,t){if(1&e&&(r.Vb(0,"t-form-group",3),r.mc(1,"translate"),r.Rc(2,Z1,2,2,"t-view-link",4),r.Rc(3,e2,2,2,"ng-container",5),r.Ub(),r.Vb(4,"t-form-group",3),r.mc(5,"translate"),r.Rc(6,t2,3,3,"div",5),r.Rc(7,i2,1,4,"t-date-picker",6),r.Ub(),r.Vb(8,"t-form-group",3),r.mc(9,"translate"),r.Rc(10,r2,3,5,"span",7),r.Rc(11,o2,1,6,"t-decimal-editor",8),r.Ub(),r.Vb(12,"t-form-group",3),r.mc(13,"translate"),r.Rc(14,c2,3,5,"span",7),r.Rc(15,a2,1,6,"t-decimal-editor",8),r.Ub()),2&e){var n=t.model,i=t.isEdit,o=r.lc();r.sc("label",r.nc(1,16,"ExchangeRate_Currency"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.CurrencyId),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(5,18,"ExchangeRate_ValidAsOf"))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.ValidAsOf),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(9,20,"ExchangeRate_AmountInCurrency")+o.AmountInCurrency_postfix(n))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.AmountInCurrency),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(13,22,"ExchangeRate_AmountInFunctional")+o.functional_postfix)("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.AmountInFunctional),r.Bb(2),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var s2,u2=function(){return[]},d2=((s2=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).workspace=e,r.translate=i,r.expand="Currency",r.create=function(){return{ValidAsOf:Object(Oi.e)(),AmountInCurrency:1}},r}return _createClass(n,[{key:"AmountInCurrency_postfix",value:function(e){return e&&e.CurrencyId?" (".concat(this.ws.getMultilingualValue("Currency",e.CurrencyId,"Name"),")"):""}},{key:"AmountInCurrency_decimals",value:function(e){var t=this.ws.get("Currency",e?e.CurrencyId:null);return t?t.E:this.ws.settings.FunctionalCurrencyDecimals}},{key:"AmountInCurrency_format",value:function(e){return"1.".concat(this.AmountInCurrency_decimals(e),"-6")}},{key:"isInactive",value:function(){return!1}},{key:"exchangeRateDisplay",value:function(e){return e?"".concat(Object(Oi.c)(new Date(e.ValidAsOf)),"-").concat(e.CurrencyId):""}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"masterCrumb",get:function(){var e=Object(Y1.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}},{key:"currenciesFilter",get:function(){return"Id ne '".concat(this.ws.settings.FunctionalCurrencyId,"'")}},{key:"functional_decimals",get:function(){return this.ws.settings.FunctionalCurrencyDecimals}},{key:"functional_format",get:function(){return"1.".concat(this.functional_decimals,"-6")}},{key:"functional_postfix",get:function(){return" ("+this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")+")"}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||s2)(r.Pb(S.m),r.Pb(G.e))},s2.\u0275cmp=r.Jb({type:s2,selectors:[["t-exchange-rates-details"]],features:[r.yb],decls:5,vars:11,consts:[["collection","ExchangeRate",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],[1,"t-form-group",3,"label","serverErrors"],["link","../../currencies",3,"itemId",4,"ngIf"],[4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"title",4,"ngIf"],["required","",3,"disabled","ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelOptions","ngModelChange",4,"ngIf"],["link","../../currencies",3,"itemId"],["additionalSelect","E","required","",3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"title"],["required","",3,"disabled","ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.Rc(1,X1,2,1,"ng-template",null,1,r.Sc),r.Rc(3,l2,16,24,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",n)("documentTemplate",i)("actions",r.vc(10,u2))("isInactive",t.isInactive)}},directives:[q.a,Ce.a,x.u,Ca,Zu,ie.u,ie.k,ie.n,dd,xn],pipes:[G.d,sg,dg],encapsulation:2}),s2);function b2(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n,i=r.lc().id,o=r.lc();r.Bb(1),r.Uc(" - "+(null==(n=o.ws.get("Document",i))?null:n.Memo))}}function f2(e,t){if(1&e&&(r.Vb(0,"div",6),r.Vb(1,"div",7),r.Qb(2,"t-image",8),r.Ub(),r.Tc(3," \xa0\xa0\xa0 "),r.Vb(4,"div",9),r.Vb(5,"div",10),r.Vb(6,"div",11),r.Tc(7),r.Ub(),r.Vb(8,"div",12),r.Tc(9),r.mc(10,"datetimeFormat"),r.Ub(),r.Ub(),r.Vb(11,"div",13),r.Vb(12,"div",14),r.Vb(13,"span"),r.Tc(14),r.Ub(),r.Rc(15,b2,2,1,"span",15),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e){var n,i,o=t.id,c=r.lc(),a=null==(n=c.ws.get("User",c.c[o].CreatedById))?null:n.ImageId,l=null==(i=c.ws.get("Document",o))?null:i.Memo;r.Bb(2),r.sc("src","users/"+c.c[o].CreatedById+"/image")("imageId",a)("size",42),r.Bb(5),r.Vc(" ",c.ws.getMultilingualValue("User",c.c[o].CreatedById,"Name")," "),r.Bb(2),r.Vc(" ",r.nc(10,7,c.c[o].CreatedAt)," "),r.Bb(5),r.Uc(c.formatSerial(o)),r.Bb(1),r.sc("ngIf",l)}}function m2(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Document"),"\n")}function g2(e,t){if(1&e&&(r.Vb(0,"span",16),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.formatSerial(n))}}function p2(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"NotOpened")," ")}function h2(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Opened")," ")}var v2,y2=function(){return[]},I2=function(e){return{template:e,expression:"OpenedAt eq null"}},C2=function(e){return{template:e,expression:"OpenedAt ne null"}},w2=function(e,t){return[e,t]},k2=function(e){return{OpenedAt:e}},M2=((v2=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).workspace=e,r.translate=i,r}return _createClass(n,[{key:"formatSerial",value:function(e){var t=this.ws.Document[e],n=t.DefinitionId,i=Object(zv.c)(this.workspace,this.translate,n).properties.SerialNumber,r=t.SerialNumber;return Object(zv.a)(r,i.prefix,i.codeWidth)}},{key:"c",get:function(){return this.ws.InboxRecord}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||v2)(r.Pb(S.m),r.Pb(G.e))},v2.\u0275cmp=r.Jb({type:v2,selectors:[["t-inbox"]],features:[r.yb],decls:12,vars:24,consts:[["collection","InboxRecord","selectDefault","Document.Memo,CreatedAt,CreatedBy,Comment,OpenedAt","selectForTiles","Comment,CreatedAt,CreatedBy.Name,CreatedBy.Name2,CreatedBy.Name3,CreatedBy.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["notopened",""],["opened",""],[1,"d-flex"],[1,"border"],[3,"src","imageId","size"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","t-slightly-bold"],[1,"text-truncate","text-muted"],[1,"d-flex","justify-content-between","mt-1","small","text-truncate"],[1,"text-truncate","text-muted",2,"min-width","0"],[4,"ngIf"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,f2,16,9,"ng-template",null,1,r.Sc),r.Rc(4,m2,2,3,"ng-template",null,2,r.Sc),r.Rc(6,g2,2,1,"ng-template",null,3,r.Sc),r.Rc(8,p2,2,3,"ng-template",null,4,r.Sc),r.Rc(10,h2,2,3,"ng-template",null,5,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"Inbox"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(14,y2))("filterDefinition",r.wc(22,k2,r.xc(19,w2,r.wc(15,I2,c),r.wc(17,C2,a))))}},directives:[Ot.a,he,x.u],pipes:[G.d,Te],encapsulation:2}),v2);function V2(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n,i=r.lc().id,o=r.lc();r.Bb(1),r.Uc(" - "+(null==(n=o.ws.get("Document",i))?null:n.Memo))}}function T2(e,t){if(1&e&&(r.Vb(0,"div",6),r.Vb(1,"div",7),r.Qb(2,"t-image",8),r.Ub(),r.Tc(3," \xa0\xa0\xa0 "),r.Vb(4,"div",9),r.Vb(5,"div",10),r.Vb(6,"div",11),r.Tc(7),r.Ub(),r.Vb(8,"div",12),r.Tc(9),r.mc(10,"datetimeFormat"),r.Ub(),r.Ub(),r.Vb(11,"div",13),r.Vb(12,"div",14),r.Vb(13,"span"),r.Tc(14),r.Ub(),r.Rc(15,V2,2,1,"span",15),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e){var n,i,o=t.id,c=r.lc(),a=null==(n=c.ws.get("User",c.c[o].AssigneeId))?null:n.ImageId,l=null==(i=c.ws.get("Document",o))?null:i.Memo;r.Bb(2),r.sc("src","users/"+c.c[o].AssigneeId+"/image")("imageId",a)("size",42),r.Bb(5),r.Vc(" ",c.ws.getMultilingualValue("User",c.c[o].AssigneeId,"Name")," "),r.Bb(2),r.Vc(" ",r.nc(10,7,c.c[o].CreatedAt)," "),r.Bb(5),r.Uc(c.formatSerial(o)),r.Bb(1),r.sc("ngIf",l)}}function E2(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Document"),"\n")}function U2(e,t){if(1&e&&(r.Vb(0,"span",16),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.formatSerial(n))}}function x2(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"NotOpened")," ")}function R2(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Opened")," ")}var D2,B2=function(){return[]},S2=function(e){return{template:e,expression:"OpenedAt eq null"}},_2=function(e){return{template:e,expression:"OpenedAt ne null"}},O2=function(e,t){return[e,t]},L2=function(e){return{OpenedAt:e}},F2=((D2=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).workspace=e,r.translate=i,r}return _createClass(n,[{key:"formatSerial",value:function(e){var t=this.ws.Document[this.c[e].DocumentId],n=t.DefinitionId,i=Object(zv.c)(this.workspace,this.translate,n).properties.SerialNumber,r=t.SerialNumber;return Object(zv.a)(r,i.prefix,i.codeWidth)}},{key:"c",get:function(){return this.ws.OutboxRecord}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||D2)(r.Pb(S.m),r.Pb(G.e))},D2.\u0275cmp=r.Jb({type:D2,selectors:[["t-outbox"]],features:[r.yb],decls:12,vars:24,consts:[["collection","OutboxRecord","selectDefault","Document.Memo,CreatedAt,Assignee,Comment,OpenedAt","selectForTiles","Comment,CreatedAt,Assignee.Name,Assignee.Name2,Assignee.Name3,Assignee.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["notopened",""],["opened",""],[1,"d-flex"],[1,"border"],[3,"src","imageId","size"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","t-slightly-bold"],[1,"text-truncate","text-muted"],[1,"d-flex","justify-content-between","mt-1","small","text-truncate"],[1,"text-truncate","text-muted",2,"min-width","0"],[4,"ngIf"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,T2,16,9,"ng-template",null,1,r.Sc),r.Rc(4,E2,2,3,"ng-template",null,2,r.Sc),r.Rc(6,U2,2,1,"ng-template",null,3,r.Sc),r.Rc(8,x2,2,3,"ng-template",null,4,r.Sc),r.Rc(10,R2,2,3,"ng-template",null,5,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"Outbox"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(14,B2))("filterDefinition",r.wc(22,L2,r.xc(19,O2,r.wc(15,S2,c),r.wc(17,_2,a))))}},directives:[Ot.a,he,x.u],pipes:[G.d,Te],encapsulation:2}),D2);function A2(e,t){if(1&e&&(r.Vb(0,"div",4),r.Vb(1,"span",5),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",6),r.Vb(4,"span",5),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("IfrsConcept",n,"Label")),r.Bb(3),r.Uc(n)}}function P2(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"IfrsConcept"),"\n")}function N2(e,t){if(1&e&&(r.Vb(0,"span",7),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.ws.getMultilingualValue("IfrsConcept",n,"Label"))}}var j2,W2=function(){return[]},q2=((j2=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i}return _createClass(n,[{key:"c",get:function(){return this.ws.IfrsConcept}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||j2)(r.Pb(S.m))},j2.\u0275cmp=r.Jb({type:j2,selectors:[["t-ifrs-concepts-master"]],features:[r.yb],decls:8,vars:14,consts:[["collection","IfrsConcept","selectDefault","Code","selectForTiles","Label,Label2,Label3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions"],["tile",""],["summaryHeader",""],["summaryColumn",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,A2,6,2,"ng-template",null,1,r.Sc),r.Rc(4,P2,2,3,"ng-template",null,2,r.Sc),r.Rc(6,N2,2,1,"ng-template",null,3,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7);r.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,11,"IfrsConcepts"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(13,W2))}},directives:[Ot.a],pipes:[G.d],encapsulation:2}),j2);function Q2(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Label",i.ws))}}function H2(e,t){if(1&e&&(r.Vb(0,"t-form-group",6),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("label",r.nc(1,2,"Label")+i.ws.primaryPostfix),r.Bb(3),r.Uc(null==n?null:n.Label)}}function $2(e,t){if(1&e&&(r.Vb(0,"t-form-group",6),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("label",r.nc(1,2,"Label")+i.ws.secondaryPostfix),r.Bb(3),r.Uc(null==n?null:n.Label2)}}function G2(e,t){if(1&e&&(r.Vb(0,"t-form-group",6),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("label",r.nc(1,2,"Label")+i.ws.ternaryPostfix),r.Bb(3),r.Uc(null==n?null:n.Label3)}}function z2(e,t){if(1&e&&(r.Vb(0,"t-form-group",6),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("label",r.nc(1,2,"Description")+i.ws.secondaryPostfix),r.Bb(3),r.Uc(null==n?null:n.Documentation2)}}function J2(e,t){if(1&e&&(r.Vb(0,"t-form-group",6),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("label",r.nc(1,2,"Description")+i.ws.ternaryPostfix),r.Bb(3),r.Uc(null==n?null:n.Documentation3)}}function K2(e,t){if(1&e&&(r.Vb(0,"t-form-group",3),r.Vb(1,"h2",4),r.Tc(2),r.Ub(),r.Ub(),r.Rc(3,H2,4,4,"t-form-group",5),r.Rc(4,$2,4,4,"t-form-group",5),r.Rc(5,G2,4,4,"t-form-group",5),r.Vb(6,"t-form-group",6),r.mc(7,"translate"),r.Vb(8,"div"),r.Tc(9),r.Ub(),r.Ub(),r.Vb(10,"t-form-group",6),r.mc(11,"translate"),r.Vb(12,"div"),r.Tc(13),r.Ub(),r.Ub(),r.Rc(14,z2,4,4,"t-form-group",5),r.Rc(15,J2,4,4,"t-form-group",5)),2&e){var n=t.model,i=r.lc();r.Bb(2),r.Uc(i.getMultilingualValue(n,"Label",i.ws)),r.Bb(1),r.sc("ngIf",!i.ws.isPrimaryLanguage),r.Bb(1),r.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("label",r.nc(7,10,"Code")),r.Bb(3),r.Uc(null==n?null:n.Code),r.Bb(1),r.sc("label",r.nc(11,12,"Description")+i.ws.primaryPostfix),r.Bb(3),r.Uc(null==n?null:n.Documentation),r.Bb(1),r.sc("ngIf",i.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",i.ws.settings.TernaryLanguageId)}}var Y2,X2=function(){return[]},Z2=((Y2=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i.expand="",i}return _createClass(n,[{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||Y2)(r.Pb(S.m))},Y2.\u0275cmp=r.Jb({type:Y2,selectors:[["t-ifrs-concepts-details"]],features:[r.yb],decls:6,vars:14,consts:[["collection","IfrsConcept",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],["class","t-form-group",3,"label",4,"ngIf"],[1,"t-form-group",3,"label"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,Q2,2,1,"ng-template",null,1,r.Sc),r.Rc(4,K2,16,14,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5);r.sc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",r.nc(1,11,"IfrsConcepts"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.vc(13,X2))}},directives:[q.a,Ce.a,x.u],pipes:[G.d],encapsulation:2}),Y2);function e3(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",2),r.Vb(1,"t-ifrs-concepts-master",3),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("filter",i)("additionalSelect",o.additionalSelect)}}var t3,n3=((t3=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return i3(e||t3)},t3.\u0275cmp=r.Jb({type:t3,selectors:[["t-ifrs-concepts-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:t3}]),r.yb],decls:3,vars:5,consts:[["collection","IfrsConcept",3,"filter","masterTemplate","ensureAdditionalSelect","theme","additionalSelect","entityLoaded"],["master",""],[1,"modal-body"],["mode","popup",3,"filter","additionalSelect","cancel","choose"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,e3,2,2,"ng-template",null,1,r.Sc)),2&e){var n=r.Fc(2);r.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("additionalSelect",t.additionalSelect)}},directives:[Xa,q2],encapsulation:2}),t3),i3=r.Xb(n3);function r3(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",9),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("MarkupTemplate",n,"Name")),r.Bb(3),r.Uc(i.c[n].Code)}}function o3(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"MarkupTemplate"),"\n")}function c3(e,t){if(1&e&&(r.Vb(0,"span",10),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.ws.getMultilingualValue("MarkupTemplate",n,"Name"))}}function a3(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"CreatedByMe")," ")}function l3(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deployed")," ")}function s3(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"NotDeployed")," ")}var u3,d3=function(){return[]},b3=function(e){return{template:e,expression:"CreatedById eq me"}},f3=function(e){return[e]},m3=function(e){return{template:e,expression:"IsDeployed eq true"}},g3=function(e){return{template:e,expression:"IsDeployed eq false"}},p3=function(e,t){return[e,t]},h3=function(e,t){return{CreatedBy:e,IsDeployed:t}},v3=((u3=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i.expand="",i}return _createClass(n,[{key:"c",get:function(){return this.ws.MarkupTemplate}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||u3)(r.Pb(S.m))},u3.\u0275cmp=r.Jb({type:u3,selectors:[["t-markup-templates-master"]],features:[r.yb],decls:14,vars:27,consts:[["collection","MarkupTemplate","theme","dark","selectDefault","Code,IsDeployed","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["createdByMe",""],["deployed",""],["notdeployed",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,r3,6,2,"ng-template",null,1,r.Sc),r.Rc(4,o3,2,3,"ng-template",null,2,r.Sc),r.Rc(6,c3,2,1,"ng-template",null,3,r.Sc),r.Rc(8,a3,2,3,"ng-template",null,4,r.Sc),r.Rc(10,l3,2,3,"ng-template",null,5,r.Sc),r.Rc(12,s3,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"MarkupTemplates"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(12,d3))("filterDefinition",r.xc(24,h3,r.wc(15,f3,r.wc(13,b3,c)),r.xc(21,p3,r.wc(17,m3,a),r.wc(19,g3,l))))}},directives:[Ot.a],pipes:[G.d],encapsulation:2}),u3),y3=n("gNDJ");function I3(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",2),r.Vb(1,"t-documents-master",3),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.definitionId,o=t.filter,c=r.lc();r.Bb(1),r.sc("definitionId",i)("filter",o)("showCreate",!1)("additionalSelect",c.additionalSelect)}}var C3,w3=((C3=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return k3(e||C3)},C3.\u0275cmp=r.Jb({type:C3,selectors:[["t-documents-picker"]],inputs:{definitionIds:"definitionIds"},features:[r.Ab([{provide:ie.i,multi:!0,useExisting:C3}]),r.yb],decls:3,vars:6,consts:[["collection","Document",3,"masterTemplate","ensureAdditionalSelect","theme","definitionIds","filter","additionalSelect","entityLoaded"],["master",""],[1,"modal-body"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,I3,2,4,"ng-template",null,1,r.Sc)),2&e){var n=r.Fc(2);r.sc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("definitionIds",t.definitionIds)("filter",t.filter)("additionalSelect",t.additionalSelect)}},directives:[Xa,eG],encapsulation:2}),C3),k3=r.Xb(w3),M3=n("Dud/"),V3=n("Sjg+"),T3=n("XnBY"),E3=["Memo","PostingDate","Boolean1","Decimal1","Text1","TemplateLineId","Multiplier","AccountId","CurrencyId","CustodianId","CustodyId","ParticipantId","ResourceId","CenterId","EntryTypeId","MonetaryValue","Quantity","UnitId","Time1","Time2","Value","ExternalReference","InternalReference","NotedAgentName","NotedAmount","NotedDate"],U3=["ByRole","ByCustodian","ByUser","Public"],x3=["ValueGreaterOrEqual"],R3=["lineDefinitionEntryModal"],D3=["controlOptions"];function B3(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"TitlePlural",i.ws))}}function S3(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function _3(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(n.TitlePlural)}}function O3(e,t){1&e&&r.Rb(0)}var L3=function(){return{updateOn:"blur"}},F3=function(e,t){return{control:e,serverErrors:t}};function A3(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",42,43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural=e})),r.Ub(),r.Rc(2,O3,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.TitlePlural)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.TitlePlural))}}function P3(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(n.TitlePlural2)}}function N3(e,t){1&e&&r.Rb(0)}function j3(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",47,48),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.TitlePlural2=e})),r.Ub(),r.Rc(2,N3,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.TitlePlural2)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.TitlePlural2))}}function W3(e,t){if(1&e&&(r.Vb(0,"div",28),r.Vb(1,"label",45),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,P3,2,1,"div",30),r.Rc(5,j3,3,8,"ng-template",null,46,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc(2).isEdit,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"TitlePlural")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngIf",!i)("ngIfElse",n)}}function q3(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(n.TitlePlural3)}}function Q3(e,t){1&e&&r.Rb(0)}function H3(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",51,52),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.TitlePlural3=e})),r.Ub(),r.Rc(2,Q3,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.TitlePlural3)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.TitlePlural3))}}function $3(e,t){if(1&e&&(r.Vb(0,"div",28),r.Vb(1,"label",49),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,q3,2,1,"div",30),r.Rc(5,H3,3,8,"ng-template",null,50,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc(2).isEdit,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"TitlePlural")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngIf",!i)("ngIfElse",n)}}function G3(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(n.TitleSingular)}}function z3(e,t){1&e&&r.Rb(0)}function J3(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",53,54),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular=e})),r.Ub(),r.Rc(2,z3,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.TitleSingular)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.TitleSingular))}}function K3(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(n.TitleSingular2)}}function Y3(e,t){1&e&&r.Rb(0)}function X3(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",57,58),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.TitleSingular2=e})),r.Ub(),r.Rc(2,Y3,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.TitleSingular2)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.TitleSingular2))}}function Z3(e,t){if(1&e&&(r.Vb(0,"div",28),r.Vb(1,"label",55),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,K3,2,1,"div",30),r.Rc(5,X3,3,8,"ng-template",null,56,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc(2).isEdit,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"TitleSingular")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngIf",!i)("ngIfElse",n)}}function e0(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(n.TitleSingular3)}}function t0(e,t){1&e&&r.Rb(0)}function n0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",61,62),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.TitleSingular3=e})),r.Ub(),r.Rc(2,t0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.TitleSingular3)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.TitleSingular3))}}function i0(e,t){if(1&e&&(r.Vb(0,"div",28),r.Vb(1,"label",59),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,e0,2,1,"div",30),r.Rc(5,n0,3,8,"ng-template",null,60,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc(2).isEdit,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"TitleSingular")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngIf",!i)("ngIfElse",n)}}function r0(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(n.Code)}}function o0(e,t){1&e&&r.Rb(0)}function c0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",63,64),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Code=e})),r.Ub(),r.Rc(2,o0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.Code)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Code))}}function a0(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Vc(" ",r.nc(2,1,n.ViewDefaultsToForm?"Yes":"No"),"")}}function l0(e,t){1&e&&r.Rb(0)}function s0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,66),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ViewDefaultsToForm=e})),r.Vb(2,"option",67),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"option",68),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Rc(8,l0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.ViewDefaultsToForm),r.Bb(3),r.Vc(" ",r.nc(4,5,"Yes"),""),r.Bb(3),r.Vc(" ",r.nc(7,7,"No"),""),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(9,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.ViewDefaultsToForm))}}function u0(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Uc(n.Description)}}function d0(e,t){1&e&&r.Rb(0)}function b0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"textarea",69,70),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description=e})),r.Ub(),r.Rc(2,d0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.Description)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Description))}}function f0(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(n.Description2)}}function m0(e,t){1&e&&r.Rb(0)}function g0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"textarea",73,74),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Description2=e})),r.Ub(),r.Rc(2,m0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.Description2)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Description2))}}function p0(e,t){if(1&e&&(r.Vb(0,"div",28),r.Vb(1,"label",71),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,f0,2,1,"div",30),r.Rc(5,g0,3,8,"ng-template",null,72,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc(2).isEdit,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"Description")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngIf",!i)("ngIfElse",n)}}function h0(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(n.Description3)}}function v0(e,t){1&e&&r.Rb(0)}function y0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"textarea",77,78),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Description3=e})),r.Ub(),r.Rc(2,v0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.Description3)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Description3))}}function I0(e,t){if(1&e&&(r.Vb(0,"div",28),r.Vb(1,"label",75),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,h0,2,1,"div",30),r.Rc(5,y0,3,8,"ng-template",null,76,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc(2).isEdit,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"Description")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngIf",!i)("ngIfElse",n)}}function C0(e,t){if(1&e&&(r.Vb(0,"div",27),r.Vb(1,"div",28),r.Vb(2,"label",29),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Rc(5,_3,2,1,"div",30),r.Rc(6,A3,3,8,"ng-template",null,31,r.Sc),r.Ub(),r.Rc(8,W3,7,5,"div",32),r.Rc(9,$3,7,5,"div",32),r.Vb(10,"div",28),r.Vb(11,"label",33),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Rc(14,G3,2,1,"div",30),r.Rc(15,J3,3,8,"ng-template",null,34,r.Sc),r.Ub(),r.Rc(17,Z3,7,5,"div",32),r.Rc(18,i0,7,5,"div",32),r.Vb(19,"div",28),r.Vb(20,"label",35),r.Tc(21),r.mc(22,"translate"),r.Ub(),r.Rc(23,r0,2,1,"div",30),r.Rc(24,c0,3,8,"ng-template",null,36,r.Sc),r.Ub(),r.Vb(26,"div",28),r.Vb(27,"label",37),r.Tc(28),r.mc(29,"translate"),r.Ub(),r.Rc(30,a0,3,3,"div",30),r.Rc(31,s0,9,12,"ng-template",null,38,r.Sc),r.Ub(),r.Qb(33,"div",39),r.Vb(34,"div",28),r.Vb(35,"label",40),r.Tc(36),r.mc(37,"translate"),r.Ub(),r.Rc(38,u0,2,1,"div",30),r.Rc(39,b0,3,8,"ng-template",null,41,r.Sc),r.Ub(),r.Rc(41,p0,7,5,"div",32),r.Rc(42,I0,7,5,"div",32),r.Ub()),2&e){var n=r.Fc(7),i=r.Fc(16),o=r.Fc(25),c=r.Fc(32),a=r.Fc(40),l=r.lc().isEdit,s=r.lc();r.Bb(3),r.Uc(r.nc(4,21,"TitlePlural")+s.ws.primaryPostfix),r.Bb(2),r.sc("ngIf",!l)("ngIfElse",n),r.Bb(3),r.sc("ngIf",s.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",s.ws.settings.TernaryLanguageId),r.Bb(3),r.Uc(r.nc(13,23,"TitleSingular")+s.ws.primaryPostfix),r.Bb(2),r.sc("ngIf",!l)("ngIfElse",i),r.Bb(3),r.sc("ngIf",s.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",s.ws.settings.TernaryLanguageId),r.Bb(3),r.Uc(r.nc(22,25,"Code")),r.Bb(2),r.sc("ngIf",!l)("ngIfElse",o),r.Bb(5),r.Uc(r.nc(29,27,"LineDefinition_ViewDefaultsToForm")),r.Bb(2),r.sc("ngIf",!l)("ngIfElse",c),r.Bb(6),r.Uc(r.nc(37,29,"Description")+s.ws.primaryPostfix),r.Bb(2),r.sc("ngIf",!l)("ngIfElse",a),r.Bb(3),r.sc("ngIf",s.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",s.ws.settings.TernaryLanguageId)}}function w0(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function k0(e,t){1&e&&r.Qb(0,"th",83)}function M0(e,t){1&e&&r.Qb(0,"th",83)}function V0(e,t){1&e&&(r.Tb(0),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Sb())}function T0(e,t){1&e&&(r.Vb(0,"div",98),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"LineDefinitionEntry"),""))}function E0(e,t){1&e&&(r.Vb(0,"td",99),r.Qb(1,"fa-icon",100),r.Ub())}function U0(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.directionDisplay(n.Direction))}}function x0(e,t){1&e&&r.Rb(0)}function R0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,101),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Direction=e})),r.Vb(2,"option",102),r.Tc(3),r.Ub(),r.Vb(4,"option",103),r.Tc(5),r.Ub(),r.Ub(),r.Rc(6,x0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(3),a=r.Fc(11);r.sc("ngModel",o.Direction),r.Bb(3),r.Vc(" ",c.directionDisplay(1),""),r.Bb(2),r.Vc(" ",c.directionDisplay(-1),""),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Direction))}}function D0(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.ws.getMultilingualValue("AccountType",n.ParentAccountTypeId,"Name"))}}function B0(e,t){1&e&&r.Rb(0)}function S0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-types-picker",104,105),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.ParentAccountTypeId=e})),r.Ub(),r.Rc(2,B0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.ParentAccountTypeId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.ParentAccountTypeId))}}function _0(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.ws.getMultilingualValue("EntryType",n.EntryTypeId,"Name"))}}function O0(e,t){1&e&&r.Rb(0)}function L0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",104,106),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.EntryTypeId=e})),r.Ub(),r.Rc(2,O0,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.EntryTypeId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.EntryTypeId))}}function F0(e,t){1&e&&(r.Vb(0,"span",107),r.Tc(1," \xa0"),r.Qb(2,"fa-icon",26),r.Ub())}function A0(e,t){1&e&&(r.Vb(0,"span",107),r.Tc(1," \xa0"),r.Qb(2,"fa-icon",26),r.Ub())}function P0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td"),r.Vb(1,"button",108),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(2).model;return r.lc().onDeleteRow(e,t.Entries)})),r.Qb(2,"fa-icon",109),r.Ub(),r.Ub()}}function N0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"tr",88),r.Rc(1,V0,3,0,"ng-container",89),r.Rc(2,T0,3,3,"div",90),r.Rc(3,E0,2,0,"td",91),r.Vb(4,"td"),r.Tc(5),r.Ub(),r.Vb(6,"td"),r.Rc(7,U0,2,1,"span",30),r.Rc(8,R0,7,8,"ng-template",null,92,r.Sc),r.Ub(),r.Vb(10,"td"),r.Rc(11,D0,2,1,"span",30),r.Rc(12,S0,3,6,"ng-template",null,93,r.Sc),r.Ub(),r.Vb(14,"td"),r.Rc(15,_0,2,1,"span",30),r.Rc(16,L0,3,6,"ng-template",null,94,r.Sc),r.Ub(),r.Vb(18,"td"),r.Vb(19,"button",95),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.index,o=r.lc(2).isEdit;return r.lc().onLineDefinitionEntryCustodyDefinitions(e,o,i)})),r.Tc(20),r.Ub(),r.Rc(21,F0,3,0,"span",96),r.Ub(),r.Vb(22,"td"),r.Vb(23,"button",95),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=t.index,o=r.lc(2).isEdit;return r.lc().onLineDefinitionEntryResourceDefinitions(e,o,i)})),r.Tc(24),r.Ub(),r.Rc(25,A0,3,0,"span",96),r.Ub(),r.Rc(26,P0,3,0,"td",97),r.Ub()}if(2&e){var i=t.$implicit,o=t.index,c=r.Fc(9),a=r.Fc(13),l=r.Fc(17),s=r.lc(2).isEdit,u=r.lc();r.Bb(3),r.sc("ngIf",s),r.Bb(2),r.Vc(" ",o," "),r.Bb(1),r.Gb("p-0",s),r.Bb(1),r.sc("ngIf",!s)("ngIfElse",c),r.Bb(3),r.Gb("p-0",s),r.Bb(1),r.sc("ngIf",!s)("ngIfElse",a),r.Bb(3),r.Gb("p-0",s),r.Bb(1),r.sc("ngIf",!s)("ngIfElse",l),r.Bb(3),r.Gb("p-0",s),r.Bb(2),r.Uc((null==i.CustodyDefinitions?null:i.CustodyDefinitions.length)||0),r.Bb(1),r.sc("ngIf",u.showCustodyDefinitionsError(i)),r.Bb(1),r.Gb("p-0",s),r.Bb(2),r.Uc((null==i.ResourceDefinitions?null:i.ResourceDefinitions.length)||0),r.Bb(1),r.sc("ngIf",u.showResourceDefinitionsError(i)),r.Bb(1),r.sc("ngIf",s)}}function j0(e,t){1&e&&(r.Vb(0,"div",110),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function W0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",111),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model,t=r.lc();return t.onInsertRow(e.Entries,t.createEntry)})),r.Qb(1,"fa-icon",112),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}function q0(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",79),r.Vb(1,"table",80),r.Vb(2,"thead",81),r.Vb(3,"tr"),r.Rc(4,k0,1,0,"th",82),r.Vb(5,"th",83),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Vb(8,"th"),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Vb(11,"th"),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Vb(14,"th"),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Vb(17,"th"),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"th"),r.Tc(21),r.mc(22,"translate"),r.Ub(),r.Rc(23,M0,1,0,"th",82),r.Ub(),r.Ub(),r.Vb(24,"tbody",84),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().rowDrop(e,t.Entries)})),r.Rc(25,N0,27,23,"tr",85),r.Ub(),r.Ub(),r.Rc(26,j0,3,3,"div",86),r.Rc(27,W0,4,3,"button",87),r.Ub()}if(2&e){var i=r.lc(),o=i.isEdit,c=i.model;r.Bb(4),r.sc("ngIf",o),r.Bb(2),r.Vc("",r.nc(7,12,"LineDefinitionColumn_EntryIndex")," "),r.Bb(3),r.Vc("",r.nc(10,14,"LineDefinitionEntry_Direction")," "),r.Bb(3),r.Vc("",r.nc(13,16,"LineDefinitionEntry_ParentAccountType")," "),r.Bb(3),r.Vc("",r.nc(16,18,"LineDefinitionEntry_EntryType")," "),r.Bb(3),r.Uc(r.nc(19,20,"LineDefinitionEntry_CustodyDefinitions")),r.Bb(3),r.Uc(r.nc(22,22,"LineDefinitionEntry_ResourceDefinitions")),r.Bb(2),r.sc("ngIf",o),r.Bb(1),r.sc("cdkDropListDisabled",!o),r.Bb(1),r.sc("ngForOf",c.Entries),r.Bb(1),r.sc("ngIf",!o&&0===(null==c.Entries?null:c.Entries.length)),r.Bb(1),r.sc("ngIf",o)}}function Q0(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function H0(e,t){1&e&&r.Qb(0,"th",83)}function $0(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.Vc(" ",r.nc(2,1,"Label")+n.ws.secondaryPostfix," ")}}function G0(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.Vc(" ",r.nc(2,1,"Label")+n.ws.ternaryPostfix," ")}}function z0(e,t){1&e&&r.Qb(0,"th",83)}function J0(e,t){1&e&&(r.Tb(0),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Sb())}function K0(e,t){if(1&e&&(r.Vb(0,"div",98),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Vc(" ",i.ws.getMultilingualValueImmediate(n,"Label"),"")}}function Y0(e,t){1&e&&(r.Vb(0,"td",99),r.Qb(1,"fa-icon",100),r.Ub())}function X0(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.columnNameDisplay(n.ColumnName))}}function Z0(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function e4(e,t){1&e&&r.Rb(0)}function t4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,122),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.ColumnName=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(4).choicesBarcodeColumnIndexChanged=!0})),r.Rc(2,Z0,2,2,"option",123),r.Ub(),r.Rc(3,e4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(3),a=r.Fc(11);r.sc("ngModel",o.ColumnName),r.Bb(2),r.sc("ngForOf",c.columnNameChoices),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.ColumnName))}}function n4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Uc(n.EntryIndex)}}function i4(e,t){1&e&&r.Rb(0)}function r4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",125,126),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.EntryIndex=e})),r.Ub(),r.Rc(2,i4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.EntryIndex)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.EntryIndex))}}function o4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Uc(n.Label)}}function c4(e,t){1&e&&r.Rb(0)}function a4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,128),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Label=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(4).choicesBarcodeColumnIndexChanged=!0})),r.Ub(),r.Rc(2,c4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Label)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Label))}}function l4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Uc(n.Label2)}}function s4(e,t){1&e&&r.Rb(0)}function u4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,130),r.hc("ngModelChange",(function(){return r.Ic(n),r.lc(5).choicesBarcodeColumnIndexChanged=!0}))("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.Label2=e})),r.Ub(),r.Rc(2,s4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Label2)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Label2))}}function d4(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,l4,2,1,"span",30),r.Rc(2,u4,3,8,"ng-template",null,129,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(3).isEdit;r.Gb("p-0",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function b4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Uc(n.Label3)}}function f4(e,t){1&e&&r.Rb(0)}function m4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,132),r.hc("ngModelChange",(function(){return r.Ic(n),r.lc(5).choicesBarcodeColumnIndexChanged=!0}))("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.Label3=e})),r.Ub(),r.Rc(2,f4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Label3)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Label3))}}function g4(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,b4,2,1,"span",30),r.Rc(2,m4,3,8,"ng-template",null,131,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(3).isEdit;r.Gb("p-0",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function p4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Uc(n.Filter)}}function h4(e,t){1&e&&r.Rb(0)}function v4(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"input",127,134),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.Filter=e})),r.Ub(),r.Rc(3,h4,1,0,"ng-container",44),r.Sb()}if(2&e){var i=r.Fc(2),o=r.lc(2).$implicit;r.lc(3);var c=r.Fc(11);r.Bb(1),r.sc("ngModel",o.Filter)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Filter))}}function y4(e,t){1&e&&r.Qb(0,"span")}function I4(e,t){if(1&e&&(r.Rc(0,v4,4,8,"ng-container",30),r.Rc(1,y4,1,0,"ng-template",null,133,r.Sc)),2&e){var n=r.Fc(2),i=r.lc().$implicit,o=r.lc(3);r.sc("ngIf",o.canFilter(i))("ngIfElse",n)}}function C4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.stateDisplay(n.VisibleState))}}function w4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(5);r.Bb(1),r.Uc(n.stateDisplay(0))}}function k4(e,t){if(1&e&&(r.Tb(0),r.Rc(1,C4,2,1,"span",97),r.Rc(2,w4,2,1,"span",97),r.Sb()),2&e){var n=r.lc().$implicit,i=r.lc(2).isEdit,o=r.lc();r.Bb(1),r.sc("ngIf",!i&&!o.isRequiredColumn(n)),r.Bb(1),r.sc("ngIf",o.isRequiredColumn(n))}}function M4(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function V4(e,t){1&e&&r.Rb(0)}function T4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,135),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.VisibleState=e})),r.Rc(2,M4,2,2,"option",123),r.Ub(),r.Rc(3,V4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(3),a=r.Fc(11);r.sc("ngModel",o.VisibleState),r.Bb(2),r.sc("ngForOf",c.stateChoices),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.VisibleState))}}function E4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.stateDisplay(n.RequiredState))}}function U4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(5);r.Bb(1),r.Uc(n.stateDisplay(0))}}function x4(e,t){if(1&e&&(r.Tb(0),r.Rc(1,E4,2,1,"span",97),r.Rc(2,U4,2,1,"span",97),r.Sb()),2&e){var n=r.lc().$implicit,i=r.lc(2).isEdit,o=r.lc();r.Bb(1),r.sc("ngIf",!i&&!o.isRequiredColumn(n)),r.Bb(1),r.sc("ngIf",o.isRequiredColumn(n))}}function R4(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function D4(e,t){1&e&&r.Rb(0)}function B4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,136),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.RequiredState=e})),r.Rc(2,R4,2,2,"option",123),r.Ub(),r.Rc(3,D4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(3),a=r.Fc(11);r.sc("ngModel",o.RequiredState),r.Bb(2),r.sc("ngForOf",c.stateChoices),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.RequiredState))}}function S4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.stateDisplay(n.ReadOnlyState))}}function _4(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function O4(e,t){1&e&&r.Rb(0)}function L4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,137),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.ReadOnlyState=e})),r.Rc(2,_4,2,2,"option",123),r.Ub(),r.Rc(3,O4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(3),a=r.Fc(11);r.sc("ngModel",o.ReadOnlyState),r.Bb(2),r.sc("ngForOf",c.stateChoices),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.ReadOnlyState))}}function F4(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Uc(r.nc(2,1,2===n.InheritsFromHeader?"InheritsFrom_2":1===n.InheritsFromHeader?"InheritsFrom_1":"InheritsFrom_0"))}}function A4(e,t){1&e&&r.Rb(0)}function P4(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"select",65,139),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.InheritsFromHeader=e})),r.Vb(3,"option",140),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Vb(6,"option",102),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Vb(9,"option",141),r.Tc(10),r.mc(11,"translate"),r.Ub(),r.Ub(),r.Rc(12,A4,1,0,"ng-container",44),r.Sb()}if(2&e){var i=r.Fc(2),o=r.lc(2).$implicit;r.lc(3);var c=r.Fc(11);r.Bb(1),r.sc("ngModel",o.InheritsFromHeader),r.Bb(3),r.Vc(" ",r.nc(5,6,"InheritsFrom_0"),""),r.Bb(3),r.Vc(" ",r.nc(8,8,"InheritsFrom_1"),""),r.Bb(3),r.Vc(" ",r.nc(11,10,"InheritsFrom_2"),""),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(12,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.InheritsFromHeader))}}function N4(e,t){1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Uc(r.nc(2,1,"InheritsFrom_0")))}function j4(e,t){if(1&e&&(r.Rc(0,P4,13,15,"ng-container",30),r.Rc(1,N4,3,3,"ng-template",null,138,r.Sc)),2&e){var n=r.Fc(2),i=r.lc().$implicit,o=r.lc(3);r.sc("ngIf",o.canInherit(i))("ngIfElse",n)}}function W4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td"),r.Vb(1,"button",108),r.hc("click",(function(){r.Ic(n);var e=r.lc().index,t=r.lc(2).model;return r.lc().column_onDeleteRow(e,t)})),r.Qb(2,"fa-icon",109),r.Ub(),r.Ub()}}function q4(e,t){if(1&e&&(r.Vb(0,"tr",88),r.Rc(1,J0,3,0,"ng-container",89),r.Rc(2,K0,2,1,"div",90),r.Rc(3,Y0,2,0,"td",91),r.Vb(4,"td"),r.Rc(5,X0,2,1,"span",30),r.Rc(6,t4,4,7,"ng-template",null,113,r.Sc),r.Ub(),r.Vb(8,"td"),r.Rc(9,n4,2,1,"span",30),r.Rc(10,r4,3,8,"ng-template",null,114,r.Sc),r.Ub(),r.Vb(12,"td"),r.Rc(13,o4,2,1,"span",30),r.Rc(14,a4,3,8,"ng-template",null,115,r.Sc),r.Ub(),r.Rc(16,d4,4,4,"td",116),r.Rc(17,g4,4,4,"td",116),r.Vb(18,"td"),r.Rc(19,p4,2,1,"span",30),r.Rc(20,I4,3,2,"ng-template",null,117,r.Sc),r.Ub(),r.Vb(22,"td"),r.Rc(23,k4,3,2,"ng-container",30),r.Rc(24,T4,4,7,"ng-template",null,118,r.Sc),r.Ub(),r.Vb(26,"td"),r.Rc(27,x4,3,2,"ng-container",30),r.Rc(28,B4,4,7,"ng-template",null,119,r.Sc),r.Ub(),r.Vb(30,"td"),r.Rc(31,S4,2,1,"span",30),r.Rc(32,L4,4,7,"ng-template",null,120,r.Sc),r.Ub(),r.Vb(34,"td"),r.Rc(35,F4,3,3,"span",30),r.Rc(36,j4,3,2,"ng-template",null,121,r.Sc),r.Ub(),r.Rc(38,W4,3,0,"td",97),r.Ub()),2&e){var n=t.$implicit,i=r.Fc(7),o=r.Fc(11),c=r.Fc(15),a=r.Fc(21),l=r.Fc(25),s=r.Fc(29),u=r.Fc(33),d=r.Fc(37),b=r.lc(2).isEdit,f=r.lc();r.Bb(3),r.sc("ngIf",b),r.Bb(1),r.Gb("p-0",b),r.Bb(1),r.sc("ngIf",!b)("ngIfElse",i),r.Bb(3),r.Gb("p-0",b),r.Bb(1),r.sc("ngIf",!b)("ngIfElse",o),r.Bb(3),r.Gb("p-0",b),r.Bb(1),r.sc("ngIf",!b)("ngIfElse",c),r.Bb(3),r.sc("ngIf",f.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",f.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("p-0",b&&f.canFilter(n)),r.Bb(1),r.sc("ngIf",!b)("ngIfElse",a),r.Bb(3),r.Gb("p-0",b&&!f.isRequiredColumn(n)),r.Bb(1),r.sc("ngIf",!b||f.isRequiredColumn(n))("ngIfElse",l),r.Bb(3),r.Gb("p-0",b&&!f.isRequiredColumn(n)),r.Bb(1),r.sc("ngIf",!b||f.isRequiredColumn(n))("ngIfElse",s),r.Bb(3),r.Gb("p-0",b),r.Bb(1),r.sc("ngIf",!b)("ngIfElse",u),r.Bb(3),r.Gb("p-0",b&&f.canInherit(n)),r.Bb(1),r.sc("ngIf",!b)("ngIfElse",d),r.Bb(3),r.sc("ngIf",b)}}function Q4(e,t){1&e&&(r.Vb(0,"div",110),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function H4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",111),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().column_onInsertRow(e)})),r.Qb(1,"fa-icon",112),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}function $4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",79),r.Vb(1,"table",80),r.Vb(2,"thead",81),r.Vb(3,"tr"),r.Rc(4,H0,1,0,"th",82),r.Vb(5,"th"),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Vb(8,"th",83),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Vb(11,"th"),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Rc(14,$0,3,3,"th",97),r.Rc(15,G0,3,3,"th",97),r.Vb(16,"th"),r.Tc(17),r.mc(18,"translate"),r.Ub(),r.Vb(19,"th"),r.Tc(20),r.mc(21,"translate"),r.Ub(),r.Vb(22,"th"),r.Tc(23),r.mc(24,"translate"),r.Ub(),r.Vb(25,"th"),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Vb(28,"th"),r.Tc(29),r.mc(30,"translate"),r.Ub(),r.Rc(31,z0,1,0,"th",82),r.Ub(),r.Ub(),r.Vb(32,"tbody",84),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().column_rowDrop(e,t)})),r.Rc(33,q4,39,36,"tr",85),r.Ub(),r.Ub(),r.Rc(34,Q4,3,3,"div",86),r.Rc(35,H4,4,3,"button",87),r.Ub()}if(2&e){var i=r.lc(),o=i.isEdit,c=i.model,a=r.lc();r.Bb(4),r.sc("ngIf",o),r.Bb(2),r.Vc("",r.nc(7,16,"LineDefinitionColumn_ColumnName")," "),r.Bb(3),r.Vc("",r.nc(10,18,"LineDefinitionColumn_EntryIndex")," "),r.Bb(3),r.Vc("",r.nc(13,20,"Label")+a.ws.primaryPostfix," "),r.Bb(2),r.sc("ngIf",a.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",a.ws.settings.TernaryLanguageId),r.Bb(2),r.Vc("",r.nc(18,22,"LineDefinitionColumn_Filter")," "),r.Bb(3),r.Vc("",r.nc(21,24,"LineDefinitionColumn_VisibleState")," "),r.Bb(3),r.Vc("",r.nc(24,26,"LineDefinitionColumn_RequiredState")," "),r.Bb(3),r.Vc("",r.nc(27,28,"LineDefinitionColumn_ReadOnlyState")," "),r.Bb(3),r.Vc("",r.nc(30,30,"LineDefinitionColumn_InheritsFromHeader")," "),r.Bb(2),r.sc("ngIf",o),r.Bb(1),r.sc("cdkDropListDisabled",!o),r.Bb(1),r.sc("ngForOf",c.Columns),r.Bb(1),r.sc("ngIf",!o&&0===(null==c.Columns?null:c.Columns.length)),r.Bb(1),r.sc("ngIf",o)}}function G4(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function z4(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model;r.Bb(1),r.Vc("",n.GenerateLabel,"\u200c")}}function J4(e,t){1&e&&r.Rb(0)}function K4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",149,150),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.GenerateLabel=e})),r.Ub(),r.Rc(2,J4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.GenerateLabel)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.GenerateLabel))}}function Y4(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Vc("",n.GenerateLabel2,"\u200c")}}function X4(e,t){1&e&&r.Rb(0)}function Z4(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",153,154),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.GenerateLabel2=e})),r.Ub(),r.Rc(2,X4,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.GenerateLabel2)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.GenerateLabel2))}}function e5(e,t){if(1&e&&(r.Vb(0,"div",28),r.Vb(1,"label",151),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,Y4,2,1,"div",30),r.Rc(5,Z4,3,8,"ng-template",null,152,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc(2).isEdit,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"LineDefinition_GenerateLabel")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngIf",!i)("ngIfElse",n)}}function t5(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Vc("",n.GenerateLabel3,"\u200c")}}function n5(e,t){1&e&&r.Rb(0)}function i5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",157,158),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.GenerateLabel3=e})),r.Ub(),r.Rc(2,n5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.GenerateLabel3)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.GenerateLabel3))}}function r5(e,t){if(1&e&&(r.Vb(0,"div",28),r.Vb(1,"label",155),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Rc(4,t5,2,1,"div",30),r.Rc(5,i5,3,8,"ng-template",null,156,r.Sc),r.Ub()),2&e){var n=r.Fc(6),i=r.lc(2).isEdit,o=r.lc();r.Bb(2),r.Uc(r.nc(3,3,"LineDefinition_GenerateLabel")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngIf",!i)("ngIfElse",n)}}function o5(e,t){1&e&&r.Qb(0,"th",83)}function c5(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.Vc(" ",r.nc(2,1,"Label")+n.ws.secondaryPostfix," ")}}function a5(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.Vc(" ",r.nc(2,1,"Label")+n.ws.ternaryPostfix," ")}}function l5(e,t){1&e&&r.Qb(0,"th",83)}function s5(e,t){1&e&&(r.Tb(0),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Sb())}function u5(e,t){if(1&e&&(r.Vb(0,"div",98),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Vc(" ",i.ws.getMultilingualValueImmediate(n,"Label"),"")}}function d5(e,t){1&e&&(r.Vb(0,"td",99),r.Qb(1,"fa-icon",100),r.Ub())}function b5(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Uc(n.Key)}}function f5(e,t){1&e&&r.Rb(0)}function m5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,163),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Key=e})),r.Ub(),r.Rc(2,f5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Key)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Key))}}function g5(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Uc(n.Label)}}function p5(e,t){1&e&&r.Rb(0)}function h5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,128),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Label=e})),r.Ub(),r.Rc(2,p5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Label)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Label))}}function v5(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Uc(n.Label2)}}function y5(e,t){1&e&&r.Rb(0)}function I5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,130),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.Label2=e})),r.Ub(),r.Rc(2,y5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Label2)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Label2))}}function C5(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,v5,2,1,"span",30),r.Rc(2,I5,3,8,"ng-template",null,129,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(3).isEdit;r.Gb("p-0",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function w5(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Uc(n.Label3)}}function k5(e,t){1&e&&r.Rb(0)}function M5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,132),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.Label3=e})),r.Ub(),r.Rc(2,k5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Label3)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Label3))}}function V5(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,w5,2,1,"span",30),r.Rc(2,M5,3,8,"ng-template",null,131,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(3).isEdit;r.Gb("p-0",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function T5(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.visibilityDisplay(n.Visibility))}}function E5(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function U5(e,t){1&e&&r.Rb(0)}function x5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",164,165),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Visibility=e})),r.Rc(2,E5,2,2,"option",123),r.Ub(),r.Rc(3,U5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(3),a=r.Fc(11);r.sc("ngModel",o.Visibility),r.Bb(2),r.sc("ngForOf",c.visibilityChoices),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Visibility))}}function R5(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.controlDisplay(n.Control))}}function D5(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function B5(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function S5(e,t){1&e&&r.Rb(0)}function _5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,166),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Control=e})),r.Rc(2,D5,2,2,"option",123),r.Vb(3,"option",167),r.Tc(4," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),r.Ub(),r.Rc(5,B5,2,2,"option",123),r.Ub(),r.Rc(6,S5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(3),a=r.Fc(11);r.sc("ngModel",o.Control),r.Bb(2),r.sc("ngForOf",c.controlSimpleChoices()),r.Bb(3),r.sc("ngForOf",c.controlEntityChoices()),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Control))}}function O5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",108),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(2).isEdit;return r.lc().onControlOptions(e,t)})),r.Qb(1,"fa-icon",168),r.Ub()}}function L5(e,t){1&e&&(r.Vb(0,"span",107),r.Tc(1," \xa0"),r.Qb(2,"fa-icon",26),r.Ub())}function F5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td"),r.Vb(1,"button",108),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(2).model;return r.lc().onDeleteRow(e,t.GenerateParameters)})),r.Qb(2,"fa-icon",109),r.Ub(),r.Ub()}}function A5(e,t){if(1&e&&(r.Vb(0,"tr",88),r.Rc(1,s5,3,0,"ng-container",89),r.Rc(2,u5,2,1,"div",90),r.Rc(3,d5,2,0,"td",91),r.Vb(4,"td"),r.Rc(5,b5,2,1,"span",30),r.Rc(6,m5,3,8,"ng-template",null,159,r.Sc),r.Ub(),r.Vb(8,"td"),r.Rc(9,g5,2,1,"span",30),r.Rc(10,h5,3,8,"ng-template",null,115,r.Sc),r.Ub(),r.Rc(12,C5,4,4,"td",116),r.Rc(13,V5,4,4,"td",116),r.Vb(14,"td"),r.Rc(15,T5,2,1,"span",30),r.Rc(16,x5,4,7,"ng-template",null,160,r.Sc),r.Ub(),r.Vb(18,"td"),r.Rc(19,R5,2,1,"span",30),r.Rc(20,_5,7,8,"ng-template",null,161,r.Sc),r.Ub(),r.Vb(22,"td"),r.Rc(23,O5,2,0,"button",162),r.Rc(24,L5,3,0,"span",96),r.Ub(),r.Rc(25,F5,3,0,"td",97),r.Ub()),2&e){var n=t.$implicit,i=r.Fc(7),o=r.Fc(11),c=r.Fc(17),a=r.Fc(21),l=r.lc(2).isEdit,s=r.lc();r.Bb(3),r.sc("ngIf",l),r.Bb(1),r.Gb("p-0",l),r.Bb(1),r.sc("ngIf",!l)("ngIfElse",i),r.Bb(3),r.Gb("p-0",l),r.Bb(1),r.sc("ngIf",!l)("ngIfElse",o),r.Bb(3),r.sc("ngIf",s.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",s.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("p-0",l),r.Bb(1),r.sc("ngIf",!l)("ngIfElse",c),r.Bb(3),r.Gb("p-0",l),r.Bb(1),r.sc("ngIf",!l)("ngIfElse",a),r.Bb(4),r.sc("ngIf",s.hasControlOptions(n)),r.Bb(1),r.sc("ngIf",s.showGenerateParametersError(n)),r.Bb(1),r.sc("ngIf",l)}}function P5(e,t){1&e&&(r.Vb(0,"div",110),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function N5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",111),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onInsertRow(e.GenerateParameters)})),r.Qb(1,"fa-icon",112),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}function j5(e,t){1&e&&(r.Vb(0,"div",171),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" (",r.nc(2,1,"Blank"),") "))}function W5(e,t){if(1&e&&(r.Vb(0,"div",172),r.Vb(1,"span"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(2),r.Uc(n.GenerateScript)}}function q5(e,t){if(1&e&&(r.Tb(0),r.Rc(1,j5,3,3,"div",169),r.Rc(2,W5,3,1,"div",170),r.Sb()),2&e){var n=r.lc(2).model;r.Bb(1),r.sc("ngIf",!n.GenerateScript),r.Bb(1),r.sc("ngIf",!!n.GenerateScript)}}function Q5(e,t){1&e&&r.Rb(0)}function H5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"textarea",173,174),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.GenerateScript=e}))("keydown",(function(e){r.Ic(n);var t=r.Fc(2),i=r.lc(2).model;return r.lc().onGenerateScriptKeydown(t,e,i)})),r.Ub(),r.Rc(3,Q5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.GenerateScript),r.Bb(3),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.GenerateScript))}}function $5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",27),r.Vb(1,"div",28),r.Vb(2,"label",142),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Rc(5,z4,2,1,"div",30),r.Rc(6,K4,3,8,"ng-template",null,143,r.Sc),r.Ub(),r.Rc(8,e5,7,5,"div",32),r.Rc(9,r5,7,5,"div",32),r.Ub(),r.Vb(10,"div",144),r.Vb(11,"label",145),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Vb(14,"table",80),r.Vb(15,"thead",81),r.Vb(16,"tr"),r.Rc(17,o5,1,0,"th",82),r.Vb(18,"th"),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"th"),r.Tc(22),r.mc(23,"translate"),r.Ub(),r.Rc(24,c5,3,3,"th",97),r.Rc(25,a5,3,3,"th",97),r.Vb(26,"th"),r.Tc(27),r.mc(28,"translate"),r.Ub(),r.Vb(29,"th"),r.Tc(30),r.mc(31,"translate"),r.Ub(),r.Vb(32,"th"),r.Tc(33),r.mc(34,"translate"),r.Ub(),r.Rc(35,l5,1,0,"th",82),r.Ub(),r.Ub(),r.Vb(36,"tbody",84),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().rowDrop(e,t.GenerateParameters)})),r.Rc(37,A5,26,22,"tr",85),r.Ub(),r.Ub(),r.Rc(38,P5,3,3,"div",86),r.Rc(39,N5,4,3,"button",87),r.Ub(),r.Vb(40,"div",146),r.Vb(41,"label",147),r.Tc(42),r.mc(43,"translate"),r.Ub(),r.Rc(44,q5,3,2,"ng-container",30),r.Rc(45,H5,4,6,"ng-template",null,148,r.Sc),r.Ub()}if(2&e){var i=r.Fc(7),o=r.Fc(46),c=r.lc(),a=c.isEdit,l=c.model,s=r.lc();r.Bb(3),r.Uc(r.nc(4,22,"LineDefinition_GenerateLabel")+s.ws.primaryPostfix),r.Bb(2),r.sc("ngIf",!a)("ngIfElse",i),r.Bb(3),r.sc("ngIf",!!s.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!!s.ws.settings.TernaryLanguageId),r.Bb(3),r.Uc(r.nc(13,24,"LineDefinition_GenerateParameters")),r.Bb(5),r.sc("ngIf",a),r.Bb(2),r.Vc("",r.nc(20,26,"Parameter_Key")," "),r.Bb(3),r.Vc("",r.nc(23,28,"Label")+s.ws.primaryPostfix," "),r.Bb(2),r.sc("ngIf",s.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",s.ws.settings.TernaryLanguageId),r.Bb(2),r.Vc("",r.nc(28,30,"Parameter_Visibility")," "),r.Bb(3),r.Vc("",r.nc(31,32,"Definition_Control")," "),r.Bb(3),r.Vc("",r.nc(34,34,"Definition_ControlOptions")," "),r.Bb(2),r.sc("ngIf",a),r.Bb(1),r.sc("cdkDropListDisabled",!a),r.Bb(1),r.sc("ngForOf",l.GenerateParameters),r.Bb(1),r.sc("ngIf",!a&&0===(null==l.GenerateParameters?null:l.GenerateParameters.length)),r.Bb(1),r.sc("ngIf",a),r.Bb(3),r.Uc(r.nc(43,36,"LineDefinition_GenerateScript")),r.Bb(2),r.sc("ngIf",!a)("ngIfElse",o)}}function G5(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function z5(e,t){1&e&&(r.Vb(0,"div",171),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" (",r.nc(2,1,"Blank"),") "))}function J5(e,t){if(1&e&&(r.Vb(0,"div",172),r.Vb(1,"span"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(2),r.Uc(n.PreprocessScript)}}function K5(e,t){if(1&e&&(r.Tb(0),r.Rc(1,z5,3,3,"div",169),r.Rc(2,J5,3,1,"div",170),r.Sb()),2&e){var n=r.lc(2).model;r.Bb(1),r.sc("ngIf",!n.PreprocessScript),r.Bb(1),r.sc("ngIf",!!n.PreprocessScript)}}function Y5(e,t){1&e&&r.Rb(0)}function X5(e,t){if(1&e){var n=r.Wb();r.Vb(0,"textarea",176,177),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.PreprocessScript=e}))("keydown",(function(e){r.Ic(n);var t=r.Fc(2),i=r.lc(2).model;return r.lc().onPreprocessScriptKeydown(t,e,i)})),r.Tc(3,"                    "),r.Ub(),r.Rc(4,Y5,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.PreprocessScript),r.Bb(4),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.PreprocessScript))}}function Z5(e,t){if(1&e&&(r.Rc(0,K5,3,2,"ng-container",30),r.Rc(1,X5,5,6,"ng-template",null,175,r.Sc)),2&e){var n=r.Fc(2),i=r.lc().isEdit;r.sc("ngIf",!i)("ngIfElse",n)}}function e6(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function t6(e,t){1&e&&(r.Vb(0,"div",171),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" (",r.nc(2,1,"Blank"),") "))}function n6(e,t){if(1&e&&(r.Vb(0,"div",172),r.Vb(1,"span"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(2),r.Uc(n.ValidateScript)}}function i6(e,t){if(1&e&&(r.Tb(0),r.Rc(1,t6,3,3,"div",169),r.Rc(2,n6,3,1,"div",170),r.Sb()),2&e){var n=r.lc(2).model;r.Bb(1),r.sc("ngIf",!n.ValidateScript),r.Bb(1),r.sc("ngIf",!!n.ValidateScript)}}function r6(e,t){1&e&&r.Rb(0)}function o6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"textarea",176,179),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.ValidateScript=e}))("keydown",(function(e){r.Ic(n);var t=r.Fc(2),i=r.lc(2).model;return r.lc().onValidateScriptKeydown(t,e,i)})),r.Tc(3,"                    "),r.Ub(),r.Rc(4,r6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.ValidateScript),r.Bb(4),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.ValidateScript))}}function c6(e,t){if(1&e&&(r.Rc(0,i6,3,2,"ng-container",30),r.Rc(1,o6,5,6,"ng-template",null,178,r.Sc)),2&e){var n=r.Fc(2),i=r.lc().isEdit;r.sc("ngIf",!i)("ngIfElse",n)}}function a6(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function l6(e,t){1&e&&r.Qb(0,"th",83)}function s6(e,t){1&e&&r.Qb(0,"th",83)}function u6(e,t){1&e&&(r.Tb(0),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Sb())}function d6(e,t){if(1&e&&(r.Vb(0,"div",98),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(4);r.Bb(1),r.Vc(" ",i.ruleTypeDisplay(n.RuleType),"")}}function b6(e,t){1&e&&(r.Vb(0,"td",99),r.Qb(1,"fa-icon",100),r.Ub())}function f6(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(4);r.Bb(1),r.Uc(i.ruleTypeDisplay(n.RuleType))}}function m6(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function g6(e,t){1&e&&r.Rb(0)}function p6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",164,187),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.RuleType=e})),r.Rc(2,m6,2,2,"option",123),r.Ub(),r.Rc(3,g6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(4),a=r.Fc(11);r.sc("ngModel",o.RuleType),r.Bb(2),r.sc("ngForOf",c.ruleTypeChoices),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.RuleType))}}function h6(e,t){if(1&e&&(r.Vb(0,"span",190),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).$implicit,i=r.lc(4);r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Role",n.RoleId,"Name")," ")}}function v6(e,t){if(1&e&&(r.Tb(0),r.Rc(1,h6,2,1,"span",189),r.Sb()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.sc("ngIf",!!n.RoleId)}}function y6(e,t){1&e&&r.Rb(0)}function I6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-roles-picker",191,192),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.RoleId=e})),r.Ub(),r.Rc(2,y6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(4);var c=r.Fc(11);r.sc("ngModel",o.RoleId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.RoleId))}}function C6(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div"),r.Vb(2,"span"),r.Tc(3,":\xa0"),r.Ub(),r.Ub(),r.Vb(4,"div"),r.Rc(5,v6,2,1,"ng-container",30),r.Rc(6,I6,3,6,"ng-template",null,188,r.Sc),r.Ub(),r.Sb()),2&e){var n=r.Fc(7),i=r.lc(4).isEdit;r.Bb(4),r.Gb("flex-grow-1",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function w6(e,t){if(1&e&&(r.Vb(0,"span",190),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).$implicit,i=r.lc(4);r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("User",n.UserId,"Name")," ")}}function k6(e,t){if(1&e&&(r.Tb(0),r.Rc(1,w6,2,1,"span",189),r.Sb()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.sc("ngIf",!!n.UserId)}}function M6(e,t){1&e&&r.Rb(0)}function V6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-users-picker",194,195),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.UserId=e})),r.Ub(),r.Rc(2,M6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(4);var c=r.Fc(11);r.sc("ngModel",o.UserId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.UserId))}}function T6(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div"),r.Vb(2,"span"),r.Tc(3,":\xa0"),r.Ub(),r.Ub(),r.Vb(4,"div"),r.Rc(5,k6,2,1,"ng-container",30),r.Rc(6,V6,3,6,"ng-template",null,193,r.Sc),r.Ub(),r.Sb()),2&e){var n=r.Fc(7),i=r.lc(4).isEdit;r.Bb(4),r.Gb("flex-grow-1",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function E6(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"span",190),r.Tc(2),r.Ub(),r.Sb()),2&e){var n=r.lc(2).$implicit;r.Bb(2),r.Vc(" ",n.RuleTypeEntryIndex," ")}}function U6(e,t){1&e&&r.Rb(0)}function x6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",197,198),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.RuleTypeEntryIndex=e})),r.Ub(),r.Rc(2,U6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(4);var c=r.Fc(11);r.sc("ngModel",o.RuleTypeEntryIndex)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.RuleTypeEntryIndex))}}function R6(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div"),r.Vb(2,"span"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"div"),r.Rc(6,E6,3,1,"ng-container",30),r.Rc(7,x6,3,8,"ng-template",null,196,r.Sc),r.Ub(),r.Sb()),2&e){var n=r.Fc(8),i=r.lc(4).isEdit;r.Bb(3),r.Vc("\xa0",r.nc(4,5,"OfEntry"),":\xa0"),r.Bb(2),r.Gb("flex-grow-1",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function D6(e,t){if(1&e&&(r.Vb(0,"span",190),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit,i=r.lc(4);r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Role",n.ProxyRoleId,"Name")," ")}}function B6(e,t){1&e&&r.Rb(0)}function S6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-roles-picker",201,202),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.ProxyRoleId=e})),r.Ub(),r.Rc(2,B6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(4);var c=r.Fc(11);r.sc("ngModel",o.ProxyRoleId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.ProxyRoleId))}}function _6(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div"),r.Vb(2,"span"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"div"),r.Rc(6,D6,2,1,"span",199),r.Rc(7,S6,3,6,"ng-template",null,200,r.Sc),r.Ub(),r.Sb()),2&e){var n=r.Fc(8),i=r.lc(4).isEdit;r.Bb(3),r.Vc("\xa0",r.nc(4,5,"WorkflowSignature_ProxyRole"),":\xa0"),r.Bb(2),r.Gb("flex-grow-1",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function O6(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(4);r.Bb(1),r.Uc(i.predicateTypeDisplay(n.PredicateType))}}function L6(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function F6(e,t){1&e&&r.Rb(0)}function A6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",164,203),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.PredicateType=e})),r.Qb(2,"option",204),r.Rc(3,L6,2,2,"option",123),r.Ub(),r.Rc(4,F6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(4),a=r.Fc(11);r.sc("ngModel",o.PredicateType),r.Bb(3),r.sc("ngForOf",c.predicateTypeChoices),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.PredicateType))}}function P6(e,t){if(1&e&&(r.Vb(0,"span",190),r.Tc(1),r.mc(2,"accounting"),r.Ub()),2&e){var n=r.lc(2).$implicit,i=r.lc(4);r.Bb(1),r.Vc(" \xa0",r.oc(2,1,n.Value,i.functionalFormat)," ")}}function N6(e,t){1&e&&r.Rb(0)}function j6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-decimal-editor",207,208),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.Value=e})),r.Ub(),r.Rc(2,N6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit,c=r.lc(4),a=r.Fc(11);r.sc("ngModel",o.Value)("maxDecimalPlaces",c.functionalDecimals)("minDecimalPlaces",c.functionalDecimals),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Value))}}function W6(e,t){if(1&e&&(r.Vb(0,"span",190),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Vc(" \xa0",n.PredicateTypeEntryIndex," ")}}function q6(e,t){1&e&&r.Rb(0)}function Q6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",209,210),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.PredicateTypeEntryIndex=e})),r.Ub(),r.Rc(2,q6,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(4);var c=r.Fc(11);r.sc("ngModel",o.PredicateTypeEntryIndex)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.PredicateTypeEntryIndex))}}function H6(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div"),r.Rc(2,P6,3,4,"span",199),r.Rc(3,j6,3,8,"ng-template",null,205,r.Sc),r.Ub(),r.Vb(5,"div"),r.Vb(6,"span"),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Ub(),r.Vb(9,"div"),r.Rc(10,W6,2,1,"span",199),r.Rc(11,Q6,3,8,"ng-template",null,206,r.Sc),r.Ub(),r.Sb()),2&e){var n=r.Fc(4),i=r.Fc(12),o=r.lc(4).isEdit,c=r.lc();r.Bb(1),r.Gb("flex-grow-1",o),r.Bb(1),r.sc("ngIf",!o)("ngIfElse",n),r.Bb(5),r.Wc("\xa0",c.functionalDisplay,",\xa0",r.nc(8,10,"OfEntry"),":\xa0"),r.Bb(2),r.Gb("flex-grow-1",o),r.Bb(1),r.sc("ngIf",!o)("ngIfElse",i)}}function $6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td"),r.Vb(1,"button",108),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc().$implicit,i=r.lc(2).model;return r.lc().onDeleteSignature(i,t,e)})),r.Qb(2,"fa-icon",109),r.Ub(),r.Ub()}}function G6(e,t){if(1&e&&(r.Vb(0,"tr",88),r.Rc(1,u6,3,0,"ng-container",89),r.Rc(2,d6,2,1,"div",90),r.Rc(3,b6,2,0,"td",91),r.Vb(4,"td"),r.Vb(5,"div",184),r.Vb(6,"div"),r.Rc(7,f6,2,1,"span",30),r.Rc(8,p6,4,7,"ng-template",null,185,r.Sc),r.Ub(),r.Rc(10,C6,8,4,"ng-container",97),r.Rc(11,T6,8,4,"ng-container",97),r.Rc(12,R6,9,7,"ng-container",97),r.Rc(13,_6,9,7,"ng-container",97),r.Ub(),r.Ub(),r.Vb(14,"td"),r.Vb(15,"div",184),r.Vb(16,"div"),r.Rc(17,O6,2,1,"span",30),r.Rc(18,A6,5,7,"ng-template",null,186,r.Sc),r.Ub(),r.Rc(20,H6,13,12,"ng-container",97),r.Ub(),r.Ub(),r.Rc(21,$6,3,0,"td",97),r.Ub()),2&e){var n=t.$implicit,i=r.Fc(9),o=r.Fc(19),c=r.lc(3).isEdit;r.Bb(3),r.sc("ngIf",c),r.Bb(1),r.Gb("p-0",c),r.Bb(2),r.Gb("flex-grow-1",c),r.Bb(1),r.sc("ngIf",!c)("ngIfElse",i),r.Bb(3),r.sc("ngIf","ByRole"===n.RuleType),r.Bb(1),r.sc("ngIf","ByUser"===n.RuleType),r.Bb(1),r.sc("ngIf","ByCustodian"===n.RuleType),r.Bb(1),r.sc("ngIf",!!n.RuleType&&"Public"!==n.RuleType&&(c||!!n.ProxyRoleId)),r.Bb(1),r.Gb("p-0",c),r.Bb(2),r.Gb("flex-grow-1",c),r.Bb(1),r.sc("ngIf",!c)("ngIfElse",o),r.Bb(3),r.sc("ngIf","ValueGreaterOrEqual"===n.PredicateType),r.Bb(1),r.sc("ngIf",c)}}function z6(e,t){1&e&&(r.Vb(0,"div",110),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function J6(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",111),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(2).model;return r.lc().onInsertSignature(t,e)})),r.Qb(1,"fa-icon",112),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}function K6(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"h5",181),r.Tc(2),r.Ub(),r.Vb(3,"table",80),r.Vb(4,"thead",81),r.Vb(5,"tr"),r.Rc(6,l6,1,0,"th",82),r.Vb(7,"th",182),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Vb(10,"th",183),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Rc(13,s6,1,0,"th",82),r.Ub(),r.Ub(),r.Vb(14,"tbody",84),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var i=t.$implicit,o=r.lc(2).model,c=r.lc();return c.rowDrop(e,c.Signatures(o,i))})),r.Rc(15,G6,22,19,"tr",85),r.Ub(),r.Ub(),r.Rc(16,z6,3,3,"div",86),r.Rc(17,J6,4,3,"button",87),r.Sb()}if(2&e){var i=t.$implicit,o=r.lc(2),c=o.isEdit,a=o.model,l=r.lc();r.Bb(2),r.Uc(l.stateDisplay(i)),r.Bb(4),r.sc("ngIf",c),r.Bb(2),r.Vc("",r.nc(9,9,"RequiredSignature")," "),r.Bb(3),r.Vc("",r.nc(12,11,"When")," "),r.Bb(2),r.sc("ngIf",c),r.Bb(1),r.sc("cdkDropListDisabled",!c),r.Bb(1),r.sc("ngForOf",l.Signatures(a,i)),r.Bb(1),r.sc("ngIf",!c&&0===l.Signatures(a,i).length),r.Bb(1),r.sc("ngIf",c)}}var Y6=function(){return[1,2,3,4]};function X6(e,t){1&e&&(r.Vb(0,"div",79),r.Rc(1,K6,18,13,"ng-container",180),r.Ub()),2&e&&(r.Bb(1),r.sc("ngForOf",r.vc(1,Y6)))}function Z6(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function e7(e,t){1&e&&r.Qb(0,"th",83)}function t7(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.Vc(" ",r.nc(2,1,"Name")+n.ws.secondaryPostfix," ")}}function n7(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3);r.Bb(1),r.Vc(" ",r.nc(2,1,"Name")+n.ws.ternaryPostfix," ")}}function i7(e,t){1&e&&r.Qb(0,"th",83)}function r7(e,t){1&e&&(r.Tb(0),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Sb())}function o7(e,t){if(1&e&&(r.Vb(0,"div",98),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Vc(" ",i.ws.getMultilingualValueImmediate(n,"Name"),"")}}function c7(e,t){1&e&&(r.Vb(0,"td",99),r.Qb(1,"fa-icon",100),r.Ub())}function a7(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.stateDisplay(n.State))}}function l7(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function s7(e,t){1&e&&r.Rb(0)}function u7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,214),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.State=e})),r.Rc(2,l7,2,2,"option",123),r.Ub(),r.Rc(3,s7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit,c=r.lc(3),a=r.Fc(11);r.sc("ngModel",o.State),r.Bb(2),r.sc("ngForOf",c.negativeStateChoices),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.State))}}function d7(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Uc(n.Name)}}function b7(e,t){1&e&&r.Rb(0)}function f7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,215),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.Name=e})),r.Ub(),r.Rc(2,b7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Name)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Name))}}function m7(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Uc(n.Name2)}}function g7(e,t){1&e&&r.Rb(0)}function p7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,217),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.Name2=e})),r.Ub(),r.Rc(2,g7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Name2)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Name2))}}function h7(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,m7,2,1,"span",30),r.Rc(2,p7,3,8,"ng-template",null,216,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(3).isEdit;r.Gb("p-0",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function v7(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.Uc(n.Name3)}}function y7(e,t){1&e&&r.Rb(0)}function I7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",127,219),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).$implicit.Name3=e})),r.Ub(),r.Rc(2,y7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.Name3)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.Name3))}}function C7(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,v7,2,1,"span",30),r.Rc(2,I7,3,8,"ng-template",null,218,r.Sc),r.Ub()),2&e){var n=r.Fc(3),i=r.lc(3).isEdit;r.Gb("p-0",i),r.Bb(1),r.sc("ngIf",!i)("ngIfElse",n)}}function w7(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc().$implicit;r.Bb(1),r.Uc(r.nc(2,1,n.IsActive?"Yes":"No"))}}function k7(e,t){1&e&&r.Rb(0)}function M7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,220),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.IsActive=e})),r.Vb(2,"option",67),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"option",68),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Rc(8,k7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.IsActive),r.Bb(3),r.Vc(" ",r.nc(4,5,"Yes"),""),r.Bb(3),r.Vc(" ",r.nc(7,7,"No"),""),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(9,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.IsActive))}}function V7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td"),r.Vb(1,"button",108),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(2).model;return r.lc().onDeleteRow(e,t.StateReasons)})),r.Qb(2,"fa-icon",109),r.Ub(),r.Ub()}}function T7(e,t){if(1&e&&(r.Vb(0,"tr",88),r.Rc(1,r7,3,0,"ng-container",89),r.Rc(2,o7,2,1,"div",90),r.Rc(3,c7,2,0,"td",91),r.Vb(4,"td"),r.Rc(5,a7,2,1,"span",30),r.Rc(6,u7,4,7,"ng-template",null,211,r.Sc),r.Ub(),r.Vb(8,"td"),r.Rc(9,d7,2,1,"span",30),r.Rc(10,f7,3,8,"ng-template",null,212,r.Sc),r.Ub(),r.Rc(12,h7,4,4,"td",116),r.Rc(13,C7,4,4,"td",116),r.Vb(14,"td"),r.Rc(15,w7,3,3,"span",30),r.Rc(16,M7,9,12,"ng-template",null,213,r.Sc),r.Ub(),r.Rc(18,V7,3,0,"td",97),r.Ub()),2&e){var n=r.Fc(7),i=r.Fc(11),o=r.Fc(17),c=r.lc(2).isEdit,a=r.lc();r.Bb(3),r.sc("ngIf",c),r.Bb(1),r.Gb("p-0",c),r.Bb(1),r.sc("ngIf",!c)("ngIfElse",n),r.Bb(3),r.Gb("p-0",c),r.Bb(1),r.sc("ngIf",!c)("ngIfElse",i),r.Bb(3),r.sc("ngIf",a.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",a.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("p-0",c),r.Bb(1),r.sc("ngIf",!c)("ngIfElse",o),r.Bb(3),r.sc("ngIf",c)}}function E7(e,t){1&e&&(r.Vb(0,"div",110),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function U7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",111),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model,t=r.lc();return t.onInsertRow(e.StateReasons,t.createStateReason)})),r.Qb(1,"fa-icon",112),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}function x7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",79),r.Vb(1,"table",80),r.Vb(2,"thead",81),r.Vb(3,"tr"),r.Rc(4,e7,1,0,"th",82),r.Vb(5,"th"),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Vb(8,"th"),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Rc(11,t7,3,3,"th",97),r.Rc(12,n7,3,3,"th",97),r.Vb(13,"th"),r.Tc(14),r.mc(15,"translate"),r.Ub(),r.Rc(16,i7,1,0,"th",82),r.Ub(),r.Ub(),r.Vb(17,"tbody",84),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().rowDrop(e,t.StateReasons)})),r.Rc(18,T7,19,16,"tr",85),r.Ub(),r.Ub(),r.Rc(19,E7,3,3,"div",86),r.Rc(20,U7,4,3,"button",87),r.Ub()}if(2&e){var i=r.lc(),o=i.isEdit,c=i.model,a=r.lc();r.Bb(4),r.sc("ngIf",o),r.Bb(2),r.Vc("",r.nc(7,11,"State")," "),r.Bb(3),r.Vc("",r.nc(10,13,"Name")+a.ws.primaryPostfix," "),r.Bb(2),r.sc("ngIf",a.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",a.ws.settings.TernaryLanguageId),r.Bb(2),r.Vc("",r.nc(15,15,"IsActive")," "),r.Bb(2),r.sc("ngIf",o),r.Bb(1),r.sc("cdkDropListDisabled",!o),r.Bb(1),r.sc("ngForOf",c.StateReasons),r.Bb(1),r.sc("ngIf",!o&&0===(null==c.StateReasons?null:c.StateReasons.length)),r.Bb(1),r.sc("ngIf",o)}}function R7(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function D7(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(1),r.Vc(" ",i.display_BarcodeColumnIndex(n),"")}}function B7(e,t){if(1&e&&(r.Vb(0,"option",124),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function S7(e,t){1&e&&r.Rb(0)}function _7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,223),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.BarcodeColumnIndex=e})),r.Qb(2,"option",204),r.Rc(3,B7,2,2,"option",123),r.Ub(),r.Rc(4,S7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2).model,c=r.lc(),a=r.Fc(11);r.sc("ngModel",o.BarcodeColumnIndex),r.Bb(3),r.sc("ngForOf",c.choices_BarcodeColumnIndex(o)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(4,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.BarcodeColumnIndex))}}function O7(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Uc(n.BarcodeProperty)}}function L7(e,t){1&e&&r.Rb(0)}function F7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"input",230,231),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.BarcodeProperty=e})),r.Ub(),r.Rc(2,L7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.BarcodeProperty)("ngModelOptions",r.vc(4,L3)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.BarcodeProperty))}}function A7(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc(3).model,i=r.lc();r.Bb(1),r.Vc(" ",i.display_BarcodeExistingItemHandling(n),"")}}function P7(e,t){1&e&&r.Rb(0)}function N7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",232,233),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.BarcodeExistingItemHandling=e})),r.Qb(2,"option",204),r.Vb(3,"option",234),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Vb(6,"option",235),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Vb(9,"option",236),r.Tc(10),r.mc(11,"translate"),r.Ub(),r.Vb(12,"option",237),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub(),r.Rc(15,P7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.BarcodeExistingItemHandling),r.Bb(4),r.Vc(" ",r.nc(5,7,"LineDefinition_Handling_AddNewLine"),""),r.Bb(3),r.Vc(" ",r.nc(8,9,"LineDefinition_Handling_IncrementQuantity"),""),r.Bb(3),r.Vc(" ",r.nc(11,11,"LineDefinition_Handling_ThrowError"),""),r.Bb(3),r.Vc(" ",r.nc(14,13,"LineDefinition_Handling_DoNothing"),""),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(15,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.BarcodeExistingItemHandling))}}function j7(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=r.lc(3).model;r.Bb(1),r.Vc(" ",r.nc(2,1,n.BarcodeBeepsEnabled?"Yes":"No"),"")}}function W7(e,t){1&e&&r.Rb(0)}function q7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",232,238),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.BarcodeBeepsEnabled=e})),r.Vb(2,"option",67),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"option",68),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Rc(8,W7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(3).model;r.lc();var c=r.Fc(11);r.sc("ngModel",o.BarcodeBeepsEnabled),r.Bb(3),r.Vc(" ",r.nc(4,5,"Yes"),""),r.Bb(3),r.Vc(" ",r.nc(7,7,"No"),""),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(9,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.BarcodeBeepsEnabled))}}function Q7(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",28),r.Vb(2,"label",224),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Rc(5,O7,2,1,"div",30),r.Rc(6,F7,3,8,"ng-template",null,225,r.Sc),r.Ub(),r.Vb(8,"div",28),r.Vb(9,"label",226),r.Tc(10),r.mc(11,"translate"),r.Ub(),r.Rc(12,A7,2,1,"div",30),r.Rc(13,N7,16,18,"ng-template",null,227,r.Sc),r.Ub(),r.Vb(15,"div",28),r.Vb(16,"label",228),r.Tc(17),r.mc(18,"translate"),r.Ub(),r.Rc(19,j7,3,3,"div",30),r.Rc(20,q7,9,12,"ng-template",null,229,r.Sc),r.Ub(),r.Sb()),2&e){var n=r.Fc(7),i=r.Fc(14),o=r.Fc(21),c=r.lc(2).isEdit;r.Bb(3),r.Uc(r.nc(4,9,"LineDefinition_BarcodeProperty")),r.Bb(2),r.sc("ngIf",!c)("ngIfElse",n),r.Bb(5),r.Uc(r.nc(11,11,"LineDefinition_BarcodeExistingItemHandling")),r.Bb(2),r.sc("ngIf",!c)("ngIfElse",i),r.Bb(5),r.Uc(r.nc(18,13,"LineDefinition_BarcodeBeepsEnabled")),r.Bb(2),r.sc("ngIf",!c)("ngIfElse",o)}}function H7(e,t){if(1&e&&(r.Vb(0,"div",27),r.Vb(1,"div",28),r.Vb(2,"label",221),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Rc(5,D7,2,1,"div",30),r.Rc(6,_7,5,7,"ng-template",null,222,r.Sc),r.Ub(),r.Rc(8,Q7,22,15,"ng-container",97),r.Ub()),2&e){var n=r.Fc(7),i=r.lc(),o=i.isEdit,c=i.model,a=r.lc();r.Bb(3),r.Uc(r.nc(4,4,"LineDefinition_BarcodeColumnIndex")),r.Bb(2),r.sc("ngIf",!o)("ngIfElse",n),r.Bb(3),r.sc("ngIf",a.isBarcodeColumnIndexSpecified(c))}}function $7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"ul",9,10),r.hc("activeIdChange",(function(e){return r.Ic(n),r.lc().activeTab=e})),r.Vb(2,"li",11),r.Vb(3,"a",12),r.Rc(4,S3,3,0,"span",13),r.Vb(5,"span",14),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Rc(8,C0,43,31,"ng-template",15),r.Ub(),r.Vb(9,"li",16),r.Vb(10,"a",12),r.Rc(11,w0,3,0,"span",13),r.Vb(12,"span",14),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub(),r.Rc(15,q0,28,24,"ng-template",15),r.Ub(),r.Vb(16,"li",17),r.Vb(17,"a",12),r.Rc(18,Q0,3,0,"span",13),r.Vb(19,"span",14),r.Tc(20),r.mc(21,"translate"),r.Ub(),r.Ub(),r.Rc(22,$4,36,32,"ng-template",15),r.Ub(),r.Vb(23,"li",18),r.Vb(24,"a",12),r.Rc(25,G4,3,0,"span",13),r.Vb(26,"span",14),r.Tc(27),r.mc(28,"translate"),r.Ub(),r.Ub(),r.Rc(29,$5,47,38,"ng-template",15),r.Ub(),r.Vb(30,"li",19),r.Vb(31,"a",12),r.Rc(32,G5,3,0,"span",13),r.Vb(33,"span",14),r.Tc(34),r.mc(35,"translate"),r.Ub(),r.Ub(),r.Rc(36,Z5,3,2,"ng-template",15),r.Ub(),r.Vb(37,"li",20),r.Vb(38,"a",12),r.Rc(39,e6,3,0,"span",13),r.Vb(40,"span",14),r.Tc(41),r.mc(42,"translate"),r.Ub(),r.Ub(),r.Rc(43,c6,3,2,"ng-template",15),r.Ub(),r.Vb(44,"li",21),r.Vb(45,"a",12),r.Rc(46,a6,3,0,"span",13),r.Vb(47,"span",14),r.Tc(48),r.mc(49,"translate"),r.Ub(),r.Ub(),r.Rc(50,X6,2,2,"ng-template",15),r.Ub(),r.Vb(51,"li",22),r.Vb(52,"a",12),r.Rc(53,Z6,3,0,"span",13),r.Vb(54,"span",14),r.Tc(55),r.mc(56,"translate"),r.Ub(),r.Ub(),r.Rc(57,x7,21,17,"ng-template",15),r.Ub(),r.Vb(58,"li",23),r.Vb(59,"a",12),r.Rc(60,R7,3,0,"span",13),r.Vb(61,"span",14),r.Tc(62),r.mc(63,"translate"),r.Ub(),r.Ub(),r.Rc(64,H7,9,6,"ng-template",15),r.Ub(),r.Ub(),r.Qb(65,"div",24)}if(2&e){var i=t.model,o=r.Fc(1),c=r.lc();r.sc("activeId",c.activeTab)("destroyOnHide",!0),r.Bb(4),r.sc("ngIf",c.showGeneralError(i)),r.Bb(2),r.Uc(r.nc(7,25,"General")),r.Bb(5),r.sc("ngIf",c.showEntriesError(i)),r.Bb(2),r.Wc("",r.nc(14,27,"LineDefinition_Entries")," (",null==i.Entries?null:i.Entries.length,")"),r.Bb(5),r.sc("ngIf",c.showColumnsError(i)),r.Bb(2),r.Wc("",r.nc(21,29,"LineDefinition_Columns")," (",null==i.Columns?null:i.Columns.length,")"),r.Bb(5),r.sc("ngIf",c.showGenerateScriptError(i)),r.Bb(2),r.Uc(r.nc(28,31,"AutoGenerate")),r.Bb(5),r.sc("ngIf",c.showPreprocessScriptError(i)),r.Bb(2),r.Uc(r.nc(35,33,"Definition_PreprocessScript")),r.Bb(5),r.sc("ngIf",c.showValidateScriptError(i)),r.Bb(2),r.Uc(r.nc(42,35,"Definition_ValidateScript")),r.Bb(5),r.sc("ngIf",c.showWorkflowsError(i)),r.Bb(2),r.Wc("",r.nc(49,37,"LineDefinition_Workflows")," (",c.signaturesCount(i),")"),r.Bb(5),r.sc("ngIf",c.showStateReasonsError(i)),r.Bb(2),r.Wc("",r.nc(56,39,"LineDefinition_StateReasons")," (",null==i.StateReasons?null:i.StateReasons.length,")"),r.Bb(5),r.sc("ngIf",c.showAdvancedError(i)),r.Bb(2),r.Uc(r.nc(63,41,"Advanced")),r.Bb(3),r.sc("ngbNavOutlet",o)}}function G7(e,t){1&e&&r.Rb(0)}function z7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",239),r.Vb(1,"h5",240),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",241),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",242),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",243),r.Vb(8,"t-control-options",244,245),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().selectedParam.ControlOptions=e})),r.Ub(),r.Rc(10,G7,1,0,"ng-container",44),r.Ub(),r.Vb(11,"div",246),r.Vb(12,"button",247),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(13,"fa-icon",248),r.Tc(14),r.mc(15,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(9),o=r.lc(),c=r.Fc(11);r.Bb(2),r.Vc(" ",r.nc(3,7,"Definition_ControlOptions")," "),r.Bb(6),r.sc("control",o.selectedParam.Control)("isEdit",o.isEdit)("ngModel",o.selectedParam.ControlOptions),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(11,F3,i,null==o.selectedParam||null==o.selectedParam.serverErrors?null:o.selectedParam.serverErrors.ControlOptions)),r.Bb(4),r.Vc(" \xa0",r.nc(15,9,"Done")," ")}}function J7(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Uc(n.directionDisplay(n.entryToEdit.Direction))}}function K7(e,t){1&e&&r.Rb(0)}function Y7(e,t){if(1&e){var n=r.Wb();r.Vb(0,"select",65,101),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).entryToEdit.Direction=e})),r.Vb(2,"option",102),r.Tc(3),r.Ub(),r.Vb(4,"option",103),r.Tc(5),r.Ub(),r.Ub(),r.Rc(6,K7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2),c=r.Fc(11);r.sc("ngModel",o.entryToEdit.Direction),r.Bb(3),r.Vc(" ",o.directionDisplay(1),""),r.Bb(2),r.Vc(" ",o.directionDisplay(-1),""),r.Bb(1),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(5,F3,i,null==o.entryToEdit||null==o.entryToEdit.serverErrors?null:o.entryToEdit.serverErrors.Direction))}}function X7(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Uc(n.ws.getMultilingualValue("AccountType",n.entryToEdit.ParentAccountTypeId,"Name"))}}function Z7(e,t){1&e&&r.Rb(0)}function e8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-types-picker",104,105),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).entryToEdit.ParentAccountTypeId=e})),r.Ub(),r.Rc(2,Z7,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2),c=r.Fc(11);r.sc("ngModel",o.entryToEdit.ParentAccountTypeId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o.entryToEdit||null==o.entryToEdit.serverErrors?null:o.entryToEdit.serverErrors.ParentAccountTypeId))}}function t8(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc(2);r.Bb(1),r.Uc(n.ws.getMultilingualValue("EntryType",n.entryToEdit.EntryTypeId,"Name"))}}function n8(e,t){1&e&&r.Rb(0)}function i8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",104,106),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).entryToEdit.EntryTypeId=e})),r.Ub(),r.Rc(2,n8,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc(2),c=r.Fc(11);r.sc("ngModel",o.entryToEdit.EntryTypeId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o.entryToEdit||null==o.entryToEdit.serverErrors?null:o.entryToEdit.serverErrors.EntryTypeId))}}function r8(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function o8(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.ws.getMultilingualValue("CustodyDefinition",n.CustodyDefinitionId,"TitleSingular"))}}function c8(e,t){1&e&&r.Rb(0)}function a8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custody-definitions-picker",104,262),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.CustodyDefinitionId=e})),r.Ub(),r.Rc(2,c8,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.CustodyDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.CustodyDefinitionId))}}function l8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",83),r.Vb(1,"button",108),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(3);return t.onDeleteRow(e,t.entryToEdit.CustodyDefinitions)})),r.Qb(2,"fa-icon",109),r.Ub(),r.Ub()}}function s8(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td"),r.Rc(2,o8,2,1,"span",30),r.Rc(3,a8,3,6,"ng-template",null,260,r.Sc),r.Ub(),r.Rc(5,l8,3,0,"td",261),r.Ub()),2&e){var n=r.Fc(4),i=r.lc(3);r.Bb(1),r.Gb("p-0",i.modalIsEdit),r.Bb(1),r.sc("ngIf",!i.modalIsEdit)("ngIfElse",n),r.Bb(3),r.sc("ngIf",i.modalIsEdit)}}function u8(e,t){1&e&&(r.Vb(0,"div",110),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function d8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",263),r.hc("click",(function(){r.Ic(n);var e=r.lc(3);return e.onInsertRow(e.entryToEdit.CustodyDefinitions)})),r.Qb(1,"fa-icon",112),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}function b8(e,t){if(1&e&&(r.Vb(0,"table",80),r.Vb(1,"tbody"),r.Rc(2,s8,6,5,"tr",180),r.Ub(),r.Ub(),r.Rc(3,u8,3,3,"div",86),r.Rc(4,d8,4,3,"button",259)),2&e){var n=r.lc(2);r.Bb(2),r.sc("ngForOf",n.entryToEdit.CustodyDefinitions),r.Bb(1),r.sc("ngIf",!n.modalIsEdit&&0===(null==n.entryToEdit.CustodyDefinitions?null:n.entryToEdit.CustodyDefinitions.length)),r.Bb(1),r.sc("ngIf",n.modalIsEdit)}}function f8(e,t){1&e&&(r.Vb(0,"span",25),r.Qb(1,"fa-icon",26),r.Tc(2,"\xa0 "),r.Ub())}function m8(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(3);r.Bb(1),r.Uc(i.ws.getMultilingualValue("ResourceDefinition",n.ResourceDefinitionId,"TitleSingular"))}}function g8(e,t){1&e&&r.Rb(0)}function p8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resource-definitions-picker",104,265),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().$implicit.ResourceDefinitionId=e})),r.Ub(),r.Rc(2,g8,1,0,"ng-container",44)}if(2&e){var i=r.Fc(1),o=r.lc().$implicit;r.lc(3);var c=r.Fc(11);r.sc("ngModel",o.ResourceDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(3,F3,i,null==o||null==o.serverErrors?null:o.serverErrors.ResourceDefinitionId))}}function h8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",83),r.Vb(1,"button",108),r.hc("click",(function(){r.Ic(n);var e=r.lc().$implicit,t=r.lc(3);return t.onDeleteRow(e,t.entryToEdit.ResourceDefinitions)})),r.Qb(2,"fa-icon",109),r.Ub(),r.Ub()}}function v8(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td"),r.Rc(2,m8,2,1,"span",30),r.Rc(3,p8,3,6,"ng-template",null,264,r.Sc),r.Ub(),r.Rc(5,h8,3,0,"td",82),r.Ub()),2&e){var n=r.Fc(4),i=r.lc(3);r.Bb(1),r.Gb("p-0",i.modalIsEdit),r.Bb(1),r.sc("ngIf",!i.modalIsEdit)("ngIfElse",n),r.Bb(3),r.sc("ngIf",i.modalIsEdit)}}function y8(e,t){1&e&&(r.Vb(0,"div",110),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function I8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",263),r.hc("click",(function(){r.Ic(n);var e=r.lc(3);return e.onInsertRow(e.entryToEdit.ResourceDefinitions)})),r.Qb(1,"fa-icon",112),r.Tc(2),r.mc(3,"translate"),r.Ub()}2&e&&(r.Bb(2),r.Vc("\xa0\xa0",r.nc(3,1,"Add")," "))}function C8(e,t){if(1&e&&(r.Vb(0,"table",80),r.Vb(1,"tbody"),r.Rc(2,v8,6,5,"tr",180),r.Ub(),r.Ub(),r.Rc(3,y8,3,3,"div",86),r.Rc(4,I8,4,3,"button",259)),2&e){var n=r.lc(2);r.Bb(2),r.sc("ngForOf",n.entryToEdit.ResourceDefinitions),r.Bb(1),r.sc("ngIf",!n.modalIsEdit&&0===(null==n.entryToEdit.ResourceDefinitions?null:n.entryToEdit.ResourceDefinitions.length)),r.Bb(1),r.sc("ngIf",n.modalIsEdit)}}function w8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",239),r.Vb(1,"h5",240),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",241),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",242),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",243),r.Vb(8,"div",249),r.Vb(9,"div",250),r.Vb(10,"label",251),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"div"),r.Tc(14),r.Ub(),r.Ub(),r.Vb(15,"div",250),r.Vb(16,"label",251),r.Tc(17),r.mc(18,"translate"),r.Ub(),r.Vb(19,"div"),r.Rc(20,J7,2,1,"span",30),r.Rc(21,Y7,7,8,"ng-template",null,252,r.Sc),r.Ub(),r.Ub(),r.Vb(23,"div",250),r.Vb(24,"label",251),r.Tc(25),r.mc(26,"translate"),r.Ub(),r.Vb(27,"div"),r.Rc(28,X7,2,1,"span",30),r.Rc(29,e8,3,6,"ng-template",null,253,r.Sc),r.Ub(),r.Ub(),r.Vb(31,"div",250),r.Vb(32,"label",251),r.Tc(33),r.mc(34,"translate"),r.Ub(),r.Vb(35,"div"),r.Rc(36,t8,2,1,"span",30),r.Rc(37,i8,3,6,"ng-template",null,254,r.Sc),r.Ub(),r.Ub(),r.Ub(),r.Vb(39,"ul",255,256),r.hc("activeIdChange",(function(e){return r.Ic(n),r.lc().activeEntryTab=e})),r.Vb(41,"li",257),r.Vb(42,"a",12),r.Rc(43,r8,3,0,"span",13),r.Vb(44,"span",14),r.Tc(45),r.mc(46,"translate"),r.Ub(),r.Ub(),r.Rc(47,b8,5,3,"ng-template",15),r.Ub(),r.Vb(48,"li",258),r.Vb(49,"a",12),r.Rc(50,f8,3,0,"span",13),r.Vb(51,"span",14),r.Tc(52),r.mc(53,"translate"),r.Ub(),r.Ub(),r.Rc(54,C8,5,3,"ng-template",15),r.Ub(),r.Ub(),r.Qb(55,"div",24),r.Ub(),r.Vb(56,"div",246),r.Vb(57,"button",247),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(58,"fa-icon",248),r.Tc(59),r.mc(60,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(22),o=r.Fc(30),c=r.Fc(38),a=r.Fc(40),l=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,22,"LineDefinitionEntry")," "),r.Bb(9),r.Uc(r.nc(12,24,"LineDefinitionColumn_EntryIndex")),r.Bb(3),r.Vc(" ",l.entryIndex," "),r.Bb(3),r.Uc(r.nc(18,26,"LineDefinitionEntry_Direction")),r.Bb(3),r.sc("ngIf",!l.modalIsEdit)("ngIfElse",i),r.Bb(5),r.Uc(r.nc(26,28,"LineDefinitionEntry_ParentAccountType")),r.Bb(3),r.sc("ngIf",!l.modalIsEdit)("ngIfElse",o),r.Bb(5),r.Uc(r.nc(34,30,"LineDefinitionEntry_EntryType")),r.Bb(3),r.sc("ngIf",!l.modalIsEdit)("ngIfElse",c),r.Bb(3),r.sc("activeId",l.activeEntryTab)("destroyOnHide",!0),r.Bb(4),r.sc("ngIf",l.showCustodyDefinitionsError(l.entryToEdit)),r.Bb(2),r.Wc("",r.nc(46,32,"LineDefinitionEntry_CustodyDefinitions")," (",null==l.entryToEdit.CustodyDefinitions?null:l.entryToEdit.CustodyDefinitions.length,")"),r.Bb(5),r.sc("ngIf",l.showResourceDefinitionsError(l.entryToEdit)),r.Bb(2),r.Wc("",r.nc(53,34,"LineDefinitionEntry_ResourceDefinitions")," (",null==l.entryToEdit.ResourceDefinitions?null:l.entryToEdit.ResourceDefinitions.length,")"),r.Bb(3),r.sc("ngbNavOutlet",a),r.Bb(4),r.Vc(" \xa0",r.nc(60,36,"Done")," ")}}function k8(e,t){if(1&e&&(r.Vb(0,"span",269),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function M8(e,t){if(1&e&&(r.Vb(0,"div",267),r.Rc(1,k8,2,1,"span",268),r.Ub()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(1),r.sc("ngForOf",c.errors(i,o))}}function V8(e,t){if(1&e&&r.Rc(0,M8,2,1,"div",266),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}function T8(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Activate")," ")}function E8(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Deactivate")," ")}function U8(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"EditDefinition")," ")}var x8,R8=function(){return[]},D8=((x8=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var c;return _classCallCheck(this,n),(c=t.call(this)).modalService=e,c.workspace=i,c.api=r,c.translate=o,c.expand="Columns,Entries.ParentAccountType,Entries.EntryType,Entries.CustodyDefinitions.CustodyDefinition,\nEntries.ResourceDefinitions.ResourceDefinition,GenerateParameters,\nWorkflows.Signatures.Role,Workflows.Signatures.User,Workflows.Signatures.ProxyRole,StateReasons",c.create=function(){var e={};return c.ws.isPrimaryLanguage?e.TitleSingular=c.initialText:c.ws.isSecondaryLanguage?e.TitleSingular2=c.initialText:c.ws.isTernaryLanguage&&(e.TitleSingular3=c.initialText),e.AllowSelectiveSigning=!1,e.ViewDefaultsToForm=!1,e.BarcodeBeepsEnabled=!0,e.Columns=[],e.Entries=[],e.GenerateParameters=[],e.StateReasons=[],e.Workflows=[],e},c.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Columns&&t.Columns.forEach((function(e){e.Id=null})),t.Entries&&t.Entries.forEach((function(e){e.Id=null,e.CustodyDefinitions.forEach((function(e){e.Id=null})),e.ResourceDefinitions.forEach((function(e){e.Id=null}))})),t.GenerateParameters&&t.GenerateParameters.forEach((function(e){e.Id=null})),t.StateReasons&&t.StateReasons.forEach((function(e){e.Id=null})),t.Workflows&&t.Workflows.forEach((function(e){e.Id=null,e.Signatures.forEach((function(e){e.Id=null}))})),t}return console.error("Cloning a non existing item"),null},c.isInactive=function(e){return e&&e.Id===c.ws.definitions.ManualLinesDefinitionId?"Error_CannotModifySystemItem":null},c.columnNameDisplay=function(e){var t;switch(e){case"Memo":t="";break;case"PostingDate":case"TemplateLineId":case"Multiplier":case"Boolean1":case"Decimal1":case"Text1":t="Line_";break;default:t="Entry_"}var n=t+e;return n.endsWith("Id")&&(n=n.substr(0,n.length-2)),c.translate.instant(n)},c.stateDisplay=function(e){var t;return t=5===e?"Never":e>=0?"Line_State_"+e:"Line_State_minus_"+Math.abs(e),c.translate.instant(t)},c.directionDisplay=function(e){return 1===e?c.translate.instant("Entry_Direction_Debit"):-1===e?c.translate.instant("Entry_Direction_Credit"):""},c.ruleTypeDisplay=function(e){return e?c.translate.instant("RuleType_"+e):""},c.predicateTypeDisplay=function(e){return e?c.translate.instant("PredicateType_"+e):""},c.visibilityDisplay=function(e){return Object(T3.h)("",c.translate).format(e)},c.controlDisplay=function(e){var t=c.ws.definitions;if(c._controlChoicesDefinitions!==t){c._controlChoicesDefinitions=t,c._controlDisplayCache={};var n,i=_createForOfIteratorHelper(c.controlSimpleChoices());try{for(i.s();!(n=i.n()).done;){var r=n.value;c._controlDisplayCache[r.value]=r.name}}catch(u){i.e(u)}finally{i.f()}var o,a=_createForOfIteratorHelper(c.controlEntityChoices());try{for(a.s();!(o=a.n()).done;){var l=o.value;c._controlDisplayCache[l.value]=l.name}}catch(u){a.e(u)}finally{a.f()}}var s=c._controlDisplayCache[e];return s?s():""},c.isEdit=!1,c.choicesBarcodeColumnIndexChanged=!0,c}return _createClass(n,[{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"isRequiredColumn",value:function(e){return"CenterId"===e.ColumnName||"CurrencyId"===e.ColumnName}},{key:"canFilter",value:function(e){return!!e.ColumnName&&e.ColumnName.endsWith("Id")}},{key:"canInherit",value:function(e){switch(e.ColumnName){case"PostingDate":case"Memo":case"CurrencyId":case"CenterId":case"CustodianId":case"CustodyId":case"ParticipantId":case"ResourceId":case"Quantity":case"UnitId":case"Time1":case"Time2":case"ExternalReference":case"InternalReference":return!0;default:return!1}}},{key:"controlSimpleChoices",value:function(){return Object(Si.i)(this.translate)}},{key:"controlEntityChoices",value:function(){return Object(Si.a)(this.workspace,this.translate,!0)}},{key:"hasControlOptions",value:function(e){return!!e&&Object(Si.e)(e.Control)}},{key:"onControlOptions",value:function(e,t){e&&(this.selectedParam=e,this.isEdit=t,this.modalService.open(this.controlOptions,{windowClass:"t-dark-theme t-wider-modal"}))}},{key:"createEntry",value:function(){return{Id:0,Direction:1,CustodyDefinitions:[],ResourceDefinitions:[]}}},{key:"createStateReason",value:function(){return{Id:0,State:-2,IsActive:!0}}},{key:"createColumn",value:function(){return{Id:0,EntryIndex:0,InheritsFromHeader:0,VisibleState:0,RequiredState:0,ReadOnlyState:5}}},{key:"onLineDefinitionEntryCustodyDefinitions",value:function(e,t,n){this.activeEntryTab="custodyDefinitions",this.onLineDefinitionEntryMore(e,t,n)}},{key:"onLineDefinitionEntryResourceDefinitions",value:function(e,t,n){this.activeEntryTab="resourceDefinitions",this.onLineDefinitionEntryMore(e,t,n)}},{key:"onLineDefinitionEntryMore",value:function(e,t,n){e&&(this.entryToEdit=e,this.modalIsEdit=t,this.entryIndex=n,this.modalService.open(this.lineDefinitionEntryModal,{windowClass:"t-dark-theme t-wider-modal"}))}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t,e.previousIndex,e.currentIndex)}},{key:"onDeleteRow",value:function(e,t){var n=t.indexOf(e);n>=0&&t.splice(n,1)}},{key:"onInsertRow",value:function(e,t){var n=t?t():{Id:0};e.push(n)}},{key:"column_rowDrop",value:function(e,t){this.rowDrop(e,t.Columns),this.choicesBarcodeColumnIndexChanged=!0,t.BarcodeColumnIndex===e.previousIndex?t.BarcodeColumnIndex=e.currentIndex:e.previousIndex<t.BarcodeColumnIndex&&e.currentIndex>=t.BarcodeColumnIndex?t.BarcodeColumnIndex--:e.previousIndex>t.BarcodeColumnIndex&&e.currentIndex<=t.BarcodeColumnIndex&&t.BarcodeColumnIndex++}},{key:"column_onDeleteRow",value:function(e,t){this.onDeleteRow(t.Columns[e],t.Columns),this.choicesBarcodeColumnIndexChanged=!0,t.BarcodeColumnIndex===e?delete t.BarcodeColumnIndex:t.BarcodeColumnIndex>e&&t.BarcodeColumnIndex--}},{key:"column_onInsertRow",value:function(e){this.onInsertRow(e.Columns,this.createColumn),this.choicesBarcodeColumnIndexChanged=!0}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"weakEntityErrors",value:function(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some((function(t){return Object(UI.b)(e.serverErrors[t])}))}},{key:"showGeneralError",value:function(e){return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.Code)||Object(UI.b)(e.serverErrors.TitleSingular)||Object(UI.b)(e.serverErrors.TitleSingular2)||Object(UI.b)(e.serverErrors.TitleSingular3)||Object(UI.b)(e.serverErrors.TitlePlural)||Object(UI.b)(e.serverErrors.TitlePlural2)||Object(UI.b)(e.serverErrors.TitlePlural3)||Object(UI.b)(e.serverErrors.Description)||Object(UI.b)(e.serverErrors.Description2)||Object(UI.b)(e.serverErrors.Description3))}},{key:"showColumnsError",value:function(e){var t=this;return!!e.Columns&&e.Columns.some((function(e){return t.weakEntityErrors(e)}))}},{key:"showEntriesError",value:function(e){var t=this;return!!e.Entries&&e.Entries.some((function(e){return t.weakEntityErrors(e)||t.showCustodyDefinitionsError(e)||t.showResourceDefinitionsError(e)}))}},{key:"showCustodyDefinitionsError",value:function(e){var t=this;return!!e.CustodyDefinitions&&e.CustodyDefinitions.some((function(e){return t.weakEntityErrors(e)}))}},{key:"showResourceDefinitionsError",value:function(e){var t=this;return!!e.ResourceDefinitions&&e.ResourceDefinitions.some((function(e){return t.weakEntityErrors(e)}))}},{key:"showPreprocessScriptError",value:function(e){return!!e.serverErrors&&Object(UI.b)(e.serverErrors.PreprocessScript)}},{key:"showValidateScriptError",value:function(e){return!!e.serverErrors&&Object(UI.b)(e.serverErrors.ValidateScript)}},{key:"showGenerateScriptError",value:function(e){var t=this;return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.GenerateLabel)||Object(UI.b)(e.serverErrors.GenerateLabel2)||Object(UI.b)(e.serverErrors.GenerateLabel3)||Object(UI.b)(e.serverErrors.GenerateScript))||!!e.GenerateParameters&&e.GenerateParameters.some((function(e){return t.weakEntityErrors(e)}))}},{key:"showGenerateParametersError",value:function(e){return!!e.serverErrors&&Object(UI.b)(e.serverErrors.ControlOptions)}},{key:"showWorkflowsError",value:function(e){var t=this;return!!e.Workflows&&e.Workflows.some((function(e){return!!e.Signatures&&e.Signatures.some((function(e){return t.weakEntityErrors(e)}))}))}},{key:"showStateReasonsError",value:function(e){var t=this;return!!e.StateReasons&&e.StateReasons.some((function(e){return t.weakEntityErrors(e)}))}},{key:"Signatures",value:function(e,t){var n=e.Workflows.find((function(e){return e.ToState===t}));return n?n.Signatures:[]}},{key:"onInsertSignature",value:function(e,t){var n=e.Workflows.find((function(e){return e.ToState===t}));n||(n={ToState:t,Signatures:[]},e.Workflows.push(n)),this.onInsertRow(n.Signatures)}},{key:"onDeleteSignature",value:function(e,t,n){var i=e.Workflows.find((function(e){return e.ToState===t}));this.onDeleteRow(n,i.Signatures),0===i.Signatures.length&&this.onDeleteRow(i,e.Workflows)}},{key:"signaturesCount",value:function(e){if(e&&e.Workflows){var t,n=0,i=_createForOfIteratorHelper(e.Workflows);try{for(i.s();!(t=i.n()).done;){var r=t.value;n+=r.Signatures?r.Signatures.length:0}}catch(o){i.e(o)}finally{i.f()}return n}return 0}},{key:"showAdvancedError",value:function(e){return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.BarcodeColumnIndex)||Object(UI.b)(e.serverErrors.BarcodeProperty)||Object(UI.b)(e.serverErrors.BarcodeExistingItemHandling)||Object(UI.b)(e.serverErrors.BarcodeBeepsEnabled))}},{key:"onPreprocessScriptKeydown",value:function(e,t,n){Object(W.p)(e,t,(function(e){return n.PreprocessScript=e}))}},{key:"onValidateScriptKeydown",value:function(e,t,n){Object(W.p)(e,t,(function(e){return n.ValidateScript=e}))}},{key:"onGenerateScriptKeydown",value:function(e,t,n){Object(W.p)(e,t,(function(e){return n.GenerateScript=e}))}},{key:"isBarcodeColumnIndexSpecified",value:function(e){return Object(W.n)(e.BarcodeColumnIndex)}},{key:"display_BarcodeColumnIndex",value:function(e){var t=e.BarcodeColumnIndex;if(Object(W.n)(t)){var n=e.Columns[t];if(n)return this.ws.getMultilingualValueImmediate(n,"Label")||n.ColumnName}return""}},{key:"choices_BarcodeColumnIndex",value:function(e){var t=this;return(this.choicesBarcodeColumnIndexChanged||this.choicesBarcodeColumnIndexModel!==e)&&(this.choicesBarcodeColumnIndexChanged=!1,this.choicesBarcodeColumnIndexModel=e,this.choicesBarcodeColumnIndexResult=e.Columns.map((function(e,n){return{name:function(){return t.ws.getMultilingualValueImmediate(e,"Label")||e.ColumnName},value:n}}))),this.choicesBarcodeColumnIndexResult}},{key:"display_BarcodeExistingItemHandling",value:function(e){return Object(V3.a)(this.workspace,this.translate).properties.BarcodeExistingItemHandling.format(e.BarcodeExistingItemHandling)}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"columnNameChoices",get:function(){var e=this;return this._columnNameChoices||(this._columnNameChoices=E3.map((function(t){return{value:t,name:function(){return e.columnNameDisplay(t)}}}))),this._columnNameChoices}},{key:"stateChoices",get:function(){var e=this;return this._stateChoices||(this._stateChoices=[0,1,2,3,4,5].map((function(t){return{value:t,name:function(){return e.stateDisplay(t)}}}))),this._stateChoices}},{key:"toStateChoices",get:function(){var e=this;return this._toStateChoices||(this._toStateChoices=[1,2,3,4].map((function(t){return{value:t,name:function(){return e.stateDisplay(t)}}}))),this._toStateChoices}},{key:"negativeStateChoices",get:function(){var e=this;return this._negativeStateChoices||(this._negativeStateChoices=[-1,-2,-3,-4].map((function(t){return{value:t,name:function(){return e.stateDisplay(t)}}}))),this._negativeStateChoices}},{key:"ruleTypeChoices",get:function(){var e=this;return this._ruleTypeChoices||(this._ruleTypeChoices=U3.map((function(t){return{value:t,name:function(){return e.ruleTypeDisplay(t)}}}))),this._ruleTypeChoices}},{key:"predicateTypeChoices",get:function(){var e=this;return this._predicateTypeChoices||(this._predicateTypeChoices=x3.map((function(t){return{value:t,name:function(){return e.predicateTypeDisplay(t)}}}))),this._predicateTypeChoices}},{key:"functionalDisplay",get:function(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")}},{key:"functionalDecimals",get:function(){return this.ws.settings.FunctionalCurrencyDecimals}},{key:"functionalFormat",get:function(){var e=this.functionalDecimals;return"1.".concat(e,"-").concat(e)}},{key:"visibilityChoices",get:function(){if(!this._visibilityChoices){var e=Object(T3.h)("",this.translate);this._visibilityChoices=Object(Si.c)(e)}return this._visibilityChoices}},{key:"activeTab",get:function(){return this.ws.miscState.lineDefinition_activeTab||"general"},set:function(e){this.ws.miscState.lineDefinition_activeTab=e}},{key:"activeEntryTab",get:function(){return this.ws.miscState.lineDefinition_activeEntryTab||"custodyDefinitions"},set:function(e){this.ws.miscState.lineDefinition_activeEntryTab=e}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||x8)(r.Pb(X.t),r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},x8.\u0275cmp=r.Jb({type:x8,selectors:[["t-line-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(R3,!0),r.Oc(D3,!0)),2&e&&(r.Ec(n=r.ic())&&(t.lineDefinitionEntryModal=n.first),r.Ec(n=r.ic())&&(t.controlOptions=n.first))},features:[r.yb],decls:18,vars:13,consts:[["collection","LineDefinition","theme","dark",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],["controlOptions",""],["lineDefinitionEntryModal",""],["errorsTemplate",""],["activate",""],["deactivate",""],["editDefinition",""],["ngbNav","",1,"w-100","nav-tabs","t-dark-tabs","t-dark-border",3,"activeId","destroyOnHide","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","general"],["ngbNavLink",""],["class","text-danger t-light-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["ngbNavItem","entries"],["ngbNavItem","columns"],["ngbNavItem","generateScript"],["ngbNavItem","preprocessScript"],["ngbNavItem","validateScript"],["ngbNavItem","workflows"],["ngbNavItem","stateReasons"],["ngbNavItem","advanced"],[1,"w-100","overflow-auto",3,"ngbNavOutlet"],[1,"text-danger","t-light-danger"],["icon","exclamation"],[1,"row","m-0","pt-2","pt-sm-3"],[1,"form-group","t-form-group","t-text-whitish"],["for","titleplural",1,"small"],[4,"ngIf","ngIfElse"],["titlepluraltemplate",""],["class","form-group t-form-group t-text-whitish",4,"ngIf"],["for","titlesingular",1,"small"],["titlesingulartemplate",""],["for","code",1,"small"],["codetemplate",""],["for","defaultstoform",1,"small"],["viewdefaultstoformtemplate",""],[1,"w-100"],["for","description",1,"small"],["descriptiontemplate",""],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlepluralmodel","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titleplural2",1,"small"],["titleplural2template",""],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2model","ngModel"],["for","titleplural3",1,"small"],["titleplural3template",""],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3model","ngModel"],["id","titlesingular","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingularmodel","ngModel"],["for","titlesingular2",1,"small"],["titlesingular2template",""],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2model","ngModel"],["for","titlesingular3",1,"small"],["titlesingular3template",""],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3model","ngModel"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["codemodel","ngModel"],[1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["defaultstoformmodel","ngModel"],["value","true"],["value","false"],["id","description","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["descriptionmodel","ngModel"],["for","description2",1,"small"],["description2template",""],["id","description2","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["description2model","ngModel"],["for","description3",1,"small"],["description3template",""],["id","description3","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["description3model","ngModel"],[1,"t-text-whitish","pb-1"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[1,"small","font-weight-normal"],["style","width: 1px;",4,"ngIf"],[2,"width","1px"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","font-italic mx-2",4,"ngIf"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal",3,"click",4,"ngIf"],["cdkDrag","","cdkDragLockAxis","y"],[4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","","class","px-2","style","cursor: move;",4,"ngIf"],["directiontemplate",""],["parentaccounttypetemplate",""],["entrytypetemplate",""],[1,"btn","btn-sm","t-text-whitish","btn-link","py-0","font-weight-normal",3,"click"],["class","text-danger t-light-danger t-vertical-align-middle",4,"ngIf"],[4,"ngIf"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["directionmodel","ngModel"],["value","1"],["value","-1"],["theme","dark",3,"ngModel","ngModelChange"],["parentaccounttypemodel","ngModel"],["entrytypemodel","ngModel"],[1,"text-danger","t-light-danger","t-vertical-align-middle"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],[1,"font-italic","mx-2"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],["icon","plus"],["columnnametemplate",""],["entryindextemplate",""],["labeltemplate",""],[3,"p-0",4,"ngIf"],["filtertemplate",""],["visiblestatetemplate",""],["requiredstatetemplate",""],["readonlystatetemplate",""],["inheritsfromheadertemplate",""],["columnnamemodel","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["entryindexmodel","ngModel"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["labelmodel","ngModel"],["label2template",""],["label2model","ngModel"],["label3template",""],["label3model","ngModel"],["noFilter",""],["filtermodel","ngModel"],["visiblestatemodel","ngModel"],["requiredstatemodel","ngModel"],["readonlystatemodel","ngModel"],["inheritsFromNone",""],["inheritsfromheadermodel","ngModel"],["value","0"],["value","2"],["for","generatelabel",1,"small"],["generatelabeltemplate",""],[1,"form-group","t-wide-form-group","t-text-whitish"],[1,"small"],[1,"t-wide-form-group"],["for","generatescript",1,"small","t-text-whitish"],["generatescripttemplate",""],["id","generatelabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabelmodel","ngModel"],["for","generatelabel2",1,"small"],["generatelabel2template",""],["id","generatelabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabel2model","ngModel"],["for","generatelabel3",1,"small"],["generatelabel3template",""],["id","generatelabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabel3model","ngModel"],["keytemplate",""],["visibilitytemplate",""],["controltemplate",""],["class","btn btn-secondary t-white-button t-text-whitish btn-sm py-0 px-1 align-baseline",3,"click",4,"ngIf"],["keymodel","ngModel"],[1,"form-control","t-studio-input",2,"min-width","120px",3,"ngModel","ngModelChange"],["visibilitymodel","ngModel"],["controlmodel","ngModel"],["disabled",""],["icon","ellipsis-h"],["class","text-muted bg-dark p-2 pb-5 font-italic",4,"ngIf"],["class","t-text-whitish bg-dark pb-4 t-code overflow-auto px-1",4,"ngIf"],[1,"text-muted","bg-dark","p-2","pb-5","font-italic"],[1,"t-text-whitish","bg-dark","pb-4","t-code","overflow-auto","px-1"],["id","generatescript","spellcheck","false","rows","15",1,"w-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["generatescriptnmodel","ngModel","gstextarea",""],["preprocessscripttemplate",""],["spellcheck","false","rows","25",1,"w-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["preprocessscriptnmodel","ngModel","pstextarea",""],["validatescripttemplate",""],["validatescriptnmodel","ngModel","pstextarea",""],[4,"ngFor","ngForOf"],[1,"mt-3"],[2,"width","60%"],[2,"width","40%"],[1,"d-flex","align-items-baseline"],["ruletypetemplate",""],["predicatetypetemplate",""],["ruletypemodel","ngModel"],["roletemplate",""],["class","font-weight-bold",4,"ngIf"],[1,"font-weight-bold"],["theme","dark","id","role","filter","IsPublic eq false",1,"d-inline-block",3,"ngModel","ngModelChange"],["rolemodel","ngModel"],["usertemplate",""],["theme","dark","id","user",3,"ngModel","ngModelChange"],["usermodel","ngModel"],["ruletypeentryindextemplate",""],["id","ruletypeentryindex","type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["ruletypeentryindexmodel","ngModel"],["class","font-weight-bold",4,"ngIf","ngIfElse"],["proxyroletemplate",""],["theme","dark","id","proxyrole","filter","IsPublic eq false",3,"ngModel","ngModelChange"],["proxyrolemodel","ngModel"],["predicatetypemodel","ngModel"],["value",""],["valuetemplate",""],["predicatetypeentryindextemplate",""],["theme","dark",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelChange"],["valuemodel","ngModel"],["id","predicatetypeentryindex","type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["predicatetypeentryindexmodel","ngModel"],["statetemplate",""],["nametemplate",""],["isactivetemplate",""],["statemodel","ngModel"],["namemodel","ngModel"],["name2template",""],["name2model","ngModel"],["name3template",""],["name3model","ngModel"],["isactivemodel","ngModel"],["for","barcodecolumnindex",1,"small"],["barcodecolumnindextemplate",""],["barcodecolumnindexmodel","ngModel"],["for","barcodeproperty",1,"small"],["barcodepropertytemplate",""],["for","barcodeexistingitemhandling",1,"small"],["barcodeexistingitemhandlingtemplate",""],["for","barcodebeepsenabled",1,"small"],["barcodebeepsenabledtemplate",""],["id","barcodeproperty","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["barcodepropertymodel","ngModel"],["required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["barcodeexistingitemhandlingmodel","ngModel"],["value","AddNewLine"],["value","IncrementQuantity"],["value","ThrowError"],["value","DoNothing"],["barcodebeepsenabledmodel","ngModel"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[3,"control","isEdit","ngModel","ngModelChange"],["controloptions","ngModel"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["icon","check"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["for","label",1,"small"],["modaldirectiontemplate",""],["modalparentaccounttypetemplate",""],["modalentrytypetemplate",""],["ngbNav","",1,"w-100","pt-3","pt-sm-4","nav-tabs","t-dark-tabs","t-dark-border",3,"activeId","destroyOnHide","activeIdChange"],["entryTabs","ngbNav"],["ngbNavItem","custodyDefinitions"],["ngbNavItem","resourceDefinitions"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal mb-1",3,"click",4,"ngIf"],["custodydefinitiontemplate",""],["style","width:1px",4,"ngIf"],["custodydefinitionmodel","ngModel"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1",3,"click"],["resourcedefinitiontemplate",""],["resourcedefinitionmodel","ngModel"],["class","text-wrap",4,"ngIf"],[1,"text-wrap"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,B3,2,1,"ng-template",null,1,r.Sc),r.Rc(4,$7,66,43,"ng-template",null,2,r.Sc),r.Rc(6,z7,16,14,"ng-template",null,3,r.Sc),r.Rc(8,w8,61,38,"ng-template",null,4,r.Sc),r.Rc(10,V8,1,1,"ng-template",null,5,r.Sc),r.Rc(12,T8,2,3,"ng-template",null,6,r.Sc),r.Rc(14,E8,2,3,"ng-template",null,7,r.Sc),r.Rc(16,U8,2,3,"ng-template",null,8,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5);r.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"LineDefinitions"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.vc(12,R8))("isInactive",t.isInactive)}},directives:[q.a,X.v,X.x,X.y,x.u,X.w,X.A,ne.b,ie.c,ie.u,ie.k,ie.n,x.B,ie.v,ie.p,ie.x,Q.f,x.t,Q.b,Q.d,Q.e,Q.c,NM,PV,ie.q,cl,Ys,xn,Ux,GL,HP],pipes:[G.d,dg],encapsulation:2}),x8);function B8(e,t){if(1&e&&(r.Vb(0,"div",5),r.Vb(1,"span",6),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",7),r.Vb(4,"div",8),r.Qb(5,"t-auto-cell",9),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("LineDefinition",n,"TitlePlural")),r.Bb(3),r.sc("entity",i.c[n])}}function S8(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"LineDefinition"),"\n")}function _8(e,t){if(1&e&&(r.Vb(0,"span",10),r.Qb(1,"t-auto-cell",11),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function O8(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SavedByMe")," ")}var L8,F8=function(){return[]},A8=function(e){return{template:e,expression:"SavedById eq me"}},P8=function(e){return[e]},N8=function(e){return{SavedBy:e}},j8=((L8=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.expand="",o}return _createClass(n,[{key:"c",get:function(){return this.ws.LineDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||L8)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},L8.\u0275cmp=r.Jb({type:L8,selectors:[["t-line-definitions-master"]],features:[r.yb],decls:10,vars:19,consts:[["collection","LineDefinition","selectDefault","Code","selectForTiles","Code,TitlePlural","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","LineDefinition","path","Code",3,"entity"],[1,"text-truncate"],["collection","LineDefinition",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,B8,6,2,"ng-template",null,1,r.Sc),r.Rc(4,S8,2,3,"ng-template",null,2,r.Sc),r.Rc(6,_8,2,1,"ng-template",null,3,r.Sc),r.Rc(8,O8,2,3,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"LineDefinitions"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(12,F8))("filterDefinition",r.wc(17,N8,r.wc(15,P8,r.wc(13,A8,c))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),L8);function W8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-line-definitions-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function q8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-line-definitions-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var Q8,H8=((Q8=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return $8(e||Q8)},Q8.\u0275cmp=r.Jb({type:Q8,selectors:[["t-line-definitions-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:Q8}]),r.yb],decls:5,vars:6,consts:[["collection","LineDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,W8,2,3,"ng-template",null,1,r.Sc),r.Rc(3,q8,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,D8,j8],encapsulation:2}),Q8),$8=r.Xb(H8),G8=["lineDefinitionModal"];function z8(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function J8(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function K8(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}function Y8(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"TitleSingular",i.ws)||r.nc(2,1,"Untitled"))}}function X8(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",68),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleDefinition()})),r.Vb(1,"div",69),r.Qb(2,"fa-icon",70),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Definition"))}}function Z8(e,t){1&e&&r.Qb(0,"fa-icon",71)}function e9(e,t){1&e&&r.Rb(0)}var t9=function(){return{updateOn:"blur"}},n9=function(e,t){return{control:e,serverErrors:t}};function i9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",72),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",73,74),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Code=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Code")})),r.Ub(),r.Rc(6,e9,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Code)),r.Bb(2),r.Uc(r.nc(3,7,"Code")),r.Bb(2),r.sc("ngModel",o.Code)("ngModelOptions",r.vc(9,t9)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,n9,i,null==o.serverErrors?null:o.serverErrors.Code))}}function r9(e,t){1&e&&r.Rb(0)}function o9(e,t){1&e&&r.Rb(0)}function c9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",75),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",76,77),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular2")})),r.Ub(),r.Rc(6,o9,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular2)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular2)("ngModelOptions",r.vc(9,t9)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,n9,i,null==o.serverErrors?null:o.serverErrors.TitleSingular2))}}function a9(e,t){1&e&&r.Rb(0)}function l9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",78),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",79,80),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular3")})),r.Ub(),r.Rc(6,a9,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular3)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular3)("ngModelOptions",r.vc(9,t9)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,n9,i,null==o.serverErrors?null:o.serverErrors.TitleSingular3))}}function s9(e,t){1&e&&r.Rb(0)}function u9(e,t){1&e&&r.Rb(0)}function d9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",81),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",82,83),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural2")})),r.Ub(),r.Rc(6,u9,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural2)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural2)("ngModelOptions",r.vc(9,t9)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,n9,i,null==o.serverErrors?null:o.serverErrors.TitlePlural2))}}function b9(e,t){1&e&&r.Rb(0)}function f9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",84),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",85,86),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural3")})),r.Ub(),r.Rc(6,b9,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural3)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural3)("ngModelOptions",r.vc(9,t9)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,n9,i,null==o.serverErrors?null:o.serverErrors.TitlePlural3))}}function m9(e,t){1&e&&r.Rb(0)}function g9(e,t){1&e&&r.Rb(0)}function p9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",87),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"textarea",88,89),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Description2")})),r.Ub(),r.Rc(6,g9,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Description2)),r.Bb(2),r.Uc(r.nc(3,7,"Description")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.Description2)("ngModelOptions",r.vc(9,t9)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,n9,i,null==o.serverErrors?null:o.serverErrors.Description2))}}function h9(e,t){1&e&&r.Rb(0)}function v9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",90),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"textarea",91,92),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Description3")})),r.Ub(),r.Rc(6,h9,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Description3)),r.Bb(2),r.Uc(r.nc(3,7,"Description")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.Description3)("ngModelOptions",r.vc(9,t9)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,n9,i,null==o.serverErrors?null:o.serverErrors.Description3))}}function y9(e,t){1&e&&r.Qb(0,"fa-icon",71)}function I9(e,t){if(1&e&&(r.Vb(0,"option",93),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function C9(e,t){1&e&&r.Rb(0)}function w9(e,t){1&e&&r.Qb(0,"fa-icon",71)}function k9(e,t){1&e&&(r.Vb(0,"div",106),r.Tc(1," \u200c "),r.Ub())}function M9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",100),r.Vb(1,"div",101),r.Rc(2,w9,1,0,"fa-icon",18),r.Vb(3,"span",102),r.Tc(4),r.Ub(),r.Vb(5,"button",95),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(3).model;return r.lc().onConfigureLineDefinition(e,i)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",103),r.Ub(),r.Tc(8," \xa0 "),r.Vb(9,"button",95),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(3).model;return r.lc().onDeleteLineDefinition(e,i)})),r.mc(10,"translate"),r.Qb(11,"fa-icon",104),r.Ub(),r.Ub(),r.Rc(12,k9,2,0,"div",105),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(4);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(2),r.Vc(" ",o.ws.getMultilingualValue("LineDefinition",i.LineDefinitionId,"TitlePlural")," "),r.Bb(1),r.sc("title",r.nc(6,4,"Configure")),r.Bb(4),r.sc("title",r.nc(10,6,"Delete"))}}function V9(e,t){if(1&e&&(r.Vb(0,"span",107),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n," ")}}function T9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",94),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Tc(4,"\xa0 "),r.Vb(5,"button",95),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onCreateLineDefinition(e)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",96),r.Ub(),r.Vb(8,"div",97),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc(2).model;return r.lc().rowDrop(e,t.LineDefinitions)})),r.Rc(9,M9,13,8,"div",98),r.Ub(),r.Rc(10,V9,2,1,"span",99),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(2),r.Uc(r.nc(3,4,"DocumentDefinition_LineDefinitions")),r.Bb(3),r.sc("title",r.nc(6,6,"Create")),r.Bb(4),r.sc("ngForOf",i.LineDefinitions),r.Bb(1),r.sc("ngForOf",null==i.serverErrors?null:i.serverErrors.LineDefinitions)}}function E9(e,t){1&e&&r.Rb(0)}function U9(e,t){1&e&&r.Rb(0)}var x9=function(){return{prop:"PostingDate",propLower:"postingdate",fieldName:"Document_PostingDate"}};function R9(e,t){if(1&e&&(r.Tb(0),r.Rc(1,U9,1,0,"ng-container",25),r.Sb()),2&e){r.lc();var n=r.Fc(95);r.Bb(1),r.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",r.vc(2,x9))}}function D9(e,t){1&e&&r.Rb(0)}function B9(e,t){1&e&&r.Rb(0)}var S9=function(){return{prop:"Memo",propLower:"memo",fieldName:"Memo"}};function _9(e,t){if(1&e&&(r.Tb(0),r.Rc(1,B9,1,0,"ng-container",25),r.Sb()),2&e){r.lc();var n=r.Fc(95);r.Bb(1),r.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",r.vc(2,S9))}}function O9(e,t){1&e&&r.Rb(0)}function L9(e,t){1&e&&r.Rb(0)}function F9(e,t){if(1&e&&(r.Vb(0,"option",93),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function A9(e,t){1&e&&r.Rb(0)}var P9=function(e){return{0:e}};function N9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",108),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",109,110),r.hc("ngModelChange",(function(e){r.Ic(n);var i=t.prop;return r.lc(2).model[i+"Visibility"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Rc(7,F9,2,2,"option",35),r.Ub(),r.Rc(8,A9,1,0,"ng-container",25),r.Ub()}if(2&e){var i=t.prop,o=t.propLower,c=t.fieldName,a=r.Fc(6),l=r.lc(2).model,s=r.lc(),u=r.Fc(13);r.Gb("is-invalid",s.invalid(a,s.serverErrors(l,i+"Visibility"))),r.Bb(1),r.uc("for","",o,"visibility"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Visibility",r.wc(14,P9,r.nc(4,12,c||"Entity_"+i)))),r.Bb(3),r.uc("id","",o,"visibility"),r.sc("ngModel",l[i+"Visibility"]),r.Bb(2),r.sc("ngForOf",s.visibilityChoices),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.xc(16,n9,a,s.serverErrors(l,i+"Visibility")))}}function j9(e,t){1&e&&r.Qb(0,"fa-icon",71)}function W9(e,t){if(1&e&&(r.Vb(0,"option",93),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function q9(e,t){1&e&&r.Rb(0)}function Q9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",111),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(2).model;return r.lc().onIconClick(i,e)})),r.Qb(1,"fa-icon",112),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2).model;r.Gb("t-highlighted",i.value===o.MainMenuIcon),r.sc("title",i.value),r.Bb(1),r.sc("icon",i.value)}}function H9(e,t){1&e&&r.Rb(0)}function $9(e,t){1&e&&r.Rb(0)}function G9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",113),r.Vb(1,"div",114),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeHidden(e)})),r.Vb(2,"span",115),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"div",114),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeVisible(e)})),r.Vb(6,"span",115),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Ub(),r.Vb(9,"div",114),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeArchived(e)})),r.Vb(10,"span",115),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(1),r.Gb("t-pointer","Hidden"!==i.State)("t-less-dark","Hidden"===i.State),r.Bb(2),r.Uc(r.nc(4,15,"Definition_State_Hidden")),r.Bb(2),r.Gb("t-pointer","Visible"!==i.State)("t-less-dark","Visible"===i.State),r.Bb(2),r.Uc(r.nc(8,17,"Definition_State_Visible")),r.Bb(2),r.Gb("t-pointer","Archived"!==i.State)("t-less-dark","Archived"===i.State),r.Bb(2),r.Uc(r.nc(12,19,"Definition_State_Archived"))}}var z9=function(){return{prop:"Clearance",propLower:"clearance",fieldName:"Document_Clearance"}},J9=function(){return{prop:"Center",propLower:"center",fieldName:"Document_Center"}},K9=function(e){return{control:null,serverErrors:e}};function Y9(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",9),r.Rc(1,X8,6,4,"div",10),r.Vb(2,"div",11),r.Vb(3,"div",12),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleDefinition()})),r.Vb(4,"span"),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Vb(7,"div",13),r.Qb(8,"fa-icon",14),r.Ub(),r.Ub(),r.Vb(9,"div",15),r.Vb(10,"div",16),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("General")})),r.Tc(11," \xa0 "),r.Qb(12,"fa-icon",17),r.Tc(13),r.mc(14,"translate"),r.Rc(15,Z8,1,0,"fa-icon",18),r.Ub(),r.Vb(16,"div",19),r.Rc(17,i9,7,13,"div",20),r.Vb(18,"div",21),r.Vb(19,"label",22),r.Tc(20),r.mc(21,"translate"),r.Ub(),r.Vb(22,"input",23,24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitleSingular=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitleSingular")})),r.Ub(),r.Rc(24,r9,1,0,"ng-container",25),r.Ub(),r.Rc(25,c9,7,13,"div",20),r.Rc(26,l9,7,13,"div",20),r.Vb(27,"div",21),r.Vb(28,"label",26),r.Tc(29),r.mc(30,"translate"),r.Ub(),r.Vb(31,"input",27,28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitlePlural=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitlePlural")})),r.Ub(),r.Rc(33,s9,1,0,"ng-container",25),r.Ub(),r.Rc(34,d9,7,13,"div",20),r.Rc(35,f9,7,13,"div",20),r.Vb(36,"div",21),r.Vb(37,"label",29),r.Tc(38),r.mc(39,"translate"),r.Ub(),r.Vb(40,"textarea",30,31),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Description=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Description")})),r.Ub(),r.Rc(42,m9,1,0,"ng-container",25),r.Ub(),r.Rc(43,p9,7,13,"div",20),r.Rc(44,v9,7,13,"div",20),r.Ub(),r.Vb(45,"div",16),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Definition")})),r.Tc(46," \xa0 "),r.Qb(47,"fa-icon",17),r.Tc(48),r.mc(49,"translate"),r.Rc(50,y9,1,0,"fa-icon",18),r.Ub(),r.Vb(51,"div",19),r.Vb(52,"div",21),r.Vb(53,"label",32),r.Tc(54),r.mc(55,"translate"),r.Ub(),r.Vb(56,"select",33,34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.DocumentType=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Rc(58,I9,2,2,"option",35),r.Ub(),r.Rc(59,C9,1,0,"ng-container",25),r.Ub(),r.Rc(60,T9,11,8,"div",36),r.Rc(61,E9,1,0,"ng-container",25),r.Rc(62,R9,2,3,"ng-container",37),r.Rc(63,D9,1,0,"ng-container",25),r.Rc(64,_9,2,3,"ng-container",37),r.Vb(65,"div",21),r.Vb(66,"label",38),r.Tc(67),r.mc(68,"translate"),r.Ub(),r.Vb(69,"input",39,40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Prefix=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(71,O9,1,0,"ng-container",25),r.Ub(),r.Vb(72,"div",21),r.Vb(73,"label",41),r.Tc(74),r.mc(75,"translate"),r.Ub(),r.Vb(76,"input",42,43),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.CodeWidth=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(78,L9,1,0,"ng-container",25),r.Ub(),r.Vb(79,"div",44),r.Vb(80,"input",45),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.IsOriginalDocument=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(81,"label",46),r.Tc(82),r.mc(83,"translate"),r.Ub(),r.Ub(),r.Vb(84,"div",44),r.Vb(85,"input",47),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.HasBookkeeping=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(86,"label",48),r.Tc(87),r.mc(88,"translate"),r.Ub(),r.Ub(),r.Vb(89,"div",44),r.Vb(90,"input",49),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.HasAttachments=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(91,"label",50),r.Tc(92),r.mc(93,"translate"),r.Ub(),r.Ub(),r.Rc(94,N9,9,19,"ng-template",null,51,r.Sc),r.Ub(),r.Vb(96,"div",16),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Menu")})),r.Tc(97," \xa0 "),r.Qb(98,"fa-icon",17),r.Tc(99),r.mc(100,"translate"),r.Rc(101,j9,1,0,"fa-icon",18),r.Ub(),r.Vb(102,"div",19),r.Vb(103,"div",21),r.Vb(104,"label",52),r.Tc(105),r.mc(106,"translate"),r.Ub(),r.Vb(107,"select",53,54),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSection")})),r.Qb(109,"option",55),r.Rc(110,W9,2,2,"option",35),r.Ub(),r.Rc(111,q9,1,0,"ng-container",25),r.Ub(),r.Vb(112,"div",21),r.Vb(113,"label",56),r.Tc(114),r.mc(115,"translate"),r.Ub(),r.Vb(116,"div",57),r.Rc(117,Q9,2,4,"div",58),r.Ub(),r.Rc(118,H9,1,0,"ng-container",25),r.Ub(),r.Vb(119,"div",21),r.Vb(120,"label",59),r.Tc(121),r.mc(122,"translate"),r.Ub(),r.Vb(123,"input",60,61),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSortKey=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSortKey")})),r.Ub(),r.Rc(125,$9,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(126,"div",62),r.Vb(127,"div",63),r.Vb(128,"div",64),r.Vb(129,"span"),r.Tc(130),r.mc(131,"translate"),r.Ub(),r.Ub(),r.Rc(132,G9,13,21,"div",65),r.Ub(),r.Vb(133,"div",66),r.Qb(134,"t-documents-details",67),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(23),o=r.Fc(32),c=r.Fc(41),a=r.Fc(57),l=r.Fc(70),s=r.Fc(77),u=r.Fc(95),d=r.Fc(108),b=r.Fc(124),f=r.lc(),m=f.isEdit,g=f.model,p=r.lc(),h=r.Fc(13);r.Bb(1),r.sc("ngIf",m&&p.collapseDefinition),r.Bb(1),r.Gb("d-flex",m&&!p.collapseDefinition)("d-none",!m||p.collapseDefinition),r.Bb(3),r.Uc(r.nc(6,104,"Definition")),r.Bb(3),r.sc("flip",p.flipIcon(!1)),r.Bb(4),r.sc("flip",p.flipIcon(p.showSection("General")))("rotate",p.rotateIcon(p.showSection("General"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(14,106,"General")," "),r.Bb(2),r.sc("ngIf",p.sectionErrors("General",g)),r.Bb(1),r.Gb("d-none",!p.showSection("General")),r.Bb(1),r.sc("ngIf",!p.isSystem(g)),r.Bb(1),r.Gb("is-invalid",p.invalid(i,null==g.serverErrors?null:g.serverErrors.TitleSingular)),r.Bb(2),r.Uc(r.nc(21,108,"TitleSingular")+p.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",g.TitleSingular)("ngModelOptions",r.vc(138,t9)),r.Bb(2),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.xc(139,n9,i,null==g.serverErrors?null:g.serverErrors.TitleSingular)),r.Bb(1),r.sc("ngIf",null==p.ws.settings?null:p.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==p.ws.settings?null:p.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",p.invalid(o,null==g.serverErrors?null:g.serverErrors.TitlePlural)),r.Bb(2),r.Uc(r.nc(30,110,"TitlePlural")+p.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",g.TitlePlural)("ngModelOptions",r.vc(142,t9)),r.Bb(2),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.xc(143,n9,o,null==g.serverErrors?null:g.serverErrors.TitlePlural)),r.Bb(1),r.sc("ngIf",null==p.ws.settings?null:p.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==p.ws.settings?null:p.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",p.invalid(c,null==g.serverErrors?null:g.serverErrors.Description)),r.Bb(2),r.Uc(r.nc(39,112,"Description")+p.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",g.Description)("ngModelOptions",r.vc(146,t9)),r.Bb(2),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.xc(147,n9,c,null==g.serverErrors?null:g.serverErrors.Description)),r.Bb(1),r.sc("ngIf",null==p.ws.settings?null:p.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==p.ws.settings?null:p.ws.settings.TernaryLanguageId),r.Bb(3),r.sc("flip",p.flipIcon(p.showSection("Definition")))("rotate",p.rotateIcon(p.showSection("Definition"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(49,114,"Definition")," "),r.Bb(2),r.sc("ngIf",p.sectionErrors("Definition",g)),r.Bb(1),r.Gb("d-none",!p.showSection("Definition")),r.Bb(1),r.Gb("is-invalid",p.invalid(a,null==g||null==g.serverErrors?null:g.serverErrors.DocumentType)),r.Bb(2),r.Uc(r.nc(55,116,"DocumentDefinition_DocumentType")),r.Bb(2),r.sc("ngModel",g.DocumentType),r.Bb(2),r.sc("ngForOf",p.documentTypeChoices),r.Bb(1),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.xc(150,n9,a,null==g||null==g.serverErrors?null:g.serverErrors.DocumentType)),r.Bb(1),r.sc("ngIf",!p.isSystem(g)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(153,z9)),r.Bb(1),r.sc("ngIf",!p.isSystem(g)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(154,J9)),r.Bb(1),r.sc("ngIf",!p.isSystem(g)),r.Bb(1),r.Gb("is-invalid",p.invalid(l,null==g.serverErrors?null:g.serverErrors.Prefix)),r.Bb(2),r.Uc(r.nc(68,118,"DocumentDefinition_Prefix")),r.Bb(2),r.sc("ngModel",g.Prefix)("ngModelOptions",r.vc(155,t9)),r.Bb(2),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.xc(156,n9,l,null==g.serverErrors?null:g.serverErrors.Prefix)),r.Bb(1),r.Gb("is-invalid",p.invalid(s,null==g.serverErrors?null:g.serverErrors.CodeWidth)),r.Bb(2),r.Uc(r.nc(75,120,"DocumentDefinition_CodeWidth")),r.Bb(2),r.sc("ngModel",g.CodeWidth)("ngModelOptions",r.vc(159,t9)),r.Bb(2),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.xc(160,n9,s,null==g.serverErrors?null:g.serverErrors.CodeWidth)),r.Bb(2),r.sc("ngModel",g.IsOriginalDocument),r.Bb(2),r.Uc(r.nc(83,122,"DocumentDefinition_IsOriginalDocument")),r.Bb(3),r.sc("ngModel",g.HasBookkeeping),r.Bb(2),r.Uc(r.nc(88,124,"DocumentDefinition_HasBookkeeping")),r.Bb(3),r.sc("ngModel",g.HasAttachments),r.Bb(2),r.Uc(r.nc(93,126,"Definition_HasAttachments")),r.Bb(6),r.sc("flip",p.flipIcon(p.showSection("Menu")))("rotate",p.rotateIcon(p.showSection("Menu"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(100,128,"Menu")," "),r.Bb(2),r.sc("ngIf",p.sectionErrors("Menu",g)),r.Bb(1),r.Gb("d-none",!p.showSection("Menu")),r.Bb(3),r.Uc(r.nc(106,130,"MainMenuSection")),r.Bb(2),r.sc("ngModel",g.MainMenuSection),r.Bb(3),r.sc("ngForOf",p.allMainMenuSections),r.Bb(1),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.xc(163,n9,d,null==g.serverErrors?null:g.serverErrors.MainMenuSection)),r.Bb(3),r.Uc(r.nc(115,132,"MainMenuIcon")),r.Bb(3),r.sc("ngForOf",p.allMainMenuIcons),r.Bb(1),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.wc(166,K9,null==g.serverErrors?null:g.serverErrors.MainMenuIcon)),r.Bb(3),r.Uc(r.nc(122,134,"MainMenuSortKey")),r.Bb(2),r.sc("ngModel",g.MainMenuSortKey)("ngModelOptions",r.vc(168,t9)),r.Bb(2),r.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",r.xc(169,n9,b,null==g.serverErrors?null:g.serverErrors.MainMenuSortKey)),r.Bb(5),r.Uc(r.nc(131,136,"Preview")),r.Bb(2),r.sc("ngIf",!m),r.Bb(2),r.sc("previewDefinition",p.getForClient(g))}}function X9(e,t){if(1&e&&r.Rc(0,Y9,135,172,"div",8),2&e){var n=t.isEdit,i=r.lc();r.sc("ngIf",i.watchIsEdit(n))}}function Z9(e,t){if(1&e&&(r.Vb(0,"span",117),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function eee(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Z9,2,1,"span",116),r.Sb()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(1),r.sc("ngForOf",c.errors(i,o))}}function tee(e,t){if(1&e&&r.Rc(0,eee,2,1,"ng-container",37),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}function nee(e,t){1&e&&r.Rb(0)}function iee(e,t){1&e&&r.Rb(0)}function ree(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",118),r.Vb(1,"h5",119),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",120),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",121),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",122),r.Vb(8,"div",123),r.Vb(9,"div",124),r.Vb(10,"label",94),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"t-line-definitions-picker",125,126),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().lineDefinitionToEdit.LineDefinitionId=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(15,nee,1,0,"ng-container",25),r.Ub(),r.Vb(16,"div",124),r.Vb(17,"label",127),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"select",128,129),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().lineDefinitionToEdit.IsVisibleByDefault=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Vb(22,"option",130),r.Tc(23),r.mc(24,"translate"),r.Ub(),r.Vb(25,"option",131),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Ub(),r.Rc(28,iee,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Ub(),r.Vb(29,"div",132),r.Vb(30,"button",133),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(31,"fa-icon",134),r.Tc(32),r.mc(33,"translate"),r.Ub(),r.Vb(34,"button",135),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(35,"fa-icon",104),r.Tc(36),r.mc(37,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(14),o=r.Fc(21),c=r.lc(),a=r.Fc(13);r.Bb(2),r.Vc(" ",r.nc(3,18,"Configure")," "),r.Bb(7),r.Gb("is-invalid",c.invalid(i,null==c.lineDefinitionToEdit.serverErrors?null:c.lineDefinitionToEdit.serverErrors.LineDefinitionId)),r.Bb(2),r.Uc(r.nc(12,20,"DocumentDefinitionLineDefinition_LineDefinition")),r.Bb(2),r.sc("ngModel",c.lineDefinitionToEdit.LineDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(32,n9,i,null==c.lineDefinitionToEdit.serverErrors?null:c.lineDefinitionToEdit.serverErrors.LineDefinitionId)),r.Bb(1),r.Gb("is-invalid",c.invalid(o,null==c.lineDefinitionToEdit.serverErrors?null:c.lineDefinitionToEdit.serverErrors.IsVisibleByDefault)),r.Bb(2),r.Uc(r.nc(19,22,"DocumentDefinitionLineDefinition_IsVisibleByDefault")),r.Bb(2),r.sc("ngModel",c.lineDefinitionToEdit.IsVisibleByDefault),r.Bb(3),r.Uc(r.nc(24,24,"Yes")),r.Bb(3),r.Uc(r.nc(27,26,"No")),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(35,n9,o,null==c.lineDefinitionToEdit.serverErrors?null:c.lineDefinitionToEdit.serverErrors.IsVisibleByDefault)),r.Bb(2),r.sc("disabled",!c.canApplyLineDefinition),r.Bb(2),r.Vc(" \xa0",r.nc(33,28,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(37,30,"Cancel")," ")}}var oee,cee=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},aee=function(e,t,n){return[e,t,n]},lee=((oee=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var c;return _classCallCheck(this,n),(c=t.call(this)).workspace=e,c.api=i,c.translate=r,c.modalService=o,c.documentDefinitionsApi=c.api.documentDefinitionsApi(c.notifyDestruct$),c.expand="LineDefinitions.LineDefinition",c.create=function(){var e={};return c.ws.isPrimaryLanguage?e.TitleSingular=c.initialText:c.ws.isSecondaryLanguage?e.TitleSingular2=c.initialText:c.ws.isTernaryLanguage&&(e.TitleSingular3=c.initialText),e.PostingDateVisibility="Required",e.CenterVisibility="Required",e.ClearanceVisibility="None",e.MemoVisibility="Optional",e.IsOriginalDocument=!1,e.HasAttachments=!0,e.HasBookkeeping=!0,e.CodeWidth=4,e.DocumentType=2,e.LineDefinitions=[],e},c.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.LineDefinitions&&t.LineDefinitions.forEach((function(e){e.Id=null})),t}return console.error("Cloning a non existing item"),null},c.collapseDefinition=!1,c._isEdit=!1,c.isInactive=function(e){return null},c.isSystem=function(e){return!!e&&e.Id===c.ws.definitions.ManualJournalVouchersDefinitionId},c._sections={General:!1,Definition:!0,MainMenu:!1},c._currentModelModified=!1,c.onMakeHidden=function(e){e&&e.Id&&"Hidden"!==e.State&&c.documentDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeVisible=function(e){e&&e.Id&&"Visible"!==e.State&&c.documentDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeArchived=function(e){e&&e.Id&&"Archived"!==e.State&&c.documentDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.showMakeHidden=function(e){return!!e&&"Hidden"!==e.State},c.showMakeVisible=function(e){return!!e&&"Visible"!==e.State},c.showMakeArchived=function(e){return!!e&&"Archived"!==e.State},c.hasStatePermission=function(e){return c.ws.canDo("document-definitions","State",e.Id)},c.stateTooltip=function(e){return c.hasStatePermission(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.itemToEditHasChanged=!1,c.documentDefinitionsApi=c.api.documentDefinitionsApi(c.notifyDestruct$),c}return _createClass(n,[{key:"onToggleDefinition",value:function(){this.collapseDefinition=!this.collapseDefinition}},{key:"watchIsEdit",value:function(e){return this._isEdit!==e&&(this._isEdit=e),!0}},{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"onToggleSection",value:function(e){this._sections[e]=!this._sections[e]}},{key:"showSection",value:function(e){return this._sections[e]}},{key:"weakEntityErrors",value:function(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some((function(t){return Object(UI.b)(e.serverErrors[t])}))}},{key:"sectionErrors",value:function(e,t){var n=this;return"General"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.Code)||Object(UI.b)(t.serverErrors.Description)||Object(UI.b)(t.serverErrors.Description2)||Object(UI.b)(t.serverErrors.Description3)||Object(UI.b)(t.serverErrors.TitleSingular)||Object(UI.b)(t.serverErrors.TitleSingular2)||Object(UI.b)(t.serverErrors.TitleSingular3)||Object(UI.b)(t.serverErrors.TitlePlural)||Object(UI.b)(t.serverErrors.TitlePlural2)||Object(UI.b)(t.serverErrors.TitlePlural3)):"Definition"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.DocumentType)||Object(UI.b)(t.serverErrors.LineDefinitions)||Object(UI.b)(t.serverErrors.ClearanceVisibility)||Object(UI.b)(t.serverErrors.PostingDateVisibility)||Object(UI.b)(t.serverErrors.CenterVisibility)||Object(UI.b)(t.serverErrors.MemoVisibility)||Object(UI.b)(t.serverErrors.Prefix)||Object(UI.b)(t.serverErrors.CodeWidth)||Object(UI.b)(t.serverErrors.IsOriginalDocument)||Object(UI.b)(t.serverErrors.HasBookkeeping)||Object(UI.b)(t.serverErrors.HasAttachments))||!!t.LineDefinitions&&t.LineDefinitions.some((function(e){return n.weakEntityErrors(e)})):"MainMenu"===e&&!!t.serverErrors&&(Object(UI.b)(t.serverErrors.MainMenuIcon)||Object(UI.b)(t.serverErrors.MainMenuSection)||Object(UI.b)(t.serverErrors.MainMenuSortKey))}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"serverErrors",value:function(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}},{key:"onDefinitionChange",value:function(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}},{key:"getForClient",value:function(e){var t,n,i,r,o,c,a,l,s,u,d,b,f,m,g,p,h,v,y,I,C,w,k,M,V,T,E,U;if(!e)return null;var x=this.ws.definitions;if(this._currentModel!==e||this._currentModelModified||x!==this._getForClientDefinitions){this._currentModelModified=!1,this._currentModel=e,this._getForClientDefinitions=x;var R=Object.assign({},e);R.CodeWidth||(R.CodeWidth=4),"None"===R.PostingDateVisibility&&delete R.PostingDateVisibility,"None"===R.CenterVisibility&&delete R.CenterVisibility,"None"===R.MemoVisibility&&delete R.MemoVisibility,"None"===R.ClearanceVisibility&&delete R.ClearanceVisibility,R.CanReachState1=!1,R.CanReachState2=!1,R.CanReachState3=!1,R.HasWorkflow=!1,R.CustodianDefinitionIds=[],R.CustodyDefinitionIds=[],R.ParticipantDefinitionIds=[],R.ResourceDefinitionIds=[];var D,B={},S={},_={},O={},L={},F={},A={},P={},N={"CenterType eq 'BusinessUnit'":!0},j={},W={},q=_createForOfIteratorHelper(R.LineDefinitions.map((function(e){return x.Lines[e.LineDefinitionId]})).filter((function(e){return!!e&&!!e.Columns})));try{for(q.s();!(D=q.n()).done;){var Q,H=D.value,$=_createForOfIteratorHelper(H.Columns.filter((function(e){return 2===e.InheritsFromHeader})));try{for($.s();!(Q=$.n()).done;){var G=Q.value;if("PostingDate"===G.ColumnName)R.PostingDateIsCommonVisibility=!0,R.PostingDateVisibility=R.PostingDateVisibility||"Optional",R.PostingDateLabel||(R.PostingDateLabel=G.Label,R.PostingDateLabel2=G.Label2,R.PostingDateLabel3=G.Label3),G.RequiredState>(null!=(t=R.PostingDateRequiredState)?t:0)&&(R.PostingDateRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(n=R.PostingDateReadOnlyState)?n:0)&&(R.PostingDateReadOnlyState=G.ReadOnlyState);else if("CenterId"===G.ColumnName)R.CenterIsCommonVisibility=!0,R.CenterVisibility=R.CenterVisibility||"Optional",R.CenterLabel||(R.CenterLabel=G.Label,R.CenterLabel2=G.Label2,R.CenterLabel3=G.Label3),G.RequiredState>(null!=(i=R.CenterRequiredState)?i:0)&&(R.CenterRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(r=R.CenterReadOnlyState)?r:0)&&(R.CenterReadOnlyState=G.ReadOnlyState),G.Filter?null!=N&&(N[G.Filter]=!0):N=null;else if("Memo"===G.ColumnName)R.MemoIsCommonVisibility=!0,R.MemoVisibility=R.MemoVisibility||"Optional",R.MemoLabel||(R.MemoLabel=G.Label,R.MemoLabel2=G.Label2,R.MemoLabel3=G.Label3),G.RequiredState>(null!=(o=R.MemoRequiredState)?o:0)&&(R.MemoRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(c=R.MemoReadOnlyState)?c:0)&&(R.MemoReadOnlyState=G.ReadOnlyState);else if("CurrencyId"===G.ColumnName)R.CurrencyVisibility=!0,R.CurrencyLabel||(R.CurrencyLabel=G.Label,R.CurrencyLabel2=G.Label2,R.CurrencyLabel3=G.Label3),G.RequiredState>(null!=(a=R.CurrencyRequiredState)?a:0)&&(R.CurrencyRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(l=R.CurrencyReadOnlyState)?l:0)&&(R.CurrencyReadOnlyState=G.ReadOnlyState),G.Filter?null!=j&&(j[G.Filter]=!0):j=null;else if("CustodianId"===G.ColumnName){if(R.CustodianVisibility=!0,R.CustodianLabel||(R.CustodianLabel=G.Label,R.CustodianLabel2=G.Label2,R.CustodianLabel3=G.Label3),G.RequiredState>(null!=(s=R.CustodianRequiredState)?s:0)&&(R.CustodianRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(u=R.CustodianReadOnlyState)?u:0)&&(R.CustodianReadOnlyState=G.ReadOnlyState),G.EntryIndex<H.Entries.length){var z=H.Entries[G.EntryIndex];if(z.CustodianDefinitionIds&&0!==z.CustodianDefinitionIds.length){if(B){var J,K=_createForOfIteratorHelper(z.CustodianDefinitionIds);try{for(K.s();!(J=K.n()).done;)B[J.value]=!0}catch(ce){K.e(ce)}finally{K.f()}}}else B=null}G.Filter?L&&(L[G.Filter]=!0):L=null}else if("CustodyId"===G.ColumnName){if(R.CustodyVisibility=!0,R.CustodyLabel||(R.CustodyLabel=G.Label,R.CustodyLabel2=G.Label2,R.CustodyLabel3=G.Label3),G.RequiredState>(null!=(d=R.CustodyRequiredState)?d:0)&&(R.CustodyRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(b=R.CustodyReadOnlyState)?b:0)&&(R.CustodyReadOnlyState=G.ReadOnlyState),G.EntryIndex<H.Entries.length){var Y=H.Entries[G.EntryIndex];if(Y.CustodyDefinitionIds&&0!==Y.CustodyDefinitionIds.length){if(S){var X,Z=_createForOfIteratorHelper(Y.CustodyDefinitionIds);try{for(Z.s();!(X=Z.n()).done;)S[X.value]=!0}catch(ce){Z.e(ce)}finally{Z.f()}}}else S=null}G.Filter?F&&(F[G.Filter]=!0):F=null}else if("ParticipantId"===G.ColumnName){if(R.ParticipantVisibility=!0,R.ParticipantLabel||(R.ParticipantLabel=G.Label,R.ParticipantLabel2=G.Label2,R.ParticipantLabel3=G.Label3),G.RequiredState>(null!=(f=R.ParticipantRequiredState)?f:0)&&(R.ParticipantRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(m=R.ParticipantReadOnlyState)?m:0)&&(R.ParticipantReadOnlyState=G.ReadOnlyState),G.EntryIndex<H.Entries.length){var ee=H.Entries[G.EntryIndex];if(ee.ParticipantDefinitionIds&&0!==ee.ParticipantDefinitionIds.length){if(_){var te,ne=_createForOfIteratorHelper(ee.ParticipantDefinitionIds);try{for(ne.s();!(te=ne.n()).done;)_[te.value]=!0}catch(ce){ne.e(ce)}finally{ne.f()}}}else _=null}G.Filter?A&&(A[G.Filter]=!0):A=null}else if("ResourceId"===G.ColumnName){if(R.ResourceVisibility=!0,R.ResourceLabel||(R.ResourceLabel=G.Label,R.ResourceLabel2=G.Label2,R.ResourceLabel3=G.Label3),G.RequiredState>(null!=(g=R.ResourceRequiredState)?g:0)&&(R.ResourceRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(p=R.ResourceReadOnlyState)?p:0)&&(R.ResourceReadOnlyState=G.ReadOnlyState),G.EntryIndex<H.Entries.length){var ie=H.Entries[G.EntryIndex];if(ie.ResourceDefinitionIds&&0!==ie.ResourceDefinitionIds.length){if(O){var re,oe=_createForOfIteratorHelper(ie.ResourceDefinitionIds);try{for(oe.s();!(re=oe.n()).done;)O[re.value]=!0}catch(ce){oe.e(ce)}finally{oe.f()}}}else O=null}G.Filter?P&&(P[G.Filter]=!0):P=null}else"Quantity"===G.ColumnName?(R.QuantityVisibility=!0,R.QuantityLabel||(R.QuantityLabel=G.Label,R.QuantityLabel2=G.Label2,R.QuantityLabel3=G.Label3),G.RequiredState>(null!=(h=R.QuantityRequiredState)?h:0)&&(R.QuantityRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(v=R.QuantityReadOnlyState)?v:0)&&(R.QuantityReadOnlyState=G.ReadOnlyState)):"UnitId"===G.ColumnName?(R.UnitVisibility=!0,R.UnitLabel||(R.UnitLabel=G.Label,R.UnitLabel2=G.Label2,R.UnitLabel3=G.Label3),G.RequiredState>(null!=(y=R.UnitRequiredState)?y:0)&&(R.UnitRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(I=R.UnitReadOnlyState)?I:0)&&(R.UnitReadOnlyState=G.ReadOnlyState),G.Filter?W&&(W[G.Filter]=!0):W=null):"Time1"===G.ColumnName?(R.Time1Visibility=!0,R.Time1Label||(R.Time1Label=G.Label,R.Time1Label2=G.Label2,R.Time1Label3=G.Label3),G.RequiredState>(null!=(C=R.Time1RequiredState)?C:0)&&(R.Time1RequiredState=G.RequiredState),G.ReadOnlyState>(null!=(w=R.Time1ReadOnlyState)?w:0)&&(R.Time1ReadOnlyState=G.ReadOnlyState)):"Time2"===G.ColumnName?(R.Time2Visibility=!0,R.Time2Label||(R.Time2Label=G.Label,R.Time2Label2=G.Label2,R.Time2Label3=G.Label3),G.RequiredState>(null!=(k=R.Time2RequiredState)?k:0)&&(R.Time2RequiredState=G.RequiredState),G.ReadOnlyState>(null!=(M=R.Time2ReadOnlyState)?M:0)&&(R.Time2ReadOnlyState=G.ReadOnlyState)):"ExternalReference"===G.ColumnName?(R.ExternalReferenceVisibility=!0,R.ExternalReferenceLabel||(R.ExternalReferenceLabel=G.Label,R.ExternalReferenceLabel2=G.Label2,R.ExternalReferenceLabel3=G.Label3),G.RequiredState>(null!=(V=R.ExternalReferenceRequiredState)?V:0)&&(R.ExternalReferenceRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(T=R.ExternalReferenceReadOnlyState)?T:0)&&(R.ExternalReferenceReadOnlyState=G.ReadOnlyState)):"InternalReference"===G.ColumnName&&(R.InternalReferenceVisibility=!0,R.InternalReferenceLabel||(R.InternalReferenceLabel=G.Label,R.InternalReferenceLabel2=G.Label2,R.InternalReferenceLabel3=G.Label3),G.RequiredState>(null!=(E=R.InternalReferenceRequiredState)?E:0)&&(R.InternalReferenceRequiredState=G.RequiredState),G.ReadOnlyState>(null!=(U=R.InternalReferenceReadOnlyState)?U:0)&&(R.InternalReferenceReadOnlyState=G.ReadOnlyState))}}catch(ce){$.e(ce)}finally{$.f()}}}catch(ce){q.e(ce)}finally{q.f()}R.CustodianDefinitionIds=Object.keys(null!=B?B:{}).map((function(e){return+e})),R.CustodyDefinitionIds=Object.keys(null!=S?S:{}).map((function(e){return+e})),R.ParticipantDefinitionIds=Object.keys(null!=_?_:{}).map((function(e){return+e})),R.ResourceDefinitionIds=Object.keys(null!=O?O:{}).map((function(e){return+e})),R.CustodianFilter=see(L),R.CustodyFilter=see(F),R.ParticipantFilter=see(A),R.ResourceFilter=see(P),R.CenterFilter=see(N),R.CurrencyFilter=see(j),R.UnitFilter=see(W),"ManualJournalVoucher"===e.Code&&(R.PostingDateVisibility="Required",R.PostingDateIsCommonVisibility=!1,R.PostingDateLabel=null,R.PostingDateLabel2=null,R.PostingDateLabel3=null,R.CenterIsCommonVisibility=!1,R.CenterLabel=null,R.CenterLabel2=null,R.CenterLabel3=null,R.MemoVisibility="Optional",R.MemoIsCommonVisibility=!1,R.MemoLabel=null,R.MemoLabel2=null,R.MemoLabel3=null,R.CurrencyVisibility=!1,R.CustodianVisibility=!1,R.CustodyVisibility=!1,R.ParticipantVisibility=!1,R.ResourceVisibility=!1,R.QuantityVisibility=!1,R.UnitVisibility=!1,R.Time1Visibility=!1,R.Time2Visibility=!1,R.InternalReferenceVisibility=!1,R.ExternalReferenceVisibility=!1),this._getForClientResult=R}return this._getForClientResult}},{key:"onIconClick",value:function(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t,e.previousIndex,e.currentIndex)}},{key:"onInsertRow",value:function(e,t){var n=t?t():{};e.push(n)}},{key:"onItemToEditChange",value:function(){this.itemToEditHasChanged=!0}},{key:"onCreateLineDefinition",value:function(e){var t=this,n={IsVisibleByDefault:!0};this.lineDefinitionToEdit=n,this.modalService.open(this.lineDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(i){i&&(e.LineDefinitions.push(n),t.onDefinitionChange(e))}),(function(e){}))}},{key:"onConfigureLineDefinition",value:function(e,t){var n=this;this.itemToEditHasChanged=!1;var i=Object.assign({},t.LineDefinitions[e]);this.lineDefinitionToEdit=i,this.modalService.open(this.lineDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(r){r&&n.itemToEditHasChanged&&(t.LineDefinitions[e]=i,n.onDefinitionChange(t))}),(function(e){}))}},{key:"onDeleteLineDefinition",value:function(e,t){t.LineDefinitions.splice(e,1),this.onDefinitionChange(t)}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"visibilityChoices",get:function(){var e=this;return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:function(){return e.translate.instant("Visibility_None")}},{value:"Optional",name:function(){return e.translate.instant("Visibility_Optional")}},{value:"Required",name:function(){return e.translate.instant("Visibility_Required")}}]),this._visibilityChoices}},{key:"documentTypeChoices",get:function(){var e=Object(M3.a)(this.workspace,this.translate).properties.DocumentType;return Object(Si.c)(e)}},{key:"allMainMenuSections",get:function(){var e=Object(M3.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Si.c)(e)}},{key:"allMainMenuIcons",get:function(){var e=Object(M3.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Si.c)(e)}},{key:"canApplyLineDefinition",get:function(){return!!this.lineDefinitionToEdit&&!!this.lineDefinitionToEdit.LineDefinitionId}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||oee)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(X.t))},oee.\u0275cmp=r.Jb({type:oee,selectors:[["t-document-definitions-details"]],viewQuery:function(e,t){var n;1&e&&r.Oc(G8,!0),2&e&&r.Ec(n=r.ic())&&(t.lineDefinitionModal=n.first)},features:[r.yb],decls:16,vars:35,consts:[["collection","DocumentDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["lineDefinitionModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],["class","form-group",3,"is-invalid",4,"ngIf"],[1,"form-group"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text","required","",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],["for","documenttype",1,"small"],["id","documenttype",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["documenttypecontrol","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[4,"ngIf"],["for","prefix",1,"small"],["id","prefix","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["prefixmodel","ngModel"],["for","codewidth",1,"small"],["id","codewidth","type","number","min","1","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["codewidthmodel","ngModel"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","isoriginaldocument",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isoriginaldocument",1,"custom-control-label"],["type","checkbox","id","hasbookkeeping",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasbookkeeping",1,"custom-control-label"],["type","checkbox","id","hasattachments",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasattachments",1,"custom-control-label"],["unlabeledProp",""],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],[3,"value"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",2,"height","10rem",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["linedefinitionmodel","ngModel"],["for","isvisiblebydefault",1,"small"],["id","isvisiblebydefault",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["isvisiblebydefaultmodel","ngModel"],["value","true"],["value","false"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,z8,2,3,"ng-template",null,1,r.Sc),r.Rc(4,J8,2,3,"ng-template",null,2,r.Sc),r.Rc(6,K8,2,3,"ng-template",null,3,r.Sc),r.Rc(8,Y8,3,3,"ng-template",null,4,r.Sc),r.Rc(10,X9,1,1,"ng-template",null,5,r.Sc),r.Rc(12,tee,1,1,"ng-template",null,6,r.Sc),r.Rc(14,ree,38,38,"ng-template",null,7,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,11,"DocumentDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",a)("actions",r.yc(31,aee,r.Ac(13,cee,n,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(19,cee,i,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(25,cee,o,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)}},directives:[q.a,x.u,ne.b,ie.c,ie.u,ie.k,ie.n,x.B,ie.v,x.t,ie.q,ie.a,ie.p,ie.x,U1,Q.f,Q.b,Q.d,H8],pipes:[G.d],encapsulation:2}),oee);function see(e){var t;if(e){var n=Object.keys(e);if(1===n.length)return n[0];if(n.length>1)return null===(t=n.map((function(e){return"(".concat(e,")")})))||void 0===t?void 0:t.reduce((function(e,t){return"".concat(e," or ").concat(t)}))}return null}function uee(e,t){if(1&e&&(r.Vb(0,"div",11),r.Vb(1,"span",12),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",13),r.Vb(4,"div",14),r.Qb(5,"t-auto-cell",15),r.Ub(),r.Qb(6,"t-auto-cell",16),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("DocumentDefinition",n,"TitleSingular")),r.Bb(3),r.sc("entity",i.c[n]),r.Bb(1),r.sc("entity",i.c[n])}}function dee(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"DocumentDefinition"),"\n")}function bee(e,t){if(1&e&&(r.Vb(0,"span",17),r.Qb(1,"t-auto-cell",18),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function fee(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SavedByMe")," ")}function mee(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Hidden")," ")}function gee(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Visible")," ")}function pee(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Archived")," ")}function hee(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function vee(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function yee(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}var Iee,Cee=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},wee=function(e,t,n){return[e,t,n]},kee=function(e){return{template:e,expression:"SavedById eq me"}},Mee=function(e){return[e]},Vee=function(e){return{template:e,expression:"State eq 'Hidden'"}},Tee=function(e){return{template:e,expression:"State eq 'Visible'"}},Eee=function(e){return{template:e,expression:"State eq 'Archived'"}},Uee=function(e,t){return{SavedBy:e,State:t}},xee=((Iee=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.documentDefinitionsApi=o.api.documentDefinitionsApi(o.notifyDestruct$),o.expand="",o.onMakeHidden=function(e){return o.documentDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeHidden=function(e){return e.some((function(e){var t=o.ws.get("DocumentDefinition",e);return!!t&&"Hidden"!==t.State}))},o.onMakeVisible=function(e){return o.documentDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeVisible=function(e){return e.some((function(e){var t=o.ws.get("DocumentDefinition",e);return!!t&&"Visible"!==t.State}))},o.onMakeArchived=function(e){return o.documentDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeArchived=function(e){return e.some((function(e){var t=o.ws.get("DocumentDefinition",e);return!!t&&"Archived"!==t.State}))},o.hasStatePermission=function(e){return o.ws.canDo("document-definitions","State",null)},o.stateTooltip=function(e){return o.hasStatePermission(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.documentDefinitionsApi=o.api.documentDefinitionsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.DocumentDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||Iee)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},Iee.\u0275cmp=r.Jb({type:Iee,selectors:[["t-document-definitions-master"]],features:[r.yb],decls:22,vars:51,consts:[["collection","DocumentDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","DocumentDefinition","path","Code",3,"entity"],["collection","DocumentDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","DocumentDefinition",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,uee,7,3,"ng-template",null,1,r.Sc),r.Rc(4,dee,2,3,"ng-template",null,2,r.Sc),r.Rc(6,bee,2,1,"ng-template",null,3,r.Sc),r.Rc(8,fee,2,3,"ng-template",null,4,r.Sc),r.Rc(10,mee,2,3,"ng-template",null,5,r.Sc),r.Rc(12,gee,2,3,"ng-template",null,6,r.Sc),r.Rc(14,pee,2,3,"ng-template",null,7,r.Sc),r.Rc(16,hee,2,3,"ng-template",null,8,r.Sc),r.Rc(18,vee,2,3,"ng-template",null,9,r.Sc),r.Rc(20,yee,2,3,"ng-template",null,10,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"DocumentDefinitions"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.yc(30,wee,r.Ac(12,Cee,u,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(18,Cee,d,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(24,Cee,b,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",r.xc(48,Uee,r.wc(36,Mee,r.wc(34,kee,c)),r.yc(44,wee,r.wc(38,Vee,a),r.wc(40,Tee,l),r.wc(42,Eee,s))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),Iee);function Ree(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-document-definitions-details",4),r.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)})),r.Ub(),r.Ub()}if(2&e){var i=t.initialText,o=t.idString,c=r.lc();r.Bb(1),r.sc("initialText",i)("idString",o)("additionalSelect",c.additionalSelect)}}function Dee(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"t-document-definitions-master",5),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",o.showCreate)("filter",i)("additionalSelect",o.additionalSelect)}}var Bee,See=((Bee=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return _ee(e||Bee)},Bee.\u0275cmp=r.Jb({type:Bee,selectors:[["t-document-definitions-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:Bee}]),r.yb],decls:5,vars:6,consts:[["collection","DocumentDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,Ree,2,3,"ng-template",null,1,r.Sc),r.Rc(3,Dee,2,3,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2),i=r.Fc(4);r.sc("filter",t.filter)("masterTemplate",i)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},directives:[Xa,lee,xee],encapsulation:2}),Bee),_ee=r.Xb(See),Oee=["iframe"];function Lee(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Name",i.ws))}}function Fee(e,t){1&e&&r.Qb(0,"fa-icon",33)}function Aee(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",29),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleMetadata()})),r.Vb(1,"div",30),r.Qb(2,"fa-icon",31),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Rc(6,Fee,1,0,"fa-icon",32),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.Bb(2),r.sc("flip",o.flipIcon(!1)),r.Bb(2),r.Vc("",r.nc(5,3,"Metadata")," \xa0 "),r.Bb(2),r.sc("ngIf",o.metadataPaneErrors(i))}}function Pee(e,t){1&e&&r.Qb(0,"fa-icon",33)}function Nee(e,t){1&e&&r.Rb(0)}function jee(e,t){1&e&&r.Rb(0)}var Wee=function(){return{updateOn:"blur"}},qee=function(e,t){return{control:e,serverErrors:t}};function Qee(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",39),r.Vb(1,"label",65),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",66,67),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Name2=e})),r.Ub(),r.Rc(6,jee,1,0,"ng-container",43),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(3).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Name2)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.Name2)("ngModelOptions",r.vc(9,Wee)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,qee,i,null==o.serverErrors?null:o.serverErrors.Name2))}}function Hee(e,t){1&e&&r.Rb(0)}function $ee(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",39),r.Vb(1,"label",68),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",69,70),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Name3=e})),r.Ub(),r.Rc(6,Hee,1,0,"ng-container",43),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(3).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Name3)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.Name3)("ngModelOptions",r.vc(9,Wee)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,qee,i,null==o.serverErrors?null:o.serverErrors.Name3))}}function Gee(e,t){1&e&&r.Rb(0)}function zee(e,t){1&e&&r.Rb(0)}function Jee(e,t){1&e&&r.Rb(0)}function Kee(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",39),r.Vb(1,"label",71),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"textarea",72,73),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Description2=e})),r.Ub(),r.Rc(6,Jee,1,0,"ng-container",43),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(3).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Description2)),r.Bb(2),r.Uc(r.nc(3,7,"Description")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.Description2)("ngModelOptions",r.vc(9,Wee)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,qee,i,null==o.serverErrors?null:o.serverErrors.Description2))}}function Yee(e,t){1&e&&r.Rb(0)}function Xee(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",39),r.Vb(1,"label",74),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"textarea",75,76),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Description3=e})),r.Ub(),r.Rc(6,Yee,1,0,"ng-container",43),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(3).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Description3)),r.Bb(2),r.Uc(r.nc(3,7,"Description")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.Description3)("ngModelOptions",r.vc(9,Wee)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,qee,i,null==o.serverErrors?null:o.serverErrors.Description3))}}function Zee(e,t){1&e&&r.Rb(0)}function ete(e,t){if(1&e&&(r.Vb(0,"option",81),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function tte(e,t){1&e&&r.Rb(0)}function nte(e,t){if(1&e&&(r.Vb(0,"option",81),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function ite(e,t){1&e&&r.Rb(0)}function rte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",39),r.Vb(1,"label",82),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"select",83,84),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).model.DefinitionId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onDefinitionIdChange(e)})),r.Qb(6,"option",54),r.Rc(7,nte,2,2,"option",80),r.Ub(),r.Rc(8,ite,1,0,"ng-container",43),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(4).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.DefinitionId)),r.Bb(2),r.Uc(r.nc(3,7,"MarkupTemplate_DefinitionId")),r.Bb(2),r.sc("ngModel",o.DefinitionId),r.Bb(3),r.sc("ngForOf",c.allDefinitionIds(o)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(9,qee,i,null==o.serverErrors?null:o.serverErrors.DefinitionId))}}function ote(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",39),r.Vb(2,"label",77),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",78,79),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.Collection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onCollectionChange(e)})),r.Qb(7,"option",54),r.Rc(8,ete,2,2,"option",80),r.Ub(),r.Rc(9,tte,1,0,"ng-container",43),r.Ub(),r.Rc(10,rte,9,12,"div",44),r.Sb()}if(2&e){var i=r.Fc(6),o=r.lc(3).model,c=r.lc(),a=r.Fc(7);r.Bb(1),r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Collection)),r.Bb(2),r.Uc(r.nc(4,8,"MarkupTemplate_Collection")),r.Bb(2),r.sc("ngModel",o.Collection),r.Bb(3),r.sc("ngForOf",c.allCollections),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,qee,i,null==o.serverErrors?null:o.serverErrors.Collection)),r.Bb(1),r.sc("ngIf",c.showDefinitionIdSelector(o))}}function cte(e,t){1&e&&r.Rb(0)}function ate(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",85),r.Vb(1,"input",86),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.SupportsPrimaryLanguage=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(2,"label",87),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.Bb(1),r.sc("ngModel",i.SupportsPrimaryLanguage),r.Bb(2),r.Uc(r.nc(4,2,"MarkupTemplate_Supports")+o.ws.primaryPostfix)}}function lte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",85),r.Vb(1,"input",88),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.SupportsSecondaryLanguage=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(2,"label",89),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.Bb(1),r.sc("ngModel",i.SupportsSecondaryLanguage),r.Bb(2),r.Uc(r.nc(4,2,"MarkupTemplate_Supports")+o.ws.secondaryPostfix)}}function ste(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",85),r.Vb(1,"input",90),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).model.SupportsTernaryLanguage=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Vb(2,"label",91),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3).model,o=r.lc();r.Bb(1),r.sc("ngModel",i.SupportsTernaryLanguage),r.Bb(2),r.Uc(r.nc(4,2,"MarkupTemplate_Supports")+o.ws.ternaryPostfix)}}function ute(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",34),r.Vb(1,"div",35),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleMetadata()})),r.Vb(2,"div"),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Tc(6,"\xa0 "),r.Rc(7,Pee,1,0,"fa-icon",32),r.Ub(),r.Vb(8,"div",36),r.Qb(9,"fa-icon",37),r.Ub(),r.Ub(),r.Vb(10,"div",38),r.Vb(11,"div",39),r.Vb(12,"label",40),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Vb(15,"input",41,42),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Name=e})),r.Ub(),r.Rc(17,Nee,1,0,"ng-container",43),r.Ub(),r.Rc(18,Qee,7,13,"div",44),r.Rc(19,$ee,7,13,"div",44),r.Vb(20,"div",39),r.Vb(21,"label",45),r.Tc(22),r.Ub(),r.Vb(23,"input",46,47),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Code=e})),r.Ub(),r.Rc(25,Gee,1,0,"ng-container",43),r.Ub(),r.Vb(26,"div",39),r.Vb(27,"label",48),r.Tc(28),r.mc(29,"translate"),r.Ub(),r.Vb(30,"textarea",49,50),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Description=e})),r.Ub(),r.Rc(32,zee,1,0,"ng-container",43),r.Ub(),r.Rc(33,Kee,7,13,"div",44),r.Rc(34,Xee,7,13,"div",44),r.Vb(35,"div",39),r.Vb(36,"label",51),r.Tc(37),r.mc(38,"translate"),r.Ub(),r.Vb(39,"select",52,53),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Usage=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Qb(41,"option",54),r.Vb(42,"option",55),r.Tc(43),r.mc(44,"translate"),r.Ub(),r.Vb(45,"option",56),r.Tc(46),r.mc(47,"translate"),r.Ub(),r.Ub(),r.Rc(48,Zee,1,0,"ng-container",43),r.Ub(),r.Rc(49,ote,11,13,"ng-container",57),r.Vb(50,"div",39),r.Vb(51,"label",58),r.Tc(52),r.mc(53,"translate"),r.mc(54,"translate"),r.Ub(),r.Vb(55,"input",59,60),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.DownloadName=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(57,cte,1,0,"ng-container",43),r.Ub(),r.Rc(58,ate,5,4,"div",61),r.Rc(59,lte,5,4,"div",61),r.Rc(60,ste,5,4,"div",61),r.Vb(61,"div",62),r.Vb(62,"input",63),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.IsDeployed=e})),r.Ub(),r.Vb(63,"label",64),r.Tc(64),r.mc(65,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(16),o=r.Fc(24),c=r.Fc(31),a=r.Fc(40),l=r.Fc(56),s=r.lc(2).model,u=r.lc(),d=r.Fc(7);r.Gb("d-flex",!u.collapseMetadata)("d-none",u.collapseMetadata),r.Bb(4),r.Uc(r.nc(5,54,"Metadata")),r.Bb(3),r.sc("ngIf",u.metadataPaneErrors(s)),r.Bb(2),r.sc("flip",u.flipIcon(!1)),r.Bb(2),r.Gb("is-invalid",u.invalid(i,null==s.serverErrors?null:s.serverErrors.Name)),r.Bb(2),r.Uc(r.nc(14,56,"Name")+u.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",s.Name)("ngModelOptions",r.vc(72,Wee)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(73,qee,i,null==s.serverErrors?null:s.serverErrors.Name)),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",u.invalid(o,null==s.serverErrors?null:s.serverErrors.Code)),r.Bb(2),r.Uc("Code"),r.Bb(1),r.sc("ngModel",s.Code)("ngModelOptions",r.vc(76,Wee)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(77,qee,o,null==s.serverErrors?null:s.serverErrors.Code)),r.Bb(1),r.Gb("is-invalid",u.invalid(c,null==s.serverErrors?null:s.serverErrors.Description)),r.Bb(2),r.Uc(r.nc(29,58,"Description")+u.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",s.Description)("ngModelOptions",r.vc(80,Wee)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(81,qee,c,null==s.serverErrors?null:s.serverErrors.Description)),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",u.invalid(a,null==s.serverErrors?null:s.serverErrors.Usage)),r.Bb(2),r.Uc(r.nc(38,60,"MarkupTemplate_Usage")),r.Bb(2),r.sc("ngModel",s.Usage),r.Bb(4),r.Vc("",r.nc(44,62,"MarkupTemplate_Usage_QueryByFilter")," "),r.Bb(3),r.Uc(r.nc(47,64,"MarkupTemplate_Usage_QueryById")),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(84,qee,a,null==s.serverErrors?null:s.serverErrors.Usage)),r.Bb(1),r.sc("ngIf",u.showCollectionAndDefinition(s)),r.Bb(1),r.Gb("is-invalid",u.invalid(l,null==s.serverErrors?null:s.serverErrors.DownloadName)),r.Bb(2),r.Wc("",r.nc(53,66,"MarkupTemplate_DownloadName")," (",r.nc(54,68,"Visibility_Optional"),")"),r.Bb(3),r.sc("ngModel",s.DownloadName)("ngModelOptions",r.vc(87,Wee)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(88,qee,l,null==s.serverErrors?null:s.serverErrors.DownloadName)),r.Bb(1),r.sc("ngIf",!!u.ws.settings.SecondaryLanguageId||!!u.ws.settings.TernaryLanguageId),r.Bb(1),r.sc("ngIf",!!u.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",!!u.ws.settings.TernaryLanguageId),r.Bb(2),r.sc("ngModel",s.IsDeployed),r.Bb(2),r.Uc(r.nc(65,70,"MarkupTemplate_IsDeployed"))}}function dte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",29),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleEditor()})),r.Vb(1,"div",30),r.Qb(2,"fa-icon",31),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Editor"))}}function bte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",92),r.Vb(1,"div",35),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleEditor()})),r.Vb(2,"span"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"div",36),r.Qb(6,"fa-icon",37),r.Ub(),r.Ub(),r.Vb(7,"div",93),r.Vb(8,"textarea",94,95),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).model;return r.lc().onBodyChange(e,t)}))("keydown",(function(e){r.Ic(n);var t=r.Fc(9),i=r.lc(2).model;return r.lc().onKeydown(t,e,i)})),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model,o=r.lc();r.Gb("d-flex",!o.collapseEditor)("d-none",o.collapseEditor),r.Bb(3),r.Uc(r.nc(4,7,"Editor")),r.Bb(3),r.sc("flip",o.flipIcon(!1)),r.Bb(2),r.sc("ngModel",i.Body)}}function fte(e,t){1&e&&r.Qb(0,"t-spinner")}function mte(e,t){if(1&e&&(r.Vb(0,"div",96),r.Vb(1,"div",97),r.Vb(2,"span"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Tc(5,"\xa0\xa0 "),r.Rc(6,fte,1,0,"t-spinner",57),r.Ub(),r.Ub()),2&e){var n=r.lc(3);r.Bb(3),r.Uc(r.nc(4,2,"Preview")),r.Bb(3),r.sc("ngIf",n.showSpinner)}}function gte(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"t-form-group",100),r.mc(2,"translate"),r.Vb(3,"t-text-editor",101),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).filter=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onParameterChange(e)})),r.Ub(),r.Ub(),r.Vb(4,"t-form-group",100),r.mc(5,"translate"),r.Vb(6,"t-text-editor",101),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).orderby=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onParameterChange(e)})),r.Ub(),r.Ub(),r.Vb(7,"t-form-group",100),r.mc(8,"translate"),r.Vb(9,"t-decimal-editor",102),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).top=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onParameterChange(e)})),r.Ub(),r.Ub(),r.Vb(10,"t-form-group",100),r.mc(11,"translate"),r.Tc(12),r.Ub(),r.Sb()}if(2&e){var i=r.lc(4);r.Bb(1),r.sc("label",r.nc(2,13,"Filter")),r.Bb(2),r.sc("ngModel",i.filter)("ngModelOptions",r.vc(21,Wee)),r.Bb(1),r.sc("label",r.nc(5,15,"OrderBy")),r.Bb(2),r.sc("ngModel",i.orderby)("ngModelOptions",r.vc(22,Wee)),r.Bb(1),r.sc("label",r.nc(8,17,"Top")),r.Bb(2),r.sc("ngModel",i.top)("ngModelOptions",r.vc(23,Wee))("minDecimalPlaces",0)("minDecimalPlaces",0),r.Bb(1),r.sc("label",r.nc(11,19,"Skip")),r.Bb(2),r.Vc(" ",i.skip," ")}}function pte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-classifications-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function hte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-ifrs-concepts-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function vte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-account-types-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function yte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-accounts-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Ite(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-agents-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}var Cte=function(e){return[e]};function wte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-documents-picker",109),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(4).model,o=r.lc();r.sc("ngModel",o.id)("definitionIds",r.wc(3,Cte,i.DefinitionId))("showCreate",!1)}}function kte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",109),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(4).model,o=r.lc();r.sc("ngModel",o.id)("definitionIds",r.wc(3,Cte,i.DefinitionId))("showCreate",!1)}}function Mte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Vte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Tte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookups-picker",110),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(4).model,o=r.lc();r.sc("ngModel",o.id)("definitionId",i.DefinitionId)("showCreate",!1)}}function Ete(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-units-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Ute(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custodies-picker",109),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(4).model,o=r.lc();r.sc("ngModel",o.id)("definitionIds",r.wc(3,Cte,i.DefinitionId))("showCreate",!1)}}function xte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resources-picker",109),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(4).model,o=r.lc();r.sc("ngModel",o.id)("definitionIds",r.wc(3,Cte,i.DefinitionId))("showCreate",!1)}}function Rte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Dte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-roles-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Bte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-users-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Ste(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relation-definitions-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function _te(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custody-definitions-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Ote(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resource-definitions-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Lte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-lookup-definitions-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Fte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-document-definitions-picker",108),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(5).id=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(4).model;return r.lc().onParameterChange(e)})),r.Ub()}if(2&e){var i=r.lc(5);r.sc("ngModel",i.id)("showCreate",!1)}}function Ate(e,t){if(1&e&&(r.Vb(0,"div",111),r.Tc(1),r.Ub()),2&e){var n=r.lc(4).model;r.Bb(1),r.Vc(" TODO: control for '",n.Collection,"'' ")}}function Pte(e,t){if(1&e&&(r.Tb(0),r.Tb(1,103),r.Vb(2,"t-form-group",100),r.Rc(3,pte,1,2,"t-account-classifications-picker",104),r.Rc(4,hte,1,2,"t-ifrs-concepts-picker",104),r.Rc(5,vte,1,2,"t-account-types-picker",104),r.Rc(6,yte,1,2,"t-accounts-picker",104),r.Rc(7,Ite,1,2,"t-agents-picker",104),r.Rc(8,wte,1,5,"t-documents-picker",105),r.Rc(9,kte,1,5,"t-relations-picker",105),r.Rc(10,Mte,1,2,"t-currencies-picker",104),r.Rc(11,Vte,1,2,"t-entry-types-picker",104),r.Rc(12,Tte,1,3,"t-lookups-picker",106),r.Rc(13,Ete,1,2,"t-units-picker",104),r.Rc(14,Ute,1,5,"t-custodies-picker",105),r.Rc(15,xte,1,5,"t-resources-picker",105),r.Rc(16,Rte,1,2,"t-centers-picker",104),r.Rc(17,Dte,1,2,"t-roles-picker",104),r.Rc(18,Bte,1,2,"t-users-picker",104),r.Rc(19,Ste,1,2,"t-relation-definitions-picker",104),r.Rc(20,_te,1,2,"t-custody-definitions-picker",104),r.Rc(21,Ote,1,2,"t-resource-definitions-picker",104),r.Rc(22,Lte,1,2,"t-lookup-definitions-picker",104),r.Rc(23,Fte,1,2,"t-document-definitions-picker",104),r.Rc(24,Ate,2,1,"div",107),r.Ub(),r.Sb(),r.Sb()),2&e){var n=r.lc(3).model,i=r.lc();r.Bb(1),r.sc("ngSwitch",n.Collection),r.Bb(1),r.sc("label",i.detailsPickerLabel(n)),r.Bb(1),r.sc("ngSwitchCase","AccountClassification"),r.Bb(1),r.sc("ngSwitchCase","IfrsConcept"),r.Bb(1),r.sc("ngSwitchCase","AccountType"),r.Bb(1),r.sc("ngSwitchCase","Account"),r.Bb(1),r.sc("ngSwitchCase","Agent"),r.Bb(1),r.sc("ngSwitchCase","Document"),r.Bb(1),r.sc("ngSwitchCase","Relation"),r.Bb(1),r.sc("ngSwitchCase","Currency"),r.Bb(1),r.sc("ngSwitchCase","EntryType"),r.Bb(1),r.sc("ngSwitchCase","Lookup"),r.Bb(1),r.sc("ngSwitchCase","Unit"),r.Bb(1),r.sc("ngSwitchCase","Custody"),r.Bb(1),r.sc("ngSwitchCase","Resource"),r.Bb(1),r.sc("ngSwitchCase","Center"),r.Bb(1),r.sc("ngSwitchCase","Role"),r.Bb(1),r.sc("ngSwitchCase","User"),r.Bb(1),r.sc("ngSwitchCase","RelationDefinition"),r.Bb(1),r.sc("ngSwitchCase","CustodyDefinition"),r.Bb(1),r.sc("ngSwitchCase","ResourceDefinition"),r.Bb(1),r.sc("ngSwitchCase","LookupDefinition"),r.Bb(1),r.sc("ngSwitchCase","DocumentDefinition")}}function Nte(e,t){if(1&e&&(r.Vb(0,"div",98),r.Vb(1,"div",99),r.Rc(2,gte,13,24,"ng-container",57),r.Rc(3,Pte,25,23,"ng-container",57),r.Ub(),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(2),r.sc("ngIf",i.showQueryByFilterParams(n)),r.Bb(1),r.sc("ngIf",i.showQueryByIdParams(n))}}function jte(e,t){if(1&e&&(r.Vb(0,"div",22),r.Vb(1,"span",23),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(3);r.Bb(2),r.Uc(n.fileDownloadName)}}function Wte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"label",114),r.hc("click",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onLang(1,e)})),r.Qb(1,"input",115),r.Tc(2),r.Ub()}if(2&e){var i=r.lc(4);r.Gb("active",i.isLang(1)),r.tc("title",i.langDisplay(1)),r.Bb(2),r.Vc(" ",i.langDisplay(1)," ")}}function qte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"label",114),r.hc("click",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onLang(2,e)})),r.Qb(1,"input",115),r.Tc(2),r.Ub()}if(2&e){var i=r.lc(4);r.Gb("active",i.isLang(2)),r.tc("title",i.langDisplay(2)),r.Bb(2),r.Vc(" ",i.langDisplay(2)," ")}}function Qte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"label",114),r.hc("click",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onLang(3,e)})),r.Qb(1,"input",115),r.Tc(2),r.Ub()}if(2&e){var i=r.lc(4);r.Gb("active",i.isLang(3)),r.tc("title",i.langDisplay(3)),r.Bb(2),r.Vc(" ",i.langDisplay(3)," ")}}function Hte(e,t){if(1&e&&(r.Vb(0,"div",112),r.Rc(1,Wte,3,4,"label",113),r.Rc(2,qte,3,4,"label",113),r.Rc(3,Qte,3,4,"label",113),r.Ub()),2&e){var n=r.lc(2).model,i=r.lc();r.Bb(1),r.sc("ngIf",i.showLang(1,n)),r.Bb(1),r.sc("ngIf",i.showLang(2,n)),r.Bb(1),r.sc("ngIf",i.showLang(3,n))}}function $te(e,t){if(1&e&&(r.Vb(0,"t-error-message"),r.Tc(1),r.Ub()),2&e){var n=r.lc(4);r.Bb(1),r.Uc(n.error)}}function Gte(e,t){if(1&e&&(r.Vb(0,"div",116),r.Vb(1,"div",117),r.Rc(2,$te,2,1,"t-error-message",57),r.Ub(),r.Qb(3,"iframe",118,119),r.Ub()),2&e){var n=r.lc(3);r.Bb(2),r.sc("ngIf",n.error)}}function zte(e,t){if(1&e&&(r.Vb(0,"div",120),r.Qb(1,"fa-icon",121),r.Tc(2),r.Ub()),2&e){var n=r.lc(3);r.Bb(2),r.Vc(" \xa0 ",n.message," ")}}function Jte(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",5),r.Rc(1,Aee,7,5,"div",6),r.Rc(2,ute,66,91,"div",7),r.Rc(3,dte,6,4,"div",6),r.Vb(4,"div",8),r.Rc(5,bte,10,9,"div",9),r.Vb(6,"div",10),r.Rc(7,mte,7,4,"div",11),r.Vb(8,"div",12),r.Vb(9,"div",13),r.Rc(10,Nte,4,2,"div",14),r.Vb(11,"div",15),r.Vb(12,"div"),r.Vb(13,"button",16),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onPrint(e)})),r.Qb(14,"fa-icon",17),r.Vb(15,"span",18),r.Tc(16),r.mc(17,"translate"),r.Ub(),r.Ub(),r.Vb(18,"button",19),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDownload(e)})),r.Qb(19,"fa-icon",20),r.Vb(20,"span",18),r.Tc(21),r.mc(22,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Vb(23,"div"),r.Rc(24,jte,3,1,"div",21),r.Vb(25,"div",22),r.Vb(26,"span",23),r.Tc(27),r.Ub(),r.Ub(),r.Ub(),r.Vb(28,"div"),r.Vb(29,"button",24),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onRefresh(e)})),r.mc(30,"translate"),r.Qb(31,"fa-icon",25),r.Ub(),r.Rc(32,Hte,4,3,"div",26),r.Ub(),r.Ub(),r.Ub(),r.Rc(33,Gte,5,1,"div",27),r.Rc(34,zte,3,1,"ng-template",null,28,r.Sc),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(35),o=r.lc(),c=o.isEdit,a=o.model,l=r.lc();r.Bb(1),r.sc("ngIf",c&&l.collapseMetadata),r.Bb(1),r.sc("ngIf",c),r.Bb(1),r.sc("ngIf",c&&l.collapseEditor),r.Bb(2),r.sc("ngIf",c),r.Bb(1),r.Gb("col-8",c&&!l.collapseEditor)("col-12",!(c&&!l.collapseEditor)),r.Bb(1),r.sc("ngIf",c),r.Bb(3),r.sc("ngIf",l.showParametersSection(a)),r.Bb(3),r.sc("disabled",l.disablePrint),r.Bb(3),r.Vc("\xa0\xa0",r.nc(17,20,"Print"),""),r.Bb(2),r.sc("disabled",l.disableDownload),r.Bb(3),r.Vc("\xa0\xa0",r.nc(22,22,"Download"),""),r.Bb(3),r.sc("ngIf",l.fileDownloadName),r.Bb(3),r.Uc(l.fileSizeDisplay),r.Bb(2),r.tc("title",r.nc(30,24,"Refresh")),r.Bb(3),r.sc("ngIf",l.showLanguageToggle(a)),r.Bb(1),r.sc("ngIf",!l.message)("ngIfElse",i)}}function Kte(e,t){if(1&e&&r.Rc(0,Jte,36,26,"div",4),2&e){var n=t.model,i=r.lc();r.sc("ngIf",i.watch(n))}}function Yte(e,t){if(1&e&&(r.Vb(0,"span",123),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function Xte(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Yte,2,1,"span",122),r.Sb()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(1),r.sc("ngForOf",c.errors(i,o))}}function Zte(e,t){if(1&e&&r.Rc(0,Xte,2,1,"ng-container",57),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}var ene,tne=function(){return[]},nne=((ene=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.notifyFetch$=new U.a,o.markupChanged$=new U.a,o.markupTemplatesApi=o.api.markupTemplatesApi(o.notifyDestruct$),o.localState=new S.e,o._sections={Metadata:!1,Template:!0},o.expand="",o.collapseEditor=!1,o.collapseMetadata=!0,o.loading=!1,o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Name=o.initialText:o.ws.isSecondaryLanguage?e.Name2=o.initialText:o.ws.isTernaryLanguage&&(e.Name3=o.initialText),e.IsDeployed=!1,e.SupportsPrimaryLanguage=!0,e.SupportsSecondaryLanguage=!!o.workspace.currentTenant.settings.SecondaryLanguageId,e.SupportsTernaryLanguage=!!o.workspace.currentTenant.settings.TernaryLanguageId,e.Usage="QueryByFilter",e.Collection="Document",e.MarkupLanguage="text/html",e.Body=ine,e},o.isInactive=function(e){return null},o.markupTemplatesApi=o.api.markupTemplatesApi(o.notifyDestruct$),o}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this._subscriptions=new O.a;var t=this.markupChanged$.pipe(Object(Va.a)(300)),i=this.notifyFetch$,r=Object(vf.a)(t,i);this._subscriptions.add(r.pipe(Object(F.a)((function(t){return e.doFetch(t)}))).subscribe())}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this),this.url&&window.URL.revokeObjectURL(this.url)}},{key:"markupLanguageLookup",value:function(e){return Object(y3.a)(this.workspace,this.translate).properties.MarkupLanguage.format(e)}},{key:"onParameterChange",value:function(e){this.fetch(e)}},{key:"onDefinitionChange",value:function(e){this.fetch(e)}},{key:"onCollectionChange",value:function(e){this.id=null,e.DefinitionId=null,this.onDefinitionChange(e)}},{key:"onDefinitionIdChange",value:function(e){this.id=null,this.onDefinitionChange(e)}},{key:"resetState",value:function(){this.top=25,this.skip=0,this.filter=void 0,this.orderby=void 0,this.id=void 0,this.lang=1,this.blob=void 0,this.url&&window.URL.revokeObjectURL(this.url),this.url=void 0,this.iframe&&this.iframe.nativeElement.contentWindow.location.replace("about:blank"),this.contenType=void 0,this.fileSizeDisplay=void 0,this.error=void 0,this.message=void 0,this.loading=!1}},{key:"onBodyChange",value:function(e,t){t.Body!==e&&(t.Body=e,this.markupChanged$.next(t))}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"onToggleEditor",value:function(){this.collapseEditor=!this.collapseEditor}},{key:"onToggleMetadata",value:function(){this.collapseMetadata=!this.collapseMetadata}},{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"onToggleSection",value:function(e){this._sections[e]=!this._sections[e]}},{key:"showSection",value:function(e){return this._sections[e]}},{key:"metadataPaneErrors",value:function(e){return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.Name)||Object(UI.b)(e.serverErrors.Name2)||Object(UI.b)(e.serverErrors.Name3)||Object(UI.b)(e.serverErrors.Code)||Object(UI.b)(e.serverErrors.Description)||Object(UI.b)(e.serverErrors.Description2)||Object(UI.b)(e.serverErrors.Description3)||Object(UI.b)(e.serverErrors.Usage)||Object(UI.b)(e.serverErrors.Collection)||Object(UI.b)(e.serverErrors.DefinitionId)||Object(UI.b)(e.serverErrors.DownloadName)||Object(UI.b)(e.serverErrors.SupportsPrimaryLanguage)||Object(UI.b)(e.serverErrors.SupportsSecondaryLanguage)||Object(UI.b)(e.serverErrors.SupportsTernaryLanguage))}},{key:"templateSectionErrors",value:function(e){return!!e.serverErrors&&Object(UI.b)(e.serverErrors.Body)}},{key:"fetch",value:function(e){this.notifyFetch$.next(e)}},{key:"doFetch",value:function(e){var t,n=this,i=this.ws.settings,r=1===this.lang&&e.SupportsPrimaryLanguage?i.PrimaryLanguageId:2===this.lang&&e.SupportsSecondaryLanguage?i.SecondaryLanguageId:3===this.lang&&e.SupportsTernaryLanguage?i.TernaryLanguageId:e.SupportsPrimaryLanguage?i.PrimaryLanguageId:e.SupportsSecondaryLanguage?i.SecondaryLanguageId:e.SupportsTernaryLanguage?i.TernaryLanguageId:i.PrimaryLanguageId;if(this.error=void 0,this.message=void 0,!e)return this.loading=!1,Object(L.a)();if("QueryById"===e.Usage){if(!e.Collection)return this.message="Please specify the collection in Metadata.",this.loading=!1,Object(L.a)();if(this.showDefinitionIdSelector(e)&&!e.DefinitionId)return this.message="Please specify the definition in Metadata.",this.loading=!1,Object(L.a)();if(!this.id)return this.message="Please specify the ".concat(this.detailsPickerLabel(e)," above"),this.loading=!1,Object(L.a)();t=this.markupTemplatesApi.previewById(this.id,e,{culture:r})}else if("QueryByFilter"===e.Usage){if(!e.Collection)return this.message="Please specify the collection",this.loading=!1,Object(L.a)();t=this.markupTemplatesApi.previewByFilter(e,{culture:r,filter:this.filter,orderby:this.orderby,top:this.top,skip:this.skip})}else t=this.markupTemplatesApi.preview(e,{culture:r});return this.loading=!0,t.pipe(Object(P.a)((function(t){n.fileDownloadName=t.DownloadName;var i=new Blob([t.Body],{type:e.MarkupLanguage});n.blob=i,n.url&&window.URL.revokeObjectURL(n.url),n.url=window.URL.createObjectURL(i)+"#toolbar=0&navpanes=0&scrollbar=0",n.iframe.nativeElement.contentWindow.location.replace(n.url),n.contenType=e.MarkupLanguage,n.fileSizeDisplay=Object(W.j)(i.size),n.loading=!1})),Object(j.a)((function(e){return n.error=e.error||"Unknown error.",n.loading=!1,Object(L.a)(null)})))}},{key:"showDefinitionIdSelector",value:function(e){return!!e&&!!e.Collection&&!!Si.h[e.Collection](this.workspace,this.translate,null).definitionIds}},{key:"allDefinitionIds",value:function(e){var t=this;if(e&&e.Collection){var n=Si.h[e.Collection],i=n(this.workspace,this.translate,null);return i.definitionIds&&!i.definitionIdsArray&&(i.definitionIdsArray=i.definitionIds.map((function(e){return{value:e,name:n(t.workspace,t.translate,e).titlePlural}}))),i.definitionIdsArray}return null}},{key:"showParametersSection",value:function(e){return!!e.Usage}},{key:"onPrint",value:function(e){Object(W.r)(this.blob)}},{key:"onDownload",value:function(e){this.blob&&Object(W.i)(this.blob,this.fileDownloadName)}},{key:"onRefresh",value:function(e){this.loading||this.fetch(e)}},{key:"showLanguageToggle",value:function(e){return(this.showLang(1,e)?1:0)+(this.showLang(2,e)?1:0)+(this.showLang(3,e)?1:0)>1}},{key:"langDisplay",value:function(e){return 1===e?this.ws.settings.PrimaryLanguageName:2===e?this.ws.settings.SecondaryLanguageName:3===e?this.ws.settings.TernaryLanguageName:""}},{key:"onLang",value:function(e,t){this.lang!==e&&(this.lang=e,this.onDefinitionChange(t))}},{key:"isLang",value:function(e){return this.lang===e}},{key:"showLang",value:function(e,t){return 1===e&&!!t.SupportsPrimaryLanguage||2===e&&!!t.SupportsSecondaryLanguage&&!!this.ws.settings.SecondaryLanguageId||3===e&&!!t.SupportsTernaryLanguage&&!!this.ws.settings.TernaryLanguageId}},{key:"showQueryByFilterParams",value:function(e){return"QueryByFilter"===e.Usage}},{key:"showQueryByIdParams",value:function(e){return"QueryById"===e.Usage}},{key:"showCollectionAndDefinition",value:function(e){return"QueryById"===e.Usage||"QueryByFilter"===e.Usage}},{key:"watch",value:function(e){var t=this.state.detailsState;return t.modelCollection!==(e.Collection||null)||t.modelDefinitionId!==(e.DefinitionId||null)?(t.modelCollection=e.Collection||null,t.modelDefinitionId=e.DefinitionId||null,this.resetState(),this.fetch(e)):this.loading||this.error||this.message||this.blob?this._currentModel!==e&&this.fetch(e):this.fetch(e),this._currentModel=e,!0}},{key:"detailsPickerLabel",value:function(e){return e&&e.Collection?(0,Si.h[e.Collection])(this.workspace,this.translate,e.DefinitionId).titleSingular():""}},{key:"onKeydown",value:function(e,t,n){Object(W.p)(e,t,(function(e){return n.Body=e}))}},{key:"state",get:function(){return this.isPopupMode?(this.localState||(this.localState=new S.e),this.localState):this.globalState}},{key:"globalState",get:function(){var e="markup-templates";return this.workspace.current.mdState[e]||(this.workspace.current.mdState[e]=new S.e),this.workspace.current.mdState[e]}},{key:"markupLanguageChoices",get:function(){var e=Object(y3.a)(this.workspace,this.translate).properties.MarkupLanguage;return Object(Si.c)(e)}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"allCollections",get:function(){return Object(Si.a)(this.workspace,this.translate)}},{key:"disablePrint",get:function(){return!this.blob}},{key:"disableDownload",get:function(){return!this.blob}},{key:"showRefresh",get:function(){return!this.loading}},{key:"showSpinner",get:function(){return this.loading}},{key:"filter",get:function(){return this.state.detailsState.filter},set:function(e){this.state.detailsState.filter=e}},{key:"orderby",get:function(){return this.state.detailsState.orderby},set:function(e){this.state.detailsState.orderby=e}},{key:"top",get:function(){return this.state.detailsState.top},set:function(e){this.state.detailsState.top=e}},{key:"skip",get:function(){return this.state.detailsState.skip},set:function(e){this.state.detailsState.skip=e}},{key:"id",get:function(){return this.state.detailsState.id},set:function(e){this.state.detailsState.id=e}},{key:"lang",get:function(){return this.state.detailsState.lang},set:function(e){this.state.detailsState.lang=e}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||ene)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},ene.\u0275cmp=r.Jb({type:ene,selectors:[["t-markup-templates-details"]],viewQuery:function(e,t){var n;1&e&&r.Yc(Oee,!0),2&e&&r.Ec(n=r.ic())&&(t.iframe=n.first)},features:[r.yb],decls:8,vars:13,consts:[["collection","MarkupTemplate","layout","full-screen","theme","dark",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["class","h-100 d-flex",4,"ngIf"],[1,"h-100","d-flex"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],["class","t-less-dark h-100 flex-column t-studio-pane",3,"d-flex","d-none",4,"ngIf"],[1,"h-100","d-flex","flex-grow-1"],["class","t-less-dark h-100 t-studio-pane flex-column p-0 col-4",3,"d-flex","d-none",4,"ngIf"],[1,"d-flex","flex-column","p-0"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"d-flex","flex-column","t-rest-of-screen","bg-white"],[1,"row","mx-0","border-bottom","bg-white"],["class","mx-auto mb-3 w-100","style","max-width: 700px",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","print"],[1,"d-none","d-md-inline"],[1,"btn","btn-primary","btn-light","text-primary","btn-sm","t-toolbar-button","t-white-button",3,"disabled","click"],["icon","download"],["class","d-inline small mx-1 text-muted",4,"ngIf"],[1,"d-inline","small","mx-1","text-muted"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","sync-alt"],["class","btn-group btn-group-toggle t-toolbar-button",4,"ngIf"],["class","t-rest-of-screen bg-white",4,"ngIf","ngIfElse"],["messageTemplate",""],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],["icon","exclamation",1,"t-light-danger","mx-1"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"p-2","t-studio-section","flex-wrap","overflow-auto"],[1,"form-group"],["for","name",1,"small"],["id","name","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],["for","usage",1,"small"],["id","usage",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["usage","ngModel"],["value",""],["value","QueryByFilter"],["value","QueryById"],[4,"ngIf"],["for","downloadName",1,"small"],["id","downloadName","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["downloadName","ngModel"],["class","custom-control custom-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","mt-3"],["type","checkbox","id","isdeployed",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isdeployed",1,"custom-control-label"],["for","name2",1,"small"],["id","name2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name2","ngModel"],["for","name3",1,"small"],["id","name3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name3","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],["for","collection",1,"small"],["id","collection","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["collection","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","definitionId",1,"small"],["id","definitionId",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionId","ngModel"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","supportsPrimaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsPrimaryLanguage",1,"custom-control-label"],["type","checkbox","id","supportsSecondaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsSecondaryLanguage",1,"custom-control-label"],["type","checkbox","id","supportsTernaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsTernaryLanguage",1,"custom-control-label"],[1,"t-less-dark","h-100","t-studio-pane","flex-column","p-0","col-4"],[1,"flex-grow-1"],["spellcheck","false",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","border-0","t-code",3,"ngModel","ngModelChange","keydown"],["textarea",""],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],[1,"row","m-0","px-0","px-lg-1","py-1"],[1,"t-form-group","col",3,"label"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","minDecimalPlaces","ngModelChange"],[3,"ngSwitch"],[3,"ngModel","showCreate","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionIds","showCreate","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionId","showCreate","ngModelChange",4,"ngSwitchCase"],["class","text-danger font-weight-bold",4,"ngSwitchDefault"],[3,"ngModel","showCreate","ngModelChange"],[3,"ngModel","definitionIds","showCreate","ngModelChange"],[3,"ngModel","definitionId","showCreate","ngModelChange"],[1,"text-danger","font-weight-bold"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],["class","btn btn-sm t-pointer btn-light",3,"active","title","click",4,"ngIf"],[1,"btn","btn-sm","t-pointer","btn-light",3,"title","click"],["type","radio","name","searchView"],[1,"t-rest-of-screen","bg-white"],[1,"w-100",2,"position","absolute"],["sandbox","",1,"p-0","border-0","w-100","h-100","d-block"],["iframe",""],[1,"w-100","p-3","px-4"],["icon","info-circle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,Lee,2,1,"ng-template",null,1,r.Sc),r.Rc(4,Kte,1,1,"ng-template",null,2,r.Sc),r.Rc(6,Zte,1,1,"ng-template",null,3,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5);r.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"MarkupTemplates"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.vc(12,tne))("isInactive",t.isInactive)}},directives:[q.a,x.u,ne.b,ie.c,ie.k,ie.n,x.B,ie.v,ie.p,ie.x,ie.a,ie.u,x.t,ye.a,Ce.a,we.a,xn,x.y,x.z,x.A,OM,n3,NM,lQ,tf,w3,lf,Zu,PV,bb,NC,YW,RW,rd,cl,Ys,_V,GL,HP,v_,See,ke.a],pipes:[G.d],encapsulation:2}),ene),ine='<!DOCTYPE html>\n<html lang="{{ $Lang }}">\n<head>\n    <meta charset="UTF-8">\n    <title>{{ \'Document\' }}</title>\n    <style>\n\n        /* Printing CSS: Remove if not for printing */\n        @media screen {\n            body {\n                background-color: #F9F9F9;\n            }\n            .page {\n                margin-left: auto;\n                margin-right: auto;\n                margin-top: 1rem;\n                margin-bottom: 1rem;\n                border: 1px solid lightgrey;\n                background-color: white;\n                box-shadow: rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n                box-sizing: border-box;\n                width: 210mm;\n                min-height: 297mm;\n                padding: 0.5in;\n            }\n        }\n        @page {\n            margin: 0.5in;\n            size: A4 Portrait;\n        }\n        .page {\n            break-after: page;\n        }\n        /* End Printing CSS */\n        \n        * {\n            font-family: sans-serif;\n            box-sizing: border-box;\n        }\n        \n        body {\n            margin: 0;\n        }\n        \n        body.rtl {\n            direction: rtl;\n        }\n        \n        /* More CSS Here */\n    \n    </style>\n</head>\n<body class="{{ IF($IsRtl, \'rtl\', \'\') }}">\n    <div class="page">\n        \x3c!-- HTML Template Here --\x3e\n        \n    </div>\n</body>\n</html>',rne=n("EFu8"),one=["reportDefinitionModal"],cne=["scriptModal"];function ane(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function lne(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function sne(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}function une(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"TitleSingular",i.ws)||r.nc(2,1,"Untitled"))}}function dne(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",73),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleDefinition()})),r.Vb(1,"div",74),r.Qb(2,"fa-icon",75),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Definition"))}}function bne(e,t){1&e&&r.Qb(0,"fa-icon",76)}function fne(e,t){1&e&&r.Rb(0)}function mne(e,t){1&e&&r.Rb(0)}function gne(e,t){1&e&&r.Rb(0)}var pne=function(){return{updateOn:"blur"}},hne=function(e,t){return{control:e,serverErrors:t}};function vne(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",77),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",78,79),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular2")})),r.Ub(),r.Rc(6,gne,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular2)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular2)("ngModelOptions",r.vc(9,pne)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,hne,i,null==o.serverErrors?null:o.serverErrors.TitleSingular2))}}function yne(e,t){1&e&&r.Rb(0)}function Ine(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",80),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",81,82),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitleSingular3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitleSingular3")})),r.Ub(),r.Rc(6,yne,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitleSingular3)),r.Bb(2),r.Uc(r.nc(3,7,"TitleSingular")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitleSingular3)("ngModelOptions",r.vc(9,pne)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,hne,i,null==o.serverErrors?null:o.serverErrors.TitleSingular3))}}function Cne(e,t){1&e&&r.Rb(0)}function wne(e,t){1&e&&r.Rb(0)}function kne(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",83),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",84,85),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural2")})),r.Ub(),r.Rc(6,wne,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural2)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural2)("ngModelOptions",r.vc(9,pne)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,hne,i,null==o.serverErrors?null:o.serverErrors.TitlePlural2))}}function Mne(e,t){1&e&&r.Rb(0)}function Vne(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",86),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",87,88),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.TitlePlural3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"TitlePlural3")})),r.Ub(),r.Rc(6,Mne,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.TitlePlural3)),r.Bb(2),r.Uc(r.nc(3,7,"TitlePlural")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.TitlePlural3)("ngModelOptions",r.vc(9,pne)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,hne,i,null==o.serverErrors?null:o.serverErrors.TitlePlural3))}}function Tne(e,t){1&e&&r.Qb(0,"fa-icon",76)}function Ene(e,t){1&e&&r.Rb(0)}function Une(e,t){1&e&&r.Rb(0)}function xne(e,t){1&e&&r.Rb(0)}function Rne(e,t){1&e&&r.Rb(0)}function Dne(e,t){1&e&&r.Rb(0)}function Bne(e,t){1&e&&r.Rb(0)}function Sne(e,t){1&e&&r.Rb(0)}function _ne(e,t){1&e&&r.Rb(0)}function One(e,t){1&e&&r.Rb(0)}function Lne(e,t){1&e&&r.Rb(0)}function Fne(e,t){1&e&&r.Rb(0)}function Ane(e,t){1&e&&r.Rb(0)}function Pne(e,t){1&e&&r.Rb(0)}function Nne(e,t){1&e&&r.Rb(0)}function jne(e,t){1&e&&r.Rb(0)}function Wne(e,t){1&e&&r.Rb(0)}function qne(e,t){1&e&&r.Rb(0)}function Qne(e,t){1&e&&r.Rb(0)}function Hne(e,t){1&e&&r.Rb(0)}function $ne(e,t){1&e&&r.Rb(0)}function Gne(e,t){1&e&&r.Rb(0)}function zne(e,t){1&e&&r.Rb(0)}function Jne(e,t){1&e&&r.Rb(0)}function Kne(e,t){1&e&&r.Rb(0)}function Yne(e,t){1&e&&r.Rb(0)}function Xne(e,t){1&e&&r.Rb(0)}function Zne(e,t){1&e&&r.Rb(0)}function eie(e,t){1&e&&r.Rb(0)}function tie(e,t){1&e&&r.Rb(0)}function nie(e,t){1&e&&r.Rb(0)}function iie(e,t){1&e&&r.Rb(0)}function rie(e,t){1&e&&r.Rb(0)}function oie(e,t){1&e&&r.Rb(0)}var cie=function(e){return{0:e}};function aie(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",52),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-relation-definitions-picker",89,90),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Relation1DefinitionId=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,oie,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2).model,c=r.lc(),a=r.Fc(13);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Relation1DefinitionId)),r.Bb(2),r.Uc(r.oc(3,6,"Field0Definition",r.wc(11,cie,r.nc(4,9,"Entity_Relation1")))),r.Bb(3),r.sc("ngModel",o.Relation1DefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(13,hne,i,null==o.serverErrors?null:o.serverErrors.Relation1DefinitionId))}}function lie(e,t){1&e&&r.Rb(0)}function sie(e,t){1&e&&r.Rb(0)}function uie(e,t){1&e&&r.Rb(0)}function die(e,t){if(1&e&&(r.Vb(0,"option",91),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function bie(e,t){1&e&&r.Rb(0)}function fie(e,t){if(1&e&&(r.Vb(0,"option",91),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function mie(e,t){1&e&&r.Rb(0)}function gie(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",92),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",93,94),r.hc("ngModelChange",(function(e){r.Ic(n);var i=t.prop;return r.lc(2).model[i+"Visibility"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e)})),r.Rc(7,fie,2,2,"option",36),r.Ub(),r.Rc(8,mie,1,0,"ng-container",25),r.Ub()}if(2&e){var i=t.prop,o=t.propLower,c=t.fieldName,a=r.Fc(6),l=r.lc(2).model,s=r.lc(),u=r.Fc(13);r.Gb("is-invalid",s.invalid(a,s.serverErrors(l,i+"Visibility"))),r.Bb(1),r.uc("for","",o,"visibility"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Visibility",r.wc(14,cie,r.nc(4,12,c||"Entity_"+i)))),r.Bb(3),r.uc("id","",o,"visibility"),r.sc("ngModel",l[i+"Visibility"]),r.Bb(2),r.sc("ngForOf",s.visibilityChoices),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.xc(16,hne,a,s.serverErrors(l,i+"Visibility")))}}function pie(e,t){1&e&&r.Rb(0)}function hie(e,t){1&e&&r.Rb(0)}function vie(e,t){1&e&&r.Rb(0)}function yie(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",92),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",96,98),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).prop;return r.lc(2).model[t+"Label2"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label2")})),r.Ub(),r.Rc(7,vie,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label2"))),r.Bb(1),r.uc("for","",a,"label2"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Label",r.wc(14,cie,r.nc(4,12,l||"Entity_"+c)))+u.ws.secondaryPostfix),r.Bb(3),r.uc("id","",a,"label2"),r.sc("ngModel",s[c+"Label2"])("ngModelOptions",r.vc(16,pne)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(17,hne,i,u.serverErrors(s,c+"Label2")))}}function Iie(e,t){1&e&&r.Rb(0)}function Cie(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",92),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"input",96,99),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(2).prop;return r.lc(2).model[t+"Label3"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label3")})),r.Ub(),r.Rc(7,Iie,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(2),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label3"))),r.Bb(1),r.uc("for","",a,"label3"),r.Bb(1),r.Uc(r.oc(3,9,"Field0Label",r.wc(14,cie,r.nc(4,12,l||"Entity_"+c)))+u.ws.ternaryPostfix),r.Bb(3),r.uc("id","",a,"label3"),r.sc("ngModel",s[c+"Label3"])("ngModelOptions",r.vc(16,pne)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(17,hne,i,u.serverErrors(s,c+"Label3")))}}function wie(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",21),r.Vb(2,"label",92),r.Tc(3),r.mc(4,"translate"),r.mc(5,"translate"),r.Ub(),r.Vb(6,"input",96,97),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc().prop;return r.lc(2).model[t+"Label"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().prop,t=r.lc(2).model;return r.lc().onDefinitionChange(t,e+"Label")})),r.Ub(),r.Rc(8,hie,1,0,"ng-container",25),r.Ub(),r.Rc(9,yie,8,20,"div",29),r.Rc(10,Cie,8,20,"div",29),r.Sb()}if(2&e){var i=r.Fc(7),o=r.lc(),c=o.prop,a=o.propLower,l=o.fieldName,s=r.lc(2).model,u=r.lc(),d=r.Fc(13);r.Bb(1),r.Gb("is-invalid",u.invalid(i,u.serverErrors(s,c+"Label"))),r.Bb(1),r.uc("for","",a,"label"),r.Bb(1),r.Uc(r.oc(4,11,"Field0Label",r.wc(16,cie,r.nc(5,14,l||"Entity_"+c)))+u.ws.primaryPostfix),r.Bb(3),r.uc("id","",a,"label"),r.sc("ngModel",s[c+"Label"])("ngModelOptions",r.vc(18,pne)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(19,hne,i,u.serverErrors(s,c+"Label"))),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.TernaryLanguageId)}}var kie=function(e,t,n){return{prop:e,propLower:t,fieldName:n}};function Mie(e,t){if(1&e&&(r.Rc(0,pie,1,0,"ng-container",25),r.Rc(1,wie,11,22,"ng-container",95)),2&e){var n=t.prop,i=t.propLower,o=t.fieldName;r.lc();var c=r.Fc(101),a=r.lc().model,l=r.lc();r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.yc(3,kie,n,i,o)),r.Bb(1),r.sc("ngIf",l.isVisible(a[n+"Visibility"]))}}function Vie(e,t){1&e&&r.Rb(0)}function Tie(e,t){1&e&&r.Rb(0)}function Eie(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",21),r.Vb(1,"label",52),r.Tc(2),r.mc(3,"translate"),r.mc(4,"translate"),r.Ub(),r.Vb(5,"t-lookup-definitions-picker",89,100),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc().prop;return r.lc(2).model[t+"DefinitionId"]=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(3).model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(7,Tie,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(6),o=r.lc(),c=o.prop,a=o.fieldName,l=r.lc(2).model,s=r.lc(),u=r.Fc(13);r.Gb("is-invalid",s.invalid(i,s.serverErrors(l,c+"DefinitionId"))),r.Bb(2),r.Uc(r.oc(3,6,"Field0Definition",r.wc(11,cie,r.nc(4,9,a||"Entity_"+c)))),r.Bb(3),r.sc("ngModel",l[c+"DefinitionId"]),r.Bb(2),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.xc(13,hne,i,s.serverErrors(l,c+"DefinitionId")))}}function Uie(e,t){if(1&e&&(r.Rc(0,Vie,1,0,"ng-container",25),r.Rc(1,Eie,8,16,"div",29)),2&e){var n=t.prop,i=t.propLower,o=t.fieldName;r.lc();var c=r.Fc(103),a=r.lc().model,l=r.lc();r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.yc(3,kie,n,i,o)),r.Bb(1),r.sc("ngIf",l.isVisible(a[n+"Visibility"]))}}function xie(e,t){1&e&&r.Qb(0,"fa-icon",76)}function Rie(e,t){1&e&&r.Rb(0)}function Die(e,t){1&e&&r.Rb(0)}function Bie(e,t){1&e&&r.Qb(0,"fa-icon",76)}function Sie(e,t){1&e&&r.Qb(0,"fa-icon",76)}function _ie(e,t){1&e&&(r.Vb(0,"div",107),r.Tc(1," \u200c "),r.Ub())}function Oie(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",101),r.Vb(1,"div",102),r.Rc(2,Sie,1,0,"fa-icon",19),r.Vb(3,"span",103),r.Tc(4),r.Ub(),r.Vb(5,"button",45),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureReportDefinition(e,i)})),r.mc(6,"translate"),r.Qb(7,"fa-icon",104),r.Ub(),r.Tc(8," \xa0 "),r.Vb(9,"button",45),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteReportDefinition(e,i)})),r.mc(10,"translate"),r.Qb(11,"fa-icon",105),r.Ub(),r.Ub(),r.Rc(12,_ie,2,0,"div",106),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(2),r.Vc(" ",o.ws.getMultilingualValue("ReportDefinition",i.ReportDefinitionId,"Title")," "),r.Bb(1),r.sc("title",r.nc(6,4,"Configure")),r.Bb(4),r.sc("title",r.nc(10,6,"Delete"))}}function Lie(e,t){if(1&e&&(r.Vb(0,"span",108),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n," ")}}function Fie(e,t){1&e&&r.Qb(0,"fa-icon",76)}function Aie(e,t){if(1&e&&(r.Vb(0,"option",91),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function Pie(e,t){1&e&&r.Rb(0)}function Nie(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",109),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(2).model;return r.lc().onIconClick(i,e)})),r.Qb(1,"fa-icon",110),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(2).model;r.Gb("t-highlighted",i.value===o.MainMenuIcon),r.sc("title",i.value),r.Bb(1),r.sc("icon",i.value)}}function jie(e,t){1&e&&r.Rb(0)}function Wie(e,t){1&e&&r.Rb(0)}function qie(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",111),r.Vb(1,"div",112),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeHidden(e)})),r.Vb(2,"span",113),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Vb(5,"div",112),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeVisible(e)})),r.Vb(6,"span",113),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Ub(),r.Vb(9,"div",112),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onMakeArchived(e)})),r.Vb(10,"span",113),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(1),r.Gb("t-pointer","Hidden"!==i.State)("t-less-dark","Hidden"===i.State),r.Bb(2),r.Uc(r.nc(4,15,"Definition_State_Hidden")),r.Bb(2),r.Gb("t-pointer","Visible"!==i.State)("t-less-dark","Visible"===i.State),r.Bb(2),r.Uc(r.nc(8,17,"Definition_State_Visible")),r.Bb(2),r.Gb("t-pointer","Archived"!==i.State)("t-less-dark","Archived"===i.State),r.Bb(2),r.Uc(r.nc(12,19,"Definition_State_Archived"))}}var Qie=function(){return{prop:"Currency",propLower:"currency"}},Hie=function(){return{prop:"Center",propLower:"center"}},$ie=function(){return{prop:"Image",propLower:"image",fieldName:"Image"}},Gie=function(){return{prop:"Description",propLower:"description",fieldName:"Description"}},zie=function(){return{prop:"Location",propLower:"location"}},Jie=function(){return{prop:"FromDate",propLower:"fromdate"}},Kie=function(){return{prop:"ToDate",propLower:"todate"}},Yie=function(){return{prop:"DateOfBirth",propLower:"dateofbirth",fieldName:"Relation_DateOfBirth"}},Xie=function(){return{prop:"ContactEmail",propLower:"contactemail"}},Zie=function(){return{prop:"ContactMobile",propLower:"contactmobile"}},ere=function(){return{prop:"ContactAddress",propLower:"contactaddress"}},tre=function(){return{prop:"Date1",propLower:"date1"}},nre=function(){return{prop:"Date2",propLower:"date2"}},ire=function(){return{prop:"Date3",propLower:"date3"}},rre=function(){return{prop:"Date4",propLower:"date4"}},ore=function(){return{prop:"Decimal1",propLower:"decimal1"}},cre=function(){return{prop:"Decimal2",propLower:"decimal2"}},are=function(){return{prop:"Int1",propLower:"int1"}},lre=function(){return{prop:"Int2",propLower:"int2"}},sre=function(){return{prop:"Lookup1",propLower:"lookup1"}},ure=function(){return{prop:"Lookup2",propLower:"lookup2"}},dre=function(){return{prop:"Lookup3",propLower:"lookup3"}},bre=function(){return{prop:"Lookup4",propLower:"lookup4"}},fre=function(){return{prop:"Lookup5",propLower:"lookup5"}},mre=function(){return{prop:"Lookup6",propLower:"lookup6"}},gre=function(){return{prop:"Lookup7",propLower:"lookup7"}},pre=function(){return{prop:"Lookup8",propLower:"lookup8"}},hre=function(){return{prop:"Text1",propLower:"text1"}},vre=function(){return{prop:"Text2",propLower:"text2"}},yre=function(){return{prop:"Text3",propLower:"text3"}},Ire=function(){return{prop:"Text4",propLower:"text4"}},Cre=function(){return{prop:"Relation1",propLower:"relation1"}},wre=function(){return{prop:"Agent",propLower:"agent",fieldName:"Relation_Agent"}},kre=function(){return{prop:"TaxIdentificationNumber",propLower:"taxidentificationnumber",fieldName:"Relation_TaxIdentificationNumber"}},Mre=function(){return{prop:"BankAccountNumber",propLower:"bankaccountnumber",fieldName:"Relation_BankAccountNumber"}},Vre=function(e){return{control:null,serverErrors:e}};function Tre(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",10),r.Rc(1,dne,6,4,"div",11),r.Vb(2,"div",12),r.Vb(3,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleDefinition()})),r.Vb(4,"span"),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Vb(7,"div",14),r.Qb(8,"fa-icon",15),r.Ub(),r.Ub(),r.Vb(9,"div",16),r.Vb(10,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Title")})),r.Tc(11," \xa0 "),r.Qb(12,"fa-icon",18),r.Tc(13),r.mc(14,"translate"),r.Rc(15,bne,1,0,"fa-icon",19),r.Ub(),r.Vb(16,"div",20),r.Vb(17,"div",21),r.Vb(18,"label",22),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"input",23,24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Code")})),r.Ub(),r.Rc(23,fne,1,0,"ng-container",25),r.Ub(),r.Vb(24,"div",21),r.Vb(25,"label",26),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Vb(28,"input",27,28),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitleSingular=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitleSingular")})),r.Ub(),r.Rc(30,mne,1,0,"ng-container",25),r.Ub(),r.Rc(31,vne,7,13,"div",29),r.Rc(32,Ine,7,13,"div",29),r.Vb(33,"div",21),r.Vb(34,"label",30),r.Tc(35),r.mc(36,"translate"),r.Ub(),r.Vb(37,"input",31,32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TitlePlural=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"TitlePlural")})),r.Ub(),r.Rc(39,Cne,1,0,"ng-container",25),r.Ub(),r.Rc(40,kne,7,13,"div",29),r.Rc(41,Vne,7,13,"div",29),r.Ub(),r.Vb(42,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Fields")})),r.Tc(43," \xa0 "),r.Qb(44,"fa-icon",18),r.Tc(45),r.mc(46,"translate"),r.Rc(47,Tne,1,0,"fa-icon",19),r.Ub(),r.Vb(48,"div",20),r.Rc(49,Ene,1,0,"ng-container",25),r.Rc(50,Une,1,0,"ng-container",25),r.Rc(51,xne,1,0,"ng-container",25),r.Rc(52,Rne,1,0,"ng-container",25),r.Rc(53,Dne,1,0,"ng-container",25),r.Rc(54,Bne,1,0,"ng-container",25),r.Rc(55,Sne,1,0,"ng-container",25),r.Rc(56,_ne,1,0,"ng-container",25),r.Rc(57,One,1,0,"ng-container",25),r.Rc(58,Lne,1,0,"ng-container",25),r.Rc(59,Fne,1,0,"ng-container",25),r.Rc(60,Ane,1,0,"ng-container",25),r.Rc(61,Pne,1,0,"ng-container",25),r.Rc(62,Nne,1,0,"ng-container",25),r.Rc(63,jne,1,0,"ng-container",25),r.Rc(64,Wne,1,0,"ng-container",25),r.Rc(65,qne,1,0,"ng-container",25),r.Rc(66,Qne,1,0,"ng-container",25),r.Rc(67,Hne,1,0,"ng-container",25),r.Rc(68,$ne,1,0,"ng-container",25),r.Rc(69,Gne,1,0,"ng-container",25),r.Rc(70,zne,1,0,"ng-container",25),r.Rc(71,Jne,1,0,"ng-container",25),r.Rc(72,Kne,1,0,"ng-container",25),r.Rc(73,Yne,1,0,"ng-container",25),r.Rc(74,Xne,1,0,"ng-container",25),r.Rc(75,Zne,1,0,"ng-container",25),r.Rc(76,eie,1,0,"ng-container",25),r.Rc(77,tie,1,0,"ng-container",25),r.Rc(78,nie,1,0,"ng-container",25),r.Rc(79,iie,1,0,"ng-container",25),r.Rc(80,rie,1,0,"ng-container",25),r.Rc(81,aie,8,16,"div",29),r.Rc(82,lie,1,0,"ng-container",25),r.Rc(83,sie,1,0,"ng-container",25),r.Rc(84,uie,1,0,"ng-container",25),r.Vb(85,"div",21),r.Vb(86,"label",33),r.Tc(87),r.mc(88,"translate"),r.Ub(),r.Vb(89,"select",34,35),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.UserCardinality=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Rc(91,die,2,2,"option",36),r.Ub(),r.Rc(92,bie,1,0,"ng-container",25),r.Ub(),r.Vb(93,"div",21),r.Vb(94,"label",37),r.Tc(95),r.mc(96,"translate"),r.Ub(),r.Vb(97,"div",38),r.Vb(98,"input",39),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.HasAttachments=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Qb(99,"label",40),r.Ub(),r.Ub(),r.Rc(100,gie,9,19,"ng-template",null,41,r.Sc),r.Rc(102,Mie,2,7,"ng-template",null,42,r.Sc),r.Rc(104,Uie,2,7,"ng-template",null,43,r.Sc),r.Ub(),r.Vb(106,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Scripts")})),r.Tc(107," \xa0 "),r.Qb(108,"fa-icon",18),r.Tc(109),r.mc(110,"translate"),r.Rc(111,xie,1,0,"fa-icon",19),r.Ub(),r.Vb(112,"div",20),r.Vb(113,"div",21),r.Vb(114,"label",44),r.Tc(115),r.mc(116,"translate"),r.Ub(),r.Tc(117,"\xa0 "),r.Vb(118,"button",45),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onEditScript("PreprocessScript",e)})),r.mc(119,"translate"),r.Qb(120,"fa-icon",46),r.Ub(),r.Vb(121,"textarea",47,48),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.PreprocessScript=e})),r.Ub(),r.Rc(123,Rie,1,0,"ng-container",25),r.Ub(),r.Vb(124,"div",21),r.Vb(125,"label",49),r.Tc(126),r.mc(127,"translate"),r.Ub(),r.Tc(128,"\xa0 "),r.Vb(129,"button",45),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onEditScript("ValidateScript",e)})),r.mc(130,"translate"),r.Qb(131,"fa-icon",46),r.Ub(),r.Vb(132,"textarea",50,51),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ValidateScript=e})),r.Ub(),r.Rc(134,Die,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Vb(135,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Reports")})),r.Tc(136," \xa0 "),r.Qb(137,"fa-icon",18),r.Tc(138),r.mc(139,"translate"),r.Rc(140,Bie,1,0,"fa-icon",19),r.Ub(),r.Vb(141,"div",20),r.Vb(142,"div",21),r.Vb(143,"label",52),r.Tc(144),r.mc(145,"translate"),r.Ub(),r.Tc(146,"\xa0 "),r.Vb(147,"button",45),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateReportDefinition(e)})),r.mc(148,"translate"),r.Qb(149,"fa-icon",53),r.Ub(),r.Vb(150,"div",54),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().rowDrop(e,t.ReportDefinitions)})),r.Rc(151,Oie,13,8,"div",55),r.Ub(),r.Rc(152,Lie,2,1,"span",56),r.Ub(),r.Ub(),r.Vb(153,"div",17),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Menu")})),r.Tc(154," \xa0 "),r.Qb(155,"fa-icon",18),r.Tc(156),r.mc(157,"translate"),r.Rc(158,Fie,1,0,"fa-icon",19),r.Ub(),r.Vb(159,"div",20),r.Vb(160,"div",21),r.Vb(161,"label",57),r.Tc(162),r.mc(163,"translate"),r.Ub(),r.Vb(164,"select",58,59),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSection")})),r.Qb(166,"option",60),r.Rc(167,Aie,2,2,"option",36),r.Ub(),r.Rc(168,Pie,1,0,"ng-container",25),r.Ub(),r.Vb(169,"div",21),r.Vb(170,"label",61),r.Tc(171),r.mc(172,"translate"),r.Ub(),r.Vb(173,"div",62),r.Rc(174,Nie,2,4,"div",63),r.Ub(),r.Rc(175,jie,1,0,"ng-container",25),r.Ub(),r.Vb(176,"div",21),r.Vb(177,"label",64),r.Tc(178),r.mc(179,"translate"),r.Ub(),r.Vb(180,"input",65,66),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.MainMenuSortKey=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"MainMenuSortKey")})),r.Ub(),r.Rc(182,Wie,1,0,"ng-container",25),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(183,"div",67),r.Vb(184,"div",68),r.Vb(185,"div",69),r.Vb(186,"span"),r.Tc(187),r.mc(188,"translate"),r.Ub(),r.Ub(),r.Rc(189,qie,13,21,"div",70),r.Ub(),r.Vb(190,"div",71),r.Qb(191,"t-relations-details",72),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(22),o=r.Fc(29),c=r.Fc(38),a=r.Fc(90),l=r.Fc(101),s=r.Fc(103),u=r.Fc(105),d=r.Fc(122),b=r.Fc(133),f=r.Fc(165),m=r.Fc(181),g=r.lc(),p=g.isEdit,h=g.model,v=r.lc(),y=r.Fc(13);r.Bb(1),r.sc("ngIf",p&&v.collapseDefinition),r.Bb(1),r.Gb("d-flex",p&&!v.collapseDefinition)("d-none",!p||v.collapseDefinition),r.Bb(3),r.Uc(r.nc(6,179,"Definition")),r.Bb(3),r.sc("flip",v.flipIcon(!1)),r.Bb(4),r.sc("flip",v.flipIcon(v.showSection("Title")))("rotate",v.rotateIcon(v.showSection("Title"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(14,181,"Title")," "),r.Bb(2),r.sc("ngIf",v.sectionErrors("Title",h)),r.Bb(1),r.Gb("d-none",!v.showSection("Title")),r.Bb(1),r.Gb("is-invalid",v.invalid(i,null==h.serverErrors?null:h.serverErrors.Code)),r.Bb(2),r.Uc(r.nc(20,183,"Code")),r.Bb(2),r.sc("ngModel",h.Code)("ngModelOptions",r.vc(221,pne)),r.Bb(2),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.xc(222,hne,i,null==h.serverErrors?null:h.serverErrors.Code)),r.Bb(1),r.Gb("is-invalid",v.invalid(o,null==h.serverErrors?null:h.serverErrors.TitleSingular)),r.Bb(2),r.Uc(r.nc(27,185,"TitleSingular")+v.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",h.TitleSingular)("ngModelOptions",r.vc(225,pne)),r.Bb(2),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.xc(226,hne,o,null==h.serverErrors?null:h.serverErrors.TitleSingular)),r.Bb(1),r.sc("ngIf",null==v.ws.settings?null:v.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==v.ws.settings?null:v.ws.settings.TernaryLanguageId),r.Bb(1),r.Gb("is-invalid",v.invalid(c,null==h.serverErrors?null:h.serverErrors.TitlePlural)),r.Bb(2),r.Uc(r.nc(36,187,"TitlePlural")+v.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",h.TitlePlural)("ngModelOptions",r.vc(229,pne)),r.Bb(2),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.xc(230,hne,c,null==h.serverErrors?null:h.serverErrors.TitlePlural)),r.Bb(1),r.sc("ngIf",null==v.ws.settings?null:v.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==v.ws.settings?null:v.ws.settings.TernaryLanguageId),r.Bb(3),r.sc("flip",v.flipIcon(v.showSection("Fields")))("rotate",v.rotateIcon(v.showSection("Fields"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(46,189,"Fields")," "),r.Bb(2),r.sc("ngIf",v.sectionErrors("Fields",h)),r.Bb(1),r.Gb("d-none",!v.showSection("Fields")),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(233,Qie)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(234,Hie)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(235,$ie)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(236,Gie)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(237,zie)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(238,Jie)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(239,Kie)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(240,Yie)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(241,Xie)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(242,Zie)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(243,ere)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(244,tre)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(245,nre)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(246,ire)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(247,rre)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(248,ore)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(249,cre)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(250,are)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(251,lre)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(252,sre)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(253,ure)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(254,dre)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(255,bre)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(256,fre)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(257,mre)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(258,gre)),r.Bb(1),r.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",r.vc(259,pre)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(260,hre)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(261,vre)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(262,yre)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(263,Ire)),r.Bb(1),r.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",r.vc(264,Cre)),r.Bb(1),r.sc("ngIf",v.isVisible(h.Relation1Visibility)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(265,wre)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(266,kre)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.vc(267,Mre)),r.Bb(1),r.Gb("is-invalid",v.invalid(a,v.serverErrors(h,"UserCardinality"))),r.Bb(2),r.Uc(r.nc(88,191,"RelationDefinition_UserCardinality")),r.Bb(2),r.sc("ngModel",h.UserCardinality),r.Bb(2),r.sc("ngForOf",v.cardinalityChoices),r.Bb(1),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.xc(268,hne,a,v.serverErrors(h,"UserCardinality"))),r.Bb(3),r.Uc(r.nc(96,193,"Definition_HasAttachments")),r.Bb(3),r.sc("ngModel",h.HasAttachments),r.Bb(10),r.sc("flip",v.flipIcon(v.showSection("Scripts")))("rotate",v.rotateIcon(v.showSection("Scripts"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(110,195,"Scripts")," "),r.Bb(2),r.sc("ngIf",v.sectionErrors("Scripts",h)),r.Bb(1),r.Gb("d-none",!v.showSection("Scripts")),r.Bb(1),r.Gb("is-invalid",v.invalid(d,null==h.serverErrors?null:h.serverErrors.PreprocessScript)),r.Bb(2),r.Uc(r.nc(116,197,"Definition_PreprocessScript")),r.Bb(3),r.sc("title",r.nc(119,199,"Expand")),r.Bb(3),r.sc("ngModel",h.PreprocessScript)("ngModelOptions",r.vc(271,pne)),r.Bb(2),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.xc(272,hne,d,null==h.serverErrors?null:h.serverErrors.PreprocessScript)),r.Bb(1),r.Gb("is-invalid",v.invalid(b,null==h.serverErrors?null:h.serverErrors.ValidateScript)),r.Bb(2),r.Vc("",r.nc(127,201,"Definition_ValidateScript")," "),r.Bb(3),r.sc("title",r.nc(130,203,"Expand")),r.Bb(3),r.sc("ngModel",h.ValidateScript)("ngModelOptions",r.vc(275,pne)),r.Bb(2),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.xc(276,hne,b,null==h.serverErrors?null:h.serverErrors.ValidateScript)),r.Bb(3),r.sc("flip",v.flipIcon(v.showSection("Reports")))("rotate",v.rotateIcon(v.showSection("Reports"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(139,205,"Reports")," "),r.Bb(2),r.sc("ngIf",v.sectionErrors("Reports",h)),r.Bb(1),r.Gb("d-none",!v.showSection("Reports")),r.Bb(3),r.Uc(r.nc(145,207,"Definition_ReportDefinitions")),r.Bb(3),r.sc("title",r.nc(148,209,"Create")),r.Bb(4),r.sc("ngForOf",h.ReportDefinitions),r.Bb(1),r.sc("ngForOf",null==h.serverErrors?null:h.serverErrors.ReportDefinitions),r.Bb(3),r.sc("flip",v.flipIcon(v.showSection("Menu")))("rotate",v.rotateIcon(v.showSection("Menu"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(157,211,"Menu")," "),r.Bb(2),r.sc("ngIf",v.sectionErrors("Menu",h)),r.Bb(1),r.Gb("d-none",!v.showSection("Menu")),r.Bb(3),r.Uc(r.nc(163,213,"MainMenuSection")),r.Bb(2),r.sc("ngModel",h.MainMenuSection),r.Bb(3),r.sc("ngForOf",v.allMainMenuSections),r.Bb(1),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.xc(279,hne,f,null==h.serverErrors?null:h.serverErrors.MainMenuSection)),r.Bb(3),r.Uc(r.nc(172,215,"MainMenuIcon")),r.Bb(3),r.sc("ngForOf",v.allMainMenuIcons),r.Bb(1),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.wc(282,Vre,null==h.serverErrors?null:h.serverErrors.MainMenuIcon)),r.Bb(3),r.Uc(r.nc(179,217,"MainMenuSortKey")),r.Bb(2),r.sc("ngModel",h.MainMenuSortKey)("ngModelOptions",r.vc(284,pne)),r.Bb(2),r.sc("ngTemplateOutlet",y)("ngTemplateOutletContext",r.xc(285,hne,m,null==h.serverErrors?null:h.serverErrors.MainMenuSortKey)),r.Bb(5),r.Uc(r.nc(188,219,"Preview")),r.Bb(2),r.sc("ngIf",!p),r.Bb(2),r.sc("previewDefinition",v.getForClient(h))}}function Ere(e,t){if(1&e&&r.Rc(0,Tre,192,288,"div",9),2&e){var n=t.isEdit,i=r.lc();r.sc("ngIf",i.watchIsEdit(n))}}function Ure(e,t){if(1&e&&(r.Vb(0,"span",115),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function xre(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Ure,2,1,"span",114),r.Sb()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(1),r.sc("ngForOf",c.errors(i,o))}}function Rre(e,t){if(1&e&&r.Rc(0,xre,2,1,"ng-container",95),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}function Dre(e,t){1&e&&r.Rb(0)}function Bre(e,t){1&e&&r.Rb(0)}function Sre(e,t){1&e&&r.Rb(0)}function _re(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",122),r.Vb(1,"label",133),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",134,135),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reportDefinitionToEdit.Name2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onItemToEditChange()})),r.Ub(),r.Rc(6,Sre,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(13);r.Gb("is-invalid",o.invalid(i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name2)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.reportDefinitionToEdit.Name2)("ngModelOptions",r.vc(9,pne)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,hne,i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name2))}}function Ore(e,t){1&e&&r.Rb(0)}function Lre(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",122),r.Vb(1,"label",136),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",137,138),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).reportDefinitionToEdit.Name3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).onItemToEditChange()})),r.Ub(),r.Rc(6,Ore,1,0,"ng-container",25),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(13);r.Gb("is-invalid",o.invalid(i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name3)),r.Bb(2),r.Uc(r.nc(3,7,"Name")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.reportDefinitionToEdit.Name3)("ngModelOptions",r.vc(9,pne)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(10,hne,i,null==o.reportDefinitionToEdit.serverErrors?null:o.reportDefinitionToEdit.serverErrors.Name3))}}function Fre(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",116),r.Vb(1,"h5",117),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",118),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",119),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",120),r.Vb(8,"div",121),r.Vb(9,"div",122),r.Vb(10,"label",52),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"t-report-definitions-picker",123,124),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().reportDefinitionToEdit.ReportDefinitionId=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(15,Dre,1,0,"ng-container",25),r.Ub(),r.Vb(16,"div",122),r.Vb(17,"label",125),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"input",126,127),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().reportDefinitionToEdit.Name=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().onItemToEditChange()})),r.Ub(),r.Rc(22,Bre,1,0,"ng-container",25),r.Ub(),r.Rc(23,_re,7,13,"div",128),r.Rc(24,Lre,7,13,"div",128),r.Ub(),r.Ub(),r.Vb(25,"div",129),r.Vb(26,"button",130),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(27,"fa-icon",131),r.Tc(28),r.mc(29,"translate"),r.Ub(),r.Vb(30,"button",132),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(31,"fa-icon",105),r.Tc(32),r.mc(33,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(14),o=r.Fc(21),c=r.lc(),a=r.Fc(13);r.Bb(2),r.Vc(" ",r.nc(3,19,"Configure")," "),r.Bb(7),r.Gb("is-invalid",c.invalid(i,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),r.Bb(2),r.Uc(r.nc(12,21,"Definition_ReportDefinition")),r.Bb(2),r.sc("ngModel",c.reportDefinitionToEdit.ReportDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(29,hne,i,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),r.Bb(1),r.Gb("is-invalid",c.invalid(o,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.Name)),r.Bb(2),r.Uc(r.nc(19,23,"Name")+c.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",c.reportDefinitionToEdit.Name)("ngModelOptions",r.vc(32,pne)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(33,hne,o,null==c.reportDefinitionToEdit.serverErrors?null:c.reportDefinitionToEdit.serverErrors.Name)),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==c.ws.settings?null:c.ws.settings.TernaryLanguageId),r.Bb(2),r.sc("disabled",!c.reportDefinitionToEdit.ReportDefinitionId),r.Bb(2),r.Vc(" \xa0",r.nc(29,25,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(33,27,"Cancel")," ")}}function Are(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",116),r.Vb(1,"h5",117),r.Tc(2),r.Ub(),r.Vb(3,"button",118),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(4,"span",119),r.Tc(5,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",120),r.Vb(7,"div",139),r.Vb(8,"textarea",140,141),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().script=e}))("keydown",(function(e){r.Ic(n);var t=r.Fc(10);return r.lc().onScriptKeydown(t,e)})),r.Tc(11,"                "),r.Ub(),r.Ub(),r.Ub(),r.Vb(12,"div",129),r.Vb(13,"button",142),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(14,"fa-icon",131),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Vb(17,"button",142),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(18,"fa-icon",105),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Vc(" ",i.scriptModalLabel()," "),r.Bb(6),r.sc("ngModel",i.script),r.Bb(7),r.Vc(" \xa0",r.nc(16,4,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(20,6,"Cancel")," ")}}var Pre,Nre=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},jre=function(e,t,n){return[e,t,n]},Wre=((Pre=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var c;return _classCallCheck(this,n),(c=t.call(this)).workspace=e,c.api=i,c.translate=r,c.modalService=o,c.relationDefinitionsApi=c.api.relationDefinitionsApi(c.notifyDestruct$),c.expand="ReportDefinitions.ReportDefinition,Lookup1Definition,Lookup2Definition,Lookup3Definition,Lookup4Definition,\n  Lookup5Definition,Lookup6Definition,Lookup7Definition,Lookup8Definition,Relation1Definition,AttachmentsCategoryDefinition",c.create=function(){var e={};c.ws.isPrimaryLanguage?e.TitleSingular=c.initialText:c.ws.isSecondaryLanguage?e.TitleSingular2=c.initialText:c.ws.isTernaryLanguage&&(e.TitleSingular3=c.initialText);var t,n=_createForOfIteratorHelper(c.allVisibilityProps());try{for(n.s();!(t=n.n()).done;)e[t.value]="None"}catch(i){n.e(i)}finally{n.f()}return e.UserCardinality="None",e.HasAttachments=!1,e.ReportDefinitions=[],e},c.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach((function(e){e.Id=null})),t}return console.error("Cloning a non existing item"),null},c.savePreprocessing=function(e){var t,n=_createForOfIteratorHelper(c.allVisibilityProps());try{for(n.s();!(t=n.n()).done;){var i=t.value;if("None"===e[i]){var r=i.substr(0,i.length-"Visibility".length);delete e[r+"Label"],delete e[r+"Label2"],delete e[r+"Label3"],delete e[r+"DefinitionId"]}}}catch(o){n.e(o)}finally{n.f()}},c.collapseDefinition=!1,c._isEdit=!1,c.isInactive=function(e){return null},c._sections={Title:!0,Fields:!1,Scripts:!1,Reports:!1,MainMenu:!1},c._currentModelModified=!1,c.onMakeHidden=function(e){e&&e.Id&&"Hidden"!==e.State&&c.relationDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeVisible=function(e){e&&e.Id&&"Visible"!==e.State&&c.relationDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.onMakeArchived=function(e){e&&e.Id&&"Archived"!==e.State&&c.relationDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,c.workspace)}))).subscribe({error:c.details.handleActionError})},c.showMakeHidden=function(e){return!!e&&"Hidden"!==e.State},c.showMakeVisible=function(e){return!!e&&"Visible"!==e.State},c.showMakeArchived=function(e){return!!e&&"Archived"!==e.State},c.hasStatePermission=function(e){return c.ws.canDo("relation-definitions","State",e.Id)},c.stateTooltip=function(e){return c.hasStatePermission(e)?"":c.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},c.itemToEditHasChanged=!1,c.relationDefinitionsApi=c.api.relationDefinitionsApi(c.notifyDestruct$),c}return _createClass(n,[{key:"allVisibilityProps",value:function(){for(var e=Object(rne.a)(this.workspace,this.translate).properties,t=[],n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];r.endsWith("Visibility")&&t.push(r)}return t}},{key:"onToggleDefinition",value:function(){this.collapseDefinition=!this.collapseDefinition}},{key:"watchIsEdit",value:function(e){return this._isEdit!==e&&(this._isEdit=e),!0}},{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"onToggleSection",value:function(e){this._sections[e]=!this._sections[e]}},{key:"showSection",value:function(e){return this._sections[e]}},{key:"weakEntityErrors",value:function(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some((function(t){return Object(UI.b)(e.serverErrors[t])}))}},{key:"sectionErrors",value:function(e,t){var n=this;return"Title"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.Code)||Object(UI.b)(t.serverErrors.TitleSingular)||Object(UI.b)(t.serverErrors.TitleSingular2)||Object(UI.b)(t.serverErrors.TitleSingular3)||Object(UI.b)(t.serverErrors.TitlePlural)||Object(UI.b)(t.serverErrors.TitlePlural2)||Object(UI.b)(t.serverErrors.TitlePlural3)):"Fields"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.CurrencyVisibility)||Object(UI.b)(t.serverErrors.CenterVisibility)||Object(UI.b)(t.serverErrors.ImageVisibility)||Object(UI.b)(t.serverErrors.DescriptionVisibility)||Object(UI.b)(t.serverErrors.LocationVisibility)||Object(UI.b)(t.serverErrors.FromDateLabel)||Object(UI.b)(t.serverErrors.FromDateLabel2)||Object(UI.b)(t.serverErrors.FromDateLabel3)||Object(UI.b)(t.serverErrors.FromDateVisibility)||Object(UI.b)(t.serverErrors.ToDateLabel)||Object(UI.b)(t.serverErrors.ToDateLabel2)||Object(UI.b)(t.serverErrors.ToDateLabel3)||Object(UI.b)(t.serverErrors.ToDateVisibility)||Object(UI.b)(t.serverErrors.DateOfBirthVisibility)||Object(UI.b)(t.serverErrors.ContactEmailVisibility)||Object(UI.b)(t.serverErrors.ContactMobileVisibility)||Object(UI.b)(t.serverErrors.ContactAddressVisibility)||Object(UI.b)(t.serverErrors.Date1Label)||Object(UI.b)(t.serverErrors.Date1Label2)||Object(UI.b)(t.serverErrors.Date1Label3)||Object(UI.b)(t.serverErrors.Date1Visibility)||Object(UI.b)(t.serverErrors.Date2Label)||Object(UI.b)(t.serverErrors.Date2Label2)||Object(UI.b)(t.serverErrors.Date2Label3)||Object(UI.b)(t.serverErrors.Date2Visibility)||Object(UI.b)(t.serverErrors.Date3Label)||Object(UI.b)(t.serverErrors.Date3Label2)||Object(UI.b)(t.serverErrors.Date3Label3)||Object(UI.b)(t.serverErrors.Date3Visibility)||Object(UI.b)(t.serverErrors.Date4Label)||Object(UI.b)(t.serverErrors.Date4Label2)||Object(UI.b)(t.serverErrors.Date4Label3)||Object(UI.b)(t.serverErrors.Date4Visibility)||Object(UI.b)(t.serverErrors.Decimal1Label)||Object(UI.b)(t.serverErrors.Decimal1Label2)||Object(UI.b)(t.serverErrors.Decimal1Label3)||Object(UI.b)(t.serverErrors.Decimal1Visibility)||Object(UI.b)(t.serverErrors.Decimal2Label)||Object(UI.b)(t.serverErrors.Decimal2Label2)||Object(UI.b)(t.serverErrors.Decimal2Label3)||Object(UI.b)(t.serverErrors.Decimal2Visibility)||Object(UI.b)(t.serverErrors.Int1Label)||Object(UI.b)(t.serverErrors.Int1Label2)||Object(UI.b)(t.serverErrors.Int1Label3)||Object(UI.b)(t.serverErrors.Int1Visibility)||Object(UI.b)(t.serverErrors.Int2Label)||Object(UI.b)(t.serverErrors.Int2Label2)||Object(UI.b)(t.serverErrors.Int2Label3)||Object(UI.b)(t.serverErrors.Int2Visibility)||Object(UI.b)(t.serverErrors.Lookup1Label)||Object(UI.b)(t.serverErrors.Lookup1Label2)||Object(UI.b)(t.serverErrors.Lookup1Label3)||Object(UI.b)(t.serverErrors.Lookup1Visibility)||Object(UI.b)(t.serverErrors.Lookup1DefinitionId)||Object(UI.b)(t.serverErrors.Lookup2Label)||Object(UI.b)(t.serverErrors.Lookup2Label2)||Object(UI.b)(t.serverErrors.Lookup2Label3)||Object(UI.b)(t.serverErrors.Lookup2Visibility)||Object(UI.b)(t.serverErrors.Lookup2DefinitionId)||Object(UI.b)(t.serverErrors.Lookup3Label)||Object(UI.b)(t.serverErrors.Lookup3Label2)||Object(UI.b)(t.serverErrors.Lookup3Label3)||Object(UI.b)(t.serverErrors.Lookup3Visibility)||Object(UI.b)(t.serverErrors.Lookup3DefinitionId)||Object(UI.b)(t.serverErrors.Lookup4Label)||Object(UI.b)(t.serverErrors.Lookup4Label2)||Object(UI.b)(t.serverErrors.Lookup4Label3)||Object(UI.b)(t.serverErrors.Lookup4Visibility)||Object(UI.b)(t.serverErrors.Lookup4DefinitionId)||Object(UI.b)(t.serverErrors.Lookup5Label)||Object(UI.b)(t.serverErrors.Lookup5Label2)||Object(UI.b)(t.serverErrors.Lookup5Label3)||Object(UI.b)(t.serverErrors.Lookup5Visibility)||Object(UI.b)(t.serverErrors.Lookup5DefinitionId)||Object(UI.b)(t.serverErrors.Lookup6Label)||Object(UI.b)(t.serverErrors.Lookup6Label2)||Object(UI.b)(t.serverErrors.Lookup6Label3)||Object(UI.b)(t.serverErrors.Lookup6Visibility)||Object(UI.b)(t.serverErrors.Lookup6DefinitionId)||Object(UI.b)(t.serverErrors.Lookup7Label)||Object(UI.b)(t.serverErrors.Lookup7Label2)||Object(UI.b)(t.serverErrors.Lookup7Label3)||Object(UI.b)(t.serverErrors.Lookup7Visibility)||Object(UI.b)(t.serverErrors.Lookup7DefinitionId)||Object(UI.b)(t.serverErrors.Lookup8Label)||Object(UI.b)(t.serverErrors.Lookup8Label2)||Object(UI.b)(t.serverErrors.Lookup8Label3)||Object(UI.b)(t.serverErrors.Lookup8Visibility)||Object(UI.b)(t.serverErrors.Lookup8DefinitionId)||Object(UI.b)(t.serverErrors.Text1Label)||Object(UI.b)(t.serverErrors.Text1Label2)||Object(UI.b)(t.serverErrors.Text1Label3)||Object(UI.b)(t.serverErrors.Text1Visibility)||Object(UI.b)(t.serverErrors.Text2Label)||Object(UI.b)(t.serverErrors.Text2Label2)||Object(UI.b)(t.serverErrors.Text2Label3)||Object(UI.b)(t.serverErrors.Text2Visibility)||Object(UI.b)(t.serverErrors.Text3Label)||Object(UI.b)(t.serverErrors.Text3Label2)||Object(UI.b)(t.serverErrors.Text3Label3)||Object(UI.b)(t.serverErrors.Text3Visibility)||Object(UI.b)(t.serverErrors.Text4Label)||Object(UI.b)(t.serverErrors.Text4Label2)||Object(UI.b)(t.serverErrors.Text4Label3)||Object(UI.b)(t.serverErrors.Text4Visibility)||Object(UI.b)(t.serverErrors.Relation1Label)||Object(UI.b)(t.serverErrors.Relation1Label2)||Object(UI.b)(t.serverErrors.Relation1Label3)||Object(UI.b)(t.serverErrors.Relation1Visibility)||Object(UI.b)(t.serverErrors.Relation1DefinitionId)||Object(UI.b)(t.serverErrors.AgentVisibility)||Object(UI.b)(t.serverErrors.TaxIdentificationNumberVisibility)||Object(UI.b)(t.serverErrors.JobVisibility)||Object(UI.b)(t.serverErrors.BankAccountNumberVisibility)||Object(UI.b)(t.serverErrors.UserCardinality)||Object(UI.b)(t.serverErrors.HasAttachments)||Object(UI.b)(t.serverErrors.AttachmentsCategoryDefinitionId)):"Scripts"===e?!!t.serverErrors&&(Object(UI.b)(t.serverErrors.PreprocessScript)||Object(UI.b)(t.serverErrors.ValidateScript)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some((function(e){return n.weakEntityErrors(e)})):"MainMenu"===e&&!!t.serverErrors&&(Object(UI.b)(t.serverErrors.MainMenuIcon)||Object(UI.b)(t.serverErrors.MainMenuSection)||Object(UI.b)(t.serverErrors.MainMenuSortKey))}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"serverErrors",value:function(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}},{key:"onDefinitionChange",value:function(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}},{key:"getForClient",value:function(e){if(!e)return null;if(this._currentModel!==e||this._currentModelModified){this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e);var t,n=_createForOfIteratorHelper(this.allVisibilityProps());try{for(n.s();!(t=n.n()).done;){var i=t.value;"None"===this._getForClientResult[i]&&delete this._getForClientResult[i]}}catch(r){n.e(r)}finally{n.f()}}return this._getForClientResult}},{key:"isVisible",value:function(e){return"Optional"===e||"Required"===e}},{key:"onIconClick",value:function(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}},{key:"onItemToEditChange",value:function(){this.itemToEditHasChanged=!0}},{key:"onCreateReportDefinition",value:function(e){var t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(n){n&&e.ReportDefinitions.push(t)}),(function(e){}))}},{key:"onConfigureReportDefinition",value:function(e,t){var n=this;this.itemToEditHasChanged=!1;var i=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=i,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then((function(r){r&&n.itemToEditHasChanged&&(t.ReportDefinitions[e]=i)}),(function(e){}))}},{key:"onDeleteReportDefinition",value:function(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t,e.previousIndex,e.currentIndex)}},{key:"onEditScript",value:function(e,t){var n=this;this.script=t[e],this.scriptModalLabel=function(){return n.translate.instant("Definition_"+e)},this.modalService.open(this.scriptModal,{windowClass:"t-dark-theme t-details-modal"}).result.then((function(i){i&&(t[e]=n.script)}),(function(e){}))}},{key:"onScriptKeydown",value:function(e,t){var n=this;Object(W.p)(e,t,(function(e){return n.script=e}))}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"visibilityChoices",get:function(){var e=this;return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:function(){return e.translate.instant("Visibility_None")}},{value:"Optional",name:function(){return e.translate.instant("Visibility_Optional")}},{value:"Required",name:function(){return e.translate.instant("Visibility_Required")}}]),this._visibilityChoices}},{key:"cardinalityChoices",get:function(){var e=this;return this._cardinalityChoices||(this._cardinalityChoices=[{value:"None",name:function(){return e.translate.instant("Cardinality_None")}},{value:"Single",name:function(){return e.translate.instant("Cardinality_Single")}},{value:"Multiple",name:function(){return e.translate.instant("Cardinality_Multiple")}}]),this._cardinalityChoices}},{key:"allMainMenuSections",get:function(){var e=Object(rne.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Si.c)(e)}},{key:"allMainMenuIcons",get:function(){var e=Object(rne.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Si.c)(e)}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||Pre)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e),r.Pb(X.t))},Pre.\u0275cmp=r.Jb({type:Pre,selectors:[["t-relation-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(one,!0),r.Oc(cne,!0)),2&e&&(r.Ec(n=r.ic())&&(t.reportDefinitionModal=n.first),r.Ec(n=r.ic())&&(t.scriptModal=n.first))},features:[r.yb],decls:18,vars:36,consts:[["collection","RelationDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["scriptModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","usercardinality",1,"small"],["id","usercardinality",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["usercardinality","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","hasattachments",1,"small"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","hasattachments",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasattachments",1,"custom-control-label"],["unlabeledProp",""],["labeledProp",""],["definitionedProp",""],["for","preprocessscript",1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","expand"],["rows","6","id","preprocessscript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["preprocessscript","ngModel"],["for","validatescript",1,"small"],["rows","6","id","validatescript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["validatescript","ngModel"],[1,"small"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["theme","dark",3,"ngModel","ngModelChange"],["relation1defId","ngModel"],[3,"value"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[4,"ngIf"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"id","ngModel","ngModelOptions","ngModelChange"],["label","ngModel"],["label2","ngModel"],["label3","ngModel"],["defId","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"],[1,"row","h-100","t-much-less-dark"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","ngbAutoFocus","",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["scriptnmodel","ngModel","pstextarea",""],[1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,ane,2,3,"ng-template",null,1,r.Sc),r.Rc(4,lne,2,3,"ng-template",null,2,r.Sc),r.Rc(6,sne,2,3,"ng-template",null,3,r.Sc),r.Rc(8,une,3,3,"ng-template",null,4,r.Sc),r.Rc(10,Ere,1,1,"ng-template",null,5,r.Sc),r.Rc(12,Rre,1,1,"ng-template",null,6,r.Sc),r.Rc(14,Fre,34,36,"ng-template",null,7,r.Sc),r.Rc(16,Are,21,8,"ng-template",null,8,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"RelationDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",a)("actions",r.yc(32,jre,r.Ac(14,Nre,n,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(20,Nre,i,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(26,Nre,o,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,x.u,ne.b,ie.c,ie.u,ie.k,ie.n,x.B,ie.v,x.t,ie.a,Q.f,ie.p,ie.x,ie.q,Tv,_V,v_,Q.b,Q.d,XB],pipes:[G.d],encapsulation:2}),Pre);function qre(e,t){if(1&e&&(r.Vb(0,"div",11),r.Vb(1,"span",12),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",13),r.Vb(4,"div",14),r.Qb(5,"t-auto-cell",15),r.Ub(),r.Qb(6,"t-auto-cell",16),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("RelationDefinition",n,"TitleSingular")),r.Bb(3),r.sc("entity",i.c[n]),r.Bb(1),r.sc("entity",i.c[n])}}function Qre(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"RelationDefinition"),"\n")}function Hre(e,t){if(1&e&&(r.Vb(0,"span",17),r.Qb(1,"t-auto-cell",18),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function $re(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SavedByMe")," ")}function Gre(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Hidden")," ")}function zre(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Visible")," ")}function Jre(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_State_Archived")," ")}function Kre(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Hide")," ")}function Yre(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Show")," ")}function Xre(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Definition_Archive")," ")}var Zre,eoe=function(e,t,n,i,r){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:r}},toe=function(e,t,n){return[e,t,n]},noe=function(e){return{template:e,expression:"SavedById eq me"}},ioe=function(e){return[e]},roe=function(e){return{template:e,expression:"State eq 'Hidden'"}},ooe=function(e){return{template:e,expression:"State eq 'Visible'"}},coe=function(e){return{template:e,expression:"State eq 'Archived'"}},aoe=function(e,t){return{SavedBy:e,State:t}},loe=((Zre=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.api=i,o.translate=r,o.relationDefinitionsApi=o.api.relationDefinitionsApi(o.notifyDestruct$),o.expand="",o.onMakeHidden=function(e){return o.relationDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeHidden=function(e){return e.some((function(e){var t=o.ws.get("RelationDefinition",e);return!!t&&"Hidden"!==t.State}))},o.onMakeVisible=function(e){return o.relationDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeVisible=function(e){return e.some((function(e){var t=o.ws.get("RelationDefinition",e);return!!t&&"Visible"!==t.State}))},o.onMakeArchived=function(e){return o.relationDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(P.a)((function(e){return Object(W.c)(e,o.workspace)})))},o.showMakeArchived=function(e){return e.some((function(e){var t=o.ws.get("RelationDefinition",e);return!!t&&"Archived"!==t.State}))},o.hasStatePermission=function(e){return o.ws.canDo("relation-definitions","State",null)},o.stateTooltip=function(e){return o.hasStatePermission(e)?"":o.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")},o.relationDefinitionsApi=o.api.relationDefinitionsApi(o.notifyDestruct$),o}return _createClass(n,[{key:"c",get:function(){return this.ws.RelationDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||Zre)(r.Pb(S.m),r.Pb(Y.a),r.Pb(G.e))},Zre.\u0275cmp=r.Jb({type:Zre,selectors:[["t-relation-definitions-master"]],features:[r.yb],decls:22,vars:51,consts:[["collection","RelationDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","RelationDefinition","path","Code",3,"entity"],["collection","RelationDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","RelationDefinition",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,qre,7,3,"ng-template",null,1,r.Sc),r.Rc(4,Qre,2,3,"ng-template",null,2,r.Sc),r.Rc(6,Hre,2,1,"ng-template",null,3,r.Sc),r.Rc(8,$re,2,3,"ng-template",null,4,r.Sc),r.Rc(10,Gre,2,3,"ng-template",null,5,r.Sc),r.Rc(12,zre,2,3,"ng-template",null,6,r.Sc),r.Rc(14,Jre,2,3,"ng-template",null,7,r.Sc),r.Rc(16,Kre,2,3,"ng-template",null,8,r.Sc),r.Rc(18,Yre,2,3,"ng-template",null,9,r.Sc),r.Rc(20,Xre,2,3,"ng-template",null,10,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13),s=r.Fc(15),u=r.Fc(17),d=r.Fc(19),b=r.Fc(21);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,10,"RelationDefinitions"))("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.yc(30,toe,r.Ac(12,eoe,u,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),r.Ac(18,eoe,d,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),r.Ac(24,eoe,b,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",r.xc(48,aoe,r.wc(36,ioe,r.wc(34,noe,c)),r.yc(44,toe,r.wc(38,roe,a),r.wc(40,ooe,l),r.wc(42,coe,s))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),Zre),soe=["errorModal"];function uoe(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"t-form-group",10),r.Vb(2,"t-relations-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).relationId=e}))("entityLoaded",(function(){return r.Ic(n),r.lc(2).onParameterLoaded()})),r.Ub(),r.Ub(),r.Sb()}if(2&e){var i=r.lc(2);r.Bb(1),r.sc("label",i.labelRelation_Smart),r.Bb(1),r.sc("ngModel",i.relationId)("definitionIds",i.definitionIdsRelation_Smart)("additionalSelect",i.relationAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function doe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Vb(2,"t-currencies-picker",37),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).currencyId=e})),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.sc("label",r.nc(1,5,"Entry_Currency")),r.Bb(2),r.sc("ngModel",i.currencyId)("additionalSelect",i.currencyAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function boe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).custodianId=e})),r.Ub()}if(2&e){var i=r.lc(4);r.sc("ngModel",i.custodianId)("definitionIds",i.definitionIdsCustodian_Manual)("showCreate",!1)}}function foe(e,t){if(1&e&&(r.Vb(0,"t-view-link",41),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(4),o=i.link("relations/")+(null==(n=i.ws.get("Relation",i.readonlyValueCustodianId_Manual))?null:n.DefinitionId);r.sc("link",o)("itemId",i.readonlyValueCustodianId_Manual),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Relation",i.readonlyValueCustodianId_Manual,"Name")," ")}}function moe(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.Rc(1,boe,1,3,"t-relations-picker",38),r.Rc(2,foe,2,3,"t-view-link",39),r.Ub()),2&e){var n=r.lc(3);r.sc("label",n.labelCustodian_Manual),r.Bb(1),r.sc("ngIf",!n.readonlyCustodian_Manual),r.Bb(1),r.sc("ngIf",n.readonlyCustodian_Manual)}}function goe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custodies-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).custodyId=e}))("entityLoaded",(function(){return r.Ic(n),r.lc(4).onParameterLoaded()})),r.Ub()}if(2&e){var i=r.lc(4);r.sc("ngModel",i.custodyId)("definitionIds",i.definitionIdsCustody_Manual)("additionalSelect",i.custodyAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function poe(e,t){if(1&e&&(r.Vb(0,"t-view-link",41),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(4),o=i.link("custodies/")+(null==(n=i.ws.get("Custody",i.readonlyValueCustodyId_Manual))?null:n.DefinitionId);r.sc("link",o)("itemId",i.readonlyValueCustodyId_Manual),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Custody",i.readonlyValueCustodyId_Manual,"Name")," ")}}function hoe(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.Rc(1,goe,1,5,"t-custodies-picker",42),r.Rc(2,poe,2,3,"t-view-link",39),r.Ub()),2&e){var n=r.lc(3);r.sc("label",n.labelCustody_Manual),r.Bb(1),r.sc("ngIf",!n.readonlyCustody_Manual),r.Bb(1),r.sc("ngIf",n.readonlyCustody_Manual)}}function voe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-relations-picker",40),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).participantId=e})),r.Ub()}if(2&e){var i=r.lc(4);r.sc("ngModel",i.participantId)("definitionIds",i.definitionIdsParticipant_Manual)("showCreate",!1)}}function yoe(e,t){if(1&e&&(r.Vb(0,"t-view-link",41),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(4),o=i.link("relations/")+(null==(n=i.ws.get("Relation",i.readonlyValueParticipantId_Manual))?null:n.DefinitionId);r.sc("link",o)("itemId",i.readonlyValueParticipantId_Manual),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Relation",i.readonlyValueParticipantId_Manual,"Name")," ")}}function Ioe(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.Rc(1,voe,1,3,"t-relations-picker",38),r.Rc(2,yoe,2,3,"t-view-link",39),r.Ub()),2&e){var n=r.lc(3);r.sc("label",n.labelParticipant_Manual),r.Bb(1),r.sc("ngIf",!n.readonlyParticipant_Manual),r.Bb(1),r.sc("ngIf",n.readonlyParticipant_Manual)}}function Coe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-resources-picker",34),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).resourceId=e}))("entityLoaded",(function(){return r.Ic(n),r.lc(4).onParameterLoaded()})),r.Ub()}if(2&e){var i=r.lc(4);r.sc("ngModel",i.resourceId)("definitionIds",i.definitionIdsResource_Manual)("additionalSelect",i.resourceAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function woe(e,t){if(1&e&&(r.Vb(0,"t-view-link",41),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(4),o=i.link("resources/")+(null==(n=i.ws.get("Resource",i.readonlyValueResourceId_Manual))?null:n.DefinitionId);r.sc("link",o)("itemId",i.readonlyValueResourceId_Manual),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Resource",i.readonlyValueResourceId_Manual,"Name")," ")}}function koe(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.Rc(1,Coe,1,5,"t-resources-picker",42),r.Rc(2,woe,2,3,"t-view-link",39),r.Ub()),2&e){var n=r.lc(3);r.sc("label",n.labelResource_Manual),r.Bb(1),r.sc("ngIf",!n.readonlyResource_Manual),r.Bb(1),r.sc("ngIf",n.readonlyResource_Manual)}}function Moe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-entry-types-picker",44),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).entryTypeId=e})),r.Ub()}if(2&e){var i=r.lc(4);r.sc("ngModel",i.entryTypeId)("filter",i.filterEntryType_Manual)("showCreate",!1)}}function Voe(e,t){if(1&e&&(r.Vb(0,"t-view-link",41),r.Tc(1),r.Ub()),2&e){var n=r.lc(4);r.sc("link",n.link("entry-types"))("itemId",n.readonlyValueEntryTypeId_Manual),r.Bb(1),r.Vc(" ",n.ws.getMultilingualValue("EntryType",n.readonlyValueEntryTypeId_Manual,"Name")," ")}}function Toe(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Moe,1,3,"t-entry-types-picker",43),r.Rc(3,Voe,2,3,"t-view-link",39),r.Ub()),2&e){var n=r.lc(3);r.sc("label",r.nc(1,3,"Entry_EntryType")),r.Bb(2),r.sc("ngIf",!n.readonlyEntryType_Manual),r.Bb(1),r.sc("ngIf",n.readonlyEntryType_Manual)}}function Eoe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-centers-picker",46),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(4).centerId=e})),r.Ub()}if(2&e){var i=r.lc(4);r.sc("ngModel",i.centerId)("showCreate",!1)}}function Uoe(e,t){if(1&e&&(r.Vb(0,"t-view-link",41),r.Tc(1),r.Ub()),2&e){var n=r.lc(4);r.sc("link",n.link("centers"))("itemId",n.readonlyValueCenterId_Manual),r.Bb(1),r.Vc(" ",n.ws.getMultilingualValue("Center",n.readonlyValueCenterId_Manual,"Name")," ")}}function xoe(e,t){if(1&e&&(r.Vb(0,"t-form-group",10),r.mc(1,"translate"),r.Rc(2,Eoe,1,2,"t-centers-picker",45),r.Rc(3,Uoe,2,3,"t-view-link",39),r.Ub()),2&e){var n=r.lc(3);r.sc("label",r.nc(1,3,"Entry_Center")),r.Bb(2),r.sc("ngIf",!n.readonlyCenter_Manual),r.Bb(1),r.sc("ngIf",n.readonlyCenter_Manual)}}function Roe(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"t-form-group",10),r.mc(2,"translate"),r.Vb(3,"t-accounts-picker",35),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).accountId=e}))("entityLoaded",(function(){return r.Ic(n),r.lc(2).onParameterLoaded()})),r.Ub(),r.Ub(),r.Rc(4,doe,3,7,"t-form-group",36),r.Rc(5,moe,3,3,"t-form-group",36),r.Rc(6,hoe,3,3,"t-form-group",36),r.Rc(7,Ioe,3,3,"t-form-group",36),r.Rc(8,koe,3,3,"t-form-group",36),r.Rc(9,Toe,4,5,"t-form-group",36),r.Rc(10,xoe,4,5,"t-form-group",36),r.Sb()}if(2&e){var i=r.lc(2);r.Bb(1),r.sc("label",r.nc(2,12,"Entry_Account")+" *"),r.Bb(2),r.sc("ngModel",i.accountId)("additionalSelect",i.accountAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1),r.Bb(1),r.sc("ngIf",i.showCurrencyParameter),r.Bb(1),r.sc("ngIf",i.showCustodianParameter),r.Bb(1),r.sc("ngIf",i.showCustodyParameter),r.Bb(1),r.sc("ngIf",i.showParticipantParameter),r.Bb(1),r.sc("ngIf",i.showResourceParameter),r.Bb(1),r.sc("ngIf",i.showEntryTypeParameter),r.Bb(1),r.sc("ngIf",i.showCenterParameter)}}function Doe(e,t){1&e&&r.Qb(0,"t-spinner",47)}function Boe(e,t){if(1&e&&(r.Vb(0,"div",48),r.Qb(1,"fa-icon",49),r.Tc(2),r.Ub()),2&e){var n=r.lc(2);r.Bb(2),r.Vc(" \xa0 ",n.information()," ")}}function Soe(e,t){if(1&e&&(r.Vb(0,"th"),r.Tc(1),r.Ub()),2&e){var n=t.$implicit,i=r.lc(3);r.Qc("width",i.fromWeight(n.weight)),r.Gb("text-right",n.isRightAligned),r.Bb(1),r.Vc(" ",n.label()," ")}}function _oe(e,t){if(1&e&&(r.Tb(0),r.Tc(1),r.mc(2,"dateFormat"),r.Sb()),2&e){var n=r.lc(5);r.Bb(1),r.Vc(" ",r.nc(2,1,n.fromDate)," ")}}function Ooe(e,t){1&e&&(r.Tb(0),r.Tc(1),r.mc(2,"translate"),r.Sb()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"OpeningBalance")," "))}function Loe(e,t){if(1&e&&(r.Tb(0),r.Tc(1),r.Sb()),2&e){var n=r.lc(5);r.Bb(1),r.Vc(" \u200c",n.openingQuantityDisplay,"\u200c ")}}function Foe(e,t){if(1&e&&(r.Tb(0),r.Tc(1),r.Sb()),2&e){var n=r.lc(5);r.Bb(1),r.Vc(" \u200c",n.openingMonetaryValueDisplay,"\u200c ")}}function Aoe(e,t){if(1&e&&(r.Tb(0),r.Tc(1),r.Sb()),2&e){var n=r.lc(5);r.Bb(1),r.Vc(" \u200c",n.openingDisplay,"\u200c ")}}function Poe(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,_oe,3,3,"ng-container",62),r.Rc(2,Ooe,3,3,"ng-container",62),r.Rc(3,Loe,2,1,"ng-container",62),r.Rc(4,Foe,2,1,"ng-container",62),r.Rc(5,Aoe,2,1,"ng-container",62),r.Ub()),2&e){var n=t.$implicit;r.Gb("text-right",n.isRightAligned),r.Bb(1),r.sc("ngIf","PostingDate"===n.id),r.Bb(1),r.sc("ngIf","SerialNumber"===n.id),r.Bb(1),r.sc("ngIf","QuantityAccumulation"===n.id),r.Bb(1),r.sc("ngIf","MonetaryValueAccumulation"===n.id),r.Bb(1),r.sc("ngIf","Accumulation"===n.id)}}function Noe(e,t){if(1&e&&(r.Vb(0,"tr",60),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Rc(3,Poe,6,7,"td",61),r.Vb(4,"td"),r.Tc(5,"\u200c"),r.Ub(),r.Ub()),2&e){var n=r.lc(3);r.Bb(3),r.sc("ngForOf",n.columns)}}function joe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"tr",63),r.hc("click",(function(){return r.Ic(n),r.lc(3).onPreviousPage()})),r.Vb(1,"td",64),r.Tc(2,"..."),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(1),r.sc("colSpan",i.columns.length+2)}}function Woe(e,t){if(1&e&&(r.Vb(0,"td"),r.Tc(1),r.Ub()),2&e){var n=t.$implicit,i=r.lc().$implicit;r.Gb("text-right",n.isRightAligned),r.Bb(1),r.Vc(" ",n.display(i),"\u200c ")}}function qoe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"tr",63),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc(3).onSelectRow(e)})),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Rc(3,Woe,2,3,"td",61),r.Vb(4,"td"),r.Tc(5,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(3),r.sc("ngForOf",i.columns)}}function Qoe(e,t){if(1&e){var n=r.Wb();r.Vb(0,"tr",63),r.hc("click",(function(){return r.Ic(n),r.lc(3).onNextPage()})),r.Vb(1,"td",64),r.Tc(2,"..."),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(1),r.sc("colSpan",i.columns.length+2)}}function Hoe(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"span"),r.Tc(2),r.mc(3,"dateFormat"),r.Ub(),r.Sb()),2&e){var n=r.lc(5);r.Bb(2),r.Uc(r.nc(3,1,n.toDate))}}function $oe(e,t){1&e&&(r.Tb(0),r.Vb(1,"span"),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Sb()),2&e&&(r.Bb(2),r.Uc(r.nc(3,1,"ClosingBalance")))}function Goe(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"span",65),r.Tc(2),r.Ub(),r.Sb()),2&e){var n=r.lc(5);r.Bb(2),r.Vc("\u200c",n.closingDisplay,"\u200c")}}function zoe(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"span",65),r.Tc(2),r.Ub(),r.Sb()),2&e){var n=r.lc(5);r.Bb(2),r.Vc("\u200c",n.closingQuantityDisplay,"\u200c")}}function Joe(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"span",65),r.Tc(2),r.Ub(),r.Sb()),2&e){var n=r.lc(5);r.Bb(2),r.Vc("\u200c",n.closingMonetaryValueDisplay,"\u200c")}}function Koe(e,t){if(1&e&&(r.Vb(0,"td"),r.Rc(1,Hoe,4,3,"ng-container",62),r.Rc(2,$oe,4,3,"ng-container",62),r.Rc(3,Goe,3,1,"ng-container",62),r.Rc(4,zoe,3,1,"ng-container",62),r.Rc(5,Joe,3,1,"ng-container",62),r.Ub()),2&e){var n=t.$implicit;r.Gb("text-right",n.isRightAligned),r.Bb(1),r.sc("ngIf","PostingDate"===n.id),r.Bb(1),r.sc("ngIf","SerialNumber"===n.id),r.Bb(1),r.sc("ngIf","Accumulation"===n.id),r.Bb(1),r.sc("ngIf","QuantityAccumulation"===n.id),r.Bb(1),r.sc("ngIf","MonetaryValueAccumulation"===n.id)}}function Yoe(e,t){if(1&e&&(r.Vb(0,"tr",60),r.Vb(1,"td"),r.Tc(2,"\u200c"),r.Ub(),r.Rc(3,Koe,6,7,"td",61),r.Vb(4,"td"),r.Tc(5,"\u200c"),r.Ub(),r.Ub()),2&e){var n=r.lc(3);r.Bb(3),r.sc("ngForOf",n.columns)}}function Xoe(e,t){1&e&&(r.Vb(0,"div",66),r.Qb(1,"t-spinner",67),r.Ub()),2&e&&(r.Bb(1),r.sc("scale",2))}function Zoe(e,t){if(1&e&&(r.Vb(0,"div",68),r.Vb(1,"t-error-message"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(3);r.Bb(2),r.Vc(" ",n.errorMessage," ")}}function ece(e,t){if(1&e&&(r.Vb(0,"div",50),r.Vb(1,"cdk-virtual-scroll-viewport",51),r.Vb(2,"table",52),r.Vb(3,"thead"),r.Vb(4,"tr"),r.Qb(5,"th",53),r.Rc(6,Soe,2,5,"th",54),r.Qb(7,"th",53),r.Ub(),r.Ub(),r.Vb(8,"tbody"),r.Rc(9,Noe,6,1,"tr",55),r.Rc(10,joe,3,1,"tr",56),r.Rc(11,qoe,6,1,"tr",57),r.Rc(12,Qoe,3,1,"tr",56),r.Rc(13,Yoe,6,1,"tr",55),r.Ub(),r.Ub(),r.Rc(14,Xoe,2,1,"div",58),r.Rc(15,Zoe,3,1,"div",59),r.Ub(),r.Ub()),2&e){var n=r.lc(2);r.Bb(6),r.sc("ngForOf",n.columns),r.Bb(3),r.sc("ngIf",n.showOpeningBalance),r.Bb(1),r.sc("ngIf",n.canPreviousPage),r.Bb(1),r.sc("cdkVirtualForOf",n.entities),r.Bb(1),r.sc("ngIf",n.canNextPage),r.Bb(1),r.sc("ngIf",n.showClosingBalance),r.Bb(1),r.sc("ngIf",n.showSpinner),r.Bb(1),r.sc("ngIf",n.showErrorMessage)}}var tce=function(){return{updateOn:"blur"}};function nce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",3),r.Vb(1,"div",4),r.Vb(2,"div",5),r.Vb(3,"ul",6),r.Vb(4,"li",7),r.Tc(5),r.Ub(),r.Ub(),r.Ub(),r.Vb(6,"div",8),r.Vb(7,"div",9),r.Vb(8,"t-form-group",10),r.mc(9,"translate"),r.Vb(10,"t-date-picker",11),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().fromDate=e})),r.Ub(),r.Ub(),r.Vb(11,"t-form-group",10),r.mc(12,"translate"),r.Vb(13,"t-date-picker",11),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().toDate=e})),r.Ub(),r.Ub(),r.Rc(14,uoe,3,6,"ng-container",12),r.Rc(15,Roe,11,14,"ng-container",12),r.Vb(16,"t-form-group",10),r.mc(17,"translate"),r.Vb(18,"div",13),r.Vb(19,"input",14),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().includeCompleted=e})),r.Ub(),r.Vb(20,"label",15),r.Tc(21,"\u200c"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(22,"div",16),r.Vb(23,"div",17),r.Vb(24,"button",18),r.hc("click",(function(){return r.Ic(n),r.lc().onExport()})),r.Qb(25,"fa-icon",19),r.Vb(26,"span",20),r.Tc(27),r.mc(28,"translate"),r.Ub(),r.Ub(),r.Rc(29,Doe,1,0,"t-spinner",21),r.Ub(),r.Vb(30,"div"),r.Vb(31,"button",22),r.hc("click",(function(){return r.Ic(n),r.lc().onRefresh()})),r.mc(32,"translate"),r.Qb(33,"fa-icon",23),r.Ub(),r.Vb(34,"div",24),r.Vb(35,"span",25),r.Vb(36,"span"),r.Tc(37),r.mc(38,"number"),r.Ub(),r.Tc(39," - "),r.Vb(40,"span"),r.Tc(41),r.mc(42,"number"),r.Ub(),r.Ub(),r.Vb(43,"span",25),r.Tc(44),r.Ub(),r.Ub(),r.Vb(45,"button",26),r.hc("click",(function(){return r.Ic(n),r.lc().onPreviousPage()})),r.mc(46,"translate"),r.Qb(47,"fa-icon",27),r.Ub(),r.Vb(48,"button",26),r.hc("click",(function(){return r.Ic(n),r.lc().onNextPage()})),r.mc(49,"translate"),r.Qb(50,"fa-icon",28),r.Ub(),r.Vb(51,"button",29),r.hc("click",(function(){return r.Ic(n),r.lc().onToggleCollapseParameters()})),r.mc(52,"translate"),r.Qb(53,"fa-icon",30),r.Vb(54,"span",20),r.Tc(55),r.mc(56,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(57,"div",31),r.Rc(58,Boe,3,1,"div",32),r.Rc(59,ece,16,8,"div",33),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(5),r.Vc(" ",i.title," "),r.Bb(1),r.Gb("d-none",i.collapseParameters),r.Bb(1),r.sc("ngSwitch",i.type),r.Bb(1),r.sc("label",r.nc(9,32,"FromDate")+" *"),r.Bb(2),r.sc("ngModel",i.fromDate)("ngModelOptions",r.vc(54,tce)),r.Bb(1),r.sc("label",r.nc(12,34,"ToDate")+" *"),r.Bb(2),r.sc("ngModel",i.toDate)("ngModelOptions",r.vc(55,tce)),r.Bb(1),r.sc("ngSwitchCase","relation"),r.Bb(1),r.sc("ngSwitchCase","account"),r.Bb(1),r.sc("label",r.nc(17,36,"IncludeCompleted")),r.Bb(3),r.sc("ngModel",i.includeCompleted),r.Bb(5),r.sc("disabled",!i.canExport),r.Bb(3),r.Vc("\xa0\xa0",r.nc(28,38,"Export"),""),r.Bb(2),r.sc("ngIf",i.showExportSpinner),r.Bb(2),r.tc("title",r.nc(32,40,"Refresh")),r.Bb(6),r.Uc(r.nc(38,42,i.from)),r.Bb(4),r.Uc(r.nc(42,44,i.to)),r.Bb(3),r.Vc(" / ",i.totalDisplay,""),r.Bb(1),r.tc("title",r.nc(46,46,"Previous")),r.sc("disabled",!i.canPreviousPage),r.Bb(2),r.sc("flip",i.flip),r.Bb(1),r.tc("title",r.nc(49,48,"Next")),r.sc("disabled",!i.canNextPage),r.Bb(2),r.sc("flip",i.flip),r.Bb(1),r.tc("title",r.nc(52,50,i.collapseParameters?"Expand":"Collapse")),r.Bb(2),r.sc("icon",i.collapseParameters?"angle-down":"angle-up"),r.Bb(2),r.Vc("\xa0\xa0",r.nc(56,52,i.collapseParameters?"Expand":"Collapse"),""),r.Bb(3),r.sc("ngIf",i.showInformation),r.Bb(1),r.sc("ngIf",!i.showInformation)}}function ice(e,t){1&e&&r.Qb(0,"t-application-page-not-found")}function rce(e,t){if(1&e&&(r.Vb(0,"div",69),r.Vb(1,"h5",70),r.Qb(2,"fa-icon",71),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",72),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(6,"span",73),r.Tc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",74),r.Tc(9),r.Ub(),r.Vb(10,"div",75),r.Vb(11,"button",76),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(12,"fa-icon",77),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,3,"Error")," "),r.Bb(6),r.Vc(" ",n.actionErrorMessage," "),r.Bb(4),r.Vc(" \xa0",r.nc(14,5,"Dismiss")," ")}}var oce,cce,ace,lce=((ace=function(){function e(t,n,i,r,o,c,a){_classCallCheck(this,e),this.route=t,this.router=n,this.customUserSettings=i,this.translate=r,this.workspace=o,this.apiService=c,this.modalService=a,this.notifyFetch$=new U.a,this.notifyDestruct$=new U.a,this.api=this.apiService.detailsEntriesApi(this.notifyDestruct$),this.showExportSpinner=!1,this.DEFAULT_PAGE_SIZE=60,this.accountAdditionalSelect="$DocumentDetails",this.currencyAdditionalSelect="E",this.relationAdditionalSelect="$DocumentDetails",this.custodyAdditionalSelect="$DocumentDetails",this.resourceAdditionalSelect="$DocumentDetails",this._columnsParametersHaveChanged=!1,this._collapseParameters=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.api=this.apiService.detailsEntriesApi(this.notifyDestruct$),this._subscriptions=new O.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(F.a)((function(){return e.doFetch()}))).subscribe()),this._subscriptions.add(this.route.paramMap.subscribe((function(t){var n,i=!1,r=e.state,o=r.arguments,c=_createForOfIteratorHelper(e.stringKeys);try{for(c.s();!(n=c.n()).done;){var a=n.value,l=t.get(a)||void 0;o[a]!==l&&(o[a]=l,i=!0)}}catch(I){c.e(I)}finally{c.f()}var s,u=_createForOfIteratorHelper(e.numericKeys);try{for(u.s();!(s=u.n()).done;){var d=s.value,b=+t.get(d)||void 0;o[d]!==b&&(o[d]=b,i=!0)}}catch(I){u.e(I)}finally{u.f()}var f,m=_createForOfIteratorHelper(e.booleanKeys);try{for(m.s();!(f=m.n()).done;){var g=f.value,p="true"===(t.get(g)||!1).toString();o[g]!==p&&(o[g]=p,i=!0)}}catch(I){m.e(I)}finally{m.f()}switch(e.type){case"account":break;case"relation":var h=+t.get("definitionId");h&&e.ws.definitions.Relations[h]&&(e.definitionId=h);break;default:console.error("Unhandled report type ".concat(e.type))}var v=+t.get("skip")||0;r.skip!==v&&(r.skip=v,i=!0);var y="true"===(t.get("collapse_params")||!1).toString();e._collapseParameters!==y&&(e._collapseParameters=y),i&&e.fetch()})))}},{key:"ngOnDestroy",value:function(){this.notifyDestruct$.next(),this._subscriptions.unsubscribe()}},{key:"ngOnChanges",value:function(e){[e.type].some((function(e){return!!e&&!e.isFirstChange()}))&&(this.ngOnDestroy(),this.ngOnInit())}},{key:"urlStateChanged",value:function(){var e,t=this.state,n=t.arguments,i={},r=_createForOfIteratorHelper(this.stringKeys.concat(this.numericKeys).concat(this.booleanKeys));try{for(r.s();!(e=r.n()).done;){var o=e.value,c=n[o]||void 0;c&&(i[o]=c)}}catch(a){r.e(a)}finally{r.f()}t.skip&&(i.skip=t.skip),this._collapseParameters&&(i.collapse_params=!0),this.router.navigate([".",i],{relativeTo:this.route,replaceUrl:!0})}},{key:"parametersChanged",value:function(){this.urlStateChanged(),this._columnsParametersHaveChanged=!0;var e=JSON.stringify(this.state.arguments);this.customUserSettings.save(this.argumentsKey,e),this.fetch()}},{key:"fetch",value:function(){this.notifyFetch$.next()}},{key:"computeSelect",value:function(){var e,t={},n=[],i=_createForOfIteratorHelper(this.columns);try{for(i.s();!(e=i.n()).done;){var r,o=_createForOfIteratorHelper(e.value.select);try{for(o.s();!(r=o.n()).done;){var c=r.value;t[c]||(t[c]=!0,n.push(c))}}catch(a){o.e(a)}finally{o.f()}}}catch(a){i.e(a)}finally{i.f()}return n.join(",")}},{key:"computeStatementArguments",value:function(e){e=e||this.state;var t={select:this.computeSelect(),top:this.DEFAULT_PAGE_SIZE,skip:e.skip,fromDate:Object(Oi.d)(new Date(this.fromDate)),toDate:Object(Oi.d)(new Date(this.toDate)),accountId:this.accountId};if(this.showCustodianParameter){var n=this.readonlyCustodian_Manual?this.readonlyValueCustodianId_Manual:this.custodianId;n&&(t.custodianId=n)}if(this.showCustodyParameter){var i=this.readonlyCustody_Manual?this.readonlyValueCustodyId_Manual:this.custodyId;i&&(t.custodyId=i)}if(this.showParticipantParameter){var r=this.readonlyParticipant_Manual?this.readonlyValueParticipantId_Manual:this.participantId;r&&(t.participantId=r)}if(this.showResourceParameter){var o=this.readonlyResource_Manual?this.readonlyValueResourceId_Manual:this.resourceId;o&&(t.resourceId=o)}if(this.showEntryTypeParameter){var c=this.readonlyEntryType_Manual?this.readonlyValueEntryTypeId_Manual:this.entryTypeId;c&&(t.entryTypeId=c)}if(this.showCenterParameter){var a=this.readonlyCenter_Manual?this.readonlyValueCenterId_Manual:this.centerId;a&&(t.centerId=a)}return this.currencyId&&this.showCurrencyParameter&&(t.currencyId=this.currencyId),this.includeCompleted&&(t.includeCompleted=!0),t}},{key:"doFetch",value:function(){var e=this,t=this.state;if(this.requiredParametersAreSet){if(this.loadingRequiredParameters)return t.reportStatus=S.i.loading,t.result=[],Object(L.a)();t.reportStatus=S.i.loading,t.result=[];var n=this.computeStatementArguments();return this.api.statement(n).pipe(Object(P.a)((function(n){t.reportStatus=S.i.loaded,t.result=n.Result,t.top=n.Top,t.skip=n.Skip,t.total=n.TotalCount,t.extras={opening:n.Opening,openingQuantity:n.OpeningQuantity,openingMonetaryValue:n.OpeningMonetaryValue,closing:n.Closing,closingQuantity:n.ClosingQuantity,closingMonetaryValue:n.ClosingMonetaryValue},Object(W.o)(n.RelatedEntities,e.workspace),e.workspace.notifyStateChanged()})),Object(j.a)((function(e){return t.reportStatus=S.i.error,t.errorMessage=e.error,Object(L.a)(null)})))}return t.reportStatus=S.i.information,t.information=function(){return e.translate.instant("FillRequiredFields")},Object(L.a)()}},{key:"onParameterLoaded",value:function(){this.state.reportStatus===S.i.loading&&(this._columnsParametersHaveChanged=!0,this.fetch())}},{key:"normalize",value:function(e,t){for(;e.length<t;)e.push("");return e}},{key:"displayErrorModal",value:function(e){this.actionErrorMessage=e,this.modalService.open(this.errorModal)}},{key:"onExport",value:function(){var e=this,t=this.columns,n=this.computeStatementArguments();n.top=2147483647,this.showExportSpinner=!0,this.api.statement(n).pipe(Object(P.a)((function(i){if(e.showExportSpinner=!1,i.Result.length===i.TotalCount){Object(W.o)(i.RelatedEntities,e.workspace),e.workspace.notifyStateChanged();var r=[];r.push(e.normalize([e.translate.instant("FromDate"),Object(Me.a)(n.fromDate,e.workspace,e.translate)],t.length)),r.push(e.normalize([e.translate.instant("ToDate"),Object(Me.a)(n.toDate,e.workspace,e.translate)],t.length)),r.push(e.normalize([e.translate.instant("Entry_Account"),e.ws.getMultilingualValue("Account",n.accountId,"Name")],t.length)),n.currencyId&&r.push(e.normalize([e.translate.instant("Entry_Currency"),e.ws.getMultilingualValue("Currency",n.currencyId,"Name")],t.length)),n.custodianId&&r.push(e.normalize([e.labelCustodian_Manual,e.ws.getMultilingualValue("Relation",n.custodianId,"Name")],t.length)),n.custodyId&&r.push(e.normalize([e.labelCustody_Manual,e.ws.getMultilingualValue("Custody",n.custodyId,"Name")],t.length)),n.participantId&&r.push(e.normalize([e.labelParticipant_Manual,e.ws.getMultilingualValue("Relation",n.participantId,"Name")],t.length)),n.resourceId&&r.push(e.normalize([e.labelResource_Manual,e.ws.getMultilingualValue("Resource",n.resourceId,"Name")],t.length)),n.entryTypeId&&r.push(e.normalize([e.translate.instant("Entry_EntryType"),e.ws.getMultilingualValue("EntryType",n.entryTypeId,"Name")],t.length)),n.centerId&&r.push(e.normalize([e.translate.instant("Entry_Center"),e.ws.getMultilingualValue("Center",n.centerId,"Name")],t.length)),n.includeCompleted&&r.push(e.normalize([e.translate.instant("IncludeCompleted"),e.translate.instant("Yes")],t.length)),r.push(e.normalize([],t.length));var o,c=[],a=_createForOfIteratorHelper(t);try{for(a.s();!(o=a.n()).done;){var l=o.value;c.push(l.label())}}catch(w){a.e(w)}finally{a.f()}r.push(c);var s,u=[],d=[],b=_createForOfIteratorHelper(t);try{for(b.s();!(s=b.n()).done;)switch(s.value.id){case"PostingDate":u.push(Object(Me.a)(n.fromDate,e.workspace,e.translate)),d.push(Object(Me.a)(n.toDate,e.workspace,e.translate));break;case"SerialNumber":u.push(e.translate.instant("OpeningBalance")),d.push(e.translate.instant("ClosingBalance"));break;case"QuantityAccumulation":u.push(Object(ug.a)(i.OpeningQuantity,"1.0-4")),d.push(Object(ug.a)(i.ClosingQuantity,"1.0-4"));break;case"MonetaryValueAccumulation":u.push(Object(ug.a)(i.OpeningMonetaryValue,e.monetaryValueDigitsInfo)),d.push(Object(ug.a)(i.ClosingMonetaryValue,e.monetaryValueDigitsInfo));break;case"Accumulation":u.push(Object(ug.a)(i.Opening,e.functionalDigitsInfo)),d.push(Object(ug.a)(i.Closing,e.functionalDigitsInfo));break;default:u.push(""),d.push("")}}catch(w){b.e(w)}finally{b.f()}r.push(u);var f,m=_createForOfIteratorHelper(i.Result);try{for(m.s();!(f=m.n()).done;){var g,p=f.value,h=[],v=_createForOfIteratorHelper(t);try{for(v.s();!(g=v.n()).done;){var y=g.value;h.push(y.exportDisplay?y.exportDisplay(p):y.display(p))}}catch(w){v.e(w)}finally{v.f()}r.push(h)}}catch(w){m.e(w)}finally{m.f()}r.push(d);var I="".concat(e.translate.instant("AccountStatement"),".csv"),C=Object(W.g)(r);Object(W.i)(C,I)}else e.displayErrorModal("Too many rows")})),Object(j.a)((function(t){return e.showExportSpinner=!1,e.displayErrorModal(t.error||t),Object(L.a)()}))).subscribe()}},{key:"onRefresh",value:function(){this.state.reportStatus!==S.i.loading&&this.fetch()}},{key:"onPreviousPage",value:function(){var e=this.state;e.skip=Math.max(e.skip-this.DEFAULT_PAGE_SIZE,0),this.urlStateChanged(),this.fetch()}},{key:"onNextPage",value:function(){var e=this.state;e.skip=e.skip+this.DEFAULT_PAGE_SIZE,this.urlStateChanged(),this.fetch()}},{key:"link",value:function(e){switch(this.type){case"account":return"../".concat(e);case"relation":return"../../".concat(e);default:console.error("Unhandled report type ".concat(this.type))}}},{key:"account",value:function(e){return this.ws.get("Account",e=e||this.accountId)}},{key:"accountType",value:function(){var e=this.account();return e&&e.AccountTypeId?this.ws.get("AccountType",e.AccountTypeId):null}},{key:"getAccountResourceCustodyCurrencyId",value:function(){var e=this.account(),t=this.resource(),n=this.custody();return(e?e.CurrencyId:null)||(t?t.CurrencyId:null)||(n?n.CurrencyId:null)}},{key:"custody",value:function(){var e=this.account();return this.ws.get("Custody",(e?e.CustodyId:null)||(e&&e.CustodyDefinitionId?this.custodyId:null))}},{key:"resource",value:function(){var e=this.account();return this.ws.get("Resource",(e?e.ResourceId:null)||(e&&e.ResourceDefinitionId?this.resourceId:null))}},{key:"resourceDefinition",value:function(){var e=this.resource();if(e&&e.DefinitionId)return this.ws.definitions.Resources[e.DefinitionId]}},{key:"getAccountResourceCustodyCenterId",value:function(){var e=this.account(),t=this.resource(),n=this.custody();return(e?e.CenterId:null)||(t?e.IsBusinessUnit?t.CenterId:t.CostCenterId:null)||(n&&e.IsBusinessUnit?n.CenterId:null)}},{key:"information",value:function(){return this.state.information()}},{key:"digitsInfo",value:function(e){var t=this.ws.get("Currency",e);if(t){var n=t.E||0;return"1.".concat(n,"-").concat(n)}return this.functionalDigitsInfo}},{key:"fromWeight",value:function(e){var t=this.columns.map((function(e){return e.weight})).reduce((function(e,t){return e+t}));return 0===t?"100%":e/t*100+"%"}},{key:"onSelectRow",value:function(e){var t=this.ws.get("LineForQuery",e.LineId),n=this.ws.get("Document",t.DocumentId);this.router.navigate(["../documents",n.DefinitionId,n.Id,{state_key:"from_statement",tab:-10}],{relativeTo:this.route})}},{key:"onToggleCollapseParameters",value:function(){this.collapseParameters=!this.collapseParameters}},{key:"numericKeys",get:function(){switch(this.type){case"account":return["account_id","custodian_id","custody_id","participant_id","resource_id","entry_type_id","center_id"];case"relation":return["relation_id","account_id","resource_id"];default:console.error("Unhandled report type ".concat(this.type))}}},{key:"stringKeys",get:function(){switch(this.type){case"account":return["from_date","to_date","currency_id"];case"relation":return["from_date","to_date"];default:console.error("Unhandled report type ".concat(this.type))}}},{key:"booleanKeys",get:function(){switch(this.type){case"account":case"relation":return["include_completed"];default:console.error("Unhandled report type ".concat(this.type))}}},{key:"relationDefinition",get:function(){return this.ws.definitions.Relations[this.definitionId]}},{key:"argumentsKey",get:function(){switch(this.type){case"account":return"account-statement/arguments";case"relation":return"relation-statement/".concat(this.definitionId,"/arguments");default:console.error("Unhandled report type ".concat(this.type))}}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"requiredParametersAreSet",get:function(){var e=this.state.arguments;switch(this.type){case"account":return!!e.from_date&&!!e.to_date&&!!e.account_id;case"relation":return!!(e.from_date&&e.to_date&&e.relation_id&&e.account_id);default:console.error("Unknown report type ".concat(this.type))}}},{key:"loadingRequiredParameters",get:function(){switch(this.type){case"account":return!(!this.accountId||this.account())||!(!this.showResourceParameter||this.readonlyResource_Manual||!this.resourceId||this.ws.get("Resource",this.resourceId))||!(!this.showCustodyParameter||this.readonlyCustody_Manual||!this.custodyId||this.ws.get("Custody",this.custodyId));case"relation":default:console.error("Unknown report type ".concat(this.type))}}},{key:"found",get:function(){switch(this.type){case"account":return!0;case"relation":return!!this.relationDefinition;default:return console.error("Unhandled report type ".concat(this.type)),!1}}},{key:"title",get:function(){switch(this.type){case"account":return this.translate.instant("AccountStatement");case"relation":return this.translate.instant("StatementOf0",{0:this.ws.getMultilingualValueImmediate(this.relationDefinition,"TitleSingular")});default:return console.error("Unhandled report type ".concat(this.type)),"???"}}},{key:"actionsDropdownPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}},{key:"flip",get:function(){return this.workspace.ws.isRtl?"horizontal":null}},{key:"canExport",get:function(){return this.isLoaded}},{key:"stateKey",get:function(){switch(this.type){case"account":return"account-statement";case"relation":return"relation-statement/".concat(this.definitionId);default:console.error("Unhandled report type ".concat(this.type))}}},{key:"state",get:function(){var e=this.stateKey,t=this.workspace.currentTenant;return t.statementState[e]||(t.statementState[e]=new S.k),t.statementState[e]}},{key:"from",get:function(){return Math.min(this.state.skip+1,this.total)}},{key:"to",get:function(){var e=this.state;return Math.min(e.skip+this.DEFAULT_PAGE_SIZE,e.total)}},{key:"total",get:function(){return this.state.total}},{key:"totalDisplay",get:function(){var e=this.total;return e>=S.d?Object(x.L)(S.d-1,"en-GB")+"+":Object(x.L)(e,"en-GB")}},{key:"canPreviousPage",get:function(){return this.state.skip>0}},{key:"canNextPage",get:function(){return this.to<this.total}},{key:"includeCompleted",get:function(){return this.state.arguments.include_completed},set:function(e){var t=this.state.arguments;t.include_completed!==e&&(t.include_completed=e,this.parametersChanged())}},{key:"fromDate",get:function(){return this.state.arguments.from_date},set:function(e){var t=this.state.arguments;t.from_date!==e&&(t.from_date=e,this.parametersChanged())}},{key:"toDate",get:function(){return this.state.arguments.to_date},set:function(e){var t=this.state.arguments;t.to_date!==e&&(t.to_date=e,this.parametersChanged())}},{key:"accountId",get:function(){return this.state.arguments.account_id},set:function(e){var t=this.state.arguments;t.account_id!==e&&(t.account_id=e,this.parametersChanged())}},{key:"currencyId",get:function(){return this.state.arguments.currency_id},set:function(e){var t=this.state.arguments;t.currency_id!==e&&(t.currency_id=e,this.parametersChanged())}},{key:"showCurrencyParameter",get:function(){return!!this.account()&&!this.getAccountResourceCustodyCurrencyId()}},{key:"readonlyValueCurrencyId",get:function(){return this.getAccountResourceCustodyCurrencyId()||this.currencyId}},{key:"functionalId",get:function(){return this.ws.settings.FunctionalCurrencyId}},{key:"custodianId",get:function(){return this.state.arguments.custodian_id},set:function(e){var t=this.state.arguments;t.custodian_id!==e&&(t.custodian_id=e,this.parametersChanged())}},{key:"showCustodianParameter",get:function(){var e=this.accountType();return!!e&&!!e.CustodianDefinitionId}},{key:"readonlyCustodian_Manual",get:function(){var e=this.account(),t=this.custody();return!!e&&!!e.CustodianId||!!t&&!!t.CustodianId}},{key:"readonlyValueCustodianId_Manual",get:function(){var e=this.account(),t=this.custody();return e?e.CustodianId:t?t.CustodianId:null}},{key:"labelCustodian_Manual",get:function(){var e=this.accountType(),t=e?e.CustodianDefinitionId:null;return Object(Gv.a)(this.workspace,this.translate,t).titleSingular()}},{key:"definitionIdsCustodian_Manual",get:function(){return[this.accountType().CustodianDefinitionId]}},{key:"custodyId",get:function(){return this.state.arguments.custody_id},set:function(e){var t=this.state.arguments;t.custody_id!==e&&(t.custody_id=e,this.parametersChanged())}},{key:"relationId",get:function(){return this.state.arguments.relation_id},set:function(e){var t=this.state.arguments;t.relation_id!==e&&(t.relation_id=e,this.parametersChanged())}},{key:"showCustodyParameter",get:function(){var e=this.account();return!!e&&!!e.CustodyDefinitionId}},{key:"readonlyCustody_Manual",get:function(){var e=this.account();return!!e&&!!e.CustodyId}},{key:"readonlyValueCustodyId_Manual",get:function(){var e=this.account();return e?e.CustodyId:null}},{key:"labelCustody_Manual",get:function(){var e=this.account(),t=e?e.CustodyDefinitionId:null;return Object(Jv.a)(this.workspace,this.translate,t).titleSingular()}},{key:"definitionIdsCustody_Manual",get:function(){return[this.account().CustodyDefinitionId]}},{key:"labelRelation_Smart",get:function(){return this.ws.getMultilingualValueImmediate(this.relationDefinition,"TitleSingular")}},{key:"definitionIdsRelation_Smart",get:function(){return[this.definitionId]}},{key:"participantId",get:function(){return this.state.arguments.participant_id},set:function(e){var t=this.state.arguments;t.participant_id!==e&&(t.participant_id=e,this.parametersChanged())}},{key:"showParticipantParameter",get:function(){var e=this.accountType();return!!e&&!!e.ParticipantDefinitionId}},{key:"readonlyParticipant_Manual",get:function(){var e=this.account(),t=this.resource();return!!e&&!!e.ParticipantId||!!t&&!!t.ParticipantId}},{key:"readonlyValueParticipantId_Manual",get:function(){var e=this.account(),t=this.resource();return e?e.CustodianId:t?t.ParticipantId:null}},{key:"labelParticipant_Manual",get:function(){var e=this.accountType(),t=e?e.ParticipantDefinitionId:null;return Object(Gv.a)(this.workspace,this.translate,t).titleSingular()}},{key:"definitionIdsParticipant_Manual",get:function(){return[this.accountType().ParticipantDefinitionId]}},{key:"resourceId",get:function(){return this.state.arguments.resource_id},set:function(e){var t=this.state.arguments;t.resource_id!==e&&(t.resource_id=e,this.parametersChanged())}},{key:"showResourceParameter",get:function(){var e=this.account();return!!e&&!!e.ResourceDefinitionId}},{key:"readonlyResource_Manual",get:function(){var e=this.account();return!!e&&!!e.ResourceId}},{key:"readonlyValueResourceId_Manual",get:function(){var e=this.account();return e?e.ResourceId:null}},{key:"labelResource_Manual",get:function(){var e=this.account(),t=e?e.ResourceDefinitionId:null;return Object($v.a)(this.workspace,this.translate,t).titleSingular()}},{key:"definitionIdsResource_Manual",get:function(){return[this.account().ResourceDefinitionId]}},{key:"entryTypeId",get:function(){return this.state.arguments.entry_type_id},set:function(e){var t=this.state.arguments;t.entry_type_id!==e&&(t.entry_type_id=e,this.parametersChanged())}},{key:"showEntryTypeParameter",get:function(){var e=this.accountType();if(e){var t=this.ws.get("EntryType",e.EntryTypeParentId);return!!t&&t.IsActive}return!1}},{key:"readonlyEntryType_Manual",get:function(){var e=this.account();return!!e&&!!e.EntryTypeId}},{key:"readonlyValueEntryTypeId_Manual",get:function(){var e=this.account();return e?e.EntryTypeId:null}},{key:"filterEntryType_Manual",get:function(){return"IsAssignable eq true and Id descof ".concat(this.accountType().EntryTypeParentId)}},{key:"centerId",get:function(){return this.state.arguments.center_id},set:function(e){var t=this.state.arguments;t.center_id!==e&&(t.center_id=e,this.parametersChanged())}},{key:"showCenterParameter",get:function(){return!!this.account()}},{key:"readonlyCenter_Manual",get:function(){return!!this.getAccountResourceCustodyCenterId()}},{key:"readonlyValueCenterId_Manual",get:function(){return this.getAccountResourceCustodyCenterId()}},{key:"showErrorMessage",get:function(){return this.state.reportStatus===S.i.error}},{key:"errorMessage",get:function(){return this.state.errorMessage}},{key:"showInformation",get:function(){return this.state.reportStatus===S.i.information}},{key:"showSpinner",get:function(){return this.state.reportStatus===S.i.loading}},{key:"showNoItemsFound",get:function(){var e=this.state;return e.reportStatus===S.i.loaded&&(!e.result||0===e.result.length)}},{key:"isLoaded",get:function(){return this.state.reportStatus===S.i.loaded}},{key:"showOpeningBalance",get:function(){return this.isLoaded&&!this.state.skip}},{key:"showClosingBalance",get:function(){return this.isLoaded&&this.to===this.total}},{key:"monetaryValueDigitsInfo",get:function(){var e=this.getAccountResourceCustodyCurrencyId()||this.currencyId||this.functionalId;return this.digitsInfo(e)}},{key:"openingDisplay",get:function(){var e=this.state.extras;if(e){var t=e.opening||0;return Object(ug.a)(t,this.functionalDigitsInfo)}return""}},{key:"openingQuantityDisplay",get:function(){var e=this.state.extras;if(e){var t=e.openingQuantity||0;return Object(ug.a)(t,"1.0-4")}return""}},{key:"openingMonetaryValueDisplay",get:function(){var e=this.state.extras;if(e){var t=e.openingMonetaryValue||0;return Object(ug.a)(t,this.monetaryValueDigitsInfo)}return""}},{key:"closingDisplay",get:function(){var e=this.state.extras;if(e){var t=e.closing||0;return Object(ug.a)(t,this.functionalDigitsInfo)}return""}},{key:"closingQuantityDisplay",get:function(){var e=this.state.extras;if(e){var t=e.closingQuantity||0;return Object(ug.a)(t,"1.0-4")}return""}},{key:"closingMonetaryValueDisplay",get:function(){var e=this.state.extras;if(e){var t=e.closingMonetaryValue||0;return Object(ug.a)(t,this.monetaryValueDigitsInfo)}return""}},{key:"entities",get:function(){return this.state.result}},{key:"functionalDigitsInfo",get:function(){var e=this.ws.settings.FunctionalCurrencyDecimals;return"1.".concat(e,"-").concat(e)}},{key:"columns",get:function(){var e=this,t=this.account(),n=this.accountType(),i=this.resource(),r=this.ws.settings;if(this._columnsAccount!==t||this._columnsAccountType!==n||this._columnsResource!==i||this._columnsSettings!==r||this._columnsParametersHaveChanged){if(this._columnsAccount=t,this._columnsAccountType=n,this._columnsResource=i,this._columnsSettings=r,this._columnsParametersHaveChanged=!1,this._columns=[{id:"PostingDate",select:["Line.PostingDate"],label:function(){return e.translate.instant("Line_PostingDate")},display:function(t){var n=e.ws.get("LineForQuery",t.LineId);return Object(Me.a)(n.PostingDate,e.workspace,e.translate)},weight:1},{id:"SerialNumber",select:["Line.Document.SerialNumber","Line.Document.DefinitionId"],label:function(){return e.translate.instant("Document_SerialNumber")},display:function(t){var n=e.ws.get("LineForQuery",t.LineId),i=e.ws.get("Document",n.DocumentId),r=Object(zv.c)(e.workspace,e.translate,i.DefinitionId).properties.SerialNumber;return Object(zv.a)(i.SerialNumber,r.prefix,r.codeWidth)},weight:1}],this._columns.push({id:"Memo",select:["Line.Memo"],label:function(){return e.translate.instant("Memo")},display:function(t){return e.ws.get("LineForQuery",t.LineId).Memo},weight:1}),!this.showCustodianParameter||this.readonlyCustodian_Manual||this.custodianId||this._columns.push({select:["Custodian.Name,Custodian.Name2,Custodian.Name3"],label:function(){return e.labelCustodian_Manual},display:function(t){return e.ws.getMultilingualValue("Relation",t.CustodianId,"Name")},weight:1}),!this.showCustodyParameter||this.readonlyCustody_Manual||this.custodyId||this._columns.push({select:["Custody.Name,Custody.Name2,Custody.Name3"],label:function(){return e.labelCustody_Manual},display:function(t){return e.ws.getMultilingualValue("Custody",t.CustodyId,"Name")},weight:1}),!this.showEntryTypeParameter||this.readonlyEntryType_Manual||this.entryTypeId||this._columns.push({select:["EntryType.Name,EntryType.Name2,EntryType.Name3"],label:function(){return e.translate.instant("Entry_EntryType")},display:function(t){return e.ws.getMultilingualValue("EntryType",t.EntryTypeId,"Name")},weight:1}),!this.showCenterParameter||this.readonlyCenter_Manual||this.centerId||this._columns.push({select:["Center.Name,Center.Name2,Center.Name3"],label:function(){return e.translate.instant("Entry_Center")},display:function(t){return e.ws.getMultilingualValue("Center",t.CenterId,"Name")},weight:1}),n&&(n.Time1Label&&this._columns.push({select:["Time1"],label:function(){return e.ws.getMultilingualValueImmediate(n,"Time1Label")},display:function(t){return Object(Me.a)(t.Time1,e.workspace,e.translate)},weight:1}),n.Time2Label&&this._columns.push({select:["Time2"],label:function(){return e.ws.getMultilingualValueImmediate(n,"Time2Label")},display:function(t){return Object(Me.a)(t.Time2,e.workspace,e.translate)},weight:1}),n.ExternalReferenceLabel&&this._columns.push({select:["ExternalReference"],label:function(){return e.ws.getMultilingualValueImmediate(n,"ExternalReferenceLabel")},display:function(e){return e.ExternalReference},weight:1}),n.InternalReferenceLabel&&this._columns.push({select:["InternalReference"],label:function(){return e.ws.getMultilingualValueImmediate(n,"InternalReferenceLabel")},display:function(e){return e.InternalReference},weight:1}),n.NotedAgentNameLabel&&this._columns.push({select:["NotedAgentName"],label:function(){return e.ws.getMultilingualValueImmediate(n,"NotedAgentNameLabel")},display:function(e){return e.NotedAgentName},weight:1}),n.NotedDateLabel&&this._columns.push({select:["NotedDate"],label:function(){return e.ws.getMultilingualValueImmediate(n,"NotedDateLabel")},display:function(t){return Object(Me.a)(t.NotedDate,e.workspace,e.translate)},weight:1}),n.NotedAmountLabel&&this._columns.push({select:["NotedAmount"],label:function(){return e.ws.getMultilingualValueImmediate(n,"NotedAmountLabel")},display:function(t){return t.NotedAmount?Object(ug.a)(t.NotedAmount,e.functionalDigitsInfo):""},weight:1})),!this.showParticipantParameter||this.readonlyParticipant_Manual||this.participantId||this._columns.push({select:["Participant.Name,Participant.Name2,Participant.Name3"],label:function(){return e.labelParticipant_Manual},display:function(t){return e.ws.getMultilingualValue("Relation",t.ParticipantId,"Name")},weight:1}),!this.showResourceParameter||this.readonlyResource_Manual||this.resourceId||this._columns.push({select:["Resource.Name,Resource.Name2,Resource.Name3"],label:function(){return e.labelResource_Manual},display:function(t){return e.ws.getMultilingualValue("Resource",t.ResourceId,"Name")},weight:1}),this.showResourceParameter){var o=this.resourceDefinition(),c=!(!o||"Single"!==o.UnitCardinality||!i||!i.UnitId||!n||n.StandardAndPure),a=c?i.UnitId:null,l=!(!o||!o.UnitCardinality||!i||!i.UnitId||!n||n.StandardAndPure),s=l?i.UnitId:null;this._columns.push({select:["Direction","Quantity"],label:function(){var t=e.translate.instant("Entry_Quantity");return c&&(t="".concat(t," (").concat(e.ws.getMultilingualValue("Unit",a,"Name"),")")),t},display:function(e){return Object(ug.a)(e.Direction*e.Quantity,"1.0-4")},isRightAligned:!0,weight:1}),c||this._columns.push({select:["Unit.Name","Unit.Name2","Unit.Name3"],label:function(){return e.translate.instant("Entry_Unit")},display:function(t){return e.ws.getMultilingualValue("Unit",t.UnitId,"Name")},weight:1}),l&&this._columns.push({id:"QuantityAccumulation",select:["Direction","BaseQuantity"],label:function(){return"".concat(e.translate.instant("DetailsEntry_QuantityAccumulation")," (").concat(e.ws.getMultilingualValue("Unit",s,"Name"),")")},display:function(e){return Object(ug.a)(e.QuantityAccumulation,"1.0-4")},isRightAligned:!0,weight:1})}var u=this.getAccountResourceCustodyCurrencyId()||this.currencyId;this.account()&&u!==this.functionalId&&(this._columns.push({select:["MonetaryValue","Direction"],label:function(){var t=e.translate.instant("Entry_MonetaryValue");return u&&(t="".concat(t," (").concat(e.ws.getMultilingualValue("Currency",u,"Name"),")")),t},display:function(t){var n=u||t.CurrencyId;return Object(ug.a)(t.Direction*t.MonetaryValue,e.digitsInfo(n))},isRightAligned:!0,weight:1}),this._columns.push(u?{id:"MonetaryValueAccumulation",select:["MonetaryValue","Direction"],label:function(){return"".concat(e.translate.instant("DetailsEntry_MonetaryValueAccumulation")," (").concat(e.ws.getMultilingualValue("Currency",u,"Name"),")")},display:function(t){return Object(ug.a)(t.MonetaryValueAccumulation,e.digitsInfo(u))},isRightAligned:!0,weight:1}:{select:["Currency.Name","Currency.Name2","Currency.Name3","Currency.E"],label:function(){return e.translate.instant("Entry_Currency")},display:function(t){return e.ws.getMultilingualValue("Currency",t.CurrencyId,"Name")},weight:1})),this._columns.push({select:["Value","Direction"],label:function(){return"".concat(e.translate.instant("Debit")," (").concat(e.ws.getMultilingualValueImmediate(r,"FunctionalCurrencyName"),")")},display:function(t){return t.Direction>0?Object(ug.a)(t.Value,e.functionalDigitsInfo):""},isRightAligned:!0,weight:1}),this._columns.push({select:["Value","Direction"],label:function(){return"".concat(e.translate.instant("Credit")," (").concat(e.ws.getMultilingualValueImmediate(r,"FunctionalCurrencyName"),")")},display:function(t){return t.Direction<0?Object(ug.a)(t.Value,e.functionalDigitsInfo):""},isRightAligned:!0,weight:1}),this._columns.push({id:"Accumulation",select:["Value","Direction"],label:function(){return"".concat(e.translate.instant("DetailsEntry_Accumulation")," (").concat(e.ws.getMultilingualValueImmediate(r,"FunctionalCurrencyName"),")")},display:function(t){return Object(ug.a)(t.Accumulation,e.functionalDigitsInfo)},isRightAligned:!0,weight:1})}return this._columns}},{key:"collapseParameters",get:function(){return this._collapseParameters},set:function(e){this._collapseParameters!==e&&(this._collapseParameters=e,this.urlStateChanged())}}]),e}()).\u0275fac=function(e){return new(e||ace)(r.Pb(i.a),r.Pb(i.e),r.Pb(ee.a),r.Pb(G.e),r.Pb(S.m),r.Pb(Y.a),r.Pb(X.t))},ace.\u0275cmp=r.Jb({type:ace,selectors:[["t-statement"]],viewQuery:function(e,t){var n;1&e&&r.Oc(soe,!0),2&e&&r.Ec(n=r.ic())&&(t.errorModal=n.first)},inputs:{type:"type"},features:[r.zb],decls:5,vars:2,consts:[["class","h-100 d-flex flex-column",4,"ngIf","ngIfElse"],["pageNotFound",""],["errorModal",""],[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"mx-auto","mb-3","w-100",2,"max-width","900px"],[1,"row","m-0","px-0","px-lg-1","py-1",3,"ngSwitch"],[1,"t-form-group",3,"label"],[3,"ngModel","ngModelOptions","ngModelChange"],[4,"ngSwitchCase"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","includecompleted",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","includecompleted",1,"custom-control-label","t-pointer"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"d-flex"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","align-self-center mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","sync-alt"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"row","t-rest-of-screen"],["class","w-100 p-3 px-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"ngModel","definitionIds","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded"],[3,"ngModel","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded"],["class","t-form-group",3,"label",4,"ngIf"],[3,"ngModel","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange"],[3,"ngModel","definitionIds","showCreate","ngModelChange",4,"ngIf"],[3,"link","itemId",4,"ngIf"],[3,"ngModel","definitionIds","showCreate","ngModelChange"],[3,"link","itemId"],[3,"ngModel","definitionIds","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded",4,"ngIf"],[3,"ngModel","filter","showCreate","ngModelChange",4,"ngIf"],[3,"ngModel","filter","showCreate","ngModelChange"],[3,"ngModel","showCreate","ngModelChange",4,"ngIf"],[3,"ngModel","showCreate","ngModelChange"],[1,"align-self-center","mx-1"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-hover","table-striped","table-sm","border-bottom","bg-white","t-master-table","text-nowrap"],[2,"width","10px"],[3,"width","text-right",4,"ngFor","ngForOf"],["class","t-no-highlight",4,"ngIf"],["class","t-pointer",3,"click",4,"ngIf"],["class","t-pointer",3,"click",4,"cdkVirtualFor","cdkVirtualForOf"],["class","w-100 p-2 d-flex justify-content-center mt-3",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],[1,"t-no-highlight"],[3,"text-right",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"t-pointer",3,"click"],[1,"text-center","font-italic","text-muted",3,"colSpan"],[1,"border-bottom","t-dark-border"],[1,"w-100","p-2","d-flex","justify-content-center","mt-3"],[3,"scale"],[1,"w-100","mt-3"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(r.Rc(0,nce,60,56,"div",0),r.Rc(1,ice,1,0,"ng-template",null,1,r.Sc),r.Rc(3,rce,15,7,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(2);r.sc("ngIf",t.found)("ngIfElse",n)}},directives:[x.u,x.y,Ce.a,dd,ie.k,ie.n,x.z,ie.a,ne.b,lf,lQ,Zu,Ca,YW,RW,PV,rd,ye.a,pr.e,pr.a,x.t,pr.d,ke.a,dn],pipes:[G.d,x.g,sg],encapsulation:2}),ace),sce=((cce=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||cce)},cce.\u0275cmp=r.Jb({type:cce,selectors:[["t-account-statement"]],decls:1,vars:0,consts:[["type","account"]],template:function(e,t){1&e&&r.Qb(0,"t-statement",0)},directives:[lce],encapsulation:2}),cce),uce=((oce=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||oce)},oce.\u0275cmp=r.Jb({type:oce,selectors:[["t-relation-statement"]],decls:1,vars:0,consts:[["type","relation"]],template:function(e,t){1&e&&r.Qb(0,"t-statement",0)},directives:[lce],encapsulation:2}),oce);function dce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",2),r.Vb(1,"t-markup-templates-master",3),r.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(e){r.Ic(n);var i=t.update;return t.modal.close(!0),i.call(null,e)}))("create",(function(){var e=t.create;return t.modal.close(!1),e.call()})),r.Ub(),r.Ub()}if(2&e){var i=t.filter,o=r.lc();r.Bb(1),r.sc("showCreate",!1)("filter",i)("additionalSelect",o.additionalSelect)}}var bce,fce=((bce=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(Za)).\u0275fac=function(e){return mce(e||bce)},bce.\u0275cmp=r.Jb({type:bce,selectors:[["t-markup-templates-picker"]],features:[r.Ab([{provide:ie.i,multi:!0,useExisting:bce}]),r.yb],decls:3,vars:6,consts:[["collection","MarkupTemplate",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["master",""],[1,"modal-body"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(r.Vb(0,"t-details-picker",0),r.hc("entityLoaded",(function(){return t.onEntityLoaded()})),r.Ub(),r.Rc(1,dce,2,3,"ng-template",null,1,r.Sc)),2&e){var n=r.Fc(2);r.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",null)("additionalSelect",t.additionalSelect)}},directives:[Xa,v3],encapsulation:2}),bce),mce=r.Xb(fce),gce=n("haWp"),pce=["errorModal"],hce=["successModal"],vce=["unsavedChangesModal"];function yce(e,t){1&e&&(r.Vb(0,"span",27),r.Tc(1,"\xa0*"),r.Ub())}function Ice(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-custodies-picker",30),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).custodyId=e}))("entityLoaded",(function(){return r.Ic(n),r.lc(2).onParameterLoaded()})),r.Ub()}if(2&e){var i=r.lc(2);r.sc("ngModel",i.custodyId)("definitionIds",i.definitionIdsCustody_Manual)("ensureAdditionalSelect",!0)("showCreate",!1)("disabled",i.isDirty)}}function Cce(e,t){if(1&e&&(r.Vb(0,"t-view-link",31),r.Tc(1),r.Ub()),2&e){var n,i=r.lc(2),o="../custodies/"+(null==(n=i.ws.get("Custody",i.readonlyValueCustodyId_Manual))?null:n.DefinitionId);r.sc("link",o)("itemId",i.readonlyValueCustodyId_Manual),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Custody",i.readonlyValueCustodyId_Manual,"Name")," ")}}function wce(e,t){if(1&e&&(r.Vb(0,"t-form-group",9),r.Rc(1,Ice,1,5,"t-custodies-picker",28),r.Rc(2,Cce,2,3,"t-view-link",29),r.Ub()),2&e){var n=r.lc();r.sc("label",n.labelCustody_Manual),r.Bb(1),r.sc("ngIf",!n.readonlyCustody_Manual),r.Bb(1),r.sc("ngIf",n.readonlyCustody_Manual)}}var kce=function(){return{updateOn:"blur"}};function Mce(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"t-form-group",9),r.mc(2,"translate"),r.Vb(3,"t-date-picker",32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().toDate=e})),r.Ub(),r.Ub(),r.Sb()}if(2&e){var i=r.lc();r.Bb(1),r.sc("label",r.nc(2,4,"AsOfDate")),r.Bb(2),r.sc("ngModel",i.toDate)("ngModelOptions",r.vc(6,kce))("disabled",i.isDirty)}}function Vce(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"t-form-group",9),r.mc(2,"translate"),r.Vb(3,"t-text-editor",32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().externalReferenceContains=e})),r.Ub(),r.Ub(),r.Vb(4,"t-form-group",9),r.mc(5,"translate"),r.Vb(6,"t-date-picker",32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().fromDate=e})),r.Ub(),r.Ub(),r.Vb(7,"t-form-group",9),r.mc(8,"translate"),r.Vb(9,"t-date-picker",32),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().toDate=e})),r.Ub(),r.Ub(),r.Vb(10,"t-form-group",9),r.mc(11,"translate"),r.Vb(12,"t-decimal-editor",33),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().fromAmount=e})),r.Ub(),r.Ub(),r.Vb(13,"t-form-group",9),r.mc(14,"translate"),r.Vb(15,"t-decimal-editor",33),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().toAmount=e})),r.Ub(),r.Ub(),r.Sb()}if(2&e){var i=r.lc();r.Bb(1),r.sc("label",r.nc(2,24,"ExternalReferenceContains")),r.Bb(2),r.sc("ngModel",i.externalReferenceContains)("ngModelOptions",r.vc(34,kce))("disabled",i.isDirty),r.Bb(1),r.sc("label",r.nc(5,26,"FromDate")),r.Bb(2),r.sc("ngModel",i.fromDate)("ngModelOptions",r.vc(35,kce))("disabled",i.isDirty),r.Bb(1),r.sc("label",r.nc(8,28,"ToDate")),r.Bb(2),r.sc("ngModel",i.toDate)("ngModelOptions",r.vc(36,kce))("disabled",i.isDirty),r.Bb(1),r.sc("label",r.nc(11,30,"FromAmount")),r.Bb(2),r.sc("ngModel",i.fromAmount)("ngModelOptions",r.vc(37,kce))("disabled",i.isDirty)("minDecimalPlaces",i.amountsDecimals)("maxDecimalPlaces",i.amountsDecimals),r.Bb(1),r.sc("label",r.nc(14,32,"ToAmount")),r.Bb(2),r.sc("ngModel",i.toAmount)("ngModelOptions",r.vc(38,kce))("disabled",i.isDirty)("minDecimalPlaces",i.amountsDecimals)("maxDecimalPlaces",i.amountsDecimals)}}var Tce=function(e,t){return{0:e,1:t}};function Ece(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div"),r.Vb(1,"span",34),r.Tc(2),r.mc(3,"translate"),r.mc(4,"accounting"),r.mc(5,"accounting"),r.Ub(),r.Vb(6,"div",35),r.Vb(7,"button",36),r.hc("click",(function(){return r.Ic(n),r.lc().onReconcileChecked()})),r.Qb(8,"fa-icon",37),r.Vb(9,"span",18),r.Tc(10),r.mc(11,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Vb(12,"button",38),r.hc("click",(function(){return r.Ic(n),r.lc().onCancelReconcileChecked()})),r.Qb(13,"fa-icon",39),r.Vb(14,"span",18),r.Tc(15),r.mc(16,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Vc(" ",r.oc(3,6,"InternalEntries0ExternalEntries1",r.xc(19,Tce,r.oc(4,9,i.checkedEntriesTotal,i.amountsFormat),r.oc(5,12,i.checkedExEntriesTotal,i.amountsFormat)))," "),r.Bb(4),r.sc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.disableReconcileChecked),r.Bb(1),r.sc("disabled",!!i.disableReconcileChecked),r.Bb(3),r.Vc("\xa0\xa0",r.nc(11,15,"Reconcile")+" (Alt+R)",""),r.Bb(5),r.Vc("\xa0\xa0",r.nc(16,17,"Cancel"),"")}}function Uce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div"),r.Vb(1,"button",40),r.hc("click",(function(){return r.Ic(n),r.lc().onSave()})),r.Qb(2,"fa-icon",41),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",42),r.hc("click",(function(){return r.Ic(n),r.lc().onCancel()})),r.Qb(6,"fa-icon",39),r.Tc(7),r.mc(8,"translate"),r.Ub(),r.Ub()}2&e&&(r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,2,"Save")," "),r.Bb(4),r.Vc("\xa0\xa0",r.nc(8,4,"Cancel")," "))}function xce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",35),r.Vb(1,"button",36),r.hc("click",(function(){r.Ic(n);var e=r.lc(2),t=r.Fc(43);return e.modalService.open(t)})),r.Qb(2,"fa-icon",48),r.Vb(3,"span",18),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.sc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.disableReport),r.Bb(1),r.sc("disabled",!!i.disableReport),r.Bb(3),r.Vc("\xa0\xa0",r.nc(5,4,"Report"),"")}}function Rce(e,t){1&e&&(r.Vb(0,"button",49),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"Actions")," "))}function Dce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",50),r.Vb(1,"button",51),r.hc("click",(function(){r.Ic(n);var e=r.lc(2),t=r.Fc(45);return e.modalService.open(t)})),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.sc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.disableAutoReconcile),r.Bb(1),r.sc("disabled",!!i.disableAutoReconcile),r.Bb(1),r.Vc(" ",r.nc(3,4,"AutoReconcile")," ")}}function Bce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",50),r.Vb(1,"button",51),r.hc("click",(function(){return r.Ic(n),r.lc(2).onExport()})),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.sc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.disableExport),r.Bb(1),r.sc("disabled",!!i.disableExport),r.Bb(1),r.Vc(" ",r.nc(3,4,"Export")," ")}}function Sce(e,t){if(1&e&&(r.Vb(0,"div"),r.Rc(1,xce,6,6,"div",43),r.Vb(2,"div",44),r.Rc(3,Rce,3,3,"button",45),r.Vb(4,"div",46),r.Rc(5,Dce,4,6,"div",47),r.Rc(6,Bce,4,6,"div",47),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(1),r.sc("ngIf",n.showReport),r.Bb(1),r.sc("placement",n.actionsDropdownPlacement),r.Bb(1),r.sc("ngIf",n.isUnreconciled),r.Bb(2),r.sc("ngIf",n.showAutoReconcile),r.Bb(1),r.sc("ngIf",n.showExport)}}function _ce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",52),r.Vb(1,"span",55),r.Tc(2),r.mc(3,"number"),r.mc(4,"number"),r.mc(5,"number"),r.Ub(),r.Vb(6,"button",56),r.hc("click",(function(){return r.Ic(n),r.lc(2).onPreviousPage()})),r.mc(7,"translate"),r.Qb(8,"fa-icon",57),r.Ub(),r.Vb(9,"button",56),r.hc("click",(function(){return r.Ic(n),r.lc(2).onNextPage()})),r.mc(10,"translate"),r.Qb(11,"fa-icon",58),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Xc(" ",r.nc(3,9,i.from)," - ",r.nc(4,11,i.to)," / ",r.nc(5,13,i.total),""),r.Bb(4),r.tc("title",r.nc(7,15,"Previous")),r.sc("disabled",!i.canPreviousPage),r.Bb(2),r.sc("flip",i.flip),r.Bb(1),r.tc("title",r.nc(10,17,"Next")),r.sc("disabled",!i.canNextPage),r.Bb(2),r.sc("flip",i.flip)}}function Oce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",52),r.Vb(1,"button",53),r.hc("click",(function(){return r.Ic(n),r.lc().onRefresh()})),r.mc(2,"translate"),r.Qb(3,"fa-icon",54),r.Ub(),r.Rc(4,_ce,12,19,"div",15),r.Ub()}if(2&e){var i=r.lc();r.Bb(1),r.tc("title",r.nc(2,3,"Refresh")),r.sc("disabled",!!i.disableRefresh),r.Bb(3),r.sc("ngIf",i.isReconciled)}}function Lce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",52),r.Vb(1,"span",82),r.Tc(2),r.mc(3,"number"),r.mc(4,"number"),r.mc(5,"number"),r.Ub(),r.Vb(6,"button",56),r.hc("click",(function(){return r.Ic(n),r.lc(2).entries_onPreviousPage()})),r.mc(7,"translate"),r.Qb(8,"fa-icon",57),r.Ub(),r.Vb(9,"button",56),r.hc("click",(function(){return r.Ic(n),r.lc(2).entries_onNextPage()})),r.mc(10,"translate"),r.Qb(11,"fa-icon",58),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Xc(" ",r.nc(3,9,i.entries_from)," - ",r.nc(4,11,i.entries_to)," / ",r.nc(5,13,i.entries_total),""),r.Bb(4),r.tc("title",r.nc(7,15,"Previous")),r.sc("disabled",!i.entries_canPreviousPage),r.Bb(2),r.sc("flip",i.flip),r.Bb(1),r.tc("title",r.nc(10,17,"Next")),r.sc("disabled",!i.entries_canNextPage),r.Bb(2),r.sc("flip",i.flip)}}function Fce(e,t){1&e&&(r.Tb(0),r.Qb(1,"th"),r.Qb(2,"th"),r.Qb(3,"th"),r.Qb(4,"th"),r.Qb(5,"th"),r.Sb())}function Ace(e,t){1&e&&r.Qb(0,"th")}function Pce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",83),r.hc("click",(function(){return r.Ic(n),r.lc(2).onDownloadTemplate()})),r.mc(1,"translate"),r.Qb(2,"fa-icon",84),r.Ub()}2&e&&r.sc("title",r.nc(1,1,"DownloadTemplate"))}function Nce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",35),r.Vb(1,"button",85),r.hc("click",(function(){return r.Ic(n),r.lc(),r.Fc(23).click()})),r.mc(2,"translate"),r.Qb(3,"fa-icon",86),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.sc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.disableImport),r.Bb(1),r.sc("disabled",!!i.disableImport)("title",r.nc(2,4,"Import"))}}function jce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",52),r.Vb(1,"span",82),r.Tc(2),r.mc(3,"number"),r.mc(4,"number"),r.mc(5,"number"),r.Ub(),r.Vb(6,"button",56),r.hc("click",(function(){return r.Ic(n),r.lc(2).ex_entries_onPreviousPage()})),r.mc(7,"translate"),r.Qb(8,"fa-icon",57),r.Ub(),r.Vb(9,"button",56),r.hc("click",(function(){return r.Ic(n),r.lc(2).ex_entries_onNextPage()})),r.mc(10,"translate"),r.Qb(11,"fa-icon",58),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.Bb(2),r.Xc(" ",r.nc(3,9,i.ex_entries_from)," - ",r.nc(4,11,i.ex_entries_to)," / ",r.nc(5,13,i.ex_entries_total),""),r.Bb(4),r.tc("title",r.nc(7,15,"Previous")),r.sc("disabled",!i.ex_entries_canPreviousPage),r.Bb(2),r.sc("flip",i.flip),r.Bb(1),r.tc("title",r.nc(10,17,"Next")),r.sc("disabled",!i.ex_entries_canNextPage),r.Bb(2),r.sc("flip",i.flip)}}function Wce(e,t){1&e&&(r.Tb(0),r.Qb(1,"th",87),r.Qb(2,"th",88),r.Qb(3,"th",89),r.Qb(4,"th",89),r.Qb(5,"th",88),r.Sb())}function qce(e,t){1&e&&r.Qb(0,"th",74)}function Qce(e,t){if(1&e&&(r.Vb(0,"t-view-link",31),r.Tc(1),r.Ub()),2&e){var n=r.lc().$implicit,i=r.lc(2);r.sc("link","../documents/"+n.entry.DocumentDefinitionId)("itemId",n.entry.DocumentId),r.Bb(1),r.Vc(" ",i.formatSerialNumber(n.entry.DocumentSerialNumber,n.entry.DocumentDefinitionId)," ")}}function Hce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",105),r.hc("click",(function(){r.Ic(n);var e=r.lc(3).$implicit;return r.lc(2).onCloneAndReconcile(e)})),r.mc(1,"translate"),r.Qb(2,"fa-icon",106),r.Ub()}2&e&&r.sc("title",r.nc(1,1,"Clone"))}function $ce(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Hce,3,3,"button",104),r.Sb()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.sc("ngIf",!n.entryReconciliation&&!n.entryIsChecked)}}function Gce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",109),r.Vb(1,"input",110),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).$implicit.entryIsChecked=e})),r.Ub(),r.Vb(2,"label",111),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3),o=i.index,c=i.$implicit;r.Bb(1),r.uc("id","entryCheck",o,""),r.sc("ngModel",c.entryIsChecked),r.Bb(1),r.uc("for","entryCheck",o,"")}}function zce(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",112),r.hc("click",(function(){r.Ic(n);var e=r.lc(3).$implicit;return r.lc(2).onUndoReconcileCheckedEntry(e)}))("mouseenter",(function(){r.Ic(n);var e=r.lc(3).$implicit;return r.lc(2).onReconciledEntryMouseEnter(e)}))("mouseleave",(function(){r.Ic(n);var e=r.lc(3).$implicit;return r.lc(2).onReconciledEntryMouseLeave(e)})),r.mc(1,"translate"),r.Vb(2,"span",113),r.Qb(3,"fa-icon",114),r.Ub(),r.Ub()}2&e&&r.sc("title",r.nc(1,1,"Unreconcile"))}function Jce(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Gce,4,3,"div",107),r.Rc(2,zce,4,3,"ng-template",null,108,r.Sc),r.Sb()),2&e){var n=r.Fc(3),i=r.lc(2).$implicit;r.Bb(1),r.sc("ngIf",!i.entryReconciliation)("ngIfElse",n)}}function Kce(e,t){if(1&e&&(r.Vb(0,"div",115),r.Qb(1,"fa-icon",116),r.Ub()),2&e){r.lc();var n=r.Fc(18),i=r.lc(3);r.sc("ngbPopover",n)("placement",i.errorPopoverPlacement)}}function Yce(e,t){if(1&e&&(r.Vb(0,"div",117),r.Qb(1,"fa-icon",118),r.Ub()),2&e){r.lc();var n=r.Fc(9),i=r.lc(3);r.sc("ngbPopover",n)("placement",i.errorPopoverPlacement)}}function Xce(e,t){if(1&e&&(r.Vb(0,"p",121),r.Qb(1,"fa-icon",122),r.Tc(2),r.Ub()),2&e){var n=t.$implicit;r.Bb(2),r.Vc(" \xa0 ",n," ")}}function Zce(e,t){if(1&e&&(r.Vb(0,"div",119),r.Rc(1,Xce,3,1,"p",120),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.sc("ngForOf",null==n.entryReconciliation||null==n.entryReconciliation.serverErrors?null:n.entryReconciliation.serverErrors.Entries)}}function eae(e,t){if(1&e&&(r.Vb(0,"div",117),r.Qb(1,"fa-icon",118),r.Ub()),2&e){r.lc();var n=r.Fc(13),i=r.lc(3);r.sc("ngbPopover",n)("placement",i.errorPopoverPlacement)}}function tae(e,t){if(1&e&&(r.Vb(0,"p",121),r.Qb(1,"fa-icon",122),r.Tc(2),r.Ub()),2&e){var n=t.$implicit;r.Bb(2),r.Vc(" \xa0 ",n," ")}}function nae(e,t){if(1&e&&(r.Vb(0,"div",119),r.Rc(1,tae,3,1,"p",120),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.sc("ngForOf",null==n.exEntryReconciliation||null==n.exEntryReconciliation.serverErrors?null:n.exEntryReconciliation.serverErrors.ExternalEntries)}}function iae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",109),r.Vb(1,"input",110),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(3).$implicit.exEntryIsChecked=e})),r.Ub(),r.Vb(2,"label",111),r.Tc(3,"\u200c"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3),o=i.index,c=i.$implicit;r.Bb(1),r.uc("id","exEntryCheck",o,""),r.sc("ngModel",c.exEntryIsChecked),r.Bb(1),r.uc("for","exEntryCheck",o,"")}}function rae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",112),r.hc("click",(function(){r.Ic(n);var e=r.lc(3).$implicit;return r.lc(2).onUndoReconciledCheckedExEntry(e)}))("mouseenter",(function(){r.Ic(n);var e=r.lc(3).$implicit;return r.lc(2).onReconciledExEntryMouseEnter(e)}))("mouseleave",(function(){r.Ic(n);var e=r.lc(3).$implicit;return r.lc(2).onReconciledExEntryMouseLeave(e)})),r.mc(1,"translate"),r.Vb(2,"span",113),r.Qb(3,"fa-icon",114),r.Ub(),r.Ub()}2&e&&r.sc("title",r.nc(1,1,"Unreconcile"))}function oae(e,t){if(1&e&&(r.Tb(0),r.Rc(1,iae,4,3,"div",107),r.Rc(2,rae,4,3,"ng-template",null,123,r.Sc),r.Sb()),2&e){var n=r.Fc(3),i=r.lc(2).$implicit;r.Bb(1),r.sc("ngIf",!i.exEntryReconciliation)("ngIfElse",n)}}function cae(e,t){if(1&e&&(r.Vb(0,"div",115),r.Qb(1,"fa-icon",116),r.Ub()),2&e){r.lc();var n=r.Fc(18),i=r.lc(3);r.sc("ngbPopover",n)("placement",i.errorPopoverPlacement)}}var aae=function(e){return{0:e}};function lae(e,t){if(1&e&&(r.Vb(0,"div",119),r.Vb(1,"p",121),r.Qb(2,"fa-icon",124),r.Tc(3),r.mc(4,"translate"),r.mc(5,"dateFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc(4);r.Bb(3),r.Vc(" \xa0 ",r.oc(4,1,"EntryReconciledAfter0",r.wc(6,aae,r.nc(5,4,n.toDate)))," ")}}function sae(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"td",95),r.Rc(2,$ce,2,1,"ng-container",13),r.Ub(),r.Vb(3,"td",95),r.Rc(4,Jce,4,2,"ng-container",13),r.Rc(5,Kce,2,2,"div",96),r.Ub(),r.Vb(6,"td",97),r.Rc(7,Yce,2,2,"div",98),r.Rc(8,Zce,2,1,"ng-template",null,99,r.Sc),r.Ub(),r.Vb(10,"td",100),r.Rc(11,eae,2,2,"div",98),r.Rc(12,nae,2,1,"ng-template",null,101,r.Sc),r.Ub(),r.Vb(14,"td",102),r.Rc(15,oae,4,2,"ng-container",13),r.Rc(16,cae,2,2,"div",96),r.Ub(),r.Rc(17,lae,6,8,"ng-template",null,103,r.Sc),r.Sb()),2&e){var n=r.lc().$implicit;r.Bb(2),r.sc("ngIf",n.entry&&!n.entry.IsReconciledLater),r.Bb(2),r.sc("ngIf",n.entry&&!n.entry.IsReconciledLater),r.Bb(1),r.sc("ngIf",n.entry&&n.entry.IsReconciledLater),r.Bb(2),r.sc("ngIf",null==n.entryReconciliation||null==n.entryReconciliation.serverErrors?null:n.entryReconciliation.serverErrors.Entries),r.Bb(4),r.sc("ngIf",null==n.exEntryReconciliation||null==n.exEntryReconciliation.serverErrors?null:n.exEntryReconciliation.serverErrors.ExternalEntries),r.Bb(4),r.sc("ngIf",n.exEntry&&!n.exEntry.IsReconciledLater),r.Bb(1),r.sc("ngIf",n.exEntry&&n.exEntry.IsReconciledLater)}}function uae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",105),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).$implicit;return r.lc(2).onDeleteReconciliation(e)})),r.mc(1,"translate"),r.Qb(2,"fa-icon",114),r.Ub()}2&e&&r.sc("title",r.nc(1,1,"Unreconcile"))}function dae(e,t){if(1&e&&(r.Vb(0,"td",125),r.Rc(1,uae,3,3,"button",104),r.Ub()),2&e){var n=r.lc().$implicit;r.Gb("border-top-0",!n.firstOne),r.Bb(1),r.sc("ngIf",n.firstOne)}}function bae(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"td",94),r.Vb(2,"t-form-group-dynamic",126),r.Vb(3,"t-date-picker",127),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(),i=t.$implicit,o=t.index;return r.lc(2).onChangePostingDate(i,o,e)})),r.Ub(),r.Ub(),r.Ub(),r.Vb(4,"td",94),r.Vb(5,"t-form-group-dynamic",126),r.Vb(6,"t-text-editor",127),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(),i=t.$implicit,o=t.index;return r.lc(2).onChangeExternalReference(i,o,e)})),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"td",128),r.Vb(8,"t-form-group-dynamic",126),r.Vb(9,"t-decimal-editor",129),r.hc("ngModelChange",(function(e){r.Ic(n);var t=r.lc(),i=t.$implicit,o=t.index;return r.lc(2).onChangeMonetaryValue(i,o,e)})),r.Ub(),r.Ub(),r.Ub(),r.Sb()}if(2&e){var i=r.lc().$implicit,o=r.lc(2);r.Bb(2),r.sc("serverErrors",null==i.exEntry||null==i.exEntry.serverErrors?null:i.exEntry.serverErrors.PostingDate),r.Bb(1),r.sc("disabled",i.exEntryReconciliation)("ngModel",i.exEntry.PostingDate)("ngModelOptions",r.vc(14,kce)),r.Bb(2),r.sc("serverErrors",null==i.exEntry||null==i.exEntry.serverErrors?null:i.exEntry.serverErrors.ExternalReference),r.Bb(1),r.sc("disabled",i.exEntryReconciliation)("ngModel",i.exEntry.ExternalReference)("ngModelOptions",r.vc(15,kce)),r.Bb(2),r.sc("serverErrors",null==i.exEntry||null==i.exEntry.serverErrors?null:i.exEntry.serverErrors.MonetaryValue),r.Bb(1),r.sc("disabled",i.exEntryReconciliation)("ngModel",o.getMonetaryValue(i.exEntry))("ngModelOptions",r.vc(16,kce))("minDecimalPlaces",o.amountsDecimals)("maxDecimalPlaces",o.amountsDecimals)}}function fae(e,t){1&e&&r.Qb(0,"fa-icon",136)}function mae(e,t){if(1&e&&(r.Vb(0,"p",121),r.Qb(1,"fa-icon",122),r.Tc(2),r.Ub()),2&e){var n=t.$implicit;r.Bb(2),r.Vc(" \xa0",n," ")}}function gae(e,t){if(1&e&&(r.Vb(0,"div",137),r.Rc(1,mae,3,1,"p",120),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.sc("ngForOf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.PostingDate)}}function pae(e,t){1&e&&r.Qb(0,"fa-icon",136)}function hae(e,t){if(1&e&&(r.Vb(0,"p",121),r.Qb(1,"fa-icon",122),r.Tc(2),r.Ub()),2&e){var n=t.$implicit;r.Bb(2),r.Vc(" \xa0",n," ")}}function vae(e,t){if(1&e&&(r.Vb(0,"div",137),r.Rc(1,hae,3,1,"p",120),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.sc("ngForOf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.ExternalReference)}}function yae(e,t){1&e&&r.Qb(0,"fa-icon",136)}function Iae(e,t){if(1&e&&(r.Vb(0,"p",121),r.Qb(1,"fa-icon",122),r.Tc(2),r.Ub()),2&e){var n=t.$implicit;r.Bb(2),r.Vc(" \xa0",n," ")}}function Cae(e,t){if(1&e&&(r.Vb(0,"div",137),r.Rc(1,Iae,3,1,"p",120),r.Ub()),2&e){var n=r.lc(2).$implicit;r.Bb(1),r.sc("ngForOf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.MonetaryValue)}}function wae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"td",130),r.hc("dblclick",(function(){r.Ic(n);var e=r.lc().$implicit;return r.lc(2).onRowDoubleClick(e)})),r.Rc(1,fae,1,0,"fa-icon",131),r.Tc(2),r.mc(3,"dateFormat"),r.Rc(4,gae,2,1,"ng-template",null,132,r.Sc),r.Ub(),r.Vb(6,"td",130),r.hc("dblclick",(function(){r.Ic(n);var e=r.lc().$implicit;return r.lc(2).onRowDoubleClick(e)})),r.Rc(7,pae,1,0,"fa-icon",131),r.Tc(8),r.Rc(9,vae,2,1,"ng-template",null,133,r.Sc),r.Ub(),r.Vb(11,"td",134),r.hc("dblclick",(function(){r.Ic(n);var e=r.lc().$implicit;return r.lc(2).onRowDoubleClick(e)})),r.Rc(12,yae,1,0,"fa-icon",131),r.Tc(13),r.mc(14,"accounting"),r.Rc(15,Cae,2,1,"ng-template",null,135,r.Sc),r.Ub()}if(2&e){var i=r.Fc(5),o=r.Fc(10),c=r.lc().$implicit,a=r.lc(2);r.sc("ngbPopover",null!=c.exEntry&&null!=c.exEntry.serverErrors&&c.exEntry.serverErrors.PostingDate?i:null)("placement",a.errorPopoverPlacement),r.Bb(1),r.sc("ngIf",null==c.exEntry||null==c.exEntry.serverErrors?null:c.exEntry.serverErrors.PostingDate),r.Bb(1),r.Vc(" ",r.nc(3,12,null==c.exEntry?null:c.exEntry.PostingDate)," "),r.Bb(4),r.sc("ngbPopover",null!=c.exEntry&&null!=c.exEntry.serverErrors&&c.exEntry.serverErrors.ExternalReference?o:null)("placement",a.errorPopoverPlacement),r.Bb(1),r.sc("ngIf",null==c.exEntry||null==c.exEntry.serverErrors?null:c.exEntry.serverErrors.ExternalReference),r.Bb(1),r.Vc(" ",null==c.exEntry?null:c.exEntry.ExternalReference," "),r.Bb(3),r.sc("ngbPopover",null!=c.exEntry&&null!=c.exEntry.serverErrors&&c.exEntry.serverErrors.MonetaryValue?o:null)("placement",a.errorPopoverPlacement),r.Bb(1),r.sc("ngIf",null==c.exEntry||null==c.exEntry.serverErrors?null:c.exEntry.serverErrors.MonetaryValue),r.Bb(1),r.Vc(" ",c.exEntry?r.oc(14,14,(null==c.exEntry?null:c.exEntry.MonetaryValue)*(null==c.exEntry?null:c.exEntry.Direction),a.amountsFormat):""," ")}}function kae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",145),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).$implicit;return r.lc(2).onEditExEntry(e)})),r.Tc(1),r.mc(2,"translate"),r.Ub()}2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"Edit")," "))}function Mae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",145),r.hc("click",(function(){r.Ic(n);var e=r.lc(2),t=e.$implicit,i=e.index;return r.lc(2).onCancelEditExEntry(t,i)})),r.Tc(1),r.mc(2,"translate"),r.Ub()}2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"Cancel")," "))}function Vae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",145),r.hc("click",(function(){r.Ic(n);var e=r.lc(2),t=e.$implicit,i=e.index;return r.lc(2).onDeleteExEntry(t,i)})),r.Tc(1),r.mc(2,"translate"),r.Ub()}2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"Delete")," "))}function Tae(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",138),r.Vb(2,"button",139),r.Vb(3,"span",113),r.Qb(4,"fa-icon",140),r.Ub(),r.Ub(),r.Vb(5,"div",141),r.Rc(6,kae,3,3,"button",142),r.Rc(7,Mae,3,3,"ng-template",null,143,r.Sc),r.Rc(9,Vae,3,3,"button",144),r.Ub(),r.Ub(),r.Sb()),2&e){var n=r.Fc(8),i=r.lc().$implicit,o=r.lc(2);r.Bb(1),r.sc("placement",o.commandsDropdownPlacement),r.Bb(5),r.sc("ngIf",!i.exEntryIsEdit)("ngIfElse",n),r.Bb(3),r.sc("ngIf",!(null==i.exEntry||!i.exEntry.Id))}}function Eae(e,t){1&e&&r.Rb(0)}function Uae(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Eae,1,0,"ng-container",146),r.Sb()),2&e){r.lc(2);var n=r.Fc(55);r.Bb(1),r.sc("ngTemplateOutlet",n)}}function xae(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",90),r.Tc(2," \xa0 "),r.Rc(3,Qce,2,3,"t-view-link",29),r.Ub(),r.Vb(4,"td",90),r.Tc(5),r.mc(6,"dateFormat"),r.Ub(),r.Vb(7,"td",90),r.Tc(8),r.Ub(),r.Vb(9,"td",91),r.Tc(10),r.mc(11,"accounting"),r.Ub(),r.Rc(12,sae,19,7,"ng-container",64),r.Rc(13,dae,2,3,"ng-template",null,92,r.Sc),r.Rc(15,bae,10,17,"ng-container",64),r.Rc(16,wae,17,17,"ng-template",null,93,r.Sc),r.Vb(18,"td",94),r.Rc(19,Tae,10,4,"ng-container",13),r.Rc(20,Uae,2,1,"ng-container",13),r.Ub(),r.Ub()),2&e){var n=t.$implicit,i=r.Fc(14),o=r.Fc(17),c=r.lc(2);r.Gb("t-highlight-a",n.entryIsChecked)("t-pale-a",n.entryReconciliation)("t-highlight-b",n.exEntryIsChecked)("t-pale-b",n.exEntryReconciliation)("t-yellow-a",c.isHoveredEntryReconciliation(n))("t-yellow-b",c.isHoveredExEntryReconciliation(n)),r.Bb(3),r.sc("ngIf",n.entry),r.Bb(2),r.Vc(" ",r.nc(6,22,null==n.entry?null:n.entry.PostingDate)," "),r.Bb(3),r.Vc(" ",null==n.entry?null:n.entry.ExternalReference," "),r.Bb(2),r.Vc(" ",n.entry?r.oc(11,24,(null==n.entry?null:n.entry.MonetaryValue)*(null==n.entry?null:n.entry.Direction),c.amountsFormat):""," "),r.Bb(2),r.sc("ngIf",c.isUnreconciled)("ngIfElse",i),r.Bb(3),r.sc("ngIf",n.exEntryIsEdit&&!n.exEntryReconciliation)("ngIfElse",o),r.Bb(4),r.sc("ngIf",c.isUnreconciled&&!!n.exEntry&&!n.exEntryReconciliation),r.Bb(1),r.sc("ngIf",n.exEntryIsCreate)}}function Rae(e,t){1&e&&r.Rb(0)}function Dae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"tr"),r.Qb(1,"td",147),r.Vb(2,"td",148),r.hc("dblclick",(function(){return r.Ic(n),r.lc(2).onCreateExEntry()})),r.Ub(),r.Vb(3,"td"),r.Rc(4,Rae,1,0,"ng-container",146),r.Ub(),r.Ub()}if(2&e){r.lc();var i=r.Fc(55),o=r.lc();r.Bb(1),r.sc("colSpan",o.isUnreconciled?8:4),r.Bb(1),r.sc("colSpan",o.isUnreconciled?4:3),r.Bb(2),r.sc("ngTemplateOutlet",i)}}function Bae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",138),r.Vb(1,"button",139),r.Vb(2,"span",113),r.Qb(3,"fa-icon",140),r.Ub(),r.Ub(),r.Vb(4,"div",141),r.Vb(5,"button",145),r.hc("click",(function(){return r.Ic(n),r.lc(2).onCreateExEntry()})),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2);r.sc("placement",i.commandsDropdownPlacement),r.Bb(6),r.Vc(" ",r.nc(7,2,"Create")," ")}}function Sae(e,t){1&e&&(r.Vb(0,"div",149),r.Qb(1,"t-spinner",150),r.Ub()),2&e&&(r.Bb(1),r.sc("scale",2))}function _ae(e,t){if(1&e&&(r.Vb(0,"div",151),r.Qb(1,"fa-icon",152),r.Tc(2),r.Ub()),2&e){var n=r.lc(2);r.Bb(2),r.Vc(" \xa0 ",n.information()," ")}}function Oae(e,t){1&e&&(r.Vb(0,"div",153),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"NoItemsFound")," "))}function Lae(e,t){if(1&e&&(r.Vb(0,"div",154),r.Vb(1,"t-error-message"),r.Tc(2),r.Ub(),r.Ub()),2&e){var n=r.lc(2);r.Bb(2),r.Vc(" ",n.errorMessage," ")}}function Fae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",59),r.Vb(1,"cdk-virtual-scroll-viewport",60),r.Vb(2,"table",61),r.Vb(3,"thead"),r.Vb(4,"tr"),r.Vb(5,"th",62),r.Vb(6,"div",63),r.Vb(7,"span"),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Rc(10,Lce,12,19,"div",15),r.Ub(),r.Ub(),r.Rc(11,Fce,6,0,"ng-container",64),r.Rc(12,Ace,1,0,"ng-template",null,65,r.Sc),r.Vb(14,"th",62),r.Vb(15,"div",63),r.Vb(16,"div",52),r.Vb(17,"span"),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Rc(20,Pce,3,3,"button",66),r.Rc(21,Nce,4,6,"div",43),r.Vb(22,"input",67,68),r.hc("change",(function(){r.Ic(n);var e=r.Fc(23);return r.lc().onSelectFileToImport(e)})),r.Ub(),r.Ub(),r.Rc(24,jce,12,19,"div",15),r.Ub(),r.Ub(),r.Ub(),r.Vb(25,"tr"),r.Vb(26,"th"),r.Tc(27),r.mc(28,"translate"),r.Ub(),r.Vb(29,"th"),r.Tc(30),r.mc(31,"translate"),r.Ub(),r.Vb(32,"th"),r.Tc(33),r.mc(34,"translate"),r.Ub(),r.Vb(35,"th",69),r.Tc(36),r.mc(37,"translate"),r.Ub(),r.Rc(38,Wce,6,0,"ng-container",64),r.Rc(39,qce,1,0,"ng-template",null,70,r.Sc),r.Vb(41,"th",71),r.Tc(42),r.mc(43,"translate"),r.Ub(),r.Vb(44,"th",72),r.Tc(45),r.mc(46,"translate"),r.Ub(),r.Vb(47,"th",73),r.Tc(48),r.mc(49,"translate"),r.Ub(),r.Qb(50,"th",74),r.Ub(),r.Ub(),r.Vb(51,"tbody"),r.Rc(52,xae,21,27,"tr",75),r.Rc(53,Dae,5,3,"tr",13),r.Ub(),r.Ub(),r.Rc(54,Bae,8,4,"ng-template",null,76,r.Sc),r.Rc(56,Sae,2,1,"div",77),r.Rc(57,_ae,3,1,"div",78),r.Rc(58,Oae,3,3,"div",79),r.Rc(59,Lae,3,1,"div",80),r.Qb(60,"div",81),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(13),o=r.Fc(40),c=r.lc();r.Bb(8),r.Vc(" \xa0 ",r.nc(9,23,"InternalEntries")," "),r.Bb(2),r.sc("ngIf",c.isUnreconciled&&!c.isDirty),r.Bb(1),r.sc("ngIf",c.isUnreconciled)("ngIfElse",i),r.Bb(7),r.Uc(r.nc(19,25,"ExternalEntries")),r.Bb(2),r.sc("ngIf",c.showDownloadTemplate),r.Bb(1),r.sc("ngIf",c.showImport),r.Bb(3),r.sc("ngIf",c.isUnreconciled&&!c.isDirty),r.Bb(3),r.Vc(" \xa0 ",r.nc(28,27,"Line_Document")," "),r.Bb(3),r.Vc(" ",r.nc(31,29,"Line_PostingDate")," "),r.Bb(3),r.Vc(" ",r.nc(34,31,"Reconciliation_Reference")," "),r.Bb(3),r.Vc(" ",r.nc(37,33,"Entry_MonetaryValue")," "),r.Bb(2),r.sc("ngIf",c.isUnreconciled)("ngIfElse",o),r.Bb(4),r.Vc(" ",r.nc(43,35,"Line_PostingDate")," "),r.Bb(3),r.Vc(" ",r.nc(46,37,"Reconciliation_Reference")," "),r.Bb(3),r.Vc(" ",r.nc(49,39,"Entry_MonetaryValue")," "),r.Bb(4),r.sc("cdkVirtualForOf",c.rows),r.Bb(1),r.sc("ngIf",c.showBuiltInCreateRow),r.Bb(3),r.sc("ngIf",c.showSpinner),r.Bb(1),r.sc("ngIf",c.showInformation),r.Bb(1),r.sc("ngIf",c.showNoItemsFound),r.Bb(1),r.sc("ngIf",c.showErrorMessage)}}function Aae(e,t){1&e&&(r.Vb(0,"div",155),r.Qb(1,"t-spinner",150),r.Ub()),2&e&&(r.Bb(1),r.sc("scale",2))}function Pae(e,t){if(1&e&&(r.Vb(0,"div",156),r.Vb(1,"h5",157),r.Qb(2,"fa-icon",118),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",158),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(6,"span",159),r.Tc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",160),r.Tc(9),r.Ub(),r.Vb(10,"div",161),r.Vb(11,"button",162),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(12,"fa-icon",39),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,3,"Error")," "),r.Bb(6),r.Vc(" ",n.modalErrorMessage," "),r.Bb(4),r.Vc(" \xa0",r.nc(14,5,"Dismiss")," ")}}function Nae(e,t){if(1&e&&(r.Vb(0,"div",156),r.Vb(1,"h5",157),r.Qb(2,"fa-icon",163),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",158),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(6,"span",159),r.Tc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",164),r.Tc(9),r.Ub(),r.Vb(10,"div",161),r.Vb(11,"button",162),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(12,"fa-icon",39),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,3,"Success")," "),r.Bb(6),r.Vc(" ",n.modalSuccessMessage," "),r.Bb(4),r.Vc(" \xa0",r.nc(14,5,"Dismiss")," ")}}function jae(e,t){1&e&&(r.Vb(0,"div",156),r.Vb(1,"h5",157),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",158),r.hc("click",(function(){return t.$implicit.dismiss(!1)})),r.Vb(5,"span",159),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",164),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Vb(10,"div",161),r.Vb(11,"button",165),r.hc("click",(function(){return t.$implicit.close(!0)})),r.Qb(12,"fa-icon",166),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Vb(15,"button",167),r.hc("click",(function(){return t.$implicit.close(!1)})),r.Qb(16,"fa-icon",39),r.Tc(17),r.mc(18,"translate"),r.Ub(),r.Ub()),2&e&&(r.Bb(2),r.Vc(" ",r.nc(3,4,"Confirmation")," "),r.Bb(6),r.Vc(" ",r.nc(9,6,"UnsavedChangesConfirmationMessage")," "),r.Bb(5),r.Vc(" \xa0",r.nc(14,8,"Proceed")," "),r.Bb(4),r.Vc(" \xa0",r.nc(18,10,"Cancel")," "))}function Wae(e,t){if(1&e&&(r.Vb(0,"div",156),r.Vb(1,"h5",157),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",158),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",159),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",164),r.Vb(8,"div",168),r.Vb(9,"t-form-group",169),r.mc(10,"translate"),r.Tc(11),r.Ub(),r.Vb(12,"t-form-group",169),r.Tc(13),r.Ub(),r.Vb(14,"t-form-group",169),r.mc(15,"translate"),r.Tc(16),r.mc(17,"dateFormat"),r.Ub(),r.Ub(),r.Vb(18,"div",170),r.Vb(19,"table",171),r.Vb(20,"tbody"),r.Vb(21,"tr"),r.Vb(22,"td"),r.Tc(23),r.mc(24,"translate"),r.Ub(),r.Qb(25,"td"),r.Vb(26,"td",69),r.Tc(27),r.mc(28,"accounting"),r.Ub(),r.Ub(),r.Vb(29,"tr"),r.Vb(30,"td"),r.Tc(31),r.mc(32,"translate"),r.Ub(),r.Vb(33,"td",113),r.Qb(34,"fa-icon",172),r.Ub(),r.Vb(35,"td",69),r.Tc(36),r.mc(37,"accounting"),r.Ub(),r.Ub(),r.Vb(38,"tr"),r.Vb(39,"td"),r.Tc(40),r.mc(41,"translate"),r.Ub(),r.Vb(42,"td",113),r.Qb(43,"fa-icon",173),r.Ub(),r.Vb(44,"td",69),r.Tc(45),r.mc(46,"accounting"),r.Ub(),r.Ub(),r.Vb(47,"tr"),r.Vb(48,"td"),r.Tc(49),r.mc(50,"translate"),r.Ub(),r.Vb(51,"td",113),r.Qb(52,"fa-icon",174),r.Ub(),r.Vb(53,"td",69),r.Tc(54),r.mc(55,"accounting"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(56,"div",161),r.Vb(57,"button",162),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(58,"fa-icon",39),r.Tc(59),r.mc(60,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,16,"ReconciliationReport")," "),r.Bb(7),r.sc("label",r.nc(10,18,"Entry_Account")),r.Bb(2),r.Vc(" ",n.ws.getMultilingualValue("Account",n.accountId,"Name")," "),r.Bb(1),r.sc("label",n.labelCustody_Manual),r.Bb(1),r.Vc(" ",n.ws.getMultilingualValue("Custody",n.custodyId,"Name")," "),r.Bb(1),r.sc("label",r.nc(15,20,"AsOfDate")),r.Bb(2),r.Vc(" ",n.toDate?r.nc(17,22,n.toDate):"-","\u200c "),r.Bb(7),r.Uc(r.nc(24,24,"InternalBalance")),r.Bb(4),r.Vc("",r.oc(28,26,n.entriesBalance,n.amountsFormat),"\u200c"),r.Bb(4),r.Uc(r.nc(32,29,"InternalUnreconciledBalance")),r.Bb(5),r.Vc("",r.oc(37,31,n.unreconciledEntriesBalance,n.amountsFormat),"\u200c"),r.Bb(4),r.Uc(r.nc(41,34,"ExternalUnreconciledBalance")),r.Bb(5),r.Vc("",r.oc(46,36,n.unreconciledExEntriesBalance,n.amountsFormat),"\u200c"),r.Bb(4),r.Uc(r.nc(50,39,"ExternalBalance")),r.Bb(5),r.Vc("",r.oc(55,41,n.exEntriesBalance,n.amountsFormat),"\u200c"),r.Bb(5),r.Vc(" \xa0",r.nc(60,44,"Dismiss")," ")}}function qae(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",156),r.Vb(1,"h5",157),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",158),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",159),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",164),r.Vb(8,"div",175),r.Vb(9,"t-form-group",169),r.mc(10,"translate"),r.Vb(11,"t-selector",176),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().postingDateTolerance=e})),r.Ub(),r.Ub(),r.Vb(12,"t-form-group",169),r.mc(13,"translate"),r.Vb(14,"t-selector",176),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().externalRefTolerance=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(15,"div",161),r.Vb(16,"button",177),r.hc("click",(function(){r.Ic(n);var e=t.$implicit;return r.lc().onAutoReconcile(),e.close(!0)})),r.Qb(17,"fa-icon",37),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"button",178),r.hc("click",(function(){return t.$implicit.close(!1)})),r.Qb(21,"fa-icon",39),r.Tc(22),r.mc(23,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc();r.Bb(2),r.Vc(" ",r.nc(3,12,"AutoReconcile")," "),r.Bb(7),r.sc("label",r.nc(10,14,"PostingDateTolerance")),r.Bb(2),r.sc("ngModel",i.postingDateTolerance)("choices",i.postingDateToleranceChoices)("hideEmptyOption",!0),r.Bb(1),r.sc("label",r.nc(13,16,"ExternalReferenceTolerance")),r.Bb(2),r.sc("ngModel",i.externalRefTolerance)("choices",i.externalRefToleranceChoices)("hideEmptyOption",!0),r.Bb(2),r.sc("disabled",!!i.disableAutoReconcile),r.Bb(2),r.Vc(" \xa0",r.nc(19,18,"AutoReconcile")," "),r.Bb(4),r.Vc(" \xa0",r.nc(23,20,"Cancel")," ")}}var Qae,Hae=((Qae=function(){function e(t,n,i,r,o,c,a){var l=this;_classCallCheck(this,e),this.workspace=t,this.router=n,this.customUserSettings=i,this.route=r,this.apiService=o,this.translate=c,this.modalService=a,this.MIN_PAGE_SIZE=500,this.argumentsKey="reconciliation/arguments",this.notifyFetch$=new U.a,this.notifyDestruct$=new U.a,this.api=this.apiService.reconciliationApi(this.notifyDestruct$),this.viewChoices=[{value:"reconciled",name:function(){return l.translate.instant("Reconciled")}},{value:"unreconciled",name:function(){return l.translate.instant("Unreconciled")}}],this.numericKeys={account_id:void 0,custody_id:void 0,entries_top:this.MIN_PAGE_SIZE,entries_skip:0,ex_entries_top:this.MIN_PAGE_SIZE,ex_entries_skip:0,top:this.MIN_PAGE_SIZE,skip:0,from_amount:void 0,to_amount:void 0},this.stringKeys={view:"unreconciled",from_date:void 0,to_date:void 0,ex_ref_contains:void 0},this.initialized=!1,this._postingDateTolerance=0,this._externalRefTolerance=0,this._postingDateToleranceChoices=[{value:0,name:function(){return l.translate.instant("ExactMatch")}},{value:1,name:function(){return"1"}},{value:2,name:function(){return"2"}},{value:3,name:function(){return"3"}},{value:4,name:function(){return"4"}},{value:5,name:function(){return"5"}}],this._externalRefToleranceChoices=[{value:0,name:function(){return l.translate.instant("ExactMatch")}},{value:1,name:function(){return l.translate.instant("StringDistance_1",{0:1})}},{value:2,name:function(){return l.translate.instant("StringDistance_2",{0:2})}},{value:3,name:function(){return l.translate.instant("StringDistance_3",{0:3})}},{value:1e6,name:function(){return l.translate.instant("IgnoreMatch")}}],this._autoReconcileParamsKey="reconciliation/auto-reconcile-params",this._rows=[],this._showBuiltInCreateRow=!1,this.externalEntriesForSave=[],this.reconciliationsForSave=[],this.deletedExternalEntryIds=[],this.deletedReconciliationIds=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.api=this.apiService.reconciliationApi(this.notifyDestruct$),this._subscriptions=new O.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(F.a)((function(){return e.doFetch()}))).subscribe());var t=this.customUserSettings.get(this._autoReconcileParamsKey);t?(this.postingDateTolerance=+t.postingDateTolerance||0,this.externalRefTolerance=+t.externalRefTolerance||0):(this.postingDateTolerance=0,this.externalRefTolerance=0),this._subscriptions.add(this.route.paramMap.subscribe((function(t){for(var n=!1,i=e.state.arguments,r=0,o=Object.keys(e.stringKeys);r<o.length;r++){var c=o[r],a=t.get(c)||e.stringKeys[c];i[c]!==a&&(i[c]=a,n=!0)}for(var l=0,s=Object.keys(e.numericKeys);l<s.length;l++){var u=s[l],d=+t.get(u)||e.numericKeys[u];i[u]!==d&&(i[u]=d,n=!0)}i.collapse="true"===t.get("collapse"),n&&e.fetch()})))}},{key:"ngAfterViewInit",value:function(){var e=this;this.initialized||Object(bn.a)(1).subscribe((function(){return e.initialized=!0}))}},{key:"ngOnDestroy",value:function(){this.notifyDestruct$.next(),this._subscriptions.unsubscribe()}},{key:"urlStateChanged",value:function(){for(var e=this.state.arguments,t={},n=0,i=Object.keys(this.stringKeys);n<i.length;n++){var r=i[n],o=e[r]||this.stringKeys[r];o&&(t[r]=o)}for(var c=0,a=Object.keys(this.numericKeys);c<a.length;c++){var l=a[c],s=e[l]||this.numericKeys[l];s&&(t[l]=s)}this.router.navigate([".",t],{relativeTo:this.route,replaceUrl:!0});var u=JSON.stringify(e);this.customUserSettings.save(this.argumentsKey,u)}},{key:"parametersChanged",value:function(){this.resetEdits(),this.urlStateChanged(),this.fetch()}},{key:"fetch",value:function(){this.notifyFetch$.next()}},{key:"doFetch",value:function(){var e,t=this,n=this.state;return this.requiredParametersAreSet?this.loadingRequiredParameters?(n.reportStatus=S.i.loading,delete n.reconciled_response,delete n.unreconciled_response,Object(L.a)()):(n.reportStatus=S.i.loading,this.isUnreconciled?(delete n.unreconciled_response,e=this.api.getUnreconciled(this.UnreconciledArgs).pipe(Object(Ma.a)((function(e){n.unreconciled_response=e,n.unreconciled_entries_count=e.UnreconciledEntriesCount,n.unreconciled_ex_entries_count=e.UnreconciledExternalEntriesCount})))):this.isReconciled?(delete n.reconciled_response,e=this.api.getReconciled(this.ReconciledArgs).pipe(Object(Ma.a)((function(e){n.reconciled_response=e,n.reconciled_count=e.ReconciledCount})))):console.error("Unknown view ".concat(this.view)),e=e.pipe(Object(P.a)((function(e){n.reportStatus=S.i.loaded,t.resetEdits()})),Object(j.a)((function(e){return n.reportStatus=S.i.error,n.errorMessage=e.error,Object(L.a)(null)})))):(n.reportStatus=S.i.information,n.information=function(){return t.translate.instant("FillRequiredFields")},Object(L.a)())}},{key:"canDeactivate",value:function(){if(this.isDirty){var e=this.modalService.open(this.unsavedChangesModal),t=new U.a;return e.result.then((function(e){t.next(e),t.complete()}),(function(e){t.next(!1),t.complete()})),t}return!0}},{key:"account",value:function(e){return this.ws.get("Account",e=e||this.accountId)}},{key:"onParameterLoaded",value:function(){this.state.reportStatus===S.i.loading&&this.fetch()}},{key:"information",value:function(){return this.state.information()}},{key:"onSelectFileToImport",value:function(e){var t=this;if(!this.disableImport){var n=e.files;if(0!==n.length){var i=n[0];e.value="",this.api.import(i).subscribe((function(e){if(t.isLoaded){var n,i=t.findIndexForCreate(),r=t._rows.length,o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;){var c=n.value;t.addCreatedExEntry(c,i),i++}}catch(a){o.e(a)}finally{o.f()}r!==t._rows.length&&(t._rows=t._rows.slice()),t.fixCreateExEntryRow(i)}}),(function(e){t.displayErrorModal(e.error)}))}}}},{key:"onDownloadTemplate",value:function(){var e=[[this.translate.instant("Line_PostingDate"),this.translate.instant("Reconciliation_Reference"),this.translate.instant("Entry_MonetaryValue")]],t=Object(W.g)(e),n=this.translate.instant("ImportTemplate")+".csv";Object(W.i)(t,n)}},{key:"onExport",value:function(){var e=this;if(!this.disableExport&&this.isUnreconciled){var t=this.UnreconciledArgs,n=this.labelCustody_Manual,i=this.amountsFormat,r=this.api.getUnreconciled(t);this.showExportSpinner=!0,r.pipe(Object(P.a)((function(r){e.showExportSpinner=!1;for(var o="".concat(e.translate.instant("Unreconciled"),".csv"),c=[[e.translate.instant("Entry_Account"),Object(TW.a)(e.workspace,e.translate).format(e.ws.get("Account",t.accountId)),"","","","",""],[n,e.ws.getMultilingualValue("Custody",t.custodyId,"Name"),"","","","",""],[e.translate.instant("AsOfDate"),t.asOfDate?Object(Oi.c)(new Date(t.asOfDate)):"","","","","",""],["","","","","","",""],[e.translate.instant("InternalBalance"),Object(ug.a)(r.EntriesBalance,i),"","","","",""],[e.translate.instant("InternalUnreconciledBalance"),Object(ug.a)(r.UnreconciledEntriesBalance,i),"-","","","",""],[e.translate.instant("ExternalUnreconciledBalance"),Object(ug.a)(r.UnreconciledExternalEntriesBalance,i),"+","","","",""],[e.translate.instant("ExternalBalance"),Object(ug.a)(r.EntriesBalance-r.UnreconciledEntriesBalance+r.UnreconciledExternalEntriesBalance,i),"=","","","",""],["","","","","","",""],[e.translate.instant("InternalEntries"),"","","",e.translate.instant("ExternalEntries"),"",""],[e.translate.instant("Line_Document"),e.translate.instant("Line_PostingDate"),e.translate.instant("Reconciliation_Reference"),e.translate.instant("Entry_MonetaryValue"),e.translate.instant("Line_PostingDate"),e.translate.instant("Reconciliation_Reference"),e.translate.instant("Entry_MonetaryValue")]],a=Math.max(r.Entries.length,r.ExternalEntries.length),l=0;l<a;l++){var s=r.Entries[l],u=r.ExternalEntries[l],d=[];s?(d.push(e.formatSerialNumber(s.DocumentSerialNumber,s.DocumentDefinitionId)),d.push(Object(Oi.c)(new Date(s.PostingDate))),d.push(s.ExternalReference),d.push(Object(ug.a)(s.MonetaryValue*s.Direction,i))):d.push("","","",""),u?(d.push(Object(Oi.c)(new Date(u.PostingDate))),d.push(u.ExternalReference),d.push(Object(ug.a)(u.MonetaryValue*u.Direction,i))):d.push("","",""),c.push(d)}var b=Object(W.g)(c);Object(W.i)(b,o)})),Object(j.a)((function(t){return e.showExportSpinner=!1,e.displayErrorModal(t.error),Object(L.a)()})),Object(re.a)((function(){e.showExportSpinner=!1}))).subscribe()}}},{key:"showExport",value:function(){return this.isUnreconciled}},{key:"onAutoReconcile",value:function(){if(!this.disableAutoReconcile){var e=function(e,t){var n=Math.abs(e.entryDays-t.exEntryDays);return n>i?1/0:n},t=function(e,t){var n=Object(gce.a)(e.entry.ExternalReference,t.exEntry.ExternalReference,r+1);return n>r?1/0:n},n=function(n,i){return e(n,i)+1e3*t(n,i)},i=this.postingDateTolerance,r=this.externalRefTolerance,o=this.customUserSettings.get(this._autoReconcileParamsKey);o&&o.postingDateTolerance===i&&o.externalRefTolerance===r||this.customUserSettings.save(this._autoReconcileParamsKey,JSON.stringify({postingDateTolerance:i,externalRefTolerance:r}));var c,a=this.rows.filter((function(e){return!!e.entry&&!e.entry.IsReconciledLater&&Object(W.n)(e.entry.MonetaryValue)&&e.entry.PostingDate&&!e.entryReconciliation})),l=this.rows.filter((function(e){return!!e.exEntry&&Object(W.n)(e.exEntry.MonetaryValue)&&e.exEntry.PostingDate&&!e.exEntryReconciliation})),s={},u=_createForOfIteratorHelper(a);try{for(u.s();!(c=u.n()).done;){var d=c.value;d.entryDays=new Date(d.entry.PostingDate).getTime()/864e5;var b=d.entry.MonetaryValue*d.entry.Direction;s[b]=s[b]||[],s[b].push(d)}}catch($){u.e($)}finally{u.f()}var f,m={},g=_createForOfIteratorHelper(l);try{for(g.s();!(f=g.n()).done;){var p=f.value;p.exEntryDays=new Date(p.exEntry.PostingDate).getTime()/864e5;var h=p.exEntry.MonetaryValue*p.exEntry.Direction;m[h]=m[h]||[],m[h].push(p)}}catch($){g.e($)}finally{g.f()}for(var v=0,y=0,I=Object.keys(s);y<I.length;y++){var C=I[y],w=s[C],k=m[C];if(w&&w.length>0&&k&&k.length>0)if(1===w.length&&1===k.length){var M=w[0],V=k[0];e(M,V)!==1/0&&t(M,V)!==1/0&&(this.addReconciliation([M],[V]),v++)}else{w.sort((function(e,t){return e.entryDays-t.entryDays})),k.sort((function(e,t){return e.exEntryDays-t.exEntryDays}));for(var T=[],E=void 0,U=0,x=0,R=0;R<w.length;R++){var D=w[R];if(D.entryDays!==E){E=D.entryDays;for(var B=D.entryDays-i;U<k.length&&k[U].exEntryDays<B;)U++;for(var S=D.entryDays+i;x<k.length&&k[x].exEntryDays<=S;)x++}for(var _=U;_<x;_++){var O=n(D,k[_]);O<1/0&&T.push({eIndex:R,exIndex:_,diff:O})}}T.sort((function(e,t){return e.diff-t.diff}));for(var L={},F={},A=0,P=T;A<P.length;A++){var N=P[A];L[N.eIndex]||F[N.exIndex]||(L[N.eIndex]=!0,F[N.exIndex]=!0,this.addReconciliation([w[N.eIndex]],[k[N.exIndex]]),v++)}}}var j,q=_createForOfIteratorHelper(this.rows);try{for(q.s();!(j=q.n()).done;){var Q=j.value;delete Q.entryDays,delete Q.exEntryDays}}catch($){q.e($)}finally{q.f()}var H=this.translate.instant("AutoReconcileMessage",{0:v});this.displaySuccessModal(H)}}},{key:"onRefresh",value:function(){this.state.reportStatus!==S.i.loading&&this.fetch()}},{key:"onPreviousPage",value:function(){var e=this.state.arguments;e.skip=Math.max(e.skip-this.top,0),this.urlStateChanged(),this.fetch()}},{key:"onNextPage",value:function(){var e=this.state.arguments;e.skip=e.skip+this.top,this.urlStateChanged(),this.fetch()}},{key:"entries_onPreviousPage",value:function(){var e=this.state.arguments;e.entries_skip=Math.max(e.entries_skip-this.entriesTop,0),this.urlStateChanged(),this.fetch()}},{key:"entries_onNextPage",value:function(){var e=this.state.arguments;e.entries_skip=e.entries_skip+this.entriesTop,this.urlStateChanged(),this.fetch()}},{key:"ex_entries_onPreviousPage",value:function(){var e=this.state.arguments;e.ex_entries_skip=Math.max(e.ex_entries_skip-this.externalEntriesTop,0),this.urlStateChanged(),this.fetch()}},{key:"ex_entries_onNextPage",value:function(){var e=this.state.arguments;e.ex_entries_skip=e.ex_entries_skip+this.externalEntriesTop,this.urlStateChanged(),this.fetch()}},{key:"onDeleteReconciliation",value:function(e){var t=e.reconciliation;t&&(t.Id&&this.deletedReconciliationIds.push(+t.Id),this._rows=this._rows.filter((function(e){return e.reconciliation!==t})))}},{key:"fixCreateExEntryRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._rows.forEach((function(e){return delete e.exEntryIsCreate})),this._showBuiltInCreateRow=!1;var t=e>=0?e:this.findIndexForCreate();t>=this._rows.length?this._showBuiltInCreateRow=!0:this._rows[t].exEntryIsCreate=!0}},{key:"findIndexForCreate",value:function(){for(var e=this._rows.length-1;e>=0;e--){var t=this._rows[e];if(t.reconciliation||t.exEntry)break}return e+1}},{key:"onRowDoubleClick",value:function(e){this.isUnreconciled&&(e.exEntryIsCreate?this.onCreateExEntry():this.onEditExEntry(e))}},{key:"onCreateExEntryOld",value:function(){if(this.isLoaded){var e=this.findIndexForCreate(),t={Direction:1};this.externalEntriesForSave.push(t);var n=this.externalEntriesForSave.length-1;if(this._rows.length<=e)this._rows.push({exEntryIsEdit:!0,exEntry:t,exEntryIndex:n}),this._rows=this._rows.slice();else{var i=this._rows[e];i.exEntry=t,i.exEntryIsEdit=!0,i.exEntryIndex=n}return this.fixCreateExEntryRow(e+1),e}}},{key:"onCreateExEntry",value:function(){if(this.isLoaded){var e=this.findIndexForCreate(),t=this._rows.length;return this.addCreatedExEntry({Direction:1},e),t!==this._rows.length&&(this._rows=this._rows.slice()),this.fixCreateExEntryRow(e+1),e}}},{key:"addCreatedExEntry",value:function(e,t){this.externalEntriesForSave.push(e);var n=this.externalEntriesForSave.length-1;if(this._rows.length<=t)this._rows.push({exEntryIsEdit:!0,exEntry:e,exEntryIndex:n});else{var i=this._rows[t];i.exEntry=e,i.exEntryIsEdit=!0,i.exEntryIndex=n}return t}},{key:"removeExternalEntryForSave",value:function(e){var t=this.externalEntriesForSave;t[e]=null;for(var n=t.length-1;n>=0&&!t[n];n--)t.pop()}},{key:"onDeleteExEntry",value:function(e,t){var n=e.exEntryIndex;Object(W.n)(n)&&this.removeExternalEntryForSave(n),e.exEntry.Id&&this.deletedExternalEntryIds.push(+e.exEntry.Id),delete e.exEntry,delete e.exEntryOriginal,delete e.exEntryIsEdit,delete e.exEntryIndex,delete e.exEntryIsChecked,this.shiftAllExternalEntriesUp(t),this.fixCreateExEntryRow()}},{key:"shiftAllExternalEntriesUp",value:function(e){for(var t=e+1;t<this._rows.length;t++){var n=this._rows[t-1],i=this._rows[t];n.exEntry=i.exEntry,n.exEntryOriginal=i.exEntryOriginal,n.exEntryIsEdit=i.exEntryIsEdit,n.exEntryIndex=i.exEntryIndex,n.exEntryIsChecked=i.exEntryIsChecked,n.exEntryReconciliation=i.exEntryReconciliation}var r=this._rows[this._rows.length-1];r.entry?(delete r.exEntry,delete r.exEntryOriginal,delete r.exEntryIsEdit,delete r.exEntryIndex,delete r.exEntryIsChecked,delete r.exEntryReconciliation):(this._rows.pop(),this._rows=this._rows.slice())}},{key:"onEditExEntry",value:function(e){!e.exEntryIsEdit&&e.exEntry&&(e.exEntryIsEdit=!0,e.exEntryOriginal=e.exEntry,e.exEntry=JSON.parse(JSON.stringify(e.exEntryOriginal)))}},{key:"onCancelEditExEntry",value:function(e,t){e.exEntry.Id?(Object(W.n)(e.exEntryIndex)&&this.removeExternalEntryForSave(e.exEntryIndex),e.exEntryIsEdit=!1,e.exEntry=e.exEntryOriginal,delete e.exEntryOriginal):this.onDeleteExEntry(e,t)}},{key:"onChangeExEntry",value:function(e,t){Object(W.n)(e.exEntryIndex)||(this.externalEntriesForSave.push(e.exEntry),e.exEntryIndex=this.externalEntriesForSave.length-1)}},{key:"onChangeExternalReference",value:function(e,t,n){this.onChangeExEntry(e,t),e.exEntry.ExternalReference=n}},{key:"onChangePostingDate",value:function(e,t,n){this.onChangeExEntry(e,t),e.exEntry.PostingDate=n}},{key:"onChangeMonetaryValue",value:function(e,t,n){this.onChangeExEntry(e,t),this.setMonetaryValue(e.exEntry,n)}},{key:"resetEdits",value:function(){this.externalEntriesForSave=[],this.reconciliationsForSave=[],this.deletedExternalEntryIds=[],this.deletedReconciliationIds=[]}},{key:"onSave",value:function(){var e=this;if(this.canSave&&this.isDirty&&this.requiredParametersAreSet&&!this.loadingRequiredParameters){var t,n=_createForOfIteratorHelper(this.externalEntriesForSave);try{for(n.s();!(t=n.n()).done;){var i=t.value;i&&delete i.serverErrors}}catch(m){n.e(m)}finally{n.f()}var r,o=_createForOfIteratorHelper(this.reconciliationsForSave);try{for(o.s();!(r=o.n()).done;){var c=r.value;delete c.serverErrors;var a,l=_createForOfIteratorHelper(c.Entries);try{for(l.s();!(a=l.n()).done;)delete a.value.serverErrors}catch(m){l.e(m)}finally{l.f()}var s,u=_createForOfIteratorHelper(c.ExternalEntries);try{for(u.s();!(s=u.n()).done;)delete s.value.serverErrors}catch(m){u.e(m)}finally{u.f()}}}catch(m){o.e(m)}finally{o.f()}var d,b={ExternalEntries:this.externalEntriesForSave,Reconciliations:this.reconciliationsForSave,DeletedExternalEntryIds:this.deletedExternalEntryIds,DeletedReconciliationIds:this.deletedReconciliationIds},f=this.state;this.isUnreconciled?d=this.api.saveAndGetUnreconciled(b,this.UnreconciledArgs).pipe(Object(Ma.a)((function(e){f.unreconciled_response=e,f.unreconciled_entries_count=e.UnreconciledEntriesCount,f.unreconciled_ex_entries_count=e.UnreconciledExternalEntriesCount}))):this.isReconciled?d=this.api.saveAndGetReconciled(b,this.ReconciledArgs).pipe(Object(Ma.a)((function(e){f.reconciled_response=e,f.reconciled_count=e.ReconciledCount}))):console.error("Unknown view ".concat(this.view)),d.pipe(Object(P.a)((function(t){f.reportStatus=S.i.loaded,e.resetEdits()})),Object(j.a)((function(t){if(422===t.status){for(var n=t.error,i=[],r=0,o=Object.keys(n);r<o.length;r++){var c=o[r],a=n[c],l=c.split("."),s=l[0];if(s.startsWith("ExternalEntries")&&l.length>1){var u=+s.substring(0,s.length-1).split("[")[1];if(isNaN(u))i.push.apply(i,_toConsumableArray(a));else{var d=l[1];switch(d){case"PostingDate":case"ExternalReference":case"MonetaryValue":var f=b.ExternalEntries[u];f.serverErrors=f.serverErrors||{},f.serverErrors[d]=a;break;default:i.push.apply(i,_toConsumableArray(a))}}}else if(s.startsWith("Reconciliations")&&l.length>2){var g=+s.substring(0,s.length-1).split("[")[1];if(isNaN(g))i.push.apply(i,_toConsumableArray(a));else{var p,h,v=b.Reconciliations[g];v.serverErrors=v.serverErrors||{};var y=l[1];y.startsWith("Entries")?(v.serverErrors.Entries=v.serverErrors.Entries||[],(p=v.serverErrors.Entries).push.apply(p,_toConsumableArray(a))):y.startsWith("ExternalEntries")?(v.serverErrors.ExternalEntries=v.serverErrors.ExternalEntries||[],(h=v.serverErrors.ExternalEntries).push.apply(h,_toConsumableArray(a))):i.push.apply(i,_toConsumableArray(a))}}else i.push.apply(i,_toConsumableArray(a))}if(i.length>0){var I,C={},w=_createForOfIteratorHelper(i);try{for(w.s();!(I=w.n()).done;)C[I.value]=!0}catch(m){w.e(m)}finally{w.f()}var k=Object.keys(C),M=k.slice(0,10).map((function(e){return" - ".concat(e)})).join("\n");k.length>10&&(M+="..."),e.displayErrorModal(M)}}else e.displayErrorModal(t.error);return Object(L.a)(null)}))).subscribe()}}},{key:"displayErrorModal",value:function(e){this._modalErrorMessage=e,this.modalService.open(this.errorModal)}},{key:"displaySuccessModal",value:function(e){this._modalSuccessMessage=e,this.modalService.open(this.successModal)}},{key:"onCancel",value:function(){var e=this,t=this.canDeactivate();t instanceof ff.a?t.subscribe((function(t){t&&e.doCancel()})):t&&this.doCancel()}},{key:"doCancel",value:function(){this.resetEdits(),delete this._rowsResponse}},{key:"uncheckAll",value:function(){if(this.rows){var e,t=_createForOfIteratorHelper(this.rows);try{for(t.s();!(e=t.n()).done;){var n=e.value;delete n.entryIsChecked,delete n.exEntryIsChecked}}catch(i){t.e(i)}finally{t.f()}}}},{key:"onCloneAndReconcile",value:function(e){var t=e.entry;if(t){var n=this.onCreateExEntry(),i=this.rows[n],r=i.exEntry;r.PostingDate=t.PostingDate,r.ExternalReference=t.ExternalReference,r.Direction=t.Direction,r.MonetaryValue=t.MonetaryValue,e.entryIsChecked=!0,i.exEntryIsChecked=!0}}},{key:"onUndoCloneAndReconcile",value:function(e){var t,n=e.entryReconciliation,i=_createForOfIteratorHelper(this._rows.map((function(e,t){return{row:e,index:t}})).filter((function(e){return e.row.exEntryReconciliation===n})));try{for(i.s();!(t=i.n()).done;){var r=t.value;this.onDeleteExEntry(r.row,r.index)}}catch(o){i.e(o)}finally{i.f()}this.removeReconciliation(n)}},{key:"onReconcileChecked",value:function(){if(!this.disableReconcileChecked){var e,t=[],n=[],i=_createForOfIteratorHelper(this._rows);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.entryIsChecked&&r.entry&&t.push(r),r.exEntryIsChecked&&r.exEntry&&n.push(r)}}catch(o){i.e(o)}finally{i.f()}this.addReconciliation(t,n)}}},{key:"addReconciliation",value:function(e,t){var n,i={Entries:[],ExternalEntries:[]},r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;delete o.entryIsChecked,o.entryReconciliation=i,i.Entries.push({EntryId:+o.entry.Id})}}catch(s){r.e(s)}finally{r.f()}var c,a=_createForOfIteratorHelper(t);try{for(a.s();!(c=a.n()).done;){var l=c.value;delete l.exEntryIsChecked,l.exEntryReconciliation=i,i.ExternalEntries.push({ExternalEntryId:+l.exEntry.Id||void 0,ExternalEntryIndex:l.exEntryIndex})}}catch(s){a.e(s)}finally{a.f()}this.reconciliationsForSave.push(i)}},{key:"onUndoReconcileCheckedEntry",value:function(e){this.removeReconciliation(e.entryReconciliation)}},{key:"onUndoReconciledCheckedExEntry",value:function(e){this.removeReconciliation(e.exEntryReconciliation)}},{key:"removeReconciliation",value:function(e){if(e){this.reconciliationsForSave=this.reconciliationsForSave.filter((function(t){return t!==e}));var t,n=_createForOfIteratorHelper(this._rows);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.entryReconciliation===e&&delete i.entryReconciliation,i.exEntryReconciliation===e&&delete i.exEntryReconciliation}}catch(r){n.e(r)}finally{n.f()}}}},{key:"onCancelReconcileChecked",value:function(){this.uncheckAll()}},{key:"getMonetaryValue",value:function(e){return e?e.Direction*e.MonetaryValue:null}},{key:"setMonetaryValue",value:function(e,t){e&&(e.Direction=t<0?-1:1,e.MonetaryValue=Math.abs(t))}},{key:"formatSerialNumber",value:function(e,t){return Object(zv.b)(e,this.ws,t)}},{key:"onToggleCollapseParameters",value:function(){this.collapseParameters=!this.collapseParameters}},{key:"onReconciledEntryMouseEnter",value:function(e){this._hoveredReconciliation=e.entryReconciliation}},{key:"onReconciledEntryMouseLeave",value:function(e){delete this._hoveredReconciliation}},{key:"onReconciledExEntryMouseEnter",value:function(e){this._hoveredReconciliation=e.exEntryReconciliation}},{key:"onReconciledExEntryMouseLeave",value:function(e){delete this._hoveredReconciliation}},{key:"isHoveredEntryReconciliation",value:function(e){return!!this._hoveredReconciliation&&this._hoveredReconciliation===e.entryReconciliation}},{key:"isHoveredExEntryReconciliation",value:function(e){return!!this._hoveredReconciliation&&this._hoveredReconciliation===e.exEntryReconciliation}},{key:"handleKeyboardEvent",value:function(e){this.workspace.ignoreKeyDownEvents||e.altKey&&"KeyR"===e.code&&this.showCheckedEntriesToolbar&&this.onReconcileChecked()}},{key:"UnreconciledArgs",get:function(){return{accountId:this.accountId,custodyId:this.custodyId,asOfDate:this.toDate,entriesTop:this.entriesTop,entriesSkip:this.entriesSkip,externalEntriesTop:this.externalEntriesTop,externalEntriesSkip:this.externalEntriesSkip}}},{key:"ReconciledArgs",get:function(){return{accountId:this.accountId,custodyId:this.custodyId,fromDate:this.fromDate,toDate:this.toDate,fromAmount:this.fromAmount,toAmount:this.toAmount,externalReferenceContains:this.externalReferenceContains,top:this.top,skip:this.skip}}},{key:"requiredParametersAreSet",get:function(){var e=this.state.arguments;return!!e.account_id&&!!e.custody_id}},{key:"loadingRequiredParameters",get:function(){return!(!this.accountId||this.account())||!(!this.showCustodyParameter||this.readonlyCustody_Manual||!this.custodyId||this.ws.get("Custody",this.custodyId))}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"state",get:function(){var e=this.ws;return e.reconciliationState=e.reconciliationState||new S.h}},{key:"view",get:function(){return this.state.arguments.view||"unreconciled"},set:function(e){var t=this.state.arguments;t.view!==e&&(t.view=e,this.parametersChanged())}},{key:"isUnreconciled",get:function(){return"unreconciled"===this.view}},{key:"isReconciled",get:function(){return"reconciled"===this.view}},{key:"showErrorMessage",get:function(){return this.state.reportStatus===S.i.error}},{key:"errorMessage",get:function(){return this.state.errorMessage}},{key:"modalErrorMessage",get:function(){return this._modalErrorMessage}},{key:"modalSuccessMessage",get:function(){return this._modalSuccessMessage}},{key:"showInformation",get:function(){return this.state.reportStatus===S.i.information}},{key:"showNoItemsFound",get:function(){return this.state.reportStatus===S.i.loaded&&0===this.rows.length&&!this.showBuiltInCreateRow}},{key:"showSpinner",get:function(){return this.state.reportStatus===S.i.loading}},{key:"accountId",get:function(){return this.state.arguments.account_id},set:function(e){var t=this.state.arguments;t.account_id!==e&&(t.account_id=e,this.parametersChanged())}},{key:"custodyId",get:function(){return this.state.arguments.custody_id},set:function(e){var t=this.state.arguments;t.custody_id!==e&&(t.custody_id=e,this.parametersChanged())}},{key:"showCustodyParameter",get:function(){var e=this.account();return!!e&&!!e.CustodyDefinitionId}},{key:"labelCustody_Manual",get:function(){var e=this.account(),t=e?e.CustodyDefinitionId:null;return Object(Jv.a)(this.workspace,this.translate,t).titleSingular()}},{key:"readonlyCustody_Manual",get:function(){var e=this.account();return!!e&&!!e.CustodyId}},{key:"readonlyValueCustodyId_Manual",get:function(){var e=this.account();return e?e.CustodyId:null}},{key:"definitionIdsCustody_Manual",get:function(){return[this.account().CustodyDefinitionId]}},{key:"toDate",get:function(){return this.state.arguments.to_date},set:function(e){var t=this.state.arguments;t.to_date!==e&&(t.to_date=e,this.parametersChanged())}},{key:"fromDate",get:function(){return this.state.arguments.from_date},set:function(e){var t=this.state.arguments;t.from_date!==e&&(t.from_date=e,this.parametersChanged())}},{key:"top",get:function(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.top)},set:function(e){var t=this.state.arguments;t.top!==e&&(t.top=e,this.parametersChanged())}},{key:"skip",get:function(){return this.state.arguments.skip},set:function(e){var t=this.state.arguments;t.skip!==e&&(t.skip=e,this.parametersChanged())}},{key:"entriesTop",get:function(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.entries_top)},set:function(e){var t=this.state.arguments;t.entries_top!==e&&(t.entries_top=e,this.parametersChanged())}},{key:"entriesSkip",get:function(){return this.state.arguments.entries_skip},set:function(e){var t=this.state.arguments;t.entries_skip!==e&&(t.entries_skip=e,this.parametersChanged())}},{key:"externalEntriesTop",get:function(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.ex_entries_top)},set:function(e){var t=this.state.arguments;t.ex_entries_top!==e&&(t.ex_entries_top=e,this.parametersChanged())}},{key:"externalEntriesSkip",get:function(){return this.state.arguments.ex_entries_skip},set:function(e){var t=this.state.arguments;t.ex_entries_skip!==e&&(t.ex_entries_skip=e,this.parametersChanged())}},{key:"fromAmount",get:function(){return this.state.arguments.from_amount},set:function(e){var t=this.state.arguments;t.from_amount!==e&&(t.from_amount=e,this.parametersChanged())}},{key:"toAmount",get:function(){return this.state.arguments.to_amount},set:function(e){var t=this.state.arguments;t.to_amount!==e&&(t.to_amount=e,this.parametersChanged())}},{key:"externalReferenceContains",get:function(){return this.state.arguments.ex_ref_contains},set:function(e){var t=this.state.arguments;t.ex_ref_contains!==e&&(t.ex_ref_contains=e,this.parametersChanged())}},{key:"isLoaded",get:function(){return this.state.reportStatus===S.i.loaded}},{key:"showReport",get:function(){return this.isUnreconciled}},{key:"disableReport",get:function(){return this.isLoaded?null:this.translate.instant("Error_NotLoadedYet")}},{key:"entriesBalance",get:function(){var e=this.state.unreconciled_response;return e?e.EntriesBalance:0}},{key:"unreconciledEntriesBalance",get:function(){var e=this.state.unreconciled_response;return e?e.UnreconciledEntriesBalance:0}},{key:"unreconciledExEntriesBalance",get:function(){var e=this.state.unreconciled_response;return e?e.UnreconciledExternalEntriesBalance:0}},{key:"exEntriesBalance",get:function(){var e=this.state.unreconciled_response;return e?e.EntriesBalance-e.UnreconciledEntriesBalance+e.UnreconciledExternalEntriesBalance:0}},{key:"canEditPermissions",get:function(){return this.ws.canUpdate("reconciliation",null)}},{key:"canReadPermissions",get:function(){return this.ws.canRead("reconciliation")}},{key:"showImport",get:function(){return this.isUnreconciled}},{key:"disableImport",get:function(){return this.isLoaded?this.canEditPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}},{key:"showDownloadTemplate",get:function(){return this.showImport}},{key:"disableExport",get:function(){return this.isLoaded?this.canReadPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}},{key:"postingDateTolerance",get:function(){return this._postingDateTolerance},set:function(e){this._postingDateTolerance=e}},{key:"postingDateToleranceChoices",get:function(){return this._postingDateToleranceChoices}},{key:"externalRefTolerance",get:function(){return this._externalRefTolerance},set:function(e){this._externalRefTolerance=e}},{key:"externalRefToleranceChoices",get:function(){return this._externalRefToleranceChoices}},{key:"showAutoReconcile",get:function(){return this.isUnreconciled}},{key:"disableAutoReconcile",get:function(){return this.isLoaded?this.canEditPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}},{key:"actionsDropdownPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}},{key:"commandsDropdownPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}},{key:"errorPopoverPlacement",get:function(){return"bottom"}},{key:"flip",get:function(){return this.workspace.ws.isRtl?"horizontal":null}},{key:"disableRefresh",get:function(){return!this.requiredParametersAreSet}},{key:"from",get:function(){return Math.min(this.state.arguments.skip+1,this.total)}},{key:"to",get:function(){var e=this.state.reconciled_response;return Math.min(this.state.arguments.skip+(e?e.Reconciliations.length:this.top),this.total)}},{key:"total",get:function(){return this.state.reconciled_count||0}},{key:"canPreviousPage",get:function(){return this.state.arguments.skip>0}},{key:"canNextPage",get:function(){return this.to<this.total}},{key:"entries_from",get:function(){return Math.min(this.state.arguments.entries_skip+1,this.entries_total)}},{key:"entries_to",get:function(){var e=this.state.unreconciled_response;return Math.min(this.state.arguments.entries_skip+(e?e.Entries.length:this.entriesTop),this.entries_total)}},{key:"entries_total",get:function(){return this.state.unreconciled_entries_count||0}},{key:"entries_canPreviousPage",get:function(){return this.state.arguments.entries_skip>0}},{key:"entries_canNextPage",get:function(){return this.entries_to<this.entries_total}},{key:"ex_entries_from",get:function(){return Math.min(this.state.arguments.ex_entries_skip+1,this.ex_entries_total)}},{key:"ex_entries_to",get:function(){var e=this.state.unreconciled_response;return Math.min(this.state.arguments.ex_entries_skip+(e?e.ExternalEntries.length:this.externalEntriesTop),this.ex_entries_total)}},{key:"ex_entries_total",get:function(){return this.state.unreconciled_ex_entries_count||0}},{key:"ex_entries_canPreviousPage",get:function(){return this.state.arguments.ex_entries_skip>0}},{key:"ex_entries_canNextPage",get:function(){return this.ex_entries_to<this.ex_entries_total}},{key:"rows",get:function(){switch(this.view){case"reconciled":var e=this.state.reconciled_response;if(this._rowsResponse!==e&&(this._rowsResponse=e,this._rows=[],e)){var t,n=_createForOfIteratorHelper(e.Reconciliations);try{for(n.s();!(t=n.n()).done;)for(var i=t.value,r=Math.max(i.Entries.length,i.ExternalEntries.length),o=0;o<r;o++){var c={reconciliation:i};0===o&&(c.firstOne=r);var a=i.Entries[o];a&&(c.entry=a.Entry);var l=i.ExternalEntries[o];l&&l.ExternalEntryId&&(c.exEntry=l.ExternalEntry),this._rows.push(c)}}catch(f){n.e(f)}finally{n.f()}}break;case"unreconciled":var s=this.state.unreconciled_response;if(this._rowsResponse!==s&&(this._rowsResponse=s,this._rows=[],s)){for(var u=Math.max(s.Entries.length,s.ExternalEntries.length),d=0;d<u;d++){var b={};b.entry=s.Entries[d],b.exEntry=s.ExternalEntries[d],this._rows.push(b)}this.fixCreateExEntryRow()}break;default:console.error("Unknown view ".concat(this.view)),this._rows=[]}return this._rows}},{key:"showBuiltInCreateRow",get:function(){return this._showBuiltInCreateRow&&this.isUnreconciled&&!this.showErrorMessage}},{key:"canSave",get:function(){return!0}},{key:"showCheckedEntriesToolbar",get:function(){return!!this.rows&&this.rows.some((function(e){return e.entryIsChecked||e.exEntryIsChecked}))}},{key:"showEditToolbar",get:function(){return this.isDirty&&!this.showCheckedEntriesToolbar}},{key:"showViewToolbar",get:function(){return!this.isDirty&&!this.showCheckedEntriesToolbar}},{key:"checkedEntries",get:function(){return this.rows?this.rows.filter((function(e){return!!e.entry&&e.entryIsChecked})).map((function(e){return e.entry})):[]}},{key:"checkedExEntries",get:function(){return this.rows?this.rows.filter((function(e){return!!e.exEntry&&e.exEntryIsChecked})).map((function(e){return e.exEntry})):[]}},{key:"checkedEntriesTotal",get:function(){return this.checkedEntries.map((function(e){return e.Direction*e.MonetaryValue})).reduce((function(e,t){return e+t}),0)}},{key:"checkedExEntriesTotal",get:function(){return this.checkedExEntries.map((function(e){return e.Direction*(e.MonetaryValue||0)})).reduce((function(e,t){return e+t}),0)}},{key:"isDirty",get:function(){return this.externalEntriesForSave.length>0||this.reconciliationsForSave.length>0||this.deletedExternalEntryIds.length>0||this.deletedReconciliationIds.length>0}},{key:"disableReconcileChecked",get:function(){return this.canEditPermissions?this.checkedEntries.length>1&&this.checkedExEntries.length>1?this.translate.instant("Error_ManyToManyReconciliation"):Math.round(1e4*this.checkedEntriesTotal)!==Math.round(1e4*this.checkedExEntriesTotal)?this.translate.instant("Error_TotalsImbalance"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}},{key:"amountsDecimals",get:function(){var e=this.ws.get("Custody",this.custodyId),t=this.ws.get("Account",this.accountId);if(this.amountsDecimalsCustody!==e&&this.amountsDecimalsAccount!==t){this.amountsDecimalsCustody=e,this.amountsDecimalsAccount=t;var n=this.ws.get("Currency",(t?t.CurrencyId:null)||(e?e.CurrencyId:null));this.amountsDecimalsResult=n?n.E:this.ws.settings.FunctionalCurrencyDecimals}return this.amountsDecimalsResult}},{key:"amountsFormat",get:function(){var e=this.ws.get("Custody",this.custodyId),t=this.ws.get("Account",this.accountId);if(this.amountsFormatCustody!==e&&this.amountsFormatAccount!==t){this.amountsFormatAccount=e,this.amountsFormatCustody=t;var n=this.amountsDecimals;this.amountsFormatResult="1.".concat(n,"-").concat(n)}return this.amountsFormatResult}},{key:"collapseParameters",get:function(){return this.state.collapseParams},set:function(e){var t=this.state;t.collapseParams!==e&&(t.collapseParams=e)}}]),e}()).\u0275fac=function(e){return new(e||Qae)(r.Pb(S.m),r.Pb(i.e),r.Pb(ee.a),r.Pb(i.a),r.Pb(Y.a),r.Pb(G.e),r.Pb(X.t))},Qae.\u0275cmp=r.Jb({type:Qae,selectors:[["t-reconciliation"]],viewQuery:function(e,t){var n;1&e&&(r.Oc(pce,!0),r.Oc(hce,!0),r.Oc(vce,!0)),2&e&&(r.Ec(n=r.ic())&&(t.errorModal=n.first),r.Ec(n=r.ic())&&(t.successModal=n.first),r.Ec(n=r.ic())&&(t.unsavedChangesModal=n.first))},hostBindings:function(e,t){1&e&&r.hc("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,r.Gc)},decls:46,vars:38,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["class","text-danger t-dirty-asterisk px-1",4,"ngIf"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],[1,"w-100"],[1,"row","m-0","px-0","px-lg-1","py-1"],[1,"t-form-group",3,"label"],[3,"ngModel","choices","ngModelOptions","disabled","hideEmptyOption","ngModelChange"],["additionalSelect","CustodyDefinitionId,Currency.E","filter","AccountType.Concept eq 'BalancesWithBanks'",3,"ngModel","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded"],["class","t-form-group",3,"label",4,"ngIf"],[4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],["class","d-inline",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"d-none","d-md-inline"],[1,"row","t-rest-of-screen"],["class","table-responsive",4,"ngIf","ngIfElse"],["spinner",""],["errorModal",""],["successModal",""],["unsavedChangesModal",""],["reconciliationReport",""],["autoReconcile",""],[1,"text-danger","t-dirty-asterisk","px-1"],["additionalSelect","Currency.E",3,"ngModel","definitionIds","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded",4,"ngIf"],[3,"link","itemId",4,"ngIf"],["additionalSelect","Currency.E",3,"ngModel","definitionIds","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded"],[3,"link","itemId"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],[1,"mx-2","t-vertical-align-middle"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","compress"],["type","button",1,"btn","btn-sm","btn-light","text-primary","t-white-button","t-toolbar-button",3,"click"],["icon","times"],[1,"btn","btn-sm","t-toolbar-button","btn-primary",3,"click"],["icon","save"],[1,"btn","btn-sm","t-toolbar-button","btn-light","text-primary","t-white-button",3,"click"],["class","d-inline-block","container","body",3,"placement","ngbTooltip",4,"ngIf"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","class","btn btn-light btn-sm text-primary t-white-button t-toolbar-button dropdown-toggle","ngbDropdownToggle","",4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["container","body",3,"placement","ngbTooltip",4,"ngIf"],["icon","chart-line"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["container","body",3,"placement","ngbTooltip"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"disabled","click"],[1,"d-inline"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"t-vertical-align-middle","small","mx-2"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],[1,"table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-sm","border-bottom","bg-white","t-master-table","text-nowrap","table-striped","table-hover"],["colSpan","4",1,"w-50"],[1,"d-flex","justify-content-between","align-items-baseline"],[4,"ngIf","ngIfElse"],["reconciledheader1",""],["class","btn btn-light text-primary t-white-button btn-sm py-0 px-1 mx-2 align-baseline",3,"title","click",4,"ngIf"],["type","file","accept",".csv,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",1,"d-none",3,"change"],["fileInput",""],[1,"text-right"],["reconciledheader2",""],[2,"width","12.5%"],[2,"width","25%"],[1,"text-right",2,"width","12.5%"],[1,"t-slimfit"],[3,"t-highlight-a","t-pale-a","t-highlight-b","t-pale-b","t-yellow-a","t-yellow-b",4,"cdkVirtualFor","cdkVirtualForOf"],["createMenu",""],["class","w-100 p-2 d-flex justify-content-center mt-3",4,"ngIf"],["class","w-100 p-3 px-4",4,"ngIf"],["class","w-100 pl-3 pr-3 mt-3",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],[1,"py-5","t-transparent"],[1,"t-vertical-align-middle","font-weight-normal","mx-2"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","mx-2","align-baseline",3,"title","click"],["icon","download","tabindex","-1"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"disabled","title","click"],["icon","upload","tabindex","-1"],[1,"t-slimfit",2,"min-width","33px"],[1,"t-slimfit",2,"min-width","42px"],[1,"t-slimfit","px-0"],[1,"t-a"],[1,"text-right","t-a"],["reconciledcolumns",""],["viewExEntry",""],[1,"t-b"],[1,"text-center","t-a"],["class","mx-2","container","body","triggers","mouseenter:mouseleave",3,"ngbPopover","placement",4,"ngIf"],[1,"px-0","t-a"],["class","mx-2","popoverClass","t-error-popover","container","body","triggers","mouseenter:mouseleave",3,"ngbPopover","placement",4,"ngIf"],["entryErrorsPopover",""],[1,"px-0","t-b"],["exEntryErrorsPopover",""],[1,"text-center","t-b"],["reconciledLaterInfo",""],["class","btn btn-light text-primary t-white-button btn-sm py-0 px-1 align-baseline",3,"title","click",4,"ngIf"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"title","click"],["icon","clone","tabindex","-1"],["class","custom-control custom-checkbox t-labelless-checkbox d-inline",4,"ngIf","ngIfElse"],["cancelButton",""],[1,"custom-control","custom-checkbox","t-labelless-checkbox","d-inline"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[1,"btn","btn-light","text-black-50","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"title","click","mouseenter","mouseleave"],[1,"small"],["icon","times","tabindex","-1"],["container","body","triggers","mouseenter:mouseleave",1,"mx-2",3,"ngbPopover","placement"],["icon","exclamation-circle",1,"text-muted"],["popoverClass","t-error-popover","container","body","triggers","mouseenter:mouseleave",1,"mx-2",3,"ngbPopover","placement"],["icon","exclamation-triangle",1,"text-danger"],[2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"],["excancelbutton",""],["icon","exclamation-circle"],[1,"bg-white","border-right","border-left"],[1,"t-form-group",3,"serverErrors"],[3,"disabled","ngModel","ngModelOptions","ngModelChange"],[1,"text-right","t-b"],["textAlignment","right",3,"disabled","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"t-b",3,"ngbPopover","placement","dblclick"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["postingDateErrors",""],["exRefErrors",""],["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"text-right","t-b",3,"ngbPopover","placement","dblclick"],["monetaryValueErrors",""],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["ngbDropdown","",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu","",2,"min-width","5rem"],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf","ngIfElse"],["cancelTemplate",""],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf"],["ngbDropdownItem","",1,"t-transparent-background",3,"click"],[4,"ngTemplateOutlet"],[3,"colSpan"],[3,"colSpan","dblclick"],[1,"w-100","p-2","d-flex","justify-content-center","mt-3"],[3,"scale"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"w-100","pl-3","pr-3","mt-3"],[1,"w-100","mt-3"],[1,"text-center","w-100"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",2,"white-space","pre"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","check",1,"text-success"],[1,"modal-body"],[1,"btn","btn-danger",3,"click"],["icon","check"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],[1,"row","pt-0","pb-3"],[1,"t-wide-form-group",3,"label"],[1,"table-responsive","mt-2"],[1,"table","table-sm","border-bottom","text-nowrap","table-striped"],["icon","minus",1,"t-vertical-align-middle"],["icon","plus",1,"t-vertical-align-middle"],["icon","equals",1,"t-vertical-align-middle"],[1,"row","pt-0","pb-3","px-2"],[3,"ngModel","choices","hideEmptyOption","ngModelChange"],["ngbAutofocus","",1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"]],template:function(e,t){if(1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"ul",3),r.Vb(4,"li",4),r.Tc(5),r.mc(6,"translate"),r.Rc(7,yce,2,0,"span",5),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",6),r.Vb(9,"div",7),r.Vb(10,"div",8),r.Vb(11,"t-form-group",9),r.mc(12,"translate"),r.Vb(13,"t-selector",10),r.hc("ngModelChange",(function(e){return t.view=e})),r.Ub(),r.Ub(),r.Vb(14,"t-form-group",9),r.mc(15,"translate"),r.Vb(16,"t-accounts-picker",11),r.hc("ngModelChange",(function(e){return t.accountId=e}))("entityLoaded",(function(){return t.onParameterLoaded()})),r.Ub(),r.Ub(),r.Rc(17,wce,3,3,"t-form-group",12),r.Rc(18,Mce,4,7,"ng-container",13),r.Rc(19,Vce,16,39,"ng-container",13),r.Ub(),r.Ub(),r.Ub(),r.Vb(20,"div",14),r.Rc(21,Ece,17,22,"div",13),r.Rc(22,Uce,9,6,"div",13),r.Rc(23,Sce,7,5,"div",13),r.Vb(24,"div"),r.Rc(25,Oce,5,5,"div",15),r.Vb(26,"button",16),r.hc("click",(function(){return t.onToggleCollapseParameters()})),r.mc(27,"translate"),r.Qb(28,"fa-icon",17),r.Vb(29,"span",18),r.Tc(30),r.mc(31,"translate"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(32,"div",19),r.Rc(33,Fae,61,41,"div",20),r.Rc(34,Aae,2,1,"ng-template",null,21,r.Sc),r.Ub(),r.Ub(),r.Rc(36,Pae,15,7,"ng-template",null,22,r.Sc),r.Rc(38,Nae,15,7,"ng-template",null,23,r.Sc),r.Rc(40,jae,19,12,"ng-template",null,24,r.Sc),r.Rc(42,Wae,61,46,"ng-template",null,25,r.Sc),r.Rc(44,qae,24,22,"ng-template",null,26,r.Sc)),2&e){var n=r.Fc(35);r.Bb(5),r.Vc(" ",r.nc(6,27,"BankReconciliation")," "),r.Bb(2),r.sc("ngIf",t.isDirty),r.Bb(1),r.Gb("d-none",t.collapseParameters),r.Bb(3),r.sc("label",r.nc(12,29,"View")),r.Bb(2),r.sc("ngModel",t.view)("choices",t.viewChoices)("ngModelOptions",r.vc(37,kce))("disabled",t.isDirty)("hideEmptyOption",!0),r.Bb(1),r.sc("label",r.nc(15,31,"Entry_Account")),r.Bb(2),r.sc("ngModel",t.accountId)("ensureAdditionalSelect",!0)("showCreate",!1)("disabled",t.isDirty),r.Bb(1),r.sc("ngIf",t.showCustodyParameter),r.Bb(1),r.sc("ngIf",t.isUnreconciled),r.Bb(1),r.sc("ngIf",t.isReconciled),r.Bb(2),r.sc("ngIf",t.showCheckedEntriesToolbar),r.Bb(1),r.sc("ngIf",t.showEditToolbar),r.Bb(1),r.sc("ngIf",t.showViewToolbar),r.Bb(2),r.sc("ngIf",!t.isDirty),r.Bb(1),r.tc("title",r.nc(27,33,t.collapseParameters?"Expand":"Collapse")),r.Bb(2),r.sc("icon",t.collapseParameters?"angle-down":"angle-up"),r.Bb(2),r.Vc("\xa0\xa0",r.nc(31,35,t.collapseParameters?"Expand":"Collapse"),""),r.Bb(3),r.sc("ngIf",t.initialized)("ngIfElse",n)}},directives:[x.u,Ce.a,En.a,ie.k,ie.n,lQ,ne.b,YW,Ca,dd,we.a,xn,X.E,X.l,X.p,X.r,X.o,pr.e,pr.a,pr.d,ie.a,X.C,x.t,uG,x.B,ye.a,ke.a],pipes:[G.d,dg,x.g,sg],encapsulation:2}),Qae);function $ae(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",9),r.Vb(4,"span",8),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.c[n].ToEmail),r.Bb(3),r.Uc(i.c[n].Subject)}}function Gae(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Email_Subject"),"\n")}function zae(e,t){if(1&e&&(r.Vb(0,"span",10),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.Uc(i.c[n].Subject)}}function Jae(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Success")," ")}function Kae(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Pending")," ")}function Yae(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Error")," ")}var Xae,Zae=function(){return[]},ele=function(e){return{template:e,expression:"State gt 2"}},tle=function(e){return{template:e,expression:"State ge 0 and State le 2"}},nle=function(e){return{template:e,expression:"State lt 0"}},ile=function(e,t,n){return[e,t,n]},rle=function(e){return{State:e}},ole=((Xae=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i}return _createClass(n,[{key:"c",get:function(){return this.ws.EmailForQuery}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||Xae)(r.Pb(S.m))},Xae.\u0275cmp=r.Jb({type:Xae,selectors:[["t-emails-master"]],features:[r.yb],decls:14,vars:27,consts:[["collection","EmailForQuery","selectDefault","ToEmail,State,StateSince","selectForTiles","ToEmail,Subject",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["success",""],["pending",""],["error",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,$ae,6,2,"ng-template",null,1,r.Sc),r.Rc(4,Gae,2,3,"ng-template",null,2,r.Sc),r.Rc(6,zae,2,1,"ng-template",null,3,r.Sc),r.Rc(8,Jae,2,3,"ng-template",null,4,r.Sc),r.Rc(10,Kae,2,3,"ng-template",null,5,r.Sc),r.Rc(12,Yae,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"Emails"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(14,Zae))("filterDefinition",r.wc(25,rle,r.yc(21,ile,r.wc(15,ele,c),r.wc(17,tle,a),r.wc(19,nle,l))))}},directives:[Ot.a],pipes:[G.d],encapsulation:2}),Xae),cle=n("d9Te"),ale=["iframe"];function lle(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.model;r.Bb(1),r.Uc(null==n?null:n.Subject)}}function sle(e,t){if(1&e&&(r.Vb(0,"t-form-group",3),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"datetimeFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"Email_DeliveredAt")),r.Bb(3),r.Uc(r.nc(4,4,null==n?null:n.DeliveredAt))}}function ule(e,t){if(1&e&&(r.Vb(0,"t-form-group",3),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.mc(4,"datetimeFormat"),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"Email_OpenedAt")),r.Bb(3),r.Uc(r.nc(4,4,null==n?null:n.OpenedAt))}}function dle(e,t){if(1&e&&(r.Vb(0,"t-form-group",3),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"Email_ErrorMessage")),r.Bb(3),r.Uc(null==n?null:n.ErrorMessage)}}function ble(e,t){1&e&&(r.Tb(0),r.Qb(1,"div",8),r.Vb(2,"div",9),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"div",10),r.Qb(6,"iframe",11,12),r.Ub(),r.Sb()),2&e&&(r.Bb(3),r.Vc(" ",r.nc(4,1,"Email_Body")," "))}function fle(e,t){if(1&e&&(r.Vb(0,"t-form-group",3),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub(),r.Vb(4,"t-form-group",3),r.mc(5,"translate"),r.Vb(6,"div"),r.Tc(7),r.Ub(),r.Ub(),r.Qb(8,"div",4),r.Vb(9,"t-form-group",3),r.Vb(10,"div",5),r.Tc(11),r.Ub(),r.Ub(),r.Vb(12,"t-form-group",3),r.mc(13,"translate"),r.Vb(14,"div"),r.Tc(15),r.mc(16,"datetimeFormat"),r.Ub(),r.Ub(),r.Rc(17,sle,5,6,"t-form-group",6),r.Rc(18,ule,5,6,"t-form-group",6),r.Rc(19,dle,4,4,"t-form-group",6),r.Rc(20,ble,8,3,"ng-container",7)),2&e){var n=t.model,i=r.lc();r.sc("label",r.nc(1,14,"Email_Subject")),r.Bb(3),r.Uc(null==n?null:n.Subject),r.Bb(1),r.sc("label",r.nc(5,16,"Email_ToEmail")),r.Bb(3),r.Uc(null==n?null:n.ToEmail),r.Bb(2),r.sc("label","State"),r.Bb(1),r.Qc("background",i.stateColor(null==n?null:n.State),r.Ib),r.Bb(1),r.Vc("",i.stateDisplay(null==n?null:n.State)," "),r.Bb(1),r.sc("label",r.nc(13,18,"StateSince")),r.Bb(3),r.Uc(r.nc(16,20,null==n?null:n.StateSince)),r.Bb(2),r.sc("ngIf",!!n&&n.State<=-4||n.State>=3),r.Bb(1),r.sc("ngIf",!!n&&n.State<=-4||n.State>=4),r.Bb(1),r.sc("ngIf",!!n&&n.State<0),r.Bb(1),r.sc("ngIf",i.watch(null==n?null:n.Body))}}var mle,gle=function(){return[]},ple=((mle=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).workspace=e,r.translate=i,r.expand="",r}return _createClass(n,[{key:"ngOnDestroy",value:function(){this.emailBodyCleanup(),_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this)}},{key:"emailBodyCleanup",value:function(){this._url&&(window.URL.revokeObjectURL(this._url),delete this._url),delete this._body,this.iframe&&this.iframe.nativeElement.contentWindow.location.replace(void 0)}},{key:"stateDisplay",value:function(e){if(!this._stateDesc){var t=Object(cle.a)(null,this.translate);this._stateDesc=t.properties.State}return this._stateDesc.format(e)}},{key:"stateColor",value:function(e){if(!this._stateDesc){var t=Object(cle.a)(null,this.translate);this._stateDesc=t.properties.State}return this._stateDesc.color(e)}},{key:"watch",value:function(e){if(e){if(e!==this._body){this._body=e;var t=new Blob(['<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8">\n</head>\n<body style="margin: 0; padding: 1rem;">\n  <div style="display: flex; justify-content: center;">\n    '.concat(e,"\n  </div>\n</body>\n</html>")],{type:"text/html"});this._url=window.URL.createObjectURL(t)+"#toolbar=0&navpanes=0&scrollbar=0",this.iframe&&this.iframe.nativeElement.contentWindow.location.replace(this._url)}}else this.emailBodyCleanup();return!!e}},{key:"iframe",set:function(e){this._iframe!==e&&(this._iframe&&this._iframe.nativeElement.contentWindow.location.replace(void 0),this._iframe=e,this._iframe&&this._iframe.nativeElement.contentWindow.location.replace(this._url))},get:function(){return this._iframe}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||mle)(r.Pb(S.m),r.Pb(G.e))},mle.\u0275cmp=r.Jb({type:mle,selectors:[["t-emails-details"]],viewQuery:function(e,t){var n;1&e&&r.Yc(ale,!0),2&e&&r.Ec(n=r.ic())&&(t.iframe=n.first)},features:[r.yb],decls:6,vars:14,consts:[["collection","EmailForQuery",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"t-form-group",3,"label"],[1,"w-100"],[1,"text-white","px-2"],["class","t-form-group",3,"label",4,"ngIf"],[4,"ngIf"],[1,"w-100","mt-2"],[1,"small","font-weight-bold","t-form-group"],[1,"w-100","mt-2","border-top",2,"min-height","500px"],["sandbox","",1,"p-0","border-0","w-100","h-100","d-block"],["iframe",""]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,lle,2,1,"ng-template",null,1,r.Sc),r.Rc(4,fle,21,22,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5);r.sc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",r.nc(1,11,"Emails"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.vc(13,gle))}},directives:[q.a,Ce.a,x.u],pipes:[G.d,Te],encapsulation:2}),mle),hle=n("klyd");function vle(e,t){if(1&e&&(r.Vb(0,"div",3),r.Tc(1),r.Ub()),2&e){var n=t.model;r.Bb(1),r.Uc(null==n?null:n.Message)}}function yle(e,t){if(1&e&&(r.Vb(0,"t-form-group",4),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub()),2&e){var n=r.lc().model;r.sc("label",r.nc(1,2,"SmsMessage_ErrorMessage")),r.Bb(3),r.Uc(null==n?null:n.ErrorMessage)}}function Ile(e,t){if(1&e&&(r.Vb(0,"t-form-group",4),r.mc(1,"translate"),r.Vb(2,"div"),r.Tc(3),r.Ub(),r.Ub(),r.Qb(4,"div",5),r.Vb(5,"t-form-group",4),r.Vb(6,"div",6),r.Tc(7),r.Ub(),r.Ub(),r.Vb(8,"t-form-group",4),r.mc(9,"translate"),r.Vb(10,"div"),r.Tc(11),r.mc(12,"datetimeFormat"),r.Ub(),r.Ub(),r.Rc(13,yle,4,4,"t-form-group",7),r.Vb(14,"t-form-group",8),r.mc(15,"translate"),r.Vb(16,"span",9),r.Tc(17),r.Ub(),r.Ub()),2&e){var n=t.model,i=r.lc();r.sc("label",r.nc(1,11,"SmsMessage_ToPhoneNumber")),r.Bb(3),r.Uc(null==n?null:n.ToPhoneNumber),r.Bb(2),r.sc("label","State"),r.Bb(1),r.Qc("background",i.stateColor(null==n?null:n.State),r.Ib),r.Bb(1),r.Vc("",i.stateDisplay(null==n?null:n.State)," "),r.Bb(1),r.sc("label",r.nc(9,13,"StateSince")),r.Bb(3),r.Uc(r.nc(12,15,null==n?null:n.StateSince)),r.Bb(2),r.sc("ngIf",!!n&&n.State<0),r.Bb(1),r.sc("label",r.nc(15,17,"SmsMessage_Message")),r.Bb(3),r.Uc(null==n?null:n.Message)}}var Cle,wle=function(){return[]},kle=((Cle=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).workspace=e,r.translate=i,r.expand="",r}return _createClass(n,[{key:"stateDisplay",value:function(e){if(!this._stateDesc){var t=Object(hle.a)(null,this.translate);this._stateDesc=t.properties.State}return this._stateDesc.format(e)}},{key:"stateColor",value:function(e){if(!this._stateDesc){var t=Object(hle.a)(null,this.translate);this._stateDesc=t.properties.State}return this._stateDesc.color(e)}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||Cle)(r.Pb(S.m),r.Pb(G.e))},Cle.\u0275cmp=r.Jb({type:Cle,selectors:[["t-sms-messages-details"]],features:[r.yb],decls:6,vars:14,consts:[["collection","SmsMessageForQuery",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"text-truncate",2,"max-width","200px"],[1,"t-form-group",3,"label"],[1,"w-100"],[1,"text-white","px-2"],["class","t-form-group",3,"label",4,"ngIf"],[1,"t-wide-form-group",3,"label"],[2,"white-space","pre"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,vle,2,1,"ng-template",null,1,r.Sc),r.Rc(4,Ile,18,19,"ng-template",null,2,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5);r.sc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",r.nc(1,11,"SmsMessages"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.vc(13,wle))}},directives:[q.a,Ce.a,x.u],pipes:[G.d,Te],encapsulation:2}),Cle);function Mle(e,t){if(1&e&&(r.Vb(0,"div",7),r.Vb(1,"span",8),r.Tc(2),r.Ub(),r.Ub(),r.Vb(3,"div",9),r.Vb(4,"span",8),r.Tc(5),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.c[n].ToPhoneNumber),r.Bb(3),r.Uc(i.c[n].Message)}}function Vle(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"SmsMessage_Message"),"\n")}function Tle(e,t){if(1&e&&(r.Vb(0,"div",10),r.Tc(1),r.Ub()),2&e){var n=t.id,i=r.lc();r.sc("title",i.c[n].Message),r.Bb(1),r.Uc(i.c[n].Message)}}function Ele(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Success")," ")}function Ule(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Pending")," ")}function xle(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"Error")," ")}var Rle,Dle=function(){return[]},Ble=function(e){return{template:e,expression:"State eq 4"}},Sle=function(e){return{template:e,expression:"State ge 0 and State le 3"}},_le=function(e){return{template:e,expression:"State lt 0"}},Ole=function(e,t,n){return[e,t,n]},Lle=function(e){return{State:e}},Fle=((Rle=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i}return _createClass(n,[{key:"c",get:function(){return this.ws.SmsMessageForQuery}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||Rle)(r.Pb(S.m))},Rle.\u0275cmp=r.Jb({type:Rle,selectors:[["t-sms-messages-master"]],features:[r.yb],decls:14,vars:27,consts:[["collection","SmsMessageForQuery","selectDefault","ToPhoneNumber,State,StateSince","selectForTiles","ToPhoneNumber,Message",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["success",""],["pending",""],["error",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate",2,"max-width","400px",3,"title"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,Mle,6,2,"ng-template",null,1,r.Sc),r.Rc(4,Vle,2,3,"ng-template",null,2,r.Sc),r.Rc(6,Tle,2,2,"ng-template",null,3,r.Sc),r.Rc(8,Ele,2,3,"ng-template",null,4,r.Sc),r.Rc(10,Ule,2,3,"ng-template",null,5,r.Sc),r.Rc(12,xle,2,3,"ng-template",null,6,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11),l=r.Fc(13);r.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"SmsMessages"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(14,Dle))("filterDefinition",r.wc(25,Lle,r.yc(21,Ole,r.wc(15,Ble,c),r.wc(17,Sle,a),r.wc(19,_le,l))))}},directives:[Ot.a],pipes:[G.d],encapsulation:2}),Rle),Ale=n("wHSu");function Ple(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.mc(2,"dateFormat"),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc(r.nc(2,1,null==n?null:n.ArchiveDate))}}var Nle=function(){return{updateOn:"blur"}};function jle(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-date-picker",10),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ArchiveDate=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.ArchiveDate)("ngModelOptions",r.vc(2,Nle))}}function Wle(e,t){if(1&e&&(r.Vb(0,"t-view-link",11),r.Tc(1),r.Ub()),2&e){var n=r.lc().model,i=r.lc();r.sc("itemId",null==n?null:n.FunctionalCurrencyId),r.Bb(1),r.Vc(" ",i.ws.getMultilingualValue("Currency",null==n?null:n.FunctionalCurrencyId,"Name")," ")}}function qle(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-currencies-picker",12),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.FunctionalCurrencyId=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.FunctionalCurrencyId)}}function Qle(e,t){if(1&e&&(r.Vb(0,"div"),r.Tc(1),r.Ub()),2&e){var n=r.lc().model;r.Bb(1),r.Uc((null==n?null:n.TaxIdentificationNumber)||"-")}}function Hle(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-text-editor",13),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.TaxIdentificationNumber=e})),r.Ub()}if(2&e){var i=r.lc().model;r.sc("ngModel",i.TaxIdentificationNumber)("ngModelOptions",r.vc(2,Nle))}}function $le(e,t){if(1&e&&(r.Vb(0,"div",2),r.Vb(1,"div",3),r.Vb(2,"t-form-group-settings",4),r.mc(3,"translate"),r.mc(4,"translate"),r.Rc(5,Ple,3,3,"div",5),r.Rc(6,jle,1,3,"t-date-picker",6),r.Ub(),r.Vb(7,"t-form-group-settings",4),r.mc(8,"translate"),r.mc(9,"translate"),r.Rc(10,Wle,2,2,"t-view-link",7),r.Rc(11,qle,1,1,"t-currencies-picker",8),r.Ub(),r.Vb(12,"t-form-group-settings",4),r.mc(13,"translate"),r.mc(14,"translate"),r.Rc(15,Qle,2,1,"div",5),r.Rc(16,Hle,1,3,"t-text-editor",9),r.Ub(),r.Ub(),r.Ub()),2&e){var n=t.model,i=t.isEdit;r.Bb(2),r.sc("label",r.nc(3,15,"Settings_ArchiveDate"))("description",r.nc(4,17,"Settings_ArchiveDateDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.ArchiveDate),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(8,19,"Settings_FunctionalCurrency"))("description",r.nc(9,21,"Settings_FunctionalCurrencyDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.FunctionalCurrencyId),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i),r.Bb(1),r.sc("label",r.nc(13,23,"Settings_TIN"))("description",r.nc(14,25,"Settings_TINDescription"))("serverErrors",null==n.serverErrors?null:n.serverErrors.TaxIdentificationNumber),r.Bb(3),r.sc("ngIf",!i),r.Bb(1),r.sc("ngIf",i)}}var Gle,zle=((Gle=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i}return _createClass(n,[{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(EI)).\u0275fac=function(e){return new(e||Gle)(r.Pb(S.m))},Gle.\u0275cmp=r.Jb({type:Gle,selectors:[["t-financial-settings"]],features:[r.yb],decls:4,vars:4,consts:[["endpoint","financial-settings","view","financial-settings","expand","FunctionalCurrency",3,"title","template"],["template",""],[1,"m-0","pt-3","pt-sm-4","pb-3","pb-sm-5","pl-0","pl-sm-3","pr-0","pr-sm-3"],[1,"row","col-12","t-settings-section"],[1,"t-form-group",3,"label","description","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["link","../currencies",3,"itemId",4,"ngIf"],["required","",3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],["link","../currencies",3,"itemId"],["required","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-settings",0),r.mc(1,"translate"),r.Rc(2,$le,17,27,"ng-template",null,1,r.Sc)),2&e){var n=r.Fc(3);r.sc("title",r.nc(1,2,"FinancialSettings"))("template",n)}},directives:[TI,OI,x.u,dd,ie.u,ie.k,ie.n,Ca,Zu,we.a],pipes:[G.d,sg],encapsulation:2}),Gle),Jle=["errorModal"];function Kle(e,t){if(1&e&&(r.Vb(0,"div",20),r.Vb(1,"ul",21),r.Vb(2,"li",22),r.Tc(3),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc(" ",n.title," ")}}function Yle(e,t){1&e&&r.Qb(0,"t-spinner",23)}function Xle(e,t){1&e&&(r.Vb(0,"div",24),r.Qb(1,"fa-icon",25),r.Tc(2),r.mc(3,"translate"),r.Ub()),2&e&&(r.Bb(2),r.Vc(" \xa0 ",r.nc(3,1,"FillRequiredFields")," "))}function Zle(e,t){if(1&e&&(r.Vb(0,"div",26),r.Vb(1,"h5",27),r.Qb(2,"fa-icon",28),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"button",29),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(6,"span",30),r.Tc(7,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"div",31),r.Tc(9),r.Ub(),r.Vb(10,"div",32),r.Vb(11,"button",33),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(12,"fa-icon",34),r.Tc(13),r.mc(14,"translate"),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc("\xa0\xa0",r.nc(4,3,"Error")," "),r.Bb(6),r.Vc(" ",n.errorMessage," "),r.Bb(4),r.Vc(" \xa0",r.nc(14,5,"Dismiss")," ")}}var ese,tse=((ese=function(){function e(t,n,i,r,o){_classCallCheck(this,e),this.workspace=t,this.translate=n,this.router=i,this.route=r,this.modalService=o,this.refresh$=new U.a,this.export$=new U.a,this.exportStatus=S.g.loaded}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._subscriptions=new O.a,this._subscriptions.add(this.route.paramMap.subscribe((function(t){var n=+t.get("definitionId");n&&e.workspace.currentTenant.definitions.Reports[n]||e.router.navigate(["page-not-found"],{relativeTo:e.route.parent,replaceUrl:!0}),e.definitionId=n,e.filter=t.get("filter"),e.cacheBuster=t.get("cache_buster")})))}},{key:"ngOnDestroy",value:function(){this._subscriptions.unsubscribe()}},{key:"urlStateChanged",value:function(){var e={},t=this.state;this.cacheBuster&&(e.cache_buster=this.cacheBuster),this.filter&&(e.filter=this.filter),t.orderbyKey&&(e.$orderby="".concat(t.orderbyKey," ").concat(t.orderbyDir)),this.router.navigate([".",e],{relativeTo:this.route,replaceUrl:!0})}},{key:"onExport",value:function(){var e=this.title;e&&(e+=".csv"),this.export$.next(e)}},{key:"onExportStarting",value:function(){this.exportStatus=S.g.loading}},{key:"onExportSuccess",value:function(){this.exportStatus=S.g.loaded}},{key:"onExportError",value:function(e){this.exportStatus=S.g.error,this.errorMessage=e,this.modalService.open(this.errorModal)}},{key:"onRefresh",value:function(){this.refresh$.next()}},{key:"onPreviousPage",value:function(){var e=this.state;e.skip=Math.max(e.skip-pa.DEFAULT_PAGE_SIZE,0),this.refresh$.next()}},{key:"onNextPage",value:function(){var e=this.state;e.skip=e.skip+pa.DEFAULT_PAGE_SIZE,this.refresh$.next()}},{key:"onOrderByChange",value:function(){this.urlStateChanged()}},{key:"originalDefinition",get:function(){return this.workspace.currentTenant.definitions.Reports[this.definitionId]}},{key:"modifiedDefinition",get:function(){var e=this.originalDefinition,t=this.state;if(this.filter!==t.drilldownFilter||this.cacheBuster!==t.drilldownCacheBuster||e!==t.drilldownOriginalDefinition){t.drilldownFilter=this.filter,t.drilldownCacheBuster=this.cacheBuster,t.drilldownOriginalDefinition=e;var n=JSON.parse(JSON.stringify(e));n.Type="Details",n.Filter=this.filter,t.drilldownModifiedDefinition=n}return this.state.drilldownModifiedDefinition}},{key:"stateKey",get:function(){return"".concat(this.definitionId,"/drilldown")}},{key:"state",get:function(){var e=this.stateKey,t=this.workspace.currentTenant.reportState;return t[e]||(t[e]=new S.j),t[e]}},{key:"flip",get:function(){return this.workspace.ws.isRtl?"horizontal":null}},{key:"title",get:function(){return"".concat(this.workspace.currentTenant.getMultilingualValueImmediate(this.originalDefinition,"Title")," - ").concat(this.translate.instant("Drilldown"))}},{key:"showExportSpinner",get:function(){return this.exportStatus===S.g.loading}},{key:"canExport",get:function(){return!0}},{key:"disableRefresh",get:function(){return this.badDefinition}},{key:"skip",get:function(){return this.state.skip}},{key:"from",get:function(){return Math.min(this.state.skip+1,this.total)}},{key:"to",get:function(){var e=this.state;return Math.min(e.skip+pa.DEFAULT_PAGE_SIZE,e.total)}},{key:"total",get:function(){return this.state.total}},{key:"totalDisplay",get:function(){var e=this.total;return e>=S.d?Object(x.L)(S.d-1,"en-GB")+"+":Object(x.L)(e,"en-GB")}},{key:"canPreviousPage",get:function(){return this.state.skip>0}},{key:"canNextPage",get:function(){return this.to<this.total}},{key:"refresh",get:function(){return this.refresh$}},{key:"export",get:function(){return this.export$}}]),e}()).\u0275fac=function(e){return new(e||ese)(r.Pb(S.m),r.Pb(G.e),r.Pb(i.e),r.Pb(i.a),r.Pb(X.t))},ese.\u0275cmp=r.Jb({type:ese,selectors:[["t-drilldown"]],viewQuery:function(e,t){var n;1&e&&r.Oc(Jle,!0),2&e&&r.Ec(n=r.ic())&&(t.errorModal=n.first)},decls:39,vars:31,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","t-vertical-align-middle mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"d-inline"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],[1,"row","t-rest-of-screen"],["mode","screen",1,"h-100","w-100",3,"definition","refresh","export","state","exportStarting","exportSuccess","exportError","orderbyChange"],["fillRequiredFields",""],["errorModal",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"t-vertical-align-middle","mx-1"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Rc(2,Kle,4,1,"div",2),r.Vb(3,"div",3),r.Vb(4,"div"),r.Vb(5,"button",4),r.hc("click",(function(){return t.onExport()})),r.Qb(6,"fa-icon",5),r.Vb(7,"span",6),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Ub(),r.Rc(10,Yle,1,0,"t-spinner",7),r.Ub(),r.Vb(11,"div"),r.Vb(12,"button",8),r.hc("click",(function(){return t.onRefresh()})),r.mc(13,"translate"),r.Qb(14,"fa-icon",9),r.Ub(),r.Vb(15,"div",10),r.Vb(16,"div",11),r.Vb(17,"span",12),r.Vb(18,"span"),r.Tc(19),r.mc(20,"number"),r.Ub(),r.Tc(21," - "),r.Vb(22,"span"),r.Tc(23),r.mc(24,"number"),r.Ub(),r.Ub(),r.Vb(25,"span",12),r.Tc(26),r.Ub(),r.Ub(),r.Vb(27,"button",13),r.hc("click",(function(){return t.onPreviousPage()})),r.mc(28,"translate"),r.Qb(29,"fa-icon",14),r.Ub(),r.Vb(30,"button",13),r.hc("click",(function(){return t.onNextPage()})),r.mc(31,"translate"),r.Qb(32,"fa-icon",15),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(33,"div",16),r.Vb(34,"t-report-results",17),r.hc("exportStarting",(function(){return t.onExportStarting()}))("exportSuccess",(function(){return t.onExportSuccess()}))("exportError",(function(e){return t.onExportError(e)}))("orderbyChange",(function(){return t.onOrderByChange()})),r.Ub(),r.Rc(35,Xle,4,3,"ng-template",null,18,r.Sc),r.Ub(),r.Ub(),r.Rc(37,Zle,15,7,"ng-template",null,19,r.Sc)),2&e&&(r.Bb(2),r.sc("ngIf",!!t.title),r.Bb(3),r.sc("disabled",!t.canExport),r.Bb(3),r.Vc("\xa0\xa0",r.nc(9,19,"Export"),""),r.Bb(2),r.sc("ngIf",t.showExportSpinner),r.Bb(2),r.tc("title",r.nc(13,21,"Refresh")),r.sc("disabled",t.disableRefresh),r.Bb(7),r.Uc(r.nc(20,23,t.from)),r.Bb(4),r.Uc(r.nc(24,25,t.to)),r.Bb(3),r.Vc(" / ",t.totalDisplay,""),r.Bb(1),r.tc("title",r.nc(28,27,"Previous")),r.sc("disabled",!t.canPreviousPage),r.Bb(2),r.sc("flip",t.flip),r.Bb(1),r.tc("title",r.nc(31,29,"Next")),r.sc("disabled",!t.canNextPage),r.Bb(2),r.sc("flip",t.flip),r.Bb(2),r.sc("definition",t.modifiedDefinition)("refresh",t.refresh)("export",t.export)("state",t.state))},directives:[x.u,ne.b,pa,ye.a],pipes:[G.d,x.g],encapsulation:2}),ese);function nse(e,t){if(1&e&&(r.Vb(0,"div",6),r.Vb(1,"span",7),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Ub(),r.Vb(4,"div",8),r.Vb(5,"span",7),r.Tc(6),r.Ub(),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(2),r.Uc(i.ws.getMultilingualValue("DashboardDefinition",n,"Title")||r.nc(3,2,"Untitled")),r.Bb(4),r.Uc(i.ws.getMultilingualValue("DashboardDefinition",n,"Code"))}}function ise(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"DashboardDefinition"),"\n")}function rse(e,t){if(1&e&&(r.Vb(0,"span",9),r.Qb(1,"t-auto-cell",10),r.Ub()),2&e){var n=t.id,i=r.lc();r.Bb(1),r.sc("entity",i.c[n])}}function ose(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"VisibleInMainMenu")," ")}function cse(e,t){1&e&&(r.Tc(0),r.mc(1,"translate")),2&e&&r.Vc(" ",r.nc(1,1,"NotVisibleInMainMenu")," ")}var ase,lse=function(){return[]},sse=function(e){return{template:e,expression:"ShowInMainMenu eq true"}},use=function(e){return{template:e,expression:"ShowInMainMenu eq false"}},dse=function(e,t){return[e,t]},bse=function(e){return{ShowInMainMenu:e}},fse=((ase=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).workspace=e,i}return _createClass(n,[{key:"c",get:function(){return this.ws.DashboardDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}}]),n}(_t.a)).\u0275fac=function(e){return new(e||ase)(r.Pb(S.m))},ase.\u0275cmp=r.Jb({type:ase,selectors:[["t-dashboard-definitions-master"]],features:[r.yb],decls:12,vars:22,consts:[["collection","DashboardDefinition","selectDefault","Code,ShowInMainMenu","selectForTiles","Title,Title2,Title3,Code","theme","dark",3,"mode","showCreateButton","filterDefault","masterCrumb","additionalSelect","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["visibleInMainMenu",""],["notVisibleInMainMenu",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","DashboardDefinition",3,"entity"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-master",0),r.mc(1,"translate"),r.Rc(2,nse,7,4,"ng-template",null,1,r.Sc),r.Rc(4,ise,2,3,"ng-template",null,2,r.Sc),r.Rc(6,rse,2,1,"ng-template",null,3,r.Sc),r.Rc(8,ose,2,3,"ng-template",null,4,r.Sc),r.Rc(10,cse,2,3,"ng-template",null,5,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5),o=r.Fc(7),c=r.Fc(9),a=r.Fc(11);r.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("masterCrumb",r.nc(1,10,"DashboardDefinitions"))("additionalSelect",t.additionalSelect)("tileTemplate",n)("tableSummaryColumnTemplate",o)("tableSummaryHeaderTemplate",i)("multiselectActions",r.vc(12,lse))("filterDefinition",r.wc(20,bse,r.xc(17,dse,r.wc(13,sse,c),r.wc(15,use,a))))}},directives:[Ot.a,Ie.a],pipes:[G.d],encapsulation:2}),ase),mse=function(e,t,n,i,r,o,c,a){return e+n>r&&e<r+c&&t+i>o&&t<o+a?t+i-o:0};function gse(e,t){pse(t);for(var n=[e];n.length>0;){var i,r=n.shift(),o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){var c=i.value;if(c!==r){var a=mse(r.OffsetX,r.OffsetY+(r.changeY||0),r.Width,r.Height,c.OffsetX,c.OffsetY+(c.changeY||0),c.Width,c.Height);a>0&&(c.changeY=(c.changeY||0)+a,n.push(c))}}}catch(l){o.e(l)}finally{o.f()}}}function pse(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){delete t.value.changeY}}catch(i){n.e(i)}finally{n.f()}}var hse=["dashboard"];function vse(e,t){if(1&e&&(r.Vb(0,"div",14),r.Vb(1,"ul",15),r.Vb(2,"li",16),r.Tc(3),r.Ub(),r.Ub(),r.Ub()),2&e){var n=r.lc();r.Bb(3),r.Vc(" ",n.title," ")}}function yse(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",21),r.hc("click",(function(){return r.Ic(n),r.lc(2).onEdit()})),r.Tc(1),r.mc(2,"translate"),r.Ub()}2&e&&(r.Bb(1),r.Vc(" ",r.nc(2,1,"EditDefinition")," "))}function Ise(e,t){if(1&e&&(r.Vb(0,"div",17),r.Vb(1,"button",18),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"div",19),r.Rc(5,yse,3,3,"button",20),r.Ub(),r.Ub()),2&e){var n=r.lc();r.sc("placement",n.actionsDropdownPlacement),r.Bb(2),r.Vc(" ",r.nc(3,3,"Actions")," "),r.Bb(3),r.sc("ngIf",n.showEditDefinition)}}function Cse(e,t){if(1&e&&(r.Vb(0,"div",28),r.Qb(1,"div",29),r.Ub()),2&e){var n=r.lc(3);r.Qc("left",n.placeholderLeft,"px")("right",n.placeholderRight,"px")("top",n.placeholderTop,"px")("width",n.placeholderWidth,"px")("height",n.placeholderHeight,"px")}}function wse(e,t){1&e&&r.Rb(0)}function kse(e,t){1&e&&r.Rb(0)}var Mse=function(e,t){return{widget:e,i:t}};function Vse(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",32),r.hc("dblclick",(function(e){r.Ic(n);var t=r.lc().index;return r.lc(3).onDoubleClickWidget(e,t)}))("cdkDragStarted",(function(e){r.Ic(n);var t=r.lc().$implicit;return r.lc(3).onDragStarted(e,t)}))("cdkDragMoved",(function(e){r.Ic(n);var t=r.lc().$implicit;return r.lc(3).onDragMoved(e,t)}))("cdkDragEnded",(function(e){r.Ic(n);var t=r.lc().index;return r.lc(3).onDragEnded(e,t)})),r.Vb(1,"div",33),r.Vb(2,"div",34),r.Rc(3,wse,1,0,"ng-container",35),r.Ub(),r.Rc(4,kse,1,0,"ng-container",35),r.Ub(),r.Ub()}if(2&e){var i=r.lc(),o=i.$implicit,c=i.index;r.lc(2);var a=r.Fc(6),l=r.Fc(8),s=r.lc();r.Qc("left",s.left(o),"px")("right",s.right(o),"px")("top",s.top(o),"px")("width",s.width(o),"px")("height",s.height(o),"px"),r.sc("cdkDragDisabled",!s.isEdit),r.Bb(2),r.Qc("cursor",s.isEdit?"move":"auto"),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(17,Mse,o,c)),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.xc(20,Mse,o,c))}}function Tse(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",36),r.hc("cdkDragStarted",(function(e){r.Ic(n);var t=r.lc().$implicit;return r.lc(3).onResizeStarted(e,t)}))("cdkDragMoved",(function(e){r.Ic(n);var t=r.lc().$implicit;return r.lc(3).onResizeMoved(e,t)}))("cdkDragEnded",(function(e){r.Ic(n);var t=r.lc(),i=t.$implicit,o=t.index;return r.lc(3).onResizeEnded(e,i,o)})),r.Qb(1,"div",37),r.Ub()}if(2&e){var i=r.lc().$implicit,o=r.lc(3);r.Qc("width",o.resizeHandleSize,"px")("height",o.resizeHandleSize,"px")("left",o.leftResizeHandle(i),"px")("right",o.rightResizeHandle(i),"px")("top",o.topResizeHandle(i),"px")}}function Ese(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Vse,5,23,"div",30),r.Rc(2,Tse,2,10,"div",31),r.Sb()),2&e){var n=t.$implicit,i=r.lc(3);r.Bb(1),r.sc("ngIf",i.renderWidget(n)),r.Bb(1),r.sc("ngIf",i.isEdit)}}function Use(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Cse,2,10,"div",26),r.Rc(2,Ese,3,2,"ng-container",27),r.Sb()),2&e){var n=r.lc(2);r.Bb(1),r.sc("ngIf",n.showPlaceholder),r.Bb(1),r.sc("ngForOf",n.definition.Widgets)("ngForTrackBy",n.trackByReportId)}}function xse(e,t){1&e&&r.Rb(0)}function Rse(e,t){1&e&&r.Rb(0)}function Dse(e,t){if(1&e&&(r.Vb(0,"div",39),r.Vb(1,"div",33),r.Vb(2,"div",40),r.Rc(3,xse,1,0,"ng-container",35),r.Ub(),r.Rc(4,Rse,1,0,"ng-container",35),r.Ub(),r.Ub()),2&e){var n=r.lc(),i=n.$implicit,o=n.index;r.lc(2);var c=r.Fc(6),a=r.Fc(8),l=r.lc();r.Qc("height",l.height(i),"px"),r.Bb(3),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(6,Mse,i,o)),r.Bb(1),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(9,Mse,i,o))}}function Bse(e,t){if(1&e&&(r.Tb(0),r.Rc(1,Dse,5,12,"div",38),r.Sb()),2&e){var n=t.$implicit,i=r.lc(3);r.Bb(1),r.sc("ngIf",i.renderWidget(n))}}function Sse(e,t){if(1&e&&r.Rc(0,Bse,2,1,"ng-container",27),2&e){var n=r.lc(2);r.sc("ngForOf",n.definition.Widgets)("ngForTrackBy",n.trackByReportId)}}function _se(e,t){if(1&e&&(r.Vb(0,"div",57),r.Qb(1,"fa-icon",58),r.Ub()),2&e){r.lc();var n=r.Fc(37),i=r.lc(2);r.sc("ngbPopover",n)("container",null)("placement",i.popoverPlacement)}}function Ose(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",50),r.hc("click",(function(){r.Ic(n);var e=r.lc().widget;return r.lc(2).onEditReportDefinition(e)})),r.Vb(1,"div",51),r.Qb(2,"fa-icon",59),r.Ub(),r.Vb(3,"div",52),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}2&e&&(r.Bb(4),r.Vc(" ",r.nc(5,1,"EditDefinition")," "))}function Lse(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Qb(1,"hr"),r.Vb(2,"button",50),r.hc("click",(function(){r.Ic(n);var e=r.lc().i;return r.lc(2).onEditWidget(e)})),r.Vb(3,"div",51),r.Qb(4,"fa-icon",60),r.Ub(),r.Vb(5,"div",52),r.Tc(6),r.mc(7,"translate"),r.Ub(),r.Ub(),r.Vb(8,"button",50),r.hc("click",(function(){r.Ic(n);var e=r.lc().i;return r.lc(2).onDeleteWidget(e)})),r.Vb(9,"div",51),r.Qb(10,"fa-icon",61),r.Ub(),r.Vb(11,"div",52),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Ub(),r.Sb()}2&e&&(r.Bb(6),r.Vc(" ",r.nc(7,2,"Edit")," "),r.Bb(6),r.Vc(" ",r.nc(13,4,"Delete")," "))}function Fse(e,t){if(1&e&&(r.Vb(0,"div",62),r.Vb(1,"p",63),r.Qb(2,"fa-icon",58),r.Tc(3),r.Ub(),r.Ub()),2&e){var n=r.lc().widget,i=r.lc(2);r.Bb(3),r.Vc(" \xa0 ",i.errorMessage(n)," ")}}var Ase=function(e){return{0:e}};function Pse(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",41),r.Vb(1,"span"),r.Tc(2),r.Ub(),r.Qb(3,"br"),r.Vb(4,"span",42),r.mc(5,"datetimeFormat"),r.Tc(6),r.mc(7,"translate"),r.mc(8,"datetimeFormat"),r.Ub(),r.Ub(),r.Vb(9,"div",43),r.Rc(10,_se,2,3,"div",44),r.Ub(),r.Vb(11,"div",45),r.Vb(12,"button",46),r.Vb(13,"span",47),r.Qb(14,"fa-icon",48),r.Ub(),r.Ub(),r.Vb(15,"div",49),r.Vb(16,"button",50),r.hc("click",(function(){r.Ic(n);var e=t.i;return r.lc(2).onRefreshWidget(e)})),r.Vb(17,"div",51),r.Qb(18,"fa-icon",9),r.Ub(),r.Vb(19,"div",52),r.Tc(20),r.mc(21,"translate"),r.Ub(),r.Ub(),r.Vb(22,"button",50),r.hc("click",(function(){r.Ic(n);var e=t.widget;return r.lc(2).onExpandWidget(e)})),r.Vb(23,"div",51),r.Qb(24,"fa-icon",5),r.Ub(),r.Vb(25,"div",52),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Ub(),r.Vb(28,"button",50),r.hc("click",(function(){r.Ic(n);var e=t.i;return r.lc(2).onExportWidget(e)})),r.Vb(29,"div",51),r.Qb(30,"fa-icon",53),r.Ub(),r.Vb(31,"div",52),r.Tc(32),r.mc(33,"translate"),r.Ub(),r.Ub(),r.Rc(34,Ose,6,3,"button",54),r.Rc(35,Lse,14,6,"ng-container",55),r.Ub(),r.Ub(),r.Rc(36,Fse,4,1,"ng-template",null,56,r.Sc)}if(2&e){var i=t.widget,o=r.lc(2);r.Bb(2),r.Vc(" ",o.ws.getMultilingualValueImmediate(i,"Title")||o.ws.getMultilingualValueImmediate(o.reportDefinition(i),"Title")," "),r.Bb(2),r.sc("title",r.pc(5,11,o.state(i).time,null,6)),r.Bb(2),r.Uc(r.oc(7,15,"Refreshed0",r.wc(28,Ase,r.pc(8,18,o.state(i).time,null,6)))),r.Bb(4),r.sc("ngIf",o.showErrorIcon(i)),r.Bb(1),r.sc("placement",o.popoverPlacement)("container",null),r.Bb(9),r.Vc(" ",r.nc(21,22,"Refresh")," "),r.Bb(6),r.Vc(" ",r.nc(27,24,"Expand")," "),r.Bb(6),r.Vc(" ",r.nc(33,26,"Export")," "),r.Bb(2),r.sc("ngIf",o.showEditReportDefinition),r.Bb(1),r.sc("ngIf",o.isEdit)}}function Nse(e,t){if(1&e){var n=r.Wb();r.Vb(0,"t-report-results",64),r.hc("silentRefreshError",(function(e){r.Ic(n);var i=t.widget,o=t.i;return r.lc(2).onSilentRefreshError(e,i,o)})),r.Ub()}if(2&e){var i=t.widget,o=t.i,c=r.lc(2);r.Gb("bg-light",c.isPivot(i)),r.sc("definition",c.reportDefinition(i))("view",c.reportView(i))("state",c.state(i))("refresh",c.refreshSubject(o))("export",c.exportSubject(o))("disableDrilldown",c.disableDrilldown)}}function jse(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",22),r.Rc(2,Use,3,3,"ng-container",12),r.Rc(3,Sse,1,2,"ng-template",null,23,r.Sc),r.Rc(5,Pse,38,30,"ng-template",null,24,r.Sc),r.Rc(7,Nse,1,8,"ng-template",null,25,r.Sc),r.Ub(),r.Sb()),2&e){var n=r.Fc(4),i=r.lc();r.Bb(1),r.Db(i.isVerticalMode?"t-vertical-dashboard":"t-dashboard"),r.Bb(1),r.sc("ngIf",!i.isVerticalMode)("ngIfElse",n)}}function Wse(e,t){1&e&&(r.Vb(0,"div",65),r.Qb(1,"t-spinner",66),r.Ub()),2&e&&(r.Bb(1),r.sc("scale",2))}var qse,Qse=((qse=function(){function e(t,n,i,o,c,a,l){_classCallCheck(this,e),this.workspace=t,this.translate=n,this.appRef=i,this.router=o,this.route=c,this.modalService=a,this.zone=l,this.rendered=!1,this.mode="screen",this.disableDrilldown=!1,this.isEdit=!1,this.addWidget=new r.n,this.editWidget=new r.n,this.deleteWidget=new r.n,this.moveWidget=new r.n,this.resizeWidget=new r.n,this._refreshSubjects=[],this._autoRefreshSubscriptions=[],this._offlineRetrySubscriptions=[],this._exportSubjects=[],this.showPlaceholder=!1,this.resizeHandleSize=16,this.widgetPadding=5}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.workspace;this._subscriptions=new O.a,this._subscriptions.add(this.route.paramMap.subscribe((function(n){if(e.isScreenMode){var i=+n.get("definitionId");i&&t.currentTenant.definitions.Dashboards[i]||e.router.navigate(["page-not-found"],{relativeTo:e.route.parent,replaceUrl:!0}),e.definitionId!==i&&(e.definitionId=i)}}))),this._subscriptions.add(t.visibilityChanged$.subscribe((function(n){"visible"===t.visibility?e.startTimers():e.stopTimers()}))),this.rendered=!1,this.definition.Widgets&&this.definition.Widgets.length<=4&&this.render()}},{key:"ngAfterViewInit",value:function(){var e=this;this.rendered||Object(bn.a)(1).subscribe((function(){return e.render()}))}},{key:"ngOnChanges",value:function(e){e.mode&&!e.mode.isFirstChange()&&this.resetTimers(),e.isEdit&&!e.isEdit.isFirstChange()&&this.resetTimers()}},{key:"render",value:function(){this.rendered=!0}},{key:"ngOnDestroy",value:function(){this.stopTimers(),this._subscriptions&&this._subscriptions.unsubscribe()}},{key:"onFullScreen",value:function(){this.dashboard.nativeElement.requestFullscreen&&this.dashboard.nativeElement.requestFullscreen()}},{key:"disableFullScreen",value:function(e){return e}},{key:"onRefresh",value:function(){this._refreshSubjects&&(this._refreshSubjects.forEach((function(e){return e.next()})),this.resetTimers())}},{key:"onEdit",value:function(){var e=this.workspace;e.isEdit=!0,this.router.navigate(["../../dashboard-definitions",this.definitionId],{relativeTo:this.route}).then((function(t){t||delete e.isEdit})).catch((function(t){return delete e.isEdit}))}},{key:"renderWidget",value:function(e){return!!e&&!!e.ReportDefinitionId&&e.OffsetX>=0&&e.OffsetY>=0&&e.Width>0&&e.Height>0}},{key:"horizontal",value:function(e){return 260*e.OffsetX}},{key:"left",value:function(e){return this.workspace.ws.isRtl?null:this.horizontal(e)}},{key:"right",value:function(e){return this.workspace.ws.isRtl?this.horizontal(e):null}},{key:"top",value:function(e){return 180*(e.OffsetY+(e.changeY||0))}},{key:"width",value:function(e){return 260*(e.Width+(e.changeW||0))}},{key:"height",value:function(e){return 180*(e.Height+(e.changeH||0))}},{key:"reportDefinition",value:function(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}},{key:"state",value:function(e){var t=e.ReportDefinitionId.toString(),n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new S.j),n[t]}},{key:"reportView",value:function(e){var t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ma.chart:ma.pivot}},{key:"refreshSubject",value:function(e){var t=this.definition;return this._defForRefreshes!==t&&(this._defForRefreshes=t,this._refreshSubjects=t.Widgets.map((function(e){return new U.a})),this.resetTimers()),this._refreshSubjects[e]}},{key:"stopTimers",value:function(){this._autoRefreshSubscriptions.forEach((function(e){return e.unsubscribe()})),this._autoRefreshSubscriptions=[],this._offlineRetrySubscriptions.forEach((function(e){e&&e.unsubscribe()})),this._offlineRetrySubscriptions=[]}},{key:"startTimers",value:function(e){var t=this;if("visible"===this.workspace.visibility&&!this.isEdit){e=e||this.definition;for(var n=function(n){var i=e.Widgets[n],r=t._refreshSubjects[n],o=60*(Object(W.n)(i.AutoRefreshPeriodInMinutes)?i.AutoRefreshPeriodInMinutes:e.AutoRefreshPeriodInMinutes||0)*1e3;if(o>0){var c,a=t.state(i).time;if(a){var l=new Date(a);c=Math.min(Math.max(o-((new Date).getTime()-l.getTime()),0),o)}else c=o;var s=Math.floor(5e3*Math.random()),u=Object(bn.a)(c,o+s);t._autoRefreshSubscriptions.push(u.subscribe((function(e){return r.next(!0)})))}},i=0;i<e.Widgets.length;i++)n(i)}}},{key:"resetTimers",value:function(){this.stopTimers(),this.startTimers()}},{key:"onSilentRefreshError",value:function(e,t,n){var i=this;if(0===e.status||504===e.status){var r=this._refreshSubjects[n];if(r){var o=this._offlineRetrySubscriptions[n];o&&o.unsubscribe(),this._offlineRetrySubscriptions[n]=Object(bn.a)(3e4).subscribe((function(){i.state(t).silentError&&r.next(!0)}))}}}},{key:"showErrorIcon",value:function(e){return this.state(e).silentError}},{key:"errorMessage",value:function(e){return this.state(e).errorMessage}},{key:"onRefreshWidget",value:function(e){this.refreshSubject(e),this._refreshSubjects[e].next()}},{key:"onExpandWidget",value:function(e){this.router.navigate(["../../report",e.ReportDefinitionId],{relativeTo:this.route})}},{key:"onExportWidget",value:function(e){this.exportSubject(e),this._exportSubjects[e].next()}},{key:"onEditReportDefinition",value:function(e){var t=this.workspace;t.isEdit=!0,this.router.navigate(["../../report-definitions",e.ReportDefinitionId],{relativeTo:this.route}).then((function(e){e||delete t.isEdit})).catch((function(){return delete t.isEdit}))}},{key:"exportSubject",value:function(e){var t=this.definition;return this._defForExports!==t&&(this._defForExports=t,this._exportSubjects=t.Widgets.map((function(e){return new U.a}))),this._exportSubjects[e]}},{key:"onDoubleClickSurface",value:function(e){if(this.isEdit&&!this.isVerticalMode){e.preventDefault(),e.stopPropagation();var t=this.dashboard.nativeElement,n=t.getBoundingClientRect(),i=Math.max(Math.floor((e.clientX+t.scrollLeft-n.left-5)/260),0),r=Math.max(Math.floor((e.clientY+t.scrollTop-n.top-5)/180),0);this.addWidget.emit({offsetX:i,offsetY:r})}}},{key:"onDoubleClickWidget",value:function(e,t){this.isEdit&&!this.isVerticalMode&&(e.preventDefault(),e.stopPropagation(),this.onEditWidget(t))}},{key:"onEditWidget",value:function(e){this.isEdit&&this.editWidget.emit({index:e})}},{key:"onDeleteWidget",value:function(e){this.isEdit&&this.deleteWidget.emit({index:e})}},{key:"onDragStarted",value:function(e,t){e.source.getRootElement().style.setProperty("z-index","10000"),this.showPlaceholder=!0,this._placeholderOffsetX=t.OffsetX,this._placeholderOffsetY=t.OffsetY,this._placeholderWidth=t.Width,this._placeholderHeight=t.Height}},{key:"onDragMoved",value:function(e,t){if(this._placeholderOffsetX=Math.min(Math.max(t.OffsetX+Math.round((this.workspace.ws.isRtl?-1:1)*e.distance.x/260),0),1e3),this._placeholderOffsetY=Math.min(Math.max(t.OffsetY+Math.round(e.distance.y/180),0),1e3),this._placeholderOffsetX===t.OffsetX&&this._placeholderOffsetY===t.OffsetY)pse(this.definition.Widgets);else{var n=Object.assign({},t);n.OffsetX=this._placeholderOffsetX,n.OffsetY=this._placeholderOffsetY,gse(n,this.definition.Widgets.filter((function(e){return e!==t})))}}},{key:"onDragEnded",value:function(e,t){e.source.reset(),e.source.getRootElement().style.removeProperty("z-index"),this.showPlaceholder=!1,this.moveWidget.emit({index:t,offsetX:this._placeholderOffsetX,offsetY:this._placeholderOffsetY})}},{key:"trackByReportId",value:function(e,t){return t.ReportDefinitionId||t}},{key:"topResizeHandle",value:function(e){return this.top(e)+180*e.Height-this.resizeHandleSize-this.widgetPadding}},{key:"horizontalResizeHandle",value:function(e){return this.horizontal(e)+260*e.Width-this.resizeHandleSize-this.widgetPadding}},{key:"leftResizeHandle",value:function(e){return this.workspace.ws.isRtl?0:this.horizontalResizeHandle(e)}},{key:"rightResizeHandle",value:function(e){return this.workspace.ws.isRtl?this.horizontalResizeHandle(e):0}},{key:"onResizeStarted",value:function(e,t){e.source.getRootElement().style.setProperty("z-index","10000"),this.showPlaceholder=!0,this._placeholderOffsetX=t.OffsetX,this._placeholderOffsetY=t.OffsetY,this._placeholderWidth=t.Width,this._placeholderHeight=t.Height}},{key:"onResizeMoved",value:function(e,t){if(t.changeW=Math.max((this.workspace.ws.isRtl?-1:1)*e.distance.x/260,1-t.Width-.25),t.changeH=Math.max(e.distance.y/180,1-t.Height-.25),this._placeholderWidth=Math.min(t.Width+Math.round(.5+t.changeW-10/260),16),this._placeholderHeight=Math.min(t.Height+Math.round(.5+t.changeH-10/180),16),this._placeholderWidth===t.Width&&this._placeholderHeight===t.Height)pse(this.definition.Widgets);else{var n=Object.assign({},t);n.Width=this._placeholderWidth,n.Height=this._placeholderHeight,gse(n,this.definition.Widgets.filter((function(e){return e!==t})))}}},{key:"onResizeEnded",value:function(e,t,n){e.source.reset(),e.source.getRootElement().style.removeProperty("z-index"),delete t.changeH,delete t.changeW,this.showPlaceholder=!1,this.resizeWidget.emit({index:n,width:this._placeholderWidth,height:this._placeholderHeight})}},{key:"isPivot",value:function(e){var t=this.ws.definitions.Reports[e.ReportDefinitionId];return!(!t||"Summary"!==t.Type||t.Chart&&t.DefaultsToChart)}},{key:"isScreenMode",get:function(){return"screen"===this.mode}},{key:"isPreviewMode",get:function(){return"preview"===this.mode}},{key:"definition",get:function(){return this.isScreenMode?this.workspace.currentTenant.definitions.Dashboards[this.definitionId]:this.previewDefinition}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"title",get:function(){return this.ws.getMultilingualValueImmediate(this.definition,"Title")}},{key:"disableRefresh",get:function(){return!1}},{key:"showEditDefinition",get:function(){return this.isScreenMode&&this.ws.canDo("dashboard-definitions","Update",null)}},{key:"showActionsDropdown",get:function(){return this.showEditDefinition}},{key:"actionsDropdownPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}},{key:"popoverPlacement",get:function(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}},{key:"showEditReportDefinition",get:function(){return this.workspace.currentTenant.canUpdate("report-definitions",void 0)}},{key:"placeholderLeft",get:function(){return this.workspace.ws.isRtl?null:260*this._placeholderOffsetX}},{key:"placeholderRight",get:function(){return this.workspace.ws.isRtl?260*this._placeholderOffsetX:null}},{key:"placeholderTop",get:function(){return 180*this._placeholderOffsetY}},{key:"placeholderWidth",get:function(){return 260*this._placeholderWidth}},{key:"placeholderHeight",get:function(){return 180*this._placeholderHeight}},{key:"isMdScreen",get:function(){return this.workspace.mediumDevice}},{key:"isVerticalMode",get:function(){return!this.workspace.mediumDevice}}]),e}()).\u0275fac=function(e){return new(e||qse)(r.Pb(S.m),r.Pb(G.e),r.Pb(r.g),r.Pb(i.e),r.Pb(i.a),r.Pb(X.t),r.Pb(r.z))},qse.\u0275cmp=r.Jb({type:qse,selectors:[["t-dashboard"]],viewQuery:function(e,t){var n;1&e&&r.Yc(hse,!0),2&e&&r.Ec(n=r.ic())&&(t.dashboard=n.first)},inputs:{mode:"mode",disableDrilldown:"disableDrilldown",isEdit:"isEdit",previewDefinition:"previewDefinition"},outputs:{addWidget:"addWidget",editWidget:"editWidget",deleteWidget:"deleteWidget",moveWidget:"moveWidget",resizeWidget:"resizeWidget"},features:[r.zb],decls:20,vars:12,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","expand"],[1,"d-none","d-md-inline"],["class","btn-group t-toolbar-button","ngbDropdown","",3,"placement",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"row","t-rest-of-screen","bg-light",2,"overflow","auto",3,"dblclick"],["dashboard",""],[4,"ngIf","ngIfElse"],["spinner",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],["id","dashboard",2,"position","relative","max-height","0"],["phoneView",""],["widgetHeader",""],["widgetBody",""],["class","t-dashboard-widget","style","position: absolute; z-index: 0",3,"left","right","top","width","height",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"t-dashboard-widget",2,"position","absolute","z-index","0"],[1,"w-100","h-100",2,"background-color","lightgrey"],["class","t-dashboard-widget","style","position: absolute","cdkDrag","",3,"left","right","top","width","height","cdkDragDisabled","dblclick","cdkDragStarted","cdkDragMoved","cdkDragEnded",4,"ngIf"],["class","t-drag-knob","style","position: absolute;","cdkDrag","",3,"width","height","left","right","top","cdkDragStarted","cdkDragMoved","cdkDragEnded",4,"ngIf"],["cdkDrag","",1,"t-dashboard-widget",2,"position","absolute",3,"cdkDragDisabled","dblclick","cdkDragStarted","cdkDragMoved","cdkDragEnded"],[1,"w-100","h-100","border","bg-white","shadow-sm","d-flex","flex-column","p-2"],["cdkDragHandle","",1,"t-widget-header","d-flex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkDrag","",1,"t-drag-knob",2,"position","absolute",3,"cdkDragStarted","cdkDragMoved","cdkDragEnded"],[1,"t-drag-knob-inner"],["class","t-dashboard-widget w-100",3,"height",4,"ngIf"],[1,"t-dashboard-widget","w-100"],[1,"t-widget-header","d-flex","w-100"],[1,"flex-grow-1","text-truncate"],[1,"small","text-muted",3,"title"],[1,"flex-grow-0","text-danger"],["popoverClass","t-error-popover","triggers","mouseenter:mouseleave",3,"ngbPopover","container","placement",4,"ngIf"],["ngbDropdown","",1,"flex-grow-0",3,"placement","container"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],[1,"small","text-muted"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"px-0",3,"click"],[1,"t-menu-icon"],[1,"t-menu-text"],["icon","download"],["ngbDropdownItem","","class","px-0",3,"click",4,"ngIf"],[4,"ngIf"],["errorPopover",""],["popoverClass","t-error-popover","triggers","mouseenter:mouseleave",3,"ngbPopover","container","placement"],["icon","exclamation-triangle"],["icon","edit"],["icon","pen"],["icon","trash"],[2,"width","200px"],[1,"m-0","p-0"],["mode","widget",1,"w-100","flex-grow-1","bg-light2","border-top2",2,"overflow","hidden",3,"definition","view","state","refresh","export","disableDrilldown","silentRefreshError"],[1,"text-center","pt-4","w-100"],[3,"scale"]],template:function(e,t){if(1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Rc(2,vse,4,1,"div",2),r.Vb(3,"div",3),r.Vb(4,"div"),r.Vb(5,"button",4),r.hc("click",(function(){return t.onFullScreen()})),r.Qb(6,"fa-icon",5),r.Vb(7,"span",6),r.Tc(8),r.mc(9,"translate"),r.Ub(),r.Ub(),r.Rc(10,Ise,6,5,"div",7),r.Ub(),r.Vb(11,"div"),r.Vb(12,"button",8),r.hc("click",(function(){return t.onRefresh()})),r.mc(13,"translate"),r.Qb(14,"fa-icon",9),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(15,"div",10,11),r.hc("dblclick",(function(e){return t.onDoubleClickSurface(e)})),r.Rc(17,jse,9,5,"ng-container",12),r.Rc(18,Wse,2,1,"ng-template",null,13,r.Sc),r.Ub(),r.Ub()),2&e){var n=r.Fc(19);r.Bb(2),r.sc("ngIf",!!t.title),r.Bb(3),r.sc("disabled",t.disableFullScreen(t.isEdit)),r.Bb(3),r.Vc("\xa0\xa0",r.nc(9,8,"FullScreen"),""),r.Bb(2),r.sc("ngIf",t.showActionsDropdown),r.Bb(2),r.tc("title",r.nc(13,10,"Refresh")),r.sc("disabled",t.disableRefresh),r.Bb(5),r.sc("ngIf",t.rendered)("ngIfElse",n)}},directives:[x.u,ne.b,X.l,X.r,X.p,X.o,x.t,Q.b,Q.c,x.B,X.C,pa,ye.a],pipes:[G.d,Te],encapsulation:2}),qse),Hse=["widgetConfigModal"];function $se(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.mc(2,"translate"),r.Ub()),2&e){var n=t.model,i=r.lc();r.Bb(1),r.Uc(i.getMultilingualValue(n,"Title",i.ws)||r.nc(2,1,"Untitled"))}}function Gse(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",44),r.hc("click",(function(){return r.Ic(n),r.lc(3).onToggleDefinition()})),r.Vb(1,"div",45),r.Qb(2,"fa-icon",46),r.Ub(),r.Vb(3,"span"),r.Tc(4),r.mc(5,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(3);r.Bb(2),r.sc("flip",i.flipIcon(!1)),r.Bb(2),r.Uc(r.nc(5,2,"Definition"))}}function zse(e,t){1&e&&r.Qb(0,"fa-icon",47)}function Jse(e,t){1&e&&r.Rb(0)}function Kse(e,t){1&e&&r.Rb(0)}function Yse(e,t){1&e&&r.Rb(0)}var Xse=function(){return{updateOn:"blur"}},Zse=function(e,t){return{control:e,serverErrors:t}};function eue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",48),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",49,50),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Title2=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Title2")})),r.Ub(),r.Rc(6,Yse,1,0,"ng-container",21),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Title2)),r.Bb(2),r.Uc(r.nc(3,7,"Title")+c.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.Title2)("ngModelOptions",r.vc(9,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,Zse,i,null==o.serverErrors?null:o.serverErrors.Title2))}}function tue(e,t){1&e&&r.Rb(0)}function nue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",17),r.Vb(1,"label",51),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",52,53),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.Title3=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"Title3")})),r.Ub(),r.Rc(6,tue,1,0,"ng-container",21),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2).model,c=r.lc(),a=r.Fc(7);r.Gb("is-invalid",c.invalid(i,null==o.serverErrors?null:o.serverErrors.Title3)),r.Bb(2),r.Uc(r.nc(3,7,"Title")+c.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.Title3)("ngModelOptions",r.vc(9,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",a)("ngTemplateOutletContext",r.xc(10,Zse,i,null==o.serverErrors?null:o.serverErrors.Title3))}}function iue(e,t){1&e&&r.Qb(0,"fa-icon",47)}function rue(e,t){1&e&&r.Qb(0,"fa-icon",47)}function oue(e,t){1&e&&(r.Vb(0,"div",60),r.Tc(1," \u200c "),r.Ub())}function cue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",54),r.Vb(1,"div",55),r.Rc(2,rue,1,0,"fa-icon",15),r.Vb(3,"span",56),r.Vb(4,"span"),r.Tc(5),r.Ub(),r.Ub(),r.Vb(6,"button",27),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onConfigureWidget(e,i)})),r.mc(7,"translate"),r.Qb(8,"fa-icon",57),r.Ub(),r.Tc(9," \xa0 "),r.Vb(10,"button",27),r.hc("click",(function(){r.Ic(n);var e=t.index,i=r.lc(2).model;return r.lc().onDeleteWidget(e,i)})),r.mc(11,"translate"),r.Qb(12,"fa-icon",58),r.Ub(),r.Ub(),r.Rc(13,oue,2,0,"div",59),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3);r.Bb(2),r.sc("ngIf",o.weakEntityErrors(i)),r.Bb(3),r.Vc(" ",o.ws.getMultilingualValueImmediate(i,"Title")||o.ws.getMultilingualValue("ReportDefinition",i.ReportDefinitionId,"Title")," "),r.Bb(1),r.sc("title",r.nc(7,4,"Configure")),r.Bb(4),r.sc("title",r.nc(11,6,"Delete"))}}function aue(e,t){1&e&&r.Rb(0)}function lue(e,t){1&e&&r.Qb(0,"fa-icon",47)}function sue(e,t){1&e&&r.Rb(0)}function uue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td",65),r.Vb(2,"t-roles-picker",66,67),r.hc("ngModelChange",(function(e){return r.Ic(n),t.$implicit.RoleId=e})),r.Ub(),r.Rc(4,sue,1,0,"ng-container",21),r.Ub(),r.Vb(5,"td"),r.Vb(6,"button",68),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(3).model;return r.lc().onDeleteRow(e,i.Roles)})),r.Qb(7,"fa-icon",69),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=t.$implicit,o=r.Fc(3);r.lc(4);var c=r.Fc(7);r.Bb(2),r.sc("ngModel",i.RoleId)("showCreate",!1),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(4,Zse,o,null==i||null==i.serverErrors?null:i.serverErrors.Key))}}function due(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",61),r.Vb(1,"label",26),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"table",62),r.Vb(5,"tbody"),r.Rc(6,uue,8,7,"tr",63),r.Ub(),r.Ub(),r.Vb(7,"button",64),r.hc("click",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onInsertRow(e.Roles)})),r.Qb(8,"fa-icon",28),r.Tc(9),r.mc(10,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.lc(2).model;r.Bb(2),r.Uc(r.nc(3,3,"ForMembersOfRoles")),r.Bb(4),r.sc("ngForOf",i.Roles),r.Bb(3),r.Vc("\xa0\xa0",r.nc(10,5,"Add")," ")}}function bue(e,t){if(1&e&&(r.Vb(0,"option",81),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.tc("value",n.value),r.Bb(1),r.Vc(" ",n.name(),"")}}function fue(e,t){1&e&&r.Rb(0)}function mue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",82),r.hc("click",(function(){r.Ic(n);var e=t.$implicit,i=r.lc(3).model;return r.lc().onIconClick(i,e)})),r.Qb(1,"fa-icon",83),r.Ub()}if(2&e){var i=t.$implicit,o=r.lc(3).model;r.Gb("t-highlighted",i.value===o.MainMenuIcon),r.sc("title",i.value),r.Bb(1),r.sc("icon",i.value)}}function gue(e,t){1&e&&r.Rb(0)}function pue(e,t){1&e&&r.Rb(0)}var hue=function(e){return{control:null,serverErrors:e}};function vue(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"div",17),r.Vb(2,"label",70),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Vb(5,"select",71,72),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.MainMenuSection=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"MainMenuSection")})),r.Qb(7,"option",73),r.Rc(8,bue,2,2,"option",74),r.Ub(),r.Rc(9,fue,1,0,"ng-container",21),r.Ub(),r.Vb(10,"div",17),r.Vb(11,"label",75),r.Tc(12),r.mc(13,"translate"),r.Ub(),r.Vb(14,"div",76),r.Rc(15,mue,2,4,"div",77),r.Ub(),r.Rc(16,gue,1,0,"ng-container",21),r.Ub(),r.Vb(17,"div",17),r.Vb(18,"label",78),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"input",79,80),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).model.MainMenuSortKey=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc(2).model;return r.lc().onDefinitionChange(e,"MainMenuSortKey")})),r.Ub(),r.Rc(23,pue,1,0,"ng-container",21),r.Ub(),r.Sb()}if(2&e){var i=r.Fc(6),o=r.Fc(22),c=r.lc(2).model,a=r.lc(),l=r.Fc(7);r.Bb(3),r.Uc(r.nc(4,14,"MainMenuSection")),r.Bb(2),r.sc("ngModel",c.MainMenuSection),r.Bb(3),r.sc("ngForOf",a.allMainMenuSections),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.xc(20,Zse,i,null==c.serverErrors?null:c.serverErrors.MainMenuSection)),r.Bb(3),r.Uc(r.nc(13,16,"MainMenuIcon")),r.Bb(3),r.sc("ngForOf",a.allMainMenuIcons),r.Bb(1),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.wc(23,hue,null==c.serverErrors?null:c.serverErrors.MainMenuIcon)),r.Bb(3),r.Uc(r.nc(20,18,"MainMenuSortKey")),r.Bb(2),r.sc("ngModel",c.MainMenuSortKey)("ngModelOptions",r.vc(25,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",r.xc(26,Zse,o,null==c.serverErrors?null:c.serverErrors.MainMenuSortKey))}}function yue(e,t){1&e&&(r.Vb(0,"div",84),r.Vb(1,"div",85),r.Vb(2,"span"),r.Tc(3),r.mc(4,"translate"),r.Ub(),r.Ub(),r.Ub()),2&e&&(r.Bb(3),r.Uc(r.nc(4,1,"Preview")))}function Iue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",6),r.Rc(1,Gse,6,4,"div",7),r.Vb(2,"div",8),r.Vb(3,"div",9),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleDefinition()})),r.Vb(4,"span"),r.Tc(5),r.mc(6,"translate"),r.Ub(),r.Vb(7,"div",10),r.Qb(8,"fa-icon",11),r.Ub(),r.Ub(),r.Vb(9,"div",12),r.Vb(10,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Title")})),r.Tc(11," \xa0 "),r.Qb(12,"fa-icon",14),r.Tc(13),r.mc(14,"translate"),r.Rc(15,zse,1,0,"fa-icon",15),r.Ub(),r.Vb(16,"div",16),r.Vb(17,"div",17),r.Vb(18,"label",18),r.Tc(19),r.mc(20,"translate"),r.Ub(),r.Vb(21,"input",19,20),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Code=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Code")})),r.Ub(),r.Rc(23,Jse,1,0,"ng-container",21),r.Ub(),r.Vb(24,"div",17),r.Vb(25,"label",22),r.Tc(26),r.mc(27,"translate"),r.Ub(),r.Vb(28,"input",23,24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.Title=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"Title")})),r.Ub(),r.Rc(30,Kse,1,0,"ng-container",21),r.Ub(),r.Rc(31,eue,7,13,"div",25),r.Rc(32,nue,7,13,"div",25),r.Ub(),r.Vb(33,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("Widgets")})),r.Tc(34," \xa0 "),r.Qb(35,"fa-icon",14),r.Tc(36),r.mc(37,"translate"),r.Rc(38,iue,1,0,"fa-icon",15),r.Ub(),r.Vb(39,"div",16),r.Vb(40,"div",17),r.Vb(41,"label",26),r.Tc(42),r.mc(43,"translate"),r.Ub(),r.Tc(44,"\xa0 "),r.Vb(45,"button",27),r.hc("click",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onCreateWidget(e)})),r.mc(46,"translate"),r.Qb(47,"fa-icon",28),r.Ub(),r.Vb(48,"div",29),r.hc("cdkDropListDropped",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().rowDrop(e,t)})),r.Rc(49,cue,14,8,"div",30),r.Ub(),r.Ub(),r.Vb(50,"div",17),r.Vb(51,"label",31),r.Tc(52),r.mc(53,"translate"),r.Ub(),r.Vb(54,"input",32,33),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.AutoRefreshPeriodInMinutes=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e)})),r.Ub(),r.Rc(56,aue,1,0,"ng-container",21),r.Ub(),r.Ub(),r.Vb(57,"div",13),r.hc("click",(function(){return r.Ic(n),r.lc(2).onToggleSection("MainMenu")})),r.Tc(58," \xa0 "),r.Qb(59,"fa-icon",14),r.Tc(60),r.mc(61,"translate"),r.Rc(62,lue,1,0,"fa-icon",15),r.Ub(),r.Vb(63,"div",16),r.Vb(64,"div",34),r.Vb(65,"input",35),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().model.ShowInMainMenu=e}))("ngModelChange",(function(){r.Ic(n);var e=r.lc().model;return r.lc().onDefinitionChange(e,"ShowInMainMenu")})),r.Ub(),r.Vb(66,"label",36),r.Tc(67),r.mc(68,"translate"),r.Ub(),r.Ub(),r.Rc(69,due,11,7,"div",37),r.Rc(70,vue,24,29,"ng-container",38),r.Ub(),r.Ub(),r.Ub(),r.Vb(71,"div",39),r.Rc(72,yue,5,3,"div",40),r.Vb(73,"div",41),r.Vb(74,"div",42),r.Vb(75,"t-dashboard",43),r.hc("addWidget",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().onCreateWidget(t,e.offsetX,e.offsetY)}))("editWidget",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().onConfigureWidget(e.index,t)}))("deleteWidget",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().onDeleteWidget(e.index,t)}))("moveWidget",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().onMoveWidget(e.index,t,e.offsetX,e.offsetY)}))("resizeWidget",(function(e){r.Ic(n);var t=r.lc().model;return r.lc().onResizeWidget(e.index,t,e.width,e.height)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(22),o=r.Fc(29),c=r.Fc(55),a=r.lc(),l=a.isEdit,s=a.model,u=r.lc(),d=r.Fc(7);r.Bb(1),r.sc("ngIf",l&&u.collapseDefinition),r.Bb(1),r.Gb("d-flex",l&&!u.collapseDefinition)("d-none",!l||u.collapseDefinition),r.Bb(3),r.Uc(r.nc(6,59,"Definition")),r.Bb(3),r.sc("flip",u.flipIcon(!1)),r.Bb(4),r.sc("flip",u.flipIcon(u.showSection("Title")))("rotate",u.rotateIcon(u.showSection("Title"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(14,61,"Title")," "),r.Bb(2),r.sc("ngIf",u.titleSectionErrors(s)),r.Bb(1),r.Gb("d-none",!u.showSection("Title")),r.Bb(1),r.Gb("is-invalid",u.invalid(i,null==s.serverErrors?null:s.serverErrors.Code)),r.Bb(2),r.Uc(r.nc(20,63,"Code")),r.Bb(2),r.sc("ngModel",s.Code)("ngModelOptions",r.vc(79,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(80,Zse,i,null==s.serverErrors?null:s.serverErrors.Code)),r.Bb(1),r.Gb("is-invalid",u.invalid(o,null==s.serverErrors?null:s.serverErrors.Title)),r.Bb(2),r.Uc(r.nc(27,65,"Title")+u.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",s.Title)("ngModelOptions",r.vc(83,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(84,Zse,o,null==s.serverErrors?null:s.serverErrors.Title)),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.TernaryLanguageId),r.Bb(3),r.sc("flip",u.flipIcon(u.showSection("Widgets")))("rotate",u.rotateIcon(u.showSection("Widgets"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(37,67,"DashboardDefinition_Widgets")," "),r.Bb(2),r.sc("ngIf",u.widgetsSectionErrors(s)),r.Bb(1),r.Gb("d-none",!u.showSection("Widgets")),r.Bb(3),r.Uc(r.nc(43,69,"DashboardDefinition_Widgets")),r.Bb(3),r.sc("title",r.nc(46,71,"Create")),r.Bb(4),r.sc("ngForOf",u.getWidgets(s)),r.Bb(1),r.Gb("is-invalid",u.invalid(c,null==s.serverErrors?null:s.serverErrors.AutoRefreshPeriodInMinutes)),r.Bb(2),r.Uc(r.nc(53,73,"DashboardDefinition_AutoRefreshPeriodInMinutes")),r.Bb(2),r.sc("ngModel",s.AutoRefreshPeriodInMinutes)("ngModelOptions",r.vc(87,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(88,Zse,c,null==s.serverErrors?null:s.serverErrors.AutoRefreshPeriodInMinutes)),r.Bb(3),r.sc("flip",u.flipIcon(u.showSection("MainMenu")))("rotate",u.rotateIcon(u.showSection("MainMenu"))),r.Bb(1),r.Vc(" \xa0 ",r.nc(61,75,"MainMenu")," "),r.Bb(2),r.sc("ngIf",u.mainMenuSectionErrors(s)),r.Bb(1),r.Gb("d-none",!u.showSection("MainMenu")),r.Bb(2),r.sc("ngModel",s.ShowInMainMenu),r.Bb(2),r.Uc(r.nc(68,77,"Definition_ShowInMainMenu")),r.Bb(2),r.sc("ngIf",s.ShowInMainMenu),r.Bb(1),r.sc("ngIf",s.ShowInMainMenu),r.Bb(2),r.sc("ngIf",l),r.Bb(3),r.sc("previewDefinition",u.getForClient(s))("disableDrilldown",u.isPopupMode)("isEdit",l)}}function Cue(e,t){if(1&e&&r.Rc(0,Iue,76,91,"div",5),2&e){var n=t.isEdit,i=r.lc();r.sc("ngIf",i.watchIsEdit(n))}}function wue(e,t){if(1&e&&(r.Vb(0,"span"),r.Tc(1),r.Ub()),2&e){var n=t.$implicit;r.Bb(1),r.Vc(" ",n()," ")}}function kue(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",86),r.Rc(2,wue,2,1,"span",63),r.Ub(),r.Sb()),2&e){var n=r.lc(),i=n.control,o=n.serverErrors,c=r.lc();r.Bb(2),r.sc("ngForOf",c.errors(i,o))}}function Mue(e,t){if(1&e&&r.Rc(0,kue,3,1,"ng-container",38),2&e){var n=t.control,i=t.serverErrors,o=r.lc();r.sc("ngIf",o.invalid(n,i))}}function Vue(e,t){1&e&&r.Rb(0)}function Tue(e,t){1&e&&r.Rb(0)}function Eue(e,t){1&e&&r.Rb(0)}function Uue(e,t){1&e&&r.Rb(0)}function xue(e,t){1&e&&r.Rb(0)}function Rue(e,t){1&e&&r.Rb(0)}function Due(e,t){1&e&&r.Rb(0)}function Bue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",97),r.Vb(1,"label",48),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",49,50),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).widgetToEdit.Title2=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).widgetToEditHasChanged=!0})),r.Ub(),r.Rc(6,Due,1,0,"ng-container",21),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(7);r.Bb(2),r.Uc(r.nc(3,5,"Title")+o.ws.secondaryPostfix),r.Bb(2),r.sc("ngModel",o.widgetToEdit.Title2)("ngModelOptions",r.vc(7,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(8,Zse,i,null==o.widgetToEdit.serverErrors?null:o.widgetToEdit.serverErrors.Title2))}}function Sue(e,t){1&e&&r.Rb(0)}function _ue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",97),r.Vb(1,"label",51),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"input",52,53),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc(2).widgetToEdit.Title3=e}))("ngModelChange",(function(){return r.Ic(n),r.lc(2).widgetToEditHasChanged=!0})),r.Ub(),r.Rc(6,Sue,1,0,"ng-container",21),r.Ub()}if(2&e){var i=r.Fc(5),o=r.lc(2),c=r.Fc(7);r.Bb(2),r.Uc(r.nc(3,5,"Title")+o.ws.ternaryPostfix),r.Bb(2),r.sc("ngModel",o.widgetToEdit.Title3)("ngModelOptions",r.vc(7,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",r.xc(8,Zse,i,null==o.widgetToEdit.serverErrors?null:o.widgetToEdit.serverErrors.Title3))}}function Oue(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",87),r.Vb(1,"h5",88),r.Tc(2),r.mc(3,"translate"),r.Ub(),r.Vb(4,"button",89),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Vb(5,"span",90),r.Tc(6,"\xd7"),r.Ub(),r.Ub(),r.Ub(),r.Vb(7,"div",91),r.Vb(8,"div",92),r.Vb(9,"div",93),r.Vb(10,"label",94),r.Tc(11),r.mc(12,"translate"),r.Ub(),r.Vb(13,"t-report-definitions-picker",95,96),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().widgetToEdit.ReportDefinitionId=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().widgetToEditHasChanged=!0})),r.Ub(),r.Rc(15,Vue,1,0,"ng-container",21),r.Ub(),r.Vb(16,"div",97),r.Vb(17,"label",98),r.Tc(18),r.mc(19,"translate"),r.Ub(),r.Vb(20,"input",99,100),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().widgetToEdit.Width=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().widgetToEditHasChanged=!0})),r.Ub(),r.Rc(22,Tue,1,0,"ng-container",21),r.Ub(),r.Vb(23,"div",97),r.Vb(24,"label",101),r.Tc(25),r.mc(26,"translate"),r.Ub(),r.Vb(27,"input",102,103),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().widgetToEdit.Height=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().widgetToEditHasChanged=!0})),r.Ub(),r.Rc(29,Eue,1,0,"ng-container",21),r.Ub(),r.Vb(30,"div",97),r.Vb(31,"label",104),r.Tc(32),r.mc(33,"translate"),r.Ub(),r.Vb(34,"input",105,106),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().widgetToEdit.OffsetX=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().widgetToEditHasChanged=!0})),r.Ub(),r.Rc(36,Uue,1,0,"ng-container",21),r.Ub(),r.Vb(37,"div",97),r.Vb(38,"label",107),r.Tc(39),r.mc(40,"translate"),r.Ub(),r.Vb(41,"input",108,109),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().widgetToEdit.OffsetY=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().widgetToEditHasChanged=!0})),r.Ub(),r.Rc(43,xue,1,0,"ng-container",21),r.Ub(),r.Vb(44,"div",97),r.Vb(45,"label",22),r.Tc(46),r.mc(47,"translate"),r.Ub(),r.Vb(48,"input",23,24),r.hc("ngModelChange",(function(e){return r.Ic(n),r.lc().widgetToEdit.Title=e}))("ngModelChange",(function(){return r.Ic(n),r.lc().widgetToEditHasChanged=!0})),r.Ub(),r.Rc(50,Rue,1,0,"ng-container",21),r.Ub(),r.Rc(51,Bue,7,11,"div",110),r.Rc(52,_ue,7,11,"div",110),r.Ub(),r.Ub(),r.Vb(53,"div",111),r.Vb(54,"button",112),r.hc("click",(function(){return t.$implicit.close()})),r.Qb(55,"fa-icon",113),r.Tc(56),r.mc(57,"translate"),r.Ub(),r.Vb(58,"button",114),r.hc("click",(function(){return t.$implicit.dismiss()})),r.Qb(59,"fa-icon",58),r.Tc(60),r.mc(61,"translate"),r.Ub(),r.Ub()}if(2&e){var i=r.Fc(14),o=r.Fc(21),c=r.Fc(28),a=r.Fc(35),l=r.Fc(42),s=r.Fc(49),u=r.lc(),d=r.Fc(7);r.Bb(2),r.Vc(" ",r.nc(3,37,"Configure")," "),r.Bb(7),r.Gb("is-invalid",u.invalid(i,null==u.widgetToEdit.serverErrors?null:u.widgetToEdit.serverErrors.ReportDefinitionId)),r.Bb(2),r.Uc(r.nc(12,39,"DashboardDefinition_ReportDefinition")),r.Bb(2),r.sc("ngModel",u.widgetToEdit.ReportDefinitionId),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(55,Zse,i,null==u.widgetToEdit.serverErrors?null:u.widgetToEdit.serverErrors.ReportDefinitionId)),r.Bb(3),r.Uc(r.nc(19,41,"DashboardDefinition_Width")),r.Bb(2),r.sc("ngModel",u.widgetToEdit.Width)("ngModelOptions",r.vc(58,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(59,Zse,o,null==u.widgetToEdit.serverErrors?null:u.widgetToEdit.serverErrors.Width)),r.Bb(3),r.Uc(r.nc(26,43,"DashboardDefinition_Height")),r.Bb(2),r.sc("ngModel",u.widgetToEdit.Height)("ngModelOptions",r.vc(62,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(63,Zse,c,null==u.widgetToEdit.serverErrors?null:u.widgetToEdit.serverErrors.Height)),r.Bb(3),r.Uc(r.nc(33,45,"DashboardDefinition_OffsetX")),r.Bb(2),r.sc("ngModel",u.widgetToEdit.OffsetX)("ngModelOptions",r.vc(66,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(67,Zse,a,null==u.widgetToEdit.serverErrors?null:u.widgetToEdit.serverErrors.OffsetX)),r.Bb(3),r.Uc(r.nc(40,47,"DashboardDefinition_OffsetY")),r.Bb(2),r.sc("ngModel",u.widgetToEdit.OffsetY)("ngModelOptions",r.vc(70,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(71,Zse,l,null==u.widgetToEdit.serverErrors?null:u.widgetToEdit.serverErrors.OffsetY)),r.Bb(3),r.Uc(r.nc(47,49,"Title")+u.ws.primaryPostfix),r.Bb(2),r.sc("ngModel",u.widgetToEdit.Title)("ngModelOptions",r.vc(74,Xse)),r.Bb(2),r.sc("ngTemplateOutlet",d)("ngTemplateOutletContext",r.xc(75,Zse,s,null==u.widgetToEdit.serverErrors?null:u.widgetToEdit.serverErrors.Title)),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.SecondaryLanguageId),r.Bb(1),r.sc("ngIf",null==u.ws.settings?null:u.ws.settings.TernaryLanguageId),r.Bb(2),r.sc("disabled",!u.canApplyWidget(u.widgetToEdit)),r.Bb(2),r.Vc(" \xa0",r.nc(57,51,"Apply")," "),r.Bb(4),r.Vc(" \xa0",r.nc(61,53,"Cancel")," ")}}var Lue,Fue,Aue,Pue,Nue,jue=function(){return[]},Wue=((Fue=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this)).workspace=e,o.translate=i,o.modalService=r,o.expand="Widgets.ReportDefinition,Roles.Role",o.create=function(){var e={};return o.ws.isPrimaryLanguage?e.Title=o.initialText:o.ws.isSecondaryLanguage?e.Title2=o.initialText:o.ws.isTernaryLanguage&&(e.Title3=o.initialText),e.ShowInMainMenu=!1,e.AutoRefreshPeriodInMinutes=5,e.Widgets=[],e.Roles=[],e},o.clone=function(e){if(e){var t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Widgets&&t.Widgets.forEach((function(e){return e.Id=null})),t.Roles&&t.Roles.forEach((function(e){return e.Id=null})),t}return console.error("Cloning a non existing item"),null},o.isInactive=function(e){return null},o._currentModelModified=!1,o._isEdit=!1,o.collapseDefinition=!1,o._sections={Title:!0,Widgets:!0,MainMenu:!1},o.widgetToEditHasChanged=!1,o.widgetShowAdvancedOptions=!1,o.map=function(e){return Object.assign({},e)},o.overlap=function(e,t,n,i,r){return mse(e,t,n,i,r.OffsetX,r.OffsetY,r.Width,r.Height)>0},o}return _createClass(n,[{key:"onDefinitionChange",value:function(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}},{key:"getForClient",value:function(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this.modelForClient=Object.assign({},e),e.Widgets&&(this.modelForClient.Widgets=e.Widgets.map(this.map),this.modelForClient.Widgets.forEach((function(e){e.OffsetX=Math.min(e.OffsetX,1e3),e.OffsetY=Math.min(e.OffsetY,1e3),e.Width=Math.min(e.Width,16),e.Height=Math.min(e.Height,16)})))),this.modelForClient):null}},{key:"watchIsEdit",value:function(e){return this._isEdit!==e&&(this._isEdit=e,window.dispatchEvent(new Event("resize"))),!0}},{key:"onToggleSection",value:function(e){this._sections[e]=!this._sections[e]}},{key:"showSection",value:function(e){return this._sections[e]}},{key:"onToggleDefinition",value:function(){this.collapseDefinition=!this.collapseDefinition,window.dispatchEvent(new Event("resize"))}},{key:"flipIcon",value:function(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}},{key:"rotateIcon",value:function(e){return e?90:0}},{key:"invalid",value:function(e,t){return Object(UI.c)(e,t)}},{key:"errors",value:function(e,t){return Object(UI.d)(e,t,this.translate)}},{key:"weakEntityErrors",value:function(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some((function(t){return Object(UI.b)(e.serverErrors[t])}))}},{key:"titleSectionErrors",value:function(e){return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.Id)||Object(UI.b)(e.serverErrors.Code)||Object(UI.b)(e.serverErrors.Title)||Object(UI.b)(e.serverErrors.Title2)||Object(UI.b)(e.serverErrors.Title3))}},{key:"widgetsSectionErrors",value:function(e){var t=this;return!!e.serverErrors&&Object(UI.b)(e.serverErrors.AutoRefreshPeriodInMinutes)||!!e.Widgets&&e.Widgets.some((function(e){return t.weakEntityErrors(e)}))}},{key:"mainMenuSectionErrors",value:function(e){var t=this;return!!e.serverErrors&&(Object(UI.b)(e.serverErrors.ShowInMainMenu)||Object(UI.b)(e.serverErrors.MainMenuSection)||Object(UI.b)(e.serverErrors.MainMenuIcon)||Object(UI.b)(e.serverErrors.MainMenuSortKey))||!!e.Roles&&e.Roles.some((function(e){return t.weakEntityErrors(e)}))}},{key:"savePreprocessing",value:function(e){e.ShowInMainMenu||(e.Roles=[])}},{key:"onIconClick",value:function(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}},{key:"getWidgets",value:function(e){return e.Widgets=e.Widgets||[],e.Widgets}},{key:"onCreateWidget",value:function(e,t,n){this.onConfigureWidget(e.Widgets.length,e,t,n)}},{key:"chartReportDef",value:function(e){return!!e&&"Summary"===e.Type&&e.Chart&&e.DefaultsToChart}},{key:"onConfigureWidget",value:function(e,t,n,i){var r=this;this.widgetToEditHasChanged=!1;var o=t.Widgets[e],c=Object.assign({},o||this.createWidget(t,n,i));this.widgetToEdit=c,this.modelRef=t,this.modalService.open(this.widgetConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then((function(){if(r.widgetToEditHasChanged){var n=!!o&&(o.Width!==c.Width||o.Height!==c.Height)&&!!o.ReportDefinitionId&&o.ReportDefinitionId===c.ReportDefinitionId&&r.chartReportDef(r.ws.definitions.Reports[c.ReportDefinitionId]),i=!o||o.OffsetX!==c.OffsetX||o.OffsetY!==c.OffsetY||o.Width!==c.Width||o.Height!==c.Height;t.Widgets[e]=c,i&&r.rearrange(c,t),n&&window.dispatchEvent(new Event("resize")),r.onDefinitionChange(t)}}),(function(e){}))}},{key:"onDeleteWidget",value:function(e,t){t.Widgets.splice(e,1),this.onDefinitionChange(t)}},{key:"onMoveWidget",value:function(e,t,n,i){var r=t.Widgets[e];r.OffsetX=n,r.OffsetY=i,this.rearrange(r,t),this.onDefinitionChange(t)}},{key:"onResizeWidget",value:function(e,t,n,i){var r=t.Widgets[e];r.Width=n,r.Height=i,this.chartReportDef(this.ws.definitions.Reports[r.ReportDefinitionId])&&window.dispatchEvent(new Event("resize")),this.rearrange(r,t),this.onDefinitionChange(t)}},{key:"rearrange",value:function(e,t){var n=t.Widgets.filter((function(t){return t!==e})),i=n.map(this.map);gse(this.map(e),i);for(var r=0;r<i.length;r++)n[r].OffsetY+=i[r].changeY||0}},{key:"createWidget",value:function(e,t,n){var i=this;if(void 0===t||void 0===n){t=0,n=0;for(var r=0,o=!1;;){for(t=r,n=0;n<=r-1;){if(!e.Widgets.some((function(e){return i.overlap(t,n,1,1,e)}))){o=!0;break}n++}if(!o)for(t=0,n=r;t<=r;){if(!e.Widgets.some((function(e){return i.overlap(t,n,1,1,e)}))){o=!0;break}t++}if(o)break;r++}}return{OffsetX:t,OffsetY:n,Width:1,Height:1}}},{key:"canApplyWidget",value:function(e){return!!e.ReportDefinitionId}},{key:"rowDrop",value:function(e,t){Object(Q.i)(t.Widgets,e.previousIndex,e.currentIndex),e.previousIndex!==e.currentIndex&&this.onDefinitionChange(t)}},{key:"onDeleteRow",value:function(e,t){var n=t.indexOf(e);n>=0&&t.splice(n,1)}},{key:"onInsertRow",value:function(e,t){var n=t?t():{Id:0};e.push(n)}},{key:"ws",get:function(){return this.workspace.currentTenant}},{key:"allMainMenuSections",get:function(){var e=Object(AE.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(Si.c)(e)}},{key:"allMainMenuIcons",get:function(){var e=Object(AE.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(Si.c)(e)}}]),n}(Vn.a)).\u0275fac=function(e){return new(e||Fue)(r.Pb(S.m),r.Pb(G.e),r.Pb(X.t))},Fue.\u0275cmp=r.Jb({type:Fue,selectors:[["t-dashboard-definitions-details"]],viewQuery:function(e,t){var n;1&e&&r.Oc(Hse,!0),2&e&&r.Ec(n=r.ic())&&(t.widgetConfigModal=n.first)},features:[r.yb],decls:10,vars:15,consts:[["collection","DashboardDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["widgetConfigModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","title",1,"small"],["id","title","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",2,"height","15rem",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","",4,"ngFor","ngForOf"],["for","autorefreshperiodinminutes",1,"small"],["id","autorefreshperiodinminutes","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["autorefreshperiodinminutes","ngModel"],[1,"custom-control","custom-checkbox","form-group"],["type","checkbox","id","showInMainMenu",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showInMainMenu",1,"custom-control-label"],["class","form-group t-text-whitish",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"flex-grow-1"],[1,"col","bg-light","border","shadow","h-100"],["mode","preview",1,"h-100",3,"previewDefinition","disableDrilldown","isEdit","addWidget","editWidget","deleteWidget","moveWidget","resizeWidget"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","title2",1,"small"],["id","title2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title2","ngModel"],["for","title3",1,"small"],["id","title3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title3","ngModel"],["cdkDrag","",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],[1,"p-0"],["theme","dark",3,"ngModel","showCreate","ngModelChange"],["rolemodel","ngModel"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[3,"value"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"small","t-light-danger","text-wrap"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12"],["for","reportdefinition",1,"small"],["theme","dark","id","reportdefinition","required","",3,"ngModel","ngModelChange"],["reportdefinition","ngModel"],[1,"form-group","col-12","col-sm-6"],["for","width",1,"small"],["id","width","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["width","ngModel"],["for","height",1,"small"],["id","height","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["height","ngModel"],["for","offsetx",1,"small"],["id","offsetx","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["offsetx","ngModel"],["for","offsety",1,"small"],["id","offsety","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["offsety","ngModel"],["class","form-group col-12 col-sm-6",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(r.Qb(0,"t-details",0),r.mc(1,"translate"),r.Rc(2,$se,3,3,"ng-template",null,1,r.Sc),r.Rc(4,Cue,1,1,"ng-template",null,2,r.Sc),r.Rc(6,Mue,1,1,"ng-template",null,3,r.Sc),r.Rc(8,Oue,62,78,"ng-template",null,4,r.Sc)),2&e){var n=r.Fc(3),i=r.Fc(5);r.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",r.nc(1,12,"DashboardDefinitions"))("detailsCrumb",n)("idString",t.idString)("documentTemplate",i)("actions",r.vc(14,jue))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[q.a,x.u,ne.b,ie.c,ie.k,ie.n,x.B,Q.f,x.t,ie.q,ie.a,Qse,Q.b,Q.d,cl,ie.v,ie.p,ie.x,XB,ie.u],pipes:[G.d],encapsulation:2}),Fue),que=((Lue=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Lue)},Lue.\u0275cmp=r.Jb({type:Lue,selectors:[["t-dashboard-definitions-picker"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Vb(0,"p"),r.Tc(1,"dashboard-definitions-picker works!"),r.Ub())},encapsulation:2}),Lue),Que=n("cH1L"),Hue=["*"],$ue=((Aue=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Aue)},Aue.\u0275cmp=r.Jb({type:Aue,selectors:[["t-success-message"]],ngContentSelectors:Hue,decls:4,vars:0,consts:[[1,"p-2","px-3","alert-success"],["icon","check"]],template:function(e,t){1&e&&(r.rc(),r.Vb(0,"div",0),r.Qb(1,"fa-icon",1),r.Tc(2,"\xa0\xa0"),r.qc(3),r.Ub())},directives:[ne.b],encapsulation:2}),Aue),Gue=n("xdC8"),zue=((Pue=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return e&&e.label?e.label():""}}]),e}()).\u0275fac=function(e){return new(e||Pue)},Pue.\u0275pipe=r.Ob({name:"label",type:Pue,pure:!1}),Pue),Jue=[{path:":tenantId",component:Bt,canActivate:[H.d],canActivateChild:[IC.a],children:[{path:"units",component:ln,canDeactivate:[gi.a]},{path:"units/:id",component:mi,canDeactivate:[pi.a]},{path:"roles",component:qv,canDeactivate:[gi.a]},{path:"roles/:id",component:uI,canDeactivate:[pi.a]},{path:"users",component:Gs,canDeactivate:[gi.a]},{path:"users/:id",component:Vs,canDeactivate:[pi.a]},{path:"relations",component:Bi,canDeactivate:[gi.a]},{path:"relations/:definitionId",component:Bi,canDeactivate:[gi.a]},{path:"relations/:definitionId/:id",component:Tv,canDeactivate:[pi.a]},{path:"custodies",component:GW,canDeactivate:[gi.a]},{path:"custodies/:definitionId",component:GW,canDeactivate:[gi.a]},{path:"custodies/:definitionId/:id",component:LE,canDeactivate:[pi.a]},{path:"agents",component:Yb,canDeactivate:[gi.a]},{path:"agents/:id",component:Ab,canDeactivate:[pi.a]},{path:"lookups",component:ab,canDeactivate:[gi.a]},{path:"lookups/:definitionId",component:ab,canDeactivate:[gi.a]},{path:"lookups/:definitionId/:id",component:$d,canDeactivate:[pi.a]},{path:"currencies",component:Ju,canDeactivate:[gi.a]},{path:"currencies/:id",component:Lu,canDeactivate:[pi.a]},{path:"resources",component:LC,canDeactivate:[gi.a]},{path:"resources/:definitionId",component:LC,canDeactivate:[gi.a]},{path:"resources/:definitionId/:id",component:vM,canDeactivate:[pi.a]},{path:"account-classifications",component:DM,canDeactivate:[gi.a]},{path:"account-classifications/:id",component:pV,canDeactivate:[pi.a]},{path:"ifrs-concepts",component:q2,canDeactivate:[gi.a]},{path:"ifrs-concepts/:id",component:Z2,canDeactivate:[pi.a]},{path:"account-types",component:xV,canDeactivate:[gi.a]},{path:"account-types/:id",component:bW,canDeactivate:[pi.a]},{path:"accounts",component:VW,canDeactivate:[gi.a]},{path:"accounts/:id",component:rQ,canDeactivate:[pi.a]},{path:"entry-types",component:OH,canDeactivate:[gi.a]},{path:"entry-types/:id",component:w$,canDeactivate:[pi.a]},{path:"documents",component:eG,canDeactivate:[gi.a]},{path:"documents/:definitionId",component:eG,canDeactivate:[gi.a]},{path:"documents/:definitionId/:id",component:U1,canDeactivate:[pi.a]},{path:"d/:definitionId",redirectTo:"documents/:definitionId"},{path:"d/:definitionId/:id",redirectTo:"documents/:definitionId/:id"},{path:"inbox",component:M2,canDeactivate:[gi.a]},{path:"outbox",component:F2,canDeactivate:[gi.a]},{path:"report-definitions",component:zB,canDeactivate:[gi.a]},{path:"report-definitions/:id",component:LB,canDeactivate:[pi.a]},{path:"dashboard-definitions",component:fse,canDeactivate:[gi.a]},{path:"dashboard-definitions/:id",component:Wue,canDeactivate:[pi.a]},{path:"centers",component:qQ,canDeactivate:[gi.a]},{path:"centers/:id",component:wH,canDeactivate:[pi.a]},{path:"exchange-rates",component:K1,canDeactivate:[gi.a]},{path:"exchange-rates/:id",component:d2,canDeactivate:[pi.a]},{path:"details-entries",component:N1,canDeactivate:[gi.a]},{path:"details-entries/:id",component:N1,canDeactivate:[pi.a]},{path:"markup-templates",component:v3,canDeactivate:[gi.a]},{path:"markup-templates/:id",component:nne,canDeactivate:[pi.a]},{path:"relation-definitions",component:loe,canDeactivate:[gi.a]},{path:"relation-definitions/:id",component:Wre,canDeactivate:[pi.a]},{path:"custody-definitions",component:qL,canDeactivate:[gi.a]},{path:"custody-definitions/:id",component:kL,canDeactivate:[pi.a]},{path:"resource-definitions",component:jP,canDeactivate:[gi.a]},{path:"resource-definitions/:id",component:CP,canDeactivate:[pi.a]},{path:"lookup-definitions",component:m_,canDeactivate:[gi.a]},{path:"lookup-definitions/:id",component:zS,canDeactivate:[pi.a]},{path:"line-definitions",component:j8,canDeactivate:[gi.a]},{path:"line-definitions/:id",component:D8,canDeactivate:[pi.a]},{path:"document-definitions",component:xee,canDeactivate:[gi.a]},{path:"document-definitions/:id",component:lee,canDeactivate:[pi.a]},{path:"report/:definitionId",component:FU,canDeactivate:[gi.a]},{path:"dashboard/:definitionId",component:Qse,canDeactivate:[gi.a]},{path:"drilldown/:definitionId",component:tse,canDeactivate:[gi.a]},{path:"account-statement",component:sce,canDeactivate:[gi.a]},{path:"relation-statement/:definitionId",component:uce,canDeactivate:[gi.a]},{path:"reconciliation",component:Hae,canDeactivate:[pi.a]},{path:"emails",component:ole,canDeactivate:[gi.a]},{path:"emails/:id",component:ple,canDeactivate:[pi.a]},{path:"sms-messages",component:Fle,canDeactivate:[gi.a]},{path:"sms-messages/:id",component:kle,canDeactivate:[pi.a]},{path:"general-settings",component:yC,canDeactivate:[pi.a]},{path:"financial-settings",component:zle,canDeactivate:[pi.a]},{path:"main-menu",component:Mn,canDeactivate:[gi.a]},{path:"",redirectTo:"main-menu",pathMatch:"full"},{path:"**",component:dn}]},{path:"",redirectTo:"/root/welcome",pathMatch:"full"}],Kue=((Nue=function e(t){_classCallCheck(this,e),t.addIcons(Ale.a,Ale.d,Ale.g,Ale.h,Ale.l,Ale.n,Ale.o,Ale.q,Ale.r,Ale.s,Ale.t,Ale.w,Ale.z,Ale.A,Ale.C,Ale.B,Ale.D,Ale.E,Ale.F,Ale.G,Ale.H,Ale.L,Ale.N,Ale.O,Ale.P,Ale.R,Ale.S,Ale.T,Ale.U,Ale.X,Ale.Y,Ale.Z,Ale.bb,Ale.cb,Ale.eb,Ale.fb,Ale.gb,Ale.hb,Ale.ib,Ale.jb,Ale.kb,Ale.lb,Ale.mb,Ale.nb,Ale.pb,Ale.tb,Ale.ub,Ale.vb,Ale.wb,Ale.xb,Ale.yb,Ale.zb,Ale.Ab,Ale.Cb,Ale.Db,Ale.Eb,Ale.Fb,Ale.Gb,Ale.Hb,Ale.Ib,Ale.Jb,Ale.Kb,Ale.Mb,Ale.Nb,Ale.Ob,Ale.Pb,Ale.Qb,Ale.Rb,Ale.Sb,Ale.Tb,Ale.Ub,Ale.Vb,Ale.Wb,Ale.Xb,Ale.Yb,Ale.Zb,Ale.ac,Ale.cc,Ale.dc,Ale.ec,Ale.gc,Ale.hc,Ale.ic,Ale.jc,Ale.kc,Ale.lc,Ale.nc,Ale.oc,Ale.pc,Ale.qc,Ale.rc,Ale.sc,Ale.tc,Ale.uc,Ale.vc,Ale.wc,Ale.xc,Ale.yc,Ale.zc,Ale.Bc,Ale.Cc,Ale.Dc,Ale.Ec,Ale.Fc,Ale.Gc,Ale.Hc,Ale.Ic,Ale.Jc,Ale.Kc,Ale.Lc,Ale.Nc,Ale.Pc,Ale.Qc,Ale.Rc,Ale.Sc,Ale.Tc,Ale.Uc,Ale.Yc,Ale.ad,Ale.bd,Ale.cd,Ale.fd,Ale.dd,Ale.ed,Ale.gd,Ale.hd,Ale.id,Ale.ld,Ale.md,Ale.nd,Ale.pd,Ale.qd,Ale.rd,Ale.sd,Ale.vd,Ale.wd,Ale.yd,Ale.zd,Ale.Bd,Ale.Cd,Ale.Ed,Ale.Gd,Ale.Hd,Ale.Id,Ale.Jd,Ale.Ld,Ale.Md,Ale.Od,Ale.Pd,Ale.Qd,Ale.Rd,Ale.Sd,Ale.Td,Ale.Ud,Ale.Zd,Ale.Vd,Ale.Wd,Ale.Xd,Ale.ae,Ale.be)}).\u0275mod=r.Nb({type:Nue}),Nue.\u0275inj=r.Mb({factory:function(e){return new(e||Nue)(r.dc(ne.c))},imports:[[B.a,i.i.forChild(Jue),D,cg.forRoot({apiKey:"<Google API Key goes here>"})]]}),Nue);r.Lc(OM,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,G.a,ie.y,ie.p,ie.x,ie.c,ie.q,ie.t,ie.a,ie.v,ie.w,ie.s,ie.k,ie.l,ie.u,ie.g,ie.f,ie.r,ie.b,ie.d,ie.n,ie.o,ie.m,ne.b,ne.a,ne.d,ne.f,ne.e,ne.g,ne.h,Que.b,pr.b,pr.a,pr.d,pr.e,Q.f,Q.g,Q.b,Q.c,Q.e,Q.d,X.l,X.m,X.r,X.p,X.o,X.B,X.d,X.C,X.w,X.v,X.x,X.y,X.A,X.E,hr.h,hr.mb,hr.nb,hr.ob,hr.pb,hr.gb,hr.hb,hr.f,hr.s,hr.A,hr.fb,hr.x,hr.J,hr.K,hr.Z,hr.y,hr.z,hr.E,hr.F,hr.cb,hr.db,hr.eb,hr.a,hr.lb,hr.c,hr.d,hr.e,hr.g,hr.i,hr.k,hr.j,hr.l,hr.m,hr.p,hr.o,hr.q,hr.r,hr.n,hr.ab,hr.bb,hr.t,hr.u,hr.H,hr.G,hr.I,hr.M,hr.L,hr.N,hr.X,hr.Y,hr.v,hr.w,hr.Q,hr.b,hr.V,hr.R,hr.S,hr.T,hr.U,hr.W,hr.ib,hr.jb,hr.kb,hr.O,hr.D,hr.B,hr.C,ye.a,te.a,Ot.a,q.a,TI,ke.a,$ue,Kv.a,we.a,df,Ce.a,OI,uG,nl.a,En.a,xn,iG,Vn.a,_t.a,dd,tl.a,Xa,Ca,he,Tn.a,Ie.a,Gue.a,lg,ve.a,fn.a,i.j,i.f,i.h,i.g,i.k,R,Zf,tm,rm,am,dm,mm,qm,Hm,$m,Km,Gm,zm,Ym,Zm,Bt,ln,mi,dn,Mn,Bi,Tv,qv,uI,Vs,Gs,yC,ab,$d,Ju,Lu,LC,vM,NC,bb,DM,pV,OM,xV,bW,NM,VW,rQ,lQ,lf,RW,FU,pa,zB,LB,qQ,wH,rd,Ys,cl,Zu,OH,w$,PV,eG,U1,N1,K1,d2,M2,F2,q2,Z2,n3,v3,nne,w3,Ab,Yb,tf,Wre,loe,_V,CP,jP,HP,m_,zS,v_,lce,sce,uce,qL,kL,GL,YW,GW,LE,D8,j8,H8,xee,lee,See,fce,Hae,ole,ple,kle,Fle,XB,zle,Ux,hU,tse,fse,Wue,que,Qse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,G.d,zue,sg,Ve,Te,dg]),r.Lc(NM,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,G.a,ie.y,ie.p,ie.x,ie.c,ie.q,ie.t,ie.a,ie.v,ie.w,ie.s,ie.k,ie.l,ie.u,ie.g,ie.f,ie.r,ie.b,ie.d,ie.n,ie.o,ie.m,ne.b,ne.a,ne.d,ne.f,ne.e,ne.g,ne.h,Que.b,pr.b,pr.a,pr.d,pr.e,Q.f,Q.g,Q.b,Q.c,Q.e,Q.d,X.l,X.m,X.r,X.p,X.o,X.B,X.d,X.C,X.w,X.v,X.x,X.y,X.A,X.E,hr.h,hr.mb,hr.nb,hr.ob,hr.pb,hr.gb,hr.hb,hr.f,hr.s,hr.A,hr.fb,hr.x,hr.J,hr.K,hr.Z,hr.y,hr.z,hr.E,hr.F,hr.cb,hr.db,hr.eb,hr.a,hr.lb,hr.c,hr.d,hr.e,hr.g,hr.i,hr.k,hr.j,hr.l,hr.m,hr.p,hr.o,hr.q,hr.r,hr.n,hr.ab,hr.bb,hr.t,hr.u,hr.H,hr.G,hr.I,hr.M,hr.L,hr.N,hr.X,hr.Y,hr.v,hr.w,hr.Q,hr.b,hr.V,hr.R,hr.S,hr.T,hr.U,hr.W,hr.ib,hr.jb,hr.kb,hr.O,hr.D,hr.B,hr.C,ye.a,te.a,Ot.a,q.a,TI,ke.a,$ue,Kv.a,we.a,df,Ce.a,OI,uG,nl.a,En.a,xn,iG,Vn.a,_t.a,dd,tl.a,Xa,Ca,he,Tn.a,Ie.a,Gue.a,lg,ve.a,fn.a,i.j,i.f,i.h,i.g,i.k,R,Zf,tm,rm,am,dm,mm,qm,Hm,$m,Km,Gm,zm,Ym,Zm,Bt,ln,mi,dn,Mn,Bi,Tv,qv,uI,Vs,Gs,yC,ab,$d,Ju,Lu,LC,vM,NC,bb,DM,pV,OM,xV,bW,NM,VW,rQ,lQ,lf,RW,FU,pa,zB,LB,qQ,wH,rd,Ys,cl,Zu,OH,w$,PV,eG,U1,N1,K1,d2,M2,F2,q2,Z2,n3,v3,nne,w3,Ab,Yb,tf,Wre,loe,_V,CP,jP,HP,m_,zS,v_,lce,sce,uce,qL,kL,GL,YW,GW,LE,D8,j8,H8,xee,lee,See,fce,Hae,ole,ple,kle,Fle,XB,zle,Ux,hU,tse,fse,Wue,que,Qse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,G.d,zue,sg,Ve,Te,dg]),r.Lc(lf,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,G.a,ie.y,ie.p,ie.x,ie.c,ie.q,ie.t,ie.a,ie.v,ie.w,ie.s,ie.k,ie.l,ie.u,ie.g,ie.f,ie.r,ie.b,ie.d,ie.n,ie.o,ie.m,ne.b,ne.a,ne.d,ne.f,ne.e,ne.g,ne.h,Que.b,pr.b,pr.a,pr.d,pr.e,Q.f,Q.g,Q.b,Q.c,Q.e,Q.d,X.l,X.m,X.r,X.p,X.o,X.B,X.d,X.C,X.w,X.v,X.x,X.y,X.A,X.E,hr.h,hr.mb,hr.nb,hr.ob,hr.pb,hr.gb,hr.hb,hr.f,hr.s,hr.A,hr.fb,hr.x,hr.J,hr.K,hr.Z,hr.y,hr.z,hr.E,hr.F,hr.cb,hr.db,hr.eb,hr.a,hr.lb,hr.c,hr.d,hr.e,hr.g,hr.i,hr.k,hr.j,hr.l,hr.m,hr.p,hr.o,hr.q,hr.r,hr.n,hr.ab,hr.bb,hr.t,hr.u,hr.H,hr.G,hr.I,hr.M,hr.L,hr.N,hr.X,hr.Y,hr.v,hr.w,hr.Q,hr.b,hr.V,hr.R,hr.S,hr.T,hr.U,hr.W,hr.ib,hr.jb,hr.kb,hr.O,hr.D,hr.B,hr.C,ye.a,te.a,Ot.a,q.a,TI,ke.a,$ue,Kv.a,we.a,df,Ce.a,OI,uG,nl.a,En.a,xn,iG,Vn.a,_t.a,dd,tl.a,Xa,Ca,he,Tn.a,Ie.a,Gue.a,lg,ve.a,fn.a,i.j,i.f,i.h,i.g,i.k,R,Zf,tm,rm,am,dm,mm,qm,Hm,$m,Km,Gm,zm,Ym,Zm,Bt,ln,mi,dn,Mn,Bi,Tv,qv,uI,Vs,Gs,yC,ab,$d,Ju,Lu,LC,vM,NC,bb,DM,pV,OM,xV,bW,NM,VW,rQ,lQ,lf,RW,FU,pa,zB,LB,qQ,wH,rd,Ys,cl,Zu,OH,w$,PV,eG,U1,N1,K1,d2,M2,F2,q2,Z2,n3,v3,nne,w3,Ab,Yb,tf,Wre,loe,_V,CP,jP,HP,m_,zS,v_,lce,sce,uce,qL,kL,GL,YW,GW,LE,D8,j8,H8,xee,lee,See,fce,Hae,ole,ple,kle,Fle,XB,zle,Ux,hU,tse,fse,Wue,que,Qse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,G.d,zue,sg,Ve,Te,dg]),r.Lc(rd,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,G.a,ie.y,ie.p,ie.x,ie.c,ie.q,ie.t,ie.a,ie.v,ie.w,ie.s,ie.k,ie.l,ie.u,ie.g,ie.f,ie.r,ie.b,ie.d,ie.n,ie.o,ie.m,ne.b,ne.a,ne.d,ne.f,ne.e,ne.g,ne.h,Que.b,pr.b,pr.a,pr.d,pr.e,Q.f,Q.g,Q.b,Q.c,Q.e,Q.d,X.l,X.m,X.r,X.p,X.o,X.B,X.d,X.C,X.w,X.v,X.x,X.y,X.A,X.E,hr.h,hr.mb,hr.nb,hr.ob,hr.pb,hr.gb,hr.hb,hr.f,hr.s,hr.A,hr.fb,hr.x,hr.J,hr.K,hr.Z,hr.y,hr.z,hr.E,hr.F,hr.cb,hr.db,hr.eb,hr.a,hr.lb,hr.c,hr.d,hr.e,hr.g,hr.i,hr.k,hr.j,hr.l,hr.m,hr.p,hr.o,hr.q,hr.r,hr.n,hr.ab,hr.bb,hr.t,hr.u,hr.H,hr.G,hr.I,hr.M,hr.L,hr.N,hr.X,hr.Y,hr.v,hr.w,hr.Q,hr.b,hr.V,hr.R,hr.S,hr.T,hr.U,hr.W,hr.ib,hr.jb,hr.kb,hr.O,hr.D,hr.B,hr.C,ye.a,te.a,Ot.a,q.a,TI,ke.a,$ue,Kv.a,we.a,df,Ce.a,OI,uG,nl.a,En.a,xn,iG,Vn.a,_t.a,dd,tl.a,Xa,Ca,he,Tn.a,Ie.a,Gue.a,lg,ve.a,fn.a,i.j,i.f,i.h,i.g,i.k,R,Zf,tm,rm,am,dm,mm,qm,Hm,$m,Km,Gm,zm,Ym,Zm,Bt,ln,mi,dn,Mn,Bi,Tv,qv,uI,Vs,Gs,yC,ab,$d,Ju,Lu,LC,vM,NC,bb,DM,pV,OM,xV,bW,NM,VW,rQ,lQ,lf,RW,FU,pa,zB,LB,qQ,wH,rd,Ys,cl,Zu,OH,w$,PV,eG,U1,N1,K1,d2,M2,F2,q2,Z2,n3,v3,nne,w3,Ab,Yb,tf,Wre,loe,_V,CP,jP,HP,m_,zS,v_,lce,sce,uce,qL,kL,GL,YW,GW,LE,D8,j8,H8,xee,lee,See,fce,Hae,ole,ple,kle,Fle,XB,zle,Ux,hU,tse,fse,Wue,que,Qse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,G.d,zue,sg,Ve,Te,dg]),r.Lc(cl,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,G.a,ie.y,ie.p,ie.x,ie.c,ie.q,ie.t,ie.a,ie.v,ie.w,ie.s,ie.k,ie.l,ie.u,ie.g,ie.f,ie.r,ie.b,ie.d,ie.n,ie.o,ie.m,ne.b,ne.a,ne.d,ne.f,ne.e,ne.g,ne.h,Que.b,pr.b,pr.a,pr.d,pr.e,Q.f,Q.g,Q.b,Q.c,Q.e,Q.d,X.l,X.m,X.r,X.p,X.o,X.B,X.d,X.C,X.w,X.v,X.x,X.y,X.A,X.E,hr.h,hr.mb,hr.nb,hr.ob,hr.pb,hr.gb,hr.hb,hr.f,hr.s,hr.A,hr.fb,hr.x,hr.J,hr.K,hr.Z,hr.y,hr.z,hr.E,hr.F,hr.cb,hr.db,hr.eb,hr.a,hr.lb,hr.c,hr.d,hr.e,hr.g,hr.i,hr.k,hr.j,hr.l,hr.m,hr.p,hr.o,hr.q,hr.r,hr.n,hr.ab,hr.bb,hr.t,hr.u,hr.H,hr.G,hr.I,hr.M,hr.L,hr.N,hr.X,hr.Y,hr.v,hr.w,hr.Q,hr.b,hr.V,hr.R,hr.S,hr.T,hr.U,hr.W,hr.ib,hr.jb,hr.kb,hr.O,hr.D,hr.B,hr.C,ye.a,te.a,Ot.a,q.a,TI,ke.a,$ue,Kv.a,we.a,df,Ce.a,OI,uG,nl.a,En.a,xn,iG,Vn.a,_t.a,dd,tl.a,Xa,Ca,he,Tn.a,Ie.a,Gue.a,lg,ve.a,fn.a,i.j,i.f,i.h,i.g,i.k,R,Zf,tm,rm,am,dm,mm,qm,Hm,$m,Km,Gm,zm,Ym,Zm,Bt,ln,mi,dn,Mn,Bi,Tv,qv,uI,Vs,Gs,yC,ab,$d,Ju,Lu,LC,vM,NC,bb,DM,pV,OM,xV,bW,NM,VW,rQ,lQ,lf,RW,FU,pa,zB,LB,qQ,wH,rd,Ys,cl,Zu,OH,w$,PV,eG,U1,N1,K1,d2,M2,F2,q2,Z2,n3,v3,nne,w3,Ab,Yb,tf,Wre,loe,_V,CP,jP,HP,m_,zS,v_,lce,sce,uce,qL,kL,GL,YW,GW,LE,D8,j8,H8,xee,lee,See,fce,Hae,ole,ple,kle,Fle,XB,zle,Ux,hU,tse,fse,Wue,que,Qse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,G.d,zue,sg,Ve,Te,dg]),r.Lc(PV,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,G.a,ie.y,ie.p,ie.x,ie.c,ie.q,ie.t,ie.a,ie.v,ie.w,ie.s,ie.k,ie.l,ie.u,ie.g,ie.f,ie.r,ie.b,ie.d,ie.n,ie.o,ie.m,ne.b,ne.a,ne.d,ne.f,ne.e,ne.g,ne.h,Que.b,pr.b,pr.a,pr.d,pr.e,Q.f,Q.g,Q.b,Q.c,Q.e,Q.d,X.l,X.m,X.r,X.p,X.o,X.B,X.d,X.C,X.w,X.v,X.x,X.y,X.A,X.E,hr.h,hr.mb,hr.nb,hr.ob,hr.pb,hr.gb,hr.hb,hr.f,hr.s,hr.A,hr.fb,hr.x,hr.J,hr.K,hr.Z,hr.y,hr.z,hr.E,hr.F,hr.cb,hr.db,hr.eb,hr.a,hr.lb,hr.c,hr.d,hr.e,hr.g,hr.i,hr.k,hr.j,hr.l,hr.m,hr.p,hr.o,hr.q,hr.r,hr.n,hr.ab,hr.bb,hr.t,hr.u,hr.H,hr.G,hr.I,hr.M,hr.L,hr.N,hr.X,hr.Y,hr.v,hr.w,hr.Q,hr.b,hr.V,hr.R,hr.S,hr.T,hr.U,hr.W,hr.ib,hr.jb,hr.kb,hr.O,hr.D,hr.B,hr.C,ye.a,te.a,Ot.a,q.a,TI,ke.a,$ue,Kv.a,we.a,df,Ce.a,OI,uG,nl.a,En.a,xn,iG,Vn.a,_t.a,dd,tl.a,Xa,Ca,he,Tn.a,Ie.a,Gue.a,lg,ve.a,fn.a,i.j,i.f,i.h,i.g,i.k,R,Zf,tm,rm,am,dm,mm,qm,Hm,$m,Km,Gm,zm,Ym,Zm,Bt,ln,mi,dn,Mn,Bi,Tv,qv,uI,Vs,Gs,yC,ab,$d,Ju,Lu,LC,vM,NC,bb,DM,pV,OM,xV,bW,NM,VW,rQ,lQ,lf,RW,FU,pa,zB,LB,qQ,wH,rd,Ys,cl,Zu,OH,w$,PV,eG,U1,N1,K1,d2,M2,F2,q2,Z2,n3,v3,nne,w3,Ab,Yb,tf,Wre,loe,_V,CP,jP,HP,m_,zS,v_,lce,sce,uce,qL,kL,GL,YW,GW,LE,D8,j8,H8,xee,lee,See,fce,Hae,ole,ple,kle,Fle,XB,zle,Ux,hU,tse,fse,Wue,que,Qse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,G.d,zue,sg,Ve,Te,dg]),r.Lc(_V,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,G.a,ie.y,ie.p,ie.x,ie.c,ie.q,ie.t,ie.a,ie.v,ie.w,ie.s,ie.k,ie.l,ie.u,ie.g,ie.f,ie.r,ie.b,ie.d,ie.n,ie.o,ie.m,ne.b,ne.a,ne.d,ne.f,ne.e,ne.g,ne.h,Que.b,pr.b,pr.a,pr.d,pr.e,Q.f,Q.g,Q.b,Q.c,Q.e,Q.d,X.l,X.m,X.r,X.p,X.o,X.B,X.d,X.C,X.w,X.v,X.x,X.y,X.A,X.E,hr.h,hr.mb,hr.nb,hr.ob,hr.pb,hr.gb,hr.hb,hr.f,hr.s,hr.A,hr.fb,hr.x,hr.J,hr.K,hr.Z,hr.y,hr.z,hr.E,hr.F,hr.cb,hr.db,hr.eb,hr.a,hr.lb,hr.c,hr.d,hr.e,hr.g,hr.i,hr.k,hr.j,hr.l,hr.m,hr.p,hr.o,hr.q,hr.r,hr.n,hr.ab,hr.bb,hr.t,hr.u,hr.H,hr.G,hr.I,hr.M,hr.L,hr.N,hr.X,hr.Y,hr.v,hr.w,hr.Q,hr.b,hr.V,hr.R,hr.S,hr.T,hr.U,hr.W,hr.ib,hr.jb,hr.kb,hr.O,hr.D,hr.B,hr.C,ye.a,te.a,Ot.a,q.a,TI,ke.a,$ue,Kv.a,we.a,df,Ce.a,OI,uG,nl.a,En.a,xn,iG,Vn.a,_t.a,dd,tl.a,Xa,Ca,he,Tn.a,Ie.a,Gue.a,lg,ve.a,fn.a,i.j,i.f,i.h,i.g,i.k,R,Zf,tm,rm,am,dm,mm,qm,Hm,$m,Km,Gm,zm,Ym,Zm,Bt,ln,mi,dn,Mn,Bi,Tv,qv,uI,Vs,Gs,yC,ab,$d,Ju,Lu,LC,vM,NC,bb,DM,pV,OM,xV,bW,NM,VW,rQ,lQ,lf,RW,FU,pa,zB,LB,qQ,wH,rd,Ys,cl,Zu,OH,w$,PV,eG,U1,N1,K1,d2,M2,F2,q2,Z2,n3,v3,nne,w3,Ab,Yb,tf,Wre,loe,_V,CP,jP,HP,m_,zS,v_,lce,sce,uce,qL,kL,GL,YW,GW,LE,D8,j8,H8,xee,lee,See,fce,Hae,ole,ple,kle,Fle,XB,zle,Ux,hU,tse,fse,Wue,que,Qse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,G.d,zue,sg,Ve,Te,dg]),r.Lc(hU,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,G.a,ie.y,ie.p,ie.x,ie.c,ie.q,ie.t,ie.a,ie.v,ie.w,ie.s,ie.k,ie.l,ie.u,ie.g,ie.f,ie.r,ie.b,ie.d,ie.n,ie.o,ie.m,ne.b,ne.a,ne.d,ne.f,ne.e,ne.g,ne.h,Que.b,pr.b,pr.a,pr.d,pr.e,Q.f,Q.g,Q.b,Q.c,Q.e,Q.d,X.l,X.m,X.r,X.p,X.o,X.B,X.d,X.C,X.w,X.v,X.x,X.y,X.A,X.E,hr.h,hr.mb,hr.nb,hr.ob,hr.pb,hr.gb,hr.hb,hr.f,hr.s,hr.A,hr.fb,hr.x,hr.J,hr.K,hr.Z,hr.y,hr.z,hr.E,hr.F,hr.cb,hr.db,hr.eb,hr.a,hr.lb,hr.c,hr.d,hr.e,hr.g,hr.i,hr.k,hr.j,hr.l,hr.m,hr.p,hr.o,hr.q,hr.r,hr.n,hr.ab,hr.bb,hr.t,hr.u,hr.H,hr.G,hr.I,hr.M,hr.L,hr.N,hr.X,hr.Y,hr.v,hr.w,hr.Q,hr.b,hr.V,hr.R,hr.S,hr.T,hr.U,hr.W,hr.ib,hr.jb,hr.kb,hr.O,hr.D,hr.B,hr.C,ye.a,te.a,Ot.a,q.a,TI,ke.a,$ue,Kv.a,we.a,df,Ce.a,OI,uG,nl.a,En.a,xn,iG,Vn.a,_t.a,dd,tl.a,Xa,Ca,he,Tn.a,Ie.a,Gue.a,lg,ve.a,fn.a,i.j,i.f,i.h,i.g,i.k,R,Zf,tm,rm,am,dm,mm,qm,Hm,$m,Km,Gm,zm,Ym,Zm,Bt,ln,mi,dn,Mn,Bi,Tv,qv,uI,Vs,Gs,yC,ab,$d,Ju,Lu,LC,vM,NC,bb,DM,pV,OM,xV,bW,NM,VW,rQ,lQ,lf,RW,FU,pa,zB,LB,qQ,wH,rd,Ys,cl,Zu,OH,w$,PV,eG,U1,N1,K1,d2,M2,F2,q2,Z2,n3,v3,nne,w3,Ab,Yb,tf,Wre,loe,_V,CP,jP,HP,m_,zS,v_,lce,sce,uce,qL,kL,GL,YW,GW,LE,D8,j8,H8,xee,lee,See,fce,Hae,ole,ple,kle,Fle,XB,zle,Ux,hU,tse,fse,Wue,que,Qse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,G.d,zue,sg,Ve,Te,dg])},NNvV:function(e,t){!function(){function t(e,n){for(var i=(n=n||[]).length,r=0;r<e.length;r++)Array.isArray(e[r])&&Array.isArray(e[r][0])?(t(e[r],n),i=n.length):n[i++]=e[r];return Array.isArray(n[0])?n:[n]}function n(e){return Math.max.apply(null,e.map((function(e){return e[1]})))}function i(e){return Math.max.apply(null,e.map((function(e){return e[0]})))}function r(e){return Math.min.apply(null,e.map((function(e){return e[1]})))}function o(e){return Math.min.apply(null,e.map((function(e){return e[0]})))}function c(e){return t(e.geometry.coordinates)}function a(e){if(!e)return[];switch(e.type){case"Feature":return c(e);case"GeometryCollection":return t(e.geometries.map(a));case"FeatureCollection":return t(e.features.map(c));case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiPolygon":case"MultiLineString":return t(e.coordinates);default:return[]}}e.exports={envelope:function(e){return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[(c={minLng:o(t=a(e)),minLat:r(t),maxLng:i(t),maxLat:n(t)}).minLng,c.minLat],[c.minLng,c.maxLat],[c.maxLng,c.maxLat],[c.maxLng,c.minLat],[c.minLng,c.minLat]]]}};var t,c},extent:function(e){return[o(t=a(e)),r(t),i(t),n(t)];var t},centroid:function(e){return function(e){for(var t={x:0,y:0},n=0,i=0,r=0,o=0,c=0,a=0,l=0;l<e.length-1;l++)n+=a=(i=e[l][0])*(c=e[l+1][1])-(o=e[l+1][0])*(r=e[l][1]),t.x+=(i+o)*a,t.y+=(r+c)*a;return n+=a=(i=e[e.length-1][0])*(c=e[0][1])-(o=e[0][0])*(r=e[e.length-1][1]),t.x+=(i+o)*a,t.y+=(r+c)*a,t.x=t.x/(6*(n*=.5)),t.y=t.y/(6*n),[t.x,t.y]}(a(e))},xMin:function(e){return o(a(e))},xMax:function(e){return i(a(e))},yMin:function(e){return r(a(e))},yMax:function(e){return n(a(e))}}}()}}]);