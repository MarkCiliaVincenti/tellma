(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{LIG5:function(e,t,n){"use strict";n.r(t),n.d(t,"ApplicationModule",(function(){return sle}));var i=n("tyNb"),o=n("fXoL"),c=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var o=i[n];e.call(t,o[1],o[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,s="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),l="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(s):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,d=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,o=0;function c(){n&&(n=!1,e()),i&&s()}function r(){l(c)}function s(){var e=Date.now();if(n){if(e-o<2)return;i=!0}else n=!0,i=!1,setTimeout(r,20);o=e}return s}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),b=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||s},m=v(0,0,0,0);function g(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+g(e["border-"+n+"-width"])}),0)}var h="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"==typeof e.getBBox};function v(e,t,n,i){return{x:e,y:t,width:n,height:i}}var I=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e,t=(e=this.target,r?h(e)?function(e){var t=e.getBBox();return v(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return m;var i=f(e).getComputedStyle(e),o=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var o=i[n];t[o]=g(e["padding-"+o])}return t}(i),c=o.left+o.right,r=o.top+o.bottom,s=g(i.width),l=g(i.height);if("border-box"===i.boxSizing&&(Math.round(s+c)!==t&&(s-=p(i,"left","right")+c),Math.round(l+r)!==n&&(l-=p(i,"top","bottom")+r)),!function(e){return e===f(e).document.documentElement}(e)){var a=Math.round(s+c)-t,u=Math.round(l+r)-n;1!==Math.abs(a)&&(s-=a),1!==Math.abs(u)&&(l-=u)}return v(o.left,o.top,s,l)}(e):m);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),y=function(e,t){var n,i,o,c,r,s,l,a=(i=(n=t).x,o=n.y,c=n.width,r=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),b(l,{x:i,y:o,width:c,height:r,top:o,right:i+c,bottom:r+o,left:i}),l);b(this,{target:e,contentRect:a})},w=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new c,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new I(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new y(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),C="undefined"!=typeof WeakMap?new WeakMap:new c,M=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=d.getInstance(),i=new w(t,n,this);C.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){M.prototype[e]=function(){var t;return(t=C.get(this))[e].apply(t,arguments)}}));var V=void 0!==s.ResizeObserver?s.ResizeObserver:M,T=n("IzEk"),E=n("XNiG"),x=n("ofXK");let U=(()=>{class e{constructor(e,t,n,i){this.elementRef=e,this.renderer=t,this.ngZone=n,this.platformId=i,this.removeResizeListeners$=new E.a,this.ellipsisContent=null,this.moreClickEmitter=new o.n,this.changeEmitter=new o.n}static numericBinarySearch(e,t){let n,i=0,o=e,c=-1;for(;i<=o;)n=~~((i+o)/2),t(n)?(c=n,i=n+1):o=n-1;return c}static convertEllipsisInputToString(e){return null==e?"":String(e)}ngAfterViewInit(){if(!Object(x.Q)(this.platformId))return;""===this.ellipsisCharacters&&(this.ellipsisCharacters="..."),this.moreAnchor=this.renderer.createElement("a"),this.moreAnchor.className="ngx-ellipsis-more",this.moreAnchor.href="#",this.moreAnchor.textContent=this.ellipsisCharacters,this.ellipsisWordBoundaries||(this.ellipsisWordBoundaries=""),this.ellipsisWordBoundaries="["+this.ellipsisWordBoundaries.replace(/\\n/,"\n").replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"]",this.ellipsisSubstrFn||(this.ellipsisSubstrFn=(e,t,n)=>e.substr(t,n)),this.elem=this.elementRef.nativeElement,null!=this.ellipsisContent?this.originalText=e.convertEllipsisInputToString(this.ellipsisContent):this.originalText||(this.originalText=this.elem.textContent.trim()),this.renderer.setProperty(this.elem,"innerHTML",""),this.innerElem=this.renderer.createElement("div"),this.renderer.addClass(this.innerElem,"ngx-ellipsis-inner");const t=this.renderer.createText(this.originalText);this.renderer.appendChild(this.innerElem,t),this.renderer.appendChild(this.elem,this.innerElem),this.previousDimensions={width:this.elem.clientWidth,height:this.elem.clientHeight},this.addResizeListener(!0)}ngOnChanges(t){const n=this.moreAnchor&&t.ellipsisCharacters;n&&(this.moreAnchor.textContent=this.ellipsisCharacters),this.elem&&void 0!==this.ellipsisContent&&(this.originalText!==e.convertEllipsisInputToString(this.ellipsisContent)||n)&&(this.originalText=e.convertEllipsisInputToString(this.ellipsisContent),this.applyEllipsis())}ngOnDestroy(){Object(x.Q)(this.platformId)&&this.removeAllListeners()}removeAllListeners(){this.destroyMoreClickListener&&this.destroyMoreClickListener(),this.removeResizeListener()}addResizeListener(e=!1){switch(void 0===this.resizeDetectionStrategy&&(this.resizeDetectionStrategy=""),this.resizeDetectionStrategy){case"manual":break;case"window":this.addWindowResizeListener();break;default:"undefined"!=typeof console&&console.warn(`No such ellipsis-resize-detection strategy: '${this.resizeDetectionStrategy}'. Using 'resize-observer' instead`);case"resize-observer":case"":this.addElementResizeListener()}e&&"manual"!==this.resizeDetectionStrategy&&this.applyEllipsis()}addWindowResizeListener(){const e=this.renderer.listen("window","resize",()=>{this.ngZone.run(()=>{this.applyEllipsis()})});this.removeResizeListeners$.pipe(Object(T.a)(1)).subscribe(()=>e())}addElementResizeListener(){const e=new V(()=>{window.requestAnimationFrame(()=>{this.previousDimensions.width===this.elem.clientWidth&&this.previousDimensions.height===this.elem.clientHeight||(this.ngZone.run(()=>{this.applyEllipsis()}),this.previousDimensions.width=this.elem.clientWidth,this.previousDimensions.height=this.elem.clientHeight)})});e.observe(this.elem),this.removeResizeListeners$.pipe(Object(T.a)(1)).subscribe(()=>e.disconnect())}removeResizeListener(){this.removeResizeListeners$.next(),this.removeResizeListeners$.complete()}getTruncatedText(e){if(!this.originalText||this.originalText.length<=e)return this.originalText;const t=this.ellipsisSubstrFn(this.originalText,0,e);if("[]"===this.ellipsisWordBoundaries||this.originalText.charAt(e).match(this.ellipsisWordBoundaries))return t;let n=e-1;for(;n>0&&!t.charAt(n).match(this.ellipsisWordBoundaries);)n--;return this.ellipsisSubstrFn(t,0,n)}truncateText(e,t=!1){let n=this.getTruncatedText(e);const i=n.length,o=i!==this.originalText.length;return o&&!this.showMoreLink&&(n+=this.ellipsisCharacters),this.renderer.setProperty(this.innerElem,"textContent",n),o&&this.showMoreLink&&this.renderer.appendChild(this.innerElem,this.moreAnchor),this.destroyMoreClickListener&&(this.destroyMoreClickListener(),this.destroyMoreClickListener=null),t&&o&&(this.destroyMoreClickListener=this.renderer.listen(this.moreAnchor,"click",e=>{e.target&&"ngx-ellipsis-more"===e.target.className&&(e.preventDefault(),this.moreClickEmitter.emit(e))})),i}applyEllipsis(){this.removeResizeListener();const t=e.numericBinarySearch(this.originalText.length,e=>(this.truncateText(e),!this.isOverflowing)),n=this.truncateText(t,this.showMoreLink);this.addResizeListener(),this.changeEmitter.observers.length>0&&this.changeEmitter.emit(this.originalText.length===n?null:n)}get isOverflowing(){const e=this.elem.style.overflow;e&&"visible"!==e||(this.elem.style.overflow="hidden");const t=this.elem.clientWidth<this.elem.scrollWidth-1||this.elem.clientHeight<this.elem.scrollHeight-1;return this.elem.style.overflow=e,t}get showMoreLink(){return this.moreClickEmitter.observers.length>0}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(o.l),o.Pb(o.E),o.Pb(o.z),o.Pb(o.B))},e.\u0275dir=o.Kb({type:e,selectors:[["","ellipsis",""]],inputs:{ellipsisContent:["ellipsis-content","ellipsisContent"],ellipsisCharacters:["ellipsis","ellipsisCharacters"],ellipsisWordBoundaries:["ellipsis-word-boundaries","ellipsisWordBoundaries"],ellipsisSubstrFn:["ellipsis-substr-fn","ellipsisSubstrFn"],resizeDetectionStrategy:["ellipsis-resize-detection","resizeDetectionStrategy"]},outputs:{moreClickEmitter:"ellipsis-click-more",changeEmitter:"ellipsis-change"},exportAs:["ellipsis"],features:[o.zb]}),e})(),R=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[]]}),e})();var D=n("PCNd"),B=n("PVj+"),S=n("WO2E"),k=n("quSY"),O=n("LRne"),_=n("eIep"),L=n("pLZG"),A=n("vkgz"),F=n("un/a"),P=n("JIr8"),N=n("k0Of"),j=n("AyGX"),W=n("5+WD"),$=n("/CWu"),q=n("KOvB"),Q=n("sYmb"),H=n("eQPh"),G=n("rd7j"),z=n("0xbw"),J=n("o6Md"),K=n("1kSV"),Y=n("ZBji"),X=n("v+w0"),Z=n("OoQV"),ee=n("6NWb"),te=n("3Pt+"),ne=n("nYR2");const ie=["input"],oe=["errorModal"];function ce(e,t){if(1&e&&o.Qb(0,"img",9),2&e){const e=o.lc();o.Qc("max-width",e.size+e.sizeUnit)("max-height",e.size+e.sizeUnit),o.Gb("t-image-round",e.isRound),o.sc("src",e.dataUrl,o.Kc)}}function re(e,t){if(1&e&&o.Qb(0,"fa-icon",10),2&e){const e=o.lc();o.Qc("font-size",e.placeholderFontSize+"rem"),o.sc("icon",e.icon)}}function se(e,t){if(1&e&&(o.Qb(0,"fa-icon",11),o.mc(1,"translate")),2&e){const e=o.lc();o.Qc("font-size",e.errorSize,"rem"),o.sc("title",o.nc(1,3,"Error_FailedToLoadImage"))}}function le(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",12),o.Vb(1,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc().onEdit()})),o.Qb(2,"fa-icon",14),o.Ub(),o.Vb(3,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc().onDelete()})),o.Qb(4,"fa-icon",15),o.Ub(),o.Ub()}}const ae=function(e){return{maxSize:e}};function ue(e,t){if(1&e&&(o.Vb(0,"div",16),o.Vb(1,"h5",17),o.Qb(2,"fa-icon",18),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",19),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(6,"span",20),o.Tc(7,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",21),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Vb(11,"div",22),o.Vb(12,"button",23),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(13,"fa-icon",24),o.Tc(14),o.mc(15,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,3,"Error")," "),o.Bb(6),o.Vc(" ",o.oc(10,5,"Error_ImageExceedsTheMaximumSizeOfX",o.wc(10,ae,e.maxSize/1048576))," "),o.Bb(5),o.Vc(" \xa0",o.nc(15,8,"Dismiss")," ")}}var de=function(e){return e[e.loading=1]="loading",e[e.loaded=2]="loaded",e[e.error=3]="error",e}({});let be=(()=>{class e{constructor(e,t,n,i,o){this.api=e,this.workspace=t,this.cdr=n,this.storage=i,this.modalService=o,this.shape="square",this.icon="user",this.size=90,this.sizeUnit="px",this.isEdit=!1,this.notifyCancel$=new E.a,this._value=null,this.dataUrl=null,this.maxSize=5242880,this.isDisabled=!1,this.onChange=e=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.notifyUpdate$=new E.a,this.notifyUpdate$.pipe(Object(_.a)(()=>{const e=this.doUpdate();return this.cdr.markForCheck(),e})).subscribe()}writeValue(e){e||""===e||(e=null),this._value!==e&&(this._value=e,this._metadataPrefix="data:image/jpeg;base64,",this.update())}registerOnChange(e){this.onChange=t=>{e(t),this.onTouched()}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}ngOnInit(){this.update(),this._subscription=this.workspace.stateChanged$.subscribe({next:()=>{this.cdr.markForCheck()}})}ngOnDestroy(){this.notifyCancel$.next(),this._subscription&&this._subscription.unsubscribe()}ngOnChanges(e){const t=[e.src,e.imageId],n=t.some(e=>!!e),i=t.some(e=>!!e&&!e.isFirstChange());n&&(i&&this.ngOnDestroy(),e.src&&(this._src=e.src.currentValue),e.imageId&&(this._imageId=e.imageId.currentValue),i&&this.ngOnInit())}update(){this.notifyUpdate$.next()}doUpdate(){if(this._value)return this.status=de.loaded,this.dataUrl=this._metadataPrefix+","+this._value,Object(O.a)();if(""===this._value)return this.status=de.loaded,this.dataUrl=null,Object(O.a)();if(this._src&&this._imageId){const e=this._src,t=this._imageId,n=`${this.workspace.ws.tenantId}/${e}`,i=this.storage.getItem(n),o=i?JSON.parse(i):null;return o&&o.imageId===t?(this.status=de.loaded,this.dataUrl=o.dataUrl,Object(O.a)()):(i&&this.storage.removeItem(n),this.status=de.loading,this.api.getImage(e,t,this.notifyCancel$).pipe(Object(_.a)(e=>Object(N.l)(e.image).pipe(Object(A.a)(i=>{this.status=de.loaded,this.dataUrl=i,this.storage.setItem(n,JSON.stringify({imageId:e.imageId||t,dataUrl:i}))}))),Object(P.a)(e=>(404===e.status?(this.status=de.loaded,this.dataUrl=null):this.status=de.error,Object(O.a)(null))),Object(ne.a)(()=>this.cdr.markForCheck())))}return this._src&&this.storage.removeItem(`${this.workspace.ws.tenantId}/${this._src}`),this.status=de.loaded,this.dataUrl=null,Object(O.a)()}get showIcon(){return!this.dataUrl&&this.status===de.loaded}get showImg(){return this.dataUrl&&this.status===de.loaded}get showEditControls(){return this.isEdit}get showError(){return this.status===de.error}get isRound(){return"circle"===this.shape}get placeholderFontSize(){return this.size/90*3.2}onEdit(){this.input.nativeElement.click()}onDelete(){this.canDelete&&(this._value="",this.onChange(this._value),this.update())}get canDelete(){return!!this.dataUrl||this.status===de.error}onFileSelected(e){const t=e.files;if(!t||0===t.length)return;const n=t[0];e.value="",n.size>this.maxSize?this.modalService.open(this.errorModal):Object(N.l)(n).subscribe(e=>{const t=e.indexOf(",");this._metadataPrefix=e.substr(0,t),this._value=e.substr(t+1),this.onChange(this._value),this.update()},e=>{console.error(e)})}get errorSize(){return this.size/90*3}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(J.a),o.Pb(B.m),o.Pb(o.h),o.Pb(z.a),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-image"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(ie,!0),o.Oc(oe,!0)),2&e&&(o.Ec(n=o.ic())&&(t.input=n.first),o.Ec(n=o.ic())&&(t.errorModal=n.first))},inputs:{shape:"shape",icon:"icon",size:"size",sizeUnit:"sizeUnit",isEdit:"isEdit",src:"src",imageId:"imageId"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.zb],decls:10,vars:10,consts:[[1,"t-image"],[1,"d-flex","align-items-center","justify-content-center","w-100","h-100"],["alt","","alt","Picture",3,"src","t-image-round","max-width","max-height",4,"ngIf"],["class","t-image-placeholder",3,"icon","font-size",4,"ngIf"],["class","text-danger","icon","exclamation","style","font-size: 1.5rem",3,"font-size","title",4,"ngIf"],["class","t-image-controls w-100",4,"ngIf"],["type","file","accept",".jpg,.jpeg,.bmp,.png,.jfif",1,"d-none",3,"change"],["input",""],["errorModal",""],["alt","","alt","Picture",3,"src"],[1,"t-image-placeholder",3,"icon"],["icon","exclamation",1,"text-danger",2,"font-size","1.5rem",3,"title"],[1,"t-image-controls","w-100"],[1,"btn","btn-primary","p-0","pr-1","pl-1","w-50",3,"click"],["icon","pen"],["icon","trash"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",0),o.Vb(1,"div",1),o.Rc(2,ce,1,7,"img",2),o.Rc(3,re,1,3,"fa-icon",3),o.Rc(4,se,2,5,"fa-icon",4),o.Ub(),o.Rc(5,le,5,0,"div",5),o.Ub(),o.Vb(6,"input",6,7),o.hc("change",(function(){o.Ic(e);const n=o.Fc(7);return t.onFileSelected(n)})),o.Ub(),o.Rc(8,ue,16,12,"ng-template",null,8,o.Sc)}2&e&&(o.Qc("width",t.size+t.sizeUnit)("height",t.size+t.sizeUnit),o.Gb("t-image-round",t.isRound),o.Bb(2),o.sc("ngIf",t.showImg),o.Bb(1),o.sc("ngIf",t.showIcon),o.Bb(1),o.sc("ngIf",t.showError),o.Bb(1),o.sc("ngIf",t.showEditControls))},directives:[x.u,ee.b],pipes:[Q.d],styles:[".t-image-placeholder[_ngcontent-%COMP%]{color:#d3d3d3}.t-image-controls[_ngcontent-%COMP%]{height:23px;margin-top:-23px}@media (min-width:768px){.t-image-controls[_ngcontent-%COMP%]{opacity:0;transition:opacity .1s ease}.t-image[_ngcontent-%COMP%]:hover   .t-image-controls[_ngcontent-%COMP%]{opacity:1}}.t-image-round[_ngcontent-%COMP%]{border-radius:50%}"],changeDetection:0}),e})();var fe=n("r3gP"),me=n("f3yp"),ge=n("EoPe"),pe=n("AYjT"),he=n("2I7G"),ve=n("mrGz"),Ie=n("Kp4E");let ye=(()=>{class e{constructor(e,t){this.workspace=e,this.translate=t,this._markForCheck=!0,this._subscriptions=new k.a,this._subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.markForCheck()})),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>{this._wsTimeFormat&&this._wsTimeFormat!==this.workspace.timeFormat&&this.markForCheck()}}))}markForCheck(){this._markForCheck=!0}ngOnDestroy(){this._subscriptions&&this._subscriptions.unsubscribe()}transform(e,t){return(this._markForCheck||this._isoDate!==e||this._granularity!==t)&&(this._markForCheck=!1,this._isoDate=e,this._granularity=t,this._wsTimeFormat=this.workspace.timeFormat,this._formattedValue=Object(Ie.c)(e,this.workspace,this.translate,t)),this._formattedValue}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275pipe=o.Ob({name:"timeFormat",type:e,pure:!1}),e})(),we=(()=>{class e{constructor(e,t){this.workspace=e,this.translate=t,this._markForCheck=!0,this._subscriptions=new k.a,this._subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.markForCheck()})),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>{this._wsCalendar&&this._wsCalendar!==this.workspace.calendar&&this.markForCheck(),this._wsDateFormat&&this._wsDateFormat!==this.workspace.dateFormat&&this.markForCheck(),this._wsTimeFormat&&this._wsTimeFormat!==this.workspace.timeFormat&&this.markForCheck()}}))}markForCheck(){this._markForCheck=!0}ngOnDestroy(){this._subscriptions&&this._subscriptions.unsubscribe()}transform(e,t,n){return(this._markForCheck||this._isoDate!==e||this._calendar!==t||this._granularity!==n)&&(this._markForCheck=!1,this._isoDate=e,this._calendar=t,this._granularity=n,this._wsCalendar=this.workspace.calendar,this._wsDateFormat=this.workspace.dateFormat,this._wsTimeFormat=this.workspace.timeFormat,this._formattedValue=Object(Ie.b)(e,this.workspace,this.translate,t,n)),this._formattedValue}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275pipe=o.Ob({name:"datetimeFormat",type:e,pure:!1}),e})();const Ce=["myAccountModal"],Me=["inboxModal"],Ve=["favoriteModal"];function Te(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",39),o.hc("click",(function(){o.Ic(e);const t=o.lc();return t.onCollapse(),t.nav.onBack()})),o.Qb(1,"fa-icon",40),o.Ub()}if(2&e){const e=o.lc();o.sc("disabled",!e.nav.canBack),o.Bb(1),o.sc("flip",e.flip)}}function Ee(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",39),o.hc("click",(function(){o.Ic(e);const t=o.lc();return t.onCollapse(),t.nav.onForward()})),o.Qb(1,"fa-icon",41),o.Ub()}if(2&e){const e=o.lc();o.sc("disabled",!e.nav.canForward),o.Bb(1),o.sc("flip",e.flip)}}function xe(e,t){1&e&&o.Rb(0)}function Ue(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",42),o.Vb(1,"button",43),o.hc("click",(function(){return o.Ic(e),o.lc().onModalInbox()})),o.Rc(2,xe,1,0,"ng-container",44),o.Ub(),o.Ub()}if(2&e){o.lc();const e=o.Fc(57);o.Bb(2),o.sc("ngTemplateOutlet",e)}}function Re(e,t){if(1&e&&(o.Vb(0,"div",49),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc();o.Bb(1),o.Vc(" ",t.ws.getMultilingualValueImmediate(e,"label")," ")}}function De(e,t){1&e&&o.Qb(0,"div",50)}function Be(e,t){if(1&e){const e=o.Wb();o.Vb(0,"li",45),o.Vb(1,"button",46),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc().onClickFavorite(n.url)})),o.Tc(2),o.Ub(),o.Rc(3,Re,2,1,"div",47),o.Rc(4,De,1,0,"div",48),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(),i=o.Fc(16);o.sc("tContextMenu",i)("tContext",e),o.Bb(2),o.Vc(" ",n.ws.getMultilingualValueImmediate(e,"label")," ")}}function Se(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",51),o.Vb(1,"ul",52),o.Vb(2,"li",53),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.close;return o.lc().onEditFavorite(n),i()})),o.Vb(3,"div",54),o.Qb(4,"fa-icon",55),o.Ub(),o.Vb(5,"div",56),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Vb(8,"li",53),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.close;return o.lc().onDeleteFavorite(n),i()})),o.Vb(9,"div",54),o.Qb(10,"fa-icon",57),o.Ub(),o.Vb(11,"div",56),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}2&e&&(o.Bb(6),o.Vc(" ",o.nc(7,2,"Edit")," "),o.Bb(6),o.Vc(" ",o.nc(13,4,"Delete")," "))}function ke(e,t){1&e&&o.Rb(0)}function Oe(e,t){1&e&&o.Qb(0,"t-spinner",3),2&e&&o.sc("scale",1)}function _e(e,t){1&e&&o.Rb(0)}function Le(e,t){1&e&&o.Rb(0)}const Ae=function(){return{state_key:"navinbox"}},Fe=function(e,t){return[e,t]},Pe=function(e){return{id:e}};function Ne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",67),o.hc("click",(function(){return o.Ic(e),o.lc(),o.Fc(1).close()})),o.Rc(1,Le,1,0,"ng-container",68),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2),i=o.Fc(59);o.Gb("bg-light",n.c[e].OpenedAt),o.sc("routerLink",o.xc(6,Fe,"/app/"+n.tenantId+"/documents/"+(null==n.docs[e]?null:n.docs[e].DefinitionId)+"/"+(null==e?null:e.toString()),o.vc(5,Ae))),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.wc(9,Pe,e))}}function je(e,t){1&e&&o.Rb(0)}const We=function(e){return{closable:e}};function $e(e,t){if(1&e&&(o.Vb(0,"div",69),o.Rc(1,je,1,0,"ng-container",68),o.Ub()),2&e){o.lc();const e=o.Fc(1);o.lc();const t=o.Fc(63);o.Bb(1),o.sc("ngTemplateOutlet",t)("ngTemplateOutletContext",o.wc(2,We,e))}}function qe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"li",58,59),o.hc("openChange",(function(t){return o.Ic(e),o.lc().onDropdownInbox(t)})),o.Vb(2,"button",60),o.Rc(3,ke,1,0,"ng-container",44),o.Ub(),o.Vb(4,"div",61),o.Vb(5,"div",62),o.Vb(6,"div"),o.Tc(7),o.mc(8,"translate"),o.Rc(9,Oe,1,1,"t-spinner",63),o.Ub(),o.Vb(10,"a",64),o.hc("click",(function(){return o.Ic(e),o.Fc(1).close()})),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Ub(),o.Rc(13,_e,1,0,"ng-container",44),o.Rc(14,Ne,2,11,"button",65),o.Rc(15,$e,2,4,"div",66),o.Ub(),o.Ub()}if(2&e){const e=o.lc(),t=o.Fc(57),n=o.Fc(61);o.Bb(3),o.sc("ngTemplateOutlet",t),o.Bb(1),o.Gb("dropdown-menu-right",!e.isRtl),o.Bb(3),o.Vc("",o.nc(8,10,"Inbox"),"\xa0"),o.Bb(2),o.sc("ngIf",e.showInboxSpinner),o.Bb(1),o.sc("routerLink","/app/"+e.tenantId+"/inbox"),o.Bb(1),o.Uc(o.nc(12,12,"SeeAll")),o.Bb(2),o.sc("ngTemplateOutlet",n),o.Bb(1),o.sc("ngForOf",e.ids),o.Bb(1),o.sc("ngIf",e.showSeeAll)}}function Qe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",29),o.hc("click",(function(){o.Ic(e);const t=o.lc(2);return t.onPrimary(),t.onCollapse()})),o.Tc(1),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(1),o.Vc(" ",null==e.settings?null:e.settings.PrimaryLanguageName," ")}}function He(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",29),o.hc("click",(function(){o.Ic(e);const t=o.lc(2);return t.onSecondary(),t.onCollapse()})),o.Tc(1),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(1),o.Vc(" ",null==e.settings?null:e.settings.SecondaryLanguageName," ")}}function Ge(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",29),o.hc("click",(function(){o.Ic(e);const t=o.lc(2);return t.onTernary(),t.onCollapse()})),o.Tc(1),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(1),o.Vc(" ",null==e.settings?null:e.settings.TernaryLanguageName," ")}}function ze(e,t){if(1&e&&(o.Tb(0),o.Qb(1,"hr"),o.Rc(2,Qe,2,1,"button",70),o.Rc(3,He,2,1,"button",70),o.Rc(4,Ge,2,1,"button",70),o.Sb()),2&e){const e=o.lc();o.Bb(2),o.sc("ngIf",!e.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!e.ws.isSecondaryLanguage&&!(null==e.settings||!e.settings.SecondaryLanguageId)),o.Bb(1),o.sc("ngIf",!e.ws.isTernaryLanguage&&!(null==e.settings||!e.settings.TernaryLanguageId))}}function Je(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",29),o.hc("click",(function(){o.Ic(e);const t=o.lc(2);return t.onPrimaryCalendar(),t.onCollapse()})),o.Tc(1),o.mc(2,"translate"),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(1),o.Vc(" ",o.nc(2,1,"Calendar_"+(null==e.settings?null:e.settings.PrimaryCalendar))," ")}}function Ke(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",29),o.hc("click",(function(){o.Ic(e);const t=o.lc(2);return t.onSecondaryCalendar(),t.onCollapse()})),o.Tc(1),o.mc(2,"translate"),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(1),o.Vc(" ",o.nc(2,1,"Calendar_"+(null==e.settings?null:e.settings.SecondaryCalendar))," ")}}function Ye(e,t){if(1&e&&(o.Tb(0),o.Qb(1,"hr"),o.Rc(2,Je,3,3,"button",70),o.Rc(3,Ke,3,3,"button",70),o.Sb()),2&e){const e=o.lc();o.Bb(2),o.sc("ngIf",!e.ws.isPrimaryCalendar),o.Bb(1),o.sc("ngIf",!e.ws.isSecondaryCalendar)}}function Xe(e,t){if(1&e&&(o.Vb(0,"div",74),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Qc("border-color",null==e.settings?null:e.settings.BrandColor),o.Bb(1),o.Vc(" ",e.unknownInboxCountDisplay," ")}}function Ze(e,t){if(1&e&&(o.Vb(0,"div",71),o.Qb(1,"fa-icon",72),o.Rc(2,Xe,2,3,"div",73),o.Ub(),o.Vb(3,"div"),o.Tc(4),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.sc("ngIf",e.unknownInboxCountDisplay),o.Bb(2),o.Vc("\xa0\xa0",e.inboxCountDisplay,"")}}function et(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().id,t=o.lc();o.Bb(1),o.Uc(" - "+t.docs[e].Memo)}}function tt(e,t){if(1&e&&(o.Vb(0,"div",84),o.Tc(1),o.Ub()),2&e){const e=o.lc().id,t=o.lc();o.Bb(1),o.Uc('"'+t.c[e].Comment+'"')}}function nt(e,t){if(1&e&&(o.Vb(0,"div",75),o.Qb(1,"t-image",22),o.Qb(2,"div",76),o.Vb(3,"div",77),o.Vb(4,"div",78),o.Vb(5,"div",79),o.Tc(6),o.Ub(),o.Vb(7,"div",80),o.Tc(8),o.mc(9,"timeFormat"),o.mc(10,"datetimeFormat"),o.Ub(),o.Ub(),o.Vb(11,"div",81),o.Qb(12,"t-auto-cell",82),o.Rc(13,et,2,1,"span",30),o.Ub(),o.Rc(14,tt,2,1,"div",83),o.Ub(),o.Ub()),2&e){const e=t.id,i=o.lc();var n;const c=null==(n=i.ws.get("User",i.c[e].CreatedById))?null:n.ImageId;o.Bb(1),o.sc("src","users/"+i.c[e].CreatedById+"/image")("imageId",c)("size",32),o.Bb(5),o.Vc(" ",i.ws.getMultilingualValue("User",i.c[e].CreatedById,"Name")," "),o.Bb(2),o.Vc(" ",i.isToday(i.c[e].CreatedAt)?o.nc(9,9,i.c[e].CreatedAt):o.nc(10,11,i.c[e].CreatedAt)," "),o.Bb(4),o.sc("definitionId",i.docs[e].DefinitionId)("entity",i.docs[e]),o.Bb(1),o.sc("ngIf",i.docs[e].Memo),o.Bb(1),o.sc("ngIf",i.c[e].Comment)}}function it(e,t){1&e&&(o.Vb(0,"div",86),o.Qb(1,"fa-icon",87),o.Tc(2),o.mc(3,"translate"),o.Ub()),2&e&&(o.Bb(2),o.Vc("\xa0\xa0\xa0",o.nc(3,1,"EmptyInboxMessage")," "))}function ot(e,t){if(1&e&&o.Rc(0,it,4,3,"div",85),2&e){const e=o.lc();o.sc("ngIf",e.showEmptyInboxMessage)}}function ct(e,t){if(1&e&&(o.Vb(0,"a",64),o.hc("click",(function(){return t.closable.close()})),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc();o.sc("routerLink","/app/"+e.tenantId+"/inbox"),o.Bb(1),o.Uc(o.nc(2,2,"SeeAll"))}}function rt(e,t){1&e&&o.Qb(0,"t-spinner",3),2&e&&o.sc("scale",1)}function st(e,t){1&e&&o.Rb(0)}function lt(e,t){1&e&&o.Rb(0)}function at(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",95),o.hc("click",(function(){return o.Ic(e),o.lc().$implicit.close()})),o.Rc(1,lt,1,0,"ng-container",68),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2),i=o.Fc(59);o.Gb("bg-light",n.c[e].OpenedAt),o.sc("routerLink",o.xc(6,Fe,"/app/"+n.tenantId+"/documents/"+(null==n.docs[e]?null:n.docs[e].DefinitionId)+"/"+(null==e?null:e.toString()),o.vc(5,Ae))),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.wc(9,Pe,e))}}function ut(e,t){1&e&&o.Rb(0)}function dt(e,t){if(1&e&&(o.Vb(0,"div",96),o.Rc(1,ut,1,0,"ng-container",68),o.Ub()),2&e){const e=o.lc().$implicit;o.lc();const t=o.Fc(63);o.Bb(1),o.sc("ngTemplateOutlet",t)("ngTemplateOutletContext",o.wc(2,We,e))}}function bt(e,t){if(1&e&&(o.Vb(0,"div",88),o.Vb(1,"h5",89),o.Tc(2),o.mc(3,"translate"),o.Rc(4,rt,1,1,"t-spinner",63),o.Ub(),o.Vb(5,"button",90),o.hc("click",(function(){return t.$implicit.dismiss(!1)})),o.Vb(6,"span",91),o.Tc(7,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",92),o.Rc(9,st,1,0,"ng-container",44),o.Rc(10,at,2,11,"button",93),o.Rc(11,dt,2,4,"div",94),o.Ub()),2&e){const e=o.lc(),t=o.Fc(61);o.Bb(2),o.Vc(" ",o.nc(3,5,"Inbox")+" ("+e.inboxCountDisplay+")","\xa0"),o.Bb(2),o.sc("ngIf",e.showInboxSpinner),o.Bb(5),o.sc("ngTemplateOutlet",t),o.Bb(1),o.sc("ngForOf",e.ids),o.Bb(1),o.sc("ngIf",e.showSeeAll)}}const ft=function(){return{updateOn:"blur"}};function mt(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",111),o.mc(1,"translate"),o.Vb(2,"t-text-editor",114),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).myUser.Name2=t})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.sc("label",o.nc(1,4,"Name")+e.ws.secondaryPostfix)("serverErrors",null==e.myUser||null==e.myUser.serverErrors?null:e.myUser.serverErrors.Name2),o.Bb(2),o.sc("ngModel",e.myUser.Name2)("ngModelOptions",o.vc(6,ft))}}function gt(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",111),o.mc(1,"translate"),o.Vb(2,"t-text-editor",114),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).myUser.Name3=t})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.sc("label",o.nc(1,4,"Name")+e.ws.ternaryPostfix)("serverErrors",null==e.myUser||null==e.myUser.serverErrors?null:e.myUser.serverErrors.Name3),o.Bb(2),o.sc("ngModel",e.myUser.Name3)("ngModelOptions",o.vc(6,ft))}}function pt(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",105),o.Vb(1,"t-form-group",106),o.Vb(2,"h2",107),o.Tc(3),o.Ub(),o.Ub(),o.Vb(4,"div",108),o.Vb(5,"div",109),o.Vb(6,"t-image",110),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).myUser.Image=t})),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"t-form-group",111),o.mc(8,"translate"),o.Vb(9,"t-text-editor",112),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).myUser.Name=t})),o.Ub(),o.Ub(),o.Rc(10,mt,3,7,"t-form-group",113),o.Rc(11,gt,3,7,"t-form-group",113),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(3),o.Uc(e.myEmail),o.Bb(3),o.sc("src","users/"+e.ws.userSettings.UserId+"/image")("imageId",e.myImageId)("ngModel",e.myUser.Image)("isEdit",!0)("size",70),o.Bb(1),o.sc("label",o.nc(8,12,"Name")+e.ws.primaryPostfix)("serverErrors",null==e.myUser||null==e.myUser.serverErrors?null:e.myUser.serverErrors.Name),o.Bb(2),o.sc("ngModel",e.myUser.Name)("ngModelOptions",o.vc(14,ft)),o.Bb(1),o.sc("ngIf",e.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",e.ws.settings.TernaryLanguageId)}}function ht(e,t){if(1&e&&(o.Vb(0,"t-error-message"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Vc(" ",e.saveErrorMessage," ")}}function vt(e,t){if(1&e&&(o.Vb(0,"t-error-message"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Vc(" ",e.errorMessage," ")}}function It(e,t){1&e&&(o.Vb(0,"div",115),o.Qb(1,"t-spinner",3),o.Ub()),2&e&&(o.Bb(1),o.sc("scale",2))}const yt=function(e){return{placeholder:e}};function wt(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",88),o.Vb(1,"h5",89),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",90),o.hc("click",(function(){return t.$implicit.dismiss(!1)})),o.Vb(5,"span",91),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",97),o.Rc(8,pt,12,15,"div",98),o.Rc(9,ht,2,1,"t-error-message",30),o.Rc(10,vt,2,1,"t-error-message",30),o.Rc(11,It,2,1,"div",99),o.Ub(),o.Vb(12,"div",100),o.Vb(13,"button",101),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc().onSave(n)})),o.Qb(14,"fa-icon",102),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Vb(17,"button",103),o.hc("click",(function(){return t.$implicit.close(!1)})),o.Qb(18,"fa-icon",104),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.oc(3,8,"My0Account",o.wc(15,yt,e.companyName))," "),o.Bb(6),o.sc("ngIf",e.isMyUserLoaded),o.Bb(1),o.sc("ngIf",e.isMyUserLoaded&&!!e.saveErrorMessage),o.Bb(1),o.sc("ngIf",e.isMyUserError),o.Bb(1),o.sc("ngIf",e.isMyUserLoading),o.Bb(2),o.sc("disabled",!e.canSave),o.Bb(2),o.Vc(" \xa0",o.nc(16,11,"Save")," "),o.Bb(4),o.Vc(" \xa0",o.nc(20,13,"Cancel")," ")}}function Ct(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",120),o.mc(1,"translate"),o.Vb(2,"t-text-editor",122),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).favoriteToSave.label2=t})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.sc("label",o.nc(1,3,"Label")+e.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",e.favoriteToSave.label2)("focusIf",!0)}}function Mt(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",120),o.mc(1,"translate"),o.Vb(2,"t-text-editor",122),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).favoriteToSave.label3=t})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.sc("label",o.nc(1,3,"Label")+e.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",e.favoriteToSave.label3)("focusIf",!0)}}function Vt(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Ct,3,5,"t-form-group",124),o.Rc(2,Mt,3,5,"t-form-group",124),o.Sb()),2&e){const e=o.lc(2);o.Bb(1),o.sc("ngIf",!!e.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!!e.ws.settings.TernaryLanguageId)}}function Tt(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",88),o.Vb(1,"h5",89),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"div",116),o.Vb(5,"label",117),o.hc("click",(function(){return o.Ic(e),o.lc().onBasicFavoriteEditMode()})),o.mc(6,"translate"),o.Qb(7,"input",118),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Vb(10,"label",117),o.hc("click",(function(){return o.Ic(e),o.lc().onAdvancedFavoriteEditMode()})),o.mc(11,"translate"),o.Qb(12,"input",118),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub(),o.Vb(15,"button",90),o.hc("click",(function(){return t.$implicit.dismiss(!1)})),o.Vb(16,"span",91),o.Tc(17,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(18,"div",119),o.Vb(19,"t-form-group",120),o.mc(20,"translate"),o.Vb(21,"t-text-editor",121),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().favoriteToSave.url=t})),o.Ub(),o.Ub(),o.Vb(22,"t-form-group",120),o.mc(23,"translate"),o.Vb(24,"t-text-editor",122),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().favoriteToSave.label=t})),o.Ub(),o.Ub(),o.Rc(25,Vt,3,2,"ng-container",30),o.Ub(),o.Vb(26,"div",100),o.Vb(27,"button",101),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(28,"fa-icon",102),o.Tc(29),o.mc(30,"translate"),o.Ub(),o.Vb(31,"button",123),o.hc("click",(function(){return t.$implicit.close(!1)})),o.Qb(32,"fa-icon",104),o.Tc(33),o.mc(34,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,18,"EditFavorite"),"\xa0\xa0\xa0"),o.Bb(3),o.Gb("active",e.isBasic),o.tc("title",o.nc(6,20,"Basic")),o.Bb(3),o.Vc(" ",o.nc(9,22,"Basic")," "),o.Bb(2),o.Gb("active",e.isAdvanced),o.tc("title",o.nc(11,24,"Advanced")),o.Bb(3),o.Vc(" ",o.nc(14,26,"Advanced")," "),o.Bb(6),o.sc("label",o.nc(20,28,"URL")),o.Bb(2),o.sc("ngModel",e.favoriteToSave.url),o.Bb(1),o.sc("label",o.nc(23,30,"Label")+(e.isAdvanced?e.ws.primaryPostfix:"")),o.Bb(2),o.sc("ngModel",e.favoriteToSave.label)("focusIf",!0),o.Bb(1),o.sc("ngIf",e.isAdvanced),o.Bb(2),o.sc("disabled",!(null!=e.favoriteToSave&&e.favoriteToSave.url&&null!=e.favoriteToSave&&e.favoriteToSave.label)),o.Bb(2),o.Vc(" \xa0",o.nc(30,32,"Save")," "),o.Bb(4),o.Vc(" \xa0",o.nc(34,34,"Cancel")," ")}}let Et=(()=>{class e{constructor(e,t,n,i,o,c,r,s,l,a,u,d){this.workspace=e,this.nav=t,this.router=n,this.translate=i,this.progress=o,this.auth=c,this.storage=r,this.api=s,this.document=l,this.modalService=a,this.notificationsService=u,this.userSettings=d,this.isCollapsed=!0,this._subscriptions=new k.a,this.notifyDestruct$=new E.a,this.usersApi=this.api.usersApi(this.notifyDestruct$),this.inboxCrud=this.api.crudFactory("inbox",this.notifyDestruct$),this.inboxApi=this.api.inboxApi(this.notifyDestruct$),this.inboxStateKey="navinbox",this._favorites=[],this.favoriteMode="basic"}ngOnInit(){this.notifyFetch$=new E.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(_.a)(()=>this.doFetch())).subscribe()),this.notifySavePreferredCalendar$=new E.a,this._subscriptions.add(this.notifySavePreferredCalendar$.pipe(Object(_.a)(e=>this.doSavePreferredCalendar(e))).subscribe()),this._subscriptions.add(this.notificationsService.inboxChanged$.pipe(Object(L.a)(e=>e.UpdateInboxList),Object(_.a)(e=>this.doFetchInbox(e.Count))).subscribe()),this.restrictToCompanyLanguages(),this._subscriptions.add(this.workspace.stateChanged$.subscribe(()=>this.restrictToCompanyLanguages()))}ngOnDestroy(){this.notifyDestruct$.next(),this._subscriptions&&this._subscriptions.unsubscribe();const e=this.document.documentElement.lang||"en",t=this.storage.getItem("user_culture")||e;this.translate.use(t)}restrictToCompanyLanguages(){const e=this.settings.PrimaryLanguageId,t=this.settings.SecondaryLanguageId,n=this.settings.TernaryLanguageId,i=this.translate.currentLang;if(i!==e&&i!==t&&i!==n){const i=this.ws.userSettings.PreferredLanguage;this.translate.use(!i||i!==e&&i!==t&&i!==n?e:i)}}onSetLanguage(e){this.translate.use(e),this.storage.setItem("user_culture",e)}onSetCalendar(e){const t=this.ws,n=JSON.parse(JSON.stringify(t.userSettings));n.PreferredCalendar=e,t.userSettings=n,t.notifyStateChanged(),this.notifySavePreferredCalendar$.next(e)}doSavePreferredCalendar(e){const t=this.workspace.currentTenant,n=this.workspace.ws.tenantId;return this.usersApi.saveUserPreferredCalendar(e).pipe(Object(A.a)(e=>{Object($.i)(e,n,t,this.storage)}),Object(F.a)(2),Object(P.a)(e=>(console.error(e),Object(O.a)(null))))}onToggleCollapse(){this.isCollapsed=!this.isCollapsed}onCollapse(){this.isCollapsed=!0}onPrimary(){this.onSetLanguage(this.settings.PrimaryLanguageId)}onSecondary(){this.onSetLanguage(this.settings.SecondaryLanguageId)}onTernary(){this.onSetLanguage(this.settings.TernaryLanguageId)}onPrimaryCalendar(){this.onSetCalendar(this.settings.PrimaryCalendar)}onSecondaryCalendar(){this.onSetCalendar(this.settings.SecondaryCalendar)}get settings(){return this.ws?this.ws.settings:null}get ws(){return this.workspace.currentTenant}get tenantId(){return this.workspace.ws.tenantId}get userName(){return this.ws.getMultilingualValueImmediate(this.ws.userSettings,"Name")}get companyName(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"ShortCompanyName")}get isRtl(){return this.workspace.ws.isRtl}onMySystemAccount(){location.href=S.b.identityAddress+"/identity/manage/"}onSignOut(){this.progress.startAsyncOperation("sign_out","RedirectingToSignOut"),this.auth.signOut()}get flip(){return this.isRtl?"horizontal":null}onMyCompanyAccount(){this.fetch(),this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.myAccountModal,{windowClass:"t-myuser-modal"}).result.then(()=>this.onMyCompanyAccountClose(),()=>this.onMyCompanyAccountClose())}fetch(){this.notifyFetch$.next(null)}doFetch(){return this.myUserStatus=B.c.loading,this.usersApi.getMyUser().pipe(Object(A.a)(e=>{Object(N.b)(e,this.workspace),this.myUserStatus=B.c.loaded,this.onEdit()}),Object(P.a)(e=>(this._errorMessage=e.error,this.myUserStatus=B.c.error,Object(O.a)(null))))}onEdit(){const e=this.ws.get("User",this.ws.userSettings.UserId);this.myUser={Name:e.Name,Name2:e.Name2,Name3:e.Name3,PreferredLanguage:e.PreferredLanguage}}onSave(e){this._errorMessage=null,this._saveErrorMessage=null,Object(j.c)(this.myUser),this.usersApi.saveMyUser(this.myUser).subscribe(t=>{Object(N.b)(t,this.workspace),e.close(!0)},e=>{if(422===e.status){const t=Object(j.b)(this.myUser,e.error);Object.keys(t).length>0&&console.error(t)}else this._saveErrorMessage=e.error;return Object(O.a)(null)})}onMyCompanyAccountClose(){this.workspace.ignoreKeyDownEvents=!1}get errorMessage(){return this._errorMessage}get saveErrorMessage(){return this._saveErrorMessage}get isMyUserLoaded(){return this.myUserStatus===B.c.loaded}get isMyUserError(){return this.myUserStatus===B.c.error}get isMyUserLoading(){return this.myUserStatus===B.c.loading}get myEmail(){return this.ws.get("User",this.ws.userSettings.UserId).Email}get myImageId(){return this.ws.get("User",this.ws.userSettings.UserId).ImageId}get canSave(){return this.isMyUserLoaded}get inboxCountDisplay(){const e=this.inboxCount;return Object(N.n)(e)?e>99?"99+":e.toString():"..."}get unknownInboxCountDisplay(){const e=this.unknownInboxCount;return e?e>99?"99+":e.toString():""}doFetchInbox(e){let t=this.inboxState;if(t.masterStatus=B.g.loading,e){const e=this.workspace.ws.tenantId;return this.inboxCrud.getEntities({silent:!0,top:25,skip:0,select:"Comment,CreatedAt,CreatedBy.Name,CreatedBy.Name2,CreatedBy.Name3,\n      CreatedBy.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",countEntities:!0}).pipe(Object(A.a)(n=>{t=this.inboxState,t.top=n.Top,t.skip=n.Skip,t.total=n.TotalCount,t.masterStatus=B.g.loaded,t.collectionName=n.CollectionName,t.flatIds=Object(N.c)(n,this.workspace);const i=n.ServerTime,o=n.TotalCount,c=Math.min(n.Extras.UnknownCount,n.TotalCount);this.notificationsService.handleFreshInboxCounts(e,i,o,c)}),Object(P.a)(e=>(t=this.inboxState,t.masterStatus=B.g.error,t.errorMessage=e.error,Object(O.a)(null))))}return t.total=e,t.masterStatus=B.g.loaded,t.flatIds=[],Object(O.a)()}get inboxCount(){const e=this.notificationsService.tenantState;return e?e.inbox.count:null}get unknownInboxCount(){const e=this.notificationsService.tenantState;return e?e.inbox.unknownCount:null}get showInboxSpinner(){return this.inboxState.masterStatus===B.g.loading}get showEmptyInboxMessage(){const e=this.inboxState;return e.masterStatus===B.g.loaded&&0===e.flatIds.length}get showSeeAll(){const e=this.inboxState;return e.flatIds.length<e.total}get inboxState(){const e=this.inboxStateKey,t=this.workspace.current.mdState;return t[e]||(t[e]=new B.e),t[e]}get ids(){return this.inboxState.flatIds}get c(){return this.workspace.currentTenant.InboxRecord}get docs(){return this.workspace.currentTenant.Document}isToday(e){const t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}checkInbox(){if(this.unknownInboxCount>0){this.notificationsService.tenantState.inbox.unknownCount=0;const e=this.ids[0];e&&this.inboxApi.check(this.c[e].CreatedAt).subscribe()}}onDropdownInbox(e){this.workspace.ignoreKeyDownEvents=e,e&&this.checkInbox()}onModalInbox(){this.workspace.ignoreKeyDownEvents=!0,this.checkInbox(),this.modalService.open(this.inboxModal,{windowClass:"t-inbox-modal"}).result.then(()=>this.workspace.ignoreKeyDownEvents=!1,()=>this.workspace.ignoreKeyDownEvents=!1)}get isMdScreen(){return this.workspace.mediumDevice}get favorites(){if(this._favoritesUserSettings!==this.ws.userSettings){this._favoritesUserSettings=this.ws.userSettings;let t=!1;const n=this.ws.userSettings.CustomSettings.favorites;if(n)try{this._favorites=JSON.parse(n),t=!0}catch(e){}t||(this._favorites=[])}return this._favorites}get isBasic(){return"basic"===this.favoriteMode}get isAdvanced(){return"advanced"===this.favoriteMode}onBasicFavoriteEditMode(){this.favoriteMode="basic"}onAdvancedFavoriteEditMode(){this.favoriteMode="advanced"}onToggleFavoriteEditMode(){this.favoriteMode="basic"===this.favoriteMode?"advanced":"basic"}removeUrlPrefix(e){if(e&&e.startsWith("/app/")){const t=e.split("/");return t.shift(),t.shift(),t.shift(),"/"+t.join("/")}return e}get urlPrefix(){return`/app/${this.workspace.ws.tenantId}`}onAddFavorite(){const e=this.removeUrlPrefix(this.router.url);if(!e)return;const t=this.favorites.findIndex(t=>t.url===e);this.onEditFavorite(t<0?{id:0,label:"",url:e}:this.favorites[t])}onEditFavorite(e){this.favoriteToSave=JSON.parse(JSON.stringify(e)),this.showEditFavoriteModal()}showEditFavoriteModal(){this.workspace.ignoreKeyDownEvents=!0,this.modalService.open(this.favoriteModal).result.then(e=>this.onCloseEditFavorite(e),()=>this.onCloseEditFavorite())}onCloseEditFavorite(e=!1){if(this.workspace.ignoreKeyDownEvents=!1,e){const e=this.favoriteToSave;0===e.id&&(e.id=this.maxId+1);const t=this.favorites.findIndex(t=>t.id===e.id);t<0?this.favorites.push(e):this.favorites[t]=e,this.saveFavorites()}delete this.favoriteToSave}onDeleteFavorite(e){this._favorites=this.favorites.filter(t=>t.id!==e.id),this.saveFavorites()}onDragDropFavorite(e){const t=this.favorites,n=this.workspace.ws.isRtl?t.length-e.currentIndex-1:e.currentIndex,i=e.previousIndex;i!==n&&(Object(W.i)(t,i,n),this.saveFavorites())}get maxId(){let e=0;for(const t of this.favorites)e<t.id&&(e=t.id);return e}saveFavorites(){const e=JSON.stringify(this.favorites);this.userSettings.save("favorites",e)}onClickFavorite(e){e=this.urlPrefix+this.removeUrlPrefix(e),this.onCollapse(),this.router.navigateByUrl(e)}get menuOrientation(){return this.isMdScreen?"horizontal":"vertical"}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(q.a),o.Pb(i.e),o.Pb(Q.e),o.Pb(H.a),o.Pb(G.b),o.Pb(z.a),o.Pb(J.a),o.Pb(x.e),o.Pb(K.t),o.Pb(Y.a),o.Pb(X.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-application-shell"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(Ce,!0),o.Oc(Me,!0),o.Oc(Ve,!0)),2&e&&(o.Ec(n=o.ic())&&(t.myAccountModal=n.first),o.Ec(n=o.ic())&&(t.inboxModal=n.first),o.Ec(n=o.ic())&&(t.favoriteModal=n.first))},decls:70,vars:48,consts:[[1,"d-flex","flex-column","h-100"],[1,"navbar","navbar-dark","t-dark","navbar-expand-md","p-0","align-items-md-stretch"],["routerLink","main-menu",1,"t-brand-link","t-navbar-button",3,"title"],[3,"scale"],[1,"mx-2","d-flex"],["class","t-navbar-button nav-link",3,"disabled","click",4,"ngIf"],["class","nav navbar-nav",4,"ngIf"],["type","button",1,"navbar-toggler","mx-2",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse","align-items-stretch",3,"ngbCollapse"],["cdkDropList","",1,"nav","navbar-nav","px-4","px-md-0","flex-nowrap","flex-grow-1","t-md-zero-width","overflow-auto",3,"cdkDropListOrientation","cdkDropListDropped"],["class","nav-item","cdkDrag","",3,"tContextMenu","tContext",4,"ngFor","ngForOf"],["favoriteMenu",""],[1,"nav","navbar-nav","flex-nowrap"],[1,"nav-item"],[1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center",3,"title","click"],["icon","star"],["class","nav-item","ngbDropdown","","container","",3,"openChange",4,"ngIf"],["ngbDropdown","","container","",1,"nav-item"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow"],[1,"align-self-center"],[1,"t-dp-wrapper","t-dp-dark","bg-white","mx-1"],["shape","circle",3,"src","imageId","size"],[1,"d-flex","flex-column","justify-content-center","align-self-center"],[2,"line-height","1.1rem"],[1,"small","font-weight-bold"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow","m-0"],["type","button","ngbDropdownItem","","routerLink","/root/companies",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","","routerLink","/root/welcome",1,"dropdown-item","btn-light",3,"click"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[4,"ngIf"],[1,"t-rest-of-screen","container-fluid"],["inboxButtonContent",""],["inboxEntryContent",""],["emptyInboxMessage",""],["seeAllLink",""],["inboxModal",""],["myAccountModal",""],["favoriteModal",""],[1,"t-navbar-button","nav-link",3,"disabled","click"],["icon","arrow-left",3,"flip"],["icon","arrow-right",3,"flip"],[1,"nav","navbar-nav"],[1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center",3,"click"],[4,"ngTemplateOutlet"],["cdkDrag","",1,"nav-item",3,"tContextMenu","tContext"],[1,"t-navbar-button","nav-link","d-flex","flex-column","justify-content-center","h-100","text-nowrap",3,"click"],["class","t-dark d-flex flex-column justify-content-center text-white p-2","style","height:50px",4,"cdkDragPreview"],["class","bg-secondary p-2","style","cursor: unset; width: 4rem",4,"cdkDragPlaceholder"],[1,"t-dark","d-flex","flex-column","justify-content-center","text-white","p-2",2,"height","50px"],[1,"bg-secondary","p-2",2,"cursor","unset","width","4rem"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","pen"],[1,"t-menu-text"],["icon","trash"],["ngbDropdown","","container","",1,"nav-item",3,"openChange"],["inboxDrop","ngbDropdown"],["ngbDropdownToggle","",1,"h-100","w-100","d-flex","t-navbar-button","t-no-arrow","small","align-items-center"],["ngbDropdownMenu","",1,"dropdown-menu","shadow","m-0","p-0",2,"width","27rem","max-height","30rem","overflow-y","auto"],[1,"px-2","py-1","border-bottom","d-flex","justify-content-between","t-slightly-bold"],[3,"scale",4,"ngIf"],[3,"routerLink","click"],["class","p-2 border-bottom t-inbox-item b","ngbDropdownItem","",3,"bg-light","routerLink","click",4,"ngFor","ngForOf"],["class","t-slightly-bold p-1 text-center",4,"ngIf"],["ngbDropdownItem","",1,"p-2","border-bottom","t-inbox-item","b",3,"routerLink","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"t-slightly-bold","p-1","text-center"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],[2,"position","relative"],["icon","inbox",2,"font-size","1.1rem"],["class","badge badge-danger t-notification-badge",3,"border-color",4,"ngIf"],[1,"badge","badge-danger","t-notification-badge"],[1,"d-flex"],[1,"px-1"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","font-weight-bold"],[1,"text-muted"],[1,"text-truncate","text-muted"],["collection","Document",3,"definitionId","entity"],["class","text-wrap",4,"ngIf"],[1,"text-wrap"],["class","p-2 my-2 alert-success text-center",4,"ngIf"],[1,"p-2","my-2","alert-success","text-center"],["icon","check"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0","bg-white","t-rest-of-screen"],["class","p-2 border-bottom t-inbox-item a","ngbDropdownItem","",3,"bg-light","routerLink","click",4,"ngFor","ngForOf"],["class","t-slightly-bold p-2 text-center",4,"ngIf"],["ngbDropdownItem","",1,"p-2","border-bottom","t-inbox-item","a",3,"routerLink","click"],[1,"t-slightly-bold","p-2","text-center"],[1,"modal-body","p-0","bg-white"],["class","row m-0 px-1 px-sm-3 pt-3 pt-sm-4 pb-3 pb-sm-5",4,"ngIf"],["class","d-flex justify-content-center py-2",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"disabled","click"],["icon","save"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"row","m-0","px-1","px-sm-3","pt-3","pt-sm-4","pb-3","pb-sm-5"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],[1,"col-12","col-md-4","t-details-image-container"],[1,"border"],[3,"src","imageId","ngModel","isEdit","size","ngModelChange"],[1,"t-form-group",3,"label","serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"d-flex","justify-content-center","py-2"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","editMode"],[1,"modal-body"],[1,"t-form-group",2,"margin-top","0!important",3,"label"],[3,"ngModel","ngModelChange"],[3,"ngModel","focusIf","ngModelChange"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["class","t-form-group","style","margin-top:0!important",3,"label",4,"ngIf"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Vb(1,"nav",1),o.Vb(2,"a",2),o.mc(3,"translate"),o.Qb(4,"t-brand",3),o.Ub(),o.Vb(5,"div",4),o.Rc(6,Te,2,2,"button",5),o.Tc(7," \xa0 "),o.Rc(8,Ee,2,2,"button",5),o.Ub(),o.Rc(9,Ue,3,1,"div",6),o.Vb(10,"button",7),o.hc("click",(function(){return t.onToggleCollapse()})),o.Qb(11,"span",8),o.Ub(),o.Vb(12,"div",9),o.Vb(13,"ol",10),o.hc("cdkDropListDropped",(function(e){return t.onDragDropFavorite(e)})),o.Rc(14,Be,5,3,"li",11),o.Rc(15,Se,14,6,"ng-template",null,12,o.Sc),o.Ub(),o.Vb(17,"ol",13),o.Vb(18,"li",14),o.Vb(19,"button",15),o.hc("click",(function(){return t.onAddFavorite()})),o.mc(20,"translate"),o.Qb(21,"fa-icon",16),o.Ub(),o.Ub(),o.Rc(22,qe,16,14,"li",17),o.Vb(23,"li",18),o.Vb(24,"button",19),o.Vb(25,"div",20),o.Vb(26,"div",21),o.Qb(27,"t-image",22),o.Ub(),o.Ub(),o.Tc(28," \xa0\xa0 "),o.Vb(29,"div",23),o.Vb(30,"div",24),o.Tc(31),o.Ub(),o.Vb(32,"div",25),o.Tc(33),o.Ub(),o.Ub(),o.Tc(34," \xa0\xa0 "),o.Ub(),o.Vb(35,"div",26),o.Vb(36,"button",27),o.hc("click",(function(){return t.onCollapse()})),o.Tc(37),o.mc(38,"translate"),o.Ub(),o.Vb(39,"button",28),o.hc("click",(function(){return t.onCollapse()})),o.Tc(40),o.mc(41,"translate"),o.Ub(),o.Vb(42,"button",29),o.hc("click",(function(){return t.onMySystemAccount(),t.onCollapse()})),o.Tc(43),o.mc(44,"translate"),o.mc(45,"translate"),o.Ub(),o.Vb(46,"button",29),o.hc("click",(function(){return t.onMyCompanyAccount(),t.onCollapse()})),o.Tc(47),o.mc(48,"translate"),o.Ub(),o.Vb(49,"button",29),o.hc("click",(function(){return t.onSignOut(),t.onCollapse()})),o.Tc(50),o.mc(51,"translate"),o.Ub(),o.Rc(52,ze,5,3,"ng-container",30),o.Rc(53,Ye,4,2,"ng-container",30),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(54,"main",31),o.Qb(55,"router-outlet"),o.Ub(),o.Ub(),o.Rc(56,Ze,5,2,"ng-template",null,32,o.Sc),o.Rc(58,nt,15,13,"ng-template",null,33,o.Sc),o.Rc(60,ot,1,1,"ng-template",null,34,o.Sc),o.Rc(62,ct,3,4,"ng-template",null,35,o.Sc),o.Rc(64,bt,12,7,"ng-template",null,36,o.Sc),o.Rc(66,wt,21,17,"ng-template",null,37,o.Sc),o.Rc(68,Tt,35,36,"ng-template",null,38,o.Sc)),2&e&&(o.Bb(1),o.Qc("background-color",null==t.settings?null:t.settings.BrandColor),o.Bb(1),o.sc("title",o.nc(3,26,"Home")),o.Bb(2),o.sc("scale",1),o.Bb(2),o.sc("ngIf",t.nav.showBack),o.Bb(2),o.sc("ngIf",t.nav.showForward),o.Bb(1),o.sc("ngIf",!t.isMdScreen),o.Bb(3),o.sc("ngbCollapse",t.isCollapsed),o.Bb(1),o.sc("cdkDropListOrientation",t.menuOrientation),o.Bb(1),o.sc("ngForOf",t.favorites),o.Bb(5),o.sc("title",o.nc(20,28,"AddScreenToFavorites")),o.Bb(3),o.sc("ngIf",t.isMdScreen),o.Bb(5),o.sc("src","users/"+(null==t.ws||null==t.ws.userSettings?null:t.ws.userSettings.UserId)+"/image")("imageId",null==t.ws||null==t.ws.userSettings?null:t.ws.userSettings.ImageId)("size",28),o.Bb(4),o.Uc(t.userName),o.Bb(2),o.Vc(" ",t.companyName,""),o.Bb(2),o.Gb("dropdown-menu-right",!t.isRtl),o.Bb(2),o.Vc(" ",o.nc(38,30,"ChangeCompany")," "),o.Bb(3),o.Vc(" ",o.nc(41,32,"WelcomePage")," "),o.Bb(3),o.Vc(" ",o.oc(44,34,"My0Account",o.wc(44,yt,o.nc(45,37,"AppName")))," "),o.Bb(4),o.Vc(" ",o.oc(48,39,"My0Account",o.wc(46,yt,t.companyName))," "),o.Bb(3),o.Vc(" ",o.nc(51,42,"SignOut")," "),o.Bb(2),o.sc("ngIf",(null==t.settings?null:t.settings.SecondaryLanguageId)||(null==t.settings?null:t.settings.TernaryLanguageId)),o.Bb(1),o.sc("ngIf",!(null==t.settings||!t.settings.SecondaryCalendar)))},directives:[K.B,i.h,Z.a,x.u,K.d,W.f,x.t,ee.b,K.l,K.r,be,K.p,K.o,i.f,i.j,x.B,W.b,fe.a,W.e,W.d,me.a,ge.a,pe.a,te.k,te.n,he.a,te.u,ve.a],pipes:[Q.d,ye,we],encapsulation:2}),e})();var xt=n("6vYK"),Ut=n("O90C"),Rt=n("QFit");function Dt(e,t){if(1&e&&(o.Vb(0,"div",13),o.Vb(1,"span",14),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",15),o.Vb(4,"span",14),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("Unit",e,"Name")),o.Bb(3),o.Uc(n.ws.getMultilingualValue("Unit",e,"Description"))}}function Bt(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Unit"),"\n")}function St(e,t){if(1&e&&(o.Vb(0,"span",16),o.Qb(1,"t-auto-cell",17),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function kt(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function Ot(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function _t(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}function Lt(e,t){if(1&e&&(o.Tc(0),o.mc(1,"translate")),2&e){const e=o.lc();o.Vc(" ",o.nc(1,1,e.unitTypeLookup("Pure")),"")}}function At(e,t){if(1&e&&(o.Tc(0),o.mc(1,"translate")),2&e){const e=o.lc();o.Vc(" ",o.nc(1,1,e.unitTypeLookup("Time")),"")}}function Ft(e,t){if(1&e&&(o.Tc(0),o.mc(1,"translate")),2&e){const e=o.lc();o.Vc(" ",o.nc(1,1,e.unitTypeLookup("Distance")),"")}}function Pt(e,t){if(1&e&&(o.Tc(0),o.mc(1,"translate")),2&e){const e=o.lc();o.Vc(" ",o.nc(1,1,e.unitTypeLookup("Count")),"")}}function Nt(e,t){if(1&e&&(o.Tc(0),o.mc(1,"translate")),2&e){const e=o.lc();o.Vc(" ",o.nc(1,1,e.unitTypeLookup("Mass")),"")}}function jt(e,t){if(1&e&&(o.Tc(0),o.mc(1,"translate")),2&e){const e=o.lc();o.Vc(" ",o.nc(1,1,e.unitTypeLookup("Volume")),"")}}const Wt=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},$t=function(e,t){return[e,t]},qt=function(e){return{template:e,expression:"CreatedById eq me"}},Qt=function(e){return[e]},Ht=function(e){return{template:e,expression:"UnitType eq 'Pure'"}},Gt=function(e){return{template:e,expression:"UnitType eq 'Time'"}},zt=function(e){return{template:e,expression:"UnitType eq 'Distance'"}},Jt=function(e){return{template:e,expression:"UnitType eq 'Count'"}},Kt=function(e){return{template:e,expression:"UnitType eq 'Mass'"}},Yt=function(e){return{template:e,expression:"UnitType eq 'Volume'"}},Xt=function(e,t,n,i,o,c){return[e,t,n,i,o,c]},Zt=function(e,t){return{CreatedBy:e,UnitType:t}};let en=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.unitsApi=this.api.unitsApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.unitsApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.unitsApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("units","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.unitsApi=this.api.unitsApi(this.notifyDestruct$)}get c(){return this.ws.Unit}get ws(){return this.workspace.currentTenant}unitTypeLookup(e){return Object(xt.a)(this.workspace,this.translate).properties.UnitType.format(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-units-master"]],features:[o.yb],decls:26,vars:51,consts:[["collection","Unit","selectDefault","Code,UnitType,UnitAmount,BaseAmount,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["pure",""],["time",""],["distance",""],["count",""],["mass",""],["volume",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Unit",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,Dt,6,2,"ng-template",null,1,o.Sc),o.Rc(4,Bt,2,3,"ng-template",null,2,o.Sc),o.Rc(6,St,2,1,"ng-template",null,3,o.Sc),o.Rc(8,kt,2,3,"ng-template",null,4,o.Sc),o.Rc(10,Ot,2,3,"ng-template",null,5,o.Sc),o.Rc(12,_t,2,3,"ng-template",null,6,o.Sc),o.Rc(14,Lt,2,3,"ng-template",null,7,o.Sc),o.Rc(16,At,2,3,"ng-template",null,8,o.Sc),o.Rc(18,Ft,2,3,"ng-template",null,9,o.Sc),o.Rc(20,Pt,2,3,"ng-template",null,10,o.Sc),o.Rc(22,Nt,2,3,"ng-template",null,11,o.Sc),o.Rc(24,jt,2,3,"ng-template",null,12,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17),u=o.Fc(19),d=o.Fc(21),b=o.Fc(23),f=o.Fc(25);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"Units"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(22,$t,o.zc(12,Wt,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(17,Wt,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.xc(48,Zt,o.wc(27,Qt,o.wc(25,qt,s)),o.Bc(41,Xt,o.wc(29,Ht,l),o.wc(31,Gt,a),o.wc(33,zt,u),o.wc(35,Jt,d),o.wc(37,Kt,b),o.wc(39,Yt,f))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function tn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",4),o.Vb(1,"button",5),o.hc("click",(function(){return o.Ic(e),o.lc().onHome()})),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()}2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"Home")))}let nn=(()=>{class e{constructor(e,t){this.router=e,this.workspace=t,this.showHome=!0}onHome(){this.router.navigate(["app",this.workspace.ws.tenantId+"","main-menu"])}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(i.e),o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-application-page-not-found"]],inputs:{showHome:"showHome"},decls:8,vars:7,consts:[[1,"p-5"],[1,"text-danger"],[1,"text-muted"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Vb(1,"h2",1),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"p",2),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Rc(7,tn,4,3,"div",3),o.Ub()),2&e&&(o.Bb(2),o.Vc(" ",o.nc(3,3,"Error_PageNotFound")," "),o.Bb(3),o.Uc(o.nc(6,5,"Error_PageNotFoundMessage")),o.Bb(2),o.sc("ngIf",t.showHome))},directives:[x.u],pipes:[Q.d],encapsulation:2}),e})();var on=n("PqYM"),cn=n("lV2L");const rn=["searchInput"];function sn(e,t){1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound"),""))}function ln(e,t){if(1&e){const e=o.Wb();o.Vb(0,"a",15),o.hc("focus",(function(){o.Ic(e);const n=t.index;return o.lc(2).onFocus(0,n)}))("blur",(function(){return o.Ic(e),o.lc(2).onBlur()}))("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc(2).onMenuItemClick(n)})),o.Vb(1,"div",16),o.Qb(2,"fa-icon",17),o.Ub(),o.Vb(3,"div",18),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=t.index,i=o.lc(2);o.Gb("d-none",!i.showItem(e)),o.sc("id",i.getId(0,n))("routerLink",i.linkArray(e))("title",e.label),o.Bb(2),o.sc("icon",e.icon),o.Bb(2),o.Vc(" ",o.nc(5,7,e.label)," ")}}function an(e,t){if(1&e&&(o.Vb(0,"div",12),o.Vb(1,"div",13),o.Vb(2,"span"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Rc(5,ln,6,9,"a",14),o.Ub()),2&e){const e=o.lc();o.Gb("d-none",!e.showSection(e.quickAccess)),o.Bb(3),o.Uc(o.nc(4,4,"Menu_QuickAccess")),o.Bb(2),o.sc("ngForOf",e.quickAccess)}}function un(e,t){if(1&e){const e=o.Wb();o.Vb(0,"a",15),o.hc("focus",(function(){o.Ic(e);const n=t.index,i=o.lc().index;return o.lc(2).onFocus(i+1,n)}))("blur",(function(){return o.Ic(e),o.lc(3).onBlur()}))("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc(3).onMenuItemClick(n)})),o.Vb(1,"div",16),o.Qb(2,"fa-icon",17),o.Ub(),o.Vb(3,"div",18),o.Tc(4),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=t.index,i=o.lc().index,c=o.lc(2);o.Gb("d-none",!c.showItem(e)),o.sc("id",c.getId(i+1,n))("routerLink",c.linkArray(e))("title",e.label),o.Bb(2),o.sc("icon",e.icon),o.Bb(2),o.Vc(" ",e.label," ")}}function dn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div"),o.Vb(1,"div",20),o.hc("dblclick",(function(){o.Ic(e);const n=t.$implicit;return o.lc(2).onSectionDoubleClick(n)})),o.Vb(2,"span"),o.Tc(3),o.Ub(),o.Ub(),o.Rc(4,un,5,7,"a",14),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2);o.Eb("mb-4 mb-md-5 ",e.background,""),o.Gb("d-none",!n.showSection(null==e?null:e.items)),o.Bb(3),o.Uc(e.label),o.Bb(1),o.sc("ngForOf",e.items)}}function bn(e,t){if(1&e&&(o.Tb(0),o.Rc(1,dn,5,7,"div",19),o.Sb()),2&e){const e=o.lc();o.Bb(1),o.sc("ngForOf",e.mainMenu)}}function fn(e,t){1&e&&(o.Vb(0,"div",21),o.Qb(1,"t-spinner",22),o.Ub()),2&e&&(o.Bb(1),o.sc("scale",2))}let mn=(()=>{class e{constructor(e,t,n,i,o,c){this.router=e,this.route=t,this.document=n,this.translate=i,this.workspace=o,this.userSettings=c,this.MAX_TILES=6,this.TILE_WIDTH=135,this.TILE_MARGIN=4,this.CONTAINER_MARGIN=15,this.currentSection=-1,this.currentItem=-1,this.currentXMemory=-1,this.rendered=!1,this.mainMenuBase={Mail:{background:"t-blue1",items:[{label:"Inbox",icon:"inbox",link:"../inbox",sortKey:10},{label:"Outbox",icon:"share",link:"../outbox",sortKey:20}]},Financials:{background:"t-green1",items:[{label:"Accounts",icon:"coins",link:"../accounts",view:"accounts",sortKey:100},{label:"AccountStatement",icon:"file-alt",link:"../account-statement",canView:()=>this.canView("accounts")&&this.canView("details-entries"),paramsFunc:()=>this.userSettings.get("account-statement/arguments"),sortKey:101},{label:"EntryTypes",icon:"sitemap",link:"../entry-types",view:"entry-types",sortKey:200},{label:"AccountTypes",icon:"sitemap",link:"../account-types",view:"account-types",sortKey:300},{label:"AccountClassifications",icon:"indent",link:"../account-classifications",view:"account-classifications",sortKey:500},{label:"Centers",icon:"object-group",link:"../centers",view:"centers",sortKey:600},{label:"FinancialSettings",icon:"cog",link:"../financial-settings",view:"financial-settings",sortKey:700}]},Cash:{background:"t-teal2",items:[{label:"ExchangeRates",icon:"exchange-alt",link:"../exchange-rates",view:"exchange-rates",sortKey:100},{label:"BankReconciliation",icon:"tasks",link:"../reconciliation",view:"reconciliation",sortKey:200,paramsFunc:()=>this.userSettings.get("reconciliation/arguments")}]},FixedAssets:{background:"t-blue2",items:[]},Inventory:{background:"t-green2",items:[]},Production:{background:"t-teal3",items:[]},Purchasing:{background:"t-blue3",items:[]},Marketing:{background:"t-green3",items:[]},Sales:{background:"t-teal1",items:[]},HumanCapital:{background:"t-blue1",items:[]},Investments:{background:"t-green1",items:[]},Maintenance:{background:"t-teal2",items:[]},Administration:{background:"t-blue2",items:[{label:"Agents",icon:"id-badge",link:"../agents",view:"agents",sortKey:100},{label:"Units",icon:"ruler",link:"../units",view:"units",sortKey:200},{label:"Currencies",icon:"euro-sign",link:"../currencies",view:"currencies",sortKey:300},{label:"IfrsConcepts",icon:"stream",link:"../ifrs-concepts",view:"ifrs-concepts",sortKey:600},{label:"Emails",icon:"envelope",link:"../emails",sortKey:400,canView:()=>this.workspace.globalSettings.EmailEnabled&&this.canView("emails")},{label:"SmsMessages",icon:"sms",link:"../sms-messages",sortKey:500,canView:()=>this.workspace.globalSettings.SmsEnabled&&this.workspace.currentTenant.settings.SmsEnabled&&this.canView("sms-messages")},{label:"GeneralSettings",icon:"cog",link:"../general-settings",view:"general-settings",sortKey:700}]},Security:{background:"t-green2",items:[{label:"Users",icon:"users",link:"../users",view:"users",sortKey:100},{label:"Roles",icon:"shield-alt",link:"../roles",view:"roles",sortKey:200}]},Studio:{background:"t-black",items:[{label:"ReportDefinitions",icon:"tools",link:"../report-definitions",view:"report-definitions",sortKey:100},{label:"DashboardDefinitions",icon:"tools",link:"../dashboard-definitions",view:"dashboard-definitions",sortKey:150},{label:"LineDefinitions",icon:"tools",link:"../line-definitions",view:"line-definitions",sortKey:200},{label:"DocumentDefinitions",icon:"tools",link:"../document-definitions",view:"document-definitions",sortKey:225},{label:"RelationDefinitions",icon:"tools",link:"../relation-definitions",view:"relation-definitions",sortKey:250},{label:"CustodyDefinitions",icon:"tools",link:"../custody-definitions",view:"custody-definitions",sortKey:275},{label:"ResourceDefinitions",icon:"tools",link:"../resource-definitions",view:"resource-definitions",sortKey:300},{label:"LookupDefinitions",icon:"tools",link:"../lookup-definitions",view:"lookup-definitions",sortKey:400},{label:"MarkupTemplates",icon:"file-code",link:"../markup-templates",view:"markup-templates",sortKey:500}]},Help:{background:"t-blue2",items:[]},Miscellaneous:{background:"t-grey",items:[]}},this._permissions=null,this._definitions=null,this._settings=null}ngOnInit(){const e=this.mainMenu.reduce((e,t)=>e+t.items.length,0);this.document.body.classList.add("t-banner"),e<60&&this.render(),"popstate"===this.workspace.lastNavigation&&(this.search=this.ws.mainMenuSearch,this.search&&this.render())}ngAfterViewInit(){this.rendered||Object(on.a)(1).subscribe(()=>this.render())}ngOnDestroy(){this.document.body.classList.remove("t-banner"),this.ws.mainMenuSearch=this.search}render(){this.rendered=!0}get ws(){return this.workspace.currentTenant}get mainMenu(){return this.initializeMainMenu(),this._mainMenu}get quickAccess(){return this.initializeMainMenu(),this._quickAccess}initializeMainMenu(){const e=this.workspace.currentTenant;if(this._definitions!==e.definitions||this._settings!==e.settings||this._userSettings!==e.userSettings||this._currentCulture!==this.workspace.ws.culture||this._permissions!==e.permissions){this._definitions=e.definitions,this._settings=e.settings,this._userSettings=this.workspace.current.userSettings,this._currentCulture=this.workspace.ws.culture,this._permissions=e.permissions;const t=Object.assign({},this.mainMenuBase);for(const e of Object.keys(this.mainMenuBase)){t[e]=Object.assign({},t[e]),t[e].items=t[e].items.map(e=>Object.assign({},e));for(const n of t[e].items)n.label=this.translate.instant(n.label)}this.addDefinitions(t,e.definitions.Lookups,"lookups"),this.addDefinitions(t,e.definitions.Relations,"relations"),this.addDefinitions(t,e.definitions.Custodies,"custodies"),this.addDefinitions(t,e.definitions.Resources,"resources"),this.addDefinitions(t,e.definitions.Documents,"documents"),this.addReportDefinitions(t),this.addDashboardDefinitions(t),this._mainMenu=Object.keys(t).map(e=>({label:this.translate.instant("Menu_"+e),items:t[e].items.sort((e,t)=>e.sortKey-t.sortKey),background:t[e].background}));const n=this.userSettings.get("main-menu/quick-access");if(n&&n.length){const e={};for(const i of n)e[i]=!0;const t={};for(const n of this._mainMenu)for(const i of n.items)e[i.link]&&(t[i.link]=i);this._quickAccess=n.map(e=>t[e]).filter(e=>!!e)}else this._quickAccess=[]}}addReportDefinitions(e){const t=this.workspace.currentTenant,n={};for(const i of t.reportIds)n[i]=!0;for(const i of Object.keys(t.definitions.Reports)){const o=t.definitions.Reports[+i];if(o.ShowInMainMenu&&n[i]){const n=t.getMultilingualValueImmediate(o,"Title")||this.translate.instant("Untitled");let c;c=e[o.MainMenuSection]?o.MainMenuSection:"Miscellaneous",e[c].items.push({label:n,sortKey:o.MainMenuSortKey,icon:o.MainMenuIcon||"folder",link:`../report/${i}`})}}}addDashboardDefinitions(e){const t=this.workspace.currentTenant,n={};for(const i of t.dashboardIds)n[i]=!0;for(const i of Object.keys(t.definitions.Dashboards)){const o=t.definitions.Dashboards[+i];if(o.ShowInMainMenu&&n[i]){const n=t.getMultilingualValueImmediate(o,"Title")||this.translate.instant("Untitled");let c;c=e[o.MainMenuSection]?o.MainMenuSection:"Miscellaneous",e[c].items.push({label:n,sortKey:o.MainMenuSortKey,icon:o.MainMenuIcon||"folder",link:`../dashboard/${i}`})}}}linkArray(e){if(!e.linkArray&&(e.linkArray=[e.link],e.paramsFunc)){const t=e.paramsFunc();t&&e.linkArray.push(t)}return e.linkArray}addDefinitions(e,t,n,i){if(t){i=i||(e=>this.workspace.currentTenant.getMultilingualValueImmediate(e,"TitlePlural")||this.translate.instant("Untitled"));for(const o of Object.keys(t).filter(e=>this.canView(`${n}/${e}`))){const c=t[o],r=i(c);e[c.MainMenuSection]||(c.MainMenuSection="Miscellaneous"),e[c.MainMenuSection].items.push({label:r,sortKey:c.MainMenuSortKey,icon:c.MainMenuIcon||"folder",link:`../${n}/${o}`})}}}handleKeyboardEvent(e){if(this.workspace.ignoreKeyDownEvents)return;let t=e.key;if(!this.searchInputIsFocused&&t&&1===t.trim().length&&(this.currentXMemory=-1,this.searchInput.nativeElement.value="",this.searchInput.nativeElement.focus()),!e.altKey&&!e.ctrlKey&&N.a[t])switch(this.workspace.ws.isRtl&&(t===N.a.ArrowRight?t=N.a.ArrowLeft:t===N.a.ArrowLeft&&(t=N.a.ArrowRight)),t){case N.a.Escape:this.currentXMemory=-1,this.search="",this.currentItem=-1,this.currentSection=-1,this.document.activeElement.blur();break;case N.a.Tab:this.currentXMemory=-1;break;case N.a.ArrowLeft:if(this.currentIdExists){this.currentXMemory=-1;const t=this.computeGridModel();let n=t.currentX;n-=1,n<0&&(n=0);const i=t.grid[t.currentY][n];this.focusTile(i.sectionIndex,i.itemIndex,e)}break;case N.a.ArrowRight:if(!this.showNoItemsFound&&!this.searchInputIsFocused){this.currentXMemory=-1;let t=0,n=0;const i=this.computeGridModel();this.currentIdExists&&(t=i.currentX,n=i.currentY,t+=1,i.grid[n][t]||(t-=1));const o=i.grid[n][t];this.focusTile(o.sectionIndex,o.itemIndex,e)}break;case N.a.ArrowUp:if(this.currentIdExists){const t=this.computeGridModel();let n=this.currentXMemory<0?t.currentX:this.currentXMemory,i=t.currentY;for(i-=1,i<0&&(i=0),this.currentXMemory=Math.max(this.currentXMemory,n);!t.grid[i][n]&&n>0;)n--;const o=t.grid[i][n];this.focusTile(o.sectionIndex,o.itemIndex,e)}break;case N.a.ArrowDown:if(!this.showNoItemsFound){let t=0,n=0;const i=this.computeGridModel();if(this.currentIdExists)for(t=this.currentXMemory<0?i.currentX:this.currentXMemory,n=i.currentY,n+=1,n>=i.height&&(n=i.height-1),this.currentXMemory=Math.max(this.currentXMemory,t);!i.grid[n][t]&&t>0;)t--;else this.currentXMemory=-1;const o=i.grid[n][t];this.focusTile(o.sectionIndex,o.itemIndex,e)}}}get searchInputIsFocused(){return this.searchInput.nativeElement===this.document.activeElement}focusTile(e,t,n){this.document.getElementById(this.getId(e,t)).focus(),n.preventDefault(),n.stopPropagation()}get rowTiles(){for(let e=this.MAX_TILES;e>0;e--)if(window.matchMedia(`(min-width: ${2*this.CONTAINER_MARGIN+(this.TILE_WIDTH+2*this.TILE_MARGIN)*e}px)`).matches)return e}computeGridModel(){const e=this.rowTiles;let t=-1,n=-1;const i=[];for(let o=0;o<this.sectionsLength;o++){const c=this.getSectionItems(o);if(this.showSectionIndex(o)){const r=c.map((e,t)=>({sectionIndex:o,itemIndex:t})).filter(e=>this.showItemIndex(e.sectionIndex,e.itemIndex));for(let o=0;o<r.length;o+=e){const c=r.slice(o,o+e);i.push(c);for(let o=0;o<e;o++){const e=c[o];e&&e.itemIndex===this.currentItem&&e.sectionIndex===this.currentSection&&(t=i.length-1,n=o)}}}}return{currentX:n,currentY:t,width:e,height:i.length,grid:i}}get sectionsLength(){return 1+this.mainMenu.length}getSectionItems(e){return 0===e?this.quickAccess:this.mainMenu[e-1].items}get currentIdExists(){return this.currentSection>=0&&this.currentItem>=0}onFocus(e,t){this.currentSection=e,this.currentItem=t}onBlur(){this.currentSection=-1,this.currentItem=-1}getId(e,t){return`${e}_${t}`}onNavigate(e){this.router.navigate([e],{relativeTo:this.route})}showSection(e){return(!this.search||e!==this.quickAccess)&&!!e&&e.some(e=>this.showItem(e))}showItem(e){const t=this.search;return(!e.view||this.canView(e.view))&&(!e.canView||e.canView())&&(!t||-1!==this.translate.instant(e.label).toLowerCase().indexOf(t.toLowerCase()))}showSectionIndex(e){const t=this.getSectionItems(e);return this.showSection(t)}showItemIndex(e,t){const n=this.getSectionItems(e)[t];return this.showItem(n)}get showNoItemsFound(){return this.mainMenu.every(e=>!this.showSection(e.items))&&!this.showSection(this.quickAccess)}canView(e){return this.workspace.currentTenant.canRead(e)}onSectionDoubleClick(e){if(e&&e.items){console.log(`------- Section: ${e.label} -------`);for(const t of e.items)console.log(`${t.sortKey} ${t.label}`)}}onMenuItemClick(e){if(this.quickAccess[0]&&e.link===this.quickAccess[0].link)return;const t=this.quickAccess.filter(t=>t.link!==e.link).map(e=>e.link);for(t.unshift(e.link);t.length>6;)t.pop();const n=JSON.stringify(t);this.userSettings.save("main-menu/quick-access",n)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(i.e),o.Pb(i.a),o.Pb(x.e),o.Pb(Q.e),o.Pb(B.m),o.Pb(X.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-main-menu"]],viewQuery:function(e,t){var n;1&e&&o.Oc(rn,!0),2&e&&o.Ec(n=o.ic())&&(t.searchInput=n.first)},hostBindings:function(e,t){1&e&&o.hc("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,o.Gc)},decls:15,vars:9,consts:[["tScrollMemory","main-menu",1,"pt-3","pt-md-4","t-menu-screen",3,"tScrollMemoryTrigger"],["rootDiv",""],[1,"t-menu-search-container","mb-4"],["id","searchIcon","icon","search",1,"d-inline"],[1,"form-control","t-menu-search",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],[1,"t-menu-container"],["contentDiv",""],[4,"ngIf"],["class","mb-4 mb-md-5 t-quickaccess",3,"d-none",4,"ngIf"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"mb-4","mb-md-5","t-quickaccess"],[1,"t-menu-section"],["class","t-menu-item btn m-1",3,"id","d-none","routerLink","title","focus","blur","click",4,"ngFor","ngForOf"],[1,"t-menu-item","btn","m-1",3,"id","routerLink","title","focus","blur","click"],[1,"pt-4","pb-1","t-menu-item-icon"],[3,"icon"],["ellipsis","",1,"px-2","t-menu-item-label"],[3,"class","d-none",4,"ngFor","ngForOf"],[1,"t-menu-section",3,"dblclick"],[1,"text-center","pt-4"],[3,"scale"]],template:function(e,t){if(1&e&&(o.Vb(0,"div",0,1),o.Vb(2,"div",2),o.Tc(3," \xa0\xa0\xa0 "),o.Qb(4,"fa-icon",3),o.Vb(5,"input",4,5),o.hc("ngModelChange",(function(e){return t.search=e})),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Vb(8,"div",6,7),o.Rc(10,sn,3,3,"div",8),o.Rc(11,an,6,6,"div",9),o.Rc(12,bn,2,1,"ng-container",10),o.Ub(),o.Rc(13,fn,2,1,"ng-template",null,11,o.Sc),o.Ub()),2&e){const e=o.Fc(14);o.sc("tScrollMemoryTrigger",t.rendered+(t.search||"")),o.Bb(5),o.uc("placeholder","",o.nc(7,7,"Search"),"..."),o.sc("ngModel",t.search),o.Bb(5),o.sc("ngIf",t.showNoItemsFound),o.Bb(1),o.sc("ngIf",!t.search),o.Bb(1),o.sc("ngIf",t.rendered)("ngIfElse",e)}},directives:[cn.a,ee.b,te.c,te.k,te.n,x.u,x.t,i.h,U,me.a],pipes:[Q.d],encapsulation:2}),e})();var gn=n("CHDZ"),pn=n("ABE2"),hn=n("56d8");const vn=["input"];let In=(()=>{class e{constructor(){this.placeholder="",this.textAlignment=null,this.maxDecimalPlaces=null,this.minDecimalPlaces=null,this.noSeparator=!1,this.theme="light",this.isPercentage=!1,this.w100=!0,this.isDisabled=!1,this.onChange=e=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{}}writeValue(e){const t=this.format(e=this.isPercentage?100*e:e);this.input.nativeElement.value=t}registerOnChange(e){this.onChange=t=>{let n=this.parse(t);n=this.isPercentage?n/100:n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}ngOnChanges(e){if(e.maxDecimalPlaces&&!e.maxDecimalPlaces.isFirstChange()||e.minDecimalPlaces&&!e.minDecimalPlaces.isFirstChange()){const e=this.parse(this.input.nativeElement.value);this.input.nativeElement.value=this.format(e)}}get padding(){return"00000000"}get decimalSeparator(){return"."}get thousandsSeparator(){return","}isBracketed(e){return e.startsWith("(")&&e.endsWith(")")}removeBrackets(e){return e.substr(1,e.length-2)}format(e){if(!e&&0!==e)return"";const t=e<0,n=(Math.abs(e)||"0").toString();let[i,o=""]=n.split(this.decimalSeparator),c=this.minDecimalPlaces;null===c&&(c=o.length);let r=Math.max(this.maxDecimalPlaces,c);null===r&&(r=o.length);let s=o.length;s=Math.max(c,s),s=Math.min(r,s),o=s>0?this.decimalSeparator+(o+this.padding).substring(0,s):"",this.noSeparator||(i=i.replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator));let l=i+o;return this.isPercentage&&(l+="%"),t&&(l=`(${l})`),l}parse(e){if(null==e||""===e)return;e=(e||"").trim();const t=this.isBracketed(e);if(t&&(e=this.removeBrackets(e).trim()),this.isPercentage)for(;e.endsWith("%");)e=e.slice(0,-1);let[n,i=""]=e.split(this.decimalSeparator);n=n.replace(new RegExp(this.thousandsSeparator,"g"),"");let o=this.maxDecimalPlaces;null===o&&(o=i.length),i=parseInt(i,10)>0&&o>0?this.decimalSeparator+(i+this.padding).substring(0,o):"";const c=n+i,r=c?+c:0;return t?-r:r}onBlur(e){this.onTouched(),this.input.nativeElement.value=this.format(this.parse(e))}get isDark(){return"dark"===this.theme}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-decimal-editor"]],viewQuery:function(e,t){var n;1&e&&o.Oc(vn,!0),2&e&&o.Ec(n=o.ic())&&(t.input=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("w-100",t.w100)},inputs:{placeholder:"placeholder",textAlignment:"textAlignment",maxDecimalPlaces:"maxDecimalPlaces",minDecimalPlaces:"minDecimalPlaces",noSeparator:"noSeparator",theme:"theme",isPercentage:"isPercentage"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.zb],decls:2,vars:8,consts:[["type","text",1,"form-control",3,"placeholder","disabled","input","blur"],["input",""]],template:function(e,t){1&e&&(o.Vb(0,"input",0,1),o.hc("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onBlur(e.target.value)})),o.Ub()),2&e&&(o.Qc("text-align",t.textAlignment),o.Gb("t-input",!t.isDark)("t-studio-input",t.isDark),o.sc("placeholder",t.placeholder)("disabled",t.isDisabled))},encapsulation:2}),e})();function yn(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function wn(e,t){if(1&e&&(o.Vb(0,"h2",16),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const Cn=function(){return{updateOn:"blur"}};function Mn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",17),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,Cn))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Vn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",18),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,Cn))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Tn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",18),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,Cn))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function En(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function xn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,Cn))}}function Un(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,En,2,1,"div",11),o.Rc(3,xn,1,3,"t-text-editor",13),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Rn(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function Dn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,Cn))}}function Bn(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Rn,2,1,"div",11),o.Rc(3,Dn,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Sn(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function kn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,Cn))}}function On(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Sn,2,1,"div",11),o.Rc(3,kn,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function _n(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function Ln(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,Cn))}}function An(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Description)}}function Fn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Description=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Description)("ngModelOptions",o.vc(2,Cn))}}function Pn(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Description2)}}function Nn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description2)("ngModelOptions",o.vc(2,Cn))}}function jn(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Pn,2,1,"div",11),o.Rc(3,Nn,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Wn(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Description3)}}function $n(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description3)("ngModelOptions",o.vc(2,Cn))}}function qn(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Wn,2,1,"div",11),o.Rc(3,$n,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Qn(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"t-restricted",21),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitType),o.Bb(1),o.Vc(" ",o.nc(3,2,t.unitTypeLookup(null==e?null:e.UnitType))," ")}}function Hn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.UnitType=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.UnitType)("choices",t.unitTypeChoices)}}function Gn(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"t-restricted",21),o.Tc(2),o.mc(3,"number"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitAmount),o.Bb(1),o.Vc(" ",o.nc(3,2,null==e?null:e.UnitAmount),"")}}function zn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.UnitAmount=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.UnitAmount)("ngModelOptions",o.vc(2,Cn))}}function Jn(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"t-restricted",21),o.Tc(2),o.mc(3,"number"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.BaseAmount),o.Bb(1),o.Vc(" ",o.nc(3,2,null==e?null:e.BaseAmount),"")}}function Kn(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.BaseAmount=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.BaseAmount)("ngModelOptions",o.vc(2,Cn))}}function Yn(e,t){if(1&e&&(o.Vb(0,"t-form-group",23),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",24),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(2),o.sc("entity",e)}}function Xn(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,wn,2,1,"h2",6),o.Rc(2,Mn,2,7,"t-text-editor",7),o.Rc(3,Vn,2,7,"t-text-editor",8),o.Rc(4,Tn,2,7,"t-text-editor",8),o.Ub(),o.Rc(5,Un,4,6,"t-form-group",9),o.Rc(6,Bn,4,6,"t-form-group",9),o.Rc(7,On,4,6,"t-form-group",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Rc(10,_n,2,1,"div",11),o.Rc(11,Ln,1,3,"t-text-editor",12),o.Ub(),o.Vb(12,"t-form-group",10),o.mc(13,"translate"),o.Rc(14,An,2,1,"div",11),o.Rc(15,Fn,1,3,"t-text-editor",13),o.Ub(),o.Rc(16,jn,4,6,"t-form-group",9),o.Rc(17,qn,4,6,"t-form-group",9),o.Vb(18,"t-form-group",10),o.mc(19,"translate"),o.Rc(20,Qn,4,4,"div",11),o.Rc(21,Hn,1,2,"t-selector",14),o.Ub(),o.Vb(22,"t-form-group",10),o.mc(23,"translate"),o.Rc(24,Gn,4,4,"div",11),o.Rc(25,zn,1,3,"t-decimal-editor",13),o.Ub(),o.Vb(26,"t-form-group",10),o.mc(27,"translate"),o.Rc(28,Jn,4,4,"div",11),o.Rc(29,Kn,1,3,"t-decimal-editor",13),o.Ub(),o.Rc(30,Yn,3,4,"t-form-group",15)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,31,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(13,33,"Description")+i.ws.primaryPostfix)("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Description),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(19,35,"Unit_UnitType"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.UnitType),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(23,37,"Unit_UnitAmount"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.UnitAmount),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(27,39,"Unit_BaseAmount"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.BaseAmount),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n)}}function Zn(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function ei(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const ti=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},ni=function(e,t){return[e,t]};let ii=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.unitsApi=this.api.unitsApi(this.notifyDestruct$),this.expand="",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.UnitAmount=1,e.BaseAmount=1,e},this.onActivate=e=>{e&&e.Id&&this.unitsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.unitsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("units","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.unitsApi=this.api.unitsApi(this.notifyDestruct$)}get unitTypeChoices(){if(!this._unitTypeChoices){const e=Object(xt.a)(this.workspace,this.translate).properties.UnitType;this._unitTypeChoices=e.choices.map(t=>({name:()=>e.format(t),value:t}))}return this._unitTypeChoices}unitTypeLookup(e){return e?Object(xt.a)(this.workspace,this.translate).properties.UnitType.format(e):""}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-units-details"]],features:[o.yb],decls:10,vars:26,consts:[["collection","Unit",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],["required","",3,"ngModel","choices","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Unit","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,yn,2,1,"ng-template",null,1,o.Sc),o.Rc(4,Xn,31,41,"ng-template",null,2,o.Sc),o.Rc(6,Zn,2,3,"ng-template",null,3,o.Sc),o.Rc(8,ei,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,9,"Units"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.xc(23,ni,o.Ac(11,ti,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(17,ti,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,he.a,te.u,te.k,te.n,pn.a,hn.a,In,ge.a],pipes:[Q.d,x.g],encapsulation:2}),e})();var oi=n("Y7zQ"),ci=n("DWXW");const ri=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},si=function(e,t){return[e,t]},li=function(e){return{template:e,expression:"CreatedById eq me"}},ai=function(e){return[e]},ui=function(e){return{CreatedBy:e}};function di(e,t){if(1&e&&o.Qb(0,"t-master",8),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(8),i=o.Fc(6),c=o.Fc(10),r=o.Fc(12),s=o.Fc(14);o.sc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("multiselectActions",o.xc(21,si,o.zc(11,ri,c,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.zc(16,ri,r,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",o.wc(28,ui,o.wc(26,ai,o.wc(24,li,s))))}}function bi(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",9),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function fi(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",16),o.Qb(2,"t-image",17),o.Ub(),o.Tc(3," \xa0\xa0\xa0 "),o.Sb()),2&e){const e=o.lc().id,t=o.lc();o.Bb(2),o.sc("src","relations/"+t.c[e].DefinitionId+"/"+t.c[e].Id+"/image")("imageId",t.c[e].ImageId)("size",42)}}function mi(e,t){if(1&e&&(o.Vb(0,"div",10),o.Rc(1,fi,4,3,"ng-container",11),o.Vb(2,"div",12),o.Vb(3,"div",13),o.Vb(4,"span",14),o.Tc(5),o.Ub(),o.Ub(),o.Vb(6,"div",15),o.Vb(7,"span"),o.Tc(8),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("ngIf",2===(null==n.c[e].EntityMetadata?null:n.c[e].EntityMetadata.ImageId)&&n.Image_isVisible),o.Bb(4),o.Uc(n.ws.getMultilingualValue("Relation",e,"Name")),o.Bb(3),o.Uc(n.c[e].Code)}}function gi(e,t){if(1&e&&o.Tc(0),2&e){const e=o.lc();o.Vc(" ",e.summary,"\n")}}function pi(e,t){if(1&e&&(o.Vb(0,"span",18),o.Qb(1,"t-auto-cell",19),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("definitionId",n.definitionId)("entity",n.c[e])}}function hi(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function vi(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function Ii(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}let yi=(()=>{class e extends Ut.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=o,this.relationsApi=this.api.relationsApi(null,this.notifyDestruct$),this.expand="",this.onActivate=e=>this.relationsApi.activate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.relationsApi.deactivate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.relationsApi=this.api.relationsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`relations/${this.definitionId}`}get c(){return this.workspace.currentTenant.Relation}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Relations[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Relations")}get summary(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Relation")}get Image_isVisible(){return!!this.definition.ImageVisibility}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(i.e),o.Pb(i.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-relations-master"]],inputs:{definitionId:"definitionId"},features:[o.yb],decls:15,vars:2,consts:[["collection","Relation","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Relation","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1","d-inline-block","t-mw-0"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"border","t-dp-wrapper2"],["icon","camera",3,"src","imageId","size"],[1,"text-truncate"],["collection","Relation",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(o.Rc(0,di,1,30,"t-master",0),o.Rc(1,bi,1,1,"ng-template",null,1,o.Sc),o.Rc(3,mi,9,3,"ng-template",null,2,o.Sc),o.Rc(5,gi,1,1,"ng-template",null,3,o.Sc),o.Rc(7,pi,2,2,"ng-template",null,4,o.Sc),o.Rc(9,hi,2,3,"ng-template",null,5,o.Sc),o.Rc(11,vi,2,3,"ng-template",null,6,o.Sc),o.Rc(13,Ii,2,3,"ng-template",null,7,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,Rt.a,nn,be,ge.a],pipes:[Q.d],encapsulation:2}),e})();var wi=n("X5Zs"),Ci=n("zP0r"),Mi=n("7MUa"),Vi=n("BFQD");class Ti{constructor(e,t){this.precedence=e,this.associativity=t}get isLeftAssociative(){return"left"===this.associativity}}const Ei=["!=","<>","<=",">=","<",">","=","&&","||","!","(",")",",","+","-","*","/","%","contains","startsw","endsw","descof","not","and","or","gt","ge","lt","le","eq","ne","asc","desc"],xi={"*":new Ti(2,"left"),"/":new Ti(2,"left"),"%":new Ti(2,"left"),"+":new Ti(3,"left"),"-":new Ti(3,"left"),"=":new Ti(4,"left"),"!=":new Ti(4,"left"),"<>":new Ti(4,"left"),"<=":new Ti(4,"left"),"<":new Ti(4,"left"),">":new Ti(4,"left"),">=":new Ti(4,"left"),eq:new Ti(4,"left"),ne:new Ti(4,"left"),le:new Ti(4,"left"),lt:new Ti(4,"left"),gt:new Ti(4,"left"),ge:new Ti(4,"left"),contains:new Ti(4,"left"),startsw:new Ti(4,"left"),endsw:new Ti(4,"left"),descof:new Ti(4,"left"),"!":new Ti(5,"left"),"&&":new Ti(6,"left"),"||":new Ti(7,"left"),not:new Ti(5,"left"),and:new Ti(6,"left"),or:new Ti(7,"left")};function Ui(e){return xi[e.toLowerCase()]}function Ri(e){switch(e=(e||"").toLowerCase()){case"asc":case"desc":return e;default:return null}}class Di{static parseSingle(e,t){const n=Di.parse(e,t);if(n.length>1)throw new Error("Expression cannot contain top level commas.");if(1===n.length)return n[0]}static parse(e,t){if(!e||!e.trim())return[];const n=t||{expectDirKeywords:!1,expectPathsOnly:!1},i=Di.tokenize(e);return Di.parseTokenStream(i,e,!!n.expectDirKeywords,!!n.expectPathsOnly,n.placeholderReplacement)}static tokenize(e){const t=[],n=e.split("");let i=!1,o=[],c=0;function r(e){let t=Ei.find(t=>n.length-e>=t.length&&Array.from(Array(t.length).keys()).every(i=>t[i]===n[e+i].toLowerCase()));if(function(e){switch(e){case"eq":case"ne":case"le":case"lt":case"gt":case"ge":case"contains":case"startsw":case"endsw":case"descof":case"not":case"and":case"or":case"asc":case"desc":return!0;default:return!1}}(t)){const i=e-1,o=i<0||!ki.properChar(n[i]),c=e+t.length,r=c>=n.length||!ki.properChar(n[c]);o&&r||(t=null)}if(t)return t=n.slice(e,e+t.length).join(""),t}for(;c<n.length;)if("'"===n[c]){const e=c+1<n.length&&"'"===n[c+1];o.push(n[c]),c++,i?e?c++:i=!1:i=!0}else{let e;if(!i&&(e=r(c))){if(o.length>0){const e=o.join("").trim();e&&t.push(e),o=[]}t.push(e.trim()),c+=e.length}else o.push(n[c]),c++}if(i)throw new Error(`Uneven number of single quotation marks in ${e},\nquotation marks in string literals should be escaped by specifying them twice.`);if(o.length>0){const e=o.join("").trim();e&&t.push(e)}return t}static parseTokenStream(e,t,n,i,o){const c=[],r=[],s=[],l=[];function a(){const{op:e,usedAsUnaryOperator:t}=r.pop();let n;if(t){if(!function(e){switch(e.toLowerCase()){case"-":case"+":case"!":case"not":return!0;default:return!1}}(e))throw new Error(`Infix operator '${e}' is missing its first operand.`);if(l.length<1)throw new Error(`Unary operator '${e}' is missing its operand.`);{const t=l.pop();n=new Li(e,t)}}else{if(!function(e){switch(e.toLowerCase()){case"!":case"not":return!1;default:return!0}}(e))throw new Error(`Unary Operator '${e}' is used like an infix operator.`);if(l.length<2)throw new Error(`Infix operator '${e}' is missing its second operand.`);{const t=l.pop(),i=l.pop();n=new _i(e,i,t)}}l.push(n)}function u(){if(s.length>0){const e=s[s.length-1];e.isFunction&&e.arity===e.arguments.length&&e.arity++}}function d(e){if(e.arity>0){if(e.arguments.length!==e.arity-1)throw new Error("Blank function arguments are not allowed, pass null if that was your intention.");if(0===l.length)throw new Error("[Bug] Output stack is empty.");e.arguments.push(l.pop())}}let b,f=!1,m=!1,g=!1;function p(){return null==b||","===b||"("===b||!!Ui(b)}function h(){for(g=!0;r.length>0;){if("("===r[r.length-1].op)throw new Error(`Expression contains mismatched brackets: ${t}.`);a()}if(0===l.length)return;if(l.length>1)throw new Error(`Incorrectly formatted expression: ${t}.`);const e=l.pop();let n;(n=Ri(b))&&(e.direction=n),c.push(e)}for(const v of e){let e;if(m=f,f=!1,g=!1,e=Ui(v)){u();const t=p();if(!t){const t=()=>{if(0===r.length)return!1;const{op:t}=r[r.length-1],n=Ui(t);return"("!==t&&("("!==t&&!n||n.precedence<e.precedence||n.precedence===e.precedence&&n.isLeftAssociative)};for(;t();)a()}f=t&&Oi.isValidFunctionName(v),r.push({op:v,usedAsUnaryOperator:t})}else if("("===v)m?Ui(b)||(l.pop(),r.push({op:b,usedAsUnaryOperator:!1})):u(),s.push(new Bi(m)),r.push({op:v,usedAsUnaryOperator:!1});else if(")"===v){for(;r.length>0&&"("!==r[r.length-1].op;)a();if(!(r.length>0&&"("===r[r.length-1].op))throw new Error("Expression contains mismatched brackets.");{r.pop();const e=s.pop();if(e.isFunction){d(e);const{op:t}=r.pop(),n=new Oi(t,e.arguments);if(n.isAggregation&&n.arguments.some(e=>e.aggregations().length>0))throw new Error(`The expression ${n.toString()} contains an aggregation within an aggregation.`);l.push(n)}else if("("===b)throw new Error("Invalid empty brackets ().")}}else if(","===v)if(0===s.length)h();else{if(!s[s.length-1].isFunction)throw new Error("Unexpected comma ',' character. Commas are only used to separate function arguments: Func(arg1, arg2, arg3).");for(;r.length>0&&"("!==r[r.length-1].op;)a();d(s[s.length-1])}else if(Ri(v)){if(!n)throw new Error(`Unexpected keyword '${v}' in expression: ${t}`)}else{let e;u(),f=p()&&Oi.isValidFunctionName(v);const t=v.toLowerCase();switch(t){case"$":if(!o)throw new Error(`Unrecognized token: ${v}`);e=o.clone();break;case"null":e=new Pi;break;case"true":case"false":e=new Ni("true"===t);break;case"me":case"today":case"now":e=new Oi(t,[]);break;default:const n=Ai.isValidQuote(v);if(void 0!==n){e=new Ai(n);break}const c=Fi.isValidNumber(v);if(void 0!==c){const{value:t,decimals:n}=c;e=new Fi(t,n);break}const{pathArray:r,propName:s}=ki.isValidColumnAccess(v,i);if(r){e=new ki(r,s);break}const l=ji.isValidParameterName(v);if(l){e=new ji(l);break}throw new Error(`Unrecognized token: ${v}`)}l.push(e)}if(Ri(b)&&!g){const e=b.toLowerCase();throw new Error(`Keyword '${e}' must come after the expression and outside any brackets like this: <exp1> ${e}, <exp2> ${e}.`)}b=v}return h(),c}}class Bi{constructor(e){this.isFunction=e,this.arity=0,this.arguments=[]}}class Si{get isAscending(){return"asc"===this.direction}get isDescending(){return"desc"===this.direction}unaggregatedColumnAccesses(){const e=[];return this.unaggregatedColumnAccessesInner(e,!1),e}columnAccesses(){const e=[];return this.columnAccessesInner(e),e}aggregations(){const e=[];return this.aggregationsInner(e),e}parameters(){const e=[];return this.parametersInner(e),e}get isAggregation(){if(this instanceof Oi)switch(this.nameLower){case"sum":case"count":case"avg":case"max":case"min":return!0;default:return!1}return!1}}class ki extends Si{constructor(e,t){super(),this.path=e,this.property=t}static properFirstChar(e){return!!e&&qi(e[0])}static properChar(e){return Qi(e)||"_"===e||"."===e}static properChars(e){return!!e&&e.split("").every(ki.properChar)}static notReservedKeyword(e){switch(e.toLowerCase()){case"null":case"true":case"false":case"asc":case"desc":return!1;default:return!0}}static isValidColumnAccess(e,t){if(this.properFirstChar(e)&&this.properChars(e)&&this.notReservedKeyword(e)){const n=e.split(".").map(e=>e.trim()).filter(e=>!!e);if(t)return{pathArray:n};{const e=n.pop();return{pathArray:n,propName:e}}}return{}}toString(){const e=this.path.join(".")||"",t=this.property||"";return`${e}${e&&t?".":""}${t}`}children(){return[]}unaggregatedColumnAccessesInner(e,t){t||e.push(this)}columnAccessesInner(e){e.push(this)}aggregationsInner(e){}parametersInner(e){}clone(){const e=new ki(this.path.slice(),this.property);return e.hasSecondary=this.hasSecondary,e.hasTernary=this.hasTernary,e}}class Oi extends Si{constructor(e,t){super(),this.name=e,this.arguments=t,this.nameLower=e.toLowerCase()}static properFirstChar(e){return!!e&&qi(e[0])}static properChars(e){return!!e&&e.split("").every(e=>Qi(e)||"_"===e)}static notReservedKeyword(e){switch(e.toLowerCase()){case"null":case"true":case"false":case"asc":case"desc":return!1;default:return!0}}static isValidFunctionName(e){return this.properFirstChar(e)&&this.properChars(e)&&this.notReservedKeyword(e)}toString(){return`${this.name}(${this.arguments.map(e=>Wi(e.toString())).join(", ")})`}children(){return this.arguments}unaggregatedColumnAccessesInner(e,t){this.isAggregation&&(t=!0);for(const n of this.arguments)n.unaggregatedColumnAccessesInner(e,t)}columnAccessesInner(e){for(const t of this.arguments)t.columnAccessesInner(e)}aggregationsInner(e){this.isAggregation&&e.push(this);for(const t of this.arguments)t.aggregationsInner(e)}parametersInner(e){for(const t of this.arguments)t.parametersInner(e)}clone(){return new Oi(this.name,this.arguments.map(e=>e.clone()))}setName(e){this.name=e,this.nameLower=e.toLowerCase()}}class _i extends Si{constructor(e,t,n){super(),this.operator=e,this.left=t,this.right=n}toString(){return`(${this.left.toString()} ${this.operator} ${this.right.toString()})`}children(){return[this.left,this.right]}unaggregatedColumnAccessesInner(e,t){this.left.unaggregatedColumnAccessesInner(e,t),this.right.unaggregatedColumnAccessesInner(e,t)}columnAccessesInner(e){this.left.columnAccessesInner(e),this.right.columnAccessesInner(e)}aggregationsInner(e){this.left.aggregationsInner(e),this.right.aggregationsInner(e)}parametersInner(e){this.left.parametersInner(e),this.right.parametersInner(e)}clone(){return new _i(this.operator,this.left.clone(),this.right.clone())}}class Li extends Si{constructor(e,t){super(),this.operator=e,this.operand=t}toString(){return`(${this.operator} ${this.operand.toString()})`}children(){return[this.operand]}unaggregatedColumnAccessesInner(e,t){this.operand.unaggregatedColumnAccessesInner(e,t)}columnAccessesInner(e){this.operand.columnAccessesInner(e)}aggregationsInner(e){this.operand.aggregationsInner(e)}parametersInner(e){this.operand.parametersInner(e)}clone(){return new Li(this.operator,this.operand.clone())}}class Ai extends Si{constructor(e){super(),this.value=e}static isValidQuote(e){if(e.length>=2&&e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1)}toString(){return`'${this.value.replace("'","''")}'`}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){}clone(){return new Ai(this.value)}}class Fi extends Si{constructor(e,t){super(),this.value=e,this.decimals=t}static isValidNumber(e){if($i(e[0])&&$i(e[e.length-1])&&e.split("").every(e=>$i(e)||"."===e)){const t=parseFloat(e),n=e.split(".");return{value:t,decimals:n.length<=1?0:n.pop().length}}}toString(){return this.value.toFixed(this.decimals)}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){}clone(){return new Fi(this.value,this.decimals)}}class Pi extends Si{toString(){return"null"}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){}clone(){return new Pi}}class Ni extends Si{constructor(e){super(),this.value=e}toString(){return(!!this.value).toString()}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){}clone(){return new Ni(this.value)}}class ji extends Si{constructor(e){super(),this.key=e,this.keyLower=e.toLowerCase()}static properFirstChar(e){return!!e&&"@"===e[0]}static properChars(e){return!!e&&e.split("").slice(1).every(e=>Qi(e)||"_"===e)}static isValidParameterName(e){if(this.properFirstChar(e)&&this.properChars(e))return e.slice(1)}toString(){return`@${this.key}`}children(){return[]}unaggregatedColumnAccessesInner(e,t){}columnAccessesInner(e){}aggregationsInner(e){}parametersInner(e){e.push(this)}clone(){return new ji(this.key)}}function Wi(e){if(!e||e.length<2)return e;let t=0;for(let n=0;n<e.length-1;n++)if("("===e[n]&&t++,")"===e[n]&&t--,0===t)return e;return e.endsWith(")")&&(e=Wi(e.slice(1,-1))),e}function $i(e){return e>="0"&&e<="9"}function qi(e){return e.toLowerCase()!==e.toUpperCase()}function Qi(e){return qi(e)||$i(e)}var Hi=n("CpXl");const Gi=e=>()=>e.instant("Expression");function zi(e){return e.hasOwnProperty("foreignKeyName")}function Ji(e){switch(e){case"boolean":return 1;case"hierarchyid":return 2;case"geography":return 4;case"datetimeoffset":return 8;case"datetime":return 16;case"date":return 32;case"numeric":return 64;case"bit":return 128;case"string":return 256;case"null":return 512;case"entity":return 1024;default:throw new Error(`Precedence: Unknown datatype ${e}`)}}function Ki(e,t,n,i){if("numeric"===e.datatype&&"numeric"===t.datatype){if("percent"===e.control&&"percent"===t.control)return{datatype:"numeric",control:"percent",minDecimalPlaces:Math.max(e.minDecimalPlaces,t.minDecimalPlaces),maxDecimalPlaces:Math.max(e.maxDecimalPlaces,t.maxDecimalPlaces),label:n,labelForParameter:i,isRightAligned:e.isRightAligned||t.isRightAligned,noSeparator:e.noSeparator&&t.noSeparator};{const o="number"===e.control?e.maxDecimalPlaces:"percent"===e.control?e.maxDecimalPlaces-2:0,c="number"===t.control?t.maxDecimalPlaces:"percent"===t.control?t.maxDecimalPlaces-2:0,r=("number"===e.control||"percent"===e.control)&&e.isRightAligned,s=("number"===t.control||"percent"===t.control)&&t.isRightAligned,l=("number"===e.control||"percent"===e.control)&&e.noSeparator,a=("number"===t.control||"percent"===t.control)&&t.noSeparator;return{datatype:"numeric",control:"number",minDecimalPlaces:Math.max("number"===e.control?e.minDecimalPlaces:"percent"===e.control?e.minDecimalPlaces-2:0,"number"===t.control?t.minDecimalPlaces:"percent"===t.control?t.minDecimalPlaces-2:0),maxDecimalPlaces:Math.max(o,c),label:n,labelForParameter:i,isRightAligned:r||s,noSeparator:l&&a}}}throw new Error(`[Bug] Merging non numeric datatypes ${e} and ${t}.`)}function Yi(e,t,n,i,o){switch(e.control){case"unsupported":return Object.assign(Object.assign({datatype:"boolean"},e),{label:t,labelForParameter:o});case"datetime":return Object.assign(Object.assign({datatype:"datetime"},e),{label:t,labelForParameter:o});case"date":return Object.assign(Object.assign({datatype:"date"},e),{label:t,labelForParameter:o});case"number":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:o});case"check":return Object.assign(Object.assign({datatype:"bit"},e),{label:t,labelForParameter:o});case"text":return Object.assign(Object.assign({datatype:"string"},e),{label:t,labelForParameter:o});case"serial":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:o});case"choice":return Object.assign(Object.assign({datatype:"string"},e),{label:t,labelForParameter:o});case"percent":return Object.assign(Object.assign({datatype:"numeric"},e),{label:t,labelForParameter:o});case"null":return Object.assign(Object.assign({datatype:"null"},e),{label:t,labelForParameter:o});default:const c=wi.h[e.control](n,i,e.definitionId),r=c.properties.Id.datatype;if("numeric"===r)return Object.assign(Object.assign({datatype:"numeric"},e),{foreignKeyName:null,label:t,labelForParameter:o});if("string"===r)return Object.assign(Object.assign({datatype:"string"},e),{foreignKeyName:null,label:t,labelForParameter:o});throw new Error(`[Bug] type ${c.titleSingular()} has an Id that is neither string nor numeric`)}}function Xi(e,t,n,i,o,c){switch(e.control){case"unsupported":switch(t){case"boolean":case"hierarchyid":case"geography":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c})}break;case"datetime":switch(t){case"datetimeoffset":case"datetime":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c})}break;case"date":switch(t){case"datetimeoffset":case"datetime":case"date":return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c})}break;case"number":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c});break;case"check":if("bit"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c});break;case"text":if("string"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c});break;case"serial":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c});break;case"choice":if("string"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c});if("numeric"===t&&e.choices.every(e=>!isNaN(+e)))return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c});break;case"percent":if("numeric"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c});break;case"null":if("null"===t)return Object.assign(Object.assign({datatype:t},e),{label:n,labelForParameter:c});break;default:const r=wi.h[e.control](i,o,e.definitionId).properties.Id.datatype;if("numeric"===t&&"numeric"===r)return Object.assign(Object.assign({datatype:t},e),{foreignKeyName:null,label:n,labelForParameter:c});if("string"===t&&"string"===r)return Object.assign(Object.assign({datatype:t},e),{foreignKeyName:null,label:n,labelForParameter:c})}}function Zi(e,t,n){switch(e){case"string":return{datatype:e,control:"text",label:t,labelForParameter:n};case"numeric":return{datatype:e,control:"number",label:t,labelForParameter:n,minDecimalPlaces:0,maxDecimalPlaces:4,isRightAligned:!1,noSeparator:!1};case"bit":return{datatype:e,control:"check",label:t,labelForParameter:n};case"date":return{datatype:e,control:"date",label:t,labelForParameter:n,granularity:Vi.a.days};case"datetime":case"datetimeoffset":return{datatype:e,control:"datetime",label:t,labelForParameter:n,granularity:Vi.b.minutes};case"geography":case"hierarchyid":return{datatype:e,control:"unsupported",label:t,labelForParameter:n}}}function eo(e,t,n,i){if(e.datatype!==t.datatype)throw new Error(`[Bug] Merging two different datatypes ${e.datatype} and ${t.datatype}.`);switch(e.datatype){case"string":return function(e,t,n,i){if("string"===e.datatype&&"string"===t.datatype){if(zi(e)&&zi(t)){if(e.definitionId===t.definitionId&&e.control===t.control){let o=e.filter;return o?t.filter&&(o=`(${o}) and (${t.filter})`):o=t.filter,{datatype:"string",control:e.control,definitionId:e.definitionId,filter:o,label:n,labelForParameter:i,foreignKeyName:e.foreignKeyName}}}else if("choice"===e.control&&"choice"===t.control){const o={};for(const t of e.choices)o[t]=!0;for(const e of t.choices)o[e]=!0;const c=Object.keys(o),r=e.format,s=t.format,l=e.color,a=t.color;return{datatype:"string",control:"choice",format:e=>r(e)||s(e),color:e=>(l?l(e):null)||(a?a(e):null),choices:c,label:n,labelForParameter:i}}return{datatype:"string",control:"text",label:n,labelForParameter:i}}}(e,t,n,i);case"numeric":return function(e,t,n,i){if("numeric"===e.datatype&&"numeric"===t.datatype){if(zi(e)&&zi(t)){if(e.definitionId===t.definitionId&&e.control===t.control){let o;return e.filter===t.filter?o=e.filter:(o=e.filter,o?t.filter&&(o=`(${o}) and (${t.filter})`):o=t.filter),{datatype:"numeric",control:e.control,definitionId:e.definitionId,filter:o,label:n,labelForParameter:i,foreignKeyName:e.foreignKeyName}}}else{if("choice"===e.control&&"choice"===t.control){if(e.choices.length===t.choices.length){let n=!0;for(let i=0;i<e.choices.length;i++)if(e.choices[i]!==t.choices[i]){n=!1;break}if(n)return Object.assign({},e)}const o={};for(const t of e.choices)o[t]=!0;for(const e of t.choices)o[e]=!0;const c=Object.keys(o).map(e=>+e),r=e.format,s=t.format,l=e.color,a=t.color;return{datatype:"numeric",control:"choice",format:e=>r(e)||s(e),color:e=>(l?l(e):null)||(a?a(e):null),choices:c,label:n,labelForParameter:i}}if("serial"===e.control&&"serial"===t.control&&e.prefix===t.prefix&&e.codeWidth===t.codeWidth)return{datatype:"numeric",control:"serial",prefix:e.prefix,codeWidth:e.codeWidth,label:n,labelForParameter:i}}return Ki(e,t,n,i)}throw new Error(`[Bug] Merging non numeric datatypes ${e} and ${t}.`)}(e,t,n,i);case"date":if("date"===t.datatype){const o=e.calendar===t.calendar?e.calendar:void 0;return{datatype:"date",control:"date",calendar:o,granularity:o?Math.max(e.granularity,t.granularity):Vi.a.days,label:n,labelForParameter:i}}break;case"datetime":if("datetime"===t.datatype){const o=e.calendar===t.calendar?e.calendar:void 0,c=o?Math.max(e.granularity,t.granularity):Vi.b.minutes;return{datatype:"datetime",control:"date"===e.control&&"date"===t.control?"date":"datetime",calendar:o,granularity:c,label:n,labelForParameter:i}}break;case"datetimeoffset":if("datetimeoffset"===t.datatype){const o=e.calendar===t.calendar?e.calendar:void 0,c=o?Math.max(e.granularity,t.granularity):Vi.b.minutes;return{datatype:"datetimeoffset",control:"date"===e.control&&"date"===t.control?"date":"datetime",calendar:o,granularity:c,label:n,labelForParameter:i}}break;case"bit":return{datatype:"bit",control:"check",label:n,labelForParameter:i};case"geography":case"hierarchyid":case"boolean":return{datatype:e.datatype,control:"unsupported",label:n,labelForParameter:i};case"null":return{datatype:"null",control:"null",label:n,labelForParameter:i}}throw new Error(`[Bug] Merging unhandled datatype ${e.datatype}.`)}function to(e,t,n){if(e.datatype===t)return e;if("null"===e.datatype){let i;return"boolean"!==t&&(i=n?Object.assign({},n):Zi(t,e.label,e.labelForParameter)),i}if("bit"===e.datatype){if("numeric"===t)return{datatype:t,control:"number",minDecimalPlaces:0,maxDecimalPlaces:0,label:e.label,labelForParameter:e.labelForParameter,isRightAligned:!0,noSeparator:!1};if("boolean"===t)return{datatype:t,control:"unsupported",label:e.label,labelForParameter:e.labelForParameter}}}function no(e,t){let n;if(t<e.arguments.length){const i=e.arguments[t];if(!(i instanceof Ai))throw new Error(`Function '${e.name}': The ${1===t?"second ":2===t?"third ":""}argument must be a simple quote like this: 'UQ'.`);if(n=i.value.toUpperCase(),Vi.c.indexOf(n)<0)throw new Error(`Function '${e.name}': The ${1===t?"second ":2===t?"third ":""}argument ${i} must be one of the supported calendars: '${Vi.c.join("', '")}'.`)}return n}class io{static datePartDesc(e,t,n){return{datatype:"numeric",control:"number",label:e,labelForParameter:n,minDecimalPlaces:0,maxDecimalPlaces:0,isRightAligned:!1,noSeparator:!0}}static quarterDesc(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[1,2,3,4],format:e=>e?t.instant(`ShortQuarter${e}`):""}}static monthDesc(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[1,2,3,4,5,6,7,8,9,10,11,12],format:e=>e?t.instant(`ShortMonth${e}`):""}}static weekdayDesc(e,t,n){return{datatype:"numeric",control:"choice",label:e,labelForParameter:n,choices:[2,3,4,5,6,7,1],format:e=>e?t.instant(`ShortDay${1===e?7:e-1}`):""}}static needsQuotes(e){switch(e){case"string":case"date":case"datetime":case"datetimeoffset":return!0;default:return!1}}static stringify(e,t,n,i=1,o){return e?function e(c){if(c instanceof ji){const{desc:e,datatype:i,isRequired:o,defaultExp:r}=n[c.keyLower],s=t[c.keyLower];if(!e)throw new Error(`[Bug] The descriptor for parameter @${c.key} was not supplied.`);if(Object(N.n)(s))return io.needsQuotes(i)?`'${(s+"").replace(/\'/g,"''")}'`:s+"";if(r)return r.toString();if(o)throw new Error(`Required parameter @${c.key} was not supplied.`);return null}if(c instanceof ki){let e=c.toString();return 2===i&&c.hasSecondary?e+="2":3===i&&c.hasTernary&&(e+="3"),o?`${o}.${e}`:e}if(c instanceof Oi){const t=c.arguments.map(t=>Wi(e(t)));return t.some(e=>null===e)?null:`${c.nameLower}(${t.join(", ")})`}if(!(c instanceof _i)){if(c instanceof Li){const t=e(c.operand);return null===t?null:`(${c.operator.toLowerCase()} ${t})`}return c.toString()}{const t=e(c.left),n=e(c.right);switch(c.operator.toLowerCase()){case"and":case"or":case"&&":case"||":return null===t?n:null===n?t:`(${t} ${c.operator.toLowerCase()} ${n})`;default:return null===t||null===n?null:`(${t} ${c.operator.toLowerCase()} ${n})`}}}(e):null}static canShowAsTree(e,t,n){return!!e&&"entity"===e.datatype&&!!wi.h[e.control](t,n,e.definitionId).properties.Parent}static getReportInfos(e,t,n){const i=e.Collection,o=e.DefinitionId;if(!i)throw new Error("The collection was not specified");const c=t.currentTenant,r={},s={},l={},a={};for(const x of e.Parameters||[]){const e=x.Key.toLowerCase();x.Control&&(l[e]=Object(N.h)(t.currentTenant,x.Control,x.ControlOptions));const n=Di.parseSingle(x.DefaultExpression);if(n){const e=n.aggregations(),t=n.columnAccesses(),i=n.parameters();if(e.length>0)throw new Error(`Parameter default Expression cannot contain aggregation functions like '${e[0].name}'.`);if(t.length>0)throw new Error(`Parameter default Expression cannot contain column access literals like '${t[0]}'.`);if(i.length>0)throw new Error(`Parameter default Expression cannot contain parameters like '${i[0]}'.`)}a[e]=n}const u=Di.parseSingle(e.Filter);if(u){const e=u.aggregations();if(e.length>0)throw new Error(`Filter: Expression cannot contain aggregation functions like '${e[0].name}'.`)}let d;if("Summary"===e.Type&&(d=Di.parseSingle(e.Having),d)){const e=d.unaggregatedColumnAccesses();if(e.length>0)throw new Error(`Having: Expression cannot contain unaggregated column accesses like '${e[0]}'.`)}if("Details"===e.Type||e.IsCustomDrilldown){const c=Di.parse(e.OrderBy,{expectDirKeywords:!0});for(const e of c){const c=e.aggregations(),s=e.parameters(),a=e.columnAccesses();if(c.length>0)throw new Error(`Order By: Expression cannot contain aggregation functions like '${c[0].name}'.`);if(s.length>0)throw new Error(`Order By: Expression cannot contain parameters like '${s[0]}'.`);if(0===a.length)throw new Error(`Order By: Expression atom cannot be a constant like '${e}'.`);{const c=io.nativeDesc(e,l,r,i,o,t,n);switch(c.datatype){case"boolean":case"entity":throw new Error(`Order By: Expression cannot be of type ${c.datatype}.`)}}}}const b=(e,s)=>{const a=Di.parseSingle(e.KeyExpression);let u,d,b,f,m,g;if(!a)throw new Error("Dimension key Expression cannot be empty.");{const e=a.aggregations(),c=a.parameters(),s=a.columnAccesses();if(e.length>0)throw new Error(`Dimension key Expression cannot contain aggregation functions like '${e[0].name}'.`);if(c.length>0)throw new Error(`Dimension key Expression cannot contain parameters like '${c[0]}'.`);if(0===s.length)throw new Error("Dimension key Expression must contain at least one column access.");switch(u=io.nativeDesc(a,l,r,i,o,t,n),u.datatype){case"boolean":case"hierarchyid":case"geography":throw new Error(`Dimension key Expression cannot be of type ${u.datatype}.`);case"entity":d=wi.h[u.control](t,n,u.definitionId)}}const p=[];if("entity"===u.datatype){if(m=Di.parseSingle(e.DisplayExpression),m){const e=m.aggregations(),i=m.parameters();if(e.length>0)throw new Error(`Dimension display Expression cannot contain aggregation functions like '${e[0].name}'.`);if(i.length>0)throw new Error(`Dimension display Expression cannot contain parameters like '${i[0]}'.`);switch(g=io.nativeDesc(m,l,r,u.control,u.definitionId,t,n),g.datatype){case"boolean":case"entity":case"hierarchyid":case"geography":throw new Error(`Dimension display Expression ${m} cannot be of type ${g.datatype}.`)}}for(const i of e.Attributes||[]){const e=i.Localize,o=Di.parseSingle(i.Expression);if(!o)throw new Error("Dimension attribute Expression cannot be empty.");{const s=o.aggregations(),a=o.parameters();if(s.length>0)throw new Error(`Dimension attribute expression cannot contain aggregation functions like '${s[0].name}'.`);if(a.length>0)throw new Error(`Dimension attribute expression cannot contain parameters like '${a[0]}'.`);{const s=o.toString(),a=io.nativeDesc(o,l,r,u.control,u.definitionId,t,n);let d;switch(a.datatype){case"boolean":case"hierarchyid":case"geography":throw new Error(`Dimension attribute Expression ${o} cannot be of type ${a.datatype}.`);case"entity":d=wi.h[a.control](t,n,a.definitionId)}const f=!!i.OrderDirection;f&&(b=i.OrderDirection),p.push({exp:o,expToString:s,localize:e,desc:a,entityDesc:d,label:i.Label?()=>c.localize(i.Label,i.Label2,i.Label3):a.label,isOrdered:f})}}}}else if(f=e.Control?Object(N.h)(t.currentTenant,e.Control,e.ControlOptions):null,f&&!Xi(f,u.datatype,()=>"",t,n))throw new Error(`Dimension key expression ${a} (${u.datatype}) is incompatible with the selected control.`);{const i=e.Localize,o=e.Label?()=>c.localize(e.Label,e.Label2,e.Label3):u.label,r=!!e.OrderDirection;r&&(b=e.OrderDirection);const l=e.AutoExpandLevel,h=e.ShowAsTree&&io.canShowAsTree(u,t,n);s.push({keyExp:a,dispExp:m,localize:i,keyDesc:u,desc:f||g||u,entityDesc:d,label:o,orderDir:b,isOrdered:r,attributes:p,autoExpandLevel:l,showAsTree:h})}},f=[],m=[];if("Summary"===e.Type){for(const t of e.Rows)b(t,f);for(const t of e.Columns)b(t,m)}const g=[];if("Summary"===e.Type)for(const x of e.Measures){const e=Di.parseSingle(x.Expression);if(!e)throw new Error("Measure expression cannot be empty.");{const t=e.unaggregatedColumnAccesses();if(t.length>0)throw new Error(`Measure expression cannot contain unaggregated column accesses like '${t[0]}'.`)}function p(c,s){const a=Di.parseSingle(c,{placeholderReplacement:e});if(a){const e=a.unaggregatedColumnAccesses();if(e.length>0)throw new Error(`Measure ${s} expression cannot contain unaggregated column accesses like '${e[0]}'.`);if(io.tryBooleanDesc(a,l,r,i,o,t,n))return a;throw new Error(`Measure ${s} expression ${a} could not be interpreted as a boolean.`)}}const c=x.Control?Object(N.h)(t.currentTenant,x.Control,x.ControlOptions):null;g.push({measure:x,mainExp:e,visualDesc:c,orderDir:x.OrderDirection,success:p(x.SuccessWhen,"Success When"),warning:p(x.WarningWhen,"Warning When"),danger:p(x.DangerWhen,"Danger When")})}const h=[];if("Details"===e.Type||e.IsCustomDrilldown)for(const x of e.Select){const n=x.Localize,i=Di.parseSingle(x.Expression);if(!i)throw new Error("Select expression cannot be empty.");{const o=i.aggregations(),c=i.parameters();if(o.length>0)throw new Error(`Select expression cannot contain aggregation functions like '${o[0].name}'.`);if("Summary"===e.Type&&e.IsCustomDrilldown&&c.length>0)throw new Error(`Expression cannot contain parameters like '${c[0]}'.`);{const e=x.Control?Object(N.h)(t.currentTenant,x.Control,x.ControlOptions):null;h.push({exp:i,visualDesc:e,localize:n,select:x})}}}let v=[],I=[];for(;;){if(v=[],I=[],u&&!io.tryBooleanDesc(u,l,r,i,o,t,n))throw new Error("Filter expression could not be interpreted as a boolean.");if(d&&!io.tryBooleanDesc(d,l,r,i,o,t,n))throw new Error("Having expression could not be interpreted as a boolean.");for(const{measure:e,mainExp:s,visualDesc:a,orderDir:u,success:d,warning:b,danger:m}of g){const g=io.nativeDesc(s,l,r,i,o,t,n);switch(g.datatype){case"boolean":case"entity":case"hierarchyid":case"geography":throw new Error(`Measure expression ${s} cannot be of type ${g.datatype}.`)}function p(e,c){if(e&&!io.tryBooleanDesc(e,l,r,i,o,t,n))throw new Error(`Measure ${c} expression ${e} could not be interpreted as a boolean.`)}if(p(d,"Success When"),p(b,"Warning When"),p(m,"Danger When"),a&&!Xi(a,g.datatype,()=>"",t,n))throw new Error(`Measure expression ${s} (${g.datatype}) is incompatible with the selected control.`);{const t=!!u;t&&f.forEach(e=>e.orderDir=u),v.push({exp:s,desc:a||g,label:e.Label?()=>c.localize(e.Label,e.Label2,e.Label3):g.label,isNumeric:Object(wi.f)(g),isOrdered:t,success:d,warning:b,danger:m})}}for(const{exp:e,visualDesc:s,localize:a,select:u}of h){const d=e.toString(),b=io.nativeDesc(e,l,r,i,o,t,n);let f;switch(b.datatype){case"boolean":case"hierarchyid":case"geography":throw new Error(`Select expression ${e} cannot be of type ${b.datatype}.`);case"entity":f=wi.h[b.control](t,n,b.definitionId)}if(s&&!Xi(s,b.datatype,()=>"",t,n))throw new Error(`Select expression ${e} (${b.datatype}) is incompatible with the selected control.`);I.push({exp:e,expToString:d,localize:a,desc:s||b,entityDesc:f,label:u.Label?()=>c.localize(u.Label,u.Label2,u.Label3):b.label})}{let e=!1;for(const t of Object.keys(r)){const n=r[t],i=s[t];if(!i||i.datatype!==n.datatype){e=!0;break}}if(!e)break;for(const t of Object.keys(r))s[t]=r[t]}}const y=[],w=[];u&&u.parametersInner(y),d&&d.parametersInner(y);for(const{exp:x,success:U,warning:R,danger:D}of v)x.parametersInner(y),x.parametersInner(w),U&&(U.parametersInner(y),U.parametersInner(w)),R&&(R.parametersInner(y),R.parametersInner(w)),D&&(D.parametersInner(y),D.parametersInner(w));for(const{exp:x}of I)x.parametersInner(y),x.parametersInner(w);const C={},M=[];for(const x of y)C[x.keyLower]||(C[x.keyLower]=x.key,M.push(x.keyLower));const V={};for(const x of w)V[x.keyLower]=!0;const T={};for(const x of M){const e=r[x];T[x]={key:C[x],keyLower:x,desc:e,datatype:e.datatype,label:e.label,isRequired:!!V[x]}}const E=[];for(const x of e.Parameters||[]){const e=x.Key.toLowerCase();if("None"===x.Visibility)delete T[e];else{const r=T[e];if(r){const s="Required"===x.Visibility,l=r.isRequired;let u;if(!s)if(u=a[e],u){if(!io.tryDesc(u,void 0,void 0,r.datatype,i,o,t,n))throw new Error(`Parameter @${x.Key}: Default Expression ${u} could not be interpreted as a ${r.datatype}`);r.defaultExp=u}else if(l)throw new Error(`Parameter @${x.Key} is used in a measure or a select expression making it required. Either specify its Default Expression or set its Visibility to Required.`);r.isRequired=s,x.Label&&(r.label=()=>c.localize(x.Label,x.Label2,x.Label3)),E.push(r),delete T[e]}}}for(const x of Object.keys(T))E.push(T[x]);return{rows:f,columns:m,measures:v,select:I,filter:u,having:d,parameters:E}}static nativeDesc(e,t,n,i,o,c,r){return io.tryDesc(e,t,n,null,i,o,c,r)}static tryBooleanDesc(e,t,n,i,o,c,r){return io.tryDesc(e,t,n,"boolean",i,o,c,r)}static tryDesc(e,t,n,i,o,c,r,s){function l(e,i){let o,c;if(function(e){return!!e&&!!e.datatype}(i)?(o=i,c=i.datatype):(o=null,c=i),e instanceof Oi){const t=e.nameLower;switch(t){case"min":case"max":{const n=l(u(e),i);if(n){const e=Object.assign({},n),i=e.label;return e.label=()=>s.instant("DefaultAggregationMeasure",{0:s.instant("Aggregation_"+t),1:i()}),e}return}case"adddays":case"addmonths":case"addyears":if("date"===c||"datetime"===c||"datetimeoffset"===c){const t=l(f(e),i);return t?Object.assign(Object.assign({},t),{label:Gi(s)}):void 0}return;case"if":{const{arg2:t,arg3:n}=d(e),o=l(t,i),c=l(n,i);return o&&c?eo(o,c,Gi(s)):void 0}case"isnull":{const{arg1:t,arg2:n}=b(e),o=l(t,i),c=l(n,i);return o&&c?eo(o,c,Gi(s)):void 0}case"today":if(e.arguments.length>0)throw new Error(`Function '${e.name}' does not accept any arguments.`);switch(c){case"date":case"datetime":return{datatype:c,control:"date",label:()=>s.instant("Today"),granularity:Vi.a.days};default:return}}}else if(e instanceof _i);else if(e instanceof Ai)switch(c){case"date":case"datetime":case"datetimeoffset":if(isNaN(Date.parse(e.value)))return;if(o)return o;{const e=Gi(s);return"date"===c?{datatype:c,control:"date",label:e,granularity:Vi.a.days}:{datatype:c,control:"datetime",label:e,granularity:Vi.b.minutes}}}else if(e instanceof ji){const i=t[e.keyLower],l=o&&o.labelForParameter?o.labelForParameter:()=>e.key;let a,u;if(i?(a=Xi(i,c,l,r,s),a?u=a:(a=Yi(i,l,r,s),u=to(a,c,o))):o?(a=Object.assign(Object.assign({},o),{label:l}),u=a):"boolean"===c?(a={datatype:"bit",control:"check",label:l},u={datatype:c,control:"unsupported",label:l}):(a=Zi(c,l),u=a),u){const t=n[e.keyLower];return t?Ji(t.datatype)>Ji(a.datatype)?(n[e.keyLower]=a,u):t.datatype===a.datatype?(n[e.keyLower]=eo(t,a,a.label),u):void 0:(n[e.keyLower]=a,u)}return}return to(a(e,o?o.labelForParameter:void 0),c,o)}function a(e,i){if(e instanceof ki){const t=Object(wi.b)(e.path,o,c,r,s);{const n=Object(wi.d)(t,e.property);if(n){const i=t.properties[e.property],o=i?i.datatype:"numeric";return Object.assign(Object.assign({},n),{datatype:o,label:i?i.label:()=>`${n.label()} (${s.instant("Id")})`,labelForParameter:n.label})}}const n=t.properties[e.property];if(!n)throw new Error(`Property '${e.property}' does not exist on type ${t.titleSingular()}.`);if("Id"===e.property&&("numeric"===n.datatype||"string"===n.datatype)){if(0===e.path.length)return{datatype:n.datatype,control:o,definitionId:c,foreignKeyName:null,label:n.label,labelForParameter:wi.h[o](r,s,c).titleSingular};{const t=Object(wi.b)(e.path.slice(0,-1),o,c,r,s).properties[e.path[e.path.length-1]];return Object.assign(Object.assign({},t),{datatype:n.datatype,label:n.label,labelForParameter:t.label})}}if("text"===n.control){const n=r.currentTenant.settings;if(n.SecondaryLanguageId){const n=t.properties[e.property+"2"];n&&"text"===n.control&&(e.hasSecondary=!0)}if(n.TernaryLanguageId){const n=t.properties[e.property+"3"];n&&"text"===n.control&&(e.hasTernary=!0)}}return n.labelForParameter=n.label,n}if(e instanceof Oi){const t=e.nameLower;switch(t){case"count":case"sum":case"avg":case"min":case"max":{const n=u(e);let i;if("count"===t||"min"===t||"max"===t){if(i=a(n),"boolean"===i.datatype||"entity"===i.datatype)throw new Error(`Function '${e.name}': The first argument ${n} cannot have type ${i.datatype}.`);i="count"===t?{datatype:"numeric",control:"number",maxDecimalPlaces:0,minDecimalPlaces:0,isRightAligned:!0,label:i.label,labelForParameter:i.labelForParameter,noSeparator:!1}:Object.assign({},i)}else{if(i=l(n,"numeric"),!i)throw new Error(`Function '${e.name}': The first argument ${n} could not be interpreted as a numeric.`);i=Ki(i,i,i.label,i.labelForParameter)}const o=i.label,c=i.labelForParameter;let r;return c&&(r=()=>s.instant("DefaultAggregationMeasure",{0:s.instant("Aggregation_"+t),1:c()})),i.label=()=>s.instant("DefaultAggregationMeasure",{0:s.instant("Aggregation_"+t),1:o()}),i.labelForParameter=r,i}case"year":case"quarter":case"month":case"day":{if(e.arguments.length<1||e.arguments.length>2)throw new Error(`No overload for function '${e.name}' accepts ${e.arguments.length} arguments.`);const n=t,i=e.arguments[0],o=l(i,"date")||l(i,"datetime")||l(i,"datetimeoffset");if(!o)throw new Error(`Function '${e.name}': The first argument ${i} could not be interpreted as a date, datetime or datetimeoffset.`);{const t=no(e,1)||"GC",i=()=>`${o.label()} (${s.instant("DatePart_"+n)})`,c=o.labelForParameter?()=>`${o.labelForParameter()} (${s.instant("DatePart_"+n)})`:void 0;switch(n){case"year":case"day":return io.datePartDesc(i,s,c);case"quarter":return io.quarterDesc(i,s,c);case"month":if("GC"===t)return io.monthDesc(i,s,c);if("UQ"===t)return{datatype:"numeric",control:"choice",label:i,choices:[1,2,3,4,5,6,7,8,9,10,11,12],format:e=>e?s.instant(`FullMonthUq${e}`):"",labelForParameter:c};if("ET"===t)return{datatype:"numeric",control:"choice",label:i,choices:[1,2,3,4,5,6,7,8,9,10,11,12,13],format:e=>e?s.instant(`FullMonthEt${e}`):"",labelForParameter:c};{const e=`Unknown calendar ${t}`;throw console.error(e),new Error(e)}default:throw new Error("Never")}}}case"weekday":case"hour":case"minute":case"second":{const n=1;if(e.arguments.length!==n)throw new Error(`Function '${e.name}' accepts exactly ${n} argument(s).`);const i=t,o="weekday"===i,c=e.arguments[0],r=(o?l(c,"date"):null)||l(c,"datetime")||l(c,"datetimeoffset");if(!r)throw new Error(`Function '${e.name}': The first argument ${c} could not be interpreted as a ${o?"date, ":""}datetime or datetimeoffset.`);{const e=()=>`${r.label()} (${s.instant("DatePart_"+i)})`,t=r.labelForParameter?()=>`${r.labelForParameter()} (${s.instant("DatePart_"+i)})`:void 0;switch(i){case"weekday":return io.weekdayDesc(e,s,t);case"hour":case"minute":case"second":return io.datePartDesc(e,s,t);default:throw new Error("Never")}}}case"addyears":case"addmonths":case"adddays":{const n=f(e),i=l(n,"date")||l(n,"datetime")||l(n,"datetimeoffset");if(!i)throw new Error(`Function '${e.name}': The second argument ${n} could not be interpreted as a date, datetime or datetimeoffset.`);let o,c;return"date"!==i.control&&"datetime"!==i.control||(c=i.granularity,"adddays"===t?(c=Math.max(c,Vi.a.days),o=i.calendar):"addmonths"===t?(c=Math.max(c,Vi.a.months),o="GC"):o="GC"),Object.assign(Object.assign({},i),{granularity:c,calendar:o,label:Gi(s)})}case"startofyear":case"startofmonth":case"date":{if(e.arguments.length<1||e.arguments.length>2)throw new Error(`No overload for function '${e.name}' accepts ${e.arguments.length} arguments.`);const n=e.arguments[0],i=l(n,"date")||l(n,"datetime")||l(n,"datetimeoffset");if(i){const n=no(e,1)||("date"===t?i.calendar:"GC"),o="startofyear"===t?Vi.a.years:"startofmonth"===t?Vi.a.months:Vi.a.days;return{datatype:"date",control:"date",label:Gi(s),granularity:o,calendar:n}}throw new Error(`Function '${e.name}': The argument ${n} could not be interpreted as a date, datetime or datetimeoffset.`)}case"diffdays":case"diffhours":case"diffminutes":case"diffseconds":{const n=2;if(e.arguments.length!==n)throw new Error(`Function '${e.name}' accepts exactly ${n} argument(s).`);const i=e.arguments[0];if(!(l(i,"date")||l(i,"datetime")||l(i,"datetimeoffset")))throw new Error(`Function '${e.name}': The argument ${i} could not be interpreted as a date, datetime or datetimeoffset.`);const o=e.arguments[1];if(!(l(o,"date")||l(o,"datetime")||l(o,"datetimeoffset")))throw new Error(`Function '${e.name}': The argument ${o} could not be interpreted as a date, datetime or datetimeoffset.`);const c="diffseconds"===t?0:1;return{datatype:"numeric",control:"number",maxDecimalPlaces:c,minDecimalPlaces:c,noSeparator:!1,isRightAligned:!0,label:Gi(s)}}case"not":{const t=1;if(e.arguments.length!==t)throw new Error(`Function '${e.name}' accepts exactly ${t} argument(s).`);const n=e.arguments[0],i=l(n,"boolean");if(i)return Object.assign({},i);throw new Error(`Function '${e.name}': The argument ${n} could not be interpreted as a boolean.`)}case"abs":{const t=1;if(e.arguments.length!==t)throw new Error(`Function '${e.name}' accepts exactly ${t} argument(s).`);const n=e.arguments[0],i=l(n,"numeric");if(i)return Object.assign({},i);throw new Error(`Function '${e.name}': The argument ${n} could not be interpreted as a numeric.`)}case"if":{const{arg2:t,arg3:n}=d(e);let i=a(t);const o=i.datatype;if("boolean"===o||"entity"===o)throw new Error(`Function '${e.name}': The second argument ${t} cannot have a type ${o}.`);let c=a(n);const r=c.datatype;if("boolean"===r||"entity"===r)throw new Error(`Function '${e.name}': The third argument ${n} cannot have a type ${r}.`);if(Ji(o)>Ji(r)?i=l(t,c):Ji(r)>Ji(o)&&(c=l(n,i)),!i||!c)throw new Error(`Function '${e.name}' cannot be used on expressions ${t} (${o}) and ${n} (${r}) because they have incompatible data types.`);return eo(i,c,Gi(s))}case"isnull":{const{arg1:t,arg2:n}=b(e);let i=a(t);const o=i.datatype;if("boolean"===o||"entity"===o)throw new Error(`Function '${e.name}': The first argument ${t} cannot have type ${o}.`);let c=a(n);const r=c.datatype;if("boolean"===r||"entity"===r)throw new Error(`Function '${e.name}': The second argument ${n} cannot have type ${r}.`);if(Ji(o)>Ji(r)?i=l(t,c):Ji(r)>Ji(o)&&(c=l(n,i)),!i||!c)throw new Error(`Function '${e.name}' cannot be used on expressions ${t} (${o}) and ${n} (${r}) because they have incompatible data types.`);return eo(i,c,Gi(s))}case"today":if(e.arguments.length>0)throw new Error(`Function '${e.name}' does not accept any arguments.`);return{datatype:"date",control:"date",label:()=>s.instant("Today"),granularity:Vi.a.days};case"now":if(e.arguments.length>0)throw new Error(`Function '${e.name}' does not accept any arguments.`);return{datatype:"datetimeoffset",control:"datetime",label:()=>s.instant("Now"),granularity:Vi.b.minutes};case"me":if(e.arguments.length>0)throw new Error(`Function '${e.name}' does not accept any arguments.`);return{datatype:"numeric",control:"number",minDecimalPlaces:0,maxDecimalPlaces:0,label:()=>s.instant("CurrentUser"),isRightAligned:!1,noSeparator:!0};default:throw new Error(`Unknown function '${e.name}'.`)}}else if(e instanceof _i)switch(e.operator.toLowerCase()){case"+":{let t=l(e.left,"numeric"),n=l(e.right,t||"numeric");const i=Gi(s);if(!t||!n){if(t=l(e.left,"string"),n=l(e.right,"string"),!t||!n){const t=a(e.left).datatype,n=a(e.right).datatype;throw new Error(`Operator '${e.operator}' cannot be used on expressions ${e.left} (${t}) and ${e.right} (${n}) because they have incompatible data types.`)}return{datatype:"string",control:"text",label:i}}return Ki(t,n,i)}case"-":case"*":case"/":case"%":{const t=l(e.left,"numeric");if(!t)throw new Error(`Operator '${e.operator}': Left operand ${e.left} could not be interpreted as a numeric.`);const n=l(e.right,"numeric");if(!n)throw new Error(`Operator '${e.operator}': Right operand ${e.right} could not be interpreted as a numeric.`);return Ki(t,n,Gi(s))}case"&&":case"and":case"||":case"or":if(!l(e.left,"boolean"))throw new Error(`Operator '${e.operator}': Left operand ${e.left} could not be interpreted as a boolean.`);if(!l(e.right,"boolean"))throw new Error(`Operator '${e.operator}': Right operand ${e.right} could not be interpreted as a boolean.`);return{datatype:"boolean",control:"unsupported",label:Gi(s)};case"<>":case"!=":case"ne":case">":case"gt":case">=":case"ge":case"<":case"lt":case"<=":case"le":case"=":case"eq":{const t=e.left;let n=a(t);const i=n.datatype;if("boolean"===i||"entity"===i)throw new Error(`Operator '${e.operator}': The left operand ${t} cannot have type ${i}.`);const o=e.right;let c=a(o,n.labelForParameter);const r=c.datatype;if("boolean"===r||"entity"===r)throw new Error(`Operator '${e.operator}': The right operand ${o} cannot have type ${r}.`);if(Ji(i)>Ji(r)?n=l(t,c):Ji(r)>Ji(i)&&(c=l(o,n)),!n||!c)throw new Error(`Operator '${e.operator}' cannot be used on expressions ${t} (${i}) and ${o} (${r}) because they have incompatible data types.`);return{datatype:"boolean",control:"unsupported",label:Gi(s)}}case"descof":{if(!(e.left instanceof ki))throw new Error(`Operator '${e.operator}': The left operand ${e.left} must be a column access like AccountType.Concept.`);const t=e.right.columnAccesses()[0];if(t===e.right)throw new Error(`Operator '${e.operator}': The right operand cannot be a column access expression like ${t}.`);if(t)throw new Error(`Operator '${e.operator}': The right operand cannot contain a column access expression like ${t}.`);const n=e.left;let i=a(n);const o=i.datatype;if("boolean"===o||"entity"===o)throw new Error(`Operator '${e.operator}': The left operand ${n} cannot have type ${o}.`);const c=e.right;let r=a(c,i.labelForParameter);const u=r.datatype;if("boolean"===u||"entity"===u)throw new Error(`Operator '${e.operator}': The right operand ${c} cannot have type ${u}.`);if(Ji(o)>Ji(u)?i=l(n,r):Ji(u)>Ji(o)&&(r=l(c,i)),!i||!r)throw new Error(`Operator '${e.operator}' cannot be used on expressions ${n} (${o}) and ${c} (${u}) because they have incompatible data types.`);return{datatype:"boolean",control:"unsupported",label:Gi(s)}}case"contains":case"startsw":case"endsw":{const t=l(e.left,"string");if(!t)throw new Error(`Operator '${e.operator}': Left operand ${e.left} could not be interpreted as string.`);if(!l(e.right,t))throw new Error(`Operator '${e.operator}': Right operand ${e.right} could not be interpreted as string.`);return{datatype:"boolean",control:"unsupported",label:Gi(s)}}}else{if(!(e instanceof Li)){if(e instanceof Ai)return{datatype:"string",control:"text",label:()=>e.toString()};if(e instanceof Fi)return{datatype:"numeric",control:"number",minDecimalPlaces:e.decimals,maxDecimalPlaces:e.decimals,label:()=>e.toString(),isRightAligned:!0,noSeparator:!1};if(e instanceof Pi)return{datatype:"null",control:"null",label:()=>""};if(e instanceof Ni)return{datatype:"bit",control:"check",label:()=>s.instant(e.value?"Yes":"No")};if(e instanceof ji){const o=t[e.keyLower];if(o){const t=Yi(o,i||(()=>e.key),r,s);return n[e.keyLower]=t,t}{const t=n[e.keyLower];if(t)return Object.assign({},t);{const t={datatype:"null",control:"null",label:i||(()=>e.key)};return n[e.keyLower]=t,t}}}throw Error(`[Bug] ${e} has an unknown Queryex type.`)}{const t=e.operator.toLowerCase();switch(t){case"+":case"-":{const n=l(e.operand,"numeric");if(!n)throw new Error(`Operator '${e.operator}': Operand ${e.operand} could not be interpreted as numeric.`);return"+"===t?Object.assign({},n):"number"===n.control||"percent"===n.control?{datatype:"numeric",control:n.control,maxDecimalPlaces:n.maxDecimalPlaces,minDecimalPlaces:n.minDecimalPlaces,label:Gi(s),isRightAligned:n.isRightAligned,noSeparator:n.noSeparator}:{datatype:"numeric",control:"number",maxDecimalPlaces:0,minDecimalPlaces:0,label:Gi(s),isRightAligned:!1,noSeparator:!1}}case"!":case"not":if(!l(e.operand,"boolean"))throw new Error(`Operator '${e.operator}': Operand ${e.operand} could not be interpreted as boolean.`);return{datatype:"boolean",control:"unsupported",label:Gi(s)}}}}}function u(e){if(e.arguments.length<1||e.arguments.length>2)throw new Error(`No overload for function '${e.name}' accepts ${e.arguments.length} arguments.`);const t=e.arguments[0];if(e.arguments.length>=2){const t=e.arguments[1];if(!l(t,"boolean"))throw new Error(`Function '${e.name}': The second argument ${t} could not be interpreted as a boolean.`)}return t}function d(e){if(3!==e.arguments.length)throw new Error(`Function '${e.name}' accepts exactly 3 argument(s).`);const t=e.arguments[0];if(!l(t,"boolean"))throw new Error(`Function '${e.name}': The first argument ${t} could not be interpreted as a boolean.`);return{arg2:e.arguments[1],arg3:e.arguments[2]}}function b(e){if(2!==e.arguments.length)throw new Error(`Function '${e.name}' accepts exactly 2 argument(s).`);return{arg1:e.arguments[0],arg2:e.arguments[1]}}function f(e){if(2!==e.arguments.length)throw new Error(`Function '${e.name}' accepts exactly 2 argument(s).`);const t=e.arguments[0];if(!l(t,"numeric"))throw new Error(`Function '${e.name}': The first argument ${t} could not be interpreted as a numeric.`);return e.arguments[1]}return i?l(e,i):a(e)}static evaluateExp(e,t,n,i){function o(e){return void 0===e?null:e}return function e(c){if(c instanceof ki)throw new Error("Client side evaluation of QueryexColumnAccess not possible.");if(c instanceof Oi){const n=c.name.toLowerCase();switch(n){case"count":case"sum":case"min":case"max":return o(t[c.index]);case"avg":{const e=o(t[c.sumIndex]),n=o(t[c.countIndex]);return null===e||null===n?null:e/n}case"year":case"quarter":case"month":case"day":{const t=e(c.arguments[0]);if(null===t)return null;let i="GC";c.arguments.length>1&&(i=e(c.arguments[1])||"GC");const o=new Date(t),r=Object(Hi.g)(o,i);switch(n){case"year":return r.year;case"quarter":return Math.min(Math.floor((r.month-1)/3)+1,4);case"month":return r.month;case"day":return r.day;default:return}}case"weekday":case"hour":case"minute":case"second":{const t=e(c.arguments[0]);if(null===t)return null;const i=new Date(t);switch(n){case"weekday":return i.getDay()+1;case"hour":return i.getHours();case"minute":return i.getMinutes();case"second":return i.getSeconds();default:return}}case"addyears":case"addmonths":case"adddays":{const t=e(c.arguments[0]);if(null===t)return null;const i=e(c.arguments[1]);if(null===i)return null;const o=new Date(i);switch(n){case"adddays":o.setDate(o.getDate()+t);break;case"addmonths":o.setMonth(o.getMonth()+t);break;case"addyears":o.setFullYear(o.getFullYear()+t)}return i.endsWith("Z")?`${o.toISOString().split(".")[0]}.${i.split(".")[1]}`:Object(Mi.d)(o)}case"startofyear":case"startofmonth":case"date":{const t=e(c.arguments[0]);if(null===t)return null;let i="GC";c.arguments.length>1&&(i=e(c.arguments[1])||"GC");let o=new Date(t);const r=Object(Hi.g)(o,i);switch(n){case"startofmonth":r.day=1;break;case"startofyear":r.day=1,r.month=1}return o=Object(Hi.c)(r,i),`${Object(Mi.c)(o)}T00:00:00.000`}case"diffdays":case"diffhours":case"diffminutes":case"diffseconds":{const t=e(c.arguments[0]);if(null===t)return null;const i=e(c.arguments[1]);if(null===i)return null;let o;switch(n){case"diffdays":o=86400;break;case"diffhours":o=3600;break;case"diffminutes":o=60;break;case"diffseconds":o=1;break;default:return}const r=new Date(t),s=new Date(i);return Math.floor((s.getTime()-r.getTime())/1e3)/o}case"not":return!e(c.arguments[0]);case"abs":{const t=e(c.arguments[0]);return null===t?null:Math.abs(t)}case"if":{const t=e(c.arguments[0]);return e(t?c.arguments[1]:c.arguments[2])}case"isnull":{const t=e(c.arguments[0]);return null!==t?t:e(c.arguments[1])}case"today":return Object(Mi.e)();case"now":return Object(Mi.b)();case"me":return i.currentTenant.userSettings.UserId;default:throw new Error(`Unknown function '${c.name}'.`)}}else if(c instanceof _i){const t=c.operator.toLowerCase(),n=e(c.left),i=e(c.right);switch(t){case"+":return null===n||null===i?null:n+i;case"-":return null===n||null===i?null:n-i;case"*":return null===n||null===i?null:n*i;case"/":return null===n||null===i?null:n/i;case"%":return null===n||null===i?null:n%i;case"&&":case"and":return n&&i;case"||":case"or":return n||i;case"<>":case"!=":case"ne":return n!==i;case">":case"gt":return null!==n&&null!==i&&n>i;case">=":case"ge":return null!==n&&null!==i&&n>=i;case"<":case"lt":return null!==n&&null!==i&&n<i;case"<=":case"le":return null!==n&&null!==i&&n<=i;case"=":case"eq":return n===i;case"descof":throw new Error("descof not implemented");case"contains":return null!==n&&null!==i&&n.includes(i);case"startsw":return null!==n&&null!==i&&n.startsWith(i);case"endsw":return null!==n&&null!==i&&n.endsWith(i)}}else{if(!(c instanceof Li)){if(c instanceof Ai)return c.value;if(c instanceof Fi)return c.value;if(c instanceof Pi)return null;if(c instanceof Ni)return c.value;if(c instanceof ji){const e=n[c.keyLower];return Object(N.n)(e)?e:null}throw Error(`[Bug] ${c} has an unknown Queryex type.`)}{const t=c.operator.toLowerCase(),n=e(c.operand);switch(t){case"+":return n;case"-":return null===n?null:-n;case"!":case"not":return!n}}}}(e)}}var oo=n("vxfF"),co=n("zQsl");const ro=["flatHeader"];function so(e,t){if(1&e&&(o.Vb(0,"span",12),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.value,n=e.desc,i=e.entityDesc,c=o.lc();o.Qc("background-color",c.stateColor(t,n)),o.Bb(1),o.Uc(c.displayValue(t,n,i))}}function lo(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.value,n=e.desc,i=e.entityDesc,c=o.lc();o.Bb(1),o.Uc(c.displayValue(t,n,i))}}function ao(e,t){if(1&e&&(o.Vb(0,"div",9),o.Rc(1,so,2,3,"span",10),o.Rc(2,lo,2,1,"ng-template",null,11,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(2).desc,n=o.lc();o.Bb(1),o.sc("ngIf",n.hasColor(t))("ngIfElse",e)}}function uo(e,t){if(1&e&&(o.Vb(0,"span",13),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.desc,n=e.value,i=e.entityDesc,c=o.lc();o.Qc("float",c.descAlignment(t)),o.Bb(1),o.Vc("\u200c",c.displayValue(n,t,i),"\u200c")}}function bo(e,t){if(1&e&&(o.Vb(0,"span",13),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.desc,n=e.value,i=e.entityDesc,c=o.lc();o.Qc("float",c.descAlignment(t)),o.Bb(1),o.Vc("\u200c",c.displayValue(n,t,i),"\u200c")}}function fo(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.value,n=e.desc,i=e.entityDesc,c=o.lc();o.Bb(1),o.Uc(c.displayValue(t,n,i))}}function mo(e,t){if(1&e&&(o.Tb(0,5),o.Rc(1,ao,4,2,"div",6),o.Rc(2,uo,2,3,"span",7),o.Rc(3,bo,2,3,"span",7),o.Rc(4,fo,2,1,"span",8),o.Sb()),2&e){const e=o.lc().desc;o.sc("ngSwitch",e.control),o.Bb(1),o.sc("ngSwitchCase","choice"),o.Bb(1),o.sc("ngSwitchCase","number"),o.Bb(1),o.sc("ngSwitchCase","percent")}}function go(e,t){if(1&e&&o.Rc(0,mo,5,4,"ng-container",4),2&e){const e=t.isUndefined;o.lc();const n=o.Fc(3);o.sc("ngIf",!e)("ngIfElse",n)}}function po(e,t){1&e&&(o.Vb(0,"span",14),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Undefined")))}function ho(e,t){if(1&e){const e=o.Wb();o.Vb(0,"th",23),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc(3).onOrderByFlat(n)})),o.Tc(1),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Qc("width",e.width),o.Gb("text-right",n.isRightAligned(e.desc))("dropdown-toggle",n.isOrdered(e)),o.Bb(1),o.Vc(" ",e.label()," ")}}function vo(e,t){if(1&e&&(o.Vb(0,"thead"),o.Vb(1,"tr",null,20),o.Qb(3,"th",21),o.Rc(4,ho,2,7,"th",22),o.Qb(5,"th",21),o.Ub(),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Gb("t-pointer",e.canOrderByFlat)("dropup",e.isDescending),o.Bb(3),o.sc("ngForOf",e.selectInfos)}}function Io(e,t){1&e&&o.Rb(0)}const yo=function(e,t,n){return{value:e,desc:t,entityDesc:n}};function wo(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",23),o.hc("click",(function(){o.Ic(e);const t=o.lc().index;return o.lc(2).onFlatSelect(t)})),o.Rc(1,Io,1,0,"ng-container",26),o.Ub()}if(2&e){const e=t.$implicit,n=t.index,i=o.lc().$implicit;o.lc(2);const c=o.Fc(1);o.Qc("width",e.width),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.yc(4,yo,i[n],e.desc,e.entityDesc))}}function Co(e,t){if(1&e&&(o.Vb(0,"tr",24),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Rc(3,wo,2,8,"td",25),o.Vb(4,"td"),o.Tc(5,"\u200c"),o.Ub(),o.Ub()),2&e){const e=o.lc(2);o.Gb("t-highlight",!1),o.Bb(3),o.sc("ngForOf",e.selectInfos)}}function Mo(e,t){1&e&&o.Rb(0)}function Vo(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",15),o.Vb(2,"cdk-virtual-scroll-viewport",16),o.Vb(3,"table",17),o.Rc(4,vo,6,5,"thead",2),o.Vb(5,"tbody"),o.Rc(6,Co,6,3,"tr",18),o.Ub(),o.Ub(),o.Rc(7,Mo,1,0,"ng-container",19),o.Ub(),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=o.Fc(7);o.Bb(4),o.sc("ngIf",e.selectInfos),o.Bb(2),o.sc("cdkVirtualForOf",e.flat),o.Bb(1),o.sc("ngTemplateOutlet",t)}}function To(e,t){if(1&e&&(o.Vb(0,"tr"),o.Vb(1,"td",31),o.Tc(2),o.Ub(),o.Vb(3,"td",32),o.Tc(4),o.Ub(),o.Ub()),2&e){const e=t.$implicit,n=o.lc(4);o.Bb(2),o.Uc(e.info.label()),o.Bb(2),o.Uc(n.displayValue(e.value,e.info.desc,e.info.entityDesc))}}function Eo(e,t){if(1&e&&(o.Vb(0,"table"),o.Vb(1,"tbody"),o.Rc(2,To,5,2,"tr",30),o.Ub(),o.Ub()),2&e){const e=t.dim;o.Bb(2),o.sc("ngForOf",e.attributes)}}function xo(e,t){if(1&e&&(o.Vb(0,"td",43),o.Tc(1),o.Ub()),2&e){const e=t.$implicit,n=o.lc(9);o.sc("rowSpan",n.rowSpan),o.Bb(1),o.Vc(" ",e.label()," ")}}function Uo(e,t){if(1&e&&(o.Tb(0),o.Rc(1,xo,2,2,"td",42),o.Sb()),2&e){const e=o.lc(8);o.Bb(1),o.sc("ngForOf",e.singleRowDimension.attributes)}}function Ro(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"td",41),o.Tc(2," \u200c "),o.Ub(),o.Rc(3,Uo,2,1,"ng-container",2),o.Sb()),2&e){const e=o.lc(7);o.Bb(1),o.sc("colSpan",e.colSpan)("rowSpan",e.rowSpan),o.Bb(2),o.sc("ngIf",!!e.singleRowDimension)}}function Do(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"button",47),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).$implicit;return o.lc(7).onExpandColumn(t)})),o.Qb(2,"fa-icon",48),o.Ub(),o.Tc(3,"\xa0 "),o.Sb()}if(2&e){const e=o.lc(2).$implicit,t=o.lc(7);o.Bb(2),o.sc("flip",t.flipArrow(e))("rotate",t.rotateArrow(e))}}function Bo(e,t){1&e&&o.Rb(0)}const So=function(e,t,n,i){return{value:e,desc:t,isUndefined:n,entityDesc:i}};function ko(e,t){if(1&e&&(o.Vb(0,"td",46),o.Rc(1,Do,4,2,"ng-container",2),o.Rc(2,Bo,1,0,"ng-container",26),o.Ub()),2&e){const e=o.lc().$implicit,t=o.Fc(3),n=o.lc(7),i=o.Fc(1);o.sc("rowSpan",e.rowSpan)("colSpan",e.colSpan)("ngbPopover",t)("disablePopover",0===e.attributes.length),o.Bb(1),o.sc("ngIf",n.hasChildren(e)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.zc(7,So,e.value,e.info.desc,!n.isDefined(e),e.info.entityDesc))}}function Oo(e,t){1&e&&o.Rb(0)}const _o=function(e){return{dim:e}};function Lo(e,t){if(1&e&&o.Rc(0,Oo,1,0,"ng-container",26),2&e){const e=o.lc().$implicit;o.lc(5);const t=o.Fc(2);o.sc("ngTemplateOutlet",t)("ngTemplateOutletContext",o.wc(2,_o,e))}}function Ao(e,t){if(1&e&&(o.Tb(0),o.Rc(1,ko,3,12,"td",44),o.Rc(2,Lo,1,4,"ng-template",null,45,o.Sc),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.sc("ngIf",e.isVisible)}}function Fo(e,t){if(1&e&&(o.Vb(0,"td",49),o.Tc(1),o.Ub()),2&e){const e=o.lc(7);o.sc("rowSpan",e.columnsGrandTotalLabel.rowSpan)("colSpan",e.columnsGrandTotalLabel.colSpan),o.Bb(1),o.Vc(" ",e.columnsGrandTotalLabel.label()," ")}}function Po(e,t){if(1&e&&(o.Vb(0,"tr"),o.Rc(1,Ro,4,3,"ng-container",2),o.Rc(2,Ao,4,1,"ng-container",39),o.Rc(3,Fo,2,3,"td",40),o.Ub()),2&e){const e=o.lc(),t=e.index,n=e.$implicit,i=o.lc(5);o.Bb(1),o.sc("ngIf",0===t&&i.colSpan&&i.rowSpan),o.Bb(1),o.sc("ngForOf",n)("ngForTrackBy",i.trackByObject),o.Bb(1),o.sc("ngIf",0===t&&!!i.columnsGrandTotalLabel)}}function No(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Po,4,4,"tr",2),o.Sb()),2&e){const e=t.index,n=o.lc(5);o.Bb(1),o.sc("ngIf",n.showHeaderRow(e))}}function jo(e,t){if(1&e&&(o.Vb(0,"td",51),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e.label()," ")}}function Wo(e,t){if(1&e&&(o.Tb(0),o.Rc(1,jo,2,1,"td",50),o.Sb()),2&e){const e=o.lc(7);o.Bb(1),o.sc("ngForOf",e.singleRowDimension.attributes)}}function $o(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"td",41),o.Tc(2," \u200c "),o.Ub(),o.Rc(3,Wo,2,1,"ng-container",2),o.Sb()),2&e){const e=o.lc(6);o.Bb(1),o.sc("colSpan",e.colSpan)("rowSpan",1),o.Bb(2),o.sc("ngIf",!!e.singleRowDimension)}}function qo(e,t){if(1&e&&(o.Vb(0,"td",51),o.Tc(1),o.Ub()),2&e){const e=t.$implicit,n=o.lc(2).$implicit;o.Gb("font-weight-bold",n.isTotal),o.Bb(1),o.Vc(" ",e.label()," ")}}function Qo(e,t){if(1&e&&(o.Tb(0),o.Rc(1,qo,2,3,"td",52),o.Sb()),2&e){const e=o.lc(7);o.Bb(1),o.sc("ngForOf",e.measures)("ngForTrackBy",e.trackByObject)}}function Ho(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Qo,2,2,"ng-container",2),o.Sb()),2&e){const e=t.$implicit,n=o.lc(6);o.Bb(1),o.sc("ngIf",n.isMeasureVisible(e))}}function Go(e,t){if(1&e&&(o.Vb(0,"td",51),o.Tc(1),o.Ub()),2&e){const e=t.$implicit,n=o.lc(7);o.Gb("font-weight-bold",!!n.columnsGrandTotalLabel),o.Bb(1),o.Vc(" ",e.label()," ")}}function zo(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Go,2,3,"td",53),o.Sb()),2&e){const e=o.lc(6);o.Bb(1),o.sc("ngForOf",e.measures)}}function Jo(e,t){if(1&e&&(o.Vb(0,"tr"),o.Rc(1,$o,4,3,"ng-container",2),o.Rc(2,Ho,2,1,"ng-container",30),o.Rc(3,zo,2,1,"ng-container",2),o.Ub()),2&e){const e=o.lc(5);o.Bb(1),o.sc("ngIf",!e.showHeaderRow(0)&&!!e.colSpan&&!!e.rowSpan),o.Bb(1),o.sc("ngForOf",e.columnCells),o.Bb(1),o.sc("ngIf",e.showColumnsGrandTotalsMeasureLabels)}}function Ko(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",57),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit;return o.lc(5).onExpandRow(t)})),o.Qb(1,"fa-icon",48),o.Ub()}if(2&e){const e=o.lc().$implicit,t=o.lc(5);o.Qc("margin-left",t.paddingLeft(e))("margin-right",t.paddingRight(e))("opacity",t.hasChildren(e)?1:0),o.sc("disabled",!t.hasChildren(e)),o.Bb(1),o.sc("flip",t.flipArrow(e))("rotate",t.rotateArrow(e))}}function Yo(e,t){1&e&&o.Rb(0)}function Xo(e,t){1&e&&o.Rb(0)}function Zo(e,t){if(1&e&&o.Rc(0,Xo,1,0,"ng-container",26),2&e){const e=o.lc().$implicit;o.lc(3);const t=o.Fc(2);o.sc("ngTemplateOutlet",t)("ngTemplateOutletContext",o.wc(2,_o,e))}}function ec(e,t){1&e&&o.Rb(0)}function tc(e,t){if(1&e&&(o.Vb(0,"td",59),o.Rc(1,ec,1,0,"ng-container",26),o.Ub()),2&e){const e=t.$implicit;o.lc(7);const n=o.Fc(1);o.Bb(1),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.yc(2,yo,e.value,e.info.desc,e.info.entityDesc))}}function nc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,tc,2,6,"td",58),o.Sb()),2&e){const e=o.lc().$implicit;o.Bb(1),o.sc("ngForOf",e.attributes)}}function ic(e,t){1&e&&o.Rb(0)}const oc=function(e,t){return{value:e,desc:t,isUndefined:!1}};function cc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",23),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).$implicit;return o.lc(6).onMeasureClick(i,n)})),o.Rc(1,ic,1,0,"ng-container",26),o.Ub()}if(2&e){const e=t.index,n=o.lc(2).$implicit,i=o.lc(6),c=o.Fc(1);o.Eb("t-report-measure ",n.classes[e],""),o.Gb("t-disable-drilldown",n.disableDrilldown)("font-weight-bold",n.isTotal)("t-highlight",n.drilledIndex===e),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(11,oc,n.values[e],i.measures[e].desc))}}function rc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",62),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).$implicit;return o.lc(6).onMeasureClick(t,-1)})),o.Ub()}}function sc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,cc,2,14,"td",60),o.Rc(2,rc,1,0,"td",61),o.Sb()),2&e){const e=o.lc(7);o.Bb(1),o.sc("ngForOf",e.measures),o.Bb(1),o.sc("ngIf",0===e.measures.length)}}function lc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,sc,3,2,"ng-container",2),o.Sb()),2&e){const e=t.$implicit,n=o.lc(6);o.Bb(1),o.sc("ngIf",n.isMeasureVisible(e.column))}}function ac(e,t){if(1&e&&(o.Vb(0,"tr",54),o.Vb(1,"td",55),o.Rc(2,Ko,2,9,"button",56),o.Tc(3,"\xa0 "),o.Rc(4,Yo,1,0,"ng-container",26),o.Ub(),o.Rc(5,Zo,1,4,"ng-template",null,45,o.Sc),o.Rc(7,nc,2,1,"ng-container",2),o.Rc(8,lc,2,1,"ng-container",30),o.Ub()),2&e){const e=t.$implicit,n=o.Fc(6),i=o.lc(5),c=o.Fc(1);o.Bb(1),o.sc("ngbPopover",n)("placement",i.rowAttributePlacement)("disablePopover",0===e.attributes.length||!!i.singleRowDimension),o.Bb(1),o.sc("ngIf",i.addRowExpanders),o.Bb(2),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.zc(8,So,e.value,e.info.desc,!i.isDefined(e),e.info.entityDesc)),o.Bb(3),o.sc("ngIf",!!i.singleRowDimension),o.Bb(1),o.sc("ngForOf",e.measures)}}function uc(e,t){1&e&&(o.Vb(0,"button",66),o.Qb(1,"fa-icon",67),o.Ub())}function dc(e,t){if(1&e&&(o.Vb(0,"td",64),o.Rc(1,uc,2,0,"button",65),o.Tc(2),o.Ub()),2&e){const e=o.lc(6);o.Bb(1),o.sc("ngIf",e.addRowExpanders),o.Bb(1),o.Vc("\xa0 ",e.rowsGrandTotalLabel.label()," ")}}function bc(e,t){1&e&&o.Qb(0,"td",59)}function fc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,bc,1,0,"td",58),o.Sb()),2&e){const e=o.lc(6);o.Bb(1),o.sc("ngForOf",e.singleRowDimension.attributes)}}function mc(e,t){1&e&&o.Rb(0)}function gc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",23),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).$implicit;return o.lc(6).onMeasureClick(i,n)})),o.Rc(1,mc,1,0,"ng-container",26),o.Ub()}if(2&e){const e=t.index,n=o.lc(2).$implicit,i=o.lc(6),c=o.Fc(1);o.Eb("t-report-measure ",n.classes[e],""),o.Gb("t-disable-drilldown",n.disableDrilldown)("font-weight-bold",n.isTotal)("t-highlight",n.drilledIndex===e),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(11,oc,n.values[e],i.measures[e].desc))}}function pc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",62),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).$implicit;return o.lc(6).onMeasureClick(t,-1)})),o.Ub()}}function hc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,gc,2,14,"td",60),o.Rc(2,pc,1,0,"td",61),o.Sb()),2&e){const e=o.lc(7);o.Bb(1),o.sc("ngForOf",e.measures),o.Bb(1),o.sc("ngIf",0===e.measures.length)}}function vc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,hc,3,2,"ng-container",2),o.Sb()),2&e){const e=t.$implicit,n=o.lc(6);o.Bb(1),o.sc("ngIf",n.isMeasureVisible(e.column))}}function Ic(e,t){if(1&e&&(o.Vb(0,"tr",54),o.Rc(1,dc,3,2,"td",63),o.Rc(2,fc,2,1,"ng-container",2),o.Rc(3,vc,2,1,"ng-container",30),o.Ub()),2&e){const e=o.lc(5);o.Bb(1),o.sc("ngIf",!!e.rowsGrandTotalLabel),o.Bb(1),o.sc("ngIf",!!e.singleRowDimension),o.Bb(1),o.sc("ngForOf",e.rowsGrandTotalMeasures)}}function yc(e,t){if(1&e&&(o.Vb(0,"cdk-virtual-scroll-viewport",35),o.Vb(1,"table",36),o.Vb(2,"tbody"),o.Rc(3,No,2,1,"ng-container",30),o.Rc(4,Jo,4,3,"tr",2),o.Rc(5,ac,9,13,"tr",37),o.Rc(6,Ic,4,3,"tr",38),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc(4);o.Bb(3),o.sc("ngForOf",e.columnHeaders),o.Bb(1),o.sc("ngIf",e.showMeasureLabelsRow),o.Bb(1),o.sc("cdkVirtualForOf",e.rows)("cdkVirtualForTrackBy",e.trackByObject),o.Bb(1),o.sc("ngIf",e.rowsGrandTotalMeasures)}}const wc=function(e){return{0:e}};function Cc(e,t){if(1&e&&(o.Vb(0,"div",68),o.Vb(1,"t-error-message"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(4);o.Bb(2),o.Vc(" ",o.oc(3,1,"Error_TooManyColumns0",o.wc(4,wc,e.maximumColumns))," ")}}function Mc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,yc,7,5,"cdk-virtual-scroll-viewport",33),o.Rc(2,Cc,4,6,"ng-template",null,34,o.Sc),o.Sb()),2&e){const e=o.Fc(3),t=o.lc(3);o.Bb(1),o.sc("ngIf",!t.tooManyColumns)("ngIfElse",e)}}function Vc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",77),o.Vb(1,"h1",23),o.hc("click",(function(){return o.Ic(e),o.lc(5).onPointSelect()})),o.Tc(2),o.Ub(),o.Ub()}if(2&e){const e=o.lc(5);o.Bb(1),o.Eb("display-4 t-report-measure mx-5 ",e.pointClass,""),o.Bb(1),o.Vc(" ",e.point," ")}}function Tc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Vc,3,4,"div",76),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsPoint)("ngIfElse",e)}}function Ec(e,t){1&e&&o.Rb(0)}const xc=function(e){return{model:e}};function Uc(e,t){if(1&e&&o.Rc(0,Ec,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function Rc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-bar-vertical",79),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,Uc,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.monochromatic)("customColors",e.customColors)("results",e.single)("roundEdges",!1)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function Dc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Rc,3,13,"ngx-charts-bar-vertical",78),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Bc(e,t){1&e&&o.Rb(0)}function Sc(e,t){if(1&e&&o.Rc(0,Bc,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function kc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-bar-horizontal",82),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,Sc,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.monochromatic)("customColors",e.customColors)("results",e.single)("roundEdges",!1)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.measureLabel)("yAxisLabel",e.firstDimensionLabel)("yAxisTickFormatting",e.formatChartDimension)("xAxisTickFormatting",e.formatChartMeasureValue)}}function Oc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,kc,3,13,"ngx-charts-bar-horizontal",81),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle)("ngIfElse",e)}}function _c(e,t){1&e&&o.Rb(0)}function Lc(e,t){if(1&e&&o.Rc(0,_c,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function Ac(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-pie-chart",84),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,Lc,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.alternativeCustomColors)("results",e.single)("labelFormatting",e.formatChartDimension)("labels",!0)("trimLabels",!1)}}function Fc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Ac,3,7,"ngx-charts-pie-chart",83),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Pc(e,t){1&e&&o.Rb(0)}function Nc(e,t){if(1&e&&o.Rc(0,Pc,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function jc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-pie-chart",86),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,Nc,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.alternativeCustomColors)("results",e.single)("doughnut",!0)("labelFormatting",e.formatChartDimension)("labels",!0)("trimLabels",!1)}}function Wc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,jc,3,8,"ngx-charts-pie-chart",85),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle)("ngIfElse",e)}}function $c(e,t){1&e&&o.Rb(0)}function qc(e,t){if(1&e&&o.Rc(0,$c,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function Qc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-tree-map",88),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,qc,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.alternativeCustomColors)("results",e.single)("labelFormatting",e.formatAlternativeChartDimension)("valueFormatting",e.formatChartMeasureValue)}}function Hc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Qc,3,6,"ngx-charts-tree-map",87),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Gc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-number-card",90),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.alternativeCustomColors)("results",e.single)("labelFormatting",e.formatAlternativeChartDimension)("valueFormatting",e.formatAlternativeChartMeasureValue)}}function zc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Gc,1,6,"ngx-charts-number-card",89),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Jc(e,t){1&e&&o.Rb(0)}function Kc(e,t){if(1&e&&o.Rc(0,Jc,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function Yc(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-gauge",92),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,Kc,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.monochromatic)("customColors",e.customColors)("results",e.single)("max",0)("showText",e.showGaugeTotal())("valueFormatting",e.formatChartMeasureValue)("axisTickFormatting",e.formatStringChartMeasureValue)("legend",e.legend)}}function Xc(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Yc,3,9,"ngx-charts-gauge",91),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle)("ngIfElse",e)}}function Zc(e,t){1&e&&o.Rb(0)}function er(e,t){if(1&e&&o.Rc(0,Zc,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function tr(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-bar-vertical-2d",94),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,er,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("roundEdges",!1)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function nr(e,t){if(1&e&&(o.Tb(0),o.Rc(1,tr,3,14,"ngx-charts-bar-vertical-2d",93),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsMulti)("ngIfElse",e)}}function ir(e,t){1&e&&o.Rb(0)}function or(e,t){if(1&e&&o.Rc(0,ir,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function cr(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-bar-vertical-stacked",96),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,or,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function rr(e,t){if(1&e&&(o.Tb(0),o.Rc(1,cr,3,13,"ngx-charts-bar-vertical-stacked",95),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsMulti)("ngIfElse",e)}}function sr(e,t){1&e&&o.Rb(0)}function lr(e,t){if(1&e&&o.Rc(0,sr,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function ar(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-bar-vertical-normalized",96),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,lr,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.measureLabel+" %")("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function ur(e,t){if(1&e&&(o.Tb(0),o.Rc(1,ar,3,13,"ngx-charts-bar-vertical-normalized",95),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsMulti)("ngIfElse",e)}}function dr(e,t){1&e&&o.Rb(0)}function br(e,t){if(1&e&&o.Rc(0,dr,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function fr(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-bar-horizontal-2d",98),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,br,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("roundEdges",!1)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.measureLabel)("yAxisLabel",e.firstDimensionLabel)("yAxisTickFormatting",e.formatChartDimension)("xAxisTickFormatting",e.formatChartMeasureValue)}}function mr(e,t){if(1&e&&(o.Tb(0),o.Rc(1,fr,3,14,"ngx-charts-bar-horizontal-2d",97),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsMulti)("ngIfElse",e)}}function gr(e,t){1&e&&o.Rb(0)}function pr(e,t){if(1&e&&o.Rc(0,gr,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function hr(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-bar-horizontal-stacked",100),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,pr,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.measureLabel)("yAxisLabel",e.firstDimensionLabel)("yAxisTickFormatting",e.formatChartDimension)("xAxisTickFormatting",e.formatChartMeasureValue)}}function vr(e,t){if(1&e&&(o.Tb(0),o.Rc(1,hr,3,13,"ngx-charts-bar-horizontal-stacked",99),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsMulti)("ngIfElse",e)}}function Ir(e,t){1&e&&o.Rb(0)}function yr(e,t){if(1&e&&o.Rc(0,Ir,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function wr(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-bar-horizontal-normalized",100),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,yr,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("customColors",e.customColors)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.measureLabel+" %")("yAxisLabel",e.firstDimensionLabel)("yAxisTickFormatting",e.formatChartDimension)("xAxisTickFormatting",e.formatChartMeasureValue)}}function Cr(e,t){if(1&e&&(o.Tb(0),o.Rc(1,wr,3,13,"ngx-charts-bar-horizontal-normalized",99),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsMulti)("ngIfElse",e)}}function Mr(e,t){1&e&&o.Rb(0)}function Vr(e,t){if(1&e&&o.Rc(0,Mr,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function Tr(e,t){1&e&&o.Rb(0)}function Er(e,t){if(1&e&&o.Rc(0,Tr,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(24);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function xr(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-line-chart",102),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,Vr,1,4,"ng-template",null,80,o.Sc),o.Rc(3,Er,1,4,"ng-template",null,103,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("showXAxisLabel",e.showXAxisLabel)("legend",e.legend)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.secondDimensionLabel||e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function Ur(e,t){if(1&e&&(o.Tb(0),o.Rc(1,xr,5,12,"ngx-charts-line-chart",101),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle||t.supportsMulti)("ngIfElse",e)}}function Rr(e,t){1&e&&o.Rb(0)}function Dr(e,t){if(1&e&&o.Rc(0,Rr,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(22);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function Br(e,t){1&e&&o.Rb(0)}function Sr(e,t){if(1&e&&o.Rc(0,Br,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(24);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function kr(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-area-chart",105),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,Dr,1,4,"ng-template",null,80,o.Sc),o.Rc(3,Sr,1,4,"ng-template",null,103,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.colorful)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.secondDimensionLabel||e.firstDimensionLabel)("yAxisLabel",e.measureLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartMeasureValue)}}function Or(e,t){if(1&e&&(o.Tb(0),o.Rc(1,kr,5,12,"ngx-charts-area-chart",104),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsSingle||t.supportsMulti)("ngIfElse",e)}}function _r(e,t){1&e&&o.Rb(0)}function Lr(e,t){if(1&e&&o.Rc(0,_r,1,0,"ng-container",26),2&e){const e=t.model;o.lc(3);const n=o.Fc(26);o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.wc(2,xc,e))}}function Ar(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ngx-charts-heat-map",105),o.hc("select",(function(t){return o.Ic(e),o.lc(5).onChartSelect(t.name)})),o.Rc(1,Lr,1,4,"ng-template",null,80,o.Sc),o.Ub()}if(2&e){const e=o.lc(5);o.sc("animations",e.animations)("scheme",e.heat)("results",e.multi)("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.legend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.firstDimensionLabel)("yAxisLabel",e.secondDimensionLabel)("xAxisTickFormatting",e.formatChartDimension)("yAxisTickFormatting",e.formatChartDimension)}}function Fr(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Ar,3,12,"ngx-charts-heat-map",104),o.Sb()),2&e){o.lc();const e=o.Fc(20),t=o.lc(3);o.Bb(1),o.sc("ngIf",t.supportsMulti)("ngIfElse",e)}}const Pr=function(e){return{count:e}};function Nr(e,t){if(1&e&&(o.Vb(0,"div",106),o.Qb(1,"fa-icon",107),o.Tc(2),o.mc(3,"translate"),o.Ub()),2&e){const e=o.lc(4);o.Bb(2),o.Vc(" \xa0 ",o.oc(3,1,"ChartTypeDoesNotSupportNDimensions",o.wc(4,Pr,e.numberOfDimensions))," ")}}function jr(e,t){if(1&e&&(o.Vb(0,"div",108),o.Vb(1,"span"),o.Tc(2),o.Ub(),o.Qb(3,"br"),o.Vb(4,"span",109),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.model,n=o.lc(4);o.Bb(2),o.Uc(e.name.display),o.Bb(3),o.Uc(n.formatChartMeasureValue(e.value))}}function Wr(e,t){if(1&e&&(o.Vb(0,"div",112),o.Qb(1,"span",113),o.Tc(2),o.Ub()),2&e){const e=t.$implicit,n=o.lc(5);o.Bb(1),o.Qc("background-color",e.color),o.Bb(1),o.Vc(" ",(null==e.series?null:e.series.display)+": "+n.formatChartMeasureValue(e.value)," ")}}function $r(e,t){if(1&e&&(o.Vb(0,"div",110),o.Rc(1,Wr,3,3,"div",111),o.Ub()),2&e){const e=t.model;o.Bb(1),o.sc("ngForOf",e)}}function qr(e,t){if(1&e&&(o.Vb(0,"div",108),o.Vb(1,"span",109),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=t.model,n=o.lc(4);o.Bb(2),o.Uc(n.formatChartMeasureValue(e.value))}}function Qr(e,t){if(1&e&&(o.Vb(0,"div",69),o.Vb(1,"div",70),o.Rc(2,Tc,2,2,"ng-container",71),o.Rc(3,Dc,2,2,"ng-container",71),o.Rc(4,Oc,2,2,"ng-container",71),o.Rc(5,Fc,2,2,"ng-container",71),o.Rc(6,Wc,2,2,"ng-container",71),o.Rc(7,Hc,2,2,"ng-container",71),o.Rc(8,zc,2,2,"ng-container",71),o.Rc(9,Xc,2,2,"ng-container",71),o.Rc(10,nr,2,2,"ng-container",71),o.Rc(11,rr,2,2,"ng-container",71),o.Rc(12,ur,2,2,"ng-container",71),o.Rc(13,mr,2,2,"ng-container",71),o.Rc(14,vr,2,2,"ng-container",71),o.Rc(15,Cr,2,2,"ng-container",71),o.Rc(16,Ur,2,2,"ng-container",71),o.Rc(17,Or,2,2,"ng-container",71),o.Rc(18,Fr,2,2,"ng-container",71),o.Rc(19,Nr,4,6,"ng-template",null,72,o.Sc),o.Rc(21,jr,6,2,"ng-template",null,73,o.Sc),o.Rc(23,$r,2,1,"ng-template",null,74,o.Sc),o.Rc(25,qr,3,1,"ng-template",null,75,o.Sc),o.Ub(),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.sc("ngSwitch",e.chart),o.Bb(1),o.sc("ngSwitchCase","Card"),o.Bb(1),o.sc("ngSwitchCase","BarsVertical"),o.Bb(1),o.sc("ngSwitchCase","BarsHorizontal"),o.Bb(1),o.sc("ngSwitchCase","Pie"),o.Bb(1),o.sc("ngSwitchCase","Doughnut"),o.Bb(1),o.sc("ngSwitchCase","TreeMap"),o.Bb(1),o.sc("ngSwitchCase","NumberCards"),o.Bb(1),o.sc("ngSwitchCase","Gauge"),o.Bb(1),o.sc("ngSwitchCase","BarsVerticalGrouped"),o.Bb(1),o.sc("ngSwitchCase","BarsVerticalStacked"),o.Bb(1),o.sc("ngSwitchCase","BarsVerticalNormalized"),o.Bb(1),o.sc("ngSwitchCase","BarsHorizontalGrouped"),o.Bb(1),o.sc("ngSwitchCase","BarsHorizontalStacked"),o.Bb(1),o.sc("ngSwitchCase","BarsHorizontalNormalized"),o.Bb(1),o.sc("ngSwitchCase","Line"),o.Bb(1),o.sc("ngSwitchCase","Area"),o.Bb(1),o.sc("ngSwitchCase","HeatMap")}}function Hr(e,t){1&e&&(o.Vb(0,"div",106),o.Qb(1,"fa-icon",107),o.Tc(2),o.mc(3,"translate"),o.Ub()),2&e&&(o.Bb(2),o.Vc(" \xa0 ",o.nc(3,1,"SpecifyNumericMeasure")," "))}function Gr(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Eo,3,1,"ng-template",null,27,o.Sc),o.Rc(3,Mc,4,2,"ng-container",2),o.Rc(4,Qr,27,18,"div",28),o.Rc(5,Hr,4,3,"div",29),o.Sb()),2&e){const e=o.lc(2);o.Bb(3),o.sc("ngIf",e.showSummary),o.Bb(1),o.sc("ngIf",e.showChart),o.Bb(1),o.sc("ngIf",e.showSpecifyNumericMeasure)}}function zr(e,t){1&e&&o.Rb(0)}function Jr(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Gr,6,3,"ng-container",2),o.Rc(2,zr,1,0,"ng-container",19),o.Sb()),2&e){const e=o.lc(),t=o.Fc(7);o.Bb(1),o.sc("ngIf",e.showResults),o.Bb(1),o.sc("ngTemplateOutlet",t)}}function Kr(e,t){1&e&&(o.Vb(0,"div",118),o.Qb(1,"t-spinner",119),o.Ub()),2&e&&(o.Bb(1),o.sc("scale",2))}function Yr(e,t){1&e&&(o.Vb(0,"div",120),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function Xr(e,t){if(1&e&&(o.Vb(0,"div",68),o.Vb(1,"t-error-message"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2);o.Bb(2),o.Vc(" ",e.errorMessage," ")}}function Zr(e,t){if(1&e&&(o.Vb(0,"div",121),o.Qb(1,"fa-icon",107),o.Tc(2),o.Ub()),2&e){const e=o.lc(2);o.Bb(2),o.Vc(" \xa0 ",e.information()," ")}}function es(e,t){if(1&e&&(o.Rc(0,Kr,2,1,"div",114),o.Rc(1,Yr,3,3,"div",115),o.Rc(2,Xr,3,1,"div",116),o.Rc(3,Zr,3,1,"div",117)),2&e){const e=o.lc();o.sc("ngIf",e.showSpinner),o.Bb(1),o.sc("ngIf",e.showNoItemsFound),o.Bb(1),o.sc("ngIf",e.showErrorMessage),o.Bb(1),o.sc("ngIf",e.showInformation)}}var ts=function(e){return e.pivot="pivot",e.chart="chart",e}({});const ns=["#1490A3","#128091","#10707F","#0D606D","#0B505B","#0D606D","#10707F","#128091"];let is=(()=>{class e{constructor(e,t,n,i,c,r){this.workspace=e,this.translate=t,this.api=n,this.cdr=i,this.router=c,this.route=r,this.maximumColumns=130,this._rowAttributePlacement=["bottom","top","bottom-left","top-left"],this._rowAttributePlacementRtl=["bottom","top","bottom-right","top-right"],this.arguments={},this.mode="screen",this.disableDrilldown=!1,this.silentRefreshError=new o.n,this.exportStarting=new o.n,this.exportSuccess=new o.n,this.exportError=new o.n,this.orderbyChange=new o.n,this.notifyFetch$=new E.a,this.notifyDestruct$=new E.a,this.crud=this.api.crudFactory(this.apiEndpoint,this.notifyDestruct$),this.animations=!1,this.showXAxis=!0,this.showYAxis=!0,this.showXAxisLabel=!0,this.showYAxisLabel=!0,this.legend=!1,this.colorful={domain:ns},this.monochromatic={domain:[ns[1]]},this.heat={domain:["#96D5DF","#052429"]},this.chartDimensionCellFromDimensionCell=(e,t,n,i,o,c)=>{const r=Object(N.n)(n)?this.displayValue(t,e.desc,e.entityDesc):this.translate.instant("Undefined");return new B.a(r,n,e,o,i,c)},this.customColors=e=>e.color||ns[e.index%ns.length],this.alternativeCustomColors=e=>{const t=this.state;if(!t.singleCellsHash){t.singleCellsHash={};for(const e of this.single){const n=e.name.toString();n===B.n?t.singleCellsUndefined=e.name:t.singleCellsHash[n]=e.name}}let n;return n=e===B.n?t.singleCellsUndefined:t.singleCellsHash[e],this.customColors(n)},this.formatChartMeasureValue=(e,t)=>{const n=(t=t||this.state).measureInfos[t.singleNumericMeasureIndex];return Object(ge.c)(e,n.desc,this.workspace,this.translate)},this.formatAlternativeChartMeasureValue=e=>this.formatChartMeasureValue(e.value),this.formatStringChartMeasureValue=e=>(e=e.replace(/,/g,""),this.formatChartMeasureValue(+e)),this.showGaugeTotal=()=>this.state.totalEqualsSum}ngOnInit(){this.state=this.state||new B.j;const e=this.state;if(this._subscriptions=new k.a,this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>this.cdr.markForCheck()})),this._subscriptions.add(this.notifyFetch$.pipe(Object(_.a)(e=>this.doFetch(e))).subscribe()),"screen"===this.mode){const e=e=>{const t=e.get("$orderby");try{const e=Di.parse(t,{expectDirKeywords:!0});e.length>0?(this.orderbyKey=e[0].toString(),this.orderbyDir=e[0].direction||"asc"):(delete this.orderbyKey,delete this.orderbyDir)}catch(n){delete this.orderbyKey,delete this.orderbyDir}};e(this.route.snapshot.paramMap),this._subscriptions.add(this.route.paramMap.pipe(Object(Ci.a)(1)).subscribe(t=>{e(t),this.applyChanges()&&this.fetch()}))}this.crud=this.api.crudFactory(this.apiEndpoint,this.notifyDestruct$),this.view=this.view||(this.definition.Chart&&this.definition.DefaultsToChart?ts.chart:ts.pivot);const t=this.applyChanges();if(e.reportStatus!==B.i.loaded||t)try{const{filter:t,having:n,columns:i,rows:o,measures:c,select:r,parameters:s}=io.getReportInfos(this.definition,this.workspace,this.translate),l={};s.forEach(e=>l[e.keyLower]=e),e.parameterInfos=l,e.filterExp=t,e.havingExp=n,e.columnInfos=i,e.rowInfos=o,e.measureInfos=c,e.uniqueMeasureAggregations=this.computeUniqueMeasureAggregations(c),e.selectInfos=r,e.dimensionInfos=e.columnInfos.concat(e.rowInfos),e.singleNumericMeasureIndex=this.state.measureInfos.findIndex(e=>e.isNumeric),e.badDefinition=!1,this.fetch()}catch(n){e.parameterInfos=null,e.filterExp=null,e.havingExp=null,e.columnInfos=null,e.rowInfos=null,e.measureInfos=null,e.uniqueMeasureAggregations=null,e.selectInfos=null,e.dimensionInfos=null,e.singleNumericMeasureIndex=-1,e.badDefinition=!0,e.reportStatus=B.i.error,e.errorMessage=n,this.cdr.markForCheck()}this.subscribeRefresh(),this.subscribeExport()}ngOnChanges(e){[e.state,e.definition,e.mode].some(e=>!!e&&!e.isFirstChange())?(this.ngOnDestroy(),this.ngOnInit()):([e.arguments].some(e=>!!e&&!e.isFirstChange())&&this.applyChanges()&&(this.state.skip=0,this.fetch()),e.refresh&&!e.refresh.isFirstChange()&&(this.unsubscribeRefresh(),this.subscribeRefresh()),e.export&&!e.export.isFirstChange()&&(this.unsubscribeExport(),this.subscribeExport()))}unsubscribeRefresh(){this._refreshSubscription&&this._refreshSubscription.unsubscribe()}subscribeRefresh(){this.refresh&&(this._refreshSubscription=this.refresh.pipe(Object(L.a)(e=>!e&&this.state.reportStatus!==B.i.loading||e&&!this.state.silentQuery),Object(A.a)(e=>this.fetch(e))).subscribe())}unsubscribeExport(){this._exportSubscription&&this._exportSubscription.unsubscribe()}subscribeExport(){this.export&&(this._exportSubscription=this.export.pipe(Object(L.a)(e=>this.state.reportStatus!==B.i.loading),Object(A.a)(e=>this.onExport(e))).subscribe())}applyChanges(){const e=this.state;let t=!1;this.definition!==e.definition&&(e.definition=this.definition,t=!0),this.isDetails&&this.canOrderByFlat&&(this.orderbyKey!==e.orderbyKey&&(e.orderbyKey=this.orderbyKey,t=!0),this.orderbyDir!==e.orderbyDir&&(e.orderbyDir=this.orderbyDir,t=!0));const n=this.arguments,i=this.state.arguments;for(const o of Object.keys(n).concat(Object.keys(i)))i[o]!==n[o]&&(i[o]=n[o],t=!0);return t}ngOnDestroy(){this.notifyDestruct$.next(),this.unsubscribeRefresh(),this.unsubscribeExport()}get entityDescriptor(){if(!this.definition)return null;const e=this.definition.Collection;if(!e)return null;const t=wi.h[e];return t?t(this.workspace,this.translate,this.definition.DefinitionId):null}get apiEndpoint(){const e=this.entityDescriptor;return e?e.apiEndpoint:null}fetch(e){this.notifyFetch$.next(e)}doFetch(t){let n,i,o,c=this.state;if(c.badDefinition)return Object(O.a)(null);t?c.silentQuery=!0:c.reportStatus=B.i.loading;try{n=this.computeFilter(c),i=this.computeHaving(c)}catch(r){return c.silentQuery=!1,c.reportStatus=B.i.error,c.errorMessage=r.message,Object(O.a)(null)}if(this.cdr.markForCheck(),this.showDetails){const i=this.definition.Top||e.DEFAULT_PAGE_SIZE,s=this.definition.Top?0:c.skip;let l,a;try{if(l=this.computeSelect(c),a=this.computeOrderBy(c),!l)return c.silentQuery=!1,c.reportStatus=B.i.information,c.information=()=>this.translate.instant("DragSelect"),Object(O.a)(null)}catch(r){return c.silentQuery=!1,c.reportStatus=B.i.error,c.errorMessage=r.message,Object(O.a)(null)}this.rememberFlatColumnWidths(),o=this.crud.getFact({top:i,skip:s,orderby:a,select:l,filter:n,countEntities:!0,silent:t}).pipe(Object(A.a)(e=>{c.silentQuery=!1,c.reportStatus=B.i.loaded,c.top=e.Result.length,c.skip=s,c.total=e.TotalCount,c.result=e.Result,this.forgetFlatColumnWidths()}))}else{let e;try{if(e=this.computeAggregateSelect(c),!e)return c.silentQuery=!1,c.reportStatus=B.i.information,c.information=()=>this.translate.instant("DragDimensionsOrMeasures"),Object(O.a)(null)}catch(r){return c.silentQuery=!1,c.reportStatus=B.i.error,c.errorMessage=r.message,Object(O.a)(null)}o=this.crud.getAggregate({top:this.definition.Top,select:e,filter:n,having:i,silent:t}).pipe(Object(A.a)(e=>{c.silentQuery=!1,c.reportStatus=B.i.loaded,c.result=e.Result,c.ancestorGroups={};for(const t of e.DimensionAncestors||[]){const e={};for(const n of t.Result)e[n[t.IdIndex-t.MinIndex]]=n;c.ancestorGroups[t.IdIndex]={minIndex:t.MinIndex,ancestors:e}}}))}return o.pipe(Object(A.a)(()=>{c.silentError=!1,c.time=Object(Mi.b)()}),Object(P.a)(e=>(c=this.state,t?(c.silentQuery=!1,c.silentError=!0,this.silentRefreshError.emit(e)):c.reportStatus=B.i.error,c.errorMessage=e.error,Object(O.a)(null))),Object(ne.a)(()=>this.cdr.markForCheck()))}computeUniqueMeasureAggregations(e){const t={},n=[];function i(e){const i=e.toString();let o=t[i];return void 0===o&&(o=n.length,t[i]=o,n.push({exp:e})),o}const o=[];for(const c of e)c.exp.aggregationsInner(o),c.success&&c.success.aggregationsInner(o),c.warning&&c.warning.aggregationsInner(o),c.danger&&c.danger.aggregationsInner(o);for(const c of o)if("avg"===c.nameLower){const e=c.clone();e.setName("sum"),c.sumIndex=i(e);const t=c.clone();t.setName("count"),c.countIndex=i(t)}else c.index=i(c);return n}computeFilter(e){return this.definition?(e=e||this.state).filterExp?Wi(io.stringify(e.filterExp,this.arguments,e.parameterInfos)):null:""}computeHaving(e){return this.definition?(e=e||this.state).havingExp?Wi(io.stringify(e.havingExp,this.arguments,e.parameterInfos)):null:""}computeOrderBy(e){if(e=e||this.state,this.isDetails&&this.canOrderByFlat&&e.orderbyKey){const t=e.selectInfos.find(t=>t.expToString===e.orderbyKey),n=this.orderDirection(t);if(n){const i=io.stringify(t.exp,this.arguments,e.parameterInfos);if(t.entityDesc)return t.entityDesc.orderby().map(e=>`${i}.${e} ${n}`).join(",");if(t.localize){const o=this.workspace.currentTenant,c=io.stringify(t.exp,this.arguments,e.parameterInfos,o.isSecondaryLanguage?2:o.isTernaryLanguage?3:1);return i===c?i:`${c} ${n},${i} ${n}`}return`${i} ${n}`}}return this.definition.OrderBy}computeSelect(e){if(!this.definition)return"";const t=(e=e||this.state).selectInfos;if(!t||0===t.length)return"";const n=this.arguments,i=e.parameterInfos,o={},c=[];function r(e){e=Wi(e);let t=o[e];return void 0===t&&(t=c.length,o[e]=t,c.push(e)),t}const s=this.entityDescriptor;e.idIndex=s.properties.Id?r("Id"):-1,e.defIdIndex=!s.definitionId&&s.definitionIds?r("DefinitionId"):-1,s.navigateToDetailsSelect?e.navigateToDetailsIndices=s.navigateToDetailsSelect.map(e=>r(e)):delete e.navigateToDetailsIndices;for(const l of t){let e=[];const{exp:t,localize:o,entityDesc:c}=l;if(c){const o=io.stringify(t,n,i);for(const t of c.select)e.push(r(o+"."+t))}else{for(const c of o?[1,2,3]:[1]){const o=io.stringify(t,n,i,c);e.push(r(o))}e.every(t=>t===e[0])&&(e=[e[0]])}l.indices=e}return c.join(",")}computeAggregateSelect(e){if(!this.definition)return"";const t=this.arguments,n=(e=e||this.state).parameterInfos,i={},o=[];function c(e){e=Wi(e);let t=i[e];return void 0===t&&(t=o.length,i[e]=t,o.push(e)),t}const r=e.columnInfos,s=e.rowInfos;for(const l of r.concat(s)){const{keyExp:e,entityDesc:i,dispExp:o,localize:r}=l,s=io.stringify(e,t,n);if(i){if(l.keyIndex=c(s+".Id"),o){let e=[];for(const i of r?[1,2,3]:[1]){const r=io.stringify(o,t,n,i,s);e.push(c(r))}e.every(t=>t===e[0])&&(e=[e[0]]),l.indices=e}else{l.indices=[];for(const e of i.select)l.indices.push(c(s+"."+e))}for(const e of l.attributes){e.indices=[];const{exp:i,localize:o,entityDesc:r}=e;if(r){e.indices=[];const o=io.stringify(i,t,n,1,s);for(const t of r.select)e.indices.push(c(o+"."+t))}else{let r=[];for(const e of o?[1,2,3]:[1]){const o=io.stringify(i,t,n,e,s);r.push(c(o))}r.every(e=>e===r[0])&&(r=[r[0]]),e.indices=r}}l.showAsTree&&(l.parentKeyIndex=c(s+".ParentId"))}else l.keyIndex=c(s)}for(const l of e.uniqueMeasureAggregations){const e=io.stringify(l.exp,t,n);l.index=c(e)}return o.join(",")}onExport(e){try{const n=this.state;if(n.reportStatus===B.i.loaded)if(this.isDetails){const i=[],o=t=>{const o=n.selectInfos;{const e=[];i.push(e);for(const t of o)e.push(t.label())}for(const e of t){const t=[];i.push(t);for(let n=0;n<o.length;n++){const i=o[n],c=this.displayValue(e[n],i.desc,i.entityDesc);t.push(c)}}this.downloadData(i,e),this.exportSuccess.emit()};if(this.definition.Top)o(this.flat);else{let e,i,c;try{e=this.computeFilter(n),i=this.computeSelect(),c=this.computeOrderBy()}catch(t){return void this.exportError.emit(t)}if(!i){const e=this.translate.instant("DragSelect");return void this.exportError.emit(e)}this.exportStarting.emit(),this.crud.getFact({top:2147483647,skip:0,orderby:c,select:i,filter:e}).pipe(Object(A.a)(e=>{const t=this.flatInner(e.Result,n);o(t),this.exportSuccess.emit()}),Object(P.a)(e=>(this.exportError.emit(e.error),Object(O.a)()))).subscribe()}}else{if(!this.isSummary)return;{const t=[],{columnHeaders:i,columns:o,rows:c,colSpan:r,columnsGrandTotalLabel:s,rowsGrandTotalLabel:l,rowsGrandTotalMeasures:a}=n.pivot,u=n.measureInfos,d=this.singleRowDimension,b=d?d.attributes:[],f={};let m=!0;for(const e of i){const n=[];t.push(n);for(let e=0;e<r;e++)n.push(null);if(d)if(m)for(const e of b)n.push(e.label());else for(const e of b)n.push(null);for(const t of e){for(;f[n.length];)n.push(null);let e;t.rowSpan>1&&(f[n.length]=!0),e=this.isDefined(t)?this.displayValue(t.value,t.info.desc,t.info.entityDesc):this.translate.instant("Undefined"),n.push(e);for(let i=1;i<t.expandedColSpan;i++)n.push(null)}m&&s&&n.push(s.label()),m=!1}if(this.showMeasureLabelsRow){const e=[];t.push(e);for(let t=0;t<r;t++)e.push(null);if(d)if(m)for(const t of b)e.push(t.label());else for(const t of b)e.push(null);for(const t of o)if(0===t.children.length)for(const n of u)e.push(n.label());if(this.showColumnsGrandTotalsMeasureLabels)for(const t of u)e.push(t.label())}for(const e of c){const n=[];t.push(n);{let t="";for(let n=0;n<e.level;n++)t+="            ";this.isDefined(e)?t+=this.displayValue(e.value,e.info.desc,e.info.entityDesc):t+=this.translate.instant("Undefined"),n.push(t)}if(d)for(const t of e.attributes){const e=this.displayValue(t.value,t.info.desc,t.info.entityDesc);n.push(e)}for(const t of e.measures)if(!t.column||0===t.column.children.length){for(let e=0;e<u.length;e++){const i=Object(ge.c)(t.values[e],u[e].desc,this.workspace,this.translate);n.push(i)}0===u.length&&n.push(null)}}if(a){const e=[];if(t.push(e),l&&e.push(l.label()),d)for(const t of b)e.push(null);for(const t of a)if(!t.column||0===t.column.children.length)for(let n=0;n<u.length;n++){const i=Object(ge.c)(t.values[n],u[n].desc,this.workspace,this.translate);e.push(i)}}this.downloadData(t,e),this.exportSuccess.emit()}}}catch(n){this.exportError.emit(n)}}downloadData(e,t){let n=0;for(const o of e)o.length>n&&(n=o.length);for(const o of e)for(;o.length<n;)o.push(null);const i=Object(N.g)(e);Object(N.i)(i,t||this.translate.instant("Report")+".csv")}get isDetails(){return!!this.definition&&"Details"===this.definition.Type}get isSummary(){return!!this.definition&&"Summary"===this.definition.Type}get showDetails(){return this.isDetails}get showSummary(){return this.isSummary&&this.view===ts.pivot}get showChart(){return this.isSummary&&this.view===ts.chart&&-1!==this.state.singleNumericMeasureIndex}get showSpecifyNumericMeasure(){return this.isSummary&&this.view===ts.chart&&-1===this.state.singleNumericMeasureIndex}get showResults(){return this.state.reportStatus===B.i.loaded&&!this.showNoItemsFound}get showErrorMessage(){return this.state.reportStatus===B.i.error}get showInformation(){return this.state.reportStatus===B.i.information}get showSpinner(){return this.state.reportStatus===B.i.loading}get showNoItemsFound(){const e=this.state;return e.reportStatus===B.i.loaded&&(!e.result||0===e.result.length)}get errorMessage(){return this.state.errorMessage}information(){return this.state.information()}get chart(){return this.definition?this.definition.Chart:null}extractValue(e,t,n=0){return t.entityDesc?t.indices.map(t=>e[t-n]):e[t.keyIndex-n]}get pivot(){const e=this.state,t=this.definition,n=this.workspace.currentTenant;if(e.currentResultForPivot!==e.result){e.currentResultForPivot=e.result;const c=e.columnInfos,r=c.length>0,s=e.measureInfos.length>0&&(t.ShowColumnsTotal||0===c.length),l=e.rowInfos,a=l.length>0,u=e.measureInfos.length>0&&(t.ShowRowsTotal||0===l.length),d=(t,n)=>{const i={cell:null},o=[],c=e=>{if(n){e.measures=[];const t=s?n.length+1:n.length;for(let i=0;i<t;i++){const t=n[i];e.measures.push({aggValues:[],values:[],classes:[],column:t,row:e,isTotal:r&&!t})}}},l=(e,t,n,i)=>{let r;if(e){if(r=n.ancestors[e],!r){const s=i.ancestors[e],a=this.extractValue(s,t,i.minIndex),u=l(s[t.parentKeyIndex-i.minIndex],t,n,i);r={info:t,value:a,valueId:e,isExpanded:t.autoExpandLevel>(u?u.level+1:0)-(n.cell?n.cell.level:-1)-1,level:u?u.level+1:0,index:0,parent:u,prevDimensionParent:n.cell,children:[],attributes:[]};for(const e of t.attributes){let t;t=e.entityDesc||e.indices.length>1?e.indices.map(e=>s[e-i.minIndex]):s[e.indices[0]-i.minIndex],r.attributes.push({value:t,info:e}),e.isOrdered&&(r.sortValue=this.sortValue(t,e.desc,e.entityDesc))}t.isOrdered&&(r.sortValue=this.sortValue(r.value,t.desc,t.entityDesc)),(u?u.children:o).push(r),c(r),n.ancestors[e]=r}r.isAncestor=!0}else r=n.cell;return r};if(t.length>0)for(const r of e.result){let n=i;for(const i of t){const t=r[i.keyIndex],s=this.extractValue(r,i);let a;if(Object(N.n)(t)?(n.values||(n.values={}),a=n.values[t]):a=n.undefined,!a){let u;if(i.showAsTree){n.ancestors||(n.ancestors={});const o=e.ancestorGroups[i.keyIndex];u=l(o.ancestors[t]?t:r[i.parentKeyIndex],i,n,o)}else u=n.cell;const d=u?u.level+1:0,b={info:i,value:s,valueId:t,isExpanded:i.autoExpandLevel>d-(n.cell?n.cell.level:-1)-1,level:d,index:0,parent:u,prevDimensionParent:n.cell,children:[],attributes:[]};for(const e of i.attributes){let t;t=e.entityDesc||e.indices.length>1?e.indices.map(e=>r[e]):r[e.indices[0]],b.attributes.push({value:t,info:e}),e.isOrdered&&(b.sortValue=this.sortValue(t,e.desc,e.entityDesc))}i.isOrdered&&(b.sortValue=this.sortValue(b.value,i.desc,i.entityDesc)),(u?u.children:o).push(b),c(b),a={cell:b},Object(N.n)(t)?n.values[t]=a:n.undefined=a}n=a}}return{hash:i,roots:o}};function i(e,t,n=0){switch(e[0].info.orderDir){case"asc":e.sort((e,t)=>e.sortValue===t.sortValue?0:null===e.sortValue?-1:null===t.sortValue||e.sortValue>t.sortValue?1:e.sortValue<t.sortValue?-1:0);break;case"desc":e.sort((e,t)=>e.sortValue===t.sortValue?0:null===e.sortValue?1:null===t.sortValue||e.sortValue>t.sortValue?-1:e.sortValue<t.sortValue?1:0)}for(const o of e)o.index=n++,t.push(o),o.children&&o.children.length>0?n=i(o.children,t,n):o.isExpanded=!1;return n}const{hash:b,roots:f}=d(c),m=[];f.length>0&&i(f,m);const g=[];for(const e of m)g[e.level]?g[e.level].push(e):g[e.level]=[e];let p;s&&r&&(p={label:t.ColumnsTotalLabel?()=>n.localize(t.ColumnsTotalLabel,t.ColumnsTotalLabel2,t.ColumnsTotalLabel3):()=>this.translate.instant("GrandTotal"),isTotal:r});const{hash:h,roots:v}=d(l,m);let I,y;if(u){a&&(I={label:t.RowsTotalLabel?()=>n.localize(t.RowsTotalLabel,t.RowsTotalLabel2,t.RowsTotalLabel3):()=>this.translate.instant("GrandTotal"),isTotal:a}),y=[];const e=s?m.length+1:m.length;for(let t=0;t<e;t++)y.push({aggValues:[],values:[],classes:[],column:m[t],row:null,isTotal:a})}function o(e){return Object(N.n)(e)?e:null}if(e.uniqueMeasureAggregations.length>0)for(const t of e.result){let n=m.length,i=b;for(const e of c){const o=t[e.keyIndex];i=Object(N.n)(o)?i.values[o]:i.undefined,n=i.cell.index}let r,s=y,a=h;for(const e of l){const n=t[e.keyIndex];a=Object(N.n)(n)?a.values[n]:a.undefined,r=a.cell,r.measures=r.measures||[],s=r.measures}let u=s;for(;u;){let i=n,c=u[i];for(;c;)if(e.uniqueMeasureAggregations.forEach((e,n)=>{const{exp:i,index:r}=e,s=o(t[r]),l=o(c.aggValues[n]);switch(i.nameLower){case"sum":case"count":c.aggValues[n]=null===l&&null===s?null:l+s;break;case"max":c.aggValues[n]=null===l?s:null===s?l:l<s?s:l;break;case"min":c.aggValues[n]=null===l?s:null===s||l<s?l:s}}),c.column&&c.column.parent)i=c.column.parent.index,c=u[i];else{if(i===m.length)break;i=m.length,c=u[i]}const r=u[n];if(r.row&&r.row.parent)u=r.row.parent.measures;else{if(u===y)break;u=y}}}if(e.measureInfos.length>0){const t=(t,n)=>{e.measureInfos.forEach((i,o)=>{const c=io.evaluateExp(i.exp,t.aggValues,this.arguments,this.workspace);t.values[o]=c,t.classes[o]=i.danger&&io.evaluateExp(i.danger,t.aggValues,this.arguments,this.workspace)?"t-danger":i.warning&&io.evaluateExp(i.warning,t.aggValues,this.arguments,this.workspace)?"t-warning":i.success&&io.evaluateExp(i.success,t.aggValues,this.arguments,this.workspace)?"t-success":null,e.havingExp&&(n||t.column&&t.column.children.length>0||!t.column&&e.columnInfos.length>0)&&(t.disableDrilldown=!0),i.isOrdered&&t.row&&(t.row.sortValue=c)})};if(y){const n=e.rowInfos.length>0;for(const e of y)t(e,n)}!function e(n){for(const i of n){const n=i.children.length>0;for(const e of i.measures)t(e,n);n&&e(i.children)}}(v)}const w=[];v.length>0&&i(v,w),e.pivot={maxVisibleLevel:0,rowSpan:0,colSpan:0,columnHeaders:g,columns:m,rows:w,rowsGrandTotalMeasures:y,columnsGrandTotalLabel:p,rowsGrandTotalLabel:I,columnsGrandTotalsIncluded:s},this.recomputeColumnSpans(e.pivot),g.forEach(e=>e.forEach(e=>{e.expandedColSpan=0}));for(let t=g.length-1;t>=0;t--)for(let n=g[t].length-1;n>=0;n--){const i=g[t][n];i.expandedColSpan=i.expandedColSpan||e.measureInfos.length||1,i.parent&&(i.parent.expandedColSpan+=i.expandedColSpan)}g.forEach(e=>e.forEach(e=>{e.expandedRowSpan=0===e.children.length?g.length-e.level:1}))}return e.pivot}recomputeColumnSpans(e){const t=this.state,n=(e=e||t.pivot).columnHeaders,i=t.measureInfos.length;n.forEach(e=>e.forEach(e=>{e.colSpan=0,e.isVisible=!e.parent||e.parent.isVisible&&e.parent.isExpanded}));for(let o=n.length-1;o>=0;o--)for(let e=n[o].length-1;e>=0;e--){const t=n[o][e];t.colSpan=t.colSpan||i||1,t.parent&&t.parent.isExpanded&&(t.parent.colSpan+=t.colSpan)}e.maxVisibleLevel=-1,n.forEach(t=>t.forEach(t=>{t.isVisible&&t.level>e.maxVisibleLevel&&(e.maxVisibleLevel=t.level)})),n.forEach(t=>t.forEach(t=>{t.rowSpan=t.isExpanded?1:e.maxVisibleLevel+1-t.level}));{const t=e.columnsGrandTotalLabel;t&&(t.colSpan=i||1,t.rowSpan=e.maxVisibleLevel+1)}e.colSpan=0===t.rowInfos.length?0:1,e.rowSpan=e.maxVisibleLevel+1+(this.showMeasureLabelsRow?1:0)}showHeaderRow(e){return e<=this.pivot.maxVisibleLevel}onExpandRow(e){e.isExpanded=!e.isExpanded,this.recomputeVisibleRows()}onExpandColumn(e){e.isExpanded=!e.isExpanded,this.recomputeColumnSpans()}recomputeVisibleRows(){const e=this.state.pivot.rows;e.forEach(e=>e.isVisible=!e.parent||e.parent.isExpanded&&e.parent.isVisible),this._modifiedRows=e.filter(e=>e.isVisible)}hasChildren(e){return!!e.children&&e.children.length>0}flipArrow(e){return this.workspace.ws.isRtl&&!e.isExpanded?"horizontal":null}get rowAttributePlacement(){return this.workspace.ws.isRtl?this._rowAttributePlacementRtl:this._rowAttributePlacement}rotateArrow(e){return e.isExpanded?90:0}isMeasureVisible(e){return!e||e.isVisible&&!e.isExpanded}trackByRow(e,t){return t[0]}trackByObject(e,t){return t}paddingLeft(e){return this.workspace.ws.isRtl?"0":30*e.level+"px"}paddingRight(e){return this.workspace.ws.isRtl?30*e.level+"px":"0"}get columnHeaders(){return this.pivot.columnHeaders}get columnCells(){return this.pivot.columns}get tooManyColumns(){return this.pivot.columns.length*(this.measures.length||1)>this.maximumColumns}get rows(){const e=this.pivot;return this._currentRows!==e.rows&&(this._currentRows=e.rows,this.recomputeVisibleRows()),this._modifiedRows}get showRowDimensionLabel(){return!1}get singleRowDimension(){const e=this.state;if(e.rowInfos&&1===e.rowInfos.length)return e.rowInfos[0]}get showMeasureLabelsRow(){const e=this.state;if(e.measureInfos.length>0&&(e.measureInfos.length>1||0===e.columnInfos.length))return!0;{const e=this.singleRowDimension;return!this.showHeaderRow(0)&&!!e&&e.attributes.length>0}}get showColumnsGrandTotalsMeasureLabels(){return!!this.pivot.columnsGrandTotalsIncluded}get rowSpan(){return this.pivot.rowSpan}get colSpan(){return this.pivot.colSpan}get rowsGrandTotalMeasures(){return this.pivot.rowsGrandTotalMeasures}get columnsGrandTotalLabel(){return this.pivot.columnsGrandTotalLabel}get rowsGrandTotalLabel(){return this.pivot.rowsGrandTotalLabel}get measures(){return this.state.measureInfos}computeFilterAtoms(e){const t=[];let n=e;for(;n;){const{keyExp:e,keyDesc:i,entityDesc:o}=n.info;let c,r;if(n.isAncestor)c=o.properties.Id.datatype,r=io.stringify(e,void 0,void 0)+".Id";else if("entity"===i.datatype){const t=e.clone();t.property=i.foreignKeyName,c=o.properties.Id.datatype,r=io.stringify(t,void 0,void 0)}else c=i.datatype,r=io.stringify(e,void 0,void 0);const s=n.valueId;let l;l=Object(N.n)(s)?io.needsQuotes(c)?`'${s.replace(/\'/g,"''")}'`:s+"":"null",t.push(`(${r} ${n.isAncestor?"descof":"eq"} ${l})`),n=n.prevDimensionParent}return t}computeMeasureAtoms(e){if(-1===e)return[];const t=this.state,n=t.measureInfos[e].exp.aggregations(),i={};for(const c of n){if(c.arguments.length<2)return[];i[io.stringify(c.arguments[1],this.arguments,t.parameterInfos)]=!0}const o=Object.keys(i);return 0===o.length?[]:1===o.length?o:[`(${o.reduce((e,t)=>e+" or "+t)})`]}onMeasureClick(e,t){if(e.disableDrilldown)return;const n=e.column,i=this.computeFilterAtoms(e.row),o=this.computeFilterAtoms(n),c=this.computeMeasureAtoms(t),r=i.concat(o).concat(c);let s;s=0===r.length?null:1===r.length?r[0]:`(${r.reduce((e,t)=>e+" and "+t)})`;const l=this.state;l.drilledCell&&delete l.drilledCell.drilledIndex,e.drilledIndex=t,l.drilledCell=e,this.drilldown(s)}drilldown(t){if(this.disableDrilldown)return;const n=this.state,i=io.stringify(n.filterExp,this.arguments,n.parameterInfos),o=i&&t?`${i} and ${t}`:t?Wi(t):i?Wi(i):null,c={};o&&(c.filter=o);const r=this.workspace.ws.tenantId,s=this.definition;if(s.IsCustomDrilldown&&s.Id&&s.Select&&s.Select.length>0){const t=this.definition.Id;c.cache_buster=e.CACHE_BUSTER++,this.router.navigate(["app",r+"","drilldown",t+"",c])}else if(this.entityDescriptor.masterScreenUrl){const e=this.entityDescriptor.masterScreenUrl.split("/");c.inactive=!0,this.router.navigate(["app",r+"",...e,c])}else console.error(`No screen URL is defined for collection: '${s.Collection}', definitionId '${s.DefinitionId}'`)}isDefined(e){return Object(N.n)(e.valueId)}get addRowExpanders(){const e=this.state.rowInfos;return e.length>1||e.length>0&&e[0].showAsTree}displayValue(e,t,n){if(Array.isArray(e)){if(n)return n.formatFromVals(e);{const n=this.workspace.currentTenant.localize(e[0],e[1],e[2]);return Object(ge.c)(n,t,this.workspace,this.translate)}}return Object(ge.c)(e,t,this.workspace,this.translate)}sortValue(e,t,n){return Array.isArray(e)?n?n.formatFromVals(e):this.workspace.currentTenant.localize(e[0],e[1],e[2]):e}descAlignment(e){if(e.isRightAligned)return"right"}hasColor(e){return!!e.color}stateColor(e,t){if(t.color)return t.color(e)}get point(){const e=this.pivot,t=this.state;if(t.currentPivotForPoint!==e){t.currentPivotForPoint=e;const n=t.singleNumericMeasureIndex,i=t.measureInfos[n];if(!i||!e.rowsGrandTotalMeasures||e.rowsGrandTotalMeasures.length<1)t.point=null;else if(0===t.dimensionInfos.length){const o=e.rowsGrandTotalMeasures[0],c=o.values[n]||0;t.point=Object(ge.c)(c,i.desc,this.workspace,this.translate),t.pointClass=o.classes[n]}else t.point=null,t.pointClass=null;delete t.singleCellsHash,delete t.singleCellsUndefined}return t.point}get pointClass(){return this.state.pointClass}incrementDate(e,t){const n=t.info.keyDesc;if("date"===n.datatype){if(n.granularity===Vi.a.days)e.setDate(e.getDate()+1);else{const t=n.calendar||"GC",i=Object(Hi.g)(e,t);switch(1!==i.day&&console.error("Bug: incrementDate called on",i),n.granularity){case Vi.a.years:i.year++;break;case Vi.a.months:i.month++,i.month>Object(Hi.f)(t)&&(i.month=1,i.year++)}e.setTime(Object(Hi.c)(i,t).getTime())}return Object(Mi.d)(e)}}minDate(e,t){let n,i;const o=e.info;if("date"===o.keyDesc.datatype&&o.isOrdered&&"asc"===o.orderDir){let o=e;i=o.valueId,!i&&t&&(o=t,i=o.valueId),i&&(n=Object(Mi.a)(i))}return{minDate:n,minString:i}}get single(){const e=this.pivot,t=this.state;if(t.currentPivotForSingle!==e||t.currentLangForSingle!==this.translate.currentLang||t.currentCalendarForSingle!==this.workspace.calendar){t.currentPivotForSingle=e,t.currentLangForSingle=this.translate.currentLang,t.currentCalendarForSingle=this.workspace.calendar;const i=t.singleNumericMeasureIndex;if(t.measureInfos[i]&&e)if(1===t.dimensionInfos.length)try{const n=t.rowInfos.length>0?e.rows.map(e=>e.measures[0]):e.rowsGrandTotalMeasures,o=n[0].row||n[0].column,c=n[1]?n[1].row||n[1].column:void 0,{minDate:r,minString:s}=this.minDate(o,c),l=r?new Date(r.getTime()):null;let a=s,u=0;const d=[];let b=0;for(const e of n){const t=e.row||e.column;if(!t||t.isAncestor)continue;for(;a&&a<t.valueId;)d.push({name:this.chartDimensionCellFromDimensionCell(t.info,a,a,void 0,b++),value:0}),a=this.incrementDate(l,t);const n=this.colorFromClass(e.classes[i]),o=e.values[i]||0;u+=o,d.push({name:this.chartDimensionCellFromDimensionCell(t.info,t.value,t.valueId,n,b++),value:o}),a&&t.valueId&&(a=this.incrementDate(l,t))}t.single=d,e.rowsGrandTotalMeasures&&e.rowsGrandTotalMeasures.length>0&&(t.totalEqualsSum=Math.abs(Math.round(1e6*(e.rowsGrandTotalMeasures[e.rowsGrandTotalMeasures.length-1].values[i]||0))-Math.round(1e6*u))<2),delete t.singleCellsHash,delete t.singleCellsUndefined}catch(n){t.reportStatus=B.i.error,t.errorMessage=n.message}else t.single=null;else t.single=null}return t.single}colorFromClass(e){let t;switch(e){case"t-success":t="#28a745";break;case"t-warning":t="#ffc107";break;case"t-danger":t="#dc3545"}return t}get multi(){const e=this.pivot,t=this.state;if(t.currentPivotForMulti!==e||t.currentLangForMulti!==this.translate.currentLang||t.currentCalendarForMulti!==this.workspace.calendar){t.currentPivotForMulti=e,t.currentLangForMulti=this.translate.currentLang,t.currentCalendarForMulti=this.workspace.calendar;const n=t.singleNumericMeasureIndex,i=t.measureInfos[n];if(i&&e)if(1===t.dimensionInfos.length){const e=this.single,n=i.label(),o=new B.a(n,n,null,1);t.multi=[{name:o,series:e}]}else if(2===t.dimensionInfos.length){const i=t.dimensionInfos[0],o=t.dimensionInfos[1],c=[];if(2===t.rowInfos.length||2===t.columnInfos.length){let r,s,l,a;2===t.rowInfos.length?(s=e.rows,r=e=>e.measures[0]):(s=e.columns,r=t=>e.rowsGrandTotalMeasures[t.index]);let u,d=0;for(const e of s)if(!e.isAncestor&&(e.info===i&&(l=this.chartDimensionCellFromDimensionCell(e.info,e.value,e.valueId,void 0,d++),a=[],u=0,c.push({name:l,series:a})),e.info===o)){const t=r(e),i=this.colorFromClass(t.classes[n]),o=this.chartDimensionCellFromDimensionCell(e.info,e.value,e.valueId,i,u++,l);a.push({name:o,value:t.values[n]||0})}}else{const t=e.rows[0],i=e.rows[1],{minDate:o,minString:r}=this.minDate(t,i);let s=0;for(const l of e.columns){if(l.isAncestor)continue;const t=this.chartDimensionCellFromDimensionCell(l.info,l.value,l.valueId,void 0,s++),i=[];c.push({name:t,series:i});let a=0;const u=o?new Date(o.getTime()):null;let d=r;for(const o of e.rows){if(o.isAncestor)continue;for(;d&&o.valueId>d;)i.push({name:this.chartDimensionCellFromDimensionCell(o.info,d,d,void 0,a++),value:0}),d=this.incrementDate(u,o);const e=o.measures[l.index],c=this.colorFromClass(e.classes[n]),r=this.chartDimensionCellFromDimensionCell(o.info,o.value,o.valueId,c,a++,t);i.push({name:r,value:e.values[n]||0}),d&&(d=this.incrementDate(u,o))}}}t.multi=c}else t.multi=null;else t.multi=null;delete t.singleCellsHash,delete t.singleCellsUndefined}return t.multi}formatChartDimension(e){return e.display}formatAlternativeChartDimension(e){return e.data.name.display}get firstDimensionLabel(){const e=this.state.dimensionInfos[0];return e?e.label():""}get secondDimensionLabel(){const e=this.state.dimensionInfos[1];return e?e.label():""}get measureLabel(){const e=this.state,t=e.measureInfos[e.singleNumericMeasureIndex];return t?t.label():""}onChartSelect(e){if(e){const t=this.computeFilterAtoms(e),n=t.length?t.reduce((e,t)=>e+" and "+t):null;this.drilldown(n)}}onPointSelect(){this.drilldown(null)}get numberOfDimensions(){return this.state.dimensionInfos.length}get supportsPoint(){return 0===this.numberOfDimensions}get supportsSingle(){return 1===this.numberOfDimensions}get supportsMulti(){return 2===this.numberOfDimensions}get selectInfos(){return this.state.selectInfos}get flat(){if(!this.showResults)return[];const e=this.state,t=e.result;return e.currentResultForFlat!==t&&(e.currentResultForFlat=t,e.flat=this.flatInner(t,e)),e.flat}flatInner(e,t){const n=[];if(!e)return[];for(const i of e){const e=[];for(const n of t.selectInfos)e.push(n.entityDesc||n.indices.length>1?n.indices.map(e=>i[e]):i[n.indices[0]]);n.push(e)}return n}isRightAligned(e){switch(e.control){case"number":case"percent":return e.isRightAligned;default:return!1}}onFlatSelect(e){const t=this.state,n=t.result[e],i=this.entityDescriptor;if(i.navigateToDetailsFromVals){const e=t.navigateToDetailsIndices.map(e=>n[e]);i.navigateToDetailsFromVals(e,this.router)}else if(i.masterScreenUrl)if(t.idIndex>-1){const e=n[t.idIndex],o=["app",this.workspace.ws.tenantId+"",...i.masterScreenUrl.split("/")];t.defIdIndex>-1&&o.push(n[t.defIdIndex]),o.push(e),this.router.navigate(o)}else{const e=this.definition;console.error(`no screen URL is defined for collection: '${e.Collection}', definitionId '${e.DefinitionId}'`)}}get canOrderByFlat(){return!this.definition.Top}onOrderByFlat(e){if(!this.canOrderByFlat)return;if(0===e.exp.columnAccesses().length)return;const t=this.state;t.skip=0;const n=e.exp.toString();t.orderbyKey===n?"asc"===t.orderbyDir?t.orderbyDir="desc":(delete t.orderbyKey,delete t.orderbyDir):(t.orderbyKey=n,t.orderbyDir="asc"),this.orderbyChange.emit(),this.rememberFlatColumnWidths(),this.fetch()}orderDirection(e){if(this.isOrdered(e))return this.state.orderbyDir}isOrdered(e){if(e){const t=this.state;if(e.expToString===t.orderbyKey)return!!t.orderbyDir}}get isDescending(){return"desc"===this.state.orderbyDir}rememberFlatColumnWidths(){if(!this.flatHeader)return;const e=this.flatHeader.nativeElement;if(!e)return;const t=this.selectInfos;for(let n=1;n<e.cells.length-1;n++){const i=t[n-1];i&&(i.width=e.cells[n].offsetWidth+"px")}}forgetFlatColumnWidths(){this.state.selectInfos.forEach(e=>delete e.width)}}return e.DEFAULT_PAGE_SIZE=60,e.CACHE_BUSTER=1,e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e),o.Pb(J.a),o.Pb(o.h),o.Pb(i.e),o.Pb(i.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-report-results"]],viewQuery:function(e,t){var n;1&e&&o.Yc(ro,!0),2&e&&o.Ec(n=o.ic())&&(t.flatHeader=n.first)},inputs:{state:"state",definition:"definition",arguments:"arguments",view:"view",refresh:"refresh",export:"export",mode:"mode",disableDrilldown:"disableDrilldown"},outputs:{silentRefreshError:"silentRefreshError",exportStarting:"exportStarting",exportSuccess:"exportSuccess",exportError:"exportError",orderbyChange:"orderbyChange"},features:[o.zb],decls:8,vars:2,consts:[["autocell",""],["undefinedLabel",""],[4,"ngIf"],["nonresult",""],[3,"ngSwitch",4,"ngIf","ngIfElse"],[3,"ngSwitch"],["class","d-inline text-nowrap",4,"ngSwitchCase"],["class","d-inline",3,"float",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"d-inline","text-nowrap"],["class","text-white px-2 font-weight-normal",3,"background-color",4,"ngIf","ngIfElse"],["nocolor",""],[1,"text-white","px-2","font-weight-normal"],[1,"d-inline"],[1,"font-italic","text-muted"],[1,"w-100","h-100","table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-hover","table-striped","table-sm","bg-white","border-bottom","t-master-table","text-nowrap"],["class","t-pointer",3,"t-highlight",4,"cdkVirtualFor","cdkVirtualForOf"],[4,"ngTemplateOutlet"],["flatHeader",""],[2,"width","15px"],[3,"width","text-right","dropdown-toggle","click",4,"ngFor","ngForOf"],[3,"click"],[1,"t-pointer"],[3,"width","click",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["dimattribtues",""],["class","h-100 w-100","style","position: relative;",4,"ngIf"],["class","w-100 p-3 px-4",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-weight-bold","p-1"],[1,"p-1","align-middle","text-truncate"],["class","h-100","itemSize","32",4,"ngIf","ngIfElse"],["toomanycolumnserror",""],["itemSize","32",1,"h-100"],[1,"table","table-hover","table-bordered","border","table-sm","bg-white","t-report-table","text-nowrap"],["class","t-report-row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["class","t-report-row",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","font-weight-bold t-report-dimension align-middle",3,"rowSpan","colSpan",4,"ngIf"],[1,"t-report-dimension",3,"colSpan","rowSpan"],["class","t-report-dimension",3,"rowSpan",4,"ngFor","ngForOf"],[1,"t-report-dimension",3,"rowSpan"],["class","t-report-dimension","container","body","placement","bottom-left","triggers","click",3,"rowSpan","colSpan","ngbPopover","disablePopover",4,"ngIf"],["attributes",""],["container","body","placement","bottom-left","triggers","click",1,"t-report-dimension",3,"rowSpan","colSpan","ngbPopover","disablePopover"],[1,"border-0","px-2","h-100","font-weight-normal",2,"background-color","transparent",3,"click"],["icon","angle-right",3,"flip","rotate"],[1,"font-weight-bold","t-report-dimension","align-middle",3,"rowSpan","colSpan"],["class","t-report-dimension",4,"ngFor","ngForOf"],[1,"t-report-dimension"],["class","t-report-dimension",3,"font-weight-bold",4,"ngFor","ngForOf","ngForTrackBy"],["class","t-report-dimension",3,"font-weight-bold",4,"ngFor","ngForOf"],[1,"t-report-row"],["container","body","triggers","mouseenter:mouseleave",1,"t-report-dimension",3,"ngbPopover","placement","disablePopover"],["class","border-0 px-2 h-100 font-weight-normal","style","background-color: transparent",3,"margin-left","margin-right","opacity","disabled","click",4,"ngIf"],[1,"border-0","px-2","h-100","font-weight-normal",2,"background-color","transparent",3,"disabled","click"],["class","t-report-attribute",4,"ngFor","ngForOf"],[1,"t-report-attribute"],[3,"class","t-disable-drilldown","font-weight-bold","t-highlight","click",4,"ngFor","ngForOf"],["class","t-report-measure",3,"click",4,"ngIf"],[1,"t-report-measure",3,"click"],["class","font-weight-bold t-report-dimension align-middle",4,"ngIf"],[1,"font-weight-bold","t-report-dimension","align-middle"],["class","border-0 px-2 h-100 font-weight-normal","style","background-color: transparent","style","opacity: 0","disabled","",4,"ngIf"],["disabled","",1,"border-0","px-2","h-100","font-weight-normal",2,"opacity","0"],["icon","angle-right"],[1,"w-100","pt-3"],[1,"h-100","w-100",2,"position","relative"],[2,"position","absolute","left","0","right","0","top","0","bottom","0",3,"ngSwitch"],[4,"ngSwitchCase"],["notsupported",""],["tooltip",""],["seriesTooltip",""],["heatmapTooltip",""],["class","h-100 d-flex justify-content-center align-items-center py-4",4,"ngIf","ngIfElse"],[1,"h-100","d-flex","justify-content-center","align-items-center","py-4"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["tooltipTemplate",""],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","labelFormatting","labels","trimLabels","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","labels","trimLabels","select"],["class","t-ltr",3,"animations","scheme","customColors","results","doughnut","labelFormatting","labels","trimLabels","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","doughnut","labelFormatting","labels","trimLabels","select"],["class","t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select"],["class","t-ltr","cardColor","#EAF0F5","textColor","black",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select",4,"ngIf","ngIfElse"],["cardColor","#EAF0F5","textColor","black",1,"t-ltr",3,"animations","scheme","customColors","results","labelFormatting","valueFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","max","showText","valueFormatting","axisTickFormatting","legend","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","max","showText","valueFormatting","axisTickFormatting","legend","select"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","roundEdges","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","customColors","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","xAxisTickFormatting","select"],["class","t-ltr",3,"animations","scheme","results","xAxis","yAxis","showXAxisLabel","legend","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","results","xAxis","yAxis","showXAxisLabel","legend","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],["seriesTooltipTemplate",""],["class","t-ltr",3,"animations","scheme","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select",4,"ngIf","ngIfElse"],[1,"t-ltr",3,"animations","scheme","results","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","xAxisTickFormatting","yAxisTickFormatting","select"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"text-white","p-1"],[2,"font-size","130%"],[1,"area-tooltip-container"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[1,"tooltip-item-color"],["class","w-100 pt-3 d-flex justify-content-center",4,"ngIf"],["class","w-100 px-3 pt-3",4,"ngIf"],["class","w-100 pt-3",4,"ngIf"],["class","w-100 px-4 pt-3",4,"ngIf"],[1,"w-100","pt-3","d-flex","justify-content-center"],[3,"scale"],[1,"w-100","px-3","pt-3"],[1,"w-100","px-4","pt-3"]],template:function(e,t){1&e&&(o.Rc(0,go,1,2,"ng-template",null,0,o.Sc),o.Rc(2,po,3,3,"ng-template",null,1,o.Sc),o.Rc(4,Vo,8,3,"ng-container",2),o.Rc(5,Jr,3,2,"ng-container",2),o.Rc(6,es,4,4,"ng-template",null,3,o.Sc)),2&e&&(o.Bb(4),o.sc("ngIf",t.isDetails),o.Bb(1),o.sc("ngIf",t.isSummary))},directives:[x.u,x.y,x.z,x.A,oo.e,oo.a,oo.d,x.B,x.t,K.C,ee.b,ve.a,co.p,co.k,co.S,co.kb,co.Q,co.D,co.o,co.r,co.q,co.j,co.m,co.l,co.L,co.c,co.I,me.a],pipes:[Q.d],encapsulation:2,changeDetection:0}),e})();const os=function(e,t){return[e,t]};function cs(e,t){if(1&e&&(o.Vb(0,"a",1),o.qc(1),o.Ub()),2&e){const e=o.lc();o.sc("routerLink",o.xc(1,os,e.link,e.itemId))}}const rs=["*"];let ss=(()=>{class e{constructor(){this.w100=!0}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-view-link"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("w-100",t.w100)},inputs:{link:"link",itemId:"itemId"},ngContentSelectors:rs,decls:1,vars:1,consts:[["class","t-view-link",3,"routerLink",4,"ngIf"],[1,"t-view-link",3,"routerLink"]],template:function(e,t){1&e&&(o.rc(),o.Rc(0,cs,2,4,"a",0)),2&e&&o.sc("ngIf",t.itemId)},directives:[x.u,i.h],encapsulation:2}),e})();var ls=n("xgIS"),as=n("XqQ8"),us=n("lJxs"),ds=n("Kj3r");const bs=["input"],fs=["detailsWrapperTemplate"],ms=["masterWrapperTemplate"],gs=["detailsOptionsTemplate"],ps=["masterOptionsTemplate"];function hs(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",16),o.hc("click",(function(){return o.Ic(e),o.lc().onEditFromFocus()})),o.mc(1,"translate"),o.Qb(2,"fa-icon",17),o.Ub()}if(2&e){const e=o.lc();o.Gb("btn-light",!e.isDark)("text-primary",!e.isDark)("btn-secondary",e.isDark)("t-text-whitish",e.isDark),o.tc("title",o.nc(1,10,"Edit")),o.sc("disabled",e.disableEditSelected)}}function vs(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",18),o.hc("click",(function(){return o.Ic(e),o.lc().openSearchModal()})),o.mc(1,"translate"),o.Qb(2,"fa-icon",19),o.Ub()}if(2&e){const e=o.lc();o.Gb("btn-light",!e.isDark)("text-primary",!e.isDark)("btn-secondary",e.isDark)("t-text-whitish",e.isDark),o.tc("title",o.nc(1,9,"Search"))}}function Is(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",21),o.hc("mouseenter",(function(){o.Ic(e);const n=t.index;return o.lc(2).onMouseEnter(n)}))("focus",(function(){o.Ic(e);const n=t.$implicit;return o.lc(2).onFocus(n)})),o.Tc(1),o.Ub()}if(2&e){const e=t.$implicit,n=t.index,i=o.lc(2);o.Gb("active",n===i.highlightedIndex),o.Bb(1),o.Vc(" ",i.formatterInner(e)," ")}}function ys(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Is,2,3,"button",20),o.Sb()),2&e){const e=o.lc();o.Bb(1),o.sc("ngForOf",e.searchResults)}}function ws(e,t){1&e&&o.Qb(0,"t-spinner")}function Cs(e,t){if(1&e&&(o.Vb(0,"t-error-message"),o.Tc(1),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.Vc(" ",e.errorMessage,"")}}function Ms(e,t){1&e&&(o.Vb(0,"span",22),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"NoItemsFound")))}function Vs(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Qb(1,"hr"),o.Vb(2,"div",23),o.Vb(3,"button",24),o.hc("click",(function(){return o.Ic(e),o.lc().onCreateFromFocus()})),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Sb()}if(2&e){const e=o.lc();o.Bb(2),o.sc("placement",e.placement)("ngbTooltip",e.createNewTooltip),o.Bb(1),o.Gb("text-primary",e.canCreateNew&&!e.isDark)("t-text-whitish",e.canCreateNew&&e.isDark)("text-muted",!e.canCreateNew)("active",e.highlightCreateNew),o.sc("disabled",!e.canCreateNew),o.Bb(1),o.Vc(" ",o.nc(5,12,"Create"),"... ")}}function Ts(e,t){1&e&&o.Rb(0)}const Es=function(e,t,n,i,o){return{update:e,modal:t,initialText:n,idString:i,definitionId:o}};function xs(e,t){if(1&e&&o.Rc(0,Ts,1,0,"ng-container",25),2&e){const e=t.$implicit,n=o.lc();o.sc("ngTemplateOutlet",n.detailsTemplate)("ngTemplateOutletContext",o.Ac(2,Es,n.onUpdate,e,n.initialText,n.idString,n.definitionId))}}function Us(e,t){1&e&&o.Rb(0)}const Rs=function(e,t,n,i,o){return{create:e,update:t,modal:n,filter:i,definitionId:o}};function Ds(e,t){if(1&e&&o.Rc(0,Us,1,0,"ng-container",25),2&e){const e=t.$implicit,n=o.lc();o.sc("ngTemplateOutlet",n.masterTemplate)("ngTemplateOutletContext",o.Ac(2,Rs,n.onCreateFromMasterModal,n.onUpdate,e,n.filter,n.definitionId))}}function Bs(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",36),o.Vb(1,"button",37),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc().$implicit.close(n)})),o.Tc(2),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2);o.sc("placement",n.placement)("ngbTooltip",n.createFromOptionsTooltip(e)),o.Bb(1),o.sc("disabled",!n.canCreateFromOptions(e)),o.Bb(1),o.Vc(" ",n.createOptionName(e)," ")}}function Ss(e,t){if(1&e&&(o.Vb(0,"div",26),o.Vb(1,"h5",27),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",28),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",29),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",30),o.Vb(8,"div",31),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Rc(11,Bs,3,4,"div",32),o.Ub(),o.Vb(12,"div",33),o.Vb(13,"button",34),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(14,"fa-icon",35),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,4,"CreateOptions")," "),o.Bb(7),o.Vc(" ",o.nc(10,6,"CreateOptionsMessage")," "),o.Bb(2),o.sc("ngForOf",e.createOptions),o.Bb(4),o.Vc(" \xa0",o.nc(16,8,"Cancel")," ")}}function ks(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",36),o.Vb(1,"button",38),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc().$implicit.close(n)})),o.Tc(2),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2);o.sc("placement",n.placement)("ngbTooltip",n.createFromOptionsTooltip(e)),o.Bb(2),o.Vc(" ",n.searchOptionName(e)," ")}}function Os(e,t){if(1&e&&(o.Vb(0,"div",26),o.Vb(1,"h5",27),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",28),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",29),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",30),o.Vb(8,"div",31),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Rc(11,ks,3,3,"div",32),o.Ub(),o.Vb(12,"div",33),o.Vb(13,"button",34),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(14,"fa-icon",35),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,4,"SearchOptions")," "),o.Bb(7),o.Vc(" ",o.nc(10,6,"SearchOptionsMessage")," "),o.Bb(2),o.sc("ngForOf",e.searchOptions),o.Bb(4),o.Vc(" \xa0",o.nc(16,8,"Cancel")," ")}}var _s=function(e){return e.showSpinner="showSpinner",e.showResults="showResults",e.showError="showError",e}({});let Ls=(()=>{class e{constructor(e,t,n,i){this.apiService=e,this.workspace=t,this.modalService=n,this.translate=i,this.additionalSelect=null,this.ensureAdditionalSelect=!1,this.includeInactive=!1,this.theme="light",this.definitionIds=[],this.entityLoaded=new o.n,this.w100=!0,this.MIN_CHARS_TO_SEARCH=1,this.SEARCH_PAGE_SIZE=15,this.cancelRunningCall$=new E.a,this.notifyFetchUnloadedItem$=new E.a,this._status=null,this._isDisabled=!1,this._searchResults=[],this._highlightedIndex=0,this._idString="new",this.api=this.apiService.crudFactory("",null),this.formatter=e=>this.descriptor.format(e),this.focus=()=>{this.input.nativeElement.focus()},this.onChange=e=>{},this.onTouched=()=>{},this.formatterInner=e=>{const t=this.workspace.current.get(this.collection,e);return e&&(!t||this.ensureAdditionalSelect&&this.additionalSelectKey&&!t.EntityMetadata[this.additionalSelectKey])?(this.fetchUnloadedItem(e),""):this.formatter(t)},this.hasCreatePermissions=e=>{const t=this.apiEndpoint(e);return this.workspace.current.canCreate(t)},this.hasReadPermissions=e=>{const t=this.apiEndpoint(e);return this.workspace.current.canRead(t)},this.onUpdate=e=>{this.chooseItem(e)},this.onCreateFromKeyDown=()=>{this.canCreateNew&&(this.status=null,this.onTouched(),this.openCreateModal())},this.onCreateFromMasterModal=()=>{this.canCreateNew&&(this.onTouched(),this.openCreateModal(this.definitionId))},this.onCreateFromFocus=()=>{this.canCreateNew&&this.openCreateModal()},this.onEditFromFocus=()=>{this.canEdit&&this.openEditModalInner()},this.openSearchModal=()=>{if((this.searchOptions.length||this.allDefinitionIds.length)>1){const e=this.isDark?"t-dark-theme":null;setTimeout(()=>{this.modalService.open(this.masterOptionsTemplate,{windowClass:e}).result.then(e=>{this.openSearchModalInner(e)},e=>{})},0)}else this.openSearchModalInner(this.searchOptions[0]||this.allDefinitionIds[0])},this.openCreateModal=e=>{if(e&&this.createOptions.some(t=>t===e))this.openCreateModalInner(e);else if(this.createOptions.length>1){const e=this.isDark?"t-dark-theme":null;setTimeout(()=>{this.modalService.open(this.detailsOptionsTemplate,{windowClass:e}).result.then(e=>{this.canCreateFromOptions(e)&&this.openCreateModalInner(e)},e=>{})},0)}else this.openCreateModalInner(this.createOptions[0])},this.openCreateModalInner=e=>{this._definitionId=e,this._idString="new",setTimeout(()=>{this.modalService.open(this.detailsWrapperTemplate,{windowClass:this.detailsModalWindowClass}).result.then(this.onFocusInput,this.onFocusInput)},0)},this.openEditModalInner=()=>{this.collection&&this.workspace.current[this.collection]&&this.workspace.current[this.collection][this.chosenItem]&&(this._idString=this.chosenItem.toString(),this._definitionId=this.chosenItemDefinitionId,this._idString&&this.modalService.open(this.detailsWrapperTemplate,{windowClass:this.detailsModalWindowClass}).result.then(this.onFocusInput,this.onFocusInput))},this.onFocusInput=()=>{this.input.nativeElement.focus()},this.canUpdatePermissions=e=>{const t=this.apiEndpoint(e);return this.workspace.current.canUpdate(t,null)},this.canCreateFromOptions=e=>this.hasCreatePermissions(e),this.createFromOptionsTooltip=e=>this.hasCreatePermissions(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}get additionalSelectKey(){return this.additionalSelect?`__${this.additionalSelect}`:null}get descriptor(){return wi.h[this.collection](this.workspace,this.translate,this.definitionIdsSingleOrDefault)}get chosenItemDefinitionId(){const e=this.entityDescriptor().definitionIds,t=this.workspace.current[this.collection][this.chosenItem];return e&&t?t.DefinitionId:null}ngOnInit(){const e=this.apiEndpoint(this.definitionIdsSingleOrDefault);this.api=this.apiService.crudFactory(e,this.cancelRunningCall$),this.subscriptions=new k.a,this.subscriptions.add(this.notifyFetchUnloadedItem$.pipe(Object(as.a)(e=>this.doFetchUnloadedItem(e))).subscribe()),this.subscriptions.add(Object(ls.a)(this.input.nativeElement,"input").pipe(Object(us.a)(e=>e.target.value),Object(A.a)(e=>{this._initialText=e,this._searchResults=[],this.status=null,this.cancelRunningCall$.next(),e||this.chooseItem(null)}),Object(ds.a)(20),Object(_.a)(e=>{if(!e||e.length<this.MIN_CHARS_TO_SEARCH)return Object(O.a)(null);{this.status=_s.showSpinner;const t={expand:this.expand,select:Object(N.e)(this.entityDescriptor(),this.additionalSelect),search:e,top:this.SEARCH_PAGE_SIZE,skip:0,filter:this.queryFilter};return this.api.getEntities(t).pipe(Object(A.a)(()=>this.status=_s.showResults),Object(P.a)(e=>(this._errorMessage=e.error,this.status=_s.showError,Object(O.a)(null))))}})).subscribe(e=>{if(e){const t=this.additionalSelectKey;if(t)for(const n of e.Result)n.EntityMetadata[t]=2;this._searchResults=Object(N.c)(e,this.workspace)}this._highlightedIndex=0})),this.subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.updateUI(this.chosenItem)}))}identical(e,t){return!e&&!t||!!e&&!!t&&e.length===t.length&&e.every((e,n)=>e===t[n])}ngOnChanges(e){(e.collection&&!e.collection.isFirstChange()||e.definitionIds&&!e.definitionIds.isFirstChange()&&!this.identical(e.definitionIds.currentValue,e.definitionIds.previousValue))&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}entityDescriptor(e){const t=this.collection;return t?wi.h[t](this.workspace,this.translate,e):null}apiEndpoint(e){const t=this.entityDescriptor(e);return t?t.apiEndpoint:null}fetchUnloadedItem(e){this.notifyFetchUnloadedItem$.next(e)}doFetchUnloadedItem(e){let t;const n=this.descriptor.properties.Id;t=n&&"text"===n.control?`Id eq '${e}'`:`Id eq ${e}`;const i={filter:t,expand:this.expand,select:Object(N.e)(this.entityDescriptor(),this.additionalSelect)};return this.api.getEntities(i).pipe(Object(A.a)(t=>{const n=this.additionalSelectKey,i=t.Result[0];i?(n&&(i.EntityMetadata[n]=2),Object(N.c)(t,this.workspace),this.chosenItem===e&&this.updateUI(e),this.entityLoaded.emit()):this.chooseItem(null)}),Object(P.a)(e=>(this.chooseItem(null),Object(O.a)(null))))}get status(){return this._status}set status(e){!this._status&&e&&this.resultsDropdown.open(),this._status&&!e&&this.resultsDropdown.close(),this._status=e}onDocumentClick(e){e.target!==this.input.nativeElement&&(this.status=null)}chooseItem(e){this.chosenItem!==(e=e||void 0)&&(this.chosenItem=e,this.onChange(e)),this.updateUI(e),this.cancelRunningCall$.next(null),this.status=null}updateUI(e){const t=e?this.formatterInner(e):"";this.input.nativeElement.value=t}get isDefinitioned(){return!!this.entityDescriptor().definitionIds}get allDefinitionIds(){return this.isDefinitioned?this.definitionIds&&0!==this.definitionIds.filter(e=>!!e).length?this.definitionIds.filter(e=>!!e):this.entityDescriptor().definitionIds||[]:[]}get definitionIdsSingleOrDefault(){const e=this.allDefinitionIds;return e&&1===e.length?e[0]:null}get createDefinitionIds(){return this.allDefinitionIds.filter(e=>{const t=this.entityDescriptor(e);return!!t&&!t.isArchived})}get createDefinitionIdsSingleOrDefault(){const e=this.createDefinitionIds;return e&&1===e.length?e[0]:null}writeValue(e){e=e||void 0,this.cancelRunningCall$.next(null),this.chosenItem=e,this.updateUI(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e&&this.cancelRunningCall$.next(),this._isDisabled=e}inactiveFilter(e){return this.entityDescriptor(e).inactiveFilter}get querySelect(){return Object(N.e)(this.entityDescriptor(),this.additionalSelect)}get queryFilter(){let e=this.filter;if(!this.includeInactive){const t=this.inactiveFilter();t&&(e=e?`(${t}) and (${e})`:t)}if(this.isDefinitioned&&!this.definitionIdsSingleOrDefault&&this.definitionIds&&this.definitionIds.filter(e=>!!e).length>0){const t=this.definitionIds.filter(e=>!!e).map(e=>`DefinitionId eq ${e}`).reduce((e,t)=>`${e} or ${t}`);e=e?`(${t}) and (${e})`:t}return e}get searchResults(){return this._searchResults}get highlightedIndex(){return this._highlightedIndex}get isDisabled(){return this._isDisabled}get errorMessage(){return this._errorMessage}get showSpinner(){return this.status===_s.showSpinner}get showError(){return this.status===_s.showError}get showNoItemsFound(){return this.status===_s.showResults&&!!this._searchResults&&0===this._searchResults.length}get showResults(){return this.status===_s.showResults&&!!this._searchResults&&this._searchResults.length>0}get placement(){return this.workspace.ws.isRtl?["bottom-right","bottom-left","bottom"]:["bottom-left","bottom-right","bottom"]}onMouseEnter(e){this._highlightedIndex=e}onBlur(){this.cancelRunningCall$.next(),this.onTouched(),this.updateUI(this.chosenItem)}onKeyDown(e){if(!this.status)return;const t=e.key;if(N.a[t]){let n=0;this.showCreateNew&&this.canCreateNew&&(n+=1);const i=this._searchResults.length-1+n;switch(t){case N.a.ArrowDown:e.preventDefault(),this._searchResults&&(this._highlightedIndex<i?this._highlightedIndex++:this._highlightedIndex=0);break;case N.a.ArrowUp:e.preventDefault(),this._searchResults&&(this._highlightedIndex<=0?this._highlightedIndex=i:this._highlightedIndex--);break;case N.a.Enter:case N.a.Tab:if(this._highlightedIndex===this.indexCreateNew&&this.showCreateNew)this.onCreateFromKeyDown();else{const t=this._searchResults[this._highlightedIndex];t&&(e.preventDefault(),e.stopPropagation()),this.chooseItem(t)}break;case N.a.Escape:e.preventDefault(),this.cancelRunningCall$.next(null),this.status=null}}}onFocus(e){this.chooseItem(e)}get indexCreateNew(){return this.searchResults?this.searchResults.length:0}get showCreateNew(){return!!this.detailsTemplate&&(this.showNoItemsFound||this.showResults)&&(!this.isDefinitioned||this.createOptions.length>0)}get highlightCreateNew(){return this.indexCreateNew===this.highlightedIndex&&this.canCreateNew}get canCreateNewInner(){if(this.isDefinitioned){const e=this.createDefinitionIdsSingleOrDefault;return!e||this.hasCreatePermissions(e)}return this.hasCreatePermissions(null)}get canCreateNew(){return this.canCreateNewInner}get createNewTooltip(){return this.canCreateNewInner?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}get hasEditPermissions(){return this.canUpdatePermissions(this.chosenItemDefinitionId)}get canEdit(){return this.hasEditPermissions}get showMagnifier(){return!!this.masterTemplate}get showEditSelected(){return!!this.detailsTemplate&&!!this.chosenItem}get disableEditSelected(){return!this.canUpdatePermissions(this.chosenItemDefinitionId)}get searchOptions(){return this.allDefinitionIds.filter(e=>this.hasReadPermissions(e))}openSearchModalInner(e){this._initialText="",this._definitionId=e,this.modalService.open(this.masterWrapperTemplate,{windowClass:this.masterModalWindowClass}).result.then(this.onFocusInput,this.onFocusInput)}searchOptionName(e){return this.entityDescriptor(e).titlePlural()}get createOptions(){return this.createDefinitionIds||[]}get detailsModalWindowClass(){let e="t-details-modal";return this.isDark&&(e+=" t-dark-theme"),e}get masterModalWindowClass(){let e="t-master-modal";return this.isDark&&(e+=" t-dark-theme"),e}get initialText(){return this._initialText}get definitionId(){return this._definitionId}createOptionName(e){return this.entityDescriptor(e).titleSingular()}get idString(){return this._idString}get editSelectedLeftMargin(){return this.workspace.ws.isRtl?null:"-24px"}get editSelectedRightMargin(){return this.workspace.ws.isRtl?"-24px":null}get inputLeftPadding(){return this.showEditSelected&&this.workspace.ws.isRtl?"24px!important":null}get inputRightPadding(){return this.showEditSelected?this.workspace.ws.isRtl?null:"24px!important":null}get isDark(){return"dark"===this.theme}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(J.a),o.Pb(B.m),o.Pb(K.t),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-details-picker"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(bs,!0),o.Oc(K.l,!0),o.Oc(fs,!0),o.Oc(ms,!0),o.Oc(gs,!0),o.Oc(ps,!0)),2&e&&(o.Ec(n=o.ic())&&(t.input=n.first),o.Ec(n=o.ic())&&(t.resultsDropdown=n.first),o.Ec(n=o.ic())&&(t.detailsWrapperTemplate=n.first),o.Ec(n=o.ic())&&(t.masterWrapperTemplate=n.first),o.Ec(n=o.ic())&&(t.detailsOptionsTemplate=n.first),o.Ec(n=o.ic())&&(t.masterOptionsTemplate=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("w-100",t.w100)},inputs:{expand:"expand",additionalSelect:"additionalSelect",ensureAdditionalSelect:"ensureAdditionalSelect",selectTemplate:"selectTemplate",includeInactive:"includeInactive",filter:"filter",theme:"theme",collection:"collection",definitionIds:"definitionIds",masterTemplate:"masterTemplate",detailsTemplate:"detailsTemplate",formatter:"formatter"},outputs:{entityLoaded:"entityLoaded"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.zb],decls:24,vars:19,consts:[["ngbDropdown","",3,"placement"],["dropdown","ngbDropdown"],[1,"input-group"],["ngbDropdownAnchor","","autocomplete","off",1,"form-control",3,"disabled","blur","keydown"],["input",""],["class","btn btn-sm t-white-button p-0 px-1","tabindex","-1","type","button",3,"btn-light","text-primary","btn-secondary","t-text-whitish","title","disabled","click",4,"ngIf"],["class","btn btn-sm t-white-button p-0 px-1 t-magnifier-btn","style","width:22.6px;","tabindex","-1","type","button",3,"btn-light","text-primary","btn-secondary","t-text-whitish","title","click",4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","drop",1,"shadow",2,"z-index","1050"],[4,"ngIf"],[1,"text-center"],[1,"pl-2","pr-2"],["class","font-italic text-muted",4,"ngIf"],["detailsWrapperTemplate",""],["masterWrapperTemplate",""],["detailsOptionsTemplate",""],["masterOptionsTemplate",""],["tabindex","-1","type","button",1,"btn","btn-sm","t-white-button","p-0","px-1",3,"title","disabled","click"],["icon","external-link-alt"],["tabindex","-1","type","button",1,"btn","btn-sm","t-white-button","p-0","px-1","t-magnifier-btn",2,"width","22.6px",3,"title","click"],["icon","search"],["class","dropdown-item","style","cursor:default",3,"active","mouseenter","focus",4,"ngFor","ngForOf"],[1,"dropdown-item",2,"cursor","default",3,"mouseenter","focus"],[1,"font-italic","text-muted"],[3,"placement","ngbTooltip"],[1,"dropdown-item","t-slightly-bold",3,"disabled","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-2"],["class","d-inline-block",3,"placement","ngbTooltip",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"],["icon","times"],[1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","m-1",3,"disabled","click"],["ngbAutofocus","",1,"btn","btn-primary","m-1",3,"click"]],template:function(e,t){1&e&&(o.Vb(0,"div",0,1),o.Vb(2,"div",2),o.Vb(3,"input",3,4),o.hc("blur",(function(){return t.onBlur()}))("keydown",(function(e){return t.onKeyDown(e)})),o.Ub(),o.Rc(5,hs,3,12,"button",5),o.Rc(6,vs,3,11,"button",6),o.Ub(),o.Vb(7,"div",7),o.Rc(8,ys,2,1,"ng-container",8),o.Vb(9,"div",9),o.Vb(10,"span"),o.Rc(11,ws,1,0,"t-spinner",8),o.Ub(),o.Ub(),o.Vb(12,"div",10),o.Rc(13,Cs,2,1,"t-error-message",8),o.Rc(14,Ms,3,3,"span",11),o.Ub(),o.Rc(15,Vs,6,14,"ng-container",8),o.Ub(),o.Ub(),o.Rc(16,xs,1,8,"ng-template",null,12,o.Sc),o.Rc(18,Ds,1,8,"ng-template",null,13,o.Sc),o.Rc(20,Ss,17,10,"ng-template",null,14,o.Sc),o.Rc(22,Os,17,10,"ng-template",null,15,o.Sc)),2&e&&(o.sc("placement",t.placement),o.Bb(2),o.Gb("t-disabled-background",t.isDisabled),o.Bb(1),o.Gb("t-input",!t.isDark)("t-studio-input",t.isDark),o.sc("disabled",t.isDisabled),o.Bb(2),o.sc("ngIf",t.showEditSelected&&!t.isDisabled),o.Bb(1),o.sc("ngIf",t.showMagnifier&&!t.isDisabled),o.Bb(1),o.Gb("t-less-dark",t.isDark),o.Bb(1),o.sc("ngIf",t.showResults),o.Bb(2),o.Gb("t-text-whitish",t.isDark),o.Bb(1),o.sc("ngIf",t.showSpinner),o.Bb(2),o.sc("ngIf",t.showError),o.Bb(1),o.sc("ngIf",t.showNoItemsFound),o.Bb(1),o.sc("ngIf",t.showCreateNew))},directives:[K.l,K.m,x.u,K.p,ee.b,x.t,me.a,ve.a,K.E,x.B],pipes:[Q.d],encapsulation:2}),e})(),As=(()=>{class e{constructor(){this.showCreate=!0,this.ensureAdditionalSelect=!1,this.entityLoaded=new o.n,this.w100=!0}writeValue(e){this.picker.writeValue(e)}registerOnChange(e){this.picker.registerOnChange(e)}registerOnTouched(e){this.picker.registerOnTouched(e)}setDisabledState(e){this.picker.setDisabledState(e)}onEntityLoaded(){this.entityLoaded.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&o.Oc(Ls,!0),2&e&&o.Ec(n=o.ic())&&(t.picker=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("w-100",t.w100)},inputs:{showCreate:"showCreate",filter:"filter",additionalSelect:"additionalSelect",ensureAdditionalSelect:"ensureAdditionalSelect",theme:"theme"},outputs:{entityLoaded:"entityLoaded"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var Fs=n("1bxP"),Ps=n("88Q5"),Ns=n("1nIS");function js(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-roles-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("showMembers",i.showMembers)("additionalSelect",i.additionalSelect)}}function Ws(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-roles-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let $s=(()=>{class e extends As{constructor(){super(...arguments),this.showMembers=!0}}return e.\u0275fac=function(t){return qs(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-roles-picker"]],inputs:{showMembers:"showMembers"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","Role",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","showMembers","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,js,2,4,"ng-template",null,1,o.Sc),o.Rc(3,Ws,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const qs=o.Xb($s);function Qs(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function Hs(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"t-restricted",8),o.Vb(2,"div",9),o.Vb(3,"div"),o.Vb(4,"span"),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Ub(),o.Vb(7,"div"),o.Vb(8,"span"),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Vb(11,"div",10),o.Vb(12,"span"),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.model;o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ExternalId),o.Bb(2),o.Gb("active",!(null!=e&&e.ExternalId)),o.Bb(2),o.Uc(o.nc(6,8,"User_Invited")),o.Bb(2),o.Gb("active",!(null==e||!e.ExternalId)),o.Bb(2),o.Uc(o.nc(10,10,"User_Member")),o.Bb(4),o.Uc(o.nc(14,12,null!=e&&e.ExternalId?"User_Member":"User_Invited"))}}function Gs(e,t){if(1&e&&(o.Vb(0,"h2",24),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const zs=function(){return{updateOn:"blur"}};function Js(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,zs))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Ks(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",26),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,zs))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Ys(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",26),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,zs))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Xs(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-image",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Image=t})),o.Ub()}if(2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("src",t.Id?"users/"+t.Id+"/image":null)("imageId",null==t?null:t.ImageId)("ngModel",t.Image)("isEdit",n)}}function Zs(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function el(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",29),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,zs))}}function tl(e,t){if(1&e&&(o.Vb(0,"t-form-group",19),o.mc(1,"translate"),o.Rc(2,Zs,2,1,"div",20),o.Rc(3,el,1,3,"t-text-editor",28),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function nl(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function il(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,zs))}}function ol(e,t){if(1&e&&(o.Vb(0,"t-form-group",19),o.mc(1,"translate"),o.Rc(2,nl,2,1,"div",20),o.Rc(3,il,1,3,"t-text-editor",30),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function cl(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function rl(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,zs))}}function sl(e,t){if(1&e&&(o.Vb(0,"t-form-group",19),o.mc(1,"translate"),o.Rc(2,cl,2,1,"div",20),o.Rc(3,rl,1,3,"t-text-editor",30),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function ll(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Email)}}function al(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Email=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.Email)("ngModelOptions",o.vc(3,zs))("disabled",!t.isNew)}}function ul(e,t){if(1&e&&(o.Vb(0,"t-form-group",33),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",34),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"User_LastActivity")),o.Bb(2),o.sc("entity",e)}}function dl(e,t){if(1&e&&(o.Vb(0,"t-form-group",33),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(3),o.Uc(o.nc(4,4,e?e.IsActive?"Active":"Inactive":""))}}const bl=function(e){return{email:e}};function fl(e,t){if(1&e&&(o.Vb(0,"div",35),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.Bb(2),o.Uc(o.oc(3,1,"UserInvitationNotice",o.wc(4,bl,null==e?null:e.Email)))}}function ml(e,t){1&e&&(o.Vb(0,"span",46),o.Qb(1,"fa-icon",47),o.Tc(2,"\xa0 "),o.Ub())}function gl(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"RoleMembership_Role"))}function pl(e,t){if(1&e&&(o.Vb(0,"t-restricted",8),o.Vb(1,"t-view-link",56),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc().item,t=o.lc(5);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Role),o.Bb(1),o.sc("itemId",null==e?null:e.RoleId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("Role",e.RoleId,"Name"))}}function hl(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-roles-picker",57),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.RoleId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item;o.sc("ngModel",e.RoleId)("required",!e.PH)("showMembers",!1)}}function vl(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",53),o.Rc(1,pl,3,3,"t-restricted",54),o.Rc(2,hl,1,3,"t-roles-picker",55),o.Ub()),2&e){const e=t.item,n=o.lc(4).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.RoleId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Il(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Memo"))}function yl(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"t-restricted",8),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc().item;o.Bb(1),o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Memo),o.Bb(1),o.Uc(e.Memo)}}function wl(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.Memo=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item;o.sc("ngModel",e.Memo)("ngModelOptions",o.vc(2,zs))}}function Cl(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",53),o.Rc(1,yl,3,2,"div",20),o.Rc(2,wl,1,3,"t-text-editor",30),o.Ub()),2&e){const e=t.item,n=o.lc(4).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Memo),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}const Ml=function(){return["RoleId","Memo"]},Vl=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Tl=function(e,t){return{RoleId:e,Memo:t}};function El(e,t){if(1&e&&(o.Vb(0,"t-restricted",8),o.Qb(1,"t-table",48),o.Ub(),o.Rc(2,gl,2,3,"ng-template",null,49,o.Sc),o.Rc(4,vl,3,3,"ng-template",null,50,o.Sc),o.Rc(6,Il,2,3,"ng-template",null,51,o.Sc),o.Rc(8,Cl,3,3,"ng-template",null,52,o.Sc)),2&e){const e=o.Fc(3),t=o.Fc(5),n=o.Fc(7),i=o.Fc(9),c=o.lc(3),r=c.model,s=c.isEdit;o.Gb("p-4",1===(null==r||null==r.EntityMetadata?null:r.EntityMetadata.Roles)),o.sc("metadata",null==r||null==r.EntityMetadata?null:r.EntityMetadata.Roles),o.Bb(1),o.sc("dataSource",null==r?null:r.Roles)("isEdit",s)("columnPaths",o.vc(7,Ml))("columnTemplates",o.xc(14,Tl,o.xc(8,Vl,e,t),o.xc(11,Vl,n,i)))}}function xl(e,t){if(1&e&&(o.Vb(0,"li",41),o.Vb(1,"a",42),o.Rc(2,ml,3,0,"span",43),o.Vb(3,"span",44),o.Tc(4),o.mc(5,"translate"),o.mc(6,"number"),o.Ub(),o.Ub(),o.Rc(7,El,10,17,"ng-template",45),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("ngIf",t.showRolesError(e)),o.Bb(2),o.Uc(o.nc(5,2,"User_Roles")+(e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Roles)?"":" ("+o.nc(6,4,null==e||null==e.Roles?null:e.Roles.length)+")"))}}function Ul(e,t){1&e&&(o.Vb(0,"span",46),o.Qb(1,"fa-icon",47),o.Tc(2,"\xa0 "),o.Ub())}function Rl(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(5).model;o.Bb(1),o.Uc(null==e?null:e.ContactEmail)}}function Dl(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",63),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(6).model.ContactEmail=t})),o.Ub()}if(2&e){const e=o.lc(6).model;o.sc("ngModel",e.ContactEmail)}}function Bl(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Rc(1,Dl,1,1,"t-text-editor",61),o.Vb(2,"button",62),o.hc("click",(function(){o.Ic(e);const t=o.lc(5).model;return o.lc().testEmail(null==t?null:t.ContactEmail)})),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Sb()}if(2&e){const e=o.lc(5),t=e.isEdit,n=e.model;o.Bb(1),o.sc("ngIf",t),o.Bb(1),o.sc("disabled",!(null!=n&&n.ContactEmail)),o.Bb(1),o.Uc(o.nc(4,3,"Test"))}}function Sl(e,t){if(1&e&&(o.Vb(0,"t-form-group",19),o.mc(1,"translate"),o.Rc(2,Rl,2,1,"div",20),o.Rc(3,Bl,5,5,"ng-container",20),o.Ub()),2&e){const e=o.lc(4),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Entity_ContactEmail"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactEmail),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function kl(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(5).model;o.Bb(1),o.Uc(null==e?null:e.ContactMobile)}}function Ol(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"t-text-editor",64),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).model.ContactMobile=t})),o.Ub(),o.Vb(2,"button",62),o.hc("click",(function(){o.Ic(e);const t=o.lc(5).model;return o.lc().testPhoneNumber(null==t?null:t.ContactMobile)})),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Sb()}if(2&e){const e=o.lc(5).model;o.Bb(1),o.sc("ngModel",e.ContactMobile),o.Bb(1),o.sc("disabled",!(null!=e&&e.ContactMobile)),o.Bb(1),o.Uc(o.nc(4,3,"Test"))}}function _l(e,t){if(1&e&&(o.Vb(0,"t-form-group",19),o.mc(1,"translate"),o.Rc(2,kl,2,1,"div",20),o.Rc(3,Ol,5,5,"ng-container",20),o.Ub()),2&e){const e=o.lc(4),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Entity_ContactMobile"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactMobile),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Ll(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"t-restricted",8),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(5).model,t=o.lc();o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.PreferredLanguage),o.Bb(1),o.Vc(" ",o.nc(3,2,t.languageLookup(null==e?null:e.PreferredLanguage))," ")}}function Al(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",66),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).model.PreferredLanguage=t})),o.Ub()}if(2&e){const e=o.lc(5).model,t=o.lc();o.sc("ngModel",e.PreferredLanguage)("choices",t.languageChoices)}}function Fl(e,t){if(1&e&&(o.Vb(0,"t-form-group",19),o.mc(1,"translate"),o.Rc(2,Ll,4,4,"div",20),o.Rc(3,Al,1,2,"t-selector",65),o.Ub()),2&e){const e=o.lc(4),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"User_PreferredLanguage"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.PreferredLanguage),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Pl(e,t){1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"NotifyByEmail")))}function Nl(e,t){1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"NotifyBySms")))}function jl(e,t){1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"NotifyByPush")))}function Wl(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(6).model;o.Bb(1),o.Uc(o.nc(2,1,e.EmailNewInboxItem?"Yes":"No"))}}function $l(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",70),o.Vb(1,"input",71),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(6).model.EmailNewInboxItem=t})),o.Ub(),o.Vb(2,"label",72),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(6).model;o.Bb(1),o.sc("ngModel",e.EmailNewInboxItem)}}function ql(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,Wl,3,3,"span",20),o.Rc(2,$l,4,1,"div",69),o.Ub()),2&e){const e=o.lc(5).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function Ql(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(6).model;o.Bb(1),o.Uc(o.nc(2,1,e.SmsNewInboxItem?"Yes":"No"))}}function Hl(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",70),o.Vb(1,"input",73),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(6).model.SmsNewInboxItem=t})),o.Ub(),o.Vb(2,"label",74),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(6).model;o.Bb(1),o.sc("ngModel",e.SmsNewInboxItem)}}function Gl(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,Ql,3,3,"span",20),o.Rc(2,Hl,4,1,"div",69),o.Ub()),2&e){const e=o.lc(5).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function zl(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(6).model;o.Bb(1),o.Uc(o.nc(2,1,e.PushNewInboxItem?"Yes":"No"))}}function Jl(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",70),o.Vb(1,"input",75),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(6).model.PushNewInboxItem=t})),o.Ub(),o.Vb(2,"label",76),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(6).model;o.Bb(1),o.sc("ngModel",e.PushNewInboxItem)}}function Kl(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,zl,3,3,"span",20),o.Rc(2,Jl,4,1,"div",69),o.Ub()),2&e){const e=o.lc(5).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function Yl(e,t){if(1&e&&(o.Vb(0,"table",67),o.Vb(1,"thead"),o.Vb(2,"tr",68),o.Vb(3,"th"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Rc(6,Pl,3,3,"th",20),o.Rc(7,Nl,3,3,"th",20),o.Rc(8,jl,3,3,"th",20),o.Ub(),o.Ub(),o.Vb(9,"tbody"),o.Vb(10,"tr"),o.Vb(11,"td"),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Rc(14,ql,3,2,"td",20),o.Rc(15,Gl,3,2,"td",20),o.Rc(16,Kl,3,2,"td",20),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc(4).model,t=o.lc();o.Bb(4),o.Uc(o.nc(5,8,"Trigger")),o.Bb(2),o.sc("ngIf",t.showEmailColumn(e)),o.Bb(1),o.sc("ngIf",t.showSmsColumn(e)),o.Bb(1),o.sc("ngIf",t.showPushColumn(e)),o.Bb(4),o.Uc(o.nc(13,10,"NewDocumentAssignment")),o.Bb(2),o.sc("ngIf",t.showEmailColumn(e)),o.Bb(1),o.sc("ngIf",t.showSmsColumn(e)),o.Bb(1),o.sc("ngIf",t.showPushColumn(e))}}function Xl(e,t){if(1&e&&(o.Vb(0,"div",59),o.Rc(1,Sl,4,6,"t-form-group",18),o.Rc(2,_l,4,6,"t-form-group",18),o.Rc(3,Fl,4,6,"t-form-group",18),o.Rc(4,Yl,17,12,"table",60),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.sc("ngIf",t.showEmail),o.Bb(1),o.sc("ngIf",t.showSms),o.Bb(1),o.sc("ngIf",t.showPreferredLanguage),o.Bb(1),o.sc("ngIf",t.showNotificationTriggers(e))}}function Zl(e,t){if(1&e&&(o.Vb(0,"li",58),o.Vb(1,"a",42),o.Rc(2,Ul,3,0,"span",43),o.Vb(3,"span",44),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Rc(6,Xl,5,4,"ng-template",45),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("ngIf",t.showNotificationsError(e)),o.Bb(2),o.Uc(o.nc(5,2,"Notifications"))}}function ea(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"ul",36,37),o.hc("activeIdChange",(function(t){return o.Ic(e),o.lc(2).activeTab=t})),o.Rc(3,xl,8,6,"li",38),o.Rc(4,Zl,7,4,"li",39),o.Ub(),o.Qb(5,"div",40),o.Sb()}if(2&e){const e=o.Fc(2),t=o.lc(2);o.Bb(1),o.sc("activeId",t.activeTab)("destroyOnHide",!0),o.Bb(2),o.sc("ngIf",t.showRoles),o.Bb(1),o.sc("ngIf",t.showNotifications),o.Bb(1),o.sc("ngbNavOutlet",e)}}function ta(e,t){if(1&e&&(o.Vb(0,"t-form-group",11),o.Rc(1,Gs,2,1,"h2",12),o.Rc(2,Js,2,7,"t-text-editor",13),o.Rc(3,Ks,2,7,"t-text-editor",14),o.Rc(4,Ys,2,7,"t-text-editor",14),o.Ub(),o.Vb(5,"div",15),o.Vb(6,"t-restricted",8),o.Vb(7,"div",16),o.Rc(8,Xs,1,4,"t-image",17),o.Ub(),o.Ub(),o.Ub(),o.Rc(9,tl,4,6,"t-form-group",18),o.Rc(10,ol,4,6,"t-form-group",18),o.Rc(11,sl,4,6,"t-form-group",18),o.Vb(12,"t-form-group",19),o.mc(13,"translate"),o.Rc(14,ll,2,1,"div",20),o.Rc(15,al,1,4,"t-text-editor",21),o.Ub(),o.Rc(16,ul,3,4,"t-form-group",22),o.Rc(17,dl,5,6,"t-form-group",22),o.Rc(18,fl,4,6,"div",23),o.Rc(19,ea,6,5,"ng-container",20)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(2),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ImageId),o.Bb(2),o.sc("ngIf",!!e),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(13,18,"User_Email"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Email),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",i.showInvitationInfo(e)),o.Bb(1),o.sc("ngIf",i.showTabs)}}function na(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function ia(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function oa(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"ResendInvitationEmail")," ")}const ca=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},ra=function(e,t,n){return[e,t,n]};let sa=(()=>{class e extends gn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.route=i,this.showRoles=!0,this.usersApi=this.api.usersApi(this.notifyDestruct$),this.expand="Roles.Role",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.EmailNewInboxItem=!1,e.SmsNewInboxItem=!1,e.PushNewInboxItem=!1,e.PreferredLanguage=this.ws.settings.PrimaryLanguageId,e.Roles=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Roles&&t.Roles.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.onInvite=e=>{e&&e.Id&&this.usersApi.invite(e.Id).subscribe(()=>{this.details.displayModalMessage(this.translate.instant("InvitationEmailSent"))},this.details.handleActionError)},this.showInvite=e=>!!e&&!e.ExternalId&&this.workspace.globalSettings.EmailEnabled,this.canInvite=e=>this.ws.canDo("users","ResendInvitationEmail",e.Id),this.inviteTooltip=e=>this.canInvite(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.onActivate=e=>{e&&e.Id&&this.usersApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.usersApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("users","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.usersApi=this.api.usersApi(this.notifyDestruct$)}get languageChoices(){return this._languageChoices||(this._languageChoices=[{name:()=>this.ws.settings.PrimaryLanguageName,value:this.ws.settings.PrimaryLanguageId}],this.ws.settings.SecondaryLanguageId&&this._languageChoices.push({name:()=>this.ws.settings.SecondaryLanguageName,value:this.ws.settings.SecondaryLanguageId}),this.ws.settings.TernaryLanguageId&&this._languageChoices.push({name:()=>this.ws.settings.TernaryLanguageName,value:this.ws.settings.TernaryLanguageId})),this._languageChoices}languageLookup(e){return Fs.a[e]}get ws(){return this.workspace.currentTenant}showRolesError(e){return!!e&&!!e.Roles&&e.Roles.some(e=>!!e.serverErrors)}showNotificationsError(e){return!!(e&&e.serverErrors&&(e.serverErrors.PreferredLanguage||e.serverErrors.ContactEmail||e.serverErrors.ContactMobile||e.serverErrors.EmailNewInboxItem||e.serverErrors.SmsNewInboxItem||e.serverErrors.PushNewInboxItem))}showInvitationInfo(e){return!!e&&!!e.Email&&this.isNew&&this.workspace.globalSettings.EmailEnabled}get isNew(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}get showPreferredLanguage(){return!!this.ws.settings.SecondaryLanguageId||!!this.ws.settings.TernaryLanguageId}get showNotifications(){return this.showEmail||this.showSms||this.showPush}get showTabs(){return this.showRoles||this.showNotifications}get showSms(){return this.ws.settings.SmsEnabled&&this.workspace.globalSettings.SmsEnabled}get showEmail(){return this.workspace.globalSettings.EmailEnabled}get showPush(){return this.workspace.globalSettings.PushEnabled}showNotificationTriggers(e){return this.showEmailColumn(e)||this.showSmsColumn(e)||this.showPushColumn(e)}showEmailColumn(e){return this.showEmail&&!!e&&!!e.ContactEmail}showSmsColumn(e){return this.showSms&&!!e&&!!e.ContactMobile}showPushColumn(e){return this.showPush&&!!e&&!!e.PushEnabled}get activeTab(){return this.ws.miscState.users_details_activeTab||"roles"}set activeTab(e){this.ws.miscState.users_details_activeTab=e}testEmail(e){const t=this.details;this.usersApi.testEmail(e).subscribe(e=>t.displayModalMessage(e.Message),e=>t.displayErrorModal(e.error))}testPhoneNumber(e){const t=this.details;this.usersApi.testPhone(e).subscribe(e=>t.displayModalMessage(e.Message),e=>t.displayErrorModal(e.error))}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(i.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-users-details"]],inputs:{showRoles:"showRoles"},features:[o.yb],decls:14,vars:35,consts:[["collection","User",3,"expand","idString","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","documentHeaderTemplate","actions"],["detailsCrumb",""],["documentHeader",""],["document",""],["activate",""],["deactivate",""],["invite",""],[1,"w-100","t-document-header","d-flex","justify-content-end"],[3,"metadata"],[1,"t-flow-chart","small"],[1,"small","t-lone-state","active","d-none"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"col-12","col-md-4","t-details-image-container"],[1,"border"],[3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["class","col-12 alert-primary p-2 px-3 mt-3 mt-sm-4",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","","email","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"t-form-group",3,"label"],["collection","User","path","LastAccess",3,"entity"],[1,"col-12","alert-primary","p-2","px-3","mt-3","mt-sm-4"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"activeId","destroyOnHide","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","roles",4,"ngIf"],["ngbNavItem","notifications",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","roles"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_RoleId",""],["row_RoleId",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"metadata",4,"ngIf"],[3,"ngModel","required","showMembers","ngModelChange",4,"ngIf"],["link","../../roles",3,"itemId"],[3,"ngModel","required","showMembers","ngModelChange"],["ngbNavItem","notifications"],[1,"row","m-0","pt-2","pt-sm-3"],["class","table mt-4 table-striped border-bottom text-nowrap",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"btn","btn-primary","btn-sm","py-0","px-1","mx-2","text-nowrap",3,"disabled","click"],[3,"ngModel","ngModelChange"],["placeholder","+000-00-000-0000",3,"ngModel","ngModelChange"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],[1,"table","mt-4","table-striped","border-bottom","text-nowrap"],[1,"small"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","EmailNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","EmailNewInboxItem",1,"custom-control-label","t-pointer"],["type","checkbox","id","SmsNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","SmsNewInboxItem",1,"custom-control-label","t-pointer"],["type","checkbox","id","PushNewInboxItem",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","PushNewInboxItem",1,"custom-control-label","t-pointer"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,Qs,2,1,"ng-template",null,1,o.Sc),o.Rc(4,Hs,15,14,"ng-template",null,2,o.Sc),o.Rc(6,ta,20,20,"ng-template",null,3,o.Sc),o.Rc(8,na,2,3,"ng-template",null,4,o.Sc),o.Rc(10,ia,2,3,"ng-template",null,5,o.Sc),o.Rc(12,oa,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("expand",t.expand)("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,11,"Users"))("detailsCrumb",e)("documentTemplate",i)("documentHeaderTemplate",n)("actions",o.yc(31,ra,o.Ac(13,ca,s,t.onInvite,t.showInvite,t.canInvite,t.inviteTooltip),o.Ac(19,ca,c,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(25,ca,r,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pn.a,pe.a,x.u,he.a,te.u,te.k,te.n,be,te.d,ge.a,K.v,K.A,K.x,K.y,K.w,ee.b,Ps.a,Ns.a,ss,$s,hn.a,te.a],pipes:[Q.d,x.g],encapsulation:2}),e})();function la(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",19),o.Qb(2,"t-image",20),o.Ub(),o.Tc(3," \xa0\xa0\xa0 "),o.Sb()),2&e){const e=o.lc().id,t=o.lc();o.Bb(2),o.sc("src","users/"+t.c[e].Id+"/image")("imageId",t.c[e].ImageId)("size",42)}}function aa(e,t){if(1&e&&(o.Vb(0,"div",11),o.Rc(1,la,4,3,"ng-container",12),o.Vb(2,"div",13),o.Vb(3,"div",14),o.Qb(4,"t-auto-cell",15),o.Ub(),o.Vb(5,"div",16),o.Qb(6,"t-auto-cell",17),o.Qb(7,"t-auto-cell",18),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("ngIf",2===(null==n.c[e].EntityMetadata?null:n.c[e].EntityMetadata.ImageId)),o.Bb(3),o.sc("entity",n.c[e]),o.Bb(2),o.sc("entity",n.c[e]),o.Bb(1),o.sc("entity",n.c[e])}}function ua(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"User"),"\n")}function da(e,t){if(1&e&&o.Qb(0,"t-auto-cell",21),2&e){const e=t.id,n=o.lc();o.sc("entity",n.c[e])}}function ba(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function fa(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function ma(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}function ga(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"User_Invited")," ")}function pa(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"User_Member")," ")}function ha(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"WithPicture")," ")}function va(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"WithoutPicture")," ")}const Ia=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},ya=function(e,t){return[e,t]},wa=function(e){return{template:e,expression:"CreatedById eq me"}},Ca=function(e){return[e]},Ma=function(e){return{template:e,expression:"ExternalId eq null"}},Va=function(e){return{template:e,expression:"ExternalId ne null"}},Ta=function(e){return{template:e,expression:"ImageId ne null"}},Ea=function(e){return{template:e,expression:"ImageId eq null"}},xa=function(e,t,n){return{CreatedBy:e,ExternalId:t,ImageId:n}};let Ua=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.usersApi=this.api.usersApi(this.notifyDestruct$),this.onActivate=e=>this.usersApi.activate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.usersApi.deactivate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("users","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.usersApi=this.api.usersApi(this.notifyDestruct$)}get c(){return this.ws.User}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-users-master"]],features:[o.yb],decls:22,vars:47,consts:[["collection","User","selectDefault","Email,State,LastAccess","selectForTiles","ImageId,State,Email",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["invited",""],["member",""],["withPicture",""],["withoutPicture",""],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1"],[1,"d-flex","justify-content-between"],["collection","User","path","",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","User","path","Email",3,"entity"],["collection","User","path","State",3,"entity"],[1,"border"],[3,"src","imageId","size"],["collection","User",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,aa,8,4,"ng-template",null,1,o.Sc),o.Rc(4,ua,2,3,"ng-template",null,2,o.Sc),o.Rc(6,da,1,1,"ng-template",null,3,o.Sc),o.Rc(8,ba,2,3,"ng-template",null,4,o.Sc),o.Rc(10,fa,2,3,"ng-template",null,5,o.Sc),o.Rc(12,ma,2,3,"ng-template",null,6,o.Sc),o.Rc(14,ga,2,3,"ng-template",null,7,o.Sc),o.Rc(16,pa,2,3,"ng-template",null,8,o.Sc),o.Rc(18,ha,2,3,"ng-template",null,9,o.Sc),o.Rc(20,va,2,3,"ng-template",null,10,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17),u=o.Fc(19),d=o.Fc(21);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"Users"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(22,ya,o.zc(12,Ia,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(17,Ia,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.yc(43,xa,o.wc(27,Ca,o.wc(25,wa,s)),o.xc(33,ya,o.wc(29,Ma,l),o.wc(31,Va,a)),o.xc(40,ya,o.wc(36,Ta,u),o.wc(38,Ea,d))))}},directives:[Rt.a,x.u,ge.a,be],pipes:[Q.d],encapsulation:2}),e})();function Ra(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-users-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("showRoles",i.showRoles)("additionalSelect",i.additionalSelect)}}function Da(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-users-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let Ba=(()=>{class e extends As{constructor(){super(...arguments),this.showRoles=!0}}return e.\u0275fac=function(t){return Sa(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-users-picker"]],inputs:{showRoles:"showRoles"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","User",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","showRoles","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,Ra,2,4,"ng-template",null,1,o.Sc),o.Rc(3,Da,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,sa,Ua],encapsulation:2}),e})();const Sa=o.Xb(Ba);var ka=n("3bcy");function Oa(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function _a(e,t){if(1&e&&(o.Vb(0,"h2",19),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const La=function(){return{updateOn:"blur"}};function Aa(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,La))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Fa(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,La))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Pa(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,La))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Na(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Id)}}function ja(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Id=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.Id)("ngModelOptions",o.vc(3,La))("disabled",!t.isNew)}}function Wa(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function $a(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,La))}}function qa(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.mc(1,"translate"),o.Rc(2,Wa,2,1,"div",10),o.Rc(3,$a,1,3,"t-text-editor",13),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Qa(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function Ha(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,La))}}function Ga(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.mc(1,"translate"),o.Rc(2,Qa,2,1,"div",10),o.Rc(3,Ha,1,3,"t-text-editor",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function za(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function Ja(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,La))}}function Ka(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.mc(1,"translate"),o.Rc(2,za,2,1,"div",10),o.Rc(3,Ja,1,3,"t-text-editor",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Ya(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Description)}}function Xa(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Description=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Description)("ngModelOptions",o.vc(2,La))}}function Za(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Description2)}}function eu(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description2)("ngModelOptions",o.vc(2,La))}}function tu(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.mc(1,"translate"),o.Rc(2,Za,2,1,"div",10),o.Rc(3,eu,1,3,"t-text-editor",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function nu(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Description3)}}function iu(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description3)("ngModelOptions",o.vc(2,La))}}function ou(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.mc(1,"translate"),o.Rc(2,nu,2,1,"div",10),o.Rc(3,iu,1,3,"t-text-editor",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function cu(e,t){if(1&e&&o.Qb(0,"t-auto-cell",26),2&e){const e=o.lc().model;o.sc("entity",e)}}function ru(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.NumericCode=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.NumericCode)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function su(e,t){if(1&e&&o.Qb(0,"t-auto-cell",28),2&e){const e=o.lc().model;o.sc("entity",e)}}function lu(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",29),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.E=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.E)("choices",t.decimalPlacesChoices)}}function au(e,t){if(1&e&&(o.Vb(0,"t-form-group",30),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",31),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(2),o.sc("entity",e)}}function uu(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,_a,2,1,"h2",6),o.Rc(2,Aa,2,7,"t-text-editor",7),o.Rc(3,Fa,2,7,"t-text-editor",8),o.Rc(4,Pa,2,7,"t-text-editor",8),o.Ub(),o.Vb(5,"t-form-group",9),o.mc(6,"translate"),o.Rc(7,Na,2,1,"div",10),o.Rc(8,ja,1,4,"t-text-editor",11),o.Ub(),o.Rc(9,qa,4,6,"t-form-group",12),o.Rc(10,Ga,4,6,"t-form-group",12),o.Rc(11,Ka,4,6,"t-form-group",12),o.Vb(12,"t-form-group",9),o.mc(13,"translate"),o.Rc(14,Ya,2,1,"div",10),o.Rc(15,Xa,1,3,"t-text-editor",13),o.Ub(),o.Rc(16,tu,4,6,"t-form-group",12),o.Rc(17,ou,4,6,"t-form-group",12),o.Vb(18,"t-form-group",9),o.mc(19,"translate"),o.Rc(20,cu,1,1,"t-auto-cell",14),o.Rc(21,ru,1,3,"t-decimal-editor",15),o.Ub(),o.Vb(22,"t-form-group",9),o.mc(23,"translate"),o.Rc(24,su,1,1,"t-auto-cell",16),o.Rc(25,lu,1,2,"t-selector",17),o.Ub(),o.Rc(26,au,3,4,"t-form-group",18)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("label",o.nc(6,27,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Id),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(13,29,"Description")+i.ws.primaryPostfix)("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Description),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(19,31,"Currency_NumericCode"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.E),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(23,33,"Currency_DecimalPlaces"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.E),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n)}}function du(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function bu(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const fu=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},mu=function(e,t){return[e,t]};let gu=(()=>{class e extends gn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.route=i,this.currenciesApi=this.api.currenciesApi(this.notifyDestruct$),this.expand="",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.E=2,e},this.onActivate=e=>{e&&e.Id&&this.currenciesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.currenciesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("currencies","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.currenciesApi=this.api.currenciesApi(this.notifyDestruct$)}get decimalPlacesChoices(){if(!this._decimalPlacesChoices){const e=Object(ka.a)(this.workspace,this.translate).properties.E;this._decimalPlacesChoices=Object(wi.c)(e)}return this._decimalPlacesChoices}decimalPlacesLookup(e){return Object(ka.a)(this.workspace,this.translate).properties.E.format(e)}get ws(){return this.workspace.currentTenant}get isNew(){return this.isScreenMode&&"new"===this.route.snapshot.paramMap.get("id")||this.isPopupMode&&"new"===this.idString}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(i.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-currencies-details"]],features:[o.yb],decls:10,vars:26,consts:[["collection","Currency",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["collection","Currency","path","NumericCode",3,"entity",4,"ngIf"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],["collection","Currency","path","E",3,"entity",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["collection","Currency","path","NumericCode",3,"entity"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["collection","Currency","path","E",3,"entity"],["required","",3,"ngModel","choices","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Currency","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,Oa,2,1,"ng-template",null,1,o.Sc),o.Rc(4,uu,27,35,"ng-template",null,2,o.Sc),o.Rc(6,du,2,3,"ng-template",null,3,o.Sc),o.Rc(8,bu,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,9,"Currencies"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.xc(23,mu,o.Ac(11,fu,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(17,fu,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,he.a,te.u,te.k,te.n,ge.a,In,hn.a],pipes:[Q.d],encapsulation:2}),e})();function pu(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",9),o.Vb(4,"span",8),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("Currency",e,"Name")),o.Bb(3),o.Uc(n.ws.getMultilingualValue("Currency",e,"Description"))}}function hu(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Currency"),"\n")}function vu(e,t){if(1&e&&(o.Vb(0,"span",10),o.Qb(1,"t-auto-cell",11),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function Iu(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function yu(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function wu(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}const Cu=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Mu=function(e,t){return[e,t]},Vu=function(e){return{template:e,expression:"CreatedById eq me"}},Tu=function(e){return[e]},Eu=function(e){return{CreatedBy:e}};let xu=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.currenciesApi=this.api.currenciesApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.currenciesApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.currenciesApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("currencies","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.currenciesApi=this.api.currenciesApi(this.notifyDestruct$)}get c(){return this.ws.Currency}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-currencies-master"]],features:[o.yb],decls:14,vars:31,consts:[["collection","Currency","selectDefault","E,IsActive","selectForTiles","Name,Name2,Name3,Description,Description2,Description3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Currency",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,pu,6,2,"ng-template",null,1,o.Sc),o.Rc(4,hu,2,3,"ng-template",null,2,o.Sc),o.Rc(6,vu,2,1,"ng-template",null,3,o.Sc),o.Rc(8,Iu,2,3,"ng-template",null,4,o.Sc),o.Rc(10,yu,2,3,"ng-template",null,5,o.Sc),o.Rc(12,wu,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"Currencies"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(22,Mu,o.zc(12,Cu,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(17,Cu,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.wc(29,Eu,o.wc(27,Tu,o.wc(25,Vu,s))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function Uu(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-currencies-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function Ru(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-currencies-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let Du=(()=>{class e extends As{}return e.\u0275fac=function(t){return Bu(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-currencies-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","Currency",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,Uu,2,3,"ng-template",null,1,o.Sc),o.Rc(3,Ru,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,gu,xu],encapsulation:2}),e})();const Bu=o.Xb(Du);function Su(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-centers-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function ku(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-centers-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let Ou=(()=>{class e extends As{}return e.\u0275fac=function(t){return _u(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-centers-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","Center",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,Su,2,3,"ng-template",null,1,o.Sc),o.Rc(3,ku,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const _u=o.Xb(Ou),Lu=["d"],Au=["i"];function Fu(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"button",5),o.hc("click",(function(){return o.Ic(e),o.lc().onClick()})),o.Qb(2,"fa-icon",6),o.Ub(),o.Sb()}if(2&e){const e=o.lc(),t=o.Fc(6);o.Bb(1),o.sc("tContextMenu",t)("tDisableMenu",e.disableAltCalendar)}}function Pu(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",7),o.Vb(1,"ul",8),o.Vb(2,"li",9),o.hc("click",(function(){o.Ic(e);const n=t.close;return o.lc().onAltCalendar(),n()})),o.Tc(3),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(3),o.Vc(" ",e.altCalendarName," ")}}let Nu=(()=>{class e{constructor(e,t){this.workspace=e,this.translate=t,this.w100=!0,this.isDisabled=!1,this._invalid=!1}ngOnInit(){this._subscriptions=new k.a,this._subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.onFormatChange()})),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>{this._calendar&&this._calendar!==this.workspace.calendar&&this.onCalendarChange(),this._dateFormat&&this._dateFormat!==this.workspace.dateFormat&&this.onFormatChange()}}))}ngOnChanges(e){e.calendar&&!e.calendar.isFirstChange()&&this.onCalendarChange(),e.granularity&&!e.granularity.isFirstChange()&&this.onFormatChange()}ngOnDestroy(){this._subscriptions&&this._subscriptions.unsubscribe()}onCalendarChange(){this.deleteAltCalendarIfRedundant(),this.writeValue(this._value),this.picker.close()}onFormatChange(){this.writeValue(this._value)}setOverride(){this.workspace.calendarOverride=this.calendar||(this.disableAltCalendar?void 0:this.altCalendar),this.workspace.granularityOverride=this.granularity}writeValue(e){this.setOverride(),this._invalid=!1,this._value=e,this._calendar=this.workspace.calendar,this._dateFormat=this.workspace.dateFormat,this.picker.writeValue(e)}registerOnChange(e){this.picker.registerOnChange(t=>{t&&t!==this.input.nativeElement.value?(this._invalid=!1,this._value=t,this._calendar=this.workspace.calendar,this._dateFormat=this.workspace.dateFormat,e(t)):(this._invalid=!!t,delete this._value,delete this._calendar,delete this._dateFormat,e(void 0))})}validate(e){const{value:t}=e;return this._invalid?{ngbDate:{invalid:t}}:null}registerOnTouched(e){this.picker.registerOnTouched(e)}setDisabledState(e){this.isDisabled=e,this.picker.setDisabledState(e)}registerOnValidatorChange(e){this.picker.registerOnValidatorChange(e)}get format(){return this.workspace.dateFormatForPicker}onFocus(){this.setOverride()}onClick(){this.setOverride(),this.picker.toggle()}get getAltCalendar(){if(this.workspace.isApp){const e=this.workspace.currentTenant,t=e.settings;if(t.SecondaryCalendar)return(this.altCalendar||e.calendar)===t.PrimaryCalendar?t.SecondaryCalendar:t.PrimaryCalendar}}get altCalendarName(){const e=this.getAltCalendar;if(e)return this.translate.instant("Calendar_"+e)}onAltCalendar(){this.altCalendar=this.getAltCalendar,this.onCalendarChange()}deleteAltCalendarIfRedundant(){this.workspace.isApp&&this.workspace.currentTenant.calendar===this.altCalendar&&delete this.altCalendar}get disableAltCalendar(){return!!this.calendar||!this.workspace.isApp||!this.workspace.currentTenant.settings.SecondaryCalendar}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-date-picker"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(Lu,!0),o.Oc(Au,!0)),2&e&&(o.Ec(n=o.ic())&&(t.picker=n.first),o.Ec(n=o.ic())&&(t.input=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("w-100",t.w100)},inputs:{calendar:"calendar",granularity:"granularity"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e},{provide:te.h,multi:!0,useExisting:e}]),o.zb],decls:7,vars:4,consts:[[1,"input-group"],["ngbDatepicker","","container","body","outsideDays","visible",1,"form-control","t-input",3,"placeholder","focus"],["i","","d","ngbDatepicker"],[4,"ngIf"],["altCalendar",""],["tabindex","-1","type","button",1,"btn","btn-light","btn-sm","text-primary","t-white-button","p-0","px-1","align-baseline",2,"width","22.6px",3,"tContextMenu","tDisableMenu","click"],["icon","calendar-alt"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","py-1",3,"click"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Vb(1,"input",1,2),o.hc("focus",(function(){return t.onFocus()})),o.Ub(),o.Rc(4,Fu,3,2,"ng-container",3),o.Ub(),o.Rc(5,Pu,4,1,"ng-template",null,4,o.Sc)),2&e&&(o.Gb("t-disabled-background",t.isDisabled),o.Bb(1),o.sc("placeholder",t.format),o.Bb(3),o.sc("ngIf",!t.isDisabled))},directives:[K.s,x.u,fe.a,ee.b],encapsulation:2}),e})();const ju=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},Wu=function(e,t,n){return{template:e,action:t,showAction:n}},$u=function(e,t,n){return[e,t,n]};function qu(e,t){if(1&e&&o.Qb(0,"t-details",7),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(6),i=o.Fc(8),c=o.Fc(10),r=o.Fc(12);o.sc("definitionId",e.definitionId)("createFunc",e.create)("expand",e.expand)("mode",e.mode)("additionalSelect",e.additionalSelect)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("idString",e.idString)("documentTemplate",n)("actions",o.yc(26,$u,o.Ac(10,ju,i,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.Ac(16,ju,c,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.yc(22,Wu,r,e.onEditDefinition,e.showEditDefinition)))}}function Qu(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",8),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function Hu(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function Gu(e,t){if(1&e&&(o.Vb(0,"h2",18),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const zu=function(){return{updateOn:"blur"}};function Ju(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,zu))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Ku(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,zu))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Yu(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,zu))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Xu(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function Zu(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,zu))}}function ed(e,t){if(1&e&&(o.Vb(0,"t-form-group",14),o.mc(1,"translate"),o.Rc(2,Xu,2,1,"div",15),o.Rc(3,Zu,1,3,"t-text-editor",21),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function td(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function nd(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,zu))}}function id(e,t){if(1&e&&(o.Vb(0,"t-form-group",14),o.mc(1,"translate"),o.Rc(2,td,2,1,"div",15),o.Rc(3,nd,1,3,"t-text-editor",16),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function od(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function cd(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,zu))}}function rd(e,t){if(1&e&&(o.Vb(0,"t-form-group",14),o.mc(1,"translate"),o.Rc(2,od,2,1,"div",15),o.Rc(3,cd,1,3,"t-text-editor",16),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function sd(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function ld(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,zu))}}function ad(e,t){if(1&e&&(o.Vb(0,"t-form-group",24),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",25),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("label",o.nc(1,3,"IsActive")),o.Bb(2),o.sc("definitionId",t.definitionId)("entity",e)}}const ud=function(e,t){return{id:e,cache_buster:t}};function dd(e,t){if(1&e&&(o.Vb(0,"div",35),o.Qb(1,"t-report-results",36),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3).model,n=o.lc();o.Bb(1),o.sc("definition",n.reportDefinition(e))("arguments",o.xc(4,ud,null==t?null:t.Id,null==t||null==t.EntityMetadata?null:t.EntityMetadata.$refresh))("view",n.reportView(e))("state",n.state(e))}}function bd(e,t){if(1&e&&(o.Vb(0,"li",31),o.Vb(1,"a",32),o.Vb(2,"span",33),o.Tc(3),o.Ub(),o.Ub(),o.Rc(4,dd,2,7,"ng-template",34),o.Ub()),2&e){const e=t.$implicit;o.lc();const n=o.Fc(3),i=o.lc(3);o.sc("ngbNavItem",e.ReportDefinitionId),o.Bb(1),o.sc("tContextMenu",n)("tContext",e.ReportDefinitionId),o.Bb(2),o.Uc(i.reportTitle(e))}}function fd(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",37),o.Vb(1,"ul",38),o.Vb(2,"li",39),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.close,c=o.lc(3).model;return o.lc().onExpandReport(n,c),i()})),o.Vb(3,"div",40),o.Qb(4,"fa-icon",41),o.Ub(),o.Vb(5,"div",42),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}2&e&&(o.Bb(6),o.Vc(" ",o.nc(7,1,"Expand")," "))}function md(e,t){if(1&e&&(o.Tb(0),o.Rc(1,bd,5,4,"li",29),o.Rc(2,fd,8,3,"ng-template",null,30,o.Sc),o.Sb()),2&e){const e=o.lc(3);o.Bb(1),o.sc("ngForOf",e.reports)}}function gd(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"ul",26,27),o.hc("activeIdChange",(function(t){return o.Ic(e),o.lc(2).activeTab=t})),o.Rc(3,md,4,1,"ng-container",15),o.Ub(),o.Qb(4,"div",28),o.Sb()}if(2&e){const e=o.Fc(2),t=o.lc(),n=t.isEdit,i=t.model,c=o.lc();o.Bb(1),o.sc("destroyOnHide",!0)("activeId",c.activeTab),o.Bb(2),o.sc("ngIf",c.showReports(n,i)),o.Bb(1),o.sc("ngbNavOutlet",e)}}function pd(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.Rc(1,Gu,2,1,"h2",10),o.Rc(2,Ju,2,7,"t-text-editor",11),o.Rc(3,Ku,2,7,"t-text-editor",12),o.Rc(4,Yu,2,7,"t-text-editor",12),o.Ub(),o.Rc(5,ed,4,6,"t-form-group",13),o.Rc(6,id,4,6,"t-form-group",13),o.Rc(7,rd,4,6,"t-form-group",13),o.Vb(8,"t-form-group",14),o.mc(9,"translate"),o.Rc(10,sd,2,1,"div",15),o.Rc(11,ld,1,3,"t-text-editor",16),o.Ub(),o.Rc(12,ad,3,5,"t-form-group",17),o.Rc(13,gd,5,4,"ng-container",15)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,14,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",i.showTabs(n,e))}}function hd(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function vd(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function Id(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"EditDefinition")," ")}let yd=(()=>{class e extends gn.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.translate=n,this.router=i,this.route=o,this.lookupsApi=this.api.lookupsApi(null,this.notifyDestruct$),this.expand="",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.onActivate=e=>{e&&e.Id&&this.lookupsApi.activate([e.Id],{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.lookupsApi.deactivate([e.Id],{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onEditDefinition=e=>{const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../../lookup-definitions",this.definitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.showEditDefinition=e=>this.ws.canDo("lookup-definitions","Update",null),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this._definitionId=e,this.lookupsApi=this.api.lookupsApi(e,this.notifyDestruct$))}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");t&&this.ws.definitions.Lookups[t]||this.router.navigate(["page-not-found"],{relativeTo:this.route.parent,replaceUrl:!0}),this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`lookups/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Lookups[this.definitionId]:null)}get found(){return!!this.definition}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}showTabs(e,t){return this.reports.length>0&&this.showReports(e,t)}showReports(e,t){return!!t&&!!t.Id}get reports(){return this.definition.ReportDefinitions}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}reportTitle(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}state(e){const t=`lookups_details_${this.definitionId}_${e.ReportDefinitionId}`,n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new B.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}get activeTabKey(){return`lookups_details_${this.definitionId}_activeTab`}get activeTab(){const e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]}set activeTab(e){this.ws.miscState[this.activeTabKey]=e}onExpandReport(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(i.e),o.Pb(i.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-lookups-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[o.yb],decls:13,vars:2,consts:[["collection","Lookup",3,"definitionId","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Lookup",3,"definitionId","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],[3,"showHome"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label"],["collection","Lookup","path","IsActive",3,"definitionId","entity"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],[1,"w-100",3,"ngbNavOutlet"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"]],template:function(e,t){if(1&e&&(o.Rc(0,qu,1,30,"t-details",0),o.Rc(1,Qu,1,1,"ng-template",null,1,o.Sc),o.Rc(3,Hu,2,1,"ng-template",null,2,o.Sc),o.Rc(5,pd,14,16,"ng-template",null,3,o.Sc),o.Rc(7,hd,2,3,"ng-template",null,4,o.Sc),o.Rc(9,vd,2,3,"ng-template",null,5,o.Sc),o.Rc(11,Id,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,j.a,nn,pe.a,he.a,te.u,te.k,te.n,ge.a,K.v,K.A,x.t,K.x,K.y,fe.a,K.w,is,ee.b],pipes:[Q.d],encapsulation:2}),e})();const wd=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Cd=function(e,t){return[e,t]},Md=function(e){return{template:e,expression:"CreatedById eq me"}},Vd=function(e){return[e]},Td=function(e){return{CreatedBy:e}};function Ed(e,t){if(1&e&&o.Qb(0,"t-master",8),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(8),i=o.Fc(6),c=o.Fc(10),r=o.Fc(12),s=o.Fc(14);o.sc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("multiselectActions",o.xc(21,Cd,o.zc(11,wd,c,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.zc(16,wd,r,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",o.wc(28,Td,o.wc(26,Vd,o.wc(24,Md,s))))}}function xd(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",9),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function Ud(e,t){if(1&e&&(o.Vb(0,"div",10),o.Qb(1,"t-auto-cell",11),o.Ub(),o.Vb(2,"div",12),o.Qb(3,"t-auto-cell",13),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("definitionId",n.definitionId)("entity",n.c[e]),o.Bb(2),o.sc("definitionId",n.definitionId)("entity",n.c[e])}}function Rd(e,t){if(1&e&&o.Tc(0),2&e){const e=o.lc();o.Vc(" ",e.summary,"\n")}}function Dd(e,t){if(1&e&&(o.Vb(0,"span",14),o.Qb(1,"t-auto-cell",15),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("definitionId",n.definitionId)("entity",n.c[e])}}function Bd(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function Sd(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function kd(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}let Od=(()=>{class e extends Ut.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=o,this.lookupsApi=this.api.lookupsApi(null,this.notifyDestruct$),this.expand="",this.onActivate=e=>this.lookupsApi.activate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.lookupsApi.deactivate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.lookupsApi=this.api.lookupsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`lookups/${this.definitionId}`}get c(){return this.ws.Lookup}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Lookups[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Lookups")}get summary(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Lookup")}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(i.e),o.Pb(i.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-lookups-master"]],inputs:{definitionId:"definitionId"},features:[o.yb],decls:15,vars:2,consts:[["collection","Lookup","selectDefault","Code,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Lookup","selectDefault","Code,IsActive","selectForTiles","Code,Name,Name2,Name3",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex","justify-content-between"],["collection","Lookup","path","",3,"definitionId","entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","Lookup","path","Code",3,"definitionId","entity"],[1,"text-truncate"],["collection","Lookup",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(o.Rc(0,Ed,1,30,"t-master",0),o.Rc(1,xd,1,1,"ng-template",null,1,o.Sc),o.Rc(3,Ud,4,4,"ng-template",null,2,o.Sc),o.Rc(5,Rd,1,1,"ng-template",null,3,o.Sc),o.Rc(7,Dd,2,2,"ng-template",null,4,o.Sc),o.Rc(9,Bd,2,3,"ng-template",null,5,o.Sc),o.Rc(11,Sd,2,3,"ng-template",null,6,o.Sc),o.Rc(13,kd,2,3,"ng-template",null,7,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,Rt.a,nn,ge.a],pipes:[Q.d],encapsulation:2}),e})();function _d(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-lookups-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=t.definitionId,c=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("definitionId",i)("additionalSelect",c.additionalSelect)}}function Ld(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-lookups-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.definitionId,n=t.filter,i=o.lc();o.Bb(1),o.sc("definitionId",e)("filter",n)("showCreate",i.showCreate)("additionalSelect",i.additionalSelect)}}const Ad=function(e){return[e]};let Fd=(()=>{class e extends As{}return e.\u0275fac=function(t){return Pd(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-lookups-picker"]],inputs:{definitionId:"definitionId"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:9,consts:[["collection","Lookup",3,"definitionIds","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","filter","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,_d,2,4,"ng-template",null,1,o.Sc),o.Rc(3,Ld,2,4,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("definitionIds",o.wc(7,Ad,t.definitionId))("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("filter",t.filter)("additionalSelect",t.additionalSelect)}},directives:[Ls,yd,Od],encapsulation:2}),e})();const Pd=o.Xb(Fd);function Nd(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function jd(e,t){if(1&e&&(o.Vb(0,"h2",14),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const Wd=function(){return{updateOn:"blur"}};function $d(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",15),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,Wd))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function qd(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",16),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,Wd))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function Qd(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",16),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,Wd))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Hd(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function Gd(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,Wd))}}function zd(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Hd,2,1,"div",17),o.Rc(3,Gd,1,3,"t-text-editor",18),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Jd(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function Kd(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,Wd))}}function Yd(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Jd,2,1,"div",17),o.Rc(3,Kd,1,3,"t-text-editor",20),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Xd(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function Zd(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,Wd))}}function eb(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Xd,2,1,"div",17),o.Rc(3,Zd,1,3,"t-text-editor",20),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function tb(e,t){if(1&e&&(o.Vb(0,"t-restricted",22),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc().model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.IsRelated),o.Bb(1),o.Vc(" ",o.nc(2,2,null!=e&&e.IsRelated?"Yes":"No")," ")}}function nb(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",23),o.Vb(1,"input",24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.IsRelated=t})),o.Ub(),o.Vb(2,"label",25),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc().model;o.Bb(1),o.sc("ngModel",e.IsRelated)}}function ib(e,t){if(1&e&&(o.Vb(0,"t-form-group",26),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",27),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(2),o.sc("entity",e)}}function ob(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,jd,2,1,"h2",6),o.Rc(2,$d,2,7,"t-text-editor",7),o.Rc(3,qd,2,7,"t-text-editor",8),o.Rc(4,Qd,2,7,"t-text-editor",8),o.Ub(),o.Rc(5,zd,4,6,"t-form-group",9),o.Rc(6,Yd,4,6,"t-form-group",9),o.Rc(7,eb,4,6,"t-form-group",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Rc(10,tb,3,4,"t-restricted",11),o.Rc(11,nb,4,1,"div",12),o.Ub(),o.Rc(12,ib,3,4,"t-form-group",13)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,13,"Agent_IsRelated"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.IsRelated),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n)}}function cb(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function rb(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const sb=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},lb=function(e,t){return[e,t]};let ab=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.agentsApi=this.api.agentsApi(this.notifyDestruct$),this.expand="",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsRelated=!1,e},this.onActivate=e=>{e&&e.Id&&this.agentsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.agentsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("agents","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.agentsApi=this.api.agentsApi(this.notifyDestruct$)}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-agents-details"]],features:[o.yb],decls:10,vars:26,consts:[["collection","Agent",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[3,"metadata",4,"ngIf"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isRelated",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isRelated",1,"custom-control-label","t-pointer"],[1,"t-form-group",3,"label"],["collection","Unit","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,Nd,2,1,"ng-template",null,1,o.Sc),o.Rc(4,ob,13,15,"ng-template",null,2,o.Sc),o.Rc(6,cb,2,3,"ng-template",null,3,o.Sc),o.Rc(8,rb,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,9,"Agents"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.xc(23,lb,o.Ac(11,sb,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(17,sb,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,he.a,te.u,te.k,te.n,pn.a,te.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function ub(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",9),o.Vb(4,"span",8),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("Agent",e,"Name")),o.Bb(3),o.Uc(n.ws.getMultilingualValue("Agent",e,"Description"))}}function db(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Agent"),"\n")}function bb(e,t){if(1&e&&(o.Vb(0,"span",10),o.Qb(1,"t-auto-cell",11),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function fb(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function mb(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function gb(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}const pb=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},hb=function(e,t){return[e,t]},vb=function(e){return{template:e,expression:"CreatedById eq me"}},Ib=function(e){return[e]},yb=function(e){return{CreatedBy:e}};let wb=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.agentsApi=this.api.agentsApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.agentsApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.agentsApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("agents","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.agentsApi=this.api.agentsApi(this.notifyDestruct$)}get c(){return this.ws.Agent}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-agents-master"]],features:[o.yb],decls:14,vars:31,consts:[["collection","Agent","selectDefault","IsRelated,IsActive","selectForTiles","Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","Agent",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,ub,6,2,"ng-template",null,1,o.Sc),o.Rc(4,db,2,3,"ng-template",null,2,o.Sc),o.Rc(6,bb,2,1,"ng-template",null,3,o.Sc),o.Rc(8,fb,2,3,"ng-template",null,4,o.Sc),o.Rc(10,mb,2,3,"ng-template",null,5,o.Sc),o.Rc(12,gb,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"Agents"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(22,hb,o.zc(12,pb,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(17,pb,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.wc(29,yb,o.wc(27,Ib,o.wc(25,vb,s))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function Cb(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-agents-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function Mb(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-agents-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let Vb=(()=>{class e extends As{}return e.\u0275fac=function(t){return Tb(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-agents-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","Agent",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,Cb,2,3,"ng-template",null,1,o.Sc),o.Rc(3,Mb,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,ab,wb],encapsulation:2}),e})();const Tb=o.Xb(Vb);function Eb(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-relations-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=t.definitionId,c=o.lc();o.Bb(1),o.sc("idString",n)("initialText",e)("definitionId",i)("additionalSelect",c.additionalSelect)}}function xb(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-relations-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.definitionId,n=t.filter,i=o.lc();o.Bb(1),o.sc("definitionId",e)("filter",n)("showCreate",i.showCreate)("additionalSelect",i.additionalSelect)}}let Ub=(()=>{class e extends As{}return e.\u0275fac=function(t){return Rb(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-relations-picker"]],inputs:{definitionIds:"definitionIds"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:7,consts:[["collection","Relation",3,"masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","definitionIds","filter","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"idString","initialText","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,Eb,2,4,"ng-template",null,1,o.Sc),o.Rc(3,xb,2,4,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("definitionIds",t.definitionIds)("filter",t.filter)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const Rb=o.Xb(Ub),Db=["input"];let Bb=(()=>{class e{constructor(){this.placeholder="",this.w100=!0,this.onChangeFn=e=>{},this.onTouchedFn=()=>{}}focus(){this.input.nativeElement&&this.input.nativeElement.focus()}select(){this.input.nativeElement&&this.input.nativeElement.select()}writeValue(e){this.input.nativeElement.value=e=e||""}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.input.nativeElement.disabled=e}onChange(e){this.onChangeFn(e||void 0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-multiline-editor"]],viewQuery:function(e,t){var n;1&e&&o.Oc(Db,!0),2&e&&o.Ec(n=o.ic())&&(t.input=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("w-100",t.w100)},inputs:{placeholder:"placeholder"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}])],decls:2,vars:1,consts:[["autocomplete","off","rows","3",1,"form-control","t-input",3,"placeholder","input","blur"],["input",""]],template:function(e,t){1&e&&(o.Vb(0,"textarea",0,1),o.hc("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouchedFn()})),o.Ub()),2&e&&o.sc("placeholder",t.placeholder)},encapsulation:2}),e})();var Sb=n("mrSG"),kb=n("HDdC"),Ob=n("2Vo4"),_b=n("Cfvw"),Lb=n("DH7j"),Ab=n("n6bG"),Fb=n("VRyK"),Pb=n("jtHE");n("8Qeq"),n("z+Ro"),n("z6cu");var Nb=n("5+tZ"),jb=n("l7GE"),Wb=n("ZUHj");class $b{constructor(e){this.notifier=e}call(e,t){const n=new qb(e),i=t.subscribe(n);return i.add(Object(Wb.a)(n,this.notifier)),i}}class qb extends jb.a{constructor(){super(...arguments),this.hasValue=!1}_next(e){this.value=e,this.hasValue=!0}notifyNext(e,t,n,i,o){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}var Qb=n("UXun"),Hb=n("/uUt"),Gb=n("1G5W"),zb=n("JX91");n("oB13");const Jb=["*"];let Kb=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})(),Yb=(()=>{let e=class{constructor(e,t){this._loader=e,this._zone=t,this._map=new Promise(e=>{this._mapResolver=e})}createMap(e,t){return this._zone.runOutsideAngular(()=>this._loader.load().then(()=>{const n=new google.maps.Map(e,t);this._mapResolver(n)}))}setMapOptions(e){return this._zone.runOutsideAngular(()=>{this._map.then(t=>{t.setOptions(e)})})}createMarker(e={},t=!0){return this._zone.runOutsideAngular(()=>this._map.then(n=>(t&&(e.map=n),new google.maps.Marker(e))))}createInfoWindow(e){return this._zone.runOutsideAngular(()=>this._map.then(()=>new google.maps.InfoWindow(e)))}createCircle(e){return this._zone.runOutsideAngular(()=>this._map.then(t=>("string"==typeof e.strokePosition&&(e.strokePosition=google.maps.StrokePosition[e.strokePosition]),e.map=t,new google.maps.Circle(e))))}createRectangle(e){return this._zone.runOutsideAngular(()=>this._map.then(t=>(e.map=t,new google.maps.Rectangle(e))))}createPolyline(e){return this._zone.runOutsideAngular(()=>this.getNativeMap().then(t=>{let n=new google.maps.Polyline(e);return n.setMap(t),n}))}createPolygon(e){return this._zone.runOutsideAngular(()=>this.getNativeMap().then(t=>{let n=new google.maps.Polygon(e);return n.setMap(t),n}))}createDataLayer(e){return this._zone.runOutsideAngular(()=>this._map.then(t=>{let n=new google.maps.Data(e);return n.setMap(t),n}))}createTransitLayer(e){return this._zone.runOutsideAngular(()=>this._map.then(t=>{let n=new google.maps.TransitLayer;return n.setMap(e.visible?t:null),n}))}createBicyclingLayer(e){return this._zone.runOutsideAngular(()=>this._map.then(t=>{let n=new google.maps.BicyclingLayer;return n.setMap(e.visible?t:null),n}))}containsLocation(e,t){return google.maps.geometry.poly.containsLocation(e,t)}subscribeToMapEvent(e){return new kb.a(t=>{this._map.then(n=>{n.addListener(e,e=>{this._zone.run(()=>t.next(e))})})})}clearInstanceListeners(){return this._zone.runOutsideAngular(()=>{this._map.then(e=>{google.maps.event.clearInstanceListeners(e)})})}setCenter(e){return this._zone.runOutsideAngular(()=>this._map.then(t=>t.setCenter(e)))}getZoom(){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.getZoom()))}getBounds(){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.getBounds()))}getMapTypeId(){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.getMapTypeId()))}setZoom(e){return this._zone.runOutsideAngular(()=>this._map.then(t=>t.setZoom(e)))}getCenter(){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.getCenter()))}panTo(e){return this._zone.runOutsideAngular(()=>this._map.then(t=>t.panTo(e)))}panBy(e,t){return this._zone.runOutsideAngular(()=>this._map.then(n=>n.panBy(e,t)))}fitBounds(e,t){return this._zone.runOutsideAngular(()=>this._map.then(n=>n.fitBounds(e,t)))}panToBounds(e,t){return this._zone.runOutsideAngular(()=>this._map.then(n=>n.panToBounds(e,t)))}getNativeMap(){return this._map}triggerMapEvent(e){return this._map.then(t=>google.maps.event.trigger(t,e))}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Kb),o.dc(o.z))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})(),Xb=(()=>{let e=class{constructor(e){this._wrapper=e,this._layers=new Map}addTransitLayer(e,t){const n=this._wrapper.createTransitLayer(t);this._layers.set(e,n)}addBicyclingLayer(e,t){const n=this._wrapper.createBicyclingLayer(t);this._layers.set(e,n)}deleteLayer(e){return this._layers.get(e).then(t=>{t.setMap(null),this._layers.delete(e)})}toggleLayerVisibility(e,t){return this._layers.get(e).then(e=>t.visible?this._wrapper.getNativeMap().then(t=>{e.setMap(t)}):void e.setMap(null))}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})(),Zb=0,ef=(()=>{let e=class{constructor(e){this._manager=e,this._addedToManager=!1,this._id=(Zb++).toString(),this.visible=!0}ngOnInit(){this._addedToManager||(this._manager.addBicyclingLayer(this,{visible:this.visible}),this._addedToManager=!0)}ngOnChanges(e){this._addedToManager&&null!=e.visible&&this._manager.toggleLayerVisibility(this,{visible:e.visible.currentValue})}id(){return this._id}toString(){return`AgmBicyclingLayer-${this._id.toString()}`}ngOnDestroy(){this._manager.deleteLayer(this)}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(Xb))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-bicycling-layer"]],inputs:{visible:"visible"},features:[o.zb]}),e})(),tf=(()=>{let e=class{constructor(e,t){this._apiWrapper=e,this._zone=t,this._circles=new Map}addCircle(e){this._circles.set(e,this._apiWrapper.createCircle({center:{lat:e.latitude,lng:e.longitude},clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,radius:e.radius,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokePosition:e.strokePosition,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex}))}removeCircle(e){return this._circles.get(e).then(t=>{t.setMap(null),this._circles.delete(e)})}setOptions(e,t){return this._circles.get(e).then(e=>{"string"==typeof t.strokePosition&&(t.strokePosition=google.maps.StrokePosition[t.strokePosition]),e.setOptions(t)})}getBounds(e){return this._circles.get(e).then(e=>e.getBounds())}getCenter(e){return this._circles.get(e).then(e=>e.getCenter())}getRadius(e){return this._circles.get(e).then(e=>e.getRadius())}setCenter(e){return this._circles.get(e).then(t=>t.setCenter({lat:e.latitude,lng:e.longitude}))}setEditable(e){return this._circles.get(e).then(t=>t.setEditable(e.editable))}setDraggable(e){return this._circles.get(e).then(t=>t.setDraggable(e.draggable))}setVisible(e){return this._circles.get(e).then(t=>t.setVisible(e.visible))}setRadius(e){return this._circles.get(e).then(t=>t.setRadius(e.radius))}getNativeCircle(e){return this._circles.get(e)}createEventObservable(e,t){return new kb.a(n=>{let i=null;return this._circles.get(t).then(t=>{i=t.addListener(e,e=>this._zone.run(()=>n.next(e)))}),()=>{null!==i&&i.remove()}})}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb),o.dc(o.z))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})();var nf;let of=(()=>{let e=nf=class{constructor(e){this._manager=e,this.clickable=!0,this.draggable=!1,this.editable=!1,this.radius=0,this.strokePosition="CENTER",this.strokeWeight=0,this.visible=!0,this.centerChange=new o.n,this.circleClick=new o.n,this.circleDblClick=new o.n,this.drag=new o.n,this.dragEnd=new o.n,this.dragStart=new o.n,this.mouseDown=new o.n,this.mouseMove=new o.n,this.mouseOut=new o.n,this.mouseOver=new o.n,this.mouseUp=new o.n,this.radiusChange=new o.n,this.rightClick=new o.n,this._circleAddedToManager=!1,this._eventSubscriptions=[]}ngOnInit(){this._manager.addCircle(this),this._circleAddedToManager=!0,this._registerEventListeners()}ngOnChanges(e){this._circleAddedToManager&&((e.latitude||e.longitude)&&this._manager.setCenter(this),e.editable&&this._manager.setEditable(this),e.draggable&&this._manager.setDraggable(this),e.visible&&this._manager.setVisible(this),e.radius&&this._manager.setRadius(this),this._updateCircleOptionsChanges(e))}_updateCircleOptionsChanges(e){let t={},n=Object.keys(e).filter(e=>-1!==nf._mapOptions.indexOf(e));n.forEach(n=>{t[n]=e[n].currentValue}),n.length>0&&this._manager.setOptions(this,t)}_registerEventListeners(){let e=new Map;e.set("center_changed",this.centerChange),e.set("click",this.circleClick),e.set("dblclick",this.circleDblClick),e.set("drag",this.drag),e.set("dragend",this.dragEnd),e.set("dragstart",this.dragStart),e.set("mousedown",this.mouseDown),e.set("mousemove",this.mouseMove),e.set("mouseout",this.mouseOut),e.set("mouseover",this.mouseOver),e.set("mouseup",this.mouseUp),e.set("radius_changed",this.radiusChange),e.set("rightclick",this.rightClick),e.forEach((e,t)=>{this._eventSubscriptions.push(this._manager.createEventObservable(t,this).subscribe(n=>{switch(t){case"radius_changed":this._manager.getRadius(this).then(t=>e.emit(t));break;case"center_changed":this._manager.getCenter(this).then(t=>e.emit({lat:t.lat(),lng:t.lng()}));break;default:e.emit({coords:{lat:n.latLng.lat(),lng:n.latLng.lng()}})}}))})}ngOnDestroy(){this._eventSubscriptions.forEach((function(e){e.unsubscribe()})),this._eventSubscriptions=null,this._manager.removeCircle(this)}getBounds(){return this._manager.getBounds(this)}getCenter(){return this._manager.getCenter(this)}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(tf))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-circle"]],inputs:{clickable:"clickable",draggable:["circleDraggable","draggable"],editable:"editable",radius:"radius",strokePosition:"strokePosition",strokeWeight:"strokeWeight",visible:"visible",latitude:"latitude",longitude:"longitude",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",zIndex:"zIndex"},outputs:{centerChange:"centerChange",circleClick:"circleClick",circleDblClick:"circleDblClick",drag:"drag",dragEnd:"dragEnd",dragStart:"dragStart",mouseDown:"mouseDown",mouseMove:"mouseMove",mouseOut:"mouseOut",mouseOver:"mouseOver",mouseUp:"mouseUp",radiusChange:"radiusChange",rightClick:"rightClick"},features:[o.zb]}),e._mapOptions=["fillColor","fillOpacity","strokeColor","strokeOpacity","strokePosition","strokeWeight","visible","zIndex","clickable"],e})(),cf=(()=>{let e=class{constructor(e,t){this._wrapper=e,this._zone=t,this._layers=new Map}addDataLayer(e){const t=this._wrapper.createDataLayer({style:e.style}).then(t=>(e.geoJson&&this.getDataFeatures(t,e.geoJson).then(e=>t.features=e),t));this._layers.set(e,t)}deleteDataLayer(e){this._layers.get(e).then(t=>{t.setMap(null),this._layers.delete(e)})}updateGeoJson(e,t){this._layers.get(e).then(e=>{e.forEach((function(t){e.remove(t);var n=e.features.indexOf(t,0);n>-1&&e.features.splice(n,1)})),this.getDataFeatures(e,t).then(t=>e.features=t)})}setDataOptions(e,t){this._layers.get(e).then(e=>{e.setControlPosition(t.controlPosition),e.setControls(t.controls),e.setDrawingMode(t.drawingMode),e.setStyle(t.style)})}createEventObservable(e,t){return new kb.a(n=>{this._layers.get(t).then(t=>{t.addListener(e,e=>this._zone.run(()=>n.next(e)))})})}getDataFeatures(e,t){return new Promise((n,i)=>{if("object"==typeof t)try{n(e.addGeoJson(t))}catch(o){i(o)}else"string"==typeof t?e.loadGeoJson(t,null,n):i("Impossible to extract features from geoJson: wrong argument type")})}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb),o.dc(o.z))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})();var rf;let sf=0,lf=(()=>{let e=rf=class{constructor(e){this._manager=e,this._addedToManager=!1,this._id=(sf++).toString(),this._subscriptions=[],this.layerClick=new o.n,this.geoJson=null}ngOnInit(){this._addedToManager||(this._manager.addDataLayer(this),this._addedToManager=!0,this._addEventListeners())}_addEventListeners(){[{name:"click",handler:e=>this.layerClick.emit(e)}].forEach(e=>{const t=this._manager.createEventObservable(e.name,this).subscribe(e.handler);this._subscriptions.push(t)})}id(){return this._id}toString(){return`AgmDataLayer-${this._id.toString()}`}ngOnDestroy(){this._manager.deleteDataLayer(this),this._subscriptions.forEach(e=>e.unsubscribe())}ngOnChanges(e){if(!this._addedToManager)return;var t=e.geoJson;t&&this._manager.updateGeoJson(this,t.currentValue);let n={};rf._dataOptionsAttributes.forEach(t=>n[t]=e.hasOwnProperty(t)?e[t].currentValue:this[t]),this._manager.setDataOptions(this,n)}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(cf))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-data-layer"]],inputs:{geoJson:"geoJson",style:"style"},outputs:{layerClick:"layerClick"},features:[o.zb]}),e._dataOptionsAttributes=["style"],e})();class af{}let uf=(()=>{let e=class{constructor(e){var t;this._boundsChangeSampleTime$=new Ob.a(200),this._includeInBounds$=new Ob.a(new Map),this.bounds$=Object(_b.a)(e.load()).pipe(Object(Nb.a)(()=>this._includeInBounds$),(t=this._boundsChangeSampleTime$.pipe(Object(_.a)(e=>Object(on.a)(0,e))),e=>e.lift(new $b(t))),Object(us.a)(e=>this._generateBounds(e)),Object(Qb.a)(1))}_generateBounds(e){const t=new google.maps.LatLngBounds;return e.forEach(e=>t.extend(e)),t}addToBounds(e){const t=this._createIdentifier(e);if(this._includeInBounds$.value.has(t))return;const n=this._includeInBounds$.value;n.set(t,e),this._includeInBounds$.next(n)}removeFromBounds(e){const t=this._includeInBounds$.value;t.delete(this._createIdentifier(e)),this._includeInBounds$.next(t)}changeFitBoundsChangeSampleTime(e){this._boundsChangeSampleTime$.next(e)}getBounds$(){return this.bounds$}_createIdentifier(e){return`${e.lat}+${e.lng}`}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Kb))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})(),df=(()=>{let e=class{constructor(e,t){this._fitBoundsAccessor=e,this._fitBoundsService=t,this.agmFitBounds=!0,this._destroyed$=new E.a,this._latestFitBoundsDetails=null}ngOnChanges(){this._updateBounds()}ngOnInit(){this._fitBoundsAccessor.getFitBoundsDetails$().pipe(Object(Hb.a)((e,t)=>e.latLng.lat===t.latLng.lat&&e.latLng.lng===t.latLng.lng),Object(Gb.a)(this._destroyed$)).subscribe(e=>this._updateBounds(e))}_updateBounds(e){this._latestFitBoundsDetails&&this._fitBoundsService.removeFromBounds(this._latestFitBoundsDetails.latLng),e&&(this._latestFitBoundsDetails=e),this._latestFitBoundsDetails&&!0===this.agmFitBounds&&this._fitBoundsService.addToBounds(this._latestFitBoundsDetails.latLng)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete(),null!==this._latestFitBoundsDetails&&this._fitBoundsService.removeFromBounds(this._latestFitBoundsDetails.latLng)}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(af,2),o.Pb(uf))},e.\u0275dir=o.Kb({type:e,selectors:[["","agmFitBounds",""]],inputs:{agmFitBounds:"agmFitBounds"},features:[o.zb]}),e})(),bf=(()=>{let e=class{constructor(e,t){this._mapsWrapper=e,this._zone=t,this._markers=new Map}convertAnimation(e){return Object(Sb.a)(this,void 0,void 0,(function*(){return null===e?null:this._mapsWrapper.getNativeMap().then(()=>google.maps.Animation[e])}))}deleteMarker(e){const t=this._markers.get(e);return null==t?Promise.resolve():t.then(t=>this._zone.run(()=>{t.setMap(null),this._markers.delete(e)}))}updateMarkerPosition(e){return this._markers.get(e).then(t=>t.setPosition({lat:e.latitude,lng:e.longitude}))}updateTitle(e){return this._markers.get(e).then(t=>t.setTitle(e.title))}updateLabel(e){return this._markers.get(e).then(t=>{t.setLabel(e.label)})}updateDraggable(e){return this._markers.get(e).then(t=>t.setDraggable(e.draggable))}updateIcon(e){return this._markers.get(e).then(t=>t.setIcon(e.iconUrl))}updateOpacity(e){return this._markers.get(e).then(t=>t.setOpacity(e.opacity))}updateVisible(e){return this._markers.get(e).then(t=>t.setVisible(e.visible))}updateZIndex(e){return this._markers.get(e).then(t=>t.setZIndex(e.zIndex))}updateClickable(e){return this._markers.get(e).then(t=>t.setClickable(e.clickable))}updateAnimation(e){return Object(Sb.a)(this,void 0,void 0,(function*(){(yield this._markers.get(e)).setAnimation(yield this.convertAnimation(e.animation))}))}addMarker(e){const t=new Promise(t=>Object(Sb.a)(this,void 0,void 0,(function*(){return this._mapsWrapper.createMarker({position:{lat:e.latitude,lng:e.longitude},label:e.label,draggable:e.draggable,icon:e.iconUrl,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,title:e.title,clickable:e.clickable,animation:yield this.convertAnimation(e.animation)}).then(t)})));this._markers.set(e,t)}getNativeMarker(e){return this._markers.get(e)}createEventObservable(e,t){return new kb.a(n=>{this._markers.get(t).then(t=>{t.addListener(e,e=>this._zone.run(()=>n.next(e)))})})}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb),o.dc(o.z))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})(),ff=(()=>{let e=class{constructor(e,t,n){this._mapsWrapper=e,this._zone=t,this._markerManager=n,this._infoWindows=new Map}deleteInfoWindow(e){const t=this._infoWindows.get(e);return null==t?Promise.resolve():t.then(t=>this._zone.run(()=>{t.close(),this._infoWindows.delete(e)}))}setPosition(e){return this._infoWindows.get(e).then(t=>t.setPosition({lat:e.latitude,lng:e.longitude}))}setZIndex(e){return this._infoWindows.get(e).then(t=>t.setZIndex(e.zIndex))}open(e){return this._infoWindows.get(e).then(t=>null!=e.hostMarker?this._markerManager.getNativeMarker(e.hostMarker).then(e=>this._mapsWrapper.getNativeMap().then(n=>t.open(n,e))):this._mapsWrapper.getNativeMap().then(e=>t.open(e)))}close(e){return this._infoWindows.get(e).then(e=>e.close())}setOptions(e,t){return this._infoWindows.get(e).then(e=>e.setOptions(t))}addInfoWindow(e){const t={content:e.content,maxWidth:e.maxWidth,zIndex:e.zIndex,disableAutoPan:e.disableAutoPan};"number"==typeof e.latitude&&"number"==typeof e.longitude&&(t.position={lat:e.latitude,lng:e.longitude});const n=this._mapsWrapper.createInfoWindow(t);this._infoWindows.set(e,n)}createEventObservable(e,t){return new kb.a(n=>{this._infoWindows.get(t).then(t=>{t.addListener(e,e=>this._zone.run(()=>n.next(e)))})})}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb),o.dc(o.z),o.dc(bf))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})();var mf;let gf=0,pf=(()=>{let e=mf=class{constructor(e,t){this._infoWindowManager=e,this._el=t,this.isOpen=!1,this.infoWindowClose=new o.n,this._infoWindowAddedToManager=!1,this._id=(gf++).toString()}ngOnInit(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()}ngOnChanges(e){this._infoWindowAddedToManager&&((e.latitude||e.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),e.zIndex&&this._infoWindowManager.setZIndex(this),e.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(e))}_registerEventListeners(){this._infoWindowManager.createEventObservable("closeclick",this).subscribe(()=>{this.isOpen=!1,this.infoWindowClose.emit()})}_updateOpenState(){this.isOpen?this.open():this.close()}_setInfoWindowOptions(e){let t={};Object.keys(e).filter(e=>-1!==mf._infoWindowOptionsInputs.indexOf(e)).forEach(n=>{t[n]=e[n].currentValue}),this._infoWindowManager.setOptions(this,t)}open(){return this._infoWindowManager.open(this)}close(){return this._infoWindowManager.close(this).then(()=>{this.infoWindowClose.emit()})}id(){return this._id}toString(){return"AgmInfoWindow-"+this._id.toString()}ngOnDestroy(){this._infoWindowManager.deleteInfoWindow(this)}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(ff),o.Pb(o.l))},e.\u0275cmp=o.Jb({type:e,selectors:[["agm-info-window"]],inputs:{isOpen:"isOpen",latitude:"latitude",longitude:"longitude",disableAutoPan:"disableAutoPan",zIndex:"zIndex",maxWidth:"maxWidth"},outputs:{infoWindowClose:"infoWindowClose"},features:[o.zb],ngContentSelectors:Jb,decls:2,vars:0,consts:[[1,"agm-info-window-content"]],template:function(e,t){1&e&&(o.rc(),o.Vb(0,"div",0),o.qc(1),o.Ub())},encapsulation:2}),e._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],e})(),hf=(()=>{let e=class{constructor(e,t){this._wrapper=e,this._zone=t,this._layers=new Map}addKmlLayer(e){const t=this._wrapper.getNativeMap().then(t=>new google.maps.KmlLayer({clickable:e.clickable,map:t,preserveViewport:e.preserveViewport,screenOverlays:e.screenOverlays,suppressInfoWindows:e.suppressInfoWindows,url:e.url,zIndex:e.zIndex}));this._layers.set(e,t)}setOptions(e,t){this._layers.get(e).then(e=>e.setOptions(t))}deleteKmlLayer(e){this._layers.get(e).then(t=>{t.setMap(null),this._layers.delete(e)})}createEventObservable(e,t){return new kb.a(n=>{this._layers.get(t).then(t=>{t.addListener(e,e=>this._zone.run(()=>n.next(e)))})})}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb),o.dc(o.z))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})();var vf;let If=0,yf=(()=>{let e=vf=class{constructor(e){this._manager=e,this._addedToManager=!1,this._id=(If++).toString(),this._subscriptions=[],this.clickable=!0,this.preserveViewport=!1,this.screenOverlays=!0,this.suppressInfoWindows=!1,this.url=null,this.zIndex=null,this.layerClick=new o.n,this.defaultViewportChange=new o.n,this.statusChange=new o.n}ngOnInit(){this._addedToManager||(this._manager.addKmlLayer(this),this._addedToManager=!0,this._addEventListeners())}ngOnChanges(e){this._addedToManager&&this._updatePolygonOptions(e)}_updatePolygonOptions(e){const t=Object.keys(e).filter(e=>-1!==vf._kmlLayerOptions.indexOf(e)).reduce((t,n)=>(t[n]=e[n].currentValue,t),{});Object.keys(t).length>0&&this._manager.setOptions(this,t)}_addEventListeners(){[{name:"click",handler:e=>this.layerClick.emit(e)},{name:"defaultviewport_changed",handler:()=>this.defaultViewportChange.emit()},{name:"status_changed",handler:()=>this.statusChange.emit()}].forEach(e=>{const t=this._manager.createEventObservable(e.name,this).subscribe(e.handler);this._subscriptions.push(t)})}id(){return this._id}toString(){return`AgmKmlLayer-${this._id.toString()}`}ngOnDestroy(){this._manager.deleteKmlLayer(this),this._subscriptions.forEach(e=>e.unsubscribe())}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(hf))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-kml-layer"]],inputs:{clickable:"clickable",preserveViewport:"preserveViewport",screenOverlays:"screenOverlays",suppressInfoWindows:"suppressInfoWindows",url:"url",zIndex:"zIndex"},outputs:{layerClick:"layerClick",defaultViewportChange:"defaultViewportChange",statusChange:"statusChange"},features:[o.zb]}),e._kmlLayerOptions=["clickable","preserveViewport","screenOverlays","suppressInfoWindows","url","zIndex"],e})();function wf(e){const t=["insert_at","remove_at","set_at"];return function e(t,n,i){return i?e(t,n).pipe(Object(us.a)(e=>Object(Lb.a)(e)?i(...e):i(e))):new kb.a(e=>{const i=(...t)=>e.next(1===t.length?t[0]:t);let o;try{o=t(i)}catch(c){return void e.error(c)}if(Object(Ab.a)(n))return()=>n(i,o)})}(n=>t.map(t=>e.addListener(t,(i,o)=>n.apply(e,[{newArr:e.getArray(),evName:t,index:i,previous:o}]))),(e,t)=>t.forEach(e=>e.remove()))}let Cf=(()=>{let e=class{constructor(e,t){this._mapsWrapper=e,this._zone=t,this._polygons=new Map}addPolygon(e){const t=this._mapsWrapper.createPolygon({clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,geodesic:e.geodesic,paths:e.paths,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex});this._polygons.set(e,t)}updatePolygon(e){const t=this._polygons.get(e);return null==t?Promise.resolve():t.then(t=>this._zone.run(()=>{t.setPaths(e.paths)}))}setPolygonOptions(e,t){return this._polygons.get(e).then(e=>{e.setOptions(t)})}deletePolygon(e){const t=this._polygons.get(e);return null==t?Promise.resolve():t.then(t=>this._zone.run(()=>{t.setMap(null),this._polygons.delete(e)}))}getPath(e){return this._polygons.get(e).then(e=>e.getPath().getArray())}getPaths(e){return this._polygons.get(e).then(e=>e.getPaths().getArray().map(e=>e.getArray()))}createEventObservable(e,t){return new kb.a(n=>{this._polygons.get(t).then(t=>{t.addListener(e,e=>this._zone.run(()=>n.next(e)))})})}createPathEventObservable(e){return Object(Sb.a)(this,void 0,void 0,(function*(){const t=(yield this._polygons.get(e)).getPaths();return wf(t).pipe(Object(zb.a)({newArr:t.getArray()}),Object(_.a)(e=>Object(Fb.a)(...e.newArr.map((t,n)=>wf(t).pipe(Object(us.a)(t=>({parentMVEvent:e,chMVCEvent:t,pathIndex:n}))))).pipe(Object(zb.a)({parentMVEvent:e,chMVCEvent:null,pathIndex:null}))),Object(Ci.a)(1),Object(us.a)(({parentMVEvent:e,chMVCEvent:t,pathIndex:n})=>{let i;return t?(i={newArr:e.newArr.map(e=>e.getArray().map(e=>e.toJSON())),pathIndex:n,eventName:t.evName,index:t.index},t.previous&&(i.previous=t.previous)):(i={newArr:e.newArr.map(e=>e.getArray().map(e=>e.toJSON())),eventName:e.evName,index:e.index},e.previous&&(i.previous=e.previous.getArray())),i}))}))}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb),o.dc(o.z))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})();var Mf;let Vf=(()=>{let e=Mf=class{constructor(e,t){this._mapsWrapper=e,this._zone=t,this._polylines=new Map}static _convertPoints(e){return e._getPoints().map(e=>({lat:e.latitude,lng:e.longitude}))}static _convertPath(e){const t=google.maps.SymbolPath[e];return"number"==typeof t?t:e}static _convertIcons(e){const t=e._getIcons().map(e=>({fixedRotation:e.fixedRotation,offset:e.offset,repeat:e.repeat,icon:{anchor:new google.maps.Point(e.anchorX,e.anchorY),fillColor:e.fillColor,fillOpacity:e.fillOpacity,path:Mf._convertPath(e.path),rotation:e.rotation,scale:e.scale,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight}}));return t.forEach(e=>{Object.entries(e).forEach(([t,n])=>{void 0===n&&delete e[t]}),void 0!==e.icon.anchor.x&&void 0!==e.icon.anchor.y||delete e.icon.anchor}),t}addPolyline(e){const t=this._mapsWrapper.getNativeMap().then(()=>[Mf._convertPoints(e),Mf._convertIcons(e)]).then(([t,n])=>this._mapsWrapper.createPolyline({clickable:e.clickable,draggable:e.draggable,editable:e.editable,geodesic:e.geodesic,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex,path:t,icons:n}));this._polylines.set(e,t)}updatePolylinePoints(e){const t=Mf._convertPoints(e),n=this._polylines.get(e);return null==n?Promise.resolve():n.then(e=>this._zone.run(()=>{e.setPath(t)}))}updateIconSequences(e){return Object(Sb.a)(this,void 0,void 0,(function*(){yield this._mapsWrapper.getNativeMap();const t=Mf._convertIcons(e),n=this._polylines.get(e);if(null!=n)return n.then(e=>this._zone.run(()=>e.setOptions({icons:t})))}))}setPolylineOptions(e,t){return this._polylines.get(e).then(e=>{e.setOptions(t)})}deletePolyline(e){const t=this._polylines.get(e);return null==t?Promise.resolve():t.then(t=>this._zone.run(()=>{t.setMap(null),this._polylines.delete(e)}))}getMVCPath(e){return Object(Sb.a)(this,void 0,void 0,(function*(){return(yield this._polylines.get(e)).getPath()}))}getPath(e){return Object(Sb.a)(this,void 0,void 0,(function*(){return(yield this.getMVCPath(e)).getArray()}))}createEventObservable(e,t){return new kb.a(n=>{this._polylines.get(t).then(t=>{t.addListener(e,e=>this._zone.run(()=>n.next(e)))})})}createPathEventObservable(e){return Object(Sb.a)(this,void 0,void 0,(function*(){return wf(yield this.getMVCPath(e))}))}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb),o.dc(o.z))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})(),Tf=(()=>{let e=class{constructor(e,t){this._apiWrapper=e,this._zone=t,this._rectangles=new Map}addRectangle(e){this._rectangles.set(e,this._apiWrapper.createRectangle({bounds:{north:e.north,east:e.east,south:e.south,west:e.west},clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokePosition:e.strokePosition,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex}))}removeRectangle(e){return this._rectangles.get(e).then(t=>{t.setMap(null),this._rectangles.delete(e)})}setOptions(e,t){return this._rectangles.get(e).then(e=>e.setOptions(t))}getBounds(e){return this._rectangles.get(e).then(e=>e.getBounds())}setBounds(e){return this._rectangles.get(e).then(t=>t.setBounds({north:e.north,east:e.east,south:e.south,west:e.west}))}setEditable(e){return this._rectangles.get(e).then(t=>t.setEditable(e.editable))}setDraggable(e){return this._rectangles.get(e).then(t=>t.setDraggable(e.draggable))}setVisible(e){return this._rectangles.get(e).then(t=>t.setVisible(e.visible))}createEventObservable(e,t){return kb.a.create(n=>{let i=null;return this._rectangles.get(t).then(t=>{i=t.addListener(e,e=>this._zone.run(()=>n.next(e)))}),()=>{null!==i&&i.remove()}})}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Yb),o.dc(o.z))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})();var Ef;let xf=(()=>{let e=Ef=class{constructor(e,t,n,i,c){this._elem=e,this._mapsWrapper=t,this._platformId=n,this._fitBoundsService=i,this._zone=c,this.longitude=0,this.latitude=0,this.zoom=8,this.draggable=!0,this.disableDoubleClickZoom=!1,this.disableDefaultUI=!1,this.scrollwheel=!0,this.keyboardShortcuts=!0,this.styles=[],this.usePanning=!1,this.fitBounds=!1,this.scaleControl=!1,this.mapTypeControl=!1,this.panControl=!1,this.rotateControl=!1,this.fullscreenControl=!1,this.mapTypeId="roadmap",this.clickableIcons=!0,this.showDefaultInfoWindow=!0,this.gestureHandling="auto",this.tilt=0,this._observableSubscriptions=[],this.mapClick=new o.n,this.mapRightClick=new o.n,this.mapDblClick=new o.n,this.centerChange=new o.n,this.boundsChange=new o.n,this.mapTypeIdChange=new o.n,this.idle=new o.n,this.zoomChange=new o.n,this.mapReady=new o.n,this.tilesLoaded=new o.n}ngOnInit(){if(Object(x.R)(this._platformId))return;const e=this._elem.nativeElement.querySelector(".agm-map-container-inner");this._initMapInstance(e)}_initMapInstance(e){this._mapsWrapper.createMap(e,{center:{lat:this.latitude||0,lng:this.longitude||0},zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,controlSize:this.controlSize,disableDefaultUI:this.disableDefaultUI,disableDoubleClickZoom:this.disableDoubleClickZoom,scrollwheel:this.scrollwheel,backgroundColor:this.backgroundColor,draggable:this.draggable,draggableCursor:this.draggableCursor,draggingCursor:this.draggingCursor,keyboardShortcuts:this.keyboardShortcuts,styles:this.styles,zoomControl:this.zoomControl,zoomControlOptions:this.zoomControlOptions,streetViewControl:this.streetViewControl,streetViewControlOptions:this.streetViewControlOptions,scaleControl:this.scaleControl,scaleControlOptions:this.scaleControlOptions,mapTypeControl:this.mapTypeControl,mapTypeControlOptions:this.mapTypeControlOptions,panControl:this.panControl,panControlOptions:this.panControlOptions,rotateControl:this.rotateControl,rotateControlOptions:this.rotateControlOptions,fullscreenControl:this.fullscreenControl,fullscreenControlOptions:this.fullscreenControlOptions,mapTypeId:this.mapTypeId,clickableIcons:this.clickableIcons,gestureHandling:this.gestureHandling,tilt:this.tilt,restriction:this.restriction}).then(()=>this._mapsWrapper.getNativeMap()).then(e=>this.mapReady.emit(e)),this._handleMapCenterChange(),this._handleMapZoomChange(),this._handleMapMouseEvents(),this._handleBoundsChange(),this._handleMapTypeIdChange(),this._handleTilesLoadedEvent(),this._handleIdleEvent()}ngOnDestroy(){this._observableSubscriptions.forEach(e=>e.unsubscribe()),this._mapsWrapper.clearInstanceListeners(),this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe()}ngOnChanges(e){this._updateMapOptionsChanges(e),this._updatePosition(e)}_updateMapOptionsChanges(e){let t={};Object.keys(e).filter(e=>-1!==Ef._mapOptionsAttributes.indexOf(e)).forEach(n=>{t[n]=e[n].currentValue}),this._mapsWrapper.setMapOptions(t)}triggerResize(e=!0){return new Promise(t=>{setTimeout(()=>this._mapsWrapper.triggerMapEvent("resize").then(()=>{e&&(null!=this.fitBounds?this._fitBounds():this._setCenter()),t()}))})}_updatePosition(e){(null!=e.latitude||null!=e.longitude||e.fitBounds)&&("fitBounds"in e?this._fitBounds():"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._setCenter())}_setCenter(){let e={lat:this.latitude,lng:this.longitude};this.usePanning?this._mapsWrapper.panTo(e):this._mapsWrapper.setCenter(e)}_fitBounds(){switch(this.fitBounds){case!0:this._subscribeToFitBoundsUpdates();break;case!1:this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe();break;default:this._updateBounds(this.fitBounds,this.fitBoundsPadding)}}_subscribeToFitBoundsUpdates(){this._zone.runOutsideAngular(()=>{this._fitBoundsSubscription=this._fitBoundsService.getBounds$().subscribe(e=>{this._zone.run(()=>this._updateBounds(e,this.fitBoundsPadding))})})}_updateBounds(e,t){if(e){if(this._isLatLngBoundsLiteral(e)&&"undefined"!=typeof google&&google&&google.maps&&google.maps.LatLngBounds){const t=new google.maps.LatLngBounds;t.union(e),e=t}this.usePanning?this._mapsWrapper.panToBounds(e,t):this._mapsWrapper.fitBounds(e,t)}}_isLatLngBoundsLiteral(e){return null!=e&&void 0===e.extend}_handleMapCenterChange(){const e=this._mapsWrapper.subscribeToMapEvent("center_changed").subscribe(()=>{this._mapsWrapper.getCenter().then(e=>{this.latitude=e.lat(),this.longitude=e.lng(),this.centerChange.emit({lat:this.latitude,lng:this.longitude})})});this._observableSubscriptions.push(e)}_handleBoundsChange(){const e=this._mapsWrapper.subscribeToMapEvent("bounds_changed").subscribe(()=>{this._mapsWrapper.getBounds().then(e=>{this.boundsChange.emit(e)})});this._observableSubscriptions.push(e)}_handleMapTypeIdChange(){const e=this._mapsWrapper.subscribeToMapEvent("maptypeid_changed").subscribe(()=>{this._mapsWrapper.getMapTypeId().then(e=>{this.mapTypeIdChange.emit(e)})});this._observableSubscriptions.push(e)}_handleMapZoomChange(){const e=this._mapsWrapper.subscribeToMapEvent("zoom_changed").subscribe(()=>{this._mapsWrapper.getZoom().then(e=>{this.zoom=e,this.zoomChange.emit(e)})});this._observableSubscriptions.push(e)}_handleIdleEvent(){const e=this._mapsWrapper.subscribeToMapEvent("idle").subscribe(()=>{this.idle.emit(void 0)});this._observableSubscriptions.push(e)}_handleTilesLoadedEvent(){const e=this._mapsWrapper.subscribeToMapEvent("tilesloaded").subscribe(()=>this.tilesLoaded.emit(void 0));this._observableSubscriptions.push(e)}_handleMapMouseEvents(){[{name:"click",emitter:this.mapClick},{name:"rightclick",emitter:this.mapRightClick},{name:"dblclick",emitter:this.mapDblClick}].forEach(e=>{const t=this._mapsWrapper.subscribeToMapEvent(e.name).subscribe(t=>{let n={coords:{lat:t.latLng.lat(),lng:t.latLng.lng()},placeId:t.placeId};n.placeId&&!this.showDefaultInfoWindow&&t.stop(),e.emitter.emit(n)});this._observableSubscriptions.push(t)})}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(o.l),o.Pb(Yb),o.Pb(o.B),o.Pb(uf),o.Pb(o.z))},e.\u0275cmp=o.Jb({type:e,selectors:[["agm-map"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("sebm-google-map-container",!0)},inputs:{longitude:"longitude",latitude:"latitude",zoom:"zoom",draggable:["mapDraggable","draggable"],disableDoubleClickZoom:"disableDoubleClickZoom",disableDefaultUI:"disableDefaultUI",scrollwheel:"scrollwheel",keyboardShortcuts:"keyboardShortcuts",styles:"styles",usePanning:"usePanning",fitBounds:"fitBounds",scaleControl:"scaleControl",mapTypeControl:"mapTypeControl",panControl:"panControl",rotateControl:"rotateControl",fullscreenControl:"fullscreenControl",mapTypeId:"mapTypeId",clickableIcons:"clickableIcons",showDefaultInfoWindow:"showDefaultInfoWindow",gestureHandling:"gestureHandling",tilt:"tilt",minZoom:"minZoom",maxZoom:"maxZoom",controlSize:"controlSize",backgroundColor:"backgroundColor",draggableCursor:"draggableCursor",draggingCursor:"draggingCursor",zoomControl:"zoomControl",zoomControlOptions:"zoomControlOptions",streetViewControl:"streetViewControl",streetViewControlOptions:"streetViewControlOptions",fitBoundsPadding:"fitBoundsPadding",scaleControlOptions:"scaleControlOptions",mapTypeControlOptions:"mapTypeControlOptions",panControlOptions:"panControlOptions",rotateControlOptions:"rotateControlOptions",fullscreenControlOptions:"fullscreenControlOptions",restriction:"restriction"},outputs:{mapClick:"mapClick",mapRightClick:"mapRightClick",mapDblClick:"mapDblClick",centerChange:"centerChange",boundsChange:"boundsChange",mapTypeIdChange:"mapTypeIdChange",idle:"idle",zoomChange:"zoomChange",mapReady:"mapReady",tilesLoaded:"tilesLoaded"},features:[o.Ab([tf,cf,cf,uf,Yb,ff,hf,Xb,bf,Cf,Vf,Tf]),o.zb],ngContentSelectors:Jb,decls:3,vars:0,consts:[[1,"agm-map-container-inner","sebm-google-map-container-inner"],[1,"agm-map-content"]],template:function(e,t){1&e&&(o.rc(),o.Qb(0,"div",0),o.Vb(1,"div",1),o.qc(2),o.Ub())},styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"]}),e._mapOptionsAttributes=["disableDoubleClickZoom","scrollwheel","draggable","draggableCursor","draggingCursor","keyboardShortcuts","zoomControl","zoomControlOptions","styles","streetViewControl","streetViewControlOptions","zoom","mapTypeControl","mapTypeControlOptions","minZoom","maxZoom","panControl","panControlOptions","rotateControl","rotateControlOptions","fullscreenControl","fullscreenControlOptions","scaleControl","scaleControlOptions","mapTypeId","clickableIcons","gestureHandling","tilt","restriction"],e})();var Uf;let Rf=0,Df=(()=>{let e=Uf=class{constructor(e){this._markerManager=e,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.animationChange=new o.n,this.markerClick=new o.n,this.markerDblClick=new o.n,this.markerRightClick=new o.n,this.dragStart=new o.n,this.drag=new o.n,this.dragEnd=new o.n,this.mouseOver=new o.n,this.mouseOut=new o.n,this.infoWindow=new o.D,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new Pb.a(1),this._id=(Rf++).toString()}ngAfterContentInit(){this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe(()=>this.handleInfoWindowUpdate())}handleInfoWindowUpdate(){if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach(e=>{e.hostMarker=this})}ngOnChanges(e){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(e.latitude||e.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),e.title&&this._markerManager.updateTitle(this),e.label&&this._markerManager.updateLabel(this),e.draggable&&this._markerManager.updateDraggable(this),e.iconUrl&&this._markerManager.updateIcon(this),e.opacity&&this._markerManager.updateOpacity(this),e.visible&&this._markerManager.updateVisible(this),e.zIndex&&this._markerManager.updateZIndex(this),e.clickable&&this._markerManager.updateClickable(this),e.animation&&this._markerManager.updateAnimation(this)}}getFitBoundsDetails$(){return this._fitBoundsDetails$.asObservable()}_updateFitBoundsDetails(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})}_addEventListeners(){const e=this._markerManager.createEventObservable("click",this).subscribe(()=>{this.openInfoWindow&&this.infoWindow.forEach(e=>e.open()),this.markerClick.emit(this)});this._observableSubscriptions.push(e);const t=this._markerManager.createEventObservable("dblclick",this).subscribe(()=>{this.markerDblClick.emit(null)});this._observableSubscriptions.push(t);const n=this._markerManager.createEventObservable("rightclick",this).subscribe(()=>{this.markerRightClick.emit(null)});this._observableSubscriptions.push(n);const i=this._markerManager.createEventObservable("dragstart",this).subscribe(e=>{this.dragStart.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(i);const o=this._markerManager.createEventObservable("drag",this).subscribe(e=>{this.drag.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(o);const c=this._markerManager.createEventObservable("dragend",this).subscribe(e=>{this.dragEnd.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(c);const r=this._markerManager.createEventObservable("mouseover",this).subscribe(e=>{this.mouseOver.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(r);const s=this._markerManager.createEventObservable("mouseout",this).subscribe(e=>{this.mouseOut.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})});this._observableSubscriptions.push(s);const l=this._markerManager.createEventObservable("animation_changed",this).subscribe(()=>{this.animationChange.emit(this.animation)});this._observableSubscriptions.push(l)}id(){return this._id}toString(){return"AgmMarker-"+this._id.toString()}ngOnDestroy(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach(e=>e.unsubscribe())}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(bf))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-marker"]],contentQueries:function(e,t,n){var i;1&e&&o.Hb(n,pf,!1),2&e&&o.Ec(i=o.ic())&&(t.infoWindow=i)},inputs:{latitude:"latitude",longitude:"longitude",title:"title",label:"label",draggable:["markerDraggable","draggable"],iconUrl:"iconUrl",openInfoWindow:"openInfoWindow",opacity:"opacity",visible:"visible",zIndex:"zIndex",animation:"animation",clickable:["markerClickable","clickable"]},outputs:{markerClick:"markerClick",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",mouseOver:"mouseOver",mouseOut:"mouseOut",animationChange:"animationChange",markerDblClick:"markerDblClick",markerRightClick:"markerRightClick"},features:[o.Ab([{provide:af,useExisting:Object(o.T)(()=>Uf)}]),o.zb]}),e})();var Bf;let Sf=(()=>{let e=Bf=class{constructor(e){this._polygonManager=e,this.clickable=!0,this.draggable=!1,this.editable=!1,this.geodesic=!1,this.paths=[],this.polyClick=new o.n,this.polyDblClick=new o.n,this.polyDrag=new o.n,this.polyDragEnd=new o.n,this.polyDragStart=new o.n,this.polyMouseDown=new o.n,this.polyMouseMove=new o.n,this.polyMouseOut=new o.n,this.polyMouseOver=new o.n,this.polyMouseUp=new o.n,this.polyRightClick=new o.n,this.polyPathsChange=new o.n,this._polygonAddedToManager=!1,this._subscriptions=[]}ngAfterContentInit(){this._polygonAddedToManager||this._init()}ngOnChanges(e){this._polygonAddedToManager?this._polygonManager.setPolygonOptions(this,this._updatePolygonOptions(e)):this._init()}_init(){this._polygonManager.addPolygon(this),this._polygonAddedToManager=!0,this._addEventListeners()}_addEventListeners(){[{name:"click",handler:e=>this.polyClick.emit(e)},{name:"dblclick",handler:e=>this.polyDblClick.emit(e)},{name:"drag",handler:e=>this.polyDrag.emit(e)},{name:"dragend",handler:e=>this.polyDragEnd.emit(e)},{name:"dragstart",handler:e=>this.polyDragStart.emit(e)},{name:"mousedown",handler:e=>this.polyMouseDown.emit(e)},{name:"mousemove",handler:e=>this.polyMouseMove.emit(e)},{name:"mouseout",handler:e=>this.polyMouseOut.emit(e)},{name:"mouseover",handler:e=>this.polyMouseOver.emit(e)},{name:"mouseup",handler:e=>this.polyMouseUp.emit(e)},{name:"rightclick",handler:e=>this.polyRightClick.emit(e)}].forEach(e=>{const t=this._polygonManager.createEventObservable(e.name,this).subscribe(e.handler);this._subscriptions.push(t)}),this._polygonManager.createPathEventObservable(this).then(e=>{const t=e.subscribe(e=>this.polyPathsChange.emit(e));this._subscriptions.push(t)})}_updatePolygonOptions(e){return Object.keys(e).filter(e=>-1!==Bf._polygonOptionsAttributes.indexOf(e)).reduce((t,n)=>(t[n]=e[n].currentValue,t),{})}id(){return this._id}ngOnDestroy(){this._polygonManager.deletePolygon(this),this._subscriptions.forEach(e=>e.unsubscribe())}getPath(){return this._polygonManager.getPath(this)}getPaths(){return this._polygonManager.getPaths(this)}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(Cf))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-polygon"]],inputs:{clickable:"clickable",draggable:["polyDraggable","draggable"],editable:"editable",geodesic:"geodesic",paths:"paths",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight",visible:"visible",zIndex:"zIndex"},outputs:{polyClick:"polyClick",polyDblClick:"polyDblClick",polyDrag:"polyDrag",polyDragEnd:"polyDragEnd",polyDragStart:"polyDragStart",polyMouseDown:"polyMouseDown",polyMouseMove:"polyMouseMove",polyMouseOut:"polyMouseOut",polyMouseOver:"polyMouseOver",polyMouseUp:"polyMouseUp",polyRightClick:"polyRightClick",polyPathsChange:"polyPathsChange"},features:[o.zb]}),e._polygonOptionsAttributes=["clickable","draggable","editable","fillColor","fillOpacity","geodesic","icon","map","paths","strokeColor","strokeOpacity","strokeWeight","visible","zIndex","draggable","editable","visible"],e})(),kf=(()=>{let e=class{ngOnInit(){if(null==this.path)throw new Error("Icon Sequence path is required")}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Kb({type:e,selectors:[["agm-icon-sequence"]],inputs:{fixedRotation:"fixedRotation",offset:"offset",repeat:"repeat",anchorX:"anchorX",anchorY:"anchorY",fillColor:"fillColor",fillOpacity:"fillOpacity",path:"path",rotation:"rotation",scale:"scale",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight"}}),e})();var Of;let _f=(()=>{let e=Of=class{constructor(){this.positionChanged=new o.n}ngOnChanges(e){(e.latitude||e.longitude)&&this.positionChanged.emit({lat:e.latitude?e.latitude.currentValue:this.latitude,lng:e.longitude?e.longitude.currentValue:this.longitude})}getFitBoundsDetails$(){return this.positionChanged.pipe(Object(zb.a)({lat:this.latitude,lng:this.longitude}),Object(us.a)(e=>({latLng:e})))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Kb({type:e,selectors:[["agm-polyline-point"]],inputs:{latitude:"latitude",longitude:"longitude"},outputs:{positionChanged:"positionChanged"},features:[o.Ab([{provide:af,useExisting:Object(o.T)(()=>Of)}]),o.zb]}),e})();var Lf;let Af=0,Ff=(()=>{let e=Lf=class{constructor(e){this._polylineManager=e,this.clickable=!0,this.draggable=!1,this.editable=!1,this.geodesic=!1,this.visible=!0,this.lineClick=new o.n,this.lineDblClick=new o.n,this.lineDrag=new o.n,this.lineDragEnd=new o.n,this.lineDragStart=new o.n,this.lineMouseDown=new o.n,this.lineMouseMove=new o.n,this.lineMouseOut=new o.n,this.lineMouseOver=new o.n,this.lineMouseUp=new o.n,this.lineRightClick=new o.n,this.polyPathChange=new o.n,this._polylineAddedToManager=!1,this._subscriptions=[],this._id=(Af++).toString()}ngAfterContentInit(){this.points.length&&this.points.forEach(e=>{const t=e.positionChanged.subscribe(()=>{this._polylineManager.updatePolylinePoints(this)});this._subscriptions.push(t)}),this._polylineAddedToManager||this._init();const e=this.points.changes.subscribe(()=>this._polylineManager.updatePolylinePoints(this));this._subscriptions.push(e),this._polylineManager.updatePolylinePoints(this);const t=this.iconSequences.changes.subscribe(()=>this._polylineManager.updateIconSequences(this));this._subscriptions.push(t)}ngOnChanges(e){if(!this._polylineAddedToManager)return void this._init();let t={};Object.keys(e).filter(e=>-1!==Lf._polylineOptionsAttributes.indexOf(e)).forEach(n=>t[n]=e[n].currentValue),this._polylineManager.setPolylineOptions(this,t)}getPath(){return this._polylineManager.getPath(this)}_init(){this._polylineManager.addPolyline(this),this._polylineAddedToManager=!0,this._addEventListeners()}_addEventListeners(){[{name:"click",handler:e=>this.lineClick.emit(e)},{name:"dblclick",handler:e=>this.lineDblClick.emit(e)},{name:"drag",handler:e=>this.lineDrag.emit(e)},{name:"dragend",handler:e=>this.lineDragEnd.emit(e)},{name:"dragstart",handler:e=>this.lineDragStart.emit(e)},{name:"mousedown",handler:e=>this.lineMouseDown.emit(e)},{name:"mousemove",handler:e=>this.lineMouseMove.emit(e)},{name:"mouseout",handler:e=>this.lineMouseOut.emit(e)},{name:"mouseover",handler:e=>this.lineMouseOver.emit(e)},{name:"mouseup",handler:e=>this.lineMouseUp.emit(e)},{name:"rightclick",handler:e=>this.lineRightClick.emit(e)}].forEach(e=>{const t=this._polylineManager.createEventObservable(e.name,this).subscribe(e.handler);this._subscriptions.push(t)}),this._polylineManager.createPathEventObservable(this).then(e=>{const t=e.subscribe(e=>this.polyPathChange.emit(e));this._subscriptions.push(t)})}_getPoints(){return this.points?this.points.toArray():[]}_getIcons(){return this.iconSequences?this.iconSequences.toArray():[]}id(){return this._id}ngOnDestroy(){this._polylineManager.deletePolyline(this),this._subscriptions.forEach(e=>e.unsubscribe())}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(Vf))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-polyline"]],contentQueries:function(e,t,n){var i;1&e&&(o.Hb(n,_f,!1),o.Hb(n,kf,!1)),2&e&&(o.Ec(i=o.ic())&&(t.points=i),o.Ec(i=o.ic())&&(t.iconSequences=i))},inputs:{clickable:"clickable",draggable:["polylineDraggable","draggable"],editable:"editable",geodesic:"geodesic",visible:"visible",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight",zIndex:"zIndex"},outputs:{lineClick:"lineClick",lineDblClick:"lineDblClick",lineDrag:"lineDrag",lineDragEnd:"lineDragEnd",lineDragStart:"lineDragStart",lineMouseDown:"lineMouseDown",lineMouseMove:"lineMouseMove",lineMouseOut:"lineMouseOut",lineMouseOver:"lineMouseOver",lineMouseUp:"lineMouseUp",lineRightClick:"lineRightClick",polyPathChange:"polyPathChange"},features:[o.zb]}),e._polylineOptionsAttributes=["draggable","editable","visible","geodesic","strokeColor","strokeOpacity","strokeWeight","zIndex"],e})();var Pf;let Nf=(()=>{let e=Pf=class{constructor(e){this._manager=e,this.clickable=!0,this.draggable=!1,this.editable=!1,this.strokePosition="CENTER",this.strokeWeight=0,this.visible=!0,this.boundsChange=new o.n,this.rectangleClick=new o.n,this.rectangleDblClick=new o.n,this.drag=new o.n,this.dragEnd=new o.n,this.dragStart=new o.n,this.mouseDown=new o.n,this.mouseMove=new o.n,this.mouseOut=new o.n,this.mouseOver=new o.n,this.mouseUp=new o.n,this.rightClick=new o.n,this._rectangleAddedToManager=!1,this._eventSubscriptions=[]}ngOnInit(){this._manager.addRectangle(this),this._rectangleAddedToManager=!0,this._registerEventListeners()}ngOnChanges(e){this._rectangleAddedToManager&&((e.north||e.east||e.south||e.west)&&this._manager.setBounds(this),e.editable&&this._manager.setEditable(this),e.draggable&&this._manager.setDraggable(this),e.visible&&this._manager.setVisible(this),this._updateRectangleOptionsChanges(e))}_updateRectangleOptionsChanges(e){let t={},n=Object.keys(e).filter(e=>-1!==Pf._mapOptions.indexOf(e));n.forEach(n=>{t[n]=e[n].currentValue}),n.length>0&&this._manager.setOptions(this,t)}_registerEventListeners(){let e=new Map;e.set("bounds_changed",this.boundsChange),e.set("click",this.rectangleClick),e.set("dblclick",this.rectangleDblClick),e.set("drag",this.drag),e.set("dragend",this.dragEnd),e.set("dragStart",this.dragStart),e.set("mousedown",this.mouseDown),e.set("mousemove",this.mouseMove),e.set("mouseout",this.mouseOut),e.set("mouseover",this.mouseOver),e.set("mouseup",this.mouseUp),e.set("rightclick",this.rightClick),e.forEach((e,t)=>{this._eventSubscriptions.push(this._manager.createEventObservable(t,this).subscribe(n=>{switch(t){case"bounds_changed":this._manager.getBounds(this).then(t=>e.emit({north:t.getNorthEast().lat(),east:t.getNorthEast().lng(),south:t.getSouthWest().lat(),west:t.getSouthWest().lng()}));break;default:e.emit({coords:{lat:n.latLng.lat(),lng:n.latLng.lng()}})}}))})}ngOnDestroy(){this._eventSubscriptions.forEach((function(e){e.unsubscribe()})),this._eventSubscriptions=null,this._manager.removeRectangle(this)}getBounds(){return this._manager.getBounds(this)}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(Tf))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-rectangle"]],inputs:{clickable:"clickable",draggable:["rectangleDraggable","draggable"],editable:"editable",strokePosition:"strokePosition",strokeWeight:"strokeWeight",visible:"visible",north:"north",east:"east",south:"south",west:"west",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",zIndex:"zIndex"},outputs:{boundsChange:"boundsChange",rectangleClick:"rectangleClick",rectangleDblClick:"rectangleDblClick",drag:"drag",dragEnd:"dragEnd",dragStart:"dragStart",mouseDown:"mouseDown",mouseMove:"mouseMove",mouseOut:"mouseOut",mouseOver:"mouseOver",mouseUp:"mouseUp",rightClick:"rightClick"},features:[o.zb]}),e._mapOptions=["fillColor","fillOpacity","strokeColor","strokeOpacity","strokePosition","strokeWeight","visible","zIndex","clickable"],e})(),jf=0,Wf=(()=>{let e=class{constructor(e){this._manager=e,this._addedToManager=!1,this._id=(jf++).toString(),this.visible=!0}ngOnInit(){this._addedToManager||(this._manager.addTransitLayer(this,{visible:this.visible}),this._addedToManager=!0)}ngOnChanges(e){this._addedToManager&&null!=e.visible&&this._manager.toggleLayerVisibility(this,{visible:e.visible.currentValue})}id(){return this._id}toString(){return`AgmTransitLayer-${this._id.toString()}`}ngOnDestroy(){this._manager.deleteLayer(this)}};return e.\u0275fac=function(t){return new(t||e)(o.Pb(Xb))},e.\u0275dir=o.Kb({type:e,selectors:[["agm-transit-layer"]],inputs:{visible:"visible"},features:[o.zb]}),e})();class $f{getNativeWindow(){return window}}class qf{getNativeDocument(){return document}}const Qf=[$f,qf];var Hf=function(e){return e[e.HTTP=1]="HTTP",e[e.HTTPS=2]="HTTPS",e[e.AUTO=3]="AUTO",e}({});const Gf=new o.q("angular-google-maps LAZY_MAPS_API_CONFIG");let zf=(()=>{let e=class extends Kb{constructor(e=null,t,n,i){super(),this.localeId=i,this._SCRIPT_ID="agmGoogleMapsApiScript",this.callbackName="agmLazyMapsAPILoader",this._config=e||{},this._windowRef=t,this._documentRef=n}load(){const e=this._windowRef.getNativeWindow();if(e.google&&e.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;const t=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(t)return this._assignScriptLoadingPromise(t),this._scriptLoadingPromise;const n=this._documentRef.getNativeDocument().createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.id=this._SCRIPT_ID,n.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(n),this._documentRef.getNativeDocument().body.appendChild(n),this._scriptLoadingPromise}_assignScriptLoadingPromise(e){this._scriptLoadingPromise=new Promise((t,n)=>{this._windowRef.getNativeWindow()[this.callbackName]=()=>{t()},e.onerror=e=>{n(e)}})}_getScriptSrc(e){let t;switch(this._config&&this._config.protocol||Hf.HTTPS){case Hf.AUTO:t="";break;case Hf.HTTP:t="http:";break;case Hf.HTTPS:t="https:"}const n={v:this._config.apiVersion||"quarterly",callback:e,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language||"en-US"!==this.localeId?this.localeId:null};return`${t}//${this._config.hostAndPath||"maps.googleapis.com/maps/api/js"}?${Object.keys(n).filter(e=>null!=n[e]).filter(e=>!Array.isArray(n[e])||Array.isArray(n[e])&&n[e].length>0).map(e=>{let t=n[e];return Array.isArray(t)?{key:e,value:t.join(",")}:{key:e,value:n[e]}}).map(e=>`${e.key}=${e.value}`).join("&")}`}};return e.\u0275fac=function(t){return new(t||e)(o.dc(Gf,8),o.dc($f),o.dc(qf),o.dc(o.u))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),e})();var Jf;let Kf=(()=>{let e=Jf=class{static forRoot(e){return{ngModule:Jf,providers:[...Qf,{provide:Kb,useClass:zf},{provide:Gf,useValue:e}]}}};return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)}}),e})();var Yf=n("NNvV");let Xf=(()=>{class e{constructor(){this._fitBoundsDetails$=new E.a}set geoJson(e){this._geoJson=e;try{let t;if(t="max"===this.type?{lat:Object(Yf.yMax)(e),lng:Object(Yf.xMax)(e)}:{lat:Object(Yf.yMin)(e),lng:Object(Yf.xMin)(e)},!t.lat||!t.lng||Math.abs(t.lat)===1/0||Math.abs(t.lng)===1/0)return;setTimeout(()=>{this._fitBoundsDetails$.next({latLng:t})})}catch(t){}}get geoJson(){return this._geoJson}getFitBoundsDetails$(){return this._fitBoundsDetails$}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-map-bounds-fitter"]],inputs:{type:"type",geoJson:"geoJson"},features:[o.Ab([{provide:af,useExisting:Object(o.T)(()=>e)}])],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),Zf=(()=>{class e{constructor(e,t){this.workspace=e,this.translate=t,this._markForCheck=!0,this._subscriptions=new k.a,this._subscriptions.add(this.translate.onLangChange.subscribe(()=>{this.markForCheck()})),this._subscriptions.add(this.workspace.stateChanged$.subscribe({next:()=>{this._wsCalendar&&this._wsCalendar!==this.workspace.calendar&&this.markForCheck(),this._wsDateFormat&&this._wsDateFormat!==this.workspace.dateFormat&&this.markForCheck()}}))}markForCheck(){this._markForCheck=!0}ngOnDestroy(){this._subscriptions&&this._subscriptions.unsubscribe()}transform(e,t,n){return(this._markForCheck||this._isoDate!==e||this._calendar!==t||this._granularity!==n)&&(this._markForCheck=!1,this._isoDate=e,this._calendar=t,this._granularity=n,this._wsCalendar=this.workspace.calendar,this._wsDateFormat=this.workspace.dateFormat,this._formattedValue=Object(Ie.a)(e,this.workspace,this.translate,t,n)),this._formattedValue}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275pipe=o.Ob({name:"dateFormat",type:e,pure:!1}),e})();var em=n("Uqe3");let tm=(()=>{class e{transform(e,t){return Object(N.n)(e)?Object(em.a)(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Ob({name:"accounting",type:e,pure:!0}),e})();const nm=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},im=function(e,t,n){return{template:e,action:t,showAction:n}},om=function(e,t,n){return[e,t,n]};function cm(e,t){if(1&e&&o.Qb(0,"t-details",7),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(6),i=o.Fc(8),c=o.Fc(10),r=o.Fc(12);o.sc("definitionId",e.definitionId)("createFunc",e.create)("cloneFunc",e.clone)("expand",e.expand)("mode",e.mode)("additionalSelect",e.additionalSelect)("idString",e.idString)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("documentTemplate",n)("actions",o.yc(27,om,o.Ac(11,nm,i,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.Ac(17,nm,c,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.yc(23,im,r,e.onEditDefinition,e.showEditDefinition)))}}function rm(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",8),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function sm(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function lm(e,t){if(1&e&&(o.Vb(0,"h2",20),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const am=function(){return{updateOn:"blur"}};function um(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,am))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function dm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,am))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function bm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,am))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function fm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-image",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Image=t})),o.Ub()}if(2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("src",t.Id?"relations/"+i.definitionId+"/"+t.Id+"/image":null)("imageId",null==t?null:t.ImageId)("ngModel",t.Image)("isEdit",n)}}function mm(e,t){if(1&e&&(o.Vb(0,"div",23),o.Vb(1,"t-restricted",24),o.Vb(2,"div",25),o.Rc(3,fm,1,4,"t-image",26),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ImageId),o.Bb(2),o.sc("ngIf",!!e)}}function gm(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function pm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",29),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,am))}}function hm(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,gm,2,1,"div",16),o.Rc(3,pm,1,3,"t-text-editor",28),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function vm(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function Im(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,am))}}function ym(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,vm,2,1,"div",16),o.Rc(3,Im,1,3,"t-text-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function wm(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function Cm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,am))}}function Mm(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,wm,2,1,"div",16),o.Rc(3,Cm,1,3,"t-text-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Vm(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function Tm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,am))}}function Em(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",33),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Users),o.Bb(1),o.sc("itemId",t.getUserId(e)),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",t.getUserId(e),"Name")," ")}}function xm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-users-picker",34),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).model;return o.lc().setUserId(n,t)})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",t.getUserId(e))}}function Um(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Em,3,3,"t-restricted",31),o.Rc(3,xm,1,1,"t-users-picker",32),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Relation_User"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Users),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Rm(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",36),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Currency),o.Bb(1),o.sc("itemId",null==e?null:e.CurrencyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")," ")}}function Dm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",37),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CurrencyId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CurrencyId)("required",t.Currency_isRequired)}}function Bm(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Rm,3,3,"t-restricted",31),o.Rc(2,Dm,1,2,"t-currencies-picker",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Currency_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Sm(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",38),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Center),o.Bb(1),o.sc("itemId",null==e?null:e.CenterId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Center",e.CenterId,"Name")," ")}}function km(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",37),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CenterId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CenterId)("required",t.Center_isRequired)}}function Om(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Sm,3,3,"t-restricted",31),o.Rc(2,km,1,2,"t-centers-picker",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Center_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function _m(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.DateOfBirth),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.DateOfBirth))}}function Lm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.DateOfBirth=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.DateOfBirth)("ngModelOptions",o.vc(3,am))("required",t.DateOfBirth_isRequired)}}function Am(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,_m,4,4,"t-restricted",31),o.Rc(3,Lm,1,4,"t-date-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Relation_DateOfBirth"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.DateOfBirth),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Fm(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ContactEmail),o.Bb(2),o.Uc(null==e?null:e.ContactEmail)}}function Pm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ContactEmail=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ContactEmail)("ngModelOptions",o.vc(3,am))("required",t.ContactEmail_isRequired)}}function Nm(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Fm,3,2,"t-restricted",31),o.Rc(3,Pm,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Entity_ContactEmail"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactEmail),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function jm(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ContactMobile),o.Bb(2),o.Uc(null==e?null:e.ContactMobile)}}function Wm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ContactMobile=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ContactMobile)("ngModelOptions",o.vc(3,am))("required",t.ContactMobile_isRequired)}}function $m(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,jm,3,2,"t-restricted",31),o.Rc(3,Wm,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Entity_ContactMobile"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactMobile),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function qm(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ContactAddress),o.Bb(2),o.Uc(null==e?null:e.ContactAddress)}}function Qm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ContactAddress=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ContactAddress)("ngModelOptions",o.vc(3,am))("required",t.ContactAddress_isRequired)}}function Hm(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,qm,3,2,"t-restricted",31),o.Rc(3,Qm,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Entity_ContactAddress"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ContactAddress),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Gm(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup1Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup1),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup1Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup1Id,"Name")," ")}}function zm(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup1Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup1Id)("definitionId",t.Lookup1_DefinitionId)("required",t.Lookup1_isRequired)}}function Jm(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Gm,3,4,"t-restricted",31),o.Rc(2,zm,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup1Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Km(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup2Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup2),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup2Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup2Id,"Name")," ")}}function Ym(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup2Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup2Id)("definitionId",t.Lookup2_DefinitionId)("required",t.Lookup2_isRequired)}}function Xm(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Km,3,4,"t-restricted",31),o.Rc(2,Ym,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup2Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Zm(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup3Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup3),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup3Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup3Id,"Name")," ")}}function eg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup3Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup3Id)("definitionId",t.Lookup3_DefinitionId)("required",t.Lookup3_isRequired)}}function tg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Zm,3,4,"t-restricted",31),o.Rc(2,eg,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup3Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function ng(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup4Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup4),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup4Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup4Id,"Name")," ")}}function ig(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup4Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup4Id)("definitionId",t.Lookup4_DefinitionId)("required",t.Lookup4_isRequired)}}function og(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,ng,3,4,"t-restricted",31),o.Rc(2,ig,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup4Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function cg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup5Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup5),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup5Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup5Id,"Name")," ")}}function rg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup5Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup5Id)("definitionId",t.Lookup5_DefinitionId)("required",t.Lookup5_isRequired)}}function sg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,cg,3,4,"t-restricted",31),o.Rc(2,rg,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup5_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup5Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function lg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup6Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup6),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup6Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup6Id,"Name")," ")}}function ag(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup6Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup6Id)("definitionId",t.Lookup6_DefinitionId)("required",t.Lookup6_isRequired)}}function ug(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,lg,3,4,"t-restricted",31),o.Rc(2,ag,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup6_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup6Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function dg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup7Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup7),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup7Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup7Id,"Name")," ")}}function bg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup7Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup7Id)("definitionId",t.Lookup7_DefinitionId)("required",t.Lookup7_isRequired)}}function fg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,dg,3,4,"t-restricted",31),o.Rc(2,bg,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup7_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup7Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function mg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup8Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup8),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup8Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup8Id,"Name")," ")}}function gg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup8Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup8Id)("definitionId",t.Lookup8_DefinitionId)("required",t.Lookup8_isRequired)}}function pg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,mg,3,4,"t-restricted",31),o.Rc(2,gg,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup8_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup8Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function hg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Date1),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.Date1))}}function vg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Date1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Date1)("ngModelOptions",o.vc(3,am))("required",t.Date1_isRequired)}}function Ig(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,hg,4,4,"t-restricted",31),o.Rc(2,vg,1,4,"t-date-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Date1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Date1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function yg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Date2),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.Date2))}}function wg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Date2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Date2)("ngModelOptions",o.vc(3,am))("required",t.Date2_isRequired)}}function Cg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,yg,4,4,"t-restricted",31),o.Rc(2,wg,1,4,"t-date-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Date2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Date2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Mg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Date3),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.Date3))}}function Vg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Date3=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Date3)("ngModelOptions",o.vc(3,am))("required",t.Date3_isRequired)}}function Tg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Mg,4,4,"t-restricted",31),o.Rc(2,Vg,1,4,"t-date-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Date3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Date3),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Eg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Date4),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.Date4))}}function xg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Date4=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Date4)("ngModelOptions",o.vc(3,am))("required",t.Date4_isRequired)}}function Ug(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Eg,4,4,"t-restricted",31),o.Rc(2,xg,1,4,"t-date-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Date4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Date4),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Rg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal1),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Decimal1,"1.0-4"))}}function Dg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Decimal1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Decimal1)("ngModelOptions",o.vc(5,am))("required",t.Decimal1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Bg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Rg,4,5,"t-restricted",31),o.Rc(2,Dg,1,6,"t-decimal-editor",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Decimal1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Sg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal2),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Decimal2,"1.0-4"))}}function kg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Decimal2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Decimal2)("ngModelOptions",o.vc(5,am))("required",t.Decimal2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Og(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Sg,4,5,"t-restricted",31),o.Rc(2,kg,1,6,"t-decimal-editor",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Decimal2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function _g(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int1),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Int1,"1.0-0"))}}function Lg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Int1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Int1)("ngModelOptions",o.vc(5,am))("required",t.Int1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function Ag(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,_g,4,5,"t-restricted",31),o.Rc(2,Lg,1,6,"t-decimal-editor",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Int1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Fg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int2),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Int2,"1.0-0"))}}function Pg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Int2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Int2)("ngModelOptions",o.vc(5,am))("required",t.Int2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function Ng(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Fg,4,5,"t-restricted",31),o.Rc(2,Pg,1,6,"t-decimal-editor",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Int2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function jg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text1),o.Bb(2),o.Uc(null==e?null:e.Text1)}}function Wg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Text1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Text1)("ngModelOptions",o.vc(3,am))("required",t.Text1_isRequired)}}function $g(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,jg,3,2,"t-restricted",31),o.Rc(2,Wg,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Text1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function qg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text2),o.Bb(2),o.Uc(null==e?null:e.Text2)}}function Qg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Text2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Text2)("ngModelOptions",o.vc(3,am))("required",t.Text2_isRequired)}}function Hg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,qg,3,2,"t-restricted",31),o.Rc(2,Qg,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Text2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Gg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text3),o.Bb(2),o.Uc(null==e?null:e.Text3)}}function zg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Text3=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Text3)("ngModelOptions",o.vc(3,am))("required",t.Text3_isRequired)}}function Jg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Gg,3,2,"t-restricted",31),o.Rc(2,zg,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Text3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text3),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Kg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text4),o.Bb(2),o.Uc(null==e?null:e.Text4)}}function Yg(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Text4=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Text4)("ngModelOptions",o.vc(3,am))("required",t.Text4_isRequired)}}function Xg(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Kg,3,2,"t-restricted",31),o.Rc(2,Yg,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Text4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text4),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Zg(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.FromDate),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.FromDate))}}function ep(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.FromDate=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.FromDate)("ngModelOptions",o.vc(3,am))("required",t.FromDate_isRequired)}}function tp(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Zg,4,4,"t-restricted",31),o.Rc(2,ep,1,4,"t-date-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.FromDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.FromDate),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function np(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ToDate),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.ToDate))}}function ip(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ToDate=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ToDate)("ngModelOptions",o.vc(3,am))("required",t.ToDate_isRequired)}}function op(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,np,4,4,"t-restricted",31),o.Rc(2,ip,1,4,"t-date-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.ToDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ToDate),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function cp(e,t){if(1&e&&(o.Vb(0,"t-view-link",47),o.Qb(1,"t-auto-cell",48),o.Ub()),2&e){const e=o.lc(2).model;o.sc("itemId",null==e?null:e.AgentId),o.Bb(1),o.sc("entity",e)}}function rp(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-agents-picker",37),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.AgentId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.AgentId)("required",t.Agent_isRequired)}}function sp(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,cp,2,2,"t-view-link",46),o.Rc(3,rp,1,2,"t-agents-picker",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Relation_Agent"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.AgentId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function lp(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.TaxIdentificationNumber),o.Bb(2),o.Uc(null==e?null:e.TaxIdentificationNumber)}}function ap(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TaxIdentificationNumber=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.TaxIdentificationNumber)("ngModelOptions",o.vc(3,am))("required",t.TaxIdentificationNumber_isRequired)}}function up(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,lp,3,2,"t-restricted",31),o.Rc(3,ap,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Relation_TaxIdentificationNumber"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.TaxIdentificationNumber),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function dp(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.BankAccountNumber),o.Bb(2),o.Uc(null==e?null:e.BankAccountNumber)}}function bp(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.BankAccountNumber=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.BankAccountNumber)("ngModelOptions",o.vc(3,am))("required",t.BankAccountNumber_isRequired)}}function fp(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,dp,3,2,"t-restricted",31),o.Rc(3,bp,1,4,"t-text-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Relation_BankAccountNumber"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.BankAccountNumber),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function mp(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../relations/"+(null==(n=t.ws.get("Relation",e.Relation1Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Relation1),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Relation1Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",e.Relation1Id,"Name")," ")}}function gp(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",50),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Relation1Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Relation1Id)("definitionIds",t.Relation1_DefinitionIds)("required",t.Relation1_isRequired)}}function pp(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,mp,3,4,"t-restricted",31),o.Rc(2,gp,1,3,"t-relations-picker",49),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Relation1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Relation1Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function hp(e,t){if(1&e&&(o.Vb(0,"div",52),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description)}}function vp(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,hp,2,1,"div",51),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description),o.Bb(1),o.sc("ngIf",!n)}}function Ip(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Description)("ngModelOptions",o.vc(3,am))("required",t.Description_isRequired)}}function yp(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,vp,2,2,"t-restricted",31),o.Rc(3,Ip,1,4,"t-multiline-editor",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function wp(e,t){if(1&e&&(o.Vb(0,"div",52),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description2)}}function Cp(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,wp,2,1,"div",51),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description2),o.Bb(1),o.sc("ngIf",!n)}}function Mp(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description2)("ngModelOptions",o.vc(2,am))}}function Vp(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Cp,2,2,"t-restricted",31),o.Rc(3,Mp,1,3,"t-multiline-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Tp(e,t){if(1&e&&(o.Vb(0,"div",52),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description3)}}function Ep(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,Tp,2,1,"div",51),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description3),o.Bb(1),o.sc("ngIf",!n)}}function xp(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description3)("ngModelOptions",o.vc(2,am))}}function Up(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Ep,2,2,"t-restricted",31),o.Rc(3,xp,1,3,"t-multiline-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Rp(e,t){if(1&e&&(o.Vb(0,"t-form-group",53),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(3),o.Uc(o.nc(4,4,e?e.IsActive?"Active":"Inactive":""))}}function Dp(e,t){1&e&&(o.Vb(0,"span",65),o.Qb(1,"fa-icon",66),o.Tc(2,"\xa0 "),o.Ub())}function Bp(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"RelationUser_User"))}function Sp(e,t){if(1&e&&(o.Vb(0,"t-view-link",33),o.Tc(1),o.Ub()),2&e){const e=o.lc().item,t=o.lc(5);o.sc("itemId",e.UserId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.UserId,"Name")," ")}}function kp(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-users-picker",37),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.UserId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item;o.sc("ngModel",e.UserId)("required",!e.PH)}}function Op(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",70),o.Rc(1,Sp,2,2,"t-view-link",71),o.Rc(2,kp,1,2,"t-users-picker",35),o.Ub()),2&e){const e=t.item,n=o.lc(4).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.UserId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}const _p=function(){return["User"]},Lp=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Ap=function(e){return{User:e}};function Fp(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Qb(1,"t-table",67),o.Ub(),o.Rc(2,Bp,2,3,"ng-template",null,68,o.Sc),o.Rc(4,Op,3,3,"ng-template",null,69,o.Sc)),2&e){const e=o.Fc(3),t=o.Fc(5),n=o.lc(3),i=n.model,c=n.isEdit;o.Gb("p-4",1===(null==i||null==i.EntityMetadata?null:i.EntityMetadata.Users)),o.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Users),o.Bb(1),o.sc("dataSource",null==i?null:i.Users)("isEdit",c)("columnPaths",o.vc(7,_p))("columnTemplates",o.wc(11,Ap,o.xc(8,Lp,e,t)))}}function Pp(e,t){if(1&e&&(o.Vb(0,"li",64),o.Vb(1,"a",59),o.Rc(2,Dp,3,0,"span",60),o.Vb(3,"span",61),o.Tc(4),o.mc(5,"translate"),o.mc(6,"number"),o.Ub(),o.Ub(),o.Rc(7,Fp,6,13,"ng-template",62),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("ngIf",t.Users_showError(e)),o.Bb(2),o.Uc(o.nc(5,2,"Relation_Users")+(e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Users)?"":" ("+o.nc(6,4,t.Users_count(e))+")"))}}function Np(e,t){1&e&&(o.Vb(0,"span",65),o.Qb(1,"fa-icon",66),o.Tc(2,"\xa0 "),o.Ub())}function jp(e,t){if(1&e&&o.Qb(0,"agm-data-layer",87),2&e){const e=o.lc(4).model,t=o.lc();o.Pc(t.styleFunc),o.sc("geoJson",t.parseJson(null==e?null:e.LocationJson))}}function Wp(e,t){if(1&e&&(o.Vb(0,"t-error-message",88),o.Tc(1),o.Ub()),2&e){const e=o.lc(5);o.Bb(1),o.Vc(" ",e.parseJsonError," ")}}function $p(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-restricted",24),o.Vb(1,"div",73),o.Vb(2,"div",74),o.Vb(3,"textarea",75),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.LocationJson=t})),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"agm-map",76),o.hc("centerChange",(function(t){return o.Ic(e),o.lc(4).onCenterChange(t)})),o.Qb(6,"t-map-bounds-fitter",77),o.Qb(7,"t-map-bounds-fitter",78),o.Rc(8,jp,1,3,"agm-data-layer",79),o.Ub(),o.Ub(),o.Vb(9,"div",80),o.Vb(10,"label",81),o.hc("click",(function(){return o.Ic(e),o.lc(4).onView("map")})),o.mc(11,"translate"),o.Qb(12,"input",82),o.Qb(13,"fa-icon",83),o.Vb(14,"span",84),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Ub(),o.Vb(17,"label",81),o.hc("click",(function(){return o.Ic(e),o.lc(4).onView("json")})),o.mc(18,"translate"),o.Qb(19,"input",82),o.Qb(20,"fa-icon",85),o.Vb(21,"span",84),o.Tc(22),o.mc(23,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Rc(24,Wp,2,1,"t-error-message",86),o.Ub()}if(2&e){const e=o.lc(3),t=e.model,n=e.isEdit,i=o.lc();o.Gb("p-4",1===(null==t||null==t.EntityMetadata?null:t.EntityMetadata.LocationJson)),o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.LocationJson),o.Bb(2),o.Gb("d-none",!i.isView("json"))("t-hidden-cursor",!n),o.Bb(1),o.sc("readonly",!n)("placeholder",o.nc(4,34,"GeoJSON")+"...")("ngModel",t.LocationJson),o.Bb(2),o.Gb("d-none",!i.isView("map")),o.sc("latitude",i.latitude)("longitude",i.longitude)("zoom",6)("mapTypeControl",!0)("panControl",!0)("streetViewControl",!1)("fitBounds",!(null==t||!t.Id))("fitBoundsPadding",100),o.Bb(1),o.sc("agmFitBounds",!0)("geoJson",i.parseJson(null==t?null:t.LocationJson)),o.Bb(1),o.sc("agmFitBounds",!0)("geoJson",i.parseJson(null==t?null:t.LocationJson)),o.Bb(1),o.sc("ngIf",!!i.parseJson(null==t?null:t.LocationJson)),o.Bb(2),o.Gb("active",i.isView("map")),o.tc("title",o.nc(11,36,"Map")),o.Bb(5),o.Vc("\xa0\xa0",o.nc(16,38,"Map"),""),o.Bb(2),o.Gb("active",i.isView("json")),o.tc("title",o.nc(18,40,"GeoJSON")),o.Bb(5),o.Vc("\xa0\xa0",o.nc(23,42,"GeoJSON"),""),o.Bb(2),o.sc("ngIf",!!i.parseJsonError)}}function qp(e,t){if(1&e&&(o.Vb(0,"li",72),o.Vb(1,"a",59),o.Rc(2,Np,3,0,"span",60),o.Vb(3,"span",61),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Rc(6,$p,25,44,"ng-template",62),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("ngIf",t.Map_showError(e)),o.Bb(2),o.Uc(o.nc(5,2,"Entity_Location"))}}const Qp=function(e,t){return{id:e,cache_buster:t}};function Hp(e,t){if(1&e&&(o.Vb(0,"div",93),o.Qb(1,"t-report-results",94),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3).model,n=o.lc();o.Bb(1),o.sc("definition",n.reportDefinition(e))("arguments",o.xc(4,Qp,null==t?null:t.Id,null==t||null==t.EntityMetadata?null:t.EntityMetadata.$refresh))("view",n.reportView(e))("state",n.state(e))}}function Gp(e,t){if(1&e&&(o.Vb(0,"li",91),o.Vb(1,"a",92),o.Vb(2,"span",61),o.Tc(3),o.Ub(),o.Ub(),o.Rc(4,Hp,2,7,"ng-template",62),o.Ub()),2&e){const e=t.$implicit;o.lc();const n=o.Fc(3),i=o.lc(3);o.sc("ngbNavItem",e.ReportDefinitionId),o.Bb(1),o.sc("tContextMenu",n)("tContext",e.ReportDefinitionId),o.Bb(2),o.Uc(i.reportTitle(e))}}function zp(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",95),o.Vb(1,"ul",96),o.Vb(2,"li",97),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.close,c=o.lc(3).model;return o.lc().onExpandReport(n,c),i()})),o.Vb(3,"div",98),o.Qb(4,"fa-icon",99),o.Ub(),o.Vb(5,"div",100),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}2&e&&(o.Bb(6),o.Vc(" ",o.nc(7,1,"Expand")," "))}function Jp(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Gp,5,4,"li",89),o.Rc(2,zp,8,3,"ng-template",null,90,o.Sc),o.Sb()),2&e){const e=o.lc(3);o.Bb(1),o.sc("ngForOf",e.reports)}}function Kp(e,t){1&e&&(o.Vb(0,"span",65),o.Qb(1,"fa-icon",66),o.Tc(2,"\xa0 "),o.Ub())}function Yp(e,t){1&e&&(o.Vb(0,"div",106),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"NoItemsFound")))}function Xp(e,t){1&e&&(o.Vb(0,"div",122),o.Qb(1,"t-spinner",123),o.Ub())}function Zp(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",119),o.Vb(1,"button",120),o.hc("click",(function(){o.Ic(e);const t=o.lc().index,n=o.lc(4).model;return o.lc().onDownloadAttachment(n,t)})),o.Tc(2),o.Ub(),o.Rc(3,Xp,2,0,"div",121),o.Ub()}if(2&e){const e=o.lc().$implicit,t=o.lc(5);o.Bb(2),o.Uc(t.fileName(e)),o.Bb(1),o.sc("ngIf",e.downloading)}}function eh(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",124),o.Vb(1,"t-form-group",125),o.Vb(2,"t-text-editor",29),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.attachment.FileName=t})),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc().$implicit;o.Bb(1),o.sc("serverErrors",null==e.attachment||null==e.attachment.serverErrors?null:e.attachment.serverErrors.FileName),o.Bb(1),o.sc("ngModel",e.attachment.FileName)("ngModelOptions",o.vc(3,am))}}const th=function(e,t){return{0:e,1:t}};function nh(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.mc(3,"datetimeFormat"),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(5);o.Bb(1),o.Vc("",o.oc(2,1,"AttachmentAudit",o.xc(6,th,o.nc(3,4,e.attachment.CreatedAt),t.ws.getMultilingualValue("User",e.attachment.CreatedById,"Name"))),"\xa0")}}function ih(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",129),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).index,n=o.lc(4).model;return o.lc().onDownloadAttachment(n,t)})),o.mc(1,"translate"),o.Qb(2,"fa-icon",131),o.Ub()}2&e&&o.sc("title",o.nc(1,1,"Download"))}function oh(e,t){1&e&&(o.Vb(0,"div",132),o.Qb(1,"t-spinner",123),o.Ub())}function ch(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",126),o.Rc(1,ih,3,3,"button",127),o.Rc(2,oh,2,0,"ng-template",null,128,o.Sc),o.Vb(4,"button",129),o.hc("click",(function(){o.Ic(e);const t=o.lc().index,n=o.lc(4).model;return o.lc().onDeleteAttachment(n,t)})),o.mc(5,"translate"),o.Qb(6,"fa-icon",130),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(3),t=o.lc().$implicit;o.Bb(1),o.sc("ngIf",!t.downloading)("ngIfElse",e),o.Bb(3),o.sc("title",o.nc(5,3,"Delete"))}}function rh(e,t){if(1&e&&(o.Vb(0,"div",109),o.Vb(1,"div",110),o.Vb(2,"div",111),o.Qb(3,"fa-icon",112),o.Ub(),o.Vb(4,"div",113),o.Rc(5,Zp,4,2,"div",114),o.Rc(6,eh,3,4,"ng-template",null,115,o.Sc),o.Vb(8,"div",116),o.Vb(9,"div",117),o.Rc(10,nh,4,9,"span",16),o.Vb(11,"span"),o.Tc(12),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Rc(13,ch,7,5,"div",118),o.Ub(),o.Ub()),2&e){const e=t.$implicit,n=t.index,i=o.Fc(7),c=o.lc(4).isEdit,r=o.lc();o.Gb("bg-light",n%2==1e3),o.Bb(3),o.Qc("color",r.colorFromExtension(e.attachment.FileExtension)),o.sc("icon",r.iconFromExtension(e.attachment.FileExtension)),o.Bb(2),o.sc("ngIf",!c)("ngIfElse",i),o.Bb(5),o.sc("ngIf",e.attachment.CreatedById),o.Bb(2),o.Vc("(",r.size(e),")"),o.Bb(1),o.sc("ngIf",c)}}function sh(e,t){if(1&e&&(o.Vb(0,"div",107),o.Rc(1,rh,14,10,"div",108),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.sc("ngForOf",t.attachmentWrappers(e))}}function lh(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",133),o.Vb(1,"button",134),o.hc("click",(function(){return o.Ic(e),o.lc(),o.Fc(4).click()})),o.Qb(2,"fa-icon",135),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3).model;o.Bb(3),o.Vc(" \xa0\xa0",o.nc(4,1,(null==e||null==e.Attachments?null:e.Attachments.length)>0?"UploadMore":"Upload")," ")}}function ah(e,t){if(1&e){const e=o.Wb();o.Rc(0,Yp,4,3,"div",101),o.Rc(1,sh,2,1,"div",102),o.Rc(2,lh,5,3,"div",103),o.Vb(3,"input",104,105),o.hc("change",(function(){o.Ic(e);const t=o.Fc(4),n=o.lc(2).model;return o.lc().onFileSelected(t,n)})),o.Ub()}if(2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("ngIf",!(null!=t&&null!=t.Attachments&&t.Attachments.length||n)),o.Bb(1),o.sc("ngIf",!(null==t||null==t.Attachments||!t.Attachments.length)),o.Bb(1),o.sc("ngIf",n)}}function uh(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"ul",54,55),o.hc("activeIdChange",(function(t){return o.Ic(e),o.lc(2).activeTab=t})),o.Rc(3,Pp,8,6,"li",56),o.Rc(4,qp,7,4,"li",57),o.Rc(5,Jp,4,1,"ng-container",16),o.Vb(6,"li",58),o.Vb(7,"a",59),o.Rc(8,Kp,3,0,"span",60),o.Vb(9,"span",61),o.Tc(10),o.mc(11,"translate"),o.mc(12,"number"),o.Ub(),o.Ub(),o.Rc(13,ah,5,3,"ng-template",62),o.Ub(),o.Ub(),o.Qb(14,"div",63),o.Sb()}if(2&e){const e=o.Fc(2),t=o.lc(),n=t.isEdit,i=t.model,c=o.lc();o.Bb(1),o.sc("destroyOnHide",!0)("activeId",c.activeTab),o.Bb(2),o.sc("ngIf",c.Users_isVisible),o.Bb(1),o.sc("ngIf",c.Location_isVisible),o.Bb(1),o.sc("ngIf",c.showReports(n,i)),o.Bb(3),o.sc("ngIf",c.showAttachmentsErrors(i)),o.Bb(2),o.Uc(o.nc(11,8,"Relation_Attachments")+(i.Id&&2!==(null==i||null==i.EntityMetadata?null:i.EntityMetadata.Attachments)?"":" ("+o.nc(12,10,null==i||null==i.Attachments?null:i.Attachments.length)+")")),o.Bb(4),o.sc("ngbNavOutlet",e)}}function dh(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.Rc(1,lm,2,1,"h2",10),o.Rc(2,um,2,7,"t-text-editor",11),o.Rc(3,dm,2,7,"t-text-editor",12),o.Rc(4,bm,2,7,"t-text-editor",12),o.Ub(),o.Rc(5,mm,4,2,"div",13),o.Rc(6,hm,4,6,"t-form-group",14),o.Rc(7,ym,4,6,"t-form-group",14),o.Rc(8,Mm,4,6,"t-form-group",14),o.Vb(9,"t-form-group",15),o.mc(10,"translate"),o.Rc(11,Vm,2,1,"div",16),o.Rc(12,Tm,1,3,"t-text-editor",17),o.Ub(),o.Rc(13,Um,4,6,"t-form-group",14),o.Rc(14,Bm,3,4,"t-form-group",14),o.Rc(15,Om,3,4,"t-form-group",14),o.Rc(16,Am,4,6,"t-form-group",14),o.Rc(17,Nm,4,6,"t-form-group",14),o.Rc(18,$m,4,6,"t-form-group",14),o.Rc(19,Hm,4,6,"t-form-group",14),o.Rc(20,Jm,3,4,"t-form-group",14),o.Rc(21,Xm,3,4,"t-form-group",14),o.Rc(22,tg,3,4,"t-form-group",14),o.Rc(23,og,3,4,"t-form-group",14),o.Rc(24,sg,3,4,"t-form-group",14),o.Rc(25,ug,3,4,"t-form-group",14),o.Rc(26,fg,3,4,"t-form-group",14),o.Rc(27,pg,3,4,"t-form-group",14),o.Rc(28,Ig,3,4,"t-form-group",14),o.Rc(29,Cg,3,4,"t-form-group",14),o.Rc(30,Tg,3,4,"t-form-group",14),o.Rc(31,Ug,3,4,"t-form-group",14),o.Rc(32,Bg,3,4,"t-form-group",14),o.Rc(33,Og,3,4,"t-form-group",14),o.Rc(34,Ag,3,4,"t-form-group",14),o.Rc(35,Ng,3,4,"t-form-group",14),o.Rc(36,$g,3,4,"t-form-group",14),o.Rc(37,Hg,3,4,"t-form-group",14),o.Rc(38,Jg,3,4,"t-form-group",14),o.Rc(39,Xg,3,4,"t-form-group",14),o.Rc(40,tp,3,4,"t-form-group",14),o.Rc(41,op,3,4,"t-form-group",14),o.Rc(42,sp,4,6,"t-form-group",14),o.Rc(43,up,4,6,"t-form-group",14),o.Rc(44,fp,4,6,"t-form-group",14),o.Rc(45,pp,3,4,"t-form-group",14),o.Qb(46,"div",18),o.Rc(47,yp,4,6,"t-form-group",14),o.Rc(48,Vp,4,6,"t-form-group",14),o.Rc(49,Up,4,6,"t-form-group",14),o.Rc(50,Rp,5,6,"t-form-group",19),o.Rc(51,uh,15,12,"ng-container",16)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",i.Image_isVisible),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(10,51,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.User_isVisible),o.Bb(1),o.sc("ngIf",i.Currency_isVisible),o.Bb(1),o.sc("ngIf",i.Center_isVisible),o.Bb(1),o.sc("ngIf",i.DateOfBirth_isVisible),o.Bb(1),o.sc("ngIf",i.ContactEmail_isVisible),o.Bb(1),o.sc("ngIf",i.ContactMobile_isVisible),o.Bb(1),o.sc("ngIf",i.ContactAddress_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup1_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup2_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup3_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup4_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup5_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup6_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup7_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup8_isVisible),o.Bb(1),o.sc("ngIf",i.Date1_isVisible),o.Bb(1),o.sc("ngIf",i.Date2_isVisible),o.Bb(1),o.sc("ngIf",i.Date3_isVisible),o.Bb(1),o.sc("ngIf",i.Date4_isVisible),o.Bb(1),o.sc("ngIf",i.Decimal1_isVisible),o.Bb(1),o.sc("ngIf",i.Decimal2_isVisible),o.Bb(1),o.sc("ngIf",i.Int1_isVisible),o.Bb(1),o.sc("ngIf",i.Int2_isVisible),o.Bb(1),o.sc("ngIf",i.Text1_isVisible),o.Bb(1),o.sc("ngIf",i.Text2_isVisible),o.Bb(1),o.sc("ngIf",i.Text3_isVisible),o.Bb(1),o.sc("ngIf",i.Text4_isVisible),o.Bb(1),o.sc("ngIf",i.FromDate_isVisible),o.Bb(1),o.sc("ngIf",i.ToDate_isVisible),o.Bb(1),o.sc("ngIf",i.Agent_isVisible),o.Bb(1),o.sc("ngIf",i.TaxIdentificationNumber_isVisible),o.Bb(1),o.sc("ngIf",i.BankAccountNumber_isVisible),o.Bb(1),o.sc("ngIf",i.Relation1_isVisible),o.Bb(2),o.sc("ngIf",i.Description_isVisible),o.Bb(1),o.sc("ngIf",i.Description_isVisible&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.Description_isVisible&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",i.showTabs(n,e))}}function bh(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function fh(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function mh(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"EditDefinition")," ")}let gh=(()=>{class e extends gn.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.translate=n,this.router=i,this.route=o,this.relationsApi=this.api.relationsApi(null,this.notifyDestruct$),this.expand="Currency,Center,Lookup1,Lookup2,Lookup3,Lookup4,Lookup5,Lookup6,Lookup7,Lookup8,\nRelation1,Agent,Users.User,Attachments.Category,Attachments.CreatedBy",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.Users=[],e.Attachments=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Attachments=[],t.Users&&t.Users.forEach(e=>{e.Id=null,delete e.RelationId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById}),t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.relationsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.relationsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onEditDefinition=e=>{const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../../relation-definitions",this.definitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.showEditDefinition=e=>this.ws.canDo("relation-definitions","Update",null),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.styleFunc=e=>{const t={clickable:!1},n=["fillColor","fillOpacity","icon","strokeColor","shape","strokeOpacity","strokeWeight","visible"];for(const i of n){const n=e.getProperty(i);null!=n&&(t[i]=n)}return t},this.locationView="map",this.registerPristineFunc=e=>{this._pristineModel=JSON.stringify(e)},this.isDirtyFunc=e=>!!(e&&e.Attachments&&e.Attachments.some(e=>!!e.File))||this._pristineModel!==JSON.stringify(e)}set definitionId(e){this._definitionId!==e&&(this.relationsApi=this.api.relationsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`relations/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Relations[this.definitionId]:null)}get found(){return!!this.definition}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}get Currency_isVisible(){return!!this.definition.CurrencyVisibility}get Currency_isRequired(){return"Required"===this.definition.CurrencyVisibility}get Currency_label(){return this.translate.instant("Entity_Currency")}get Center_isVisible(){return!!this.definition.CenterVisibility}get Center_isRequired(){return"Required"===this.definition.CenterVisibility}get Center_label(){return this.translate.instant("Entity_Center")}get Image_isVisible(){return!!this.definition.ImageVisibility}get Description_isVisible(){return!!this.definition.DescriptionVisibility}get Description_isRequired(){return"Required"===this.definition.DescriptionVisibility}get FromDate_isVisible(){return!!this.definition.FromDateVisibility}get FromDate_isRequired(){return"Required"===this.definition.FromDateVisibility}get FromDate_label(){return this.definition.FromDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"FromDateLabel"):this.translate.instant("Entity_FromDate")}get ToDate_isVisible(){return!!this.definition.ToDateVisibility}get ToDate_isRequired(){return"Required"===this.definition.ToDateVisibility}get ToDate_label(){return this.definition.ToDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"ToDateLabel"):this.translate.instant("Entity_ToDate")}get Date1_isVisible(){return!!this.definition.Date1Visibility}get Date1_isRequired(){return"Required"===this.definition.Date1Visibility}get Date1_label(){return this.definition.Date1Label?this.ws.getMultilingualValueImmediate(this.definition,"Date1Label"):this.translate.instant("Entity_Date1")}get Date2_isVisible(){return!!this.definition.Date2Visibility}get Date2_isRequired(){return"Required"===this.definition.Date2Visibility}get Date2_label(){return this.definition.Date2Label?this.ws.getMultilingualValueImmediate(this.definition,"Date2Label"):this.translate.instant("Entity_Date2")}get Date3_isVisible(){return!!this.definition.Date3Visibility}get Date3_isRequired(){return"Required"===this.definition.Date3Visibility}get Date3_label(){return this.definition.Date3Label?this.ws.getMultilingualValueImmediate(this.definition,"Date3Label"):this.translate.instant("Entity_Date3")}get Date4_isVisible(){return!!this.definition.Date4Visibility}get Date4_isRequired(){return"Required"===this.definition.Date4Visibility}get Date4_label(){return this.definition.Date4Label?this.ws.getMultilingualValueImmediate(this.definition,"Date4Label"):this.translate.instant("Entity_Date4")}get Decimal1_isVisible(){return!!this.definition.Decimal1Visibility}get Decimal1_isRequired(){return"Required"===this.definition.Decimal1Visibility}get Decimal1_label(){return this.definition.Decimal1Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal1Label"):this.translate.instant("Entity_Decimal1")}get Decimal2_isVisible(){return!!this.definition.Decimal2Visibility}get Decimal2_isRequired(){return"Required"===this.definition.Decimal2Visibility}get Decimal2_label(){return this.definition.Decimal2Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal2Label"):this.translate.instant("Entity_Decimal2")}get Int1_isVisible(){return!!this.definition.Int1Visibility}get Int1_isRequired(){return"Required"===this.definition.Int1Visibility}get Int1_label(){return this.definition.Int1Label?this.ws.getMultilingualValueImmediate(this.definition,"Int1Label"):this.translate.instant("Entity_Int1")}get Int2_isVisible(){return!!this.definition.Int2Visibility}get Int2_isRequired(){return"Required"===this.definition.Int2Visibility}get Int2_label(){return this.definition.Int2Label?this.ws.getMultilingualValueImmediate(this.definition,"Int2Label"):this.translate.instant("Entity_Int2")}get Lookup1_isVisible(){return!!this.definition.Lookup1Visibility}get Lookup1_isRequired(){return"Required"===this.definition.Lookup1Visibility}get Lookup1_label(){return this.definition.Lookup1Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup1Label"):this.translate.instant("Entity_Lookup1")}get Lookup1_DefinitionId(){return this.definition.Lookup1DefinitionId}get Lookup2_isVisible(){return!!this.definition.Lookup2Visibility}get Lookup2_isRequired(){return"Required"===this.definition.Lookup2Visibility}get Lookup2_label(){return this.definition.Lookup2Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup2Label"):this.translate.instant("Entity_Lookup2")}get Lookup2_DefinitionId(){return this.definition.Lookup2DefinitionId}get Lookup3_isVisible(){return!!this.definition.Lookup3Visibility}get Lookup3_isRequired(){return"Required"===this.definition.Lookup3Visibility}get Lookup3_label(){return this.definition.Lookup3Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup3Label"):this.translate.instant("Entity_Lookup3")}get Lookup3_DefinitionId(){return this.definition.Lookup3DefinitionId}get Lookup4_isVisible(){return!!this.definition.Lookup4Visibility}get Lookup4_isRequired(){return"Required"===this.definition.Lookup4Visibility}get Lookup4_label(){return this.definition.Lookup4Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup4Label"):this.translate.instant("Entity_Lookup4")}get Lookup4_DefinitionId(){return this.definition.Lookup4DefinitionId}get Lookup5_isVisible(){return!!this.definition.Lookup5Visibility}get Lookup5_isRequired(){return"Required"===this.definition.Lookup5Visibility}get Lookup5_label(){return this.definition.Lookup5Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup5Label"):this.translate.instant("Entity_Lookup5")}get Lookup5_DefinitionId(){return this.definition.Lookup5DefinitionId}get Lookup6_isVisible(){return!!this.definition.Lookup6Visibility}get Lookup6_isRequired(){return"Required"===this.definition.Lookup6Visibility}get Lookup6_label(){return this.definition.Lookup6Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup6Label"):this.translate.instant("Entity_Lookup6")}get Lookup6_DefinitionId(){return this.definition.Lookup6DefinitionId}get Lookup7_isVisible(){return!!this.definition.Lookup7Visibility}get Lookup7_isRequired(){return"Required"===this.definition.Lookup7Visibility}get Lookup7_label(){return this.definition.Lookup7Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup7Label"):this.translate.instant("Entity_Lookup7")}get Lookup7_DefinitionId(){return this.definition.Lookup7DefinitionId}get Lookup8_isVisible(){return!!this.definition.Lookup8Visibility}get Lookup8_isRequired(){return"Required"===this.definition.Lookup8Visibility}get Lookup8_label(){return this.definition.Lookup8Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup8Label"):this.translate.instant("Entity_Lookup8")}get Lookup8_DefinitionId(){return this.definition.Lookup8DefinitionId}get Text1_isVisible(){return!!this.definition.Text1Visibility}get Text1_isRequired(){return"Required"===this.definition.Text1Visibility}get Text1_label(){return this.definition.Text1Label?this.ws.getMultilingualValueImmediate(this.definition,"Text1Label"):this.translate.instant("Entity_Text1")}get Text2_isVisible(){return!!this.definition.Text2Visibility}get Text2_isRequired(){return"Required"===this.definition.Text2Visibility}get Text2_label(){return this.definition.Text2Label?this.ws.getMultilingualValueImmediate(this.definition,"Text2Label"):this.translate.instant("Entity_Text2")}get Text3_isVisible(){return!!this.definition.Text3Visibility}get Text3_isRequired(){return"Required"===this.definition.Text3Visibility}get Text3_label(){return this.definition.Text3Label?this.ws.getMultilingualValueImmediate(this.definition,"Text3Label"):this.translate.instant("Entity_Text3")}get Text4_isVisible(){return!!this.definition.Text4Visibility}get Text4_isRequired(){return"Required"===this.definition.Text4Visibility}get Text4_label(){return this.definition.Text4Label?this.ws.getMultilingualValueImmediate(this.definition,"Text4Label"):this.translate.instant("Entity_Text4")}get Agent_isVisible(){return!!this.definition.AgentVisibility}get Agent_isRequired(){return"Required"===this.definition.AgentVisibility}get TaxIdentificationNumber_isVisible(){return!!this.definition.TaxIdentificationNumberVisibility}get TaxIdentificationNumber_isRequired(){return"Required"===this.definition.TaxIdentificationNumberVisibility}get Job_isVisible(){return!!this.definition.JobVisibility}get Job_isRequired(){return"Required"===this.definition.JobVisibility}get BankAccountNumber_isVisible(){return!!this.definition.BankAccountNumberVisibility}get BankAccountNumber_isRequired(){return"Required"===this.definition.BankAccountNumberVisibility}get DateOfBirth_isVisible(){return!!this.definition.DateOfBirthVisibility}get DateOfBirth_isRequired(){return"Required"===this.definition.DateOfBirthVisibility}get ContactEmail_isVisible(){return!!this.definition.ContactEmailVisibility}get ContactEmail_isRequired(){return"Required"===this.definition.ContactEmailVisibility}get ContactMobile_isVisible(){return!!this.definition.ContactMobileVisibility}get ContactMobile_isRequired(){return"Required"===this.definition.ContactMobileVisibility}get ContactAddress_isVisible(){return!!this.definition.ContactAddressVisibility}get ContactAddress_isRequired(){return"Required"===this.definition.ContactAddressVisibility}get Relation1_isVisible(){return!!this.definition.Relation1Visibility}get Relation1_isRequired(){return"Required"===this.definition.Relation1Visibility}get Relation1_label(){return this.definition.Relation1Label?this.ws.getMultilingualValueImmediate(this.definition,"Relation1Label"):this.translate.instant("Entity_Relation1")}get Relation1_DefinitionIds(){return this.definition.Relation1DefinitionId?[this.definition.Relation1DefinitionId]:[]}showTabs(e,t){return this.Users_isVisible||this.Location_isVisible||this.Attachments_isVisible||this.reports.length>0&&this.showReports(e,t)}get User_isVisible(){return"Single"===this.definition.UserCardinality}getUserId(e){if(e&&e.Users&&e.Users[0])return e.Users[0].UserId}setUserId(e,t){e&&(e.Users=t?[{UserId:t}]:[])}get Users_isVisible(){return"Multiple"===this.definition.UserCardinality}Users_count(e){return e&&e.Users?e.Users.length:0}Users_showError(e){return!!e&&!!e.Users&&e.Users.some(e=>!!e.serverErrors)}get Attachments_isVisible(){return!!this.definition.HasAttachments}Attachments_count(e){return e&&e.Attachments?e.Attachments.length:0}Attachments_showError(e){return!!e&&!!e.Users&&e.Users.some(e=>!!e.serverErrors)}get Location_isVisible(){return!!this.definition.LocationVisibility}Map_showError(e){return!!e&&!!e.serverErrors&&!!e.serverErrors.LocationJson}get zoom(){return+localStorage.map_zoom||2}set zoom(e){localStorage.map_zoom=e}get latitude(){return void 0===this._lat&&(this._lat=+localStorage.map_latitude||0),this._lat}get longitude(){return void 0===this._lng&&(this._lng=+localStorage.map_longitude||0),this._lng}onCenterChange(e){localStorage.map_latitude=e.lat,localStorage.map_longitude=e.lng}parseJson(e){if(this.parseJsonString!==(e=e||void 0))if(this.parseJsonString=e,e)try{this.parseJsonResult=JSON.parse(e),delete this.parseJsonError}catch(t){this.parseJsonError=t,delete this.parseJsonResult}else delete this.parseJsonResult,delete this.parseJsonError;return this.parseJsonResult}onView(e){this.locationView=e}isView(e){return this.locationView===e}showReports(e,t){return!!t&&!!t.Id}get reports(){return this.definition.ReportDefinitions}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}reportTitle(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}state(e){const t=`relations_details_${this.definitionId}_${e.ReportDefinitionId}`,n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new B.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}get activeTabKey(){return`relations_details_${this.definitionId}_activeTab`}get activeTab(){const e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.Users_isVisible?"users":this.Attachments_isVisible?"attachments":this.Location_isVisible?"location":this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]}set activeTab(e){this.ws.miscState[this.activeTabKey]=e}onExpandReport(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}showAttachmentsErrors(e){return!!e&&!!e.Attachments&&e.Attachments.some(e=>!!e.serverErrors)}attachmentWrappers(e){return e&&e.Attachments?(this._attachmentsAttachments!==e.Attachments&&(this._attachmentsAttachments=e.Attachments,this._attachmentsResult=e.Attachments.map(e=>({attachment:e}))),this._attachmentsResult):[]}onFileSelected(e,t){const n=this.attachmentWrappers(t).map(e=>e.file?e.file.size:0).reduce((e,t)=>e+t,0);Object(N.q)(e,n,this.translate).subscribe(e=>{t.Attachments.push(e.attachment),this.attachmentWrappers(t).push(e)},e=>{this.details.displayErrorModal(e)})}onDeleteAttachment(e,t){this.attachmentWrappers(e).splice(t,1),e.Attachments.splice(t,1)}onDownloadAttachment(e,t){const n=e.Id,i=this.attachmentWrappers(e)[t];i.attachment.Id?(i.downloading=!0,this.relationsApi.getAttachment(n,i.attachment.Id).pipe(Object(A.a)(e=>{delete i.downloading,Object(N.i)(e,this.fileName(i))}),Object(P.a)(e=>(delete i.downloading,this.details.handleActionError(e),Object(O.a)(null))),Object(ne.a)(()=>{delete i.downloading})).subscribe()):i.file&&Object(N.i)(i.file,this.fileName(i))}fileName(e){const t=e.attachment;return t.FileName&&t.FileExtension?`${t.FileName}.${t.FileExtension}`:t.FileName||(e.file?e.file.name:"Attachment")}size(e){const t=e.attachment;return Object(N.j)(t.Size||(e.file?e.file.size:null))}colorFromExtension(e){return Object(N.d)(e)}iconFromExtension(e){return Object(N.m)(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(i.e),o.Pb(i.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-relations-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[o.yb],decls:13,vars:2,consts:[["collection","Relation",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Relation",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions"],[3,"showHome"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 t-details-image-container",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"w-100"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"col-12","col-md-4","t-details-image-container"],[3,"metadata"],[1,"border"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../../users",3,"itemId"],[3,"ngModel","ngModelChange"],[3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../currencies",3,"itemId"],[3,"ngModel","required","ngModelChange"],["link","../../../centers",3,"itemId"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"ngModel","definitionId","required","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionId","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["link","../../../agents/",3,"itemId",4,"ngIf"],["link","../../../agents/",3,"itemId"],["collection","Relation","path","Agent",3,"entity"],[3,"ngModel","definitionIds","required","ngModelChange",4,"ngIf"],[3,"ngModel","definitionIds","required","ngModelChange"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[1,"t-form-group",3,"label"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","users",4,"ngIf"],["ngbNavItem","location",4,"ngIf"],["ngbNavItem","attachments"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","users"],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_User",""],["row_User",""],[1,"t-form-group",3,"serverErrors"],["link","../../../users",3,"itemId",4,"ngIf"],["ngbNavItem","location"],[2,"height","450px"],[1,"h-100","border-bottom","border-left","border-right"],["spellcheck","false",1,"form-control","t-input","p-1","h-100",2,"resize","none",3,"readonly","placeholder","ngModel","ngModelChange"],[1,"h-100",3,"latitude","longitude","zoom","mapTypeControl","panControl","streetViewControl","fitBounds","fitBoundsPadding","centerChange"],["type","max",3,"agmFitBounds","geoJson"],["type","min",3,"agmFitBounds","geoJson"],[3,"geoJson","style",4,"ngIf"],[1,"btn-group","btn-group-toggle","pt-1"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","locationView"],["icon","map-marker-alt"],[1,"d-none","d-md-inline"],["icon","code"],["style","margin-top: -40px",4,"ngIf"],[3,"geoJson"],[2,"margin-top","-40px"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"],["class","p-3 font-italic font-weight-light2 text-muted",4,"ngIf"],["class","w-100 mx-0 mb-1 p-2 p-sm-3 overflow-auto","style","max-height: 450px;",4,"ngIf"],["class","py-2 px-3 col-12 d-flex align-items-center justify-content-end",4,"ngIf"],["type","file","multiple","",1,"d-none",3,"change"],["fileInput",""],[1,"p-3","font-italic","font-weight-light2","text-muted"],[1,"w-100","mx-0","mb-1","p-2","p-sm-3","overflow-auto",2,"max-height","450px"],["class","text-nowrap",3,"bg-light",4,"ngFor","ngForOf"],[1,"text-nowrap"],[1,"border-bottom","d-flex","align-items-center"],[1,"px-3","pt-1","pb-2"],[2,"font-size","200%",3,"icon"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","px-1",2,"min-width","0px"],["class","d-flex align-items-stretch","style","max-width: 750px;",4,"ngIf","ngIfElse"],["editAttachment",""],[1,"d-flex","align-items-stretch"],[1,"flex-grow-1","small","text-muted","text-truncate",2,"min-width","0px"],["class","mx-1",4,"ngIf"],[1,"d-flex","align-items-stretch",2,"max-width","750px"],["type","button",1,"btn","btn-link","p-0","text-primary","border-top-0","border-left-0","border-right-0","text-truncate",3,"click"],["class","mx-2 flex-grow-1","style","min-width: 0;",4,"ngIf"],[1,"mx-2","flex-grow-1",2,"min-width","0"],[1,"text-black"],[2,"max-width","500px"],[3,"serverErrors"],[1,"mx-1"],["class","btn btn-sm text-primary p-0 px-1 t-toolbar-button btn-light t-white-button",3,"title","click",4,"ngIf","ngIfElse"],["spinner",""],[1,"btn","btn-sm","text-primary","p-0","px-1","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","trash"],["icon","download"],[1,"px-1","t-toolbar-button","d-inline","t-vertical-align-middle"],[1,"py-2","px-3","col-12","d-flex","align-items-center","justify-content-end"],[1,"btn","btn-sm","btn-primary","text-primary2","btn-light2","t-white-button2",3,"click"],["icon","upload"]],template:function(e,t){if(1&e&&(o.Rc(0,cm,1,31,"t-details",0),o.Rc(1,rm,1,1,"ng-template",null,1,o.Sc),o.Rc(3,sm,2,1,"ng-template",null,2,o.Sc),o.Rc(5,dh,52,53,"ng-template",null,3,o.Sc),o.Rc(7,bh,2,3,"ng-template",null,4,o.Sc),o.Rc(9,fh,2,3,"ng-template",null,5,o.Sc),o.Rc(11,mh,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,j.a,nn,pe.a,he.a,te.u,te.k,te.n,pn.a,be,ss,Ba,Du,Ou,Nu,Fd,In,ge.a,Vb,Ub,Bb,K.v,K.x,K.y,K.w,K.A,ee.b,Ps.a,Ns.a,te.c,xf,Xf,df,lf,ve.a,x.t,fe.a,is,me.a],pipes:[Q.d,Zf,tm,x.g,we],encapsulation:2}),e})();function ph(e,t){if(1&e&&(o.Vb(0,"div",9),o.Vb(1,"span",10),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",11),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("Role",e,"Name")),o.Bb(3),o.Uc(n.c[e].Code)}}function hh(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Role"),"\n")}function vh(e,t){if(1&e&&(o.Vb(0,"span",12),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.ws.getMultilingualValue("Role",e,"Name"))}}function Ih(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function yh(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function wh(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SavedByMe")," ")}function Ch(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Public")," ")}function Mh(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"NotPublic")," ")}const Vh=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},Th=function(e,t){return[e,t]},Eh=function(e){return{template:e,expression:"SavedById eq me"}},xh=function(e){return[e]},Uh=function(e){return{template:e,expression:"IsPublic eq true"}},Rh=function(e){return{template:e,expression:"IsPublic eq false"}},Dh=function(e,t){return{SavedBy:e,IsPublic:t}};let Bh=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.rolesApi=this.api.rolesApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.rolesApi.activate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.rolesApi.deactivate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("roles","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.rolesApi=this.api.rolesApi(this.notifyDestruct$)}get c(){return this.ws.Role}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-roles-master"]],features:[o.yb],decls:18,vars:39,consts:[["collection","Role","selectForTiles","Code","selectDefault","Code,IsPublic,IsActive",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["savedByMe",""],["isPublic",""],["isNotPublic",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,ph,6,2,"ng-template",null,1,o.Sc),o.Rc(4,hh,2,3,"ng-template",null,2,o.Sc),o.Rc(6,vh,2,1,"ng-template",null,3,o.Sc),o.Rc(8,Ih,2,3,"ng-template",null,4,o.Sc),o.Rc(10,yh,2,3,"ng-template",null,5,o.Sc),o.Rc(12,wh,2,3,"ng-template",null,6,o.Sc),o.Rc(14,Ch,2,3,"ng-template",null,7,o.Sc),o.Rc(16,Mh,2,3,"ng-template",null,8,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"Roles"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(22,Th,o.zc(12,Vh,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(17,Vh,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.xc(36,Dh,o.wc(27,xh,o.wc(25,Eh,s)),o.xc(33,Th,o.wc(29,Uh,l),o.wc(31,Rh,a))))}},directives:[Rt.a],pipes:[Q.d],encapsulation:2}),e})();var Sh=n("U6XH"),kh=n("gQLD"),Oh=n("Jfee"),_h=n("tHLm"),Lh=n("03Gx"),Ah=n("yG3f"),Fh=n("GfJL");function Ph(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function Nh(e,t){if(1&e&&(o.Vb(0,"h2",20),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const jh=function(){return{updateOn:"blur"}};function Wh(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,jh))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function $h(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,jh))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function qh(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,jh))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Qh(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function Hh(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,jh))}}function Gh(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Qh,2,1,"div",11),o.Rc(3,Hh,1,3,"t-text-editor",23),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function zh(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function Jh(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,jh))}}function Kh(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,zh,2,1,"div",11),o.Rc(3,Jh,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Yh(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function Xh(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,jh))}}function Zh(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Yh,2,1,"div",11),o.Rc(3,Xh,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function ev(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function tv(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,jh))}}function nv(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(o.nc(2,1,null!=e&&e.IsPublic?"Yes":"No"))}}function iv(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",28),o.Vb(1,"input",29),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.IsPublic=t})),o.Ub(),o.Vb(2,"label",30),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(1),o.sc("ngModel",e.IsPublic)}}function ov(e,t){if(1&e&&(o.Vb(0,"t-form-group",26),o.mc(1,"translate"),o.Rc(2,nv,3,3,"div",11),o.Rc(3,iv,4,1,"div",27),o.Ub()),2&e){const e=o.lc().isEdit;o.sc("label",o.nc(1,3,"Role_IsPublic")),o.Bb(2),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function cv(e,t){if(1&e&&(o.Vb(0,"t-form-group",26),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(3),o.Uc(o.nc(4,4,e?e.IsActive?"Active":"Inactive":""))}}function rv(e,t){1&e&&(o.Vb(0,"t-warning-message",31),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"PublicRoleWarning")," "))}function sv(e,t){1&e&&(o.Vb(0,"span",37),o.Qb(1,"fa-icon",38),o.Tc(2,"\xa0 "),o.Ub())}function lv(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Permission_View"))}function av(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().item,t=o.lc(4);o.Bb(1),o.Vc(" ",t.permissionViewLookup(e.View)," ")}}function uv(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",53),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.View=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(),n=t.item,i=t.update,c=o.lc(4);return i.call(null,n),c.onPermissionChanged(n)})),o.Ub()}if(2&e){const e=o.lc().item,t=o.lc(4);o.sc("choices",t.permissionViewChoices)("ngModel",e.View)("required",!e.PH)}}function dv(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",51),o.Rc(1,av,2,1,"div",11),o.Rc(2,uv,1,3,"t-selector",52),o.Ub()),2&e){const e=t.item,n=o.lc(3).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.View),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function bv(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Permission_Action"))}function fv(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc().item,t=o.lc(4);o.Bb(1),o.Uc(o.nc(2,1,t.permissionActionLookup(null==e?null:e.Action)))}}function mv(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",55),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.Action=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(),n=t.item,i=t.update,c=o.lc(4);return i.call(null,n),c.onPermissionChanged(n)})),o.Ub()}if(2&e){const e=o.lc().item,t=o.lc(4);o.sc("ngModel",e.Action)("required",!e.PH)("ngModelOptions",o.vc(5,jh))("choices",t.permissionActionChoices(e))("disabled",!e.View)}}function gv(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",51),o.Rc(1,fv,3,3,"div",11),o.Rc(2,mv,1,6,"t-selector",54),o.Ub()),2&e){const e=t.item,n=o.lc(3).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Action),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function pv(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Permission_Criteria"))}function hv(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().item;o.Bb(1),o.Uc(e.Criteria)}}function vv(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",57),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.Criteria=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item,t=o.lc(4);o.sc("ngModel",e.Criteria)("ngModelOptions",o.vc(3,jh))("disabled",t.disableCriteria(e))}}function Iv(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",51),o.Rc(1,hv,2,1,"div",11),o.Rc(2,vv,1,4,"t-text-editor",56),o.Ub()),2&e){const e=t.item,n=o.lc(3).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Criteria),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function yv(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Permission_Mask"))}function wv(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().item;o.Bb(1),o.Uc(e.Mask)}}function Cv(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",57),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.Mask=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item,t=o.lc(4);o.sc("ngModel",e.Mask)("ngModelOptions",o.vc(3,jh))("disabled",t.disableMask(e))}}function Mv(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",51),o.Rc(1,wv,2,1,"div",11),o.Rc(2,Cv,1,4,"t-text-editor",56),o.Ub()),2&e){const e=t.item,n=o.lc(3).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Mask),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Vv(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Memo"))}function Tv(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().item;o.Bb(1),o.Uc(e.Memo)}}function Ev(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.Memo=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item;o.sc("ngModel",e.Memo)("ngModelOptions",o.vc(2,jh))}}function xv(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",51),o.Rc(1,Tv,2,1,"div",11),o.Rc(2,Ev,1,3,"t-text-editor",12),o.Ub()),2&e){const e=t.item,n=o.lc(3).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Memo),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}const Uv=function(){return["View","Action","Criteria","Memo"]},Rv=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},Dv=function(e,t,n,i,o){return{View:e,Action:t,Criteria:n,Mask:i,Memo:o}};function Bv(e,t){if(1&e&&(o.Vb(0,"t-restricted",39),o.Qb(1,"t-table",40),o.Ub(),o.Rc(2,lv,2,3,"ng-template",null,41,o.Sc),o.Rc(4,dv,3,3,"ng-template",null,42,o.Sc),o.Rc(6,bv,2,3,"ng-template",null,43,o.Sc),o.Rc(8,gv,3,3,"ng-template",null,44,o.Sc),o.Rc(10,pv,2,3,"ng-template",null,45,o.Sc),o.Rc(12,Iv,3,3,"ng-template",null,46,o.Sc),o.Rc(14,yv,2,3,"ng-template",null,47,o.Sc),o.Rc(16,Mv,3,3,"ng-template",null,48,o.Sc),o.Rc(18,Vv,2,3,"ng-template",null,49,o.Sc),o.Rc(20,xv,3,3,"ng-template",null,50,o.Sc)),2&e){const e=o.Fc(3),t=o.Fc(5),n=o.Fc(7),i=o.Fc(9),c=o.Fc(11),r=o.Fc(13),s=o.Fc(15),l=o.Fc(17),a=o.Fc(19),u=o.Fc(21),d=o.lc(2),b=d.model,f=d.isEdit;o.Gb("p-4",1===(null==b||null==b.EntityMetadata?null:b.EntityMetadata.Permissions)),o.sc("metadata",null==b||null==b.EntityMetadata?null:b.EntityMetadata.Permissions),o.Bb(1),o.sc("dataSource",null==b?null:b.Permissions)("isEdit",f)("columnPaths",o.vc(7,Uv))("columnTemplates",o.Ac(23,Dv,o.xc(8,Rv,e,t),o.xc(11,Rv,n,i),o.xc(14,Rv,c,r),o.xc(17,Rv,s,l),o.xc(20,Rv,a,u)))}}function Sv(e,t){if(1&e&&(o.Vb(0,"li",32),o.Vb(1,"a",33),o.Rc(2,sv,3,0,"span",34),o.Vb(3,"span",35),o.Tc(4),o.mc(5,"translate"),o.mc(6,"number"),o.Ub(),o.Ub(),o.Rc(7,Bv,22,29,"ng-template",36),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(2),o.sc("ngIf",t.showPermissionsError(e)),o.Bb(2),o.Uc(o.nc(5,2,"Permissions")+(e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Permissions)?"":" ("+o.nc(6,4,t.permissionsCount(e))+")"))}}function kv(e,t){1&e&&(o.Vb(0,"span",37),o.Qb(1,"fa-icon",38),o.Tc(2,"\xa0 "),o.Ub())}function Ov(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"RoleMembership_User"))}function _v(e,t){if(1&e&&(o.Vb(0,"t-view-link",63),o.Tc(1),o.Ub()),2&e){const e=o.lc().item,t=o.lc(4);o.sc("itemId",null==e?null:e.UserId),o.Bb(1),o.Vc(" ",t.getMultilingualValue(t.ws.User[e.UserId],"Name",t.ws)," ")}}function Lv(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-users-picker",64),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.UserId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item;o.sc("ngModel",e.UserId)("showRoles",!1)("required",!e.PH)}}function Av(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",51),o.Rc(1,_v,2,2,"t-view-link",61),o.Rc(2,Lv,1,3,"t-users-picker",62),o.Ub()),2&e){const e=t.item,n=o.lc(3).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.UserId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Fv(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Memo"))}function Pv(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().item;o.Bb(1),o.Uc(e.Memo)}}function Nv(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.Memo=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item;o.sc("ngModel",e.Memo)("ngModelOptions",o.vc(2,jh))}}function jv(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",51),o.Rc(1,Pv,2,1,"div",11),o.Rc(2,Nv,1,3,"t-text-editor",12),o.Ub()),2&e){const e=t.item,n=o.lc(3).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Memo),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}const Wv=function(){return["UserId","Memo"]},$v=function(e,t){return{UserId:e,Memo:t}};function qv(e,t){if(1&e&&(o.Vb(0,"t-restricted",39),o.Qb(1,"t-table",40),o.Ub(),o.Rc(2,Ov,2,3,"ng-template",null,59,o.Sc),o.Rc(4,Av,3,3,"ng-template",null,60,o.Sc),o.Rc(6,Fv,2,3,"ng-template",null,49,o.Sc),o.Rc(8,jv,3,3,"ng-template",null,50,o.Sc)),2&e){const e=o.Fc(3),t=o.Fc(5),n=o.Fc(7),i=o.Fc(9),c=o.lc(2),r=c.model,s=c.isEdit;o.Gb("p-4",1===(null==r||null==r.EntityMetadata?null:r.EntityMetadata.Members)),o.sc("metadata",null==r||null==r.EntityMetadata?null:r.EntityMetadata.Members),o.Bb(1),o.sc("dataSource",null==r?null:r.Members)("isEdit",s)("columnPaths",o.vc(7,Wv))("columnTemplates",o.xc(14,$v,o.xc(8,Rv,e,t),o.xc(11,Rv,n,i)))}}function Qv(e,t){if(1&e&&(o.Vb(0,"li",58),o.Vb(1,"a",33),o.Rc(2,kv,3,0,"span",34),o.Vb(3,"span",35),o.Tc(4),o.mc(5,"translate"),o.mc(6,"number"),o.Ub(),o.Ub(),o.Rc(7,qv,10,17,"ng-template",36),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(2),o.sc("ngIf",t.showMembersError(e)),o.Bb(2),o.Uc(o.nc(5,2,"Members")+(e.Id&&2!=(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Members)?"":" ("+o.nc(6,4,t.membersCount(e))+")"))}}function Hv(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,Nh,2,1,"h2",6),o.Rc(2,Wh,2,7,"t-text-editor",7),o.Rc(3,$h,2,7,"t-text-editor",8),o.Rc(4,qh,2,7,"t-text-editor",8),o.Ub(),o.Rc(5,Gh,4,6,"t-form-group",9),o.Rc(6,Kh,4,6,"t-form-group",9),o.Rc(7,Zh,4,6,"t-form-group",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Rc(10,ev,2,1,"div",11),o.Rc(11,tv,1,3,"t-text-editor",12),o.Ub(),o.Rc(12,ov,4,5,"t-form-group",13),o.Rc(13,cv,5,6,"t-form-group",13),o.Rc(14,rv,3,3,"t-warning-message",14),o.Vb(15,"ul",15,16),o.Rc(17,Sv,8,6,"li",17),o.Rc(18,Qv,8,6,"li",18),o.Ub(),o.Qb(19,"div",19)),2&e){const e=t.model,n=t.isEdit,i=o.Fc(16),c=o.lc();o.sc("serverErrors",c.getMultilingualValue(null==e?null:e.serverErrors,"Name",c.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&c.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&c.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&c.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!c.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!c.ws.isSecondaryLanguage&&c.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!c.ws.isTernaryLanguage&&c.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,19,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",c.showIsPublic),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",c.showPublicRoleWarning(e)),o.Bb(1),o.sc("destroyOnHide",!0),o.Bb(2),o.sc("ngIf",c.showPermissions),o.Bb(1),o.sc("ngIf",c.showMembersTab(e)),o.Bb(1),o.sc("ngbNavOutlet",i)}}function Gv(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function zv(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const Jv=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},Kv=function(e,t){return[e,t]};let Yv=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.showMembers=!0,this.showPermissions=!0,this.showIsPublic=!0,this._permissionActionChoices={},this._viewsDb=null,this._currentViewsDb=null,this._viewsForSelector=null,this.rolesApi=this.api.rolesApi(this.notifyDestruct$),this.expand="Permissions,Members.User",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsPublic=!1,e.Permissions=[],e.Members=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Permissions&&t.Permissions.forEach(e=>{e.Id=null,delete e.RoleId}),t.Members&&t.Members.forEach(e=>{e.Id=null,delete e.RoleId}),t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.rolesApi.activate([e.Id],{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.rolesApi.deactivate([e.Id],{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("roles","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.permissionViewLookup=e=>e?this.viewsDb[e]?this.viewsDb[e].name():(console.error(`missing view ${e}`),""):"",this.rolesApi=this.api.rolesApi(this.notifyDestruct$)}permissionActionChoices(e){if(!e.View)return[];if(!this._permissionActionChoices[e.View]){const t=this.viewsDb[e.View];this._permissionActionChoices[e.View]=t&&t.actions?Object.keys(t.actions).map(e=>({name:()=>this.translate.instant(Sh.a[e]),value:e})):[]}return this._permissionActionChoices[e.View]}permissionActionLookup(e){return e?"All"===e?"View_All":Sh.a[e]:""}disableCriteria(e){if(!e||!e.View||!e.Action)return!0;const t=this.viewsDb[e.View];if(t&&t.actions){const n=t.actions[e.Action];return!(n&&n.supportsCriteria)}return!0}disableMask(e){if(!e||!e.View||!e.Action)return!0;const t=this.viewsDb[e.View];if(t&&t.actions){const n=t.actions[e.Action];return!(n&&n.supportsMask)}return!0}onPermissionChanged(e){const t=this.permissionActionChoices(e);1===t.length?e.Action=t[0].value:e.Action&&t.every(t=>t.value!==e.Action)&&(e.Action=null),this.disableMask(e)&&(e.Mask=null),this.disableCriteria(e)&&(e.Criteria=null)}get ws(){return this.workspace.currentTenant}permissionsCount(e){return e&&e.Permissions?e.Permissions.length:0}membersCount(e){return e&&e.Members?e.Members.length:0}showMembersTab(e){return this.showMembers&&(!e||!e.IsPublic)}showPublicRoleWarning(e){return!e||e.IsPublic}showPermissionsError(e){return!!e&&!!e.Permissions&&e.Permissions.some(e=>!!e.serverErrors)}showMembersError(e){return!!e&&!!e.Members&&e.Members.some(e=>!!e.serverErrors)}get viewsDb(){if(this._currentLang!==this.translate.currentLang||this._currentDefinition!==this.ws.definitions){this._currentLang=this.translate.currentLang,this._currentDefinition=this.ws.definitions,this._viewsDb={};for(const c of Object.keys(Sh.c)){const e=Sh.c[c],t={name:()=>this.translate.instant(e.name),actions:{}};t.actions.All={supportsCriteria:!1,supportsMask:!1},e.read&&(t.actions.Read={supportsCriteria:!0,supportsMask:!0}),e.update&&(t.actions.Update={supportsCriteria:!0,supportsMask:!0}),e.delete&&(t.actions.Delete={supportsCriteria:!0,supportsMask:!1});for(const n of e.actions)t.actions[n.action]={supportsCriteria:n.criteria,supportsMask:!1};this._viewsDb[c]=t}const e=this.ws.definitions.Lookups;for(const c of Object.keys(e).map(e=>+e)){const e=Object(kh.a)(this.workspace,this.translate,c);e?this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error(`Could not find lookup definitionId '${c}'`)}const t=this.ws.definitions.Relations;for(const c of Object.keys(t).map(e=>+e)){const e=Object(_h.a)(this.workspace,this.translate,c);e?this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error(`Could not find relation definitionId '${c}'`)}const n=this.ws.definitions.Custodies;for(const c of Object.keys(n).map(e=>+e)){const e=Object(Ah.a)(this.workspace,this.translate,c);e?this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error(`Could not find custody definitionId '${c}'`)}const i=this.ws.definitions.Resources;for(const c of Object.keys(i).map(e=>+e)){const e=Object(Oh.a)(this.workspace,this.translate,c);e?this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},IsActive:{supportsCriteria:!0,supportsMask:!1}}}:console.error(`Could not find resource definitionId '${c}'`)}const o=this.ws.definitions.Documents;for(const c of Object.keys(o).map(e=>+e)){const e=Object(Lh.c)(this.workspace,this.translate,c);e&&(this._viewsDb[e.apiEndpoint]={name:e.titlePlural,actions:{All:{supportsCriteria:!1,supportsMask:!1},Read:{supportsCriteria:!0,supportsMask:!0},Update:{supportsCriteria:!0,supportsMask:!0},Delete:{supportsCriteria:!0,supportsMask:!1},State:{supportsCriteria:!0,supportsMask:!1}}})}}return this._viewsDb}get permissionViewChoices(){if(this._currentViewsDb!==this.viewsDb){const e=this.viewsDb;this._currentViewsDb=e,this._viewsForSelector=Object.keys(e).map(t=>({value:t,name:e[t].name})),this._viewsForSelector.sort((e,t)=>e.name()<t.name()?-1:e.name()>t.name()?1:0)}return this._viewsForSelector}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-roles-details"]],inputs:{showMembers:"showMembers",showPermissions:"showPermissions",showIsPublic:"showIsPublic"},features:[o.yb],decls:10,vars:27,consts:[["collection","Role",3,"expand","createFunc","cloneFunc","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["class","pt-3 pt-sm-4 w-100",4,"ngIf"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","permissions",4,"ngIf"],["ngbNavItem","members",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isPublic",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isPublic",1,"custom-control-label","t-pointer"],[1,"pt-3","pt-sm-4","w-100"],["ngbNavItem","permissions"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"metadata"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_View",""],["row_View",""],["header_Action",""],["row_Action",""],["header_Criteria",""],["row_Criteria",""],["header_Mask",""],["row_Mask",""],["header_Memo",""],["row_Memo",""],[1,"t-form-group",3,"serverErrors"],[3,"choices","ngModel","required","ngModelChange",4,"ngIf"],[3,"choices","ngModel","required","ngModelChange"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","required","ngModelOptions","choices","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],["ngbNavItem","members"],["header_UserId",""],["row_UserId",""],["link","../../users",3,"itemId",4,"ngIf"],[3,"ngModel","showRoles","required","ngModelChange",4,"ngIf"],["link","../../users",3,"itemId"],[3,"ngModel","showRoles","required","ngModelChange"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,Ph,2,1,"ng-template",null,1,o.Sc),o.Rc(4,Hv,20,21,"ng-template",null,2,o.Sc),o.Rc(6,Gv,2,3,"ng-template",null,3,o.Sc),o.Rc(8,zv,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("expand",t.expand)("createFunc",t.create)("cloneFunc",t.clone)("mode",t.mode)("additionalSelect",t.additionalSelect)("idString",t.idString)("masterCrumb",o.nc(1,10,"Roles"))("detailsCrumb",e)("documentTemplate",n)("actions",o.xc(24,Kv,o.Ac(12,Jv,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(18,Jv,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,K.v,K.A,he.a,te.u,te.k,te.n,te.a,Fh.a,K.x,K.y,K.w,ee.b,pn.a,Ps.a,Ns.a,hn.a,ss,Ba],pipes:[Q.d,x.g],encapsulation:2}),e})();const Xv=["errorModal"],Zv=["unsavedChangesModal"];function eI(e,t){1&e&&(o.Vb(0,"span",14),o.Tc(1,"\xa0*"),o.Ub())}function tI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div"),o.Vb(1,"div",15),o.Vb(2,"button",16),o.hc("click",(function(){return o.Ic(e),o.lc().onEdit()})),o.Qb(3,"fa-icon",17),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(1),o.sc("placement",e.placement)("ngbTooltip",e.editTooltip),o.Bb(1),o.sc("disabled",!e.canEdit),o.Bb(2),o.Vc("\xa0\xa0",o.nc(5,4,"Edit")," ")}}function nI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div"),o.Vb(1,"button",18),o.hc("click",(function(){return o.Ic(e),o.lc().onSave()})),o.Qb(2,"fa-icon",19),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",20),o.hc("click",(function(){return o.Ic(e),o.lc().onCancel()})),o.Qb(6,"fa-icon",21),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Ub()}2&e&&(o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,2,"Save")," "),o.Bb(4),o.Vc("\xa0\xa0",o.nc(8,4,"Cancel")," "))}function iI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",22),o.hc("click",(function(){return o.Ic(e),o.lc().onRefresh()})),o.mc(1,"translate"),o.Qb(2,"fa-icon",23),o.Ub()}2&e&&o.tc("title",o.nc(1,1,"Refresh"))}function oI(e,t){1&e&&o.Rb(0)}const cI=function(e,t){return{model:e,isEdit:t}};function rI(e,t){if(1&e&&(o.Vb(0,"div",24),o.Rc(1,oI,1,0,"ng-container",25),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.sc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",o.xc(2,cI,e.activeModel,e.isEdit))}}function sI(e,t){1&e&&(o.Vb(0,"div",26),o.Vb(1,"div",27),o.Qb(2,"t-spinner",28),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.sc("scale",2))}function lI(e,t){if(1&e&&(o.Vb(0,"div",26),o.Vb(1,"t-error-message"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.Vc(" ",e.errorMessage," ")}}function aI(e,t){if(1&e&&(o.Vb(0,"div",29),o.Vb(1,"h5",30),o.Qb(2,"fa-icon",31),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",32),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(6,"span",33),o.Tc(7,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",34),o.Tc(9),o.Ub(),o.Vb(10,"div",35),o.Vb(11,"button",36),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(12,"fa-icon",21),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,3,"Error")," "),o.Bb(6),o.Vc(" ",e.modalErrorMessage," "),o.Bb(4),o.Vc(" \xa0",o.nc(14,5,"Dismiss")," ")}}function uI(e,t){1&e&&(o.Vb(0,"div",29),o.Vb(1,"h5",30),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",32),o.hc("click",(function(){return t.$implicit.dismiss(!1)})),o.Vb(5,"span",33),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",34),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Vb(10,"div",35),o.Vb(11,"button",37),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(12,"fa-icon",38),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Vb(15,"button",39),o.hc("click",(function(){return t.$implicit.close(!1)})),o.Qb(16,"fa-icon",21),o.Tc(17),o.mc(18,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Vc(" ",o.nc(3,4,"Confirmation")," "),o.Bb(6),o.Vc(" ",o.nc(9,6,"UnsavedChangesConfirmationMessage")," "),o.Bb(5),o.Vc(" \xa0",o.nc(14,8,"Proceed")," "),o.Bb(4),o.Vc(" \xa0",o.nc(18,10,"Cancel")," "))}let dI=(()=>{class e{constructor(e,t,n,i,o){this.workspace=e,this.api=t,this.storage=n,this.modalService=i,this.translate=o,this.notifyDestruct$=new E.a,this.crud=this.api.settingsFactory("",this.notifyDestruct$),this._unboundServerErrors=[],this.notifyFetch$=new E.a,this.notifyFetch$.pipe(Object(_.a)(()=>this.doFetch())).subscribe()}doSomething(e){this.isDirty&&(e.returnValue=this.translate.instant("UnsavedChangesConfirmationMessage"))}displayModalError(e){this._modalErrorMessage=e,this.modalService.open(this.errorModal)}ngOnInit(){this.clearErrors(),this.crud=this.api.settingsFactory(this.endpoint,this.notifyDestruct$),this.fetch()}ngOnDestroy(){this.notifyDestruct$.next()}canDeactivate(){if(this.isDirty){const e=this.modalService.open(this.unsavedChangesModal),t=new E.a;return e.result.then(e=>{t.next(e),t.complete()},e=>{t.next(!1),t.complete()}),t}return!0}clearErrors(){this._errorMessage=null,this._modalErrorMessage=null,this._unboundServerErrors=[]}fetch(){this.notifyFetch$.next(null)}doFetch(){return this.clearErrors(),this.detailsStatus=B.c.loading,this.crud.get({expand:this.expand}).pipe(Object(A.a)(e=>{this._viewModel=e.Result,Object(N.o)(e.RelatedEntities,this.workspace),this.workspace.notifyStateChanged(),this.detailsStatus=B.c.loaded}),Object(P.a)(e=>(this.detailsStatus=B.c.error,this._errorMessage=e.error,Object(O.a)(null))))}get isDirty(){return this.isEdit&&this._viewModelJson!==JSON.stringify(this._editModel)}get isEdit(){return this.detailsStatus===B.c.edit}get placement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get errorMessage(){return this._errorMessage}get modalErrorMessage(){return this._modalErrorMessage}get activeModel(){return this.isEdit?this._editModel:this._viewModel}get showSpinner(){return this.detailsStatus===B.c.loading}get showDocument(){return this.detailsStatus===B.c.loaded||this.detailsStatus===B.c.edit}get showRefresh(){return!this.isEdit}get showViewToolbar(){return!this.showEditToolbar}get showEditToolbar(){return this.detailsStatus===B.c.edit}get showErrorMessage(){return this.detailsStatus===B.c.error}onRefresh(){this.detailsStatus!==B.c.loading&&this.fetch()}onEdit(){this.canEdit&&this._viewModel&&(this._viewModelJson=JSON.stringify(this._viewModel),this._editModel=JSON.parse(this._viewModelJson),this.detailsStatus=B.c.edit)}get canEditPermissions(){return this.workspace.currentTenant.canUpdate(this.view,null)}get canEdit(){return!!this.showDocument&&this.canEditPermissions}get editTooltip(){return this.canEditPermissions?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}onSave(){this.isDirty?(this.clearErrors(),Object(j.c)(this._editModel),this.crud.save(this._editModel,{expand:this.expand,returnEntities:!0}).subscribe(e=>{this._viewModel=e.Result,Object(N.o)(e.RelatedEntities,this.workspace),this.workspace.notifyStateChanged(),e.SettingsForClient&&Object($.h)(e.SettingsForClient,this.workspace.ws.tenantId,this.workspace.currentTenant,this.storage),this.detailsStatus=B.c.loaded,this._editModel=null},e=>{this.workspace.current.unauthorized||(422===e.status?this.apply422ErrorsToModel(e.error):this.displayModalError(e.error))})):(this.clearErrors(),Object(j.c)(this._editModel),this._editModel=null,this.detailsStatus=B.c.loaded)}onCancel(){const e=this.canDeactivate();e instanceof kb.a?e.subscribe(e=>{e&&this.doCancel()}):e&&this.doCancel()}doCancel(){this._editModel=null,this.clearErrors(),this.detailsStatus=B.c.loaded}apply422ErrorsToModel(e){this._unboundServerErrors=[];const t=Object(j.b)(this._editModel,e);Object.keys(t).forEach(e=>{t[e].forEach(e=>{this._unboundServerErrors.push(e)})})}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(z.a),o.Pb(K.t),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-settings"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(Xv,!0),o.Oc(Zv,!0)),2&e&&(o.Ec(n=o.ic())&&(t.errorModal=n.first),o.Ec(n=o.ic())&&(t.unsavedChangesModal=n.first))},hostBindings:function(e,t){1&e&&o.hc("beforeunload",(function(e){return t.doSomething(e)}),!1,o.Hc)},inputs:{title:"title",endpoint:"endpoint",expand:"expand",view:"view",template:"template"},decls:20,vars:8,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-6","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["class","text-danger t-dirty-asterisk px-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[4,"ngIf"],["class","btn btn-light btn-sm t-white-button t-toolbar-button","type","button",3,"title","click",4,"ngIf"],[1,"row","t-rest-of-screen","bg-white"],["class","w-100 h-100 p-0 d-flex flex-column",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],["errorModal",""],["unsavedChangesModal",""],[1,"text-danger","t-dirty-asterisk","px-1"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","pen"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"click"],["icon","save"],[1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button",3,"click"],["icon","times"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","click"],["icon","sync-alt"],[1,"w-100","h-100","p-0","d-flex","flex-column"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-100","mt-3"],[1,"w-100","p-2","d-flex","justify-content-center"],[3,"scale"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],["icon","check"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"div",2),o.Vb(3,"ul",3),o.Vb(4,"li",4),o.Tc(5),o.Rc(6,eI,2,0,"span",5),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",6),o.Rc(8,tI,6,6,"div",7),o.Rc(9,nI,9,6,"div",7),o.Vb(10,"div"),o.Rc(11,iI,3,3,"button",8),o.Ub(),o.Ub(),o.Ub(),o.Vb(12,"div",9),o.Rc(13,rI,2,5,"div",10),o.Rc(14,sI,3,1,"div",11),o.Rc(15,lI,3,1,"div",11),o.Ub(),o.Ub(),o.Rc(16,aI,15,7,"ng-template",null,12,o.Sc),o.Rc(18,uI,19,12,"ng-template",null,13,o.Sc)),2&e&&(o.Bb(5),o.Vc(" ",t.title," "),o.Bb(1),o.sc("ngIf",t.isDirty),o.Bb(2),o.sc("ngIf",t.showViewToolbar),o.Bb(1),o.sc("ngIf",t.showEditToolbar),o.Bb(2),o.sc("ngIf",t.showRefresh),o.Bb(2),o.sc("ngIf",t.showDocument),o.Bb(1),o.sc("ngIf",t.showSpinner),o.Bb(1),o.sc("ngIf",t.showErrorMessage))},directives:[x.u,K.E,ee.b,x.B,me.a,ve.a],pipes:[Q.d],encapsulation:2}),e})(),bI=(()=>{class e{canDeactivate(){return!this.settings||this.settings.canDeactivate()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&o.Yc(dI,!0),2&e&&o.Ec(n=o.ic())&&(t.settings=n.first)},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var fI=n("nM1v");function mI(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.Gb("text-danger",e.invalid),o.sc("title",e.label),o.Bb(1),o.Uc(e.label)}}function gI(e,t){1&e&&o.Qb(0,"fa-icon",9)}function pI(e,t){if(1&e&&(o.Vb(0,"p",12),o.Qb(1,"fa-icon",13),o.Tc(2),o.Ub()),2&e){const e=t.$implicit;o.Bb(2),o.Vc(" \xa0",e()," ")}}function hI(e,t){if(1&e&&(o.Vb(0,"div",10),o.Rc(1,pI,3,1,"p",11),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.sc("ngForOf",e.errors)}}const vI=["*"];let II=(()=>{class e extends fI.a{}return e.\u0275fac=function(t){return yI(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-form-group-settings"]],inputs:{description:"description"},features:[o.yb],ngContentSelectors:vI,decls:10,vars:14,consts:[["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"row",3,"ngbPopover","placement"],["class","font-weight-bold small col-12 text-truncate",4,"ngIf"],[1,"text-muted","small","col-12","mb-2","text-nowrap",3,"title"],[1,"t-vertical-align-middle"],[1,"col-12","d-flex","form-group-container"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["errorsPopover",""],[1,"font-weight-bold","small","col-12","text-truncate"],[1,"t-vertical-align-middle",3,"title"],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"]],template:function(e,t){if(1&e&&(o.rc(),o.Vb(0,"div",0),o.Rc(1,mI,3,4,"div",1),o.Vb(2,"div",2),o.Vb(3,"span",3),o.Tc(4),o.Ub(),o.Ub(),o.Vb(5,"div",4),o.qc(6),o.Rc(7,gI,1,0,"fa-icon",5),o.Ub(),o.Ub(),o.Rc(8,hI,2,1,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(9);o.Gb("border-left",!t.isRtl)("border-right",t.isRtl),o.sc("ngbPopover",t.invalid?e:null)("placement",t.popoverPlacement),o.Bb(1),o.sc("ngIf",t.showLabel),o.Bb(1),o.sc("title",t.description),o.Bb(2),o.Uc(t.description),o.Bb(1),o.Gb("is-invalid",t.invalid)("col-lg-8",t.showLabel),o.Bb(2),o.sc("ngIf",t.areServerErrors)}},directives:[K.C,x.u,ee.b,x.t],encapsulation:2}),e})();const yI=o.Xb(II);function wI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.ShortCompanyName)}}const CI=function(){return{updateOn:"blur"}};function MI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",12),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ShortCompanyName=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.ShortCompanyName)("ngModelOptions",o.vc(2,CI))}}function VI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.ShortCompanyName2)}}function TI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",14),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ShortCompanyName2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.ShortCompanyName2)("ngModelOptions",o.vc(2,CI))}}function EI(e,t){if(1&e&&(o.Vb(0,"t-form-group-settings",5),o.mc(1,"translate"),o.mc(2,"translate"),o.Rc(3,VI,2,1,"div",6),o.Rc(4,TI,1,3,"t-text-editor",13),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,5,"Settings_ShortCompanyName")+i.secondaryPostfix)("description",o.nc(2,7,"Settings_ShortCompanyNameDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.ShortCompanyName2),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function xI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.ShortCompanyName3)}}function UI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",14),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ShortCompanyName3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.ShortCompanyName3)("ngModelOptions",o.vc(2,CI))}}function RI(e,t){if(1&e&&(o.Vb(0,"t-form-group-settings",5),o.mc(1,"translate"),o.mc(2,"translate"),o.Rc(3,xI,2,1,"div",6),o.Rc(4,UI,1,3,"t-text-editor",13),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,5,"Settings_ShortCompanyName")+i.ternaryPostfix)("description",o.nc(2,7,"Settings_ShortCompanyNameDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.ShortCompanyName3),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function DI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.cultureName(null==e?null:e.PrimaryLanguageId)||"-")}}function BI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",15),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.PrimaryLanguageId=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.PrimaryLanguageId)("choices",t.cultures)}}function SI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.cultureName(null==e?null:e.SecondaryLanguageId)||"-")}}function kI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",16),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.SecondaryLanguageId=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.SecondaryLanguageId)("choices",t.cultures)}}function OI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.cultureName(null==e?null:e.TernaryLanguageId)||"-")}}function _I(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",16),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TernaryLanguageId=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.TernaryLanguageId)("choices",t.cultures)}}function LI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc((null==e?null:e.PrimaryLanguageSymbol)||"-")}}function AI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",14),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.PrimaryLanguageSymbol=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.PrimaryLanguageSymbol)("ngModelOptions",o.vc(2,CI))}}function FI(e,t){if(1&e&&(o.Vb(0,"t-form-group-settings",5),o.mc(1,"translate"),o.mc(2,"translate"),o.Rc(3,LI,2,1,"div",6),o.Rc(4,AI,1,3,"t-text-editor",13),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,5,"Settings_PrimaryLanguageSymbol"))("description",o.nc(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.PrimaryLanguageSymbol),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function PI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc((null==e?null:e.SecondaryLanguageSymbol)||"-")}}function NI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",14),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.SecondaryLanguageSymbol=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.SecondaryLanguageSymbol)("ngModelOptions",o.vc(2,CI))}}function jI(e,t){if(1&e&&(o.Vb(0,"t-form-group-settings",5),o.mc(1,"translate"),o.mc(2,"translate"),o.Rc(3,PI,2,1,"div",6),o.Rc(4,NI,1,3,"t-text-editor",13),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,5,"Settings_SecondaryLanguageSymbol"))("description",o.nc(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.SecondaryLanguageSymbol),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function WI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc((null==e?null:e.TernaryLanguageSymbol)||"-")}}function $I(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",14),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TernaryLanguageSymbol=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.TernaryLanguageSymbol)("ngModelOptions",o.vc(2,CI))}}function qI(e,t){if(1&e&&(o.Vb(0,"t-form-group-settings",5),o.mc(1,"translate"),o.mc(2,"translate"),o.Rc(3,WI,2,1,"div",6),o.Rc(4,$I,1,3,"t-text-editor",13),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,5,"Settings_TernaryLanguageSymbol"))("description",o.nc(2,7,"Settings_LanguageSymbolDescription"))("serverErrors",null==t.serverErrors?null:t.serverErrors.TernaryLanguageSymbol),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function QI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.calendarName(null==e?null:e.PrimaryCalendar)||"-")}}function HI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",15),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.PrimaryCalendar=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.PrimaryCalendar)("choices",t.calendars)}}function GI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.calendarName(null==e?null:e.SecondaryCalendar)||"-")}}function zI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",16),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.SecondaryCalendar=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.SecondaryCalendar)("choices",t.calendars)}}function JI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.dateFormatDisplay(null==e?null:e.DateFormat)||"-")}}function KI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",16),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.DateFormat=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.DateFormat)("choices",t.dateFormats)}}function YI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.timeFormatDisplay(null==e?null:e.TimeFormat)||"-")}}function XI(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",16),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TimeFormat=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.TimeFormat)("choices",t.timeFormats)}}function ZI(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc((null==e?null:e.BrandColor)||"-")}}function ey(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",17),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.BrandColor=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.BrandColor)("ngModelOptions",o.vc(2,CI))}}function ty(e,t){if(1&e&&(o.Vb(0,"div",2),o.Vb(1,"h5",3),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"div",4),o.Vb(5,"t-form-group-settings",5),o.mc(6,"translate"),o.mc(7,"translate"),o.Rc(8,wI,2,1,"div",6),o.Rc(9,MI,1,3,"t-text-editor",7),o.Ub(),o.Rc(10,EI,5,9,"t-form-group-settings",8),o.Rc(11,RI,5,9,"t-form-group-settings",8),o.Vb(12,"t-form-group-settings",5),o.mc(13,"translate"),o.mc(14,"translate"),o.Rc(15,DI,2,1,"div",6),o.Rc(16,BI,1,2,"t-selector",9),o.Ub(),o.Vb(17,"t-form-group-settings",5),o.mc(18,"translate"),o.mc(19,"translate"),o.Rc(20,SI,2,1,"div",6),o.Rc(21,kI,1,2,"t-selector",10),o.Ub(),o.Vb(22,"t-form-group-settings",5),o.mc(23,"translate"),o.mc(24,"translate"),o.Rc(25,OI,2,1,"div",6),o.Rc(26,_I,1,2,"t-selector",10),o.Ub(),o.Rc(27,FI,5,9,"t-form-group-settings",8),o.Rc(28,jI,5,9,"t-form-group-settings",8),o.Rc(29,qI,5,9,"t-form-group-settings",8),o.Ub(),o.Vb(30,"h5",3),o.Tc(31),o.mc(32,"translate"),o.Ub(),o.Vb(33,"div",4),o.Vb(34,"t-form-group-settings",5),o.mc(35,"translate"),o.mc(36,"translate"),o.Rc(37,QI,2,1,"div",6),o.Rc(38,HI,1,2,"t-selector",9),o.Ub(),o.Vb(39,"t-form-group-settings",5),o.mc(40,"translate"),o.mc(41,"translate"),o.Rc(42,GI,2,1,"div",6),o.Rc(43,zI,1,2,"t-selector",10),o.Ub(),o.Vb(44,"t-form-group-settings",5),o.mc(45,"translate"),o.mc(46,"translate"),o.Rc(47,JI,2,1,"div",6),o.Rc(48,KI,1,2,"t-selector",10),o.Ub(),o.Vb(49,"t-form-group-settings",5),o.mc(50,"translate"),o.mc(51,"translate"),o.Rc(52,YI,2,1,"div",6),o.Rc(53,XI,1,2,"t-selector",10),o.Ub(),o.Ub(),o.Vb(54,"h5",3),o.Tc(55),o.mc(56,"translate"),o.Ub(),o.Vb(57,"div",4),o.Vb(58,"t-form-group-settings",5),o.mc(59,"translate"),o.mc(60,"translate"),o.Rc(61,ZI,2,1,"div",6),o.Rc(62,ey,1,3,"t-text-editor",11),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,53,"GeneralSettings")," "),o.Bb(3),o.sc("label",o.nc(6,55,"Settings_ShortCompanyName")+i.primaryPostfix)("description",o.nc(7,57,"Settings_ShortCompanyNameDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.ShortCompanyName),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",e.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",e.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(13,59,"Settings_PrimaryLanguage"))("description",o.nc(14,61,"Settings_PrimaryLanguageDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.PrimaryLanguageId),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(18,63,"Settings_SecondaryLanguage"))("description",o.nc(19,65,"Settings_SecondaryLanguageDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.SecondaryLanguageId),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(23,67,"Settings_TernaryLanguage"))("description",o.nc(24,69,"Settings_TernaryLanguageDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.TernaryLanguageId),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",e.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",e.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",e.TernaryLanguageId),o.Bb(2),o.Vc(" ",o.nc(32,71,"DatesAndTimes")," "),o.Bb(3),o.sc("label",o.nc(35,73,"Settings_PrimaryCalendar"))("description",o.nc(36,75,"Settings_PrimaryCalendarDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.PrimaryCalendar),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(40,77,"Settings_SecondaryCalendar"))("description",o.nc(41,79,"Settings_SecondaryCalendarDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.SecondaryCalendar),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(45,81,"Settings_DateFormat"))("description",o.nc(46,83,"Settings_DateFormatDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.DateFormat),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(50,85,"Settings_TimeFormat"))("description",o.nc(51,87,"Settings_TimeFormatDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.TimeFormat),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(2),o.Vc(" ",o.nc(56,89,"Branding")," "),o.Bb(3),o.sc("label",o.nc(59,91,"Settings_BrandColor"))("description",o.nc(60,93,"Settings_BrandColorDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.BrandColor),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}let ny=(()=>{class e extends bI{constructor(e,t){super(),this.workspace=e,this.translate=t}get primaryPostfix(){return this.workspace.currentTenant.primaryPostfix}get secondaryPostfix(){return this.workspace.currentTenant.secondaryPostfix}get ternaryPostfix(){return this.workspace.currentTenant.ternaryPostfix}cultureName(e){return Fs.a[e]}get cultures(){return this._cultures||(this._cultures=Object.keys(Fs.a).map(e=>({name:()=>Fs.a[e],value:e}))),this._cultures}calendarName(e){return e?this.translate.instant("Calendar_"+e):null}get calendars(){return this._calendars||(this._calendars=Vi.c.map(e=>({name:()=>this.calendarName(e),value:e}))),this._calendars}dateFormatDisplay(e){const t={day:1,month:2,year:(new Date).getFullYear()};return Object(Hi.d)(t,e,this.translate,"GC")}get dateFormats(){return this._dateFormats||(this._dateFormats=Vi.k.map(e=>({name:()=>this.dateFormatDisplay(e),value:e}))),this._dateFormats}timeFormatDisplay(e){return Object(Hi.e)({hour:13,minute:5,second:27},e,this.translate)}get timeFormats(){return this._timeFormats||(this._timeFormats=Vi.f.map(e=>({name:()=>this.timeFormatDisplay(e),value:e}))),this._timeFormats}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-general-settings"]],features:[o.yb],decls:4,vars:4,consts:[["endpoint","general-settings","view","general-settings","expand","",3,"title","template"],["template",""],[1,"m-0","pt-3","pt-sm-4","pb-3","pb-sm-5","pl-0","pl-sm-3","pr-0","pr-sm-3"],[1,"col-12","bg-light","t-settings-header"],[1,"row","col-12","t-settings-section"],[1,"t-form-group",3,"label","description","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","description","serverErrors",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],["isOptional","true",3,"ngModel","choices","ngModelChange",4,"ngIf"],["placeholder","e.g. #343A40",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","choices","ngModelChange"],["isOptional","true",3,"ngModel","choices","ngModelChange"],["placeholder","e.g. #343A40",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-settings",0),o.mc(1,"translate"),o.Rc(2,ty,63,95,"ng-template",null,1,o.Sc)),2&e){const e=o.Fc(3);o.sc("title",o.nc(1,2,"GeneralSettings"))("template",e)}},directives:[dI,II,x.u,he.a,te.u,te.k,te.n,hn.a],pipes:[Q.d],encapsulation:2}),e})();var iy=n("TJ1c");const oy=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},cy=function(e,t){return[e,t]},ry=function(e){return{template:e,expression:"CreatedById eq me"}},sy=function(e){return[e]},ly=function(e){return{CreatedBy:e}};function ay(e,t){if(1&e&&o.Qb(0,"t-master",8),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(8),i=o.Fc(6),c=o.Fc(10),r=o.Fc(12),s=o.Fc(14);o.sc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("multiselectActions",o.xc(21,cy,o.zc(11,oy,c,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.zc(16,oy,r,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",o.wc(28,ly,o.wc(26,sy,o.wc(24,ry,s))))}}function uy(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",9),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function dy(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",16),o.Qb(2,"t-image",17),o.Ub(),o.Tc(3," \xa0\xa0\xa0 "),o.Sb()),2&e){const e=o.lc().id,t=o.lc();o.Bb(2),o.sc("src","resources/"+t.c[e].DefinitionId+"/"+t.c[e].Id+"/image")("imageId",t.c[e].ImageId)("size",42)}}function by(e,t){if(1&e&&(o.Vb(0,"div",10),o.Rc(1,dy,4,3,"ng-container",11),o.Vb(2,"div",12),o.Vb(3,"div",13),o.Vb(4,"span",14),o.Tc(5),o.Ub(),o.Ub(),o.Vb(6,"div",15),o.Vb(7,"span"),o.Tc(8),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("ngIf",2===(null==n.c[e].EntityMetadata?null:n.c[e].EntityMetadata.ImageId)&&n.Image_isVisible),o.Bb(4),o.Uc(n.ws.getMultilingualValue("Resource",e,"Name")),o.Bb(3),o.Uc(n.c[e].Code)}}function fy(e,t){if(1&e&&o.Tc(0),2&e){const e=o.lc();o.Vc(" ",e.summary,"\n")}}function my(e,t){if(1&e&&(o.Vb(0,"span",18),o.Qb(1,"t-auto-cell",19),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("definitionId",n.definitionId)("entity",n.c[e])}}function gy(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function py(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function hy(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}let vy=(()=>{class e extends Ut.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=o,this.resourcesApi=this.api.resourcesApi(null,this.notifyDestruct$),this.expand="",this.onActivate=e=>this.resourcesApi.activate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.resourcesApi.deactivate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.resourcesApi=this.api.resourcesApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`resources/${this.definitionId}`}get c(){return this.ws.Resource}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Resources[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Resources")}get summary(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Resource")}get Image_isVisible(){return!!this.definition.ImageVisibility}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(i.e),o.Pb(i.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-resources-master"]],inputs:{definitionId:"definitionId"},features:[o.yb],decls:15,vars:2,consts:[["collection","Resource","selectDefault","Code,IsActive","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Resource","selectDefault","Code,IsActive","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1","d-inline-block","t-mw-0"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"border","t-dp-wrapper2"],["icon","camera",3,"src","imageId","size"],[1,"text-truncate"],["collection","Resource",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(o.Rc(0,ay,1,30,"t-master",0),o.Rc(1,uy,1,1,"ng-template",null,1,o.Sc),o.Rc(3,by,9,3,"ng-template",null,2,o.Sc),o.Rc(5,fy,1,1,"ng-template",null,3,o.Sc),o.Rc(7,my,2,2,"ng-template",null,4,o.Sc),o.Rc(9,gy,2,3,"ng-template",null,5,o.Sc),o.Rc(11,py,2,3,"ng-template",null,6,o.Sc),o.Rc(13,hy,2,3,"ng-template",null,7,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,Rt.a,nn,be,ge.a],pipes:[Q.d],encapsulation:2}),e})();function Iy(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-units-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function yy(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-units-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let wy=(()=>{class e extends As{}return e.\u0275fac=function(t){return Cy(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-units-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","Unit",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,Iy,2,3,"ng-template",null,1,o.Sc),o.Rc(3,yy,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,ii,en],encapsulation:2}),e})();const Cy=o.Xb(wy),My=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},Vy=function(e,t,n){return{template:e,action:t,showAction:n}},Ty=function(e,t,n){return[e,t,n]};function Ey(e,t){if(1&e&&o.Qb(0,"t-details",7),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(6),i=o.Fc(8),c=o.Fc(10),r=o.Fc(12);o.sc("definitionId",e.definitionId)("createFunc",e.create)("cloneFunc",e.clone)("expand",e.expand)("mode",e.mode)("additionalSelect",e.additionalSelect)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("idString",e.idString)("documentTemplate",n)("savePreprocessing",e.savePreprocessing)("actions",o.yc(28,Ty,o.Ac(12,My,i,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.Ac(18,My,c,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.yc(24,Vy,r,e.onEditDefinition,e.showEditDefinition)))}}function xy(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",8),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function Uy(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function Ry(e,t){if(1&e&&(o.Vb(0,"h2",20),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const Dy=function(){return{updateOn:"blur"}};function By(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,Dy))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function Sy(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,Dy))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function ky(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,Dy))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function Oy(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-image",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Image=t})),o.Ub()}if(2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("src",t.Id?"resources/"+i.definitionId+"/"+t.Id+"/image":null)("imageId",null==t?null:t.ImageId)("ngModel",t.Image)("isEdit",n)}}function _y(e,t){if(1&e&&(o.Vb(0,"div",23),o.Vb(1,"t-restricted",24),o.Vb(2,"div",25),o.Rc(3,Oy,1,4,"t-image",26),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ImageId),o.Bb(2),o.sc("ngIf",!!e)}}function Ly(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function Ay(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",29),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,Dy))}}function Fy(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Ly,2,1,"div",16),o.Rc(3,Ay,1,3,"t-text-editor",28),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Py(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function Ny(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,Dy))}}function jy(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Py,2,1,"div",16),o.Rc(3,Ny,1,3,"t-text-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Wy(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function $y(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,Dy))}}function qy(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Wy,2,1,"div",16),o.Rc(3,$y,1,3,"t-text-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Qy(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function Hy(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,Dy))}}function Gy(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",33),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Unit),o.Bb(1),o.sc("itemId",null==e?null:e.UnitId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Unit",null==e?null:e.UnitId,"Name")," ")}}function zy(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-units-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.UnitId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.UnitId)("required",t.Unit_isRequired)}}function Jy(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Gy,3,3,"t-restricted",31),o.Rc(3,zy,1,2,"t-units-picker",32),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Resource_Unit"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.UnitId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Ky(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitMass),o.Bb(2),o.Vc(" ",o.oc(3,2,null==e?null:e.UnitMass,"1.0-4")," ")}}function Yy(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.UnitMass=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.UnitMass)("ngModelOptions",o.vc(5,Dy))("required",t.UnitMass_isRequired)("minDecimalPlaces",4)("maxDecimalPlaces",4)}}function Xy(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Ky,4,5,"t-restricted",31),o.Rc(3,Yy,1,6,"t-decimal-editor",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Resource_UnitMass"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.UnitMass),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Zy(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",33),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitMassUnit),o.Bb(1),o.sc("itemId",null==e?null:e.UnitMassUnitId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Unit",null==e?null:e.UnitMassUnitId,"Name")," ")}}function ew(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-units-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.UnitMassUnitId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.UnitMassUnitId)("required",t.UnitMass_isRequired)}}function tw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,Zy,3,3,"t-restricted",31),o.Rc(3,ew,1,2,"t-units-picker",32),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Resource_UnitMassUnit"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.UnitMassUnitId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function nw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.MonetaryValue),o.Bb(2),o.Vc(" ",o.oc(3,2,null==e?null:e.MonetaryValue,"1."+t.MonetaryValue_decimals(e)+"-"+t.MonetaryValue_decimals(e))," ")}}function iw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.MonetaryValue=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.MonetaryValue)("ngModelOptions",o.vc(5,Dy))("required",t.MonetaryValue_isRequired)("minDecimalPlaces",t.MonetaryValue_decimals(e))("maxDecimalPlaces",t.MonetaryValue_decimals(e))}}function ow(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,nw,4,5,"t-restricted",31),o.Rc(2,iw,1,6,"t-decimal-editor",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.MonetaryValue_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.MonetaryValue),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function cw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",38),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Participant),o.Bb(1),o.sc("link","../../../relations/"+t.Participant_definitionIds[0])("itemId",null==e?null:e.ParticipantId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",e.ParticipantId,"Name")," ")}}function rw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",39),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ParticipantId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ParticipantId)("definitionIds",t.Participant_definitionIds)("required",t.Participant_isRequired)}}function sw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,cw,3,4,"t-restricted",31),o.Rc(2,rw,1,3,"t-relations-picker",37),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Participant_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ParticipantId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function lw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",40),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Currency),o.Bb(1),o.sc("itemId",null==e?null:e.CurrencyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")," ")}}function aw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CurrencyId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CurrencyId)("required",t.Currency_isRequired)}}function uw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,lw,3,3,"t-restricted",31),o.Rc(2,aw,1,2,"t-currencies-picker",32),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Currency_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function dw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",41),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Center),o.Bb(1),o.sc("itemId",null==e?null:e.CenterId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Center",e.CenterId,"Name")," ")}}function bw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CenterId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CenterId)("required",t.Center_isRequired)}}function fw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,dw,3,3,"t-restricted",31),o.Rc(2,bw,1,2,"t-centers-picker",32),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Center_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function mw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",41),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CostCenter),o.Bb(1),o.sc("itemId",null==e?null:e.CostCenterId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Center",e.CostCenterId,"Name")," ")}}function gw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CostCenterId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CostCenterId)("required",t.CostCenter_isRequired)}}function pw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,mw,3,3,"t-restricted",31),o.Rc(2,gw,1,2,"t-centers-picker",32),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.CostCenter_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CostCenterId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function hw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",38),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup1),o.Bb(1),o.sc("link","../../../lookups/"+t.Lookup1_DefinitionId)("itemId",null==e?null:e.Lookup1Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup1Id,"Name")," ")}}function vw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup1Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup1Id)("definitionId",t.Lookup1_DefinitionId)("required",t.Lookup1_isRequired)}}function Iw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,hw,3,4,"t-restricted",31),o.Rc(2,vw,1,3,"t-lookups-picker",42),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup1Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function yw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",38),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup2),o.Bb(1),o.sc("link","../../../lookups/"+t.Lookup2_DefinitionId)("itemId",null==e?null:e.Lookup2Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup2Id,"Name")," ")}}function ww(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup2Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup2Id)("definitionId",t.Lookup2_DefinitionId)("required",t.Lookup2_isRequired)}}function Cw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,yw,3,4,"t-restricted",31),o.Rc(2,ww,1,3,"t-lookups-picker",42),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup2Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Mw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",38),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup3),o.Bb(1),o.sc("link","../../../lookups/"+t.Lookup3_DefinitionId)("itemId",null==e?null:e.Lookup3Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup3Id,"Name")," ")}}function Vw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup3Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup3Id)("definitionId",t.Lookup3_DefinitionId)("required",t.Lookup3_isRequired)}}function Tw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Mw,3,4,"t-restricted",31),o.Rc(2,Vw,1,3,"t-lookups-picker",42),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup3Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Ew(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",38),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup4),o.Bb(1),o.sc("link","../../../lookups/"+t.Lookup4_DefinitionId)("itemId",null==e?null:e.Lookup4Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup4Id,"Name")," ")}}function xw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup4Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup4Id)("definitionId",t.Lookup4_DefinitionId)("required",t.Lookup4_isRequired)}}function Uw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Ew,3,4,"t-restricted",31),o.Rc(2,xw,1,3,"t-lookups-picker",42),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup4Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Rw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal1),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Decimal1,"1.0-4"))}}function Dw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Decimal1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Decimal1)("ngModelOptions",o.vc(5,Dy))("required",t.Decimal1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Bw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Rw,4,5,"t-restricted",31),o.Rc(2,Dw,1,6,"t-decimal-editor",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Decimal1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Sw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal2),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Decimal2,"1.0-4"))}}function kw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Decimal2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Decimal2)("ngModelOptions",o.vc(5,Dy))("required",t.Decimal2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function Ow(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Sw,4,5,"t-restricted",31),o.Rc(2,kw,1,6,"t-decimal-editor",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Decimal2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function _w(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int1),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Int1,"1.0-0"))}}function Lw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Int1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Int1)("ngModelOptions",o.vc(5,Dy))("required",t.Int1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function Aw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,_w,4,5,"t-restricted",31),o.Rc(2,Lw,1,6,"t-decimal-editor",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Int1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Fw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int2),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Int2,"1.0-0"))}}function Pw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Int2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Int2)("ngModelOptions",o.vc(5,Dy))("required",t.Int2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function Nw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Fw,4,5,"t-restricted",31),o.Rc(2,Pw,1,6,"t-decimal-editor",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Int2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function jw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text1),o.Bb(2),o.Uc(null==e?null:e.Text1)}}function Ww(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Text1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Text1)("ngModelOptions",o.vc(3,Dy))("required",t.Text1_isRequired)}}function $w(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,jw,3,2,"t-restricted",31),o.Rc(2,Ww,1,4,"t-text-editor",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Text1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function qw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text2),o.Bb(2),o.Uc(null==e?null:e.Text2)}}function Qw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Text2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Text2)("ngModelOptions",o.vc(3,Dy))("required",t.Text2_isRequired)}}function Hw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,qw,3,2,"t-restricted",31),o.Rc(2,Qw,1,4,"t-text-editor",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Text2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Gw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.FromDate),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.FromDate))}}function zw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.FromDate=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.FromDate)("ngModelOptions",o.vc(3,Dy))("required",t.FromDate_isRequired)}}function Jw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Gw,4,4,"t-restricted",31),o.Rc(2,zw,1,4,"t-date-picker",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.FromDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.FromDate),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Kw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ToDate),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.ToDate))}}function Yw(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ToDate=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ToDate)("ngModelOptions",o.vc(3,Dy))("required",t.ToDate_isRequired)}}function Xw(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Kw,4,4,"t-restricted",31),o.Rc(2,Yw,1,4,"t-date-picker",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.ToDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ToDate),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Zw(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Identifier),o.Bb(2),o.Uc(null==e?null:e.Identifier)}}function eC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Identifier=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Identifier)("ngModelOptions",o.vc(3,Dy))("required",t.Identifier_isRequired)}}function tC(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,Zw,3,2,"t-restricted",31),o.Rc(2,eC,1,4,"t-text-editor",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Identifier_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Identifier),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function nC(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"percent"),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(o.oc(2,1,null==e?null:e.VatRate,"1.2-4"))}}function iC(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,nC,3,4,"div",16),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.VatRate),o.Bb(1),o.sc("ngIf",!n)}}function oC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",47),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.VatRate=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.VatRate)("ngModelOptions",o.vc(6,Dy))("required",t.VatRate_isRequired)("minDecimalPlaces",2)("maxDecimalPlaces",4)("isPercentage",!0)}}function cC(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,iC,2,2,"t-restricted",31),o.Rc(3,oC,1,7,"t-decimal-editor",46),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Resource_VatRate"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.VatRate),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function rC(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"accounting"),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(o.oc(2,1,null==e?null:e.ReorderLevel,"1.0-4"))}}function sC(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,rC,3,4,"div",16),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.ReorderLevel),o.Bb(1),o.sc("ngIf",!n)}}function lC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ReorderLevel=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ReorderLevel)("ngModelOptions",o.vc(5,Dy))("required",t.ReorderLevel_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function aC(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,sC,2,2,"t-restricted",31),o.Rc(3,lC,1,6,"t-decimal-editor",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Resource_ReorderLevel"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ReorderLevel),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function uC(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"accounting"),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(o.oc(2,1,null==e?null:e.EconomicOrderQuantity,"1.0-4"))}}function dC(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,uC,3,4,"div",16),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.EconomicOrderQuantity),o.Bb(1),o.sc("ngIf",!n)}}function bC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.EconomicOrderQuantity=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.EconomicOrderQuantity)("ngModelOptions",o.vc(5,Dy))("required",t.EconomicOrderQuantity_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function fC(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,dC,2,2,"t-restricted",31),o.Rc(3,bC,1,6,"t-decimal-editor",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Resource_EconomicOrderQuantity"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.EconomicOrderQuantity),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function mC(e,t){if(1&e&&(o.Vb(0,"div",49),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description)}}function gC(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,mC,2,1,"div",48),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description),o.Bb(1),o.sc("ngIf",!n)}}function pC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Description)("ngModelOptions",o.vc(3,Dy))("required",t.Description_isRequired)}}function hC(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,gC,2,2,"t-restricted",31),o.Rc(3,pC,1,4,"t-multiline-editor",44),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function vC(e,t){if(1&e&&(o.Vb(0,"div",49),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description2)}}function IC(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,vC,2,1,"div",48),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description2),o.Bb(1),o.sc("ngIf",!n)}}function yC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description2)("ngModelOptions",o.vc(2,Dy))}}function wC(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,IC,2,2,"t-restricted",31),o.Rc(3,yC,1,3,"t-multiline-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function CC(e,t){if(1&e&&(o.Vb(0,"div",49),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description3)}}function MC(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,CC,2,1,"div",48),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description3),o.Bb(1),o.sc("ngIf",!n)}}function VC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description3)("ngModelOptions",o.vc(2,Dy))}}function TC(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,MC,2,2,"t-restricted",31),o.Rc(3,VC,1,3,"t-multiline-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function EC(e,t){if(1&e&&(o.Vb(0,"t-form-group",50),o.mc(1,"translate"),o.Tc(2),o.mc(3,"translate"),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(2),o.Vc(" ",o.nc(3,4,null!=e&&e.IsActive?"Yes":"No")," ")}}function xC(e,t){1&e&&(o.Vb(0,"span",61),o.Qb(1,"fa-icon",62),o.Tc(2,"\xa0 "),o.Ub())}function UC(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"ResourceUnit_Unit"))}function RC(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().item,t=o.lc(5);o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Unit",e.UnitId,"Name")," ")}}function DC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-units-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.UnitId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item;o.sc("ngModel",e.UnitId)("required",!e.PH)}}function BC(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",66),o.Rc(1,RC,2,1,"div",16),o.Rc(2,DC,1,2,"t-units-picker",32),o.Ub()),2&e){const e=t.item,n=o.lc(4).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.UnitId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}const SC=function(){return["Unit"]},kC=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},OC=function(e){return{Unit:e}};function _C(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Qb(1,"t-table",63),o.Ub(),o.Rc(2,UC,2,3,"ng-template",null,64,o.Sc),o.Rc(4,BC,3,3,"ng-template",null,65,o.Sc)),2&e){const e=o.Fc(3),t=o.Fc(5),n=o.lc(3),i=n.model,c=n.isEdit;o.Gb("p-4",1===(null==i||null==i.EntityMetadata?null:i.EntityMetadata.Units)),o.sc("metadata",null==i||null==i.EntityMetadata?null:i.EntityMetadata.Units),o.Bb(1),o.sc("dataSource",null==i?null:i.Units)("isEdit",c)("columnPaths",o.vc(7,SC))("columnTemplates",o.wc(11,OC,o.xc(8,kC,e,t)))}}function LC(e,t){if(1&e&&(o.Vb(0,"li",56),o.Vb(1,"a",57),o.Rc(2,xC,3,0,"span",58),o.Vb(3,"span",59),o.Tc(4),o.mc(5,"translate"),o.mc(6,"number"),o.Ub(),o.Ub(),o.Rc(7,_C,6,13,"ng-template",60),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("ngIf",t.Units_showError(e)),o.Bb(2),o.Uc(o.nc(5,2,"Resource_Units")+(e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Units)?"":" ("+o.nc(6,4,t.Units_count(e))+")"))}}function AC(e,t){1&e&&(o.Vb(0,"span",61),o.Qb(1,"fa-icon",62),o.Tc(2,"\xa0 "),o.Ub())}function FC(e,t){if(1&e&&o.Qb(0,"agm-data-layer",82),2&e){const e=o.lc(4).model,t=o.lc();o.Pc(t.styleFunc),o.sc("geoJson",t.parseJson(null==e?null:e.LocationJson))}}function PC(e,t){if(1&e&&(o.Vb(0,"t-error-message",83),o.Tc(1),o.Ub()),2&e){const e=o.lc(5);o.Bb(1),o.Vc(" ",e.parseJsonError," ")}}function NC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-restricted",24),o.Vb(1,"div",68),o.Vb(2,"div",69),o.Vb(3,"textarea",70),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.LocationJson=t})),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"agm-map",71),o.hc("centerChange",(function(t){return o.Ic(e),o.lc(4).onCenterChange(t)})),o.Qb(6,"t-map-bounds-fitter",72),o.Qb(7,"t-map-bounds-fitter",73),o.Rc(8,FC,1,3,"agm-data-layer",74),o.Ub(),o.Ub(),o.Vb(9,"div",75),o.Vb(10,"label",76),o.hc("click",(function(){return o.Ic(e),o.lc(4).onView("map")})),o.mc(11,"translate"),o.Qb(12,"input",77),o.Qb(13,"fa-icon",78),o.Vb(14,"span",79),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Ub(),o.Vb(17,"label",76),o.hc("click",(function(){return o.Ic(e),o.lc(4).onView("json")})),o.mc(18,"translate"),o.Qb(19,"input",77),o.Qb(20,"fa-icon",80),o.Vb(21,"span",79),o.Tc(22),o.mc(23,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Rc(24,PC,2,1,"t-error-message",81),o.Ub()}if(2&e){const e=o.lc(3),t=e.model,n=e.isEdit,i=o.lc();o.Gb("p-4",1===(null==t||null==t.EntityMetadata?null:t.EntityMetadata.LocationJson)),o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.LocationJson),o.Bb(2),o.Gb("d-none",!i.isView("json"))("t-hidden-cursor",!n),o.Bb(1),o.sc("readonly",!n)("placeholder",o.nc(4,34,"GeoJSON")+"...")("ngModel",t.LocationJson),o.Bb(2),o.Gb("d-none",!i.isView("map")),o.sc("latitude",i.latitude)("longitude",i.longitude)("zoom",6)("mapTypeControl",!0)("panControl",!0)("streetViewControl",!1)("fitBounds",!(null==t||!t.Id))("fitBoundsPadding",100),o.Bb(1),o.sc("agmFitBounds",!0)("geoJson",i.parseJson(null==t?null:t.LocationJson)),o.Bb(1),o.sc("agmFitBounds",!0)("geoJson",i.parseJson(null==t?null:t.LocationJson)),o.Bb(1),o.sc("ngIf",!!i.parseJson(null==t?null:t.LocationJson)),o.Bb(2),o.Gb("active",i.isView("map")),o.tc("title",o.nc(11,36,"Map")),o.Bb(5),o.Vc("\xa0\xa0",o.nc(16,38,"Map"),""),o.Bb(2),o.Gb("active",i.isView("json")),o.tc("title",o.nc(18,40,"GeoJSON")),o.Bb(5),o.Vc("\xa0\xa0",o.nc(23,42,"GeoJSON"),""),o.Bb(2),o.sc("ngIf",!!i.parseJsonError)}}function jC(e,t){if(1&e&&(o.Vb(0,"li",67),o.Vb(1,"a",57),o.Rc(2,AC,3,0,"span",58),o.Vb(3,"span",59),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Rc(6,NC,25,44,"ng-template",60),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("ngIf",t.Map_showError(e)),o.Bb(2),o.Uc(o.nc(5,2,"Entity_Location"))}}const WC=function(e,t){return{id:e,cache_buster:t}};function $C(e,t){if(1&e&&(o.Vb(0,"div",88),o.Qb(1,"t-report-results",89),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3).model,n=o.lc();o.Bb(1),o.sc("definition",n.reportDefinition(e))("arguments",o.xc(4,WC,null==t?null:t.Id,null==t||null==t.EntityMetadata?null:t.EntityMetadata.$refresh))("view",n.reportView(e))("state",n.state(e))}}function qC(e,t){if(1&e&&(o.Vb(0,"li",86),o.Vb(1,"a",87),o.Vb(2,"span",59),o.Tc(3),o.Ub(),o.Ub(),o.Rc(4,$C,2,7,"ng-template",60),o.Ub()),2&e){const e=t.$implicit;o.lc();const n=o.Fc(3),i=o.lc(3);o.sc("ngbNavItem",e.ReportDefinitionId),o.Bb(1),o.sc("tContextMenu",n)("tContext",e.ReportDefinitionId),o.Bb(2),o.Uc(i.reportTitle(e))}}function QC(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",90),o.Vb(1,"ul",91),o.Vb(2,"li",92),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.close,c=o.lc(3).model;return o.lc().onExpandReport(n,c),i()})),o.Vb(3,"div",93),o.Qb(4,"fa-icon",94),o.Ub(),o.Vb(5,"div",95),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}2&e&&(o.Bb(6),o.Vc(" ",o.nc(7,1,"Expand")," "))}function HC(e,t){if(1&e&&(o.Tb(0),o.Rc(1,qC,5,4,"li",84),o.Rc(2,QC,8,3,"ng-template",null,85,o.Sc),o.Sb()),2&e){const e=o.lc(3);o.Bb(1),o.sc("ngForOf",e.reports)}}function GC(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"ul",51,52),o.hc("activeIdChange",(function(t){return o.Ic(e),o.lc(2).activeTab=t})),o.Rc(3,LC,8,6,"li",53),o.Rc(4,jC,7,4,"li",54),o.Rc(5,HC,4,1,"ng-container",16),o.Ub(),o.Qb(6,"div",55),o.Sb()}if(2&e){const e=o.Fc(2),t=o.lc(),n=t.isEdit,i=t.model,c=o.lc();o.Bb(1),o.sc("destroyOnHide",!0)("activeId",c.activeTab),o.Bb(2),o.sc("ngIf",c.Units_isVisible),o.Bb(1),o.sc("ngIf",c.Location_isVisible),o.Bb(1),o.sc("ngIf",c.showReports(n,i)),o.Bb(1),o.sc("ngbNavOutlet",e)}}function zC(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.Rc(1,Ry,2,1,"h2",10),o.Rc(2,By,2,7,"t-text-editor",11),o.Rc(3,Sy,2,7,"t-text-editor",12),o.Rc(4,ky,2,7,"t-text-editor",12),o.Ub(),o.Rc(5,_y,4,2,"div",13),o.Rc(6,Fy,4,6,"t-form-group",14),o.Rc(7,jy,4,6,"t-form-group",14),o.Rc(8,qy,4,6,"t-form-group",14),o.Vb(9,"t-form-group",15),o.mc(10,"translate"),o.Rc(11,Qy,2,1,"div",16),o.Rc(12,Hy,1,3,"t-text-editor",17),o.Ub(),o.Rc(13,Jy,4,6,"t-form-group",14),o.Rc(14,Xy,4,6,"t-form-group",14),o.Rc(15,tw,4,6,"t-form-group",14),o.Rc(16,ow,3,4,"t-form-group",14),o.Rc(17,sw,3,4,"t-form-group",14),o.Rc(18,uw,3,4,"t-form-group",14),o.Rc(19,fw,3,4,"t-form-group",14),o.Rc(20,pw,3,4,"t-form-group",14),o.Rc(21,Iw,3,4,"t-form-group",14),o.Rc(22,Cw,3,4,"t-form-group",14),o.Rc(23,Tw,3,4,"t-form-group",14),o.Rc(24,Uw,3,4,"t-form-group",14),o.Rc(25,Bw,3,4,"t-form-group",14),o.Rc(26,Ow,3,4,"t-form-group",14),o.Rc(27,Aw,3,4,"t-form-group",14),o.Rc(28,Nw,3,4,"t-form-group",14),o.Rc(29,$w,3,4,"t-form-group",14),o.Rc(30,Hw,3,4,"t-form-group",14),o.Rc(31,Jw,3,4,"t-form-group",14),o.Rc(32,Xw,3,4,"t-form-group",14),o.Rc(33,tC,3,4,"t-form-group",14),o.Rc(34,cC,4,6,"t-form-group",14),o.Rc(35,aC,4,6,"t-form-group",14),o.Rc(36,fC,4,6,"t-form-group",14),o.Qb(37,"div",18),o.Rc(38,hC,4,6,"t-form-group",14),o.Rc(39,wC,4,6,"t-form-group",14),o.Rc(40,TC,4,6,"t-form-group",14),o.Rc(41,EC,4,6,"t-form-group",19),o.Rc(42,GC,7,6,"ng-container",16)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",i.Image_isVisible),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(10,42,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.Unit_isVisible),o.Bb(1),o.sc("ngIf",i.UnitMass_isVisible),o.Bb(1),o.sc("ngIf",i.UnitMass_isVisible),o.Bb(1),o.sc("ngIf",i.MonetaryValue_isVisible),o.Bb(1),o.sc("ngIf",i.Participant_isVisible),o.Bb(1),o.sc("ngIf",i.Currency_isVisible),o.Bb(1),o.sc("ngIf",i.Center_isVisible),o.Bb(1),o.sc("ngIf",i.CostCenter_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup1_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup2_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup3_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup4_isVisible),o.Bb(1),o.sc("ngIf",i.Decimal1_isVisible),o.Bb(1),o.sc("ngIf",i.Decimal2_isVisible),o.Bb(1),o.sc("ngIf",i.Int1_isVisible),o.Bb(1),o.sc("ngIf",i.Int2_isVisible),o.Bb(1),o.sc("ngIf",i.Text1_isVisible),o.Bb(1),o.sc("ngIf",i.Text2_isVisible),o.Bb(1),o.sc("ngIf",i.FromDate_isVisible),o.Bb(1),o.sc("ngIf",i.ToDate_isVisible),o.Bb(1),o.sc("ngIf",i.Identifier_isVisible),o.Bb(1),o.sc("ngIf",i.VatRate_isVisible),o.Bb(1),o.sc("ngIf",i.ReorderLevel_isVisible),o.Bb(1),o.sc("ngIf",i.EconomicOrderQuantity_isVisible),o.Bb(2),o.sc("ngIf",i.Description_isVisible),o.Bb(1),o.sc("ngIf",i.Description_isVisible&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.Description_isVisible&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",i.showTabs(n,e))}}function JC(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function KC(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function YC(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"EditDefinition")," ")}let XC=(()=>{class e extends gn.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.translate=n,this.router=i,this.route=o,this.resourcesApi=this.api.resourcesApi(null,this.notifyDestruct$),this.expand="Currency,Center,CostCenter,Lookup1,Lookup2,Lookup3,Lookup4,Participant,Unit,UnitMassUnit,Units.Unit",this.create=()=>{const e={};this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText);const t=this.definition;return e.VatRate=t.DefaultVatRate,e.UnitId=t.DefaultUnitId,e.UnitMassUnitId=t.DefaultUnitMassUnitId,e.Units=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Units&&t.Units.forEach(e=>{e.Id=null,delete e.ResourceId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById}),t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.resourcesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.resourcesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onEditDefinition=e=>{const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../../resource-definitions",this.definitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.showEditDefinition=e=>this.ws.canDo("resource-definitions","Update",null),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.styleFunc=e=>{const t={clickable:!1},n=["fillColor","fillOpacity","icon","strokeColor","shape","strokeOpacity","strokeWeight","visible"];for(const i of n){const n=e.getProperty(i);null!=n&&(t[i]=n)}return t},this.locationView="map",this.savePreprocessing=e=>{}}set definitionId(e){this._definitionId!==e&&(this.resourcesApi=this.api.resourcesApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`resources/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Resources[this.definitionId]:null)}get found(){return!!this.definition}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}get Currency_isVisible(){return!!this.definition.CurrencyVisibility}get Currency_isRequired(){return"Required"===this.definition.CurrencyVisibility}get Currency_label(){return this.translate.instant("Entity_Currency")}get Center_isVisible(){return!!this.definition.CenterVisibility}get Center_isRequired(){return"Required"===this.definition.CenterVisibility}get Center_label(){return this.translate.instant("Entity_Center")}get CostCenter_isVisible(){return!!this.definition.CostCenterVisibility}get CostCenter_isRequired(){return"Required"===this.definition.CostCenterVisibility}get CostCenter_label(){return this.translate.instant("Resource_CostCenter")}get Image_isVisible(){return!!this.definition.ImageVisibility}get Description_isVisible(){return!!this.definition.DescriptionVisibility}get Description_isRequired(){return"Required"===this.definition.DescriptionVisibility}get FromDate_isVisible(){return!!this.definition.FromDateVisibility}get FromDate_isRequired(){return"Required"===this.definition.FromDateVisibility}get FromDate_label(){return this.definition.FromDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"FromDateLabel"):this.translate.instant("Entity_FromDate")}get ToDate_isVisible(){return!!this.definition.ToDateVisibility}get ToDate_isRequired(){return"Required"===this.definition.ToDateVisibility}get ToDate_label(){return this.definition.ToDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"ToDateLabel"):this.translate.instant("Entity_ToDate")}get Decimal1_isVisible(){return!!this.definition.Decimal1Visibility}get Decimal1_isRequired(){return"Required"===this.definition.Decimal1Visibility}get Decimal1_label(){return this.definition.Decimal1Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal1Label"):this.translate.instant("Entity_Decimal1")}get Decimal2_isVisible(){return!!this.definition.Decimal2Visibility}get Decimal2_isRequired(){return"Required"===this.definition.Decimal2Visibility}get Decimal2_label(){return this.definition.Decimal2Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal2Label"):this.translate.instant("Entity_Decimal2")}get Int1_isVisible(){return!!this.definition.Int1Visibility}get Int1_isRequired(){return"Required"===this.definition.Int1Visibility}get Int1_label(){return this.definition.Int1Label?this.ws.getMultilingualValueImmediate(this.definition,"Int1Label"):this.translate.instant("Entity_Int1")}get Int2_isVisible(){return!!this.definition.Int2Visibility}get Int2_isRequired(){return"Required"===this.definition.Int2Visibility}get Int2_label(){return this.definition.Int2Label?this.ws.getMultilingualValueImmediate(this.definition,"Int2Label"):this.translate.instant("Entity_Int2")}get Lookup1_isVisible(){return!!this.definition.Lookup1Visibility}get Lookup1_isRequired(){return"Required"===this.definition.Lookup1Visibility}get Lookup1_label(){return this.definition.Lookup1Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup1Label"):this.translate.instant("Entity_Lookup1")}get Lookup1_DefinitionId(){return this.definition.Lookup1DefinitionId}get Lookup2_isVisible(){return!!this.definition.Lookup2Visibility}get Lookup2_isRequired(){return"Required"===this.definition.Lookup2Visibility}get Lookup2_label(){return this.definition.Lookup2Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup2Label"):this.translate.instant("Entity_Lookup2")}get Lookup2_DefinitionId(){return this.definition.Lookup2DefinitionId}get Lookup3_isVisible(){return!!this.definition.Lookup3Visibility}get Lookup3_isRequired(){return"Required"===this.definition.Lookup3Visibility}get Lookup3_label(){return this.definition.Lookup3Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup3Label"):this.translate.instant("Entity_Lookup3")}get Lookup3_DefinitionId(){return this.definition.Lookup3DefinitionId}get Lookup4_isVisible(){return!!this.definition.Lookup4Visibility}get Lookup4_isRequired(){return"Required"===this.definition.Lookup4Visibility}get Lookup4_label(){return this.definition.Lookup4Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup4Label"):this.translate.instant("Entity_Lookup4")}get Lookup4_DefinitionId(){return this.definition.Lookup4DefinitionId}get Text1_isVisible(){return!!this.definition.Text1Visibility}get Text1_isRequired(){return"Required"===this.definition.Text1Visibility}get Text1_label(){return this.definition.Text1Label?this.ws.getMultilingualValueImmediate(this.definition,"Text1Label"):this.translate.instant("Entity_Text1")}get Text2_isVisible(){return!!this.definition.Text2Visibility}get Text2_isRequired(){return"Required"===this.definition.Text2Visibility}get Text2_label(){return this.definition.Text2Label?this.ws.getMultilingualValueImmediate(this.definition,"Text2Label"):this.translate.instant("Entity_Text2")}showTabs(e,t){return this.Units_isVisible||this.Location_isVisible||this.reports.length>0&&this.showReports(e,t)}get Unit_isVisible(){return!!this.definition.UnitCardinality}get Unit_isRequired(){return!this.definition.DefaultUnitId}get Unit_default(){return this.definition.DefaultUnitId}get UnitMass_isVisible(){return!!this.definition.UnitMassVisibility}get UnitMass_isRequired(){return"Required"===this.definition.UnitMassVisibility}get Units_isVisible(){return"Multiple"===this.definition.UnitCardinality}Units_count(e){return e&&e.Units?e.Units.length:0}Units_showError(e){return!!e&&!!e.Units&&e.Units.some(e=>!!e.serverErrors)}get Identifier_isVisible(){return!!this.definition.IdentifierVisibility}get Identifier_isRequired(){return"Required"===this.definition.IdentifierVisibility}get Identifier_label(){return this.definition.IdentifierLabel?this.ws.getMultilingualValueImmediate(this.definition,"IdentifierLabel"):this.translate.instant("Resource_Identifier")}get VatRate_isVisible(){return!!this.definition.VatRateVisibility}get VatRate_isRequired(){return"Required"===this.definition.VatRateVisibility}currencyPostfix(e){return e&&e.CurrencyId?` (${this.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")})`:` (${this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")})`}get functionalDecimals(){return this.ws.settings.FunctionalCurrencyDecimals}get functionalPostfix(){return` (${this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")})`}get ReorderLevel_isVisible(){return!!this.definition.ReorderLevelVisibility}get ReorderLevel_isRequired(){return"Required"===this.definition.ReorderLevelVisibility}get EconomicOrderQuantity_isVisible(){return!!this.definition.EconomicOrderQuantityVisibility}get EconomicOrderQuantity_isRequired(){return"Required"===this.definition.EconomicOrderQuantityVisibility}get MonetaryValue_isVisible(){return!!this.definition.MonetaryValueVisibility}get MonetaryValue_isRequired(){return"Required"===this.definition.MonetaryValueVisibility}get MonetaryValue_label(){return this.translate.instant("Resource_MonetaryValue")}MonetaryValue_decimals(e){const t=this.ws.get("Currency",e.CurrencyId);return t?t.E:this.ws.settings.FunctionalCurrencyDecimals}get Participant_isVisible(){return!!this.definition.ParticipantVisibility}get Participant_isRequired(){return"Required"===this.definition.ParticipantVisibility}get Participant_label(){const e=this.ws.definitions.Relations[this.definition.ParticipantDefinitionId];return e?this.ws.getMultilingualValueImmediate(e,"TitleSingular"):this.translate.instant("Resource_Participant")}get Participant_definitionIds(){return[this.definition.ParticipantDefinitionId]}get Location_isVisible(){return!!this.definition.LocationVisibility}Map_showError(e){return!!e&&!!e.serverErrors&&!!e.serverErrors.LocationJson}get zoom(){return+localStorage.map_zoom||2}set zoom(e){localStorage.map_zoom=e}get latitude(){return void 0===this._lat&&(this._lat=+localStorage.map_latitude||0),this._lat}get longitude(){return void 0===this._lng&&(this._lng=+localStorage.map_longitude||0),this._lng}onCenterChange(e){localStorage.map_latitude=e.lat,localStorage.map_longitude=e.lng}parseJson(e){if(this.parseJsonString!==(e=e||void 0))if(this.parseJsonString=e,e)try{this.parseJsonResult=JSON.parse(e),delete this.parseJsonError}catch(t){this.parseJsonError=t,delete this.parseJsonResult}else delete this.parseJsonResult,delete this.parseJsonError;return this.parseJsonResult}onView(e){this.locationView=e}isView(e){return this.locationView===e}showReports(e,t){return!!t&&!!t.Id}get reports(){return this.definition.ReportDefinitions}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}reportTitle(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}state(e){const t=`resources_details_${this.definitionId}_${e.ReportDefinitionId}`,n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new B.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}get activeTabKey(){return`resources_details_${this.definitionId}_activeTab`}get activeTab(){const e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.Units_isVisible?"units":this.Location_isVisible?"location":this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]}set activeTab(e){this.ws.miscState[this.activeTabKey]=e}onExpandReport(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(i.e),o.Pb(i.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-resources-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[o.yb],decls:13,vars:2,consts:[["collection","Resource",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","savePreprocessing","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Resource",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","savePreprocessing","actions"],[3,"showHome"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 t-details-image-container",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"w-100"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"col-12","col-md-4","t-details-image-container"],[3,"metadata"],[1,"border"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../units",3,"itemId"],[3,"ngModel","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],[3,"ngModel","definitionIds","required","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionIds","required","ngModelChange"],["link","../../../currencies",3,"itemId"],["link","../../../centers",3,"itemId"],[3,"ngModel","definitionId","required","ngModelChange",4,"ngIf"],[3,"ngModel","definitionId","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[1,"t-form-group",3,"label"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","units",4,"ngIf"],["ngbNavItem","location",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","units"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header_Unit",""],["row_Unit",""],[1,"t-form-group",3,"serverErrors"],["ngbNavItem","location"],[2,"height","500px"],[1,"h-100","border-bottom","border-left","border-right"],["spellcheck","false",1,"form-control","t-input","p-1","h-100",2,"resize","none",3,"readonly","placeholder","ngModel","ngModelChange"],[1,"h-100",3,"latitude","longitude","zoom","mapTypeControl","panControl","streetViewControl","fitBounds","fitBoundsPadding","centerChange"],["type","max",3,"agmFitBounds","geoJson"],["type","min",3,"agmFitBounds","geoJson"],[3,"geoJson","style",4,"ngIf"],[1,"btn-group","btn-group-toggle","pt-1"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","locationView"],["icon","map-marker-alt"],[1,"d-none","d-md-inline"],["icon","code"],["style","margin-top: -40px",4,"ngIf"],[3,"geoJson"],[2,"margin-top","-40px"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"]],template:function(e,t){if(1&e&&(o.Rc(0,Ey,1,32,"t-details",0),o.Rc(1,xy,1,1,"ng-template",null,1,o.Sc),o.Rc(3,Uy,2,1,"ng-template",null,2,o.Sc),o.Rc(5,zC,43,44,"ng-template",null,3,o.Sc),o.Rc(7,JC,2,3,"ng-template",null,4,o.Sc),o.Rc(9,KC,2,3,"ng-template",null,5,o.Sc),o.Rc(11,YC,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,j.a,nn,pe.a,he.a,te.u,te.k,te.n,pn.a,be,ss,wy,In,Ub,Du,Ou,Fd,Nu,Bb,K.v,K.A,K.x,K.y,K.w,ee.b,Ps.a,Ns.a,te.c,xf,Xf,df,lf,ve.a,x.t,fe.a,is],pipes:[Q.d,tm,Zf,x.D,x.g],encapsulation:2}),e})();function ZC(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",9),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("AccountClassification",e,"Name")),o.Bb(3),o.Uc(n.c[e].Code)}}function eM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"AccountClassification"),"\n")}function tM(e,t){if(1&e&&(o.Vb(0,"span",10),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.ws.getMultilingualValue("AccountClassification",e,"Name"))}}function nM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function iM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function oM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}const cM=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},rM=function(e,t){return[e,t]},sM=function(e){return{template:e,expression:"CreatedById eq me"}},lM=function(e){return[e]},aM=function(e){return{CreatedBy:e}};let uM=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountClassificationApi=this.api.accountClassificationsApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.accountClassificationApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.accountClassificationApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("account-classifications","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.accountClassificationApi=this.api.accountClassificationsApi(this.notifyDestruct$)}get c(){return this.ws.AccountClassification}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-account-classifications-master"]],features:[o.yb],decls:14,vars:32,consts:[["collection","AccountClassification","selectDefault","Code","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,ZC,6,2,"ng-template",null,1,o.Sc),o.Rc(4,eM,2,3,"ng-template",null,2,o.Sc),o.Rc(6,tM,2,1,"ng-template",null,3,o.Sc),o.Rc(8,nM,2,3,"ng-template",null,4,o.Sc),o.Rc(10,iM,2,3,"ng-template",null,5,o.Sc),o.Rc(12,oM,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",o.nc(1,11,"AccountClassifications"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(23,rM,o.zc(13,cM,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(18,cM,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.wc(30,aM,o.wc(28,lM,o.wc(26,sM,s))))}},directives:[Rt.a],pipes:[Q.d],encapsulation:2}),e})();function dM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-account-classifications-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function bM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-account-classifications-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}let fM=(()=>{class e extends As{}return e.\u0275fac=function(t){return mM(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-account-classifications-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","AccountClassification",3,"masterTemplate","ensureAdditionalSelect","theme","filter","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,dM,2,3,"ng-template",null,1,o.Sc),o.Rc(3,bM,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("filter",t.filter)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const mM=o.Xb(fM);function gM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-account-types-master",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("filter",e)("showCreate",n.showCreate)("additionalSelect",n.additionalSelect)}}function pM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-account-types-details",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}let hM=(()=>{class e extends As{}return e.\u0275fac=function(t){return vM(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-account-types-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","AccountType",3,"masterTemplate","ensureAdditionalSelect","theme","filter","detailsTemplate","additionalSelect","entityLoaded"],["master",""],["details",""],[1,"modal-body"],["mode","popup",3,"filter","showCreate","additionalSelect","cancel","choose","create"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,gM,2,3,"ng-template",null,1,o.Sc),o.Rc(3,pM,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("masterTemplate",e)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("filter",t.filter)("detailsTemplate",t.showCreate?n:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const vM=o.Xb(hM);function IM(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function yM(e,t){if(1&e&&(o.Vb(0,"h2",18),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const wM=function(){return{updateOn:"blur"}};function CM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,wM))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function MM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,wM))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function VM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,wM))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function TM(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function EM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,wM))}}function xM(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,TM,2,1,"div",11),o.Rc(3,EM,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function UM(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function RM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,wM))}}function DM(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,UM,2,1,"div",11),o.Rc(3,RM,1,3,"t-text-editor",22),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function BM(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function SM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,wM))}}function kM(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,BM,2,1,"div",11),o.Rc(3,SM,1,3,"t-text-editor",22),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function OM(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function _M(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,wM))}}function LM(e,t){if(1&e&&(o.Vb(0,"t-view-link",24),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("itemId",null==e?null:e.ParentId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("AccountClassification",null==e?null:e.ParentId,"Name"))}}function AM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-classifications-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ParentId=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.ParentId)}}function FM(e,t){if(1&e&&(o.Vb(0,"t-view-link",26),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("itemId",null==e?null:e.AccountTypeParentId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("AccountType",null==e?null:e.AccountTypeParentId,"Name"))}}function PM(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-types-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.AccountTypeParentId=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.AccountTypeParentId)}}function NM(e,t){if(1&e&&(o.Vb(0,"t-form-group",27),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",28),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(2),o.sc("entity",e)}}function jM(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,yM,2,1,"h2",6),o.Rc(2,CM,2,7,"t-text-editor",7),o.Rc(3,MM,2,7,"t-text-editor",8),o.Rc(4,VM,2,7,"t-text-editor",8),o.Ub(),o.Rc(5,xM,4,6,"t-form-group",9),o.Rc(6,DM,4,6,"t-form-group",9),o.Rc(7,kM,4,6,"t-form-group",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Rc(10,OM,2,1,"div",11),o.Rc(11,_M,1,3,"t-text-editor",12),o.Ub(),o.Vb(12,"t-form-group",10),o.mc(13,"translate"),o.Vb(14,"t-restricted",13),o.Rc(15,LM,2,2,"t-view-link",14),o.Ub(),o.Rc(16,AM,1,1,"t-account-classifications-picker",15),o.Ub(),o.Vb(17,"t-form-group",10),o.mc(18,"translate"),o.Vb(19,"t-restricted",13),o.Rc(20,FM,2,2,"t-view-link",16),o.Ub(),o.Rc(21,PM,1,1,"t-account-types-picker",15),o.Ub(),o.Rc(22,NM,3,4,"t-form-group",17)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,23,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(13,25,"TreeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ParentId),o.Bb(2),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Parent),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(18,27,"AccountClassification_AccountTypeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.AccountTypeParentId),o.Bb(2),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.AccountTypeParentId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n)}}function WM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function $M(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const qM=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},QM=function(e,t){return[e,t]};let HM=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountClassificationsApi=this.api.accountClassificationsApi(this.notifyDestruct$),this.expand="Parent,AccountTypeParent",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.onActivate=e=>{e&&e.Id&&this.accountClassificationsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.accountClassificationsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("account-classifications","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.accountClassificationsApi=this.api.accountClassificationsApi(this.notifyDestruct$)}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-account-classifications-details"]],features:[o.yb],decls:10,vars:26,consts:[["collection","AccountClassification",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../account-classifications",3,"itemId",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../account-types",3,"itemId",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["link","../../account-classifications",3,"itemId"],[3,"ngModel","ngModelChange"],["link","../../account-types",3,"itemId"],[1,"t-form-group",3,"label"],["collection","AccountClassification","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,IM,2,1,"ng-template",null,1,o.Sc),o.Rc(4,jM,23,29,"ng-template",null,2,o.Sc),o.Rc(6,WM,2,3,"ng-template",null,3,o.Sc),o.Rc(8,$M,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,9,"AccountClassifications"))("detailsCrumb",e)("documentTemplate",n)("actions",o.xc(23,QM,o.Ac(11,qM,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(17,qM,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,pn.a,he.a,te.u,te.k,te.n,ss,fM,hM,ge.a],pipes:[Q.d],encapsulation:2}),e})();function GM(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",9),o.Qb(4,"t-auto-cell",10),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("AccountType",e,"Name")),o.Bb(2),o.sc("entity",n.c[e])}}function zM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"AccountType"),"\n")}function JM(e,t){if(1&e&&(o.Vb(0,"span",11),o.Qb(1,"t-auto-cell",12),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function KM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function YM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function XM(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SavedByMe")," ")}const ZM=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},eV=function(e,t){return[e,t]},tV=function(e){return{template:e,expression:"SavedById eq me"}},nV=function(e){return[e]},iV=function(e){return{SavedBy:e}};let oV=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountTypesApi=this.api.accountTypesApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.accountTypesApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.accountTypesApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.accountTypesApi=this.api.accountTypesApi(this.notifyDestruct$)}get view(){return"account-types"}get c(){return this.workspace.currentTenant.AccountType}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-account-types-master"]],features:[o.yb],decls:14,vars:32,consts:[["collection","AccountType","selectDefault","IsAssignable,IsActive","selectForTiles","Name,Name2,Name3,Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["savedByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","AccountType","path","Code",3,"entity"],[1,"text-truncate"],["collection","AccountType",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,GM,5,2,"ng-template",null,1,o.Sc),o.Rc(4,zM,2,3,"ng-template",null,2,o.Sc),o.Rc(6,JM,2,1,"ng-template",null,3,o.Sc),o.Rc(8,KM,2,3,"ng-template",null,4,o.Sc),o.Rc(10,YM,2,3,"ng-template",null,5,o.Sc),o.Rc(12,XM,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",o.nc(1,11,"AccountTypes"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(23,eV,o.zc(13,ZM,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(18,ZM,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.wc(30,iV,o.wc(28,nV,o.wc(26,tV,s))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();var cV=n("19uq");function rV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-relation-definitions-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function sV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-relation-definitions-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let lV=(()=>{class e extends As{}return e.\u0275fac=function(t){return aV(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-relation-definitions-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","RelationDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,rV,2,3,"ng-template",null,1,o.Sc),o.Rc(3,sV,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const aV=o.Xb(lV);function uV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-entry-types-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function dV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-entry-types-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let bV=(()=>{class e extends As{}return e.\u0275fac=function(t){return fV(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-entry-types-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","EntryType",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,uV,2,3,"ng-template",null,1,o.Sc),o.Rc(3,dV,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},encapsulation:2}),e})();const fV=o.Xb(bV);var mV=n("Fhnx");const gV=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},pV=function(e,t,n){return{template:e,action:t,showAction:n}},hV=function(e,t,n){return[e,t,n]};function vV(e,t){if(1&e&&o.Qb(0,"t-details",7),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(6),i=o.Fc(8),c=o.Fc(10),r=o.Fc(12);o.sc("definitionId",e.definitionId)("createFunc",e.create)("cloneFunc",e.clone)("expand",e.expand)("mode",e.mode)("additionalSelect",e.additionalSelect)("idString",e.idString)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("documentTemplate",n)("actions",o.yc(27,hV,o.Ac(11,gV,i,e.onActivate,e.showActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.Ac(17,gV,c,e.onDeactivate,e.showDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.yc(23,pV,r,e.onEditDefinition,e.showEditDefinition)))}}function IV(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",8),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function yV(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function wV(e,t){if(1&e&&(o.Vb(0,"h2",20),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const CV=function(){return{updateOn:"blur"}};function MV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,CV))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function VV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,CV))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function TV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,CV))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function EV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-image",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Image=t})),o.Ub()}if(2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("src",t.Id?"custodies/"+i.definitionId+"/"+t.Id+"/image":null)("imageId",null==t?null:t.ImageId)("ngModel",t.Image)("isEdit",n)}}function xV(e,t){if(1&e&&(o.Vb(0,"div",23),o.Vb(1,"t-restricted",24),o.Vb(2,"div",25),o.Rc(3,EV,1,4,"t-image",26),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ImageId),o.Bb(2),o.sc("ngIf",!!e)}}function UV(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function RV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",29),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,CV))}}function DV(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,UV,2,1,"div",16),o.Rc(3,RV,1,3,"t-text-editor",28),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function BV(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function SV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,CV))}}function kV(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,BV,2,1,"div",16),o.Rc(3,SV,1,3,"t-text-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function OV(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function _V(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,CV))}}function LV(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,OV,2,1,"div",16),o.Rc(3,_V,1,3,"t-text-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function AV(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function FV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,CV))}}function PV(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",33),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Currency),o.Bb(1),o.sc("itemId",null==e?null:e.CurrencyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")," ")}}function NV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CurrencyId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CurrencyId)("required",t.Currency_isRequired)}}function jV(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,PV,3,3,"t-restricted",31),o.Rc(2,NV,1,2,"t-currencies-picker",32),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Currency_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function WV(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",36),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Center),o.Bb(1),o.sc("itemId",null==e?null:e.CenterId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Center",e.CenterId,"Name")," ")}}function $V(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",37),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CenterId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CenterId)("required",t.Center_isRequired)}}function qV(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,WV,3,3,"t-restricted",31),o.Rc(2,$V,1,2,"t-centers-picker",35),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Center_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function QV(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",39),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Custodian),o.Bb(1),o.sc("link","../../../relations/"+t.Custodian_definitionIds[0])("itemId",null==e?null:e.CustodianId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",e.CustodianId,"Name")," ")}}function HV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CustodianId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CustodianId)("definitionIds",t.Custodian_definitionIds)("required",t.Custodian_isRequired)}}function GV(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,QV,3,4,"t-restricted",31),o.Rc(2,HV,1,3,"t-relations-picker",38),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Custodian_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodianId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function zV(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",39),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup1Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup1),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup1Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup1Id,"Name")," ")}}function JV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",42),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup1Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup1Id)("definitionId",t.Lookup1_DefinitionId)("required",t.Lookup1_isRequired)}}function KV(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,zV,3,4,"t-restricted",31),o.Rc(2,JV,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup1Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function YV(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",39),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup2Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup2),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup2Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup2Id,"Name")," ")}}function XV(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",42),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup2Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup2Id)("definitionId",t.Lookup2_DefinitionId)("required",t.Lookup2_isRequired)}}function ZV(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,YV,3,4,"t-restricted",31),o.Rc(2,XV,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup2Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function eT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",39),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup3Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup3),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup3Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup3Id,"Name")," ")}}function tT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",42),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup3Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup3Id)("definitionId",t.Lookup3_DefinitionId)("required",t.Lookup3_isRequired)}}function nT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,eT,3,4,"t-restricted",31),o.Rc(2,tT,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup3_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup3Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function iT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"t-view-link",39),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();var n;const i="../../../lookups/"+(null==(n=t.ws.get("Lookup",e.Lookup4Id))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lookup4),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.Lookup4Id),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Lookup",e.Lookup4Id,"Name")," ")}}function oT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",42),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Lookup4Id=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Lookup4Id)("definitionId",t.Lookup4_DefinitionId)("required",t.Lookup4_isRequired)}}function cT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,iT,3,4,"t-restricted",31),o.Rc(2,oT,1,3,"t-lookups-picker",41),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Lookup4_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Lookup4Id),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function rT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal1),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Decimal1,"1.0-4"))}}function sT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",44),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Decimal1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Decimal1)("ngModelOptions",o.vc(5,CV))("required",t.Decimal1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function lT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,rT,4,5,"t-restricted",31),o.Rc(2,sT,1,6,"t-decimal-editor",43),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Decimal1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function aT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Decimal2),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Decimal2,"1.0-4"))}}function uT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",44),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Decimal2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Decimal2)("ngModelOptions",o.vc(5,CV))("required",t.Decimal2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",4)}}function dT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,aT,4,5,"t-restricted",31),o.Rc(2,uT,1,6,"t-decimal-editor",43),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Decimal2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Decimal2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function bT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int1),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Int1,"1.0-0"))}}function fT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",44),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Int1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Int1)("ngModelOptions",o.vc(5,CV))("required",t.Int1_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function mT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,bT,4,5,"t-restricted",31),o.Rc(2,fT,1,6,"t-decimal-editor",43),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Int1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function gT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Int2),o.Bb(2),o.Uc(o.oc(3,2,null==e?null:e.Int2,"1.0-0"))}}function pT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",44),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Int2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Int2)("ngModelOptions",o.vc(5,CV))("required",t.Int2_isRequired)("minDecimalPlaces",0)("maxDecimalPlaces",0)}}function hT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,gT,4,5,"t-restricted",31),o.Rc(2,pT,1,6,"t-decimal-editor",43),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Int2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Int2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function vT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text1),o.Bb(2),o.Uc(null==e?null:e.Text1)}}function IT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Text1=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Text1)("ngModelOptions",o.vc(3,CV))("required",t.Text1_isRequired)}}function yT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,vT,3,2,"t-restricted",31),o.Rc(2,IT,1,4,"t-text-editor",45),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Text1_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text1),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function wT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Text2),o.Bb(2),o.Uc(null==e?null:e.Text2)}}function CT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Text2=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Text2)("ngModelOptions",o.vc(3,CV))("required",t.Text2_isRequired)}}function MT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,wT,3,2,"t-restricted",31),o.Rc(2,CT,1,4,"t-text-editor",45),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.Text2_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Text2),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function VT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.FromDate),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.FromDate))}}function TT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.FromDate=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.FromDate)("ngModelOptions",o.vc(3,CV))("required",t.FromDate_isRequired)}}function ET(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,VT,4,4,"t-restricted",31),o.Rc(2,TT,1,4,"t-date-picker",45),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.FromDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.FromDate),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function xT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ToDate),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.ToDate))}}function UT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ToDate=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ToDate)("ngModelOptions",o.vc(3,CV))("required",t.ToDate_isRequired)}}function RT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,xT,4,4,"t-restricted",31),o.Rc(2,UT,1,4,"t-date-picker",45),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.ToDate_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ToDate),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function DT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ExternalReference),o.Bb(2),o.Uc(null==e?null:e.ExternalReference)}}function BT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ExternalReference=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ExternalReference)("ngModelOptions",o.vc(3,CV))("required",t.ExternalReference_isRequired)}}function ST(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.Rc(1,DT,3,2,"t-restricted",31),o.Rc(2,BT,1,4,"t-text-editor",45),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.ExternalReference_label)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReference),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function kT(e,t){if(1&e&&(o.Vb(0,"div",48),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description)}}function OT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,kT,2,1,"div",47),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description),o.Bb(1),o.sc("ngIf",!n)}}function _T(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Description)("ngModelOptions",o.vc(3,CV))("required",t.Description_isRequired)}}function LT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,OT,2,2,"t-restricted",31),o.Rc(3,_T,1,4,"t-multiline-editor",45),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function AT(e,t){if(1&e&&(o.Vb(0,"div",48),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description2)}}function FT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,AT,2,1,"div",47),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description2),o.Bb(1),o.sc("ngIf",!n)}}function PT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description2)("ngModelOptions",o.vc(2,CV))}}function NT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,FT,2,2,"t-restricted",31),o.Rc(3,PT,1,3,"t-multiline-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function jT(e,t){if(1&e&&(o.Vb(0,"div",48),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description3)}}function WT(e,t){if(1&e&&(o.Vb(0,"t-restricted",24),o.Rc(1,jT,2,1,"div",47),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.Description3),o.Bb(1),o.sc("ngIf",!n)}}function $T(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description3)("ngModelOptions",o.vc(2,CV))}}function qT(e,t){if(1&e&&(o.Vb(0,"t-form-group",15),o.mc(1,"translate"),o.Rc(2,WT,2,2,"t-restricted",31),o.Rc(3,$T,1,3,"t-multiline-editor",17),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function QT(e,t){if(1&e&&(o.Vb(0,"t-form-group",49),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(3),o.Uc(o.nc(4,4,e?e.IsActive?"Active":"Inactive":""))}}function HT(e,t){1&e&&(o.Vb(0,"span",59),o.Qb(1,"fa-icon",60),o.Tc(2,"\xa0 "),o.Ub())}function GT(e,t){if(1&e&&o.Qb(0,"agm-data-layer",75),2&e){const e=o.lc(4).model,t=o.lc();o.Pc(t.styleFunc),o.sc("geoJson",t.parseJson(null==e?null:e.LocationJson))}}function zT(e,t){if(1&e&&(o.Vb(0,"t-error-message",76),o.Tc(1),o.Ub()),2&e){const e=o.lc(5);o.Bb(1),o.Vc(" ",e.parseJsonError," ")}}function JT(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-restricted",24),o.Vb(1,"div",61),o.Vb(2,"div",62),o.Vb(3,"textarea",63),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.LocationJson=t})),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"agm-map",64),o.hc("centerChange",(function(t){return o.Ic(e),o.lc(4).onCenterChange(t)})),o.Qb(6,"t-map-bounds-fitter",65),o.Qb(7,"t-map-bounds-fitter",66),o.Rc(8,GT,1,3,"agm-data-layer",67),o.Ub(),o.Ub(),o.Vb(9,"div",68),o.Vb(10,"label",69),o.hc("click",(function(){return o.Ic(e),o.lc(4).onView("map")})),o.mc(11,"translate"),o.Qb(12,"input",70),o.Qb(13,"fa-icon",71),o.Vb(14,"span",72),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Ub(),o.Vb(17,"label",69),o.hc("click",(function(){return o.Ic(e),o.lc(4).onView("json")})),o.mc(18,"translate"),o.Qb(19,"input",70),o.Qb(20,"fa-icon",73),o.Vb(21,"span",72),o.Tc(22),o.mc(23,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Rc(24,zT,2,1,"t-error-message",74),o.Ub()}if(2&e){const e=o.lc(3),t=e.model,n=e.isEdit,i=o.lc();o.Gb("p-4",1===(null==t||null==t.EntityMetadata?null:t.EntityMetadata.LocationJson)),o.sc("metadata",null==t||null==t.EntityMetadata?null:t.EntityMetadata.LocationJson),o.Bb(2),o.Gb("d-none",!i.isView("json"))("t-hidden-cursor",!n),o.Bb(1),o.sc("readonly",!n)("placeholder",o.nc(4,34,"GeoJSON")+"...")("ngModel",t.LocationJson),o.Bb(2),o.Gb("d-none",!i.isView("map")),o.sc("latitude",i.latitude)("longitude",i.longitude)("zoom",6)("mapTypeControl",!0)("panControl",!0)("streetViewControl",!1)("fitBounds",!(null==t||!t.Id))("fitBoundsPadding",100),o.Bb(1),o.sc("agmFitBounds",!0)("geoJson",i.parseJson(null==t?null:t.LocationJson)),o.Bb(1),o.sc("agmFitBounds",!0)("geoJson",i.parseJson(null==t?null:t.LocationJson)),o.Bb(1),o.sc("ngIf",!!i.parseJson(null==t?null:t.LocationJson)),o.Bb(2),o.Gb("active",i.isView("map")),o.tc("title",o.nc(11,36,"Map")),o.Bb(5),o.Vc("\xa0\xa0",o.nc(16,38,"Map"),""),o.Bb(2),o.Gb("active",i.isView("json")),o.tc("title",o.nc(18,40,"GeoJSON")),o.Bb(5),o.Vc("\xa0\xa0",o.nc(23,42,"GeoJSON"),""),o.Bb(2),o.sc("ngIf",!!i.parseJsonError)}}function KT(e,t){if(1&e&&(o.Vb(0,"li",54),o.Vb(1,"a",55),o.Rc(2,HT,3,0,"span",56),o.Vb(3,"span",57),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Rc(6,JT,25,44,"ng-template",58),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("ngIf",t.Map_showError(e)),o.Bb(2),o.Uc(o.nc(5,2,"Entity_Location"))}}const YT=function(e,t){return{id:e,cache_buster:t}};function XT(e,t){if(1&e&&(o.Vb(0,"div",81),o.Qb(1,"t-report-results",82),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3).model,n=o.lc();o.Bb(1),o.sc("definition",n.reportDefinition(e))("arguments",o.xc(4,YT,null==t?null:t.Id,null==t||null==t.EntityMetadata?null:t.EntityMetadata.$refresh))("view",n.reportView(e))("state",n.state(e))}}function ZT(e,t){if(1&e&&(o.Vb(0,"li",79),o.Vb(1,"a",80),o.Vb(2,"span",57),o.Tc(3),o.Ub(),o.Ub(),o.Rc(4,XT,2,7,"ng-template",58),o.Ub()),2&e){const e=t.$implicit;o.lc();const n=o.Fc(3),i=o.lc(3);o.sc("ngbNavItem",e.ReportDefinitionId),o.Bb(1),o.sc("tContextMenu",n)("tContext",e.ReportDefinitionId),o.Bb(2),o.Uc(i.reportTitle(e))}}function eE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",83),o.Vb(1,"ul",84),o.Vb(2,"li",85),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.close,c=o.lc(3).model;return o.lc().onExpandReport(n,c),i()})),o.Vb(3,"div",86),o.Qb(4,"fa-icon",87),o.Ub(),o.Vb(5,"div",88),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}2&e&&(o.Bb(6),o.Vc(" ",o.nc(7,1,"Expand")," "))}function tE(e,t){if(1&e&&(o.Tb(0),o.Rc(1,ZT,5,4,"li",77),o.Rc(2,eE,8,3,"ng-template",null,78,o.Sc),o.Sb()),2&e){const e=o.lc(3);o.Bb(1),o.sc("ngForOf",e.reports)}}function nE(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"ul",50,51),o.hc("activeIdChange",(function(t){return o.Ic(e),o.lc(2).activeTab=t})),o.Rc(3,KT,7,4,"li",52),o.Rc(4,tE,4,1,"ng-container",16),o.Ub(),o.Qb(5,"div",53),o.Sb()}if(2&e){const e=o.Fc(2),t=o.lc(),n=t.isEdit,i=t.model,c=o.lc();o.Bb(1),o.sc("destroyOnHide",!0)("activeId",c.activeTab),o.Bb(2),o.sc("ngIf",c.Location_isVisible),o.Bb(1),o.sc("ngIf",c.showReports(n,i)),o.Bb(1),o.sc("ngbNavOutlet",e)}}function iE(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.Rc(1,wV,2,1,"h2",10),o.Rc(2,MV,2,7,"t-text-editor",11),o.Rc(3,VV,2,7,"t-text-editor",12),o.Rc(4,TV,2,7,"t-text-editor",12),o.Ub(),o.Rc(5,xV,4,2,"div",13),o.Rc(6,DV,4,6,"t-form-group",14),o.Rc(7,kV,4,6,"t-form-group",14),o.Rc(8,LV,4,6,"t-form-group",14),o.Vb(9,"t-form-group",15),o.mc(10,"translate"),o.Rc(11,AV,2,1,"div",16),o.Rc(12,FV,1,3,"t-text-editor",17),o.Ub(),o.Rc(13,jV,3,4,"t-form-group",14),o.Rc(14,qV,3,4,"t-form-group",14),o.Rc(15,GV,3,4,"t-form-group",14),o.Rc(16,KV,3,4,"t-form-group",14),o.Rc(17,ZV,3,4,"t-form-group",14),o.Rc(18,nT,3,4,"t-form-group",14),o.Rc(19,cT,3,4,"t-form-group",14),o.Rc(20,lT,3,4,"t-form-group",14),o.Rc(21,dT,3,4,"t-form-group",14),o.Rc(22,mT,3,4,"t-form-group",14),o.Rc(23,hT,3,4,"t-form-group",14),o.Rc(24,yT,3,4,"t-form-group",14),o.Rc(25,MT,3,4,"t-form-group",14),o.Rc(26,ET,3,4,"t-form-group",14),o.Rc(27,RT,3,4,"t-form-group",14),o.Rc(28,ST,3,4,"t-form-group",14),o.Qb(29,"div",18),o.Rc(30,LT,4,6,"t-form-group",14),o.Rc(31,NT,4,6,"t-form-group",14),o.Rc(32,qT,4,6,"t-form-group",14),o.Rc(33,QT,5,6,"t-form-group",19),o.Rc(34,nE,6,5,"ng-container",16)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",i.Image_isVisible),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(10,34,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.Currency_isVisible),o.Bb(1),o.sc("ngIf",i.Center_isVisible),o.Bb(1),o.sc("ngIf",i.Custodian_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup1_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup2_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup3_isVisible),o.Bb(1),o.sc("ngIf",i.Lookup4_isVisible),o.Bb(1),o.sc("ngIf",i.Decimal1_isVisible),o.Bb(1),o.sc("ngIf",i.Decimal2_isVisible),o.Bb(1),o.sc("ngIf",i.Int1_isVisible),o.Bb(1),o.sc("ngIf",i.Int2_isVisible),o.Bb(1),o.sc("ngIf",i.Text1_isVisible),o.Bb(1),o.sc("ngIf",i.Text2_isVisible),o.Bb(1),o.sc("ngIf",i.FromDate_isVisible),o.Bb(1),o.sc("ngIf",i.ToDate_isVisible),o.Bb(1),o.sc("ngIf",i.ExternalReference_isVisible),o.Bb(2),o.sc("ngIf",i.Description_isVisible),o.Bb(1),o.sc("ngIf",i.Description_isVisible&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.Description_isVisible&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",i.showTabs(n,e))}}function oE(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function cE(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function rE(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"EditDefinition")," ")}let sE=(()=>{class e extends gn.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.translate=n,this.router=i,this.route=o,this.custodiesApi=this.api.custodiesApi(null,this.notifyDestruct$),this.expand="Currency,Center,Lookup1,Lookup2,Lookup3,Lookup4,Custodian",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.custodiesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.custodiesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onEditDefinition=e=>{const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../../custody-definitions",this.definitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.showEditDefinition=e=>this.ws.canDo("custody-definitions","Update",null),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.styleFunc=e=>{const t={clickable:!1},n=["fillColor","fillOpacity","icon","strokeColor","shape","strokeOpacity","strokeWeight","visible"];for(const i of n){const n=e.getProperty(i);null!=n&&(t[i]=n)}return t},this.locationView="map"}set definitionId(e){this._definitionId!==e&&(this.custodiesApi=this.api.custodiesApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`custodies/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Custodies[this.definitionId]:null)}get found(){return!!this.definition}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}get Currency_isVisible(){return!!this.definition.CurrencyVisibility}get Currency_isRequired(){return"Required"===this.definition.CurrencyVisibility}get Currency_label(){return this.translate.instant("Entity_Currency")}get Center_isVisible(){return!!this.definition.CenterVisibility}get Center_isRequired(){return"Required"===this.definition.CenterVisibility}get Center_label(){return this.translate.instant("Entity_Center")}get Custodian_isVisible(){return!!this.definition.CustodianVisibility}get Custodian_isRequired(){return"Required"===this.definition.CustodianVisibility}get Custodian_label(){const e=this.ws.definitions.Relations[this.definition.CustodianDefinitionId];return e?this.ws.getMultilingualValueImmediate(e,"TitleSingular"):this.translate.instant("Custody_Custodian")}get Custodian_definitionIds(){return[this.definition.CustodianDefinitionId]}get Image_isVisible(){return!!this.definition.ImageVisibility}get Description_isVisible(){return!!this.definition.DescriptionVisibility}get Description_isRequired(){return"Required"===this.definition.DescriptionVisibility}get FromDate_isVisible(){return!!this.definition.FromDateVisibility}get FromDate_isRequired(){return"Required"===this.definition.FromDateVisibility}get FromDate_label(){return this.definition.FromDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"FromDateLabel"):this.translate.instant("Entity_FromDate")}get ToDate_isVisible(){return!!this.definition.ToDateVisibility}get ToDate_isRequired(){return"Required"===this.definition.ToDateVisibility}get ToDate_label(){return this.definition.ToDateLabel?this.ws.getMultilingualValueImmediate(this.definition,"ToDateLabel"):this.translate.instant("Entity_ToDate")}get Decimal1_isVisible(){return!!this.definition.Decimal1Visibility}get Decimal1_isRequired(){return"Required"===this.definition.Decimal1Visibility}get Decimal1_label(){return this.definition.Decimal1Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal1Label"):this.translate.instant("Entity_Decimal1")}get Decimal2_isVisible(){return!!this.definition.Decimal2Visibility}get Decimal2_isRequired(){return"Required"===this.definition.Decimal2Visibility}get Decimal2_label(){return this.definition.Decimal2Label?this.ws.getMultilingualValueImmediate(this.definition,"Decimal2Label"):this.translate.instant("Entity_Decimal2")}get Int1_isVisible(){return!!this.definition.Int1Visibility}get Int1_isRequired(){return"Required"===this.definition.Int1Visibility}get Int1_label(){return this.definition.Int1Label?this.ws.getMultilingualValueImmediate(this.definition,"Int1Label"):this.translate.instant("Entity_Int1")}get Int2_isVisible(){return!!this.definition.Int2Visibility}get Int2_isRequired(){return"Required"===this.definition.Int2Visibility}get Int2_label(){return this.definition.Int2Label?this.ws.getMultilingualValueImmediate(this.definition,"Int2Label"):this.translate.instant("Entity_Int2")}get Lookup1_isVisible(){return!!this.definition.Lookup1Visibility}get Lookup1_isRequired(){return"Required"===this.definition.Lookup1Visibility}get Lookup1_label(){return this.definition.Lookup1Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup1Label"):this.translate.instant("Entity_Lookup1")}get Lookup1_DefinitionId(){return this.definition.Lookup1DefinitionId}get Lookup2_isVisible(){return!!this.definition.Lookup2Visibility}get Lookup2_isRequired(){return"Required"===this.definition.Lookup2Visibility}get Lookup2_label(){return this.definition.Lookup2Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup2Label"):this.translate.instant("Entity_Lookup2")}get Lookup2_DefinitionId(){return this.definition.Lookup2DefinitionId}get Lookup3_isVisible(){return!!this.definition.Lookup3Visibility}get Lookup3_isRequired(){return"Required"===this.definition.Lookup3Visibility}get Lookup3_label(){return this.definition.Lookup3Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup3Label"):this.translate.instant("Entity_Lookup3")}get Lookup3_DefinitionId(){return this.definition.Lookup3DefinitionId}get Lookup4_isVisible(){return!!this.definition.Lookup4Visibility}get Lookup4_isRequired(){return"Required"===this.definition.Lookup4Visibility}get Lookup4_label(){return this.definition.Lookup4Label?this.ws.getMultilingualValueImmediate(this.definition,"Lookup4Label"):this.translate.instant("Entity_Lookup4")}get Lookup4_DefinitionId(){return this.definition.Lookup4DefinitionId}get Text1_isVisible(){return!!this.definition.Text1Visibility}get Text1_isRequired(){return"Required"===this.definition.Text1Visibility}get Text1_label(){return this.definition.Text1Label?this.ws.getMultilingualValueImmediate(this.definition,"Text1Label"):this.translate.instant("Entity_Text1")}get Text2_isVisible(){return!!this.definition.Text2Visibility}get Text2_isRequired(){return"Required"===this.definition.Text2Visibility}get Text2_label(){return this.definition.Text2Label?this.ws.getMultilingualValueImmediate(this.definition,"Text2Label"):this.translate.instant("Entity_Text2")}get ExternalReference_isVisible(){return!!this.definition.ExternalReferenceVisibility}get ExternalReference_isRequired(){return"Required"===this.definition.ExternalReferenceVisibility}get ExternalReference_label(){return this.definition.ExternalReferenceLabel?this.ws.getMultilingualValueImmediate(this.definition,"ExternalReferenceLabel"):this.translate.instant("Custody_ExternalReference")}showTabs(e,t){return this.Location_isVisible||this.reports.length>0&&this.showReports(e,t)}get Location_isVisible(){return!!this.definition.LocationVisibility}Map_showError(e){return!!e&&!!e.serverErrors&&!!e.serverErrors.LocationJson}get zoom(){return+localStorage.map_zoom||2}set zoom(e){localStorage.map_zoom=e}get latitude(){return void 0===this._lat&&(this._lat=+localStorage.map_latitude||0),this._lat}get longitude(){return void 0===this._lng&&(this._lng=+localStorage.map_longitude||0),this._lng}onCenterChange(e){localStorage.map_latitude=e.lat,localStorage.map_longitude=e.lng}parseJson(e){if(this.parseJsonString!==(e=e||void 0))if(this.parseJsonString=e,e)try{this.parseJsonResult=JSON.parse(e),delete this.parseJsonError}catch(t){this.parseJsonError=t,delete this.parseJsonResult}else delete this.parseJsonResult,delete this.parseJsonError;return this.parseJsonResult}onView(e){this.locationView=e}isView(e){return this.locationView===e}showReports(e,t){return!!t&&!!t.Id}get reports(){return this.definition.ReportDefinitions}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}reportTitle(e){return this.ws.getMultilingualValueImmediate(e,"Name")||this.ws.getMultilingualValueImmediate(this.reportDefinition(e),"Title")||this.translate.instant("Untitled")}state(e){const t=`custodies_details_${this.definitionId}_${e.ReportDefinitionId}`,n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new B.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}get activeTabKey(){return`custodies_details_${this.definitionId}_activeTab`}get activeTab(){const e=this.activeTabKey,t=this.ws.miscState;return t[e]||(t[e]=this.Location_isVisible?"location":this.reports.length>0?this.reports[0].ReportDefinitionId:"<unknown>"),t[e]}set activeTab(e){this.ws.miscState[this.activeTabKey]=e}onExpandReport(e,t){this.router.navigate(["../../../report",e,{id:t.Id}],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(i.e),o.Pb(i.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-custodies-details"]],inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[o.yb],decls:13,vars:2,consts:[["collection","Custody",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],["editDefinition",""],["collection","Custody",3,"definitionId","createFunc","cloneFunc","expand","mode","additionalSelect","idString","masterCrumb","detailsCrumb","documentTemplate","actions"],[3,"showHome"],[1,"col-12","col-md-8","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","col-12 col-md-4 t-details-image-container",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"w-100"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[1,"col-12","col-md-4","t-details-image-container"],[3,"metadata"],[1,"border"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange",4,"ngIf"],["icon","camera",3,"src","imageId","ngModel","isEdit","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"metadata",4,"ngIf"],[3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../currencies",3,"itemId"],[3,"ngModel","required","ngModelChange"],["filter","CenterType eq 'BusinessUnit'",3,"ngModel","required","ngModelChange",4,"ngIf"],["link","../../../centers",3,"itemId"],["filter","CenterType eq 'BusinessUnit'",3,"ngModel","required","ngModelChange"],[3,"ngModel","definitionIds","required","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionIds","required","ngModelChange"],[3,"ngModel","definitionId","required","ngModelChange",4,"ngIf"],[3,"ngModel","definitionId","required","ngModelChange"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[1,"t-form-group",3,"label"],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","location",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["ngbNavItem","location"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],[1,"text-danger"],["icon","exclamation"],[2,"height","500px"],[1,"h-100","border-bottom","border-left","border-right"],["spellcheck","false",1,"form-control","t-input","p-1","h-100",2,"resize","none",3,"readonly","placeholder","ngModel","ngModelChange"],[1,"h-100",3,"latitude","longitude","zoom","mapTypeControl","panControl","streetViewControl","fitBounds","fitBoundsPadding","centerChange"],["type","max",3,"agmFitBounds","geoJson"],["type","min",3,"agmFitBounds","geoJson"],[3,"geoJson","style",4,"ngIf"],[1,"btn-group","btn-group-toggle","pt-1"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio","name","locationView"],["icon","map-marker-alt"],[1,"d-none","d-md-inline"],["icon","code"],["style","margin-top: -40px",4,"ngIf"],[3,"geoJson"],[2,"margin-top","-40px"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["expandContextMenu",""],[3,"ngbNavItem"],["ngbNavLink","",3,"tContextMenu","tContext"],[1,"bg-light",2,"height","450px"],["mode","embedded",1,"h-100","w-100",3,"definition","arguments","view","state"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],["icon","expand"],[1,"t-menu-text"]],template:function(e,t){if(1&e&&(o.Rc(0,vV,1,31,"t-details",0),o.Rc(1,IV,1,1,"ng-template",null,1,o.Sc),o.Rc(3,yV,2,1,"ng-template",null,2,o.Sc),o.Rc(5,iE,35,36,"ng-template",null,3,o.Sc),o.Rc(7,oE,2,3,"ng-template",null,4,o.Sc),o.Rc(9,cE,2,3,"ng-template",null,5,o.Sc),o.Rc(11,rE,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,j.a,nn,pe.a,he.a,te.u,te.k,te.n,pn.a,be,ss,Du,Ou,Ub,Fd,In,Nu,Bb,K.v,K.A,K.x,K.y,K.w,ee.b,te.c,xf,Xf,df,lf,ve.a,x.t,fe.a,is],pipes:[Q.d,tm,Zf],encapsulation:2}),e})();var lE=n("GQwt"),aE=n("+NbP");let uE=(()=>{class e{constructor(){this.lastId=0}getId(){return this.lastId++,this.lastId}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function dE(e,t){1&e&&(o.Vb(0,"span",14),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NotSupportedForDisplay")," "))}function bE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",15),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)}}function fE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",16),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("minDecimalPlaces",e.minDecimalPlaces)("maxDecimalPlaces",e.maxDecimalPlaces)("noSeparator",e.noSeparator)}}function mE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",17),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("minDecimalPlaces",e.minDecimalPlaces)("maxDecimalPlaces",e.maxDecimalPlaces)("noSeparator",e.noSeparator)("isPercentage",!0)}}function gE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-serial-editor",18),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("prefix",e.prefix)("codeWidth",e.codeWidth)}}function pE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("calendar",e.calendar)("granularity",e.dateGranularity)}}function hE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("calendar",e.calendar)}}function vE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("choices",e.choices)}}function IE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",22),o.Vb(1,"input",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub(),o.Vb(2,"label",24),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(1),o.tc("id",e.checkboxId),o.sc("ngModel",e.value),o.Bb(1),o.tc("for",e.checkboxId)}}function yE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-classifications-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function wE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-ifrs-concepts-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function CE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-types-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function ME(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-accounts-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function VE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-agents-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function TE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",26),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("definitionIds",e.definitionIds)("showCreate",!1)("filter",e.filter)}}function EE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function xE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function UE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("definitionId",e.definitionId)("showCreate",!1)("filter",e.filter)}}function RE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-units-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function DE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custodies-picker",26),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("definitionIds",e.definitionIds)("showCreate",!1)("filter",e.filter)}}function BE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resources-picker",26),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("definitionIds",e.definitionIds)("showCreate",!1)("filter",e.filter)}}function SE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function kE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-roles-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function OE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-users-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function _E(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relation-definitions-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function LE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custody-definitions-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function AE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resource-definitions-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function FE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookup-definitions-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function PE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-document-definitions-picker",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().value=t})),o.Ub()}if(2&e){const e=o.lc();o.sc("ngModel",e.value)("showCreate",!1)("filter",e.filter)}}function NE(e,t){if(1&e&&(o.Vb(0,"div",28),o.Tc(1),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.Vc(" TODO: control for '",e.desc.control,"'' ")}}let jE=(()=>{class e{constructor(e){this.id=e,this.w100=!0,this.definitionIdArray=[],this.isDisabled=!1,this.onChangeFn=e=>{},this.onTouchedFn=()=>{}}get control(){return this._control}set control(e){this._control!==e&&(this._control=e,this.initializeNewControl(e))}initializeNewControl(e){if(e&&e.valueAccessor){const t=e.valueAccessor;t.writeValue(this.value),t.registerOnChange(this.onChangeFn),t.registerOnTouched(this.onTouchedFn),t.setDisabledState&&t.setDisabledState(this.isDisabled)}}writeValue(e){this.value=e;const t=this.control;t&&t.valueAccessor&&t.valueAccessor.writeValue(this.value)}registerOnChange(e){this.onChangeFn=e;const t=this.control;t&&t.valueAccessor&&t.valueAccessor.registerOnChange(this.onChangeFn)}registerOnTouched(e){this.onTouchedFn=e;const t=this.control;t&&t.valueAccessor&&t.valueAccessor.registerOnTouched(this.onTouchedFn)}setDisabledState(e){this.isDisabled=e;const t=this.control;t&&t.valueAccessor&&t.valueAccessor.setDisabledState&&t.valueAccessor.setDisabledState(this.isDisabled)}get checkboxId(){return this._checkboxId||(this._checkboxId=this.id.getId()+""),this._checkboxId}get minDecimalPlaces(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.minDecimalPlaces:(console.error(`Editor error: requesting minDecimalPlaces from a ${this.desc.control}`),0)}get maxDecimalPlaces(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.maxDecimalPlaces:(console.error(`Editor error: requesting maxDecimalPlaces from a ${this.desc.control}`),0)}get noSeparator(){return"number"===this.desc.control||"percent"===this.desc.control?this.desc.noSeparator:(console.error(`Editor error: requesting noSeparator from a ${this.desc.control}`),!0)}get prefix(){return"serial"===this.desc.control?this.desc.prefix:(console.error(`Editor error: requesting prefix from a ${this.desc.control}`),"")}get codeWidth(){return"serial"===this.desc.control?this.desc.codeWidth:(console.error(`Editor error: requesting codeWidth from a ${this.desc.control}`),4)}get choices(){return"choice"===this.desc.control?Object(wi.c)(this.desc):(console.error(`Editor error: requesting choices from a ${this.desc.control}`),[])}get dateGranularity(){if("date"===this.desc.control)return this.desc.granularity;console.error(`Editor error: requesting granularity from a ${this.desc.control}`)}get dateTimeGranularity(){if("datetime"===this.desc.control)return this.desc.granularity;console.error(`Editor error: requesting granularity from a ${this.desc.control}`)}get calendar(){if("date"===this.desc.control||"datetime"===this.desc.control)return this.desc.calendar;console.error(`Editor error: requesting calendar from a ${this.desc.control}`)}get filter(){return this.desc.filter}get definitionId(){return this.desc.definitionId}get definitionIds(){const e=this.desc.definitionId;return this.definitionIdForArray!==e&&(this.definitionIdForArray=e,this.definitionIdArray=e?[e]:[]),this.definitionIdArray}validate(e){return this.control&&this.control.validator?this.control.validator(e):null}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(uE))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-editor"]],viewQuery:function(e,t){var n;1&e&&o.Yc(te.j,!0),2&e&&o.Ec(n=o.ic())&&(t.control=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("w-100",t.w100)},inputs:{desc:"desc"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e},{provide:te.h,multi:!0,useExisting:e}])],decls:31,vars:30,consts:[[3,"ngSwitch"],["class","font-italic text-muted",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","isPercentage","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","prefix","codeWidth","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","calendar","granularity","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","calendar","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","choices","ngModelChange",4,"ngSwitchCase"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngSwitchCase"],[3,"ngModel","showCreate","filter","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionIds","showCreate","filter","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionId","showCreate","filter","ngModelChange",4,"ngSwitchCase"],["class","text-danger font-weight-bold",4,"ngSwitchDefault"],[1,"font-italic","text-muted"],[3,"ngModel","ngModelChange"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","ngModelChange"],[3,"ngModel","minDecimalPlaces","maxDecimalPlaces","noSeparator","isPercentage","ngModelChange"],[3,"ngModel","prefix","codeWidth","ngModelChange"],[3,"ngModel","calendar","granularity","ngModelChange"],[3,"ngModel","calendar","ngModelChange"],[3,"ngModel","choices","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModel","id","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[3,"ngModel","showCreate","filter","ngModelChange"],[3,"ngModel","definitionIds","showCreate","filter","ngModelChange"],[3,"ngModel","definitionId","showCreate","filter","ngModelChange"],[1,"text-danger","font-weight-bold"]],template:function(e,t){1&e&&(o.Tb(0,0),o.Rc(1,dE,3,3,"span",1),o.Rc(2,bE,1,1,"t-text-editor",2),o.Rc(3,fE,1,4,"t-decimal-editor",3),o.Rc(4,mE,1,5,"t-decimal-editor",4),o.Rc(5,gE,1,3,"t-serial-editor",5),o.Rc(6,pE,1,3,"t-date-picker",6),o.Rc(7,hE,1,2,"t-date-picker",7),o.Rc(8,vE,1,2,"t-selector",8),o.Rc(9,IE,4,3,"div",9),o.Rc(10,yE,1,3,"t-account-classifications-picker",10),o.Rc(11,wE,1,3,"t-ifrs-concepts-picker",10),o.Rc(12,CE,1,3,"t-account-types-picker",10),o.Rc(13,ME,1,3,"t-accounts-picker",10),o.Rc(14,VE,1,3,"t-agents-picker",10),o.Rc(15,TE,1,4,"t-relations-picker",11),o.Rc(16,EE,1,3,"t-currencies-picker",10),o.Rc(17,xE,1,3,"t-entry-types-picker",10),o.Rc(18,UE,1,4,"t-lookups-picker",12),o.Rc(19,RE,1,3,"t-units-picker",10),o.Rc(20,DE,1,4,"t-custodies-picker",11),o.Rc(21,BE,1,4,"t-resources-picker",11),o.Rc(22,SE,1,3,"t-centers-picker",10),o.Rc(23,kE,1,3,"t-roles-picker",10),o.Rc(24,OE,1,3,"t-users-picker",10),o.Rc(25,_E,1,3,"t-relation-definitions-picker",10),o.Rc(26,LE,1,3,"t-custody-definitions-picker",10),o.Rc(27,AE,1,3,"t-resource-definitions-picker",10),o.Rc(28,FE,1,3,"t-lookup-definitions-picker",10),o.Rc(29,PE,1,3,"t-document-definitions-picker",10),o.Rc(30,NE,2,1,"div",13),o.Sb()),2&e&&(o.sc("ngSwitch",null==t.desc?null:t.desc.control),o.Bb(1),o.sc("ngSwitchCase","unsupported"),o.Bb(1),o.sc("ngSwitchCase","text"),o.Bb(1),o.sc("ngSwitchCase","number"),o.Bb(1),o.sc("ngSwitchCase","percent"),o.Bb(1),o.sc("ngSwitchCase","serial"),o.Bb(1),o.sc("ngSwitchCase","date"),o.Bb(1),o.sc("ngSwitchCase","datetime"),o.Bb(1),o.sc("ngSwitchCase","choice"),o.Bb(1),o.sc("ngSwitchCase","check"),o.Bb(1),o.sc("ngSwitchCase","AccountClassification"),o.Bb(1),o.sc("ngSwitchCase","IfrsConcept"),o.Bb(1),o.sc("ngSwitchCase","AccountType"),o.Bb(1),o.sc("ngSwitchCase","Account"),o.Bb(1),o.sc("ngSwitchCase","Agent"),o.Bb(1),o.sc("ngSwitchCase","Relation"),o.Bb(1),o.sc("ngSwitchCase","Currency"),o.Bb(1),o.sc("ngSwitchCase","EntryType"),o.Bb(1),o.sc("ngSwitchCase","Lookup"),o.Bb(1),o.sc("ngSwitchCase","Unit"),o.Bb(1),o.sc("ngSwitchCase","Custody"),o.Bb(1),o.sc("ngSwitchCase","Resource"),o.Bb(1),o.sc("ngSwitchCase","Center"),o.Bb(1),o.sc("ngSwitchCase","Role"),o.Bb(1),o.sc("ngSwitchCase","User"),o.Bb(1),o.sc("ngSwitchCase","RelationDefinition"),o.Bb(1),o.sc("ngSwitchCase","CustodyDefinition"),o.Bb(1),o.sc("ngSwitchCase","ResourceDefinition"),o.Bb(1),o.sc("ngSwitchCase","LookupDefinition"),o.Bb(1),o.sc("ngSwitchCase","DocumentDefinition"))},encapsulation:2}),e})();const WE=["errorModal"];function $E(e,t){if(1&e&&(o.Vb(0,"div",20),o.Vb(1,"ul",21),o.Vb(2,"li",22),o.Tc(3),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc(" ",e.title," ")}}const qE=function(e){return{updateOn:e}};function QE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",28),o.Vb(1,"t-editor",29),o.hc("ngModelChange",(function(n){o.Ic(e);const i=t.$implicit;return o.lc(3).arguments[i.keyLower]=n}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).onArgumentChange()})),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.sc("label",e.label()+(e.isRequired?" *":"")),o.Bb(1),o.sc("ngModel",n.arguments[e.keyLower])("ngModelOptions",o.wc(5,qE,n.updateOn(e.desc)))("required",e.isRequired)("desc",e.desc)}}function HE(e,t){if(1&e&&(o.Vb(0,"div",25),o.Vb(1,"div",26),o.Rc(2,QE,2,7,"t-form-group",27),o.Ub(),o.Ub()),2&e){const e=o.lc(2);o.Bb(2),o.sc("ngForOf",e.parameters)}}function GE(e,t){if(1&e&&(o.Vb(0,"div",23),o.Rc(1,HE,3,1,"div",24),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.sc("ngIf",e.showParameters)}}function zE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",34),o.hc("click",(function(){o.Ic(e);const t=o.lc(2),n=o.Fc(25);return t.modalService.open(n)})),o.Tc(1),o.mc(2,"translate"),o.Ub()}2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"Description")," "))}function JE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",34),o.hc("click",(function(){return o.Ic(e),o.lc(2).onEdit()})),o.Tc(1),o.mc(2,"translate"),o.Ub()}2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"EditDefinition")," "))}function KE(e,t){if(1&e&&(o.Vb(0,"div",30),o.Vb(1,"button",31),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"div",32),o.Rc(5,zE,3,3,"button",33),o.Rc(6,JE,3,3,"button",33),o.Ub(),o.Ub()),2&e){const e=o.lc();o.sc("placement",e.actionsDropdownPlacement),o.Bb(2),o.Vc(" ",o.nc(3,4,"Data")," "),o.Bb(3),o.sc("ngIf",e.description),o.Bb(1),o.sc("ngIf",e.showEditDefinition)}}function YE(e,t){1&e&&o.Qb(0,"t-spinner",35)}function XE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",36),o.Vb(1,"div",37),o.Vb(2,"span",38),o.Vb(3,"span"),o.Tc(4),o.mc(5,"number"),o.Ub(),o.Tc(6," - "),o.Vb(7,"span"),o.Tc(8),o.mc(9,"number"),o.Ub(),o.Ub(),o.Vb(10,"span",38),o.Tc(11),o.Ub(),o.Ub(),o.Vb(12,"button",39),o.hc("click",(function(){return o.Ic(e),o.lc().onPreviousPage()})),o.mc(13,"translate"),o.Qb(14,"fa-icon",40),o.Ub(),o.Vb(15,"button",39),o.hc("click",(function(){return o.Ic(e),o.lc().onNextPage()})),o.mc(16,"translate"),o.Qb(17,"fa-icon",41),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(4),o.Uc(o.nc(5,9,e.from)),o.Bb(4),o.Uc(o.nc(9,11,e.to)),o.Bb(3),o.Vc(" / ",e.totalDisplay,""),o.Bb(1),o.tc("title",o.nc(13,13,"Previous")),o.sc("disabled",!e.canPreviousPage),o.Bb(2),o.sc("flip",e.flip),o.Bb(1),o.tc("title",o.nc(16,15,"Next")),o.sc("disabled",!e.canNextPage),o.Bb(2),o.sc("flip",e.flip)}}function ZE(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",42),o.hc("click",(function(){return o.Ic(e),o.lc().onToggleCollapseParameters()})),o.mc(1,"translate"),o.Qb(2,"fa-icon",43),o.Vb(3,"span",7),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.tc("title",o.nc(1,3,e.collapseParameters?"Expand":"Collapse")),o.Bb(2),o.sc("icon",e.collapseParameters?"angle-down":"angle-up"),o.Bb(2),o.Vc("\xa0\xa0",o.nc(5,5,e.collapseParameters?"Expand":"Collapse"),"")}}function ex(e,t){if(1&e){const e=o.Wb();o.Vb(0,"label",46),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc(2).onView(n.view)})),o.mc(1,"translate"),o.Qb(2,"input",47),o.Qb(3,"fa-icon",43),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2);o.Gb("active",n.isActive(e.view)),o.tc("title",o.nc(1,5,e.label)),o.Bb(2),o.tc("name",e.view),o.Bb(1),o.sc("icon",e.icon)}}function tx(e,t){if(1&e&&(o.Vb(0,"div",44),o.Rc(1,ex,4,7,"label",45),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.sc("ngForOf",e.views)}}function nx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-report-results",48),o.hc("exportStarting",(function(){return o.Ic(e),o.lc().onExportStarting()}))("exportSuccess",(function(){return o.Ic(e),o.lc().onExportSuccess()}))("exportError",(function(t){return o.Ic(e),o.lc().onExportError(t)}))("orderbyChange",(function(){return o.Ic(e),o.lc().onOrderByChange()})),o.Ub()}if(2&e){const e=o.lc();o.sc("definition",e.definition)("arguments",e.immutableArguments)("view",e.view)("refresh",e.refresh)("export",e.export)("state",e.state)("mode",e.mode)("disableDrilldown",e.disableDrilldown)}}function ix(e,t){1&e&&(o.Vb(0,"div",49),o.Qb(1,"fa-icon",50),o.Tc(2),o.mc(3,"translate"),o.Ub()),2&e&&(o.Bb(2),o.Vc(" \xa0 ",o.nc(3,1,"FillRequiredFields")," "))}function ox(e,t){if(1&e&&(o.Vb(0,"div",51),o.Vb(1,"h5",52),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",53),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",54),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",55),o.Tc(8),o.Ub(),o.Vb(9,"div",56),o.Vb(10,"button",57),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(11,"fa-icon",58),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,3,"Description")," "),o.Bb(6),o.Vc(" ",e.description," "),o.Bb(4),o.Vc(" \xa0",o.nc(13,5,"OK")," ")}}function cx(e,t){if(1&e&&(o.Vb(0,"div",51),o.Vb(1,"h5",52),o.Qb(2,"fa-icon",59),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",53),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(6,"span",54),o.Tc(7,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",55),o.Tc(9),o.Ub(),o.Vb(10,"div",56),o.Vb(11,"button",60),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(12,"fa-icon",61),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,3,"Error")," "),o.Bb(6),o.Vc(" ",e.errorMessage," "),o.Bb(4),o.Vc(" \xa0",o.nc(14,5,"Dismiss")," ")}}let rx=(()=>{class e{constructor(e,t,n,i,o,c){this.workspace=e,this.translate=t,this.router=n,this.route=i,this.modalService=o,this.customUserSettings=c,this.mode="screen",this.disableDrilldown=!1,this.badDefinition=!1,this._parameterCount=null,this.refresh$=new E.a,this.export$=new E.a,this._currentParameters=[],this._views=[{view:ts.pivot,label:"Table",icon:"table"},{view:ts.chart,label:"Chart",icon:"chart-pie"}],this.arguments={},this.immutableArguments={},this.exportStatus=B.g.loaded}get showChart(){return this._showChart}set showChart(e){this._showChart!==e&&(this.view=e?ts.chart:ts.pivot,this._showChart=e)}ngOnInit(){this._subscriptions=new k.a,this._subscriptions.add(this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const n=+e.get("definitionId");if(n&&this.workspace.currentTenant.definitions.Reports[n]||this.router.navigate(["page-not-found"],{relativeTo:this.route.parent,replaceUrl:!0}),this.definitionId!==n&&(this.definitionId=n),"Summary"===this.definition.Type){const t=e.get("view");t&&ts[t]&&(this.view=ts[t])}"Details"===this.definition.Type&&(this.state.skip=+e.get("skip")||0);for(const i of this.parameters){let n;if(e.has(i.keyLower)){const o=e.get(i.keyLower);try{switch(i.datatype){case"datetimeoffset":const e=new Date(o);isNaN(e.getTime())||(n=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{7}Z$/.test(o)?o:e.toISOString().replace("Z","0000Z"));break;case"datetime":case"date":const t=new Date(o);isNaN(t.getTime())||(n=Object(Mi.d)(t));break;case"string":n=o;break;case"numeric":n=+o;break;case"bit":n="true"===o.toLowerCase();break;case"boolean":case"hierarchyid":case"geography":case"entity":case"null":default:console.error(`Unsupported parameter datatype ${i.datatype}.`)}}catch(t){console.error(t)}}this.arguments[i.keyLower]=n}this.immutableArguments=Object.assign({},this.arguments)}})),this.view=this.view||(this.definition.Chart&&this.definition.DefaultsToChart?ts.chart:ts.pivot)}ngOnDestroy(){this._subscriptions.unsubscribe()}get isScreenMode(){return"screen"===this.mode}get isPreviewMode(){return"preview"===this.mode}get definition(){return this.isScreenMode?this.workspace.currentTenant.definitions.Reports[this.definitionId]:this.previewDefinition}get entityDescriptor(){if(!this.definition)return null;const e=this.definition.Collection;if(!e)return null;const t=wi.h[e];return t?t(this.workspace,this.translate,this.definition.DefinitionId):null}get apiEndpoint(){const e=this.entityDescriptor;return e?e.apiEndpoint:null}get state(){const e=this.stateKey,t=this.workspace.currentTenant.reportState;return t[e]||(t[e]=new B.j),t[e]}get stateKey(){return"screen"===this.mode?this.definitionId.toString():`${this.definition.Id||"new"}/preview`}urlStateChanged(){if(this.isScreenMode){const e={};if(this.definition&&"Summary"===this.definition.Type&&(e.view=this.view),this.definition&&"Details"===this.definition.Type){const t=this.state;t.skip&&(e.skip=t.skip),t.orderbyKey&&(e.$orderby=`${t.orderbyKey} ${t.orderbyDir}`)}this.parameters.forEach(t=>{const n=this.arguments[t.keyLower];Object(N.n)(n)&&(e[t.keyLower]=n+"")}),this.router.navigate([".",e],{relativeTo:this.route,replaceUrl:!0})}}onOrderByChange(){this.urlStateChanged()}get title(){return this.workspace.currentTenant.getMultilingualValueImmediate(this.definition,"Title")}get views(){return this._views}get parameters(){if(this.definition!==this._currentDefinition||this.entityDescriptor!==this._currentEntityDescriptor){if(this._currentDefinition=this.definition,this._currentEntityDescriptor=this.entityDescriptor,this._currentParameters=[],this.definition)try{const{parameters:e}=io.getReportInfos(this.definition,this.workspace,this.translate);this._currentParameters=e,this.badDefinition=!1}catch(e){this.badDefinition=!0}this._currentParameters.length!==this._parameterCount&&null!==this._parameterCount&&this.isChart&&window.dispatchEvent(new Event("resize")),this._parameterCount=this._currentParameters.length}return this._currentParameters}choices(e){return Object(wi.c)(e)}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get canExport(){return!0}onExport(){let e=this.title;e&&(e+=".csv"),this.export$.next(e)}get showExportSpinner(){return this.exportStatus===B.g.loading}onExportStarting(){this.exportStatus=B.g.loading}onExportSuccess(){this.exportStatus=B.g.loaded}onExportError(e){this.exportStatus=B.g.error,this.errorMessage=e,this.modalService.open(this.errorModal)}onRefresh(){this.refresh$.next()}get showReportViewToggle(){return!!this.definition&&"Summary"===this.definition.Type&&!!this.definition.Chart}get isChart(){return this.view===ts.chart&&!!this.definition&&"Summary"===this.definition.Type}onArgumentChange(){if(this.immutableArguments=Object.assign({},this.arguments),this.isScreenMode){const e={};for(const n of Object.keys(this.arguments))Object(N.n)(this.arguments[n])&&(e[n]=this.arguments[n]);const t=JSON.stringify(e);this.customUserSettings.save(`report/${this.definitionId}/arguments`,t)}this.urlStateChanged()}updateOn(e){return Object(N.s)(e)}isActive(e){return e===this.view}onView(e){this.view=e,this.urlStateChanged()}get showParametersSection(){return this.showParameters&&!this.collapseParameters}get showParameters(){return this.parameters.length>0}get areAllRequiredParamsSpecified(){const e=this.arguments;return this.parameters.every(t=>!t.isRequired||Object(N.n)(e[t.keyLower]))}get showPreview(){return this.badDefinition||this.areAllRequiredParamsSpecified}get disableRefresh(){return this.badDefinition||!this.areAllRequiredParamsSpecified}get refresh(){return this.refresh$}get export(){return this.export$}onSkipChange(e){this.urlStateChanged()}get showPagingControls(){return!!this.definition&&"Details"===this.definition.Type&&!this.definition.Top}get skip(){return this.showPagingControls?this.state.skip:0}get from(){return Math.min(this.state.skip+1,this.total)}get to(){const e=this.state;return Math.min(e.skip+is.DEFAULT_PAGE_SIZE,e.total)}get total(){return this.state.total}get totalDisplay(){const e=this.total;return e>=B.d?Object(x.L)(B.d-1,"en-GB")+"+":Object(x.L)(e,"en-GB")}onPreviousPage(){const e=this.state;e.skip=Math.max(e.skip-is.DEFAULT_PAGE_SIZE,0),this.onSkipChange(e.skip),this.refresh$.next()}get canPreviousPage(){return this.state.skip>0}onNextPage(){const e=this.state;e.skip=e.skip+is.DEFAULT_PAGE_SIZE,this.onSkipChange(e.skip),this.refresh$.next()}get canNextPage(){return this.to<this.total}get flip(){return this.workspace.ws.isRtl?"horizontal":null}get overflow(){return this.isChart?"hidden":"auto"}get description(){return this.workspace.currentTenant.getMultilingualValueImmediate(this.definition,"Description")}get showEditDefinition(){return this.isScreenMode&&this.workspace.currentTenant.canDo("report-definitions","Update",null)}get showDataDropdown(){return!!this.description||this.showEditDefinition}onEdit(){const e=this.workspace;e.isEdit=!0,this.router.navigate(["../../report-definitions",this.definitionId],{relativeTo:this.route}).then(t=>{t||delete e.isEdit}).catch(t=>delete e.isEdit)}get collapseParameters(){return this.state.collapseParams}set collapseParameters(e){const t=this.state;t.collapseParams!==e&&(t.collapseParams=e)}onToggleCollapseParameters(){this.collapseParameters=!this.collapseParameters,window.dispatchEvent(new Event("resize"))}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e),o.Pb(i.e),o.Pb(i.a),o.Pb(K.t),o.Pb(X.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-report"]],viewQuery:function(e,t){var n;1&e&&o.Oc(WE,!0),2&e&&o.Ec(n=o.ic())&&(t.errorModal=n.first)},inputs:{mode:"mode",disableDrilldown:"disableDrilldown",previewDefinition:"previewDefinition",showChart:"showChart"},decls:28,vars:19,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],["class","mx-auto mb-3 w-100","style","max-width: 700px",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","btn-group t-toolbar-button","ngbDropdown","",3,"placement",4,"ngIf"],["class","t-vertical-align-middle mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],["class","d-inline",4,"ngIf"],["class","btn btn-sm t-toolbar-button btn-light t-white-button font-weight-normal","type","button",3,"title","click",4,"ngIf"],["class","btn-group btn-group-toggle t-toolbar-button",4,"ngIf"],[1,"row","t-rest-of-screen"],["class","h-100 w-100",3,"definition","arguments","view","refresh","export","state","mode","disableDrilldown","exportStarting","exportSuccess","exportError","orderbyChange",4,"ngIf","ngIfElse"],["fillRequiredFields",""],["descModal",""],["errorModal",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],["class","w-100",4,"ngIf"],[1,"w-100"],[1,"row","m-0","px-0","px-lg-1","py-1"],["class","t-form-group",3,"label",4,"ngFor","ngForOf"],[1,"t-form-group",3,"label"],[3,"ngModel","ngModelOptions","required","desc","ngModelChange"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],[1,"t-vertical-align-middle","mx-1"],[1,"d-inline"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],["class","btn btn-sm btn-light t-pointer",3,"active","title","click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-light","t-pointer",3,"title","click"],["type","radio",3,"name"],[1,"h-100","w-100",3,"definition","arguments","view","refresh","export","state","mode","disableDrilldown","exportStarting","exportSuccess","exportError","orderbyChange"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"],["icon","check"],["icon","exclamation-triangle",1,"text-danger"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Rc(2,$E,4,1,"div",2),o.Rc(3,GE,2,1,"div",3),o.Vb(4,"div",4),o.Vb(5,"div"),o.Vb(6,"button",5),o.hc("click",(function(){return t.onExport()})),o.Qb(7,"fa-icon",6),o.Vb(8,"span",7),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Ub(),o.Rc(11,KE,7,6,"div",8),o.Rc(12,YE,1,0,"t-spinner",9),o.Ub(),o.Vb(13,"div"),o.Vb(14,"button",10),o.hc("click",(function(){return t.onRefresh()})),o.mc(15,"translate"),o.Qb(16,"fa-icon",11),o.Ub(),o.Rc(17,XE,18,17,"div",12),o.Rc(18,ZE,6,7,"button",13),o.Rc(19,tx,2,1,"div",14),o.Ub(),o.Ub(),o.Ub(),o.Vb(20,"div",15),o.Rc(21,nx,1,8,"t-report-results",16),o.Rc(22,ix,4,3,"ng-template",null,17,o.Sc),o.Ub(),o.Ub(),o.Rc(24,ox,14,7,"ng-template",null,18,o.Sc),o.Rc(26,cx,15,7,"ng-template",null,19,o.Sc)),2&e){const e=o.Fc(23);o.Bb(2),o.sc("ngIf",!!t.title),o.Bb(1),o.sc("ngIf",t.showParametersSection),o.Bb(3),o.sc("disabled",!t.canExport),o.Bb(3),o.Vc("\xa0\xa0",o.nc(10,15,"Export"),""),o.Bb(2),o.sc("ngIf",t.showDataDropdown),o.Bb(1),o.sc("ngIf",t.showExportSpinner),o.Bb(2),o.tc("title",o.nc(15,17,"Refresh")),o.sc("disabled",t.disableRefresh),o.Bb(3),o.sc("ngIf",t.showPagingControls),o.Bb(1),o.sc("ngIf",t.showParameters),o.Bb(1),o.sc("ngIf",t.showReportViewToggle),o.Bb(1),o.Qc("overflow",t.overflow),o.Bb(1),o.sc("ngIf",t.showPreview)("ngIfElse",e)}},directives:[x.u,ee.b,x.t,pe.a,jE,te.k,te.n,te.u,K.l,K.r,K.p,K.o,me.a,is],pipes:[Q.d,x.g],encapsulation:2}),e})();function sx(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Vc("",e.options.minDecimalPlaces,"\u200c")}}const lx=function(){return{updateOn:"blur"}};function ax(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",6),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).options.minDecimalPlaces=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc(2);o.sc("ngModel",e.options.minDecimalPlaces)("ngModelOptions",o.vc(2,lx))}}function ux(e,t){if(1&e&&(o.Vb(0,"div",2),o.Vb(1,"label",3),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,sx,2,1,"div",4),o.Rc(5,ax,1,3,"ng-template",null,5,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"ControlOptions_minDecimalPlaces")),o.Bb(2),o.sc("ngIf",!t.isEdit)("ngIfElse",e)}}function dx(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Vc("",e.options.maxDecimalPlaces,"\u200c")}}function bx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",9),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).options.maxDecimalPlaces=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc(2);o.sc("ngModel",e.options.maxDecimalPlaces)("ngModelOptions",o.vc(2,lx))}}function fx(e,t){if(1&e&&(o.Vb(0,"div",2),o.Vb(1,"label",7),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,dx,2,1,"div",4),o.Rc(5,bx,1,3,"ng-template",null,8,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"ControlOptions_maxDecimalPlaces")),o.Bb(2),o.sc("ngIf",!t.isEdit)("ngIfElse",e)}}function mx(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Vc("",e.options.prefix,"\u200c")}}function gx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",12),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).options.prefix=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc(2);o.sc("ngModel",e.options.prefix)("ngModelOptions",o.vc(2,lx))}}function px(e,t){if(1&e&&(o.Vb(0,"div",2),o.Vb(1,"label",10),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,mx,2,1,"div",4),o.Rc(5,gx,1,3,"ng-template",null,11,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"ControlOptions_prefix")),o.Bb(2),o.sc("ngIf",!t.isEdit)("ngIfElse",e)}}function hx(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Vc("",e.options.codeWidth,"\u200c")}}function vx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",15),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).options.codeWidth=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc(2);o.sc("ngModel",e.options.codeWidth)("ngModelOptions",o.vc(2,lx))}}function Ix(e,t){if(1&e&&(o.Vb(0,"div",2),o.Vb(1,"label",13),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,hx,2,1,"div",4),o.Rc(5,vx,1,3,"ng-template",null,14,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"ControlOptions_codeWidth")),o.Bb(2),o.sc("ngIf",!t.isEdit)("ngIfElse",e)}}function yx(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Vc("",e.options.filter,"\u200c")}}function wx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",18),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).options.filter=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc(2);o.sc("ngModel",e.options.filter)("ngModelOptions",o.vc(2,lx))}}function Cx(e,t){if(1&e&&(o.Vb(0,"div",2),o.Vb(1,"label",16),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,yx,2,1,"div",4),o.Rc(5,wx,1,3,"ng-template",null,17,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"ControlOptions_filter")),o.Bb(2),o.sc("ngIf",!t.isEdit)("ngIfElse",e)}}function Mx(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Vc("",e.definitionIdDisplay(e.options.definitionId),"\u200c")}}function Vx(e,t){if(1&e&&(o.Vb(0,"option",25),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function Tx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",21,22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).setDefId(t)})),o.Qb(2,"option",23),o.Rc(3,Vx,2,2,"option",24),o.Ub()}if(2&e){const e=o.lc(2);o.sc("ngModel",e.options.definitionId),o.Bb(3),o.sc("ngForOf",e.definitionIdOptions)}}function Ex(e,t){if(1&e&&(o.Vb(0,"div",2),o.Vb(1,"label",19),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,Mx,2,1,"div",4),o.Rc(5,Tx,4,2,"ng-template",null,20,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"ControlOptions_definitionId")),o.Bb(2),o.sc("ngIf",!t.isEdit)("ngIfElse",e)}}function xx(e,t){1&e&&o.Qb(0,"th",35)}function Ux(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Uc(o.nc(2,1,"Name")+e.ws.secondaryPostfix)}}function Rx(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Uc(o.nc(2,1,"Name")+e.ws.ternaryPostfix)}}function Dx(e,t){1&e&&o.Qb(0,"th",35)}function Bx(e,t){1&e&&(o.Vb(0,"td",42),o.Tc(1,"\u200c"),o.Ub())}function Sx(e,t){if(1&e&&(o.Vb(0,"div",43),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(2);o.Bb(1),o.Vc(" ",t.ws.getMultilingualValueImmediate(e,"name")||e.value,"\u200c")}}function kx(e,t){1&e&&(o.Vb(0,"td",44),o.Qb(1,"fa-icon",45),o.Ub())}function Ox(e,t){if(1&e&&(o.Tb(0),o.Tc(1),o.Sb()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Vc(" ",e.value,"")}}function _x(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.value=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc().$implicit;o.sc("ngModel",e.value)("ngModelOptions",o.vc(2,lx))}}function Lx(e,t){if(1&e&&(o.Tb(0),o.Tc(1),o.Sb()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Vc(" ",e.name,"")}}function Ax(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.name=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc().$implicit;o.sc("ngModel",e.name)("ngModelOptions",o.vc(2,lx))}}function Fx(e,t){if(1&e&&(o.Tb(0),o.Tc(1),o.Sb()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Vc(" ",e.name2,"")}}function Px(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.name2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(4).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc(2).$implicit;o.sc("ngModel",e.name2)("ngModelOptions",o.vc(2,lx))}}function Nx(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,Fx,2,1,"ng-container",4),o.Rc(2,Px,1,3,"ng-template",null,47,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(3);o.Gb("p-0",t.isEdit),o.Bb(1),o.sc("ngIf",!t.isEdit)("ngIfElse",e)}}function jx(e,t){if(1&e&&(o.Tb(0),o.Tc(1),o.Sb()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Vc(" ",e.name3,"")}}function Wx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.name3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(4).onOptionsChange()})),o.Ub()}if(2&e){const e=o.lc(2).$implicit;o.sc("ngModel",e.name3)("ngModelOptions",o.vc(2,lx))}}function $x(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,jx,2,1,"ng-container",4),o.Rc(2,Wx,1,3,"ng-template",null,48,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(3);o.Gb("p-0",t.isEdit),o.Bb(1),o.sc("ngIf",!t.isEdit)("ngIfElse",e)}}function qx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td"),o.Vb(1,"button",49),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(2);return n.onDeleteRow(t,n.options.choices)})),o.Qb(2,"fa-icon",50),o.Ub(),o.Ub()}}function Qx(e,t){if(1&e&&(o.Vb(0,"tr",36),o.Rc(1,Bx,2,0,"td",37),o.Rc(2,Sx,2,1,"div",38),o.Rc(3,kx,2,0,"td",39),o.Vb(4,"td"),o.Rc(5,Ox,2,1,"ng-container",4),o.Rc(6,_x,1,3,"ng-template",null,23,o.Sc),o.Ub(),o.Vb(8,"td"),o.Rc(9,Lx,2,1,"ng-container",4),o.Rc(10,Ax,1,3,"ng-template",null,40,o.Sc),o.Ub(),o.Rc(12,Nx,4,4,"td",41),o.Rc(13,$x,4,4,"td",41),o.Rc(14,qx,3,0,"td",30),o.Ub()),2&e){const e=o.Fc(7),t=o.Fc(11),n=o.lc(2);o.Bb(3),o.sc("ngIf",n.isEdit),o.Bb(1),o.Gb("p-0",n.isEdit),o.Bb(1),o.sc("ngIf",!n.isEdit)("ngIfElse",e),o.Bb(3),o.Gb("p-0",n.isEdit),o.Bb(1),o.sc("ngIf",!n.isEdit)("ngIfElse",t),o.Bb(3),o.sc("ngIf",n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",n.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("ngIf",n.isEdit)}}function Hx(e,t){1&e&&(o.Vb(0,"div",51),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function Gx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",52),o.hc("click",(function(){return o.Ic(e),o.lc(2).onInsertChoice()})),o.Qb(1,"fa-icon",53),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}const zx=function(){return[]};function Jx(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",26),o.Vb(1,"label",10),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"table",27),o.Vb(5,"thead",28),o.Vb(6,"tr"),o.Rc(7,xx,1,0,"th",29),o.Vb(8,"th"),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Vb(11,"th"),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Rc(14,Ux,3,3,"th",30),o.Rc(15,Rx,3,3,"th",30),o.Rc(16,Dx,1,0,"th",29),o.Ub(),o.Ub(),o.Vb(17,"tbody",31),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc();return n.rowDrop(t,n.options.choices)})),o.Rc(18,Qx,15,12,"tr",32),o.Ub(),o.Ub(),o.Rc(19,Hx,3,3,"div",33),o.Rc(20,Gx,4,3,"button",34),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Uc(o.nc(3,11,"ControlOptions_choices")),o.Bb(5),o.sc("ngIf",e.isEdit),o.Bb(2),o.Uc(o.nc(10,13,"ControlOptions_value")),o.Bb(3),o.Uc(o.nc(13,15,"Name")+e.ws.primaryPostfix),o.Bb(2),o.sc("ngIf",e.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",e.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("ngIf",e.isEdit),o.Bb(1),o.sc("cdkDropListDisabled",!e.isEdit),o.Bb(1),o.sc("ngForOf",e.options.choices||o.vc(17,zx)),o.Bb(1),o.sc("ngIf",!(e.isEdit||null!=e.options.choices&&e.options.choices.length)),o.Bb(1),o.sc("ngIf",e.isEdit)}}let Kx=(()=>{class e{constructor(e){this.workspace=e,this.classValue="row m-0",this.options={},this.isDisabled=!1,this.onChangeFn=e=>{},this.onTouchedFn=()=>{}}ngOnChanges(e){}get ws(){return this.workspace.currentTenant}writeValue(e){if(this.optionsJSON=e,e)try{this.options=JSON.parse(e)}catch(t){console.error("Failed to parse ControlOptions JSON",t),this.options={}}else this.options={}}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e}onOptionsChange(){for(const e of Object.keys(this.options))Object(N.n)(this.options[e])&&0!==this.options[e].length||delete this.options[e];this.onTouchedFn(),this.optionsJSON=JSON.stringify(this.options),this.onChangeFn("{}"===this.optionsJSON?void 0:this.optionsJSON)}get showDecimalPlaces(){return"number"===this.control||"percent"===this.control}get showPrefix(){return"serial"===this.control}get showCodeWidth(){return"serial"===this.control}definitionIdDisplay(e){const t=this.ws,n=t.definitions;switch(this.control){case"Document":return t.getMultilingualValueImmediate(n.Documents[e],"TitleSingular");case"Resource":return t.getMultilingualValueImmediate(n.Resources[e],"TitleSingular");case"Custody":return t.getMultilingualValueImmediate(n.Custodies[e],"TitleSingular");case"Relation":return t.getMultilingualValueImmediate(n.Relations[e],"TitleSingular");case"Lookup":return t.getMultilingualValueImmediate(n.Lookups[e],"TitleSingular");default:return e}}get definitionIdOptions(){const e=this.ws,t=e.definitions,n=this.control;if(this._definitionIdOptionsDefs!==t||this._definitionIdOptionsControl!==n){let i;switch(this._definitionIdOptionsDefs=t,this._definitionIdOptionsControl=n,n){case"Document":i=Object.keys(t.Documents).map(n=>{const i=t.Documents[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;case"Resource":i=Object.keys(t.Resources).map(n=>{const i=t.Resources[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;case"Custody":i=Object.keys(t.Custodies).map(n=>{const i=t.Custodies[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;case"Relation":i=Object.keys(t.Relations).map(n=>{const i=t.Relations[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;case"Lookup":i=Object.keys(t.Lookups).map(n=>{const i=t.Lookups[n];return{value:+n,name:()=>e.getMultilingualValueImmediate(i,"TitleSingular")}});break;default:i=[]}this._definitionIdOptionsResult=i}return this._definitionIdOptionsResult}setDefId(e){e?this.options.definitionId=+e:delete this.options.definitionId,this.onOptionsChange()}get showDefinitionId(){switch(this.control){case"Document":case"Resource":case"Custody":case"Relation":case"Lookup":return!0}return!1}get showFilter(){return!!this.control&&!!wi.h[this.control]}get showChoices(){return"choice"===this.control}rowDrop(e,t){Object(W.i)(t,e.previousIndex,e.currentIndex),this.onOptionsChange()}onDeleteRow(e,t){const n=t.indexOf(e);n>=0&&t.splice(n,1),this.onOptionsChange()}onInsertRow(e,t){const n=t?t():{};e.push(n),this.onOptionsChange()}onInsertChoice(){this.options.choices=this.options.choices||[],this.onInsertRow(this.options.choices)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-control-options"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Db(t.classValue)},inputs:{control:"control",isEdit:"isEdit"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.zb],decls:7,vars:7,consts:[["class","form-group col-12 col-sm-6 t-text-whitish",4,"ngIf"],["class","form-group t-wide-form-group t-text-whitish",4,"ngIf"],[1,"form-group","col-12","col-sm-6","t-text-whitish"],["for","mindecimalplaces",1,"small"],[4,"ngIf","ngIfElse"],["mindecimalplaces",""],["id","mindecimalplaces","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","maxdecimalplaces",1,"small"],["maxdecimalplaces",""],["id","maxdecimalplaces","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","prefix",1,"small"],["prefix",""],["id","prefix","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","codewidth",1,"small"],["codewidth",""],["id","codewidth","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","filter",1,"small"],["filter",""],["id","filter","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","definitionid",1,"small"],["definitionid",""],["id","definitionid",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionid","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-group","t-wide-form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[1,"small","font-weight-normal"],["style","width: 1px;",4,"ngIf"],[4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","font-italic mx-2",4,"ngIf"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal",3,"click",4,"ngIf"],[2,"width","1px"],["cdkDrag","","cdkDragLockAxis","y"],["colspan","1000",4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","","class","px-2","style","cursor: move;",4,"ngIf"],["name",""],[3,"p-0",4,"ngIf"],["colspan","1000"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name2",""],["name3",""],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],[1,"font-italic","mx-2"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],["icon","plus"]],template:function(e,t){1&e&&(o.Rc(0,ux,7,5,"div",0),o.Rc(1,fx,7,5,"div",0),o.Rc(2,px,7,5,"div",0),o.Rc(3,Ix,7,5,"div",0),o.Rc(4,Cx,7,5,"div",0),o.Rc(5,Ex,7,5,"div",0),o.Rc(6,Jx,21,18,"div",1)),2&e&&(o.sc("ngIf",t.showDecimalPlaces),o.Bb(1),o.sc("ngIf",t.showDecimalPlaces),o.Bb(1),o.sc("ngIf",t.showPrefix),o.Bb(1),o.sc("ngIf",t.showCodeWidth),o.Bb(1),o.sc("ngIf",t.showFilter),o.Bb(1),o.sc("ngIf",t.showDefinitionId),o.Bb(1),o.sc("ngIf",t.showChoices))},directives:[x.u,te.q,te.c,te.k,te.n,te.v,te.p,te.x,x.t,W.f,W.b,W.d,W.e,W.c,ee.b],pipes:[Q.d],encapsulation:2}),e})();const Yx=["dimensionConfigModal"],Xx=["measureConfigModal"],Zx=["selectConfigModal"],eU=["paramConfigModal"],tU=["totalLabelsModal"];function nU(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Title",n.ws)||o.nc(2,1,"Untitled"))}}function iU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",92),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleFields()})),o.Vb(1,"div",93),o.Qb(2,"fa-icon",94),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Fields"))}}function oU(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function cU(e,t){1&e&&o.Rb(0)}function rU(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function sU(e,t){1&e&&o.Rb(0)}const lU=function(e,t){return{control:e,serverErrors:t}};function aU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",96),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"select",97,98),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.DefinitionId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionIdChange(t)})),o.Qb(6,"option",99),o.Rc(7,rU,2,2,"option",21),o.Ub(),o.Rc(8,sU,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.DefinitionId)),o.Bb(2),o.Uc(o.nc(3,7,"ReportDefinition_DefinitionId")),o.Bb(2),o.sc("ngModel",t.DefinitionId),o.Bb(3),o.sc("ngForOf",n.allDefinitionIds(t)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(9,lU,e,null==t.serverErrors?null:t.serverErrors.DefinitionId))}}function uU(e,t){1&e&&(o.Vb(0,"div",105),o.Tc(1," \xa0 "),o.Ub())}function dU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",100),o.hc("dblclick",(function(){o.Ic(e);const n=t.$implicit;return o.lc(3).copyPathToClipboard(n.path)})),o.Vb(1,"div",101),o.Vb(2,"div",102),o.Vb(3,"button",103),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.index,c=o.lc(2).model;return o.lc().onExpand(n,i,c)})),o.Qb(4,"fa-icon",30),o.Ub(),o.Vb(5,"span",48),o.Tc(6),o.Ub(),o.Ub(),o.Rc(7,uU,2,0,"div",104),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(1),o.Gb("d-none",!n.showTreeNode(e)),o.Bb(1),o.Qc("padding-left",n.paddingLeft(e))("padding-right",n.paddingRight(e)),o.Bb(1),o.Qc("opacity",n.hasChildren(e)?1:0)("cursor",n.hasChildren(e)?null:"inherit"),o.sc("disabled",!n.hasChildren(e)),o.Bb(1),o.sc("flip",n.flipNode(e))("rotate",n.rotateNode(e)),o.Bb(2),o.Uc(e.desc.label())}}function bU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",92),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleDefinition()})),o.Vb(1,"div",93),o.Qb(2,"fa-icon",94),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Definition"))}}function fU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function mU(e,t){1&e&&o.Rb(0)}function gU(e,t){1&e&&o.Rb(0)}function pU(e,t){1&e&&o.Rb(0)}function hU(e,t){1&e&&o.Rb(0)}const vU=function(){return{updateOn:"blur"}};function IU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",107),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",108,109),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Title2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Title2")})),o.Ub(),o.Rc(6,hU,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Title2)),o.Bb(2),o.Uc(o.nc(3,7,"Title")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.Title2)("ngModelOptions",o.vc(9,vU)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,lU,e,null==t.serverErrors?null:t.serverErrors.Title2))}}function yU(e,t){1&e&&o.Rb(0)}function wU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",110),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"textarea",111,112),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Description2")})),o.Ub(),o.Rc(6,yU,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description2)),o.Bb(2),o.Uc(o.nc(3,7,"Description")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.Description2)("ngModelOptions",o.vc(9,vU)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,lU,e,null==t.serverErrors?null:t.serverErrors.Description2))}}function CU(e,t){1&e&&o.Rb(0)}function MU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",113),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",114,115),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Title3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Title3")})),o.Ub(),o.Rc(6,CU,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Title3)),o.Bb(2),o.Uc(o.nc(3,7,"Title")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.Title3)("ngModelOptions",o.vc(9,vU)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,lU,e,null==t.serverErrors?null:t.serverErrors.Title3))}}function VU(e,t){1&e&&o.Rb(0)}function TU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",116),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"textarea",117,118),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Description3")})),o.Ub(),o.Rc(6,VU,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description3)),o.Bb(2),o.Uc(o.nc(3,7,"Description")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.Description3)("ngModelOptions",o.vc(9,vU)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,lU,e,null==t.serverErrors?null:t.serverErrors.Description3))}}function EU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function xU(e,t){1&e&&(o.Vb(0,"div",119),o.Vb(1,"span",120),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"DragFieldsHere")))}function UU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function RU(e,t){1&e&&(o.Vb(0,"div",127),o.Tc(1," \u200c "),o.Ub())}function DU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",121),o.Vb(1,"div",122),o.Rc(2,UU,1,0,"fa-icon",31),o.Vb(3,"span",123),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub(),o.Vb(6,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureRow(n,i)})),o.mc(7,"translate"),o.Qb(8,"fa-icon",124),o.Ub(),o.Tc(9," \xa0 "),o.Vb(10,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteRow(n,i)})),o.mc(11,"translate"),o.Qb(12,"fa-icon",125),o.Ub(),o.Ub(),o.Rc(13,RU,2,0,"div",126),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.dimensionErrors(e)),o.Bb(3),o.Vc(" ",e.KeyExpression," "),o.Bb(1),o.sc("title",o.nc(7,4,"Configure")),o.Bb(4),o.sc("title",o.nc(11,6,"Delete"))}}function BU(e,t){1&e&&(o.Vb(0,"div",119),o.Vb(1,"span",120),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"DragFieldsHere")))}function SU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function kU(e,t){1&e&&(o.Vb(0,"div",127),o.Tc(1," \u200c "),o.Ub())}function OU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",121),o.Vb(1,"div",122),o.Rc(2,SU,1,0,"fa-icon",31),o.Vb(3,"span",123),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub(),o.Vb(6,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureColumn(n,i)})),o.mc(7,"translate"),o.Qb(8,"fa-icon",124),o.Ub(),o.Tc(9," \xa0 "),o.Vb(10,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteColumn(n,i)})),o.mc(11,"translate"),o.Qb(12,"fa-icon",125),o.Ub(),o.Ub(),o.Rc(13,kU,2,0,"div",126),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.dimensionErrors(e)),o.Bb(3),o.Vc(" ",e.KeyExpression," "),o.Bb(1),o.sc("title",o.nc(7,4,"Configure")),o.Bb(4),o.sc("title",o.nc(11,6,"Delete"))}}function _U(e,t){1&e&&(o.Vb(0,"div",119),o.Vb(1,"span",120),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"DragFieldsHere")))}function LU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function AU(e,t){1&e&&(o.Vb(0,"div",127),o.Tc(1," \u200c "),o.Ub())}function FU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",121),o.Vb(1,"div",122),o.Rc(2,LU,1,0,"fa-icon",31),o.Vb(3,"span",123),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub(),o.Vb(6,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureMeasure(n,i)})),o.mc(7,"translate"),o.Qb(8,"fa-icon",124),o.Ub(),o.Tc(9," \xa0 "),o.Vb(10,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteMeasure(n,i)})),o.mc(11,"translate"),o.Qb(12,"fa-icon",125),o.Ub(),o.Ub(),o.Rc(13,AU,2,0,"div",126),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(3),o.Vc(" ",e.Expression," "),o.Bb(1),o.sc("title",o.nc(7,4,"Configure")),o.Bb(4),o.sc("title",o.nc(11,6,"Delete"))}}function PU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",71),o.Vb(1,"input",128),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ShowColumnsTotal=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(2,"label",129),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(1),o.sc("ngModel",e.ShowColumnsTotal),o.Bb(2),o.Uc(o.nc(4,2,"ReportDefinition_ShowColumnsTotal"))}}function NU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",71),o.Vb(1,"input",130),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ShowRowsTotal=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(2,"label",131),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(1),o.sc("ngModel",e.ShowRowsTotal),o.Bb(2),o.Uc(o.nc(4,2,"ReportDefinition_ShowRowsTotal"))}}function jU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function WU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",132),o.Vb(1,"button",133),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onConfigureTotalLabels(t)})),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,jU,1,0,"fa-icon",31),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.Vc("",o.nc(3,2,"CustomizeLabels"),"..."),o.Bb(2),o.sc("ngIf",t.customizeLabelsErrors(e))}}function $U(e,t){1&e&&(o.Vb(0,"div",119),o.Vb(1,"span",120),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"DragFieldsHere")))}function qU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function QU(e,t){1&e&&(o.Vb(0,"div",127),o.Tc(1," \u200c "),o.Ub())}function HU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",121),o.Vb(1,"div",122),o.Rc(2,qU,1,0,"fa-icon",31),o.Vb(3,"span",123),o.Tc(4),o.Ub(),o.Vb(5,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureSelect(n,i)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",124),o.Ub(),o.Tc(8," \xa0 "),o.Vb(9,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteSelect(n,i)})),o.mc(10,"translate"),o.Qb(11,"fa-icon",125),o.Ub(),o.Ub(),o.Rc(12,QU,2,0,"div",126),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(2),o.Vc(" ",e.Expression," "),o.Bb(1),o.sc("title",o.nc(6,4,"Configure")),o.Bb(4),o.sc("title",o.nc(10,6,"Delete"))}}function GU(e,t){1&e&&o.Rb(0)}function zU(e,t){1&e&&o.Rb(0)}function JU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function KU(e,t){1&e&&o.Rb(0)}function YU(e,t){1&e&&o.Rb(0)}function XU(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",134),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"textarea",135,136),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Having=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onHavingChanged(t)})),o.mc(6,"translate"),o.Ub(),o.Rc(7,YU,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Having)),o.Bb(2),o.Uc(o.nc(3,8,"ReportDefinition_Having")),o.Bb(2),o.sc("ngModel",t.Having)("ngModelOptions",o.vc(12,vU))("placeholder",o.nc(6,10,"Expression")),o.Bb(3),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(13,lU,e,null==t.serverErrors?null:t.serverErrors.Having))}}function ZU(e,t){1&e&&o.Qb(0,"fa-icon",106)}function eR(e,t){1&e&&(o.Vb(0,"div",127),o.Tc(1," \u200c "),o.Ub())}function tR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",121),o.Vb(1,"div",122),o.Rc(2,ZU,1,0,"fa-icon",31),o.Vb(3,"span",123),o.Tc(4),o.Ub(),o.Vb(5,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(3).model;return o.lc().onConfigureParameter(n,i)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",124),o.Ub(),o.Ub(),o.Rc(8,eR,2,0,"div",126),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(4);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(2),o.Vc(" ","@"+e.Key," "),o.Bb(1),o.sc("title",o.nc(6,3,"Configure"))}}function nR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",48),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"div",137),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc(2).model;return o.lc().drop(t,n)})),o.Rc(5,tR,9,5,"div",54),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"ReportDefinition_Parameters")),o.Bb(2),o.sc("cdkDropListData",t.getParameters(e)),o.Bb(1),o.sc("ngForOf",t.getParameters(e))}}function iR(e,t){1&e&&o.Qb(0,"fa-icon",106)}function oR(e,t){1&e&&(o.Vb(0,"div",119),o.Vb(1,"span",120),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"DragFieldsHere")))}function cR(e,t){1&e&&o.Qb(0,"fa-icon",106)}function rR(e,t){1&e&&(o.Vb(0,"div",127),o.Tc(1," \u200c "),o.Ub())}function sR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",121),o.Vb(1,"div",122),o.Rc(2,cR,1,0,"fa-icon",31),o.Vb(3,"span",123),o.Tc(4),o.Ub(),o.Vb(5,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureSelect(n,i)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",124),o.Ub(),o.Tc(8," \xa0 "),o.Vb(9,"button",49),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteSelect(n,i)})),o.mc(10,"translate"),o.Qb(11,"fa-icon",125),o.Ub(),o.Ub(),o.Rc(12,rR,2,0,"div",126),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(2),o.Vc(" ",e.Expression," "),o.Bb(1),o.sc("title",o.nc(6,4,"Configure")),o.Bb(4),o.sc("title",o.nc(10,6,"Delete"))}}function lR(e,t){1&e&&o.Rb(0)}function aR(e,t){1&e&&o.Qb(0,"fa-icon",106)}function uR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",29),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleSection("Chart")})),o.Tc(1," \xa0 "),o.Qb(2,"fa-icon",30),o.Tc(3),o.mc(4,"translate"),o.Rc(5,aR,1,0,"fa-icon",31),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("flip",t.flipIcon(t.showSection("Chart")))("rotate",t.rotateIcon(t.showSection("Chart"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(4,4,"Chart")," "),o.Bb(2),o.sc("ngIf",t.chartSectionErrors(e))}}function dR(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function bR(e,t){1&e&&o.Rb(0)}function fR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",71),o.Vb(1,"input",141),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.DefaultsToChart=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onDefinitionChange(t,"DefaultsToChart")})),o.Ub(),o.Vb(2,"label",142),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3).model;o.Bb(1),o.sc("ngModel",e.DefaultsToChart),o.Bb(2),o.Uc(o.nc(4,2,"ReportDefinition_DefaultsToChart"))}}function mR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",32),o.Vb(1,"div",17),o.Vb(2,"label",138),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",139,140),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).model;return o.lc().onChartChange(t,n)})),o.Qb(7,"option",99),o.Rc(8,dR,2,2,"option",21),o.Ub(),o.Rc(9,bR,1,0,"ng-container",22),o.Ub(),o.Rc(10,fR,5,4,"div",57),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("d-none",!n.showSection("Chart")),o.Bb(1),o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Chart)),o.Bb(2),o.Uc(o.nc(4,10,"ReportDefinition_Chart")),o.Bb(2),o.sc("ngModel",t.Chart),o.Bb(3),o.sc("ngForOf",n.allCharts),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(12,lU,e,null==t.serverErrors?null:t.serverErrors.Chart)),o.Bb(1),o.sc("ngIf",!!t.Chart)}}function gR(e,t){1&e&&o.Qb(0,"fa-icon",106)}function pR(e,t){1&e&&o.Rb(0)}function hR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr"),o.Vb(1,"td",147),o.Vb(2,"t-roles-picker",148,149),o.hc("ngModelChange",(function(n){return o.Ic(e),t.$implicit.RoleId=n})),o.Ub(),o.Rc(4,pR,1,0,"ng-container",22),o.Ub(),o.Vb(5,"td"),o.Vb(6,"button",150),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(3).model;return o.lc().onDeleteRole(i,n)})),o.Qb(7,"fa-icon",151),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.Fc(3);o.lc(4);const i=o.Fc(7);o.Bb(2),o.sc("ngModel",e.RoleId)("showCreate",!1),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,lU,n,null==e||null==e.serverErrors?null:e.serverErrors.Key))}}function vR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",143),o.Vb(1,"label",48),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"table",144),o.Vb(5,"tbody"),o.Rc(6,hR,8,7,"tr",145),o.Ub(),o.Ub(),o.Vb(7,"button",146),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onInsertRole(t)})),o.Qb(8,"fa-icon",50),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(2),o.Uc(o.nc(3,3,"ForMembersOfRoles")),o.Bb(4),o.sc("ngForOf",e.Roles),o.Bb(3),o.Vc("\xa0\xa0",o.nc(10,5,"Add")," ")}}function IR(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function yR(e,t){1&e&&o.Rb(0)}function wR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",161),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(3).model;return o.lc().onIconClick(i,n)})),o.Qb(1,"fa-icon",162),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3).model;o.Gb("t-highlighted",e.value===n.MainMenuIcon),o.sc("title",e.value),o.Bb(1),o.sc("icon",e.value)}}function CR(e,t){1&e&&o.Rb(0)}function MR(e,t){1&e&&o.Rb(0)}const VR=function(e){return{control:null,serverErrors:e}};function TR(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",17),o.Vb(2,"label",152),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",153,154),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.MainMenuSection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"MainMenuSection")})),o.Qb(7,"option",99),o.Rc(8,IR,2,2,"option",21),o.Ub(),o.Rc(9,yR,1,0,"ng-container",22),o.Ub(),o.Vb(10,"div",17),o.Vb(11,"label",155),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Vb(14,"div",156),o.Rc(15,wR,2,4,"div",157),o.Ub(),o.Rc(16,CR,1,0,"ng-container",22),o.Ub(),o.Vb(17,"div",17),o.Vb(18,"label",158),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"input",159,160),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.MainMenuSortKey=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"MainMenuSortKey")})),o.Ub(),o.Rc(23,MR,1,0,"ng-container",22),o.Ub(),o.Sb()}if(2&e){const e=o.Fc(6),t=o.Fc(22),n=o.lc(2).model,i=o.lc(),c=o.Fc(7);o.Bb(3),o.Uc(o.nc(4,14,"MainMenuSection")),o.Bb(2),o.sc("ngModel",n.MainMenuSection),o.Bb(3),o.sc("ngForOf",i.allMainMenuSections),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(20,lU,e,null==n.serverErrors?null:n.serverErrors.MainMenuSection)),o.Bb(3),o.Uc(o.nc(13,16,"MainMenuIcon")),o.Bb(3),o.sc("ngForOf",i.allMainMenuIcons),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.wc(23,VR,null==n.serverErrors?null:n.serverErrors.MainMenuIcon)),o.Bb(3),o.Uc(o.nc(20,18,"MainMenuSortKey")),o.Bb(2),o.sc("ngModel",n.MainMenuSortKey)("ngModelOptions",o.vc(25,vU)),o.Bb(2),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(26,lU,t,null==n.serverErrors?null:n.serverErrors.MainMenuSortKey))}}function ER(e,t){1&e&&(o.Vb(0,"div",163),o.Vb(1,"div",164),o.Vb(2,"span"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Ub()),2&e&&(o.Bb(3),o.Uc(o.nc(4,1,"Preview")))}const xR=function(e,t,n,i,o){return[e,t,n,i,o]},UR=function(e,t,n){return[e,t,n]},RR=function(e){return[e]};function DR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",10),o.Rc(1,iU,6,4,"div",11),o.Vb(2,"div",12),o.Vb(3,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleFields()})),o.Vb(4,"span"),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Vb(7,"div",14),o.Qb(8,"fa-icon",15),o.Ub(),o.Ub(),o.Vb(9,"div",16),o.Vb(10,"div",17),o.Vb(11,"label",18),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Vb(14,"select",19,20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Collection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCollectionChange(t)})),o.Rc(16,oU,2,2,"option",21),o.Ub(),o.Rc(17,cU,1,0,"ng-container",22),o.Ub(),o.Rc(18,aU,9,12,"div",23),o.Qb(19,"hr"),o.Vb(20,"div",17),o.Vb(21,"input",24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).search=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onSearchChanged(t)})),o.mc(22,"translate"),o.Ub(),o.Ub(),o.Vb(23,"div",25,26),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().drop(t,n)})),o.Rc(25,dU,8,14,"div",27),o.Ub(),o.Ub(),o.Ub(),o.Rc(26,bU,6,4,"div",11),o.Vb(27,"div",12),o.Vb(28,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleDefinition()})),o.Vb(29,"span"),o.Tc(30),o.mc(31,"translate"),o.Ub(),o.Vb(32,"div",14),o.Qb(33,"fa-icon",15),o.Ub(),o.Ub(),o.Vb(34,"div",28),o.Vb(35,"div",29),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Title")})),o.Tc(36," \xa0 "),o.Qb(37,"fa-icon",30),o.Tc(38),o.mc(39,"translate"),o.Rc(40,fU,1,0,"fa-icon",31),o.Ub(),o.Vb(41,"div",32),o.Vb(42,"div",17),o.Vb(43,"label",33),o.Tc(44),o.mc(45,"translate"),o.Ub(),o.Vb(46,"input",34,35),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Code")})),o.Ub(),o.Rc(48,mU,1,0,"ng-container",22),o.Ub(),o.Vb(49,"div",17),o.Vb(50,"label",36),o.Tc(51),o.mc(52,"translate"),o.Ub(),o.Vb(53,"input",37,38),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Title=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Title")})),o.Ub(),o.Rc(55,gU,1,0,"ng-container",22),o.Ub(),o.Vb(56,"div",17),o.Vb(57,"label",39),o.Tc(58),o.mc(59,"translate"),o.Ub(),o.Vb(60,"textarea",40,41),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Description=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Description")})),o.Ub(),o.Rc(62,pU,1,0,"ng-container",22),o.Ub(),o.Rc(63,IU,7,13,"div",23),o.Rc(64,wU,7,13,"div",23),o.Rc(65,MU,7,13,"div",23),o.Rc(66,TU,7,13,"div",23),o.Ub(),o.Vb(67,"div",29),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Data")})),o.Tc(68," \xa0 "),o.Qb(69,"fa-icon",30),o.Tc(70),o.mc(71,"translate"),o.Rc(72,EU,1,0,"fa-icon",31),o.Ub(),o.Vb(73,"div",32),o.Vb(74,"div",17),o.Vb(75,"label",42),o.Tc(76),o.mc(77,"translate"),o.Ub(),o.Vb(78,"div",43),o.Vb(79,"input",44),o.hc("change",(function(){o.Ic(e);const t=o.lc().model,n=o.lc();return t.Type="Summary",n.onDefinitionChange(t)})),o.Ub(),o.Vb(80,"label",45),o.Tc(81),o.mc(82,"translate"),o.Ub(),o.Ub(),o.Tc(83," \xa0\xa0 "),o.Vb(84,"div",43),o.Vb(85,"input",46),o.hc("change",(function(){o.Ic(e);const t=o.lc().model,n=o.lc();return t.Type="Details",n.onDefinitionChange(t)})),o.Ub(),o.Vb(86,"label",47),o.Tc(87),o.mc(88,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Vb(89,"div"),o.Vb(90,"div",17),o.Vb(91,"label",48),o.Tc(92),o.mc(93,"translate"),o.Ub(),o.Tc(94,"\xa0 "),o.Vb(95,"button",49),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateRow(t)})),o.mc(96,"translate"),o.Qb(97,"fa-icon",50),o.Ub(),o.Vb(98,"div",51,52),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().drop(t,n)})),o.Rc(100,xU,4,3,"div",53),o.Rc(101,DU,14,8,"div",54),o.Ub(),o.Ub(),o.Vb(102,"div",17),o.Vb(103,"label",48),o.Tc(104),o.mc(105,"translate"),o.Ub(),o.Tc(106,"\xa0 "),o.Vb(107,"button",49),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateColumn(t)})),o.mc(108,"translate"),o.Qb(109,"fa-icon",50),o.Ub(),o.Vb(110,"div",51,55),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().drop(t,n)})),o.Rc(112,BU,4,3,"div",53),o.Rc(113,OU,14,8,"div",54),o.Ub(),o.Ub(),o.Vb(114,"div",17),o.Vb(115,"label",48),o.Tc(116),o.mc(117,"translate"),o.Ub(),o.Tc(118,"\xa0 "),o.Vb(119,"button",49),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateMeasure(t)})),o.mc(120,"translate"),o.Qb(121,"fa-icon",50),o.Ub(),o.Vb(122,"div",51,56),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().drop(t,n)})),o.Rc(124,_U,4,3,"div",53),o.Rc(125,FU,14,8,"div",54),o.Ub(),o.Ub(),o.Rc(126,PU,5,4,"div",57),o.Rc(127,NU,5,4,"div",57),o.Rc(128,WU,5,4,"div",58),o.Ub(),o.Vb(129,"div"),o.Vb(130,"div",17),o.Vb(131,"label",48),o.Tc(132),o.mc(133,"translate"),o.Ub(),o.Tc(134,"\xa0 "),o.Vb(135,"button",49),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateSelect(t)})),o.mc(136,"translate"),o.Qb(137,"fa-icon",50),o.Ub(),o.Vb(138,"div",59,60),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().drop(t,n)})),o.Rc(140,$U,4,3,"div",53),o.Rc(141,HU,13,8,"div",54),o.Ub(),o.Ub(),o.Vb(142,"div",17),o.Vb(143,"label",61),o.Tc(144),o.mc(145,"translate"),o.Ub(),o.Vb(146,"input",62,63),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.OrderBy=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(148,GU,1,0,"ng-container",22),o.Ub(),o.Vb(149,"div",17),o.Vb(150,"label",64),o.Tc(151),o.mc(152,"translate"),o.Ub(),o.Vb(153,"input",65,66),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Top=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(155,zU,1,0,"ng-container",22),o.Ub(),o.Ub(),o.Ub(),o.Vb(156,"div",29),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Filter")})),o.Tc(157," \xa0 "),o.Qb(158,"fa-icon",30),o.Tc(159),o.mc(160,"translate"),o.Rc(161,JU,1,0,"fa-icon",31),o.Ub(),o.Vb(162,"div",32),o.Vb(163,"div",17),o.Vb(164,"label",67),o.Tc(165),o.mc(166,"translate"),o.Ub(),o.Vb(167,"textarea",68,69),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Filter=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onFilterChanged(t)})),o.mc(169,"translate"),o.Ub(),o.Rc(170,KU,1,0,"ng-container",22),o.Ub(),o.Rc(171,XU,8,16,"div",23),o.Rc(172,nR,6,5,"div",70),o.Ub(),o.Vb(173,"div"),o.Vb(174,"div",29),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Drilldown")})),o.Tc(175," \xa0 "),o.Qb(176,"fa-icon",30),o.Tc(177),o.mc(178,"translate"),o.Rc(179,iR,1,0,"fa-icon",31),o.Ub(),o.Vb(180,"div",32),o.Vb(181,"div",71),o.Vb(182,"input",72),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.IsCustomDrilldown=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(183,"label",73),o.Tc(184),o.mc(185,"translate"),o.Ub(),o.Ub(),o.Vb(186,"div",74),o.Vb(187,"div",17),o.Vb(188,"label",48),o.Tc(189),o.mc(190,"translate"),o.Ub(),o.Tc(191,"\xa0 "),o.Vb(192,"button",49),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateSelect(t)})),o.mc(193,"translate"),o.Qb(194,"fa-icon",50),o.Ub(),o.Vb(195,"div",59,75),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().drop(t,n)})),o.Rc(197,oR,4,3,"div",53),o.Rc(198,sR,13,8,"div",54),o.Ub(),o.Ub(),o.Vb(199,"div",17),o.Vb(200,"label",76),o.Tc(201),o.mc(202,"translate"),o.Ub(),o.Vb(203,"input",77,63),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.OrderBy=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onOrderByChanged(t)})),o.Ub(),o.Rc(205,lR,1,0,"ng-container",22),o.Ub(),o.Vb(206,"div",71),o.Vb(207,"input",78),o.hc("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().togglePreviewDrilldown(t)}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(208,"label",79),o.Tc(209),o.mc(210,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Rc(211,uR,6,6,"div",80),o.Rc(212,mR,11,15,"div",81),o.Vb(213,"div",29),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("MainMenu")})),o.Tc(214," \xa0 "),o.Qb(215,"fa-icon",30),o.Tc(216),o.mc(217,"translate"),o.Rc(218,gR,1,0,"fa-icon",31),o.Ub(),o.Vb(219,"div",32),o.Vb(220,"div",82),o.Vb(221,"input",83),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ShowInMainMenu=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"ShowInMainMenu")})),o.Ub(),o.Vb(222,"label",84),o.Tc(223),o.mc(224,"translate"),o.Ub(),o.Ub(),o.Rc(225,vR,11,7,"div",85),o.Rc(226,TR,24,29,"ng-container",86),o.Ub(),o.Ub(),o.Ub(),o.Vb(227,"div",87),o.Rc(228,ER,5,3,"div",88),o.Vb(229,"div",89),o.Vb(230,"div",90),o.Qb(231,"t-report",91),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(15),t=o.Fc(24),n=o.Fc(47),i=o.Fc(54),c=o.Fc(61),r=o.Fc(99),s=o.Fc(111),l=o.Fc(123),a=o.Fc(139),u=o.Fc(147),d=o.Fc(154),b=o.Fc(168),f=o.Fc(196),m=o.lc(),g=m.isEdit,p=m.model,h=o.lc(),v=o.Fc(7);o.Bb(1),o.sc("ngIf",g&&h.collapseFields),o.Bb(1),o.Gb("d-flex",g&&!h.collapseFields)("d-none",!g||h.collapseFields),o.Bb(3),o.Uc(o.nc(6,173,"Fields")),o.Bb(3),o.sc("flip",h.flipIcon(!1)),o.Bb(2),o.Gb("is-invalid",h.invalid(e,null==p.serverErrors?null:p.serverErrors.Collection)),o.Bb(2),o.Uc(o.nc(13,175,"ReportDefinition_Collection")),o.Bb(2),o.sc("ngModel",p.Collection),o.Bb(2),o.sc("ngForOf",h.allCollections),o.Bb(1),o.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",o.xc(239,lU,e,null==p.serverErrors?null:p.serverErrors.Collection)),o.Bb(1),o.sc("ngIf",h.showDefinitionIdSelector(p)),o.Bb(3),o.sc("ngModel",h.search)("placeholder",o.nc(22,177,"Search")+"..."),o.Bb(2),o.sc("cdkDropListConnectedTo",o.Ac(242,xR,r,s,l,a,f))("cdkDropListData",h.allFields(p)),o.Bb(2),o.sc("ngForOf",h.allFields(p)),o.Bb(1),o.sc("ngIf",g&&h.collapseDefinition),o.Bb(1),o.Gb("d-flex",g&&!h.collapseDefinition)("d-none",!g||h.collapseDefinition),o.Bb(3),o.Uc(o.nc(31,179,"Definition")),o.Bb(3),o.sc("flip",h.flipIcon(!1)),o.Bb(4),o.sc("flip",h.flipIcon(h.showSection("Title")))("rotate",h.rotateIcon(h.showSection("Title"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(39,181,"Title")," "),o.Bb(2),o.sc("ngIf",h.titleSectionErrors(p)),o.Bb(1),o.Gb("d-none",!h.showSection("Title")),o.Bb(1),o.Gb("is-invalid",h.invalid(n,null==p.serverErrors?null:p.serverErrors.Code)),o.Bb(2),o.Uc(o.nc(45,183,"Code")),o.Bb(2),o.sc("ngModel",p.Code)("ngModelOptions",o.vc(248,vU)),o.Bb(2),o.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",o.xc(249,lU,n,null==p.serverErrors?null:p.serverErrors.Code)),o.Bb(1),o.Gb("is-invalid",h.invalid(i,null==p.serverErrors?null:p.serverErrors.Title)),o.Bb(2),o.Uc(o.nc(52,185,"Title")+h.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",p.Title)("ngModelOptions",o.vc(252,vU)),o.Bb(2),o.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",o.xc(253,lU,i,null==p.serverErrors?null:p.serverErrors.Title)),o.Bb(1),o.Gb("is-invalid",h.invalid(c,null==p.serverErrors?null:p.serverErrors.Description)),o.Bb(2),o.Uc(o.nc(59,187,"Description")+h.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",p.Description)("ngModelOptions",o.vc(256,vU)),o.Bb(2),o.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",o.xc(257,lU,c,null==p.serverErrors?null:p.serverErrors.Description)),o.Bb(1),o.sc("ngIf",null==h.ws.settings?null:h.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==h.ws.settings?null:h.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==h.ws.settings?null:h.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("ngIf",null==h.ws.settings?null:h.ws.settings.TernaryLanguageId),o.Bb(3),o.sc("flip",h.flipIcon(h.showSection("Data")))("rotate",h.rotateIcon(h.showSection("Data"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(71,189,"Data")," "),o.Bb(2),o.sc("ngIf",h.dataSectionErrors(p)),o.Bb(1),o.Gb("d-none",!h.showSection("Data")),o.Bb(3),o.Uc(o.nc(77,191,"ReportDefinition_Type")),o.Bb(3),o.sc("checked","Summary"===p.Type),o.Bb(2),o.Uc(o.nc(82,193,"ReportDefinition_Type_Summary")),o.Bb(4),o.sc("checked","Details"===p.Type),o.Bb(2),o.Uc(o.nc(88,195,"ReportDefinition_Type_Details")),o.Bb(2),o.Gb("d-none","Summary"!==p.Type),o.Bb(3),o.Uc(o.nc(93,197,"ReportDefinition_Rows")),o.Bb(3),o.sc("title",o.nc(96,199,"Create")),o.Bb(3),o.sc("cdkDropListConnectedTo",o.yc(260,UR,t,s,l))("cdkDropListData",h.getRows(p)),o.Bb(2),o.sc("ngIf",!h.getRows(p).length),o.Bb(1),o.sc("ngForOf",h.getRows(p)),o.Bb(3),o.Uc(o.nc(105,201,"ReportDefinition_Columns")),o.Bb(3),o.sc("title",o.nc(108,203,"Create")),o.Bb(3),o.sc("cdkDropListConnectedTo",o.yc(264,UR,t,r,l))("cdkDropListData",h.getColumns(p)),o.Bb(2),o.sc("ngIf",!h.getColumns(p).length),o.Bb(1),o.sc("ngForOf",h.getColumns(p)),o.Bb(3),o.Uc(o.nc(117,205,"ReportDefinition_Measures")),o.Bb(3),o.sc("title",o.nc(120,207,"Create")),o.Bb(3),o.sc("cdkDropListConnectedTo",o.yc(268,UR,t,r,s))("cdkDropListData",h.getMeasures(p)),o.Bb(2),o.sc("ngIf",!h.getMeasures(p).length),o.Bb(1),o.sc("ngForOf",h.getMeasures(p)),o.Bb(1),o.sc("ngIf",!(null==p.Columns||!p.Columns.length)),o.Bb(1),o.sc("ngIf",!(null==p.Rows||!p.Rows.length)),o.Bb(1),o.sc("ngIf",!(null==p.Rows||!p.Rows.length)&&p.ShowRowsTotal||!(null==p.Columns||!p.Columns.length)&&p.ShowColumnsTotal),o.Bb(1),o.Gb("d-none","Details"!==p.Type),o.Bb(3),o.Uc(o.nc(133,209,"ReportDefinition_Select")),o.Bb(3),o.sc("title",o.nc(136,211,"Create")),o.Bb(3),o.sc("cdkDropListConnectedTo",o.wc(272,RR,t))("cdkDropListData",h.getSelect(p)),o.Bb(2),o.sc("ngIf",!h.getSelect(p).length),o.Bb(1),o.sc("ngForOf",h.getSelect(p)),o.Bb(1),o.Gb("is-invalid",h.invalid(u,null==p.serverErrors?null:p.serverErrors.OrderBy)),o.Bb(2),o.Uc(o.nc(145,213,"ReportDefinition_OrderBy")),o.Bb(2),o.sc("ngModel",p.OrderBy)("ngModelOptions",o.vc(274,vU)),o.Bb(2),o.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",o.xc(275,lU,u,null==p.serverErrors?null:p.serverErrors.OrderBy)),o.Bb(1),o.Gb("is-invalid",h.invalid(d,null==p.serverErrors?null:p.serverErrors.Top)),o.Bb(2),o.Uc(o.nc(152,215,"ReportDefinition_Top")),o.Bb(2),o.sc("ngModel",p.Top)("ngModelOptions",o.vc(278,vU)),o.Bb(2),o.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",o.xc(279,lU,d,null==p.serverErrors?null:p.serverErrors.Top)),o.Bb(3),o.sc("flip",h.flipIcon(h.showSection("Filter")))("rotate",h.rotateIcon(h.showSection("Filter"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(160,217,"Filter")," "),o.Bb(2),o.sc("ngIf",h.filterSectionErrors(p)),o.Bb(1),o.Gb("d-none",!h.showSection("Filter")),o.Bb(1),o.Gb("is-invalid",h.invalid(b,null==p.serverErrors?null:p.serverErrors.Filter)),o.Bb(2),o.Uc(o.nc(166,219,"ReportDefinition_Filter")),o.Bb(2),o.sc("ngModel",p.Filter)("ngModelOptions",o.vc(282,vU))("placeholder",o.nc(169,221,"Expression")),o.Bb(3),o.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",o.xc(283,lU,b,null==p.serverErrors?null:p.serverErrors.Filter)),o.Bb(1),o.sc("ngIf",h.showHaving(p)),o.Bb(1),o.sc("ngIf",!!h.getParameters(p).length),o.Bb(1),o.Gb("d-none","Summary"!==p.Type),o.Bb(3),o.sc("flip",h.flipIcon(h.showSection("Drilldown")))("rotate",h.rotateIcon(h.showSection("Drilldown"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(178,223,"Drilldown")," "),o.Bb(2),o.sc("ngIf",h.drilldownSectionErrors(p)),o.Bb(1),o.Gb("d-none",!h.showSection("Drilldown")),o.Bb(2),o.sc("ngModel",p.IsCustomDrilldown),o.Bb(2),o.Uc(o.nc(185,225,"ReportDefinition_IsCustomDrilldown")),o.Bb(2),o.Gb("d-none",!p.IsCustomDrilldown),o.Bb(3),o.Uc(o.nc(190,227,"ReportDefinition_Select")),o.Bb(3),o.sc("title",o.nc(193,229,"Create")),o.Bb(3),o.sc("cdkDropListConnectedTo",o.wc(286,RR,t))("cdkDropListData",h.getSelect(p)),o.Bb(2),o.sc("ngIf",!h.getSelect(p).length),o.Bb(1),o.sc("ngForOf",h.getSelect(p)),o.Bb(1),o.Gb("is-invalid",h.invalid(u,null==p.serverErrors?null:p.serverErrors.OrderBy)),o.Bb(2),o.Uc(o.nc(202,231,"ReportDefinition_OrderBy")),o.Bb(2),o.sc("ngModel",p.OrderBy)("ngModelOptions",o.vc(288,vU)),o.Bb(2),o.sc("ngTemplateOutlet",v)("ngTemplateOutletContext",o.xc(289,lU,u,null==p.serverErrors?null:p.serverErrors.OrderBy)),o.Bb(2),o.sc("ngModel",h.previewDrilldown),o.Bb(2),o.Uc(o.nc(210,233,"Preview")),o.Bb(2),o.sc("ngIf","Summary"===p.Type),o.Bb(1),o.sc("ngIf","Summary"===p.Type),o.Bb(3),o.sc("flip",h.flipIcon(h.showSection("MainMenu")))("rotate",h.rotateIcon(h.showSection("MainMenu"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(217,235,"MainMenu")," "),o.Bb(2),o.sc("ngIf",h.mainMenuSectionErrors(p)),o.Bb(1),o.Gb("d-none",!h.showSection("MainMenu")),o.Bb(2),o.sc("ngModel",p.ShowInMainMenu),o.Bb(2),o.Uc(o.nc(224,237,"Definition_ShowInMainMenu")),o.Bb(2),o.sc("ngIf",p.ShowInMainMenu),o.Bb(1),o.sc("ngIf",p.ShowInMainMenu),o.Bb(2),o.sc("ngIf",g),o.Bb(3),o.sc("previewDefinition",h.getForClient(p))("showChart",p.DefaultsToChart)("disableDrilldown",h.isPopupMode)}}function BR(e,t){if(1&e&&o.Rc(0,DR,232,292,"div",9),2&e){const e=t.isEdit,n=o.lc();o.sc("ngIf",n.watchIsEdit(e))}}function SR(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function kR(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",165),o.Rc(2,SR,2,1,"span",145),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(2),o.sc("ngForOf",i.errors(t,n))}}function OR(e,t){if(1&e&&o.Rc(0,kR,3,1,"ng-container",86),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}function _R(e,t){1&e&&o.Rb(0)}function LR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",195),o.Vb(1,"button",196),o.Vb(2,"span",48),o.Qb(3,"fa-icon",197),o.Ub(),o.Ub(),o.Vb(4,"div",198),o.Vb(5,"div",71),o.Vb(6,"input",199),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).dimToEdit.Localize=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)})),o.Ub(),o.Vb(7,"label",200),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.sc("placement",e.commandsDropdownPlacement),o.Bb(6),o.sc("ngModel",e.dimToEdit.Localize),o.Bb(2),o.Uc(o.nc(9,3,"ReportDefinition_Localize"))}}function AR(e,t){1&e&&o.Rb(0)}function FR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",191),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"div",122),o.Vb(6,"input",192,193),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).dimToEdit.DisplayExpression=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)})),o.mc(8,"translate"),o.Ub(),o.Rc(9,LR,10,5,"div",194),o.Ub(),o.Rc(10,AR,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(7),t=o.lc(2),n=o.Fc(7);o.Gb("is-invalid",t.invalid(e,null==t.dimToEdit.serverErrors?null:t.dimToEdit.serverErrors.DisplayExpression)),o.Bb(2),o.Wc("",o.nc(3,10,"ReportDefinition_DisplayExpression")," (",o.nc(4,12,"Visibility_Optional"),")"),o.Bb(4),o.sc("ngModel",t.dimToEdit.DisplayExpression)("placeholder",o.nc(8,14,"Expression"))("ngModelOptions",o.vc(16,vU)),o.Bb(3),o.sc("ngIf",t.isMultilingual),o.Bb(1),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(17,lU,e,null==t.dimToEdit.serverErrors?null:t.dimToEdit.serverErrors.DisplayExpression))}}function PR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",201),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",202),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).dimToEdit.Label2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).dimToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,3,"Label")+e.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",e.dimToEdit.Label2)("ngModelOptions",o.vc(5,vU))}}function NR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",203),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",204),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).dimToEdit.Label3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).dimToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,3,"Label")+e.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",e.dimToEdit.Label3)("ngModelOptions",o.vc(5,vU))}}function jR(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e),o.Bb(1),o.Vc(" ",o.nc(2,2,"ReportDefinition_OrderDirection_"+e),"")}}function WR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",48),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"div",205),o.Vb(5,"input",206),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).dimToEdit.ShowAsTree=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).dimToEditHasChanged=!0})),o.Ub(),o.Vb(6,"label",207),o.Tc(7,"\u200c"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,2,"ReportDefinition_ShowAsTree")),o.Bb(3),o.sc("ngModel",e.dimToEdit.ShowAsTree)}}function $R(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",177),o.Vb(2,"label",208),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",209),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).dimToEdit.AutoExpandLevel=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).dimToEditHasChanged=!0})),o.Ub(),o.Ub(),o.Sb()}if(2&e){const e=o.lc(2);o.Bb(3),o.Uc(o.nc(4,3,"ReportDefinition_AutoExpandLevel")),o.Bb(2),o.sc("ngModel",e.dimToEdit.AutoExpandLevel)("ngModelOptions",o.vc(5,vU))}}function qR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",48),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"div",205),o.Vb(5,"input",210),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2);return n.dimToEdit.AutoExpandLevel=t?1e3:0,n.dimToEditHasChanged=!0})),o.Ub(),o.Vb(6,"label",211),o.Tc(7,"\u200c"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,2,"ReportDefinition_AutoExpand")),o.Bb(3),o.sc("ngModel",e.dimToEdit.AutoExpandLevel>0)}}function QR(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.Uc(o.nc(2,1,"Label")+e.ws.secondaryPostfix)}}function HR(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.Vc("",o.nc(2,1,"Label")+e.ws.ternaryPostfix," ")}}function GR(e,t){1&e&&(o.Tb(0),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Sb())}function zR(e,t){if(1&e&&(o.Vb(0,"div",230),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Vc(" ",e.Expression,"")}}function JR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",195),o.Vb(1,"button",231),o.Vb(2,"span",48),o.Qb(3,"fa-icon",197),o.Ub(),o.Ub(),o.Vb(4,"div",198),o.Vb(5,"div",71),o.Vb(6,"input",232),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Localize=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)})),o.Ub(),o.Vb(7,"label",233),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(),t=e.index,n=e.$implicit,i=o.lc(3);o.sc("placement",i.commandsDropdownPlacement),o.Bb(6),o.uc("id","attlocalize",t,""),o.sc("ngModel",n.Localize),o.Bb(1),o.uc("for","attlocalize",t,""),o.Bb(1),o.Uc(o.nc(9,5,"ReportDefinition_Localize"))}}function KR(e,t){1&e&&o.Rb(0)}function YR(e,t){1&e&&o.Rb(0)}function XR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",147),o.Vb(1,"input",227),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Label2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(4).dimToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc().$implicit;o.Bb(1),o.sc("ngModel",e.Label2)("ngModelOptions",o.vc(2,vU))}}function ZR(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",147),o.Vb(1,"input",227),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Label3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(4).dimToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc().$implicit;o.Bb(1),o.sc("ngModel",e.Label3)("ngModelOptions",o.vc(2,vU))}}function eD(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e),o.Bb(1),o.Vc(" ",o.nc(2,2,"ReportDefinition_OrderDirection_"+e),"")}}const tD=function(){return["asc","desc"]};function nD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr",220),o.Rc(1,GR,3,0,"ng-container",221),o.Rc(2,zR,2,1,"div",222),o.Vb(3,"td",223),o.Qb(4,"fa-icon",224),o.Ub(),o.Vb(5,"td",147),o.Vb(6,"div",122),o.Vb(7,"div",89),o.Vb(8,"input",225,226),o.hc("ngModelChange",(function(n){return o.Ic(e),t.$implicit.Expression=n}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)})),o.mc(10,"translate"),o.Ub(),o.Ub(),o.Rc(11,JR,10,7,"div",194),o.Ub(),o.Rc(12,KR,1,0,"ng-container",22),o.Ub(),o.Vb(13,"td",147),o.Vb(14,"input",227,228),o.hc("ngModelChange",(function(n){return o.Ic(e),t.$implicit.Label=n}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).dimToEditHasChanged=!0})),o.Ub(),o.Rc(16,YR,1,0,"ng-container",22),o.Ub(),o.Rc(17,XR,2,3,"td",229),o.Rc(18,ZR,2,3,"td",229),o.Vb(19,"td",147),o.Vb(20,"select",182),o.hc("ngModelChange",(function(n){return o.Ic(e),t.$implicit.OrderDirection=n}))("ngModelChange",(function(){o.Ic(e);const n=t.index,i=o.lc(3);return i.onSetDimOrderDirection(i.dimToEdit,n)})),o.Qb(21,"option",99),o.Rc(22,eD,3,4,"option",21),o.Ub(),o.Ub(),o.Vb(23,"td"),o.Vb(24,"button",150),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(3);return i.onDeleteAttribute(n,i.dimToEdit)})),o.Qb(25,"fa-icon",151),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.Fc(9),i=o.Fc(15),c=o.lc(3),r=o.Fc(7);o.Bb(5),o.Gb("is-invalid",c.invalid(n,null==e.serverErrors?null:e.serverErrors.Expression)),o.Bb(3),o.sc("ngModel",e.Expression)("placeholder",o.nc(10,16,"Expression"))("ngModelOptions",o.vc(18,vU)),o.Bb(3),o.sc("ngIf",c.isMultilingual),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.xc(19,lU,n,null==e||null==e.serverErrors?null:e.serverErrors.Expression)),o.Bb(2),o.sc("ngModel",e.Label)("ngModelOptions",o.vc(22,vU)),o.Bb(2),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.xc(23,lU,i,null==e||null==e.serverErrors?null:e.serverErrors.Label)),o.Bb(1),o.sc("ngIf",null==c.ws.settings?null:c.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==c.ws.settings?null:c.ws.settings.SecondaryLanguageId),o.Bb(2),o.sc("ngModel",e.OrderDirection),o.Bb(2),o.sc("ngForOf",o.vc(26,tD))}}function iD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",212),o.Vb(1,"label",181),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"table",144),o.Vb(5,"thead",213),o.Vb(6,"tr"),o.Qb(7,"th",214),o.Vb(8,"th",215),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Vb(11,"th"),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Rc(14,QR,3,3,"th",86),o.Rc(15,HR,3,3,"th",86),o.Vb(16,"th",216),o.Tc(17),o.mc(18,"translate"),o.Ub(),o.Qb(19,"th",214),o.Ub(),o.Ub(),o.Vb(20,"tbody",217),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc(2);return n.rowDrop(t,n.dimToEdit.Attributes),n.dimToEditHasChanged=!0})),o.Rc(21,nD,26,27,"tr",218),o.Ub(),o.Ub(),o.Vb(22,"button",219),o.hc("click",(function(){o.Ic(e);const t=o.lc(2);return t.onInsertAttribute(t.dimToEdit)})),o.Qb(23,"fa-icon",50),o.Tc(24),o.mc(25,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,8,"ReportDefinition_Attributes")),o.Bb(7),o.Uc(o.nc(10,10,"ReportDefinition_Expression")),o.Bb(3),o.Uc(o.nc(13,12,"Label")+e.ws.primaryPostfix),o.Bb(2),o.sc("ngIf",null==e.ws.settings?null:e.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==e.ws.settings?null:e.ws.settings.TernaryLanguageId),o.Bb(2),o.Vc(" ",o.nc(18,14,"ReportDefinition_OrderDirection")," "),o.Bb(4),o.sc("ngForOf",e.dimToEdit.Attributes),o.Bb(3),o.Vc("\xa0\xa0",o.nc(25,16,"Add")," ")}}function oD(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function cD(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function rD(e,t){1&e&&o.Rb(0)}function sD(e,t){1&e&&o.Rb(0)}function lD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",238),o.Vb(1,"t-control-options",239,240),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).dimToEdit.ControlOptions=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).dimToEditHasChanged=!0})),o.Ub(),o.Rc(3,sD,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(2),t=o.lc(3),n=o.Fc(7);o.Bb(1),o.sc("control",t.dimToEdit.Control)("isEdit",!0)("ngModel",t.dimToEdit.ControlOptions),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,lU,e,null==t.dimToEdit||null==t.dimToEdit.serverErrors?null:t.dimToEdit.serverErrors.ControlOptions))}}function aD(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",177),o.Vb(2,"label",181),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",234,235),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).dimToEdit.Control=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)})),o.Qb(7,"option",99),o.Rc(8,oD,2,2,"option",21),o.Vb(9,"option",236),o.Tc(10," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),o.Ub(),o.Rc(11,cD,2,2,"option",21),o.Ub(),o.Rc(12,rD,1,0,"ng-container",22),o.Ub(),o.Rc(13,lD,4,8,"div",237),o.Sb()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=o.Fc(7);o.Bb(3),o.Uc(o.nc(4,7,"Definition_Control")),o.Bb(2),o.sc("ngModel",t.dimToEdit.Control),o.Bb(3),o.sc("ngForOf",t.controlSimpleChoices()),o.Bb(3),o.sc("ngForOf",t.controlEntityChoices()),o.Bb(1),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(9,lU,e,null==t.dimToEdit||null==t.dimToEdit.serverErrors?null:t.dimToEdit.serverErrors.Control)),o.Bb(1),o.sc("ngIf",t.showOptions(t.dimToEdit.Control))}}function uD(e,t){1&e&&(o.Vb(0,"div",241),o.Qb(1,"fa-icon",242),o.Tc(2),o.mc(3,"translate"),o.Ub()),2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"SettingHereWillClearFromMeasures")," "))}function dD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",166),o.Vb(1,"h5",167),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",168),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",169),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",170),o.Vb(8,"div",171),o.Vb(9,"div",172),o.Vb(10,"label",173),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"input",174,175),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().dimToEdit.KeyExpression=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.dimToEditHasChanged=!0,t.validateDimension(t.dimToEdit,t.modelRef)})),o.mc(15,"translate"),o.Ub(),o.Rc(16,_R,1,0,"ng-container",22),o.Ub(),o.Rc(17,FR,11,20,"div",176),o.Vb(18,"div",177),o.Vb(19,"label",178),o.Tc(20),o.mc(21,"translate"),o.Ub(),o.Vb(22,"input",179),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().dimToEdit.Label=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().dimToEditHasChanged=!0})),o.Ub(),o.Ub(),o.Rc(23,PR,5,6,"div",180),o.Rc(24,NR,5,6,"div",180),o.Vb(25,"div",177),o.Vb(26,"label",181),o.Tc(27),o.mc(28,"translate"),o.Ub(),o.Vb(29,"select",182),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().dimToEdit.OrderDirection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.onSetDimOrderDirection(t.dimToEdit,-1)})),o.Qb(30,"option",99),o.Rc(31,jR,3,4,"option",21),o.Ub(),o.Ub(),o.Rc(32,WR,8,4,"div",180),o.Rc(33,$R,6,6,"ng-container",183),o.Rc(34,qR,8,4,"ng-template",null,184,o.Sc),o.Rc(36,iD,26,18,"div",185),o.Rc(37,aD,14,12,"ng-container",86),o.Rc(38,uD,4,3,"div",186),o.Ub(),o.Ub(),o.Vb(39,"div",187),o.Vb(40,"button",188),o.hc("click",(function(){return t.$implicit.close()})),o.Qb(41,"fa-icon",189),o.Tc(42),o.mc(43,"translate"),o.Ub(),o.Vb(44,"button",190),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(45,"fa-icon",125),o.Tc(46),o.mc(47,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(14),t=o.Fc(35),n=o.lc(),i=o.Fc(7);o.Bb(2),o.Vc(" ",o.nc(3,29,"Configure")," "),o.Bb(7),o.Gb("col-sm-6",n.showDisplayExpression(n.dimToEdit,n.modelRef))("is-invalid",n.invalid(e,null==n.dimToEdit.serverErrors?null:n.dimToEdit.serverErrors.KeyExpression)),o.Bb(2),o.Uc(o.nc(12,31,"ReportDefinition_KeyExpression")),o.Bb(2),o.sc("ngModel",n.dimToEdit.KeyExpression)("placeholder",o.nc(15,33,"Expression"))("ngModelOptions",o.vc(43,vU)),o.Bb(3),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(44,lU,e,null==n.dimToEdit.serverErrors?null:n.dimToEdit.serverErrors.KeyExpression)),o.Bb(1),o.sc("ngIf",n.showDisplayExpression(n.dimToEdit,n.modelRef)),o.Bb(3),o.Uc(o.nc(21,35,"Label")+n.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",n.dimToEdit.Label)("ngModelOptions",o.vc(47,vU)),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),o.Bb(3),o.Uc(o.nc(28,37,"ReportDefinition_OrderDirection")),o.Bb(2),o.sc("ngModel",n.dimToEdit.OrderDirection),o.Bb(2),o.sc("ngForOf",o.vc(48,tD)),o.Bb(1),o.sc("ngIf",n.showShowAsTree(n.dimToEdit,n.modelRef)),o.Bb(1),o.sc("ngIf",n.showShowAsTree(n.dimToEdit,n.modelRef)&&n.dimToEdit.ShowAsTree)("ngIfElse",t),o.Bb(3),o.sc("ngIf",n.showDimensionAttributes(n.dimToEdit,n.modelRef)),o.Bb(1),o.sc("ngIf",n.showDimensionControl(n.dimToEdit,n.modelRef)),o.Bb(1),o.sc("ngIf",n.showClearOrderDirectionMessage(n.dimToEdit)),o.Bb(2),o.sc("disabled",!n.canApplyDimension(n.dimToEdit)),o.Bb(2),o.Vc(" \xa0",o.nc(43,39,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(47,41,"Cancel")," ")}}function bD(e,t){1&e&&o.Rb(0)}function fD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",201),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",202),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).measureToEdit.Label2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).measureToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,3,"Label")+e.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",e.measureToEdit.Label2)("ngModelOptions",o.vc(5,vU))}}function mD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",203),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",204),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).measureToEdit.Label3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).measureToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,3,"Label")+e.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",e.measureToEdit.Label3)("ngModelOptions",o.vc(5,vU))}}function gD(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e),o.Bb(1),o.Vc(" ",o.nc(2,2,"ReportDefinition_OrderDirection_"+e),"")}}function pD(e,t){1&e&&(o.Vb(0,"div",172),o.Qb(1,"fa-icon",242),o.Tc(2),o.mc(3,"translate"),o.Ub()),2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"SettingHereWillClearFromRowsAndMeasures")," "))}function hD(e,t){1&e&&o.Rb(0)}function vD(e,t){1&e&&o.Rb(0)}function ID(e,t){1&e&&o.Rb(0)}function yD(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function wD(e,t){1&e&&o.Rb(0)}function CD(e,t){1&e&&o.Rb(0)}function MD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",238),o.Vb(1,"t-control-options",239,259),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).measureToEdit.ControlOptions=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).measureToEditHasChanged=!0})),o.Ub(),o.Rc(3,CD,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(2),t=o.lc(3),n=o.Fc(7);o.Bb(1),o.sc("control",t.measureToEdit.Control)("isEdit",!0)("ngModel",t.measureToEdit.ControlOptions),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,lU,e,null==t.measureToEdit||null==t.measureToEdit.serverErrors?null:t.measureToEdit.serverErrors.ControlOptions))}}function VD(e,t){if(1&e){const e=o.Wb();o.Tb(0,null,248),o.Vb(2,"div",177),o.Vb(3,"label",249),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Vb(6,"input",250,251),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).measureToEdit.SuccessWhen=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)})),o.mc(8,"translate"),o.Ub(),o.Rc(9,hD,1,0,"ng-container",22),o.Ub(),o.Vb(10,"div",177),o.Vb(11,"label",252),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Vb(14,"input",253,254),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).measureToEdit.WarningWhen=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)})),o.mc(16,"translate"),o.Ub(),o.Rc(17,vD,1,0,"ng-container",22),o.Ub(),o.Vb(18,"div",177),o.Vb(19,"label",255),o.Tc(20),o.mc(21,"translate"),o.Ub(),o.Vb(22,"input",256,257),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).measureToEdit.DangerWhen=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)})),o.mc(24,"translate"),o.Ub(),o.Rc(25,ID,1,0,"ng-container",22),o.Ub(),o.Vb(26,"div",177),o.Vb(27,"label",181),o.Tc(28),o.mc(29,"translate"),o.Ub(),o.Vb(30,"select",234,258),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).measureToEdit.Control=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)})),o.Qb(32,"option",99),o.Rc(33,yD,2,2,"option",21),o.Ub(),o.Rc(34,wD,1,0,"ng-container",22),o.Ub(),o.Rc(35,MD,4,8,"div",237),o.Sb()}if(2&e){const e=o.Fc(7),t=o.Fc(15),n=o.Fc(23),i=o.Fc(31),c=o.lc(2),r=o.Fc(7);o.Bb(2),o.Gb("is-invalid",c.invalid(e,null==c.measureToEdit.serverErrors?null:c.measureToEdit.serverErrors.SuccessWhen)),o.Bb(2),o.Uc(o.nc(5,30,"ReportDefinition_SuccessWhen")),o.Bb(2),o.sc("ngModel",c.measureToEdit.SuccessWhen)("placeholder",o.nc(8,32,"Expression"))("ngModelOptions",o.vc(44,vU)),o.Bb(3),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.xc(45,lU,e,null==c.measureToEdit.serverErrors?null:c.measureToEdit.serverErrors.SuccessWhen)),o.Bb(1),o.Gb("is-invalid",c.invalid(t,null==c.measureToEdit.serverErrors?null:c.measureToEdit.serverErrors.WarningWhen)),o.Bb(2),o.Uc(o.nc(13,34,"ReportDefinition_WarningWhen")),o.Bb(2),o.sc("ngModel",c.measureToEdit.WarningWhen)("placeholder",o.nc(16,36,"Expression"))("ngModelOptions",o.vc(48,vU)),o.Bb(3),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.xc(49,lU,t,null==c.measureToEdit.serverErrors?null:c.measureToEdit.serverErrors.WarningWhen)),o.Bb(1),o.Gb("is-invalid",c.invalid(n,null==c.measureToEdit.serverErrors?null:c.measureToEdit.serverErrors.DangerWhen)),o.Bb(2),o.Uc(o.nc(21,38,"ReportDefinition_DangerWhen")),o.Bb(2),o.sc("ngModel",c.measureToEdit.DangerWhen)("placeholder",o.nc(24,40,"Expression"))("ngModelOptions",o.vc(52,vU)),o.Bb(3),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.xc(53,lU,n,null==c.measureToEdit.serverErrors?null:c.measureToEdit.serverErrors.DangerWhen)),o.Bb(3),o.Uc(o.nc(29,42,"Definition_Control")),o.Bb(2),o.sc("ngModel",c.measureToEdit.Control),o.Bb(3),o.sc("ngForOf",c.controlSimpleChoices()),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.xc(56,lU,i,null==c.measureToEdit||null==c.measureToEdit.serverErrors?null:c.measureToEdit.serverErrors.Control)),o.Bb(1),o.sc("ngIf",c.showOptions(c.measureToEdit.Control))}}function TD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",166),o.Vb(1,"h5",167),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",168),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",169),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",170),o.Vb(8,"div",171),o.Vb(9,"div",172),o.Vb(10,"label",243),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"input",244,245),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().measureToEdit.Expression=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.measureToEditHasChanged=!0,t.validateMeasure(t.measureToEdit,t.modelRef)})),o.mc(15,"translate"),o.Ub(),o.Rc(16,bD,1,0,"ng-container",22),o.Ub(),o.Vb(17,"div",177),o.Vb(18,"label",178),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"input",179),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().measureToEdit.Label=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().measureToEditHasChanged=!0})),o.Ub(),o.Ub(),o.Rc(22,fD,5,6,"div",180),o.Rc(23,mD,5,6,"div",180),o.Vb(24,"div",177),o.Vb(25,"label",181),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Vb(28,"select",182),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().measureToEdit.OrderDirection=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().measureToEditHasChanged=!0})),o.Qb(29,"option",99),o.Rc(30,gD,3,4,"option",21),o.Ub(),o.Ub(),o.Rc(31,pD,4,3,"div",246),o.Vb(32,"div",172),o.Vb(33,"button",247),o.hc("click",(function(){return o.Ic(e),o.lc().onToggleMeasureAdvancedOptions()})),o.Tc(34),o.mc(35,"translate"),o.Ub(),o.Ub(),o.Rc(36,VD,36,59,"ng-container",86),o.Ub(),o.Ub(),o.Vb(37,"div",187),o.Vb(38,"button",188),o.hc("click",(function(){return t.$implicit.close()})),o.Qb(39,"fa-icon",189),o.Tc(40),o.mc(41,"translate"),o.Ub(),o.Vb(42,"button",190),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(43,"fa-icon",125),o.Tc(44),o.mc(45,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(14),t=o.lc(),n=o.Fc(7);o.Bb(2),o.Vc(" ",o.nc(3,23,"Configure")," "),o.Bb(7),o.Gb("is-invalid",t.invalid(e,null==t.measureToEdit.serverErrors?null:t.measureToEdit.serverErrors.Expression)),o.Bb(2),o.Uc(o.nc(12,25,"ReportDefinition_Expression")),o.Bb(2),o.sc("ngModel",t.measureToEdit.Expression)("placeholder",o.nc(15,27,"Expression"))("ngModelOptions",o.vc(39,vU)),o.Bb(3),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(40,lU,e,null==t.measureToEdit.serverErrors?null:t.measureToEdit.serverErrors.Expression)),o.Bb(3),o.Uc(o.nc(20,29,"Label")+t.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",t.measureToEdit.Label)("ngModelOptions",o.vc(43,vU)),o.Bb(1),o.sc("ngIf",null==t.ws.settings?null:t.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==t.ws.settings?null:t.ws.settings.TernaryLanguageId),o.Bb(3),o.Uc(o.nc(27,31,"ReportDefinition_OrderDirection")),o.Bb(2),o.sc("ngModel",t.measureToEdit.OrderDirection),o.Bb(2),o.sc("ngForOf",o.vc(44,tD)),o.Bb(1),o.sc("ngIf",!!t.measureToEdit.OrderDirection),o.Bb(3),o.Vc("",o.nc(35,33,t.measureShowAdvancedOptions?"AdvancedOptionsHide":"AdvancedOptionsShow"),"..."),o.Bb(2),o.sc("ngIf",t.measureShowAdvancedOptions),o.Bb(2),o.sc("disabled",!t.canApplyMeasure(t.measureToEdit)),o.Bb(2),o.Vc(" \xa0",o.nc(41,35,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(45,37,"Cancel")," ")}}function ED(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",195),o.Vb(1,"button",196),o.Vb(2,"span",48),o.Qb(3,"fa-icon",197),o.Ub(),o.Ub(),o.Vb(4,"div",198),o.Vb(5,"div",71),o.Vb(6,"input",262),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).selectToEdit.Localize=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.selectToEditHasChanged=!0,t.validateSelect(t.selectToEdit,t.modelRef)})),o.Ub(),o.Vb(7,"label",263),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.sc("placement",e.commandsDropdownPlacement),o.Bb(6),o.sc("ngModel",e.selectToEdit.Localize),o.Bb(2),o.Uc(o.nc(9,3,"ReportDefinition_Localize"))}}function xD(e,t){1&e&&o.Rb(0)}function UD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",201),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",202),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).selectToEdit.Label2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).selectToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,3,"Label")+e.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",e.selectToEdit.Label2)("ngModelOptions",o.vc(5,vU))}}function RD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",203),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",204),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).selectToEdit.Label3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).selectToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,3,"Label")+e.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",e.selectToEdit.Label3)("ngModelOptions",o.vc(5,vU))}}function DD(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function BD(e,t){1&e&&o.Rb(0)}function SD(e,t){1&e&&o.Rb(0)}function kD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",238),o.Vb(1,"t-control-options",239,264),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).selectToEdit.ControlOptions=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).selectToEditHasChanged=!0})),o.Ub(),o.Rc(3,SD,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(2),t=o.lc(2),n=o.Fc(7);o.Bb(1),o.sc("control",t.selectToEdit.Control)("isEdit",!0)("ngModel",t.selectToEdit.ControlOptions),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,lU,e,null==t.selectToEdit||null==t.selectToEdit.serverErrors?null:t.selectToEdit.serverErrors.ControlOptions))}}function OD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",166),o.Vb(1,"h5",167),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",168),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",169),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",170),o.Vb(8,"div",171),o.Vb(9,"div",172),o.Vb(10,"label",243),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"div",122),o.Vb(14,"input",260,245),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().selectToEdit.Expression=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.selectToEditHasChanged=!0,t.validateSelect(t.selectToEdit,t.modelRef)})),o.mc(16,"translate"),o.Ub(),o.Rc(17,ED,10,5,"div",194),o.Ub(),o.Rc(18,xD,1,0,"ng-container",22),o.Ub(),o.Vb(19,"div",177),o.Vb(20,"label",178),o.Tc(21),o.mc(22,"translate"),o.Ub(),o.Vb(23,"input",179),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().selectToEdit.Label=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().selectToEditHasChanged=!0})),o.Ub(),o.Ub(),o.Rc(24,UD,5,6,"div",180),o.Rc(25,RD,5,6,"div",180),o.Vb(26,"div",177),o.Vb(27,"label",181),o.Tc(28),o.mc(29,"translate"),o.Ub(),o.Vb(30,"select",234,261),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().selectToEdit.Control=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.selectToEditHasChanged=!0,t.validateSelect(t.selectToEdit,t.modelRef)})),o.Qb(32,"option",99),o.Rc(33,DD,2,2,"option",21),o.Ub(),o.Rc(34,BD,1,0,"ng-container",22),o.Ub(),o.Rc(35,kD,4,8,"div",237),o.Ub(),o.Ub(),o.Vb(36,"div",187),o.Vb(37,"button",188),o.hc("click",(function(){return t.$implicit.close()})),o.Qb(38,"fa-icon",189),o.Tc(39),o.mc(40,"translate"),o.Ub(),o.Vb(41,"button",190),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(42,"fa-icon",125),o.Tc(43),o.mc(44,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(15),t=o.Fc(31),n=o.lc(),i=o.Fc(7);o.Bb(2),o.Vc(" ",o.nc(3,24,"Configure")," "),o.Bb(7),o.Gb("is-invalid",n.invalid(e,null==n.selectToEdit.serverErrors?null:n.selectToEdit.serverErrors.Expression)),o.Bb(2),o.Uc(o.nc(12,26,"ReportDefinition_Expression")),o.Bb(3),o.sc("ngModel",n.selectToEdit.Expression)("placeholder",o.nc(16,28,"Expression"))("ngModelOptions",o.vc(38,vU)),o.Bb(3),o.sc("ngIf",n.isMultilingual),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(39,lU,e,null==n.selectToEdit.serverErrors?null:n.selectToEdit.serverErrors.Expression)),o.Bb(3),o.Uc(o.nc(22,30,"Label")+n.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",n.selectToEdit.Label)("ngModelOptions",o.vc(42,vU)),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),o.Bb(3),o.Uc(o.nc(29,32,"Definition_Control")),o.Bb(2),o.sc("ngModel",n.selectToEdit.Control),o.Bb(3),o.sc("ngForOf",n.controlSimpleChoices()),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(43,lU,t,null==n.selectToEdit||null==n.selectToEdit.serverErrors?null:n.selectToEdit.serverErrors.Control)),o.Bb(1),o.sc("ngIf",n.showOptions(n.selectToEdit.Control)),o.Bb(2),o.sc("disabled",!n.canApplySelect(n.selectToEdit)),o.Bb(2),o.Vc(" \xa0",o.nc(40,34,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(44,36,"Cancel")," ")}}function _D(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",201),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",202),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).paramToEdit.Label2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).paramToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,3,"Label")+e.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",e.paramToEdit.Label2)("ngModelOptions",o.vc(5,vU))}}function LD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",203),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",204),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).paramToEdit.Label3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).paramToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Uc(o.nc(3,3,"Label")+e.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",e.paramToEdit.Label3)("ngModelOptions",o.vc(5,vU))}}function AD(e,t){1&e&&o.Rb(0)}function FD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",273),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",274,275),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).paramToEdit.DefaultExpression=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.paramToEditHasChanged=!0,t.validateParam(t.paramToEdit,t.modelRef)})),o.mc(6,"translate"),o.Ub(),o.Rc(7,AD,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(7);o.Gb("is-invalid",t.invalid(e,null==t.paramToEdit.serverErrors?null:t.paramToEdit.serverErrors.DefaultExpression)),o.Bb(2),o.Uc(o.nc(3,8,"ReportDefinition_DefaultExpression")),o.Bb(2),o.sc("ngModel",t.paramToEdit.DefaultExpression)("placeholder",o.nc(6,10,"Expression"))("ngModelOptions",o.vc(12,vU)),o.Bb(3),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(13,lU,e,null==t.paramToEdit.serverErrors?null:t.paramToEdit.serverErrors.DefaultExpression))}}function PD(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function ND(e,t){if(1&e&&(o.Vb(0,"option",95),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function jD(e,t){1&e&&o.Rb(0)}function WD(e,t){1&e&&o.Rb(0)}function $D(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",238),o.Vb(1,"t-control-options",239,276),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).paramToEdit.ControlOptions=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).paramToEditHasChanged=!0})),o.Ub(),o.Rc(3,WD,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(2),t=o.lc(2),n=o.Fc(7);o.Bb(1),o.sc("control",t.paramToEdit.Control)("isEdit",!0)("ngModel",t.paramToEdit.ControlOptions),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,lU,e,null==t.paramToEdit||null==t.paramToEdit.serverErrors?null:t.paramToEdit.serverErrors.ControlOptions))}}function qD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",166),o.Vb(1,"h5",167),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",168),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",169),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",170),o.Vb(8,"div",171),o.Vb(9,"div",177),o.Vb(10,"label",265),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"span",266),o.Tc(14),o.Ub(),o.Ub(),o.Qb(15,"div",267),o.Vb(16,"div",177),o.Vb(17,"label",178),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"input",179),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().paramToEdit.Label=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().paramToEditHasChanged=!0})),o.Ub(),o.Ub(),o.Rc(21,_D,5,6,"div",180),o.Rc(22,LD,5,6,"div",180),o.Vb(23,"div",177),o.Vb(24,"label",268),o.Tc(25),o.mc(26,"translate"),o.Ub(),o.Vb(27,"select",269),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().paramToEdit.Visibility=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().paramToEditHasChanged=!0})),o.Vb(28,"option",270),o.Tc(29),o.mc(30,"translate"),o.Ub(),o.Vb(31,"option",271),o.Tc(32),o.mc(33,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Rc(34,FD,8,16,"div",176),o.Vb(35,"div",177),o.Vb(36,"label",181),o.Tc(37),o.mc(38,"translate"),o.Ub(),o.Vb(39,"select",234,272),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().paramToEdit.Control=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.paramToEditHasChanged=!0,t.validateParam(t.paramToEdit,t.modelRef)})),o.Qb(41,"option",99),o.Rc(42,PD,2,2,"option",21),o.Vb(43,"option",236),o.Tc(44," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),o.Ub(),o.Rc(45,ND,2,2,"option",21),o.Ub(),o.Rc(46,jD,1,0,"ng-container",22),o.Ub(),o.Rc(47,$D,4,8,"div",237),o.Ub(),o.Ub(),o.Vb(48,"div",187),o.Vb(49,"button",188),o.hc("click",(function(){return t.$implicit.close()})),o.Qb(50,"fa-icon",189),o.Tc(51),o.mc(52,"translate"),o.Ub(),o.Vb(53,"button",190),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(54,"fa-icon",125),o.Tc(55),o.mc(56,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(40),t=o.lc(),n=o.Fc(7);o.Bb(2),o.Vc(" ",o.nc(3,23,"Configure")," "),o.Bb(9),o.Uc(o.nc(12,25,"Parameter_Key")),o.Bb(3),o.Uc("@"+t.paramToEdit.Key),o.Bb(4),o.Uc(o.nc(19,27,"Label")+t.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",t.paramToEdit.Label)("ngModelOptions",o.vc(41,vU)),o.Bb(1),o.sc("ngIf",null==t.ws.settings?null:t.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==t.ws.settings?null:t.ws.settings.TernaryLanguageId),o.Bb(3),o.Uc(o.nc(26,29,"Parameter_Visibility")),o.Bb(2),o.sc("ngModel",t.paramToEdit.Visibility),o.Bb(2),o.Uc(o.nc(30,31,"Visibility_Optional")),o.Bb(3),o.Uc(o.nc(33,33,"Visibility_Required")),o.Bb(2),o.sc("ngIf",t.showParamDefaultExpression(t.paramToEdit)),o.Bb(3),o.Uc(o.nc(38,35,"Definition_Control")),o.Bb(2),o.sc("ngModel",t.paramToEdit.Control),o.Bb(3),o.sc("ngForOf",t.controlSimpleChoices()),o.Bb(3),o.sc("ngForOf",t.controlEntityChoices()),o.Bb(1),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(42,lU,e,null==t.paramToEdit||null==t.paramToEdit.serverErrors?null:t.paramToEdit.serverErrors.Control)),o.Bb(1),o.sc("ngIf",t.showOptions(t.paramToEdit.Control)),o.Bb(2),o.sc("disabled",!t.canApplyParam(t.paramToEdit)),o.Bb(2),o.Vc(" \xa0",o.nc(52,37,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(56,39,"Cancel")," ")}}function QD(e,t){1&e&&o.Rb(0)}function HD(e,t){1&e&&o.Rb(0)}function GD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",281),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",282,283),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).totalLabelsToEdit.ColumnsTotalLabel2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).totalLabelsToEditHasChanged=!0})),o.Ub(),o.Rc(6,HD,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(3),n=o.Fc(7);o.Bb(2),o.Uc(o.nc(3,5,"ReportDefinition_ColumnsTotalLabel")+t.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.totalLabelsToEdit.ColumnsTotalLabel2)("ngModelOptions",o.vc(7,vU)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(8,lU,e,null==t.totalLabelsToEdit||null==t.totalLabelsToEdit.serverErrors?null:t.totalLabelsToEdit.serverErrors.ColumnsTotalLabel2))}}function zD(e,t){1&e&&o.Rb(0)}function JD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",284),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",285,286),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).totalLabelsToEdit.ColumnsTotalLabel3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).totalLabelsToEditHasChanged=!0})),o.Ub(),o.Rc(6,zD,1,0,"ng-container",22),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(3),n=o.Fc(7);o.Bb(2),o.Uc(o.nc(3,5,"ReportDefinition_ColumnsTotalLabel")+t.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.totalLabelsToEdit.ColumnsTotalLabel3)("ngModelOptions",o.vc(7,vU)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(8,lU,e,null==t.totalLabelsToEdit||null==t.totalLabelsToEdit.serverErrors?null:t.totalLabelsToEdit.serverErrors.ColumnsTotalLabel3))}}function KD(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",177),o.Vb(2,"label",278),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",279,280),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).totalLabelsToEdit.ColumnsTotalLabel=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).totalLabelsToEditHasChanged=!0})),o.Ub(),o.Rc(7,QD,1,0,"ng-container",22),o.Ub(),o.Rc(8,GD,7,11,"div",180),o.Rc(9,JD,7,11,"div",180),o.Sb()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=o.Fc(7);o.Bb(3),o.Uc(o.nc(4,7,"ReportDefinition_ColumnsTotalLabel")+t.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",t.totalLabelsToEdit.ColumnsTotalLabel)("ngModelOptions",o.vc(9,vU)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,lU,e,null==t.totalLabelsToEdit||null==t.totalLabelsToEdit.serverErrors?null:t.totalLabelsToEdit.serverErrors.ColumnsTotalLabel)),o.Bb(1),o.sc("ngIf",null==t.ws.settings?null:t.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==t.ws.settings?null:t.ws.settings.TernaryLanguageId)}}function YD(e,t){1&e&&o.Rb(0)}function XD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",290),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",291),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).totalLabelsToEdit.RowsTotalLabel2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).totalLabelsToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.Uc(o.nc(3,3,"ReportDefinition_RowsTotalLabel")+e.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",e.totalLabelsToEdit.RowsTotalLabel2)("ngModelOptions",o.vc(5,vU))}}function ZD(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",177),o.Vb(1,"label",292),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",293),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).totalLabelsToEdit.RowsTotalLabel3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(3).totalLabelsToEditHasChanged=!0})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.Uc(o.nc(3,3,"ReportDefinition_RowsTotalLabel")+e.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",e.totalLabelsToEdit.RowsTotalLabel3)("ngModelOptions",o.vc(5,vU))}}function eB(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",177),o.Vb(2,"label",287),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",288,289),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).totalLabelsToEdit.RowsTotalLabel=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).totalLabelsToEditHasChanged=!0})),o.Ub(),o.Rc(7,YD,1,0,"ng-container",22),o.Ub(),o.Rc(8,XD,5,6,"div",180),o.Rc(9,ZD,5,6,"div",180),o.Sb()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=o.Fc(7);o.Bb(3),o.Uc(o.nc(4,7,"ReportDefinition_RowsTotalLabel")+t.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",t.totalLabelsToEdit.RowsTotalLabel)("ngModelOptions",o.vc(9,vU)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,lU,e,null==t.totalLabelsToEdit||null==t.totalLabelsToEdit.serverErrors?null:t.totalLabelsToEdit.serverErrors.RowsTotalLabel)),o.Bb(1),o.sc("ngIf",null==t.ws.settings?null:t.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==t.ws.settings?null:t.ws.settings.TernaryLanguageId)}}function tB(e,t){if(1&e&&(o.Vb(0,"div",166),o.Vb(1,"h5",167),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",168),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",169),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",170),o.Vb(8,"div",171),o.Rc(9,KD,10,13,"ng-container",86),o.Qb(10,"div",267),o.Rc(11,eB,10,13,"ng-container",86),o.Ub(),o.Ub(),o.Vb(12,"div",187),o.Vb(13,"button",277),o.hc("click",(function(){return t.$implicit.close()})),o.Qb(14,"fa-icon",189),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Vb(17,"button",190),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(18,"fa-icon",125),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,5,"Configure")," "),o.Bb(7),o.sc("ngIf",!(null==e.modelRef.Columns||!e.modelRef.Columns.length)&&e.modelRef.ShowColumnsTotal),o.Bb(2),o.sc("ngIf",!(null==e.modelRef.Rows||!e.modelRef.Rows.length)&&e.modelRef.ShowRowsTotal),o.Bb(4),o.Vc(" \xa0",o.nc(16,7,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(20,9,"Cancel")," ")}}const nB=function(){return[]};let iB=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.translate=t,this.modalService=n,this._isEdit=!1,this._sections={Title:!1,Data:!0,Filter:!1,Drilldown:!1,Chart:!1,MainMenu:!1},this.expand="Parameters,Select,Rows.Attributes,Columns.Attributes,Measures,Roles.Role",this.collapseFields=!1,this.collapseDefinition=!1,this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Title=this.initialText:this.ws.isSecondaryLanguage?e.Title2=this.initialText:this.ws.isTernaryLanguage&&(e.Title3=this.initialText),e.ShowInMainMenu=!1,e.Collection="DetailsEntry",e.Type="Summary",e.Rows=[],e.Columns=[],e.Measures=[],e.Select=[],e.Parameters=[],e.ShowColumnsTotal=!0,e.ShowRowsTotal=!0,e.IsCustomDrilldown=!1,e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Rows&&t.Rows.forEach(e=>{e.Id=null,e.Attributes&&e.Attributes.forEach(e=>e.Id=null)}),t.Columns&&t.Columns.forEach(e=>{e.Id=null,e.Attributes&&e.Attributes.forEach(e=>e.Id=null)}),t.Measures&&t.Measures.forEach(e=>e.Id=null),t.Select&&t.Select.forEach(e=>e.Id=null),t.Parameters&&t.Parameters.forEach(e=>e.Id=null),t}return console.error("Cloning a non existing item"),null},this.isInactive=e=>null,this._currentModelModified=!1,this.dimToEditHasChanged=!1,this.dimToEditIsRow=!1,this.measureToEditHasChanged=!1,this.measureShowAdvancedOptions=!1,this.selectToEditHasChanged=!1,this.paramToEditHasChanged=!1,this.totalLabelsToEditHasChanged=!1,this.controlDisplay=e=>{const t=this.ws.definitions;if(this._controlChoicesDefinitions!==t){this._controlChoicesDefinitions=t,this._controlDisplayCache={};for(const e of this.controlSimpleChoices())this._controlDisplayCache[e.value]=e.name;for(const e of this.controlEntityChoices())this._controlDisplayCache[e.value]=e.name}const n=this._controlDisplayCache[e];return n?n():""},this.previewDrilldown=!1}get ws(){return this.workspace.currentTenant}onDefinitionChange(e,t){this.showDefinitionIdSelector(e)||delete e.DefinitionId,t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this.modelForClient=Object.assign({},e),this.previewDrilldown&&this._isEdit&&(this.modelForClient.Type="Details")),this.modelForClient):null}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e,window.dispatchEvent(new Event("resize")),this.previewDrilldown=!1),!0}onCollectionChange(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}onDefinitionIdChange(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}get allCollections(){return Object(wi.a)(this.workspace,this.translate)}showDefinitionIdSelector(e){return!!(e&&e.Collection&&wi.h[e.Collection]&&wi.h[e.Collection](this.workspace,this.translate,null).definitionIds)}allDefinitionIds(e){if(e&&e.Collection){const t=wi.h[e.Collection],n=t(this.workspace,this.translate,null);return n.definitionIds&&!n.definitionIdsArray&&(n.definitionIdsArray=n.definitionIds.map(e=>({value:e,name:t(this.workspace,this.translate,e).titlePlural}))),n.definitionIdsArray}return null}get allCharts(){const e=Object(aE.a)(this.workspace,this.translate).properties.Chart;return Object(wi.c)(e)}get allMainMenuSections(){const e=Object(aE.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(wi.c)(e)}get allMainMenuIcons(){const e=Object(aE.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(wi.c)(e)}onChartChange(e,t){!t.Chart&&e&&(t.DefaultsToChart=!0),t.Chart&&!e&&(t.DefaultsToChart=!1),t.Chart=e,this.onDefinitionChange(t)}createDimension(e){return{Id:0,KeyExpression:e,Localize:!0,AutoExpandLevel:1e3,ShowAsTree:!0,Attributes:[]}}createMeasure(e){return{Id:0,Expression:e}}createSelect(e){return{Id:0,Expression:e,Localize:!1}}drop(e,t){const n=this.allFields(t),i=t.Rows,o=t.Columns,c=t.Measures,r=t.Select,s=e.previousContainer.data,l=e.previousIndex,a=e.container.data,u=e.currentIndex;let d=!1;if(s===n&&a===n);else if(s===a&&a!==n)l!==u&&(Object(W.i)(a,l,u),d=!0);else if(s!==n||a!==i&&a!==o)if(s===n&&a===c){const e=s[l];let t=e.path;"entity"===e.desc.datatype&&(t+=".Id");const n=Object(wi.f)(e.desc)&&"Id"!==t?"Sum":"Count",i=this.createMeasure(`${n}(${t})`);a.splice(u,0,i),d=!0}else if(s===n&&a===r){const e=this.createSelect(s[l].path);a.splice(u,0,e),d=!0}else if(s!==n&&a===n)s.splice(l,1),d=!0;else if(s!==c||a!==i&&a!==o)if(s!==i&&s!==o||a!==c)s===i&&a===o||s===o&&a===i?(Object(W.j)(s,a,l,u),d=!0):console.error("Unhandled drop case.");else{const e=s.splice(l,1)[0];let n;try{const i=Di.parseSingle(e.KeyExpression);if(i.aggregations().length>0)n=null;else if(i instanceof ki&&0===i.path.length&&"Id"===i.property)n="Count";else{const e=io.nativeDesc(i,{},{},t.Collection,t.DefinitionId,this.workspace,this.translate);Object(wi.f)(e)&&(n="Sum")}}catch(b){}const i=Object.assign({},e);i.Expression=n?`${n}(${e.KeyExpression})`:e.KeyExpression,a.splice(u,0,i),d=!0}else{const e=s.splice(l,1)[0];let t;try{const n=Di.parseSingle(e.Expression);n&&n instanceof Oi&&n.isAggregation&&1===n.arguments.length&&(t=Wi(n.arguments[0].toString()))}catch(f){}const n=Object.assign({},e);n.Id=0,n.KeyExpression=t||e.Expression,void 0===n.Localize&&(n.Localize=!0),void 0===n.AutoExpandLevel&&(n.AutoExpandLevel=1),void 0===n.ShowAsTree&&(n.ShowAsTree=!0),void 0===n.Attributes&&(n.Attributes=[]),a.splice(u,0,n),d=!0}else{const e=this.createDimension(s[l].path);a.splice(u,0,e),d=!0}d&&(this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))}allFields(e){return this._allFields&&this._currentCollection===e.Collection&&this._currentDefinitionId===e.DefinitionId||(this._currentCollection=e.Collection,this._currentDefinitionId=e.DefinitionId,this._allFields=this.getChildren(e.Collection,e.DefinitionId),this.onSearchChanged(e)),this._allFields}hasChildren(e){switch(e.desc.datatype){case"entity":case"date":case"datetime":case"datetimeoffset":return!0;default:return!1}}showTreeNode(e){const t=e.parent;return(!this.search||e.match)&&(!t||t.isExpanded&&this.showTreeNode(t))}getChildren(e,t,n){if(!e)return[];const i=wi.h[e];if(!i)return[];const o=i(this.workspace,this.translate,t),c=n?n.level+1:0,r=n?`${n.path}.`:"";return Object.keys(o.properties).map(e=>({path:`${r}${e}`,desc:o.properties[e],level:c,parent:n}))}getDateParts(e){const t=e.level+1;return[{path:`Year(${e.path})`,desc:io.datePartDesc(()=>this.translate.instant("DatePart_year"),this.translate),level:t,parent:e},{path:`Quarter(${e.path})`,desc:io.quarterDesc(()=>this.translate.instant("DatePart_quarter"),this.translate),level:t,parent:e},{path:`Month(${e.path})`,desc:io.monthDesc(()=>this.translate.instant("DatePart_month"),this.translate),level:t,parent:e},{path:`Day(${e.path})`,desc:io.datePartDesc(()=>this.translate.instant("DatePart_day"),this.translate),level:t,parent:e},{path:`Weekday(${e.path})`,desc:io.weekdayDesc(()=>this.translate.instant("DatePart_weekday"),this.translate),level:t,parent:e}]}onExpand(e,t,n){if(e.isExpanded=!e.isExpanded,e.isExpanded&&!e.childrenLoaded){let i;switch(e.desc.datatype){case"entity":i=this.getChildren(e.desc.control,e.desc.definitionId,e);break;case"date":case"datetime":case"datetimeoffset":i=this.getDateParts(e)}this.allFields(n).splice(t+1,0,...i),e.childrenLoaded=!0,this.onSearchChanged(n)}}copyPathToClipboard(e){Object(N.f)(e)}paddingLeft(e){return this.workspace.ws.isRtl?"0":20*e.level+"px"}paddingRight(e){return this.workspace.ws.isRtl?20*e.level+"px":"0"}flipNode(e){return this.flipIcon(e.isExpanded)}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateNode(e){return this.rotateIcon(e.isExpanded)}rotateIcon(e){return e?90:0}onSearchChanged(e){const t=this.allFields(e);if(this.search){const e=this.search.toLowerCase();t.forEach(e=>e.match=!1),t.forEach(t=>{const n=t.desc.label();if(n&&n.toLowerCase().indexOf(e)>=0){let e=t;for(;e&&!e.match;)e.match=!0,e=e.parent}})}}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onToggleFields(){this.collapseFields=!this.collapseFields,window.dispatchEvent(new Event("resize"))}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition,window.dispatchEvent(new Event("resize"))}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(fI.b)(e.serverErrors[t]))}dimensionErrors(e){return this.weakEntityErrors(e)||!!e.Attributes&&e.Attributes.some(e=>this.weakEntityErrors(e))}customizeLabelsErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.ColumnsTotalLabel)||Object(fI.b)(e.serverErrors.ColumnsTotalLabel2)||Object(fI.b)(e.serverErrors.ColumnsTotalLabel3)||Object(fI.b)(e.serverErrors.RowsTotalLabel)||Object(fI.b)(e.serverErrors.RowsTotalLabel2)||Object(fI.b)(e.serverErrors.RowsTotalLabel3))}dataSectionErrors(e){const t="Details"===e.Type;return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.Type)||Object(fI.b)(e.serverErrors.ShowColumnsTotal)||Object(fI.b)(e.serverErrors.ShowRowsTotal)||this.customizeLabelsErrors(e)||t&&Object(fI.b)(e.serverErrors.OrderBy)||Object(fI.b)(e.serverErrors.Top))||!!e.Rows&&e.Rows.some(e=>this.dimensionErrors(e))||!!e.Columns&&e.Columns.some(e=>this.dimensionErrors(e))||!!e.Measures&&e.Measures.some(e=>this.weakEntityErrors(e))||t&&!!e.Select&&e.Select.some(e=>this.weakEntityErrors(e))}filterSectionErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.Filter)||Object(fI.b)(e.serverErrors.Having))||!!e.Parameters&&e.Parameters.some(e=>this.weakEntityErrors(e))}drilldownSectionErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.OrderBy)||Object(fI.b)(e.serverErrors.IsCustomDrilldown))||!!e.Select&&e.Select.some(e=>this.weakEntityErrors(e))}chartSectionErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.Chart)||Object(fI.b)(e.serverErrors.ChartOptions)||Object(fI.b)(e.serverErrors.DefaultsToChart))}titleSectionErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.Id)||Object(fI.b)(e.serverErrors.Code)||Object(fI.b)(e.serverErrors.Title)||Object(fI.b)(e.serverErrors.Description)||Object(fI.b)(e.serverErrors.Title2)||Object(fI.b)(e.serverErrors.Description2)||Object(fI.b)(e.serverErrors.Title3)||Object(fI.b)(e.serverErrors.Description3))}mainMenuSectionErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.ShowInMainMenu)||Object(fI.b)(e.serverErrors.MainMenuSection)||Object(fI.b)(e.serverErrors.MainMenuIcon)||Object(fI.b)(e.serverErrors.MainMenuSortKey))}savePreprocessing(e){"Details"===e.Type&&(e.Rows=[],e.Columns=[],e.Measures=[],delete e.Having),"Summary"===e.Type&&(delete e.Top,e.IsCustomDrilldown||(e.Select=[],delete e.OrderBy)),0===e.Columns.length&&(e.ShowColumnsTotal=!0),0!==e.Columns.length&&e.ShowColumnsTotal||(delete e.ColumnsTotalLabel,delete e.ColumnsTotalLabel2,delete e.ColumnsTotalLabel3),0===e.Rows.length&&(e.ShowRowsTotal=!0),0!==e.Rows.length&&e.ShowRowsTotal||(delete e.RowsTotalLabel,delete e.RowsTotalLabel2,delete e.RowsTotalLabel3),e.ShowInMainMenu||(e.Roles=[])}dimKeyExpressionDesc(e,t){if(this._dimKeyExpression!==e){this._dimKeyExpression=e,this._dimKeyExpressionDesc=null;const i={},o={};try{let n;const c=Di.parseSingle(e);if(c&&0===c.aggregations().length&&(n=c),n){const e=io.nativeDesc(n,i,o,t.Collection,t.DefinitionId,this.workspace,this.translate);switch(e.datatype){case"boolean":case"hierarchyid":case"geography":return}this._dimKeyExpressionDesc=e}}catch(n){}}return this._dimKeyExpressionDesc}isDisplayDimensionDesc(e){return!!e&&"entity"===e.datatype}isDisplayDimension(e,t){const n=this.dimKeyExpressionDesc(e,t);return this.isDisplayDimensionDesc(n)}showDisplayExpression(e,t){return this.isDisplayDimension(e.KeyExpression,t)}showDimensionAttributes(e,t){return this.isDisplayDimension(e.KeyExpression,t)}showShowAsTree(e,t){const n=this.dimKeyExpressionDesc(e.KeyExpression,t);return io.canShowAsTree(n,this.workspace,this.translate)}showDimensionControl(e,t){const n=this.dimKeyExpressionDesc(e.KeyExpression,t);return!!n&&"entity"!==n.datatype}validateDimension(e,t){if(e){e.serverErrors={};for(const t of e.Attributes)t.serverErrors={};try{const t=Di.parseSingle(e.KeyExpression);if(t){const e=t.aggregations(),n=t.parameters(),o=t.columnAccesses();e.length>0?i(`Expression cannot contain aggregation functions like '${e[0].name}'.`):n.length>0?i(`Expression cannot contain parameters like '${n[0]}'.`):0===o.length&&i("Expression must contain at least one column access.")}else i("Expression cannot be empty.")}catch(c){i(c.message)}if(this.showDisplayExpression(e,t))try{const t=Di.parseSingle(e.DisplayExpression);if(t){const e=t.aggregations(),n=t.parameters();e.length>0?o(`Expression cannot contain aggregation functions like '${e[0].name}'.`):n.length>0&&o(`Expression cannot contain parameters like '${n[0]}'.`)}}catch(c){o(c.message)}if(this.showDimensionAttributes(e,t))for(const t of e.Attributes){function n(e){t.serverErrors.Expression=t.serverErrors.Expression||[],t.serverErrors.Expression.push(e)}try{const e=Di.parseSingle(t.Expression);if(e){const t=e.aggregations(),i=e.parameters();t.length>0?n(`Expression cannot contain aggregation functions like '${t[0].name}'.`):i.length>0&&n(`Expression cannot contain parameters like '${i[0]}'.`)}else n("Expression cannot be empty.")}catch(c){n(c.message)}}0===Object.keys(e.serverErrors).length&&delete e.serverErrors;for(const t of e.Attributes)0===Object.keys(t.serverErrors).length&&delete t.serverErrors}function i(t){e.serverErrors.KeyExpression=e.serverErrors.KeyExpression||[],e.serverErrors.KeyExpression.push(t)}function o(t){e.serverErrors.DisplayExpression=e.serverErrors.DisplayExpression||[],e.serverErrors.DisplayExpression.push(t)}}onSetDimOrderDirection(e,t){t>=0&&(e.OrderDirection=null);for(let n=0;n<e.Attributes.length;n++)n!==t&&(e.Attributes[n].OrderDirection=null);this.dimToEditHasChanged=!0}getColumns(e){return e.Columns=e.Columns||[],e.Columns}getRows(e){return e.Rows=e.Rows||[],e.Rows}onConfigureDimension(e,t,n){this.dimToEditHasChanged=!1;const i=t[e]||this.createDimension(),o=JSON.parse(JSON.stringify(i));this.dimToEdit=o,this.modelRef=n,this.dimToEditIsRow=t===n.Rows,this.modalService.open(this.dimensionConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.dimToEditHasChanged&&(t[e]=o,this.showDisplayExpression(o,n)||delete o.DisplayExpression,this.showDimensionAttributes(o,n)||(o.Attributes=[]),this.showClearOrderDirectionMessage(o)&&o.OrderDirection&&n.Measures&&n.Measures.forEach(e=>delete e.OrderDirection),this.validateModel(n),this.synchronizeParameters(n),this.onDefinitionChange(n))},e=>{})}showClearOrderDirectionMessage(e){return this.dimToEditIsRow&&(!!e.OrderDirection||e.Attributes&&e.Attributes.some(e=>!!e.OrderDirection))}onCreateRow(e){this.onConfigureDimension(e.Rows.length,e.Rows,e)}onConfigureRow(e,t){this.onConfigureDimension(e,t.Rows,t)}onDeleteRow(e,t){t.Rows.splice(e,1),this.onDefinitionChange(t)}onCreateColumn(e){this.onConfigureDimension(e.Columns.length,e.Columns,e)}onConfigureColumn(e,t){this.onConfigureDimension(e,t.Columns,t)}onDeleteColumn(e,t){t.Columns.splice(e,1),this.onDefinitionChange(t)}onDeleteAttribute(e,t){t.Attributes.splice(e,1),this.dimToEditHasChanged=!0}onInsertAttribute(e){e.Attributes.push({Localize:!1}),this.dimToEditHasChanged=!0}rowDrop(e,t){Object(W.i)(t,e.previousIndex,e.currentIndex)}canApplyDimension(e){return!!e.KeyExpression}getMeasures(e){return e.Measures=e.Measures||[],e.Measures}onCreateMeasure(e){this.onConfigureMeasure(e.Measures.length,e)}onConfigureMeasure(e,t){this.measureToEditHasChanged=!1;const n=Object.assign({},t.Measures[e]||this.createMeasure());this.measureToEdit=n,this.modelRef=t,this.measureShowAdvancedOptions=!!(n.Control||n.DangerWhen||n.WarningWhen||n.SuccessWhen),this.modalService.open(this.measureConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.measureToEditHasChanged&&(t.Measures[e]=n,n.OrderDirection&&(t.Rows&&t.Rows.forEach(e=>{delete e.OrderDirection,e.Attributes&&e.Attributes.forEach(e=>delete e.OrderDirection)}),t.Measures.forEach(e=>{e!==n&&delete e.OrderDirection})),this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))},e=>{})}validateMeasure(e,t){if(!e)return;function n(t){e.serverErrors.Expression=e.serverErrors.Expression||[],e.serverErrors.Expression.push(t)}let i;e.serverErrors={};try{if(i=Di.parseSingle(e.Expression),i){const e=i.unaggregatedColumnAccesses();e.length>0&&n(`Expression cannot contain unaggregated column accesses like '${e[0]}'.`)}else n("Expression cannot be empty.")}catch(c){n(c.message)}if(i){function o(t,n){function o(t){e.serverErrors[n]=e.serverErrors[n]||[],e.serverErrors[n].push(t)}try{const e=Di.parseSingle(t,{placeholderReplacement:i});if(e){const t=e.unaggregatedColumnAccesses();t.length>0&&o(`Expression cannot contain unaggregated column accesses like '${t[0]}'.`)}}catch(c){o(c.message)}}o(e.SuccessWhen,"SuccessWhen"),o(e.WarningWhen,"WarningWhen"),o(e.DangerWhen,"DangerWhen")}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}onDeleteMeasure(e,t){t.Measures.splice(e,1),this.onDefinitionChange(t)}onToggleMeasureAdvancedOptions(){this.measureShowAdvancedOptions=!this.measureShowAdvancedOptions}canApplyMeasure(e){return!!e.Expression}getSelect(e){return e.Select=e.Select||[],e.Select}onDeleteSelect(e,t){t.Select.splice(e,1),this.onDefinitionChange(t)}onCreateSelect(e){this.onConfigureSelect(e.Select.length,e)}onConfigureSelect(e,t){this.selectToEditHasChanged=!1;const n=Object.assign({},t.Select[e]||this.createSelect());this.selectToEdit=n,this.modelRef=t,this.modalService.open(this.selectConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.selectToEditHasChanged&&(t.Select[e]=n,this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))},e=>{})}validateSelect(e,t){if(e){e.serverErrors={};try{const i=Di.parseSingle(e.Expression);if(i){const e=i.aggregations();if(e.length>0)n(`Expression cannot contain aggregation functions like '${e[0].name}'.`);else if("Summary"===t.Type&&t.IsCustomDrilldown){const e=i.parameters();e.length>0&&n(`Expression cannot contain parameters like '${e[0]}'.`)}}else n("Expression cannot be empty.")}catch(i){n(i.message)}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}function n(t){e.serverErrors.Expression=e.serverErrors.Expression||[],e.serverErrors.Expression.push(t)}}canApplySelect(e){return!!e.Expression}getParameters(e){return e.Parameters=e.Parameters||[],e.Parameters}onConfigureParameter(e,t){this.paramToEditHasChanged=!1;const n=Object.assign({},t.Parameters[e]);this.paramToEdit=n,this.modelRef=t,this.modalService.open(this.paramConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.paramToEditHasChanged&&(this.showParamDefaultExpression(n)||delete n.DefaultExpression,t.Parameters[e]=n,this.validateModel(t),this.synchronizeParameters(t),this.onDefinitionChange(t))},e=>{})}validateParam(e,t){if(!e)return;function n(t){e.serverErrors.DefaultExpression=e.serverErrors.DefaultExpression||[],e.serverErrors.DefaultExpression.push(t)}let i;e.serverErrors={};try{if(i=Di.parseSingle(e.DefaultExpression),i){const e=i.aggregations(),t=i.columnAccesses(),o=i.parameters();e.length>0?n(`Expression cannot contain aggregation functions like '${e[0].name}'.`):t.length>0?n(`Expression cannot contain column access literals like '${t[0]}'.`):o.length>0&&n(`Expression cannot contain parameters like '${o[0]}'.`)}}catch(o){n(o.message)}0===Object.keys(e.serverErrors).length&&delete e.serverErrors}showParamDefaultExpression(e){return"Optional"===e.Visibility}canApplyParam(e){return!0}onConfigureTotalLabels(e){this.totalLabelsToEditHasChanged=!1;const t={ColumnsTotalLabel:e.ColumnsTotalLabel,ColumnsTotalLabel2:e.ColumnsTotalLabel2,ColumnsTotalLabel3:e.ColumnsTotalLabel3,RowsTotalLabel:e.RowsTotalLabel,RowsTotalLabel2:e.RowsTotalLabel2,RowsTotalLabel3:e.RowsTotalLabel3,serverErrors:e.serverErrors};this.totalLabelsToEdit=t,this.modelRef=e,this.modalService.open(this.totalLabelsModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{this.totalLabelsToEditHasChanged&&(e.ColumnsTotalLabel=t.ColumnsTotalLabel,e.ColumnsTotalLabel2=t.ColumnsTotalLabel2,e.ColumnsTotalLabel3=t.ColumnsTotalLabel3,e.RowsTotalLabel=t.RowsTotalLabel,e.RowsTotalLabel2=t.RowsTotalLabel2,e.RowsTotalLabel3=t.RowsTotalLabel3,this.onDefinitionChange(e))},e=>{})}onFilterChanged(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}showHaving(e){return"Summary"===e.Type}onHavingChanged(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}onOrderByChanged(e){this.validateModel(e),this.synchronizeParameters(e),this.onDefinitionChange(e)}validateModel(e){if(e){if(e.serverErrors={},e.Filter){function t(t){e.serverErrors.Filter=e.serverErrors.Filter||[],e.serverErrors.Filter.push(t)}try{const n=Di.parseSingle(e.Filter);if(n){const e=n.aggregations();e.length>0&&t(`Expression cannot contain aggregation functions like '${e[0].name}'.`)}}catch(o){t(o.message)}}if("Summary"===e.Type&&e.Having){function n(t){e.serverErrors.Having=e.serverErrors.Having||[],e.serverErrors.Having.push(t)}try{const t=Di.parseSingle(e.Having);if(t){const e=t.unaggregatedColumnAccesses();e.length>0&&n(`Expression cannot contain unaggregated column accesses like '${e[0]}'.`)}}catch(o){n(o.message)}}if(("Details"===e.Type||e.IsCustomDrilldown)&&e.OrderBy){function i(t){e.serverErrors.OrderBy=e.serverErrors.OrderBy||[],e.serverErrors.OrderBy.push(t)}try{const t=Di.parse(e.OrderBy,{expectDirKeywords:!0});for(const e of t){const t=e.aggregations(),n=e.columnAccesses(),o=e.parameters();t.length>0?i(`Expression cannot contain aggregation functions like '${t[0].name}'.`):o.length>0?i(`Expression cannot contain parameters like '${o[0]}'.`):0===n.length&&i(`Expression atom cannot be a constant like '${e}'.`)}}catch(o){i(o.message)}}if("Summary"===e.Type){for(const t of e.Columns)this.validateDimension(t,e);for(const t of e.Rows)this.validateDimension(t,e);for(const t of e.Measures)this.validateMeasure(t,e)}if("Details"===e.Type||e.IsCustomDrilldown)for(const t of e.Select)this.validateSelect(t,e);for(const t of e.Parameters)this.validateParam(t,e);0===Object.keys(e.serverErrors).length&&delete e.serverErrors}}synchronizeParameters(e){try{const t=e,{parameters:n}=io.getReportInfos(t,this.workspace,this.translate);if(0===n.length)e.Parameters=[];else{const t={};n.forEach(e=>t[e.keyLower]=e);const i=Object.keys(t),o=e.Parameters.filter(e=>!!t[e.Key.toLowerCase()]),c={};o.forEach(e=>c[e.Key.toLowerCase()]=e);for(const e of i){const n=t[e];let i=c[e];i||(i={Id:0,Visibility:n.isRequired?"Required":"Optional"},c[e]=i,o.push(i)),i.Key=n.key}e.Parameters=o}}catch(t){console.error(t.message)}}controlSimpleChoices(){return Object(wi.i)(this.translate)}controlEntityChoices(){return Object(wi.a)(this.workspace,this.translate,!0)}showOptions(e){return!!e&&Object(wi.e)(e)}get commandsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}get isMultilingual(){return!!this.ws.settings.SecondaryLanguageId||!!this.ws.settings.TernaryLanguageId}togglePreviewDrilldown(e){this.previewDrilldown=!this.previewDrilldown,this._currentModelModified=!0,this.onDefinitionChange(e)}onDeleteRole(e,t){t>=0&&e.Roles.splice(t,1)}onInsertRole(e){e.Roles.push({Id:0})}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-report-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(Yx,!0),o.Oc(Xx,!0),o.Oc(Zx,!0),o.Oc(eU,!0),o.Oc(tU,!0)),2&e&&(o.Ec(n=o.ic())&&(t.dimensionConfigModal=n.first),o.Ec(n=o.ic())&&(t.measureConfigModal=n.first),o.Ec(n=o.ic())&&(t.selectConfigModal=n.first),o.Ec(n=o.ic())&&(t.paramConfigModal=n.first),o.Ec(n=o.ic())&&(t.totalLabelsModal=n.first))},features:[o.yb],decls:18,vars:15,consts:[["collection","ReportDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["dimensionConfigModal",""],["measureConfigModal",""],["selectConfigModal",""],["paramConfigModal",""],["totalLabelsModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"p-2","flex-grow-1","h-100","overflow-auto"],[1,"form-group"],["for","collection",1,"small"],["id","collection","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["collection","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","form-group",3,"is-invalid",4,"ngIf"],["id","search","type","text","autocomplete","off",1,"form-control","t-studio-input",2,"text-shadow","none",3,"ngModel","placeholder","ngModelChange"],["cdkDropList","","cdkDropListSortingDisabled","",1,"t-studio-source-area",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["fields","cdkDropList"],["cdkDrag","",3,"dblclick",4,"ngFor","ngForOf"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","title",1,"small"],["id","title","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],[1,"small","d-block"],[1,"custom-control","custom-radio","custom-control-inline","mx-0"],["type","radio","name","type","id","type_summary","value","Summary",1,"custom-control-input",3,"checked","change"],["for","type_summary",1,"custom-control-label"],["type","radio","name","type","id","type_details","value","Details",1,"custom-control-input",3,"checked","change"],["for","type_details",1,"custom-control-label"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["rows","cdkDropList"],["class","py-1 px-2 t-drag-label",4,"ngIf"],["class","t-studio-drop-row t-draggable","cdkDrag","",4,"ngFor","ngForOf"],["columns","cdkDropList"],["measures","cdkDropList"],["class","custom-control custom-checkbox",4,"ngIf"],["class","custom-control custom-checkbox pt-2",4,"ngIf"],["cdkDropList","",1,"t-studio-drop-area",2,"height","10rem",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["select","cdkDropList"],["for","orderby",1,"small"],["id","orderby","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["orderby","ngModel"],["for","top",1,"small"],["id","top","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["top","ngModel"],["for","filter",1,"small"],["rows","6","id","filter","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["filter","ngModel"],["class","form-group",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","iscustomdrilldown",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","iscustomdrilldown",1,"custom-control-label"],[1,"pt-3"],["drilldown_select","cdkDropList"],["for","drilldown_orderby",1,"small"],["id","drilldown_orderby","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["type","checkbox","id","previewdrilldown",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","previewdrilldown",1,"custom-control-label"],["class","text-truncate t-studio-section-header t-pointer",3,"click",4,"ngIf"],["class","p-2 t-studio-section",3,"d-none",4,"ngIf"],[1,"custom-control","custom-checkbox","form-group"],["type","checkbox","id","showInMainMenu",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showInMainMenu",1,"custom-control-label"],["class","form-group t-text-whitish",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"flex-grow-1"],[1,"col","bg-light","border","shadow","h-100"],["mode","preview",1,"h-100",3,"previewDefinition","showChart","disableDrilldown"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],[3,"value"],["for","definitionId",1,"small"],["id","definitionId",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionId","ngModel"],["value",""],["cdkDrag","",3,"dblclick"],[1,"t-studio-source-row","t-draggable"],[1,"text-truncate","d-flex"],[1,"btn","btn-sm","m-0","py-0","px-2","border-0","text-white","t-pointer","t-transparent",3,"disabled","click"],["class","t-studio-source-row",4,"cdkDragPlaceholder"],[1,"t-studio-source-row"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","title2",1,"small"],["id","title2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title2","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","title3",1,"small"],["id","title3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title3","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],[1,"py-1","px-2","t-drag-label"],[1,"small","t-studio-area-watermark"],["cdkDrag","",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],["type","checkbox","id","showColumnsTotal",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showColumnsTotal",1,"custom-control-label"],["type","checkbox","id","showRowsTotal",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showRowsTotal",1,"custom-control-label"],[1,"custom-control","custom-checkbox","pt-2"],[1,"btn","btn-sm","t-text-whitish","btn-link","p-0","border-0","font-weight-normal",3,"click"],["for","having",1,"small"],["rows","6","id","having","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["having","ngModel"],["cdkDropList","",1,"t-studio-drop-area",2,"border-style","solid",3,"cdkDropListData","cdkDropListDropped"],["for","chart",1,"small"],["id","chart",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["chart","ngModel"],["type","checkbox","id","defaultsToChart",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","defaultsToChart",1,"custom-control-label"],[1,"form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],[1,"p-0"],["theme","dark",3,"ngModel","showCreate","ngModelChange"],["rolemodel","ngModel"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"small","t-light-danger","text-wrap"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12"],["for","keyexpression",1,"small"],["id","keyexpression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["keyexpression","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"form-group","col-12","col-sm-6"],["for","label",1,"small"],["id","label","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["class","form-group col-12 col-sm-6",4,"ngIf"],["for","orderdirection",1,"small"],["id","orderdirection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["autoexpandlevelfield",""],["class","form-group col-12 overflow-auto",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","displayexpression",1,"small"],["id","displayexpression","type","text","autocomplete","off",1,"form-control","t-studio-input","flex-grow-1",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["displayexpression","ngModel"],["ngbDropdown","","container","body","class","flex-grow-0",3,"placement",4,"ngIf"],["ngbDropdown","","container","body",1,"flex-grow-0",3,"placement"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1","t-no-arrow"],["icon","ellipsis-v"],["ngbDropdownMenu","",1,"t-studio-dropdown"],["type","checkbox","id","dimlocalize",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","dimlocalize",1,"custom-control-label","t-large"],["for","label2",1,"small"],["id","label2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","label3",1,"small"],["id","label3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","showastree",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showastree",1,"custom-control-label"],["for","autoexpandlevel",1,"small"],["id","autoexpandlevel","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["type","checkbox","id","autoexpandlevel",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","autoexpandlevel",1,"custom-control-label"],[1,"form-group","col-12","overflow-auto"],[1,"small","font-weight-normal"],[2,"width","1px"],[2,"width","30%"],[2,"width","20%"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1",3,"click"],["cdkDrag","","cdkDragLockAxis","y"],[4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["attexpression","ngModel"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["attlabel","ngModel"],["class","p-0",4,"ngIf"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","m-0","t-no-arrow"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label","t-large",3,"for"],[1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["dimcontrol","ngModel"],["disabled",""],["class","form-group w-100",4,"ngIf"],[1,"form-group","w-100"],[3,"control","isEdit","ngModel","ngModelChange"],["dimcontroloptions","ngModel"],[1,"col-12"],["icon","info-circle"],["for","expression",1,"small"],["id","expression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["expression","ngModel"],["class","form-group col-12",4,"ngIf"],[1,"btn","btn-sm","t-text-whitish","btn-link","py-0","font-weight-normal",3,"click"],["measureAdvancedOptions",""],["for","successwhen",1,"small"],["id","successwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["successwhen","ngModel"],["for","warningwhen",1,"small"],["id","warningwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["warningwhen","ngModel"],["for","dangerwhen",1,"small"],["id","dangerwhen","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["dangerwhen","ngModel"],["measurecontrol","ngModel"],["measurecontroloptions","ngModel"],["id","expression","type","text","autocomplete","off",1,"form-control","t-studio-input","flex-grow-1",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["selectcontrol","ngModel"],["type","checkbox","id","selectlocalize",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","selectlocalize",1,"custom-control-label","t-large"],["selectcontroloptions","ngModel"],["for","key",1,"small"],["id","key",1,"form-control","t-studio-input",2,"opacity","0.5"],[1,"w-100"],["for","visibility",1,"small"],["id","visibility",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["value","Optional"],["value","Required"],["paramcontrol","ngModel"],["for","defaultexpression",1,"small"],["id","defaultexpression","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["defaultexpression","ngModel"],["paramcontroloptions","ngModel"],[1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","columnstotallabel",1,"small"],["id","columnstotallabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel","ngModel"],["for","columnstotallabel2",1,"small"],["id","columnstotallabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel2","ngModel"],["for","columnstotallabel3",1,"small"],["id","columnstotallabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["columnstotallabel3","ngModel"],["for","rowstotallabel",1,"small"],["id","rowstotallabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["rowstotallabel","ngModel"],["for","rowstotallabel2",1,"small"],["id","rowstotallabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","rowstotallabel3",1,"small"],["id","rowstotallabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,nU,3,3,"ng-template",null,1,o.Sc),o.Rc(4,BR,1,1,"ng-template",null,2,o.Sc),o.Rc(6,OR,1,1,"ng-template",null,3,o.Sc),o.Rc(8,dD,48,49,"ng-template",null,4,o.Sc),o.Rc(10,TD,46,45,"ng-template",null,5,o.Sc),o.Rc(12,OD,45,46,"ng-template",null,6,o.Sc),o.Rc(14,qD,57,45,"ng-template",null,7,o.Sc),o.Rc(16,tB,21,11,"ng-template",null,8,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5);o.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"ReportDefinitions"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.vc(14,nB))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[j.a,x.u,ee.b,te.v,te.u,te.k,te.n,x.t,x.B,te.c,W.f,te.q,te.a,rx,te.p,te.x,W.b,W.d,$s,K.l,K.r,K.p,W.e,W.c,Kx],pipes:[Q.d],encapsulation:2}),e})();function oB(e,t){if(1&e&&(o.Vb(0,"div",6),o.Vb(1,"span",7),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub(),o.Vb(4,"div",8),o.Vb(5,"span",7),o.Tc(6),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("ReportDefinition",e,"Title")||o.nc(3,2,"Untitled")),o.Bb(4),o.Uc(n.ws.getMultilingualValue("ReportDefinition",e,"Description"))}}function cB(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"ReportDefinition"),"\n")}function rB(e,t){if(1&e&&(o.Vb(0,"span",9),o.Qb(1,"t-auto-cell",10),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function sB(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"VisibleInMainMenu")," ")}function lB(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"NotVisibleInMainMenu")," ")}const aB=function(){return[]},uB=function(e){return{template:e,expression:"ShowInMainMenu eq true"}},dB=function(e){return{template:e,expression:"ShowInMainMenu eq false"}},bB=function(e,t){return[e,t]},fB=function(e){return{ShowInMainMenu:e}};let mB=(()=>{class e extends Ut.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.ReportDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-report-definitions-master"]],features:[o.yb],decls:12,vars:22,consts:[["collection","ReportDefinition","selectDefault","Type,ShowInMainMenu","selectForTiles","Title,Title2,Title3,Description,Description2,Description3","theme","dark",3,"mode","showCreateButton","filterDefault","masterCrumb","additionalSelect","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["visibleInMainMenu",""],["notVisibleInMainMenu",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","ReportDefinition",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,oB,7,4,"ng-template",null,1,o.Sc),o.Rc(4,cB,2,3,"ng-template",null,2,o.Sc),o.Rc(6,rB,2,1,"ng-template",null,3,o.Sc),o.Rc(8,sB,2,3,"ng-template",null,4,o.Sc),o.Rc(10,lB,2,3,"ng-template",null,5,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("masterCrumb",o.nc(1,10,"ReportDefinitions"))("additionalSelect",t.additionalSelect)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(12,aB))("filterDefinition",o.wc(20,fB,o.xc(17,bB,o.wc(13,uB,c),o.wc(15,dB,r))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function gB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-report-definitions-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function pB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-report-definitions-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let hB=(()=>{class e extends As{}return e.\u0275fac=function(t){return vB(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-report-definitions-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","ReportDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,gB,2,3,"ng-template",null,1,o.Sc),o.Rc(3,pB,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,iB,mB],encapsulation:2}),e})();const vB=o.Xb(hB),IB=["reportDefinitionModal"];function yB(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function wB(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function CB(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}function MB(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"TitleSingular",n.ws)||o.nc(2,1,"Untitled"))}}function VB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",55),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleDefinition()})),o.Vb(1,"div",56),o.Qb(2,"fa-icon",57),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Definition"))}}function TB(e,t){1&e&&o.Qb(0,"fa-icon",58)}function EB(e,t){1&e&&o.Rb(0)}function xB(e,t){1&e&&o.Rb(0)}function UB(e,t){1&e&&o.Rb(0)}const RB=function(){return{updateOn:"blur"}},DB=function(e,t){return{control:e,serverErrors:t}};function BB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",20),o.Vb(1,"label",59),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",60,61),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular2")})),o.Ub(),o.Rc(6,UB,1,0,"ng-container",24),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular2)("ngModelOptions",o.vc(9,RB)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,DB,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function SB(e,t){1&e&&o.Rb(0)}function kB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",20),o.Vb(1,"label",62),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",63,64),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular3")})),o.Ub(),o.Rc(6,SB,1,0,"ng-container",24),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular3)("ngModelOptions",o.vc(9,RB)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,DB,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function OB(e,t){1&e&&o.Rb(0)}function _B(e,t){1&e&&o.Rb(0)}function LB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",20),o.Vb(1,"label",65),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",66,67),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural2")})),o.Ub(),o.Rc(6,_B,1,0,"ng-container",24),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural2)("ngModelOptions",o.vc(9,RB)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,DB,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function AB(e,t){1&e&&o.Rb(0)}function FB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",20),o.Vb(1,"label",68),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",69,70),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural3")})),o.Ub(),o.Rc(6,AB,1,0,"ng-container",24),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural3)("ngModelOptions",o.vc(9,RB)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,DB,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function PB(e,t){1&e&&o.Qb(0,"fa-icon",58)}function NB(e,t){1&e&&o.Qb(0,"fa-icon",58)}function jB(e,t){1&e&&(o.Vb(0,"div",77),o.Tc(1," \u200c "),o.Ub())}function WB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",71),o.Vb(1,"div",72),o.Rc(2,NB,1,0,"fa-icon",18),o.Vb(3,"span",73),o.Tc(4),o.Ub(),o.Vb(5,"button",33),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureReportDefinition(n,i)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",74),o.Ub(),o.Tc(8," \xa0 "),o.Vb(9,"button",33),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteReportDefinition(n,i)})),o.mc(10,"translate"),o.Qb(11,"fa-icon",75),o.Ub(),o.Ub(),o.Rc(12,jB,2,0,"div",76),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(2),o.Vc(" ",n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),o.Bb(1),o.sc("title",o.nc(6,4,"Configure")),o.Bb(4),o.sc("title",o.nc(10,6,"Delete"))}}function $B(e,t){if(1&e&&(o.Vb(0,"span",78),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e," ")}}function qB(e,t){1&e&&o.Qb(0,"fa-icon",58)}function QB(e,t){if(1&e&&(o.Vb(0,"option",79),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function HB(e,t){1&e&&o.Rb(0)}function GB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",80),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(2).model;return o.lc().onIconClick(i,n)})),o.Qb(1,"fa-icon",81),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2).model;o.Gb("t-highlighted",e.value===n.MainMenuIcon),o.sc("title",e.value),o.Bb(1),o.sc("icon",e.value)}}function zB(e,t){1&e&&o.Rb(0)}function JB(e,t){1&e&&o.Rb(0)}function KB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",82),o.Vb(1,"div",83),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeHidden(t)})),o.Vb(2,"span",84),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"div",83),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeVisible(t)})),o.Vb(6,"span",84),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Ub(),o.Vb(9,"div",83),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeArchived(t)})),o.Vb(10,"span",84),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(1),o.Gb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),o.Bb(2),o.Uc(o.nc(4,15,"Definition_State_Hidden")),o.Bb(2),o.Gb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),o.Bb(2),o.Uc(o.nc(8,17,"Definition_State_Visible")),o.Bb(2),o.Gb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),o.Bb(2),o.Uc(o.nc(12,19,"Definition_State_Archived"))}}const YB=function(e){return{control:null,serverErrors:e}};function XB(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",9),o.Rc(1,VB,6,4,"div",10),o.Vb(2,"div",11),o.Vb(3,"div",12),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleDefinition()})),o.Vb(4,"span"),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Vb(7,"div",13),o.Qb(8,"fa-icon",14),o.Ub(),o.Ub(),o.Vb(9,"div",15),o.Vb(10,"div",16),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Title")})),o.Tc(11," \xa0 "),o.Qb(12,"fa-icon",17),o.Tc(13),o.mc(14,"translate"),o.Rc(15,TB,1,0,"fa-icon",18),o.Ub(),o.Vb(16,"div",19),o.Vb(17,"div",20),o.Vb(18,"label",21),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"input",22,23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Code")})),o.Ub(),o.Rc(23,EB,1,0,"ng-container",24),o.Ub(),o.Vb(24,"div",20),o.Vb(25,"label",25),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Vb(28,"input",26,27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitleSingular=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitleSingular")})),o.Ub(),o.Rc(30,xB,1,0,"ng-container",24),o.Ub(),o.Rc(31,BB,7,13,"div",28),o.Rc(32,kB,7,13,"div",28),o.Vb(33,"div",20),o.Vb(34,"label",29),o.Tc(35),o.mc(36,"translate"),o.Ub(),o.Vb(37,"input",30,31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitlePlural=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitlePlural")})),o.Ub(),o.Rc(39,OB,1,0,"ng-container",24),o.Ub(),o.Rc(40,LB,7,13,"div",28),o.Rc(41,FB,7,13,"div",28),o.Ub(),o.Vb(42,"div",16),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Reports")})),o.Tc(43," \xa0 "),o.Qb(44,"fa-icon",17),o.Tc(45),o.mc(46,"translate"),o.Rc(47,PB,1,0,"fa-icon",18),o.Ub(),o.Vb(48,"div",19),o.Vb(49,"div",20),o.Vb(50,"label",32),o.Tc(51),o.mc(52,"translate"),o.Ub(),o.Tc(53,"\xa0 "),o.Vb(54,"button",33),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateReportDefinition(t)})),o.mc(55,"translate"),o.Qb(56,"fa-icon",34),o.Ub(),o.Vb(57,"div",35),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().rowDrop(t,n.ReportDefinitions)})),o.Rc(58,WB,13,8,"div",36),o.Ub(),o.Rc(59,$B,2,1,"span",37),o.Ub(),o.Ub(),o.Vb(60,"div",16),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Menu")})),o.Tc(61," \xa0 "),o.Qb(62,"fa-icon",17),o.Tc(63),o.mc(64,"translate"),o.Rc(65,qB,1,0,"fa-icon",18),o.Ub(),o.Vb(66,"div",19),o.Vb(67,"div",20),o.Vb(68,"label",38),o.Tc(69),o.mc(70,"translate"),o.Ub(),o.Vb(71,"select",39,40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSection")})),o.Qb(73,"option",41),o.Rc(74,QB,2,2,"option",42),o.Ub(),o.Rc(75,HB,1,0,"ng-container",24),o.Ub(),o.Vb(76,"div",20),o.Vb(77,"label",43),o.Tc(78),o.mc(79,"translate"),o.Ub(),o.Vb(80,"div",44),o.Rc(81,GB,2,4,"div",45),o.Ub(),o.Rc(82,zB,1,0,"ng-container",24),o.Ub(),o.Vb(83,"div",20),o.Vb(84,"label",46),o.Tc(85),o.mc(86,"translate"),o.Ub(),o.Vb(87,"input",47,48),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSortKey=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSortKey")})),o.Ub(),o.Rc(89,JB,1,0,"ng-container",24),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(90,"div",49),o.Vb(91,"div",50),o.Vb(92,"div",51),o.Vb(93,"span"),o.Tc(94),o.mc(95,"translate"),o.Ub(),o.Ub(),o.Rc(96,KB,13,21,"div",52),o.Ub(),o.Vb(97,"div",53),o.Qb(98,"t-lookups-details",54),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(22),t=o.Fc(29),n=o.Fc(38),i=o.Fc(72),c=o.Fc(88),r=o.lc(),s=r.isEdit,l=r.model,a=o.lc(),u=o.Fc(13);o.Bb(1),o.sc("ngIf",s&&a.collapseDefinition),o.Bb(1),o.Gb("d-flex",s&&!a.collapseDefinition)("d-none",!s||a.collapseDefinition),o.Bb(3),o.Uc(o.nc(6,71,"Definition")),o.Bb(3),o.sc("flip",a.flipIcon(!1)),o.Bb(4),o.sc("flip",a.flipIcon(a.showSection("Title")))("rotate",a.rotateIcon(a.showSection("Title"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(14,73,"Title")," "),o.Bb(2),o.sc("ngIf",a.sectionErrors("Title",l)),o.Bb(1),o.Gb("d-none",!a.showSection("Title")),o.Bb(1),o.Gb("is-invalid",a.invalid(e,null==l.serverErrors?null:l.serverErrors.Code)),o.Bb(2),o.Uc(o.nc(20,75,"Code")),o.Bb(2),o.sc("ngModel",l.Code)("ngModelOptions",o.vc(97,RB)),o.Bb(2),o.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",o.xc(98,DB,e,null==l.serverErrors?null:l.serverErrors.Code)),o.Bb(1),o.Gb("is-invalid",a.invalid(t,null==l.serverErrors?null:l.serverErrors.TitleSingular)),o.Bb(2),o.Uc(o.nc(27,77,"TitleSingular")+a.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",l.TitleSingular)("ngModelOptions",o.vc(101,RB)),o.Bb(2),o.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",o.xc(102,DB,t,null==l.serverErrors?null:l.serverErrors.TitleSingular)),o.Bb(1),o.sc("ngIf",null==a.ws.settings?null:a.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==a.ws.settings?null:a.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",a.invalid(n,null==l.serverErrors?null:l.serverErrors.TitlePlural)),o.Bb(2),o.Uc(o.nc(36,79,"TitlePlural")+a.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",l.TitlePlural)("ngModelOptions",o.vc(105,RB)),o.Bb(2),o.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",o.xc(106,DB,n,null==l.serverErrors?null:l.serverErrors.TitlePlural)),o.Bb(1),o.sc("ngIf",null==a.ws.settings?null:a.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==a.ws.settings?null:a.ws.settings.TernaryLanguageId),o.Bb(3),o.sc("flip",a.flipIcon(a.showSection("Reports")))("rotate",a.rotateIcon(a.showSection("Reports"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(46,81,"Reports")," "),o.Bb(2),o.sc("ngIf",a.sectionErrors("Reports",l)),o.Bb(1),o.Gb("d-none",!a.showSection("Reports")),o.Bb(3),o.Uc(o.nc(52,83,"Definition_ReportDefinitions")),o.Bb(3),o.sc("title",o.nc(55,85,"Create")),o.Bb(4),o.sc("ngForOf",l.ReportDefinitions),o.Bb(1),o.sc("ngForOf",null==l.serverErrors?null:l.serverErrors.ReportDefinitions),o.Bb(3),o.sc("flip",a.flipIcon(a.showSection("Menu")))("rotate",a.rotateIcon(a.showSection("Menu"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(64,87,"Menu")," "),o.Bb(2),o.sc("ngIf",a.sectionErrors("Menu",l)),o.Bb(1),o.Gb("d-none",!a.showSection("Menu")),o.Bb(3),o.Uc(o.nc(70,89,"MainMenuSection")),o.Bb(2),o.sc("ngModel",l.MainMenuSection),o.Bb(3),o.sc("ngForOf",a.allMainMenuSections),o.Bb(1),o.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",o.xc(109,DB,i,null==l.serverErrors?null:l.serverErrors.MainMenuSection)),o.Bb(3),o.Uc(o.nc(79,91,"MainMenuIcon")),o.Bb(3),o.sc("ngForOf",a.allMainMenuIcons),o.Bb(1),o.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",o.wc(112,YB,null==l.serverErrors?null:l.serverErrors.MainMenuIcon)),o.Bb(3),o.Uc(o.nc(86,93,"MainMenuSortKey")),o.Bb(2),o.sc("ngModel",l.MainMenuSortKey)("ngModelOptions",o.vc(114,RB)),o.Bb(2),o.sc("ngTemplateOutlet",u)("ngTemplateOutletContext",o.xc(115,DB,c,null==l.serverErrors?null:l.serverErrors.MainMenuSortKey)),o.Bb(5),o.Uc(o.nc(95,95,"Preview")),o.Bb(2),o.sc("ngIf",!s),o.Bb(2),o.sc("previewDefinition",a.getForClient(l))}}function ZB(e,t){if(1&e&&o.Rc(0,XB,99,118,"div",8),2&e){const e=t.isEdit,n=o.lc();o.sc("ngIf",n.watchIsEdit(e))}}function eS(e,t){if(1&e&&(o.Vb(0,"span",87),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function tS(e,t){if(1&e&&(o.Tb(0),o.Rc(1,eS,2,1,"span",86),o.Sb()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(1),o.sc("ngForOf",i.errors(t,n))}}function nS(e,t){if(1&e&&o.Rc(0,tS,2,1,"ng-container",85),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}function iS(e,t){1&e&&o.Rb(0)}function oS(e,t){1&e&&o.Rb(0)}function cS(e,t){1&e&&o.Rb(0)}function rS(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",94),o.Vb(1,"label",105),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",106,107),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reportDefinitionToEdit.Name2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onItemToEditChange()})),o.Ub(),o.Rc(6,cS,1,0,"ng-container",24),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(13);o.Gb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+t.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.reportDefinitionToEdit.Name2)("ngModelOptions",o.vc(9,RB)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,DB,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2))}}function sS(e,t){1&e&&o.Rb(0)}function lS(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",94),o.Vb(1,"label",108),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",109,110),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reportDefinitionToEdit.Name3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onItemToEditChange()})),o.Ub(),o.Rc(6,sS,1,0,"ng-container",24),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(13);o.Gb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+t.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.reportDefinitionToEdit.Name3)("ngModelOptions",o.vc(9,RB)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,DB,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3))}}function aS(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",88),o.Vb(1,"h5",89),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",90),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",91),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",92),o.Vb(8,"div",93),o.Vb(9,"div",94),o.Vb(10,"label",32),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"t-report-definitions-picker",95,96),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().reportDefinitionToEdit.ReportDefinitionId=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(15,iS,1,0,"ng-container",24),o.Ub(),o.Vb(16,"div",94),o.Vb(17,"label",97),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"input",98,99),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().reportDefinitionToEdit.Name=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(22,oS,1,0,"ng-container",24),o.Ub(),o.Rc(23,rS,7,13,"div",100),o.Rc(24,lS,7,13,"div",100),o.Ub(),o.Ub(),o.Vb(25,"div",101),o.Vb(26,"button",102),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(27,"fa-icon",103),o.Tc(28),o.mc(29,"translate"),o.Ub(),o.Vb(30,"button",104),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(31,"fa-icon",75),o.Tc(32),o.mc(33,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(14),t=o.Fc(21),n=o.lc(),i=o.Fc(13);o.Bb(2),o.Vc(" ",o.nc(3,19,"Configure")," "),o.Bb(7),o.Gb("is-invalid",n.invalid(e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),o.Bb(2),o.Uc(o.nc(12,21,"Definition_ReportDefinition")),o.Bb(2),o.sc("ngModel",n.reportDefinitionToEdit.ReportDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(29,DB,e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),o.Bb(1),o.Gb("is-invalid",n.invalid(t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),o.Bb(2),o.Uc(o.nc(19,23,"Name")+n.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",n.reportDefinitionToEdit.Name)("ngModelOptions",o.vc(32,RB)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(33,DB,t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),o.Bb(2),o.sc("disabled",!n.reportDefinitionToEdit.ReportDefinitionId),o.Bb(2),o.Vc(" \xa0",o.nc(29,25,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(33,27,"Cancel")," ")}}const uS=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},dS=function(e,t,n){return[e,t,n]};let bS=(()=>{class e extends gn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.lookupDefinitionsApi=this.api.lookupDefinitionsApi(this.notifyDestruct$),this.expand="ReportDefinitions.ReportDefinition",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText),e.ReportDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this._sections={Title:!0,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.lookupDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.lookupDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.lookupDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("lookup-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.lookupDefinitionsApi=this.api.lookupDefinitionsApi(this.notifyDestruct$)}allVisibilityProps(){const e=Object(lE.a)(this.workspace,this.translate).properties,t=[];for(const n of Object.keys(e))n.endsWith("Visibility")&&t.push(n);return t}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(fI.b)(e.serverErrors[t]))}sectionErrors(e,t){return"Title"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.Code)||Object(fI.b)(t.serverErrors.TitleSingular)||Object(fI.b)(t.serverErrors.TitleSingular2)||Object(fI.b)(t.serverErrors.TitleSingular3)||Object(fI.b)(t.serverErrors.TitlePlural)||Object(fI.b)(t.serverErrors.TitlePlural2)||Object(fI.b)(t.serverErrors.TitlePlural3)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(fI.b)(t.serverErrors.MainMenuIcon)||Object(fI.b)(t.serverErrors.MainMenuSection)||Object(fI.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e)),this._getForClientResult):null}get allMainMenuSections(){const e=Object(lE.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(wi.c)(e)}get allMainMenuIcons(){const e=Object(lE.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(wi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateReportDefinition(e){const t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&e.ReportDefinitions.push(t)},e=>{})}onConfigureReportDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=n,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.ReportDefinitions[e]=n)},e=>{})}onDeleteReportDefinition(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}rowDrop(e,t){Object(W.i)(t,e.previousIndex,e.currentIndex)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-lookup-definitions-details"]],viewQuery:function(e,t){var n;1&e&&o.Oc(IB,!0),2&e&&o.Ec(n=o.ic())&&(t.reportDefinitionModal=n.first)},features:[o.yb],decls:16,vars:35,consts:[["collection","LookupDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[3,"value"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],[4,"ngIf"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,yB,2,3,"ng-template",null,1,o.Sc),o.Rc(4,wB,2,3,"ng-template",null,2,o.Sc),o.Rc(6,CB,2,3,"ng-template",null,3,o.Sc),o.Rc(8,MB,3,3,"ng-template",null,4,o.Sc),o.Rc(10,ZB,1,1,"ng-template",null,5,o.Sc),o.Rc(12,nS,1,1,"ng-template",null,6,o.Sc),o.Rc(14,aS,34,36,"ng-template",null,7,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,11,"LookupDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",r)("actions",o.yc(31,dS,o.Ac(13,uS,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(19,uS,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(25,uS,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)}},directives:[j.a,x.u,ee.b,te.c,te.u,te.k,te.n,x.B,W.f,x.t,te.v,te.p,te.x,te.q,yd,W.b,W.d,hB],pipes:[Q.d],encapsulation:2}),e})();function fS(e,t){if(1&e&&(o.Vb(0,"div",11),o.Vb(1,"span",12),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",13),o.Vb(4,"div",14),o.Qb(5,"t-auto-cell",15),o.Ub(),o.Qb(6,"t-auto-cell",16),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("LookupDefinition",e,"TitleSingular")),o.Bb(3),o.sc("entity",n.c[e]),o.Bb(1),o.sc("entity",n.c[e])}}function mS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"LookupDefinition"),"\n")}function gS(e,t){if(1&e&&(o.Vb(0,"span",17),o.Qb(1,"t-auto-cell",18),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function pS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SavedByMe")," ")}function hS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Hidden")," ")}function vS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Visible")," ")}function IS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Archived")," ")}function yS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function wS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function CS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}const MS=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},VS=function(e,t,n){return[e,t,n]},TS=function(e){return{template:e,expression:"SavedById eq me"}},ES=function(e){return[e]},xS=function(e){return{template:e,expression:"State eq 'Hidden'"}},US=function(e){return{template:e,expression:"State eq 'Visible'"}},RS=function(e){return{template:e,expression:"State eq 'Archived'"}},DS=function(e,t){return{SavedBy:e,State:t}};let BS=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.lookupsDefinitionsApi=this.api.lookupDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.lookupsDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("LookupDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.lookupsDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("LookupDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.lookupsDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("LookupDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("lookup-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.lookupsDefinitionsApi=this.api.lookupDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.LookupDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-lookup-definitions-master"]],features:[o.yb],decls:22,vars:51,consts:[["collection","LookupDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","LookupDefinition","path","Code",3,"entity"],["collection","LookupDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","LookupDefinition",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,fS,7,3,"ng-template",null,1,o.Sc),o.Rc(4,mS,2,3,"ng-template",null,2,o.Sc),o.Rc(6,gS,2,1,"ng-template",null,3,o.Sc),o.Rc(8,pS,2,3,"ng-template",null,4,o.Sc),o.Rc(10,hS,2,3,"ng-template",null,5,o.Sc),o.Rc(12,vS,2,3,"ng-template",null,6,o.Sc),o.Rc(14,IS,2,3,"ng-template",null,7,o.Sc),o.Rc(16,yS,2,3,"ng-template",null,8,o.Sc),o.Rc(18,wS,2,3,"ng-template",null,9,o.Sc),o.Rc(20,CS,2,3,"ng-template",null,10,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17),u=o.Fc(19),d=o.Fc(21);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"LookupDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.yc(30,VS,o.Ac(12,MS,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(18,MS,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(24,MS,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",o.xc(48,DS,o.wc(36,ES,o.wc(34,TS,c)),o.yc(44,VS,o.wc(38,xS,r),o.wc(40,US,s),o.wc(42,RS,l))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function SS(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-lookup-definitions-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function kS(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-lookup-definitions-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let OS=(()=>{class e extends As{}return e.\u0275fac=function(t){return _S(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-lookup-definitions-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","LookupDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,SS,2,3,"ng-template",null,1,o.Sc),o.Rc(3,kS,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,bS,BS],encapsulation:2}),e})();const _S=o.Xb(OS),LS=["reportDefinitionModal"],AS=["scriptModal"];function FS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function PS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function NS(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}function jS(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"TitleSingular",n.ws)||o.nc(2,1,"Untitled"))}}function WS(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",66),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleDefinition()})),o.Vb(1,"div",67),o.Qb(2,"fa-icon",68),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Definition"))}}function $S(e,t){1&e&&o.Qb(0,"fa-icon",69)}function qS(e,t){1&e&&o.Rb(0)}function QS(e,t){1&e&&o.Rb(0)}function HS(e,t){1&e&&o.Rb(0)}const GS=function(){return{updateOn:"blur"}},zS=function(e,t){return{control:e,serverErrors:t}};function JS(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",70),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",71,72),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular2")})),o.Ub(),o.Rc(6,HS,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular2)("ngModelOptions",o.vc(9,GS)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,zS,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function KS(e,t){1&e&&o.Rb(0)}function YS(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",73),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",74,75),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular3")})),o.Ub(),o.Rc(6,KS,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular3)("ngModelOptions",o.vc(9,GS)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,zS,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function XS(e,t){1&e&&o.Rb(0)}function ZS(e,t){1&e&&o.Rb(0)}function ek(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",76),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",77,78),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural2")})),o.Ub(),o.Rc(6,ZS,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural2)("ngModelOptions",o.vc(9,GS)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,zS,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function tk(e,t){1&e&&o.Rb(0)}function nk(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",79),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",80,81),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural3")})),o.Ub(),o.Rc(6,tk,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural3)("ngModelOptions",o.vc(9,GS)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,zS,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function ik(e,t){1&e&&o.Qb(0,"fa-icon",69)}function ok(e,t){1&e&&o.Rb(0)}function ck(e,t){1&e&&o.Rb(0)}function rk(e,t){1&e&&o.Rb(0)}function sk(e,t){1&e&&o.Rb(0)}function lk(e,t){1&e&&o.Rb(0)}function ak(e,t){1&e&&o.Rb(0)}function uk(e,t){1&e&&o.Rb(0)}function dk(e,t){1&e&&o.Rb(0)}function bk(e,t){1&e&&o.Rb(0)}function fk(e,t){1&e&&o.Rb(0)}function mk(e,t){1&e&&o.Rb(0)}function gk(e,t){1&e&&o.Rb(0)}function pk(e,t){1&e&&o.Rb(0)}function hk(e,t){1&e&&o.Rb(0)}function vk(e,t){1&e&&o.Rb(0)}function Ik(e,t){1&e&&o.Rb(0)}function yk(e,t){1&e&&o.Rb(0)}function wk(e,t){1&e&&o.Rb(0)}function Ck(e,t){1&e&&o.Rb(0)}function Mk(e,t){1&e&&o.Rb(0)}const Vk=function(e){return{0:e}};function Tk(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",44),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-relation-definitions-picker",82,83),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CustodianDefinitionId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,Mk,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t||null==t.serverErrors?null:t.serverErrors.CustodianDefinitionId)),o.Bb(2),o.Uc(o.oc(3,6,"Field0Definition",o.wc(11,Vk,o.nc(4,9,"Custody_Custodian")))),o.Bb(3),o.sc("ngModel",t.CustodianDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(13,zS,e,null==t||null==t.serverErrors?null:t.serverErrors.CustodianDefinitionId))}}function Ek(e,t){if(1&e&&(o.Vb(0,"option",87),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function xk(e,t){1&e&&o.Rb(0)}function Uk(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",84),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",85,86),o.hc("ngModelChange",(function(n){o.Ic(e);const i=t.prop;return o.lc(2).model[i+"Visibility"]=n}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Rc(7,Ek,2,2,"option",53),o.Ub(),o.Rc(8,xk,1,0,"ng-container",25),o.Ub()}if(2&e){const e=t.prop,n=t.propLower,i=t.fieldName,c=o.Fc(6),r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(c,s.serverErrors(r,e+"Visibility"))),o.Bb(1),o.uc("for","",n,"visibility"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Visibility",o.wc(14,Vk,o.nc(4,12,i||"Entity_"+e)))),o.Bb(3),o.uc("id","",n,"visibility"),o.sc("ngModel",r[e+"Visibility"]),o.Bb(2),o.sc("ngForOf",s.visibilityChoices),o.Bb(1),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(16,zS,c,s.serverErrors(r,e+"Visibility")))}}function Rk(e,t){1&e&&o.Rb(0)}function Dk(e,t){1&e&&o.Rb(0)}function Bk(e,t){1&e&&o.Rb(0)}function Sk(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",84),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",89,91),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).prop;return o.lc(2).model[n+"Label2"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label2")})),o.Ub(),o.Rc(7,Bk,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label2"))),o.Bb(1),o.uc("for","",i,"label2"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Label",o.wc(14,Vk,o.nc(4,12,c||"Entity_"+n)))+s.ws.secondaryPostfix),o.Bb(3),o.uc("id","",i,"label2"),o.sc("ngModel",r[n+"Label2"])("ngModelOptions",o.vc(16,GS)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(17,zS,e,s.serverErrors(r,n+"Label2")))}}function kk(e,t){1&e&&o.Rb(0)}function Ok(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",84),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",89,92),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).prop;return o.lc(2).model[n+"Label3"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label3")})),o.Ub(),o.Rc(7,kk,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label3"))),o.Bb(1),o.uc("for","",i,"label3"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Label",o.wc(14,Vk,o.nc(4,12,c||"Entity_"+n)))+s.ws.ternaryPostfix),o.Bb(3),o.uc("id","",i,"label3"),o.sc("ngModel",r[n+"Label3"])("ngModelOptions",o.vc(16,GS)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(17,zS,e,s.serverErrors(r,n+"Label3")))}}function _k(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",21),o.Vb(2,"label",84),o.Tc(3),o.mc(4,"translate"),o.mc(5,"translate"),o.Ub(),o.Vb(6,"input",89,90),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc().prop;return o.lc(2).model[n+"Label"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label")})),o.Ub(),o.Rc(8,Dk,1,0,"ng-container",25),o.Ub(),o.Rc(9,Sk,8,20,"div",29),o.Rc(10,Ok,8,20,"div",29),o.Sb()}if(2&e){const e=o.Fc(7),t=o.lc(),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Bb(1),o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label"))),o.Bb(1),o.uc("for","",i,"label"),o.Bb(1),o.Uc(o.oc(4,11,"Field0Label",o.wc(16,Vk,o.nc(5,14,c||"Entity_"+n)))+s.ws.primaryPostfix),o.Bb(3),o.uc("id","",i,"label"),o.sc("ngModel",r[n+"Label"])("ngModelOptions",o.vc(18,GS)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(19,zS,e,s.serverErrors(r,n+"Label"))),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId)}}const Lk=function(e,t,n){return{prop:e,propLower:t,fieldName:n}};function Ak(e,t){if(1&e&&(o.Rc(0,Rk,1,0,"ng-container",25),o.Rc(1,_k,11,22,"ng-container",88)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;o.lc();const c=o.Fc(70),r=o.lc().model,s=o.lc();o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.yc(3,Lk,e,n,i)),o.Bb(1),o.sc("ngIf",s.isVisible(r[e+"Visibility"]))}}function Fk(e,t){1&e&&o.Rb(0)}function Pk(e,t){1&e&&o.Rb(0)}function Nk(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",44),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-lookup-definitions-picker",82,83),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc().prop;return o.lc(2).model[n+"DefinitionId"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,Pk,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(),n=t.prop,i=t.fieldName,c=o.lc(2).model,r=o.lc(),s=o.Fc(13);o.Gb("is-invalid",r.invalid(e,r.serverErrors(c,n+"DefinitionId"))),o.Bb(2),o.Uc(o.oc(3,6,"Field0Definition",o.wc(11,Vk,o.nc(4,9,i||"Entity_"+n)))),o.Bb(3),o.sc("ngModel",c[n+"DefinitionId"]),o.Bb(2),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.xc(13,zS,e,r.serverErrors(c,n+"DefinitionId")))}}function jk(e,t){if(1&e&&(o.Rc(0,Fk,1,0,"ng-container",25),o.Rc(1,Nk,8,16,"div",29)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;o.lc();const c=o.Fc(72),r=o.lc().model,s=o.lc();o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.yc(3,Lk,e,n,i)),o.Bb(1),o.sc("ngIf",s.isVisible(r[e+"Visibility"]))}}function Wk(e,t){1&e&&o.Qb(0,"fa-icon",69)}function $k(e,t){1&e&&o.Rb(0)}function qk(e,t){1&e&&o.Rb(0)}function Qk(e,t){1&e&&o.Qb(0,"fa-icon",69)}function Hk(e,t){1&e&&o.Qb(0,"fa-icon",69)}function Gk(e,t){1&e&&(o.Vb(0,"div",99),o.Tc(1," \u200c "),o.Ub())}function zk(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",93),o.Vb(1,"div",94),o.Rc(2,Hk,1,0,"fa-icon",19),o.Vb(3,"span",95),o.Tc(4),o.Ub(),o.Vb(5,"button",37),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureReportDefinition(n,i)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",96),o.Ub(),o.Tc(8," \xa0 "),o.Vb(9,"button",37),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteReportDefinition(n,i)})),o.mc(10,"translate"),o.Qb(11,"fa-icon",97),o.Ub(),o.Ub(),o.Rc(12,Gk,2,0,"div",98),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(2),o.Vc(" ",n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),o.Bb(1),o.sc("title",o.nc(6,4,"Configure")),o.Bb(4),o.sc("title",o.nc(10,6,"Delete"))}}function Jk(e,t){if(1&e&&(o.Vb(0,"span",100),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e," ")}}function Kk(e,t){1&e&&o.Qb(0,"fa-icon",69)}function Yk(e,t){if(1&e&&(o.Vb(0,"option",87),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function Xk(e,t){1&e&&o.Rb(0)}function Zk(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",101),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(2).model;return o.lc().onIconClick(i,n)})),o.Qb(1,"fa-icon",102),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2).model;o.Gb("t-highlighted",e.value===n.MainMenuIcon),o.sc("title",e.value),o.Bb(1),o.sc("icon",e.value)}}function eO(e,t){1&e&&o.Rb(0)}function tO(e,t){1&e&&o.Rb(0)}function nO(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",103),o.Vb(1,"div",104),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeHidden(t)})),o.Vb(2,"span",105),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"div",104),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeVisible(t)})),o.Vb(6,"span",105),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Ub(),o.Vb(9,"div",104),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeArchived(t)})),o.Vb(10,"span",105),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(1),o.Gb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),o.Bb(2),o.Uc(o.nc(4,15,"Definition_State_Hidden")),o.Bb(2),o.Gb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),o.Bb(2),o.Uc(o.nc(8,17,"Definition_State_Visible")),o.Bb(2),o.Gb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),o.Bb(2),o.Uc(o.nc(12,19,"Definition_State_Archived"))}}const iO=function(){return{prop:"Currency",propLower:"currency"}},oO=function(){return{prop:"Center",propLower:"center"}},cO=function(){return{prop:"Image",propLower:"image",fieldName:"Image"}},rO=function(){return{prop:"Description",propLower:"description",fieldName:"Description"}},sO=function(){return{prop:"Location",propLower:"location"}},lO=function(){return{prop:"FromDate",propLower:"fromdate"}},aO=function(){return{prop:"ToDate",propLower:"todate"}},uO=function(){return{prop:"Decimal1",propLower:"decimal1"}},dO=function(){return{prop:"Decimal2",propLower:"decimal2"}},bO=function(){return{prop:"Int1",propLower:"int1"}},fO=function(){return{prop:"Int2",propLower:"int2"}},mO=function(){return{prop:"Lookup1",propLower:"lookup1"}},gO=function(){return{prop:"Lookup2",propLower:"lookup2"}},pO=function(){return{prop:"Lookup3",propLower:"lookup3"}},hO=function(){return{prop:"Lookup4",propLower:"lookup4"}},vO=function(){return{prop:"Text1",propLower:"text1"}},IO=function(){return{prop:"Text2",propLower:"text2"}},yO=function(){return{prop:"ExternalReference",propLower:"externalreference",fieldName:"Custody_ExternalReference"}},wO=function(){return{prop:"Custodian",propLower:"custodian",fieldName:"Custody_Custodian"}},CO=function(e){return{control:null,serverErrors:e}};function MO(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",10),o.Rc(1,WS,6,4,"div",11),o.Vb(2,"div",12),o.Vb(3,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleDefinition()})),o.Vb(4,"span"),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Vb(7,"div",14),o.Qb(8,"fa-icon",15),o.Ub(),o.Ub(),o.Vb(9,"div",16),o.Vb(10,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Title")})),o.Tc(11," \xa0 "),o.Qb(12,"fa-icon",18),o.Tc(13),o.mc(14,"translate"),o.Rc(15,$S,1,0,"fa-icon",19),o.Ub(),o.Vb(16,"div",20),o.Vb(17,"div",21),o.Vb(18,"label",22),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"input",23,24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Code")})),o.Ub(),o.Rc(23,qS,1,0,"ng-container",25),o.Ub(),o.Vb(24,"div",21),o.Vb(25,"label",26),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Vb(28,"input",27,28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitleSingular=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitleSingular")})),o.Ub(),o.Rc(30,QS,1,0,"ng-container",25),o.Ub(),o.Rc(31,JS,7,13,"div",29),o.Rc(32,YS,7,13,"div",29),o.Vb(33,"div",21),o.Vb(34,"label",30),o.Tc(35),o.mc(36,"translate"),o.Ub(),o.Vb(37,"input",31,32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitlePlural=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitlePlural")})),o.Ub(),o.Rc(39,XS,1,0,"ng-container",25),o.Ub(),o.Rc(40,ek,7,13,"div",29),o.Rc(41,nk,7,13,"div",29),o.Ub(),o.Vb(42,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Fields")})),o.Tc(43," \xa0 "),o.Qb(44,"fa-icon",18),o.Tc(45),o.mc(46,"translate"),o.Rc(47,ik,1,0,"fa-icon",19),o.Ub(),o.Vb(48,"div",20),o.Rc(49,ok,1,0,"ng-container",25),o.Rc(50,ck,1,0,"ng-container",25),o.Rc(51,rk,1,0,"ng-container",25),o.Rc(52,sk,1,0,"ng-container",25),o.Rc(53,lk,1,0,"ng-container",25),o.Rc(54,ak,1,0,"ng-container",25),o.Rc(55,uk,1,0,"ng-container",25),o.Rc(56,dk,1,0,"ng-container",25),o.Rc(57,bk,1,0,"ng-container",25),o.Rc(58,fk,1,0,"ng-container",25),o.Rc(59,mk,1,0,"ng-container",25),o.Rc(60,gk,1,0,"ng-container",25),o.Rc(61,pk,1,0,"ng-container",25),o.Rc(62,hk,1,0,"ng-container",25),o.Rc(63,vk,1,0,"ng-container",25),o.Rc(64,Ik,1,0,"ng-container",25),o.Rc(65,yk,1,0,"ng-container",25),o.Rc(66,wk,1,0,"ng-container",25),o.Rc(67,Ck,1,0,"ng-container",25),o.Rc(68,Tk,8,16,"div",29),o.Rc(69,Uk,9,19,"ng-template",null,33,o.Sc),o.Rc(71,Ak,2,7,"ng-template",null,34,o.Sc),o.Rc(73,jk,2,7,"ng-template",null,35,o.Sc),o.Ub(),o.Vb(75,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Scripts")})),o.Tc(76," \xa0 "),o.Qb(77,"fa-icon",18),o.Tc(78),o.mc(79,"translate"),o.Rc(80,Wk,1,0,"fa-icon",19),o.Ub(),o.Vb(81,"div",20),o.Vb(82,"div",21),o.Vb(83,"label",36),o.Tc(84),o.mc(85,"translate"),o.Ub(),o.Tc(86,"\xa0 "),o.Vb(87,"button",37),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onEditScript("PreprocessScript",t)})),o.mc(88,"translate"),o.Qb(89,"fa-icon",38),o.Ub(),o.Vb(90,"textarea",39,40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.PreprocessScript=t})),o.Ub(),o.Rc(92,$k,1,0,"ng-container",25),o.Ub(),o.Vb(93,"div",21),o.Vb(94,"label",41),o.Tc(95),o.mc(96,"translate"),o.Ub(),o.Tc(97,"\xa0 "),o.Vb(98,"button",37),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onEditScript("ValidateScript",t)})),o.mc(99,"translate"),o.Qb(100,"fa-icon",38),o.Ub(),o.Vb(101,"textarea",42,43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ValidateScript=t})),o.Ub(),o.Rc(103,qk,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Vb(104,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Reports")})),o.Tc(105," \xa0 "),o.Qb(106,"fa-icon",18),o.Tc(107),o.mc(108,"translate"),o.Rc(109,Qk,1,0,"fa-icon",19),o.Ub(),o.Vb(110,"div",20),o.Vb(111,"div",21),o.Vb(112,"label",44),o.Tc(113),o.mc(114,"translate"),o.Ub(),o.Tc(115,"\xa0 "),o.Vb(116,"button",37),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateReportDefinition(t)})),o.mc(117,"translate"),o.Qb(118,"fa-icon",45),o.Ub(),o.Vb(119,"div",46),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().rowDrop(t,n.ReportDefinitions)})),o.Rc(120,zk,13,8,"div",47),o.Ub(),o.Rc(121,Jk,2,1,"span",48),o.Ub(),o.Ub(),o.Vb(122,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Menu")})),o.Tc(123," \xa0 "),o.Qb(124,"fa-icon",18),o.Tc(125),o.mc(126,"translate"),o.Rc(127,Kk,1,0,"fa-icon",19),o.Ub(),o.Vb(128,"div",20),o.Vb(129,"div",21),o.Vb(130,"label",49),o.Tc(131),o.mc(132,"translate"),o.Ub(),o.Vb(133,"select",50,51),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSection")})),o.Qb(135,"option",52),o.Rc(136,Yk,2,2,"option",53),o.Ub(),o.Rc(137,Xk,1,0,"ng-container",25),o.Ub(),o.Vb(138,"div",21),o.Vb(139,"label",54),o.Tc(140),o.mc(141,"translate"),o.Ub(),o.Vb(142,"div",55),o.Rc(143,Zk,2,4,"div",56),o.Ub(),o.Rc(144,eO,1,0,"ng-container",25),o.Ub(),o.Vb(145,"div",21),o.Vb(146,"label",57),o.Tc(147),o.mc(148,"translate"),o.Ub(),o.Vb(149,"input",58,59),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSortKey=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSortKey")})),o.Ub(),o.Rc(151,tO,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(152,"div",60),o.Vb(153,"div",61),o.Vb(154,"div",62),o.Vb(155,"span"),o.Tc(156),o.mc(157,"translate"),o.Ub(),o.Ub(),o.Rc(158,nO,13,21,"div",63),o.Ub(),o.Vb(159,"div",64),o.Qb(160,"t-custodies-details",65),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(22),t=o.Fc(29),n=o.Fc(38),i=o.Fc(70),c=o.Fc(72),r=o.Fc(74),s=o.Fc(91),l=o.Fc(102),a=o.Fc(134),u=o.Fc(150),d=o.lc(),b=d.isEdit,f=d.model,m=o.lc(),g=o.Fc(13);o.Bb(1),o.sc("ngIf",b&&m.collapseDefinition),o.Bb(1),o.Gb("d-flex",b&&!m.collapseDefinition)("d-none",!b||m.collapseDefinition),o.Bb(3),o.Uc(o.nc(6,138,"Definition")),o.Bb(3),o.sc("flip",m.flipIcon(!1)),o.Bb(4),o.sc("flip",m.flipIcon(m.showSection("Title")))("rotate",m.rotateIcon(m.showSection("Title"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(14,140,"Title")," "),o.Bb(2),o.sc("ngIf",m.sectionErrors("Title",f)),o.Bb(1),o.Gb("d-none",!m.showSection("Title")),o.Bb(1),o.Gb("is-invalid",m.invalid(e,null==f.serverErrors?null:f.serverErrors.Code)),o.Bb(2),o.Uc(o.nc(20,142,"Code")),o.Bb(2),o.sc("ngModel",f.Code)("ngModelOptions",o.vc(176,GS)),o.Bb(2),o.sc("ngTemplateOutlet",g)("ngTemplateOutletContext",o.xc(177,zS,e,null==f.serverErrors?null:f.serverErrors.Code)),o.Bb(1),o.Gb("is-invalid",m.invalid(t,null==f.serverErrors?null:f.serverErrors.TitleSingular)),o.Bb(2),o.Uc(o.nc(27,144,"TitleSingular")+m.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",f.TitleSingular)("ngModelOptions",o.vc(180,GS)),o.Bb(2),o.sc("ngTemplateOutlet",g)("ngTemplateOutletContext",o.xc(181,zS,t,null==f.serverErrors?null:f.serverErrors.TitleSingular)),o.Bb(1),o.sc("ngIf",null==m.ws.settings?null:m.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==m.ws.settings?null:m.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",m.invalid(n,null==f.serverErrors?null:f.serverErrors.TitlePlural)),o.Bb(2),o.Uc(o.nc(36,146,"TitlePlural")+m.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",f.TitlePlural)("ngModelOptions",o.vc(184,GS)),o.Bb(2),o.sc("ngTemplateOutlet",g)("ngTemplateOutletContext",o.xc(185,zS,n,null==f.serverErrors?null:f.serverErrors.TitlePlural)),o.Bb(1),o.sc("ngIf",null==m.ws.settings?null:m.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==m.ws.settings?null:m.ws.settings.TernaryLanguageId),o.Bb(3),o.sc("flip",m.flipIcon(m.showSection("Fields")))("rotate",m.rotateIcon(m.showSection("Fields"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(46,148,"Fields")," "),o.Bb(2),o.sc("ngIf",m.sectionErrors("Fields",f)),o.Bb(1),o.Gb("d-none",!m.showSection("Fields")),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.vc(188,iO)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.vc(189,oO)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.vc(190,cO)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.vc(191,rO)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.vc(192,sO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(193,lO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(194,aO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(195,uO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(196,dO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(197,bO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(198,fO)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(199,mO)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(200,gO)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(201,pO)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(202,hO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(203,vO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(204,IO)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(205,yO)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.vc(206,wO)),o.Bb(1),o.sc("ngIf",m.isVisible(f.CustodianVisibility)),o.Bb(9),o.sc("flip",m.flipIcon(m.showSection("Scripts")))("rotate",m.rotateIcon(m.showSection("Scripts"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(79,150,"Scripts")," "),o.Bb(2),o.sc("ngIf",m.sectionErrors("Scripts",f)),o.Bb(1),o.Gb("d-none",!m.showSection("Scripts")),o.Bb(1),o.Gb("is-invalid",m.invalid(s,null==f.serverErrors?null:f.serverErrors.PreprocessScript)),o.Bb(2),o.Uc(o.nc(85,152,"Definition_PreprocessScript")),o.Bb(3),o.sc("title",o.nc(88,154,"Expand")),o.Bb(3),o.sc("ngModel",f.PreprocessScript)("ngModelOptions",o.vc(207,GS)),o.Bb(2),o.sc("ngTemplateOutlet",g)("ngTemplateOutletContext",o.xc(208,zS,s,null==f.serverErrors?null:f.serverErrors.PreprocessScript)),o.Bb(1),o.Gb("is-invalid",m.invalid(l,null==f.serverErrors?null:f.serverErrors.ValidateScript)),o.Bb(2),o.Vc("",o.nc(96,156,"Definition_ValidateScript")," "),o.Bb(3),o.sc("title",o.nc(99,158,"Expand")),o.Bb(3),o.sc("ngModel",f.ValidateScript)("ngModelOptions",o.vc(211,GS)),o.Bb(2),o.sc("ngTemplateOutlet",g)("ngTemplateOutletContext",o.xc(212,zS,l,null==f.serverErrors?null:f.serverErrors.ValidateScript)),o.Bb(3),o.sc("flip",m.flipIcon(m.showSection("Reports")))("rotate",m.rotateIcon(m.showSection("Reports"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(108,160,"Reports")," "),o.Bb(2),o.sc("ngIf",m.sectionErrors("Reports",f)),o.Bb(1),o.Gb("d-none",!m.showSection("Reports")),o.Bb(3),o.Uc(o.nc(114,162,"Definition_ReportDefinitions")),o.Bb(3),o.sc("title",o.nc(117,164,"Create")),o.Bb(4),o.sc("ngForOf",f.ReportDefinitions),o.Bb(1),o.sc("ngForOf",null==f.serverErrors?null:f.serverErrors.ReportDefinitions),o.Bb(3),o.sc("flip",m.flipIcon(m.showSection("Menu")))("rotate",m.rotateIcon(m.showSection("Menu"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(126,166,"Menu")," "),o.Bb(2),o.sc("ngIf",m.sectionErrors("Menu",f)),o.Bb(1),o.Gb("d-none",!m.showSection("Menu")),o.Bb(3),o.Uc(o.nc(132,168,"MainMenuSection")),o.Bb(2),o.sc("ngModel",f.MainMenuSection),o.Bb(3),o.sc("ngForOf",m.allMainMenuSections),o.Bb(1),o.sc("ngTemplateOutlet",g)("ngTemplateOutletContext",o.xc(215,zS,a,null==f.serverErrors?null:f.serverErrors.MainMenuSection)),o.Bb(3),o.Uc(o.nc(141,170,"MainMenuIcon")),o.Bb(3),o.sc("ngForOf",m.allMainMenuIcons),o.Bb(1),o.sc("ngTemplateOutlet",g)("ngTemplateOutletContext",o.wc(218,CO,null==f.serverErrors?null:f.serverErrors.MainMenuIcon)),o.Bb(3),o.Uc(o.nc(148,172,"MainMenuSortKey")),o.Bb(2),o.sc("ngModel",f.MainMenuSortKey)("ngModelOptions",o.vc(220,GS)),o.Bb(2),o.sc("ngTemplateOutlet",g)("ngTemplateOutletContext",o.xc(221,zS,u,null==f.serverErrors?null:f.serverErrors.MainMenuSortKey)),o.Bb(5),o.Uc(o.nc(157,174,"Preview")),o.Bb(2),o.sc("ngIf",!b),o.Bb(2),o.sc("previewDefinition",m.getForClient(f))}}function VO(e,t){if(1&e&&o.Rc(0,MO,161,224,"div",9),2&e){const e=t.isEdit,n=o.lc();o.sc("ngIf",n.watchIsEdit(e))}}function TO(e,t){if(1&e&&(o.Vb(0,"span",107),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function EO(e,t){if(1&e&&(o.Tb(0),o.Rc(1,TO,2,1,"span",106),o.Sb()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(1),o.sc("ngForOf",i.errors(t,n))}}function xO(e,t){if(1&e&&o.Rc(0,EO,2,1,"ng-container",88),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}function UO(e,t){1&e&&o.Rb(0)}function RO(e,t){1&e&&o.Rb(0)}function DO(e,t){1&e&&o.Rb(0)}function BO(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",114),o.Vb(1,"label",125),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",126,127),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reportDefinitionToEdit.Name2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onItemToEditChange()})),o.Ub(),o.Rc(6,DO,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(13);o.Gb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+t.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.reportDefinitionToEdit.Name2)("ngModelOptions",o.vc(9,GS)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,zS,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2))}}function SO(e,t){1&e&&o.Rb(0)}function kO(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",114),o.Vb(1,"label",128),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",129,130),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reportDefinitionToEdit.Name3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onItemToEditChange()})),o.Ub(),o.Rc(6,SO,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(13);o.Gb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+t.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.reportDefinitionToEdit.Name3)("ngModelOptions",o.vc(9,GS)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,zS,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3))}}function OO(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",108),o.Vb(1,"h5",109),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",110),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",111),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",112),o.Vb(8,"div",113),o.Vb(9,"div",114),o.Vb(10,"label",44),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"t-report-definitions-picker",115,116),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().reportDefinitionToEdit.ReportDefinitionId=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(15,UO,1,0,"ng-container",25),o.Ub(),o.Vb(16,"div",114),o.Vb(17,"label",117),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"input",118,119),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().reportDefinitionToEdit.Name=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(22,RO,1,0,"ng-container",25),o.Ub(),o.Rc(23,BO,7,13,"div",120),o.Rc(24,kO,7,13,"div",120),o.Ub(),o.Ub(),o.Vb(25,"div",121),o.Vb(26,"button",122),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(27,"fa-icon",123),o.Tc(28),o.mc(29,"translate"),o.Ub(),o.Vb(30,"button",124),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(31,"fa-icon",97),o.Tc(32),o.mc(33,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(14),t=o.Fc(21),n=o.lc(),i=o.Fc(13);o.Bb(2),o.Vc(" ",o.nc(3,19,"Configure")," "),o.Bb(7),o.Gb("is-invalid",n.invalid(e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),o.Bb(2),o.Uc(o.nc(12,21,"Definition_ReportDefinition")),o.Bb(2),o.sc("ngModel",n.reportDefinitionToEdit.ReportDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(29,zS,e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),o.Bb(1),o.Gb("is-invalid",n.invalid(t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),o.Bb(2),o.Uc(o.nc(19,23,"Name")+n.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",n.reportDefinitionToEdit.Name)("ngModelOptions",o.vc(32,GS)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(33,zS,t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),o.Bb(2),o.sc("disabled",!n.reportDefinitionToEdit.ReportDefinitionId),o.Bb(2),o.Vc(" \xa0",o.nc(29,25,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(33,27,"Cancel")," ")}}function _O(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",108),o.Vb(1,"h5",109),o.Tc(2),o.Ub(),o.Vb(3,"button",110),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(4,"span",111),o.Tc(5,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(6,"div",112),o.Vb(7,"div",131),o.Vb(8,"textarea",132,133),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().script=t}))("keydown",(function(t){o.Ic(e);const n=o.Fc(10);return o.lc().onScriptKeydown(n,t)})),o.Tc(11,"                "),o.Ub(),o.Ub(),o.Ub(),o.Vb(12,"div",121),o.Vb(13,"button",134),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(14,"fa-icon",123),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Vb(17,"button",134),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(18,"fa-icon",97),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Vc(" ",e.scriptModalLabel()," "),o.Bb(6),o.sc("ngModel",e.script),o.Bb(7),o.Vc(" \xa0",o.nc(16,4,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(20,6,"Cancel")," ")}}const LO=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},AO=function(e,t,n){return[e,t,n]};let FO=(()=>{class e extends gn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.custodyDefinitionsApi=this.api.custodyDefinitionsApi(this.notifyDestruct$),this.expand="ReportDefinitions.ReportDefinition,\nLookup1Definition,Lookup2Definition,Lookup3Definition,Lookup4Definition,CustodianDefinition",this.create=()=>{const e={};this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText);for(const t of this.allVisibilityProps())e[t]="None";return e.ReportDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.savePreprocessing=e=>{for(const t of this.allVisibilityProps())if("None"===e[t]){const n=t.substr(0,t.length-"Visibility".length);delete e[n+"Label"],delete e[n+"Label2"],delete e[n+"Label3"],delete e[n+"DefinitionId"]}},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this._sections={Title:!0,Fields:!1,Scripts:!1,Reports:!1,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.custodyDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.custodyDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.custodyDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("custody-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.custodyDefinitionsApi=this.api.custodyDefinitionsApi(this.notifyDestruct$)}allVisibilityProps(){const e=Object(mV.a)(this.workspace,this.translate).properties,t=[];for(const n of Object.keys(e))n.endsWith("Visibility")&&t.push(n);return t}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(fI.b)(e.serverErrors[t]))}sectionErrors(e,t){return"Title"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.Code)||Object(fI.b)(t.serverErrors.TitleSingular)||Object(fI.b)(t.serverErrors.TitleSingular2)||Object(fI.b)(t.serverErrors.TitleSingular3)||Object(fI.b)(t.serverErrors.TitlePlural)||Object(fI.b)(t.serverErrors.TitlePlural2)||Object(fI.b)(t.serverErrors.TitlePlural3)):"Fields"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.CurrencyVisibility)||Object(fI.b)(t.serverErrors.CenterVisibility)||Object(fI.b)(t.serverErrors.ImageVisibility)||Object(fI.b)(t.serverErrors.DescriptionVisibility)||Object(fI.b)(t.serverErrors.LocationVisibility)||Object(fI.b)(t.serverErrors.FromDateLabel)||Object(fI.b)(t.serverErrors.FromDateLabel2)||Object(fI.b)(t.serverErrors.FromDateLabel3)||Object(fI.b)(t.serverErrors.FromDateVisibility)||Object(fI.b)(t.serverErrors.ToDateLabel)||Object(fI.b)(t.serverErrors.ToDateLabel2)||Object(fI.b)(t.serverErrors.ToDateLabel3)||Object(fI.b)(t.serverErrors.ToDateVisibility)||Object(fI.b)(t.serverErrors.Decimal1Label)||Object(fI.b)(t.serverErrors.Decimal1Label2)||Object(fI.b)(t.serverErrors.Decimal1Label3)||Object(fI.b)(t.serverErrors.Decimal1Visibility)||Object(fI.b)(t.serverErrors.Decimal2Label)||Object(fI.b)(t.serverErrors.Decimal2Label2)||Object(fI.b)(t.serverErrors.Decimal2Label3)||Object(fI.b)(t.serverErrors.Decimal2Visibility)||Object(fI.b)(t.serverErrors.Int1Label)||Object(fI.b)(t.serverErrors.Int1Label2)||Object(fI.b)(t.serverErrors.Int1Label3)||Object(fI.b)(t.serverErrors.Int1Visibility)||Object(fI.b)(t.serverErrors.Int2Label)||Object(fI.b)(t.serverErrors.Int2Label2)||Object(fI.b)(t.serverErrors.Int2Label3)||Object(fI.b)(t.serverErrors.Int2Visibility)||Object(fI.b)(t.serverErrors.Lookup1Label)||Object(fI.b)(t.serverErrors.Lookup1Label2)||Object(fI.b)(t.serverErrors.Lookup1Label3)||Object(fI.b)(t.serverErrors.Lookup1Visibility)||Object(fI.b)(t.serverErrors.Lookup1DefinitionId)||Object(fI.b)(t.serverErrors.Lookup2Label)||Object(fI.b)(t.serverErrors.Lookup2Label2)||Object(fI.b)(t.serverErrors.Lookup2Label3)||Object(fI.b)(t.serverErrors.Lookup2Visibility)||Object(fI.b)(t.serverErrors.Lookup2DefinitionId)||Object(fI.b)(t.serverErrors.Lookup3Label)||Object(fI.b)(t.serverErrors.Lookup3Label2)||Object(fI.b)(t.serverErrors.Lookup3Label3)||Object(fI.b)(t.serverErrors.Lookup3Visibility)||Object(fI.b)(t.serverErrors.Lookup3DefinitionId)||Object(fI.b)(t.serverErrors.Lookup4Label)||Object(fI.b)(t.serverErrors.Lookup4Label2)||Object(fI.b)(t.serverErrors.Lookup4Label3)||Object(fI.b)(t.serverErrors.Lookup4Visibility)||Object(fI.b)(t.serverErrors.Lookup4DefinitionId)||Object(fI.b)(t.serverErrors.Text1Label)||Object(fI.b)(t.serverErrors.Text1Label2)||Object(fI.b)(t.serverErrors.Text1Label3)||Object(fI.b)(t.serverErrors.Text1Visibility)||Object(fI.b)(t.serverErrors.Text2Label)||Object(fI.b)(t.serverErrors.Text2Label2)||Object(fI.b)(t.serverErrors.Text2Label3)||Object(fI.b)(t.serverErrors.Text2Visibility)||Object(fI.b)(t.serverErrors.CustodianVisibility)||Object(fI.b)(t.serverErrors.CustodianDefinitionId)||Object(fI.b)(t.serverErrors.ExternalReferenceLabel)||Object(fI.b)(t.serverErrors.ExternalReferenceLabel2)||Object(fI.b)(t.serverErrors.ExternalReferenceLabel3)||Object(fI.b)(t.serverErrors.ExternalReferenceVisibility)):"Scripts"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.PreprocessScript)||Object(fI.b)(t.serverErrors.ValidateScript)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(fI.b)(t.serverErrors.MainMenuIcon)||Object(fI.b)(t.serverErrors.MainMenuSection)||Object(fI.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}serverErrors(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){if(!e)return null;if(this._currentModel!==e||this._currentModelModified){this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e);for(const e of this.allVisibilityProps())"None"===this._getForClientResult[e]&&delete this._getForClientResult[e];console.log(this._getForClientResult)}return this._getForClientResult}get visibilityChoices(){return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:()=>this.translate.instant("Visibility_None")},{value:"Optional",name:()=>this.translate.instant("Visibility_Optional")},{value:"Required",name:()=>this.translate.instant("Visibility_Required")}]),this._visibilityChoices}get cardinalityChoices(){return this._cardinalityChoices||(this._cardinalityChoices=[{value:"None",name:()=>this.translate.instant("Cardinality_None")},{value:"Single",name:()=>this.translate.instant("Cardinality_Single")},{value:"Multiple",name:()=>this.translate.instant("Cardinality_Multiple")}]),this._cardinalityChoices}isVisible(e){return"Optional"===e||"Required"===e}get allMainMenuSections(){const e=Object(mV.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(wi.c)(e)}get allMainMenuIcons(){const e=Object(mV.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(wi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateReportDefinition(e){const t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&e.ReportDefinitions.push(t)},e=>{})}onConfigureReportDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=n,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.ReportDefinitions[e]=n)},e=>{})}onDeleteReportDefinition(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}rowDrop(e,t){Object(W.i)(t,e.previousIndex,e.currentIndex)}onEditScript(e,t){this.script=t[e],this.scriptModalLabel=()=>this.translate.instant("Definition_"+e),this.modalService.open(this.scriptModal,{windowClass:"t-dark-theme t-details-modal"}).result.then(n=>{n&&(t[e]=this.script)},e=>{})}onScriptKeydown(e,t){Object(N.p)(e,t,e=>this.script=e)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-custody-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(LS,!0),o.Oc(AS,!0)),2&e&&(o.Ec(n=o.ic())&&(t.reportDefinitionModal=n.first),o.Ec(n=o.ic())&&(t.scriptModal=n.first))},features:[o.yb],decls:18,vars:36,consts:[["collection","CustodyDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["scriptModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["unlabeledProp",""],["labeledProp",""],["definitionedProp",""],["for","preprocessscript",1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","expand"],["rows","6","id","preprocessscript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["preprocessscript","ngModel"],["for","validatescript",1,"small"],["rows","6","id","validatescript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["validatescript","ngModel"],[1,"small"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["theme","dark",3,"ngModel","ngModelChange"],["defId","ngModel"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[3,"value"],[4,"ngIf"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"id","ngModel","ngModelOptions","ngModelChange"],["label","ngModel"],["label2","ngModel"],["label3","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"],[1,"row","h-100","t-much-less-dark"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","ngbAutoFocus","",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["scriptnmodel","ngModel","pstextarea",""],[1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,FS,2,3,"ng-template",null,1,o.Sc),o.Rc(4,PS,2,3,"ng-template",null,2,o.Sc),o.Rc(6,NS,2,3,"ng-template",null,3,o.Sc),o.Rc(8,jS,3,3,"ng-template",null,4,o.Sc),o.Rc(10,VO,1,1,"ng-template",null,5,o.Sc),o.Rc(12,xO,1,1,"ng-template",null,6,o.Sc),o.Rc(14,OO,34,36,"ng-template",null,7,o.Sc),o.Rc(16,_O,21,8,"ng-template",null,8,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"CustodyDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",r)("actions",o.yc(32,AO,o.Ac(14,LO,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(20,LO,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(26,LO,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[j.a,x.u,ee.b,te.c,te.u,te.k,te.n,x.B,W.f,x.t,te.v,te.p,te.x,te.q,sE,lV,OS,W.b,W.d,hB],pipes:[Q.d],encapsulation:2}),e})();function PO(e,t){if(1&e&&(o.Vb(0,"div",11),o.Vb(1,"span",12),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",13),o.Vb(4,"div",14),o.Qb(5,"t-auto-cell",15),o.Ub(),o.Qb(6,"t-auto-cell",16),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("CustodyDefinition",e,"TitleSingular")),o.Bb(3),o.sc("entity",n.c[e]),o.Bb(1),o.sc("entity",n.c[e])}}function NO(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CustodyDefinition"),"\n")}function jO(e,t){if(1&e&&(o.Vb(0,"span",17),o.Qb(1,"t-auto-cell",18),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function WO(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SavedByMe")," ")}function $O(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Hidden")," ")}function qO(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Visible")," ")}function QO(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Archived")," ")}function HO(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function GO(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function zO(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}const JO=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},KO=function(e,t,n){return[e,t,n]},YO=function(e){return{template:e,expression:"SavedById eq me"}},XO=function(e){return[e]},ZO=function(e){return{template:e,expression:"State eq 'Hidden'"}},e_=function(e){return{template:e,expression:"State eq 'Visible'"}},t_=function(e){return{template:e,expression:"State eq 'Archived'"}},n_=function(e,t){return{SavedBy:e,State:t}};let i_=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.custodyDefinitionsApi=this.api.custodyDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.custodyDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("CustodyDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.custodyDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("CustodyDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.custodyDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("CustodyDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("custody-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.custodyDefinitionsApi=this.api.custodyDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.CustodyDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-custody-definitions-master"]],features:[o.yb],decls:22,vars:51,consts:[["collection","CustodyDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","CustodyDefinition","path","Code",3,"entity"],["collection","CustodyDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","CustodyDefinition",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,PO,7,3,"ng-template",null,1,o.Sc),o.Rc(4,NO,2,3,"ng-template",null,2,o.Sc),o.Rc(6,jO,2,1,"ng-template",null,3,o.Sc),o.Rc(8,WO,2,3,"ng-template",null,4,o.Sc),o.Rc(10,$O,2,3,"ng-template",null,5,o.Sc),o.Rc(12,qO,2,3,"ng-template",null,6,o.Sc),o.Rc(14,QO,2,3,"ng-template",null,7,o.Sc),o.Rc(16,HO,2,3,"ng-template",null,8,o.Sc),o.Rc(18,GO,2,3,"ng-template",null,9,o.Sc),o.Rc(20,zO,2,3,"ng-template",null,10,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17),u=o.Fc(19),d=o.Fc(21);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"CustodyDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.yc(30,KO,o.Ac(12,JO,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(18,JO,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(24,JO,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",o.xc(48,n_,o.wc(36,XO,o.wc(34,YO,c)),o.yc(44,KO,o.wc(38,ZO,r),o.wc(40,e_,s),o.wc(42,t_,l))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function o_(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-custody-definitions-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function c_(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-custody-definitions-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let r_=(()=>{class e extends As{}return e.\u0275fac=function(t){return s_(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-custody-definitions-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","CustodyDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,o_,2,3,"ng-template",null,1,o.Sc),o.Rc(3,c_,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,FO,i_],encapsulation:2}),e})();const s_=o.Xb(r_);var l_=n("UWPD");const a_=["reportDefinitionModal"],u_=["scriptModal"];function d_(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function b_(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function f_(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}function m_(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"TitleSingular",n.ws)||o.nc(2,1,"Untitled"))}}function g_(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",72),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleDefinition()})),o.Vb(1,"div",73),o.Qb(2,"fa-icon",74),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Definition"))}}function p_(e,t){1&e&&o.Qb(0,"fa-icon",75)}function h_(e,t){1&e&&o.Rb(0)}function v_(e,t){1&e&&o.Rb(0)}function I_(e,t){1&e&&o.Rb(0)}const y_=function(){return{updateOn:"blur"}},w_=function(e,t){return{control:e,serverErrors:t}};function C_(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",76),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",77,78),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular2")})),o.Ub(),o.Rc(6,I_,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular2)("ngModelOptions",o.vc(9,y_)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w_,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function M_(e,t){1&e&&o.Rb(0)}function V_(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",79),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",80,81),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular3")})),o.Ub(),o.Rc(6,M_,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular3)("ngModelOptions",o.vc(9,y_)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w_,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function T_(e,t){1&e&&o.Rb(0)}function E_(e,t){1&e&&o.Rb(0)}function x_(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",82),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",83,84),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural2")})),o.Ub(),o.Rc(6,E_,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural2)("ngModelOptions",o.vc(9,y_)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w_,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function U_(e,t){1&e&&o.Rb(0)}function R_(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",85),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",86,87),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural3")})),o.Ub(),o.Rc(6,U_,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural3)("ngModelOptions",o.vc(9,y_)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w_,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function D_(e,t){if(1&e&&(o.Vb(0,"option",88),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function B_(e,t){1&e&&o.Rb(0)}function S_(e,t){1&e&&o.Qb(0,"fa-icon",75)}function k_(e,t){1&e&&o.Rb(0)}function O_(e,t){1&e&&o.Rb(0)}function __(e,t){1&e&&o.Rb(0)}function L_(e,t){1&e&&o.Rb(0)}function A_(e,t){1&e&&o.Rb(0)}function F_(e,t){1&e&&o.Rb(0)}function P_(e,t){1&e&&o.Rb(0)}function N_(e,t){1&e&&o.Rb(0)}function j_(e,t){1&e&&o.Rb(0)}function W_(e,t){1&e&&o.Rb(0)}function $_(e,t){1&e&&o.Rb(0)}function q_(e,t){1&e&&o.Rb(0)}function Q_(e,t){1&e&&o.Rb(0)}function H_(e,t){1&e&&o.Rb(0)}function G_(e,t){1&e&&o.Rb(0)}function z_(e,t){1&e&&o.Rb(0)}function J_(e,t){1&e&&o.Rb(0)}function K_(e,t){1&e&&o.Rb(0)}function Y_(e,t){1&e&&o.Rb(0)}function X_(e,t){1&e&&o.Rb(0)}function Z_(e,t){1&e&&o.Rb(0)}const eL=function(e){return{0:e}};function tL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",89),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-decimal-editor",90,91),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.DefaultVatRate=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,Z_,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,n.serverErrors(t,"DefaultVatRate"))),o.Bb(2),o.Uc(o.oc(3,9,"Field0Default",o.wc(14,eL,o.nc(4,12,"Resource_VatRate")))),o.Bb(3),o.sc("ngModel",t.DefaultVatRate)("minDecimalPlaces",2)("maxDecimalPlaces",4)("isPercentage",!0),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(16,w_,e,n.serverErrors(t,"DefaultVatRate")))}}function nL(e,t){1&e&&o.Rb(0)}function iL(e,t){1&e&&o.Rb(0)}function oL(e,t){if(1&e&&(o.Vb(0,"option",88),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function cL(e,t){1&e&&o.Rb(0)}function rL(e,t){1&e&&o.Rb(0)}function sL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",92),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-units-picker",93,94),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.DefaultUnitId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,rL,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,n.serverErrors(t,"DefaultUnitId"))),o.Bb(2),o.Uc(o.oc(3,6,"Field0Default",o.wc(11,eL,o.nc(4,9,"Resource_Unit")))),o.Bb(3),o.sc("ngModel",t.DefaultUnitId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(13,w_,e,n.serverErrors(t,"DefaultUnitId")))}}function lL(e,t){1&e&&o.Rb(0)}function aL(e,t){1&e&&o.Rb(0)}function uL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",95),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-units-picker",96,97),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.DefaultUnitMassUnitId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,aL,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,n.serverErrors(t,"DefaultUnitMassUnitId"))),o.Bb(2),o.Uc(o.oc(3,6,"Field0Default",o.wc(11,eL,o.nc(4,9,"Resource_UnitMassUnit")))),o.Bb(3),o.sc("ngModel",t.DefaultUnitMassUnitId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(13,w_,e,n.serverErrors(t,"DefaultUnitMassUnitId")))}}function dL(e,t){1&e&&o.Rb(0)}function bL(e,t){1&e&&o.Rb(0)}function fL(e,t){1&e&&o.Rb(0)}function mL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",98),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-relation-definitions-picker",99,100),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ParticipantDefinitionId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,fL,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t||null==t.serverErrors?null:t.serverErrors.ParticipantDefinitionId)),o.Bb(2),o.Uc(o.oc(3,6,"Field0Definition",o.wc(11,eL,o.nc(4,9,"Resource_Participant")))),o.Bb(3),o.sc("ngModel",t.ParticipantDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(13,w_,e,null==t||null==t.serverErrors?null:t.serverErrors.ParticipantDefinitionId))}}function gL(e,t){if(1&e&&(o.Vb(0,"option",88),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function pL(e,t){1&e&&o.Rb(0)}function hL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",101),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",102,103),o.hc("ngModelChange",(function(n){o.Ic(e);const i=t.prop;return o.lc(2).model[i+"Visibility"]=n}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Rc(7,gL,2,2,"option",36),o.Ub(),o.Rc(8,pL,1,0,"ng-container",25),o.Ub()}if(2&e){const e=t.prop,n=t.propLower,i=t.fieldName,c=o.Fc(6),r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(c,s.serverErrors(r,e+"Visibility"))),o.Bb(1),o.uc("for","",n,"visibility"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Visibility",o.wc(14,eL,o.nc(4,12,i||"Entity_"+e)))),o.Bb(3),o.uc("id","",n,"visibility"),o.sc("ngModel",r[e+"Visibility"]),o.Bb(2),o.sc("ngForOf",s.visibilityChoices),o.Bb(1),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(16,w_,c,s.serverErrors(r,e+"Visibility")))}}function vL(e,t){1&e&&o.Rb(0)}function IL(e,t){1&e&&o.Rb(0)}function yL(e,t){1&e&&o.Rb(0)}function wL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",101),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",105,107),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).prop;return o.lc(2).model[n+"Label2"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label2")})),o.Ub(),o.Rc(7,yL,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label2"))),o.Bb(1),o.uc("for","",i,"label2"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Label",o.wc(14,eL,o.nc(4,12,c||"Entity_"+n)))+s.ws.secondaryPostfix),o.Bb(3),o.uc("id","",i,"label2"),o.sc("ngModel",r[n+"Label2"])("ngModelOptions",o.vc(16,y_)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(17,w_,e,s.serverErrors(r,n+"Label2")))}}function CL(e,t){1&e&&o.Rb(0)}function ML(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",101),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",105,108),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).prop;return o.lc(2).model[n+"Label3"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label3")})),o.Ub(),o.Rc(7,CL,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label3"))),o.Bb(1),o.uc("for","",i,"label3"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Label",o.wc(14,eL,o.nc(4,12,c||"Entity_"+n)))+s.ws.ternaryPostfix),o.Bb(3),o.uc("id","",i,"label3"),o.sc("ngModel",r[n+"Label3"])("ngModelOptions",o.vc(16,y_)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(17,w_,e,s.serverErrors(r,n+"Label3")))}}function VL(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",21),o.Vb(2,"label",101),o.Tc(3),o.mc(4,"translate"),o.mc(5,"translate"),o.Ub(),o.Vb(6,"input",105,106),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc().prop;return o.lc(2).model[n+"Label"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label")})),o.Ub(),o.Rc(8,IL,1,0,"ng-container",25),o.Ub(),o.Rc(9,wL,8,20,"div",29),o.Rc(10,ML,8,20,"div",29),o.Sb()}if(2&e){const e=o.Fc(7),t=o.lc(),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Bb(1),o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label"))),o.Bb(1),o.uc("for","",i,"label"),o.Bb(1),o.Uc(o.oc(4,11,"Field0Label",o.wc(16,eL,o.nc(5,14,c||"Entity_"+n)))+s.ws.primaryPostfix),o.Bb(3),o.uc("id","",i,"label"),o.sc("ngModel",r[n+"Label"])("ngModelOptions",o.vc(18,y_)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(19,w_,e,s.serverErrors(r,n+"Label"))),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId)}}const TL=function(e,t,n){return{prop:e,propLower:t,fieldName:n}};function EL(e,t){if(1&e&&(o.Rc(0,vL,1,0,"ng-container",25),o.Rc(1,VL,11,22,"ng-container",104)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;o.lc();const c=o.Fc(95),r=o.lc().model,s=o.lc();o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.yc(3,TL,e,n,i)),o.Bb(1),o.sc("ngIf",s.isVisible(r[e+"Visibility"]))}}function xL(e,t){1&e&&o.Rb(0)}function UL(e,t){1&e&&o.Rb(0)}function RL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",51),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-lookup-definitions-picker",99,100),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc().prop;return o.lc(2).model[n+"DefinitionId"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,UL,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(),n=t.prop,i=t.fieldName,c=o.lc(2).model,r=o.lc(),s=o.Fc(13);o.Gb("is-invalid",r.invalid(e,r.serverErrors(c,n+"DefinitionId"))),o.Bb(2),o.Uc(o.oc(3,6,"Field0Definition",o.wc(11,eL,o.nc(4,9,i||"Entity_"+n)))),o.Bb(3),o.sc("ngModel",c[n+"DefinitionId"]),o.Bb(2),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.xc(13,w_,e,r.serverErrors(c,n+"DefinitionId")))}}function DL(e,t){if(1&e&&(o.Rc(0,xL,1,0,"ng-container",25),o.Rc(1,RL,8,16,"div",29)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;o.lc();const c=o.Fc(97),r=o.lc().model,s=o.lc();o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.yc(3,TL,e,n,i)),o.Bb(1),o.sc("ngIf",s.isVisible(r[e+"Visibility"]))}}function BL(e,t){1&e&&o.Qb(0,"fa-icon",75)}function SL(e,t){1&e&&o.Rb(0)}function kL(e,t){1&e&&o.Rb(0)}function OL(e,t){1&e&&o.Qb(0,"fa-icon",75)}function _L(e,t){1&e&&o.Qb(0,"fa-icon",75)}function LL(e,t){1&e&&(o.Vb(0,"div",115),o.Tc(1," \u200c "),o.Ub())}function AL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",109),o.Vb(1,"div",110),o.Rc(2,_L,1,0,"fa-icon",19),o.Vb(3,"span",111),o.Tc(4),o.Ub(),o.Vb(5,"button",44),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureReportDefinition(n,i)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",112),o.Ub(),o.Tc(8," \xa0 "),o.Vb(9,"button",44),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteReportDefinition(n,i)})),o.mc(10,"translate"),o.Qb(11,"fa-icon",113),o.Ub(),o.Ub(),o.Rc(12,LL,2,0,"div",114),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(2),o.Vc(" ",n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),o.Bb(1),o.sc("title",o.nc(6,4,"Configure")),o.Bb(4),o.sc("title",o.nc(10,6,"Delete"))}}function FL(e,t){if(1&e&&(o.Vb(0,"span",116),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e," ")}}function PL(e,t){1&e&&o.Qb(0,"fa-icon",75)}function NL(e,t){if(1&e&&(o.Vb(0,"option",88),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function jL(e,t){1&e&&o.Rb(0)}function WL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",117),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(2).model;return o.lc().onIconClick(i,n)})),o.Qb(1,"fa-icon",118),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2).model;o.Gb("t-highlighted",e.value===n.MainMenuIcon),o.sc("title",e.value),o.Bb(1),o.sc("icon",e.value)}}function $L(e,t){1&e&&o.Rb(0)}function qL(e,t){1&e&&o.Rb(0)}function QL(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",119),o.Vb(1,"div",120),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeHidden(t)})),o.Vb(2,"span",121),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"div",120),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeVisible(t)})),o.Vb(6,"span",121),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Ub(),o.Vb(9,"div",120),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeArchived(t)})),o.Vb(10,"span",121),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(1),o.Gb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),o.Bb(2),o.Uc(o.nc(4,15,"Definition_State_Hidden")),o.Bb(2),o.Gb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),o.Bb(2),o.Uc(o.nc(8,17,"Definition_State_Visible")),o.Bb(2),o.Gb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),o.Bb(2),o.Uc(o.nc(12,19,"Definition_State_Archived"))}}const HL=function(){return{prop:"Currency",propLower:"currency"}},GL=function(){return{prop:"Center",propLower:"center"}},zL=function(){return{prop:"CostCenter",propLower:"costcenter",fieldName:"Resource_CostCenter"}},JL=function(){return{prop:"Image",propLower:"image",fieldName:"Image"}},KL=function(){return{prop:"Description",propLower:"description",fieldName:"Description"}},YL=function(){return{prop:"Location",propLower:"location"}},XL=function(){return{prop:"FromDate",propLower:"fromdate"}},ZL=function(){return{prop:"ToDate",propLower:"todate"}},eA=function(){return{prop:"Decimal1",propLower:"decimal1"}},tA=function(){return{prop:"Decimal2",propLower:"decimal2"}},nA=function(){return{prop:"Int1",propLower:"int1"}},iA=function(){return{prop:"Int2",propLower:"int2"}},oA=function(){return{prop:"Lookup1",propLower:"lookup1"}},cA=function(){return{prop:"Lookup2",propLower:"lookup2"}},rA=function(){return{prop:"Lookup3",propLower:"lookup3"}},sA=function(){return{prop:"Lookup4",propLower:"lookup4"}},lA=function(){return{prop:"Text1",propLower:"text1"}},aA=function(){return{prop:"Text2",propLower:"text2"}},uA=function(){return{prop:"Identifier",propLower:"identifier",fieldName:"Resource_Identifier"}},dA=function(){return{prop:"VatRate",propLower:"vatrate",fieldName:"Resource_VatRate"}},bA=function(){return{prop:"ReorderLevel",propLower:"reorderlevel",fieldName:"Resource_ReorderLevel"}},fA=function(){return{prop:"EconomicOrderQuantity",propLower:"economicorderquantity",fieldName:"Resource_EconomicOrderQuantity"}},mA=function(){return{prop:"UnitMass",propLower:"unitmass",fieldName:"Resource_UnitMass"}},gA=function(){return{prop:"MonetaryValue",propLower:"monetaryvalue",fieldName:"Resource_MonetaryValue"}},pA=function(){return{prop:"Participant",propLower:"participant",fieldName:"Resource_Participant"}},hA=function(e){return{control:null,serverErrors:e}};function vA(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",10),o.Rc(1,g_,6,4,"div",11),o.Vb(2,"div",12),o.Vb(3,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleDefinition()})),o.Vb(4,"span"),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Vb(7,"div",14),o.Qb(8,"fa-icon",15),o.Ub(),o.Ub(),o.Vb(9,"div",16),o.Vb(10,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Title")})),o.Tc(11," \xa0 "),o.Qb(12,"fa-icon",18),o.Tc(13),o.mc(14,"translate"),o.Rc(15,p_,1,0,"fa-icon",19),o.Ub(),o.Vb(16,"div",20),o.Vb(17,"div",21),o.Vb(18,"label",22),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"input",23,24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Code")})),o.Ub(),o.Rc(23,h_,1,0,"ng-container",25),o.Ub(),o.Vb(24,"div",21),o.Vb(25,"label",26),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Vb(28,"input",27,28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitleSingular=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitleSingular")})),o.Ub(),o.Rc(30,v_,1,0,"ng-container",25),o.Ub(),o.Rc(31,C_,7,13,"div",29),o.Rc(32,V_,7,13,"div",29),o.Vb(33,"div",21),o.Vb(34,"label",30),o.Tc(35),o.mc(36,"translate"),o.Ub(),o.Vb(37,"input",31,32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitlePlural=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitlePlural")})),o.Ub(),o.Rc(39,T_,1,0,"ng-container",25),o.Ub(),o.Rc(40,x_,7,13,"div",29),o.Rc(41,R_,7,13,"div",29),o.Vb(42,"div",21),o.Vb(43,"label",33),o.Tc(44),o.mc(45,"translate"),o.Ub(),o.Vb(46,"select",34,35),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ResourceDefinitionType=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Rc(48,D_,2,2,"option",36),o.Ub(),o.Rc(49,B_,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Vb(50,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Fields")})),o.Tc(51," \xa0 "),o.Qb(52,"fa-icon",18),o.Tc(53),o.mc(54,"translate"),o.Rc(55,S_,1,0,"fa-icon",19),o.Ub(),o.Vb(56,"div",20),o.Rc(57,k_,1,0,"ng-container",25),o.Rc(58,O_,1,0,"ng-container",25),o.Rc(59,__,1,0,"ng-container",25),o.Rc(60,L_,1,0,"ng-container",25),o.Rc(61,A_,1,0,"ng-container",25),o.Rc(62,F_,1,0,"ng-container",25),o.Rc(63,P_,1,0,"ng-container",25),o.Rc(64,N_,1,0,"ng-container",25),o.Rc(65,j_,1,0,"ng-container",25),o.Rc(66,W_,1,0,"ng-container",25),o.Rc(67,$_,1,0,"ng-container",25),o.Rc(68,q_,1,0,"ng-container",25),o.Rc(69,Q_,1,0,"ng-container",25),o.Rc(70,H_,1,0,"ng-container",25),o.Rc(71,G_,1,0,"ng-container",25),o.Rc(72,z_,1,0,"ng-container",25),o.Rc(73,J_,1,0,"ng-container",25),o.Rc(74,K_,1,0,"ng-container",25),o.Rc(75,Y_,1,0,"ng-container",25),o.Rc(76,X_,1,0,"ng-container",25),o.Rc(77,tL,8,19,"div",29),o.Rc(78,nL,1,0,"ng-container",25),o.Rc(79,iL,1,0,"ng-container",25),o.Vb(80,"div",21),o.Vb(81,"label",37),o.Tc(82),o.mc(83,"translate"),o.Ub(),o.Vb(84,"select",38,39),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.UnitCardinality=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Rc(86,oL,2,2,"option",36),o.Ub(),o.Rc(87,cL,1,0,"ng-container",25),o.Ub(),o.Rc(88,sL,8,16,"div",29),o.Rc(89,lL,1,0,"ng-container",25),o.Rc(90,uL,8,16,"div",29),o.Rc(91,dL,1,0,"ng-container",25),o.Rc(92,bL,1,0,"ng-container",25),o.Rc(93,mL,8,16,"div",29),o.Rc(94,hL,9,19,"ng-template",null,40,o.Sc),o.Rc(96,EL,2,7,"ng-template",null,41,o.Sc),o.Rc(98,DL,2,7,"ng-template",null,42,o.Sc),o.Ub(),o.Vb(100,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Scripts")})),o.Tc(101," \xa0 "),o.Qb(102,"fa-icon",18),o.Tc(103),o.mc(104,"translate"),o.Rc(105,BL,1,0,"fa-icon",19),o.Ub(),o.Vb(106,"div",20),o.Vb(107,"div",21),o.Vb(108,"label",43),o.Tc(109),o.mc(110,"translate"),o.Ub(),o.Tc(111,"\xa0 "),o.Vb(112,"button",44),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onEditScript("PreprocessScript",t)})),o.mc(113,"translate"),o.Qb(114,"fa-icon",45),o.Ub(),o.Vb(115,"textarea",46,47),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.PreprocessScript=t})),o.Ub(),o.Rc(117,SL,1,0,"ng-container",25),o.Ub(),o.Vb(118,"div",21),o.Vb(119,"label",48),o.Tc(120),o.mc(121,"translate"),o.Ub(),o.Tc(122,"\xa0 "),o.Vb(123,"button",44),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onEditScript("ValidateScript",t)})),o.mc(124,"translate"),o.Qb(125,"fa-icon",45),o.Ub(),o.Vb(126,"textarea",49,50),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ValidateScript=t})),o.Ub(),o.Rc(128,kL,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Vb(129,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Reports")})),o.Tc(130," \xa0 "),o.Qb(131,"fa-icon",18),o.Tc(132),o.mc(133,"translate"),o.Rc(134,OL,1,0,"fa-icon",19),o.Ub(),o.Vb(135,"div",20),o.Vb(136,"div",21),o.Vb(137,"label",51),o.Tc(138),o.mc(139,"translate"),o.Ub(),o.Tc(140,"\xa0 "),o.Vb(141,"button",44),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateReportDefinition(t)})),o.mc(142,"translate"),o.Qb(143,"fa-icon",52),o.Ub(),o.Vb(144,"div",53),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().rowDrop(t,n.ReportDefinitions)})),o.Rc(145,AL,13,8,"div",54),o.Ub(),o.Rc(146,FL,2,1,"span",55),o.Ub(),o.Ub(),o.Vb(147,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Menu")})),o.Tc(148," \xa0 "),o.Qb(149,"fa-icon",18),o.Tc(150),o.mc(151,"translate"),o.Rc(152,PL,1,0,"fa-icon",19),o.Ub(),o.Vb(153,"div",20),o.Vb(154,"div",21),o.Vb(155,"label",56),o.Tc(156),o.mc(157,"translate"),o.Ub(),o.Vb(158,"select",57,58),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSection")})),o.Qb(160,"option",59),o.Rc(161,NL,2,2,"option",36),o.Ub(),o.Rc(162,jL,1,0,"ng-container",25),o.Ub(),o.Vb(163,"div",21),o.Vb(164,"label",60),o.Tc(165),o.mc(166,"translate"),o.Ub(),o.Vb(167,"div",61),o.Rc(168,WL,2,4,"div",62),o.Ub(),o.Rc(169,$L,1,0,"ng-container",25),o.Ub(),o.Vb(170,"div",21),o.Vb(171,"label",63),o.Tc(172),o.mc(173,"translate"),o.Ub(),o.Vb(174,"input",64,65),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSortKey=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSortKey")})),o.Ub(),o.Rc(176,qL,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(177,"div",66),o.Vb(178,"div",67),o.Vb(179,"div",68),o.Vb(180,"span"),o.Tc(181),o.mc(182,"translate"),o.Ub(),o.Ub(),o.Rc(183,QL,13,21,"div",69),o.Ub(),o.Vb(184,"div",70),o.Qb(185,"t-resources-details",71),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(22),t=o.Fc(29),n=o.Fc(38),i=o.Fc(47),c=o.Fc(85),r=o.Fc(95),s=o.Fc(97),l=o.Fc(99),a=o.Fc(116),u=o.Fc(127),d=o.Fc(159),b=o.Fc(175),f=o.lc(),m=f.isEdit,g=f.model,p=o.lc(),h=o.Fc(13);o.Bb(1),o.sc("ngIf",m&&p.collapseDefinition),o.Bb(1),o.Gb("d-flex",m&&!p.collapseDefinition)("d-none",!m||p.collapseDefinition),o.Bb(3),o.Uc(o.nc(6,167,"Definition")),o.Bb(3),o.sc("flip",p.flipIcon(!1)),o.Bb(4),o.sc("flip",p.flipIcon(p.showSection("Title")))("rotate",p.rotateIcon(p.showSection("Title"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(14,169,"Title")," "),o.Bb(2),o.sc("ngIf",p.sectionErrors("Title",g)),o.Bb(1),o.Gb("d-none",!p.showSection("Title")),o.Bb(1),o.Gb("is-invalid",p.invalid(e,null==g.serverErrors?null:g.serverErrors.Code)),o.Bb(2),o.Uc(o.nc(20,171,"Code")),o.Bb(2),o.sc("ngModel",g.Code)("ngModelOptions",o.vc(209,y_)),o.Bb(2),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(210,w_,e,null==g.serverErrors?null:g.serverErrors.Code)),o.Bb(1),o.Gb("is-invalid",p.invalid(t,null==g.serverErrors?null:g.serverErrors.TitleSingular)),o.Bb(2),o.Uc(o.nc(27,173,"TitleSingular")+p.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",g.TitleSingular)("ngModelOptions",o.vc(213,y_)),o.Bb(2),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(214,w_,t,null==g.serverErrors?null:g.serverErrors.TitleSingular)),o.Bb(1),o.sc("ngIf",null==p.ws.settings?null:p.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==p.ws.settings?null:p.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",p.invalid(n,null==g.serverErrors?null:g.serverErrors.TitlePlural)),o.Bb(2),o.Uc(o.nc(36,175,"TitlePlural")+p.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",g.TitlePlural)("ngModelOptions",o.vc(217,y_)),o.Bb(2),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(218,w_,n,null==g.serverErrors?null:g.serverErrors.TitlePlural)),o.Bb(1),o.sc("ngIf",null==p.ws.settings?null:p.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==p.ws.settings?null:p.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",p.invalid(i,p.serverErrors(g,"ResourceDefinitionType"))),o.Bb(2),o.Uc(o.nc(45,177,"ResourceDefinition_ResourceDefinitionType")),o.Bb(2),o.sc("ngModel",g.ResourceDefinitionType),o.Bb(2),o.sc("ngForOf",p.resourceDefinitionTypeChoices),o.Bb(1),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(221,w_,i,p.serverErrors(g,"ResourceDefinitionType"))),o.Bb(3),o.sc("flip",p.flipIcon(p.showSection("Fields")))("rotate",p.rotateIcon(p.showSection("Fields"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(54,179,"Fields")," "),o.Bb(2),o.sc("ngIf",p.sectionErrors("Fields",g)),o.Bb(1),o.Gb("d-none",!p.showSection("Fields")),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(224,HL)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(225,GL)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(226,zL)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(227,JL)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(228,KL)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(229,YL)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(230,XL)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(231,ZL)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(232,eA)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(233,tA)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(234,nA)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(235,iA)),o.Bb(1),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.vc(236,oA)),o.Bb(1),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.vc(237,cA)),o.Bb(1),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.vc(238,rA)),o.Bb(1),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.vc(239,sA)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(240,lA)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(241,aA)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(242,uA)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(243,dA)),o.Bb(1),o.sc("ngIf",p.isVisible(g.VatRateVisibility)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(244,bA)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(245,fA)),o.Bb(1),o.Gb("is-invalid",p.invalid(c,p.serverErrors(g,"UnitCardinality"))),o.Bb(2),o.Uc(o.nc(83,181,"ResourceDefinition_UnitCardinality")),o.Bb(2),o.sc("ngModel",g.UnitCardinality),o.Bb(2),o.sc("ngForOf",p.cardinalityChoices),o.Bb(1),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(246,w_,c,p.serverErrors(g,"UnitCardinality"))),o.Bb(1),o.sc("ngIf",p.isCardinalityVisible(g.UnitCardinality)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(249,mA)),o.Bb(1),o.sc("ngIf",p.isVisible(g.UnitMassVisibility)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(250,gA)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(251,pA)),o.Bb(1),o.sc("ngIf",p.isVisible(g.ParticipantVisibility)),o.Bb(9),o.sc("flip",p.flipIcon(p.showSection("Scripts")))("rotate",p.rotateIcon(p.showSection("Scripts"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(104,183,"Scripts")," "),o.Bb(2),o.sc("ngIf",p.sectionErrors("Scripts",g)),o.Bb(1),o.Gb("d-none",!p.showSection("Scripts")),o.Bb(1),o.Gb("is-invalid",p.invalid(a,null==g.serverErrors?null:g.serverErrors.PreprocessScript)),o.Bb(2),o.Uc(o.nc(110,185,"Definition_PreprocessScript")),o.Bb(3),o.sc("title",o.nc(113,187,"Expand")),o.Bb(3),o.sc("ngModel",g.PreprocessScript)("ngModelOptions",o.vc(252,y_)),o.Bb(2),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(253,w_,a,null==g.serverErrors?null:g.serverErrors.PreprocessScript)),o.Bb(1),o.Gb("is-invalid",p.invalid(u,null==g.serverErrors?null:g.serverErrors.ValidateScript)),o.Bb(2),o.Vc("",o.nc(121,189,"Definition_ValidateScript")," "),o.Bb(3),o.sc("title",o.nc(124,191,"Expand")),o.Bb(3),o.sc("ngModel",g.ValidateScript)("ngModelOptions",o.vc(256,y_)),o.Bb(2),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(257,w_,u,null==g.serverErrors?null:g.serverErrors.ValidateScript)),o.Bb(3),o.sc("flip",p.flipIcon(p.showSection("Reports")))("rotate",p.rotateIcon(p.showSection("Reports"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(133,193,"Reports")," "),o.Bb(2),o.sc("ngIf",p.sectionErrors("Reports",g)),o.Bb(1),o.Gb("d-none",!p.showSection("Reports")),o.Bb(3),o.Uc(o.nc(139,195,"Definition_ReportDefinitions")),o.Bb(3),o.sc("title",o.nc(142,197,"Create")),o.Bb(4),o.sc("ngForOf",g.ReportDefinitions),o.Bb(1),o.sc("ngForOf",null==g.serverErrors?null:g.serverErrors.ReportDefinitions),o.Bb(3),o.sc("flip",p.flipIcon(p.showSection("Menu")))("rotate",p.rotateIcon(p.showSection("Menu"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(151,199,"Menu")," "),o.Bb(2),o.sc("ngIf",p.sectionErrors("Menu",g)),o.Bb(1),o.Gb("d-none",!p.showSection("Menu")),o.Bb(3),o.Uc(o.nc(157,201,"MainMenuSection")),o.Bb(2),o.sc("ngModel",g.MainMenuSection),o.Bb(3),o.sc("ngForOf",p.allMainMenuSections),o.Bb(1),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(260,w_,d,null==g.serverErrors?null:g.serverErrors.MainMenuSection)),o.Bb(3),o.Uc(o.nc(166,203,"MainMenuIcon")),o.Bb(3),o.sc("ngForOf",p.allMainMenuIcons),o.Bb(1),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.wc(263,hA,null==g.serverErrors?null:g.serverErrors.MainMenuIcon)),o.Bb(3),o.Uc(o.nc(173,205,"MainMenuSortKey")),o.Bb(2),o.sc("ngModel",g.MainMenuSortKey)("ngModelOptions",o.vc(265,y_)),o.Bb(2),o.sc("ngTemplateOutlet",h)("ngTemplateOutletContext",o.xc(266,w_,b,null==g.serverErrors?null:g.serverErrors.MainMenuSortKey)),o.Bb(5),o.Uc(o.nc(182,207,"Preview")),o.Bb(2),o.sc("ngIf",!m),o.Bb(2),o.sc("previewDefinition",p.getForClient(g))}}function IA(e,t){if(1&e&&o.Rc(0,vA,186,269,"div",9),2&e){const e=t.isEdit,n=o.lc();o.sc("ngIf",n.watchIsEdit(e))}}function yA(e,t){if(1&e&&(o.Vb(0,"span",123),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function wA(e,t){if(1&e&&(o.Tb(0),o.Rc(1,yA,2,1,"span",122),o.Sb()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(1),o.sc("ngForOf",i.errors(t,n))}}function CA(e,t){if(1&e&&o.Rc(0,wA,2,1,"ng-container",104),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}function MA(e,t){1&e&&o.Rb(0)}function VA(e,t){1&e&&o.Rb(0)}function TA(e,t){1&e&&o.Rb(0)}function EA(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",130),o.Vb(1,"label",141),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",142,143),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reportDefinitionToEdit.Name2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onItemToEditChange()})),o.Ub(),o.Rc(6,TA,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(13);o.Gb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+t.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.reportDefinitionToEdit.Name2)("ngModelOptions",o.vc(9,y_)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,w_,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2))}}function xA(e,t){1&e&&o.Rb(0)}function UA(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",130),o.Vb(1,"label",144),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",145,146),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reportDefinitionToEdit.Name3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onItemToEditChange()})),o.Ub(),o.Rc(6,xA,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(13);o.Gb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+t.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.reportDefinitionToEdit.Name3)("ngModelOptions",o.vc(9,y_)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,w_,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3))}}function RA(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",124),o.Vb(1,"h5",125),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",126),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",127),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",128),o.Vb(8,"div",129),o.Vb(9,"div",130),o.Vb(10,"label",51),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"t-report-definitions-picker",131,132),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().reportDefinitionToEdit.ReportDefinitionId=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(15,MA,1,0,"ng-container",25),o.Ub(),o.Vb(16,"div",130),o.Vb(17,"label",133),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"input",134,135),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().reportDefinitionToEdit.Name=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(22,VA,1,0,"ng-container",25),o.Ub(),o.Rc(23,EA,7,13,"div",136),o.Rc(24,UA,7,13,"div",136),o.Ub(),o.Ub(),o.Vb(25,"div",137),o.Vb(26,"button",138),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(27,"fa-icon",139),o.Tc(28),o.mc(29,"translate"),o.Ub(),o.Vb(30,"button",140),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(31,"fa-icon",113),o.Tc(32),o.mc(33,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(14),t=o.Fc(21),n=o.lc(),i=o.Fc(13);o.Bb(2),o.Vc(" ",o.nc(3,19,"Configure")," "),o.Bb(7),o.Gb("is-invalid",n.invalid(e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),o.Bb(2),o.Uc(o.nc(12,21,"Definition_ReportDefinition")),o.Bb(2),o.sc("ngModel",n.reportDefinitionToEdit.ReportDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(29,w_,e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),o.Bb(1),o.Gb("is-invalid",n.invalid(t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),o.Bb(2),o.Uc(o.nc(19,23,"Name")+n.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",n.reportDefinitionToEdit.Name)("ngModelOptions",o.vc(32,y_)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(33,w_,t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),o.Bb(2),o.sc("disabled",!n.reportDefinitionToEdit.ReportDefinitionId),o.Bb(2),o.Vc(" \xa0",o.nc(29,25,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(33,27,"Cancel")," ")}}function DA(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",124),o.Vb(1,"h5",125),o.Tc(2),o.Ub(),o.Vb(3,"button",126),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(4,"span",127),o.Tc(5,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(6,"div",128),o.Vb(7,"div",147),o.Vb(8,"textarea",148,149),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().script=t}))("keydown",(function(t){o.Ic(e);const n=o.Fc(10);return o.lc().onScriptKeydown(n,t)})),o.Tc(11,"                "),o.Ub(),o.Ub(),o.Ub(),o.Vb(12,"div",137),o.Vb(13,"button",150),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(14,"fa-icon",139),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Vb(17,"button",150),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(18,"fa-icon",113),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Vc(" ",e.scriptModalLabel()," "),o.Bb(6),o.sc("ngModel",e.script),o.Bb(7),o.Vc(" \xa0",o.nc(16,4,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(20,6,"Cancel")," ")}}const BA=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},SA=function(e,t,n){return[e,t,n]};let kA=(()=>{class e extends gn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.resourceDefinitionsApi=this.api.resourceDefinitionsApi(this.notifyDestruct$),this.expand="DefaultUnit,DefaultUnitMassUnit,ReportDefinitions.ReportDefinition,\nLookup1Definition,Lookup2Definition,Lookup3Definition,Lookup4Definition,ParticipantDefinition",this.create=()=>{const e={};this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText);for(const t of this.allVisibilityProps())e[t]="None";return e.UnitCardinality="None",e.ReportDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.savePreprocessing=e=>{for(const t of this.allVisibilityProps())if("None"===e[t]){const n=t.substr(0,t.length-"Visibility".length);delete e[n+"Label"],delete e[n+"Label2"],delete e[n+"Label3"],delete e[n+"DefinitionId"]}},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this._sections={Title:!0,Fields:!1,Scripts:!1,Reports:!1,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.resourceDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.resourceDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.resourceDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("resource-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.resourceDefinitionsApi=this.api.resourceDefinitionsApi(this.notifyDestruct$)}allVisibilityProps(){const e=Object(l_.a)(this.workspace,this.translate).properties,t=[];for(const n of Object.keys(e))n.endsWith("Visibility")&&t.push(n);return t}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(fI.b)(e.serverErrors[t]))}sectionErrors(e,t){return"Title"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.Code)||Object(fI.b)(t.serverErrors.TitleSingular)||Object(fI.b)(t.serverErrors.TitleSingular2)||Object(fI.b)(t.serverErrors.TitleSingular3)||Object(fI.b)(t.serverErrors.TitlePlural)||Object(fI.b)(t.serverErrors.TitlePlural2)||Object(fI.b)(t.serverErrors.TitlePlural3)):"Fields"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.CurrencyVisibility)||Object(fI.b)(t.serverErrors.CenterVisibility)||Object(fI.b)(t.serverErrors.ImageVisibility)||Object(fI.b)(t.serverErrors.DescriptionVisibility)||Object(fI.b)(t.serverErrors.LocationVisibility)||Object(fI.b)(t.serverErrors.FromDateLabel)||Object(fI.b)(t.serverErrors.FromDateLabel2)||Object(fI.b)(t.serverErrors.FromDateLabel3)||Object(fI.b)(t.serverErrors.FromDateVisibility)||Object(fI.b)(t.serverErrors.ToDateLabel)||Object(fI.b)(t.serverErrors.ToDateLabel2)||Object(fI.b)(t.serverErrors.ToDateLabel3)||Object(fI.b)(t.serverErrors.ToDateVisibility)||Object(fI.b)(t.serverErrors.Decimal1Label)||Object(fI.b)(t.serverErrors.Decimal1Label2)||Object(fI.b)(t.serverErrors.Decimal1Label3)||Object(fI.b)(t.serverErrors.Decimal1Visibility)||Object(fI.b)(t.serverErrors.Decimal2Label)||Object(fI.b)(t.serverErrors.Decimal2Label2)||Object(fI.b)(t.serverErrors.Decimal2Label3)||Object(fI.b)(t.serverErrors.Decimal2Visibility)||Object(fI.b)(t.serverErrors.Int1Label)||Object(fI.b)(t.serverErrors.Int1Label2)||Object(fI.b)(t.serverErrors.Int1Label3)||Object(fI.b)(t.serverErrors.Int1Visibility)||Object(fI.b)(t.serverErrors.Int2Label)||Object(fI.b)(t.serverErrors.Int2Label2)||Object(fI.b)(t.serverErrors.Int2Label3)||Object(fI.b)(t.serverErrors.Int2Visibility)||Object(fI.b)(t.serverErrors.Lookup1Label)||Object(fI.b)(t.serverErrors.Lookup1Label2)||Object(fI.b)(t.serverErrors.Lookup1Label3)||Object(fI.b)(t.serverErrors.Lookup1Visibility)||Object(fI.b)(t.serverErrors.Lookup1DefinitionId)||Object(fI.b)(t.serverErrors.Lookup2Label)||Object(fI.b)(t.serverErrors.Lookup2Label2)||Object(fI.b)(t.serverErrors.Lookup2Label3)||Object(fI.b)(t.serverErrors.Lookup2Visibility)||Object(fI.b)(t.serverErrors.Lookup2DefinitionId)||Object(fI.b)(t.serverErrors.Lookup3Label)||Object(fI.b)(t.serverErrors.Lookup3Label2)||Object(fI.b)(t.serverErrors.Lookup3Label3)||Object(fI.b)(t.serverErrors.Lookup3Visibility)||Object(fI.b)(t.serverErrors.Lookup3DefinitionId)||Object(fI.b)(t.serverErrors.Lookup4Label)||Object(fI.b)(t.serverErrors.Lookup4Label2)||Object(fI.b)(t.serverErrors.Lookup4Label3)||Object(fI.b)(t.serverErrors.Lookup4Visibility)||Object(fI.b)(t.serverErrors.Lookup4DefinitionId)||Object(fI.b)(t.serverErrors.Text1Label)||Object(fI.b)(t.serverErrors.Text1Label2)||Object(fI.b)(t.serverErrors.Text1Label3)||Object(fI.b)(t.serverErrors.Text1Visibility)||Object(fI.b)(t.serverErrors.Text2Label)||Object(fI.b)(t.serverErrors.Text2Label2)||Object(fI.b)(t.serverErrors.Text2Label3)||Object(fI.b)(t.serverErrors.Text2Visibility)||Object(fI.b)(t.serverErrors.IdentifierLabel)||Object(fI.b)(t.serverErrors.IdentifierLabel2)||Object(fI.b)(t.serverErrors.IdentifierLabel3)||Object(fI.b)(t.serverErrors.IdentifierVisibility)||Object(fI.b)(t.serverErrors.ReorderLevelVisibility)||Object(fI.b)(t.serverErrors.EconomicOrderQuantityVisibility)||Object(fI.b)(t.serverErrors.UnitCardinality)||Object(fI.b)(t.serverErrors.DefaultUnitId)||Object(fI.b)(t.serverErrors.UnitMassVisibility)||Object(fI.b)(t.serverErrors.DefaultUnitMassUnitId)||Object(fI.b)(t.serverErrors.MonetaryValueVisibility)||!1):"Scripts"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.PreprocessScript)||Object(fI.b)(t.serverErrors.ValidateScript)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(fI.b)(t.serverErrors.MainMenuIcon)||Object(fI.b)(t.serverErrors.MainMenuSection)||Object(fI.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}serverErrors(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){if(!e)return null;if(this._currentModel!==e||this._currentModelModified){this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e);for(const e of this.allVisibilityProps())"None"===this._getForClientResult[e]&&delete this._getForClientResult[e];"None"===this._getForClientResult.UnitCardinality&&delete this._getForClientResult.UnitCardinality}return this._getForClientResult}get resourceDefinitionTypeChoices(){if(!this._resourceDefinitionTypeChoices){const e=Object(l_.a)(this.workspace,this.translate).properties.ResourceDefinitionType;this._resourceDefinitionTypeChoices=Object(wi.c)(e)}return this._resourceDefinitionTypeChoices}get visibilityChoices(){return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:()=>this.translate.instant("Visibility_None")},{value:"Optional",name:()=>this.translate.instant("Visibility_Optional")},{value:"Required",name:()=>this.translate.instant("Visibility_Required")}]),this._visibilityChoices}get cardinalityChoices(){return this._cardinalityChoices||(this._cardinalityChoices=[{value:"None",name:()=>this.translate.instant("Cardinality_None")},{value:"Single",name:()=>this.translate.instant("Cardinality_Single")},{value:"Multiple",name:()=>this.translate.instant("Cardinality_Multiple")}]),this._cardinalityChoices}isVisible(e){return"Optional"===e||"Required"===e}isCardinalityVisible(e){return"Single"===e||"Multiple"===e}get allMainMenuSections(){const e=Object(l_.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(wi.c)(e)}get allMainMenuIcons(){const e=Object(l_.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(wi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateReportDefinition(e){const t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&e.ReportDefinitions.push(t)},e=>{})}onConfigureReportDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=n,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.ReportDefinitions[e]=n)},e=>{})}onDeleteReportDefinition(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}rowDrop(e,t){Object(W.i)(t,e.previousIndex,e.currentIndex)}onEditScript(e,t){this.script=t[e],this.scriptModalLabel=()=>this.translate.instant("Definition_"+e),this.modalService.open(this.scriptModal,{windowClass:"t-dark-theme t-details-modal"}).result.then(n=>{n&&(t[e]=this.script)},e=>{})}onScriptKeydown(e,t){Object(N.p)(e,t,e=>this.script=e)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-resource-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(a_,!0),o.Oc(u_,!0)),2&e&&(o.Ec(n=o.ic())&&(t.reportDefinitionModal=n.first),o.Ec(n=o.ic())&&(t.scriptModal=n.first))},features:[o.yb],decls:18,vars:36,consts:[["collection","ResourceDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["scriptModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","resourcedefinitointype",1,"small"],["id","resourcedefinitointype","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["resourcedefinitointype","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","unitcardinality",1,"small"],["id","unitcardinality",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["unitcardinality","ngModel"],["unlabeledProp",""],["labeledProp",""],["definitionedProp",""],["for","preprocessscript",1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","expand"],["rows","6","id","preprocessscript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["preprocessscript","ngModel"],["for","validatescript",1,"small"],["rows","6","id","validatescript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["validatescript","ngModel"],[1,"small"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],[3,"value"],["for","defaultvatrate",1,"small"],["theme","dark","id","defaultvatrate",3,"ngModel","minDecimalPlaces","maxDecimalPlaces","isPercentage","ngModelChange"],["defaultvatrate","ngModel"],["for","defaultunit",1,"small"],["theme","dark","id","defaultunit",3,"ngModel","ngModelChange"],["defaultunit","ngModel"],["for","defaultunitmassunit",1,"small"],["theme","dark","id","defaultunitmassunit",3,"ngModel","ngModelChange"],["defaultunitmassunit","ngModel"],["for","participantdefinitionId",1,"small"],["theme","dark",3,"ngModel","ngModelChange"],["defId","ngModel"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[4,"ngIf"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"id","ngModel","ngModelOptions","ngModelChange"],["label","ngModel"],["label2","ngModel"],["label3","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"],[1,"row","h-100","t-much-less-dark"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","ngbAutoFocus","",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["scriptnmodel","ngModel","pstextarea",""],[1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,d_,2,3,"ng-template",null,1,o.Sc),o.Rc(4,b_,2,3,"ng-template",null,2,o.Sc),o.Rc(6,f_,2,3,"ng-template",null,3,o.Sc),o.Rc(8,m_,3,3,"ng-template",null,4,o.Sc),o.Rc(10,IA,1,1,"ng-template",null,5,o.Sc),o.Rc(12,CA,1,1,"ng-template",null,6,o.Sc),o.Rc(14,RA,34,36,"ng-template",null,7,o.Sc),o.Rc(16,DA,21,8,"ng-template",null,8,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"ResourceDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",r)("actions",o.yc(32,SA,o.Ac(14,BA,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(20,BA,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(26,BA,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[j.a,x.u,ee.b,te.c,te.u,te.k,te.n,x.B,te.v,x.t,W.f,te.p,te.x,te.q,XC,In,wy,lV,OS,W.b,W.d,hB],pipes:[Q.d],encapsulation:2}),e})();function OA(e,t){if(1&e&&(o.Vb(0,"div",11),o.Vb(1,"span",12),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",13),o.Vb(4,"div",14),o.Qb(5,"t-auto-cell",15),o.Ub(),o.Qb(6,"t-auto-cell",16),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("ResourceDefinition",e,"TitleSingular")),o.Bb(3),o.sc("entity",n.c[e]),o.Bb(1),o.sc("entity",n.c[e])}}function _A(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"ResourceDefinition"),"\n")}function LA(e,t){if(1&e&&(o.Vb(0,"span",17),o.Qb(1,"t-auto-cell",18),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function AA(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SavedByMe")," ")}function FA(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Hidden")," ")}function PA(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Visible")," ")}function NA(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Archived")," ")}function jA(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function WA(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function $A(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}const qA=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},QA=function(e,t,n){return[e,t,n]},HA=function(e){return{template:e,expression:"SavedById eq me"}},GA=function(e){return[e]},zA=function(e){return{template:e,expression:"State eq 'Hidden'"}},JA=function(e){return{template:e,expression:"State eq 'Visible'"}},KA=function(e){return{template:e,expression:"State eq 'Archived'"}},YA=function(e,t){return{SavedBy:e,State:t}};let XA=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.resourcesDefinitionsApi=this.api.resourceDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.resourcesDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("ResourceDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.resourcesDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("ResourceDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.resourcesDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("ResourceDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("resource-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.resourcesDefinitionsApi=this.api.resourceDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.ResourceDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-resource-definitions-master"]],features:[o.yb],decls:22,vars:51,consts:[["collection","ResourceDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","ResourceDefinition","path","Code",3,"entity"],["collection","ResourceDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","ResourceDefinition",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,OA,7,3,"ng-template",null,1,o.Sc),o.Rc(4,_A,2,3,"ng-template",null,2,o.Sc),o.Rc(6,LA,2,1,"ng-template",null,3,o.Sc),o.Rc(8,AA,2,3,"ng-template",null,4,o.Sc),o.Rc(10,FA,2,3,"ng-template",null,5,o.Sc),o.Rc(12,PA,2,3,"ng-template",null,6,o.Sc),o.Rc(14,NA,2,3,"ng-template",null,7,o.Sc),o.Rc(16,jA,2,3,"ng-template",null,8,o.Sc),o.Rc(18,WA,2,3,"ng-template",null,9,o.Sc),o.Rc(20,$A,2,3,"ng-template",null,10,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17),u=o.Fc(19),d=o.Fc(21);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"ResourceDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.yc(30,QA,o.Ac(12,qA,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(18,qA,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(24,qA,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",o.xc(48,YA,o.wc(36,GA,o.wc(34,HA,c)),o.yc(44,QA,o.wc(38,zA,r),o.wc(40,JA,s),o.wc(42,KA,l))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function ZA(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-resource-definitions-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function eF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-resource-definitions-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let tF=(()=>{class e extends As{}return e.\u0275fac=function(t){return nF(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-resource-definitions-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","ResourceDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,ZA,2,3,"ng-template",null,1,o.Sc),o.Rc(3,eF,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,kA,XA],encapsulation:2}),e})();const nF=o.Xb(tF);function iF(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function oF(e,t){if(1&e&&(o.Vb(0,"h2",29),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const cF=function(){return{updateOn:"blur"}};function rF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,cF))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function sF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,cF))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function lF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,cF))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function aF(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function uF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,cF))}}function dF(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,aF,2,1,"div",11),o.Rc(3,uF,1,3,"t-text-editor",13),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function bF(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function fF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,cF))}}function mF(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,bF,2,1,"div",11),o.Rc(3,fF,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function gF(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function pF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,cF))}}function hF(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,gF,2,1,"div",11),o.Rc(3,pF,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function vF(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function IF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",35),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("disabled",e.IsSystem)("ngModel",e.Code)("ngModelOptions",o.vc(3,cF))}}function yF(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Concept)}}function wF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Concept=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Concept)("ngModelOptions",o.vc(2,cF))}}function CF(e,t){if(1&e&&(o.Vb(0,"t-restricted",36),o.Vb(1,"t-view-link",37),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Parent),o.Bb(1),o.sc("itemId",null==e?null:e.ParentId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("AccountType",null==e?null:e.ParentId,"Name"))}}function MF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-types-picker",38),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ParentId=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.ParentId)}}function VF(e,t){if(1&e&&(o.Vb(0,"t-restricted",36),o.Vb(1,"t-view-link",40),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CustodianDefinition),o.Bb(1),o.sc("itemId",null==e?null:e.CustodianDefinitionId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("RelationDefinition",null==e?null:e.CustodianDefinitionId,"TitleSingular"))}}function TF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relation-definitions-picker",41),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CustodianDefinitionId=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.CustodianDefinitionId)}}function EF(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,VF,3,3,"t-restricted",14),o.Rc(3,TF,1,1,"t-relation-definitions-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"AccountType_CustodianDefinition"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodianDefinitionId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function xF(e,t){if(1&e&&(o.Vb(0,"t-restricted",36),o.Vb(1,"t-view-link",40),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ParticipantDefinition),o.Bb(1),o.sc("itemId",null==e?null:e.ParticipantDefinitionId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("RelationDefinition",null==e?null:e.ParticipantDefinitionId,"TitleSingular"))}}function UF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relation-definitions-picker",41),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ParticipantDefinitionId=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.ParticipantDefinitionId)}}function RF(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,xF,3,3,"t-restricted",14),o.Rc(3,UF,1,1,"t-relation-definitions-picker",39),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"AccountType_ParticipantDefinition"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ParticipantDefinitionId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function DF(e,t){if(1&e&&(o.Vb(0,"t-restricted",36),o.Vb(1,"t-view-link",42),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.EntryTypeParent),o.Bb(1),o.sc("itemId",null==e?null:e.EntryTypeParentId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("EntryType",null==e?null:e.EntryTypeParentId,"Name"))}}function BF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",38),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.EntryTypeParentId=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.EntryTypeParentId)}}function SF(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,DF,3,3,"t-restricted",14),o.Rc(3,BF,1,1,"t-entry-types-picker",15),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"AccountType_EntryTypeParent"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.EntryTypeParentId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function kF(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(o.nc(2,1,null!=e&&e.IsAssignable?"Yes":"No"))}}function OF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",43),o.Vb(1,"input",44),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.IsAssignable=t})),o.Ub(),o.Vb(2,"label",45),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc().model;o.Bb(1),o.sc("ngModel",e.IsAssignable)}}function _F(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(o.nc(2,1,null!=e&&e.StandardAndPure?"Yes":"No"))}}function LF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",43),o.Vb(1,"input",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.StandardAndPure=t})),o.Ub(),o.Vb(2,"label",47),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc().model;o.Bb(1),o.sc("ngModel",e.StandardAndPure)}}function AF(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(o.nc(2,1,null!=e&&e.IsMonetary?"Yes":"No"))}}function FF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",43),o.Vb(1,"input",48),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.IsMonetary=t})),o.Ub(),o.Vb(2,"label",49),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc().model;o.Bb(1),o.sc("ngModel",e.IsMonetary)}}function PF(e,t){if(1&e&&(o.Vb(0,"t-form-group",50),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",51),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(2),o.sc("entity",e)}}function NF(e,t){if(1&e&&(o.Vb(0,"t-form-group",50),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsSystem")),o.Bb(3),o.Uc(o.nc(4,4,e?e.IsSystem?"Yes":"No":""))}}function jF(e,t){1&e&&(o.Vb(0,"span",52),o.Qb(1,"fa-icon",53),o.Tc(2,"\xa0 "),o.Ub())}function WF(e,t){if(1&e&&(o.Vb(0,"div",56),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Description)}}function $F(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description)("ngModelOptions",o.vc(2,cF))}}function qF(e,t){if(1&e&&(o.Vb(0,"div",56),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description2)}}function QF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Description2=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.Description2)("ngModelOptions",o.vc(2,cF))}}function HF(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,qF,2,1,"div",55),o.Rc(3,QF,1,3,"t-multiline-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function GF(e,t){if(1&e&&(o.Vb(0,"div",56),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Description3)}}function zF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Description3=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.Description3)("ngModelOptions",o.vc(2,cF))}}function JF(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,GF,2,1,"div",55),o.Rc(3,zF,1,3,"t-multiline-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function KF(e,t){if(1&e&&(o.Vb(0,"div",54),o.Vb(1,"t-form-group",10),o.mc(2,"translate"),o.Rc(3,WF,2,1,"div",55),o.Rc(4,$F,1,3,"t-multiline-editor",33),o.Ub(),o.Rc(5,HF,4,6,"t-form-group",9),o.Rc(6,JF,4,6,"t-form-group",9),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.Bb(1),o.sc("label",o.nc(2,6,"Description")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId)}}function YF(e,t){1&e&&(o.Vb(0,"span",52),o.Qb(1,"fa-icon",53),o.Tc(2,"\xa0 "),o.Ub())}function XF(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Time1Label)}}function ZF(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Time1Label=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Time1Label)("ngModelOptions",o.vc(2,cF))}}function eP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Time1Label2)}}function tP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Time1Label2=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.Time1Label2)("ngModelOptions",o.vc(2,cF))}}function nP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,eP,2,1,"div",11),o.Rc(3,tP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_Time1Label")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time1Label2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function iP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Time1Label3)}}function oP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Time1Label3=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.Time1Label3)("ngModelOptions",o.vc(2,cF))}}function cP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,iP,2,1,"div",11),o.Rc(3,oP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_Time1Label")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time1Label3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function rP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Time2Label)}}function sP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Time2Label=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Time2Label)("ngModelOptions",o.vc(2,cF))}}function lP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Time2Label2)}}function aP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Time2Label2=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.Time2Label2)("ngModelOptions",o.vc(2,cF))}}function uP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,lP,2,1,"div",11),o.Rc(3,aP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_Time2Label")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time2Label2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function dP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.Time2Label3)}}function bP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Time2Label3=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.Time2Label3)("ngModelOptions",o.vc(2,cF))}}function fP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,dP,2,1,"div",11),o.Rc(3,bP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_Time2Label")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time2Label3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function mP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.ExternalReferenceLabel)}}function gP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ExternalReferenceLabel=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.ExternalReferenceLabel)("ngModelOptions",o.vc(2,cF))}}function pP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.ExternalReferenceLabel2)}}function hP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.ExternalReferenceLabel2=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.ExternalReferenceLabel2)("ngModelOptions",o.vc(2,cF))}}function vP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,pP,2,1,"div",11),o.Rc(3,hP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_ExternalReferenceLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReferenceLabel2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function IP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.ExternalReferenceLabel3)}}function yP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.ExternalReferenceLabel3=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.ExternalReferenceLabel3)("ngModelOptions",o.vc(2,cF))}}function wP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,IP,2,1,"div",11),o.Rc(3,yP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_ExternalReferenceLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReferenceLabel3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function CP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.InternalReferenceLabel)}}function MP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.InternalReferenceLabel=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.InternalReferenceLabel)("ngModelOptions",o.vc(2,cF))}}function VP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.InternalReferenceLabel2)}}function TP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.InternalReferenceLabel2=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.InternalReferenceLabel2)("ngModelOptions",o.vc(2,cF))}}function EP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,VP,2,1,"div",11),o.Rc(3,TP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_InternalReferenceLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.InternalReferenceLabel2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function xP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.InternalReferenceLabel3)}}function UP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.InternalReferenceLabel3=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.InternalReferenceLabel3)("ngModelOptions",o.vc(2,cF))}}function RP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,xP,2,1,"div",11),o.Rc(3,UP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_InternalReferenceLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.InternalReferenceLabel3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function DP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.NotedAgentNameLabel)}}function BP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.NotedAgentNameLabel=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.NotedAgentNameLabel)("ngModelOptions",o.vc(2,cF))}}function SP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.NotedAgentNameLabel2)}}function kP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.NotedAgentNameLabel2=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.NotedAgentNameLabel2)("ngModelOptions",o.vc(2,cF))}}function OP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,SP,2,1,"div",11),o.Rc(3,kP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_NotedAgentNameLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAgentNameLabel2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function _P(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.NotedAgentNameLabel3)}}function LP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.NotedAgentNameLabel3=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.NotedAgentNameLabel3)("ngModelOptions",o.vc(2,cF))}}function AP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,_P,2,1,"div",11),o.Rc(3,LP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_NotedAgentNameLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAgentNameLabel3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function FP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.NotedAmountLabel)}}function PP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.NotedAmountLabel=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.NotedAmountLabel)("ngModelOptions",o.vc(2,cF))}}function NP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.NotedAmountLabel2)}}function jP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.NotedAmountLabel2=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.NotedAmountLabel2)("ngModelOptions",o.vc(2,cF))}}function WP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,NP,2,1,"div",11),o.Rc(3,jP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_NotedAmountLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAmountLabel2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function $P(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.NotedAmountLabel3)}}function qP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.NotedAmountLabel3=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.NotedAmountLabel3)("ngModelOptions",o.vc(2,cF))}}function QP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,$P,2,1,"div",11),o.Rc(3,qP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_NotedAmountLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAmountLabel3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function HP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.NotedDateLabel)}}function GP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.NotedDateLabel=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.NotedDateLabel)("ngModelOptions",o.vc(2,cF))}}function zP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.NotedDateLabel2)}}function JP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.NotedDateLabel2=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.NotedDateLabel2)("ngModelOptions",o.vc(2,cF))}}function KP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,zP,2,1,"div",11),o.Rc(3,JP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_NotedDateLabel")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedDateLabel2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function YP(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(null==e?null:e.NotedDateLabel3)}}function XP(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.NotedDateLabel3=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.NotedDateLabel3)("ngModelOptions",o.vc(2,cF))}}function ZP(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,YP,2,1,"div",11),o.Rc(3,XP,1,3,"t-text-editor",33),o.Ub()),2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"AccountType_NotedDateLabel")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedDateLabel3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function eN(e,t){if(1&e&&(o.Vb(0,"div",54),o.Vb(1,"t-form-group",10),o.mc(2,"translate"),o.Rc(3,XF,2,1,"div",11),o.Rc(4,ZF,1,3,"t-text-editor",33),o.Ub(),o.Rc(5,nP,4,6,"t-form-group",9),o.Rc(6,cP,4,6,"t-form-group",9),o.Vb(7,"t-form-group",10),o.mc(8,"translate"),o.Rc(9,rP,2,1,"div",11),o.Rc(10,sP,1,3,"t-text-editor",33),o.Ub(),o.Rc(11,uP,4,6,"t-form-group",9),o.Rc(12,fP,4,6,"t-form-group",9),o.Vb(13,"t-form-group",10),o.mc(14,"translate"),o.Rc(15,mP,2,1,"div",11),o.Rc(16,gP,1,3,"t-text-editor",33),o.Ub(),o.Rc(17,vP,4,6,"t-form-group",9),o.Rc(18,wP,4,6,"t-form-group",9),o.Vb(19,"t-form-group",10),o.mc(20,"translate"),o.Rc(21,CP,2,1,"div",11),o.Rc(22,MP,1,3,"t-text-editor",33),o.Ub(),o.Rc(23,EP,4,6,"t-form-group",9),o.Rc(24,RP,4,6,"t-form-group",9),o.Vb(25,"t-form-group",10),o.mc(26,"translate"),o.Rc(27,DP,2,1,"div",11),o.Rc(28,BP,1,3,"t-text-editor",33),o.Ub(),o.Rc(29,OP,4,6,"t-form-group",9),o.Rc(30,AP,4,6,"t-form-group",9),o.Vb(31,"t-form-group",10),o.mc(32,"translate"),o.Rc(33,FP,2,1,"div",11),o.Rc(34,PP,1,3,"t-text-editor",33),o.Ub(),o.Rc(35,WP,4,6,"t-form-group",9),o.Rc(36,QP,4,6,"t-form-group",9),o.Vb(37,"t-form-group",10),o.mc(38,"translate"),o.Rc(39,HP,2,1,"div",11),o.Rc(40,GP,1,3,"t-text-editor",33),o.Ub(),o.Rc(41,KP,4,6,"t-form-group",9),o.Rc(42,ZP,4,6,"t-form-group",9),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.Bb(1),o.sc("label",o.nc(2,42,"AccountType_Time1Label")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time1Label),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(8,44,"AccountType_Time2Label")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time2Label),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(14,46,"AccountType_ExternalReferenceLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReferenceLabel),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(20,48,"AccountType_InternalReferenceLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.InternalReferenceLabel),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(26,50,"AccountType_NotedAgentNameLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAgentNameLabel),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(32,52,"AccountType_NotedAmountLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedAmountLabel),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(38,54,"AccountType_NotedDateLabel")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.NotedDateLabel),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId)}}function tN(e,t){1&e&&(o.Vb(0,"span",52),o.Qb(1,"fa-icon",53),o.Tc(2,"\xa0 "),o.Ub())}function nN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Account_CustodyDefinition"))}function iN(e,t){if(1&e&&(o.Vb(0,"t-view-link",63),o.Tc(1),o.Ub()),2&e){const e=o.lc().item,t=o.lc(3);o.sc("itemId",null==e?null:e.CustodyDefinitionId),o.Bb(1),o.Vc(" ",t.getMultilingualValue(t.ws.CustodyDefinition[e.CustodyDefinitionId],"TitleSingular",t.ws)," ")}}function oN(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custody-definitions-picker",64),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.CustodyDefinitionId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item,t=o.lc(2).model,n=o.lc();o.sc("ngModel",e.CustodyDefinitionId)("required",!e.PH)("filter",n.custodyDefinitionFilter(t))}}function cN(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",60),o.Rc(1,iN,2,2,"t-view-link",61),o.Rc(2,oN,1,3,"t-custody-definitions-picker",62),o.Ub()),2&e){const e=t.item,n=o.lc(2).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.CustodyDefinitionId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}const rN=function(){return["Definition"]},sN=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},lN=function(e){return{Definition:e}};function aN(e,t){if(1&e&&(o.Qb(0,"t-table",57),o.Rc(1,nN,2,3,"ng-template",null,58,o.Sc),o.Rc(3,cN,3,3,"ng-template",null,59,o.Sc)),2&e){const e=o.Fc(2),t=o.Fc(4),n=o.lc(),i=n.model,c=n.isEdit;o.sc("dataSource",null==i?null:i.CustodyDefinitions)("isEdit",c)("columnPaths",o.vc(4,rN))("columnTemplates",o.wc(8,lN,o.xc(5,sN,e,t)))}}function uN(e,t){1&e&&(o.Vb(0,"span",52),o.Qb(1,"fa-icon",53),o.Tc(2,"\xa0 "),o.Ub())}function dN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Account_ResourceDefinition"))}function bN(e,t){if(1&e&&(o.Vb(0,"t-view-link",66),o.Tc(1),o.Ub()),2&e){const e=o.lc().item,t=o.lc(3);o.sc("itemId",null==e?null:e.ResourceDefinitionId),o.Bb(1),o.Vc(" ",t.getMultilingualValue(t.ws.ResourceDefinition[e.ResourceDefinitionId],"TitleSingular",t.ws)," ")}}function fN(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resource-definitions-picker",64),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.ResourceDefinitionId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item,t=o.lc(2).model,n=o.lc();o.sc("ngModel",e.ResourceDefinitionId)("required",!e.PH)("filter",n.resourceDefinitionFilter(t))}}function mN(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",60),o.Rc(1,bN,2,2,"t-view-link",65),o.Rc(2,fN,1,3,"t-resource-definitions-picker",62),o.Ub()),2&e){const e=t.item,n=o.lc(2).isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.ResourceDefinitionId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function gN(e,t){if(1&e&&(o.Qb(0,"t-table",57),o.Rc(1,dN,2,3,"ng-template",null,58,o.Sc),o.Rc(3,mN,3,3,"ng-template",null,59,o.Sc)),2&e){const e=o.Fc(2),t=o.Fc(4),n=o.lc(),i=n.model,c=n.isEdit;o.sc("dataSource",null==i?null:i.ResourceDefinitions)("isEdit",c)("columnPaths",o.vc(4,rN))("columnTemplates",o.wc(8,lN,o.xc(5,sN,e,t)))}}function pN(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,oF,2,1,"h2",6),o.Rc(2,rF,2,7,"t-text-editor",7),o.Rc(3,sF,2,7,"t-text-editor",8),o.Rc(4,lF,2,7,"t-text-editor",8),o.Ub(),o.Rc(5,dF,4,6,"t-form-group",9),o.Rc(6,mF,4,6,"t-form-group",9),o.Rc(7,hF,4,6,"t-form-group",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Rc(10,vF,2,1,"span",11),o.Rc(11,IF,1,4,"t-text-editor",12),o.Ub(),o.Vb(12,"t-form-group",10),o.mc(13,"translate"),o.Rc(14,yF,2,1,"span",11),o.Rc(15,wF,1,3,"t-text-editor",13),o.Ub(),o.Vb(16,"t-form-group",10),o.mc(17,"translate"),o.Rc(18,CF,3,3,"t-restricted",14),o.Rc(19,MF,1,1,"t-account-types-picker",15),o.Ub(),o.Rc(20,EF,4,6,"t-form-group",9),o.Rc(21,RF,4,6,"t-form-group",9),o.Rc(22,SF,4,6,"t-form-group",9),o.Vb(23,"t-form-group",10),o.mc(24,"translate"),o.Rc(25,kF,3,3,"div",11),o.Rc(26,OF,4,1,"div",16),o.Ub(),o.Vb(27,"t-form-group",10),o.mc(28,"translate"),o.Rc(29,_F,3,3,"div",11),o.Rc(30,LF,4,1,"div",16),o.Ub(),o.Vb(31,"t-form-group",10),o.mc(32,"translate"),o.Rc(33,AF,3,3,"div",11),o.Rc(34,FF,4,1,"div",16),o.Ub(),o.Rc(35,PF,3,4,"t-form-group",17),o.Rc(36,NF,5,6,"t-form-group",17),o.Vb(37,"ul",18,19),o.Vb(39,"li",20),o.Vb(40,"a",21),o.Rc(41,jF,3,0,"span",22),o.Vb(42,"span",23),o.Tc(43),o.mc(44,"translate"),o.Ub(),o.Ub(),o.Rc(45,KF,7,8,"ng-template",24),o.Ub(),o.Vb(46,"li",25),o.Vb(47,"a",21),o.Rc(48,YF,3,0,"span",22),o.Vb(49,"span",23),o.Tc(50),o.mc(51,"translate"),o.Ub(),o.Ub(),o.Rc(52,eN,43,56,"ng-template",24),o.Ub(),o.Vb(53,"li",26),o.Vb(54,"a",21),o.Rc(55,tN,3,0,"span",22),o.Vb(56,"span",23),o.Tc(57),o.mc(58,"translate"),o.mc(59,"number"),o.Ub(),o.Ub(),o.Rc(60,aN,5,10,"ng-template",24),o.Ub(),o.Vb(61,"li",27),o.Vb(62,"a",21),o.Rc(63,uN,3,0,"span",22),o.Vb(64,"span",23),o.Tc(65),o.mc(66,"translate"),o.mc(67,"number"),o.Ub(),o.Ub(),o.Rc(68,gN,5,10,"ng-template",24),o.Ub(),o.Ub(),o.Qb(69,"div",28)),2&e){const e=t.model,n=t.isEdit,i=o.Fc(38),c=o.lc();o.sc("serverErrors",c.getMultilingualValue(null==e?null:e.serverErrors,"Name",c.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&c.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&c.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&c.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!c.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!c.ws.isSecondaryLanguage&&c.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!c.ws.isTernaryLanguage&&c.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,47,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(13,49,"AccountType_Concept"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Concept),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(17,51,"TreeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ParentId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",c.showCustodianDefinition(e)),o.Bb(1),o.sc("ngIf",c.showParticipantDefinition(e)),o.Bb(1),o.sc("ngIf",c.showEntryTypeParent(e)),o.Bb(1),o.sc("label",o.nc(24,53,"IsAssignable"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.IsAssignable),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(28,55,"AccountType_StandardAndPure"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.StandardAndPure),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(32,57,"AccountType_IsMonetary"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.IsMonetary),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("destroyOnHide",!0),o.Bb(4),o.sc("ngIf",c.showDescriptionsError(e)),o.Bb(2),o.Uc(o.nc(44,59,"Description")),o.Bb(5),o.sc("ngIf",c.showLabelsError(e)),o.Bb(2),o.Uc(o.nc(51,61,"Labels")),o.Bb(5),o.sc("ngIf",c.showCustodyDefinitionsError(e)),o.Bb(2),o.Uc(o.nc(58,63,"AccountType_CustodyDefinitions")+" ("+o.nc(59,65,null==e||null==e.CustodyDefinitions?null:e.CustodyDefinitions.length)+")"),o.Bb(6),o.sc("ngIf",c.showResourceDefinitionsError(e)),o.Bb(2),o.Uc(o.nc(66,67,"AccountType_ResourceDefinitions")+" ("+o.nc(67,69,null==e||null==e.ResourceDefinitions?null:e.ResourceDefinitions.length)+")"),o.Bb(4),o.sc("ngbNavOutlet",i)}}function hN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function vN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const IN=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},yN=function(e,t){return[e,t]};let wN=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountTypesApi=this.api.accountTypesApi(this.notifyDestruct$),this.expand="Parent,CustodianDefinition,ParticipantDefinition,EntryTypeParent,\nCustodyDefinitions.CustodyDefinition,ResourceDefinitions.ResourceDefinition",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsAssignable=!0,e.StandardAndPure=!1,e.CustodyDefinitions=[],e.ResourceDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.CustodyDefinitions&&t.CustodyDefinitions.forEach(e=>{e.Id=null}),t.ResourceDefinitions&&t.ResourceDefinitions.forEach(e=>{e.Id=null}),t.IsSystem=!1,t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.accountTypesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.accountTypesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.isInactive=e=>e&&!e.IsActive?"Error_CannotModifyInactiveItemPleaseActivate":null,this.accountTypesApi=this.api.accountTypesApi(this.notifyDestruct$)}get view(){return"account-types"}get ws(){return this.workspace.currentTenant}get masterCrumb(){const e=Object(cV.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}showCustodianDefinition(e){return!0}showParticipantDefinition(e){return!0}showEntryTypeParent(e){return!0}resourceDefinitionFilter(e){let t="State ne 'Hidden'";return e&&e.ParticipantDefinitionId&&(t+=` and (ParticipantDefinitionId eq ${e.ParticipantDefinitionId} or ParticipantDefinitionId eq null)`),t}custodyDefinitionFilter(e){let t="State ne 'Hidden'";return e&&e.CustodianDefinitionId&&(t+=` and (CustodianDefinitionId eq ${e.CustodianDefinitionId} or CustodianDefinitionId eq null)`),t}showDescriptionsError(e){return!(!e||!e.serverErrors||!e.serverErrors.Description&&!e.serverErrors.Description2&&!e.serverErrors.Description3)}showLabelsError(e){return!!e&&!!e.serverErrors&&Object.keys(e.serverErrors).some(e=>e.endsWith("Label")||e.endsWith("Label2")||e.endsWith("Label3"))}showCustodyDefinitionsError(e){return!!e&&!!e.CustodyDefinitions&&e.CustodyDefinitions.some(e=>!!e.serverErrors)}showResourceDefinitionsError(e){return!!e&&!!e.ResourceDefinitions&&e.ResourceDefinitions.some(e=>!!e.serverErrors)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-account-types-details"]],features:[o.yb],decls:9,vars:26,consts:[["collection","AccountType",3,"idString","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","isInactive","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],["ngbNav","",1,"w-100","pt-3","pt-sm-4","nav-tabs",3,"destroyOnHide"],["tabs","ngbNav"],["ngbNavItem","description"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["ngbNavItem","labels"],["ngbNavItem","custodyDefs"],["ngbNavItem","resourceDefs"],[1,"w-100",3,"ngbNavOutlet"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange"],[3,"metadata"],["link","../../account-types",3,"itemId"],[3,"ngModel","ngModelChange"],["filter","State ne 'Hidden'",3,"ngModel","ngModelChange",4,"ngIf"],["link","../../relation-definitions",3,"itemId"],["filter","State ne 'Hidden'",3,"ngModel","ngModelChange"],["link","../../entry-types",3,"itemId"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isAssignable",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isAssignable",1,"custom-control-label","t-pointer"],["type","checkbox","id","standardandpure",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","standardandpure",1,"custom-control-label","t-pointer"],["type","checkbox","id","ismonetary",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","ismonetary",1,"custom-control-label","t-pointer"],[1,"t-form-group",3,"label"],["collection","AccountType","path","IsActive",3,"entity"],[1,"text-danger"],["icon","exclamation"],[1,"row","m-0","pt-2","pt-sm-3"],["class","t-multiline",4,"ngIf"],[1,"t-multiline"],[3,"dataSource","isEdit","columnPaths","columnTemplates"],["header",""],["row",""],[1,"t-form-group",3,"serverErrors"],["link","../../custody-definitions",3,"itemId",4,"ngIf"],[3,"ngModel","required","filter","ngModelChange",4,"ngIf"],["link","../../custody-definitions",3,"itemId"],[3,"ngModel","required","filter","ngModelChange"],["link","../../resource-definitions",3,"itemId",4,"ngIf"],["link","../../resource-definitions",3,"itemId"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.Rc(1,iF,2,1,"ng-template",null,1,o.Sc),o.Rc(3,pN,70,71,"ng-template",null,2,o.Sc),o.Rc(5,hN,2,3,"ng-template",null,3,o.Sc),o.Rc(7,vN,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4),i=o.Fc(6),c=o.Fc(8);o.sc("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",e)("documentTemplate",n)("isInactive",t.isInactive)("actions",o.xc(23,yN,o.Ac(11,IN,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(17,IN,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,K.v,K.x,K.y,K.w,K.A,he.a,te.u,te.k,te.n,pn.a,ss,hM,lV,bV,te.a,ge.a,ee.b,Bb,Ps.a,Ns.a,r_,tF],pipes:[Q.d,x.g],encapsulation:2}),e})();function CN(e,t){if(1&e&&(o.Vb(0,"div",7),o.Qb(1,"t-auto-cell",8),o.Ub(),o.Vb(2,"div",9),o.Qb(3,"t-auto-cell",10),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e]),o.Bb(2),o.sc("entity",n.c[e])}}function MN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Account"),"\n")}function VN(e,t){if(1&e&&(o.Vb(0,"span",11),o.Qb(1,"t-auto-cell",12),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function TN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function EN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function xN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}const UN=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},RN=function(e,t){return[e,t]},DN=function(e){return{template:e,expression:"CreatedById eq me"}},BN=function(e){return[e]},SN=function(e){return{CreatedBy:e}};let kN=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountsApi=this.api.accountsApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.accountsApi.activate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.accountsApi.deactivate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.accountsApi=this.api.accountsApi(this.notifyDestruct$)}get view(){return"accounts"}get c(){return this.workspace.currentTenant.Account}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-accounts-master"]],features:[o.yb],decls:14,vars:31,consts:[["collection","Account","selectDefault","Classification,Classification.Code,Currency,Center","selectForTiles","Code,Name,Name2,Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between","truncate"],["collection","Account",1,"text-truncate",3,"entity"],[1,"d-flex","justify-content-between","mt-1","small"],["collection","Account","path","Code",1,"text-truncate",3,"entity"],[1,"text-truncate"],["collection","Account",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,CN,4,2,"ng-template",null,1,o.Sc),o.Rc(4,MN,2,3,"ng-template",null,2,o.Sc),o.Rc(6,VN,2,1,"ng-template",null,3,o.Sc),o.Rc(8,TN,2,3,"ng-template",null,4,o.Sc),o.Rc(10,EN,2,3,"ng-template",null,5,o.Sc),o.Rc(12,xN,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"Accounts"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(22,RN,o.zc(12,UN,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(17,UN,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.wc(29,SN,o.wc(27,BN,o.wc(25,DN,s))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();var ON=n("bllQ");function _N(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-resources-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.definitionId,i=t.idString,c=o.lc();o.Bb(1),o.sc("idString",i)("initialText",e)("definitionId",n)("additionalSelect",c.additionalSelect)}}function LN(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-resources-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.definitionId,n=t.filter,i=o.lc();o.Bb(1),o.sc("definitionId",e)("filter",n)("showCreate",i.showCreate)("additionalSelect",i.additionalSelect)}}let AN=(()=>{class e extends As{}return e.\u0275fac=function(t){return FN(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-resources-picker"]],inputs:{definitionIds:"definitionIds"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:7,consts:[["collection","Resource",3,"masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","filter","definitionIds","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"idString","initialText","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,_N,2,4,"ng-template",null,1,o.Sc),o.Rc(3,LN,2,4,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("filter",t.filter)("definitionIds",t.definitionIds)("additionalSelect",t.additionalSelect)}},directives:[Ls,XC,vy],encapsulation:2}),e})();const FN=o.Xb(AN),PN=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},NN=function(e,t){return[e,t]},jN=function(e){return{template:e,expression:"CreatedById eq me"}},WN=function(e){return[e]},$N=function(e){return{CreatedBy:e}};function qN(e,t){if(1&e&&o.Qb(0,"t-master",8),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(8),i=o.Fc(6),c=o.Fc(10),r=o.Fc(12),s=o.Fc(14);o.sc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("multiselectActions",o.xc(21,NN,o.zc(11,PN,c,e.onActivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip),o.zc(16,PN,r,e.onDeactivate,e.canActivateDeactivateItem,e.activateDeactivateTooltip)))("filterDefinition",o.wc(28,$N,o.wc(26,WN,o.wc(24,jN,s))))}}function QN(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",9),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function HN(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",16),o.Qb(2,"t-image",17),o.Ub(),o.Tc(3," \xa0\xa0\xa0 "),o.Sb()),2&e){const e=o.lc().id,t=o.lc();o.Bb(2),o.sc("src","custodies/"+t.c[e].DefinitionId+"/"+t.c[e].Id+"/image")("imageId",t.c[e].ImageId)("size",42)}}function GN(e,t){if(1&e&&(o.Vb(0,"div",10),o.Rc(1,HN,4,3,"ng-container",11),o.Vb(2,"div",12),o.Vb(3,"div",13),o.Vb(4,"span",14),o.Tc(5),o.Ub(),o.Ub(),o.Vb(6,"div",15),o.Vb(7,"span"),o.Tc(8),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("ngIf",2===(null==n.c[e].EntityMetadata?null:n.c[e].EntityMetadata.ImageId)&&n.Image_isVisible),o.Bb(4),o.Uc(n.ws.getMultilingualValue("Custody",e,"Name")),o.Bb(3),o.Uc(n.c[e].Code)}}function zN(e,t){if(1&e&&o.Tc(0),2&e){const e=o.lc();o.Vc(" ",e.summary,"\n")}}function JN(e,t){if(1&e&&(o.Vb(0,"span",18),o.Qb(1,"t-auto-cell",19),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("definitionId",n.definitionId)("entity",n.c[e])}}function KN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function YN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function XN(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}let ZN=(()=>{class e extends Ut.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=o,this.custodiesApi=this.api.custodiesApi(null,this.notifyDestruct$),this.expand="",this.onActivate=e=>this.custodiesApi.activate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.custodiesApi.deactivate(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.custodiesApi=this.api.custodiesApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{if(this.isScreenMode){const t=+e.get("definitionId");this.definitionId!==t&&(this.definitionId=t)}})}get view(){return`custodies/${this.definitionId}`}get c(){return this.workspace.currentTenant.Custody}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Custodies[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Custodies")}get summary(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitleSingular"):this.translate.instant("Custody")}get Image_isVisible(){return!!this.definition.ImageVisibility}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(i.e),o.Pb(i.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-custodies-master"]],inputs:{definitionId:"definitionId"},features:[o.yb],decls:15,vars:2,consts:[["collection","Custody","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["collection","Custody","selectDefault","Code","selectForTiles","Code,ImageId",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex"],[4,"ngIf"],[1,"flex-grow-1","d-inline-block","t-mw-0"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"border","t-dp-wrapper2"],["icon","camera",3,"src","imageId","size"],[1,"text-truncate"],["collection","Custody",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(o.Rc(0,qN,1,30,"t-master",0),o.Rc(1,QN,1,1,"ng-template",null,1,o.Sc),o.Rc(3,GN,9,3,"ng-template",null,2,o.Sc),o.Rc(5,zN,1,1,"ng-template",null,3,o.Sc),o.Rc(7,JN,2,2,"ng-template",null,4,o.Sc),o.Rc(9,KN,2,3,"ng-template",null,5,o.Sc),o.Rc(11,YN,2,3,"ng-template",null,6,o.Sc),o.Rc(13,XN,2,3,"ng-template",null,7,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,Rt.a,nn,be,ge.a],pipes:[Q.d],encapsulation:2}),e})();function ej(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-custodies-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=t.definitionId,c=o.lc();o.Bb(1),o.sc("idString",n)("initialText",e)("definitionId",i)("additionalSelect",c.additionalSelect)}}function tj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-custodies-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.definitionId,n=t.filter,i=o.lc();o.Bb(1),o.sc("definitionId",e)("filter",n)("showCreate",i.showCreate)("additionalSelect",i.additionalSelect)}}let nj=(()=>{class e extends As{}return e.\u0275fac=function(t){return ij(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-custodies-picker"]],inputs:{definitionIds:"definitionIds"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:7,consts:[["collection","Custody",3,"masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","definitionIds","filter","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"idString","initialText","definitionId","additionalSelect","cancel","saved"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,ej,2,4,"ng-template",null,1,o.Sc),o.Rc(3,tj,2,4,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("definitionIds",t.definitionIds)("filter",t.filter)("additionalSelect",t.additionalSelect)}},directives:[Ls,sE,ZN],encapsulation:2}),e})();const ij=o.Xb(nj);function oj(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function cj(e,t){if(1&e&&(o.Vb(0,"h2",18),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const rj=function(){return{updateOn:"blur"}};function sj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",19),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,rj))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function lj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,rj))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function aj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,rj))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function uj(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function dj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",22),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,rj))}}function bj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,uj,2,1,"div",11),o.Rc(3,dj,1,3,"t-text-editor",21),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function fj(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function mj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,rj))}}function gj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,fj,2,1,"div",11),o.Rc(3,mj,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function pj(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function hj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,rj))}}function vj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,pj,2,1,"div",11),o.Rc(3,hj,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Ij(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function yj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,rj))}}function wj(e,t){if(1&e&&(o.Vb(0,"t-view-link",24),o.Qb(1,"t-auto-cell",25),o.Ub()),2&e){const e=o.lc().model;o.sc("itemId",null==e?null:e.ClassificationId),o.Bb(1),o.sc("entity",e)}}function Cj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-classifications-picker",26),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ClassificationId=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.ClassificationId)}}function Mj(e,t){if(1&e&&(o.Vb(0,"t-view-link",27),o.Qb(1,"t-auto-cell",28),o.Ub()),2&e){const e=o.lc().model;o.sc("itemId",null==e?null:e.AccountTypeId),o.Bb(1),o.sc("entity",e)}}function Vj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-types-picker",29),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.AccountTypeId=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.AccountTypeId)("additionalSelect",t.accountTypeAdditionalSelect)("filter",t.filterAccountType(e))}}function Tj(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(1),o.Uc(t.formatResourceDefinitionId(e.ResourceDefinitionId))}}function Ej(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ResourceDefinitionId=t}))("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).model;return o.lc().onResourceDefinitionChange(t,n)})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ResourceDefinitionId)("choices",t.choicesResourceDefinitionId(e))}}function xj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Tj,2,1,"div",11),o.Rc(3,Ej,1,2,"t-selector",30),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Account_ResourceDefinition"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ResourceDefinitionId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Uj(e,t){if(1&e&&(o.Vb(0,"t-view-link",34),o.Qb(1,"t-auto-cell",35),o.Ub()),2&e){const e=o.lc(2).model;var n;const t="../../resources/"+(null==(n=o.lc().ws.get("Resource",null==e?null:e.ResourceId))?null:n.DefinitionId);o.sc("link",t)("itemId",null==e?null:e.ResourceId),o.Bb(1),o.sc("entity",e)}}function Rj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resources-picker",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ResourceId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ResourceId)("definitionIds",t.definitionIdsResource(e))("additionalSelect",t.resourceAdditionalSelect)}}function Dj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.Rc(1,Uj,2,3,"t-view-link",32),o.Rc(2,Rj,1,3,"t-resources-picker",33),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.labelResource(t))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ResourceId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Bj(e,t){if(1&e&&(o.Vb(0,"t-view-link",34),o.Qb(1,"t-auto-cell",38),o.Ub()),2&e){const e=o.lc(2).model;var n;const t="../../relations/"+(null==(n=o.lc().ws.get("Relation",null==e?null:e.ParticipantId))?null:n.DefinitionId);o.sc("link",t)("itemId",null==e?null:e.ParticipantId),o.Bb(1),o.sc("entity",e)}}function Sj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",39),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ParticipantId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.ParticipantId)("definitionIds",t.definitionIdsParticipant(e))}}function kj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.Rc(1,Bj,2,3,"t-view-link",32),o.Rc(2,Sj,1,2,"t-relations-picker",37),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.labelParticipant(t))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ParticipantId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Oj(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(1),o.Uc(t.formatCustodyDefinitionId(e.CustodyDefinitionId))}}function _j(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CustodyDefinitionId=t}))("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).model;return o.lc().onCustodyDefinitionChange(t,n)})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CustodyDefinitionId)("choices",t.choicesCustodyDefinitionId(e))}}function Lj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Oj,2,1,"div",11),o.Rc(3,_j,1,2,"t-selector",30),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Account_CustodyDefinition"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodyDefinitionId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Aj(e,t){if(1&e&&(o.Vb(0,"t-view-link",34),o.Qb(1,"t-auto-cell",40),o.Ub()),2&e){const e=o.lc(2).model;var n;const t="../../custodies/"+(null==(n=o.lc().ws.get("Custody",null==e?null:e.CustodyId))?null:n.DefinitionId);o.sc("link",t)("itemId",null==e?null:e.CustodyId),o.Bb(1),o.sc("entity",e)}}function Fj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custodies-picker",36),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CustodyId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CustodyId)("definitionIds",t.definitionIdsCustody(e))("additionalSelect",t.custodyAdditionalSelect)}}function Pj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.Rc(1,Aj,2,3,"t-view-link",32),o.Rc(2,Fj,1,3,"t-custodies-picker",33),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.labelCustody(t))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodyId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Nj(e,t){if(1&e&&(o.Vb(0,"t-view-link",34),o.Qb(1,"t-auto-cell",41),o.Ub()),2&e){const e=o.lc(2).model;var n;const t="../../relations/"+(null==(n=o.lc().ws.get("Relation",null==e?null:e.CustodianId))?null:n.DefinitionId);o.sc("link",t)("itemId",null==e?null:e.CustodianId),o.Bb(1),o.sc("entity",e)}}function jj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",39),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CustodianId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CustodianId)("definitionIds",t.definitionIdsCustodian(e))}}function Wj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.Rc(1,Nj,2,3,"t-view-link",32),o.Rc(2,jj,1,2,"t-relations-picker",37),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",i.labelCustodian(t))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodianId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function $j(e,t){if(1&e&&(o.Vb(0,"t-restricted",43),o.Vb(1,"t-view-link",44),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Currency),o.Bb(1),o.sc("itemId",null==e?null:e.CurrencyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Currency",null==e?null:e.CurrencyId,"Name")," ")}}function qj(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.Uc(t.ws.getMultilingualValue("Currency",t.readonlyValueCurrencyId(e),"Name"))}}function Qj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.CurrencyId=t})),o.Ub()}if(2&e){const e=o.lc(3).model;o.sc("ngModel",e.CurrencyId)}}function Hj(e,t){if(1&e&&(o.Tb(0),o.Rc(1,qj,2,1,"span",11),o.Rc(2,Qj,1,1,"t-currencies-picker",45),o.Sb()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(1),o.sc("ngIf",t.readonlyCurrencyId(e)),o.Bb(1),o.sc("ngIf",!t.readonlyCurrencyId(e))}}function Gj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,$j,3,3,"t-restricted",42),o.Rc(3,Hj,3,2,"ng-container",11),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Account_Currency"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function zj(e,t){if(1&e&&(o.Vb(0,"t-view-link",48),o.Qb(1,"t-auto-cell",49),o.Ub()),2&e){const e=o.lc(2).model;o.sc("itemId",null==e?null:e.CenterId),o.Bb(1),o.sc("entity",e)}}function Jj(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.Uc(t.ws.getMultilingualValue("Center",t.readonlyValueCenterId(e),"Name"))}}function Kj(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",51),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.CenterId=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.CenterId)("filter",t.filterCenter(e))}}function Yj(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Jj,2,1,"span",11),o.Rc(2,Kj,1,2,"t-centers-picker",50),o.Sb()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(1),o.sc("ngIf",t.readonlyCenterId(e)),o.Bb(1),o.sc("ngIf",!t.readonlyCenterId(e))}}function Xj(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,zj,2,2,"t-view-link",47),o.Rc(3,Yj,3,2,"ng-container",11),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Account_Center"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function Zj(e,t){if(1&e&&(o.Vb(0,"t-view-link",53),o.Qb(1,"t-auto-cell",54),o.Ub()),2&e){const e=o.lc(2).model;o.sc("itemId",null==e?null:e.EntryTypeId),o.Bb(1),o.sc("entity",e)}}function eW(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",51),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.EntryTypeId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.EntryTypeId)("filter",t.filterEntryType(e))}}function tW(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Zj,2,2,"t-view-link",52),o.Rc(3,eW,1,2,"t-entry-types-picker",50),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Account_EntryType"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.EntryTypeId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function nW(e,t){if(1&e&&(o.Vb(0,"t-form-group",55),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",56),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(2),o.sc("entity",e)}}function iW(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,cj,2,1,"h2",6),o.Rc(2,sj,2,7,"t-text-editor",7),o.Rc(3,lj,2,7,"t-text-editor",8),o.Rc(4,aj,2,7,"t-text-editor",8),o.Ub(),o.Rc(5,bj,4,6,"t-form-group",9),o.Rc(6,gj,4,6,"t-form-group",9),o.Rc(7,vj,4,6,"t-form-group",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Rc(10,Ij,2,1,"div",11),o.Rc(11,yj,1,3,"t-text-editor",12),o.Ub(),o.Vb(12,"t-form-group",10),o.mc(13,"translate"),o.Rc(14,wj,2,2,"t-view-link",13),o.Rc(15,Cj,1,1,"t-account-classifications-picker",14),o.Ub(),o.Vb(16,"t-form-group",10),o.mc(17,"translate"),o.Rc(18,Mj,2,2,"t-view-link",15),o.Rc(19,Vj,1,3,"t-account-types-picker",16),o.Ub(),o.Rc(20,xj,4,6,"t-form-group",9),o.Rc(21,Dj,3,4,"t-form-group",9),o.Rc(22,kj,3,4,"t-form-group",9),o.Rc(23,Lj,4,6,"t-form-group",9),o.Rc(24,Pj,3,4,"t-form-group",9),o.Rc(25,Wj,3,4,"t-form-group",9),o.Rc(26,Gj,4,6,"t-form-group",9),o.Rc(27,Xj,4,6,"t-form-group",9),o.Rc(28,tW,4,6,"t-form-group",9),o.Rc(29,nW,3,4,"t-form-group",17)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,30,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(13,32,"Account_Classification"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ClassificationId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(17,34,"Account_Type"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.AccountTypeId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.showResourceDefinitionId(e)),o.Bb(1),o.sc("ngIf",i.showResource(e)),o.Bb(1),o.sc("ngIf",i.showParticipant(e)),o.Bb(1),o.sc("ngIf",i.showCustodyDefinitionId(e)),o.Bb(1),o.sc("ngIf",i.showCustody(e)),o.Bb(1),o.sc("ngIf",i.showCustodian(e)),o.Bb(1),o.sc("ngIf",i.showCurrency(e)),o.Bb(1),o.sc("ngIf",i.showCenter(e)),o.Bb(1),o.sc("ngIf",i.showEntryType(e)),o.Bb(1),o.sc("ngIf",!n)}}function oW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function cW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const rW=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},sW=function(e,t){return[e,t]};let lW=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.accountsApi=this.api.accountsApi(this.notifyDestruct$),this.expand="AccountType.CustodyDefinitions,AccountType.ResourceDefinitions,Classification,\nCurrency,Center,Custody,Resource.Currency,Custody.Currency,Resource.Center,Custody.Center,EntryType,Participant,Custodian",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.onActivate=e=>{e&&e.Id&&this.accountsApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.accountsApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this._choicesCustodyDefinitionIdResult=[],this._choicesResourceDefinitionIdResult=[],this.custodyAdditionalSelect="DefinitionId,Currency.Name,Currency.Name2,Currency.Name3,Currency.E,Center.Name,Center.Name2,Center.Name3",this.accountsApi=this.api.accountsApi(this.notifyDestruct$)}get view(){return"accounts"}get ws(){return this.workspace.currentTenant}get p(){return Object(ON.a)(this.workspace,this.translate).properties}showCenter(e){return!0}readonlyCenterId(e){if(!e)return!0;const t=this.accountType(e);if(!t)return!0;const n=this.ws.get("Resource",e.ResourceId),i=this.ws.get("Custody",e.CustodyId);return t.IsBusinessUnit?!!e.ResourceId&&!!n.CenterId||!!e.CustodyId&&!!i.CenterId:!!e.ResourceId&&!!n.CostCenterId}readonlyValueCenterId(e){if(!e)return null;const t=this.accountType(e);if(!t)return null;if(t.IsBusinessUnit){if(e.ResourceId){const t=this.ws.get("Resource",e.ResourceId);if(t.CenterId)return t.CenterId}if(e.CustodyId){const t=this.ws.get("Custody",e.CustodyId);if(t.CenterId)return t.CenterId}}else if(e.ResourceId){const t=this.ws.get("Resource",e.ResourceId);if(t.CostCenterId)return t.CostCenterId}return null}filterCenter(e){if(!e)return null;const t=this.accountType(e);return t&&t.IsBusinessUnit?"CenterType eq 'BusinessUnit'":null}showCurrency(e){return!0}readonlyCurrencyId(e){if(!e)return!0;const t=this.ws.get("Resource",e.ResourceId),n=this.ws.get("Custody",e.CustodyId);return!!e.ResourceId&&!!t.CurrencyId||!!e.CustodyId&&!!n.CurrencyId}readonlyValueCurrencyId(e){if(!e)return null;if(e.ResourceId){const t=this.ws.get("Resource",e.ResourceId);if(t.CurrencyId)return t.CurrencyId}if(e.CustodyId){const t=this.ws.get("Custody",e.CustodyId);if(t.CurrencyId)return t.CurrencyId}return null}formatRelationDefinitionId(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Relations[e],"TitlePlural"):""}choicesCustodyDefinitionId(e){const t=this.ws,n=t.definitions,i=this.accountType(e);return this._choicesCustodyDefinitionIdAccountType===i&&this._choicesCustodyDefinitionIdDefinitions===n||(this._choicesCustodyDefinitionIdAccountType=i,this._choicesCustodyDefinitionIdDefinitions=n,this._choicesCustodyDefinitionIdResult=i&&i.CustodyDefinitions?i.CustodyDefinitions.filter(e=>!!n.Custodies[e.CustodyDefinitionId]).map(e=>({value:e.CustodyDefinitionId,name:()=>t.getMultilingualValueImmediate(n.Custodies[e.CustodyDefinitionId],"TitleSingular")})):[]),this._choicesCustodyDefinitionIdResult}showCustodyDefinitionId(e){return this.choicesCustodyDefinitionId(e).length>0}onCustodyDefinitionChange(e,t){if(!e)return;const n=this.ws.get("Custody",t.CustodyId);n&&n.DefinitionId!==e&&delete t.CustodyId}formatCustodyDefinitionId(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Custodies[e],"TitlePlural"):""}showCustody(e){return this.showCustodyDefinitionId(e)&&!!e.CustodyDefinitionId}labelCustody(e){let t="";if(e&&e.CustodyDefinitionId){const n=this.ws.definitions.Custodies[e.CustodyDefinitionId];n&&(t=` (${this.ws.getMultilingualValueImmediate(n,"TitleSingular")})`)}return this.translate.instant("Account_Custody")+t}definitionIdsCustody(e){return e&&e.CustodyDefinitionId?[e.CustodyDefinitionId]:[]}showCustodian(e){const t=this.accountType(e);return!!t&&!!t.CustodianDefinitionId&&!this.showCustodyDefinitionId(e)}labelCustodian(e){let t="";const n=this.accountType(e);if(n&&n.CustodianDefinitionId){const e=this.ws.definitions.Relations[n.CustodianDefinitionId];e&&(t=` (${this.ws.getMultilingualValueImmediate(e,"TitleSingular")})`)}return this.translate.instant("Account_Custodian")+t}definitionIdsCustodian(e){const t=this.accountType(e);return t&&t.CustodianDefinitionId?[t.CustodianDefinitionId]:[]}showParticipant(e){const t=this.accountType(e);return!!t&&!!t.ParticipantDefinitionId&&!this.showCustodyDefinitionId(e)}labelParticipant(e){let t="";const n=this.accountType(e);if(n&&n.ParticipantDefinitionId){const e=this.ws.definitions.Relations[n.ParticipantDefinitionId];e&&(t=` (${this.ws.getMultilingualValueImmediate(e,"TitleSingular")})`)}return this.translate.instant("Account_Participant")+t}definitionIdsParticipant(e){const t=this.accountType(e);return t&&t.ParticipantDefinitionId?[t.ParticipantDefinitionId]:[]}choicesResourceDefinitionId(e){const t=this.ws,n=t.definitions,i=this.accountType(e);return this._choicesResourceDefinitionIdAccountType===i&&this._choicesResourceDefinitionIdDefinitions===n||(this._choicesResourceDefinitionIdAccountType=i,this._choicesResourceDefinitionIdDefinitions=n,this._choicesResourceDefinitionIdResult=i&&i.ResourceDefinitions?i.ResourceDefinitions.filter(e=>!!n.Resources[e.ResourceDefinitionId]).map(e=>({value:e.ResourceDefinitionId,name:()=>t.getMultilingualValueImmediate(n.Resources[e.ResourceDefinitionId],"TitleSingular")})):[]),this._choicesResourceDefinitionIdResult}showResourceDefinitionId(e){return this.choicesResourceDefinitionId(e).length>0}formatResourceDefinitionId(e){return e?this.ws.getMultilingualValueImmediate(this.ws.definitions.Resources[e],"TitlePlural"):""}onResourceDefinitionChange(e,t){if(!e)return;const n=this.ws.get("Resource",t.ResourceId);n&&n.DefinitionId!==e&&delete t.ResourceId}labelResource(e){let t="";if(e&&e.ResourceDefinitionId){const n=this.ws.definitions.Resources[e.ResourceDefinitionId];n&&(t=` (${this.ws.getMultilingualValueImmediate(n,"TitleSingular")})`)}return this.translate.instant("Account_Resource")+t}showResource(e){return this.showResourceDefinitionId(e)&&!!e.ResourceDefinitionId}definitionIdsResource(e){return e&&e.ResourceDefinitionId?[e.ResourceDefinitionId]:[]}showEntryType(e){const t=this.accountType(e);return!!t&&!!t.EntryTypeParentId}filterEntryType(e){let t="IsAssignable eq true";const n=this.accountType(e);return n&&n.EntryTypeParentId&&(t+=` and Id descof ${n.EntryTypeParentId}`),t}accountType(e){return e?this.ws.get("AccountType",e.AccountTypeId):null}get accountTypeAdditionalSelect(){const e="CustodyDefinitions.CustodyDefinitionId,\n    ResourceDefinitions.ResourceDefinitionId,EntryTypeParentId,CustodianDefinitionId,ParticipantDefinitionId";return"$DocumentDetails"===this.additionalSelect?"$DocumentDetails,"+e:e}filterAccountType(e){const t=this.ws.get("AccountClassification",e.ClassificationId);return t&&t.AccountTypeParentId?`Id descof ${t.AccountTypeParentId}`:""}get resourceAdditionalSelect(){const e="DefinitionId,Currency.Name,Currency.Name2,Currency.Name3,Center.Name,Center.Name2,Center.Name3,\nCostCenter.Name,CostCenter.Name2,CostCenter.Name3";return"$DocumentDetails"===this.additionalSelect?"$DocumentDetails,"+e:e}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-accounts-details"]],features:[o.yb],decls:10,vars:26,consts:[["collection","Account",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["link","../../account-classifications",3,"itemId",4,"ngIf"],["additionalSelect","AccountTypeParentId",3,"ngModel","ngModelChange",4,"ngIf"],["link","../../account-types",3,"itemId",4,"ngIf"],["required","",3,"ngModel","additionalSelect","filter","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],["link","../../account-classifications",3,"itemId"],["collection","Account","path","Classification",3,"entity"],["additionalSelect","AccountTypeParentId",3,"ngModel","ngModelChange"],["link","../../account-types",3,"itemId"],["collection","Account","path","AccountType",3,"entity"],["required","",3,"ngModel","additionalSelect","filter","ngModelChange"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],[3,"link","itemId",4,"ngIf"],[3,"ngModel","definitionIds","additionalSelect","ngModelChange",4,"ngIf"],[3,"link","itemId"],["collection","Account","path","Resource",3,"entity"],[3,"ngModel","definitionIds","additionalSelect","ngModelChange"],[3,"ngModel","definitionIds","ngModelChange",4,"ngIf"],["collection","Account","path","Participant",3,"entity"],[3,"ngModel","definitionIds","ngModelChange"],["collection","Account","path","Custody",3,"entity"],["collection","Account","path","Custodian",3,"entity"],[3,"metadata",4,"ngIf"],[3,"metadata"],["link","../../currencies",3,"itemId"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],["link","../../centers",3,"itemId",4,"ngIf"],["link","../../centers",3,"itemId"],["collection","Account","path","Center",3,"entity"],[3,"ngModel","filter","ngModelChange",4,"ngIf"],[3,"ngModel","filter","ngModelChange"],["link","../../entry-types",3,"itemId",4,"ngIf"],["link","../../entry-types",3,"itemId"],["collection","Account","path","EntryType",3,"entity"],[1,"t-form-group",3,"label"],["collection","Account","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,oj,2,1,"ng-template",null,1,o.Sc),o.Rc(4,iW,30,36,"ng-template",null,2,o.Sc),o.Rc(6,oW,2,3,"ng-template",null,3,o.Sc),o.Rc(8,cW,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,9,"Accounts"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.xc(23,sW,o.Ac(11,rW,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(17,rW,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,he.a,te.u,te.k,te.n,ss,ge.a,fM,hM,hn.a,AN,Ub,nj,pn.a,Du,Ou,bV],pipes:[Q.d],encapsulation:2}),e})();function aW(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-accounts-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function uW(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-accounts-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let dW=(()=>{class e extends As{}return e.\u0275fac=function(t){return bW(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-accounts-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","Account",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,aW,2,3,"ng-template",null,1,o.Sc),o.Rc(3,uW,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,lW,kN],encapsulation:2}),e})();const bW=o.Xb(dW);function fW(e,t){if(1&e&&(o.Vb(0,"div",17),o.Vb(1,"span",18),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",19),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("Center",e,"Name")),o.Bb(3),o.Uc(n.c[e].Code)}}function mW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center"),"\n")}function gW(e,t){if(1&e&&(o.Vb(0,"span",20),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.ws.getMultilingualValue("Center",e,"Name"))}}function pW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function hW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function vW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}function IW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_Abstract")," ")}function yW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_BusinessUnit")," ")}function wW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_CostOfSales")," ")}function CW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_SellingGeneralAndAdministration")," ")}function MW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_SharedExpenseControl")," ")}function VW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_InvestmentPropertyUnderConstructionOrDevelopmentExpendituresControl")," ")}function TW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_CurrentInventoriesInTransitExpendituresControl")," ")}function EW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_ConstructionInProgressExpendituresControl")," ")}function xW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_WorkInProgressExpendituresControl")," ")}function UW(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Center_CenterType_OtherPL")," ")}const RW=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},DW=function(e,t){return[e,t]},BW=function(e){return{template:e,expression:"CreatedById eq me"}},SW=function(e){return[e]},kW=function(e){return{template:e,expression:"CenterType eq 'Abstract'"}},OW=function(e){return{template:e,expression:"CenterType eq 'BusinessUnit'"}},_W=function(e){return{template:e,expression:"CenterType eq 'CostOfSales'"}},LW=function(e){return{template:e,expression:"CenterType eq 'SellingGeneralAndAdministration'"}},AW=function(e){return{template:e,expression:"CenterType eq 'SharedExpenseControl'"}},FW=function(e){return{template:e,expression:"CenterType eq 'InvestmentPropertyUnderConstructionOrDevelopmentExpendituresControl'"}},PW=function(e){return{template:e,expression:"CenterType eq 'CurrentInventoriesInTransitExpendituresControl'"}},NW=function(e){return{template:e,expression:"CenterType eq 'ConstructionInProgressExpendituresControl'"}},jW=function(e){return{template:e,expression:"CenterType eq 'WorkInProgressExpendituresControl'"}},WW=function(e){return{template:e,expression:"CenterType eq 'OtherPL'"}},$W=function(e,t,n,i,o,c,r,s,l,a){return[e,t,n,i,o,c,r,s,l,a]},qW=function(e,t){return{CreatedBy:e,CenterType:t}};let QW=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.centersApi=this.api.centersApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.centersApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.centersApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo("centers","IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.centersApi=this.api.centersApi(this.notifyDestruct$)}get c(){return this.ws.Center}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-centers-master"]],features:[o.yb],decls:34,vars:64,consts:[["collection","Center","selectDefault","Code,CenterType","selectForTiles","Code,CenterType",3,"mode","showCreateButton","filterDefault","enableTreeView","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["abstract",""],["businessunit",""],["cos",""],["selling",""],["shared",""],["rentals",""],["transit",""],["construction",""],["wip",""],["opl",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,fW,6,2,"ng-template",null,1,o.Sc),o.Rc(4,mW,2,3,"ng-template",null,2,o.Sc),o.Rc(6,gW,2,1,"ng-template",null,3,o.Sc),o.Rc(8,pW,2,3,"ng-template",null,4,o.Sc),o.Rc(10,hW,2,3,"ng-template",null,5,o.Sc),o.Rc(12,vW,2,3,"ng-template",null,6,o.Sc),o.Rc(14,IW,2,3,"ng-template",null,7,o.Sc),o.Rc(16,yW,2,3,"ng-template",null,8,o.Sc),o.Rc(18,wW,2,3,"ng-template",null,9,o.Sc),o.Rc(20,CW,2,3,"ng-template",null,10,o.Sc),o.Rc(22,MW,2,3,"ng-template",null,11,o.Sc),o.Rc(24,VW,2,3,"ng-template",null,12,o.Sc),o.Rc(26,TW,2,3,"ng-template",null,13,o.Sc),o.Rc(28,EW,2,3,"ng-template",null,14,o.Sc),o.Rc(30,xW,2,3,"ng-template",null,15,o.Sc),o.Rc(32,UW,2,3,"ng-template",null,16,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17),u=o.Fc(19),d=o.Fc(21),b=o.Fc(23),f=o.Fc(25),m=o.Fc(27),g=o.Fc(29),p=o.Fc(31),h=o.Fc(33);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("enableTreeView",!0)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,11,"Centers"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(23,DW,o.zc(13,RW,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(18,RW,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.xc(61,qW,o.wc(28,SW,o.wc(26,BW,s)),o.Dc(50,$W,[o.wc(30,kW,l),o.wc(32,OW,a),o.wc(34,_W,u),o.wc(36,LW,d),o.wc(38,AW,b),o.wc(40,FW,f),o.wc(42,PW,m),o.wc(44,NW,g),o.wc(46,jW,p),o.wc(48,WW,h)])))}},directives:[Rt.a],pipes:[Q.d],encapsulation:2}),e})();var HW=n("X/EE");function GW(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function zW(e,t){if(1&e&&(o.Vb(0,"h2",19),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const JW=function(){return{updateOn:"blur"}};function KW(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,JW))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function YW(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,JW))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function XW(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",21),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,JW))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function ZW(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function e$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",23),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,JW))}}function t$(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,ZW,2,1,"div",11),o.Rc(3,e$,1,3,"t-text-editor",22),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function n$(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function i$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,JW))}}function o$(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,n$,2,1,"div",11),o.Rc(3,i$,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function c$(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function r$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,JW))}}function s$(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,c$,2,1,"div",11),o.Rc(3,r$,1,3,"t-text-editor",12),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function l$(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Code)}}function a$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Code)("ngModelOptions",o.vc(2,JW))}}function u$(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"t-restricted",14),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CenterType),o.Bb(1),o.Vc(" ",o.nc(3,2,t.centerTypeLookup(null==e?null:e.CenterType))," ")}}function d$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.CenterType=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.CenterType)("choices",t.centerTypeChoices)}}function b$(e,t){if(1&e&&(o.Vb(0,"t-view-link",26),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("itemId",null==e?null:e.ManagerId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("Agent",null==e?null:e.ManagerId,"Name"))}}function f$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-agents-picker",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ManagerId=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.ManagerId)}}function m$(e,t){if(1&e&&(o.Vb(0,"t-view-link",28),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("itemId",null==e?null:e.ParentId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("Center",null==e?null:e.ParentId,"Name"))}}function g$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ParentId=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.ParentId)}}function p$(e,t){if(1&e&&(o.Vb(0,"t-form-group",29),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsLeaf")),o.Bb(3),o.Uc(o.nc(4,4,null!=e&&e.IsLeaf?"Yes":"No"))}}function h$(e,t){if(1&e&&(o.Vb(0,"t-form-group",29),o.mc(1,"translate"),o.Qb(2,"t-auto-cell",30),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(2),o.sc("entity",e)}}function v$(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,zW,2,1,"h2",6),o.Rc(2,KW,2,7,"t-text-editor",7),o.Rc(3,YW,2,7,"t-text-editor",8),o.Rc(4,XW,2,7,"t-text-editor",8),o.Ub(),o.Rc(5,t$,4,6,"t-form-group",9),o.Rc(6,o$,4,6,"t-form-group",9),o.Rc(7,s$,4,6,"t-form-group",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Rc(10,l$,2,1,"div",11),o.Rc(11,a$,1,3,"t-text-editor",12),o.Ub(),o.Vb(12,"t-form-group",10),o.mc(13,"translate"),o.Rc(14,u$,4,4,"div",11),o.Rc(15,d$,1,2,"t-selector",13),o.Ub(),o.Vb(16,"t-form-group",10),o.mc(17,"translate"),o.Vb(18,"t-restricted",14),o.Rc(19,b$,2,2,"t-view-link",15),o.Ub(),o.Rc(20,f$,1,1,"t-agents-picker",16),o.Ub(),o.Vb(21,"t-form-group",10),o.mc(22,"translate"),o.Rc(23,m$,2,2,"t-view-link",17),o.Rc(24,g$,1,1,"t-centers-picker",16),o.Ub(),o.Rc(25,p$,5,6,"t-form-group",18),o.Rc(26,h$,3,4,"t-form-group",18)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,27,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(13,29,"Center_CenterType"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.CenterType),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(17,31,"Center_Manager"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ManagerId),o.Bb(2),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ManagerId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(22,33,"TreeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ParentId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",!n)}}function I$(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function y$(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const w$=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},C$=function(e,t){return[e,t]};let M$=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.centersApi=this.api.centersApi(this.notifyDestruct$),this.expand="Parent,Manager",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e},this.onActivate=e=>{e&&e.Id&&this.centersApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.centersApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo("centers","IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.centersApi=this.api.centersApi(this.notifyDestruct$)}get centerTypeChoices(){const e=Object(HW.a)(this.workspace,this.translate).properties.CenterType;return Object(wi.c)(e)}centerTypeLookup(e){return Object(HW.a)(this.workspace,this.translate).properties.CenterType.format(e)}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-centers-details"]],features:[o.yb],decls:10,vars:26,consts:[["collection","Center",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../agents/",3,"itemId",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["link","../../centers",3,"itemId",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","choices","ngModelChange"],["link","../../agents/",3,"itemId"],[3,"ngModel","ngModelChange"],["link","../../centers",3,"itemId"],[1,"t-form-group",3,"label"],["collection","Center","path","IsActive",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,GW,2,1,"ng-template",null,1,o.Sc),o.Rc(4,v$,27,35,"ng-template",null,2,o.Sc),o.Rc(6,I$,2,3,"ng-template",null,3,o.Sc),o.Rc(8,y$,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,9,"Centers"))("detailsCrumb",e)("documentTemplate",n)("actions",o.xc(23,C$,o.Ac(11,w$,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(17,w$,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,pn.a,he.a,te.u,te.k,te.n,hn.a,ss,Vb,Ou,ge.a],pipes:[Q.d],encapsulation:2}),e})();function V$(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",9),o.Vb(4,"span",8),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("EntryType",e,"Name")),o.Bb(3),o.Uc(n.c[e].Code)}}function T$(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"EntryType"),"\n")}function E$(e,t){if(1&e&&(o.Vb(0,"span",10),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.ws.getMultilingualValue("EntryType",e,"Name"))}}function x$(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function U$(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function R$(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}const D$=function(e,t,n,i){return{template:e,action:t,canAction:n,actionTooltip:i}},B$=function(e,t){return[e,t]},S$=function(e){return{template:e,expression:"CreatedById eq me"}},k$=function(e){return[e]},O$=function(e){return{CreatedBy:e}};let _$=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.entryTypesApi=this.api.entryTypesApi(this.notifyDestruct$),this.expand="",this.onActivate=e=>this.entryTypesApi.activate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onDeactivate=e=>this.entryTypesApi.deactivate(e,{returnEntities:!0,expand:this.expand}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",null),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.entryTypesApi=this.api.entryTypesApi(this.notifyDestruct$)}get view(){return"entry-types"}get c(){return this.ws.EntryType}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-entry-types-master"]],features:[o.yb],decls:14,vars:32,consts:[["collection","EntryType","selectDefault","IsAssignable","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","enableTreeView","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,V$,6,2,"ng-template",null,1,o.Sc),o.Rc(4,T$,2,3,"ng-template",null,2,o.Sc),o.Rc(6,E$,2,1,"ng-template",null,3,o.Sc),o.Rc(8,x$,2,3,"ng-template",null,4,o.Sc),o.Rc(10,U$,2,3,"ng-template",null,5,o.Sc),o.Rc(12,R$,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("enableTreeView",!0)("masterCrumb",o.nc(1,11,"EntryTypes"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.xc(23,B$,o.zc(13,D$,c,t.onActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.zc(18,D$,r,t.onDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))("filterDefinition",o.wc(30,O$,o.wc(28,k$,o.wc(26,S$,s))))}},directives:[Rt.a],pipes:[Q.d],encapsulation:2}),e})();var L$=n("wfSO");function A$(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function F$(e,t){if(1&e&&(o.Vb(0,"h2",24),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Uc(t.getMultilingualValue(e,"Name",t.ws))}}const P$=function(){return{updateOn:"blur"}};function N$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",25),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name)("ngModelOptions",o.vc(6,P$))("placeholder",o.nc(1,4,"Name")+t.ws.primaryPostfix+"...")}}function j$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",26),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name2=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name2)("ngModelOptions",o.vc(6,P$))("placeholder",o.nc(1,4,"Name")+t.ws.secondaryPostfix+"...")}}function W$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",26),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Name3=t})),o.mc(1,"translate"),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("focusIf",!e.Id)("ngModel",e.Name3)("ngModelOptions",o.vc(6,P$))("placeholder",o.nc(1,4,"Name")+t.ws.ternaryPostfix+"...")}}function $$(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name)}}function q$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name)("ngModelOptions",o.vc(2,P$))}}function Q$(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,$$,2,1,"div",13),o.Rc(3,q$,1,3,"t-text-editor",14),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.primaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function H$(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name2)}}function G$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name2)("ngModelOptions",o.vc(2,P$))}}function z$(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,H$,2,1,"div",13),o.Rc(3,G$,1,3,"t-text-editor",23),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function J$(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Name3)}}function K$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Name3)("ngModelOptions",o.vc(2,P$))}}function Y$(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,J$,2,1,"div",13),o.Rc(3,K$,1,3,"t-text-editor",23),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Name")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Name3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function X$(e,t){if(1&e&&(o.Vb(0,"span",29),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.sc("title",null==e?null:e.Code),o.Bb(1),o.Uc(null==e?null:e.Code)}}function Z$(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("disabled",e.IsSystem)("ngModel",e.Code)("ngModelOptions",o.vc(3,P$))}}function eq(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Concept)}}function tq(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",27),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Concept=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Concept)("ngModelOptions",o.vc(2,P$))}}function nq(e,t){if(1&e&&(o.Vb(0,"t-view-link",31),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("itemId",null==e?null:e.ParentId),o.Bb(1),o.Uc(t.ws.getMultilingualValue("EntryType",null==e?null:e.ParentId,"Name"))}}function iq(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ParentId=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("disabled",e.IsSystem)("ngModel",e.ParentId)}}function oq(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(o.nc(2,1,null!=e&&e.IsAssignable?"Yes":"No"))}}function cq(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",33),o.Vb(1,"input",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.IsAssignable=t})),o.Ub(),o.Vb(2,"label",35),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc().model;o.Bb(1),o.sc("ngModel",e.IsAssignable)}}function rq(e,t){if(1&e&&(o.Vb(0,"t-form-group",18),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsActive")),o.Bb(3),o.Uc(o.nc(4,4,e?e.IsActive?"Active":"Inactive":""))}}function sq(e,t){if(1&e&&(o.Vb(0,"t-form-group",18),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"IsSystem")),o.Bb(3),o.Uc(o.nc(4,4,e?e.IsSystem?"Yes":"No":""))}}function lq(e,t){if(1&e&&(o.Vb(0,"div",36),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(null==e?null:e.Description)}}function aq(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Description=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.Description)("ngModelOptions",o.vc(2,P$))}}function uq(e,t){if(1&e&&(o.Vb(0,"div",36),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Description2)}}function dq(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description2=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description2)("ngModelOptions",o.vc(2,P$))}}function bq(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,uq,2,1,"div",22),o.Rc(3,dq,1,3,"t-multiline-editor",23),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.secondaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description2),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function fq(e,t){if(1&e&&(o.Vb(0,"div",36),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Description3)}}function mq(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-multiline-editor",28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description3=t})),o.Ub()}if(2&e){const e=o.lc(2).model;o.sc("ngModel",e.Description3)("ngModelOptions",o.vc(2,P$))}}function gq(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,fq,2,1,"div",22),o.Rc(3,mq,1,3,"t-multiline-editor",23),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.lc();o.sc("label",o.nc(1,4,"Description")+i.ws.ternaryPostfix)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Description3),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function pq(e,t){if(1&e&&(o.Vb(0,"t-form-group",5),o.Rc(1,F$,2,1,"h2",6),o.Rc(2,N$,2,7,"t-text-editor",7),o.Rc(3,j$,2,7,"t-text-editor",8),o.Rc(4,W$,2,7,"t-text-editor",8),o.Ub(),o.Rc(5,Q$,4,6,"t-form-group",9),o.Rc(6,z$,4,6,"t-form-group",9),o.Rc(7,Y$,4,6,"t-form-group",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Rc(10,X$,2,2,"span",11),o.Rc(11,Z$,1,4,"t-text-editor",12),o.Ub(),o.Vb(12,"t-form-group",10),o.mc(13,"translate"),o.Rc(14,eq,2,1,"span",13),o.Rc(15,tq,1,3,"t-text-editor",14),o.Ub(),o.Vb(16,"t-form-group",10),o.mc(17,"translate"),o.Vb(18,"t-restricted",15),o.Rc(19,nq,2,2,"t-view-link",16),o.Ub(),o.Rc(20,iq,1,2,"t-entry-types-picker",17),o.Ub(),o.Vb(21,"t-form-group",18),o.mc(22,"translate"),o.Rc(23,oq,3,3,"div",13),o.Rc(24,cq,4,1,"div",19),o.Ub(),o.Rc(25,rq,5,6,"t-form-group",20),o.Rc(26,sq,5,6,"t-form-group",20),o.Qb(27,"div",21),o.Vb(28,"t-form-group",10),o.mc(29,"translate"),o.Rc(30,lq,2,1,"div",22),o.Rc(31,aq,1,3,"t-multiline-editor",23),o.Ub(),o.Rc(32,bq,4,6,"t-form-group",9),o.Rc(33,gq,4,6,"t-form-group",9)),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("serverErrors",i.getMultilingualValue(null==e?null:e.serverErrors,"Name",i.ws)),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n&&i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isSecondaryLanguage),o.Bb(1),o.sc("ngIf",n&&i.ws.isTernaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!i.ws.isSecondaryLanguage&&i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!i.ws.isTernaryLanguage&&i.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(9,32,"Code"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Code),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(13,34,"AccountType_Concept"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Concept),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(17,36,"TreeParent"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ParentId),o.Bb(2),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Parent),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(22,38,"IsAssignable")),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",!n),o.Bb(2),o.sc("label",o.nc(29,40,"Description")+i.ws.primaryPostfix)("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.Description),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId)}}function hq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function vq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}const Iq=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},yq=function(e,t){return[e,t]};let wq=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.entryTypesApi=this.api.entryTypesApi(this.notifyDestruct$),this.expand="Parent",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsAssignable=!0,e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.IsSystem=!1,t}return console.error("Cloning a non existing item"),null},this.onActivate=e=>{e&&e.Id&&this.entryTypesApi.activate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onDeactivate=e=>{e&&e.Id&&this.entryTypesApi.deactivate([e.Id],{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showActivate=e=>!!e&&!e.IsActive,this.showDeactivate=e=>!!e&&e.IsActive,this.canActivateDeactivateItem=e=>this.ws.canDo(this.view,"IsActive",e.Id),this.activateDeactivateTooltip=e=>this.canActivateDeactivateItem(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.entryTypesApi=this.api.entryTypesApi(this.notifyDestruct$)}get view(){return"entry-types"}get ws(){return this.workspace.currentTenant}get masterCrumb(){const e=Object(L$.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-entry-types-details"]],features:[o.yb],decls:9,vars:25,consts:[["collection","EntryType",3,"idString","createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions"],["detailsCrumb",""],["document",""],["activate",""],["deactivate",""],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],[1,"t-form-group",3,"label","serverErrors"],[3,"title",4,"ngIf"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],["link","../../entry-types",3,"itemId",4,"ngIf"],[3,"disabled","ngModel","ngModelChange",4,"ngIf"],[1,"t-form-group",3,"label"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngIf"],["class","t-form-group",3,"label",4,"ngIf"],[1,"w-100"],["class","t-multiline",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"font-weight-normal"],["required","",3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"focusIf","ngModel","ngModelOptions","placeholder","ngModelChange"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"title"],["required","",3,"disabled","ngModel","ngModelOptions","ngModelChange"],["link","../../entry-types",3,"itemId"],[3,"disabled","ngModel","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","isAssignable",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isAssignable",1,"custom-control-label","t-pointer"],[1,"t-multiline"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.Rc(1,A$,2,1,"ng-template",null,1,o.Sc),o.Rc(3,pq,34,42,"ng-template",null,2,o.Sc),o.Rc(5,hq,2,3,"ng-template",null,3,o.Sc),o.Rc(7,vq,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4),i=o.Fc(6),c=o.Fc(8);o.sc("idString",t.idString)("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",e)("documentTemplate",n)("actions",o.xc(22,yq,o.Ac(10,Iq,i,t.onActivate,t.showActivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip),o.Ac(16,Iq,c,t.onDeactivate,t.showDeactivate,t.canActivateDeactivateItem,t.activateDeactivateTooltip)))}},directives:[j.a,pe.a,x.u,pn.a,he.a,te.u,te.k,te.n,ss,bV,te.a,Bb],pipes:[Q.d],encapsulation:2}),e})();const Cq=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},Mq=function(e,t,n,i){return[e,t,n,i]},Vq=function(e){return{template:e,expression:"CreatedById eq me"}},Tq=function(e){return{template:e,expression:"AssigneeId eq me"}},Eq=function(e,t){return[e,t]},xq=function(e){return{template:e,expression:"State eq 0"}},Uq=function(e){return{template:e,expression:"State eq 1"}},Rq=function(e){return{template:e,expression:"State eq -1"}},Dq=function(e,t,n){return[e,t,n]},Bq=function(e,t){return{CreatedBy:e,State:t}};function Sq(e,t){if(1&e&&o.Qb(0,"t-master",16),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(8),i=o.Fc(6),c=o.Fc(24),r=o.Fc(28),s=o.Fc(26),l=o.Fc(30),a=o.Fc(14),u=o.Fc(16),d=o.Fc(18),b=o.Fc(22),f=o.Fc(20);o.sc("definitionId",e.definitionId)("mode",e.mode)("additionalSelect",e.additionalSelect)("showCreateButton",e.showCreate)("filterDefault",e.filter)("masterCrumb",e.masterCrumb)("tileTemplate",t)("tableSummaryColumnTemplate",n)("tableSummaryHeaderTemplate",i)("selectDefault",e.selectDefault)("multiselectActions",o.zc(36,Mq,o.Ac(12,Cq,c,e.onClose,e.showClose,e.hasStatePermission,e.stateTooltip),o.Ac(18,Cq,r,e.onCancel,e.showCancel,e.hasStatePermission,e.stateTooltip),o.Ac(24,Cq,s,e.onOpen,e.showOpen,e.hasStatePermission,e.stateTooltip),o.Ac(30,Cq,l,e.onUncancel,e.showUncancel,e.hasStatePermission,e.stateTooltip)))("filterDefinition",o.xc(58,Bq,o.xc(45,Eq,o.wc(41,Vq,a),o.wc(43,Tq,u)),o.yc(54,Dq,o.wc(48,xq,d),o.wc(50,Uq,b),o.wc(52,Rq,f))))}}function kq(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",17),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function Oq(e,t){if(1&e&&o.Qb(0,"t-auto-cell",25),2&e){const e=o.lc().id,t=o.lc();o.sc("definitionId",t.definitionId)("entity",t.c[e])}}function _q(e,t){if(1&e&&o.Qb(0,"t-auto-cell",26),2&e){const e=o.lc().id,t=o.lc();o.sc("definitionId",t.definitionId)("entity",t.c[e])}}function Lq(e,t){if(1&e&&(o.Vb(0,"div",18),o.Qb(1,"t-auto-cell",19),o.Rc(2,Oq,1,2,"t-auto-cell",20),o.Ub(),o.Vb(3,"div",21),o.Vb(4,"div",22),o.Rc(5,_q,1,2,"t-auto-cell",23),o.Ub(),o.Qb(6,"t-auto-cell",24),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("definitionId",n.definitionId)("entity",n.c[e]),o.Bb(1),o.sc("ngIf",n.showDocumentPostingDate),o.Bb(3),o.sc("ngIf",n.showDocumentMemo),o.Bb(1),o.sc("definitionId",n.definitionId)("entity",n.c[e])}}function Aq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Document_SerialNumber"),"\n")}function Fq(e,t){if(1&e&&(o.Vb(0,"span",27),o.Qb(1,"t-auto-cell",28),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("definitionId",n.definitionId)("entity",n.c[e])}}function Pq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function Nq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function jq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}function Wq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"AssignedToMe")," ")}function $q(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Document_State_0")," ")}function qq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Document_State_minus_1")," ")}function Qq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Document_State_1")," ")}function Hq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Close")," ")}function Gq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Open")," ")}function zq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Cancel")," ")}function Jq(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Uncancel")," ")}let Kq=(()=>{class e extends Ut.a{constructor(e,t,n,i,o){super(),this.workspace=e,this.api=t,this.router=n,this.route=i,this.translate=o,this.documentsApi=this.api.documentsApi(null,this.notifyDestruct$),this.expand="",this.onClose=e=>this.documentsApi.close(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onCancel=e=>this.documentsApi.cancel(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onOpen=e=>this.documentsApi.open(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.onUncancel=e=>this.documentsApi.uncancel(e,{returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showClose=e=>e.some(e=>{const t=this.ws.get("Document",e);return!!t&&0===t.State}),this.showCancel=e=>e.some(e=>{const t=this.ws.get("Document",e);return!!t&&0===t.State}),this.showOpen=e=>e.some(e=>{const t=this.ws.get("Document",e);return!!t&&1===t.State}),this.showUncancel=e=>e.some(e=>{const t=this.ws.get("Document",e);return!!t&&-1===t.State}),this.hasStatePermission=e=>this.ws.canDo(this.view,"State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}set definitionId(e){this._definitionId!==e&&(this.documentsApi=this.api.documentsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){this.route.paramMap.subscribe(e=>{this.isScreenMode&&(this.definitionId=+e.get("definitionId"))})}get view(){return`documents/${this.definitionId}`}get c(){return this.ws.Document}get ws(){return this.workspace.currentTenant}get definition(){return this.definitionId?this.ws.definitions.Documents[this.definitionId]:null}get found(){return!this.definitionId||!!this.definition}get masterCrumb(){return this.definition?this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural"):this.translate.instant("Documents")}get selectDefault(){const e=this.definition;if(this._selectDefaultDefinition!==e){this._selectDefaultDefinition=e;let t="State,Assignee,AssignedAt";e&&e.PostingDateVisibility&&(t="PostingDate,"+t),e&&e.MemoVisibility&&(t+=",Memo"),this._selectDefaultResult=t}return this._selectDefaultResult}get showDocumentPostingDate(){const e=this.definition;return!e||!!e.PostingDateVisibility}get showDocumentMemo(){const e=this.definition;return!e||!!e.MemoVisibility}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(i.e),o.Pb(i.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-documents-master"]],inputs:{definitionId:"definitionId"},features:[o.yb],decls:31,vars:2,consts:[["collection","Document","selectForTiles","PostingDate,State,Memo",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","selectDefault","multiselectActions","filterDefinition",4,"ngIf","ngIfElse"],["pageNotFound",""],["tile",""],["summaryHeader",""],["summaryColumn",""],["activate",""],["deactivate",""],["createdByMe",""],["assignedToMe",""],["state_0",""],["state_minus_1",""],["state_1",""],["close",""],["open",""],["cancel",""],["uncancel",""],["collection","Document","selectForTiles","PostingDate,State,Memo",3,"definitionId","mode","additionalSelect","showCreateButton","filterDefault","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","selectDefault","multiselectActions","filterDefinition"],[3,"showHome"],[1,"d-flex","justify-content-between"],["collection","Document","path","",3,"definitionId","entity"],["collection","Document","path","PostingDate",3,"definitionId","entity",4,"ngIf"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","Document","path","Memo",3,"definitionId","entity",4,"ngIf"],["collection","Document","path","State",3,"definitionId","entity"],["collection","Document","path","PostingDate",3,"definitionId","entity"],["collection","Document","path","Memo",3,"definitionId","entity"],[1,"text-truncate"],["collection","Document",3,"definitionId","entity"]],template:function(e,t){if(1&e&&(o.Rc(0,Sq,1,61,"t-master",0),o.Rc(1,kq,1,1,"ng-template",null,1,o.Sc),o.Rc(3,Lq,7,6,"ng-template",null,2,o.Sc),o.Rc(5,Aq,2,3,"ng-template",null,3,o.Sc),o.Rc(7,Fq,2,2,"ng-template",null,4,o.Sc),o.Rc(9,Pq,2,3,"ng-template",null,5,o.Sc),o.Rc(11,Nq,2,3,"ng-template",null,6,o.Sc),o.Rc(13,jq,2,3,"ng-template",null,7,o.Sc),o.Rc(15,Wq,2,3,"ng-template",null,8,o.Sc),o.Rc(17,$q,2,3,"ng-template",null,9,o.Sc),o.Rc(19,qq,2,3,"ng-template",null,10,o.Sc),o.Rc(21,Qq,2,3,"ng-template",null,11,o.Sc),o.Rc(23,Hq,2,3,"ng-template",null,12,o.Sc),o.Rc(25,Gq,2,3,"ng-template",null,13,o.Sc),o.Rc(27,zq,2,3,"ng-template",null,14,o.Sc),o.Rc(29,Jq,2,3,"ng-template",null,15,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,Rt.a,nn,ge.a],pipes:[Q.d],encapsulation:2}),e})(),Yq=(()=>{class e{constructor(){this.initialized=!1}initialize(){this.initialized||(this.initialized=!0,window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(this.audioContext=new window.AudioContext))}beep(e,t,n){if(this.initialize(),this.audioContext){const i=this.audioContext.createOscillator(),o=this.audioContext.createGain();i.connect(o),i.frequency.value=t,i.type="square",o.connect(this.audioContext.destination),o.gain.value=.01*e,i.start(this.audioContext.currentTime),i.stop(this.audioContext.currentTime+.001*n)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Xq=["input"];let Zq=(()=>{class e{constructor(){this.codeWidth=4,this.prefix="",this.w100=!0,this.isDisabled=!1,this.onChange=e=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{}}writeValue(e){this.input.nativeElement.value=this.format(e)}registerOnChange(e){this.onChange=t=>{e(this.parse(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}ngOnChanges(e){e.codeWidth&&!e.codeWidth.isFirstChange()&&(this.input.nativeElement.value=this.format(this.input.nativeElement.value))}get zeros(){return Object(Lh.a)(0,"",this.codeWidth)}format(e){if(null==e||""===e)return"";const t=+e.toString();return Object(Lh.a)(t,"",this.codeWidth)}parse(e){if(e&&e.length>this.codeWidth&&(e=void 0),null==e||""===e)return;const t=+e;return isNaN(t)?void 0:t}onBlur(e){this.onTouched(),this.input.nativeElement.value=this.format(this.parse(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-serial-editor"]],viewQuery:function(e,t){var n;1&e&&o.Oc(Xq,!0),2&e&&o.Ec(n=o.ic())&&(t.input=n.first)},hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("w-100",t.w100)},inputs:{codeWidth:"codeWidth",prefix:"prefix"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.zb],decls:5,vars:3,consts:[[1,"d-flex","flex-nowrap","text-nowrap","w-100"],[1,"t-prefix"],["type","text",1,"form-control","t-input",3,"placeholder","disabled","input","blur"],["input",""]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Vb(1,"span",1),o.Tc(2),o.Ub(),o.Vb(3,"input",2,3),o.hc("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onBlur(e.target.value)})),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Uc(t.prefix),o.Bb(1),o.sc("placeholder",t.zeros)("disabled",t.isDisabled))},encapsulation:2}),e})();function eQ(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"span",5),o.Tc(2),o.Ub(),o.Tc(3," \xa0\xa0 "),o.Sb()),2&e){const e=o.lc();o.Bb(1),o.Gb("text-danger",e.invalid),o.sc("title",e.label),o.Bb(1),o.Uc(e.label)}}function tQ(e,t){1&e&&o.Qb(0,"fa-icon",6)}function nQ(e,t){if(1&e&&(o.Vb(0,"p",9),o.Qb(1,"fa-icon",10),o.Tc(2),o.Ub()),2&e){const e=t.$implicit;o.Bb(2),o.Vc(" \xa0",e()," ")}}function iQ(e,t){if(1&e&&(o.Vb(0,"div",7),o.Rc(1,nQ,3,1,"p",8),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.sc("ngForOf",e.errors)}}const oQ=["*"];let cQ=(()=>{class e extends fI.a{}return e.\u0275fac=function(t){return rQ(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-form-group-dynamic"]],features:[o.yb],ngContentSelectors:oQ,decls:7,vars:6,consts:[["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"d-flex","align-items-center","text-nowrap",3,"ngbPopover","placement"],[4,"ngIf"],[1,"d-flex","flex-grow-1","form-group-container","t-dynamic-container"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["errorsPopover",""],[1,"t-vertical-align-middle","font-weight-bold",3,"title"],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"]],template:function(e,t){if(1&e&&(o.rc(),o.Vb(0,"div",0),o.Rc(1,eQ,4,4,"ng-container",1),o.Vb(2,"div",2),o.Rc(3,tQ,1,0,"fa-icon",3),o.qc(4),o.Ub(),o.Ub(),o.Rc(5,iQ,2,1,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(6);o.sc("ngbPopover",t.invalid?e:null)("placement",t.popoverPlacement),o.Bb(1),o.sc("ngIf",t.showLabel),o.Bb(1),o.Gb("is-invalid",t.invalid),o.Bb(1),o.sc("ngIf",t.areServerErrors)}},directives:[K.C,x.u,ee.b,x.t],encapsulation:2}),e})();const rQ=o.Xb(cQ),sQ=["confirmModal"],lQ=["signatureModal"],aQ=["autoGenerateModal"],uQ=function(){return[]};function dQ(e,t){if(1&e&&o.Qb(0,"t-details",10),2&e){const e=o.lc(),t=o.Fc(4),n=o.Fc(10),i=o.Fc(8),c=o.Fc(12),r=o.Fc(6);o.sc("definitionId",e.definitionId)("createFunc",e.create)("cloneFunc",e.clone)("mode",e.mode)("additionalSelect",e.additionalSelect)("masterCrumb",e.masterCrumb)("detailsCrumb",t)("idString",e.idString)("documentTemplate",n)("isInactive",e.isInactive)("documentHeaderTemplate",i)("actions",o.vc(21,uQ))("sidebarTemplate",e.showSidebar?c:null)("registerPristineFunc",e.registerPristineFunc)("isDirtyFunc",e.isDirtyFunc)("extraParams",e.extraParams)("handleFreshExtras",e.handleFreshExtras)("toolbarTemplate",r)("encodeCustomStateFunc",e.encodeCustomStateFunc)("select",e.select)("savePreprocessing",e.savePreprocessing)}}function bQ(e,t){if(1&e&&o.Qb(0,"t-application-page-not-found",11),2&e){const e=o.lc();o.sc("showHome",!e.isPopupMode)}}function fQ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.formatSerial(null==e?null:e.SerialNumber))}}function mQ(e,t){1&e&&o.Qb(0,"div",14)}function gQ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",15),o.Vb(1,"button",16),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onOpen(t)})),o.Qb(2,"fa-icon",17),o.Vb(3,"span",18),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("placement",t.actionsDropdownPlacement)("ngbTooltip",t.updateStateTooltip(e)),o.Bb(1),o.sc("disabled",!t.hasPermissionToUpdateState(e)),o.Bb(3),o.Vc("\xa0\xa0",o.nc(5,4,"Open"),"")}}function pQ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",15),o.Vb(1,"button",19),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCancel(t)})),o.Qb(2,"fa-icon",20),o.Vb(3,"span",18),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(),t=e.model,n=e.extras,i=o.lc();o.sc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.cancelTooltip(t,null==n?null:n.RequiredSignatures)),o.Bb(1),o.sc("disabled",i.disableCancel(t,null==n?null:n.RequiredSignatures)),o.Bb(3),o.Vc("\xa0\xa0",o.nc(5,4,"Cancel"),"")}}function hQ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",15),o.Vb(1,"button",21),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onClose(t)})),o.Qb(2,"fa-icon",22),o.Vb(3,"span",18),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(),t=e.model,n=e.extras,i=o.lc();o.sc("placement",i.actionsDropdownPlacement)("ngbTooltip",i.closeTooltip(t,null==n?null:n.RequiredSignatures)),o.Bb(1),o.sc("disabled",i.disableClose(t,null==n?null:n.RequiredSignatures)),o.Bb(3),o.Vc("\xa0\xa0",o.nc(5,4,"Close"),"")}}function vQ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",15),o.Vb(1,"button",16),o.hc("click",(function(){o.Ic(e);const t=o.lc(),n=t.isEdit,i=t.model,c=o.lc();return!n&&c.onUncancel(i)})),o.Qb(2,"fa-icon",17),o.Vb(3,"span",18),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("placement",t.actionsDropdownPlacement)("ngbTooltip",t.updateStateTooltip(e)),o.Bb(1),o.sc("disabled",!t.hasPermissionToUpdateState(e)),o.Bb(3),o.Vc("\xa0\xa0",o.nc(5,4,"Uncancel"),"")}}function IQ(e,t){if(1&e&&(o.Rc(0,mQ,1,0,"div",12),o.Rc(1,gQ,6,6,"div",13),o.Rc(2,pQ,6,6,"div",13),o.Rc(3,hQ,6,6,"div",13),o.Rc(4,vQ,6,6,"div",13)),2&e){const e=t.model,n=t.extras,i=t.isEdit,c=o.lc();o.sc("ngIf",!i&&c.showClose(e,null==n?null:n.RequiredSignatures)||c.showClose(e,null==n?null:n.RequiredSignatures)),o.Bb(1),o.sc("ngIf",!i&&c.showOpen(e,null==n?null:n.RequiredSignatures)),o.Bb(1),o.sc("ngIf",!i&&c.showCancel(e,null==n?null:n.RequiredSignatures)),o.Bb(1),o.sc("ngIf",!i&&c.showClose(e,null==n?null:n.RequiredSignatures)),o.Bb(1),o.sc("ngIf",!i&&c.showUncancel(e,null==n?null:n.RequiredSignatures))}}function yQ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Gb("active",t.isStateActive(0,e)),o.Bb(2),o.Uc(o.nc(3,3,"Line_State_0"))}}function wQ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Gb("active",t.isStateActive(1,e)),o.Bb(2),o.Uc(o.nc(3,3,"Line_State_1"))}}function CQ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Gb("active",t.isStateActive(2,e)),o.Bb(2),o.Uc(o.nc(3,3,"Line_State_2"))}}function MQ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Gb("active",t.isStateActive(3,e)),o.Bb(2),o.Uc(o.nc(3,3,"Line_State_3"))}}function VQ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Gb("active",t.isStateActive(4,e)),o.Bb(2),o.Uc(o.nc(3,3,"Line_State_4"))}}function TQ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Gb("active",t.isDocumentStateActive(0,e)),o.Bb(2),o.Uc(o.nc(3,3,"Document_State_0"))}}function EQ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Gb("active",t.isDocumentStateActive(1,e)),o.Bb(2),o.Uc(o.nc(3,3,"Document_State_1"))}}function xQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_0")))}function UQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_1")))}function RQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_2")))}function DQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_3")))}function BQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_4")))}function SQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Document_State_0")))}function kQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Document_State_1")))}function OQ(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",26),o.Rc(2,yQ,4,5,"div",27),o.Rc(3,wQ,4,5,"div",27),o.Rc(4,CQ,4,5,"div",27),o.Rc(5,MQ,4,5,"div",27),o.Rc(6,VQ,4,5,"div",27),o.Rc(7,TQ,4,5,"div",27),o.Rc(8,EQ,4,5,"div",27),o.Ub(),o.Vb(9,"div",28),o.Rc(10,xQ,3,3,"span",29),o.Rc(11,UQ,3,3,"span",29),o.Rc(12,RQ,3,3,"span",29),o.Rc(13,DQ,3,3,"span",29),o.Rc(14,BQ,3,3,"span",29),o.Rc(15,SQ,3,3,"span",29),o.Rc(16,kQ,3,3,"span",29),o.Ub(),o.Sb()),2&e){const e=o.lc().model,t=o.lc();o.Bb(2),o.sc("ngIf",t.isStateVisible(0,e)),o.Bb(1),o.sc("ngIf",t.isStateVisible(1,e)),o.Bb(1),o.sc("ngIf",t.isStateVisible(2,e)),o.Bb(1),o.sc("ngIf",t.isStateVisible(3,e)),o.Bb(1),o.sc("ngIf",t.isStateVisible(4,e)),o.Bb(1),o.sc("ngIf",t.isDocumentStateVisible(0,e)),o.Bb(1),o.sc("ngIf",t.isDocumentStateVisible(1,e)),o.Bb(2),o.sc("ngIf",t.isStateActive(0,e)),o.Bb(1),o.sc("ngIf",t.isStateActive(1,e)),o.Bb(1),o.sc("ngIf",t.isStateActive(2,e)),o.Bb(1),o.sc("ngIf",t.isStateActive(3,e)),o.Bb(1),o.sc("ngIf",t.isStateActive(4,e)),o.Bb(1),o.sc("ngIf",t.isDocumentStateActive(0,e)),o.Bb(1),o.sc("ngIf",t.isDocumentStateActive(1,e))}}function _Q(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_minus_1")))}function LQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_minus_2")))}function AQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_minus_3")))}function FQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Line_State_minus_4")))}function PQ(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Document_State_minus_1")))}function NQ(e,t){if(1&e&&(o.Vb(0,"div",30),o.Rc(1,_Q,3,3,"span",29),o.Rc(2,LQ,3,3,"span",29),o.Rc(3,AQ,3,3,"span",29),o.Rc(4,FQ,3,3,"span",29),o.Rc(5,PQ,3,3,"span",29),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.sc("ngIf",t.isNegativeStateActive(1,e)),o.Bb(1),o.sc("ngIf",t.isNegativeStateActive(2,e)),o.Bb(1),o.sc("ngIf",t.isNegativeStateActive(3,e)),o.Bb(1),o.sc("ngIf",t.isNegativeStateActive(4,e)),o.Bb(1),o.sc("ngIf",t.isNegativeDocumentStateActive(1,e))}}function jQ(e,t){if(1&e&&(o.Vb(0,"div",23),o.Rc(1,OQ,17,14,"ng-container",24),o.Rc(2,NQ,6,5,"ng-template",null,25,o.Sc),o.Ub()),2&e){const e=t.model,n=o.Fc(3),i=o.lc();o.Bb(1),o.sc("ngIf",i.isPositiveState(e))("ngIfElse",n)}}function WQ(e,t){if(1&e&&(o.Vb(0,"h2",77),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.Vc("",t.formatSerial(null==e?null:e.SerialNumber)," ")}}const $Q=function(){return{updateOn:"blur"}};function qQ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-serial-editor",78),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.SerialNumber=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("ngModel",e.SerialNumber)("ngModelOptions",o.vc(4,$Q))("codeWidth",t.codeWidth)("prefix",t.serialPrefix)}}function QQ(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.PostingDate),o.Bb(2),o.Uc(o.nc(3,2,null==e?null:e.PostingDate))}}function HQ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",83),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.PostingDate=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("disabled",t.readonlyDocumentPostingDate(e))("required",t.requireDocumentPostingDate(e))("ngModel",e.PostingDate)("ngModelOptions",o.vc(4,$Q))}}function GQ(e,t){if(1&e&&(o.Vb(0,"t-form-group",79),o.Rc(1,QQ,4,4,"t-restricted",80),o.Rc(2,HQ,1,5,"t-date-picker",81),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.lc();o.sc("label",c.labelDocumentPostingDate(t))("labelContextMenu",i)("disableLabelMenu",!(n&&c.showDocumentPostingDateIsCommon(t)))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.PostingDate),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function zQ(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Clearance),o.Bb(2),o.Uc(t.clearanceDisplay(null==e?null:e.Clearance))}}function JQ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-selector",86),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Clearance=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Clearance)("choices",t.clearanceChoices)}}function KQ(e,t){if(1&e&&(o.Vb(0,"t-form-group",84),o.mc(1,"translate"),o.Rc(2,zQ,3,2,"t-restricted",80),o.Rc(3,JQ,1,2,"t-selector",85),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit;o.sc("label",o.nc(1,4,"Document_Clearance"))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Clearance),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function YQ(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();var n;const i="../../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.CustodianId))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CustodianId),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.CustodianId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",null==e?null:e.CustodianId,"Name")," ")}}function XQ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",90),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.CustodianId=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.CustodianId)("definitionIds",t.documentCustodianDefinitionIds(e))("filter",t.filterDocumentCustodian(e))("required",t.requireDocumentCustodian(e))("disabled",t.readonlyDocumentCustodian(e))}}function ZQ(e,t){if(1&e&&(o.Tb(0),o.Rc(1,YQ,3,4,"t-restricted",80),o.Rc(2,XQ,1,5,"t-relations-picker",88),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function eH(e,t){if(1&e&&(o.Vb(0,"t-form-group",87),o.Rc(1,ZQ,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentCustodian(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodianId),o.Bb(1),o.sc("ngIf",null==t?null:t.CustodianIsCommon)("ngIfElse",c)}}function tH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();var n;const i="../../../custodies/"+(null==(n=t.ws.get("Custody",null==e?null:e.CustodyId))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CustodyId),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.CustodyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Custody",null==e?null:e.CustodyId,"Name")," ")}}function nH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custodies-picker",90),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.CustodyId=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.CustodyId)("definitionIds",t.documentCustodyDefinitionIds(e))("filter",t.filterDocumentCustody(e))("required",t.requireDocumentCustody(e))("disabled",t.readonlyDocumentCustody(e))}}function iH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,tH,3,4,"t-restricted",80),o.Rc(2,nH,1,5,"t-custodies-picker",88),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function oH(e,t){if(1&e&&(o.Vb(0,"t-form-group",91),o.Rc(1,iH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentCustody(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CustodyId),o.Bb(1),o.sc("ngIf",null==t?null:t.CustodyIsCommon)("ngIfElse",c)}}function cH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();var n;const i="../../../relations/"+(null==(n=t.ws.get("Relation",null==e?null:e.ParticipantId))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ParticipantId),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.ParticipantId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",null==e?null:e.ParticipantId,"Name")," ")}}function rH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",90),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.ParticipantId=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.ParticipantId)("definitionIds",t.documentParticipantDefinitionIds(e))("filter",t.filterDocumentParticipant(e))("required",t.requireDocumentParticipant(e))("disabled",t.readonlyDocumentParticipant(e))}}function sH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,cH,3,4,"t-restricted",80),o.Rc(2,rH,1,5,"t-relations-picker",88),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function lH(e,t){if(1&e&&(o.Vb(0,"t-form-group",92),o.Rc(1,sH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentParticipant(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ParticipantId),o.Bb(1),o.sc("ngIf",null==t?null:t.ParticipantIsCommon)("ngIfElse",c)}}function aH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();var n;const i="../../../resources/"+(null==(n=t.ws.get("Resource",null==e?null:e.ResourceId))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ResourceId),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.ResourceId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Resource",null==e?null:e.ResourceId,"Name")," ")}}function uH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resources-picker",90),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.ResourceId=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.ResourceId)("definitionIds",t.documentResourceDefinitionIds(e))("filter",t.filterDocumentResource(e))("required",t.requireDocumentResource(e))("disabled",t.readonlyDocumentResource(e))}}function dH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,aH,3,4,"t-restricted",80),o.Rc(2,uH,1,5,"t-resources-picker",88),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function bH(e,t){if(1&e&&(o.Vb(0,"t-form-group",93),o.Rc(1,dH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentResource(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ResourceId),o.Bb(1),o.sc("ngIf",null==t?null:t.ResourceIsCommon)("ngIfElse",c)}}function fH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",96),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CenterId),o.Bb(1),o.sc("itemId",null==e?null:e.CenterId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Center",null==e?null:e.CenterId,"Name")," ")}}function mH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",97),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.CenterId=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.CenterId)("required",t.requireDocumentCenter(e))("disabled",t.readonlyDocumentCenter(e))("filter",t.filterDocumentCenter(e))}}function gH(e,t){if(1&e&&(o.Vb(0,"t-form-group",94),o.Rc(1,fH,3,3,"t-restricted",80),o.Rc(2,mH,1,4,"t-centers-picker",95),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.lc();o.sc("label",c.labelDocumentCenter(t))("labelContextMenu",i)("disableLabelMenu",!(n&&c.showDocumentCenterIsCommon(t)))("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CenterId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}function pH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",100),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.CurrencyId),o.Bb(1),o.sc("itemId",null==e?null:e.CurrencyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Currency",null==e?null:e.CurrencyId,"Name")," ")}}function hH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",101),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.CurrencyId=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.CurrencyId)("filter",t.filterDocumentCurrency(e))("required",t.requireDocumentCurrency(e))("disabled",t.readonlyDocumentCurrency(e))}}function vH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,pH,3,3,"t-restricted",80),o.Rc(2,hH,1,4,"t-currencies-picker",99),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function IH(e,t){if(1&e&&(o.Vb(0,"t-form-group",98),o.Rc(1,vH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentCurrency(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.CurrencyId),o.Bb(1),o.sc("ngIf",null==t?null:t.CurrencyIsCommon)("ngIfElse",c)}}function yH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.mc(2,"accounting"),o.Ub()),2&e){const e=o.lc(3).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Quantity),o.Bb(1),o.Vc(" ",o.oc(2,2,null==e?null:e.Quantity,"1.0-4")," ")}}function wH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",104),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Quantity=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.Quantity)("ngModelOptions",o.vc(6,$Q))("minDecimalPlaces",0)("maxDecimalPlaces",4)("required",t.requireDocumentQuantity(e))("disabled",t.readonlyDocumentQuantity(e))}}function CH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,yH,3,5,"t-restricted",80),o.Rc(2,wH,1,7,"t-decimal-editor",103),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function MH(e,t){if(1&e&&(o.Vb(0,"t-form-group",102),o.Rc(1,CH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentQuantity(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Quantity),o.Bb(1),o.sc("ngIf",null==t?null:t.QuantityIsCommon)("ngIfElse",c)}}function VH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();var n;const i="../../../units/"+(null==(n=t.ws.get("Unit",null==e?null:e.UnitId))?null:n.DefinitionId);o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.UnitId),o.Bb(1),o.sc("link",i)("itemId",null==e?null:e.UnitId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Unit",null==e?null:e.UnitId,"Name")," ")}}function TH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-units-picker",101),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.UnitId=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.UnitId)("filter",t.filterDocumentUnit(e))("required",t.requireDocumentUnit(e))("disabled",t.readonlyDocumentUnit(e))}}function EH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,VH,3,4,"t-restricted",80),o.Rc(2,TH,1,4,"t-units-picker",99),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function xH(e,t){if(1&e&&(o.Vb(0,"t-form-group",105),o.Rc(1,EH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentUnit(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.UnitId),o.Bb(1),o.sc("ngIf",null==t?null:t.UnitIsCommon)("ngIfElse",c)}}function UH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(3).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Time1),o.Bb(1),o.Vc(" ",o.nc(2,2,null==e?null:e.Time1)," ")}}function RH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Time1=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.Time1)("ngModelOptions",o.vc(4,$Q))("required",t.requireDocumentTime1(e))("disabled",t.readonlyDocumentTime1(e))}}function DH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,UH,3,4,"t-restricted",80),o.Rc(2,RH,1,5,"t-date-picker",107),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function BH(e,t){if(1&e&&(o.Vb(0,"t-form-group",106),o.Rc(1,DH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentTime1(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time1),o.Bb(1),o.sc("ngIf",null==t?null:t.Time1IsCommon)("ngIfElse",c)}}function SH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(3).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Time2),o.Bb(1),o.Vc(" ",o.nc(2,2,null==e?null:e.Time2)," ")}}function kH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Time2=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.Time2)("ngModelOptions",o.vc(4,$Q))("required",t.requireDocumentTime2(e))("disabled",t.readonlyDocumentTime2(e))}}function OH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,SH,3,4,"t-restricted",80),o.Rc(2,kH,1,5,"t-date-picker",107),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function _H(e,t){if(1&e&&(o.Vb(0,"t-form-group",109),o.Rc(1,OH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentTime2(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.Time2),o.Bb(1),o.sc("ngIf",null==t?null:t.Time2IsCommon)("ngIfElse",c)}}function LH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.ExternalReference),o.Bb(1),o.Vc(" ",null==e?null:e.ExternalReference," ")}}function AH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.ExternalReference=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.ExternalReference)("ngModelOptions",o.vc(4,$Q))("required",t.requireDocumentExternalReference(e))("disabled",t.readonlyDocumentExternalReference(e))}}function FH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,LH,2,2,"t-restricted",80),o.Rc(2,AH,1,5,"t-text-editor",107),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function PH(e,t){if(1&e&&(o.Vb(0,"t-form-group",110),o.Rc(1,FH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentExternalReference(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.ExternalReference),o.Bb(1),o.sc("ngIf",null==t?null:t.ExternalReferenceIsCommon)("ngIfElse",c)}}function NH(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.InternalReference),o.Bb(1),o.Vc(" ",null==e?null:e.InternalReference," ")}}function jH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.InternalReference=t})),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.sc("ngModel",e.InternalReference)("ngModelOptions",o.vc(4,$Q))("required",t.requireDocumentInternalReference(e))("disabled",t.readonlyDocumentInternalReference(e))}}function WH(e,t){if(1&e&&(o.Tb(0),o.Rc(1,NH,2,2,"t-restricted",80),o.Rc(2,jH,1,5,"t-text-editor",107),o.Sb()),2&e){const e=o.lc(2).isEdit;o.Bb(1),o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function $H(e,t){if(1&e&&(o.Vb(0,"t-form-group",111),o.Rc(1,WH,3,2,"ng-container",24),o.Ub()),2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(23),c=o.Fc(19),r=o.lc();o.sc("label",r.labelDocumentInternalReference(t))("labelContextMenu",i)("disableLabelMenu",!n)("serverErrors",null==t||null==t.serverErrors?null:t.serverErrors.InternalReference),o.Bb(1),o.sc("ngIf",null==t?null:t.InternalReferenceIsCommon)("ngIfElse",c)}}function qH(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(null==e?null:e.Memo)}}function QH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Memo=t})),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.sc("ngModel",e.Memo)("ngModelOptions",o.vc(4,$Q))("required",t.requireDocumentMemo(e))("disabled",t.readonlyDocumentMemo(e))}}function HH(e,t){if(1&e&&(o.Vb(0,"t-form-group",112),o.mc(1,"translate"),o.Rc(2,qH,2,1,"div",29),o.Rc(3,QH,1,5,"t-text-editor",107),o.Ub()),2&e){const e=o.lc(),t=e.isEdit,n=e.model,i=o.Fc(23),c=o.lc();o.sc("label",o.nc(1,6,"Memo"))("labelContextMenu",i)("disableLabelMenu",!(t&&c.showDocumentMemoIsCommon(n)))("serverErrors",null==n||null==n.serverErrors?null:n.serverErrors.Memo),o.Bb(2),o.sc("ngIf",!t),o.Bb(1),o.sc("ngIf",t)}}function GH(e,t){if(1&e&&(o.Vb(0,"div",113),o.Vb(1,"span",114),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().isEdit;o.Gb("t-disabled-background",e)("border-bottom",e),o.Bb(2),o.Uc("("+o.nc(3,5,"SpecifiedPerTab")+")")}}function zH(e,t){if(1&e&&(o.Vb(0,"div",113),o.Vb(1,"span",114),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc().isEdit;o.Gb("t-disabled-background",e)("border-bottom",e),o.Bb(2),o.Uc("("+o.nc(3,5,"SpecifiedPerLine")+")")}}function JH(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",115),o.Vb(1,"ul",116),o.Vb(2,"li",117),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.close,c=o.lc().model;return o.lc().onToggleDocumentIsCommon(c,n),i()})),o.Vb(3,"div",118),o.Qb(4,"fa-icon",119),o.Ub(),o.Vb(5,"div",120),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc().model;o.Bb(4),o.sc("icon",n[e]?"expand":"compress"),o.Bb(2),o.Vc(" ",o.nc(7,2,n[e]?"SpecifyPerTab":"SpecifyForAllTabs")," ")}}function KH(e,t){1&e&&(o.Vb(0,"span",128),o.Qb(1,"fa-icon",129),o.Tc(2,"\xa0 "),o.Ub())}function YH(e,t){1&e&&o.Rb(0)}function XH(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Qb(1,"div",142),o.Tc(2," \xa0 "),o.Vb(3,"button",143),o.hc("click",(function(){o.Ic(e);const t=o.lc(5).$implicit,n=o.lc().model;return o.lc().onDeleteForm(t,n)})),o.Qb(4,"fa-icon",144),o.mc(5,"translate"),o.Ub(),o.Tc(6," \xa0 "),o.Vb(7,"button",143),o.hc("click",(function(){o.Ic(e);const t=o.lc(5).$implicit,n=o.lc().model;return o.lc().onCreateForm(t,n)})),o.Qb(8,"fa-icon",145),o.mc(9,"translate"),o.Ub(),o.Sb()}2&e&&(o.Bb(4),o.sc("title",o.nc(5,2,"Delete")),o.Bb(4),o.sc("title",o.nc(9,4,"AddAnotherSwitchToTable")))}function ZH(e,t){1&e&&o.Rb(0)}const eG=function(e,t,n){return{item:e,argument:t,index:0,update:n,isForm:!0}};function tG(e,t){if(1&e&&(o.Tb(0),o.Rc(1,ZH,1,0,"ng-container",140),o.Sb()),2&e){const e=t.$implicit;o.lc(4);const n=o.Fc(7),i=o.lc().$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.yc(2,eG,r.lines(i,c)[0],e,r.dummyUpdate))}}const nG=function(e){return{item:e}};function iG(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",139),o.Rc(2,YH,1,0,"ng-container",140),o.Tc(3," \xa0\xa0 "),o.Rc(4,XH,10,6,"ng-container",29),o.Ub(),o.Rc(5,tG,2,6,"ng-container",141),o.Sb()),2&e){const e=o.lc(4).$implicit,t=o.lc(),n=t.model,i=t.isEdit,c=o.Fc(28),r=o.lc();o.Bb(2),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.wc(4,nG,r.lines(e,n)[0])),o.Bb(2),o.sc("ngIf",i),o.Bb(1),o.sc("ngForOf",r.smartColumnIndices(e,n))}}function oG(e,t){1&e&&(o.Vb(0,"div",147),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NotAdded")," "))}function cG(e,t){if(1&e&&o.Rc(0,oG,3,3,"div",146),2&e){const e=o.lc(5).isEdit;o.sc("ngIf",!e)}}function rG(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",150),o.hc("click",(function(){o.Ic(e);const t=o.lc(5).$implicit,n=o.lc().model;return o.lc().onCreateForm(t,n)})),o.Qb(1,"fa-icon",151),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}function sG(e,t){if(1&e&&(o.Vb(0,"div",148),o.Rc(1,rG,4,3,"button",149),o.Ub()),2&e){const e=o.lc(4).$implicit,t=o.lc().model,n=o.lc();o.Bb(1),o.sc("ngIf",0===n.lines(e,t).length)}}function lG(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",136),o.Rc(2,iG,6,6,"ng-container",24),o.Rc(3,cG,1,1,"ng-template",null,137,o.Sc),o.Ub(),o.Rc(5,sG,2,1,"div",138),o.Sb()),2&e){const e=o.Fc(4),t=o.lc(3).$implicit,n=o.lc(),i=n.model,c=n.isEdit,r=o.lc();o.Bb(1),o.Qc("background-color",r.formColor(t,i)),o.Bb(1),o.sc("ngIf",r.lines(t,i).length>0)("ngIfElse",e),o.Bb(3),o.sc("ngIf",c)}}function aG(e,t){1&e&&o.Rb(0)}const uG=function(e,t){return{columnIndex:e,update:t,isForm:!0}};function dG(e,t){if(1&e&&(o.Tb(0),o.Rc(1,aG,1,0,"ng-container",140),o.Sb()),2&e){const e=o.lc().$implicit;o.lc(4);const t=o.Fc(9),n=o.lc(3);o.Bb(1),o.sc("ngTemplateOutlet",t)("ngTemplateOutletContext",o.xc(2,uG,e,n.dummyUpdate))}}function bG(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group",160),o.Rc(2,dG,2,5,"ng-container",24),o.Ub(),o.Sb()),2&e){const e=t.$implicit,n=o.lc(5).$implicit,i=o.Fc(10),c=o.lc(),r=c.isEdit,s=c.model,l=o.Fc(21),a=o.lc();o.Bb(1),o.sc("labelContextMenu",i)("labelContext",e)("disableLabelMenu",!r)("serverErrors",a.tabHeaderServerErrors(n,e,s))("label",a.columnLabel(n,e)),o.Bb(1),o.sc("ngIf",a.tabIsCommon(n,e,s))("ngIfElse",l)}}function fG(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",161),o.Vb(1,"t-text-editor",162),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(5).$implicit,i=o.lc().model;return o.lc().setBarcode(n,i,t)}))("enter",(function(){o.Ic(e),o.lc(2);const t=o.Fc(2),n=o.lc(3).$implicit,i=o.lc().model;return o.lc().onBarcodeEnter(n,i,t)})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(5).$implicit,t=o.lc().model,n=o.lc();o.Bb(1),o.sc("ngModel",n.getBarcode(e,t))("placeholder",n.barcodeFieldPlaceholder(e))}}function mG(e,t){1&e&&(o.Vb(0,"div",161),o.Qb(1,"t-spinner"),o.Ub())}function gG(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",163),o.Vb(1,"t-error-message",164),o.hc("dismiss",(function(){return o.Ic(e),o.lc(7).clearBarcodeError()})),o.Tc(2),o.Ub(),o.Ub()}if(2&e){const e=o.lc(5).$implicit,t=o.lc().model,n=o.lc();o.Bb(2),o.Vc(" ",n.getBarcodeError(e,t)," ")}}function pG(e,t){if(1&e&&(o.Vb(0,"div",156),o.Rc(1,bG,3,7,"ng-container",141),o.Qb(2,"div",157),o.Rc(3,fG,2,2,"t-form-group",158),o.Rc(4,mG,2,0,"div",158),o.Rc(5,gG,3,1,"div",159),o.Ub()),2&e){const e=o.lc(4).$implicit,t=o.lc(),n=t.model,i=t.isEdit,c=o.lc();o.Bb(1),o.sc("ngForOf",c.smartTabHeaderColumnPaths(e,n)),o.Bb(2),o.sc("ngIf",c.showBarcodeField(e,i)),o.Bb(1),o.sc("ngIf",c.isBarcodeLoading(e,n)),o.Bb(1),o.sc("ngIf",c.showBarcodeError(e,n))}}const hG=function(e){return{0:e}};function vG(e,t){if(1&e&&(o.Vb(0,"tr"),o.Qb(1,"td",168),o.Vb(2,"td",169),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"td",170),o.Tc(6),o.mc(7,"accounting"),o.Ub(),o.Ub()),2&e){const e=t.$implicit,n=o.lc(5).$implicit,i=o.lc().model,c=o.lc();o.Bb(3),o.Vc(" ",o.oc(4,2,"Total0",o.wc(8,hG,c.columnLabel(n,e))),"\xa0\xa0\xa0 "),o.Bb(3),o.Vc(" ",o.oc(7,5,c.smartTotal(n,e,i),c.functional_format)," ")}}function IG(e,t){if(1&e&&(o.Vb(0,"div",165),o.Vb(1,"table",166),o.Vb(2,"tr"),o.Qb(3,"td",167),o.Ub(),o.Rc(4,vG,8,10,"tr",141),o.Vb(5,"tr"),o.Qb(6,"td",167),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc(4).$implicit,t=o.lc(),n=t.model,i=t.isEdit,c=o.lc();o.Bb(4),o.sc("ngForOf",c.smartTotalsColumnIndices(e,n,i))}}function yG(e,t){if(1&e){const e=o.Wb();o.Rc(0,pG,6,4,"div",152),o.Vb(1,"t-table",153,154),o.hc("insert",(function(t){o.Ic(e);const n=o.lc(4).model;return o.lc().onInsertSmartLine(t,n)}))("delete",(function(t){o.Ic(e);const n=o.lc(4).model;return o.lc().onDeleteSmartLine(t,n)})),o.Ub(),o.Rc(3,IG,7,1,"div",155)}if(2&e){o.lc(2);const e=o.Fc(5),t=o.Fc(7),n=o.lc().$implicit,i=o.Fc(8),c=o.lc(),r=c.model,s=c.isEdit,l=o.Fc(28),a=o.lc();o.sc("ngIf",a.showTabHeader(n,r,s)),o.Bb(1),o.sc("dataSource",a.lines(n,r))("isEdit",s)("columnPaths",a.smartColumnPathsForTable(n,r))("headerTemplate",e)("rowTemplate",t)("columnTemplates",a.columnTemplates(n,i,l))("onNewItem",a.onNewSmartLineFactory(n))("highlightFunc",a.highlightLineFactory(r))("attentionItem",a.attentionItem),o.Bb(2),o.sc("ngIf",a.smartTotalsColumnIndices(n,r,s).length>0)}}function wG(e,t){if(1&e&&(o.Rc(0,lG,6,5,"ng-container",24),o.Rc(1,yG,4,11,"ng-template",null,135,o.Sc)),2&e){const e=o.Fc(2),t=o.lc(2).$implicit,n=o.lc().model,i=o.lc();o.sc("ngIf",i.showAsForm(t,n))("ngIfElse",e)}}function CG(e,t){1&e&&o.Rb(0)}function MG(e,t){if(1&e&&(o.Tb(0),o.Rc(1,CG,1,0,"ng-container",171),o.Vb(2,"div",165),o.Vb(3,"table",172),o.Vb(4,"tr"),o.Qb(5,"td",168),o.Vb(6,"td",173),o.Tc(7),o.mc(8,"translate"),o.mc(9,"translate"),o.Ub(),o.Vb(10,"td",174),o.Tc(11),o.mc(12,"accounting"),o.Ub(),o.Ub(),o.Vb(13,"tr"),o.Qb(14,"td"),o.Vb(15,"td",175),o.Tc(16),o.mc(17,"translate"),o.mc(18,"translate"),o.Ub(),o.Vb(19,"td",176),o.Tc(20),o.mc(21,"accounting"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Sb()),2&e){const e=o.lc(3).model,t=o.Fc(36),n=o.lc();o.Bb(1),o.sc("ngTemplateOutlet",t),o.Bb(6),o.Vc(" ",o.oc(8,5,"Total0",o.wc(21,hG,o.nc(9,8,"Debit")))+n.functionalPostfix,"\xa0\xa0\xa0 "),o.Bb(4),o.Vc(" ",o.oc(12,10,n.total(e,1,!0),n.functional_format)," "),o.Bb(5),o.Vc(" ",o.oc(17,13,"Total0",o.wc(23,hG,o.nc(18,16,"Credit")))+n.functionalPostfix,"\xa0\xa0\xa0 "),o.Bb(4),o.Vc(" ",o.oc(21,18,n.total(e,-1,!0),n.functional_format)," ")}}function VG(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=t.argument,n=o.lc(2).$implicit,i=o.lc().isEdit,c=o.lc();o.Qc("text-align",c.columnLabelAlignment(n,e))("min-width",i?120:0,"px"),o.Bb(1),o.Vc(" ",c.columnLabel(n,e),"\xa0\xa0")}}function TG(e,t){1&e&&o.Rb(0)}const EG=function(e,t,n,i,o){return{columnIndex:e,rowIndex:t,line:n,update:i,isForm:o}};function xG(e,t){if(1&e&&(o.Vb(0,"t-form-group-cell",179),o.Rc(1,TG,1,0,"ng-container",140),o.Ub()),2&e){const e=o.lc(),t=e.argument,n=e.item,i=e.index,c=e.update,r=e.isForm;o.lc();const s=o.Fc(9),l=o.lc().$implicit,a=o.lc(2);o.sc("serverErrors",a.lineEntryServerErrors(l,t,n)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.Ac(3,EG,t,i,n,c,r))}}function UG(e,t){1&e&&o.Rb(0)}function RG(e,t){if(1&e&&(o.Vb(0,"t-form-group",180),o.Rc(1,UG,1,0,"ng-container",140),o.Ub()),2&e){const e=o.lc(),t=e.argument,n=e.item,i=e.index,c=e.update,r=e.isForm;o.lc();const s=o.Fc(9),l=o.lc().$implicit,a=o.lc(2);o.sc("serverErrors",a.lineEntryServerErrors(l,t,n))("label",a.columnLabel(l,t)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.Ac(4,EG,t,i,n,c,r))}}function DG(e,t){if(1&e&&(o.Rc(0,xG,2,9,"t-form-group-cell",177),o.Rc(1,RG,2,10,"t-form-group",178)),2&e){const e=t.isForm;o.sc("ngIf",!e),o.Bb(1),o.sc("ngIf",e)}}function BG(e,t){if(1&e&&(o.Vb(0,"t-view-link",192),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("itemId",r.getFieldValue(i,t,n,c)),o.Bb(1),o.Vc(" ",r.accountDisplay(r.getFieldValue(i,t,n,c))," ")}}function SG(e,t){if(1&e&&(o.Vb(0,"t-view-link",100),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("itemId",r.getFieldValue(i,t,n,c)),o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("Currency",r.getFieldValue(i,t,n,c),"Name")," ")}}function kG(e,t){if(1&e&&(o.Vb(0,"t-view-link",89),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,i=e.line,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();var n;const l="../../../relations/"+(null==(n=s.ws.get("Relation",s.getFieldValue(c,t,i,r)))?null:n.DefinitionId);o.sc("link",l)("itemId",s.getFieldValue(c,t,i,r)),o.Bb(1),o.Vc(" ",s.ws.getMultilingualValue("Relation",s.getFieldValue(c,t,i,r),"Name")," ")}}function OG(e,t){if(1&e&&(o.Vb(0,"t-view-link",89),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,i=e.line,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();var n;const l="../../../custodies/"+(null==(n=s.ws.get("Custody",s.getFieldValue(c,t,i,r)))?null:n.DefinitionId);o.sc("link",l)("itemId",s.getFieldValue(c,t,i,r)),o.Bb(1),o.Vc(" ",s.ws.getMultilingualValue("Custody",s.getFieldValue(c,t,i,r),"Name")," ")}}function _G(e,t){if(1&e&&(o.Vb(0,"t-view-link",89),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,i=e.line,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();var n;const l="../../../relations/"+(null==(n=s.ws.get("Relation",s.getFieldValue(c,t,i,r)))?null:n.DefinitionId);o.sc("link",l)("itemId",s.getFieldValue(c,t,i,r)),o.Bb(1),o.Vc(" ",s.ws.getMultilingualValue("Relation",s.getFieldValue(c,t,i,r),"Name")," ")}}function LG(e,t){if(1&e&&(o.Vb(0,"t-view-link",89),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,i=e.line,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();var n;const l="../../../resources/"+(null==(n=s.ws.get("Resource",s.getFieldValue(c,t,i,r)))?null:n.DefinitionId);o.sc("link",l)("itemId",s.getFieldValue(c,t,i,r)),o.Bb(1),o.Vc(" ",s.ws.getMultilingualValue("Resource",s.getFieldValue(c,t,i,r),"Name")," ")}}function AG(e,t){if(1&e&&(o.Vb(0,"t-view-link",96),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("itemId",r.getFieldValue(i,t,n,c)),o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("Center",r.getFieldValue(i,t,n,c),"Name")," ")}}function FG(e,t){if(1&e&&(o.Vb(0,"t-view-link",193),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("itemId",r.getFieldValue(i,t,n,c)),o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("EntryType",r.getFieldValue(i,t,n,c),"Name")," ")}}function PG(e,t){if(1&e&&(o.Vb(0,"div",194),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(2),o.Uc(o.oc(3,1,r.getFieldValue(i,t,n,c),r.MonetaryValue_format(r.entry(i,t,n))))}}function NG(e,t){if(1&e&&(o.Vb(0,"div",194),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(2),o.Uc(o.oc(3,1,r.getFieldValue(i,t,n,c),"1.0-4"))}}function jG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(r.ws.getMultilingualValue("Unit",r.getFieldValue(i,t,n,c),"Name"))}}function WG(e,t){if(1&e&&(o.Vb(0,"div",194),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(2),o.Uc(o.oc(3,1,r.getFieldValue(i,t,n,c),r.functional_format))}}function $G(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(o.nc(2,1,r.getFieldValue(i,t,n,c)))}}function qG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(o.nc(2,1,r.getFieldValue(i,t,n,c)))}}function QG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(r.getFieldValue(i,t,n,c))}}function HG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(r.getFieldValue(i,t,n,c))}}function GG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(r.getFieldValue(i,t,n,c))}}function zG(e,t){if(1&e&&(o.Vb(0,"div",194),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(2),o.Uc(o.oc(3,1,r.getFieldValue(i,t,n,c),r.MonetaryValue_format(r.entry(i,t,n))))}}function JG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(o.nc(2,1,r.getFieldValue(i,t,n,c)))}}function KG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(r.getFieldValue(i,t,n,c))}}function YG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(r.getFieldValue(i,t,n,c)?"Yes":o.nc(2,1,"No"))}}function XG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"accounting"),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(o.oc(2,1,r.getFieldValue(i,t,n,c),"1.0-4"))}}function ZG(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(r.getFieldValue(i,t,n,c))}}function ez(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(o.nc(2,1,r.getFieldValue(i,t,n,c)))}}function tz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Uc(r.getFieldValue(i,t,n,c))}}function nz(e,t){if(1&e&&(o.Tb(0,183),o.Rc(1,BG,2,2,"t-view-link",184),o.Rc(2,SG,2,2,"t-view-link",185),o.Rc(3,kG,2,3,"t-view-link",186),o.Rc(4,OG,2,3,"t-view-link",186),o.Rc(5,_G,2,3,"t-view-link",186),o.Rc(6,LG,2,3,"t-view-link",186),o.Rc(7,AG,2,2,"t-view-link",187),o.Rc(8,FG,2,2,"t-view-link",188),o.Rc(9,PG,4,4,"div",189),o.Rc(10,NG,4,4,"div",189),o.Rc(11,jG,2,1,"span",190),o.Rc(12,WG,4,4,"div",189),o.Rc(13,$G,3,3,"span",190),o.Rc(14,qG,3,3,"span",190),o.Rc(15,QG,2,1,"span",190),o.Rc(16,HG,2,1,"span",190),o.Rc(17,GG,2,1,"span",190),o.Rc(18,zG,4,4,"div",189),o.Rc(19,JG,3,3,"span",190),o.Rc(20,KG,2,1,"span",190),o.Rc(21,YG,3,3,"span",190),o.Rc(22,XG,3,4,"span",190),o.Rc(23,ZG,2,1,"span",190),o.Rc(24,ez,3,3,"span",190),o.Rc(25,tz,2,1,"span",191),o.Sb()),2&e){const e=o.lc().columnIndex,t=o.lc(2).$implicit,n=o.lc(2);o.sc("ngSwitch",n.columnName(t,e)),o.Bb(1),o.sc("ngSwitchCase","AccountId"),o.Bb(1),o.sc("ngSwitchCase","CurrencyId"),o.Bb(1),o.sc("ngSwitchCase","CustodianId"),o.Bb(1),o.sc("ngSwitchCase","CustodyId"),o.Bb(1),o.sc("ngSwitchCase","ParticipantId"),o.Bb(1),o.sc("ngSwitchCase","ResourceId"),o.Bb(1),o.sc("ngSwitchCase","CenterId"),o.Bb(1),o.sc("ngSwitchCase","EntryTypeId"),o.Bb(1),o.sc("ngSwitchCase","MonetaryValue"),o.Bb(1),o.sc("ngSwitchCase","Quantity"),o.Bb(1),o.sc("ngSwitchCase","UnitId"),o.Bb(1),o.sc("ngSwitchCase","Value"),o.Bb(1),o.sc("ngSwitchCase","Time1"),o.Bb(1),o.sc("ngSwitchCase","Time2"),o.Bb(1),o.sc("ngSwitchCase","ExternalReference"),o.Bb(1),o.sc("ngSwitchCase","InternalReference"),o.Bb(1),o.sc("ngSwitchCase","NotedAgentName"),o.Bb(1),o.sc("ngSwitchCase","NotedAmount"),o.Bb(1),o.sc("ngSwitchCase","NotedDate"),o.Bb(1),o.sc("ngSwitchCase","Memo"),o.Bb(1),o.sc("ngSwitchCase","Boolean1"),o.Bb(1),o.sc("ngSwitchCase","Decimal1"),o.Bb(1),o.sc("ngSwitchCase","Text1"),o.Bb(1),o.sc("ngSwitchCase","PostingDate")}}function iz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc(" ",r.accountDisplay(r.getFieldValue(i,t,n,c)),"\u200c ")}}function oz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("Currency",r.getFieldValue(i,t,n,c),"Name"),"\u200c ")}}function cz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,c),"Name"),"\u200c ")}}function rz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("Custody",r.getFieldValue(i,t,n,c),"Name"),"\u200c ")}}function sz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("Relation",r.getFieldValue(i,t,n,c),"Name"),"\u200c ")}}function lz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("Resource",r.getFieldValue(i,t,n,c),"Name"),"\u200c ")}}function az(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("Center",r.getFieldValue(i,t,n,c),"Name"),"\u200c ")}}function uz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc(" ",r.ws.getMultilingualValue("EntryType",r.getFieldValue(i,t,n,c),"Name"),"\u200c ")}}function dz(e,t){if(1&e&&(o.Vb(0,"div",194),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(2),o.Vc("",o.oc(3,1,r.getFieldValue(i,t,n,c),r.MonetaryValue_format(r.entry(i,t,n))),"\u200c")}}function bz(e,t){if(1&e&&(o.Vb(0,"div",194),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(2),o.Uc(o.oc(3,1,r.getFieldValue(i,t,n,c),"1.0-4"))}}function fz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",r.ws.getMultilingualValue("Unit",r.getFieldValue(i,t,n,c),"Name"),"\u200c")}}function mz(e,t){if(1&e&&(o.Vb(0,"div",194),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(2),o.Vc("",o.oc(3,1,r.getFieldValue(i,t,n,c),r.functional_format),"\u200c")}}function gz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",o.nc(2,1,r.getFieldValue(i,t,n,c)),"\u200c")}}function pz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",o.nc(2,1,r.getFieldValue(i,t,n,c)),"\u200c")}}function hz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",r.getFieldValue(i,t,n,c),"\u200c")}}function vz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",r.getFieldValue(i,t,n,c),"\u200c")}}function Iz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",r.getFieldValue(i,t,n,c),"\u200c")}}function yz(e,t){if(1&e&&(o.Vb(0,"div",194),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(2),o.Vc("",o.oc(3,1,r.getFieldValue(i,t,n,c),r.MonetaryValue_format(r.entry(i,t,n))),"\u200c")}}function wz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",o.nc(2,1,r.getFieldValue(i,t,n,c)),"\u200c")}}function Cz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",r.getFieldValue(i,t,n,c),"\u200c")}}function Mz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",r.getFieldValue(i,t,n,c)?"Yes":o.nc(2,1,"No"),"\u200c")}}function Vz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"accounting"),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",o.oc(2,1,r.getFieldValue(i,t,n,c),"1.0-4"),"\u200c")}}function Tz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",r.getFieldValue(i,t,n,c),"\u200c")}}function Ez(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",o.nc(2,1,r.getFieldValue(i,t,n,c)),"\u200c")}}function xz(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3),t=e.columnIndex,n=e.line,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.Bb(1),o.Vc("",r.getFieldValue(i,t,n,c),"\u200c")}}function Uz(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",196),o.Rc(2,iz,2,1,"span",190),o.Rc(3,oz,2,1,"span",190),o.Rc(4,cz,2,1,"span",190),o.Rc(5,rz,2,1,"span",190),o.Rc(6,sz,2,1,"span",190),o.Rc(7,lz,2,1,"span",190),o.Rc(8,az,2,1,"span",190),o.Rc(9,uz,2,1,"span",190),o.Rc(10,dz,4,4,"div",189),o.Rc(11,bz,4,4,"div",189),o.Rc(12,fz,2,1,"span",190),o.Rc(13,mz,4,4,"div",189),o.Rc(14,gz,3,3,"span",190),o.Rc(15,pz,3,3,"span",190),o.Rc(16,hz,2,1,"span",190),o.Rc(17,vz,2,1,"span",190),o.Rc(18,Iz,2,1,"span",190),o.Rc(19,yz,4,4,"div",189),o.Rc(20,wz,3,3,"span",190),o.Rc(21,Cz,2,1,"span",190),o.Rc(22,Mz,3,3,"span",190),o.Rc(23,Vz,3,4,"span",190),o.Rc(24,Tz,2,1,"span",190),o.Rc(25,Ez,3,3,"span",190),o.Rc(26,xz,2,1,"span",191),o.Ub(),o.Sb()),2&e){const e=o.lc(2).columnIndex,t=o.lc(2).$implicit,n=o.lc(2);o.Bb(1),o.sc("ngSwitch",n.columnName(t,e)),o.Bb(1),o.sc("ngSwitchCase","AccountId"),o.Bb(1),o.sc("ngSwitchCase","CurrencyId"),o.Bb(1),o.sc("ngSwitchCase","CustodianId"),o.Bb(1),o.sc("ngSwitchCase","CustodyId"),o.Bb(1),o.sc("ngSwitchCase","ParticipantId"),o.Bb(1),o.sc("ngSwitchCase","ResourceId"),o.Bb(1),o.sc("ngSwitchCase","CenterId"),o.Bb(1),o.sc("ngSwitchCase","EntryTypeId"),o.Bb(1),o.sc("ngSwitchCase","MonetaryValue"),o.Bb(1),o.sc("ngSwitchCase","Quantity"),o.Bb(1),o.sc("ngSwitchCase","UnitId"),o.Bb(1),o.sc("ngSwitchCase","Value"),o.Bb(1),o.sc("ngSwitchCase","Time1"),o.Bb(1),o.sc("ngSwitchCase","Time2"),o.Bb(1),o.sc("ngSwitchCase","ExternalReference"),o.Bb(1),o.sc("ngSwitchCase","InternalReference"),o.Bb(1),o.sc("ngSwitchCase","NotedAgentName"),o.Bb(1),o.sc("ngSwitchCase","NotedAmount"),o.Bb(1),o.sc("ngSwitchCase","NotedDate"),o.Bb(1),o.sc("ngSwitchCase","Memo"),o.Bb(1),o.sc("ngSwitchCase","Boolean1"),o.Bb(1),o.sc("ngSwitchCase","Decimal1"),o.Bb(1),o.sc("ngSwitchCase","Text1"),o.Bb(1),o.sc("ngSwitchCase","PostingDate")}}function Rz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-accounts-picker",205),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("filter",r.getFilter(i,n))}}function Dz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",206),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("filter",r.getFilter(i,n))}}function Bz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",207),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("definitionIds",r.definitionIdsCustodian_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,c))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectCustodian_Smart(i))}}function Sz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custodies-picker",207),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("definitionIds",r.definitionIdsCustody_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,c))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectCustody_Smart(i))}}function kz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",207),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("definitionIds",r.definitionIdsParticipant_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,c))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectParticipant_Smart(i))}}function Oz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resources-picker",207),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("definitionIds",r.definitionIdsResource_Smart(i,n))("ngModel",r.getFieldValue(i,n,t,c))("filter",r.getFilter(i,n))("additionalSelect",r.additionalSelectResource_Smart(i))}}function _z(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",208),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("filter",r.getFilter(i,n))}}function Lz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",209),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("filter",r.entryTypeFilter(i,n))("ngModel",r.getFieldValue(i,n,t,c))}}function Az(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",210),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=e.isForm,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();o.sc("required",!(t&&t.PH)&&s.isRequired(c,n,t,r))("ngModel",s.getFieldValue(c,n,t,r))("ngModelOptions",o.vc(6,$Q))("minDecimalPlaces",s.MonetaryValue_decimals(s.entry(c,n,t)))("maxDecimalPlaces",s.MonetaryValue_decimals(s.entry(c,n,t)))("textAlignment",i?null:"right")}}function Fz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",210),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=e.isForm,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();o.sc("required",!(t&&t.PH)&&s.isRequired(c,n,t,r))("ngModel",s.getFieldValue(c,n,t,r))("ngModelOptions",o.vc(6,$Q))("minDecimalPlaces",0)("maxDecimalPlaces",4)("textAlignment",i?null:"right")}}function Pz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-units-picker",208),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("filter",r.getFilter(i,n))}}function Nz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",210),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=e.isForm,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();o.sc("required",!(t&&t.PH)&&s.isRequired(c,n,t,r))("ngModel",s.getFieldValue(c,n,t,r))("ngModelOptions",o.vc(6,$Q))("minDecimalPlaces",s.functional_decimals)("maxDecimalPlaces",s.functional_decimals)("textAlignment",i?null:"right")}}function jz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function Wz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function $z(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function qz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function Qz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function Hz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",210),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=e.isForm,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();o.sc("required",!(t&&t.PH)&&s.isRequired(c,n,t,r))("ngModel",s.getFieldValue(c,n,t,r))("ngModelOptions",o.vc(6,$Q))("minDecimalPlaces",s.MonetaryValue_decimals(s.entry(c,n,t)))("maxDecimalPlaces",s.MonetaryValue_decimals(s.entry(c,n,t)))("textAlignment",i?null:"right")}}function Gz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function zz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function Jz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",212),o.Vb(1,"input",213),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub(),o.Vb(2,"label",214),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3),t=e.rowIndex,n=e.columnIndex,i=e.line,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();o.Bb(1),o.uc("id","standardandpure",t,""),o.sc("ngModel",s.getFieldValue(c,n,i,r))("required",!(i&&i.PH)&&s.isRequired(c,n,i,r)),o.Bb(1),o.uc("for","standardandpure",t,"")}}function Kz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",210),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=e.isForm,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();o.sc("required",!(t&&t.PH)&&s.isRequired(c,n,t,r))("ngModel",s.getFieldValue(c,n,t,r))("ngModelOptions",o.vc(6,$Q))("minDecimalPlaces",0)("maxDecimalPlaces",4)("textAlignment",i?null:"right")}}function Yz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function Xz(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",211),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(3),i=n.columnIndex,c=n.line,r=n.update,s=o.lc(2).$implicit,l=o.lc().model,a=o.lc();return a.setFieldValue(s,i,c,l,t),a.onSmartLineUpdated(r,c,l)})),o.Ub()}if(2&e){const e=o.lc(3),t=e.line,n=e.columnIndex,i=o.lc(2).$implicit,c=o.lc().model,r=o.lc();o.sc("required",!(t&&t.PH)&&r.isRequired(i,n,t,c))("ngModel",r.getFieldValue(i,n,t,c))("ngModelOptions",o.vc(3,$Q))}}function Zz(e,t){if(1&e&&(o.Tb(0,183),o.Rc(1,Rz,1,3,"t-accounts-picker",197),o.Rc(2,Dz,1,3,"t-currencies-picker",198),o.Rc(3,Bz,1,5,"t-relations-picker",199),o.Rc(4,Sz,1,5,"t-custodies-picker",199),o.Rc(5,kz,1,5,"t-relations-picker",199),o.Rc(6,Oz,1,5,"t-resources-picker",199),o.Rc(7,_z,1,3,"t-centers-picker",200),o.Rc(8,Lz,1,3,"t-entry-types-picker",201),o.Rc(9,Az,1,7,"t-decimal-editor",202),o.Rc(10,Fz,1,7,"t-decimal-editor",202),o.Rc(11,Pz,1,3,"t-units-picker",200),o.Rc(12,Nz,1,7,"t-decimal-editor",202),o.Rc(13,jz,1,4,"t-date-picker",203),o.Rc(14,Wz,1,4,"t-date-picker",203),o.Rc(15,$z,1,4,"t-text-editor",203),o.Rc(16,qz,1,4,"t-text-editor",203),o.Rc(17,Qz,1,4,"t-text-editor",203),o.Rc(18,Hz,1,7,"t-decimal-editor",202),o.Rc(19,Gz,1,4,"t-date-picker",203),o.Rc(20,zz,1,4,"t-text-editor",203),o.Rc(21,Jz,4,4,"div",204),o.Rc(22,Kz,1,7,"t-decimal-editor",202),o.Rc(23,Yz,1,4,"t-text-editor",203),o.Rc(24,Xz,1,4,"t-date-picker",203),o.Sb()),2&e){const e=o.lc(2).columnIndex,t=o.lc(2).$implicit,n=o.lc(2);o.sc("ngSwitch",n.columnName(t,e)),o.Bb(1),o.sc("ngSwitchCase","AccountId"),o.Bb(1),o.sc("ngSwitchCase","CurrencyId"),o.Bb(1),o.sc("ngSwitchCase","CustodianId"),o.Bb(1),o.sc("ngSwitchCase","CustodyId"),o.Bb(1),o.sc("ngSwitchCase","ParticipantId"),o.Bb(1),o.sc("ngSwitchCase","ResourceId"),o.Bb(1),o.sc("ngSwitchCase","CenterId"),o.Bb(1),o.sc("ngSwitchCase","EntryTypeId"),o.Bb(1),o.sc("ngSwitchCase","MonetaryValue"),o.Bb(1),o.sc("ngSwitchCase","Quantity"),o.Bb(1),o.sc("ngSwitchCase","UnitId"),o.Bb(1),o.sc("ngSwitchCase","Value"),o.Bb(1),o.sc("ngSwitchCase","Time1"),o.Bb(1),o.sc("ngSwitchCase","Time2"),o.Bb(1),o.sc("ngSwitchCase","ExternalReference"),o.Bb(1),o.sc("ngSwitchCase","InternalReference"),o.Bb(1),o.sc("ngSwitchCase","NotedAgentName"),o.Bb(1),o.sc("ngSwitchCase","NotedAmount"),o.Bb(1),o.sc("ngSwitchCase","NotedDate"),o.Bb(1),o.sc("ngSwitchCase","Memo"),o.Bb(1),o.sc("ngSwitchCase","Boolean1"),o.Bb(1),o.sc("ngSwitchCase","Decimal1"),o.Bb(1),o.sc("ngSwitchCase","Text1"),o.Bb(1),o.sc("ngSwitchCase","PostingDate")}}function eJ(e,t){if(1&e&&(o.Rc(0,Uz,27,25,"ng-container",24),o.Rc(1,Zz,25,25,"ng-template",null,195,o.Sc)),2&e){const e=o.Fc(2),t=o.lc(),n=t.columnIndex,i=t.line,c=o.lc(2).$implicit,r=o.lc().model,s=o.lc();o.sc("ngIf",s.isReadOnly(c,n,i,r))("ngIfElse",e)}}function tJ(e,t){if(1&e&&(o.Rc(0,nz,26,25,"ng-container",181),o.Rc(1,eJ,3,2,"ng-template",null,182,o.Sc)),2&e){const e=o.Fc(2),t=o.lc(3).isEdit;o.sc("ngIf",!t)("ngIfElse",e)}}function nJ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Vb(3,"t-view-link",232),o.Tc(4),o.Ub(),o.Ub()),2&e){const e=o.lc(2).$implicit,t=o.lc(5);o.Bb(1),o.Vc(" ",o.nc(2,3,"OnBehalfOf"),""),o.Bb(2),o.sc("itemId",e.OnBehalfOfUserId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.OnBehalfOfUserId,"Name")," ")}}function iJ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span",236),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=o.lc(3).$implicit,t=o.lc(3).$implicit,n=o.lc(2);o.Bb(2),o.Vc("",o.nc(3,2,"Signature_Reason"),":\xa0"),o.Bb(3),o.Uc(n.reasonDisplay(t,e.ReasonId))}}function oJ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span",236),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=o.lc(3).$implicit;o.Bb(2),o.Vc("",o.nc(3,2,"Signature_ReasonDetails"),":\xa0"),o.Bb(3),o.Uc(e.ReasonDetails)}}function cJ(e,t){if(1&e&&(o.Tb(0),o.Tc(1," \xa0\xa0 "),o.Vb(2,"div",235),o.Rc(3,iJ,6,4,"div",29),o.Rc(4,oJ,6,4,"div",29),o.Ub(),o.Sb()),2&e){const e=o.lc(2).$implicit;o.Bb(3),o.sc("ngIf",!!e.ReasonId),o.Bb(1),o.sc("ngIf",!!e.ReasonDetails)}}function rJ(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",229),o.Qb(2,"t-image",230),o.Ub(),o.Vb(3,"div",231),o.Vb(4,"span"),o.Vb(5,"t-view-link",232),o.Tc(6),o.Ub(),o.Rc(7,nJ,5,5,"span",29),o.Ub(),o.Ub(),o.Vb(8,"div",233),o.Vb(9,"div",234),o.Vb(10,"span"),o.Tc(11),o.Ub(),o.Ub(),o.Ub(),o.Rc(12,cJ,5,2,"ng-container",29),o.Sb()),2&e){const e=o.lc().$implicit,t=o.lc(5);var n;const i=null==(n=t.ws.get("User",e.SignedById))?null:n.ImageId;o.Bb(2),o.sc("src","users/"+e.SignedById+"/image")("imageId",i)("size",36),o.Bb(3),o.sc("itemId",e.SignedById),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.SignedById,"Name")," "),o.Bb(1),o.sc("ngIf",!!e.OnBehalfOfUserId&&e.SignedById!==e.OnBehalfOfUserId),o.Bb(1),o.Gb("text-success",e.ToState>0)("text-danger",e.ToState<0),o.Bb(1),o.Gb("t-positive-stamp",e.ToState>0)("t-negative-stamp",e.ToState<0),o.Bb(2),o.Uc(t.actionDisplay(e.ToState)),o.Bb(1),o.sc("ngIf",!!e.ReasonDetails||!!e.ReasonId)}}function sJ(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Vb(4,"t-view-link",232),o.Tc(5),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc(2).$implicit,t=o.lc(5);o.Bb(2),o.Vc(" ",o.nc(3,3,"OnBehalfOf"),""),o.Bb(2),o.sc("itemId",e.OnBehalfOfUserId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.OnBehalfOfUserId,"Name")," ")}}function lJ(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",237),o.Vb(2,"button",238),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(3).$implicit;return o.lc(2).onSignNo(n,t)})),o.Qb(3,"fa-icon",119),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub(),o.Ub(),o.Vb(6,"div",237),o.Vb(7,"button",239),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit;return o.lc(5).onSignYes(t)})),o.Qb(8,"fa-icon",119),o.Vb(9,"span"),o.Tc(10),o.Ub(),o.Ub(),o.Ub(),o.Rc(11,sJ,6,5,"div",29),o.Sb()}if(2&e){const e=o.lc().$implicit,t=o.lc(3).$implicit,n=o.lc().model,i=o.lc();o.Bb(1),o.sc("ngbTooltip",i.signTooltip(e,t,n)),o.Bb(1),o.sc("disabled",i.disableSign(e,t,n)),o.Bb(1),o.sc("icon",i.negativeActionIcon(e.ToState)),o.Bb(2),o.Vc("\xa0\xa0",i.negativeActionDisplay(e.ToState),""),o.Bb(1),o.sc("ngbTooltip",i.signTooltip(e,t,n)),o.Bb(1),o.sc("disabled",i.disableSign(e,t,n)),o.Bb(1),o.sc("icon",i.positiveActionIcon(e.ToState)),o.Bb(2),o.Vc("\xa0\xa0",i.positiveActionDisplay(e.ToState),""),o.Bb(1),o.sc("ngIf",!e.CanSign&&!!e.OnBehalfOfUserId)}}function aJ(e,t){1&e&&o.Rb(0)}function uJ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(5);o.Bb(1),o.Vc("",t.requiredSignatureDisplay(e),"\xa0")}}function dJ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(5);o.Bb(1),o.Uc(t.requiredSignatoryDisplay(e))}}function bJ(e,t){if(1&e&&(o.Vb(0,"t-view-link",240),o.Vb(1,"span"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(5);o.sc("itemId",e.RoleId),o.Bb(2),o.Uc(t.ws.getMultilingualValue("Role",e.RoleId,"Name"))}}function fJ(e,t){if(1&e&&(o.Vb(0,"t-view-link",89),o.Vb(1,"span"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(5);var n;const i="../../../relations/"+(null==(n=t.ws.get("Relation",e.CustodianId))?null:n.DefinitionId);o.sc("link",i)("itemId",e.CustodianId),o.Bb(2),o.Uc(t.ws.getMultilingualValue("Relation",e.CustodianId,"Name"))}}function mJ(e,t){if(1&e&&(o.Vb(0,"t-view-link",232),o.Vb(1,"span"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(5);o.sc("itemId",e.UserId),o.Bb(2),o.Uc(t.ws.getMultilingualValue("User",e.UserId,"Name"))}}function gJ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.mc(3,"number"),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(5);o.Bb(1),o.Vc("\xa0","- "+o.oc(2,1,"Count0Lines",o.wc(6,hG,o.nc(3,4,t.lineIds(e).length))),"")}}function pJ(e,t){if(1&e&&(o.Vb(0,"span",241),o.Tc(1),o.mc(2,"datetimeFormat"),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Vc(" \xa0",o.nc(2,1,e.SignedAt)," ")}}function hJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",242),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit;return o.lc(5).onUnsign(t)})),o.mc(1,"translate"),o.Qb(2,"fa-icon",243),o.Ub()}if(2&e){const e=o.lc().$implicit,t=o.lc(4).model,n=o.lc();o.sc("title",n.disableUnsign(e,t)?"":o.nc(1,2,"Delete"))("disabled",n.disableUnsign(e,t))}}function vJ(e,t){if(1&e&&(o.Vb(0,"div",218),o.Vb(1,"div",219),o.Qb(2,"div",220),o.Rc(3,rJ,13,16,"ng-container",29),o.Rc(4,lJ,12,9,"ng-container",29),o.Rc(5,aJ,1,0,"ng-container",29),o.Ub(),o.Vb(6,"div",221),o.Vb(7,"div",222),o.Vb(8,"span"),o.Rc(9,uJ,2,1,"span",29),o.Rc(10,dJ,2,1,"span",29),o.Rc(11,bJ,3,2,"t-view-link",223),o.Rc(12,fJ,3,3,"t-view-link",224),o.Rc(13,mJ,3,2,"t-view-link",225),o.Rc(14,gJ,4,8,"span",29),o.Ub(),o.Ub(),o.Vb(15,"div"),o.Rc(16,pJ,3,3,"span",226),o.Vb(17,"div",227),o.Rc(18,hJ,3,4,"button",228),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.$implicit,n=o.lc(3).$implicit,i=o.lc().model,c=o.lc();o.Bb(3),o.sc("ngIf",!!e.SignedById),o.Bb(1),o.sc("ngIf",!e.SignedById&&(e.CanSign||e.CanSignOnBehalf)),o.Bb(1),o.sc("ngIf",!e.SignedById&&!(e.CanSign||e.CanSignOnBehalf)),o.Bb(4),o.sc("ngIf","Public"!==e.RuleType),o.Bb(1),o.sc("ngIf","Public"===e.RuleType),o.Bb(1),o.sc("ngIf","ByRole"===e.RuleType),o.Bb(1),o.sc("ngIf","ByCustodian"===e.RuleType),o.Bb(1),o.sc("ngIf","ByUser"===e.RuleType),o.Bb(1),o.sc("ngIf",c.lineIds(e).length!==c.lines(n,i).length),o.Bb(2),o.sc("ngIf",e.SignedAt),o.Bb(1),o.sc("ngbTooltip",c.unsignTooltip(e,i)),o.Bb(1),o.sc("ngIf",c.canUnsign(e))}}function IJ(e,t){if(1&e&&(o.Vb(0,"div",215),o.Vb(1,"div",216),o.Vb(2,"span",169),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Rc(5,vJ,19,12,"div",217),o.Ub()),2&e){const e=o.lc(2).$implicit,t=o.lc(),n=t.model,i=t.extras,c=o.lc();o.Bb(3),o.Uc(o.nc(4,2,"SignaturesAndStamps")),o.Bb(2),o.sc("ngForOf",c.requiredSignaturesForLineDef(n,e,i))}}function yJ(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Rc(1,wG,3,2,"ng-template",null,130,o.Sc),o.Rc(3,MG,22,25,"ng-container",24),o.Ub(),o.Rc(4,VG,2,5,"ng-template",null,131,o.Sc),o.Rc(6,DG,2,2,"ng-template",null,132,o.Sc),o.Rc(8,tJ,3,2,"ng-template",null,133,o.Sc),o.Rc(10,IJ,6,4,"div",134)),2&e){const e=o.Fc(2),t=o.lc().$implicit,i=o.lc(),c=i.model,r=i.isEdit,s=i.extras,l=o.lc();var n=null;const a=!r&&(null==(n=l.requiredSignaturesForLineDef(c,t,s))?null:n.length)>0;o.Gb("p-4",1===(null==c||null==c.EntityMetadata?null:c.EntityMetadata.Lines)),o.sc("metadata",null==c||null==c.EntityMetadata?null:c.EntityMetadata.Lines),o.Bb(3),o.sc("ngIf",l.isManualLine(t))("ngIfElse",e),o.Bb(7),o.sc("ngIf",a)}}function wJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",250),o.hc("click",(function(){o.Ic(e);const t=o.lc(3).$implicit,n=o.lc(),i=n.model,c=n.isEdit;return o.lc().onAutoGenerate(t,i,c)})),o.Tc(1),o.Ub()}if(2&e){const e=o.lc(3).$implicit,t=o.lc(2);o.Bb(1),o.Vc(" ",t.autoGenerateLabel(e)," ")}}function CJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",245),o.Vb(1,"button",246),o.Vb(2,"span",247),o.Qb(3,"fa-icon",248),o.Ub(),o.Ub(),o.Vb(4,"div",249),o.Vb(5,"button",250),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).$implicit,n=o.lc(),i=n.model,c=n.isEdit;return o.lc().onDeleteAll(t,i,c)})),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Rc(8,wJ,2,1,"button",251),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).$implicit,t=o.lc().isEdit,n=o.lc();o.sc("placement",n.commandsDropdownPlacement),o.Bb(6),o.Vc(" ",o.nc(7,3,"DeleteAll")," "),o.Bb(2),o.sc("ngIf",n.showAutoGenerate(e,t))}}function MJ(e,t){if(1&e&&o.Rc(0,CJ,9,5,"div",244),2&e){const e=o.lc(2).isEdit;o.sc("ngIf",e)}}function VJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",115),o.Vb(1,"ul",116),o.Vb(2,"li",117),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.close,c=o.lc().$implicit,r=o.lc().model;return o.lc().onToggleTabIsCommon(c,n,r),i()})),o.Vb(3,"div",118),o.Qb(4,"fa-icon",119),o.Ub(),o.Vb(5,"div",120),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc().$implicit,i=o.lc().model,c=o.lc();o.Bb(4),o.sc("icon",c.tabIsCommon(n,e,i)?"expand":"compress"),o.Bb(2),o.Vc(" ",o.nc(7,2,c.tabIsCommon(n,e,i)?"SpecifyPerLine":"SpecifyForAllLines")," ")}}function TJ(e,t){if(1&e&&(o.Vb(0,"li",121),o.Vb(1,"a",122),o.Rc(2,KH,3,0,"span",123),o.Vb(3,"span",124),o.Tc(4),o.mc(5,"number"),o.Ub(),o.Ub(),o.Rc(6,yJ,11,6,"ng-template",125),o.Rc(7,MJ,1,1,"ng-template",null,126,o.Sc),o.Rc(9,VJ,8,4,"ng-template",null,127,o.Sc),o.Ub()),2&e){const e=t.$implicit,n=o.lc().model,i=o.lc();o.sc("ngbNavItem",e),o.Bb(1),o.Qc("background-color",i.smartTabColor(e,n)),o.Bb(1),o.sc("ngIf",i.showTabErrors(e,n)),o.Bb(2),o.Uc(i.tabTitle(e,n)+(null!=n&&n.Id&&2!==(null==n||null==n.EntityMetadata?null:n.EntityMetadata.Lines)?"":" ("+(i.isManualLine(e)?i.manualEntries(n).length:o.nc(5,5,i.lines(e,n).length))+")"))}}function EJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",245),o.Vb(1,"button",252),o.Vb(2,"span",247),o.Qb(3,"fa-icon",253),o.Ub(),o.Ub(),o.Vb(4,"div",249),o.Vb(5,"button",250),o.hc("click",(function(){o.Ic(e);const t=o.lc().item,n=o.lc().model;return o.lc().toggleHighlight(t,n)})),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc().item,t=o.lc().model,n=o.lc();o.sc("placement",n.commandsDropdownPlacement),o.Bb(6),o.Vc(" ",o.nc(7,2,n.isHighlighted(e,t)?"RemoveHighlight":"AddHighlight")," ")}}function xJ(e,t){1&e&&o.Rc(0,EJ,8,4,"div",244),2&e&&o.sc("ngIf",!t.item.PH)}function UJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",250),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(2).model;return o.lc().onOtherTab(n,i)})),o.Tc(1),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2).model,i=o.lc();o.Bb(1),o.Uc(i.tabTitle(e,n))}}function RJ(e,t){if(1&e&&(o.Vb(0,"li",254),o.Vb(1,"a",255),o.hc("click",(function(){return!1})),o.Vb(2,"span",124),o.Qb(3,"fa-icon",256),o.Ub(),o.Ub(),o.Vb(4,"div",249),o.Rc(5,UJ,2,1,"button",257),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Bb(5),o.sc("ngForOf",t.invisibleTabs(e))}}function DJ(e,t){1&e&&o.Rb(0)}function BJ(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",260),o.Vb(2,"h5",261),o.Tc(3),o.Ub(),o.Ub(),o.Rc(4,DJ,1,0,"ng-container",171),o.Sb()),2&e){const e=o.lc(3).model,t=o.Fc(36),n=o.lc();o.Bb(3),o.Vc(" ",n.bookkeepingManualAdjustmentsTitle(e)+" ("+n.manualEntries(e).length+")"," "),o.Bb(1),o.sc("ngTemplateOutlet",t)}}const SJ=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:3,argument:!0}},kJ=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1,argument:!0}},OJ=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:2,argument:!0}},_J=function(e){return{rowTemplate:e}},LJ=function(e,t,n,i,o,c,r){return{AccountId:e,Debit:t,Credit:n,Center:i,Memo:o,ModifiedWarning:c,Commands:r}};function AJ(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div",260),o.Vb(2,"h5",261),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Qb(5,"t-table",262),o.Rc(6,BJ,5,2,"ng-container",29),o.Vb(7,"div",165),o.Vb(8,"table",172),o.Vb(9,"tr"),o.Qb(10,"td",168),o.Vb(11,"td",173),o.Tc(12),o.mc(13,"translate"),o.mc(14,"translate"),o.Ub(),o.Vb(15,"td",174),o.Tc(16),o.mc(17,"accounting"),o.Ub(),o.Ub(),o.Vb(18,"tr"),o.Qb(19,"td"),o.Vb(20,"td",175),o.Tc(21),o.mc(22,"translate"),o.mc(23,"translate"),o.Ub(),o.Vb(24,"td",176),o.Tc(25),o.mc(26,"accounting"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.Fc(38),n=o.Fc(40),i=o.Fc(46),c=o.Fc(48),r=o.Fc(50),s=o.Fc(52),l=o.Fc(42),a=o.Fc(44),u=o.Fc(56),d=o.Fc(58),b=o.Fc(60),f=o.Fc(62),m=o.lc();o.Gb("p-4",1===(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lines)),o.sc("metadata",null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lines),o.Bb(3),o.Vc(" ",o.nc(4,15,"SmartEntries")+" ("+m.smartEntries(e).length+")",""),o.Bb(2),o.sc("dataSource",m.smartEntries(e))("itemSize",70)("visibleRows",5)("highlightFunc",m.highlightPairFactory(e))("columnPaths",m.manualColumnPaths(e,!0))("columnTemplates",o.Cc(52,LJ,o.xc(33,SJ,t,n),o.xc(36,kJ,i,c),o.xc(39,kJ,r,s),o.xc(42,kJ,l,a),o.xc(45,OJ,u,d),o.wc(48,_J,b),o.wc(50,_J,f))),o.Bb(1),o.sc("ngIf",m.hasManualLines),o.Bb(6),o.Vc(" ",o.oc(13,17,"Total0",o.wc(60,hG,o.nc(14,20,"Debit")))+m.functionalPostfix,"\xa0\xa0\xa0 "),o.Bb(4),o.Vc(" ",o.oc(17,22,m.total(e,1),m.functional_format)," "),o.Bb(5),o.Vc(" ",o.oc(22,25,"Total0",o.wc(62,hG,o.nc(23,28,"Credit")))+m.functionalPostfix,"\xa0\xa0\xa0 "),o.Bb(4),o.Vc(" ",o.oc(26,30,m.total(e,-1),m.functional_format)," ")}}function FJ(e,t){if(1&e&&(o.Vb(0,"li",121),o.Vb(1,"a",258),o.mc(2,"translate"),o.Vb(3,"span",124),o.Qb(4,"fa-icon",259),o.Vb(5,"span"),o.Tc(6),o.mc(7,"number"),o.Ub(),o.Ub(),o.Ub(),o.Rc(8,AJ,27,64,"ng-template",125),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Db(t.attachmentsClass),o.sc("ngbNavItem",-10),o.Bb(1),o.Qc("background-color",t.bookkeepingTabColor(e)),o.sc("title",o.nc(2,8,"Bookkeeping")),o.Bb(5),o.Vc("\xa0\xa0",null!=e&&e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Lines)?"":"("+o.nc(7,10,t.entriesCount(e))+")","")}}function PJ(e,t){1&e&&(o.Vb(0,"span",128),o.Qb(1,"fa-icon",129),o.Tc(2,"\xa0 "),o.Ub())}function NJ(e,t){1&e&&(o.Vb(0,"div",269),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"NoItemsFound")))}function jJ(e,t){1&e&&(o.Vb(0,"div",285),o.Qb(1,"t-spinner",286),o.Ub())}function WJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",282),o.Vb(1,"button",283),o.hc("click",(function(){o.Ic(e);const t=o.lc().index,n=o.lc(4).model;return o.lc().onDownloadAttachment(n,t)})),o.Tc(2),o.Ub(),o.Rc(3,jJ,2,0,"div",284),o.Ub()}if(2&e){const e=o.lc().$implicit,t=o.lc(5);o.Bb(2),o.Uc(t.fileName(e)),o.Bb(1),o.sc("ngIf",e.downloading)}}function $J(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",287),o.Vb(1,"t-form-group",288),o.Vb(2,"t-text-editor",289),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.attachment.FileName=t})),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc().$implicit;o.Bb(1),o.sc("serverErrors",null==e.attachment||null==e.attachment.serverErrors?null:e.attachment.serverErrors.FileName),o.Bb(1),o.sc("ngModel",e.attachment.FileName)("ngModelOptions",o.vc(3,$Q))}}const qJ=function(e,t){return{0:e,1:t}};function QJ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.mc(3,"datetimeFormat"),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(5);o.Bb(1),o.Vc("",o.oc(2,1,"AttachmentAudit",o.xc(6,qJ,o.nc(3,4,e.attachment.CreatedAt),t.ws.getMultilingualValue("User",e.attachment.CreatedById,"Name"))),"\xa0")}}function HJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",293),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).index,n=o.lc(4).model;return o.lc().onDownloadAttachment(n,t)})),o.mc(1,"translate"),o.Qb(2,"fa-icon",294),o.Ub()}2&e&&o.sc("title",o.nc(1,1,"Download"))}function GJ(e,t){1&e&&(o.Vb(0,"div",295),o.Qb(1,"t-spinner",286),o.Ub())}function zJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",290),o.Rc(1,HJ,3,3,"button",291),o.Rc(2,GJ,2,0,"ng-template",null,292,o.Sc),o.Vb(4,"button",293),o.hc("click",(function(){o.Ic(e);const t=o.lc().index,n=o.lc(4).model;return o.lc().onDeleteAttachment(n,t)})),o.mc(5,"translate"),o.Qb(6,"fa-icon",243),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(3),t=o.lc().$implicit;o.Bb(1),o.sc("ngIf",!t.downloading)("ngIfElse",e),o.Bb(3),o.sc("title",o.nc(5,3,"Delete"))}}function JJ(e,t){if(1&e&&(o.Vb(0,"div",272),o.Vb(1,"div",273),o.Vb(2,"div",274),o.Qb(3,"fa-icon",275),o.Ub(),o.Vb(4,"div",276),o.Rc(5,WJ,4,2,"div",277),o.Rc(6,$J,3,4,"ng-template",null,278,o.Sc),o.Vb(8,"div",279),o.Vb(9,"div",280),o.Rc(10,QJ,4,9,"span",29),o.Vb(11,"span"),o.Tc(12),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Rc(13,zJ,7,5,"div",281),o.Ub(),o.Ub()),2&e){const e=t.$implicit,n=t.index,i=o.Fc(7),c=o.lc(4).isEdit,r=o.lc();o.Gb("bg-light",n%2==1e3),o.Bb(3),o.Qc("color",r.colorFromExtension(e.attachment.FileExtension)),o.sc("icon",r.iconFromExtension(e.attachment.FileExtension)),o.Bb(2),o.sc("ngIf",!c)("ngIfElse",i),o.Bb(5),o.sc("ngIf",e.attachment.CreatedById),o.Bb(2),o.Vc("(",r.size(e),")"),o.Bb(1),o.sc("ngIf",c)}}function KJ(e,t){if(1&e&&(o.Vb(0,"div",270),o.Rc(1,JJ,14,10,"div",271),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.sc("ngForOf",t.attachmentWrappers(e))}}function YJ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",296),o.Vb(1,"button",297),o.hc("click",(function(){return o.Ic(e),o.lc(3),o.Fc(34).click()})),o.Qb(2,"fa-icon",298),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3).model;o.Bb(3),o.Vc(" \xa0\xa0",o.nc(4,1,(null==e||null==e.Attachments?null:e.Attachments.length)>0?"UploadMore":"Upload")," ")}}function XJ(e,t){if(1&e&&(o.Rc(0,NJ,4,3,"div",266),o.Rc(1,KJ,2,1,"div",267),o.Rc(2,YJ,5,3,"div",268)),2&e){const e=o.lc(2),t=e.model,n=e.isEdit;o.sc("ngIf",!(null!=t&&null!=t.Attachments&&t.Attachments.length||n)),o.Bb(1),o.sc("ngIf",!(null==t||null==t.Attachments||!t.Attachments.length)),o.Bb(1),o.sc("ngIf",n)}}function ZJ(e,t){if(1&e&&(o.Vb(0,"li",121),o.Vb(1,"a",263),o.Vb(2,"span",264),o.mc(3,"translate"),o.Rc(4,PJ,3,0,"span",123),o.Vb(5,"span"),o.Qb(6,"fa-icon",265),o.Vb(7,"span"),o.Tc(8),o.mc(9,"number"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Rc(10,XJ,3,3,"ng-template",125),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.Db(t.showBookkeepingTab?"":t.attachmentsClass),o.sc("ngbNavItem",-20),o.Bb(2),o.sc("title",o.nc(3,7,"Document_Attachments")),o.Bb(2),o.sc("ngIf",t.showAttachmentsErrors(e)),o.Bb(4),o.Vc("\xa0\xa0",null!=e&&e.Id&&2!==(null==e||null==e.EntityMetadata?null:e.EntityMetadata.Attachments)?"":"("+o.nc(9,9,null==e||null==e.Attachments?null:e.Attachments.length)+")","")}}function eK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(4).model,t=o.lc();var n;const c=null==(n=t.manualLine(e))||null==n.EntityMetadata?null:n.EntityMetadata.PostingDate;var i;o.sc("metadata",c),o.Bb(2),o.Uc(o.nc(3,2,null==(i=t.manualLine(e))?null:i.PostingDate))}}function tK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",289),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(4).model;return o.lc().manualLine(n).PostingDate=t})),o.Ub()}if(2&e){const e=o.lc(4).model,t=o.lc();o.sc("ngModel",t.manualLine(e).PostingDate)("ngModelOptions",o.vc(2,$Q))}}function nK(e,t){if(1&e&&(o.Vb(0,"t-form-group",84),o.mc(1,"translate"),o.Rc(2,eK,4,4,"t-restricted",80),o.Rc(3,tK,1,3,"t-date-picker",302),o.Ub()),2&e){const e=o.lc(3),t=e.model,i=e.isEdit;var n;const c=null==(n=o.lc().manualLine(t))||null==n.serverErrors?null:n.serverErrors.PostingDate;o.sc("label",o.nc(1,4,"Line_PostingDate"))("serverErrors",c),o.Bb(2),o.sc("ngIf",!i),o.Bb(1),o.sc("ngIf",i)}}function iK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(4).model,t=o.lc();var n;const c=null==(n=t.manualLine(e))||null==n.EntityMetadata?null:n.EntityMetadata.Memo;var i;o.sc("metadata",c),o.Bb(2),o.Uc(null==(i=t.manualLine(e))?null:i.Memo)}}function oK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",289),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(4).model;return o.lc().manualLine(n).Memo=t})),o.Ub()}if(2&e){const e=o.lc(4).model,t=o.lc();o.sc("ngModel",t.manualLine(e).Memo)("ngModelOptions",o.vc(2,$Q))}}function cK(e,t){if(1&e&&(o.Vb(0,"t-form-group",84),o.mc(1,"translate"),o.Rc(2,iK,3,2,"t-restricted",80),o.Rc(3,oK,1,3,"t-text-editor",302),o.Ub()),2&e){const e=o.lc(3),t=e.model,i=e.isEdit;var n;const c=null==(n=o.lc().manualLine(t))||null==n.serverErrors?null:n.serverErrors.Memo;o.sc("label",o.nc(1,4,"Memo"))("serverErrors",c),o.Bb(2),o.sc("ngIf",!i),o.Bb(1),o.sc("ngIf",i)}}function rK(e,t){if(1&e&&(o.Vb(0,"div",301),o.Rc(1,nK,4,6,"t-form-group",35),o.Rc(2,cK,4,6,"t-form-group",35),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(1),o.sc("ngIf",!t.showDocumentPostingDate(e)),o.Bb(1),o.sc("ngIf",!t.showDocumentMemo(e))}}const sK=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:3}},lK=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:1}},aK=function(e,t){return{headerTemplate:e,rowTemplate:t,weight:2}},uK=function(e,t){return{headerTemplate:e,rowTemplate:t}},dK=function(e,t,n,i,o,c){return{AccountId:e,Debit:t,Credit:n,Center:i,Memo:o,Commands:c}};function bK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-table",299),o.hc("insert",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().onInsertManualEntry(t,n)}))("delete",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().onDeleteManualEntry(t,n)})),o.Ub(),o.Rc(1,rK,3,2,"div",300)}if(2&e){const e=o.lc(),t=e.model,n=e.isEdit,i=o.Fc(38),c=o.Fc(40),r=o.Fc(46),s=o.Fc(48),l=o.Fc(50),a=o.Fc(52),u=o.Fc(42),d=o.Fc(44),b=o.Fc(56),f=o.Fc(58),m=o.Fc(64),g=o.Fc(66),p=o.lc();o.sc("dataSource",p.manualEntries(t))("isEdit",n)("itemSize",70)("columnPaths",p.manualColumnPaths(t))("columnTemplates",o.Bc(25,dK,o.xc(7,sK,i,c),o.xc(10,lK,r,s),o.xc(13,lK,l,a),o.xc(16,lK,u,d),o.xc(19,aK,b,f),o.xc(22,uK,m,g)))("onNewItem",p.onNewManualEntry),o.Bb(1),o.sc("ngIf",p.showManualLineProps(t))}}function fK(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Entry_Account"))}function mK(e,t){1&e&&(o.Vb(0,"span",306),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"Undefined")))}function gK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",192),o.Tc(2),o.Ub(),o.Rc(3,mK,3,3,"span",305),o.Ub()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc(2);o.sc("metadata",null==t.EntityMetadata?null:t.EntityMetadata.AccountId),o.Bb(1),o.sc("itemId",null==t?null:t.AccountId),o.Bb(1),o.Vc(" ",i.accountDisplay(null==t?null:t.AccountId),""),o.Bb(1),o.sc("ngIf",n&&!(null!=t&&t.AccountId))}}function pK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-accounts-picker",307),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.entry.AccountId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(),t=e.item.entry,n=e.item,i=e.argument,c=o.lc(2);o.sc("ngModel",t.AccountId)("additionalSelect",c.additionalSelectAccount)("filter",c.filterAccount(n,i))}}function hK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",100),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CurrencyId),o.Bb(1),o.sc("itemId",e.CurrencyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")," ")}}function vK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",310),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.CurrencyId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry;o.sc("ngModel",e.CurrencyId)}}function IK(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.mc(2,"translate"),o.Rc(3,hK,3,3,"t-restricted",80),o.Rc(4,vK,1,1,"t-currencies-picker",309),o.Tc(5," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit;o.Bb(1),o.sc("label",o.nc(2,4,"Entry_Currency"))("serverErrors",null==t.serverErrors?null:t.serverErrors.CurrencyId),o.Bb(2),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function yK(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-restricted",82),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Sb()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.Bb(1),o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.MonetaryValue),o.Bb(1),o.Vc(" ",o.oc(3,2,e.MonetaryValue,t.MonetaryValue_format(e))," ")}}function wK(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"t-decimal-editor",311),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.MonetaryValue=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub(),o.Sb()}if(2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.Bb(1),o.sc("ngModel",e.MonetaryValue)("maxDecimalPlaces",t.MonetaryValue_decimals(e))("minDecimalPlaces",t.MonetaryValue_decimals(e))("ngModelOptions",o.vc(4,$Q))}}function CK(e,t){if(1&e&&(o.Tb(0),o.Tc(1," \xa0 "),o.Vb(2,"t-restricted",82),o.Tc(3),o.Ub(),o.Sb()),2&e){const e=o.lc(2).item.entry,t=o.lc().isEdit,n=o.lc();o.Bb(2),o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CurrencyId),o.Bb(1),o.Vc(" ",n.ws.getMultilingualValue("Currency",t?n.readonlyValueCurrencyId(e):e.CurrencyId,"Name")," ")}}function MK(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.mc(2,"translate"),o.Rc(3,yK,4,5,"ng-container",29),o.Rc(4,wK,2,5,"ng-container",29),o.Rc(5,CK,4,2,"ng-container",29),o.Tc(6," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",o.nc(2,5,"Entry_MonetaryValue"))("serverErrors",null==t.serverErrors?null:t.serverErrors.MonetaryValue),o.Bb(2),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n),o.Bb(1),o.sc("ngIf",!c.showCurrency(t))}}function VK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);var n;const i="../../../custodies/"+(null==(n=t.ws.get("Custody",e.CustodyId))?null:n.DefinitionId);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CustodyId),o.Bb(1),o.sc("link",i)("itemId",e.CustodyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Custody",e.CustodyId,"Name")," ")}}function TK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custodies-picker",313),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).item.entry.CustodyId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("ngModel",e.CustodyId)("additionalSelect",t.additionalSelectCustody)("definitionIds",t.definitionIdsCustody_Manual(e))}}function EK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CustodyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Custody",t.readonlyValueCustodyId_Manual(e),"Name")," ")}}function xK(e,t){if(1&e&&(o.Tb(0),o.Rc(1,TK,1,3,"t-custodies-picker",312),o.Rc(2,EK,2,2,"t-restricted",80),o.Sb()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.Bb(1),o.sc("ngIf",!t.readonlyCustody_Manual(e)),o.Bb(1),o.sc("ngIf",t.readonlyCustody_Manual(e))}}function UK(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,VK,3,4,"t-restricted",80),o.Rc(3,xK,3,2,"ng-container",29),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelCustody_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.CustodyId),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function RK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);var n;const i="../../../relations/"+(null==(n=t.ws.get("Relation",e.CustodianId))?null:n.DefinitionId);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CustodianId),o.Bb(1),o.sc("link",i)("itemId",e.CustodianId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",e.CustodianId,"Name")," ")}}function DK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",315),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).item.entry.CustodianId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("ngModel",e.CustodianId)("definitionIds",t.definitionIdsCustodian_Manual(e))}}function BK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CustodianId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",t.readonlyValueCustodianId_Manual(e),"Name")," ")}}function SK(e,t){if(1&e&&(o.Tb(0),o.Rc(1,DK,1,2,"t-relations-picker",314),o.Rc(2,BK,2,2,"t-restricted",80),o.Sb()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.Bb(1),o.sc("ngIf",!t.readonlyCustodian_Manual(e)),o.Bb(1),o.sc("ngIf",t.readonlyCustodian_Manual(e))}}function kK(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,RK,3,4,"t-restricted",80),o.Rc(3,SK,3,2,"ng-container",29),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelCustodian_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.CustodianId),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function OK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);var n;const i="../../../resources/"+(null==(n=t.ws.get("Resource",e.ResourceId))?null:n.DefinitionId);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ResourceId),o.Bb(1),o.sc("link",i)("itemId",e.ResourceId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Resource",e.ResourceId,"Name")," ")}}function _K(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resources-picker",313),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).item.entry.ResourceId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("ngModel",e.ResourceId)("additionalSelect",t.additionalSelectResource)("definitionIds",t.definitionIdsResource_Manual(e))}}function LK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ResourceId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Resource",t.readonlyValueResourceId_Manual(e),"Name")," ")}}function AK(e,t){if(1&e&&(o.Tb(0),o.Rc(1,_K,1,3,"t-resources-picker",312),o.Rc(2,LK,2,2,"t-restricted",80),o.Sb()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.Bb(1),o.sc("ngIf",!t.readonlyResource_Manual(e)),o.Bb(1),o.sc("ngIf",t.readonlyResource_Manual(e))}}function FK(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,OK,3,4,"t-restricted",80),o.Rc(3,AK,3,2,"ng-container",29),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelResource_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.ResourceId),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function PK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",89),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);var n;const i="../../../relations/"+(null==(n=t.ws.get("Relation",e.ParticipantId))?null:n.DefinitionId);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ParticipantId),o.Bb(1),o.sc("link",i)("itemId",e.ParticipantId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",e.ParticipantId,"Name")," ")}}function NK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",315),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).item.entry.ParticipantId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("ngModel",e.ParticipantId)("definitionIds",t.definitionIdsParticipant_Manual(e))}}function jK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ParticipantId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Relation",t.readonlyValueParticipantId_Manual(e),"Name")," ")}}function WK(e,t){if(1&e&&(o.Tb(0),o.Rc(1,NK,1,2,"t-relations-picker",314),o.Rc(2,jK,2,2,"t-restricted",80),o.Sb()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.Bb(1),o.sc("ngIf",!t.readonlyParticipant_Manual(e)),o.Bb(1),o.sc("ngIf",t.readonlyParticipant_Manual(e))}}function $K(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,PK,3,4,"t-restricted",80),o.Rc(3,WK,3,2,"ng-container",29),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelParticipant_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.ParticipantId),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function qK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"span"),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry;o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Quantity),o.Bb(2),o.Uc(o.oc(3,2,e.Quantity,"1.0-4"))}}function QK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",317),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.Quantity=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry;o.sc("ngModel",e.Quantity)("maxDecimalPlaces",4)("minDecimalPlaces",0)("ngModelOptions",o.vc(4,$Q))}}function HK(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.mc(2,"translate"),o.Rc(3,qK,4,5,"t-restricted",80),o.Rc(4,QK,1,5,"t-decimal-editor",316),o.Tc(5," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit;o.Bb(1),o.sc("label",o.nc(2,4,"Entry_Quantity"))("serverErrors",null==t.serverErrors?null:t.serverErrors.Quantity),o.Bb(2),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function GK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.UnitId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Unit",e.UnitId,"Name")," ")}}function zK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.UnitId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Unit",t.readonlyValueUnitId(e),"Name")," ")}}function JK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-units-picker",319),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).item.entry.UnitId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("ngModel",e.UnitId)("filter",t.filterUnitId(e))}}function KK(e,t){if(1&e&&(o.Tb(0),o.Rc(1,zK,2,2,"t-restricted",80),o.Rc(2,JK,1,2,"t-units-picker",318),o.Sb()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.Bb(1),o.sc("ngIf",t.readonlyUnit(e)),o.Bb(1),o.sc("ngIf",!t.readonlyUnit(e))}}function YK(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.mc(2,"translate"),o.Rc(3,GK,2,2,"t-restricted",80),o.Rc(4,KK,3,2,"ng-container",29),o.Tc(5," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit;o.Bb(1),o.sc("label",o.nc(2,4,"Entry_Unit"))("serverErrors",null==t.serverErrors?null:t.serverErrors.UnitId),o.Bb(2),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function XK(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(2).item.entry;o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Time1),o.Bb(1),o.Vc(" ",o.nc(2,2,e.Time1)," ")}}function ZK(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",321),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.Time1=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry;o.sc("ngModel",e.Time1)("ngModelOptions",o.vc(2,$Q))}}function eY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,XK,3,4,"t-restricted",80),o.Rc(3,ZK,1,3,"t-date-picker",320),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelTime1_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.Time1),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function tY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc(2).item.entry;o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Time2),o.Bb(1),o.Vc(" ",o.nc(2,2,e.Time2)," ")}}function nY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",321),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.Time2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry;o.sc("ngModel",e.Time2)("ngModelOptions",o.vc(2,$Q))}}function iY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,tY,3,4,"t-restricted",80),o.Rc(3,nY,1,3,"t-date-picker",320),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelTime2_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.Time2),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function oY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",193),o.Vb(2,"div",222),o.Tc(3),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.EntryTypeId),o.Bb(1),o.sc("itemId",e.EntryTypeId),o.Bb(2),o.Vc(" ",t.ws.getMultilingualValue("EntryType",e.EntryTypeId,"Name")," ")}}function cY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",323),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).item.entry.EntryTypeId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("ngModel",e.EntryTypeId)("filter",t.filterEntryType_Manual(e))}}function rY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div",222),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.EntryTypeId),o.Bb(2),o.Vc(" ",t.ws.getMultilingualValue("EntryType",t.readonlyValueEntryTypeId_Manual(e),"Name")," ")}}function sY(e,t){if(1&e&&(o.Tb(0),o.Rc(1,cY,1,2,"t-entry-types-picker",322),o.Rc(2,rY,3,2,"t-restricted",80),o.Sb()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.Bb(1),o.sc("ngIf",!t.readonlyEntryType_Manual(e)),o.Bb(1),o.sc("ngIf",t.readonlyEntryType_Manual(e))}}function lY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.mc(2,"translate"),o.Rc(3,oY,4,3,"t-restricted",80),o.Rc(4,sY,3,2,"ng-container",29),o.Tc(5," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit;o.Bb(1),o.sc("label",o.nc(2,4,"Entry_EntryType"))("serverErrors",null==t.serverErrors?null:t.serverErrors.EntryTypeId),o.Bb(2),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function aY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div",222),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry;o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.ExternalReference),o.Bb(2),o.Vc(" ",e.ExternalReference," ")}}function uY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",325),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.ExternalReference=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry;o.sc("ngModel",e.ExternalReference)}}function dY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,aY,3,2,"t-restricted",80),o.Rc(3,uY,1,1,"t-text-editor",324),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelExternalReference_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.ExternalReference),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function bY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div",222),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry;o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.InternalReference),o.Bb(2),o.Vc(" ",e.InternalReference," ")}}function fY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",325),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.InternalReference=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry;o.sc("ngModel",e.InternalReference)}}function mY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,bY,3,2,"t-restricted",80),o.Rc(3,fY,1,1,"t-text-editor",324),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelInternalReference_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.InternalReference),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function gY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div",222),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry;o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.NotedAgentName),o.Bb(2),o.Vc(" ",e.NotedAgentName," ")}}function pY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",325),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.NotedAgentName=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry;o.sc("ngModel",e.NotedAgentName)}}function hY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,gY,3,2,"t-restricted",80),o.Rc(3,pY,1,1,"t-text-editor",324),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelNotedAgentName_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.NotedAgentName),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function vY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div",222),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.NotedAmount),o.Bb(2),o.Vc(" ",o.oc(3,2,e.NotedAmount,t.MonetaryValue_format(e))," ")}}function IY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",327),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.NotedAmount=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.sc("minDecimalPlaces",t.MonetaryValue_decimals(e))("maxDecimalPlaces",t.MonetaryValue_decimals(e))("ngModel",e.NotedAmount)}}function yY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,vY,4,5,"t-restricted",80),o.Rc(3,IY,1,3,"t-decimal-editor",326),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelNotedAmount_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.NotedAmount),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function wY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"div",222),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(2).item.entry;o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.NotedDate),o.Bb(2),o.Vc(" ",o.nc(3,2,e.NotedDate)," ")}}function CY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",325),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.NotedDate=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry;o.sc("ngModel",e.NotedDate)}}function MY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",308),o.Rc(2,wY,4,4,"t-restricted",80),o.Rc(3,CY,1,1,"t-date-picker",324),o.Tc(4," \xa0\xa0 "),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.item.entry,n=e.argument,i=o.lc().isEdit,c=o.lc();o.Bb(1),o.sc("label",c.labelNotedDate_Manual(t))("serverErrors",null==t.serverErrors?null:t.serverErrors.NotedDate),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function VY(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"t-form-group-dynamic",179),o.Rc(2,gK,4,4,"t-restricted",80),o.Rc(3,pK,1,3,"t-accounts-picker",303),o.Ub(),o.Ub(),o.Vb(4,"div",304),o.Rc(5,IK,6,6,"ng-container",29),o.Rc(6,MK,7,7,"ng-container",29),o.Rc(7,UK,5,4,"ng-container",29),o.Rc(8,kK,5,4,"ng-container",29),o.Rc(9,FK,5,4,"ng-container",29),o.Rc(10,$K,5,4,"ng-container",29),o.Rc(11,HK,6,6,"ng-container",29),o.Rc(12,YK,6,6,"ng-container",29),o.Rc(13,eY,5,4,"ng-container",29),o.Rc(14,iY,5,4,"ng-container",29),o.Rc(15,lY,6,6,"ng-container",29),o.Rc(16,dY,5,4,"ng-container",29),o.Rc(17,mY,5,4,"ng-container",29),o.Rc(18,hY,5,4,"ng-container",29),o.Rc(19,yY,5,4,"ng-container",29),o.Rc(20,MY,5,4,"ng-container",29),o.Ub()),2&e){const e=t.item.entry,n=o.lc().isEdit,i=o.lc();o.Bb(1),o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.AccountId),o.Bb(1),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(2),o.sc("ngIf",i.showCurrency(e)),o.Bb(1),o.sc("ngIf",i.showMonetaryValue(e)),o.Bb(1),o.sc("ngIf",i.showCustody_Manual(e)),o.Bb(1),o.sc("ngIf",i.showCustodian_Manual(e)),o.Bb(1),o.sc("ngIf",i.showResource_Manual(e)),o.Bb(1),o.sc("ngIf",i.showParticipant_Manual(e)),o.Bb(1),o.sc("ngIf",i.showQuantity(e)),o.Bb(1),o.sc("ngIf",i.showUnit(e)),o.Bb(1),o.sc("ngIf",i.showTime1_Manual(e)),o.Bb(1),o.sc("ngIf",i.showTime2_Manual(e)),o.Bb(1),o.sc("ngIf",i.showEntryType_Manual(e)),o.Bb(1),o.sc("ngIf",i.showExternalReference_Manual(e)),o.Bb(1),o.sc("ngIf",i.showInternalReference_Manual(e)),o.Bb(1),o.sc("ngIf",i.showNotedAgentName_Manual(e)),o.Bb(1),o.sc("ngIf",i.showNotedAmount_Manual(e)),o.Bb(1),o.sc("ngIf",i.showNotedDate_Manual(e))}}function TY(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Entry_Center"))}function EY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Vb(1,"t-view-link",96),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc().item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CenterId),o.Bb(1),o.sc("itemId",e.CenterId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Center",e.CenterId,"Name")," ")}}function xY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",319),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).item.entry.CenterId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2);return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.sc("ngModel",e.CenterId)("filter",t.filterCenter_Manual(e))}}function UY(e,t){if(1&e&&(o.Vb(0,"t-restricted",82),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.CenterId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Center",t.readonlyValueCenterId_Manual(e),"Name")," ")}}function RY(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"t-form-group-dynamic",179),o.Rc(2,xY,1,2,"t-centers-picker",318),o.Rc(3,UY,2,2,"t-restricted",80),o.Ub(),o.Sb()),2&e){const e=o.lc().item.entry,t=o.lc(2);o.Bb(1),o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.CenterId),o.Bb(1),o.sc("ngIf",!t.readonlyCenter_Manual(e)),o.Bb(1),o.sc("ngIf",t.readonlyCenter_Manual(e))}}function DY(e,t){if(1&e&&(o.Rc(0,EY,3,3,"t-restricted",80),o.Rc(1,RY,4,3,"ng-container",29)),2&e){const e=t.argument,n=o.lc().isEdit;o.sc("ngIf",!n||e),o.Bb(1),o.sc("ngIf",n&&!e)}}function BY(e,t){if(1&e&&(o.Vb(0,"div",328),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Uc(o.nc(2,1,"Debit")+e.functionalPostfix)}}function SY(e,t){if(1&e&&(o.Vb(0,"t-restricted",330),o.Vb(1,"div",328),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc().item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Value),o.Bb(2),o.Uc(o.oc(3,2,t.getDebit(e),t.functional_format))}}function kY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group-dynamic",179),o.Vb(1,"t-decimal-editor",331),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(),i=n.item.entry,c=n.item,r=n.update;return o.lc(2).setDebit(i,t),r.call(null,c)})),o.Ub(),o.Ub()}if(2&e){const e=o.lc().item.entry,t=o.lc(2);o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Value),o.Bb(1),o.sc("ngModel",t.getDebit(e))("maxDecimalPlaces",t.functional_decimals)("minDecimalPlaces",t.functional_decimals)("ngModelOptions",o.vc(5,$Q))}}function OY(e,t){1&e&&o.Rb(0)}const _Y=function(e,t){return{direction:1,pair:e,bookkeeping:t}};function LY(e,t){if(1&e&&(o.Rc(0,SY,4,5,"t-restricted",329),o.Rc(1,kY,2,6,"t-form-group-dynamic",177),o.Rc(2,OY,1,0,"ng-container",140)),2&e){const e=t.item,n=t.argument,i=o.lc().isEdit,c=o.Fc(54);o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(4,_Y,e,n))}}function AY(e,t){if(1&e&&(o.Vb(0,"div",328),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Uc(o.nc(2,1,"Credit")+e.functionalPostfix)}}function FY(e,t){if(1&e&&(o.Vb(0,"t-restricted",330),o.Vb(1,"div",328),o.Tc(2),o.mc(3,"accounting"),o.Ub(),o.Ub()),2&e){const e=o.lc().item.entry,t=o.lc(2);o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Value),o.Bb(2),o.Uc(o.oc(3,2,t.getCredit(e),t.functional_format))}}function PY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group-dynamic",179),o.Vb(1,"t-decimal-editor",331),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(),i=n.item.entry,c=n.item,r=n.update;return o.lc(2).setCredit(i,t),r.call(null,c)})),o.Ub(),o.Ub()}if(2&e){const e=o.lc().item.entry,t=o.lc(2);o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Value),o.Bb(1),o.sc("ngModel",t.getCredit(e))("maxDecimalPlaces",t.functional_decimals)("minDecimalPlaces",t.functional_decimals)("ngModelOptions",o.vc(5,$Q))}}function NY(e,t){1&e&&o.Rb(0)}const jY=function(e,t,n){return{direction:e,pair:t,bookkeeping:n}};function WY(e,t){if(1&e&&(o.Rc(0,FY,4,5,"t-restricted",329),o.Rc(1,PY,2,6,"t-form-group-dynamic",177),o.Rc(2,NY,1,0,"ng-container",140)),2&e){const e=t.item,n=t.argument,i=o.lc().isEdit,c=o.Fc(54);o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.yc(4,jY,-1,e,n))}}function $Y(e,t){1&e&&o.Qb(0,"t-spinner")}function qY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",333),o.Rc(1,$Y,1,0,"t-spinner",29),o.Vb(2,"button",334),o.hc("click",(function(){o.Ic(e);const t=o.lc(),n=t.pair,i=t.direction,c=o.lc().model;return o.lc().onAutofillFromExchangeRate(n,c,i)})),o.Qb(3,"fa-icon",335),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(),t=e.pair,n=e.direction;o.Bb(1),o.sc("ngIf",!!t.subscription&&t.direction===n),o.Bb(2),o.sc("title",o.nc(4,2,"AutofillFromExchangeRate"))}}function QY(e,t){if(1&e&&o.Rc(0,qY,5,4,"div",332),2&e){const e=t.pair,n=t.bookkeeping,i=o.lc().isEdit,c=o.lc();o.sc("ngIf",!n&&i&&!e.PH&&c.showMonetaryValue(e.entry))}}function HY(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Uc(o.nc(1,1,"Memo"))}function GY(e,t){if(1&e&&(o.Vb(0,"div"),o.Vb(1,"t-restricted",82),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc().item.line;o.Bb(1),o.sc("metadata",null==e.EntityMetadata?null:e.EntityMetadata.Memo),o.Bb(1),o.Uc(e.Memo)}}function zY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",321),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().item.line.Memo=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc();return t.update.call(null,t.item)})),o.Ub()}if(2&e){const e=o.lc().item.line;o.sc("ngModel",e.Memo)("ngModelOptions",o.vc(2,$Q))}}function JY(e,t){if(1&e&&(o.Vb(0,"t-form-group-dynamic",179),o.Rc(1,GY,3,2,"div",29),o.Rc(2,zY,1,3,"t-text-editor",320),o.Ub()),2&e){const e=t.item.line,n=t.argument,i=o.lc().isEdit;o.sc("serverErrors",null==e.serverErrors?null:e.serverErrors.Memo),o.Bb(1),o.sc("ngIf",!i||n),o.Bb(1),o.sc("ngIf",i&&!n)}}function KY(e,t){if(1&e&&(o.Qb(0,"fa-icon",337),o.mc(1,"translate")),2&e){const e=o.lc(3);o.sc("placement",e.modifiedTooltipPlacement)("ngbTooltip",o.nc(1,2,"ModifiedLineWarning"))}}function YY(e,t){if(1&e&&o.Rc(0,KY,2,4,"fa-icon",336),2&e){const e=t.item.line,n=o.lc().model,i=o.lc();o.sc("ngIf",i.getIsModified(e,n))}}function XY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",250),o.hc("click",(function(){o.Ic(e);const t=o.lc().item,n=o.lc(),i=n.model,c=n.isEdit;return o.lc().onReverse(t,i,c)})),o.Tc(1),o.mc(2,"translate"),o.Ub()}2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"Reverse")," "))}function ZY(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",245),o.Vb(1,"button",246),o.Vb(2,"span",247),o.Qb(3,"fa-icon",248),o.Ub(),o.Ub(),o.Vb(4,"div",249),o.Vb(5,"button",250),o.hc("click",(function(){o.Ic(e);const n=t.item.line,i=o.lc().model;return o.lc().toggleHighlight(n,i)})),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Rc(8,XY,3,3,"button",251),o.Ub(),o.Ub()}if(2&e){const e=t.item.line,n=o.lc(),i=n.model,c=n.isEdit,r=o.lc();o.sc("placement",r.commandsDropdownPlacement),o.Bb(6),o.Vc(" ",o.nc(7,3,r.isHighlighted(e,i)?"RemoveHighlight":"AddHighlight")," "),o.Bb(2),o.sc("ngIf",r.hasManualLines&&c)}}function eX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",245),o.Vb(1,"button",246),o.Vb(2,"span",247),o.Qb(3,"fa-icon",248),o.Ub(),o.Ub(),o.Vb(4,"div",249),o.Vb(5,"button",250),o.hc("click",(function(){o.Ic(e);const t=o.lc(2),n=t.model,i=t.isEdit;return o.lc().onDeleteAllManualEntries(n,i)})),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.sc("placement",e.commandsDropdownPlacement),o.Bb(6),o.Vc(" ",o.nc(7,2,"DeleteAll")," ")}}function tX(e,t){if(1&e&&o.Rc(0,eX,8,4,"div",244),2&e){const e=o.lc().isEdit;o.sc("ngIf",e)}}function nX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",245),o.Vb(1,"button",252),o.Vb(2,"span",247),o.Qb(3,"fa-icon",253),o.Ub(),o.Ub(),o.Vb(4,"div",249),o.Vb(5,"button",250),o.hc("click",(function(){o.Ic(e);const t=o.lc(),n=t.item,i=t.update,c=o.lc().model;return o.lc().onAutoBalance(n,c,i)})),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Vb(8,"button",250),o.hc("click",(function(){o.Ic(e);const t=o.lc().item,n=o.lc(),i=n.model,c=n.isEdit;return o.lc().onCloneManualLine(t,i,c)})),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.sc("placement",e.commandsDropdownPlacement),o.Bb(6),o.Vc(" ",o.nc(7,3,"AutoBalance")," "),o.Bb(3),o.Vc(" ",o.nc(10,5,"Clone")," ")}}function iX(e,t){if(1&e&&o.Rc(0,nX,11,7,"div",244),2&e){const e=o.lc().isEdit;o.sc("ngIf",e)}}function oX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",31),o.Rc(1,WQ,2,1,"h2",32),o.Rc(2,qQ,1,5,"t-serial-editor",33),o.Ub(),o.Rc(3,GQ,3,6,"t-form-group",34),o.Rc(4,KQ,4,6,"t-form-group",35),o.Rc(5,eH,2,6,"t-form-group",36),o.Rc(6,oH,2,6,"t-form-group",37),o.Rc(7,lH,2,6,"t-form-group",38),o.Rc(8,bH,2,6,"t-form-group",39),o.Rc(9,gH,3,6,"t-form-group",40),o.Rc(10,IH,2,6,"t-form-group",41),o.Rc(11,MH,2,6,"t-form-group",42),o.Rc(12,xH,2,6,"t-form-group",43),o.Rc(13,BH,2,6,"t-form-group",44),o.Rc(14,_H,2,6,"t-form-group",45),o.Rc(15,PH,2,6,"t-form-group",46),o.Rc(16,$H,2,6,"t-form-group",47),o.Rc(17,HH,4,8,"t-form-group",48),o.Rc(18,GH,4,7,"ng-template",null,49,o.Sc),o.Rc(20,zH,4,7,"ng-template",null,50,o.Sc),o.Rc(22,JH,8,4,"ng-template",null,51,o.Sc),o.Vb(24,"ul",52,53),o.hc("activeIdChange",(function(t){return o.Ic(e),o.lc().setActiveTab(t)})),o.Rc(26,TJ,11,7,"li",54),o.Rc(27,xJ,1,1,"ng-template",null,55,o.Sc),o.Rc(29,RJ,6,1,"li",56),o.Rc(30,FJ,9,12,"li",57),o.Rc(31,ZJ,11,11,"li",57),o.Ub(),o.Qb(32,"div",58),o.Vb(33,"input",59,60),o.hc("change",(function(){o.Ic(e);const n=t.model,i=o.Fc(34);return o.lc().onFileSelected(i,n)})),o.Ub(),o.Rc(35,bK,2,32,"ng-template",null,61,o.Sc),o.Rc(37,fK,2,3,"ng-template",null,62,o.Sc),o.Rc(39,VY,21,19,"ng-template",null,63,o.Sc),o.Rc(41,TY,2,3,"ng-template",null,64,o.Sc),o.Rc(43,DY,2,2,"ng-template",null,65,o.Sc),o.Rc(45,BY,3,3,"ng-template",null,66,o.Sc),o.Rc(47,LY,3,7,"ng-template",null,67,o.Sc),o.Rc(49,AY,3,3,"ng-template",null,68,o.Sc),o.Rc(51,WY,3,8,"ng-template",null,69,o.Sc),o.Rc(53,QY,1,1,"ng-template",null,70,o.Sc),o.Rc(55,HY,2,3,"ng-template",null,71,o.Sc),o.Rc(57,JY,3,3,"ng-template",null,72,o.Sc),o.Rc(59,YY,1,1,"ng-template",null,73,o.Sc),o.Rc(61,ZY,9,5,"ng-template",null,74,o.Sc),o.Rc(63,tX,1,1,"ng-template",null,75,o.Sc),o.Rc(65,iX,1,1,"ng-template",null,76,o.Sc)}if(2&e){const e=t.model,n=t.isEdit,i=o.Fc(25),c=o.lc();o.sc("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.SerialNumber),o.Bb(1),o.sc("ngIf",!n||c.isOriginalDocument),o.Bb(1),o.sc("ngIf",n&&!c.isOriginalDocument),o.Bb(1),o.sc("ngIf",c.showDocumentPostingDate(e)),o.Bb(1),o.sc("ngIf",c.showClearance(e)),o.Bb(1),o.sc("ngIf",c.showDocumentCustodian(e)),o.Bb(1),o.sc("ngIf",c.showDocumentCustody(e)),o.Bb(1),o.sc("ngIf",c.showDocumentParticipant(e)),o.Bb(1),o.sc("ngIf",c.showDocumentResource(e)),o.Bb(1),o.sc("ngIf",c.showDocumentCenter(e)),o.Bb(1),o.sc("ngIf",c.showDocumentCurrency(e)),o.Bb(1),o.sc("ngIf",c.showDocumentQuantity(e)),o.Bb(1),o.sc("ngIf",c.showDocumentUnit(e)),o.Bb(1),o.sc("ngIf",c.showDocumentTime1(e)),o.Bb(1),o.sc("ngIf",c.showDocumentTime2(e)),o.Bb(1),o.sc("ngIf",c.showDocumentExternalReference(e)),o.Bb(1),o.sc("ngIf",c.showDocumentInternalReference(e)),o.Bb(1),o.sc("ngIf",c.showDocumentMemo(e)),o.Bb(7),o.sc("destroyOnHide",!0)("activeId",c.getActiveTab(e)),o.Bb(2),o.sc("ngForOf",c.visibleTabs(e)),o.Bb(3),o.sc("ngIf",n&&c.invisibleTabs(e).length>0),o.Bb(1),o.sc("ngIf",c.showBookkeepingTab),o.Bb(1),o.sc("ngIf",c.showAttachmentsTab),o.Bb(1),o.sc("ngbNavOutlet",i)}}function cX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",345),o.Vb(1,"div",346),o.Vb(2,"label",347),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"div",348),o.Vb(6,"t-users-picker",349),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).assigneeId=t})),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",346),o.Vb(8,"textarea",350),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).comment=t})),o.mc(9,"translate"),o.Ub(),o.Ub(),o.Vb(10,"button",351),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onAssign(t)})),o.Tc(11),o.mc(12,"translate"),o.Qb(13,"fa-icon",119),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2),t=e.model,n=e.isEdit,i=o.lc();o.Qc("margin-left",i.marginLeft,"px")("margin-right",i.marginRight,"px"),o.Bb(3),o.Uc(o.nc(4,13,"AssignTo")),o.Bb(3),o.sc("ngModel",i.assigneeId)("filter","Id ne "+t.AssigneeId)("showCreate",!1),o.Bb(2),o.tc("placeholder",o.nc(9,15,"OptionalMessage")),o.sc("ngModel",i.comment),o.Bb(2),o.sc("disabled",!i.canAssign(t,n)),o.Bb(1),o.Vc("",o.nc(12,17,"Assign"),"\xa0\xa0"),o.Bb(2),o.sc("icon",i.assignIcon)}}function rX(e,t){if(1&e&&(o.Vb(0,"div",341),o.Vb(1,"div",342),o.Qb(2,"t-image",230),o.Vb(3,"div",343),o.Vb(4,"t-view-link",232),o.Tc(5),o.Ub(),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Rc(8,cX,14,19,"div",344),o.Ub()),2&e){const e=o.lc().model,t=o.lc();var n;const i=null==(n=t.ws.get("User",e.AssigneeId))?null:n.ImageId;o.Bb(2),o.sc("src","users/"+e.AssigneeId+"/image")("imageId",i)("size",t.picSize),o.Bb(2),o.sc("itemId",e.AssigneeId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.AssigneeId,"Name"),""),o.Bb(1),o.Vc(" ",o.nc(7,7,"OwnsThisDocument")," "),o.Bb(2),o.sc("ngIf",t.showAssignDocument(e))}}function sX(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",342),o.Qb(2,"t-image",230),o.Vb(3,"div",343),o.Vb(4,"t-view-link",232),o.Tc(5),o.Ub(),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Vb(8,"div",354),o.Vb(9,"span",355),o.Tc(10),o.mc(11,"timeFormat"),o.Ub(),o.Ub(),o.Ub(),o.Sb()),2&e){const e=o.lc().$implicit,t=o.lc(3);var n;const i=null==(n=t.ws.get("User",e.userId))?null:n.ImageId;o.Bb(2),o.sc("src","users/"+e.userId+"/image")("imageId",i)("size",36),o.Bb(2),o.sc("itemId",e.userId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.userId,"Name"),""),o.Bb(1),o.Vc(" ",o.nc(7,7,t.stateUpdateDisplay(e))," "),o.Bb(4),o.Vc(" ",o.nc(11,9,e.time)," ")}}function lX(e,t){if(1&e&&(o.Vb(0,"div",361),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit,t=o.lc(3);o.Qc("margin-left",t.marginLeft,"px")("margin-right",t.marginRight,"px"),o.Bb(1),o.Vc(" ",t.reassignment(e).comment," ")}}function aX(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",356),o.Qb(2,"t-image",230),o.Vb(3,"div",343),o.Vb(4,"t-view-link",232),o.Tc(5),o.Ub(),o.Ub(),o.Tc(6," \xa0 "),o.Vb(7,"div",357),o.Qb(8,"fa-icon",358),o.Ub(),o.Tc(9," \xa0 \xa0 "),o.Qb(10,"t-image",230),o.Vb(11,"div",343),o.Vb(12,"t-view-link",232),o.Tc(13),o.Ub(),o.Ub(),o.Vb(14,"div",354),o.Vb(15,"span",359),o.Tc(16),o.mc(17,"timeFormat"),o.Ub(),o.Ub(),o.Ub(),o.Rc(18,lX,2,5,"div",360),o.Sb()),2&e){const e=o.lc().$implicit,t=o.lc(3);var n;const c=null==(n=t.ws.get("User",e.userId))?null:n.ImageId;var i;const r=null==(i=t.ws.get("User",t.reassignment(e).assigneeId))?null:i.ImageId;o.Bb(2),o.sc("src","users/"+e.userId+"/image")("imageId",c)("size",36),o.Bb(2),o.sc("itemId",e.userId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.userId,"Name")," "),o.Bb(3),o.sc("flip",t.flip)("size",120),o.Bb(2),o.sc("src","users/"+t.reassignment(e).assigneeId+"/image")("imageId",r)("size",36),o.Bb(2),o.sc("itemId",t.reassignment(e).assigneeId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",t.reassignment(e).assigneeId,"Name")," "),o.Bb(3),o.Vc(" ",o.nc(17,14,e.time)," "),o.Bb(2),o.sc("ngIf",!!t.reassignment(e).comment)}}function uX(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",342),o.Qb(2,"t-image",230),o.Vb(3,"div",343),o.Vb(4,"t-view-link",232),o.Tc(5),o.Ub(),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Vb(8,"div",354),o.Vb(9,"span",355),o.Tc(10),o.mc(11,"timeFormat"),o.Ub(),o.Ub(),o.Ub(),o.Sb()),2&e){const e=o.lc().$implicit,t=o.lc(3);var n;const i=null==(n=t.ws.get("User",e.userId))?null:n.ImageId;o.Bb(2),o.sc("src","users/"+e.userId+"/image")("imageId",i)("size",36),o.Bb(2),o.sc("itemId",e.userId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.userId,"Name"),""),o.Bb(1),o.Vc(" ",o.nc(7,7,"CreatedThisDocument")," "),o.Bb(4),o.Vc(" ",o.nc(11,9,e.time)," ")}}function dX(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",353),o.Rc(2,sX,12,11,"ng-container",190),o.Rc(3,aX,19,16,"ng-container",190),o.Rc(4,uX,12,11,"ng-container",190),o.Ub(),o.Sb()),2&e){const e=t.$implicit,n=t.index;o.Bb(1),o.Gb("border-top",0===n),o.sc("ngSwitch",e.type),o.Bb(1),o.sc("ngSwitchCase","state"),o.Bb(1),o.sc("ngSwitchCase","reassignment"),o.Bb(1),o.sc("ngSwitchCase","creation")}}function bX(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",352),o.Tc(2),o.Ub(),o.Rc(3,dX,5,6,"ng-container",141),o.Sb()),2&e){const e=t.$implicit;o.Bb(2),o.Uc(e.date),o.Bb(1),o.sc("ngForOf",e.events)}}function fX(e,t){if(1&e&&(o.Vb(0,"div",338),o.Vb(1,"div",339),o.Rc(2,rX,9,9,"div",340),o.Rc(3,bX,4,2,"ng-container",141),o.Ub(),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(2),o.sc("ngIf",!!e.AssigneeId),o.Bb(1),o.sc("ngForOf",n.sortChronologically(e))}}function mX(e,t){if(1&e&&(o.Vb(0,"div",362),o.Vb(1,"h5",363),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",364),o.hc("click",(function(){return t.$implicit.dismiss(!1)})),o.Vb(5,"span",365),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",366),o.Tc(8),o.Ub(),o.Vb(9,"div",367),o.Vb(10,"button",368),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(11,"fa-icon",22),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Vb(14,"button",369),o.hc("click",(function(){return t.$implicit.close(!1)})),o.Qb(15,"fa-icon",20),o.Tc(16),o.mc(17,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,4,"Confirmation")," "),o.Bb(6),o.Vc(" ",e.confirmationMessage," "),o.Bb(4),o.Vc(" \xa0",o.nc(13,6,"Yes")," "),o.Bb(4),o.Vc(" \xa0",o.nc(17,8,"No")," ")}}function gX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",373),o.Vb(1,"div",374),o.Vb(2,"span",375),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"t-users-picker",376),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).onBehalfOfUserId=t})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(3),o.Uc(o.nc(4,2,"Signature_OnBehalfOfUser")),o.Bb(2),o.sc("ngModel",e.onBehalfOfUserId)}}function pX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",377),o.Vb(1,"div",374),o.Vb(2,"span",375),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"t-selector",86),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reasonId=t})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(3),o.Uc(o.nc(4,3,"Signature_Reason")),o.Bb(2),o.sc("ngModel",e.reasonId)("choices",e.reasonChoicesForNegativeModal)}}function hX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",373),o.Vb(1,"div",374),o.Vb(2,"span",375),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"t-text-editor",321),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reasonDetails=t})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(3),o.Uc(o.nc(4,3,"Signature_ReasonDetails")),o.Bb(2),o.sc("ngModel",e.reasonDetails)("ngModelOptions",o.vc(5,$Q))}}function vX(e,t){if(1&e&&(o.Vb(0,"div",362),o.Vb(1,"h5",363),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",364),o.hc("click",(function(){return t.$implicit.dismiss(!1)})),o.Vb(5,"span",365),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",366),o.Rc(8,gX,6,4,"div",370),o.Rc(9,pX,6,5,"div",371),o.Rc(10,hX,6,6,"div",370),o.Ub(),o.Vb(11,"div",367),o.Vb(12,"button",372),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(13,"fa-icon",22),o.Tc(14),o.mc(15,"translate"),o.Ub(),o.Vb(16,"button",369),o.hc("click",(function(){return t.$implicit.close(!1)})),o.Qb(17,"fa-icon",20),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,11,"AdditionalInformation")," "),o.Bb(6),o.sc("ngIf",e.onBehalfOfUserAmbiguous),o.Bb(1),o.sc("ngIf",e.isNegative&&(null==e.reasonChoicesForNegativeModal?null:e.reasonChoicesForNegativeModal.length)>0),o.Bb(1),o.sc("ngIf",e.isNegative),o.Bb(2),o.Gb("btn-danger",e.isNegative)("btn-success",!e.isNegative),o.sc("disabled",e.onBehalfOfUserAmbiguous&&!e.onBehalfOfUserId),o.Bb(2),o.Vc(" \xa0",o.nc(15,13,"Confirm")," "),o.Bb(4),o.Vc(" \xa0",o.nc(19,15,"Cancel")," ")}}const IX=function(e){return{updateOn:e}};function yX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",381),o.Vb(1,"t-editor",382),o.hc("ngModelChange",(function(n){o.Ic(e);const i=t.$implicit;return o.lc(2).autoGenerateArgs[i.Key]=n})),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2);o.sc("label",n.parameterLabel(e)),o.Bb(1),o.sc("ngModel",n.autoGenerateArgs[e.Key])("desc",n.parameterDesc(e))("ngModelOptions",o.wc(4,IX,n.updateOn(e)))}}function wX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",362),o.Vb(1,"h5",363),o.Tc(2),o.Ub(),o.Vb(3,"button",364),o.hc("click",(function(){return t.$implicit.dismiss(!1)})),o.Vb(4,"span",365),o.Tc(5,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(6,"div",366),o.Rc(7,yX,2,6,"t-form-group",378),o.Ub(),o.Vb(8,"div",367),o.Vb(9,"button",379),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc().onDoAutoGenerate(n)})),o.Qb(10,"fa-icon",380),o.Tc(11),o.Ub(),o.Vb(12,"button",369),o.hc("click",(function(){return t.$implicit.close(!1)})),o.Qb(13,"fa-icon",20),o.Tc(14),o.mc(15,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Vc(" ",e.autoGenerateLabel(e.autoGenerateLineDefId)," "),o.Bb(5),o.sc("ngForOf",e.autoGenerateLineDef.GenerateParameters)("ngForTrackBy",e.trackByKey),o.Bb(2),o.sc("disabled",!e.autoGenerateRequiredParamsAreSet),o.Bb(2),o.Vc(" \xa0",e.autoGenerateLabel(e.autoGenerateLineDefId)," "),o.Bb(3),o.Vc(" \xa0",o.nc(15,6,"Cancel")," ")}}let CX=(()=>{class e extends gn.a{constructor(e,t,n,i,o,c){super(),this.workspace=e,this.api=t,this.translate=n,this.route=i,this.modalService=o,this.audio=c,this.documentsApi=this.api.documentsApi(null,this.notifyDestruct$),this.localState=new B.e,this.picSize=36,this.selectBase="$Details",this.additionalSelectAccount="$DocumentDetails",this.additionalSelectResource="$DocumentDetails",this.additionalSelectCustody="$DocumentDetails",this.additionalSelectRelation="$DocumentDetails",this.encodeCustomStateFunc=e=>{const t=this.state.detailsState;t.tab&&(e.tab=t.tab)},this.create=()=>{const e={Clearance:0,LineDefinitionEntries:[],Lines:[],Attachments:[]};return this.isJV?(e.PostingDate=Object(Mi.e)(),e.PostingDateIsCommon=!0,e.MemoIsCommon=!0,e.CurrencyIsCommon=!1,e.CenterIsCommon=!1,e.CustodianIsCommon=!1,e.CustodyIsCommon=!1,e.ParticipantIsCommon=!1,e.ResourceIsCommon=!1,e.QuantityIsCommon=!1,e.UnitIsCommon=!1,e.Time1IsCommon=!1,e.Time2IsCommon=!1,e.ExternalReferenceIsCommon=!1,e.InternalReferenceIsCommon=!1):(this.definition.HasWorkflow||(e.PostingDate=Object(Mi.e)()),e.PostingDateIsCommon=!0,e.MemoIsCommon=!0,e.CurrencyIsCommon=!0,e.CenterIsCommon=!0,e.CustodianIsCommon=!0,e.CustodyIsCommon=!0,e.ParticipantIsCommon=!0,e.ResourceIsCommon=!0,e.QuantityIsCommon=!0,e.UnitIsCommon=!0,e.Time1IsCommon=!0,e.Time2IsCommon=!0,e.ExternalReferenceIsCommon=!0,e.InternalReferenceIsCommon=!0),e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,delete t.EntityMetadata,delete t.serverErrors,delete t.SerialNumber,t.Attachments=[],delete t.State,delete t.StateAt,delete t.Comment,delete t.AssigneeId,delete t.AssignedAt,delete t.AssignedById,delete t.OpenedAt,delete t.CreatedAt,delete t.CreatedById,delete t.ModifiedAt,delete t.ModifiedById,t.AssignmentsHistory=[],t.StatesHistory=[],t.LineDefinitionEntries&&t.LineDefinitionEntries.forEach(e=>{e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.DocumentId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById}),t.Lines&&t.Lines.forEach(e=>{e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.DocumentId,delete e.State,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById,e.Entries&&e.Entries.forEach(this.processEntryClone)}),t}return console.error("Cloning a non existing item"),null},this._sortChronologicallyResult=[],this.registerPristineFunc=e=>{this._pristineDocJson=JSON.stringify(e)},this.isDirtyFunc=e=>!!(e&&e.Attachments&&e.Attachments.some(e=>!!e.File))||this._pristineDocJson!==JSON.stringify(e),this.extraParams={includeRequiredSignatures:!0},this._requiredSignatureProps=["ToState","RuleType","RoleId","CustodianId","UserId","SignedById","SignedAt","OnBehalfOfUserId","LastUnsignedState","LastNegativeState","CanSign","ProxyRoleId","CanSignOnBehalf","ReasonId","ReasonDetails"],this.onNewManualEntry=e=>(e.entry={Id:0,Direction:1},e),this._defaultTabEntry={PostingDateIsCommon:!0,MemoIsCommon:!0,CurrencyIsCommon:!0,CenterIsCommon:!0,CustodianIsCommon:!0,CustodyIsCommon:!0,ParticipantIsCommon:!0,ResourceIsCommon:!0,QuantityIsCommon:!0,UnitIsCommon:!0,Time1IsCommon:!0,Time2IsCommon:!0,ExternalReferenceIsCommon:!0,InternalReferenceIsCommon:!0},this._smartTabHeaderColumnPathsIsCommonHasChanged=!1,this._smartColumnIndicesIsCommonHasChanged=!1,this.savePreprocessing=e=>{const t=this.definition.LineDefinitions.map(e=>e.LineDefinitionId);for(const n of t){const t=this.lineDefinition(n);for(const i of t.Columns)this.tabEntry(n,i,e)||this.addNewTabEntry(n,i,e)}},this.dummyUpdate=()=>{},this.isNegativeStateActive=(e,t)=>this.isStateActive(-e,t),this.isNegativeDocumentStateActive=(e,t)=>this.isDocumentStateActive(-e,t),this._flags={},this._documentStateResult=null,this.autoGenerateArgs={},this.attentionItem=null,this._barcodeScanCount={},this._isBarcodeLoading={}}set definitionId(e){this._definitionId!==e&&(this.documentsApi=this.api.documentsApi(e,this.notifyDestruct$),this._definitionId=e)}get definitionId(){return this._definitionId}ngOnInit(){const e=e=>{if(this.isScreenMode){this.definitionId=+e.get("definitionId")||null;const t=this.state.detailsState;let n=!1;const i=+e.get("tab");i?t.tab=i:t.tab&&(n=!0),n&&this.details&&this.details.urlStateChange()}};this._subscriptions.add(this.route.paramMap.pipe(Object(Ci.a)(1)).subscribe(e)),e(this.route.snapshot.paramMap)}setActiveTab(e){this.state.detailsState.tab=e,setTimeout(()=>{this.details.urlStateChange()})}getActiveTab(e){const t=this.state.detailsState;if(this.showAttachmentsTab&&-20===t.tab||this.showBookkeepingTab&&-10===t.tab)return t.tab;const n=this.visibleTabs(e);return n.some(e=>e===t.tab)?t.tab:n[0]||(this.showBookkeepingTab?-10:null)||(this.showAttachmentsTab?-20:null)}get showBookkeepingTab(){return this.definition.HasBookkeeping}get showAttachmentsTab(){return this.definition.HasAttachments}get isJV(){return"ManualJournalVoucher"===this.definition.Code}isManualLine(e){return e===this.ws.definitions.ManualLinesDefinitionId}get state(){return this.isPopupMode?(this.localState||(this.localState=new B.e),this.localState):this.globalState}get globalState(){const e="documents/"+this.definitionId;return this.workspace.current.mdState[e]||(this.workspace.current.mdState[e]=new B.e),this.workspace.current.mdState[e]}get view(){return`documents/${this.definitionId}`}get definition(){return this.previewDefinition||(this.definitionId?this.ws.definitions.Documents[this.definitionId]:null)}get found(){return!!this.definition}processEntryClone(e){return e.Id=null,delete e.EntityMetadata,delete e.serverErrors,delete e.LineId,delete e.CreatedAt,delete e.CreatedById,delete e.ModifiedAt,delete e.ModifiedById,e}get ws(){return this.workspace.currentTenant}get masterCrumb(){return this.ws.getMultilingualValueImmediate(this.definition,"TitlePlural")}formatSerial(e){if(!e)return`(${this.translate.instant("New")})`;const t=this.definition;return Object(Lh.a)(e,t.Prefix,t.CodeWidth||4)}get serialPrefix(){return this.definition.Prefix}get codeWidth(){return this.definition.CodeWidth}get showSidebar(){return this.isScreenMode&&"new"!==this.route.snapshot.paramMap.get("id")}isInactive(e){return e?1===e.State?"Error_OpenDocumentBeforeEdit":-1===e.State?"Error_UncancelDocumentBeforeEdit":null:""}getDebit(e){return this.isDebit(e)?e.Value:null}setDebit(e,t){e.Value=t,e.Direction=1}getCredit(e){return this.isCredit(e)?e.Value:null}setCredit(e,t){e.Value=t,e.Direction=-1}isCredit(e){return-1===e.Direction}isDebit(e){return 1===e.Direction}get functional_decimals(){return this.ws.settings.FunctionalCurrencyDecimals}get functional_format(){const e=this.functional_decimals;return`1.${e}-${e}`}get functionalPostfix(){return" ("+this.functionalName+")"}get flip(){return this.workspace.ws.isRtl?"horizontal":null}sortChronologically(e){if(!e)return null;if(e!==this._sortChronologicallyDoc){this._sortChronologicallyDoc=e;const t=e.StatesHistory||[],n=(e.AssignmentsHistory||[]).map(e=>({type:"reassignment",time:e.CreatedAt,userId:e.CreatedById,assigneeId:e.AssigneeId,comment:e.Comment})),i=t.map(e=>({type:"state",userId:e.ModifiedById,time:e.ModifiedAt,fromState:e.FromState,toState:e.ToState})),o=n.concat(i);e.CreatedById&&o.push({type:"creation",userId:e.CreatedById,time:e.CreatedAt});const c=o.sort((e,t)=>e.time<t.time?1:e.time>t.time?-1:0),r={};for(const e of c){const t=Object(Mi.c)(new Date(e.time));r[t]||(r[t]=[]),r[t].push(e)}this._sortChronologicallyResult=Object.keys(r).map(e=>({date:e,events:r[e]}))}return this._sortChronologicallyResult}reassignment(e){return e}showAssignDocument(e){return!!e&&!!e.AssigneeId}stateUpdateDisplay(e){return 1===e.toState?"ClosedThisDocument":-1===e.toState?"CanceledThisDocument":1===e.fromState?"OpenedThisDocument":"UncanceledThisDocument"}onAssign(e){this.assigneeId&&this.documentsApi.assign([e.Id],{returnEntities:!0,select:this.select,assigneeId:this.assigneeId,comment:this.comment},{includeRequiredSignatures:!0}).pipe(Object(A.a)(e=>{Object(N.c)(e,this.workspace),this.details.state.extras=e.Extras,this.handleFreshExtras(e.Extras),this.assigneeId=null,this.comment=null})).subscribe({error:this.details.handleActionError})}canAssign(e,t){return!!this.assigneeId&&!t}get marginLeft(){return this.workspace.ws.isRtl?0:36}get marginRight(){return this.workspace.ws.isRtl?36:0}get attachmentsClass(){return this.workspace.ws.isRtl?"mr-md-auto":"ml-md-auto"}showClearance(e){return!!this.definition.ClearanceVisibility}clearanceDisplay(e){return null==e?"":Object(Lh.c)(this.workspace,this.translate,null).properties.Clearance.format(e)}get clearanceChoices(){const e=Object(Lh.c)(this.workspace,this.translate,null).properties.Clearance;return Object(wi.c)(e)}showDocumentPostingDate(e){return!!this.definition.PostingDateVisibility}showDocumentPostingDateIsCommon(e){return this.definition.PostingDateIsCommonVisibility}requireDocumentPostingDate(e){return this.computeDocumentSettings(e),"Required"===this.definition.PostingDateVisibility||this._requireDocumentPostingDate}readonlyDocumentPostingDate(e){return this.computeDocumentSettings(e),this._readonlyDocumentPostingDate&&!this.isJV}labelDocumentPostingDate(e){return this.ws.getMultilingualValueImmediate(this.definition,"PostingDateLabel")||this.translate.instant("Document_PostingDate")}showDocumentCenter(e){return!!this.definition.CenterVisibility&&!this.ws.settings.SingleBusinessUnitId}showDocumentCenterIsCommon(e){return this.definition.CenterIsCommonVisibility}requireDocumentCenter(e){return this.computeDocumentSettings(e),"Required"===this.definition.CenterVisibility||this._requireDocumentCenter}readonlyDocumentCenter(e){return this.computeDocumentSettings(e),this._readonlyDocumentCenter&&!this.isJV}labelDocumentCenter(e){return this.ws.getMultilingualValueImmediate(this.definition,"CenterLabel")||this.translate.instant("Document_Center")}filterDocumentCenter(e){return this.definition.CenterFilter}showDocumentMemo(e){return!!this.definition.MemoVisibility}showDocumentMemoIsCommon(e){return this.definition.MemoIsCommonVisibility}requireDocumentMemo(e){return this.computeDocumentSettings(e),"Required"===this.definition.MemoVisibility||this._requireDocumentMemo}readonlyDocumentMemo(e){return this.computeDocumentSettings(e),this._readonlyDocumentMemo&&!this.isJV}labelDocumentMemo(e){return this.ws.getMultilingualValueImmediate(this.definition,"MemoLabel")||this.translate.instant("Memo")}showDocumentCurrency(e){return this.definition.CurrencyVisibility}requireDocumentCurrency(e){return this.computeDocumentSettings(e),this._requireDocumentCurrency}readonlyDocumentCurrency(e){return this.computeDocumentSettings(e),this._readonlyDocumentCurrency}labelDocumentCurrency(e){return this.ws.getMultilingualValueImmediate(this.definition,"CurrencyLabel")||this.translate.instant("Entry_Currency")}filterDocumentCurrency(e){return this.definition.CurrencyFilter}showDocumentCustodian(e){return this.definition.CustodianVisibility}requireDocumentCustodian(e){return this.computeDocumentSettings(e),this._requireDocumentCustodian}readonlyDocumentCustodian(e){return this.computeDocumentSettings(e),this._readonlyDocumentCustodian}labelDocumentCustodian(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"CustodianLabel");if(t)return t;if(1===this.definition.CustodianDefinitionIds.length){const e=this.ws.definitions.Relations[this.definition.CustodianDefinitionIds[0]];e&&(t=this.ws.getMultilingualValueImmediate(e,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Custodian")),t}documentCustodianDefinitionIds(e){return this.definition.CustodianDefinitionIds}filterDocumentCustodian(e){return this.definition.CustodianFilter}showDocumentCustody(e){return this.definition.CustodyVisibility}requireDocumentCustody(e){return this.computeDocumentSettings(e),this._requireDocumentCustody}readonlyDocumentCustody(e){return this.computeDocumentSettings(e),this._readonlyDocumentCustody}labelDocumentCustody(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"CustodyLabel");if(t)return t;if(1===this.definition.CustodyDefinitionIds.length){const e=this.ws.definitions.Custodies[this.definition.CustodyDefinitionIds[0]];e&&(t=this.ws.getMultilingualValueImmediate(e,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Custody")),t}documentCustodyDefinitionIds(e){return this.definition.CustodyDefinitionIds}filterDocumentCustody(e){return this.definition.CustodyFilter}showDocumentParticipant(e){return this.definition.ParticipantVisibility}requireDocumentParticipant(e){return this.computeDocumentSettings(e),this._requireDocumentParticipant}readonlyDocumentParticipant(e){return this.computeDocumentSettings(e),this._readonlyDocumentParticipant}labelDocumentParticipant(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"ParticipantLabel");if(t)return t;if(1===this.definition.ParticipantDefinitionIds.length){const e=this.ws.definitions.Relations[this.definition.ParticipantDefinitionIds[0]];e&&(t=this.ws.getMultilingualValueImmediate(e,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Participant")),t}documentParticipantDefinitionIds(e){return this.definition.ParticipantDefinitionIds}filterDocumentParticipant(e){return this.definition.ParticipantFilter}showDocumentResource(e){return this.definition.ResourceVisibility}requireDocumentResource(e){return this.computeDocumentSettings(e),this._requireDocumentResource}readonlyDocumentResource(e){return this.computeDocumentSettings(e),this._readonlyDocumentResource}labelDocumentResource(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"ResourceLabel");if(t)return t;if(1===this.definition.ResourceDefinitionIds.length){const e=this.ws.definitions.Resources[this.definition.ResourceDefinitionIds[0]];e&&(t=this.ws.getMultilingualValueImmediate(e,"TitleSingular"))}return t||(t=this.translate.instant("Entry_Resource")),t}documentResourceDefinitionIds(e){return this.definition.ResourceDefinitionIds}filterDocumentResource(e){return this.definition.ResourceFilter}showDocumentQuantity(e){return this.definition.QuantityVisibility}requireDocumentQuantity(e){return this.computeDocumentSettings(e),this._requireDocumentQuantity}readonlyDocumentQuantity(e){return this.computeDocumentSettings(e),this._readonlyDocumentQuantity}labelDocumentQuantity(e){return this.ws.getMultilingualValueImmediate(this.definition,"QuantityLabel")||this.translate.instant("Entry_Quantity")}showDocumentUnit(e){return this.definition.UnitVisibility}requireDocumentUnit(e){return this.computeDocumentSettings(e),this._requireDocumentUnit}readonlyDocumentUnit(e){return this.computeDocumentSettings(e),this._readonlyDocumentUnit}labelDocumentUnit(e){let t=this.ws.getMultilingualValueImmediate(this.definition,"UnitLabel");return t||(t||(t=this.translate.instant("Entry_Unit")),t)}filterDocumentUnit(e){return this.definition.UnitFilter}showDocumentTime1(e){return this.definition.Time1Visibility}requireDocumentTime1(e){return this.computeDocumentSettings(e),this._requireDocumentTime1}readonlyDocumentTime1(e){return this.computeDocumentSettings(e),this._readonlyDocumentTime1}labelDocumentTime1(e){return this.ws.getMultilingualValueImmediate(this.definition,"Time1Label")||this.translate.instant("Entry_Time1")}showDocumentTime2(e){return this.definition.Time2Visibility}requireDocumentTime2(e){return this.computeDocumentSettings(e),this._requireDocumentTime2}readonlyDocumentTime2(e){return this.computeDocumentSettings(e),this._readonlyDocumentTime2}labelDocumentTime2(e){return this.ws.getMultilingualValueImmediate(this.definition,"Time2Label")||this.translate.instant("Entry_Time2")}showDocumentExternalReference(e){return this.definition.ExternalReferenceVisibility}requireDocumentExternalReference(e){return this.computeDocumentSettings(e),this._requireDocumentExternalReference}readonlyDocumentExternalReference(e){return this.computeDocumentSettings(e),this._readonlyDocumentExternalReference}labelDocumentExternalReference(e){return this.ws.getMultilingualValueImmediate(this.definition,"ExternalReferenceLabel")||this.translate.instant("Entry_ExternalReference")}showDocumentInternalReference(e){return this.definition.InternalReferenceVisibility}requireDocumentInternalReference(e){return this.computeDocumentSettings(e),this._requireDocumentInternalReference}readonlyDocumentInternalReference(e){return this.computeDocumentSettings(e),this._readonlyDocumentInternalReference}labelDocumentInternalReference(e){return this.ws.getMultilingualValueImmediate(this.definition,"InternalReferenceLabel")||this.translate.instant("Entry_InternalReference")}computeDocumentSettings(e){if(!e||!e.Lines)return this._requireDocumentPostingDate=!1,this._readonlyDocumentPostingDate=!1,this._requireDocumentMemo=!1,this._readonlyDocumentMemo=!1,this._requireDocumentCurrency=!1,this._readonlyDocumentCurrency=!1,this._requireDocumentCenter=!1,this._readonlyDocumentCenter=!1,this._requireDocumentCustodian=!1,this._readonlyDocumentCustodian=!1,this._requireDocumentCustody=!1,this._readonlyDocumentCustody=!1,this._requireDocumentParticipant=!1,this._readonlyDocumentParticipant=!1,this._requireDocumentResource=!1,this._readonlyDocumentResource=!1,this._requireDocumentQuantity=!1,this._readonlyDocumentQuantity=!1,this._requireDocumentUnit=!1,this._readonlyDocumentUnit=!1,this._requireDocumentTime1=!1,this._readonlyDocumentTime1=!1,this._requireDocumentTime2=!1,this._readonlyDocumentTime2=!1,this._requireDocumentExternalReference=!1,this._readonlyDocumentExternalReference=!1,this._requireDocumentInternalReference=!1,void(this._readonlyDocumentInternalReference=!1);const t=this.definition;if(this._computeDocumentSettingsDoc!==e||this._computeDocumentSettingsDef!==t){this._computeDocumentSettingsDoc=e,this._computeDocumentSettingsDef=t,this._requireDocumentPostingDate=0===t.PostingDateRequiredState,this._readonlyDocumentPostingDate=0===t.PostingDateReadOnlyState,this._requireDocumentMemo=0===t.MemoRequiredState,this._readonlyDocumentMemo=0===t.MemoReadOnlyState,this._requireDocumentCurrency=0===t.CurrencyRequiredState,this._readonlyDocumentCurrency=0===t.CurrencyReadOnlyState,this._requireDocumentCenter=0===t.CenterRequiredState,this._readonlyDocumentCenter=0===t.CenterReadOnlyState,this._requireDocumentCustodian=0===t.CustodianRequiredState,this._readonlyDocumentCustodian=0===t.CustodianReadOnlyState,this._requireDocumentCustody=0===t.CustodyRequiredState,this._readonlyDocumentCustody=0===t.CustodyReadOnlyState,this._requireDocumentParticipant=0===t.ParticipantRequiredState,this._readonlyDocumentParticipant=0===t.ParticipantReadOnlyState,this._requireDocumentResource=0===t.ResourceRequiredState,this._readonlyDocumentResource=0===t.ResourceReadOnlyState,this._requireDocumentQuantity=0===t.QuantityRequiredState,this._readonlyDocumentQuantity=0===t.QuantityRequiredState,this._requireDocumentUnit=0===t.UnitRequiredState,this._readonlyDocumentUnit=0===t.UnitRequiredState,this._requireDocumentTime1=0===t.Time1RequiredState,this._readonlyDocumentTime1=0===t.Time1RequiredState,this._requireDocumentTime2=0===t.Time2RequiredState,this._readonlyDocumentTime2=0===t.Time2RequiredState,this._requireDocumentInternalReference=0===t.InternalReferenceRequiredState,this._readonlyDocumentInternalReference=0===t.InternalReferenceReadOnlyState,this._requireDocumentExternalReference=0===t.ExternalReferenceRequiredState,this._readonlyDocumentExternalReference=0===t.ExternalReferenceReadOnlyState;for(const n of t.LineDefinitions.map(e=>e.LineDefinitionId)){const t=this.lineDefinition(n);for(const i of t.Columns.filter(e=>2===e.InheritsFromHeader))switch(i.ColumnName){case"PostingDate":!this._requireDocumentPostingDate&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentPostingDate=!0),!this._readonlyDocumentPostingDate&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentPostingDate=!0);break;case"Memo":!this._requireDocumentMemo&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentMemo=!0),!this._readonlyDocumentMemo&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentMemo=!0);break;case"CurrencyId":!this._requireDocumentCurrency&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentCurrency=!0),!this._readonlyDocumentCurrency&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentCurrency=!0);break;case"CenterId":!this._requireDocumentCenter&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentCenter=!0),!this._readonlyDocumentCenter&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentCenter=!0);break;case"CustodianId":!this._requireDocumentCustodian&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentCustodian=!0),!this._readonlyDocumentCustodian&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentCustodian=!0);break;case"CustodyId":!this._requireDocumentCustody&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentCustody=!0),!this._readonlyDocumentCustody&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentCustody=!0);break;case"ParticipantId":!this._requireDocumentParticipant&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentParticipant=!0),!this._readonlyDocumentParticipant&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentParticipant=!0);break;case"ResourceId":!this._requireDocumentResource&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentResource=!0),!this._readonlyDocumentResource&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentResource=!0);break;case"Quantity":!this._requireDocumentQuantity&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentQuantity=!0),!this._readonlyDocumentQuantity&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentQuantity=!0);break;case"UnitId":!this._requireDocumentUnit&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentUnit=!0),!this._readonlyDocumentUnit&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentUnit=!0);break;case"Time1":!this._requireDocumentTime1&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentTime1=!0),!this._readonlyDocumentTime1&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentTime1=!0);break;case"Time2":!this._requireDocumentTime2&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentTime2=!0),!this._readonlyDocumentTime2&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentTime2=!0);break;case"ExternalReference":!this._requireDocumentExternalReference&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentExternalReference=!0),!this._readonlyDocumentExternalReference&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentExternalReference=!0);break;case"InternalReference":!this._requireDocumentInternalReference&&this.lines(n,e).some(e=>(e.State||0)>=i.RequiredState)&&(this._requireDocumentInternalReference=!0),!this._readonlyDocumentInternalReference&&this.lines(n,e).some(e=>(e.State||0)>=i.ReadOnlyState||(e.State||0)<0)&&(this._readonlyDocumentInternalReference=!0)}}}}account(e){return this.ws.get("Account",e.AccountId)}accountType(e){const t=this.account(e);return t&&t.AccountTypeId?this.ws.get("AccountType",t.AccountTypeId):null}resource(e){const t=this.account(e);return this.ws.get("Resource",(t?t.ResourceId:null)||(t&&t.ResourceDefinitionId?e.ResourceId:null))}resourceDefinition(e){const t=this.resource(e),n=t?t.DefinitionId:null;return n?this.ws.definitions.Resources[n]:null}accountDisplay(e){const t=this.ws.get("Account",e);return t?Object(ON.a)(this.workspace,this.translate).format(t):""}filterAccount(e,t){if(!t)return null;const n=e.entry,i=e.entryIndex,o=this.lineDefinition(e.line.DefinitionId);if(o&&o.Entries){const e=o.Entries[i];if(e&&e.ParentAccountTypeId){let t=`AccountType.Id descof ${e.ParentAccountTypeId}`;const i=n.CurrencyId;i&&(t+=` and (CurrencyId eq null or CurrencyId eq '${i.replace("'","''")}')`);const o=n.CenterId;o&&(t+=` and (CenterId eq null or CenterId eq ${o})`);const c=this.ws.get("Resource",n.ResourceId),r=c?c.DefinitionId:null;t+=r?` and ResourceDefinitionId eq ${r}`:" and ResourceDefinitionId eq null";const s=this.ws.get("Custody",n.CustodyId),l=s?s.DefinitionId:null;t+=l?` and CustodyDefinitionId eq ${l}`:" and CustodyDefinitionId eq null";const a=n.ResourceId;a&&(t+=` and (ResourceId eq null or ResourceId eq ${a})`);const u=n.CustodyId;u&&(t+=` and (CustodyId eq null or CustodyId eq ${u})`);const d=n.EntryTypeId;return d&&(t+=` and (EntryTypeId eq null or EntryTypeId eq ${d})`),t}}return null}readonlyCenter_Manual(e){return!!this.getAccountResourceCustodyCenterId(e)}readonlyValueCenterId_Manual(e){return this.getAccountResourceCustodyCenterId(e)}getAccountResourceCustodyCenterId(e){if(!e)return null;const t=this.account(e),n=this.resource(e),i=this.custody(e);return(t?t.CenterId:null)||(n?t.IsBusinessUnit?n.CenterId:n.CostCenterId:null)||(i&&t.IsBusinessUnit?i.CenterId:null)}filterCenter_Manual(e){if(!e)return null;const t=this.account(e);return t&&t.IsBusinessUnit?"CenterType eq 'BusinessUnit'":null}showCustodian_Manual(e){const t=this.accountType(e);return!!t&&!!t.CustodianDefinitionId}readonlyCustodian_Manual(e){const t=this.account(e),n=this.custody(e);return!!t&&!!t.CustodianId||!!n&&!!n.CustodianId}readonlyValueCustodianId_Manual(e){const t=this.account(e),n=this.custody(e);return t?t.CustodianId:n?n.CustodianId:null}labelCustodian_Manual(e){const t=this.accountType(e),n=t?t.CustodianDefinitionId:null;return Object(_h.a)(this.workspace,this.translate,n).titleSingular()}definitionIdsCustodian_Manual(e){return[this.accountType(e).CustodianDefinitionId]}showCustody_Manual(e){const t=this.account(e);return!!t&&!!t.CustodyDefinitionId}readonlyCustody_Manual(e){const t=this.account(e);return!!t&&!!t.CustodyId}readonlyValueCustodyId_Manual(e){const t=this.account(e);return t?t.CustodyId:null}labelCustody_Manual(e){const t=this.account(e),n=t?t.CustodyDefinitionId:null;return Object(Ah.a)(this.workspace,this.translate,n).titleSingular()}definitionIdsCustody_Manual(e){return[this.account(e).CustodyDefinitionId]}custody(e){const t=this.account(e);return this.ws.get("Custody",(t?t.CustodyId:null)||(t&&t.CustodyDefinitionId?e.CustodyId:null))}showParticipant_Manual(e){const t=this.accountType(e);return!!t&&!!t.ParticipantDefinitionId}readonlyParticipant_Manual(e){const t=this.account(e),n=this.resource(e);return!!t&&!!t.ParticipantId||!!n&&!!n.ParticipantId}readonlyValueParticipantId_Manual(e){const t=this.account(e),n=this.resource(e);return t?t.CustodianId:n?n.ParticipantId:null}labelParticipant_Manual(e){const t=this.accountType(e),n=t?t.ParticipantDefinitionId:null;return Object(_h.a)(this.workspace,this.translate,n).titleSingular()}definitionIdsParticipant_Manual(e){return[this.accountType(e).ParticipantDefinitionId]}showResource_Manual(e){const t=this.account(e);return!!t&&!!t.ResourceDefinitionId}readonlyResource_Manual(e){const t=this.account(e);return!!t&&!!t.ResourceId}readonlyValueResourceId_Manual(e){const t=this.account(e);return t?t.ResourceId:null}labelResource_Manual(e){const t=this.account(e),n=t?t.ResourceDefinitionId:null;return Object(Oh.a)(this.workspace,this.translate,n).titleSingular()}definitionIdsResource_Manual(e){return[this.account(e).ResourceDefinitionId]}showQuantity(e){return!!this.resource(e)}showUnit(e){const t=this.resource(e),n=t&&t.DefinitionId?this.ws.definitions.Resources[t.DefinitionId]:null;return!!n&&!!n.UnitCardinality}readonlyUnit(e){const t=this.resourceDefinition(e);if(t&&"Single"===t.UnitCardinality&&"PropertyPlantAndEquipment"!==t.ResourceDefinitionType&&"InvestmentProperty"!==t.ResourceDefinitionType&&"IntangibleAssetsOtherThanGoodwill"!==t.ResourceDefinitionType){const t=this.resource(e);if(t)return!!t.UnitId}return!1}readonlyValueUnitId(e){const t=this.resource(e);return t?t.UnitId:null}filterUnitId(e){const t=this.resource(e);let n;if(t&&(t.UnitId&&(n=`Id eq ${t.UnitId}`),t.Units&&t.Units.length>0)){const e=t.Units.map(e=>`Id eq ${e.UnitId}`).join(" or ");n?n+=` or ${e}`:n=e}const i=this.accountType(e);if(i&&i.StandardAndPure){const e="UnitType eq 'Pure'";n?n+=` or ${e}`:n=e}return n}showTime1_Manual(e){const t=this.accountType(e);return!!t&&!!t.Time1Label}labelTime1_Manual(e){const t=this.accountType(e);return this.ws.getMultilingualValueImmediate(t,"Time1Label")}showTime2_Manual(e){const t=this.accountType(e);return!!t&&!!t.Time2Label}labelTime2_Manual(e){const t=this.accountType(e);return this.ws.getMultilingualValueImmediate(t,"Time2Label")}showCurrency(e){return!!this.account(e)&&!this.getAccountResourceCustodyCurrencyId(e)}getAccountResourceCustodyCurrencyId(e){if(!e)return null;const t=this.account(e),n=this.resource(e),i=this.custody(e);return(t?t.CurrencyId:null)||(n?n.CurrencyId:null)||(i?i.CurrencyId:null)}readonlyValueCurrencyId(e){return e?this.getAccountResourceCustodyCurrencyId(e)||e.CurrencyId:null}get functionalId(){return this.ws.settings.FunctionalCurrencyId}showMonetaryValue(e){const t=this.account(e),n=this.readonlyValueCurrencyId(e);return!!t&&!!n&&n!==this.functionalId}MonetaryValue_decimals(e){const t=this.readonlyValueCurrencyId(e),n=this.ws.get("Currency",t);return n?n.E:this.ws.settings.FunctionalCurrencyDecimals}MonetaryValue_format(e){const t=this.MonetaryValue_decimals(e);return`1.${t}-${t}`}showEntryType_Manual(e){const t=this.accountType(e);if(t){const e=this.ws.get("EntryType",t.EntryTypeParentId);return!!e&&e.IsActive}return!1}readonlyEntryType_Manual(e){const t=this.account(e);return!!t&&!!t.EntryTypeId}readonlyValueEntryTypeId_Manual(e){const t=this.account(e);return t?t.EntryTypeId:null}filterEntryType_Manual(e){return`IsAssignable eq true and Id descof ${this.accountType(e).EntryTypeParentId}`}showExternalReference_Manual(e){const t=this.accountType(e);return!!t&&!!t.ExternalReferenceLabel}labelExternalReference_Manual(e){const t=this.accountType(e);return t.ExternalReferenceLabel?this.ws.getMultilingualValueImmediate(t,"ExternalReferenceLabel"):this.translate.instant("Entry_ExternalReference")}showInternalReference_Manual(e){const t=this.accountType(e);return!!t&&!!t.InternalReferenceLabel}labelInternalReference_Manual(e){const t=this.accountType(e);return t.InternalReferenceLabel?this.ws.getMultilingualValueImmediate(t,"InternalReferenceLabel"):this.translate.instant("Entry_InternalReference")}showNotedAgentName_Manual(e){const t=this.accountType(e);return!!t&&!!t.NotedAgentNameLabel}labelNotedAgentName_Manual(e){const t=this.accountType(e);return t.NotedAgentNameLabel?this.ws.getMultilingualValueImmediate(t,"NotedAgentNameLabel"):this.translate.instant("Entry_NotedAgentName")}showNotedAmount_Manual(e){const t=this.accountType(e);return!!t&&!!t.NotedAmountLabel}labelNotedAmount_Manual(e){const t=this.accountType(e);return t.NotedAmountLabel?this.ws.getMultilingualValueImmediate(t,"NotedAmountLabel"):this.translate.instant("Entry_NotedAmount")}showNotedDate_Manual(e){const t=this.accountType(e);return!!t&&!!t.NotedDateLabel}labelNotedDate_Manual(e){const t=this.accountType(e);return t.NotedDateLabel?this.ws.getMultilingualValueImmediate(t,"NotedDateLabel"):this.translate.instant("Entry_NotedDate")}showAttachmentsErrors(e){return!!e&&!!e.Attachments&&e.Attachments.some(e=>!!e.serverErrors)}attachmentWrappers(e){return e&&e.Attachments?(this._attachmentsAttachments!==e.Attachments&&(this._attachmentsAttachments=e.Attachments,this._attachmentsResult=e.Attachments.map(e=>({attachment:e}))),this._attachmentsResult):[]}onFileSelected(e,t){const n=this.attachmentWrappers(t).map(e=>e.file?e.file.size:0).reduce((e,t)=>e+t,0);Object(N.q)(e,n,this.translate).subscribe(e=>{t.Attachments.push(e.attachment),this.attachmentWrappers(t).push(e)},e=>{this.details.displayErrorModal(e)})}onDeleteAttachment(e,t){this.attachmentWrappers(e).splice(t,1),e.Attachments.splice(t,1)}onDownloadAttachment(e,t){const n=e.Id,i=this.attachmentWrappers(e)[t];i.attachment.Id?(i.downloading=!0,this.documentsApi.getAttachment(n,i.attachment.Id).pipe(Object(A.a)(e=>{delete i.downloading,Object(N.i)(e,this.fileName(i))}),Object(P.a)(e=>(delete i.downloading,this.details.handleActionError(e),Object(O.a)(null))),Object(ne.a)(()=>{delete i.downloading})).subscribe()):i.file&&Object(N.i)(i.file,this.fileName(i))}fileName(e){const t=e.attachment;return t.FileName&&t.FileExtension?`${t.FileName}.${t.FileExtension}`:t.FileName||(e.file?e.file.name:"Attachment")}size(e){const t=e.attachment;return Object(N.j)(t.Size||(e.file?e.file.size:null))}colorFromExtension(e){return Object(N.d)(e)}iconFromExtension(e){return Object(N.m)(e)}handleFreshExtras(e){if(e){const t=e.RequiredSignaturesRelatedEntities;t&&Object(N.o)(t,this.workspace)}}requiredSignaturesForLineDef(e,t,n){return this._requiredSignaturesForLineDefModel===e&&this._requiredSignaturesForLineDefLineDefId===t||(this._requiredSignaturesForLineDefModel=e,this._requiredSignaturesForLineDefLineDefId=t,this._requiredSignaturesForLineDefLineIds=e.Lines.filter(e=>!!e.Id&&e.DefinitionId===t).map(e=>e.Id)),this.requiredSignaturesSummaryInner(this._requiredSignaturesForLineDefLineIds,n)}requiredSignaturesSummaryInner(e,t){if(!e||!t||!t.RequiredSignatures)return[];const n=t.RequiredSignatures;if(n!==this._requiredSignaturesDetailed||e!==this._requiredSignaturesLineIds){this._requiredSignaturesDetailed=n,this._requiredSignaturesLineIds=e;const t={};for(const n of e)t[n]=!0;const i={},o=[],c=n.filter(e=>(!e.LastNegativeState||!!e.SignedById)&&t[e.LineId]);for(const e of c){let t=i,n=!1;for(const i of this._requiredSignatureProps){const o=e[i];null==o?(t.undefined||(t.undefined={},n=!0),t=t.undefined):(t.values||(t.values={}),void 0===t.values[o]&&(t.values[o]={},n=!0),t=t.values[o])}if(t.lineIds||(t.lineIds=[]),t.signatureIds||(t.signatureIds=[]),t.lineIds.push(e.LineId),e.LineSignatureId&&t.signatureIds.push(e.LineSignatureId),n){const t=Object.assign({},e);delete t.LineId,o.push(t)}}this._requiredSignaturesLineIdsHash=i,this._requiredSignaturesSummary=o.sort((e,t)=>{let n=Math.abs(e.ToState)-Math.abs(t.ToState);if(0===n){const i=e.RuleType||"0",o=t.RuleType||"0";n=i>o?1:i<o?-1:0}return 0===n&&(n=(e.RoleId||0)-(t.RoleId||0)),0===n&&(n=(e.UserId||0)-(t.UserId||0)),n})}return this._requiredSignaturesSummary}lineIds(e){return e?this.getHash(e).lineIds:[]}signatureIds(e){return e?this.getHash(e).signatureIds:[]}getHash(e){if(!e)return null;let t=this._requiredSignaturesLineIdsHash;for(const n of this._requiredSignatureProps){const i=e[n];t=null==i?t.undefined:t.values[i]}return t}onSignYes(e){if(e.CanSign)this.onSign(e,!0,null);else{if(!e.CanSignOnBehalf)return void console.error("Should not be able to sign");e.OnBehalfOfUserId?this.onSign(e,!0,e.OnBehalfOfUserId):(this.reasonDetails=null,this.reasonId=null,this.onBehalfOfUserId=null,this.reasonChoicesForNegativeModal=[],this.isNegative=!1,this.onBehalfOfUserAmbiguous=!0,this.modalService.open(this.signatureModal).result.then(t=>{t&&this.onSign(e,!0,this.onBehalfOfUserId)},e=>{}))}}reasonDisplay(e,t){if(!t)return"";const n=this.lineDefinition(e);if(n.StateReasons)for(const i of n.StateReasons)if(i.Id===t)return this.ws.getMultilingualValueImmediate(i,"Name");return""}onSignNo(e,t){if(!t.CanSign&&!t.CanSignOnBehalf)return void console.error("Should not be able to sign");this.reasonDetails=null,this.reasonId=null,this.onBehalfOfUserId=!t.CanSign&&t.CanSignOnBehalf?t.OnBehalfOfUserId:null;const n=this.lineDefinition(e);this.reasonChoicesForNegativeModal=(n&&n.StateReasons||[]).filter(e=>Math.abs(e.State)===Math.abs(t.ToState)).map(e=>({name:()=>this.ws.getMultilingualValueImmediate(e,"Name"),value:e.Id})),this.isNegative=!0,this.onBehalfOfUserAmbiguous=!t.CanSign&&t.CanSignOnBehalf&&!this.onBehalfOfUserId,this.modalService.open(this.signatureModal).result.then(e=>{e&&this.onSign(t,!1,this.onBehalfOfUserId)},e=>{})}onSign(e,t,n){const i=this.lineIds(e);this.documentsApi.sign(i,{returnEntities:!0,select:this.select,onBehalfOfUserId:n,toState:t?Math.abs(e.ToState):-Math.abs(e.ToState),roleId:e.RoleId,ruleType:e.RuleType,reasonDetails:t?null:this.reasonDetails,reasonId:t?null:this.reasonId,signedAt:null},{includeRequiredSignatures:!0}).pipe(Object(A.a)(e=>{Object(N.c)(e,this.workspace),this.details.state.extras=e.Extras,this.handleFreshExtras(e.Extras)})).subscribe({error:this.details.handleActionError})}onUnsign(e){this.confirmationMessage=this.translate.instant("AreYouSureYouWantToDeleteYourSignature"),this.modalService.open(this.confirmModal).result.then(t=>{t&&this.documentsApi.unsign(this.signatureIds(e),{returnEntities:!0,select:this.select},{includeRequiredSignatures:!0}).pipe(Object(A.a)(e=>{Object(N.c)(e,this.workspace),this.details.state.extras=e.Extras,this.handleFreshExtras(e.Extras)})).subscribe({error:this.details.handleActionError})},e=>{})}canUnsign(e){return!!e.SignedById&&(e.SignedById===this.ws.userSettings.UserId||e.OnBehalfOfUserId===this.ws.userSettings.UserId)}disableUnsign(e,t){return!t||!!t.State}unsignTooltip(e,t){return t?1===t.State?this.translate.instant("Error_OpenDocumentBeforeEdit"):-1===t.State?this.translate.instant("Error_UncancelDocumentBeforeEdit"):null:null}positiveActionDisplay(e){return this.actionDisplay(Math.abs(e))}positiveActionIcon(e){return this.actionIcon(Math.abs(e))}negativeActionDisplay(e){return this.actionDisplay(-Math.abs(e))}negativeActionIcon(e){return this.actionIcon(-Math.abs(e))}actionIcon(e){switch(e){case 1:return this.workspace.ws.isRtl?"arrow-left":"arrow-right";case 2:return"thumbs-up";case 3:case 4:return"check";case-1:return"times";case-2:return"thumbs-down";case-3:case-4:return"times";default:return""}}get assignIcon(){return this.workspace.ws.isRtl?"angle-left":"angle-right"}actionDisplay(e){return this.translate.instant(e>=0?"Line_State_"+e:"Line_State_minus_"+-e)}requiredSignatureDisplay(e){return this.translate.instant("RequiredSignature_"+Math.abs(e.ToState))}requiredSignatoryDisplay(e){return this.translate.instant("RequiredSigner_"+Math.abs(e.ToState))}isTooEarlyForThisSignature(e){return e.LastUnsignedState<e.ToState}areNegativeLines(e){return!!e.LastNegativeState}disableSign(e,t,n){return!!n&&(-1===n.State||1===n.State||this.isTooEarlyForThisSignature(e)||this.areNegativeLines(e))}signTooltip(e,t,n){if(n){if(1===n.State)return this.translate.instant("Error_OpenDocumentBeforeEdit");if(-1===n.State)return this.translate.instant("Error_UncancelDocumentBeforeEdit");if(this.areNegativeLines(e)){const t=this.actionDisplay(e.LastNegativeState),n=this.lineIds(e)||[];return this.translate.instant(1===n.length?"LineAlreadyInState0":"LinesAlreadyInState0",{0:t})}if(this.isTooEarlyForThisSignature(e)){const t=this.actionDisplay(e.LastUnsignedState),n=this.lineIds(e)||[];return this.translate.instant(1===n.length?"LineIsNotYetInState0":"LinesAreNotYetInState0",{0:t})}return null}return null}onInsertSmartLine(e,t){t.Lines.push(e),this._computeEntriesModel=null,this._linesModel=null}onDeleteSmartLine(e,t){const n=t.Lines.indexOf(e);n>-1&&t.Lines.splice(n,1),this._computeEntriesModel=null}computeTabs(e){if(!e)return this._computeTabsLines=null,this._visibleTabs=[],void(this._invisibleTabs=[]);if(this._computeTabsLines!==e.Lines||this._computeTabsDefinitions!==this.definition){this._computeTabsLines=e.Lines,this._computeTabsDefinitions=this.definition;const t={};if(e.Lines)for(const a of e.Lines)t[a.DefinitionId]=!0;const n=[],i=[],o={},c={},r=this.definition.LineDefinitions,s=r.filter(e=>e.IsVisibleByDefault).map(e=>e.LineDefinitionId);for(const e of s)c[e]||(c[e]=!0,n.push(e));const l=r.filter(e=>!e.IsVisibleByDefault).map(e=>e.LineDefinitionId);for(const e of l)t[e]?c[e]||(c[e]=!0,n.push(e)):o[e]||(o[e]=!0,i.push(e));for(const e of Object.keys(t).map(e=>+e))c[e]||(c[e]=!0,n.push(e));this._visibleTabs=n,this._invisibleTabs=i}}visibleTabs(e){return this.computeTabs(e),this._visibleTabs}invisibleTabs(e){return this.computeTabs(e),this._invisibleTabs}onOtherTab(e,t){this._visibleTabs.push(e),this._visibleTabs=this._visibleTabs.slice(),this._invisibleTabs=this._invisibleTabs.filter(t=>t!==e),this.setActiveTab(e)}bookkeepingManualAdjustmentsTitle(e){return this.tabTitle(this.ws.definitions.ManualLinesDefinitionId,e)}tabTitle(e,t){if(this.isJV&&this.isManualLine(e))return this.translate.instant("Entries");{const n=this.lineDefinition(e),i=this.showAsForm(e,t);return n?this.ws.getMultilingualValueImmediate(n,i?"TitleSingular":"TitlePlural"):this.translate.instant("Undefined")}}lines(e,t){if(!t)return[];if(this._linesModel!==t&&(this._linesModel=t,this._lines={},t.Lines))for(const n of t.Lines)this._lines[n.DefinitionId]||(this._lines[n.DefinitionId]=[]),this._lines[n.DefinitionId].push(n);return this._lines[e]||(this._lines[e]=[]),this._lines[e]}tabEntries(e,t){if(!t)return[];if(this._tabEntriesModel!==t&&(this._tabEntriesModel=t,this._tabEntries={},t.LineDefinitionEntries))for(const n of t.LineDefinitionEntries)this._tabEntries[n.LineDefinitionId]||(this._tabEntries[n.LineDefinitionId]=[]),this._tabEntries[n.LineDefinitionId][n.EntryIndex]=n;return this._tabEntries[e]||(this._tabEntries[e]=[]),this._tabEntries[e]}manualLine(e){return this._manualLineModel!==e&&(this._manualLineModel=e,this._manualLineResult=e.Lines.find(e=>this.isManualLine(e.DefinitionId))),this._manualLineResult}showManualLineProps(e){return!(!this.manualLine(e)||this.showDocumentPostingDate(e)&&this.showDocumentMemo(e))}onInsertManualEntry(e,t){this.addManualEntry(e.entry,t),e.line=this.manualLine(t)}addManualEntry(e,t){let n=this.manualLine(t);n||(n={PostingDate:Object(Mi.e)(),DefinitionId:this.ws.definitions.ManualLinesDefinitionId,Entries:[],_flags:{isModified:!0}},t.Lines.push(n),this._manualLineModel=t,this._manualLineResult=n),n.Entries.push(e)}onDeleteManualEntry(e,t){this.cancelAutofill(e);const n=e.line.Entries.indexOf(e.entry);if(n>-1&&e.line.Entries.splice(n,1),0===e.line.Entries.length){const n=t.Lines.indexOf(e.line);t.Lines.splice(n),this._manualLineModel=t,this._manualLineResult=null}}computeEntries(e){e&&this._computeEntriesModel!==e&&(this._computeEntriesModel=e,this._smartEntries=[],this._manualEntries=[],e.Lines&&e.Lines.forEach(e=>{e.Entries&&e.Entries.forEach((t,n)=>{this.isManualLine(e.DefinitionId)?this._manualEntries.push({entry:t,line:e,entryIndex:n}):(e.State||0)>=0&&this._smartEntries.push({entry:t,line:e,entryIndex:n})})}))}smartEntries(e){return this.computeEntries(e),this._smartEntries}manualEntries(e){return this.computeEntries(e),this._manualEntries}showTabErrors(e,t){const n=this.tabEntries(e,t),i=this.lines(e,t);return!!n&&n.some(e=>!!e.serverErrors)||!!i&&i.some(e=>!!e.serverErrors||!!e.Entries&&e.Entries.some(e=>!!e.serverErrors))}manualColumnPaths(e,t=!1){const n=["AccountId","Center","Debit","Credit"];return t&&n.push("Memo"),t&&n.push("ModifiedWarning"),n.push("Commands"),n}smartTabHeaderColumnPaths(e,t){if(this._smartTabHeaderColumnPathsIsCommonHasChanged||this._smartTabHeaderColumnPathsModel!==t||this._smartTabHeaderColumnPathsLineDefId!==e||this._smartTabHeaderColumnPathsDefinitions!==this.ws.definitions){this._smartTabHeaderColumnPathsIsCommonHasChanged=!1,this._smartTabHeaderColumnPathsModel=t,this._smartTabHeaderColumnPathsLineDefId=e,this._smartTabHeaderColumnPathsDefinitions=this.ws.definitions;const n=this.lineDefinition(e),i=n&&n.Columns?n.Columns.map((e,t)=>({column:e,index:t})).filter(e=>{const i=e.column;if(i.InheritsFromHeader>=2&&(t.PostingDateIsCommon&&"PostingDate"===i.ColumnName||t.MemoIsCommon&&"Memo"===i.ColumnName||t.CurrencyIsCommon&&"CurrencyId"===i.ColumnName||t.CenterIsCommon&&"CenterId"===i.ColumnName||t.CustodianIsCommon&&"CustodianId"===i.ColumnName||t.CustodyIsCommon&&"CustodyId"===i.ColumnName||t.ParticipantIsCommon&&"ParticipantId"===i.ColumnName||t.ResourceIsCommon&&"ResourceId"===i.ColumnName||t.QuantityIsCommon&&"Quantity"===i.ColumnName||t.UnitIsCommon&&"UnitId"===i.ColumnName||t.Time1IsCommon&&"Time1"===i.ColumnName||t.Time2IsCommon&&"Time2"===i.ColumnName||t.ExternalReferenceIsCommon&&"ExternalReference"===i.ColumnName||t.InternalReferenceIsCommon&&"InternalReference"===i.ColumnName))return!1;if(!n.ViewDefaultsToForm&&i.InheritsFromHeader>=1)switch(i.ColumnName){case"PostingDate":case"Memo":case"CurrencyId":case"CenterId":case"CustodianId":case"CustodyId":case"ParticipantId":case"ResourceId":case"Quantity":case"UnitId":case"Time1":case"Time2":case"ExternalReference":case"InternalReference":return!0}return!1}).map(e=>e.index):[];this._smartTabHeaderColumnPathsResult=i}return this._smartTabHeaderColumnPathsResult}smartColumnIndices(e,t){if(this._smartColumnIndicesIsCommonHasChanged||this._smartColumnIndicesModel!==t||this._smartColumnIndicesLineDefId!==e||this._smartColumnIndicesDefinitions!==this.ws.definitions){this._smartColumnIndicesIsCommonHasChanged=!1,this._smartColumnIndicesModel=t,this._smartColumnIndicesLineDefId=e,this._smartColumnIndicesDefinitions=this.ws.definitions;const n=this.lineDefinition(e),i=[];if(t.LineDefinitionEntries)for(const c of t.LineDefinitionEntries.filter(t=>t.LineDefinitionId===e))i[c.EntryIndex]=c;const o=n&&n.Columns?n.Columns.map((e,t)=>({column:e,index:t})).filter(e=>{const o=e.column;if(o.InheritsFromHeader>=2&&(t.PostingDateIsCommon&&"PostingDate"===o.ColumnName||t.MemoIsCommon&&"Memo"===o.ColumnName||t.CurrencyIsCommon&&"CurrencyId"===o.ColumnName||t.CenterIsCommon&&"CenterId"===o.ColumnName||t.CustodianIsCommon&&"CustodianId"===o.ColumnName||t.CustodyIsCommon&&"CustodyId"===o.ColumnName||t.ParticipantIsCommon&&"ParticipantId"===o.ColumnName||t.ResourceIsCommon&&"ResourceId"===o.ColumnName||t.QuantityIsCommon&&"Quantity"===o.ColumnName||t.UnitIsCommon&&"UnitId"===o.ColumnName||t.Time1IsCommon&&"Time1"===o.ColumnName||t.Time2IsCommon&&"Time2"===o.ColumnName||t.ExternalReferenceIsCommon&&"ExternalReference"===o.ColumnName||t.InternalReferenceIsCommon&&"InternalReference"===o.ColumnName))return!1;{const e=this.tabEntryIndex(o),t=i[e]||this._defaultTabEntry;if(!n.ViewDefaultsToForm&&o.InheritsFromHeader>=1&&(t.PostingDateIsCommon&&"PostingDate"===o.ColumnName||t.MemoIsCommon&&"Memo"===o.ColumnName||t.CurrencyIsCommon&&"CurrencyId"===o.ColumnName||t.CenterIsCommon&&"CenterId"===o.ColumnName||t.CustodianIsCommon&&"CustodianId"===o.ColumnName||t.CustodyIsCommon&&"CustodyId"===o.ColumnName||t.ParticipantIsCommon&&"ParticipantId"===o.ColumnName||t.ResourceIsCommon&&"ResourceId"===o.ColumnName||t.QuantityIsCommon&&"Quantity"===o.ColumnName||t.UnitIsCommon&&"UnitId"===o.ColumnName||t.Time1IsCommon&&"Time1"===o.ColumnName||t.Time2IsCommon&&"Time2"===o.ColumnName||t.ExternalReferenceIsCommon&&"ExternalReference"===o.ColumnName||t.InternalReferenceIsCommon&&"InternalReference"===o.ColumnName))return!1}return!0}).map(e=>e.index):[];this._smartColumnIndicesResult=o}return this._smartColumnIndicesResult}smartColumnPathsForTable(e,t){const n=this.smartColumnIndices(e,t);if(this._smartColumnPathsForTableNumberPaths!==n){this._smartColumnPathsForTableNumberPaths=n;const i=this.smartColumnIndices(e,t).map(e=>e+"");i.push("Commands"),this._smartColumnPathsForTableResult=i}return this._smartColumnPathsForTableResult}smartTotalsColumnIndices(e,t,n){const i=[];for(const o of this.smartColumnIndices(e,t)){const c=this.columnDefinition(e,o),r=this.lines(e,t);switch(c.ColumnName){case"Value":i.push(o);break;case"MonetaryValue":if(!r||r.length<=1)i.push(o);else{const e=r[0].Entries[c.EntryIndex],t=n?this.readonlyValueCurrencyId(e):e.CurrencyId;r.every(e=>{const i=e.Entries[c.EntryIndex],o=n?this.readonlyValueCurrencyId(i):i.CurrencyId;return!o||o===t})&&i.push(o)}break;case"Quantity":if(!r||r.length<=1)i.push(o);else{const e=r[0].Entries[c.EntryIndex],t=n&&this.readonlyUnit(e)?this.readonlyValueUnitId(e):e.UnitId;r.every(e=>{const i=e.Entries[c.EntryIndex],o=n&&this.readonlyUnit(i)?this.readonlyValueUnitId(i):i.UnitId;return!o||o===t})&&i.push(o)}}}return i}smartTotal(e,t,n){const i=this.columnDefinition(e,t),o=i.EntryIndex;let c;switch(i.ColumnName){case"Value":c=e=>e.Value;break;case"MonetaryValue":c=e=>e.MonetaryValue;break;case"Quantity":c=e=>e.Quantity}return this.lines(e,n).filter(e=>(e.State||0)>=0).map(e=>e.Entries&&c(e.Entries[o])||0).reduce((e,t)=>e+t,0)}columnTemplates(e,t,n){const i=this.definition;if(this._columnTemplatesLineDefId===e&&this._columnTemplatesDef===i||(this._columnTemplatesLineDefId=e,this._columnTemplatesDef=i,this._columnTemplatesResult=null),!this._columnTemplatesResult){const i={},o=this.lineDefinition(e),c=(o?o.Columns:[]).length;for(let e=0;e<c;e++)i[e+""]={weight:1,argument:e};i.Commands={headerTemplate:t,rowTemplate:n},this._columnTemplatesResult=i}return this._columnTemplatesResult}lineDefinition(e){return e?this.ws.definitions.Lines[e]:null}columnDefinition(e,t){const n=this.lineDefinition(e);return n?n.Columns[t]:null}entryDefinition(e,t){const n=this.lineDefinition(e),i=this.columnDefinition(e,t);return n&&n.Entries&&i?n.Entries[i.EntryIndex]:null}columnName(e,t){const n=this.columnDefinition(e,t);return n?n.ColumnName:null}columnLabel(e,t){const n=this.columnDefinition(e,t);return this.ws.getMultilingualValueImmediate(n,"Label")}entity(e,t){if(e)switch(e.ColumnName){case"Memo":case"PostingDate":case"Boolean1":case"Decimal1":case"Text1":return t;default:return t&&t.Entries?t.Entries[e.EntryIndex]:null}}tabEntryIndex(e){switch(e.ColumnName){case"Memo":case"PostingDate":case"Boolean1":case"Decimal1":case"Text1":return 0;default:return e.EntryIndex}}tabEntry(e,t,n){if(!n.LineDefinitionEntries)return;const i=this.tabEntryIndex(t);return this.tabEntries(e,n)[i]}entry(e,t,n){const i=this.columnDefinition(e,t);return i&&"Memo"!==i.ColumnName&&"PostingDate"!==i.ColumnName&&"Boolean1"!==i.ColumnName&&"Decimal1"!==i.ColumnName&&"Text1"!==i.ColumnName&&n&&n.Entries?n.Entries[i.EntryIndex]:null}definitionIdsCustodian_Smart(e,t){const n=this.entryDefinition(e,t);return n&&n.CustodianDefinitionIds?n.CustodianDefinitionIds:[]}definitionIdsCustody_Smart(e,t){const n=this.entryDefinition(e,t);return n&&n.CustodyDefinitionIds?n.CustodyDefinitionIds:[]}definitionIdsParticipant_Smart(e,t){const n=this.entryDefinition(e,t);return n&&n.ParticipantDefinitionIds?n.ParticipantDefinitionIds:[]}definitionIdsResource_Smart(e,t){const n=this.entryDefinition(e,t);return n&&n.ResourceDefinitionIds?n.ResourceDefinitionIds:[]}getFilter(e,t){const n=this.columnDefinition(e,t);return n?n.Filter:null}entryTypeFilter(e,t){const n=this.entryDefinition(e,t),i=n&&n.EntryTypeParentId?`Id descof ${n.EntryTypeParentId}`:null,o=this.getFilter(e,t);return i&&o?`(${i}) and (${o})`:i||o||null}lineEntryServerErrors(e,t,n){const i=this.columnDefinition(e,t),o=this.entity(i,n);return o&&o.serverErrors?o.serverErrors[i.ColumnName]:null}tabHeaderServerErrors(e,t,n){const i=this.columnDefinition(e,t),o=this.tabEntry(e,i,n);return o&&o.serverErrors?o.serverErrors[i.ColumnName]:null}getFieldValue(e,t,n,i){const o=this.columnDefinition(e,t);if(n){const e=this.entity(o,n);return e?e[o.ColumnName]:null}{let t=this.tabEntry(e,o,i);return t||(t=this._defaultTabEntry),t[o.ColumnName]}}addNewTabEntry(e,t,n){const i=Object.assign({EntryIndex:this.tabEntryIndex(t),LineDefinitionId:e},this._defaultTabEntry);return n.LineDefinitionEntries.push(i),this.tabEntries(e,n)[i.EntryIndex]=i,i}isCommonPropertyName(e){switch(e){case"PostingDate":return"PostingDateIsCommon";case"Memo":return"MemoIsCommon";case"CurrencyId":return"CurrencyIsCommon";case"CenterId":return"CenterIsCommon";case"CustodianId":return"CustodianIsCommon";case"CustodyId":return"CustodyIsCommon";case"ParticipantId":return"ParticipantIsCommon";case"ResourceId":return"ResourceIsCommon";case"Quantity":return"QuantityIsCommon";case"UnitId":return"UnitIsCommon";case"Time1":return"Time1IsCommon";case"Time2":return"Time2IsCommon";case"ExternalReference":return"ExternalReferenceIsCommon";case"InternalReference":return"InternalReferenceIsCommon";default:return console.error(`Could not determine IsCommon version of column name ${e}`),""}}setFieldValue(e,t,n,i,o){const c=this.columnDefinition(e,t);if(n){const e=this.entity(c,n);e&&(e[c.ColumnName]=o)}else(this.tabEntry(e,c,i)||this.addNewTabEntry(e,c,i))[c.ColumnName]=o}onToggleDocumentIsCommon(e,t){e&&t&&(e[t]=!e[t],this._smartTabHeaderColumnPathsIsCommonHasChanged=!0,this._smartColumnIndicesIsCommonHasChanged=!0)}onToggleTabIsCommon(e,t,n){const i=this.columnDefinition(e,t),o=this.tabEntry(e,i,n)||this.addNewTabEntry(e,i,n),c=this.isCommonPropertyName(i.ColumnName);o[c]=!o[c],this._smartColumnIndicesIsCommonHasChanged=!0}tabIsCommon(e,t,n){const i=this.columnDefinition(e,t);return(this.tabEntry(e,i,n)||this._defaultTabEntry)[this.isCommonPropertyName(i.ColumnName)]}isReadOnly(e,t,n,i){const o=this.columnDefinition(e,t),c=this.lines(e,i),r=e=>{const t=e.State||0;return t<0||t>=o.ReadOnlyState};return n?r(n):c.some(r)}isRequired(e,t,n,i){const o=this.columnDefinition(e,t),c=this.lines(e,i),r=e=>(e.State||0)>=o.RequiredState;return n?r(n):c.some(r)}onNewSmartLineFactory(e){return this._onNewLineFactoryLineDefId!==e&&(this._onNewLineFactoryLineDefId=e,this._onNewLineFactoryResult=t=>{t.DefinitionId=e,t.Boolean1=!1,t._flags={isModified:!0},t.Entries=[];const n=this.lineDefinition(e);if(n)if(n.Entries)for(let e=0;e<n.Entries.length;e++)t.Entries[e]={Id:0,Direction:n.Entries[e].Direction,Value:0};else console.error(`Line definition ${e} is missing its Entries`);else console.error(`Missing line definition ${e}`);return t}),this._onNewLineFactoryResult}columnLabelAlignment(e,t){if(this.workspace.ws.isRtl)return null;switch(this.columnName(e,t)){case"MonetaryValue":case"Quantity":case"Value":case"NotedAmount":return"right";default:return null}}defaultsToForm(e){const t=this.lineDefinition(e);return!!t&&t.ViewDefaultsToForm}showAsForm(e,t){return!(this.lines(e,t).length>1)&&this.defaultsToForm(e)}showTabHeader(e,t,n){return this.smartTabHeaderColumnPaths(e,t).length>0||this.showBarcodeField(e,n)}onCreateForm(e,t){this.onAddNewLine(e,t)}onDeleteForm(e,t){if(!t)return;const n=this.lines(e,t);if(1===n.length){const e=n.pop();this.onDeleteSmartLine(e,t)}}onAddNewLine(e,t){if(!t)return;let n={};return n=this.onNewSmartLineFactory(e)(n),this.lines(e,t).push(n),this.onInsertSmartLine(n,t),n}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get modifiedTooltipPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}get commandsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}get isOriginalDocument(){return this.definition.IsOriginalDocument}isStateActive(e,t){if(!t)return!1;const n=this.definition;return!!n&&!t.State&&n.HasWorkflow&&this.getDocState(t)===e}isDocumentStateActive(e,t){if(!t)return!1;const n=this.definition;return!!n&&(0===e?!t.State&&!n.HasWorkflow:t.State===e)}isStateVisible(e,t){if(t&&(t.State<0||this.getDocState(t)<0))return!1;const n=this.definition;return 0===e||4===e?!!n&&n.HasWorkflow:this.isStateActive(e,t)||!!n&&n.HasWorkflow&&n["CanReachState"+e]}isDocumentStateVisible(e,t){const n=this.definition;return 0!==e||!n||!n.HasWorkflow}isPositiveState(e){return[0,1,2,3,4].some(t=>this.isStateActive(t,e))||[0,1].some(t=>this.isDocumentStateActive(t,e))}onDocumentState(e,t){this.details&&this.details.state.detailsStatus===B.c.loaded&&t([e.Id],{returnEntities:!0,select:this.select},{includeRequiredSignatures:!0}).pipe(Object(A.a)(e=>{Object(N.c)(e,this.workspace),this.details.state.extras=e.Extras,this.handleFreshExtras(e.Extras)})).subscribe({error:this.details.handleActionError})}onClose(e){this.onDocumentState(e,this.documentsApi.close)}onOpen(e){this.onDocumentState(e,this.documentsApi.open)}onCancel(e){this.onDocumentState(e,this.documentsApi.cancel)}onUncancel(e){this.onDocumentState(e,this.documentsApi.uncancel)}hasPermissionToUpdateState(e){return this.ws.canDo(this.view,"State",e?e.CreatedById:null)}missingSignatures(e,t){return!!t&&t.some(e=>!e.LastNegativeState&&!e.SignedById)}someWorkflowLinesAreNotNegative(e,t){return!!t&&t.length>0&&t.some(e=>!e.LastNegativeState)}showClose(e,t){return!!e&&!e.State}disableClose(e,t){return!e||!e.Id||!this.hasPermissionToUpdateState(e)||this.missingSignatures(e,t)}closeTooltip(e,t){return this.hasPermissionToUpdateState(e)?this.missingSignatures(e,t)?this.translate.instant("Error_LineIsMissingSignatures"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}showCancel(e,t){return!!e&&!e.State}disableCancel(e,t){return!e||!e.Id||!this.hasPermissionToUpdateState(e)||this.someWorkflowLinesAreNotNegative(e,t)}cancelTooltip(e,t){return this.hasPermissionToUpdateState(e)?this.someWorkflowLinesAreNotNegative(e,t)?this.translate.instant("Error_AllLinesMustBeInNegativeState"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}showOpen(e,t){return!!e&&!!e.Id&&1===e.State}showUncancel(e,t){return!!e&&!!e.Id&&-1===e.State}updateStateTooltip(e){return this.hasPermissionToUpdateState(e)?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}entriesCount(e){return this.smartEntries(e).length+this.manualEntries(e).length}get hasManualLines(){return this.definition.LineDefinitions.some(e=>this.isManualLine(e.LineDefinitionId))}flags(e,t,n=!1){if(this._flagsModel!==t&&(this._flagsModel=t,this._flags={}),e.Id){let t=this._flags[e.Id];return n&&!t&&(t=this._flags[e.Id]={}),t}{let t=e._flags;return n&&!t&&(t=e._flags={}),t}}getIsModified(e,t){const n=this.flags(e,t);return!!n&&n.isModified}setModified(e,t){this.flags(e,t,!0).isModified=!0}onSmartLineUpdated(e,t,n){t&&(this.setModified(t,n),e(t))}highlightPairFactory(e){return this._highlightPairFactoryModel!==e&&(this._highlightPairFactoryModel=e,this._highlightPairFactoryResult=null),this._highlightPairFactoryResult||(this._highlightPairFactoryResult=t=>{const n=this.flags(t.line,e);return!!n&&n.isHighlighted}),this._highlightPairFactoryResult}highlightLineFactory(e){return this._highlightLineFactoryModel!==e&&(this._highlightLineFactoryModel=e,this._highlightLineFactoryResult=null),this._highlightLineFactoryResult||(this._highlightLineFactoryResult=t=>{const n=this.flags(t,e);return!!n&&n.isHighlighted}),this._highlightLineFactoryResult}toggleHighlight(e,t){const n=this.flags(e,t,!0);n.isHighlighted=!n.isHighlighted,this._highlightLineFactoryResult=null,this._highlightPairFactoryResult=null}isHighlighted(e,t){return this.highlightLineFactory(t)(e)}highlightSmartTab(e,t){const n=this.highlightLineFactory(t);return this.lines(e,t).some(n)}smartTabColor(e,t){return this.highlightSmartTab(e,t)?"#eeff44":null}highlightBookkeepingTab(e){const t=this.highlightLineFactory(e);return!!e&&!!e.Lines&&e.Lines.some(e=>(e.State||0)>=0&&t(e))}bookkeepingTabColor(e){return this.highlightBookkeepingTab(e)?"#eeff44":null}formColor(e,t){const n=this.highlightLineFactory(t),i=this.lines(e,t);return 1===i.length&&n(i[0])?"#eeff44":null}getDocState(e){if(this._documentStateDoc!==e&&(this._documentStateDoc=e,this._documentStateResult=null),null===this._documentStateResult)if(e&&e.Lines){const t=e.Lines.map(e=>e.State||0),n=t.filter(e=>e>=0);if(n.length>0)this._documentStateResult=Math.min(...n);else if(t.length>0){const e=t.filter(e=>e<0);this._documentStateResult=Math.min(...e)}else this._documentStateResult=0}else this._documentStateResult=0;return this._documentStateResult}onAutofillFromExchangeRate(e,t,n){this.cancelAutofill(e);const i=e.entry,o=i.MonetaryValue;if(o){const c=t.PostingDate||Object(Mi.e)(),r=this.readonlyValueCurrencyId(e.entry);r&&(e.direction=n,e.subscription=this.api.exchangeRatesApi(this.notifyDestruct$).convertToFunctional(c,r,o).pipe(Object(A.a)(s=>{this.cancelAutofill(e);const l=i.MonetaryValue,a=this.readonlyValueCurrencyId(e.entry);this.details.isEdit&&l===o&&a===r&&(t.PostingDate||c)===c&&(i.Value=s,i.Direction=n)}),Object(P.a)(t=>{if(this.cancelAutofill(e),404===t.status){const e=this.translate.instant("Error_NoExRateFoundForCurrency0Date1",{0:this.ws.getMultilingualValue("Currency",r,"Name"),1:Object(Ie.a)(c,this.workspace,this.translate)});this.details.displayErrorModal(e)}else this.details.displayErrorModal(t.error);return Object(O.a)(null)}),Object(ne.a)(()=>this.cancelAutofill(e))).subscribe())}else i.Value=0}cancelAutofill(e){e.subscription&&(e.subscription.unsubscribe(),delete e.subscription,delete e.direction)}onAutoBalance(e,t,n){if(!t||!t.Lines)return;const i=e.entry,o=(i.Value||0)*(i.Direction||1),c=t.Lines.filter(e=>(e.State||0)>=0).map(e=>e.Entries?e.Entries.map(e=>(e.Value||0)*(e.Direction||1)).reduce((e,t)=>e+t,0):0).reduce((e,t)=>e+t,0)-o;c>0?(i.Direction=-1,i.Value=Math.abs(c),n(e)):c<0?(i.Direction=1,i.Value=Math.abs(c),n(e)):e.PH||(i.Direction=1,delete i.Value,n(e))}onReverse(e,t,n){if(!n)return;const i=this.processEntryClone(JSON.parse(JSON.stringify(e.entry)));i.Direction=1===i.Direction?-1:1,this.addManualEntry(i,t),this._computeEntriesModel=null}onDeleteAll(e,t,n){n&&(t.Lines=t.Lines.filter(t=>t.DefinitionId!==e),this._computeEntriesModel=null,this._linesModel=null)}onDeleteAllManualEntries(e,t){this.onDeleteAll(this.ws.definitions.ManualLinesDefinitionId,e,t)}onCloneManualLine(e,t,n){if(!n)return;const i=this.processEntryClone(JSON.parse(JSON.stringify(e.entry)));this.addManualEntry(i,t),this._computeEntriesModel=null}showAutoGenerate(e,t){if(!t)return!1;const n=this.lineDefinition(e);return!!n&&n.GenerateScript}autoGenerateLabel(e){const t=this.lineDefinition(e);return this.ws.getMultilingualValueImmediate(t,"GenerateLabel")||this.translate.instant("AutoGenerate")}parameterLabel(e){let t=this.ws.getMultilingualValueImmediate(e,"Label");return"Required"===e.Visibility&&(t=`${t} *`),t}parameterDesc(e){return e.desc||(e.desc=Object(N.h)(this.ws,e.Control,e.ControlOptions))}updateOn(e){const t=this.parameterDesc(e);return Object(N.s)(t)}get autoGenerateLineDef(){return this.lineDefinition(this.autoGenerateLineDefId)}trackByKey(e){return e.Key}onAutoGenerate(e,t,n){if(!n)return;const i=this.lineDefinition(e);this.autoGenerateLineDefId===e&&this.autoGenerateDoc===t||(this.autoGenerateDoc=t,this.autoGenerateLineDefId=e,this.autoGenerateArgs={}),i.GenerateParameters.length>0?this.modalService.open(this.autoGenerateModal):this.onDoAutoGenerate()}onDoAutoGenerate(e){const t=this.autoGenerateDoc;this.autoGenerateRequiredParamsAreSet&&this.documentsApi.autoGenerate(this.autoGenerateLineDefId,this.autoGenerateArgs).pipe(Object(A.a)(n=>{if(e&&e.close(),n.Result.length>0){Object(N.o)(n.RelatedEntities,this.workspace),this.workspace.notifyStateChanged();for(const e of n.Result)e._flags={isModified:!0};t.Lines.push(...n.Result),this._computeEntriesModel=null,this._linesModel=null}else{const e=this.translate.instant("Message_AutoGenerateReturnedNothing");this.details.displayModalMessage(e)}})).subscribe({error:this.details.handleActionError})}get autoGenerateRequiredParamsAreSet(){const e=this.autoGenerateLineDef;if(e&&e.GenerateParameters.length>0)for(const t of e.GenerateParameters)if("Required"===t.Visibility&&!Object(N.n)(this.autoGenerateArgs[t.Key]))return!1;return!0}total(e,t,n=!1){if(t=t,!e||!e.Lines)return null;let i=e.Lines;if(n){const e=this.ws.definitions.ManualLinesDefinitionId;i=i.filter(t=>t.DefinitionId===e)}return t*i.filter(e=>(e.State||0)>=0).map(e=>e.Entries?e.Entries.filter(e=>e.Direction===t).map(e=>(e.Value||0)*(e.Direction||1)).reduce((e,t)=>e+t,0):0).reduce((e,t)=>e+t,0)}get functionalName(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")}barcodeColumnCollection(e){const t=this.lineDefinition(e),n=t.Columns[t.BarcodeColumnIndex];if(n)switch(n.ColumnName){case"CustodianId":case"ParticipantId":return"Relation";case"CustodyId":return"Custody";case"ResourceId":return"Resource"}else console.error(`BarcodeColumnIndex ${t.BarcodeColumnIndex} is out of range`)}barcodeColumnIndex(e){return this.lineDefinition(e).BarcodeColumnIndex}barcodeQuantityColumnIndex(e){const t=this.lineDefinition(e);if(this.barcodeQuantityColumnIndexDefinition!==t){this.barcodeQuantityColumnIndexDefinition=t;const e=t.Columns[t.BarcodeColumnIndex];e?this.barcodeQuantityColumnIndexResult=t.Columns.findIndex(t=>"Quantity"===t.ColumnName&&t.EntryIndex===e.EntryIndex):console.error("Could not find suitable quantity column for barcode")}return this.barcodeQuantityColumnIndexResult}showBarcodeField(e,t){if(!t)return!1;const n=this.lineDefinition(e);return Object(N.n)(n.BarcodeColumnIndex)}barcodeFieldPlaceholder(e){const t=this.barcodeColumnIndex(e),n=this.columnLabel(e,t);return this.translate.instant("Scan0",{0:n})}getBarcode(e,t){return this.barcodeModel===t&&this.barcodeLineDefId===e||(this.barcodeModel=t,this.barcodeLineDefId=e,this.barcode=null),this.barcode}setBarcode(e,t,n){this.barcodeModel===t&&this.barcodeLineDefId===e||(this.barcodeModel=t,this.barcodeLineDefId=e,this.barcode=null),this.barcode!==n&&(this.barcode=n,this.clearBarcodeError())}drawAttentionToLine(e,t,n){this.attentionItem=e,setTimeout(()=>this.attentionItem=null,250),null===t?setTimeout(()=>n.scrollToEnd(),50):setTimeout(()=>n.scrollTo(t),50)}onBarcodeSuccess(e){e.BarcodeBeepsEnabled&&this.audio.beep(100,920,150)}getBarcodeError(e,t){return this.barcodeErrorsModel===t&&this.barcodeErrorsLineDefId===e||(this.barcodeErrorsModel=t,this.barcodeErrorsLineDefId=e,this.clearBarcodeError()),this.barcodeError?this.barcodeError():null}showBarcodeError(e,t){return this.barcodeErrorsModel===t&&this.barcodeErrorsLineDefId===e||(this.barcodeErrorsModel=t,this.barcodeErrorsLineDefId=e,this.clearBarcodeError()),!!this.barcodeError}onBarcodeError(e,t){this.barcodeError=t,e.BarcodeBeepsEnabled&&this.audio.beep(999,150,300)}clearBarcodeError(){this.barcodeError=null}getBarcodeScanCount(e,t,n){return this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={}),this._barcodeScanCount[`${e}/${n}`]||0}incrementBarcodeScanCount(e,t,n){this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={});const i=`${e}/${n}`;this._barcodeScanCount[i]=this._barcodeScanCount[i]?this._barcodeScanCount[i]+1:1}clearBarcodeScanCount(e,t,n){this._barcodeScanCountModel!==t&&(this._barcodeScanCountModel=t,this._barcodeScanCount={});const i=`${e}/${n}`,o=this._barcodeScanCount[i];return delete this._barcodeScanCount[i],o}isBarcodeLoading(e,t){return this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]>0}onBarcodeStartLoading(e,t,n){this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]=this._isBarcodeLoading[e]?this._isBarcodeLoading[e]+1:1,this.incrementBarcodeScanCount(e,t,n)}onBarcodeFinishedLoading(e,t,n){return this._isBarcodeLoadingModel!==t&&(this._isBarcodeLoadingModel=t,this._isBarcodeLoading={}),this._isBarcodeLoading[e]&&(this._isBarcodeLoading[e]=Math.max(0,this._isBarcodeLoading[e]-1)),this.clearBarcodeScanCount(e,t,n)}onBarcodeEnter(e,t,n){const i=this.getBarcode(e,t);if(i){this.setBarcode(e,t,null);const o=this.lineDefinition(e),c=this.barcodeColumnCollection(e),r=this.barcodeColumnIndex(e),s=o.BarcodeProperty,l=(c,s)=>{if("IncrementQuantity"===o.BarcodeExistingItemHandling){const i=this.barcodeQuantityColumnIndex(e),r=this.getFieldValue(e,i,c,t)||0;this.setFieldValue(e,i,c,t,r+1),this.drawAttentionToLine(c,s,n),this.onBarcodeSuccess(o)}else if("AddNewLine"===o.BarcodeExistingItemHandling){const i=this.onAddNewLine(e,t),s=this.getFieldValue(e,r,c,t);this.setFieldValue(e,r,i,t,s),this.drawAttentionToLine(i,null,n),this.onBarcodeSuccess(o)}else"ThrowError"===o.BarcodeExistingItemHandling?(this.drawAttentionToLine(c,s,n),this.onBarcodeError(o,()=>this.translate.instant("Error_Barcode0AlreadyAdded",{0:i}))):"DoNothing"===o.BarcodeExistingItemHandling?(this.drawAttentionToLine(c,s,n),this.onBarcodeSuccess(o)):console.error(`Unknown value '${o.BarcodeExistingItemHandling}' for BarcodeExistingItemHandling`)},a=this.lines(e,t),u=a.findIndex(n=>{const o=this.getFieldValue(e,r,n,t),l=this.ws.get(c,o);return!!l&&l[s]===i}),d=a[u];if(d)l(d,u);else if(this.getBarcodeScanCount(e,t,i)>0)this.incrementBarcodeScanCount(e,t,i);else{let c,a,u,d;switch(o.Columns[o.BarcodeColumnIndex].ColumnName){case"CustodianId":c=this.definitionIdsCustodian_Smart(e,r),a=c&&1===c.length?c[0]:null,u=Object(_h.a)(this.workspace,this.translate,a),d=u.select+",DefinitionId,"+this.additionalSelectCustodian_Smart(e);break;case"CustodyId":c=this.definitionIdsCustody_Smart(e,r),a=c&&1===c.length?c[0]:null,u=Object(Ah.a)(this.workspace,this.translate,a),d=u.select+",DefinitionId,"+this.additionalSelectCustody_Smart(e);break;case"ParticipantId":c=this.definitionIdsParticipant_Smart(e,r),a=c&&1===c.length?c[0]:null,u=Object(_h.a)(this.workspace,this.translate,a),d=u.select+",DefinitionId,"+this.additionalSelectParticipant_Smart(e);break;case"ResourceId":c=this.definitionIdsResource_Smart(e,r),a=c&&1===c.length?c[0]:null,u=Object(Oh.a)(this.workspace,this.translate,a),d=u.select+",DefinitionId,"+this.additionalSelectResource_Smart(e)}const b=u.properties[s];if(!b)return void console.error(`Barcode Property '${s}' could not be found`);const f=Object(wi.g)(b)?`'${i.replace("'","''")}'`:i.toString(),m=`${s} eq ${f}`,g=" and IsActive eq true",p=this.getFilter(e,r),h=c.length>1?c.map(e=>`DefinitionId eq ${e}`).reduce((e,t)=>`${e} or ${t}`):null,v={select:d,filter:m+g+(p?` and (${p})`:"")+(h?` and (${h})`:""),top:2,skip:0};this.onBarcodeStartLoading(e,t,i),this.api.crudFactory(u.apiEndpoint,this.notifyDestruct$).getEntities(v).pipe(Object(A.a)(c=>{const a=this.onBarcodeFinishedLoading(e,t,i);if(c&&c.Result&&c.Result.length>0)if(c.Result.length>1)this.onBarcodeError(o,()=>this.translate.instant("Error_MoreThanOneRecordWithBarcode0",{0:i}));else{const u=Object(N.c)(c,this.workspace)[0];if(this.ws.get(c.CollectionName,u)[s]!==i)this.onBarcodeError(o,()=>this.translate.instant("Error_CouldNotFindBarcode0",{0:i}));else{const i=this.lines(e,t),c=i.findIndex(n=>u===this.getFieldValue(e,r,n,t)),s=i[c];if(s)l(s,c);else{const i=this.onAddNewLine(e,t);if(this.setFieldValue(e,r,i,t,u),"IncrementQuantity"===o.BarcodeExistingItemHandling){const n=this.barcodeQuantityColumnIndex(e);this.setFieldValue(e,n,i,t,1)}if(this.drawAttentionToLine(i,null,n),this.onBarcodeSuccess(o),a>1)for(let e=1;e<a;e++){const t=160;Object(on.a)(t*e).pipe(Object(A.a)(()=>l(i,null)),Object(Gb.a)(this.notifyDestruct$)).subscribe()}}}}else this.onBarcodeError(o,()=>this.translate.instant("Error_CouldNotFindBarcode0",{0:i}))}),Object(P.a)(n=>(this.onBarcodeError(o,()=>n.error),this.onBarcodeFinishedLoading(e,t,i),Object(O.a)(null))),Object(Gb.a)(this.notifyDestruct$)).subscribe()}}}get select(){const e=this.definition;if(this.selectDefinition!==e){this.selectDefinition=e;const t={};for(const i of e.LineDefinitions.map(e=>e.LineDefinitionId)){const e=this.ws.definitions.Lines[i];if(Object(N.n)(e.BarcodeColumnIndex)&&e.BarcodeProperty){const n=e.Columns[e.BarcodeColumnIndex];if(n)switch(n.ColumnName){case"CustodianId":t[`Lines.Entries.Custodian.${e.BarcodeProperty}`]=!0;break;case"ParticipantId":t[`Lines.Entries.Participant.${e.BarcodeProperty}`]=!0;break;case"CustodyId":t[`Lines.Entries.Custody.${e.BarcodeProperty}`]=!0;break;case"ResourceId":t[`Lines.Entries.Resource.${e.BarcodeProperty}`]=!0}}}let n=this.selectBase;for(const e of Object.keys(t))n+=","+e;this.selectResult=n}return this.selectResult}additionalSelectCustodian_Smart(e){return this.lineDefinition(e).BarcodeProperty||""}additionalSelectCustody_Smart(e){return`CurrencyId,${this.lineDefinition(e).BarcodeProperty||""}`}additionalSelectParticipant_Smart(e){return this.lineDefinition(e).BarcodeProperty||""}additionalSelectResource_Smart(e){return`CurrencyId,UnitId,${this.lineDefinition(e).BarcodeProperty||""}`}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(i.a),o.Pb(K.t),o.Pb(Yq))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-documents-details"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(sQ,!0),o.Oc(lQ,!0),o.Oc(aQ,!0)),2&e&&(o.Ec(n=o.ic())&&(t.confirmModal=n.first),o.Ec(n=o.ic())&&(t.signatureModal=n.first),o.Ec(n=o.ic())&&(t.autoGenerateModal=n.first))},inputs:{definitionId:"definitionId",previewDefinition:"previewDefinition"},features:[o.yb],decls:19,vars:2,consts:[["collection","Document",3,"definitionId","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","isInactive","documentHeaderTemplate","actions","sidebarTemplate","registerPristineFunc","isDirtyFunc","extraParams","handleFreshExtras","toolbarTemplate","encodeCustomStateFunc","select","savePreprocessing",4,"ngIf","ngIfElse"],["pageNotFound",""],["detailsCrumb",""],["toolbar",""],["documentHeader",""],["document",""],["sidebar",""],["confirmModal",""],["signatureModal",""],["autoGenerateModal",""],["collection","Document",3,"definitionId","createFunc","cloneFunc","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","isInactive","documentHeaderTemplate","actions","sidebarTemplate","registerPristineFunc","isDirtyFunc","extraParams","handleFreshExtras","toolbarTemplate","encodeCustomStateFunc","select","savePreprocessing"],[3,"showHome"],["class","mx-2 d-inline-block",4,"ngIf"],["class","d-inline-block","container","body",3,"placement","ngbTooltip",4,"ngIf"],[1,"mx-2","d-inline-block"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-sm","btn-light","t-white-button","text-primary","t-toolbar-button",3,"disabled","click"],["icon","undo"],[1,"d-none","d-md-inline"],[1,"btn","btn-sm","btn-danger","t-toolbar-button",3,"disabled","click"],["icon","times"],[1,"btn","btn-sm","btn-success","t-toolbar-button",3,"disabled","click"],["icon","check"],[1,"w-100","t-document-header","d-flex","justify-content-end"],[4,"ngIf","ngIfElse"],["negativeStates",""],[1,"t-flow-chart","small","d-none","d-lg-block"],[3,"active",4,"ngIf"],[1,"small","t-lone-state","active","d-block","d-lg-none"],[4,"ngIf"],[1,"small","t-lone-state","active","d-block"],[1,"col-12","mb-2","mb-sm-4","t-h2",3,"serverErrors"],["class","font-weight-normal",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","codeWidth","prefix","ngModelChange",4,"ngIf"],["class","t-form-group","labelContext","PostingDateIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group",3,"label","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CustodianIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CustodyIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ParticipantIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ResourceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CenterIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","CurrencyIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","QuantityIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","UnitIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","Time1IsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","Time2IsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","ExternalReferenceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","InternalReferenceIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["class","t-form-group","labelContext","MemoIsCommon",3,"label","labelContextMenu","disableLabelMenu","serverErrors",4,"ngIf"],["perTab",""],["perLine",""],["documentIsCommonMenu",""],["ngbNav","",1,"pt-3","pt-sm-4","w-100","nav-tabs",3,"destroyOnHide","activeId","activeIdChange"],["tabs","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["smartCommands",""],["ngbDropdown","",4,"ngIf"],[3,"class","ngbNavItem",4,"ngIf"],[1,"w-100",3,"ngbNavOutlet"],["type","file","multiple","",1,"d-none",3,"change"],["fileInput",""],["manualLines",""],["header_Account",""],["row_Account",""],["header_Center",""],["row_Center",""],["header_Debit",""],["row_Debit",""],["header_Credit",""],["row_Credit",""],["autofillFromExchangeRate",""],["header_Memo",""],["row_Memo",""],["row_ModifiedWarning",""],["row_SmartEntryCommands",""],["header_ManualEntryCommands",""],["row_ManualEntryCommands",""],[1,"font-weight-normal"],["required","",3,"ngModel","ngModelOptions","codeWidth","prefix","ngModelChange"],["labelContext","PostingDateIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"metadata",4,"ngIf"],[3,"disabled","required","ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"metadata"],[3,"disabled","required","ngModel","ngModelOptions","ngModelChange"],[1,"t-form-group",3,"label","serverErrors"],[3,"ngModel","choices","ngModelChange",4,"ngIf"],[3,"ngModel","choices","ngModelChange"],["labelContext","CustodianIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","definitionIds","filter","required","disabled","ngModelChange",4,"ngIf"],[3,"link","itemId"],[3,"ngModel","definitionIds","filter","required","disabled","ngModelChange"],["labelContext","CustodyIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ParticipantIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ResourceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","CenterIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","required","disabled","filter","ngModelChange",4,"ngIf"],["link","../../../centers",3,"itemId"],[3,"ngModel","required","disabled","filter","ngModelChange"],["labelContext","CurrencyIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","filter","required","disabled","ngModelChange",4,"ngIf"],["link","../../../currencies",3,"itemId"],[3,"ngModel","filter","required","disabled","ngModelChange"],["labelContext","QuantityIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","required","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","required","disabled","ngModelChange"],["labelContext","UnitIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","Time1IsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[3,"ngModel","ngModelOptions","required","disabled","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","required","disabled","ngModelChange"],["labelContext","Time2IsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","ExternalReferenceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","InternalReferenceIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],["labelContext","MemoIsCommon",1,"t-form-group",3,"label","labelContextMenu","disableLabelMenu","serverErrors"],[1,"flex-grow-1"],[1,"font-italic","text-muted"],[1,"dropdown"],[1,"dropdown-menu","show","shadow-sm"],[1,"dropdown-item","px-0","py-1",3,"click"],[1,"t-menu-icon"],[3,"icon"],[1,"t-menu-text"],[3,"ngbNavItem"],["ngbNavLink",""],["class","text-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["smartHeaderCommands",""],["tabIsCommonMenu",""],[1,"text-danger"],["icon","exclamation"],["smartTab",""],["smartHeader",""],["smartRow",""],["formGroupContent",""],["class","row mx-0",4,"ngIf"],["tableTab",""],[1,"row","m-0","pt-2","t-form"],["noFormMessage",""],["class","col-12 py-1 px-3 d-flex",4,"ngIf"],[1,"col-12","d-flex","justify-content-end"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[1,"h-100","border-left"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1",3,"click"],["icon","trash",3,"title"],["icon","plus",3,"title"],["class","px-3 text-muted font-italic",4,"ngIf"],[1,"px-3","text-muted","font-italic"],[1,"col-12","py-1","px-3","d-flex"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],["icon","plus"],["class","row m-0 pt-2 pb-3 t-form border-bottom",4,"ngIf"],[3,"dataSource","isEdit","columnPaths","headerTemplate","rowTemplate","columnTemplates","onNewItem","highlightFunc","attentionItem","insert","delete"],["tableComponent",""],["class","d-flex justify-content-end mt-3",4,"ngIf"],[1,"row","m-0","pt-2","pb-3","t-form","border-bottom"],[1,"w-100"],["class","t-form-group",4,"ngIf"],["class","w-100 pt-3",4,"ngIf"],[1,"t-form-group",3,"labelContextMenu","labelContext","disableLabelMenu","serverErrors","label"],[1,"t-form-group"],[3,"ngModel","placeholder","ngModelChange","enter"],[1,"w-100","pt-3"],["dismissable","true",3,"dismiss"],[1,"d-flex","justify-content-end","mt-3"],[1,"border-top","border-bottom","py-1"],["colspan","10",1,"p-1"],[2,"width","20px"],[1,"small","font-weight-bold"],[2,"text-align","right"],[4,"ngTemplateOutlet"],[1,"border-top","border-bottom"],[1,"small","font-weight-bold","pb-12","pt-2"],[1,"px-1","pt-2",2,"text-align","right"],[1,"small","font-weight-bold","pt-12","pb-2"],[1,"px-1","pb-2","align-right",2,"text-align","right"],["class","t-form-group",3,"serverErrors",4,"ngIf"],["class","t-form-group",3,"serverErrors","label",4,"ngIf"],[1,"t-form-group",3,"serverErrors"],[1,"t-form-group",3,"serverErrors","label"],[3,"ngSwitch",4,"ngIf","ngIfElse"],["editMode",""],[3,"ngSwitch"],["link","../../../accounts",3,"itemId",4,"ngSwitchCase"],["link","../../../currencies",3,"itemId",4,"ngSwitchCase"],[3,"link","itemId",4,"ngSwitchCase"],["link","../../../centers",3,"itemId",4,"ngSwitchCase"],["link","../../../entry-types",3,"itemId",4,"ngSwitchCase"],["class","t-right-aligned",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["link","../../../accounts",3,"itemId"],["link","../../../entry-types",3,"itemId"],[1,"t-right-aligned"],["editableFormGroupContent",""],[1,"w-100","t-disabled-background","border-bottom",3,"ngSwitch"],["additionalSelect","CurrencyId",3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],["additionalSelect","E",3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],[3,"required","definitionIds","ngModel","filter","additionalSelect","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","filter","ngModelChange",4,"ngSwitchCase"],[3,"required","filter","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","textAlignment","ngModelChange",4,"ngSwitchCase"],[3,"required","ngModel","ngModelOptions","ngModelChange",4,"ngSwitchCase"],["class","custom-control custom-checkbox t-labelless-checkbox",4,"ngSwitchCase"],["additionalSelect","CurrencyId",3,"required","ngModel","filter","ngModelChange"],["additionalSelect","E",3,"required","ngModel","filter","ngModelChange"],[3,"required","definitionIds","ngModel","filter","additionalSelect","ngModelChange"],[3,"required","ngModel","filter","ngModelChange"],[3,"required","filter","ngModel","ngModelChange"],[3,"required","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","textAlignment","ngModelChange"],[3,"required","ngModel","ngModelOptions","ngModelChange"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModel","required","id","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[1,"row","mx-0"],[1,"col-12","mt-3"],["class","col-12 col-lg-6 px-2 px-lg-5 mt-3 mb-1",4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","px-2","px-lg-5","mt-3","mb-1"],[1,"border-bottom","d-flex","align-items-stretch","p-2","bg-light"],[2,"height","37px"],[1,"px-2","small","p-1","d-flex","justify-content-between"],[1,"text-truncate"],["link","../../../roles",3,"itemId",4,"ngIf"],[3,"link","itemId",4,"ngIf"],["link","../../../users",3,"itemId",4,"ngIf"],["class","text-muted",4,"ngIf"],["placement","bottom","container","body",1,"d-inline",3,"ngbTooltip"],["class","btn btn-sm btn-light text-primary t-white-button btn-sm h-100 py-0 px-1","style","margin-top:-4px",3,"title","disabled","click",4,"ngIf"],[1,"d-flex","align-items-center","justify-content"],["shape","circle",3,"src","imageId","size"],[1,"p-2","flex-grow-1","text-truncate","d-flex","align-items-center"],["link","../../../users",3,"itemId"],[1,"d-flex","align-items-center"],[1,"px-1","font-weight-bold","t-large"],[1,"text-danger","small","align-items-center",2,"max-width","120px"],[1,"font-weight-bold"],["placement","bottom","container","body",1,"w-50","px-1",3,"ngbTooltip"],[1,"btn","btn-danger","px-2","w-100","h-100",3,"disabled","click"],[1,"btn","btn-success","px-2","w-100","h-100",3,"disabled","click"],["link","../../../roles",3,"itemId"],[1,"text-muted"],[1,"btn","btn-sm","btn-light","text-primary","t-white-button","btn-sm","h-100","py-0","px-1",2,"margin-top","-4px",3,"title","disabled","click"],["icon","trash"],["ngbDropdown","",3,"placement",4,"ngIf"],["ngbDropdown","",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],[1,"small"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"t-transparent-background",3,"click"],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf"],["ngbDropdownToggle","","tabindex","-1",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],["icon","ellipsis-v"],["ngbDropdown",""],["href","","ngbDropdownToggle","",1,"nav-link","t-no-arrow",3,"click"],["icon","ellipsis-h"],["class","t-transparent-background","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["ngbNavLink","",1,"px-2",3,"title"],["icon","book"],[1,"col-12","mt-3","pb-2","border-bottom"],[1,"small2","font-weight-bold2"],[3,"dataSource","itemSize","visibleRows","highlightFunc","columnPaths","columnTemplates"],["ngbNavLink","",1,"px-2"],[1,"small","t-slightly-bold",3,"title"],["icon","paperclip"],["class","p-3 font-italic font-weight-light2 text-muted",4,"ngIf"],["class","w-100 mx-0 mb-1 p-2 p-sm-3 overflow-auto","style","max-height: 450px;",4,"ngIf"],["class","py-2 px-3 col-12 d-flex align-items-center justify-content-end",4,"ngIf"],[1,"p-3","font-italic","font-weight-light2","text-muted"],[1,"w-100","mx-0","mb-1","p-2","p-sm-3","overflow-auto",2,"max-height","450px"],["class","text-nowrap",3,"bg-light",4,"ngFor","ngForOf"],[1,"text-nowrap"],[1,"border-bottom","d-flex","align-items-center"],[1,"px-3","pt-1","pb-2"],[2,"font-size","200%",3,"icon"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","px-1",2,"min-width","0px"],["class","d-flex align-items-stretch","style","max-width: 750px;",4,"ngIf","ngIfElse"],["editAttachment",""],[1,"d-flex","align-items-stretch"],[1,"flex-grow-1","small","text-muted","text-truncate",2,"min-width","0px"],["class","mx-1",4,"ngIf"],[1,"d-flex","align-items-stretch",2,"max-width","750px"],["type","button",1,"btn","btn-link","p-0","text-primary","border-top-0","border-left-0","border-right-0","text-truncate",3,"click"],["class","mx-2 flex-grow-1","style","min-width: 0;",4,"ngIf"],[1,"mx-2","flex-grow-1",2,"min-width","0"],[1,"text-black"],[2,"max-width","500px"],[3,"serverErrors"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],[1,"mx-1"],["class","btn btn-sm text-primary p-0 px-1 t-toolbar-button btn-light t-white-button",3,"title","click",4,"ngIf","ngIfElse"],["spinner",""],[1,"btn","btn-sm","text-primary","p-0","px-1","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","download"],[1,"px-1","t-toolbar-button","d-inline","t-vertical-align-middle"],[1,"py-2","px-3","col-12","d-flex","align-items-center","justify-content-end"],[1,"btn","btn-sm","btn-primary","text-primary2","btn-light2","t-white-button2",3,"click"],["icon","upload"],[3,"dataSource","isEdit","itemSize","columnPaths","columnTemplates","onNewItem","insert","delete"],["class","row m-0 py-2",4,"ngIf"],[1,"row","m-0","py-2"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["style","min-width: 150px;",3,"ngModel","additionalSelect","filter","ngModelChange",4,"ngIf"],[1,"small","d-flex","flex-wrap","px-2","pt-1"],["class","text-muted font-italic",4,"ngIf"],[1,"text-muted","font-italic"],[2,"min-width","150px",3,"ngModel","additionalSelect","filter","ngModelChange"],[3,"label","serverErrors"],["required","",3,"ngModel","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelChange"],["textAlignment","right","required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],["required","",3,"ngModel","additionalSelect","definitionIds","ngModelChange",4,"ngIf"],["required","",3,"ngModel","additionalSelect","definitionIds","ngModelChange"],["required","",3,"ngModel","definitionIds","ngModelChange",4,"ngIf"],["required","",3,"ngModel","definitionIds","ngModelChange"],["required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],[3,"ngModel","filter","ngModelChange",4,"ngIf"],[3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],["required","",3,"ngModel","filter","ngModelChange",4,"ngIf"],["required","",3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"minDecimalPlaces","maxDecimalPlaces","ngModel","ngModelChange",4,"ngIf"],[3,"minDecimalPlaces","maxDecimalPlaces","ngModel","ngModelChange"],[2,"float","right"],["class","h-100",3,"metadata",4,"ngIf"],[1,"h-100",3,"metadata"],["textAlignment","right",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelOptions","ngModelChange"],["class","d-flex justify-content-end pt-1",4,"ngIf"],[1,"d-flex","justify-content-end","pt-1"],["tabindex","-1",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1",3,"click"],["icon","exchange-alt",3,"title"],["icon","exclamation-triangle","class","text-warning","container","body",3,"placement","ngbTooltip",4,"ngIf"],["icon","exclamation-triangle","container","body",1,"text-warning",3,"placement","ngbTooltip"],[1,"d-flex","justify-content-center","px-0","px-sm-2"],[1,"w-100","t-paper-width"],["class","bg-light border-bottom py-2 px-3",4,"ngIf"],[1,"bg-light","border-bottom","py-2","px-3"],[1,"d-flex"],[1,"p-2","text-truncate"],["class","px-2 pb-2 pt-0",3,"margin-left","margin-right",4,"ngIf"],[1,"px-2","pb-2","pt-0"],[1,"form-group"],["for","user",1,"small","font-weight-bold"],[1,"bg-white","border","t-borderless-input","p-1"],["id","user",3,"ngModel","filter","showCreate","ngModelChange"],["id","message",1,"form-control","t-input","p-1","border","bg-white",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"px-3","py-3","small","font-weight-bold"],[1,"bg-light","border-bottom","pt-2","pb-2","px-3",3,"ngSwitch"],[1,"py-2","text-truncate"],[1,"small","text-muted"],[1,"d-flex","flex-wrap"],[1,"pt-2"],["icon","angle-right",3,"flip","size"],[1,"my-auto","t-vertical-alignment-center","small","text-muted"],["class","pt-1 pb-2 px-2",3,"margin-left","margin-right",4,"ngIf"],[1,"pt-1","pb-2","px-2"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-danger",3,"click"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],["class","mt-3 mb-2",4,"ngIf"],["class","mt-1",4,"ngIf"],[1,"btn",3,"disabled","click"],[1,"mt-3","mb-2"],[1,"font-weight-bold","small"],[1,"t-vertical-align-middle"],["filter","Id ne me",3,"ngModel","ngModelChange"],[1,"mt-1"],["class","t-form-group","style","margin-top:0!important",3,"label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn","btn-primary",3,"disabled","click"],["icon","bolt"],[1,"t-form-group",2,"margin-top","0!important",3,"label"],[3,"ngModel","desc","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(o.Rc(0,dQ,1,22,"t-details",0),o.Rc(1,bQ,1,1,"ng-template",null,1,o.Sc),o.Rc(3,fQ,2,1,"ng-template",null,2,o.Sc),o.Rc(5,IQ,5,5,"ng-template",null,3,o.Sc),o.Rc(7,jQ,4,2,"ng-template",null,4,o.Sc),o.Rc(9,oX,67,25,"ng-template",null,5,o.Sc),o.Rc(11,fX,4,2,"ng-template",null,6,o.Sc),o.Rc(13,mX,18,10,"ng-template",null,7,o.Sc),o.Rc(15,vX,20,17,"ng-template",null,8,o.Sc),o.Rc(17,wX,16,8,"ng-template",null,9,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,j.a,nn,K.E,ee.b,pe.a,K.v,x.t,K.A,Zq,te.u,te.k,te.n,pn.a,Nu,hn.a,ss,Ub,nj,AN,Ou,Du,In,wy,he.a,K.x,K.y,K.w,x.B,Ps.a,me.a,ve.a,Ns.a,x.y,x.z,x.A,dW,bV,te.a,te.b,be,K.l,K.r,K.p,K.o,cQ,Ba,te.c,jE],pipes:[Q.d,Zf,tm,x.g,we,ye],encapsulation:2}),e})();function MX(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Entry_Direction_Debit")," ")}function VX(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Entry_Direction_Credit")," ")}function TX(e,t){if(1&e&&(o.Vb(0,"div",6),o.Vb(1,"div",7),o.Vb(2,"span"),o.Tc(3),o.mc(4,"accounting"),o.Ub(),o.Ub(),o.Vb(5,"div",8),o.Vb(6,"div",9),o.Qb(7,"t-auto-cell",10),o.Ub(),o.Qb(8,"t-auto-cell",11),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(3),o.Vc(" ",o.oc(4,3,n.c[e].Direction*n.c[e].Value,n.functional_format),""),o.Bb(4),o.sc("entity",n.c[e]),o.Bb(1),o.sc("entity",n.c[e])}}function EX(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Memo"),"\n")}function xX(e,t){if(1&e&&(o.Vb(0,"span",12),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.ws.get("LineForQuery",n.c[e].LineId).Memo)}}const UX=function(){return[]},RX=function(e){return{template:e,expression:"Direction eq 1"}},DX=function(e){return{template:e,expression:"Direction eq -1"}},BX=function(e,t){return[e,t]},SX=function(e){return{OpenedAt:e}};let kX=(()=>{class e extends Ut.a{constructor(e,t){super(),this.workspace=e,this.translate=t}get c(){return this.ws.DetailsEntry}get ws(){return this.workspace.currentTenant}get functional_format(){const e=this.ws.settings.FunctionalCurrencyDecimals;return`1.${e}-${e}`}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-details-entries"]],features:[o.yb],decls:12,vars:24,consts:[["collection","DetailsEntry","selectDefault","Line.PostingDate,Account,Line.State,Direction,Value","selectForTiles","Line.PostingDate,Line.State,Account.Name,Account.Name2,Account.Name3,Direction,Value,Line.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["debit",""],["credit",""],["tile",""],["summaryHeader",""],["summaryColumn",""],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","DetailsEntry","path","Line.PostingDate",3,"entity"],["collection","DetailsEntry","path","Line.State",3,"entity"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,MX,2,3,"ng-template",null,1,o.Sc),o.Rc(4,VX,2,3,"ng-template",null,2,o.Sc),o.Rc(6,TX,9,6,"ng-template",null,3,o.Sc),o.Rc(8,EX,2,3,"ng-template",null,4,o.Sc),o.Rc(10,xX,2,1,"ng-template",null,5,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"DetailsEntries"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",i)("tableSummaryColumnTemplate",r)("tableSummaryHeaderTemplate",c)("multiselectActions",o.vc(14,UX))("filterDefinition",o.wc(22,SX,o.xc(19,BX,o.wc(15,RX,e),o.wc(17,DX,n))))}},directives:[Rt.a,ge.a],pipes:[Q.d,tm],encapsulation:2}),e})();function OX(e,t){if(1&e&&(o.Vb(0,"div",5),o.Vb(1,"span",6),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",7),o.Vb(4,"span"),o.Tc(5),o.mc(6,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=t.id,i=o.lc();var n;o.Bb(2),o.Uc(i.ws.getMultilingualValue("Currency",null==(n=i.ws.get("ExchangeRate",e))?null:n.CurrencyId,"Name")),o.Bb(3),o.Uc(o.nc(6,2,i.c[e].ValidAsOf))}}function _X(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"ExchangeRate"),"\n")}function LX(e,t){if(1&e&&o.Tc(0),2&e){const e=t.id,n=o.lc();o.Vc(" ",n.exchangeRateDisplay(e),"\n")}}function AX(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}const FX=function(){return[]},PX=function(e){return{template:e,expression:"CreatedById eq me"}},NX=function(e){return[e]},jX=function(e){return{CreatedBy:e}};let WX=(()=>{class e extends Ut.a{constructor(e){super(),this.workspace=e,this.expand=""}get c(){return this.ws.ExchangeRate}get ws(){return this.workspace.currentTenant}exchangeRateDisplay(e){const t=this.ws.get("ExchangeRate",e);return t?`${Object(Mi.c)(new Date(t.ValidAsOf))}-${t.CurrencyId}`:""}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-exchange-rates-master"]],features:[o.yb],decls:10,vars:19,consts:[["collection","ExchangeRate","selectDefault","ValidAsOf,AmountInCurrency,Currency,AmountInFunctional","selectForTiles","ValidAsOf,Currency.Name,Currency.Name2,Currency.Name3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["createdByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,OX,7,4,"ng-template",null,1,o.Sc),o.Rc(4,_X,2,3,"ng-template",null,2,o.Sc),o.Rc(6,LX,1,1,"ng-template",null,3,o.Sc),o.Rc(8,AX,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"ExchangeRates"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(12,FX))("filterDefinition",o.wc(17,jX,o.wc(15,NX,o.wc(13,PX,c))))}},directives:[Rt.a],pipes:[Q.d,Zf],encapsulation:2}),e})();var $X=n("yf4G");function qX(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.exchangeRateDisplay(e))}}function QX(e,t){if(1&e&&(o.Vb(0,"t-view-link",9),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("itemId",null==e?null:e.CurrencyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Currency",null==e?null:e.CurrencyId,"Name")," ")}}function HX(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"t-currencies-picker",10),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.CurrencyId=t})),o.Ub(),o.Sb()}if(2&e){const e=o.lc().model,t=o.lc();o.Bb(1),o.sc("ngModel",e.CurrencyId)("filter",t.currenciesFilter)}}function GX(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(o.nc(2,1,null==e?null:e.ValidAsOf))}}const zX=function(){return{updateOn:"blur"}};function JX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",11),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ValidAsOf=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.ValidAsOf)("ngModelOptions",o.vc(3,zX))("required",!0)}}function KX(e,t){if(1&e&&(o.Vb(0,"span",12),o.Tc(1),o.mc(2,"accounting"),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("title",null==e?null:e.AmountInCurrency),o.Bb(1),o.Uc(o.oc(2,2,null==e?null:e.AmountInCurrency,t.AmountInCurrency_format(e)))}}function YX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",13),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.AmountInCurrency=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("disabled",e.IsSystem)("ngModel",e.AmountInCurrency)("minDecimalPlaces",t.AmountInCurrency_decimals(e))("maxDecimalPlaces",6)("ngModelOptions",o.vc(5,zX))}}function XX(e,t){if(1&e&&(o.Vb(0,"span",12),o.Tc(1),o.mc(2,"accounting"),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("title",null==e?null:e.AmountInFunctional),o.Bb(1),o.Uc(o.oc(2,2,null==e?null:e.AmountInFunctional,t.functional_format))}}function ZX(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",13),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.AmountInFunctional=t})),o.Ub()}if(2&e){const e=o.lc().model,t=o.lc();o.sc("disabled",e.IsSystem)("ngModel",e.AmountInFunctional)("minDecimalPlaces",t.functional_decimals)("maxDecimalPlaces",6)("ngModelOptions",o.vc(5,zX))}}function eZ(e,t){if(1&e&&(o.Vb(0,"t-form-group",3),o.mc(1,"translate"),o.Rc(2,QX,2,2,"t-view-link",4),o.Rc(3,HX,2,2,"ng-container",5),o.Ub(),o.Vb(4,"t-form-group",3),o.mc(5,"translate"),o.Rc(6,GX,3,3,"div",5),o.Rc(7,JX,1,4,"t-date-picker",6),o.Ub(),o.Vb(8,"t-form-group",3),o.mc(9,"translate"),o.Rc(10,KX,3,5,"span",7),o.Rc(11,YX,1,6,"t-decimal-editor",8),o.Ub(),o.Vb(12,"t-form-group",3),o.mc(13,"translate"),o.Rc(14,XX,3,5,"span",7),o.Rc(15,ZX,1,6,"t-decimal-editor",8),o.Ub()),2&e){const e=t.model,n=t.isEdit,i=o.lc();o.sc("label",o.nc(1,16,"ExchangeRate_Currency"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.CurrencyId),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(5,18,"ExchangeRate_ValidAsOf"))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.ValidAsOf),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(9,20,"ExchangeRate_AmountInCurrency")+i.AmountInCurrency_postfix(e))("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.AmountInCurrency),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(13,22,"ExchangeRate_AmountInFunctional")+i.functional_postfix)("serverErrors",null==e||null==e.serverErrors?null:e.serverErrors.AmountInFunctional),o.Bb(2),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}const tZ=function(){return[]};let nZ=(()=>{class e extends gn.a{constructor(e,t){super(),this.workspace=e,this.translate=t,this.expand="Currency",this.create=()=>({ValidAsOf:Object(Mi.e)(),AmountInCurrency:1})}get ws(){return this.workspace.currentTenant}get masterCrumb(){const e=Object($X.a)(this.workspace,this.translate);return e?e.titlePlural():"???"}get currenciesFilter(){return`Id ne '${this.ws.settings.FunctionalCurrencyId}'`}AmountInCurrency_postfix(e){return e&&e.CurrencyId?` (${this.ws.getMultilingualValue("Currency",e.CurrencyId,"Name")})`:""}AmountInCurrency_decimals(e){const t=this.ws.get("Currency",e?e.CurrencyId:null);return t?t.E:this.ws.settings.FunctionalCurrencyDecimals}AmountInCurrency_format(e){return`1.${this.AmountInCurrency_decimals(e)}-6`}get functional_decimals(){return this.ws.settings.FunctionalCurrencyDecimals}get functional_format(){return`1.${this.functional_decimals}-6`}get functional_postfix(){return" ("+this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")+")"}isInactive(){return!1}exchangeRateDisplay(e){return e?`${Object(Mi.c)(new Date(e.ValidAsOf))}-${e.CurrencyId}`:""}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-exchange-rates-details"]],features:[o.yb],decls:5,vars:11,consts:[["collection","ExchangeRate",3,"idString","createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],[1,"t-form-group",3,"label","serverErrors"],["link","../../currencies",3,"itemId",4,"ngIf"],[4,"ngIf"],[3,"ngModel","ngModelOptions","required","ngModelChange",4,"ngIf"],[3,"title",4,"ngIf"],["required","",3,"disabled","ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelOptions","ngModelChange",4,"ngIf"],["link","../../currencies",3,"itemId"],["additionalSelect","E","required","",3,"ngModel","filter","ngModelChange"],[3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"title"],["required","",3,"disabled","ngModel","minDecimalPlaces","maxDecimalPlaces","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.Rc(1,qX,2,1,"ng-template",null,1,o.Sc),o.Rc(3,eZ,16,24,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("idString",t.idString)("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",t.masterCrumb)("detailsCrumb",e)("documentTemplate",n)("actions",o.vc(10,tZ))("isInactive",t.isInactive)}},directives:[j.a,pe.a,x.u,ss,Du,te.u,te.k,te.n,Nu,In],pipes:[Q.d,Zf,tm],encapsulation:2}),e})();function iZ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().id,t=o.lc();var n;o.Bb(1),o.Uc(" - "+(null==(n=t.ws.get("Document",e))?null:n.Memo))}}function oZ(e,t){if(1&e&&(o.Vb(0,"div",6),o.Vb(1,"div",7),o.Qb(2,"t-image",8),o.Ub(),o.Tc(3," \xa0\xa0\xa0 "),o.Vb(4,"div",9),o.Vb(5,"div",10),o.Vb(6,"div",11),o.Tc(7),o.Ub(),o.Vb(8,"div",12),o.Tc(9),o.mc(10,"datetimeFormat"),o.Ub(),o.Ub(),o.Vb(11,"div",13),o.Vb(12,"div",14),o.Vb(13,"span"),o.Tc(14),o.Ub(),o.Rc(15,iZ,2,1,"span",15),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.id,c=o.lc();var n;const r=null==(n=c.ws.get("User",c.c[e].CreatedById))?null:n.ImageId;var i;const s=null==(i=c.ws.get("Document",e))?null:i.Memo;o.Bb(2),o.sc("src","users/"+c.c[e].CreatedById+"/image")("imageId",r)("size",42),o.Bb(5),o.Vc(" ",c.ws.getMultilingualValue("User",c.c[e].CreatedById,"Name")," "),o.Bb(2),o.Vc(" ",o.nc(10,7,c.c[e].CreatedAt)," "),o.Bb(5),o.Uc(c.formatSerial(e)),o.Bb(1),o.sc("ngIf",s)}}function cZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Document"),"\n")}function rZ(e,t){if(1&e&&(o.Vb(0,"span",16),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.formatSerial(e))}}function sZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"NotOpened")," ")}function lZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Opened")," ")}const aZ=function(){return[]},uZ=function(e){return{template:e,expression:"OpenedAt eq null"}},dZ=function(e){return{template:e,expression:"OpenedAt ne null"}},bZ=function(e,t){return[e,t]},fZ=function(e){return{OpenedAt:e}};let mZ=(()=>{class e extends Ut.a{constructor(e,t){super(),this.workspace=e,this.translate=t}get c(){return this.ws.InboxRecord}get ws(){return this.workspace.currentTenant}formatSerial(e){const t=this.ws.Document[e],n=t.DefinitionId,i=Object(Lh.c)(this.workspace,this.translate,n).properties.SerialNumber,o=t.SerialNumber;return Object(Lh.a)(o,i.prefix,i.codeWidth)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-inbox"]],features:[o.yb],decls:12,vars:24,consts:[["collection","InboxRecord","selectDefault","Document.Memo,CreatedAt,CreatedBy,Comment,OpenedAt","selectForTiles","Comment,CreatedAt,CreatedBy.Name,CreatedBy.Name2,CreatedBy.Name3,CreatedBy.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["notopened",""],["opened",""],[1,"d-flex"],[1,"border"],[3,"src","imageId","size"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","t-slightly-bold"],[1,"text-truncate","text-muted"],[1,"d-flex","justify-content-between","mt-1","small","text-truncate"],[1,"text-truncate","text-muted",2,"min-width","0"],[4,"ngIf"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,oZ,16,9,"ng-template",null,1,o.Sc),o.Rc(4,cZ,2,3,"ng-template",null,2,o.Sc),o.Rc(6,rZ,2,1,"ng-template",null,3,o.Sc),o.Rc(8,sZ,2,3,"ng-template",null,4,o.Sc),o.Rc(10,lZ,2,3,"ng-template",null,5,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"Inbox"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(14,aZ))("filterDefinition",o.wc(22,fZ,o.xc(19,bZ,o.wc(15,uZ,c),o.wc(17,dZ,r))))}},directives:[Rt.a,be,x.u],pipes:[Q.d,we],encapsulation:2}),e})();function gZ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().id,t=o.lc();var n;o.Bb(1),o.Uc(" - "+(null==(n=t.ws.get("Document",e))?null:n.Memo))}}function pZ(e,t){if(1&e&&(o.Vb(0,"div",6),o.Vb(1,"div",7),o.Qb(2,"t-image",8),o.Ub(),o.Tc(3," \xa0\xa0\xa0 "),o.Vb(4,"div",9),o.Vb(5,"div",10),o.Vb(6,"div",11),o.Tc(7),o.Ub(),o.Vb(8,"div",12),o.Tc(9),o.mc(10,"datetimeFormat"),o.Ub(),o.Ub(),o.Vb(11,"div",13),o.Vb(12,"div",14),o.Vb(13,"span"),o.Tc(14),o.Ub(),o.Rc(15,gZ,2,1,"span",15),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.id,c=o.lc();var n;const r=null==(n=c.ws.get("User",c.c[e].AssigneeId))?null:n.ImageId;var i;const s=null==(i=c.ws.get("Document",e))?null:i.Memo;o.Bb(2),o.sc("src","users/"+c.c[e].AssigneeId+"/image")("imageId",r)("size",42),o.Bb(5),o.Vc(" ",c.ws.getMultilingualValue("User",c.c[e].AssigneeId,"Name")," "),o.Bb(2),o.Vc(" ",o.nc(10,7,c.c[e].CreatedAt)," "),o.Bb(5),o.Uc(c.formatSerial(e)),o.Bb(1),o.sc("ngIf",s)}}function hZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Document"),"\n")}function vZ(e,t){if(1&e&&(o.Vb(0,"span",16),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.formatSerial(e))}}function IZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"NotOpened")," ")}function yZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Opened")," ")}const wZ=function(){return[]},CZ=function(e){return{template:e,expression:"OpenedAt eq null"}},MZ=function(e){return{template:e,expression:"OpenedAt ne null"}},VZ=function(e,t){return[e,t]},TZ=function(e){return{OpenedAt:e}};let EZ=(()=>{class e extends Ut.a{constructor(e,t){super(),this.workspace=e,this.translate=t}get c(){return this.ws.OutboxRecord}get ws(){return this.workspace.currentTenant}formatSerial(e){const t=this.ws.Document[this.c[e].DocumentId],n=t.DefinitionId,i=Object(Lh.c)(this.workspace,this.translate,n).properties.SerialNumber,o=t.SerialNumber;return Object(Lh.a)(o,i.prefix,i.codeWidth)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-outbox"]],features:[o.yb],decls:12,vars:24,consts:[["collection","OutboxRecord","selectDefault","Document.Memo,CreatedAt,Assignee,Comment,OpenedAt","selectForTiles","Comment,CreatedAt,Assignee.Name,Assignee.Name2,Assignee.Name3,Assignee.ImageId,OpenedAt,Document.DefinitionId,Document.SerialNumber,Document.Memo",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["notopened",""],["opened",""],[1,"d-flex"],[1,"border"],[3,"src","imageId","size"],[1,"flex-grow-1",2,"min-width","0"],[1,"d-flex","justify-content-between"],[1,"text-truncate","t-slightly-bold"],[1,"text-truncate","text-muted"],[1,"d-flex","justify-content-between","mt-1","small","text-truncate"],[1,"text-truncate","text-muted",2,"min-width","0"],[4,"ngIf"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,pZ,16,9,"ng-template",null,1,o.Sc),o.Rc(4,hZ,2,3,"ng-template",null,2,o.Sc),o.Rc(6,vZ,2,1,"ng-template",null,3,o.Sc),o.Rc(8,IZ,2,3,"ng-template",null,4,o.Sc),o.Rc(10,yZ,2,3,"ng-template",null,5,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"Outbox"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(14,wZ))("filterDefinition",o.wc(22,TZ,o.xc(19,VZ,o.wc(15,CZ,c),o.wc(17,MZ,r))))}},directives:[Rt.a,be,x.u],pipes:[Q.d,we],encapsulation:2}),e})();function xZ(e,t){if(1&e&&(o.Vb(0,"div",4),o.Vb(1,"span",5),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",6),o.Vb(4,"span",5),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("IfrsConcept",e,"Label")),o.Bb(3),o.Uc(e)}}function UZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"IfrsConcept"),"\n")}function RZ(e,t){if(1&e&&(o.Vb(0,"span",7),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.ws.getMultilingualValue("IfrsConcept",e,"Label"))}}const DZ=function(){return[]};let BZ=(()=>{class e extends Ut.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.IfrsConcept}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-ifrs-concepts-master"]],features:[o.yb],decls:8,vars:14,consts:[["collection","IfrsConcept","selectDefault","Code","selectForTiles","Label,Label2,Label3",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions"],["tile",""],["summaryHeader",""],["summaryColumn",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,xZ,6,2,"ng-template",null,1,o.Sc),o.Rc(4,UZ,2,3,"ng-template",null,2,o.Sc),o.Rc(6,RZ,2,1,"ng-template",null,3,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7);o.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,11,"IfrsConcepts"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(13,DZ))}},directives:[Rt.a],pipes:[Q.d],encapsulation:2}),e})();function SZ(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Label",n.ws))}}function kZ(e,t){if(1&e&&(o.Vb(0,"t-form-group",6),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("label",o.nc(1,2,"Label")+t.ws.primaryPostfix),o.Bb(3),o.Uc(null==e?null:e.Label)}}function OZ(e,t){if(1&e&&(o.Vb(0,"t-form-group",6),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("label",o.nc(1,2,"Label")+t.ws.secondaryPostfix),o.Bb(3),o.Uc(null==e?null:e.Label2)}}function _Z(e,t){if(1&e&&(o.Vb(0,"t-form-group",6),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("label",o.nc(1,2,"Label")+t.ws.ternaryPostfix),o.Bb(3),o.Uc(null==e?null:e.Label3)}}function LZ(e,t){if(1&e&&(o.Vb(0,"t-form-group",6),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("label",o.nc(1,2,"Description")+t.ws.secondaryPostfix),o.Bb(3),o.Uc(null==e?null:e.Documentation2)}}function AZ(e,t){if(1&e&&(o.Vb(0,"t-form-group",6),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("label",o.nc(1,2,"Description")+t.ws.ternaryPostfix),o.Bb(3),o.Uc(null==e?null:e.Documentation3)}}function FZ(e,t){if(1&e&&(o.Vb(0,"t-form-group",3),o.Vb(1,"h2",4),o.Tc(2),o.Ub(),o.Ub(),o.Rc(3,kZ,4,4,"t-form-group",5),o.Rc(4,OZ,4,4,"t-form-group",5),o.Rc(5,_Z,4,4,"t-form-group",5),o.Vb(6,"t-form-group",6),o.mc(7,"translate"),o.Vb(8,"div"),o.Tc(9),o.Ub(),o.Ub(),o.Vb(10,"t-form-group",6),o.mc(11,"translate"),o.Vb(12,"div"),o.Tc(13),o.Ub(),o.Ub(),o.Rc(14,LZ,4,4,"t-form-group",5),o.Rc(15,AZ,4,4,"t-form-group",5)),2&e){const e=t.model,n=o.lc();o.Bb(2),o.Uc(n.getMultilingualValue(e,"Label",n.ws)),o.Bb(1),o.sc("ngIf",!n.ws.isPrimaryLanguage),o.Bb(1),o.sc("ngIf",!n.ws.isSecondaryLanguage&&n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!n.ws.isTernaryLanguage&&n.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("label",o.nc(7,10,"Code")),o.Bb(3),o.Uc(null==e?null:e.Code),o.Bb(1),o.sc("label",o.nc(11,12,"Description")+n.ws.primaryPostfix),o.Bb(3),o.Uc(null==e?null:e.Documentation),o.Bb(1),o.sc("ngIf",n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",n.ws.settings.TernaryLanguageId)}}const PZ=function(){return[]};let NZ=(()=>{class e extends gn.a{constructor(e){super(),this.workspace=e,this.expand=""}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-ifrs-concepts-details"]],features:[o.yb],decls:6,vars:14,consts:[["collection","IfrsConcept",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"col-12","mb-2","mb-sm-4","t-h2"],[1,"font-weight-normal"],["class","t-form-group",3,"label",4,"ngIf"],[1,"t-form-group",3,"label"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,SZ,2,1,"ng-template",null,1,o.Sc),o.Rc(4,FZ,16,14,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5);o.sc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",o.nc(1,11,"IfrsConcepts"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.vc(13,PZ))}},directives:[j.a,pe.a,x.u],pipes:[Q.d],encapsulation:2}),e})();function jZ(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",2),o.Vb(1,"t-ifrs-concepts-master",3),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("filter",e)("additionalSelect",n.additionalSelect)}}let WZ=(()=>{class e extends As{}return e.\u0275fac=function(t){return $Z(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-ifrs-concepts-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:3,vars:5,consts:[["collection","IfrsConcept",3,"filter","masterTemplate","ensureAdditionalSelect","theme","additionalSelect","entityLoaded"],["master",""],[1,"modal-body"],["mode","popup",3,"filter","additionalSelect","cancel","choose"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,jZ,2,2,"ng-template",null,1,o.Sc)),2&e){const e=o.Fc(2);o.sc("filter",t.filter)("masterTemplate",e)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("additionalSelect",t.additionalSelect)}},directives:[Ls,BZ],encapsulation:2}),e})();const $Z=o.Xb(WZ);function qZ(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",9),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("MarkupTemplate",e,"Name")),o.Bb(3),o.Uc(n.c[e].Code)}}function QZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"MarkupTemplate"),"\n")}function HZ(e,t){if(1&e&&(o.Vb(0,"span",10),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.ws.getMultilingualValue("MarkupTemplate",e,"Name"))}}function GZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"CreatedByMe")," ")}function zZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deployed")," ")}function JZ(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"NotDeployed")," ")}const KZ=function(){return[]},YZ=function(e){return{template:e,expression:"CreatedById eq me"}},XZ=function(e){return[e]},ZZ=function(e){return{template:e,expression:"IsDeployed eq true"}},e1=function(e){return{template:e,expression:"IsDeployed eq false"}},t1=function(e,t){return[e,t]},n1=function(e,t){return{CreatedBy:e,IsDeployed:t}};let i1=(()=>{class e extends Ut.a{constructor(e){super(),this.workspace=e,this.expand=""}get c(){return this.ws.MarkupTemplate}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-markup-templates-master"]],features:[o.yb],decls:14,vars:27,consts:[["collection","MarkupTemplate","theme","dark","selectDefault","Code,IsDeployed","selectForTiles","Code",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["createdByMe",""],["deployed",""],["notdeployed",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,qZ,6,2,"ng-template",null,1,o.Sc),o.Rc(4,QZ,2,3,"ng-template",null,2,o.Sc),o.Rc(6,HZ,2,1,"ng-template",null,3,o.Sc),o.Rc(8,GZ,2,3,"ng-template",null,4,o.Sc),o.Rc(10,zZ,2,3,"ng-template",null,5,o.Sc),o.Rc(12,JZ,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"MarkupTemplates"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(12,KZ))("filterDefinition",o.xc(24,n1,o.wc(15,XZ,o.wc(13,YZ,c)),o.xc(21,t1,o.wc(17,ZZ,r),o.wc(19,e1,s))))}},directives:[Rt.a],pipes:[Q.d],encapsulation:2}),e})();var o1=n("gNDJ");function c1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",2),o.Vb(1,"t-documents-master",3),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.definitionId,n=t.filter,i=o.lc();o.Bb(1),o.sc("definitionId",e)("filter",n)("showCreate",!1)("additionalSelect",i.additionalSelect)}}let r1=(()=>{class e extends As{}return e.\u0275fac=function(t){return s1(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-documents-picker"]],inputs:{definitionIds:"definitionIds"},features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:3,vars:6,consts:[["collection","Document",3,"masterTemplate","ensureAdditionalSelect","theme","definitionIds","filter","additionalSelect","entityLoaded"],["master",""],[1,"modal-body"],["mode","popup",3,"definitionId","filter","showCreate","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,c1,2,4,"ng-template",null,1,o.Sc)),2&e){const e=o.Fc(2);o.sc("masterTemplate",e)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("definitionIds",t.definitionIds)("filter",t.filter)("additionalSelect",t.additionalSelect)}},directives:[Ls,Kq],encapsulation:2}),e})();const s1=o.Xb(r1);var l1=n("Dud/"),a1=n("Sjg+"),u1=n("XnBY");const d1=["Memo","PostingDate","Boolean1","Decimal1","Text1","TemplateLineId","Multiplier","AccountId","CurrencyId","CustodianId","CustodyId","ParticipantId","ResourceId","CenterId","EntryTypeId","MonetaryValue","Quantity","UnitId","Time1","Time2","Value","ExternalReference","InternalReference","NotedAgentName","NotedAmount","NotedDate"],b1=["ByRole","ByCustodian","ByUser","Public"],f1=["ValueGreaterOrEqual"],m1=["lineDefinitionEntryModal"],g1=["controlOptions"];function p1(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"TitlePlural",n.ws))}}function h1(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function v1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(e.TitlePlural)}}function I1(e,t){1&e&&o.Rb(0)}const y1=function(){return{updateOn:"blur"}},w1=function(e,t){return{control:e,serverErrors:t}};function C1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",42,43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural=t})),o.Ub(),o.Rc(2,I1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.TitlePlural)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.TitlePlural))}}function M1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(e.TitlePlural2)}}function V1(e,t){1&e&&o.Rb(0)}function T1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",47,48),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.TitlePlural2=t})),o.Ub(),o.Rc(2,V1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.TitlePlural2)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function E1(e,t){if(1&e&&(o.Vb(0,"div",28),o.Vb(1,"label",45),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,M1,2,1,"div",30),o.Rc(5,T1,3,8,"ng-template",null,46,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc(2).isEdit,n=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"TitlePlural")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngIf",!t)("ngIfElse",e)}}function x1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(e.TitlePlural3)}}function U1(e,t){1&e&&o.Rb(0)}function R1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",51,52),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.TitlePlural3=t})),o.Ub(),o.Rc(2,U1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.TitlePlural3)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function D1(e,t){if(1&e&&(o.Vb(0,"div",28),o.Vb(1,"label",49),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,x1,2,1,"div",30),o.Rc(5,R1,3,8,"ng-template",null,50,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc(2).isEdit,n=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"TitlePlural")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngIf",!t)("ngIfElse",e)}}function B1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(e.TitleSingular)}}function S1(e,t){1&e&&o.Rb(0)}function k1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",53,54),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular=t})),o.Ub(),o.Rc(2,S1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.TitleSingular)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.TitleSingular))}}function O1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(e.TitleSingular2)}}function _1(e,t){1&e&&o.Rb(0)}function L1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",57,58),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.TitleSingular2=t})),o.Ub(),o.Rc(2,_1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.TitleSingular2)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function A1(e,t){if(1&e&&(o.Vb(0,"div",28),o.Vb(1,"label",55),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,O1,2,1,"div",30),o.Rc(5,L1,3,8,"ng-template",null,56,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc(2).isEdit,n=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"TitleSingular")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngIf",!t)("ngIfElse",e)}}function F1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(e.TitleSingular3)}}function P1(e,t){1&e&&o.Rb(0)}function N1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",61,62),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.TitleSingular3=t})),o.Ub(),o.Rc(2,P1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.TitleSingular3)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function j1(e,t){if(1&e&&(o.Vb(0,"div",28),o.Vb(1,"label",59),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,F1,2,1,"div",30),o.Rc(5,N1,3,8,"ng-template",null,60,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc(2).isEdit,n=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"TitleSingular")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngIf",!t)("ngIfElse",e)}}function W1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(e.Code)}}function $1(e,t){1&e&&o.Rb(0)}function q1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",63,64),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Code=t})),o.Ub(),o.Rc(2,$1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.Code)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Code))}}function Q1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Vc(" ",o.nc(2,1,e.ViewDefaultsToForm?"Yes":"No"),"")}}function H1(e,t){1&e&&o.Rb(0)}function G1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,66),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ViewDefaultsToForm=t})),o.Vb(2,"option",67),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"option",68),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Rc(8,H1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.ViewDefaultsToForm),o.Bb(3),o.Vc(" ",o.nc(4,5,"Yes"),""),o.Bb(3),o.Vc(" ",o.nc(7,7,"No"),""),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(9,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.ViewDefaultsToForm))}}function z1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Uc(e.Description)}}function J1(e,t){1&e&&o.Rb(0)}function K1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"textarea",69,70),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description=t})),o.Ub(),o.Rc(2,J1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.Description)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Description))}}function Y1(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(e.Description2)}}function X1(e,t){1&e&&o.Rb(0)}function Z1(e,t){if(1&e){const e=o.Wb();o.Vb(0,"textarea",73,74),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Description2=t})),o.Ub(),o.Rc(2,X1,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.Description2)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Description2))}}function e2(e,t){if(1&e&&(o.Vb(0,"div",28),o.Vb(1,"label",71),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,Y1,2,1,"div",30),o.Rc(5,Z1,3,8,"ng-template",null,72,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc(2).isEdit,n=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"Description")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngIf",!t)("ngIfElse",e)}}function t2(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(e.Description3)}}function n2(e,t){1&e&&o.Rb(0)}function i2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"textarea",77,78),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Description3=t})),o.Ub(),o.Rc(2,n2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.Description3)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Description3))}}function o2(e,t){if(1&e&&(o.Vb(0,"div",28),o.Vb(1,"label",75),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,t2,2,1,"div",30),o.Rc(5,i2,3,8,"ng-template",null,76,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc(2).isEdit,n=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"Description")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngIf",!t)("ngIfElse",e)}}function c2(e,t){if(1&e&&(o.Vb(0,"div",27),o.Vb(1,"div",28),o.Vb(2,"label",29),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Rc(5,v1,2,1,"div",30),o.Rc(6,C1,3,8,"ng-template",null,31,o.Sc),o.Ub(),o.Rc(8,E1,7,5,"div",32),o.Rc(9,D1,7,5,"div",32),o.Vb(10,"div",28),o.Vb(11,"label",33),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Rc(14,B1,2,1,"div",30),o.Rc(15,k1,3,8,"ng-template",null,34,o.Sc),o.Ub(),o.Rc(17,A1,7,5,"div",32),o.Rc(18,j1,7,5,"div",32),o.Vb(19,"div",28),o.Vb(20,"label",35),o.Tc(21),o.mc(22,"translate"),o.Ub(),o.Rc(23,W1,2,1,"div",30),o.Rc(24,q1,3,8,"ng-template",null,36,o.Sc),o.Ub(),o.Vb(26,"div",28),o.Vb(27,"label",37),o.Tc(28),o.mc(29,"translate"),o.Ub(),o.Rc(30,Q1,3,3,"div",30),o.Rc(31,G1,9,12,"ng-template",null,38,o.Sc),o.Ub(),o.Qb(33,"div",39),o.Vb(34,"div",28),o.Vb(35,"label",40),o.Tc(36),o.mc(37,"translate"),o.Ub(),o.Rc(38,z1,2,1,"div",30),o.Rc(39,K1,3,8,"ng-template",null,41,o.Sc),o.Ub(),o.Rc(41,e2,7,5,"div",32),o.Rc(42,o2,7,5,"div",32),o.Ub()),2&e){const e=o.Fc(7),t=o.Fc(16),n=o.Fc(25),i=o.Fc(32),c=o.Fc(40),r=o.lc().isEdit,s=o.lc();o.Bb(3),o.Uc(o.nc(4,21,"TitlePlural")+s.ws.primaryPostfix),o.Bb(2),o.sc("ngIf",!r)("ngIfElse",e),o.Bb(3),o.sc("ngIf",s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",s.ws.settings.TernaryLanguageId),o.Bb(3),o.Uc(o.nc(13,23,"TitleSingular")+s.ws.primaryPostfix),o.Bb(2),o.sc("ngIf",!r)("ngIfElse",t),o.Bb(3),o.sc("ngIf",s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",s.ws.settings.TernaryLanguageId),o.Bb(3),o.Uc(o.nc(22,25,"Code")),o.Bb(2),o.sc("ngIf",!r)("ngIfElse",n),o.Bb(5),o.Uc(o.nc(29,27,"LineDefinition_ViewDefaultsToForm")),o.Bb(2),o.sc("ngIf",!r)("ngIfElse",i),o.Bb(6),o.Uc(o.nc(37,29,"Description")+s.ws.primaryPostfix),o.Bb(2),o.sc("ngIf",!r)("ngIfElse",c),o.Bb(3),o.sc("ngIf",s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",s.ws.settings.TernaryLanguageId)}}function r2(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function s2(e,t){1&e&&o.Qb(0,"th",83)}function l2(e,t){1&e&&o.Qb(0,"th",83)}function a2(e,t){1&e&&(o.Tb(0),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Sb())}function u2(e,t){1&e&&(o.Vb(0,"div",98),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"LineDefinitionEntry"),""))}function d2(e,t){1&e&&(o.Vb(0,"td",99),o.Qb(1,"fa-icon",100),o.Ub())}function b2(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.directionDisplay(e.Direction))}}function f2(e,t){1&e&&o.Rb(0)}function m2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,101),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Direction=t})),o.Vb(2,"option",102),o.Tc(3),o.Ub(),o.Vb(4,"option",103),o.Tc(5),o.Ub(),o.Ub(),o.Rc(6,f2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(3),i=o.Fc(11);o.sc("ngModel",t.Direction),o.Bb(3),o.Vc(" ",n.directionDisplay(1),""),o.Bb(2),o.Vc(" ",n.directionDisplay(-1),""),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Direction))}}function g2(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.ws.getMultilingualValue("AccountType",e.ParentAccountTypeId,"Name"))}}function p2(e,t){1&e&&o.Rb(0)}function h2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-types-picker",104,105),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.ParentAccountTypeId=t})),o.Ub(),o.Rc(2,p2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.ParentAccountTypeId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.ParentAccountTypeId))}}function v2(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.ws.getMultilingualValue("EntryType",e.EntryTypeId,"Name"))}}function I2(e,t){1&e&&o.Rb(0)}function y2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",104,106),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.EntryTypeId=t})),o.Ub(),o.Rc(2,I2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.EntryTypeId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.EntryTypeId))}}function w2(e,t){1&e&&(o.Vb(0,"span",107),o.Tc(1," \xa0"),o.Qb(2,"fa-icon",26),o.Ub())}function C2(e,t){1&e&&(o.Vb(0,"span",107),o.Tc(1," \xa0"),o.Qb(2,"fa-icon",26),o.Ub())}function M2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td"),o.Vb(1,"button",108),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(2).model;return o.lc().onDeleteRow(t,n.Entries)})),o.Qb(2,"fa-icon",109),o.Ub(),o.Ub()}}function V2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr",88),o.Rc(1,a2,3,0,"ng-container",89),o.Rc(2,u2,3,3,"div",90),o.Rc(3,d2,2,0,"td",91),o.Vb(4,"td"),o.Tc(5),o.Ub(),o.Vb(6,"td"),o.Rc(7,b2,2,1,"span",30),o.Rc(8,m2,7,8,"ng-template",null,92,o.Sc),o.Ub(),o.Vb(10,"td"),o.Rc(11,g2,2,1,"span",30),o.Rc(12,h2,3,6,"ng-template",null,93,o.Sc),o.Ub(),o.Vb(14,"td"),o.Rc(15,v2,2,1,"span",30),o.Rc(16,y2,3,6,"ng-template",null,94,o.Sc),o.Ub(),o.Vb(18,"td"),o.Vb(19,"button",95),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.index,c=o.lc(2).isEdit;return o.lc().onLineDefinitionEntryCustodyDefinitions(n,c,i)})),o.Tc(20),o.Ub(),o.Rc(21,w2,3,0,"span",96),o.Ub(),o.Vb(22,"td"),o.Vb(23,"button",95),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=t.index,c=o.lc(2).isEdit;return o.lc().onLineDefinitionEntryResourceDefinitions(n,c,i)})),o.Tc(24),o.Ub(),o.Rc(25,C2,3,0,"span",96),o.Ub(),o.Rc(26,M2,3,0,"td",97),o.Ub()}if(2&e){const e=t.$implicit,n=t.index,i=o.Fc(9),c=o.Fc(13),r=o.Fc(17),s=o.lc(2).isEdit,l=o.lc();o.Bb(3),o.sc("ngIf",s),o.Bb(2),o.Vc(" ",n," "),o.Bb(1),o.Gb("p-0",s),o.Bb(1),o.sc("ngIf",!s)("ngIfElse",i),o.Bb(3),o.Gb("p-0",s),o.Bb(1),o.sc("ngIf",!s)("ngIfElse",c),o.Bb(3),o.Gb("p-0",s),o.Bb(1),o.sc("ngIf",!s)("ngIfElse",r),o.Bb(3),o.Gb("p-0",s),o.Bb(2),o.Uc((null==e.CustodyDefinitions?null:e.CustodyDefinitions.length)||0),o.Bb(1),o.sc("ngIf",l.showCustodyDefinitionsError(e)),o.Bb(1),o.Gb("p-0",s),o.Bb(2),o.Uc((null==e.ResourceDefinitions?null:e.ResourceDefinitions.length)||0),o.Bb(1),o.sc("ngIf",l.showResourceDefinitionsError(e)),o.Bb(1),o.sc("ngIf",s)}}function T2(e,t){1&e&&(o.Vb(0,"div",110),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function E2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",111),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model,n=o.lc();return n.onInsertRow(t.Entries,n.createEntry)})),o.Qb(1,"fa-icon",112),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}function x2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",79),o.Vb(1,"table",80),o.Vb(2,"thead",81),o.Vb(3,"tr"),o.Rc(4,s2,1,0,"th",82),o.Vb(5,"th",83),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Vb(8,"th"),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Vb(11,"th"),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Vb(14,"th"),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Vb(17,"th"),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"th"),o.Tc(21),o.mc(22,"translate"),o.Ub(),o.Rc(23,l2,1,0,"th",82),o.Ub(),o.Ub(),o.Vb(24,"tbody",84),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().rowDrop(t,n.Entries)})),o.Rc(25,V2,27,23,"tr",85),o.Ub(),o.Ub(),o.Rc(26,T2,3,3,"div",86),o.Rc(27,E2,4,3,"button",87),o.Ub()}if(2&e){const e=o.lc(),t=e.isEdit,n=e.model;o.Bb(4),o.sc("ngIf",t),o.Bb(2),o.Vc("",o.nc(7,12,"LineDefinitionColumn_EntryIndex")," "),o.Bb(3),o.Vc("",o.nc(10,14,"LineDefinitionEntry_Direction")," "),o.Bb(3),o.Vc("",o.nc(13,16,"LineDefinitionEntry_ParentAccountType")," "),o.Bb(3),o.Vc("",o.nc(16,18,"LineDefinitionEntry_EntryType")," "),o.Bb(3),o.Uc(o.nc(19,20,"LineDefinitionEntry_CustodyDefinitions")),o.Bb(3),o.Uc(o.nc(22,22,"LineDefinitionEntry_ResourceDefinitions")),o.Bb(2),o.sc("ngIf",t),o.Bb(1),o.sc("cdkDropListDisabled",!t),o.Bb(1),o.sc("ngForOf",n.Entries),o.Bb(1),o.sc("ngIf",!t&&0===(null==n.Entries?null:n.Entries.length)),o.Bb(1),o.sc("ngIf",t)}}function U2(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function R2(e,t){1&e&&o.Qb(0,"th",83)}function D2(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.Vc(" ",o.nc(2,1,"Label")+e.ws.secondaryPostfix," ")}}function B2(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.Vc(" ",o.nc(2,1,"Label")+e.ws.ternaryPostfix," ")}}function S2(e,t){1&e&&o.Qb(0,"th",83)}function k2(e,t){1&e&&(o.Tb(0),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Sb())}function O2(e,t){if(1&e&&(o.Vb(0,"div",98),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Vc(" ",t.ws.getMultilingualValueImmediate(e,"Label"),"")}}function _2(e,t){1&e&&(o.Vb(0,"td",99),o.Qb(1,"fa-icon",100),o.Ub())}function L2(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.columnNameDisplay(e.ColumnName))}}function A2(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function F2(e,t){1&e&&o.Rb(0)}function P2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,122),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.ColumnName=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(4).choicesBarcodeColumnIndexChanged=!0})),o.Rc(2,A2,2,2,"option",123),o.Ub(),o.Rc(3,F2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(3),i=o.Fc(11);o.sc("ngModel",t.ColumnName),o.Bb(2),o.sc("ngForOf",n.columnNameChoices),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.ColumnName))}}function N2(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Uc(e.EntryIndex)}}function j2(e,t){1&e&&o.Rb(0)}function W2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",125,126),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.EntryIndex=t})),o.Ub(),o.Rc(2,j2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.EntryIndex)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.EntryIndex))}}function $2(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Uc(e.Label)}}function q2(e,t){1&e&&o.Rb(0)}function Q2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,128),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Label=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(4).choicesBarcodeColumnIndexChanged=!0})),o.Ub(),o.Rc(2,q2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Label)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Label))}}function H2(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Uc(e.Label2)}}function G2(e,t){1&e&&o.Rb(0)}function z2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,130),o.hc("ngModelChange",(function(){return o.Ic(e),o.lc(5).choicesBarcodeColumnIndexChanged=!0}))("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.Label2=t})),o.Ub(),o.Rc(2,G2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Label2)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Label2))}}function J2(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,H2,2,1,"span",30),o.Rc(2,z2,3,8,"ng-template",null,129,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(3).isEdit;o.Gb("p-0",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function K2(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Uc(e.Label3)}}function Y2(e,t){1&e&&o.Rb(0)}function X2(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,132),o.hc("ngModelChange",(function(){return o.Ic(e),o.lc(5).choicesBarcodeColumnIndexChanged=!0}))("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.Label3=t})),o.Ub(),o.Rc(2,Y2,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Label3)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Label3))}}function Z2(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,K2,2,1,"span",30),o.Rc(2,X2,3,8,"ng-template",null,131,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(3).isEdit;o.Gb("p-0",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function e3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Uc(e.Filter)}}function t3(e,t){1&e&&o.Rb(0)}function n3(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"input",127,134),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.Filter=t})),o.Ub(),o.Rc(3,t3,1,0,"ng-container",44),o.Sb()}if(2&e){const e=o.Fc(2),t=o.lc(2).$implicit;o.lc(3);const n=o.Fc(11);o.Bb(1),o.sc("ngModel",t.Filter)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Filter))}}function i3(e,t){1&e&&o.Qb(0,"span")}function o3(e,t){if(1&e&&(o.Rc(0,n3,4,8,"ng-container",30),o.Rc(1,i3,1,0,"ng-template",null,133,o.Sc)),2&e){const e=o.Fc(2),t=o.lc().$implicit,n=o.lc(3);o.sc("ngIf",n.canFilter(t))("ngIfElse",e)}}function c3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.stateDisplay(e.VisibleState))}}function r3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(5);o.Bb(1),o.Uc(e.stateDisplay(0))}}function s3(e,t){if(1&e&&(o.Tb(0),o.Rc(1,c3,2,1,"span",97),o.Rc(2,r3,2,1,"span",97),o.Sb()),2&e){const e=o.lc().$implicit,t=o.lc(2).isEdit,n=o.lc();o.Bb(1),o.sc("ngIf",!t&&!n.isRequiredColumn(e)),o.Bb(1),o.sc("ngIf",n.isRequiredColumn(e))}}function l3(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function a3(e,t){1&e&&o.Rb(0)}function u3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,135),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.VisibleState=t})),o.Rc(2,l3,2,2,"option",123),o.Ub(),o.Rc(3,a3,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(3),i=o.Fc(11);o.sc("ngModel",t.VisibleState),o.Bb(2),o.sc("ngForOf",n.stateChoices),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.VisibleState))}}function d3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.stateDisplay(e.RequiredState))}}function b3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(5);o.Bb(1),o.Uc(e.stateDisplay(0))}}function f3(e,t){if(1&e&&(o.Tb(0),o.Rc(1,d3,2,1,"span",97),o.Rc(2,b3,2,1,"span",97),o.Sb()),2&e){const e=o.lc().$implicit,t=o.lc(2).isEdit,n=o.lc();o.Bb(1),o.sc("ngIf",!t&&!n.isRequiredColumn(e)),o.Bb(1),o.sc("ngIf",n.isRequiredColumn(e))}}function m3(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function g3(e,t){1&e&&o.Rb(0)}function p3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,136),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.RequiredState=t})),o.Rc(2,m3,2,2,"option",123),o.Ub(),o.Rc(3,g3,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(3),i=o.Fc(11);o.sc("ngModel",t.RequiredState),o.Bb(2),o.sc("ngForOf",n.stateChoices),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.RequiredState))}}function h3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.stateDisplay(e.ReadOnlyState))}}function v3(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function I3(e,t){1&e&&o.Rb(0)}function y3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,137),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.ReadOnlyState=t})),o.Rc(2,v3,2,2,"option",123),o.Ub(),o.Rc(3,I3,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(3),i=o.Fc(11);o.sc("ngModel",t.ReadOnlyState),o.Bb(2),o.sc("ngForOf",n.stateChoices),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.ReadOnlyState))}}function w3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Uc(o.nc(2,1,2===e.InheritsFromHeader?"InheritsFrom_2":1===e.InheritsFromHeader?"InheritsFrom_1":"InheritsFrom_0"))}}function C3(e,t){1&e&&o.Rb(0)}function M3(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"select",65,139),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.InheritsFromHeader=t})),o.Vb(3,"option",140),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Vb(6,"option",102),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Vb(9,"option",141),o.Tc(10),o.mc(11,"translate"),o.Ub(),o.Ub(),o.Rc(12,C3,1,0,"ng-container",44),o.Sb()}if(2&e){const e=o.Fc(2),t=o.lc(2).$implicit;o.lc(3);const n=o.Fc(11);o.Bb(1),o.sc("ngModel",t.InheritsFromHeader),o.Bb(3),o.Vc(" ",o.nc(5,6,"InheritsFrom_0"),""),o.Bb(3),o.Vc(" ",o.nc(8,8,"InheritsFrom_1"),""),o.Bb(3),o.Vc(" ",o.nc(11,10,"InheritsFrom_2"),""),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(12,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.InheritsFromHeader))}}function V3(e,t){1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Uc(o.nc(2,1,"InheritsFrom_0")))}function T3(e,t){if(1&e&&(o.Rc(0,M3,13,15,"ng-container",30),o.Rc(1,V3,3,3,"ng-template",null,138,o.Sc)),2&e){const e=o.Fc(2),t=o.lc().$implicit,n=o.lc(3);o.sc("ngIf",n.canInherit(t))("ngIfElse",e)}}function E3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td"),o.Vb(1,"button",108),o.hc("click",(function(){o.Ic(e);const t=o.lc().index,n=o.lc(2).model;return o.lc().column_onDeleteRow(t,n)})),o.Qb(2,"fa-icon",109),o.Ub(),o.Ub()}}function x3(e,t){if(1&e&&(o.Vb(0,"tr",88),o.Rc(1,k2,3,0,"ng-container",89),o.Rc(2,O2,2,1,"div",90),o.Rc(3,_2,2,0,"td",91),o.Vb(4,"td"),o.Rc(5,L2,2,1,"span",30),o.Rc(6,P2,4,7,"ng-template",null,113,o.Sc),o.Ub(),o.Vb(8,"td"),o.Rc(9,N2,2,1,"span",30),o.Rc(10,W2,3,8,"ng-template",null,114,o.Sc),o.Ub(),o.Vb(12,"td"),o.Rc(13,$2,2,1,"span",30),o.Rc(14,Q2,3,8,"ng-template",null,115,o.Sc),o.Ub(),o.Rc(16,J2,4,4,"td",116),o.Rc(17,Z2,4,4,"td",116),o.Vb(18,"td"),o.Rc(19,e3,2,1,"span",30),o.Rc(20,o3,3,2,"ng-template",null,117,o.Sc),o.Ub(),o.Vb(22,"td"),o.Rc(23,s3,3,2,"ng-container",30),o.Rc(24,u3,4,7,"ng-template",null,118,o.Sc),o.Ub(),o.Vb(26,"td"),o.Rc(27,f3,3,2,"ng-container",30),o.Rc(28,p3,4,7,"ng-template",null,119,o.Sc),o.Ub(),o.Vb(30,"td"),o.Rc(31,h3,2,1,"span",30),o.Rc(32,y3,4,7,"ng-template",null,120,o.Sc),o.Ub(),o.Vb(34,"td"),o.Rc(35,w3,3,3,"span",30),o.Rc(36,T3,3,2,"ng-template",null,121,o.Sc),o.Ub(),o.Rc(38,E3,3,0,"td",97),o.Ub()),2&e){const e=t.$implicit,n=o.Fc(7),i=o.Fc(11),c=o.Fc(15),r=o.Fc(21),s=o.Fc(25),l=o.Fc(29),a=o.Fc(33),u=o.Fc(37),d=o.lc(2).isEdit,b=o.lc();o.Bb(3),o.sc("ngIf",d),o.Bb(1),o.Gb("p-0",d),o.Bb(1),o.sc("ngIf",!d)("ngIfElse",n),o.Bb(3),o.Gb("p-0",d),o.Bb(1),o.sc("ngIf",!d)("ngIfElse",i),o.Bb(3),o.Gb("p-0",d),o.Bb(1),o.sc("ngIf",!d)("ngIfElse",c),o.Bb(3),o.sc("ngIf",b.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",b.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("p-0",d&&b.canFilter(e)),o.Bb(1),o.sc("ngIf",!d)("ngIfElse",r),o.Bb(3),o.Gb("p-0",d&&!b.isRequiredColumn(e)),o.Bb(1),o.sc("ngIf",!d||b.isRequiredColumn(e))("ngIfElse",s),o.Bb(3),o.Gb("p-0",d&&!b.isRequiredColumn(e)),o.Bb(1),o.sc("ngIf",!d||b.isRequiredColumn(e))("ngIfElse",l),o.Bb(3),o.Gb("p-0",d),o.Bb(1),o.sc("ngIf",!d)("ngIfElse",a),o.Bb(3),o.Gb("p-0",d&&b.canInherit(e)),o.Bb(1),o.sc("ngIf",!d)("ngIfElse",u),o.Bb(3),o.sc("ngIf",d)}}function U3(e,t){1&e&&(o.Vb(0,"div",110),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function R3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",111),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().column_onInsertRow(t)})),o.Qb(1,"fa-icon",112),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}function D3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",79),o.Vb(1,"table",80),o.Vb(2,"thead",81),o.Vb(3,"tr"),o.Rc(4,R2,1,0,"th",82),o.Vb(5,"th"),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Vb(8,"th",83),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Vb(11,"th"),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Rc(14,D2,3,3,"th",97),o.Rc(15,B2,3,3,"th",97),o.Vb(16,"th"),o.Tc(17),o.mc(18,"translate"),o.Ub(),o.Vb(19,"th"),o.Tc(20),o.mc(21,"translate"),o.Ub(),o.Vb(22,"th"),o.Tc(23),o.mc(24,"translate"),o.Ub(),o.Vb(25,"th"),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Vb(28,"th"),o.Tc(29),o.mc(30,"translate"),o.Ub(),o.Rc(31,S2,1,0,"th",82),o.Ub(),o.Ub(),o.Vb(32,"tbody",84),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().column_rowDrop(t,n)})),o.Rc(33,x3,39,36,"tr",85),o.Ub(),o.Ub(),o.Rc(34,U3,3,3,"div",86),o.Rc(35,R3,4,3,"button",87),o.Ub()}if(2&e){const e=o.lc(),t=e.isEdit,n=e.model,i=o.lc();o.Bb(4),o.sc("ngIf",t),o.Bb(2),o.Vc("",o.nc(7,16,"LineDefinitionColumn_ColumnName")," "),o.Bb(3),o.Vc("",o.nc(10,18,"LineDefinitionColumn_EntryIndex")," "),o.Bb(3),o.Vc("",o.nc(13,20,"Label")+i.ws.primaryPostfix," "),o.Bb(2),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(2),o.Vc("",o.nc(18,22,"LineDefinitionColumn_Filter")," "),o.Bb(3),o.Vc("",o.nc(21,24,"LineDefinitionColumn_VisibleState")," "),o.Bb(3),o.Vc("",o.nc(24,26,"LineDefinitionColumn_RequiredState")," "),o.Bb(3),o.Vc("",o.nc(27,28,"LineDefinitionColumn_ReadOnlyState")," "),o.Bb(3),o.Vc("",o.nc(30,30,"LineDefinitionColumn_InheritsFromHeader")," "),o.Bb(2),o.sc("ngIf",t),o.Bb(1),o.sc("cdkDropListDisabled",!t),o.Bb(1),o.sc("ngForOf",n.Columns),o.Bb(1),o.sc("ngIf",!t&&0===(null==n.Columns?null:n.Columns.length)),o.Bb(1),o.sc("ngIf",t)}}function B3(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function S3(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model;o.Bb(1),o.Vc("",e.GenerateLabel,"\u200c")}}function k3(e,t){1&e&&o.Rb(0)}function O3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",149,150),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.GenerateLabel=t})),o.Ub(),o.Rc(2,k3,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.GenerateLabel)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.GenerateLabel))}}function _3(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Vc("",e.GenerateLabel2,"\u200c")}}function L3(e,t){1&e&&o.Rb(0)}function A3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",153,154),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.GenerateLabel2=t})),o.Ub(),o.Rc(2,L3,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.GenerateLabel2)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.GenerateLabel2))}}function F3(e,t){if(1&e&&(o.Vb(0,"div",28),o.Vb(1,"label",151),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,_3,2,1,"div",30),o.Rc(5,A3,3,8,"ng-template",null,152,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc(2).isEdit,n=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"LineDefinition_GenerateLabel")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngIf",!t)("ngIfElse",e)}}function P3(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Vc("",e.GenerateLabel3,"\u200c")}}function N3(e,t){1&e&&o.Rb(0)}function j3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",157,158),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.GenerateLabel3=t})),o.Ub(),o.Rc(2,N3,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.GenerateLabel3)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.GenerateLabel3))}}function W3(e,t){if(1&e&&(o.Vb(0,"div",28),o.Vb(1,"label",155),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Rc(4,P3,2,1,"div",30),o.Rc(5,j3,3,8,"ng-template",null,156,o.Sc),o.Ub()),2&e){const e=o.Fc(6),t=o.lc(2).isEdit,n=o.lc();o.Bb(2),o.Uc(o.nc(3,3,"LineDefinition_GenerateLabel")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngIf",!t)("ngIfElse",e)}}function $3(e,t){1&e&&o.Qb(0,"th",83)}function q3(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.Vc(" ",o.nc(2,1,"Label")+e.ws.secondaryPostfix," ")}}function Q3(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.Vc(" ",o.nc(2,1,"Label")+e.ws.ternaryPostfix," ")}}function H3(e,t){1&e&&o.Qb(0,"th",83)}function G3(e,t){1&e&&(o.Tb(0),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Sb())}function z3(e,t){if(1&e&&(o.Vb(0,"div",98),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Vc(" ",t.ws.getMultilingualValueImmediate(e,"Label"),"")}}function J3(e,t){1&e&&(o.Vb(0,"td",99),o.Qb(1,"fa-icon",100),o.Ub())}function K3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Uc(e.Key)}}function Y3(e,t){1&e&&o.Rb(0)}function X3(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,163),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Key=t})),o.Ub(),o.Rc(2,Y3,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Key)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Key))}}function Z3(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Uc(e.Label)}}function e0(e,t){1&e&&o.Rb(0)}function t0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,128),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Label=t})),o.Ub(),o.Rc(2,e0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Label)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Label))}}function n0(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Uc(e.Label2)}}function i0(e,t){1&e&&o.Rb(0)}function o0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,130),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.Label2=t})),o.Ub(),o.Rc(2,i0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Label2)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Label2))}}function c0(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,n0,2,1,"span",30),o.Rc(2,o0,3,8,"ng-template",null,129,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(3).isEdit;o.Gb("p-0",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function r0(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Uc(e.Label3)}}function s0(e,t){1&e&&o.Rb(0)}function l0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,132),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.Label3=t})),o.Ub(),o.Rc(2,s0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Label3)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Label3))}}function a0(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,r0,2,1,"span",30),o.Rc(2,l0,3,8,"ng-template",null,131,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(3).isEdit;o.Gb("p-0",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function u0(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.visibilityDisplay(e.Visibility))}}function d0(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function b0(e,t){1&e&&o.Rb(0)}function f0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",164,165),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Visibility=t})),o.Rc(2,d0,2,2,"option",123),o.Ub(),o.Rc(3,b0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(3),i=o.Fc(11);o.sc("ngModel",t.Visibility),o.Bb(2),o.sc("ngForOf",n.visibilityChoices),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Visibility))}}function m0(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.controlDisplay(e.Control))}}function g0(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function p0(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function h0(e,t){1&e&&o.Rb(0)}function v0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,166),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Control=t})),o.Rc(2,g0,2,2,"option",123),o.Vb(3,"option",167),o.Tc(4," \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 "),o.Ub(),o.Rc(5,p0,2,2,"option",123),o.Ub(),o.Rc(6,h0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(3),i=o.Fc(11);o.sc("ngModel",t.Control),o.Bb(2),o.sc("ngForOf",n.controlSimpleChoices()),o.Bb(3),o.sc("ngForOf",n.controlEntityChoices()),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Control))}}function I0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",108),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(2).isEdit;return o.lc().onControlOptions(t,n)})),o.Qb(1,"fa-icon",168),o.Ub()}}function y0(e,t){1&e&&(o.Vb(0,"span",107),o.Tc(1," \xa0"),o.Qb(2,"fa-icon",26),o.Ub())}function w0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td"),o.Vb(1,"button",108),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(2).model;return o.lc().onDeleteRow(t,n.GenerateParameters)})),o.Qb(2,"fa-icon",109),o.Ub(),o.Ub()}}function C0(e,t){if(1&e&&(o.Vb(0,"tr",88),o.Rc(1,G3,3,0,"ng-container",89),o.Rc(2,z3,2,1,"div",90),o.Rc(3,J3,2,0,"td",91),o.Vb(4,"td"),o.Rc(5,K3,2,1,"span",30),o.Rc(6,X3,3,8,"ng-template",null,159,o.Sc),o.Ub(),o.Vb(8,"td"),o.Rc(9,Z3,2,1,"span",30),o.Rc(10,t0,3,8,"ng-template",null,115,o.Sc),o.Ub(),o.Rc(12,c0,4,4,"td",116),o.Rc(13,a0,4,4,"td",116),o.Vb(14,"td"),o.Rc(15,u0,2,1,"span",30),o.Rc(16,f0,4,7,"ng-template",null,160,o.Sc),o.Ub(),o.Vb(18,"td"),o.Rc(19,m0,2,1,"span",30),o.Rc(20,v0,7,8,"ng-template",null,161,o.Sc),o.Ub(),o.Vb(22,"td"),o.Rc(23,I0,2,0,"button",162),o.Rc(24,y0,3,0,"span",96),o.Ub(),o.Rc(25,w0,3,0,"td",97),o.Ub()),2&e){const e=t.$implicit,n=o.Fc(7),i=o.Fc(11),c=o.Fc(17),r=o.Fc(21),s=o.lc(2).isEdit,l=o.lc();o.Bb(3),o.sc("ngIf",s),o.Bb(1),o.Gb("p-0",s),o.Bb(1),o.sc("ngIf",!s)("ngIfElse",n),o.Bb(3),o.Gb("p-0",s),o.Bb(1),o.sc("ngIf",!s)("ngIfElse",i),o.Bb(3),o.sc("ngIf",l.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",l.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("p-0",s),o.Bb(1),o.sc("ngIf",!s)("ngIfElse",c),o.Bb(3),o.Gb("p-0",s),o.Bb(1),o.sc("ngIf",!s)("ngIfElse",r),o.Bb(4),o.sc("ngIf",l.hasControlOptions(e)),o.Bb(1),o.sc("ngIf",l.showGenerateParametersError(e)),o.Bb(1),o.sc("ngIf",s)}}function M0(e,t){1&e&&(o.Vb(0,"div",110),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function V0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",111),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onInsertRow(t.GenerateParameters)})),o.Qb(1,"fa-icon",112),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}function T0(e,t){1&e&&(o.Vb(0,"div",171),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" (",o.nc(2,1,"Blank"),") "))}function E0(e,t){if(1&e&&(o.Vb(0,"div",172),o.Vb(1,"span"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(2),o.Uc(e.GenerateScript)}}function x0(e,t){if(1&e&&(o.Tb(0),o.Rc(1,T0,3,3,"div",169),o.Rc(2,E0,3,1,"div",170),o.Sb()),2&e){const e=o.lc(2).model;o.Bb(1),o.sc("ngIf",!e.GenerateScript),o.Bb(1),o.sc("ngIf",!!e.GenerateScript)}}function U0(e,t){1&e&&o.Rb(0)}function R0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"textarea",173,174),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.GenerateScript=t}))("keydown",(function(t){o.Ic(e);const n=o.Fc(2),i=o.lc(2).model;return o.lc().onGenerateScriptKeydown(n,t,i)})),o.Ub(),o.Rc(3,U0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.GenerateScript),o.Bb(3),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.GenerateScript))}}function D0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",27),o.Vb(1,"div",28),o.Vb(2,"label",142),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Rc(5,S3,2,1,"div",30),o.Rc(6,O3,3,8,"ng-template",null,143,o.Sc),o.Ub(),o.Rc(8,F3,7,5,"div",32),o.Rc(9,W3,7,5,"div",32),o.Ub(),o.Vb(10,"div",144),o.Vb(11,"label",145),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Vb(14,"table",80),o.Vb(15,"thead",81),o.Vb(16,"tr"),o.Rc(17,$3,1,0,"th",82),o.Vb(18,"th"),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"th"),o.Tc(22),o.mc(23,"translate"),o.Ub(),o.Rc(24,q3,3,3,"th",97),o.Rc(25,Q3,3,3,"th",97),o.Vb(26,"th"),o.Tc(27),o.mc(28,"translate"),o.Ub(),o.Vb(29,"th"),o.Tc(30),o.mc(31,"translate"),o.Ub(),o.Vb(32,"th"),o.Tc(33),o.mc(34,"translate"),o.Ub(),o.Rc(35,H3,1,0,"th",82),o.Ub(),o.Ub(),o.Vb(36,"tbody",84),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().rowDrop(t,n.GenerateParameters)})),o.Rc(37,C0,26,22,"tr",85),o.Ub(),o.Ub(),o.Rc(38,M0,3,3,"div",86),o.Rc(39,V0,4,3,"button",87),o.Ub(),o.Vb(40,"div",146),o.Vb(41,"label",147),o.Tc(42),o.mc(43,"translate"),o.Ub(),o.Rc(44,x0,3,2,"ng-container",30),o.Rc(45,R0,4,6,"ng-template",null,148,o.Sc),o.Ub()}if(2&e){const e=o.Fc(7),t=o.Fc(46),n=o.lc(),i=n.isEdit,c=n.model,r=o.lc();o.Bb(3),o.Uc(o.nc(4,22,"LineDefinition_GenerateLabel")+r.ws.primaryPostfix),o.Bb(2),o.sc("ngIf",!i)("ngIfElse",e),o.Bb(3),o.sc("ngIf",!!r.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!!r.ws.settings.TernaryLanguageId),o.Bb(3),o.Uc(o.nc(13,24,"LineDefinition_GenerateParameters")),o.Bb(5),o.sc("ngIf",i),o.Bb(2),o.Vc("",o.nc(20,26,"Parameter_Key")," "),o.Bb(3),o.Vc("",o.nc(23,28,"Label")+r.ws.primaryPostfix," "),o.Bb(2),o.sc("ngIf",r.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",r.ws.settings.TernaryLanguageId),o.Bb(2),o.Vc("",o.nc(28,30,"Parameter_Visibility")," "),o.Bb(3),o.Vc("",o.nc(31,32,"Definition_Control")," "),o.Bb(3),o.Vc("",o.nc(34,34,"Definition_ControlOptions")," "),o.Bb(2),o.sc("ngIf",i),o.Bb(1),o.sc("cdkDropListDisabled",!i),o.Bb(1),o.sc("ngForOf",c.GenerateParameters),o.Bb(1),o.sc("ngIf",!i&&0===(null==c.GenerateParameters?null:c.GenerateParameters.length)),o.Bb(1),o.sc("ngIf",i),o.Bb(3),o.Uc(o.nc(43,36,"LineDefinition_GenerateScript")),o.Bb(2),o.sc("ngIf",!i)("ngIfElse",t)}}function B0(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function S0(e,t){1&e&&(o.Vb(0,"div",171),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" (",o.nc(2,1,"Blank"),") "))}function k0(e,t){if(1&e&&(o.Vb(0,"div",172),o.Vb(1,"span"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(2),o.Uc(e.PreprocessScript)}}function O0(e,t){if(1&e&&(o.Tb(0),o.Rc(1,S0,3,3,"div",169),o.Rc(2,k0,3,1,"div",170),o.Sb()),2&e){const e=o.lc(2).model;o.Bb(1),o.sc("ngIf",!e.PreprocessScript),o.Bb(1),o.sc("ngIf",!!e.PreprocessScript)}}function _0(e,t){1&e&&o.Rb(0)}function L0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"textarea",176,177),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.PreprocessScript=t}))("keydown",(function(t){o.Ic(e);const n=o.Fc(2),i=o.lc(2).model;return o.lc().onPreprocessScriptKeydown(n,t,i)})),o.Tc(3,"                    "),o.Ub(),o.Rc(4,_0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.PreprocessScript),o.Bb(4),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.PreprocessScript))}}function A0(e,t){if(1&e&&(o.Rc(0,O0,3,2,"ng-container",30),o.Rc(1,L0,5,6,"ng-template",null,175,o.Sc)),2&e){const e=o.Fc(2),t=o.lc().isEdit;o.sc("ngIf",!t)("ngIfElse",e)}}function F0(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function P0(e,t){1&e&&(o.Vb(0,"div",171),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" (",o.nc(2,1,"Blank"),") "))}function N0(e,t){if(1&e&&(o.Vb(0,"div",172),o.Vb(1,"span"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(2),o.Uc(e.ValidateScript)}}function j0(e,t){if(1&e&&(o.Tb(0),o.Rc(1,P0,3,3,"div",169),o.Rc(2,N0,3,1,"div",170),o.Sb()),2&e){const e=o.lc(2).model;o.Bb(1),o.sc("ngIf",!e.ValidateScript),o.Bb(1),o.sc("ngIf",!!e.ValidateScript)}}function W0(e,t){1&e&&o.Rb(0)}function $0(e,t){if(1&e){const e=o.Wb();o.Vb(0,"textarea",176,179),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.ValidateScript=t}))("keydown",(function(t){o.Ic(e);const n=o.Fc(2),i=o.lc(2).model;return o.lc().onValidateScriptKeydown(n,t,i)})),o.Tc(3,"                    "),o.Ub(),o.Rc(4,W0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.ValidateScript),o.Bb(4),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.ValidateScript))}}function q0(e,t){if(1&e&&(o.Rc(0,j0,3,2,"ng-container",30),o.Rc(1,$0,5,6,"ng-template",null,178,o.Sc)),2&e){const e=o.Fc(2),t=o.lc().isEdit;o.sc("ngIf",!t)("ngIfElse",e)}}function Q0(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function H0(e,t){1&e&&o.Qb(0,"th",83)}function G0(e,t){1&e&&o.Qb(0,"th",83)}function z0(e,t){1&e&&(o.Tb(0),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Sb())}function J0(e,t){if(1&e&&(o.Vb(0,"div",98),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(4);o.Bb(1),o.Vc(" ",t.ruleTypeDisplay(e.RuleType),"")}}function K0(e,t){1&e&&(o.Vb(0,"td",99),o.Qb(1,"fa-icon",100),o.Ub())}function Y0(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(4);o.Bb(1),o.Uc(t.ruleTypeDisplay(e.RuleType))}}function X0(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function Z0(e,t){1&e&&o.Rb(0)}function e4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",164,187),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.RuleType=t})),o.Rc(2,X0,2,2,"option",123),o.Ub(),o.Rc(3,Z0,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(4),i=o.Fc(11);o.sc("ngModel",t.RuleType),o.Bb(2),o.sc("ngForOf",n.ruleTypeChoices),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.RuleType))}}function t4(e,t){if(1&e&&(o.Vb(0,"span",190),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).$implicit,t=o.lc(4);o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Role",e.RoleId,"Name")," ")}}function n4(e,t){if(1&e&&(o.Tb(0),o.Rc(1,t4,2,1,"span",189),o.Sb()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.sc("ngIf",!!e.RoleId)}}function i4(e,t){1&e&&o.Rb(0)}function o4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-roles-picker",191,192),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.RoleId=t})),o.Ub(),o.Rc(2,i4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(4);const n=o.Fc(11);o.sc("ngModel",t.RoleId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.RoleId))}}function c4(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div"),o.Vb(2,"span"),o.Tc(3,":\xa0"),o.Ub(),o.Ub(),o.Vb(4,"div"),o.Rc(5,n4,2,1,"ng-container",30),o.Rc(6,o4,3,6,"ng-template",null,188,o.Sc),o.Ub(),o.Sb()),2&e){const e=o.Fc(7),t=o.lc(4).isEdit;o.Bb(4),o.Gb("flex-grow-1",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function r4(e,t){if(1&e&&(o.Vb(0,"span",190),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).$implicit,t=o.lc(4);o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("User",e.UserId,"Name")," ")}}function s4(e,t){if(1&e&&(o.Tb(0),o.Rc(1,r4,2,1,"span",189),o.Sb()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.sc("ngIf",!!e.UserId)}}function l4(e,t){1&e&&o.Rb(0)}function a4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-users-picker",194,195),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.UserId=t})),o.Ub(),o.Rc(2,l4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(4);const n=o.Fc(11);o.sc("ngModel",t.UserId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.UserId))}}function u4(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div"),o.Vb(2,"span"),o.Tc(3,":\xa0"),o.Ub(),o.Ub(),o.Vb(4,"div"),o.Rc(5,s4,2,1,"ng-container",30),o.Rc(6,a4,3,6,"ng-template",null,193,o.Sc),o.Ub(),o.Sb()),2&e){const e=o.Fc(7),t=o.lc(4).isEdit;o.Bb(4),o.Gb("flex-grow-1",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function d4(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"span",190),o.Tc(2),o.Ub(),o.Sb()),2&e){const e=o.lc(2).$implicit;o.Bb(2),o.Vc(" ",e.RuleTypeEntryIndex," ")}}function b4(e,t){1&e&&o.Rb(0)}function f4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",197,198),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.RuleTypeEntryIndex=t})),o.Ub(),o.Rc(2,b4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(4);const n=o.Fc(11);o.sc("ngModel",t.RuleTypeEntryIndex)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.RuleTypeEntryIndex))}}function m4(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div"),o.Vb(2,"span"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"div"),o.Rc(6,d4,3,1,"ng-container",30),o.Rc(7,f4,3,8,"ng-template",null,196,o.Sc),o.Ub(),o.Sb()),2&e){const e=o.Fc(8),t=o.lc(4).isEdit;o.Bb(3),o.Vc("\xa0",o.nc(4,5,"OfEntry"),":\xa0"),o.Bb(2),o.Gb("flex-grow-1",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function g4(e,t){if(1&e&&(o.Vb(0,"span",190),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit,t=o.lc(4);o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Role",e.ProxyRoleId,"Name")," ")}}function p4(e,t){1&e&&o.Rb(0)}function h4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-roles-picker",201,202),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.ProxyRoleId=t})),o.Ub(),o.Rc(2,p4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(4);const n=o.Fc(11);o.sc("ngModel",t.ProxyRoleId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.ProxyRoleId))}}function v4(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div"),o.Vb(2,"span"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"div"),o.Rc(6,g4,2,1,"span",199),o.Rc(7,h4,3,6,"ng-template",null,200,o.Sc),o.Ub(),o.Sb()),2&e){const e=o.Fc(8),t=o.lc(4).isEdit;o.Bb(3),o.Vc("\xa0",o.nc(4,5,"WorkflowSignature_ProxyRole"),":\xa0"),o.Bb(2),o.Gb("flex-grow-1",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function I4(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(4);o.Bb(1),o.Uc(t.predicateTypeDisplay(e.PredicateType))}}function y4(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function w4(e,t){1&e&&o.Rb(0)}function C4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",164,203),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.PredicateType=t})),o.Qb(2,"option",204),o.Rc(3,y4,2,2,"option",123),o.Ub(),o.Rc(4,w4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(4),i=o.Fc(11);o.sc("ngModel",t.PredicateType),o.Bb(3),o.sc("ngForOf",n.predicateTypeChoices),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.PredicateType))}}function M4(e,t){if(1&e&&(o.Vb(0,"span",190),o.Tc(1),o.mc(2,"accounting"),o.Ub()),2&e){const e=o.lc(2).$implicit,t=o.lc(4);o.Bb(1),o.Vc(" \xa0",o.oc(2,1,e.Value,t.functionalFormat)," ")}}function V4(e,t){1&e&&o.Rb(0)}function T4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-decimal-editor",207,208),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.Value=t})),o.Ub(),o.Rc(2,V4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit,n=o.lc(4),i=o.Fc(11);o.sc("ngModel",t.Value)("maxDecimalPlaces",n.functionalDecimals)("minDecimalPlaces",n.functionalDecimals),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Value))}}function E4(e,t){if(1&e&&(o.Vb(0,"span",190),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Vc(" \xa0",e.PredicateTypeEntryIndex," ")}}function x4(e,t){1&e&&o.Rb(0)}function U4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",209,210),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.PredicateTypeEntryIndex=t})),o.Ub(),o.Rc(2,x4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(4);const n=o.Fc(11);o.sc("ngModel",t.PredicateTypeEntryIndex)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.PredicateTypeEntryIndex))}}function R4(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div"),o.Rc(2,M4,3,4,"span",199),o.Rc(3,T4,3,8,"ng-template",null,205,o.Sc),o.Ub(),o.Vb(5,"div"),o.Vb(6,"span"),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Ub(),o.Vb(9,"div"),o.Rc(10,E4,2,1,"span",199),o.Rc(11,U4,3,8,"ng-template",null,206,o.Sc),o.Ub(),o.Sb()),2&e){const e=o.Fc(4),t=o.Fc(12),n=o.lc(4).isEdit,i=o.lc();o.Bb(1),o.Gb("flex-grow-1",n),o.Bb(1),o.sc("ngIf",!n)("ngIfElse",e),o.Bb(5),o.Wc("\xa0",i.functionalDisplay,",\xa0",o.nc(8,10,"OfEntry"),":\xa0"),o.Bb(2),o.Gb("flex-grow-1",n),o.Bb(1),o.sc("ngIf",!n)("ngIfElse",t)}}function D4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td"),o.Vb(1,"button",108),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc().$implicit,i=o.lc(2).model;return o.lc().onDeleteSignature(i,n,t)})),o.Qb(2,"fa-icon",109),o.Ub(),o.Ub()}}function B4(e,t){if(1&e&&(o.Vb(0,"tr",88),o.Rc(1,z0,3,0,"ng-container",89),o.Rc(2,J0,2,1,"div",90),o.Rc(3,K0,2,0,"td",91),o.Vb(4,"td"),o.Vb(5,"div",184),o.Vb(6,"div"),o.Rc(7,Y0,2,1,"span",30),o.Rc(8,e4,4,7,"ng-template",null,185,o.Sc),o.Ub(),o.Rc(10,c4,8,4,"ng-container",97),o.Rc(11,u4,8,4,"ng-container",97),o.Rc(12,m4,9,7,"ng-container",97),o.Rc(13,v4,9,7,"ng-container",97),o.Ub(),o.Ub(),o.Vb(14,"td"),o.Vb(15,"div",184),o.Vb(16,"div"),o.Rc(17,I4,2,1,"span",30),o.Rc(18,C4,5,7,"ng-template",null,186,o.Sc),o.Ub(),o.Rc(20,R4,13,12,"ng-container",97),o.Ub(),o.Ub(),o.Rc(21,D4,3,0,"td",97),o.Ub()),2&e){const e=t.$implicit,n=o.Fc(9),i=o.Fc(19),c=o.lc(3).isEdit;o.Bb(3),o.sc("ngIf",c),o.Bb(1),o.Gb("p-0",c),o.Bb(2),o.Gb("flex-grow-1",c),o.Bb(1),o.sc("ngIf",!c)("ngIfElse",n),o.Bb(3),o.sc("ngIf","ByRole"===e.RuleType),o.Bb(1),o.sc("ngIf","ByUser"===e.RuleType),o.Bb(1),o.sc("ngIf","ByCustodian"===e.RuleType),o.Bb(1),o.sc("ngIf",!!e.RuleType&&"Public"!==e.RuleType&&(c||!!e.ProxyRoleId)),o.Bb(1),o.Gb("p-0",c),o.Bb(2),o.Gb("flex-grow-1",c),o.Bb(1),o.sc("ngIf",!c)("ngIfElse",i),o.Bb(3),o.sc("ngIf","ValueGreaterOrEqual"===e.PredicateType),o.Bb(1),o.sc("ngIf",c)}}function S4(e,t){1&e&&(o.Vb(0,"div",110),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function k4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",111),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(2).model;return o.lc().onInsertSignature(n,t)})),o.Qb(1,"fa-icon",112),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}function O4(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"h5",181),o.Tc(2),o.Ub(),o.Vb(3,"table",80),o.Vb(4,"thead",81),o.Vb(5,"tr"),o.Rc(6,H0,1,0,"th",82),o.Vb(7,"th",182),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Vb(10,"th",183),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Rc(13,G0,1,0,"th",82),o.Ub(),o.Ub(),o.Vb(14,"tbody",84),o.hc("cdkDropListDropped",(function(n){o.Ic(e);const i=t.$implicit,c=o.lc(2).model,r=o.lc();return r.rowDrop(n,r.Signatures(c,i))})),o.Rc(15,B4,22,19,"tr",85),o.Ub(),o.Ub(),o.Rc(16,S4,3,3,"div",86),o.Rc(17,k4,4,3,"button",87),o.Sb()}if(2&e){const e=t.$implicit,n=o.lc(2),i=n.isEdit,c=n.model,r=o.lc();o.Bb(2),o.Uc(r.stateDisplay(e)),o.Bb(4),o.sc("ngIf",i),o.Bb(2),o.Vc("",o.nc(9,9,"RequiredSignature")," "),o.Bb(3),o.Vc("",o.nc(12,11,"When")," "),o.Bb(2),o.sc("ngIf",i),o.Bb(1),o.sc("cdkDropListDisabled",!i),o.Bb(1),o.sc("ngForOf",r.Signatures(c,e)),o.Bb(1),o.sc("ngIf",!i&&0===r.Signatures(c,e).length),o.Bb(1),o.sc("ngIf",i)}}const _4=function(){return[1,2,3,4]};function L4(e,t){1&e&&(o.Vb(0,"div",79),o.Rc(1,O4,18,13,"ng-container",180),o.Ub()),2&e&&(o.Bb(1),o.sc("ngForOf",o.vc(1,_4)))}function A4(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function F4(e,t){1&e&&o.Qb(0,"th",83)}function P4(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.Vc(" ",o.nc(2,1,"Name")+e.ws.secondaryPostfix," ")}}function N4(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3);o.Bb(1),o.Vc(" ",o.nc(2,1,"Name")+e.ws.ternaryPostfix," ")}}function j4(e,t){1&e&&o.Qb(0,"th",83)}function W4(e,t){1&e&&(o.Tb(0),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Sb())}function $4(e,t){if(1&e&&(o.Vb(0,"div",98),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Vc(" ",t.ws.getMultilingualValueImmediate(e,"Name"),"")}}function q4(e,t){1&e&&(o.Vb(0,"td",99),o.Qb(1,"fa-icon",100),o.Ub())}function Q4(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.stateDisplay(e.State))}}function H4(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function G4(e,t){1&e&&o.Rb(0)}function z4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,214),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.State=t})),o.Rc(2,H4,2,2,"option",123),o.Ub(),o.Rc(3,G4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit,n=o.lc(3),i=o.Fc(11);o.sc("ngModel",t.State),o.Bb(2),o.sc("ngForOf",n.negativeStateChoices),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.State))}}function J4(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Uc(e.Name)}}function K4(e,t){1&e&&o.Rb(0)}function Y4(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,215),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.Name=t})),o.Ub(),o.Rc(2,K4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Name)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Name))}}function X4(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Uc(e.Name2)}}function Z4(e,t){1&e&&o.Rb(0)}function e5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,217),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.Name2=t})),o.Ub(),o.Rc(2,Z4,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Name2)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Name2))}}function t5(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,X4,2,1,"span",30),o.Rc(2,e5,3,8,"ng-template",null,216,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(3).isEdit;o.Gb("p-0",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function n5(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.Uc(e.Name3)}}function i5(e,t){1&e&&o.Rb(0)}function o5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",127,219),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).$implicit.Name3=t})),o.Ub(),o.Rc(2,i5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.Name3)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.Name3))}}function c5(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,n5,2,1,"span",30),o.Rc(2,o5,3,8,"ng-template",null,218,o.Sc),o.Ub()),2&e){const e=o.Fc(3),t=o.lc(3).isEdit;o.Gb("p-0",t),o.Bb(1),o.sc("ngIf",!t)("ngIfElse",e)}}function r5(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc().$implicit;o.Bb(1),o.Uc(o.nc(2,1,e.IsActive?"Yes":"No"))}}function s5(e,t){1&e&&o.Rb(0)}function l5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,220),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.IsActive=t})),o.Vb(2,"option",67),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"option",68),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Rc(8,s5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.IsActive),o.Bb(3),o.Vc(" ",o.nc(4,5,"Yes"),""),o.Bb(3),o.Vc(" ",o.nc(7,7,"No"),""),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(9,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.IsActive))}}function a5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td"),o.Vb(1,"button",108),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(2).model;return o.lc().onDeleteRow(t,n.StateReasons)})),o.Qb(2,"fa-icon",109),o.Ub(),o.Ub()}}function u5(e,t){if(1&e&&(o.Vb(0,"tr",88),o.Rc(1,W4,3,0,"ng-container",89),o.Rc(2,$4,2,1,"div",90),o.Rc(3,q4,2,0,"td",91),o.Vb(4,"td"),o.Rc(5,Q4,2,1,"span",30),o.Rc(6,z4,4,7,"ng-template",null,211,o.Sc),o.Ub(),o.Vb(8,"td"),o.Rc(9,J4,2,1,"span",30),o.Rc(10,Y4,3,8,"ng-template",null,212,o.Sc),o.Ub(),o.Rc(12,t5,4,4,"td",116),o.Rc(13,c5,4,4,"td",116),o.Vb(14,"td"),o.Rc(15,r5,3,3,"span",30),o.Rc(16,l5,9,12,"ng-template",null,213,o.Sc),o.Ub(),o.Rc(18,a5,3,0,"td",97),o.Ub()),2&e){const e=o.Fc(7),t=o.Fc(11),n=o.Fc(17),i=o.lc(2).isEdit,c=o.lc();o.Bb(3),o.sc("ngIf",i),o.Bb(1),o.Gb("p-0",i),o.Bb(1),o.sc("ngIf",!i)("ngIfElse",e),o.Bb(3),o.Gb("p-0",i),o.Bb(1),o.sc("ngIf",!i)("ngIfElse",t),o.Bb(3),o.sc("ngIf",c.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",c.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("p-0",i),o.Bb(1),o.sc("ngIf",!i)("ngIfElse",n),o.Bb(3),o.sc("ngIf",i)}}function d5(e,t){1&e&&(o.Vb(0,"div",110),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function b5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",111),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model,n=o.lc();return n.onInsertRow(t.StateReasons,n.createStateReason)})),o.Qb(1,"fa-icon",112),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}function f5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",79),o.Vb(1,"table",80),o.Vb(2,"thead",81),o.Vb(3,"tr"),o.Rc(4,F4,1,0,"th",82),o.Vb(5,"th"),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Vb(8,"th"),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Rc(11,P4,3,3,"th",97),o.Rc(12,N4,3,3,"th",97),o.Vb(13,"th"),o.Tc(14),o.mc(15,"translate"),o.Ub(),o.Rc(16,j4,1,0,"th",82),o.Ub(),o.Ub(),o.Vb(17,"tbody",84),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().rowDrop(t,n.StateReasons)})),o.Rc(18,u5,19,16,"tr",85),o.Ub(),o.Ub(),o.Rc(19,d5,3,3,"div",86),o.Rc(20,b5,4,3,"button",87),o.Ub()}if(2&e){const e=o.lc(),t=e.isEdit,n=e.model,i=o.lc();o.Bb(4),o.sc("ngIf",t),o.Bb(2),o.Vc("",o.nc(7,11,"State")," "),o.Bb(3),o.Vc("",o.nc(10,13,"Name")+i.ws.primaryPostfix," "),o.Bb(2),o.sc("ngIf",i.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",i.ws.settings.TernaryLanguageId),o.Bb(2),o.Vc("",o.nc(15,15,"IsActive")," "),o.Bb(2),o.sc("ngIf",t),o.Bb(1),o.sc("cdkDropListDisabled",!t),o.Bb(1),o.sc("ngForOf",n.StateReasons),o.Bb(1),o.sc("ngIf",!t&&0===(null==n.StateReasons?null:n.StateReasons.length)),o.Bb(1),o.sc("ngIf",t)}}function m5(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function g5(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(1),o.Vc(" ",t.display_BarcodeColumnIndex(e),"")}}function p5(e,t){if(1&e&&(o.Vb(0,"option",124),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function h5(e,t){1&e&&o.Rb(0)}function v5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,223),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.BarcodeColumnIndex=t})),o.Qb(2,"option",204),o.Rc(3,p5,2,2,"option",123),o.Ub(),o.Rc(4,h5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2).model,n=o.lc(),i=o.Fc(11);o.sc("ngModel",t.BarcodeColumnIndex),o.Bb(3),o.sc("ngForOf",n.choices_BarcodeColumnIndex(t)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.BarcodeColumnIndex))}}function I5(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Uc(e.BarcodeProperty)}}function y5(e,t){1&e&&o.Rb(0)}function w5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"input",230,231),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.BarcodeProperty=t})),o.Ub(),o.Rc(2,y5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.BarcodeProperty)("ngModelOptions",o.vc(4,y1)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.BarcodeProperty))}}function C5(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.Vc(" ",t.display_BarcodeExistingItemHandling(e),"")}}function M5(e,t){1&e&&o.Rb(0)}function V5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",232,233),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.BarcodeExistingItemHandling=t})),o.Qb(2,"option",204),o.Vb(3,"option",234),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Vb(6,"option",235),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Vb(9,"option",236),o.Tc(10),o.mc(11,"translate"),o.Ub(),o.Vb(12,"option",237),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub(),o.Rc(15,M5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.BarcodeExistingItemHandling),o.Bb(4),o.Vc(" ",o.nc(5,7,"LineDefinition_Handling_AddNewLine"),""),o.Bb(3),o.Vc(" ",o.nc(8,9,"LineDefinition_Handling_IncrementQuantity"),""),o.Bb(3),o.Vc(" ",o.nc(11,11,"LineDefinition_Handling_ThrowError"),""),o.Bb(3),o.Vc(" ",o.nc(14,13,"LineDefinition_Handling_DoNothing"),""),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(15,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.BarcodeExistingItemHandling))}}function T5(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=o.lc(3).model;o.Bb(1),o.Vc(" ",o.nc(2,1,e.BarcodeBeepsEnabled?"Yes":"No"),"")}}function E5(e,t){1&e&&o.Rb(0)}function x5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",232,238),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.BarcodeBeepsEnabled=t})),o.Vb(2,"option",67),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"option",68),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Rc(8,E5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(3).model;o.lc();const n=o.Fc(11);o.sc("ngModel",t.BarcodeBeepsEnabled),o.Bb(3),o.Vc(" ",o.nc(4,5,"Yes"),""),o.Bb(3),o.Vc(" ",o.nc(7,7,"No"),""),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(9,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.BarcodeBeepsEnabled))}}function U5(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",28),o.Vb(2,"label",224),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Rc(5,I5,2,1,"div",30),o.Rc(6,w5,3,8,"ng-template",null,225,o.Sc),o.Ub(),o.Vb(8,"div",28),o.Vb(9,"label",226),o.Tc(10),o.mc(11,"translate"),o.Ub(),o.Rc(12,C5,2,1,"div",30),o.Rc(13,V5,16,18,"ng-template",null,227,o.Sc),o.Ub(),o.Vb(15,"div",28),o.Vb(16,"label",228),o.Tc(17),o.mc(18,"translate"),o.Ub(),o.Rc(19,T5,3,3,"div",30),o.Rc(20,x5,9,12,"ng-template",null,229,o.Sc),o.Ub(),o.Sb()),2&e){const e=o.Fc(7),t=o.Fc(14),n=o.Fc(21),i=o.lc(2).isEdit;o.Bb(3),o.Uc(o.nc(4,9,"LineDefinition_BarcodeProperty")),o.Bb(2),o.sc("ngIf",!i)("ngIfElse",e),o.Bb(5),o.Uc(o.nc(11,11,"LineDefinition_BarcodeExistingItemHandling")),o.Bb(2),o.sc("ngIf",!i)("ngIfElse",t),o.Bb(5),o.Uc(o.nc(18,13,"LineDefinition_BarcodeBeepsEnabled")),o.Bb(2),o.sc("ngIf",!i)("ngIfElse",n)}}function R5(e,t){if(1&e&&(o.Vb(0,"div",27),o.Vb(1,"div",28),o.Vb(2,"label",221),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Rc(5,g5,2,1,"div",30),o.Rc(6,v5,5,7,"ng-template",null,222,o.Sc),o.Ub(),o.Rc(8,U5,22,15,"ng-container",97),o.Ub()),2&e){const e=o.Fc(7),t=o.lc(),n=t.isEdit,i=t.model,c=o.lc();o.Bb(3),o.Uc(o.nc(4,4,"LineDefinition_BarcodeColumnIndex")),o.Bb(2),o.sc("ngIf",!n)("ngIfElse",e),o.Bb(3),o.sc("ngIf",c.isBarcodeColumnIndexSpecified(i))}}function D5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"ul",9,10),o.hc("activeIdChange",(function(t){return o.Ic(e),o.lc().activeTab=t})),o.Vb(2,"li",11),o.Vb(3,"a",12),o.Rc(4,h1,3,0,"span",13),o.Vb(5,"span",14),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Rc(8,c2,43,31,"ng-template",15),o.Ub(),o.Vb(9,"li",16),o.Vb(10,"a",12),o.Rc(11,r2,3,0,"span",13),o.Vb(12,"span",14),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub(),o.Rc(15,x2,28,24,"ng-template",15),o.Ub(),o.Vb(16,"li",17),o.Vb(17,"a",12),o.Rc(18,U2,3,0,"span",13),o.Vb(19,"span",14),o.Tc(20),o.mc(21,"translate"),o.Ub(),o.Ub(),o.Rc(22,D3,36,32,"ng-template",15),o.Ub(),o.Vb(23,"li",18),o.Vb(24,"a",12),o.Rc(25,B3,3,0,"span",13),o.Vb(26,"span",14),o.Tc(27),o.mc(28,"translate"),o.Ub(),o.Ub(),o.Rc(29,D0,47,38,"ng-template",15),o.Ub(),o.Vb(30,"li",19),o.Vb(31,"a",12),o.Rc(32,B0,3,0,"span",13),o.Vb(33,"span",14),o.Tc(34),o.mc(35,"translate"),o.Ub(),o.Ub(),o.Rc(36,A0,3,2,"ng-template",15),o.Ub(),o.Vb(37,"li",20),o.Vb(38,"a",12),o.Rc(39,F0,3,0,"span",13),o.Vb(40,"span",14),o.Tc(41),o.mc(42,"translate"),o.Ub(),o.Ub(),o.Rc(43,q0,3,2,"ng-template",15),o.Ub(),o.Vb(44,"li",21),o.Vb(45,"a",12),o.Rc(46,Q0,3,0,"span",13),o.Vb(47,"span",14),o.Tc(48),o.mc(49,"translate"),o.Ub(),o.Ub(),o.Rc(50,L4,2,2,"ng-template",15),o.Ub(),o.Vb(51,"li",22),o.Vb(52,"a",12),o.Rc(53,A4,3,0,"span",13),o.Vb(54,"span",14),o.Tc(55),o.mc(56,"translate"),o.Ub(),o.Ub(),o.Rc(57,f5,21,17,"ng-template",15),o.Ub(),o.Vb(58,"li",23),o.Vb(59,"a",12),o.Rc(60,m5,3,0,"span",13),o.Vb(61,"span",14),o.Tc(62),o.mc(63,"translate"),o.Ub(),o.Ub(),o.Rc(64,R5,9,6,"ng-template",15),o.Ub(),o.Ub(),o.Qb(65,"div",24)}if(2&e){const e=t.model,n=o.Fc(1),i=o.lc();o.sc("activeId",i.activeTab)("destroyOnHide",!0),o.Bb(4),o.sc("ngIf",i.showGeneralError(e)),o.Bb(2),o.Uc(o.nc(7,25,"General")),o.Bb(5),o.sc("ngIf",i.showEntriesError(e)),o.Bb(2),o.Wc("",o.nc(14,27,"LineDefinition_Entries")," (",null==e.Entries?null:e.Entries.length,")"),o.Bb(5),o.sc("ngIf",i.showColumnsError(e)),o.Bb(2),o.Wc("",o.nc(21,29,"LineDefinition_Columns")," (",null==e.Columns?null:e.Columns.length,")"),o.Bb(5),o.sc("ngIf",i.showGenerateScriptError(e)),o.Bb(2),o.Uc(o.nc(28,31,"AutoGenerate")),o.Bb(5),o.sc("ngIf",i.showPreprocessScriptError(e)),o.Bb(2),o.Uc(o.nc(35,33,"Definition_PreprocessScript")),o.Bb(5),o.sc("ngIf",i.showValidateScriptError(e)),o.Bb(2),o.Uc(o.nc(42,35,"Definition_ValidateScript")),o.Bb(5),o.sc("ngIf",i.showWorkflowsError(e)),o.Bb(2),o.Wc("",o.nc(49,37,"LineDefinition_Workflows")," (",i.signaturesCount(e),")"),o.Bb(5),o.sc("ngIf",i.showStateReasonsError(e)),o.Bb(2),o.Wc("",o.nc(56,39,"LineDefinition_StateReasons")," (",null==e.StateReasons?null:e.StateReasons.length,")"),o.Bb(5),o.sc("ngIf",i.showAdvancedError(e)),o.Bb(2),o.Uc(o.nc(63,41,"Advanced")),o.Bb(3),o.sc("ngbNavOutlet",n)}}function B5(e,t){1&e&&o.Rb(0)}function S5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",239),o.Vb(1,"h5",240),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",241),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",242),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",243),o.Vb(8,"t-control-options",244,245),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().selectedParam.ControlOptions=t})),o.Ub(),o.Rc(10,B5,1,0,"ng-container",44),o.Ub(),o.Vb(11,"div",246),o.Vb(12,"button",247),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(13,"fa-icon",248),o.Tc(14),o.mc(15,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(9),t=o.lc(),n=o.Fc(11);o.Bb(2),o.Vc(" ",o.nc(3,7,"Definition_ControlOptions")," "),o.Bb(6),o.sc("control",t.selectedParam.Control)("isEdit",t.isEdit)("ngModel",t.selectedParam.ControlOptions),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(11,w1,e,null==t.selectedParam||null==t.selectedParam.serverErrors?null:t.selectedParam.serverErrors.ControlOptions)),o.Bb(4),o.Vc(" \xa0",o.nc(15,9,"Done")," ")}}function k5(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Uc(e.directionDisplay(e.entryToEdit.Direction))}}function O5(e,t){1&e&&o.Rb(0)}function _5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"select",65,101),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).entryToEdit.Direction=t})),o.Vb(2,"option",102),o.Tc(3),o.Ub(),o.Vb(4,"option",103),o.Tc(5),o.Ub(),o.Ub(),o.Rc(6,O5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2),n=o.Fc(11);o.sc("ngModel",t.entryToEdit.Direction),o.Bb(3),o.Vc(" ",t.directionDisplay(1),""),o.Bb(2),o.Vc(" ",t.directionDisplay(-1),""),o.Bb(1),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(5,w1,e,null==t.entryToEdit||null==t.entryToEdit.serverErrors?null:t.entryToEdit.serverErrors.Direction))}}function L5(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Uc(e.ws.getMultilingualValue("AccountType",e.entryToEdit.ParentAccountTypeId,"Name"))}}function A5(e,t){1&e&&o.Rb(0)}function F5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-types-picker",104,105),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).entryToEdit.ParentAccountTypeId=t})),o.Ub(),o.Rc(2,A5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2),n=o.Fc(11);o.sc("ngModel",t.entryToEdit.ParentAccountTypeId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t.entryToEdit||null==t.entryToEdit.serverErrors?null:t.entryToEdit.serverErrors.ParentAccountTypeId))}}function P5(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);o.Bb(1),o.Uc(e.ws.getMultilingualValue("EntryType",e.entryToEdit.EntryTypeId,"Name"))}}function N5(e,t){1&e&&o.Rb(0)}function j5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",104,106),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).entryToEdit.EntryTypeId=t})),o.Ub(),o.Rc(2,N5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc(2),n=o.Fc(11);o.sc("ngModel",t.entryToEdit.EntryTypeId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t.entryToEdit||null==t.entryToEdit.serverErrors?null:t.entryToEdit.serverErrors.EntryTypeId))}}function W5(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function $5(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.ws.getMultilingualValue("CustodyDefinition",e.CustodyDefinitionId,"TitleSingular"))}}function q5(e,t){1&e&&o.Rb(0)}function Q5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custody-definitions-picker",104,262),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.CustodyDefinitionId=t})),o.Ub(),o.Rc(2,q5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.CustodyDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.CustodyDefinitionId))}}function H5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",83),o.Vb(1,"button",108),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(3);return n.onDeleteRow(t,n.entryToEdit.CustodyDefinitions)})),o.Qb(2,"fa-icon",109),o.Ub(),o.Ub()}}function G5(e,t){if(1&e&&(o.Vb(0,"tr"),o.Vb(1,"td"),o.Rc(2,$5,2,1,"span",30),o.Rc(3,Q5,3,6,"ng-template",null,260,o.Sc),o.Ub(),o.Rc(5,H5,3,0,"td",261),o.Ub()),2&e){const e=o.Fc(4),t=o.lc(3);o.Bb(1),o.Gb("p-0",t.modalIsEdit),o.Bb(1),o.sc("ngIf",!t.modalIsEdit)("ngIfElse",e),o.Bb(3),o.sc("ngIf",t.modalIsEdit)}}function z5(e,t){1&e&&(o.Vb(0,"div",110),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function J5(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",263),o.hc("click",(function(){o.Ic(e);const t=o.lc(3);return t.onInsertRow(t.entryToEdit.CustodyDefinitions)})),o.Qb(1,"fa-icon",112),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}function K5(e,t){if(1&e&&(o.Vb(0,"table",80),o.Vb(1,"tbody"),o.Rc(2,G5,6,5,"tr",180),o.Ub(),o.Ub(),o.Rc(3,z5,3,3,"div",86),o.Rc(4,J5,4,3,"button",259)),2&e){const e=o.lc(2);o.Bb(2),o.sc("ngForOf",e.entryToEdit.CustodyDefinitions),o.Bb(1),o.sc("ngIf",!e.modalIsEdit&&0===(null==e.entryToEdit.CustodyDefinitions?null:e.entryToEdit.CustodyDefinitions.length)),o.Bb(1),o.sc("ngIf",e.modalIsEdit)}}function Y5(e,t){1&e&&(o.Vb(0,"span",25),o.Qb(1,"fa-icon",26),o.Tc(2,"\xa0 "),o.Ub())}function X5(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(3);o.Bb(1),o.Uc(t.ws.getMultilingualValue("ResourceDefinition",e.ResourceDefinitionId,"TitleSingular"))}}function Z5(e,t){1&e&&o.Rb(0)}function e6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resource-definitions-picker",104,265),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().$implicit.ResourceDefinitionId=t})),o.Ub(),o.Rc(2,Z5,1,0,"ng-container",44)}if(2&e){const e=o.Fc(1),t=o.lc().$implicit;o.lc(3);const n=o.Fc(11);o.sc("ngModel",t.ResourceDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(3,w1,e,null==t||null==t.serverErrors?null:t.serverErrors.ResourceDefinitionId))}}function t6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",83),o.Vb(1,"button",108),o.hc("click",(function(){o.Ic(e);const t=o.lc().$implicit,n=o.lc(3);return n.onDeleteRow(t,n.entryToEdit.ResourceDefinitions)})),o.Qb(2,"fa-icon",109),o.Ub(),o.Ub()}}function n6(e,t){if(1&e&&(o.Vb(0,"tr"),o.Vb(1,"td"),o.Rc(2,X5,2,1,"span",30),o.Rc(3,e6,3,6,"ng-template",null,264,o.Sc),o.Ub(),o.Rc(5,t6,3,0,"td",82),o.Ub()),2&e){const e=o.Fc(4),t=o.lc(3);o.Bb(1),o.Gb("p-0",t.modalIsEdit),o.Bb(1),o.sc("ngIf",!t.modalIsEdit)("ngIfElse",e),o.Bb(3),o.sc("ngIf",t.modalIsEdit)}}function i6(e,t){1&e&&(o.Vb(0,"div",110),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function o6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",263),o.hc("click",(function(){o.Ic(e);const t=o.lc(3);return t.onInsertRow(t.entryToEdit.ResourceDefinitions)})),o.Qb(1,"fa-icon",112),o.Tc(2),o.mc(3,"translate"),o.Ub()}2&e&&(o.Bb(2),o.Vc("\xa0\xa0",o.nc(3,1,"Add")," "))}function c6(e,t){if(1&e&&(o.Vb(0,"table",80),o.Vb(1,"tbody"),o.Rc(2,n6,6,5,"tr",180),o.Ub(),o.Ub(),o.Rc(3,i6,3,3,"div",86),o.Rc(4,o6,4,3,"button",259)),2&e){const e=o.lc(2);o.Bb(2),o.sc("ngForOf",e.entryToEdit.ResourceDefinitions),o.Bb(1),o.sc("ngIf",!e.modalIsEdit&&0===(null==e.entryToEdit.ResourceDefinitions?null:e.entryToEdit.ResourceDefinitions.length)),o.Bb(1),o.sc("ngIf",e.modalIsEdit)}}function r6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",239),o.Vb(1,"h5",240),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",241),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",242),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",243),o.Vb(8,"div",249),o.Vb(9,"div",250),o.Vb(10,"label",251),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"div"),o.Tc(14),o.Ub(),o.Ub(),o.Vb(15,"div",250),o.Vb(16,"label",251),o.Tc(17),o.mc(18,"translate"),o.Ub(),o.Vb(19,"div"),o.Rc(20,k5,2,1,"span",30),o.Rc(21,_5,7,8,"ng-template",null,252,o.Sc),o.Ub(),o.Ub(),o.Vb(23,"div",250),o.Vb(24,"label",251),o.Tc(25),o.mc(26,"translate"),o.Ub(),o.Vb(27,"div"),o.Rc(28,L5,2,1,"span",30),o.Rc(29,F5,3,6,"ng-template",null,253,o.Sc),o.Ub(),o.Ub(),o.Vb(31,"div",250),o.Vb(32,"label",251),o.Tc(33),o.mc(34,"translate"),o.Ub(),o.Vb(35,"div"),o.Rc(36,P5,2,1,"span",30),o.Rc(37,j5,3,6,"ng-template",null,254,o.Sc),o.Ub(),o.Ub(),o.Ub(),o.Vb(39,"ul",255,256),o.hc("activeIdChange",(function(t){return o.Ic(e),o.lc().activeEntryTab=t})),o.Vb(41,"li",257),o.Vb(42,"a",12),o.Rc(43,W5,3,0,"span",13),o.Vb(44,"span",14),o.Tc(45),o.mc(46,"translate"),o.Ub(),o.Ub(),o.Rc(47,K5,5,3,"ng-template",15),o.Ub(),o.Vb(48,"li",258),o.Vb(49,"a",12),o.Rc(50,Y5,3,0,"span",13),o.Vb(51,"span",14),o.Tc(52),o.mc(53,"translate"),o.Ub(),o.Ub(),o.Rc(54,c6,5,3,"ng-template",15),o.Ub(),o.Ub(),o.Qb(55,"div",24),o.Ub(),o.Vb(56,"div",246),o.Vb(57,"button",247),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(58,"fa-icon",248),o.Tc(59),o.mc(60,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(22),t=o.Fc(30),n=o.Fc(38),i=o.Fc(40),c=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,22,"LineDefinitionEntry")," "),o.Bb(9),o.Uc(o.nc(12,24,"LineDefinitionColumn_EntryIndex")),o.Bb(3),o.Vc(" ",c.entryIndex," "),o.Bb(3),o.Uc(o.nc(18,26,"LineDefinitionEntry_Direction")),o.Bb(3),o.sc("ngIf",!c.modalIsEdit)("ngIfElse",e),o.Bb(5),o.Uc(o.nc(26,28,"LineDefinitionEntry_ParentAccountType")),o.Bb(3),o.sc("ngIf",!c.modalIsEdit)("ngIfElse",t),o.Bb(5),o.Uc(o.nc(34,30,"LineDefinitionEntry_EntryType")),o.Bb(3),o.sc("ngIf",!c.modalIsEdit)("ngIfElse",n),o.Bb(3),o.sc("activeId",c.activeEntryTab)("destroyOnHide",!0),o.Bb(4),o.sc("ngIf",c.showCustodyDefinitionsError(c.entryToEdit)),o.Bb(2),o.Wc("",o.nc(46,32,"LineDefinitionEntry_CustodyDefinitions")," (",null==c.entryToEdit.CustodyDefinitions?null:c.entryToEdit.CustodyDefinitions.length,")"),o.Bb(5),o.sc("ngIf",c.showResourceDefinitionsError(c.entryToEdit)),o.Bb(2),o.Wc("",o.nc(53,34,"LineDefinitionEntry_ResourceDefinitions")," (",null==c.entryToEdit.ResourceDefinitions?null:c.entryToEdit.ResourceDefinitions.length,")"),o.Bb(3),o.sc("ngbNavOutlet",i),o.Bb(4),o.Vc(" \xa0",o.nc(60,36,"Done")," ")}}function s6(e,t){if(1&e&&(o.Vb(0,"span",269),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function l6(e,t){if(1&e&&(o.Vb(0,"div",267),o.Rc(1,s6,2,1,"span",268),o.Ub()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(1),o.sc("ngForOf",i.errors(t,n))}}function a6(e,t){if(1&e&&o.Rc(0,l6,2,1,"div",266),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}function u6(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Activate")," ")}function d6(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Deactivate")," ")}function b6(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"EditDefinition")," ")}const f6=function(){return[]};let m6=(()=>{class e extends gn.a{constructor(e,t,n,i){super(),this.modalService=e,this.workspace=t,this.api=n,this.translate=i,this.expand="Columns,Entries.ParentAccountType,Entries.EntryType,Entries.CustodyDefinitions.CustodyDefinition,\nEntries.ResourceDefinitions.ResourceDefinition,GenerateParameters,\nWorkflows.Signatures.Role,Workflows.Signatures.User,Workflows.Signatures.ProxyRole,StateReasons",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText),e.AllowSelectiveSigning=!1,e.ViewDefaultsToForm=!1,e.BarcodeBeepsEnabled=!0,e.Columns=[],e.Entries=[],e.GenerateParameters=[],e.StateReasons=[],e.Workflows=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Columns&&t.Columns.forEach(e=>{e.Id=null}),t.Entries&&t.Entries.forEach(e=>{e.Id=null,e.CustodyDefinitions.forEach(e=>{e.Id=null}),e.ResourceDefinitions.forEach(e=>{e.Id=null})}),t.GenerateParameters&&t.GenerateParameters.forEach(e=>{e.Id=null}),t.StateReasons&&t.StateReasons.forEach(e=>{e.Id=null}),t.Workflows&&t.Workflows.forEach(e=>{e.Id=null,e.Signatures.forEach(e=>{e.Id=null})}),t}return console.error("Cloning a non existing item"),null},this.isInactive=e=>e&&e.Id===this.ws.definitions.ManualLinesDefinitionId?"Error_CannotModifySystemItem":null,this.columnNameDisplay=e=>{let t;switch(e){case"Memo":t="";break;case"PostingDate":case"TemplateLineId":case"Multiplier":case"Boolean1":case"Decimal1":case"Text1":t="Line_";break;default:t="Entry_"}let n=t+e;return n.endsWith("Id")&&(n=n.substr(0,n.length-2)),this.translate.instant(n)},this.stateDisplay=e=>{let t;return t=5===e?"Never":e>=0?"Line_State_"+e:"Line_State_minus_"+Math.abs(e),this.translate.instant(t)},this.directionDisplay=e=>1===e?this.translate.instant("Entry_Direction_Debit"):-1===e?this.translate.instant("Entry_Direction_Credit"):"",this.ruleTypeDisplay=e=>e?this.translate.instant("RuleType_"+e):"",this.predicateTypeDisplay=e=>e?this.translate.instant("PredicateType_"+e):"",this.visibilityDisplay=e=>Object(u1.h)("",this.translate).format(e),this.controlDisplay=e=>{const t=this.ws.definitions;if(this._controlChoicesDefinitions!==t){this._controlChoicesDefinitions=t,this._controlDisplayCache={};for(const e of this.controlSimpleChoices())this._controlDisplayCache[e.value]=e.name;for(const e of this.controlEntityChoices())this._controlDisplayCache[e.value]=e.name}const n=this._controlDisplayCache[e];return n?n():""},this.isEdit=!1,this.choicesBarcodeColumnIndexChanged=!0}get ws(){return this.workspace.currentTenant}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}get columnNameChoices(){return this._columnNameChoices||(this._columnNameChoices=d1.map(e=>({value:e,name:()=>this.columnNameDisplay(e)}))),this._columnNameChoices}isRequiredColumn(e){return"CenterId"===e.ColumnName||"CurrencyId"===e.ColumnName}canFilter(e){return!!e.ColumnName&&e.ColumnName.endsWith("Id")}canInherit(e){switch(e.ColumnName){case"PostingDate":case"Memo":case"CurrencyId":case"CenterId":case"CustodianId":case"CustodyId":case"ParticipantId":case"ResourceId":case"Quantity":case"UnitId":case"Time1":case"Time2":case"ExternalReference":case"InternalReference":return!0;default:return!1}}get stateChoices(){return this._stateChoices||(this._stateChoices=[0,1,2,3,4,5].map(e=>({value:e,name:()=>this.stateDisplay(e)}))),this._stateChoices}get toStateChoices(){return this._toStateChoices||(this._toStateChoices=[1,2,3,4].map(e=>({value:e,name:()=>this.stateDisplay(e)}))),this._toStateChoices}get negativeStateChoices(){return this._negativeStateChoices||(this._negativeStateChoices=[-1,-2,-3,-4].map(e=>({value:e,name:()=>this.stateDisplay(e)}))),this._negativeStateChoices}get ruleTypeChoices(){return this._ruleTypeChoices||(this._ruleTypeChoices=b1.map(e=>({value:e,name:()=>this.ruleTypeDisplay(e)}))),this._ruleTypeChoices}get predicateTypeChoices(){return this._predicateTypeChoices||(this._predicateTypeChoices=f1.map(e=>({value:e,name:()=>this.predicateTypeDisplay(e)}))),this._predicateTypeChoices}get functionalDisplay(){return this.ws.getMultilingualValueImmediate(this.ws.settings,"FunctionalCurrencyName")}get functionalDecimals(){return this.ws.settings.FunctionalCurrencyDecimals}get functionalFormat(){const e=this.functionalDecimals;return`1.${e}-${e}`}get visibilityChoices(){if(!this._visibilityChoices){const e=Object(u1.h)("",this.translate);this._visibilityChoices=Object(wi.c)(e)}return this._visibilityChoices}controlSimpleChoices(){return Object(wi.i)(this.translate)}controlEntityChoices(){return Object(wi.a)(this.workspace,this.translate,!0)}hasControlOptions(e){return!!e&&Object(wi.e)(e.Control)}onControlOptions(e,t){e&&(this.selectedParam=e,this.isEdit=t,this.modalService.open(this.controlOptions,{windowClass:"t-dark-theme t-wider-modal"}))}createEntry(){return{Id:0,Direction:1,CustodyDefinitions:[],ResourceDefinitions:[]}}createStateReason(){return{Id:0,State:-2,IsActive:!0}}createColumn(){return{Id:0,EntryIndex:0,InheritsFromHeader:0,VisibleState:0,RequiredState:0,ReadOnlyState:5}}onLineDefinitionEntryCustodyDefinitions(e,t,n){this.activeEntryTab="custodyDefinitions",this.onLineDefinitionEntryMore(e,t,n)}onLineDefinitionEntryResourceDefinitions(e,t,n){this.activeEntryTab="resourceDefinitions",this.onLineDefinitionEntryMore(e,t,n)}onLineDefinitionEntryMore(e,t,n){e&&(this.entryToEdit=e,this.modalIsEdit=t,this.entryIndex=n,this.modalService.open(this.lineDefinitionEntryModal,{windowClass:"t-dark-theme t-wider-modal"}))}rowDrop(e,t){Object(W.i)(t,e.previousIndex,e.currentIndex)}onDeleteRow(e,t){const n=t.indexOf(e);n>=0&&t.splice(n,1)}onInsertRow(e,t){const n=t?t():{Id:0};e.push(n)}column_rowDrop(e,t){this.rowDrop(e,t.Columns),this.choicesBarcodeColumnIndexChanged=!0,t.BarcodeColumnIndex===e.previousIndex?t.BarcodeColumnIndex=e.currentIndex:e.previousIndex<t.BarcodeColumnIndex&&e.currentIndex>=t.BarcodeColumnIndex?t.BarcodeColumnIndex--:e.previousIndex>t.BarcodeColumnIndex&&e.currentIndex<=t.BarcodeColumnIndex&&t.BarcodeColumnIndex++}column_onDeleteRow(e,t){this.onDeleteRow(t.Columns[e],t.Columns),this.choicesBarcodeColumnIndexChanged=!0,t.BarcodeColumnIndex===e?delete t.BarcodeColumnIndex:t.BarcodeColumnIndex>e&&t.BarcodeColumnIndex--}column_onInsertRow(e){this.onInsertRow(e.Columns,this.createColumn),this.choicesBarcodeColumnIndexChanged=!0}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(fI.b)(e.serverErrors[t]))}showGeneralError(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.Code)||Object(fI.b)(e.serverErrors.TitleSingular)||Object(fI.b)(e.serverErrors.TitleSingular2)||Object(fI.b)(e.serverErrors.TitleSingular3)||Object(fI.b)(e.serverErrors.TitlePlural)||Object(fI.b)(e.serverErrors.TitlePlural2)||Object(fI.b)(e.serverErrors.TitlePlural3)||Object(fI.b)(e.serverErrors.Description)||Object(fI.b)(e.serverErrors.Description2)||Object(fI.b)(e.serverErrors.Description3))}showColumnsError(e){return!!e.Columns&&e.Columns.some(e=>this.weakEntityErrors(e))}showEntriesError(e){return!!e.Entries&&e.Entries.some(e=>this.weakEntityErrors(e)||this.showCustodyDefinitionsError(e)||this.showResourceDefinitionsError(e))}showCustodyDefinitionsError(e){return!!e.CustodyDefinitions&&e.CustodyDefinitions.some(e=>this.weakEntityErrors(e))}showResourceDefinitionsError(e){return!!e.ResourceDefinitions&&e.ResourceDefinitions.some(e=>this.weakEntityErrors(e))}showPreprocessScriptError(e){return!!e.serverErrors&&Object(fI.b)(e.serverErrors.PreprocessScript)}showValidateScriptError(e){return!!e.serverErrors&&Object(fI.b)(e.serverErrors.ValidateScript)}showGenerateScriptError(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.GenerateLabel)||Object(fI.b)(e.serverErrors.GenerateLabel2)||Object(fI.b)(e.serverErrors.GenerateLabel3)||Object(fI.b)(e.serverErrors.GenerateScript))||!!e.GenerateParameters&&e.GenerateParameters.some(e=>this.weakEntityErrors(e))}showGenerateParametersError(e){return!!e.serverErrors&&Object(fI.b)(e.serverErrors.ControlOptions)}showWorkflowsError(e){return!!e.Workflows&&e.Workflows.some(e=>!!e.Signatures&&e.Signatures.some(e=>this.weakEntityErrors(e)))}showStateReasonsError(e){return!!e.StateReasons&&e.StateReasons.some(e=>this.weakEntityErrors(e))}Signatures(e,t){const n=e.Workflows.find(e=>e.ToState===t);return n?n.Signatures:[]}onInsertSignature(e,t){let n=e.Workflows.find(e=>e.ToState===t);n||(n={ToState:t,Signatures:[]},e.Workflows.push(n)),this.onInsertRow(n.Signatures)}onDeleteSignature(e,t,n){const i=e.Workflows.find(e=>e.ToState===t);this.onDeleteRow(n,i.Signatures),0===i.Signatures.length&&this.onDeleteRow(i,e.Workflows)}signaturesCount(e){if(e&&e.Workflows){let t=0;for(const n of e.Workflows)t+=n.Signatures?n.Signatures.length:0;return t}return 0}showAdvancedError(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.BarcodeColumnIndex)||Object(fI.b)(e.serverErrors.BarcodeProperty)||Object(fI.b)(e.serverErrors.BarcodeExistingItemHandling)||Object(fI.b)(e.serverErrors.BarcodeBeepsEnabled))}get activeTab(){return this.ws.miscState.lineDefinition_activeTab||"general"}set activeTab(e){this.ws.miscState.lineDefinition_activeTab=e}get activeEntryTab(){return this.ws.miscState.lineDefinition_activeEntryTab||"custodyDefinitions"}set activeEntryTab(e){this.ws.miscState.lineDefinition_activeEntryTab=e}onPreprocessScriptKeydown(e,t,n){Object(N.p)(e,t,e=>n.PreprocessScript=e)}onValidateScriptKeydown(e,t,n){Object(N.p)(e,t,e=>n.ValidateScript=e)}onGenerateScriptKeydown(e,t,n){Object(N.p)(e,t,e=>n.GenerateScript=e)}isBarcodeColumnIndexSpecified(e){return Object(N.n)(e.BarcodeColumnIndex)}display_BarcodeColumnIndex(e){const t=e.BarcodeColumnIndex;if(Object(N.n)(t)){const n=e.Columns[t];if(n)return this.ws.getMultilingualValueImmediate(n,"Label")||n.ColumnName}return""}choices_BarcodeColumnIndex(e){return(this.choicesBarcodeColumnIndexChanged||this.choicesBarcodeColumnIndexModel!==e)&&(this.choicesBarcodeColumnIndexChanged=!1,this.choicesBarcodeColumnIndexModel=e,this.choicesBarcodeColumnIndexResult=e.Columns.map((e,t)=>({name:()=>this.ws.getMultilingualValueImmediate(e,"Label")||e.ColumnName,value:t}))),this.choicesBarcodeColumnIndexResult}display_BarcodeExistingItemHandling(e){return Object(a1.a)(this.workspace,this.translate).properties.BarcodeExistingItemHandling.format(e.BarcodeExistingItemHandling)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(K.t),o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-line-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(m1,!0),o.Oc(g1,!0)),2&e&&(o.Ec(n=o.ic())&&(t.lineDefinitionEntryModal=n.first),o.Ec(n=o.ic())&&(t.controlOptions=n.first))},features:[o.yb],decls:18,vars:13,consts:[["collection","LineDefinition","theme","dark",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],["controlOptions",""],["lineDefinitionEntryModal",""],["errorsTemplate",""],["activate",""],["deactivate",""],["editDefinition",""],["ngbNav","",1,"w-100","nav-tabs","t-dark-tabs","t-dark-border",3,"activeId","destroyOnHide","activeIdChange"],["tabs","ngbNav"],["ngbNavItem","general"],["ngbNavLink",""],["class","text-danger t-light-danger",4,"ngIf"],[1,"small","t-slightly-bold"],["ngbNavContent",""],["ngbNavItem","entries"],["ngbNavItem","columns"],["ngbNavItem","generateScript"],["ngbNavItem","preprocessScript"],["ngbNavItem","validateScript"],["ngbNavItem","workflows"],["ngbNavItem","stateReasons"],["ngbNavItem","advanced"],[1,"w-100","overflow-auto",3,"ngbNavOutlet"],[1,"text-danger","t-light-danger"],["icon","exclamation"],[1,"row","m-0","pt-2","pt-sm-3"],[1,"form-group","t-form-group","t-text-whitish"],["for","titleplural",1,"small"],[4,"ngIf","ngIfElse"],["titlepluraltemplate",""],["class","form-group t-form-group t-text-whitish",4,"ngIf"],["for","titlesingular",1,"small"],["titlesingulartemplate",""],["for","code",1,"small"],["codetemplate",""],["for","defaultstoform",1,"small"],["viewdefaultstoformtemplate",""],[1,"w-100"],["for","description",1,"small"],["descriptiontemplate",""],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlepluralmodel","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titleplural2",1,"small"],["titleplural2template",""],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2model","ngModel"],["for","titleplural3",1,"small"],["titleplural3template",""],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3model","ngModel"],["id","titlesingular","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingularmodel","ngModel"],["for","titlesingular2",1,"small"],["titlesingular2template",""],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2model","ngModel"],["for","titlesingular3",1,"small"],["titlesingular3template",""],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3model","ngModel"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["codemodel","ngModel"],[1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["defaultstoformmodel","ngModel"],["value","true"],["value","false"],["id","description","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["descriptionmodel","ngModel"],["for","description2",1,"small"],["description2template",""],["id","description2","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["description2model","ngModel"],["for","description3",1,"small"],["description3template",""],["id","description3","type","text","rows","5","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["description3model","ngModel"],[1,"t-text-whitish","pb-1"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[1,"small","font-weight-normal"],["style","width: 1px;",4,"ngIf"],[2,"width","1px"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","font-italic mx-2",4,"ngIf"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal",3,"click",4,"ngIf"],["cdkDrag","","cdkDragLockAxis","y"],[4,"cdkDragPlaceholder"],["class","p-1 border t-dark-border t-much-less-dark text-white",4,"cdkDragPreview"],["cdkDragHandle","","class","px-2","style","cursor: move;",4,"ngIf"],["directiontemplate",""],["parentaccounttypetemplate",""],["entrytypetemplate",""],[1,"btn","btn-sm","t-text-whitish","btn-link","py-0","font-weight-normal",3,"click"],["class","text-danger t-light-danger t-vertical-align-middle",4,"ngIf"],[4,"ngIf"],[1,"p-1","border","t-dark-border","t-much-less-dark","text-white"],["cdkDragHandle","",1,"px-2",2,"cursor","move"],["icon","arrows-alt"],["directionmodel","ngModel"],["value","1"],["value","-1"],["theme","dark",3,"ngModel","ngModelChange"],["parentaccounttypemodel","ngModel"],["entrytypemodel","ngModel"],[1,"text-danger","t-light-danger","t-vertical-align-middle"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],[1,"font-italic","mx-2"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],["icon","plus"],["columnnametemplate",""],["entryindextemplate",""],["labeltemplate",""],[3,"p-0",4,"ngIf"],["filtertemplate",""],["visiblestatetemplate",""],["requiredstatetemplate",""],["readonlystatetemplate",""],["inheritsfromheadertemplate",""],["columnnamemodel","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["entryindexmodel","ngModel"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["labelmodel","ngModel"],["label2template",""],["label2model","ngModel"],["label3template",""],["label3model","ngModel"],["noFilter",""],["filtermodel","ngModel"],["visiblestatemodel","ngModel"],["requiredstatemodel","ngModel"],["readonlystatemodel","ngModel"],["inheritsFromNone",""],["inheritsfromheadermodel","ngModel"],["value","0"],["value","2"],["for","generatelabel",1,"small"],["generatelabeltemplate",""],[1,"form-group","t-wide-form-group","t-text-whitish"],[1,"small"],[1,"t-wide-form-group"],["for","generatescript",1,"small","t-text-whitish"],["generatescripttemplate",""],["id","generatelabel","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabelmodel","ngModel"],["for","generatelabel2",1,"small"],["generatelabel2template",""],["id","generatelabel2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabel2model","ngModel"],["for","generatelabel3",1,"small"],["generatelabel3template",""],["id","generatelabel3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["generatelabel3model","ngModel"],["keytemplate",""],["visibilitytemplate",""],["controltemplate",""],["class","btn btn-secondary t-white-button t-text-whitish btn-sm py-0 px-1 align-baseline",3,"click",4,"ngIf"],["keymodel","ngModel"],[1,"form-control","t-studio-input",2,"min-width","120px",3,"ngModel","ngModelChange"],["visibilitymodel","ngModel"],["controlmodel","ngModel"],["disabled",""],["icon","ellipsis-h"],["class","text-muted bg-dark p-2 pb-5 font-italic",4,"ngIf"],["class","t-text-whitish bg-dark pb-4 t-code overflow-auto px-1",4,"ngIf"],[1,"text-muted","bg-dark","p-2","pb-5","font-italic"],[1,"t-text-whitish","bg-dark","pb-4","t-code","overflow-auto","px-1"],["id","generatescript","spellcheck","false","rows","15",1,"w-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["generatescriptnmodel","ngModel","gstextarea",""],["preprocessscripttemplate",""],["spellcheck","false","rows","25",1,"w-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["preprocessscriptnmodel","ngModel","pstextarea",""],["validatescripttemplate",""],["validatescriptnmodel","ngModel","pstextarea",""],[4,"ngFor","ngForOf"],[1,"mt-3"],[2,"width","60%"],[2,"width","40%"],[1,"d-flex","align-items-baseline"],["ruletypetemplate",""],["predicatetypetemplate",""],["ruletypemodel","ngModel"],["roletemplate",""],["class","font-weight-bold",4,"ngIf"],[1,"font-weight-bold"],["theme","dark","id","role","filter","IsPublic eq false",1,"d-inline-block",3,"ngModel","ngModelChange"],["rolemodel","ngModel"],["usertemplate",""],["theme","dark","id","user",3,"ngModel","ngModelChange"],["usermodel","ngModel"],["ruletypeentryindextemplate",""],["id","ruletypeentryindex","type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["ruletypeentryindexmodel","ngModel"],["class","font-weight-bold",4,"ngIf","ngIfElse"],["proxyroletemplate",""],["theme","dark","id","proxyrole","filter","IsPublic eq false",3,"ngModel","ngModelChange"],["proxyrolemodel","ngModel"],["predicatetypemodel","ngModel"],["value",""],["valuetemplate",""],["predicatetypeentryindextemplate",""],["theme","dark",3,"ngModel","maxDecimalPlaces","minDecimalPlaces","ngModelChange"],["valuemodel","ngModel"],["id","predicatetypeentryindex","type","number","min","0","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["predicatetypeentryindexmodel","ngModel"],["statetemplate",""],["nametemplate",""],["isactivetemplate",""],["statemodel","ngModel"],["namemodel","ngModel"],["name2template",""],["name2model","ngModel"],["name3template",""],["name3model","ngModel"],["isactivemodel","ngModel"],["for","barcodecolumnindex",1,"small"],["barcodecolumnindextemplate",""],["barcodecolumnindexmodel","ngModel"],["for","barcodeproperty",1,"small"],["barcodepropertytemplate",""],["for","barcodeexistingitemhandling",1,"small"],["barcodeexistingitemhandlingtemplate",""],["for","barcodebeepsenabled",1,"small"],["barcodebeepsenabledtemplate",""],["id","barcodeproperty","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["barcodepropertymodel","ngModel"],["required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["barcodeexistingitemhandlingmodel","ngModel"],["value","AddNewLine"],["value","IncrementQuantity"],["value","ThrowError"],["value","DoNothing"],["barcodebeepsenabledmodel","ngModel"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[3,"control","isEdit","ngModel","ngModelChange"],["controloptions","ngModel"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["icon","check"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["for","label",1,"small"],["modaldirectiontemplate",""],["modalparentaccounttypetemplate",""],["modalentrytypetemplate",""],["ngbNav","",1,"w-100","pt-3","pt-sm-4","nav-tabs","t-dark-tabs","t-dark-border",3,"activeId","destroyOnHide","activeIdChange"],["entryTabs","ngbNav"],["ngbNavItem","custodyDefinitions"],["ngbNavItem","resourceDefinitions"],["class","btn btn-sm t-toolbar-button t-text-whitish font-weight-normal mb-1",3,"click",4,"ngIf"],["custodydefinitiontemplate",""],["style","width:1px",4,"ngIf"],["custodydefinitionmodel","ngModel"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal","mb-1",3,"click"],["resourcedefinitiontemplate",""],["resourcedefinitionmodel","ngModel"],["class","text-wrap",4,"ngIf"],[1,"text-wrap"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,p1,2,1,"ng-template",null,1,o.Sc),o.Rc(4,D5,66,43,"ng-template",null,2,o.Sc),o.Rc(6,S5,16,14,"ng-template",null,3,o.Sc),o.Rc(8,r6,61,38,"ng-template",null,4,o.Sc),o.Rc(10,a6,1,1,"ng-template",null,5,o.Sc),o.Rc(12,u6,2,3,"ng-template",null,6,o.Sc),o.Rc(14,d6,2,3,"ng-template",null,7,o.Sc),o.Rc(16,b6,2,3,"ng-template",null,8,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5);o.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"LineDefinitions"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.vc(12,f6))("isInactive",t.isInactive)}},directives:[j.a,K.v,K.x,K.y,x.u,K.w,K.A,ee.b,te.c,te.u,te.k,te.n,x.B,te.v,te.p,te.x,W.f,x.t,W.b,W.d,W.e,W.c,hM,bV,te.q,$s,Ba,In,Kx,r_,tF],pipes:[Q.d,tm],encapsulation:2}),e})();function g6(e,t){if(1&e&&(o.Vb(0,"div",5),o.Vb(1,"span",6),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",7),o.Vb(4,"div",8),o.Qb(5,"t-auto-cell",9),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("LineDefinition",e,"TitlePlural")),o.Bb(3),o.sc("entity",n.c[e])}}function p6(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"LineDefinition"),"\n")}function h6(e,t){if(1&e&&(o.Vb(0,"span",10),o.Qb(1,"t-auto-cell",11),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function v6(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SavedByMe")," ")}const I6=function(){return[]},y6=function(e){return{template:e,expression:"SavedById eq me"}},w6=function(e){return[e]},C6=function(e){return{SavedBy:e}};let M6=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.expand=""}get c(){return this.ws.LineDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-line-definitions-master"]],features:[o.yb],decls:10,vars:19,consts:[["collection","LineDefinition","selectDefault","Code","selectForTiles","Code,TitlePlural","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","LineDefinition","path","Code",3,"entity"],[1,"text-truncate"],["collection","LineDefinition",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,g6,6,2,"ng-template",null,1,o.Sc),o.Rc(4,p6,2,3,"ng-template",null,2,o.Sc),o.Rc(6,h6,2,1,"ng-template",null,3,o.Sc),o.Rc(8,v6,2,3,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"LineDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(12,I6))("filterDefinition",o.wc(17,C6,o.wc(15,w6,o.wc(13,y6,c))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function V6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-line-definitions-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function T6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-line-definitions-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let E6=(()=>{class e extends As{}return e.\u0275fac=function(t){return x6(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-line-definitions-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","LineDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,V6,2,3,"ng-template",null,1,o.Sc),o.Rc(3,T6,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,m6,M6],encapsulation:2}),e})();const x6=o.Xb(E6),U6=["lineDefinitionModal"];function R6(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function D6(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function B6(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}function S6(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"TitleSingular",n.ws)||o.nc(2,1,"Untitled"))}}function k6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",68),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleDefinition()})),o.Vb(1,"div",69),o.Qb(2,"fa-icon",70),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Definition"))}}function O6(e,t){1&e&&o.Qb(0,"fa-icon",71)}function _6(e,t){1&e&&o.Rb(0)}const L6=function(){return{updateOn:"blur"}},A6=function(e,t){return{control:e,serverErrors:t}};function F6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",72),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",73,74),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Code=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Code")})),o.Ub(),o.Rc(6,_6,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Code)),o.Bb(2),o.Uc(o.nc(3,7,"Code")),o.Bb(2),o.sc("ngModel",t.Code)("ngModelOptions",o.vc(9,L6)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,A6,e,null==t.serverErrors?null:t.serverErrors.Code))}}function P6(e,t){1&e&&o.Rb(0)}function N6(e,t){1&e&&o.Rb(0)}function j6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",75),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",76,77),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular2")})),o.Ub(),o.Rc(6,N6,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular2)("ngModelOptions",o.vc(9,L6)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,A6,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function W6(e,t){1&e&&o.Rb(0)}function $6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",78),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",79,80),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular3")})),o.Ub(),o.Rc(6,W6,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular3)("ngModelOptions",o.vc(9,L6)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,A6,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function q6(e,t){1&e&&o.Rb(0)}function Q6(e,t){1&e&&o.Rb(0)}function H6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",81),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",82,83),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural2")})),o.Ub(),o.Rc(6,Q6,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural2)("ngModelOptions",o.vc(9,L6)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,A6,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function G6(e,t){1&e&&o.Rb(0)}function z6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",84),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",85,86),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural3")})),o.Ub(),o.Rc(6,G6,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural3)("ngModelOptions",o.vc(9,L6)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,A6,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function J6(e,t){1&e&&o.Rb(0)}function K6(e,t){1&e&&o.Rb(0)}function Y6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",87),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"textarea",88,89),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Description2")})),o.Ub(),o.Rc(6,K6,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description2)),o.Bb(2),o.Uc(o.nc(3,7,"Description")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.Description2)("ngModelOptions",o.vc(9,L6)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,A6,e,null==t.serverErrors?null:t.serverErrors.Description2))}}function X6(e,t){1&e&&o.Rb(0)}function Z6(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",90),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"textarea",91,92),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Description3")})),o.Ub(),o.Rc(6,X6,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description3)),o.Bb(2),o.Uc(o.nc(3,7,"Description")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.Description3)("ngModelOptions",o.vc(9,L6)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,A6,e,null==t.serverErrors?null:t.serverErrors.Description3))}}function e7(e,t){1&e&&o.Qb(0,"fa-icon",71)}function t7(e,t){if(1&e&&(o.Vb(0,"option",93),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function n7(e,t){1&e&&o.Rb(0)}function i7(e,t){1&e&&o.Qb(0,"fa-icon",71)}function o7(e,t){1&e&&(o.Vb(0,"div",106),o.Tc(1," \u200c "),o.Ub())}function c7(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",100),o.Vb(1,"div",101),o.Rc(2,i7,1,0,"fa-icon",18),o.Vb(3,"span",102),o.Tc(4),o.Ub(),o.Vb(5,"button",95),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(3).model;return o.lc().onConfigureLineDefinition(n,i)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",103),o.Ub(),o.Tc(8," \xa0 "),o.Vb(9,"button",95),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(3).model;return o.lc().onDeleteLineDefinition(n,i)})),o.mc(10,"translate"),o.Qb(11,"fa-icon",104),o.Ub(),o.Ub(),o.Rc(12,o7,2,0,"div",105),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(4);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(2),o.Vc(" ",n.ws.getMultilingualValue("LineDefinition",e.LineDefinitionId,"TitlePlural")," "),o.Bb(1),o.sc("title",o.nc(6,4,"Configure")),o.Bb(4),o.sc("title",o.nc(10,6,"Delete"))}}function r7(e,t){if(1&e&&(o.Vb(0,"span",107),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e," ")}}function s7(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",94),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Tc(4,"\xa0 "),o.Vb(5,"button",95),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onCreateLineDefinition(t)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",96),o.Ub(),o.Vb(8,"div",97),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc(2).model;return o.lc().rowDrop(t,n.LineDefinitions)})),o.Rc(9,c7,13,8,"div",98),o.Ub(),o.Rc(10,r7,2,1,"span",99),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(2),o.Uc(o.nc(3,4,"DocumentDefinition_LineDefinitions")),o.Bb(3),o.sc("title",o.nc(6,6,"Create")),o.Bb(4),o.sc("ngForOf",e.LineDefinitions),o.Bb(1),o.sc("ngForOf",null==e.serverErrors?null:e.serverErrors.LineDefinitions)}}function l7(e,t){1&e&&o.Rb(0)}function a7(e,t){1&e&&o.Rb(0)}const u7=function(){return{prop:"PostingDate",propLower:"postingdate",fieldName:"Document_PostingDate"}};function d7(e,t){if(1&e&&(o.Tb(0),o.Rc(1,a7,1,0,"ng-container",25),o.Sb()),2&e){o.lc();const e=o.Fc(95);o.Bb(1),o.sc("ngTemplateOutlet",e)("ngTemplateOutletContext",o.vc(2,u7))}}function b7(e,t){1&e&&o.Rb(0)}function f7(e,t){1&e&&o.Rb(0)}const m7=function(){return{prop:"Memo",propLower:"memo",fieldName:"Memo"}};function g7(e,t){if(1&e&&(o.Tb(0),o.Rc(1,f7,1,0,"ng-container",25),o.Sb()),2&e){o.lc();const e=o.Fc(95);o.Bb(1),o.sc("ngTemplateOutlet",e)("ngTemplateOutletContext",o.vc(2,m7))}}function p7(e,t){1&e&&o.Rb(0)}function h7(e,t){1&e&&o.Rb(0)}function v7(e,t){if(1&e&&(o.Vb(0,"option",93),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function I7(e,t){1&e&&o.Rb(0)}const y7=function(e){return{0:e}};function w7(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",108),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",109,110),o.hc("ngModelChange",(function(n){o.Ic(e);const i=t.prop;return o.lc(2).model[i+"Visibility"]=n}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Rc(7,v7,2,2,"option",35),o.Ub(),o.Rc(8,I7,1,0,"ng-container",25),o.Ub()}if(2&e){const e=t.prop,n=t.propLower,i=t.fieldName,c=o.Fc(6),r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(c,s.serverErrors(r,e+"Visibility"))),o.Bb(1),o.uc("for","",n,"visibility"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Visibility",o.wc(14,y7,o.nc(4,12,i||"Entity_"+e)))),o.Bb(3),o.uc("id","",n,"visibility"),o.sc("ngModel",r[e+"Visibility"]),o.Bb(2),o.sc("ngForOf",s.visibilityChoices),o.Bb(1),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(16,A6,c,s.serverErrors(r,e+"Visibility")))}}function C7(e,t){1&e&&o.Qb(0,"fa-icon",71)}function M7(e,t){if(1&e&&(o.Vb(0,"option",93),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function V7(e,t){1&e&&o.Rb(0)}function T7(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",111),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(2).model;return o.lc().onIconClick(i,n)})),o.Qb(1,"fa-icon",112),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2).model;o.Gb("t-highlighted",e.value===n.MainMenuIcon),o.sc("title",e.value),o.Bb(1),o.sc("icon",e.value)}}function E7(e,t){1&e&&o.Rb(0)}function x7(e,t){1&e&&o.Rb(0)}function U7(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",113),o.Vb(1,"div",114),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeHidden(t)})),o.Vb(2,"span",115),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"div",114),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeVisible(t)})),o.Vb(6,"span",115),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Ub(),o.Vb(9,"div",114),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeArchived(t)})),o.Vb(10,"span",115),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(1),o.Gb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),o.Bb(2),o.Uc(o.nc(4,15,"Definition_State_Hidden")),o.Bb(2),o.Gb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),o.Bb(2),o.Uc(o.nc(8,17,"Definition_State_Visible")),o.Bb(2),o.Gb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),o.Bb(2),o.Uc(o.nc(12,19,"Definition_State_Archived"))}}const R7=function(){return{prop:"Clearance",propLower:"clearance",fieldName:"Document_Clearance"}},D7=function(){return{prop:"Center",propLower:"center",fieldName:"Document_Center"}},B7=function(e){return{control:null,serverErrors:e}};function S7(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",9),o.Rc(1,k6,6,4,"div",10),o.Vb(2,"div",11),o.Vb(3,"div",12),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleDefinition()})),o.Vb(4,"span"),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Vb(7,"div",13),o.Qb(8,"fa-icon",14),o.Ub(),o.Ub(),o.Vb(9,"div",15),o.Vb(10,"div",16),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("General")})),o.Tc(11," \xa0 "),o.Qb(12,"fa-icon",17),o.Tc(13),o.mc(14,"translate"),o.Rc(15,O6,1,0,"fa-icon",18),o.Ub(),o.Vb(16,"div",19),o.Rc(17,F6,7,13,"div",20),o.Vb(18,"div",21),o.Vb(19,"label",22),o.Tc(20),o.mc(21,"translate"),o.Ub(),o.Vb(22,"input",23,24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitleSingular=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitleSingular")})),o.Ub(),o.Rc(24,P6,1,0,"ng-container",25),o.Ub(),o.Rc(25,j6,7,13,"div",20),o.Rc(26,$6,7,13,"div",20),o.Vb(27,"div",21),o.Vb(28,"label",26),o.Tc(29),o.mc(30,"translate"),o.Ub(),o.Vb(31,"input",27,28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitlePlural=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitlePlural")})),o.Ub(),o.Rc(33,q6,1,0,"ng-container",25),o.Ub(),o.Rc(34,H6,7,13,"div",20),o.Rc(35,z6,7,13,"div",20),o.Vb(36,"div",21),o.Vb(37,"label",29),o.Tc(38),o.mc(39,"translate"),o.Ub(),o.Vb(40,"textarea",30,31),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Description=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Description")})),o.Ub(),o.Rc(42,J6,1,0,"ng-container",25),o.Ub(),o.Rc(43,Y6,7,13,"div",20),o.Rc(44,Z6,7,13,"div",20),o.Ub(),o.Vb(45,"div",16),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Definition")})),o.Tc(46," \xa0 "),o.Qb(47,"fa-icon",17),o.Tc(48),o.mc(49,"translate"),o.Rc(50,e7,1,0,"fa-icon",18),o.Ub(),o.Vb(51,"div",19),o.Vb(52,"div",21),o.Vb(53,"label",32),o.Tc(54),o.mc(55,"translate"),o.Ub(),o.Vb(56,"select",33,34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.DocumentType=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Rc(58,t7,2,2,"option",35),o.Ub(),o.Rc(59,n7,1,0,"ng-container",25),o.Ub(),o.Rc(60,s7,11,8,"div",36),o.Rc(61,l7,1,0,"ng-container",25),o.Rc(62,d7,2,3,"ng-container",37),o.Rc(63,b7,1,0,"ng-container",25),o.Rc(64,g7,2,3,"ng-container",37),o.Vb(65,"div",21),o.Vb(66,"label",38),o.Tc(67),o.mc(68,"translate"),o.Ub(),o.Vb(69,"input",39,40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Prefix=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(71,p7,1,0,"ng-container",25),o.Ub(),o.Vb(72,"div",21),o.Vb(73,"label",41),o.Tc(74),o.mc(75,"translate"),o.Ub(),o.Vb(76,"input",42,43),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.CodeWidth=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(78,h7,1,0,"ng-container",25),o.Ub(),o.Vb(79,"div",44),o.Vb(80,"input",45),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.IsOriginalDocument=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(81,"label",46),o.Tc(82),o.mc(83,"translate"),o.Ub(),o.Ub(),o.Vb(84,"div",44),o.Vb(85,"input",47),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.HasBookkeeping=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(86,"label",48),o.Tc(87),o.mc(88,"translate"),o.Ub(),o.Ub(),o.Vb(89,"div",44),o.Vb(90,"input",49),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.HasAttachments=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(91,"label",50),o.Tc(92),o.mc(93,"translate"),o.Ub(),o.Ub(),o.Rc(94,w7,9,19,"ng-template",null,51,o.Sc),o.Ub(),o.Vb(96,"div",16),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Menu")})),o.Tc(97," \xa0 "),o.Qb(98,"fa-icon",17),o.Tc(99),o.mc(100,"translate"),o.Rc(101,C7,1,0,"fa-icon",18),o.Ub(),o.Vb(102,"div",19),o.Vb(103,"div",21),o.Vb(104,"label",52),o.Tc(105),o.mc(106,"translate"),o.Ub(),o.Vb(107,"select",53,54),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSection")})),o.Qb(109,"option",55),o.Rc(110,M7,2,2,"option",35),o.Ub(),o.Rc(111,V7,1,0,"ng-container",25),o.Ub(),o.Vb(112,"div",21),o.Vb(113,"label",56),o.Tc(114),o.mc(115,"translate"),o.Ub(),o.Vb(116,"div",57),o.Rc(117,T7,2,4,"div",58),o.Ub(),o.Rc(118,E7,1,0,"ng-container",25),o.Ub(),o.Vb(119,"div",21),o.Vb(120,"label",59),o.Tc(121),o.mc(122,"translate"),o.Ub(),o.Vb(123,"input",60,61),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSortKey=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSortKey")})),o.Ub(),o.Rc(125,x7,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(126,"div",62),o.Vb(127,"div",63),o.Vb(128,"div",64),o.Vb(129,"span"),o.Tc(130),o.mc(131,"translate"),o.Ub(),o.Ub(),o.Rc(132,U7,13,21,"div",65),o.Ub(),o.Vb(133,"div",66),o.Qb(134,"t-documents-details",67),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(23),t=o.Fc(32),n=o.Fc(41),i=o.Fc(57),c=o.Fc(70),r=o.Fc(77),s=o.Fc(95),l=o.Fc(108),a=o.Fc(124),u=o.lc(),d=u.isEdit,b=u.model,f=o.lc(),m=o.Fc(13);o.Bb(1),o.sc("ngIf",d&&f.collapseDefinition),o.Bb(1),o.Gb("d-flex",d&&!f.collapseDefinition)("d-none",!d||f.collapseDefinition),o.Bb(3),o.Uc(o.nc(6,104,"Definition")),o.Bb(3),o.sc("flip",f.flipIcon(!1)),o.Bb(4),o.sc("flip",f.flipIcon(f.showSection("General")))("rotate",f.rotateIcon(f.showSection("General"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(14,106,"General")," "),o.Bb(2),o.sc("ngIf",f.sectionErrors("General",b)),o.Bb(1),o.Gb("d-none",!f.showSection("General")),o.Bb(1),o.sc("ngIf",!f.isSystem(b)),o.Bb(1),o.Gb("is-invalid",f.invalid(e,null==b.serverErrors?null:b.serverErrors.TitleSingular)),o.Bb(2),o.Uc(o.nc(21,108,"TitleSingular")+f.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",b.TitleSingular)("ngModelOptions",o.vc(138,L6)),o.Bb(2),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.xc(139,A6,e,null==b.serverErrors?null:b.serverErrors.TitleSingular)),o.Bb(1),o.sc("ngIf",null==f.ws.settings?null:f.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==f.ws.settings?null:f.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",f.invalid(t,null==b.serverErrors?null:b.serverErrors.TitlePlural)),o.Bb(2),o.Uc(o.nc(30,110,"TitlePlural")+f.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",b.TitlePlural)("ngModelOptions",o.vc(142,L6)),o.Bb(2),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.xc(143,A6,t,null==b.serverErrors?null:b.serverErrors.TitlePlural)),o.Bb(1),o.sc("ngIf",null==f.ws.settings?null:f.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==f.ws.settings?null:f.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",f.invalid(n,null==b.serverErrors?null:b.serverErrors.Description)),o.Bb(2),o.Uc(o.nc(39,112,"Description")+f.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",b.Description)("ngModelOptions",o.vc(146,L6)),o.Bb(2),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.xc(147,A6,n,null==b.serverErrors?null:b.serverErrors.Description)),o.Bb(1),o.sc("ngIf",null==f.ws.settings?null:f.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==f.ws.settings?null:f.ws.settings.TernaryLanguageId),o.Bb(3),o.sc("flip",f.flipIcon(f.showSection("Definition")))("rotate",f.rotateIcon(f.showSection("Definition"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(49,114,"Definition")," "),o.Bb(2),o.sc("ngIf",f.sectionErrors("Definition",b)),o.Bb(1),o.Gb("d-none",!f.showSection("Definition")),o.Bb(1),o.Gb("is-invalid",f.invalid(i,null==b||null==b.serverErrors?null:b.serverErrors.DocumentType)),o.Bb(2),o.Uc(o.nc(55,116,"DocumentDefinition_DocumentType")),o.Bb(2),o.sc("ngModel",b.DocumentType),o.Bb(2),o.sc("ngForOf",f.documentTypeChoices),o.Bb(1),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.xc(150,A6,i,null==b||null==b.serverErrors?null:b.serverErrors.DocumentType)),o.Bb(1),o.sc("ngIf",!f.isSystem(b)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(153,R7)),o.Bb(1),o.sc("ngIf",!f.isSystem(b)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(154,D7)),o.Bb(1),o.sc("ngIf",!f.isSystem(b)),o.Bb(1),o.Gb("is-invalid",f.invalid(c,null==b.serverErrors?null:b.serverErrors.Prefix)),o.Bb(2),o.Uc(o.nc(68,118,"DocumentDefinition_Prefix")),o.Bb(2),o.sc("ngModel",b.Prefix)("ngModelOptions",o.vc(155,L6)),o.Bb(2),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.xc(156,A6,c,null==b.serverErrors?null:b.serverErrors.Prefix)),o.Bb(1),o.Gb("is-invalid",f.invalid(r,null==b.serverErrors?null:b.serverErrors.CodeWidth)),o.Bb(2),o.Uc(o.nc(75,120,"DocumentDefinition_CodeWidth")),o.Bb(2),o.sc("ngModel",b.CodeWidth)("ngModelOptions",o.vc(159,L6)),o.Bb(2),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.xc(160,A6,r,null==b.serverErrors?null:b.serverErrors.CodeWidth)),o.Bb(2),o.sc("ngModel",b.IsOriginalDocument),o.Bb(2),o.Uc(o.nc(83,122,"DocumentDefinition_IsOriginalDocument")),o.Bb(3),o.sc("ngModel",b.HasBookkeeping),o.Bb(2),o.Uc(o.nc(88,124,"DocumentDefinition_HasBookkeeping")),o.Bb(3),o.sc("ngModel",b.HasAttachments),o.Bb(2),o.Uc(o.nc(93,126,"Definition_HasAttachments")),o.Bb(6),o.sc("flip",f.flipIcon(f.showSection("Menu")))("rotate",f.rotateIcon(f.showSection("Menu"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(100,128,"Menu")," "),o.Bb(2),o.sc("ngIf",f.sectionErrors("Menu",b)),o.Bb(1),o.Gb("d-none",!f.showSection("Menu")),o.Bb(3),o.Uc(o.nc(106,130,"MainMenuSection")),o.Bb(2),o.sc("ngModel",b.MainMenuSection),o.Bb(3),o.sc("ngForOf",f.allMainMenuSections),o.Bb(1),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.xc(163,A6,l,null==b.serverErrors?null:b.serverErrors.MainMenuSection)),o.Bb(3),o.Uc(o.nc(115,132,"MainMenuIcon")),o.Bb(3),o.sc("ngForOf",f.allMainMenuIcons),o.Bb(1),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.wc(166,B7,null==b.serverErrors?null:b.serverErrors.MainMenuIcon)),o.Bb(3),o.Uc(o.nc(122,134,"MainMenuSortKey")),o.Bb(2),o.sc("ngModel",b.MainMenuSortKey)("ngModelOptions",o.vc(168,L6)),o.Bb(2),o.sc("ngTemplateOutlet",m)("ngTemplateOutletContext",o.xc(169,A6,a,null==b.serverErrors?null:b.serverErrors.MainMenuSortKey)),o.Bb(5),o.Uc(o.nc(131,136,"Preview")),o.Bb(2),o.sc("ngIf",!d),o.Bb(2),o.sc("previewDefinition",f.getForClient(b))}}function k7(e,t){if(1&e&&o.Rc(0,S7,135,172,"div",8),2&e){const e=t.isEdit,n=o.lc();o.sc("ngIf",n.watchIsEdit(e))}}function O7(e,t){if(1&e&&(o.Vb(0,"span",117),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function _7(e,t){if(1&e&&(o.Tb(0),o.Rc(1,O7,2,1,"span",116),o.Sb()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(1),o.sc("ngForOf",i.errors(t,n))}}function L7(e,t){if(1&e&&o.Rc(0,_7,2,1,"ng-container",37),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}function A7(e,t){1&e&&o.Rb(0)}function F7(e,t){1&e&&o.Rb(0)}function P7(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",118),o.Vb(1,"h5",119),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",120),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",121),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",122),o.Vb(8,"div",123),o.Vb(9,"div",124),o.Vb(10,"label",94),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"t-line-definitions-picker",125,126),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().lineDefinitionToEdit.LineDefinitionId=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(15,A7,1,0,"ng-container",25),o.Ub(),o.Vb(16,"div",124),o.Vb(17,"label",127),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"select",128,129),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().lineDefinitionToEdit.IsVisibleByDefault=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Vb(22,"option",130),o.Tc(23),o.mc(24,"translate"),o.Ub(),o.Vb(25,"option",131),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Ub(),o.Rc(28,F7,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Ub(),o.Vb(29,"div",132),o.Vb(30,"button",133),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(31,"fa-icon",134),o.Tc(32),o.mc(33,"translate"),o.Ub(),o.Vb(34,"button",135),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(35,"fa-icon",104),o.Tc(36),o.mc(37,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(14),t=o.Fc(21),n=o.lc(),i=o.Fc(13);o.Bb(2),o.Vc(" ",o.nc(3,18,"Configure")," "),o.Bb(7),o.Gb("is-invalid",n.invalid(e,null==n.lineDefinitionToEdit.serverErrors?null:n.lineDefinitionToEdit.serverErrors.LineDefinitionId)),o.Bb(2),o.Uc(o.nc(12,20,"DocumentDefinitionLineDefinition_LineDefinition")),o.Bb(2),o.sc("ngModel",n.lineDefinitionToEdit.LineDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(32,A6,e,null==n.lineDefinitionToEdit.serverErrors?null:n.lineDefinitionToEdit.serverErrors.LineDefinitionId)),o.Bb(1),o.Gb("is-invalid",n.invalid(t,null==n.lineDefinitionToEdit.serverErrors?null:n.lineDefinitionToEdit.serverErrors.IsVisibleByDefault)),o.Bb(2),o.Uc(o.nc(19,22,"DocumentDefinitionLineDefinition_IsVisibleByDefault")),o.Bb(2),o.sc("ngModel",n.lineDefinitionToEdit.IsVisibleByDefault),o.Bb(3),o.Uc(o.nc(24,24,"Yes")),o.Bb(3),o.Uc(o.nc(27,26,"No")),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(35,A6,t,null==n.lineDefinitionToEdit.serverErrors?null:n.lineDefinitionToEdit.serverErrors.IsVisibleByDefault)),o.Bb(2),o.sc("disabled",!n.canApplyLineDefinition),o.Bb(2),o.Vc(" \xa0",o.nc(33,28,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(37,30,"Cancel")," ")}}const N7=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},j7=function(e,t,n){return[e,t,n]};let W7=(()=>{class e extends gn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.documentDefinitionsApi=this.api.documentDefinitionsApi(this.notifyDestruct$),this.expand="LineDefinitions.LineDefinition",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText),e.PostingDateVisibility="Required",e.CenterVisibility="Required",e.ClearanceVisibility="None",e.MemoVisibility="Optional",e.IsOriginalDocument=!1,e.HasAttachments=!0,e.HasBookkeeping=!0,e.CodeWidth=4,e.DocumentType=2,e.LineDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.LineDefinitions&&t.LineDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this.isSystem=e=>!!e&&e.Id===this.ws.definitions.ManualJournalVouchersDefinitionId,this._sections={General:!1,Definition:!0,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.documentDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.documentDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.documentDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("document-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.documentDefinitionsApi=this.api.documentDefinitionsApi(this.notifyDestruct$)}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(fI.b)(e.serverErrors[t]))}sectionErrors(e,t){return"General"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.Code)||Object(fI.b)(t.serverErrors.Description)||Object(fI.b)(t.serverErrors.Description2)||Object(fI.b)(t.serverErrors.Description3)||Object(fI.b)(t.serverErrors.TitleSingular)||Object(fI.b)(t.serverErrors.TitleSingular2)||Object(fI.b)(t.serverErrors.TitleSingular3)||Object(fI.b)(t.serverErrors.TitlePlural)||Object(fI.b)(t.serverErrors.TitlePlural2)||Object(fI.b)(t.serverErrors.TitlePlural3)):"Definition"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.DocumentType)||Object(fI.b)(t.serverErrors.LineDefinitions)||Object(fI.b)(t.serverErrors.ClearanceVisibility)||Object(fI.b)(t.serverErrors.PostingDateVisibility)||Object(fI.b)(t.serverErrors.CenterVisibility)||Object(fI.b)(t.serverErrors.MemoVisibility)||Object(fI.b)(t.serverErrors.Prefix)||Object(fI.b)(t.serverErrors.CodeWidth)||Object(fI.b)(t.serverErrors.IsOriginalDocument)||Object(fI.b)(t.serverErrors.HasBookkeeping)||Object(fI.b)(t.serverErrors.HasAttachments))||!!t.LineDefinitions&&t.LineDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(fI.b)(t.serverErrors.MainMenuIcon)||Object(fI.b)(t.serverErrors.MainMenuSection)||Object(fI.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}serverErrors(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){var t,n,i,o,c,r,s,l,a,u,d,b,f,m,g,p,h,v,I,y,w,C,M,V,T,E,x,U;if(!e)return null;const R=this.ws.definitions;if(this._currentModel!==e||this._currentModelModified||R!==this._getForClientDefinitions){this._currentModelModified=!1,this._currentModel=e,this._getForClientDefinitions=R;const D=Object.assign({},e);D.CodeWidth||(D.CodeWidth=4),"None"===D.PostingDateVisibility&&delete D.PostingDateVisibility,"None"===D.CenterVisibility&&delete D.CenterVisibility,"None"===D.MemoVisibility&&delete D.MemoVisibility,"None"===D.ClearanceVisibility&&delete D.ClearanceVisibility,D.CanReachState1=!1,D.CanReachState2=!1,D.CanReachState3=!1,D.HasWorkflow=!1,D.CustodianDefinitionIds=[],D.CustodyDefinitionIds=[],D.ParticipantDefinitionIds=[],D.ResourceDefinitionIds=[];const B=D.LineDefinitions.map(e=>R.Lines[e.LineDefinitionId]).filter(e=>!!e&&!!e.Columns);let S={},k={},O={},_={},L={},A={},F={},P={},N={"CenterType eq 'BusinessUnit'":!0},j={},W={};for(const e of B)for(const R of e.Columns.filter(e=>2===e.InheritsFromHeader))if("PostingDate"===R.ColumnName)D.PostingDateIsCommonVisibility=!0,D.PostingDateVisibility=D.PostingDateVisibility||"Optional",D.PostingDateLabel||(D.PostingDateLabel=R.Label,D.PostingDateLabel2=R.Label2,D.PostingDateLabel3=R.Label3),R.RequiredState>(null!=(t=D.PostingDateRequiredState)?t:0)&&(D.PostingDateRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(n=D.PostingDateReadOnlyState)?n:0)&&(D.PostingDateReadOnlyState=R.ReadOnlyState);else if("CenterId"===R.ColumnName)D.CenterIsCommonVisibility=!0,D.CenterVisibility=D.CenterVisibility||"Optional",D.CenterLabel||(D.CenterLabel=R.Label,D.CenterLabel2=R.Label2,D.CenterLabel3=R.Label3),R.RequiredState>(null!=(i=D.CenterRequiredState)?i:0)&&(D.CenterRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(o=D.CenterReadOnlyState)?o:0)&&(D.CenterReadOnlyState=R.ReadOnlyState),R.Filter?null!=N&&(N[R.Filter]=!0):N=null;else if("Memo"===R.ColumnName)D.MemoIsCommonVisibility=!0,D.MemoVisibility=D.MemoVisibility||"Optional",D.MemoLabel||(D.MemoLabel=R.Label,D.MemoLabel2=R.Label2,D.MemoLabel3=R.Label3),R.RequiredState>(null!=(c=D.MemoRequiredState)?c:0)&&(D.MemoRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(r=D.MemoReadOnlyState)?r:0)&&(D.MemoReadOnlyState=R.ReadOnlyState);else if("CurrencyId"===R.ColumnName)D.CurrencyVisibility=!0,D.CurrencyLabel||(D.CurrencyLabel=R.Label,D.CurrencyLabel2=R.Label2,D.CurrencyLabel3=R.Label3),R.RequiredState>(null!=(s=D.CurrencyRequiredState)?s:0)&&(D.CurrencyRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(l=D.CurrencyReadOnlyState)?l:0)&&(D.CurrencyReadOnlyState=R.ReadOnlyState),R.Filter?null!=j&&(j[R.Filter]=!0):j=null;else if("CustodianId"===R.ColumnName){if(D.CustodianVisibility=!0,D.CustodianLabel||(D.CustodianLabel=R.Label,D.CustodianLabel2=R.Label2,D.CustodianLabel3=R.Label3),R.RequiredState>(null!=(a=D.CustodianRequiredState)?a:0)&&(D.CustodianRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(u=D.CustodianReadOnlyState)?u:0)&&(D.CustodianReadOnlyState=R.ReadOnlyState),R.EntryIndex<e.Entries.length){const t=e.Entries[R.EntryIndex];if(t.CustodianDefinitionIds&&0!==t.CustodianDefinitionIds.length){if(S)for(const e of t.CustodianDefinitionIds)S[e]=!0}else S=null}R.Filter?L&&(L[R.Filter]=!0):L=null}else if("CustodyId"===R.ColumnName){if(D.CustodyVisibility=!0,D.CustodyLabel||(D.CustodyLabel=R.Label,D.CustodyLabel2=R.Label2,D.CustodyLabel3=R.Label3),R.RequiredState>(null!=(d=D.CustodyRequiredState)?d:0)&&(D.CustodyRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(b=D.CustodyReadOnlyState)?b:0)&&(D.CustodyReadOnlyState=R.ReadOnlyState),R.EntryIndex<e.Entries.length){const t=e.Entries[R.EntryIndex];if(t.CustodyDefinitionIds&&0!==t.CustodyDefinitionIds.length){if(k)for(const e of t.CustodyDefinitionIds)k[e]=!0}else k=null}R.Filter?A&&(A[R.Filter]=!0):A=null}else if("ParticipantId"===R.ColumnName){if(D.ParticipantVisibility=!0,D.ParticipantLabel||(D.ParticipantLabel=R.Label,D.ParticipantLabel2=R.Label2,D.ParticipantLabel3=R.Label3),R.RequiredState>(null!=(f=D.ParticipantRequiredState)?f:0)&&(D.ParticipantRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(m=D.ParticipantReadOnlyState)?m:0)&&(D.ParticipantReadOnlyState=R.ReadOnlyState),R.EntryIndex<e.Entries.length){const t=e.Entries[R.EntryIndex];if(t.ParticipantDefinitionIds&&0!==t.ParticipantDefinitionIds.length){if(O)for(const e of t.ParticipantDefinitionIds)O[e]=!0}else O=null}R.Filter?F&&(F[R.Filter]=!0):F=null}else if("ResourceId"===R.ColumnName){if(D.ResourceVisibility=!0,D.ResourceLabel||(D.ResourceLabel=R.Label,D.ResourceLabel2=R.Label2,D.ResourceLabel3=R.Label3),R.RequiredState>(null!=(g=D.ResourceRequiredState)?g:0)&&(D.ResourceRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(p=D.ResourceReadOnlyState)?p:0)&&(D.ResourceReadOnlyState=R.ReadOnlyState),R.EntryIndex<e.Entries.length){const t=e.Entries[R.EntryIndex];if(t.ResourceDefinitionIds&&0!==t.ResourceDefinitionIds.length){if(_)for(const e of t.ResourceDefinitionIds)_[e]=!0}else _=null}R.Filter?P&&(P[R.Filter]=!0):P=null}else"Quantity"===R.ColumnName?(D.QuantityVisibility=!0,D.QuantityLabel||(D.QuantityLabel=R.Label,D.QuantityLabel2=R.Label2,D.QuantityLabel3=R.Label3),R.RequiredState>(null!=(h=D.QuantityRequiredState)?h:0)&&(D.QuantityRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(v=D.QuantityReadOnlyState)?v:0)&&(D.QuantityReadOnlyState=R.ReadOnlyState)):"UnitId"===R.ColumnName?(D.UnitVisibility=!0,D.UnitLabel||(D.UnitLabel=R.Label,D.UnitLabel2=R.Label2,D.UnitLabel3=R.Label3),R.RequiredState>(null!=(I=D.UnitRequiredState)?I:0)&&(D.UnitRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(y=D.UnitReadOnlyState)?y:0)&&(D.UnitReadOnlyState=R.ReadOnlyState),R.Filter?W&&(W[R.Filter]=!0):W=null):"Time1"===R.ColumnName?(D.Time1Visibility=!0,D.Time1Label||(D.Time1Label=R.Label,D.Time1Label2=R.Label2,D.Time1Label3=R.Label3),R.RequiredState>(null!=(w=D.Time1RequiredState)?w:0)&&(D.Time1RequiredState=R.RequiredState),R.ReadOnlyState>(null!=(C=D.Time1ReadOnlyState)?C:0)&&(D.Time1ReadOnlyState=R.ReadOnlyState)):"Time2"===R.ColumnName?(D.Time2Visibility=!0,D.Time2Label||(D.Time2Label=R.Label,D.Time2Label2=R.Label2,D.Time2Label3=R.Label3),R.RequiredState>(null!=(M=D.Time2RequiredState)?M:0)&&(D.Time2RequiredState=R.RequiredState),R.ReadOnlyState>(null!=(V=D.Time2ReadOnlyState)?V:0)&&(D.Time2ReadOnlyState=R.ReadOnlyState)):"ExternalReference"===R.ColumnName?(D.ExternalReferenceVisibility=!0,D.ExternalReferenceLabel||(D.ExternalReferenceLabel=R.Label,D.ExternalReferenceLabel2=R.Label2,D.ExternalReferenceLabel3=R.Label3),R.RequiredState>(null!=(T=D.ExternalReferenceRequiredState)?T:0)&&(D.ExternalReferenceRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(E=D.ExternalReferenceReadOnlyState)?E:0)&&(D.ExternalReferenceReadOnlyState=R.ReadOnlyState)):"InternalReference"===R.ColumnName&&(D.InternalReferenceVisibility=!0,D.InternalReferenceLabel||(D.InternalReferenceLabel=R.Label,D.InternalReferenceLabel2=R.Label2,D.InternalReferenceLabel3=R.Label3),R.RequiredState>(null!=(x=D.InternalReferenceRequiredState)?x:0)&&(D.InternalReferenceRequiredState=R.RequiredState),R.ReadOnlyState>(null!=(U=D.InternalReferenceReadOnlyState)?U:0)&&(D.InternalReferenceReadOnlyState=R.ReadOnlyState));D.CustodianDefinitionIds=Object.keys(null!=S?S:{}).map(e=>+e),D.CustodyDefinitionIds=Object.keys(null!=k?k:{}).map(e=>+e),D.ParticipantDefinitionIds=Object.keys(null!=O?O:{}).map(e=>+e),D.ResourceDefinitionIds=Object.keys(null!=_?_:{}).map(e=>+e),D.CustodianFilter=$7(L),D.CustodyFilter=$7(A),D.ParticipantFilter=$7(F),D.ResourceFilter=$7(P),D.CenterFilter=$7(N),D.CurrencyFilter=$7(j),D.UnitFilter=$7(W),"ManualJournalVoucher"===e.Code&&(D.PostingDateVisibility="Required",D.PostingDateIsCommonVisibility=!1,D.PostingDateLabel=null,D.PostingDateLabel2=null,D.PostingDateLabel3=null,D.CenterIsCommonVisibility=!1,D.CenterLabel=null,D.CenterLabel2=null,D.CenterLabel3=null,D.MemoVisibility="Optional",D.MemoIsCommonVisibility=!1,D.MemoLabel=null,D.MemoLabel2=null,D.MemoLabel3=null,D.CurrencyVisibility=!1,D.CustodianVisibility=!1,D.CustodyVisibility=!1,D.ParticipantVisibility=!1,D.ResourceVisibility=!1,D.QuantityVisibility=!1,D.UnitVisibility=!1,D.Time1Visibility=!1,D.Time2Visibility=!1,D.InternalReferenceVisibility=!1,D.ExternalReferenceVisibility=!1),this._getForClientResult=D}return this._getForClientResult}get visibilityChoices(){return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:()=>this.translate.instant("Visibility_None")},{value:"Optional",name:()=>this.translate.instant("Visibility_Optional")},{value:"Required",name:()=>this.translate.instant("Visibility_Required")}]),this._visibilityChoices}get documentTypeChoices(){const e=Object(l1.a)(this.workspace,this.translate).properties.DocumentType;return Object(wi.c)(e)}get allMainMenuSections(){const e=Object(l1.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(wi.c)(e)}get allMainMenuIcons(){const e=Object(l1.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(wi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}rowDrop(e,t){Object(W.i)(t,e.previousIndex,e.currentIndex)}onInsertRow(e,t){const n=t?t():{};e.push(n)}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateLineDefinition(e){const t={IsVisibleByDefault:!0};this.lineDefinitionToEdit=t,this.modalService.open(this.lineDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&(e.LineDefinitions.push(t),this.onDefinitionChange(e))},e=>{})}onConfigureLineDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.LineDefinitions[e]);this.lineDefinitionToEdit=n,this.modalService.open(this.lineDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.LineDefinitions[e]=n,this.onDefinitionChange(t))},e=>{})}onDeleteLineDefinition(e,t){t.LineDefinitions.splice(e,1),this.onDefinitionChange(t)}get canApplyLineDefinition(){return!!this.lineDefinitionToEdit&&!!this.lineDefinitionToEdit.LineDefinitionId}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-document-definitions-details"]],viewQuery:function(e,t){var n;1&e&&o.Oc(U6,!0),2&e&&o.Ec(n=o.ic())&&(t.lineDefinitionModal=n.first)},features:[o.yb],decls:16,vars:35,consts:[["collection","DocumentDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["lineDefinitionModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],["class","form-group",3,"is-invalid",4,"ngIf"],[1,"form-group"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text","required","",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],["for","documenttype",1,"small"],["id","documenttype",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["documenttypecontrol","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[4,"ngIf"],["for","prefix",1,"small"],["id","prefix","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["prefixmodel","ngModel"],["for","codewidth",1,"small"],["id","codewidth","type","number","min","1","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["codewidthmodel","ngModel"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","isoriginaldocument",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isoriginaldocument",1,"custom-control-label"],["type","checkbox","id","hasbookkeeping",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasbookkeeping",1,"custom-control-label"],["type","checkbox","id","hasattachments",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasattachments",1,"custom-control-label"],["unlabeledProp",""],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],[3,"value"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",2,"height","10rem",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["linedefinitionmodel","ngModel"],["for","isvisiblebydefault",1,"small"],["id","isvisiblebydefault",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["isvisiblebydefaultmodel","ngModel"],["value","true"],["value","false"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,R6,2,3,"ng-template",null,1,o.Sc),o.Rc(4,D6,2,3,"ng-template",null,2,o.Sc),o.Rc(6,B6,2,3,"ng-template",null,3,o.Sc),o.Rc(8,S6,3,3,"ng-template",null,4,o.Sc),o.Rc(10,k7,1,1,"ng-template",null,5,o.Sc),o.Rc(12,L7,1,1,"ng-template",null,6,o.Sc),o.Rc(14,P7,38,38,"ng-template",null,7,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,11,"DocumentDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",r)("actions",o.yc(31,j7,o.Ac(13,N7,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(19,N7,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(25,N7,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)}},directives:[j.a,x.u,ee.b,te.c,te.u,te.k,te.n,x.B,te.v,x.t,te.q,te.a,te.p,te.x,CX,W.f,W.b,W.d,E6],pipes:[Q.d],encapsulation:2}),e})();function $7(e){var t;if(e){const n=Object.keys(e);if(1===n.length)return n[0];if(n.length>1)return null===(t=n.map(e=>`(${e})`))||void 0===t?void 0:t.reduce((e,t)=>`${e} or ${t}`)}return null}function q7(e,t){if(1&e&&(o.Vb(0,"div",11),o.Vb(1,"span",12),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",13),o.Vb(4,"div",14),o.Qb(5,"t-auto-cell",15),o.Ub(),o.Qb(6,"t-auto-cell",16),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("DocumentDefinition",e,"TitleSingular")),o.Bb(3),o.sc("entity",n.c[e]),o.Bb(1),o.sc("entity",n.c[e])}}function Q7(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"DocumentDefinition"),"\n")}function H7(e,t){if(1&e&&(o.Vb(0,"span",17),o.Qb(1,"t-auto-cell",18),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function G7(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SavedByMe")," ")}function z7(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Hidden")," ")}function J7(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Visible")," ")}function K7(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Archived")," ")}function Y7(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function X7(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function Z7(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}const e8=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},t8=function(e,t,n){return[e,t,n]},n8=function(e){return{template:e,expression:"SavedById eq me"}},i8=function(e){return[e]},o8=function(e){return{template:e,expression:"State eq 'Hidden'"}},c8=function(e){return{template:e,expression:"State eq 'Visible'"}},r8=function(e){return{template:e,expression:"State eq 'Archived'"}},s8=function(e,t){return{SavedBy:e,State:t}};let l8=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.documentDefinitionsApi=this.api.documentDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.documentDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("DocumentDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.documentDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("DocumentDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.documentDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("DocumentDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("document-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.documentDefinitionsApi=this.api.documentDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.DocumentDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-document-definitions-master"]],features:[o.yb],decls:22,vars:51,consts:[["collection","DocumentDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","DocumentDefinition","path","Code",3,"entity"],["collection","DocumentDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","DocumentDefinition",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,q7,7,3,"ng-template",null,1,o.Sc),o.Rc(4,Q7,2,3,"ng-template",null,2,o.Sc),o.Rc(6,H7,2,1,"ng-template",null,3,o.Sc),o.Rc(8,G7,2,3,"ng-template",null,4,o.Sc),o.Rc(10,z7,2,3,"ng-template",null,5,o.Sc),o.Rc(12,J7,2,3,"ng-template",null,6,o.Sc),o.Rc(14,K7,2,3,"ng-template",null,7,o.Sc),o.Rc(16,Y7,2,3,"ng-template",null,8,o.Sc),o.Rc(18,X7,2,3,"ng-template",null,9,o.Sc),o.Rc(20,Z7,2,3,"ng-template",null,10,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17),u=o.Fc(19),d=o.Fc(21);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"DocumentDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.yc(30,t8,o.Ac(12,e8,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(18,e8,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(24,e8,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",o.xc(48,s8,o.wc(36,i8,o.wc(34,n8,c)),o.yc(44,t8,o.wc(38,o8,r),o.wc(40,c8,s),o.wc(42,r8,l))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();function a8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-document-definitions-details",4),o.hc("cancel",(function(){return t.modal.close(!1)}))("saved",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)})),o.Ub(),o.Ub()}if(2&e){const e=t.initialText,n=t.idString,i=o.lc();o.Bb(1),o.sc("initialText",e)("idString",n)("additionalSelect",i.additionalSelect)}}function u8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"t-document-definitions-master",5),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",n.showCreate)("filter",e)("additionalSelect",n.additionalSelect)}}let d8=(()=>{class e extends As{}return e.\u0275fac=function(t){return b8(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-document-definitions-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:5,vars:6,consts:[["collection","DocumentDefinition",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["details",""],["master",""],[1,"modal-body"],["mode","popup",3,"initialText","idString","additionalSelect","cancel","saved"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,a8,2,3,"ng-template",null,1,o.Sc),o.Rc(3,u8,2,3,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2),n=o.Fc(4);o.sc("filter",t.filter)("masterTemplate",n)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",t.showCreate?e:null)("additionalSelect",t.additionalSelect)}},directives:[Ls,W7,l8],encapsulation:2}),e})();const b8=o.Xb(d8),f8=["iframe"];function m8(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Name",n.ws))}}function g8(e,t){1&e&&o.Qb(0,"fa-icon",33)}function p8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",29),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleMetadata()})),o.Vb(1,"div",30),o.Qb(2,"fa-icon",31),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Rc(6,g8,1,0,"fa-icon",32),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("flip",t.flipIcon(!1)),o.Bb(2),o.Vc("",o.nc(5,3,"Metadata")," \xa0 "),o.Bb(2),o.sc("ngIf",t.metadataPaneErrors(e))}}function h8(e,t){1&e&&o.Qb(0,"fa-icon",33)}function v8(e,t){1&e&&o.Rb(0)}function I8(e,t){1&e&&o.Rb(0)}const y8=function(){return{updateOn:"blur"}},w8=function(e,t){return{control:e,serverErrors:t}};function C8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",39),o.Vb(1,"label",65),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",66,67),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Name2=t})),o.Ub(),o.Rc(6,I8,1,0,"ng-container",43),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(3).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Name2)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.Name2)("ngModelOptions",o.vc(9,y8)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w8,e,null==t.serverErrors?null:t.serverErrors.Name2))}}function M8(e,t){1&e&&o.Rb(0)}function V8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",39),o.Vb(1,"label",68),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",69,70),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Name3=t})),o.Ub(),o.Rc(6,M8,1,0,"ng-container",43),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(3).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Name3)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.Name3)("ngModelOptions",o.vc(9,y8)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w8,e,null==t.serverErrors?null:t.serverErrors.Name3))}}function T8(e,t){1&e&&o.Rb(0)}function E8(e,t){1&e&&o.Rb(0)}function x8(e,t){1&e&&o.Rb(0)}function U8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",39),o.Vb(1,"label",71),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"textarea",72,73),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Description2=t})),o.Ub(),o.Rc(6,x8,1,0,"ng-container",43),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(3).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description2)),o.Bb(2),o.Uc(o.nc(3,7,"Description")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.Description2)("ngModelOptions",o.vc(9,y8)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w8,e,null==t.serverErrors?null:t.serverErrors.Description2))}}function R8(e,t){1&e&&o.Rb(0)}function D8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",39),o.Vb(1,"label",74),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"textarea",75,76),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Description3=t})),o.Ub(),o.Rc(6,R8,1,0,"ng-container",43),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(3).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Description3)),o.Bb(2),o.Uc(o.nc(3,7,"Description")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.Description3)("ngModelOptions",o.vc(9,y8)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w8,e,null==t.serverErrors?null:t.serverErrors.Description3))}}function B8(e,t){1&e&&o.Rb(0)}function S8(e,t){if(1&e&&(o.Vb(0,"option",81),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function k8(e,t){1&e&&o.Rb(0)}function O8(e,t){if(1&e&&(o.Vb(0,"option",81),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function _8(e,t){1&e&&o.Rb(0)}function L8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",39),o.Vb(1,"label",82),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"select",83,84),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).model.DefinitionId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onDefinitionIdChange(t)})),o.Qb(6,"option",54),o.Rc(7,O8,2,2,"option",80),o.Ub(),o.Rc(8,_8,1,0,"ng-container",43),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(4).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.DefinitionId)),o.Bb(2),o.Uc(o.nc(3,7,"MarkupTemplate_DefinitionId")),o.Bb(2),o.sc("ngModel",t.DefinitionId),o.Bb(3),o.sc("ngForOf",n.allDefinitionIds(t)),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(9,w8,e,null==t.serverErrors?null:t.serverErrors.DefinitionId))}}function A8(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",39),o.Vb(2,"label",77),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",78,79),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.Collection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onCollectionChange(t)})),o.Qb(7,"option",54),o.Rc(8,S8,2,2,"option",80),o.Ub(),o.Rc(9,k8,1,0,"ng-container",43),o.Ub(),o.Rc(10,L8,9,12,"div",44),o.Sb()}if(2&e){const e=o.Fc(6),t=o.lc(3).model,n=o.lc(),i=o.Fc(7);o.Bb(1),o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Collection)),o.Bb(2),o.Uc(o.nc(4,8,"MarkupTemplate_Collection")),o.Bb(2),o.sc("ngModel",t.Collection),o.Bb(3),o.sc("ngForOf",n.allCollections),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,w8,e,null==t.serverErrors?null:t.serverErrors.Collection)),o.Bb(1),o.sc("ngIf",n.showDefinitionIdSelector(t))}}function F8(e,t){1&e&&o.Rb(0)}function P8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",85),o.Vb(1,"input",86),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.SupportsPrimaryLanguage=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(2,"label",87),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.sc("ngModel",e.SupportsPrimaryLanguage),o.Bb(2),o.Uc(o.nc(4,2,"MarkupTemplate_Supports")+t.ws.primaryPostfix)}}function N8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",85),o.Vb(1,"input",88),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.SupportsSecondaryLanguage=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(2,"label",89),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.sc("ngModel",e.SupportsSecondaryLanguage),o.Bb(2),o.Uc(o.nc(4,2,"MarkupTemplate_Supports")+t.ws.secondaryPostfix)}}function j8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",85),o.Vb(1,"input",90),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).model.SupportsTernaryLanguage=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Vb(2,"label",91),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.sc("ngModel",e.SupportsTernaryLanguage),o.Bb(2),o.Uc(o.nc(4,2,"MarkupTemplate_Supports")+t.ws.ternaryPostfix)}}function W8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",34),o.Vb(1,"div",35),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleMetadata()})),o.Vb(2,"div"),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Tc(6,"\xa0 "),o.Rc(7,h8,1,0,"fa-icon",32),o.Ub(),o.Vb(8,"div",36),o.Qb(9,"fa-icon",37),o.Ub(),o.Ub(),o.Vb(10,"div",38),o.Vb(11,"div",39),o.Vb(12,"label",40),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Vb(15,"input",41,42),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Name=t})),o.Ub(),o.Rc(17,v8,1,0,"ng-container",43),o.Ub(),o.Rc(18,C8,7,13,"div",44),o.Rc(19,V8,7,13,"div",44),o.Vb(20,"div",39),o.Vb(21,"label",45),o.Tc(22),o.Ub(),o.Vb(23,"input",46,47),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Code=t})),o.Ub(),o.Rc(25,T8,1,0,"ng-container",43),o.Ub(),o.Vb(26,"div",39),o.Vb(27,"label",48),o.Tc(28),o.mc(29,"translate"),o.Ub(),o.Vb(30,"textarea",49,50),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Description=t})),o.Ub(),o.Rc(32,E8,1,0,"ng-container",43),o.Ub(),o.Rc(33,U8,7,13,"div",44),o.Rc(34,D8,7,13,"div",44),o.Vb(35,"div",39),o.Vb(36,"label",51),o.Tc(37),o.mc(38,"translate"),o.Ub(),o.Vb(39,"select",52,53),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Usage=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Qb(41,"option",54),o.Vb(42,"option",55),o.Tc(43),o.mc(44,"translate"),o.Ub(),o.Vb(45,"option",56),o.Tc(46),o.mc(47,"translate"),o.Ub(),o.Ub(),o.Rc(48,B8,1,0,"ng-container",43),o.Ub(),o.Rc(49,A8,11,13,"ng-container",57),o.Vb(50,"div",39),o.Vb(51,"label",58),o.Tc(52),o.mc(53,"translate"),o.mc(54,"translate"),o.Ub(),o.Vb(55,"input",59,60),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.DownloadName=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(57,F8,1,0,"ng-container",43),o.Ub(),o.Rc(58,P8,5,4,"div",61),o.Rc(59,N8,5,4,"div",61),o.Rc(60,j8,5,4,"div",61),o.Vb(61,"div",62),o.Vb(62,"input",63),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.IsDeployed=t})),o.Ub(),o.Vb(63,"label",64),o.Tc(64),o.mc(65,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(16),t=o.Fc(24),n=o.Fc(31),i=o.Fc(40),c=o.Fc(56),r=o.lc(2).model,s=o.lc(),l=o.Fc(7);o.Gb("d-flex",!s.collapseMetadata)("d-none",s.collapseMetadata),o.Bb(4),o.Uc(o.nc(5,54,"Metadata")),o.Bb(3),o.sc("ngIf",s.metadataPaneErrors(r)),o.Bb(2),o.sc("flip",s.flipIcon(!1)),o.Bb(2),o.Gb("is-invalid",s.invalid(e,null==r.serverErrors?null:r.serverErrors.Name)),o.Bb(2),o.Uc(o.nc(14,56,"Name")+s.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",r.Name)("ngModelOptions",o.vc(72,y8)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(73,w8,e,null==r.serverErrors?null:r.serverErrors.Name)),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",s.invalid(t,null==r.serverErrors?null:r.serverErrors.Code)),o.Bb(2),o.Uc("Code"),o.Bb(1),o.sc("ngModel",r.Code)("ngModelOptions",o.vc(76,y8)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(77,w8,t,null==r.serverErrors?null:r.serverErrors.Code)),o.Bb(1),o.Gb("is-invalid",s.invalid(n,null==r.serverErrors?null:r.serverErrors.Description)),o.Bb(2),o.Uc(o.nc(29,58,"Description")+s.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",r.Description)("ngModelOptions",o.vc(80,y8)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(81,w8,n,null==r.serverErrors?null:r.serverErrors.Description)),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",s.invalid(i,null==r.serverErrors?null:r.serverErrors.Usage)),o.Bb(2),o.Uc(o.nc(38,60,"MarkupTemplate_Usage")),o.Bb(2),o.sc("ngModel",r.Usage),o.Bb(4),o.Vc("",o.nc(44,62,"MarkupTemplate_Usage_QueryByFilter")," "),o.Bb(3),o.Uc(o.nc(47,64,"MarkupTemplate_Usage_QueryById")),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(84,w8,i,null==r.serverErrors?null:r.serverErrors.Usage)),o.Bb(1),o.sc("ngIf",s.showCollectionAndDefinition(r)),o.Bb(1),o.Gb("is-invalid",s.invalid(c,null==r.serverErrors?null:r.serverErrors.DownloadName)),o.Bb(2),o.Wc("",o.nc(53,66,"MarkupTemplate_DownloadName")," (",o.nc(54,68,"Visibility_Optional"),")"),o.Bb(3),o.sc("ngModel",r.DownloadName)("ngModelOptions",o.vc(87,y8)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(88,w8,c,null==r.serverErrors?null:r.serverErrors.DownloadName)),o.Bb(1),o.sc("ngIf",!!s.ws.settings.SecondaryLanguageId||!!s.ws.settings.TernaryLanguageId),o.Bb(1),o.sc("ngIf",!!s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",!!s.ws.settings.TernaryLanguageId),o.Bb(2),o.sc("ngModel",r.IsDeployed),o.Bb(2),o.Uc(o.nc(65,70,"MarkupTemplate_IsDeployed"))}}function $8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",29),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleEditor()})),o.Vb(1,"div",30),o.Qb(2,"fa-icon",31),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Editor"))}}function q8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",92),o.Vb(1,"div",35),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleEditor()})),o.Vb(2,"span"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"div",36),o.Qb(6,"fa-icon",37),o.Ub(),o.Ub(),o.Vb(7,"div",93),o.Vb(8,"textarea",94,95),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).model;return o.lc().onBodyChange(t,n)}))("keydown",(function(t){o.Ic(e);const n=o.Fc(9),i=o.lc(2).model;return o.lc().onKeydown(n,t,i)})),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model,t=o.lc();o.Gb("d-flex",!t.collapseEditor)("d-none",t.collapseEditor),o.Bb(3),o.Uc(o.nc(4,7,"Editor")),o.Bb(3),o.sc("flip",t.flipIcon(!1)),o.Bb(2),o.sc("ngModel",e.Body)}}function Q8(e,t){1&e&&o.Qb(0,"t-spinner")}function H8(e,t){if(1&e&&(o.Vb(0,"div",96),o.Vb(1,"div",97),o.Vb(2,"span"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Tc(5,"\xa0\xa0 "),o.Rc(6,Q8,1,0,"t-spinner",57),o.Ub(),o.Ub()),2&e){const e=o.lc(3);o.Bb(3),o.Uc(o.nc(4,2,"Preview")),o.Bb(3),o.sc("ngIf",e.showSpinner)}}function G8(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"t-form-group",100),o.mc(2,"translate"),o.Vb(3,"t-text-editor",101),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).filter=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onParameterChange(t)})),o.Ub(),o.Ub(),o.Vb(4,"t-form-group",100),o.mc(5,"translate"),o.Vb(6,"t-text-editor",101),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).orderby=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onParameterChange(t)})),o.Ub(),o.Ub(),o.Vb(7,"t-form-group",100),o.mc(8,"translate"),o.Vb(9,"t-decimal-editor",102),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).top=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onParameterChange(t)})),o.Ub(),o.Ub(),o.Vb(10,"t-form-group",100),o.mc(11,"translate"),o.Tc(12),o.Ub(),o.Sb()}if(2&e){const e=o.lc(4);o.Bb(1),o.sc("label",o.nc(2,13,"Filter")),o.Bb(2),o.sc("ngModel",e.filter)("ngModelOptions",o.vc(21,y8)),o.Bb(1),o.sc("label",o.nc(5,15,"OrderBy")),o.Bb(2),o.sc("ngModel",e.orderby)("ngModelOptions",o.vc(22,y8)),o.Bb(1),o.sc("label",o.nc(8,17,"Top")),o.Bb(2),o.sc("ngModel",e.top)("ngModelOptions",o.vc(23,y8))("minDecimalPlaces",0)("minDecimalPlaces",0),o.Bb(1),o.sc("label",o.nc(11,19,"Skip")),o.Bb(2),o.Vc(" ",e.skip," ")}}function z8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-classifications-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function J8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-ifrs-concepts-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function K8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-account-types-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function Y8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-accounts-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function X8(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-agents-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}const Z8=function(e){return[e]};function e9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-documents-picker",109),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(4).model,t=o.lc();o.sc("ngModel",t.id)("definitionIds",o.wc(3,Z8,e.DefinitionId))("showCreate",!1)}}function t9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",109),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(4).model,t=o.lc();o.sc("ngModel",t.id)("definitionIds",o.wc(3,Z8,e.DefinitionId))("showCreate",!1)}}function n9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function i9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function o9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookups-picker",110),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(4).model,t=o.lc();o.sc("ngModel",t.id)("definitionId",e.DefinitionId)("showCreate",!1)}}function c9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-units-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function r9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custodies-picker",109),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(4).model,t=o.lc();o.sc("ngModel",t.id)("definitionIds",o.wc(3,Z8,e.DefinitionId))("showCreate",!1)}}function s9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resources-picker",109),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(4).model,t=o.lc();o.sc("ngModel",t.id)("definitionIds",o.wc(3,Z8,e.DefinitionId))("showCreate",!1)}}function l9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function a9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-roles-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function u9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-users-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function d9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relation-definitions-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function b9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custody-definitions-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function f9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resource-definitions-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function m9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-lookup-definitions-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function g9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-document-definitions-picker",108),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(5).id=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(4).model;return o.lc().onParameterChange(t)})),o.Ub()}if(2&e){const e=o.lc(5);o.sc("ngModel",e.id)("showCreate",!1)}}function p9(e,t){if(1&e&&(o.Vb(0,"div",111),o.Tc(1),o.Ub()),2&e){const e=o.lc(4).model;o.Bb(1),o.Vc(" TODO: control for '",e.Collection,"'' ")}}function h9(e,t){if(1&e&&(o.Tb(0),o.Tb(1,103),o.Vb(2,"t-form-group",100),o.Rc(3,z8,1,2,"t-account-classifications-picker",104),o.Rc(4,J8,1,2,"t-ifrs-concepts-picker",104),o.Rc(5,K8,1,2,"t-account-types-picker",104),o.Rc(6,Y8,1,2,"t-accounts-picker",104),o.Rc(7,X8,1,2,"t-agents-picker",104),o.Rc(8,e9,1,5,"t-documents-picker",105),o.Rc(9,t9,1,5,"t-relations-picker",105),o.Rc(10,n9,1,2,"t-currencies-picker",104),o.Rc(11,i9,1,2,"t-entry-types-picker",104),o.Rc(12,o9,1,3,"t-lookups-picker",106),o.Rc(13,c9,1,2,"t-units-picker",104),o.Rc(14,r9,1,5,"t-custodies-picker",105),o.Rc(15,s9,1,5,"t-resources-picker",105),o.Rc(16,l9,1,2,"t-centers-picker",104),o.Rc(17,a9,1,2,"t-roles-picker",104),o.Rc(18,u9,1,2,"t-users-picker",104),o.Rc(19,d9,1,2,"t-relation-definitions-picker",104),o.Rc(20,b9,1,2,"t-custody-definitions-picker",104),o.Rc(21,f9,1,2,"t-resource-definitions-picker",104),o.Rc(22,m9,1,2,"t-lookup-definitions-picker",104),o.Rc(23,g9,1,2,"t-document-definitions-picker",104),o.Rc(24,p9,2,1,"div",107),o.Ub(),o.Sb(),o.Sb()),2&e){const e=o.lc(3).model,t=o.lc();o.Bb(1),o.sc("ngSwitch",e.Collection),o.Bb(1),o.sc("label",t.detailsPickerLabel(e)),o.Bb(1),o.sc("ngSwitchCase","AccountClassification"),o.Bb(1),o.sc("ngSwitchCase","IfrsConcept"),o.Bb(1),o.sc("ngSwitchCase","AccountType"),o.Bb(1),o.sc("ngSwitchCase","Account"),o.Bb(1),o.sc("ngSwitchCase","Agent"),o.Bb(1),o.sc("ngSwitchCase","Document"),o.Bb(1),o.sc("ngSwitchCase","Relation"),o.Bb(1),o.sc("ngSwitchCase","Currency"),o.Bb(1),o.sc("ngSwitchCase","EntryType"),o.Bb(1),o.sc("ngSwitchCase","Lookup"),o.Bb(1),o.sc("ngSwitchCase","Unit"),o.Bb(1),o.sc("ngSwitchCase","Custody"),o.Bb(1),o.sc("ngSwitchCase","Resource"),o.Bb(1),o.sc("ngSwitchCase","Center"),o.Bb(1),o.sc("ngSwitchCase","Role"),o.Bb(1),o.sc("ngSwitchCase","User"),o.Bb(1),o.sc("ngSwitchCase","RelationDefinition"),o.Bb(1),o.sc("ngSwitchCase","CustodyDefinition"),o.Bb(1),o.sc("ngSwitchCase","ResourceDefinition"),o.Bb(1),o.sc("ngSwitchCase","LookupDefinition"),o.Bb(1),o.sc("ngSwitchCase","DocumentDefinition")}}function v9(e,t){if(1&e&&(o.Vb(0,"div",98),o.Vb(1,"div",99),o.Rc(2,G8,13,24,"ng-container",57),o.Rc(3,h9,25,23,"ng-container",57),o.Ub(),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(2),o.sc("ngIf",t.showQueryByFilterParams(e)),o.Bb(1),o.sc("ngIf",t.showQueryByIdParams(e))}}function I9(e,t){if(1&e&&(o.Vb(0,"div",22),o.Vb(1,"span",23),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3);o.Bb(2),o.Uc(e.fileDownloadName)}}function y9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"label",114),o.hc("click",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onLang(1,t)})),o.Qb(1,"input",115),o.Tc(2),o.Ub()}if(2&e){const e=o.lc(4);o.Gb("active",e.isLang(1)),o.tc("title",e.langDisplay(1)),o.Bb(2),o.Vc(" ",e.langDisplay(1)," ")}}function w9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"label",114),o.hc("click",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onLang(2,t)})),o.Qb(1,"input",115),o.Tc(2),o.Ub()}if(2&e){const e=o.lc(4);o.Gb("active",e.isLang(2)),o.tc("title",e.langDisplay(2)),o.Bb(2),o.Vc(" ",e.langDisplay(2)," ")}}function C9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"label",114),o.hc("click",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onLang(3,t)})),o.Qb(1,"input",115),o.Tc(2),o.Ub()}if(2&e){const e=o.lc(4);o.Gb("active",e.isLang(3)),o.tc("title",e.langDisplay(3)),o.Bb(2),o.Vc(" ",e.langDisplay(3)," ")}}function M9(e,t){if(1&e&&(o.Vb(0,"div",112),o.Rc(1,y9,3,4,"label",113),o.Rc(2,w9,3,4,"label",113),o.Rc(3,C9,3,4,"label",113),o.Ub()),2&e){const e=o.lc(2).model,t=o.lc();o.Bb(1),o.sc("ngIf",t.showLang(1,e)),o.Bb(1),o.sc("ngIf",t.showLang(2,e)),o.Bb(1),o.sc("ngIf",t.showLang(3,e))}}function V9(e,t){if(1&e&&(o.Vb(0,"t-error-message"),o.Tc(1),o.Ub()),2&e){const e=o.lc(4);o.Bb(1),o.Uc(e.error)}}function T9(e,t){if(1&e&&(o.Vb(0,"div",116),o.Vb(1,"div",117),o.Rc(2,V9,2,1,"t-error-message",57),o.Ub(),o.Qb(3,"iframe",118,119),o.Ub()),2&e){const e=o.lc(3);o.Bb(2),o.sc("ngIf",e.error)}}function E9(e,t){if(1&e&&(o.Vb(0,"div",120),o.Qb(1,"fa-icon",121),o.Tc(2),o.Ub()),2&e){const e=o.lc(3);o.Bb(2),o.Vc(" \xa0 ",e.message," ")}}function x9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",5),o.Rc(1,p8,7,5,"div",6),o.Rc(2,W8,66,91,"div",7),o.Rc(3,$8,6,4,"div",6),o.Vb(4,"div",8),o.Rc(5,q8,10,9,"div",9),o.Vb(6,"div",10),o.Rc(7,H8,7,4,"div",11),o.Vb(8,"div",12),o.Vb(9,"div",13),o.Rc(10,v9,4,2,"div",14),o.Vb(11,"div",15),o.Vb(12,"div"),o.Vb(13,"button",16),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onPrint(t)})),o.Qb(14,"fa-icon",17),o.Vb(15,"span",18),o.Tc(16),o.mc(17,"translate"),o.Ub(),o.Ub(),o.Vb(18,"button",19),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDownload(t)})),o.Qb(19,"fa-icon",20),o.Vb(20,"span",18),o.Tc(21),o.mc(22,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Vb(23,"div"),o.Rc(24,I9,3,1,"div",21),o.Vb(25,"div",22),o.Vb(26,"span",23),o.Tc(27),o.Ub(),o.Ub(),o.Ub(),o.Vb(28,"div"),o.Vb(29,"button",24),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onRefresh(t)})),o.mc(30,"translate"),o.Qb(31,"fa-icon",25),o.Ub(),o.Rc(32,M9,4,3,"div",26),o.Ub(),o.Ub(),o.Ub(),o.Rc(33,T9,5,1,"div",27),o.Rc(34,E9,3,1,"ng-template",null,28,o.Sc),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(35),t=o.lc(),n=t.isEdit,i=t.model,c=o.lc();o.Bb(1),o.sc("ngIf",n&&c.collapseMetadata),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("ngIf",n&&c.collapseEditor),o.Bb(2),o.sc("ngIf",n),o.Bb(1),o.Gb("col-8",n&&!c.collapseEditor)("col-12",!(n&&!c.collapseEditor)),o.Bb(1),o.sc("ngIf",n),o.Bb(3),o.sc("ngIf",c.showParametersSection(i)),o.Bb(3),o.sc("disabled",c.disablePrint),o.Bb(3),o.Vc("\xa0\xa0",o.nc(17,20,"Print"),""),o.Bb(2),o.sc("disabled",c.disableDownload),o.Bb(3),o.Vc("\xa0\xa0",o.nc(22,22,"Download"),""),o.Bb(3),o.sc("ngIf",c.fileDownloadName),o.Bb(3),o.Uc(c.fileSizeDisplay),o.Bb(2),o.tc("title",o.nc(30,24,"Refresh")),o.Bb(3),o.sc("ngIf",c.showLanguageToggle(i)),o.Bb(1),o.sc("ngIf",!c.message)("ngIfElse",e)}}function U9(e,t){if(1&e&&o.Rc(0,x9,36,26,"div",4),2&e){const e=t.model,n=o.lc();o.sc("ngIf",n.watch(e))}}function R9(e,t){if(1&e&&(o.Vb(0,"span",123),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function D9(e,t){if(1&e&&(o.Tb(0),o.Rc(1,R9,2,1,"span",122),o.Sb()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(1),o.sc("ngForOf",i.errors(t,n))}}function B9(e,t){if(1&e&&o.Rc(0,D9,2,1,"ng-container",57),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}const S9=function(){return[]};let k9=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.notifyFetch$=new E.a,this.markupChanged$=new E.a,this.markupTemplatesApi=this.api.markupTemplatesApi(this.notifyDestruct$),this.localState=new B.e,this._sections={Metadata:!1,Template:!0},this.expand="",this.collapseEditor=!1,this.collapseMetadata=!0,this.loading=!1,this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Name=this.initialText:this.ws.isSecondaryLanguage?e.Name2=this.initialText:this.ws.isTernaryLanguage&&(e.Name3=this.initialText),e.IsDeployed=!1,e.SupportsPrimaryLanguage=!0,e.SupportsSecondaryLanguage=!!this.workspace.currentTenant.settings.SecondaryLanguageId,e.SupportsTernaryLanguage=!!this.workspace.currentTenant.settings.TernaryLanguageId,e.Usage="QueryByFilter",e.Collection="Document",e.MarkupLanguage="text/html",e.Body=O9,e},this.isInactive=e=>null,this.markupTemplatesApi=this.api.markupTemplatesApi(this.notifyDestruct$)}ngOnInit(){super.ngOnInit(),this._subscriptions=new k.a;const e=this.markupChanged$.pipe(Object(ds.a)(300)),t=this.notifyFetch$,n=Object(Fb.a)(e,t);this._subscriptions.add(n.pipe(Object(_.a)(e=>this.doFetch(e))).subscribe())}ngOnDestroy(){super.ngOnDestroy(),this.url&&window.URL.revokeObjectURL(this.url)}get state(){return this.isPopupMode?(this.localState||(this.localState=new B.e),this.localState):this.globalState}get globalState(){const e="markup-templates";return this.workspace.current.mdState[e]||(this.workspace.current.mdState[e]=new B.e),this.workspace.current.mdState[e]}get markupLanguageChoices(){const e=Object(o1.a)(this.workspace,this.translate).properties.MarkupLanguage;return Object(wi.c)(e)}markupLanguageLookup(e){return Object(o1.a)(this.workspace,this.translate).properties.MarkupLanguage.format(e)}get ws(){return this.workspace.currentTenant}onParameterChange(e){this.fetch(e)}onDefinitionChange(e){this.fetch(e)}onCollectionChange(e){this.id=null,e.DefinitionId=null,this.onDefinitionChange(e)}onDefinitionIdChange(e){this.id=null,this.onDefinitionChange(e)}resetState(){this.top=25,this.skip=0,this.filter=void 0,this.orderby=void 0,this.id=void 0,this.lang=1,this.blob=void 0,this.url&&window.URL.revokeObjectURL(this.url),this.url=void 0,this.iframe&&this.iframe.nativeElement.contentWindow.location.replace("about:blank"),this.contenType=void 0,this.fileSizeDisplay=void 0,this.error=void 0,this.message=void 0,this.loading=!1}onBodyChange(e,t){t.Body!==e&&(t.Body=e,this.markupChanged$.next(t))}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}onToggleEditor(){this.collapseEditor=!this.collapseEditor}onToggleMetadata(){this.collapseMetadata=!this.collapseMetadata}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}metadataPaneErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.Name)||Object(fI.b)(e.serverErrors.Name2)||Object(fI.b)(e.serverErrors.Name3)||Object(fI.b)(e.serverErrors.Code)||Object(fI.b)(e.serverErrors.Description)||Object(fI.b)(e.serverErrors.Description2)||Object(fI.b)(e.serverErrors.Description3)||Object(fI.b)(e.serverErrors.Usage)||Object(fI.b)(e.serverErrors.Collection)||Object(fI.b)(e.serverErrors.DefinitionId)||Object(fI.b)(e.serverErrors.DownloadName)||Object(fI.b)(e.serverErrors.SupportsPrimaryLanguage)||Object(fI.b)(e.serverErrors.SupportsSecondaryLanguage)||Object(fI.b)(e.serverErrors.SupportsTernaryLanguage))}templateSectionErrors(e){return!!e.serverErrors&&Object(fI.b)(e.serverErrors.Body)}fetch(e){this.notifyFetch$.next(e)}doFetch(e){const t=this.ws.settings,n=1===this.lang&&e.SupportsPrimaryLanguage?t.PrimaryLanguageId:2===this.lang&&e.SupportsSecondaryLanguage?t.SecondaryLanguageId:3===this.lang&&e.SupportsTernaryLanguage?t.TernaryLanguageId:e.SupportsPrimaryLanguage?t.PrimaryLanguageId:e.SupportsSecondaryLanguage?t.SecondaryLanguageId:e.SupportsTernaryLanguage?t.TernaryLanguageId:t.PrimaryLanguageId;if(this.error=void 0,this.message=void 0,!e)return this.loading=!1,Object(O.a)();let i;if("QueryById"===e.Usage){if(!e.Collection)return this.message="Please specify the collection in Metadata.",this.loading=!1,Object(O.a)();if(this.showDefinitionIdSelector(e)&&!e.DefinitionId)return this.message="Please specify the definition in Metadata.",this.loading=!1,Object(O.a)();if(!this.id)return this.message=`Please specify the ${this.detailsPickerLabel(e)} above`,this.loading=!1,Object(O.a)();i=this.markupTemplatesApi.previewById(this.id,e,{culture:n})}else if("QueryByFilter"===e.Usage){if(!e.Collection)return this.message="Please specify the collection",this.loading=!1,Object(O.a)();i=this.markupTemplatesApi.previewByFilter(e,{culture:n,filter:this.filter,orderby:this.orderby,top:this.top,skip:this.skip})}else i=this.markupTemplatesApi.preview(e,{culture:n});return this.loading=!0,i.pipe(Object(A.a)(t=>{this.fileDownloadName=t.DownloadName;const n=new Blob([t.Body],{type:e.MarkupLanguage});this.blob=n,this.url&&window.URL.revokeObjectURL(this.url),this.url=window.URL.createObjectURL(n)+"#toolbar=0&navpanes=0&scrollbar=0",this.iframe.nativeElement.contentWindow.location.replace(this.url),this.contenType=e.MarkupLanguage,this.fileSizeDisplay=Object(N.j)(n.size),this.loading=!1}),Object(P.a)(e=>(this.error=e.error||"Unknown error.",this.loading=!1,Object(O.a)(null))))}get allCollections(){return Object(wi.a)(this.workspace,this.translate)}showDefinitionIdSelector(e){return!!e&&!!e.Collection&&!!wi.h[e.Collection](this.workspace,this.translate,null).definitionIds}allDefinitionIds(e){if(e&&e.Collection){const t=wi.h[e.Collection],n=t(this.workspace,this.translate,null);return n.definitionIds&&!n.definitionIdsArray&&(n.definitionIdsArray=n.definitionIds.map(e=>({value:e,name:t(this.workspace,this.translate,e).titlePlural}))),n.definitionIdsArray}return null}showParametersSection(e){return!!e.Usage}onPrint(e){Object(N.r)(this.blob)}get disablePrint(){return!this.blob}onDownload(e){this.blob&&Object(N.i)(this.blob,this.fileDownloadName)}get disableDownload(){return!this.blob}onRefresh(e){this.loading||this.fetch(e)}get showRefresh(){return!this.loading}get showSpinner(){return this.loading}showLanguageToggle(e){return(this.showLang(1,e)?1:0)+(this.showLang(2,e)?1:0)+(this.showLang(3,e)?1:0)>1}langDisplay(e){return 1===e?this.ws.settings.PrimaryLanguageName:2===e?this.ws.settings.SecondaryLanguageName:3===e?this.ws.settings.TernaryLanguageName:""}onLang(e,t){this.lang!==e&&(this.lang=e,this.onDefinitionChange(t))}isLang(e){return this.lang===e}showLang(e,t){return 1===e&&!!t.SupportsPrimaryLanguage||2===e&&!!t.SupportsSecondaryLanguage&&!!this.ws.settings.SecondaryLanguageId||3===e&&!!t.SupportsTernaryLanguage&&!!this.ws.settings.TernaryLanguageId}showQueryByFilterParams(e){return"QueryByFilter"===e.Usage}showQueryByIdParams(e){return"QueryById"===e.Usage}showCollectionAndDefinition(e){return"QueryById"===e.Usage||"QueryByFilter"===e.Usage}watch(e){const t=this.state.detailsState;return t.modelCollection!==(e.Collection||null)||t.modelDefinitionId!==(e.DefinitionId||null)?(t.modelCollection=e.Collection||null,t.modelDefinitionId=e.DefinitionId||null,this.resetState(),this.fetch(e)):this.loading||this.error||this.message||this.blob?this._currentModel!==e&&this.fetch(e):this.fetch(e),this._currentModel=e,!0}detailsPickerLabel(e){return e&&e.Collection?(0,wi.h[e.Collection])(this.workspace,this.translate,e.DefinitionId).titleSingular():""}get filter(){return this.state.detailsState.filter}set filter(e){this.state.detailsState.filter=e}get orderby(){return this.state.detailsState.orderby}set orderby(e){this.state.detailsState.orderby=e}get top(){return this.state.detailsState.top}set top(e){this.state.detailsState.top=e}get skip(){return this.state.detailsState.skip}set skip(e){this.state.detailsState.skip=e}get id(){return this.state.detailsState.id}set id(e){this.state.detailsState.id=e}get lang(){return this.state.detailsState.lang}set lang(e){this.state.detailsState.lang=e}onKeydown(e,t,n){Object(N.p)(e,t,e=>n.Body=e)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-markup-templates-details"]],viewQuery:function(e,t){var n;1&e&&o.Yc(f8,!0),2&e&&o.Ec(n=o.ic())&&(t.iframe=n.first)},features:[o.yb],decls:8,vars:13,consts:[["collection","MarkupTemplate","layout","full-screen","theme","dark",3,"createFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["class","h-100 d-flex",4,"ngIf"],[1,"h-100","d-flex"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],["class","t-less-dark h-100 flex-column t-studio-pane",3,"d-flex","d-none",4,"ngIf"],[1,"h-100","d-flex","flex-grow-1"],["class","t-less-dark h-100 t-studio-pane flex-column p-0 col-4",3,"d-flex","d-none",4,"ngIf"],[1,"d-flex","flex-column","p-0"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"d-flex","flex-column","t-rest-of-screen","bg-white"],[1,"row","mx-0","border-bottom","bg-white"],["class","mx-auto mb-3 w-100","style","max-width: 700px",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","print"],[1,"d-none","d-md-inline"],[1,"btn","btn-primary","btn-light","text-primary","btn-sm","t-toolbar-button","t-white-button",3,"disabled","click"],["icon","download"],["class","d-inline small mx-1 text-muted",4,"ngIf"],[1,"d-inline","small","mx-1","text-muted"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","sync-alt"],["class","btn-group btn-group-toggle t-toolbar-button",4,"ngIf"],["class","t-rest-of-screen bg-white",4,"ngIf","ngIfElse"],["messageTemplate",""],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],["icon","exclamation",1,"t-light-danger","mx-1"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"p-2","t-studio-section","flex-wrap","overflow-auto"],[1,"form-group"],["for","name",1,"small"],["id","name","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],["for","desc",1,"small"],["rows","3","id","desc","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description","ngModel"],["for","usage",1,"small"],["id","usage",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["usage","ngModel"],["value",""],["value","QueryByFilter"],["value","QueryById"],[4,"ngIf"],["for","downloadName",1,"small"],["id","downloadName","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["downloadName","ngModel"],["class","custom-control custom-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox","mt-3"],["type","checkbox","id","isdeployed",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isdeployed",1,"custom-control-label"],["for","name2",1,"small"],["id","name2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name2","ngModel"],["for","name3",1,"small"],["id","name3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["name3","ngModel"],["for","desc2",1,"small"],["rows","3","id","desc2","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description2","ngModel"],["for","desc3",1,"small"],["rows","3","id","desc3","type","text",1,"form-control","t-studio-input","t-no-resize",3,"ngModel","ngModelOptions","ngModelChange"],["description3","ngModel"],["for","collection",1,"small"],["id","collection","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["collection","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","definitionId",1,"small"],["id","definitionId",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["definitionId","ngModel"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","supportsPrimaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsPrimaryLanguage",1,"custom-control-label"],["type","checkbox","id","supportsSecondaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsSecondaryLanguage",1,"custom-control-label"],["type","checkbox","id","supportsTernaryLanguage",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","supportsTernaryLanguage",1,"custom-control-label"],[1,"t-less-dark","h-100","t-studio-pane","flex-column","p-0","col-4"],[1,"flex-grow-1"],["spellcheck","false",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","border-0","t-code",3,"ngModel","ngModelChange","keydown"],["textarea",""],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],[1,"row","m-0","px-0","px-lg-1","py-1"],[1,"t-form-group","col",3,"label"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","minDecimalPlaces","ngModelChange"],[3,"ngSwitch"],[3,"ngModel","showCreate","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionIds","showCreate","ngModelChange",4,"ngSwitchCase"],[3,"ngModel","definitionId","showCreate","ngModelChange",4,"ngSwitchCase"],["class","text-danger font-weight-bold",4,"ngSwitchDefault"],[3,"ngModel","showCreate","ngModelChange"],[3,"ngModel","definitionIds","showCreate","ngModelChange"],[3,"ngModel","definitionId","showCreate","ngModelChange"],[1,"text-danger","font-weight-bold"],[1,"btn-group","btn-group-toggle","t-toolbar-button"],["class","btn btn-sm t-pointer btn-light",3,"active","title","click",4,"ngIf"],[1,"btn","btn-sm","t-pointer","btn-light",3,"title","click"],["type","radio","name","searchView"],[1,"t-rest-of-screen","bg-white"],[1,"w-100",2,"position","absolute"],["sandbox","",1,"p-0","border-0","w-100","h-100","d-block"],["iframe",""],[1,"w-100","p-3","px-4"],["icon","info-circle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,m8,2,1,"ng-template",null,1,o.Sc),o.Rc(4,U9,1,1,"ng-template",null,2,o.Sc),o.Rc(6,B9,1,1,"ng-template",null,3,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5);o.sc("createFunc",t.create)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"MarkupTemplates"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.vc(12,S9))("isInactive",t.isInactive)}},directives:[j.a,x.u,ee.b,te.c,te.k,te.n,x.B,te.v,te.p,te.x,te.a,te.u,x.t,me.a,pe.a,he.a,In,x.y,x.z,x.A,fM,WZ,hM,dW,Vb,r1,Ub,Du,bV,Fd,wy,nj,AN,Ou,$s,Ba,lV,r_,tF,OS,d8,ve.a],pipes:[Q.d],encapsulation:2}),e})();const O9='<!DOCTYPE html>\n<html lang="{{ $Lang }}">\n<head>\n    <meta charset="UTF-8">\n    <title>{{ \'Document\' }}</title>\n    <style>\n\n        /* Printing CSS: Remove if not for printing */\n        @media screen {\n            body {\n                background-color: #F9F9F9;\n            }\n            .page {\n                margin-left: auto;\n                margin-right: auto;\n                margin-top: 1rem;\n                margin-bottom: 1rem;\n                border: 1px solid lightgrey;\n                background-color: white;\n                box-shadow: rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n                box-sizing: border-box;\n                width: 210mm;\n                min-height: 297mm;\n                padding: 0.5in;\n            }\n        }\n        @page {\n            margin: 0.5in;\n            size: A4 Portrait;\n        }\n        .page {\n            break-after: page;\n        }\n        /* End Printing CSS */\n        \n        * {\n            font-family: sans-serif;\n            box-sizing: border-box;\n        }\n        \n        body {\n            margin: 0;\n        }\n        \n        body.rtl {\n            direction: rtl;\n        }\n        \n        /* More CSS Here */\n    \n    </style>\n</head>\n<body class="{{ IF($IsRtl, \'rtl\', \'\') }}">\n    <div class="page">\n        \x3c!-- HTML Template Here --\x3e\n        \n    </div>\n</body>\n</html>';var _9=n("EFu8");const L9=["reportDefinitionModal"],A9=["scriptModal"];function F9(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function P9(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function N9(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}function j9(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"TitleSingular",n.ws)||o.nc(2,1,"Untitled"))}}function W9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",73),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleDefinition()})),o.Vb(1,"div",74),o.Qb(2,"fa-icon",75),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Definition"))}}function $9(e,t){1&e&&o.Qb(0,"fa-icon",76)}function q9(e,t){1&e&&o.Rb(0)}function Q9(e,t){1&e&&o.Rb(0)}function H9(e,t){1&e&&o.Rb(0)}const G9=function(){return{updateOn:"blur"}},z9=function(e,t){return{control:e,serverErrors:t}};function J9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",77),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",78,79),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular2")})),o.Ub(),o.Rc(6,H9,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular2)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular2)("ngModelOptions",o.vc(9,G9)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,z9,e,null==t.serverErrors?null:t.serverErrors.TitleSingular2))}}function K9(e,t){1&e&&o.Rb(0)}function Y9(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",80),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",81,82),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitleSingular3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitleSingular3")})),o.Ub(),o.Rc(6,K9,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitleSingular3)),o.Bb(2),o.Uc(o.nc(3,7,"TitleSingular")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitleSingular3)("ngModelOptions",o.vc(9,G9)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,z9,e,null==t.serverErrors?null:t.serverErrors.TitleSingular3))}}function X9(e,t){1&e&&o.Rb(0)}function Z9(e,t){1&e&&o.Rb(0)}function eee(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",83),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",84,85),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural2")})),o.Ub(),o.Rc(6,Z9,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural2)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural2)("ngModelOptions",o.vc(9,G9)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,z9,e,null==t.serverErrors?null:t.serverErrors.TitlePlural2))}}function tee(e,t){1&e&&o.Rb(0)}function nee(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",86),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",87,88),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.TitlePlural3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"TitlePlural3")})),o.Ub(),o.Rc(6,tee,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.TitlePlural3)),o.Bb(2),o.Uc(o.nc(3,7,"TitlePlural")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.TitlePlural3)("ngModelOptions",o.vc(9,G9)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,z9,e,null==t.serverErrors?null:t.serverErrors.TitlePlural3))}}function iee(e,t){1&e&&o.Qb(0,"fa-icon",76)}function oee(e,t){1&e&&o.Rb(0)}function cee(e,t){1&e&&o.Rb(0)}function ree(e,t){1&e&&o.Rb(0)}function see(e,t){1&e&&o.Rb(0)}function lee(e,t){1&e&&o.Rb(0)}function aee(e,t){1&e&&o.Rb(0)}function uee(e,t){1&e&&o.Rb(0)}function dee(e,t){1&e&&o.Rb(0)}function bee(e,t){1&e&&o.Rb(0)}function fee(e,t){1&e&&o.Rb(0)}function mee(e,t){1&e&&o.Rb(0)}function gee(e,t){1&e&&o.Rb(0)}function pee(e,t){1&e&&o.Rb(0)}function hee(e,t){1&e&&o.Rb(0)}function vee(e,t){1&e&&o.Rb(0)}function Iee(e,t){1&e&&o.Rb(0)}function yee(e,t){1&e&&o.Rb(0)}function wee(e,t){1&e&&o.Rb(0)}function Cee(e,t){1&e&&o.Rb(0)}function Mee(e,t){1&e&&o.Rb(0)}function Vee(e,t){1&e&&o.Rb(0)}function Tee(e,t){1&e&&o.Rb(0)}function Eee(e,t){1&e&&o.Rb(0)}function xee(e,t){1&e&&o.Rb(0)}function Uee(e,t){1&e&&o.Rb(0)}function Ree(e,t){1&e&&o.Rb(0)}function Dee(e,t){1&e&&o.Rb(0)}function Bee(e,t){1&e&&o.Rb(0)}function See(e,t){1&e&&o.Rb(0)}function kee(e,t){1&e&&o.Rb(0)}function Oee(e,t){1&e&&o.Rb(0)}function _ee(e,t){1&e&&o.Rb(0)}function Lee(e,t){1&e&&o.Rb(0)}const Aee=function(e){return{0:e}};function Fee(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",52),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-relation-definitions-picker",89,90),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Relation1DefinitionId=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,Lee,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2).model,n=o.lc(),i=o.Fc(13);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Relation1DefinitionId)),o.Bb(2),o.Uc(o.oc(3,6,"Field0Definition",o.wc(11,Aee,o.nc(4,9,"Entity_Relation1")))),o.Bb(3),o.sc("ngModel",t.Relation1DefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(13,z9,e,null==t.serverErrors?null:t.serverErrors.Relation1DefinitionId))}}function Pee(e,t){1&e&&o.Rb(0)}function Nee(e,t){1&e&&o.Rb(0)}function jee(e,t){1&e&&o.Rb(0)}function Wee(e,t){if(1&e&&(o.Vb(0,"option",91),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function $ee(e,t){1&e&&o.Rb(0)}function qee(e,t){if(1&e&&(o.Vb(0,"option",91),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function Qee(e,t){1&e&&o.Rb(0)}function Hee(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",92),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",93,94),o.hc("ngModelChange",(function(n){o.Ic(e);const i=t.prop;return o.lc(2).model[i+"Visibility"]=n}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t)})),o.Rc(7,qee,2,2,"option",36),o.Ub(),o.Rc(8,Qee,1,0,"ng-container",25),o.Ub()}if(2&e){const e=t.prop,n=t.propLower,i=t.fieldName,c=o.Fc(6),r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(c,s.serverErrors(r,e+"Visibility"))),o.Bb(1),o.uc("for","",n,"visibility"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Visibility",o.wc(14,Aee,o.nc(4,12,i||"Entity_"+e)))),o.Bb(3),o.uc("id","",n,"visibility"),o.sc("ngModel",r[e+"Visibility"]),o.Bb(2),o.sc("ngForOf",s.visibilityChoices),o.Bb(1),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(16,z9,c,s.serverErrors(r,e+"Visibility")))}}function Gee(e,t){1&e&&o.Rb(0)}function zee(e,t){1&e&&o.Rb(0)}function Jee(e,t){1&e&&o.Rb(0)}function Kee(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",92),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",96,98),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).prop;return o.lc(2).model[n+"Label2"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label2")})),o.Ub(),o.Rc(7,Jee,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label2"))),o.Bb(1),o.uc("for","",i,"label2"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Label",o.wc(14,Aee,o.nc(4,12,c||"Entity_"+n)))+s.ws.secondaryPostfix),o.Bb(3),o.uc("id","",i,"label2"),o.sc("ngModel",r[n+"Label2"])("ngModelOptions",o.vc(16,G9)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(17,z9,e,s.serverErrors(r,n+"Label2")))}}function Yee(e,t){1&e&&o.Rb(0)}function Xee(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",92),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"input",96,99),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(2).prop;return o.lc(2).model[n+"Label3"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label3")})),o.Ub(),o.Rc(7,Yee,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(2),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label3"))),o.Bb(1),o.uc("for","",i,"label3"),o.Bb(1),o.Uc(o.oc(3,9,"Field0Label",o.wc(14,Aee,o.nc(4,12,c||"Entity_"+n)))+s.ws.ternaryPostfix),o.Bb(3),o.uc("id","",i,"label3"),o.sc("ngModel",r[n+"Label3"])("ngModelOptions",o.vc(16,G9)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(17,z9,e,s.serverErrors(r,n+"Label3")))}}function Zee(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",21),o.Vb(2,"label",92),o.Tc(3),o.mc(4,"translate"),o.mc(5,"translate"),o.Ub(),o.Vb(6,"input",96,97),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc().prop;return o.lc(2).model[n+"Label"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().prop,n=o.lc(2).model;return o.lc().onDefinitionChange(n,t+"Label")})),o.Ub(),o.Rc(8,zee,1,0,"ng-container",25),o.Ub(),o.Rc(9,Kee,8,20,"div",29),o.Rc(10,Xee,8,20,"div",29),o.Sb()}if(2&e){const e=o.Fc(7),t=o.lc(),n=t.prop,i=t.propLower,c=t.fieldName,r=o.lc(2).model,s=o.lc(),l=o.Fc(13);o.Bb(1),o.Gb("is-invalid",s.invalid(e,s.serverErrors(r,n+"Label"))),o.Bb(1),o.uc("for","",i,"label"),o.Bb(1),o.Uc(o.oc(4,11,"Field0Label",o.wc(16,Aee,o.nc(5,14,c||"Entity_"+n)))+s.ws.primaryPostfix),o.Bb(3),o.uc("id","",i,"label"),o.sc("ngModel",r[n+"Label"])("ngModelOptions",o.vc(18,G9)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(19,z9,e,s.serverErrors(r,n+"Label"))),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId)}}const ete=function(e,t,n){return{prop:e,propLower:t,fieldName:n}};function tte(e,t){if(1&e&&(o.Rc(0,Gee,1,0,"ng-container",25),o.Rc(1,Zee,11,22,"ng-container",95)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;o.lc();const c=o.Fc(101),r=o.lc().model,s=o.lc();o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.yc(3,ete,e,n,i)),o.Bb(1),o.sc("ngIf",s.isVisible(r[e+"Visibility"]))}}function nte(e,t){1&e&&o.Rb(0)}function ite(e,t){1&e&&o.Rb(0)}function ote(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",21),o.Vb(1,"label",52),o.Tc(2),o.mc(3,"translate"),o.mc(4,"translate"),o.Ub(),o.Vb(5,"t-lookup-definitions-picker",89,100),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc().prop;return o.lc(2).model[n+"DefinitionId"]=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(3).model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(7,ite,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(6),t=o.lc(),n=t.prop,i=t.fieldName,c=o.lc(2).model,r=o.lc(),s=o.Fc(13);o.Gb("is-invalid",r.invalid(e,r.serverErrors(c,n+"DefinitionId"))),o.Bb(2),o.Uc(o.oc(3,6,"Field0Definition",o.wc(11,Aee,o.nc(4,9,i||"Entity_"+n)))),o.Bb(3),o.sc("ngModel",c[n+"DefinitionId"]),o.Bb(2),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.xc(13,z9,e,r.serverErrors(c,n+"DefinitionId")))}}function cte(e,t){if(1&e&&(o.Rc(0,nte,1,0,"ng-container",25),o.Rc(1,ote,8,16,"div",29)),2&e){const e=t.prop,n=t.propLower,i=t.fieldName;o.lc();const c=o.Fc(103),r=o.lc().model,s=o.lc();o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.yc(3,ete,e,n,i)),o.Bb(1),o.sc("ngIf",s.isVisible(r[e+"Visibility"]))}}function rte(e,t){1&e&&o.Qb(0,"fa-icon",76)}function ste(e,t){1&e&&o.Rb(0)}function lte(e,t){1&e&&o.Rb(0)}function ate(e,t){1&e&&o.Qb(0,"fa-icon",76)}function ute(e,t){1&e&&o.Qb(0,"fa-icon",76)}function dte(e,t){1&e&&(o.Vb(0,"div",107),o.Tc(1," \u200c "),o.Ub())}function bte(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",101),o.Vb(1,"div",102),o.Rc(2,ute,1,0,"fa-icon",19),o.Vb(3,"span",103),o.Tc(4),o.Ub(),o.Vb(5,"button",45),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureReportDefinition(n,i)})),o.mc(6,"translate"),o.Qb(7,"fa-icon",104),o.Ub(),o.Tc(8," \xa0 "),o.Vb(9,"button",45),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteReportDefinition(n,i)})),o.mc(10,"translate"),o.Qb(11,"fa-icon",105),o.Ub(),o.Ub(),o.Rc(12,dte,2,0,"div",106),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(2),o.Vc(" ",n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),o.Bb(1),o.sc("title",o.nc(6,4,"Configure")),o.Bb(4),o.sc("title",o.nc(10,6,"Delete"))}}function fte(e,t){if(1&e&&(o.Vb(0,"span",108),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e," ")}}function mte(e,t){1&e&&o.Qb(0,"fa-icon",76)}function gte(e,t){if(1&e&&(o.Vb(0,"option",91),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function pte(e,t){1&e&&o.Rb(0)}function hte(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",109),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(2).model;return o.lc().onIconClick(i,n)})),o.Qb(1,"fa-icon",110),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(2).model;o.Gb("t-highlighted",e.value===n.MainMenuIcon),o.sc("title",e.value),o.Bb(1),o.sc("icon",e.value)}}function vte(e,t){1&e&&o.Rb(0)}function Ite(e,t){1&e&&o.Rb(0)}function yte(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",111),o.Vb(1,"div",112),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeHidden(t)})),o.Vb(2,"span",113),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Vb(5,"div",112),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeVisible(t)})),o.Vb(6,"span",113),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Ub(),o.Vb(9,"div",112),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onMakeArchived(t)})),o.Vb(10,"span",113),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(1),o.Gb("t-pointer","Hidden"!==e.State)("t-less-dark","Hidden"===e.State),o.Bb(2),o.Uc(o.nc(4,15,"Definition_State_Hidden")),o.Bb(2),o.Gb("t-pointer","Visible"!==e.State)("t-less-dark","Visible"===e.State),o.Bb(2),o.Uc(o.nc(8,17,"Definition_State_Visible")),o.Bb(2),o.Gb("t-pointer","Archived"!==e.State)("t-less-dark","Archived"===e.State),o.Bb(2),o.Uc(o.nc(12,19,"Definition_State_Archived"))}}const wte=function(){return{prop:"Currency",propLower:"currency"}},Cte=function(){return{prop:"Center",propLower:"center"}},Mte=function(){return{prop:"Image",propLower:"image",fieldName:"Image"}},Vte=function(){return{prop:"Description",propLower:"description",fieldName:"Description"}},Tte=function(){return{prop:"Location",propLower:"location"}},Ete=function(){return{prop:"FromDate",propLower:"fromdate"}},xte=function(){return{prop:"ToDate",propLower:"todate"}},Ute=function(){return{prop:"DateOfBirth",propLower:"dateofbirth",fieldName:"Relation_DateOfBirth"}},Rte=function(){return{prop:"ContactEmail",propLower:"contactemail"}},Dte=function(){return{prop:"ContactMobile",propLower:"contactmobile"}},Bte=function(){return{prop:"ContactAddress",propLower:"contactaddress"}},Ste=function(){return{prop:"Date1",propLower:"date1"}},kte=function(){return{prop:"Date2",propLower:"date2"}},Ote=function(){return{prop:"Date3",propLower:"date3"}},_te=function(){return{prop:"Date4",propLower:"date4"}},Lte=function(){return{prop:"Decimal1",propLower:"decimal1"}},Ate=function(){return{prop:"Decimal2",propLower:"decimal2"}},Fte=function(){return{prop:"Int1",propLower:"int1"}},Pte=function(){return{prop:"Int2",propLower:"int2"}},Nte=function(){return{prop:"Lookup1",propLower:"lookup1"}},jte=function(){return{prop:"Lookup2",propLower:"lookup2"}},Wte=function(){return{prop:"Lookup3",propLower:"lookup3"}},$te=function(){return{prop:"Lookup4",propLower:"lookup4"}},qte=function(){return{prop:"Lookup5",propLower:"lookup5"}},Qte=function(){return{prop:"Lookup6",propLower:"lookup6"}},Hte=function(){return{prop:"Lookup7",propLower:"lookup7"}},Gte=function(){return{prop:"Lookup8",propLower:"lookup8"}},zte=function(){return{prop:"Text1",propLower:"text1"}},Jte=function(){return{prop:"Text2",propLower:"text2"}},Kte=function(){return{prop:"Text3",propLower:"text3"}},Yte=function(){return{prop:"Text4",propLower:"text4"}},Xte=function(){return{prop:"Relation1",propLower:"relation1"}},Zte=function(){return{prop:"Agent",propLower:"agent",fieldName:"Relation_Agent"}},ene=function(){return{prop:"TaxIdentificationNumber",propLower:"taxidentificationnumber",fieldName:"Relation_TaxIdentificationNumber"}},tne=function(){return{prop:"BankAccountNumber",propLower:"bankaccountnumber",fieldName:"Relation_BankAccountNumber"}},nne=function(e){return{control:null,serverErrors:e}};function ine(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",10),o.Rc(1,W9,6,4,"div",11),o.Vb(2,"div",12),o.Vb(3,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleDefinition()})),o.Vb(4,"span"),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Vb(7,"div",14),o.Qb(8,"fa-icon",15),o.Ub(),o.Ub(),o.Vb(9,"div",16),o.Vb(10,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Title")})),o.Tc(11," \xa0 "),o.Qb(12,"fa-icon",18),o.Tc(13),o.mc(14,"translate"),o.Rc(15,$9,1,0,"fa-icon",19),o.Ub(),o.Vb(16,"div",20),o.Vb(17,"div",21),o.Vb(18,"label",22),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"input",23,24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Code")})),o.Ub(),o.Rc(23,q9,1,0,"ng-container",25),o.Ub(),o.Vb(24,"div",21),o.Vb(25,"label",26),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Vb(28,"input",27,28),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitleSingular=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitleSingular")})),o.Ub(),o.Rc(30,Q9,1,0,"ng-container",25),o.Ub(),o.Rc(31,J9,7,13,"div",29),o.Rc(32,Y9,7,13,"div",29),o.Vb(33,"div",21),o.Vb(34,"label",30),o.Tc(35),o.mc(36,"translate"),o.Ub(),o.Vb(37,"input",31,32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TitlePlural=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"TitlePlural")})),o.Ub(),o.Rc(39,X9,1,0,"ng-container",25),o.Ub(),o.Rc(40,eee,7,13,"div",29),o.Rc(41,nee,7,13,"div",29),o.Ub(),o.Vb(42,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Fields")})),o.Tc(43," \xa0 "),o.Qb(44,"fa-icon",18),o.Tc(45),o.mc(46,"translate"),o.Rc(47,iee,1,0,"fa-icon",19),o.Ub(),o.Vb(48,"div",20),o.Rc(49,oee,1,0,"ng-container",25),o.Rc(50,cee,1,0,"ng-container",25),o.Rc(51,ree,1,0,"ng-container",25),o.Rc(52,see,1,0,"ng-container",25),o.Rc(53,lee,1,0,"ng-container",25),o.Rc(54,aee,1,0,"ng-container",25),o.Rc(55,uee,1,0,"ng-container",25),o.Rc(56,dee,1,0,"ng-container",25),o.Rc(57,bee,1,0,"ng-container",25),o.Rc(58,fee,1,0,"ng-container",25),o.Rc(59,mee,1,0,"ng-container",25),o.Rc(60,gee,1,0,"ng-container",25),o.Rc(61,pee,1,0,"ng-container",25),o.Rc(62,hee,1,0,"ng-container",25),o.Rc(63,vee,1,0,"ng-container",25),o.Rc(64,Iee,1,0,"ng-container",25),o.Rc(65,yee,1,0,"ng-container",25),o.Rc(66,wee,1,0,"ng-container",25),o.Rc(67,Cee,1,0,"ng-container",25),o.Rc(68,Mee,1,0,"ng-container",25),o.Rc(69,Vee,1,0,"ng-container",25),o.Rc(70,Tee,1,0,"ng-container",25),o.Rc(71,Eee,1,0,"ng-container",25),o.Rc(72,xee,1,0,"ng-container",25),o.Rc(73,Uee,1,0,"ng-container",25),o.Rc(74,Ree,1,0,"ng-container",25),o.Rc(75,Dee,1,0,"ng-container",25),o.Rc(76,Bee,1,0,"ng-container",25),o.Rc(77,See,1,0,"ng-container",25),o.Rc(78,kee,1,0,"ng-container",25),o.Rc(79,Oee,1,0,"ng-container",25),o.Rc(80,_ee,1,0,"ng-container",25),o.Rc(81,Fee,8,16,"div",29),o.Rc(82,Pee,1,0,"ng-container",25),o.Rc(83,Nee,1,0,"ng-container",25),o.Rc(84,jee,1,0,"ng-container",25),o.Vb(85,"div",21),o.Vb(86,"label",33),o.Tc(87),o.mc(88,"translate"),o.Ub(),o.Vb(89,"select",34,35),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.UserCardinality=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Rc(91,Wee,2,2,"option",36),o.Ub(),o.Rc(92,$ee,1,0,"ng-container",25),o.Ub(),o.Vb(93,"div",21),o.Vb(94,"label",37),o.Tc(95),o.mc(96,"translate"),o.Ub(),o.Vb(97,"div",38),o.Vb(98,"input",39),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.HasAttachments=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Qb(99,"label",40),o.Ub(),o.Ub(),o.Rc(100,Hee,9,19,"ng-template",null,41,o.Sc),o.Rc(102,tte,2,7,"ng-template",null,42,o.Sc),o.Rc(104,cte,2,7,"ng-template",null,43,o.Sc),o.Ub(),o.Vb(106,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Scripts")})),o.Tc(107," \xa0 "),o.Qb(108,"fa-icon",18),o.Tc(109),o.mc(110,"translate"),o.Rc(111,rte,1,0,"fa-icon",19),o.Ub(),o.Vb(112,"div",20),o.Vb(113,"div",21),o.Vb(114,"label",44),o.Tc(115),o.mc(116,"translate"),o.Ub(),o.Tc(117,"\xa0 "),o.Vb(118,"button",45),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onEditScript("PreprocessScript",t)})),o.mc(119,"translate"),o.Qb(120,"fa-icon",46),o.Ub(),o.Vb(121,"textarea",47,48),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.PreprocessScript=t})),o.Ub(),o.Rc(123,ste,1,0,"ng-container",25),o.Ub(),o.Vb(124,"div",21),o.Vb(125,"label",49),o.Tc(126),o.mc(127,"translate"),o.Ub(),o.Tc(128,"\xa0 "),o.Vb(129,"button",45),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onEditScript("ValidateScript",t)})),o.mc(130,"translate"),o.Qb(131,"fa-icon",46),o.Ub(),o.Vb(132,"textarea",50,51),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ValidateScript=t})),o.Ub(),o.Rc(134,lte,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Vb(135,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Reports")})),o.Tc(136," \xa0 "),o.Qb(137,"fa-icon",18),o.Tc(138),o.mc(139,"translate"),o.Rc(140,ate,1,0,"fa-icon",19),o.Ub(),o.Vb(141,"div",20),o.Vb(142,"div",21),o.Vb(143,"label",52),o.Tc(144),o.mc(145,"translate"),o.Ub(),o.Tc(146,"\xa0 "),o.Vb(147,"button",45),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateReportDefinition(t)})),o.mc(148,"translate"),o.Qb(149,"fa-icon",53),o.Ub(),o.Vb(150,"div",54),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().rowDrop(t,n.ReportDefinitions)})),o.Rc(151,bte,13,8,"div",55),o.Ub(),o.Rc(152,fte,2,1,"span",56),o.Ub(),o.Ub(),o.Vb(153,"div",17),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Menu")})),o.Tc(154," \xa0 "),o.Qb(155,"fa-icon",18),o.Tc(156),o.mc(157,"translate"),o.Rc(158,mte,1,0,"fa-icon",19),o.Ub(),o.Vb(159,"div",20),o.Vb(160,"div",21),o.Vb(161,"label",57),o.Tc(162),o.mc(163,"translate"),o.Ub(),o.Vb(164,"select",58,59),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSection")})),o.Qb(166,"option",60),o.Rc(167,gte,2,2,"option",36),o.Ub(),o.Rc(168,pte,1,0,"ng-container",25),o.Ub(),o.Vb(169,"div",21),o.Vb(170,"label",61),o.Tc(171),o.mc(172,"translate"),o.Ub(),o.Vb(173,"div",62),o.Rc(174,hte,2,4,"div",63),o.Ub(),o.Rc(175,vte,1,0,"ng-container",25),o.Ub(),o.Vb(176,"div",21),o.Vb(177,"label",64),o.Tc(178),o.mc(179,"translate"),o.Ub(),o.Vb(180,"input",65,66),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.MainMenuSortKey=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"MainMenuSortKey")})),o.Ub(),o.Rc(182,Ite,1,0,"ng-container",25),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(183,"div",67),o.Vb(184,"div",68),o.Vb(185,"div",69),o.Vb(186,"span"),o.Tc(187),o.mc(188,"translate"),o.Ub(),o.Ub(),o.Rc(189,yte,13,21,"div",70),o.Ub(),o.Vb(190,"div",71),o.Qb(191,"t-relations-details",72),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(22),t=o.Fc(29),n=o.Fc(38),i=o.Fc(90),c=o.Fc(101),r=o.Fc(103),s=o.Fc(105),l=o.Fc(122),a=o.Fc(133),u=o.Fc(165),d=o.Fc(181),b=o.lc(),f=b.isEdit,m=b.model,g=o.lc(),p=o.Fc(13);o.Bb(1),o.sc("ngIf",f&&g.collapseDefinition),o.Bb(1),o.Gb("d-flex",f&&!g.collapseDefinition)("d-none",!f||g.collapseDefinition),o.Bb(3),o.Uc(o.nc(6,179,"Definition")),o.Bb(3),o.sc("flip",g.flipIcon(!1)),o.Bb(4),o.sc("flip",g.flipIcon(g.showSection("Title")))("rotate",g.rotateIcon(g.showSection("Title"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(14,181,"Title")," "),o.Bb(2),o.sc("ngIf",g.sectionErrors("Title",m)),o.Bb(1),o.Gb("d-none",!g.showSection("Title")),o.Bb(1),o.Gb("is-invalid",g.invalid(e,null==m.serverErrors?null:m.serverErrors.Code)),o.Bb(2),o.Uc(o.nc(20,183,"Code")),o.Bb(2),o.sc("ngModel",m.Code)("ngModelOptions",o.vc(221,G9)),o.Bb(2),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.xc(222,z9,e,null==m.serverErrors?null:m.serverErrors.Code)),o.Bb(1),o.Gb("is-invalid",g.invalid(t,null==m.serverErrors?null:m.serverErrors.TitleSingular)),o.Bb(2),o.Uc(o.nc(27,185,"TitleSingular")+g.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",m.TitleSingular)("ngModelOptions",o.vc(225,G9)),o.Bb(2),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.xc(226,z9,t,null==m.serverErrors?null:m.serverErrors.TitleSingular)),o.Bb(1),o.sc("ngIf",null==g.ws.settings?null:g.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==g.ws.settings?null:g.ws.settings.TernaryLanguageId),o.Bb(1),o.Gb("is-invalid",g.invalid(n,null==m.serverErrors?null:m.serverErrors.TitlePlural)),o.Bb(2),o.Uc(o.nc(36,187,"TitlePlural")+g.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",m.TitlePlural)("ngModelOptions",o.vc(229,G9)),o.Bb(2),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.xc(230,z9,n,null==m.serverErrors?null:m.serverErrors.TitlePlural)),o.Bb(1),o.sc("ngIf",null==g.ws.settings?null:g.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==g.ws.settings?null:g.ws.settings.TernaryLanguageId),o.Bb(3),o.sc("flip",g.flipIcon(g.showSection("Fields")))("rotate",g.rotateIcon(g.showSection("Fields"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(46,189,"Fields")," "),o.Bb(2),o.sc("ngIf",g.sectionErrors("Fields",m)),o.Bb(1),o.Gb("d-none",!g.showSection("Fields")),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(233,wte)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(234,Cte)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(235,Mte)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(236,Vte)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(237,Tte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(238,Ete)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(239,xte)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(240,Ute)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(241,Rte)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(242,Dte)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(243,Bte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(244,Ste)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(245,kte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(246,Ote)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(247,_te)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(248,Lte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(249,Ate)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(250,Fte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(251,Pte)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(252,Nte)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(253,jte)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(254,Wte)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(255,$te)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(256,qte)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(257,Qte)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(258,Hte)),o.Bb(1),o.sc("ngTemplateOutlet",s)("ngTemplateOutletContext",o.vc(259,Gte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(260,zte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(261,Jte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(262,Kte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(263,Yte)),o.Bb(1),o.sc("ngTemplateOutlet",r)("ngTemplateOutletContext",o.vc(264,Xte)),o.Bb(1),o.sc("ngIf",g.isVisible(m.Relation1Visibility)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(265,Zte)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(266,ene)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.vc(267,tne)),o.Bb(1),o.Gb("is-invalid",g.invalid(i,g.serverErrors(m,"UserCardinality"))),o.Bb(2),o.Uc(o.nc(88,191,"RelationDefinition_UserCardinality")),o.Bb(2),o.sc("ngModel",m.UserCardinality),o.Bb(2),o.sc("ngForOf",g.cardinalityChoices),o.Bb(1),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.xc(268,z9,i,g.serverErrors(m,"UserCardinality"))),o.Bb(3),o.Uc(o.nc(96,193,"Definition_HasAttachments")),o.Bb(3),o.sc("ngModel",m.HasAttachments),o.Bb(10),o.sc("flip",g.flipIcon(g.showSection("Scripts")))("rotate",g.rotateIcon(g.showSection("Scripts"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(110,195,"Scripts")," "),o.Bb(2),o.sc("ngIf",g.sectionErrors("Scripts",m)),o.Bb(1),o.Gb("d-none",!g.showSection("Scripts")),o.Bb(1),o.Gb("is-invalid",g.invalid(l,null==m.serverErrors?null:m.serverErrors.PreprocessScript)),o.Bb(2),o.Uc(o.nc(116,197,"Definition_PreprocessScript")),o.Bb(3),o.sc("title",o.nc(119,199,"Expand")),o.Bb(3),o.sc("ngModel",m.PreprocessScript)("ngModelOptions",o.vc(271,G9)),o.Bb(2),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.xc(272,z9,l,null==m.serverErrors?null:m.serverErrors.PreprocessScript)),o.Bb(1),o.Gb("is-invalid",g.invalid(a,null==m.serverErrors?null:m.serverErrors.ValidateScript)),o.Bb(2),o.Vc("",o.nc(127,201,"Definition_ValidateScript")," "),o.Bb(3),o.sc("title",o.nc(130,203,"Expand")),o.Bb(3),o.sc("ngModel",m.ValidateScript)("ngModelOptions",o.vc(275,G9)),o.Bb(2),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.xc(276,z9,a,null==m.serverErrors?null:m.serverErrors.ValidateScript)),o.Bb(3),o.sc("flip",g.flipIcon(g.showSection("Reports")))("rotate",g.rotateIcon(g.showSection("Reports"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(139,205,"Reports")," "),o.Bb(2),o.sc("ngIf",g.sectionErrors("Reports",m)),o.Bb(1),o.Gb("d-none",!g.showSection("Reports")),o.Bb(3),o.Uc(o.nc(145,207,"Definition_ReportDefinitions")),o.Bb(3),o.sc("title",o.nc(148,209,"Create")),o.Bb(4),o.sc("ngForOf",m.ReportDefinitions),o.Bb(1),o.sc("ngForOf",null==m.serverErrors?null:m.serverErrors.ReportDefinitions),o.Bb(3),o.sc("flip",g.flipIcon(g.showSection("Menu")))("rotate",g.rotateIcon(g.showSection("Menu"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(157,211,"Menu")," "),o.Bb(2),o.sc("ngIf",g.sectionErrors("Menu",m)),o.Bb(1),o.Gb("d-none",!g.showSection("Menu")),o.Bb(3),o.Uc(o.nc(163,213,"MainMenuSection")),o.Bb(2),o.sc("ngModel",m.MainMenuSection),o.Bb(3),o.sc("ngForOf",g.allMainMenuSections),o.Bb(1),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.xc(279,z9,u,null==m.serverErrors?null:m.serverErrors.MainMenuSection)),o.Bb(3),o.Uc(o.nc(172,215,"MainMenuIcon")),o.Bb(3),o.sc("ngForOf",g.allMainMenuIcons),o.Bb(1),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.wc(282,nne,null==m.serverErrors?null:m.serverErrors.MainMenuIcon)),o.Bb(3),o.Uc(o.nc(179,217,"MainMenuSortKey")),o.Bb(2),o.sc("ngModel",m.MainMenuSortKey)("ngModelOptions",o.vc(284,G9)),o.Bb(2),o.sc("ngTemplateOutlet",p)("ngTemplateOutletContext",o.xc(285,z9,d,null==m.serverErrors?null:m.serverErrors.MainMenuSortKey)),o.Bb(5),o.Uc(o.nc(188,219,"Preview")),o.Bb(2),o.sc("ngIf",!f),o.Bb(2),o.sc("previewDefinition",g.getForClient(m))}}function one(e,t){if(1&e&&o.Rc(0,ine,192,288,"div",9),2&e){const e=t.isEdit,n=o.lc();o.sc("ngIf",n.watchIsEdit(e))}}function cne(e,t){if(1&e&&(o.Vb(0,"span",115),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function rne(e,t){if(1&e&&(o.Tb(0),o.Rc(1,cne,2,1,"span",114),o.Sb()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(1),o.sc("ngForOf",i.errors(t,n))}}function sne(e,t){if(1&e&&o.Rc(0,rne,2,1,"ng-container",95),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}function lne(e,t){1&e&&o.Rb(0)}function ane(e,t){1&e&&o.Rb(0)}function une(e,t){1&e&&o.Rb(0)}function dne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",122),o.Vb(1,"label",133),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",134,135),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reportDefinitionToEdit.Name2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onItemToEditChange()})),o.Ub(),o.Rc(6,une,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(13);o.Gb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+t.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.reportDefinitionToEdit.Name2)("ngModelOptions",o.vc(9,G9)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,z9,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name2))}}function bne(e,t){1&e&&o.Rb(0)}function fne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",122),o.Vb(1,"label",136),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",137,138),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).reportDefinitionToEdit.Name3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).onItemToEditChange()})),o.Ub(),o.Rc(6,bne,1,0,"ng-container",25),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(13);o.Gb("is-invalid",t.invalid(e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3)),o.Bb(2),o.Uc(o.nc(3,7,"Name")+t.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.reportDefinitionToEdit.Name3)("ngModelOptions",o.vc(9,G9)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(10,z9,e,null==t.reportDefinitionToEdit.serverErrors?null:t.reportDefinitionToEdit.serverErrors.Name3))}}function mne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",116),o.Vb(1,"h5",117),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",118),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",119),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",120),o.Vb(8,"div",121),o.Vb(9,"div",122),o.Vb(10,"label",52),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"t-report-definitions-picker",123,124),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().reportDefinitionToEdit.ReportDefinitionId=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(15,lne,1,0,"ng-container",25),o.Ub(),o.Vb(16,"div",122),o.Vb(17,"label",125),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"input",126,127),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().reportDefinitionToEdit.Name=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().onItemToEditChange()})),o.Ub(),o.Rc(22,ane,1,0,"ng-container",25),o.Ub(),o.Rc(23,dne,7,13,"div",128),o.Rc(24,fne,7,13,"div",128),o.Ub(),o.Ub(),o.Vb(25,"div",129),o.Vb(26,"button",130),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(27,"fa-icon",131),o.Tc(28),o.mc(29,"translate"),o.Ub(),o.Vb(30,"button",132),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(31,"fa-icon",105),o.Tc(32),o.mc(33,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(14),t=o.Fc(21),n=o.lc(),i=o.Fc(13);o.Bb(2),o.Vc(" ",o.nc(3,19,"Configure")," "),o.Bb(7),o.Gb("is-invalid",n.invalid(e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),o.Bb(2),o.Uc(o.nc(12,21,"Definition_ReportDefinition")),o.Bb(2),o.sc("ngModel",n.reportDefinitionToEdit.ReportDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(29,z9,e,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.ReportDefinitionId)),o.Bb(1),o.Gb("is-invalid",n.invalid(t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),o.Bb(2),o.Uc(o.nc(19,23,"Name")+n.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",n.reportDefinitionToEdit.Name)("ngModelOptions",o.vc(32,G9)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(33,z9,t,null==n.reportDefinitionToEdit.serverErrors?null:n.reportDefinitionToEdit.serverErrors.Name)),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==n.ws.settings?null:n.ws.settings.TernaryLanguageId),o.Bb(2),o.sc("disabled",!n.reportDefinitionToEdit.ReportDefinitionId),o.Bb(2),o.Vc(" \xa0",o.nc(29,25,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(33,27,"Cancel")," ")}}function gne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",116),o.Vb(1,"h5",117),o.Tc(2),o.Ub(),o.Vb(3,"button",118),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(4,"span",119),o.Tc(5,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(6,"div",120),o.Vb(7,"div",139),o.Vb(8,"textarea",140,141),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().script=t}))("keydown",(function(t){o.Ic(e);const n=o.Fc(10);return o.lc().onScriptKeydown(n,t)})),o.Tc(11,"                "),o.Ub(),o.Ub(),o.Ub(),o.Vb(12,"div",129),o.Vb(13,"button",142),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(14,"fa-icon",131),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Vb(17,"button",142),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(18,"fa-icon",105),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Vc(" ",e.scriptModalLabel()," "),o.Bb(6),o.sc("ngModel",e.script),o.Bb(7),o.Vc(" \xa0",o.nc(16,4,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(20,6,"Cancel")," ")}}const pne=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},hne=function(e,t,n){return[e,t,n]};let vne=(()=>{class e extends gn.a{constructor(e,t,n,i){super(),this.workspace=e,this.api=t,this.translate=n,this.modalService=i,this.relationDefinitionsApi=this.api.relationDefinitionsApi(this.notifyDestruct$),this.expand="ReportDefinitions.ReportDefinition,Lookup1Definition,Lookup2Definition,Lookup3Definition,Lookup4Definition,\n  Lookup5Definition,Lookup6Definition,Lookup7Definition,Lookup8Definition,Relation1Definition,AttachmentsCategoryDefinition",this.create=()=>{const e={};this.ws.isPrimaryLanguage?e.TitleSingular=this.initialText:this.ws.isSecondaryLanguage?e.TitleSingular2=this.initialText:this.ws.isTernaryLanguage&&(e.TitleSingular3=this.initialText);for(const t of this.allVisibilityProps())e[t]="None";return e.UserCardinality="None",e.HasAttachments=!1,e.ReportDefinitions=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.ReportDefinitions&&t.ReportDefinitions.forEach(e=>{e.Id=null}),t}return console.error("Cloning a non existing item"),null},this.savePreprocessing=e=>{for(const t of this.allVisibilityProps())if("None"===e[t]){const n=t.substr(0,t.length-"Visibility".length);delete e[n+"Label"],delete e[n+"Label2"],delete e[n+"Label3"],delete e[n+"DefinitionId"]}},this.collapseDefinition=!1,this._isEdit=!1,this.isInactive=e=>null,this._sections={Title:!0,Fields:!1,Scripts:!1,Reports:!1,MainMenu:!1},this._currentModelModified=!1,this.onMakeHidden=e=>{e&&e.Id&&"Hidden"!==e.State&&this.relationDefinitionsApi.updateState([e.Id],{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeVisible=e=>{e&&e.Id&&"Visible"!==e.State&&this.relationDefinitionsApi.updateState([e.Id],{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.onMakeArchived=e=>{e&&e.Id&&"Archived"!==e.State&&this.relationDefinitionsApi.updateState([e.Id],{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))).subscribe({error:this.details.handleActionError})},this.showMakeHidden=e=>!!e&&"Hidden"!==e.State,this.showMakeVisible=e=>!!e&&"Visible"!==e.State,this.showMakeArchived=e=>!!e&&"Archived"!==e.State,this.hasStatePermission=e=>this.ws.canDo("relation-definitions","State",e.Id),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.itemToEditHasChanged=!1,this.relationDefinitionsApi=this.api.relationDefinitionsApi(this.notifyDestruct$)}allVisibilityProps(){const e=Object(_9.a)(this.workspace,this.translate).properties,t=[];for(const n of Object.keys(e))n.endsWith("Visibility")&&t.push(n);return t}get ws(){return this.workspace.currentTenant}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e),!0}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(fI.b)(e.serverErrors[t]))}sectionErrors(e,t){return"Title"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.Code)||Object(fI.b)(t.serverErrors.TitleSingular)||Object(fI.b)(t.serverErrors.TitleSingular2)||Object(fI.b)(t.serverErrors.TitleSingular3)||Object(fI.b)(t.serverErrors.TitlePlural)||Object(fI.b)(t.serverErrors.TitlePlural2)||Object(fI.b)(t.serverErrors.TitlePlural3)):"Fields"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.CurrencyVisibility)||Object(fI.b)(t.serverErrors.CenterVisibility)||Object(fI.b)(t.serverErrors.ImageVisibility)||Object(fI.b)(t.serverErrors.DescriptionVisibility)||Object(fI.b)(t.serverErrors.LocationVisibility)||Object(fI.b)(t.serverErrors.FromDateLabel)||Object(fI.b)(t.serverErrors.FromDateLabel2)||Object(fI.b)(t.serverErrors.FromDateLabel3)||Object(fI.b)(t.serverErrors.FromDateVisibility)||Object(fI.b)(t.serverErrors.ToDateLabel)||Object(fI.b)(t.serverErrors.ToDateLabel2)||Object(fI.b)(t.serverErrors.ToDateLabel3)||Object(fI.b)(t.serverErrors.ToDateVisibility)||Object(fI.b)(t.serverErrors.DateOfBirthVisibility)||Object(fI.b)(t.serverErrors.ContactEmailVisibility)||Object(fI.b)(t.serverErrors.ContactMobileVisibility)||Object(fI.b)(t.serverErrors.ContactAddressVisibility)||Object(fI.b)(t.serverErrors.Date1Label)||Object(fI.b)(t.serverErrors.Date1Label2)||Object(fI.b)(t.serverErrors.Date1Label3)||Object(fI.b)(t.serverErrors.Date1Visibility)||Object(fI.b)(t.serverErrors.Date2Label)||Object(fI.b)(t.serverErrors.Date2Label2)||Object(fI.b)(t.serverErrors.Date2Label3)||Object(fI.b)(t.serverErrors.Date2Visibility)||Object(fI.b)(t.serverErrors.Date3Label)||Object(fI.b)(t.serverErrors.Date3Label2)||Object(fI.b)(t.serverErrors.Date3Label3)||Object(fI.b)(t.serverErrors.Date3Visibility)||Object(fI.b)(t.serverErrors.Date4Label)||Object(fI.b)(t.serverErrors.Date4Label2)||Object(fI.b)(t.serverErrors.Date4Label3)||Object(fI.b)(t.serverErrors.Date4Visibility)||Object(fI.b)(t.serverErrors.Decimal1Label)||Object(fI.b)(t.serverErrors.Decimal1Label2)||Object(fI.b)(t.serverErrors.Decimal1Label3)||Object(fI.b)(t.serverErrors.Decimal1Visibility)||Object(fI.b)(t.serverErrors.Decimal2Label)||Object(fI.b)(t.serverErrors.Decimal2Label2)||Object(fI.b)(t.serverErrors.Decimal2Label3)||Object(fI.b)(t.serverErrors.Decimal2Visibility)||Object(fI.b)(t.serverErrors.Int1Label)||Object(fI.b)(t.serverErrors.Int1Label2)||Object(fI.b)(t.serverErrors.Int1Label3)||Object(fI.b)(t.serverErrors.Int1Visibility)||Object(fI.b)(t.serverErrors.Int2Label)||Object(fI.b)(t.serverErrors.Int2Label2)||Object(fI.b)(t.serverErrors.Int2Label3)||Object(fI.b)(t.serverErrors.Int2Visibility)||Object(fI.b)(t.serverErrors.Lookup1Label)||Object(fI.b)(t.serverErrors.Lookup1Label2)||Object(fI.b)(t.serverErrors.Lookup1Label3)||Object(fI.b)(t.serverErrors.Lookup1Visibility)||Object(fI.b)(t.serverErrors.Lookup1DefinitionId)||Object(fI.b)(t.serverErrors.Lookup2Label)||Object(fI.b)(t.serverErrors.Lookup2Label2)||Object(fI.b)(t.serverErrors.Lookup2Label3)||Object(fI.b)(t.serverErrors.Lookup2Visibility)||Object(fI.b)(t.serverErrors.Lookup2DefinitionId)||Object(fI.b)(t.serverErrors.Lookup3Label)||Object(fI.b)(t.serverErrors.Lookup3Label2)||Object(fI.b)(t.serverErrors.Lookup3Label3)||Object(fI.b)(t.serverErrors.Lookup3Visibility)||Object(fI.b)(t.serverErrors.Lookup3DefinitionId)||Object(fI.b)(t.serverErrors.Lookup4Label)||Object(fI.b)(t.serverErrors.Lookup4Label2)||Object(fI.b)(t.serverErrors.Lookup4Label3)||Object(fI.b)(t.serverErrors.Lookup4Visibility)||Object(fI.b)(t.serverErrors.Lookup4DefinitionId)||Object(fI.b)(t.serverErrors.Lookup5Label)||Object(fI.b)(t.serverErrors.Lookup5Label2)||Object(fI.b)(t.serverErrors.Lookup5Label3)||Object(fI.b)(t.serverErrors.Lookup5Visibility)||Object(fI.b)(t.serverErrors.Lookup5DefinitionId)||Object(fI.b)(t.serverErrors.Lookup6Label)||Object(fI.b)(t.serverErrors.Lookup6Label2)||Object(fI.b)(t.serverErrors.Lookup6Label3)||Object(fI.b)(t.serverErrors.Lookup6Visibility)||Object(fI.b)(t.serverErrors.Lookup6DefinitionId)||Object(fI.b)(t.serverErrors.Lookup7Label)||Object(fI.b)(t.serverErrors.Lookup7Label2)||Object(fI.b)(t.serverErrors.Lookup7Label3)||Object(fI.b)(t.serverErrors.Lookup7Visibility)||Object(fI.b)(t.serverErrors.Lookup7DefinitionId)||Object(fI.b)(t.serverErrors.Lookup8Label)||Object(fI.b)(t.serverErrors.Lookup8Label2)||Object(fI.b)(t.serverErrors.Lookup8Label3)||Object(fI.b)(t.serverErrors.Lookup8Visibility)||Object(fI.b)(t.serverErrors.Lookup8DefinitionId)||Object(fI.b)(t.serverErrors.Text1Label)||Object(fI.b)(t.serverErrors.Text1Label2)||Object(fI.b)(t.serverErrors.Text1Label3)||Object(fI.b)(t.serverErrors.Text1Visibility)||Object(fI.b)(t.serverErrors.Text2Label)||Object(fI.b)(t.serverErrors.Text2Label2)||Object(fI.b)(t.serverErrors.Text2Label3)||Object(fI.b)(t.serverErrors.Text2Visibility)||Object(fI.b)(t.serverErrors.Text3Label)||Object(fI.b)(t.serverErrors.Text3Label2)||Object(fI.b)(t.serverErrors.Text3Label3)||Object(fI.b)(t.serverErrors.Text3Visibility)||Object(fI.b)(t.serverErrors.Text4Label)||Object(fI.b)(t.serverErrors.Text4Label2)||Object(fI.b)(t.serverErrors.Text4Label3)||Object(fI.b)(t.serverErrors.Text4Visibility)||Object(fI.b)(t.serverErrors.Relation1Label)||Object(fI.b)(t.serverErrors.Relation1Label2)||Object(fI.b)(t.serverErrors.Relation1Label3)||Object(fI.b)(t.serverErrors.Relation1Visibility)||Object(fI.b)(t.serverErrors.Relation1DefinitionId)||Object(fI.b)(t.serverErrors.AgentVisibility)||Object(fI.b)(t.serverErrors.TaxIdentificationNumberVisibility)||Object(fI.b)(t.serverErrors.JobVisibility)||Object(fI.b)(t.serverErrors.BankAccountNumberVisibility)||Object(fI.b)(t.serverErrors.UserCardinality)||Object(fI.b)(t.serverErrors.HasAttachments)||Object(fI.b)(t.serverErrors.AttachmentsCategoryDefinitionId)):"Scripts"===e?!!t.serverErrors&&(Object(fI.b)(t.serverErrors.PreprocessScript)||Object(fI.b)(t.serverErrors.ValidateScript)):"Reports"===e?!!t.ReportDefinitions&&t.ReportDefinitions.some(e=>this.weakEntityErrors(e)):"MainMenu"===e&&!!t.serverErrors&&(Object(fI.b)(t.serverErrors.MainMenuIcon)||Object(fI.b)(t.serverErrors.MainMenuSection)||Object(fI.b)(t.serverErrors.MainMenuSortKey))}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}serverErrors(e,t){return e&&e.serverErrors?e.serverErrors[t]:null}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){if(!e)return null;if(this._currentModel!==e||this._currentModelModified){this._currentModelModified=!1,this._currentModel=e,this._getForClientResult=Object.assign({},e);for(const e of this.allVisibilityProps())"None"===this._getForClientResult[e]&&delete this._getForClientResult[e]}return this._getForClientResult}get visibilityChoices(){return this._visibilityChoices||(this._visibilityChoices=[{value:"None",name:()=>this.translate.instant("Visibility_None")},{value:"Optional",name:()=>this.translate.instant("Visibility_Optional")},{value:"Required",name:()=>this.translate.instant("Visibility_Required")}]),this._visibilityChoices}get cardinalityChoices(){return this._cardinalityChoices||(this._cardinalityChoices=[{value:"None",name:()=>this.translate.instant("Cardinality_None")},{value:"Single",name:()=>this.translate.instant("Cardinality_Single")},{value:"Multiple",name:()=>this.translate.instant("Cardinality_Multiple")}]),this._cardinalityChoices}isVisible(e){return"Optional"===e||"Required"===e}get allMainMenuSections(){const e=Object(_9.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(wi.c)(e)}get allMainMenuIcons(){const e=Object(_9.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(wi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}onItemToEditChange(){this.itemToEditHasChanged=!0}onCreateReportDefinition(e){const t={};this.reportDefinitionToEdit=t,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(n=>{n&&e.ReportDefinitions.push(t)},e=>{})}onConfigureReportDefinition(e,t){this.itemToEditHasChanged=!1;const n=Object.assign({},t.ReportDefinitions[e]);this.reportDefinitionToEdit=n,this.modalService.open(this.reportDefinitionModal,{windowClass:"t-dark-theme"}).result.then(i=>{i&&this.itemToEditHasChanged&&(t.ReportDefinitions[e]=n)},e=>{})}onDeleteReportDefinition(e,t){t.ReportDefinitions.splice(e,1),this.onDefinitionChange(t)}rowDrop(e,t){Object(W.i)(t,e.previousIndex,e.currentIndex)}onEditScript(e,t){this.script=t[e],this.scriptModalLabel=()=>this.translate.instant("Definition_"+e),this.modalService.open(this.scriptModal,{windowClass:"t-dark-theme t-details-modal"}).result.then(n=>{n&&(t[e]=this.script)},e=>{})}onScriptKeydown(e,t){Object(N.p)(e,t,e=>this.script=e)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-relation-definitions-details"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(L9,!0),o.Oc(A9,!0)),2&e&&(o.Ec(n=o.ic())&&(t.reportDefinitionModal=n.first),o.Ec(n=o.ic())&&(t.scriptModal=n.first))},features:[o.yb],decls:18,vars:36,consts:[["collection","RelationDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["makeHidden",""],["makeVisible",""],["makeArchived",""],["detailsCrumb",""],["document",""],["errorsTemplate",""],["reportDefinitionModal",""],["scriptModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","titlesingular",1,"small"],["id","titlesingular","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],["for","titleplural",1,"small"],["id","titleplural","type","text","autocomplete","off","required","",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural","ngModel"],["for","usercardinality",1,"small"],["id","usercardinality",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["usercardinality","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","hasattachments",1,"small"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","hasattachments",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","hasattachments",1,"custom-control-label"],["unlabeledProp",""],["labeledProp",""],["definitionedProp",""],["for","preprocessscript",1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","expand"],["rows","6","id","preprocessscript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["preprocessscript","ngModel"],["for","validatescript",1,"small"],["rows","6","id","validatescript","type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"form-control","t-studio-input","t-no-resize","t-code",3,"ngModel","ngModelOptions","ngModelChange"],["validatescript","ngModel"],[1,"small"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["class","small t-light-danger px-1",4,"ngFor","ngForOf"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[1,"d-flex","flex-column","flex-grow-1"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],["class","d-flex small",4,"ngIf"],[1,"flex-grow-1","col"],["mode","preview","idString","new",3,"previewDefinition"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","titlesingular2",1,"small"],["id","titlesingular2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular2","ngModel"],["for","titlesingular3",1,"small"],["id","titlesingular3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titlesingular3","ngModel"],["for","titleplural2",1,"small"],["id","titleplural2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural2","ngModel"],["for","titleplural3",1,"small"],["id","titleplural3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["titleplural3","ngModel"],["theme","dark",3,"ngModel","ngModelChange"],["relation1defId","ngModel"],[3,"value"],[1,"small",3,"for"],[1,"form-control","t-studio-input",3,"id","ngModel","ngModelChange"],["visibility","ngModel"],[4,"ngIf"],["type","text","autocomplete","off",1,"form-control","t-studio-input",3,"id","ngModel","ngModelOptions","ngModelChange"],["label","ngModel"],["label2","ngModel"],["label3","ngModel"],["defId","ngModel"],["cdkDrag","","cdkDragLockAxis","y",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"small","t-light-danger","px-1"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"d-flex","small"],[1,"p-2","px-3",3,"click"],[1,"t-vertical-align-middle"],["class","small t-light-danger",4,"ngFor","ngForOf"],[1,"small","t-light-danger"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12","col-sm-6"],["theme","dark","required","",3,"ngModel","ngModelChange"],["reportdefinitionmodel","ngModel"],["for","reportName",1,"small"],["id","reportName","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName","ngModel"],["class","form-group col-12 col-sm-6",3,"is-invalid",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"],["for","reportName2",1,"small"],["id","reportName2","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName2","ngModel"],["for","reportName3",1,"small"],["id","reportName3","type","text","autocomplete","no",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["reportName3","ngModel"],[1,"row","h-100","t-much-less-dark"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","ngbAutoFocus","",1,"w-100","h-100","form-control","t-studio-input","text-nowrap","t-code",3,"ngModel","ngModelChange","keydown"],["scriptnmodel","ngModel","pstextarea",""],[1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,F9,2,3,"ng-template",null,1,o.Sc),o.Rc(4,P9,2,3,"ng-template",null,2,o.Sc),o.Rc(6,N9,2,3,"ng-template",null,3,o.Sc),o.Rc(8,j9,3,3,"ng-template",null,4,o.Sc),o.Rc(10,one,1,1,"ng-template",null,5,o.Sc),o.Rc(12,sne,1,1,"ng-template",null,6,o.Sc),o.Rc(14,mne,34,36,"ng-template",null,7,o.Sc),o.Rc(16,gne,21,8,"ng-template",null,8,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"RelationDefinitions"))("detailsCrumb",c)("idString",t.idString)("documentTemplate",r)("actions",o.yc(32,hne,o.Ac(14,pne,e,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(20,pne,n,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(26,pne,i,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[j.a,x.u,ee.b,te.c,te.u,te.k,te.n,x.B,te.v,x.t,te.a,W.f,te.p,te.x,te.q,gh,lV,OS,W.b,W.d,hB],pipes:[Q.d],encapsulation:2}),e})();function Ine(e,t){if(1&e&&(o.Vb(0,"div",11),o.Vb(1,"span",12),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",13),o.Vb(4,"div",14),o.Qb(5,"t-auto-cell",15),o.Ub(),o.Qb(6,"t-auto-cell",16),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("RelationDefinition",e,"TitleSingular")),o.Bb(3),o.sc("entity",n.c[e]),o.Bb(1),o.sc("entity",n.c[e])}}function yne(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"RelationDefinition"),"\n")}function wne(e,t){if(1&e&&(o.Vb(0,"span",17),o.Qb(1,"t-auto-cell",18),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function Cne(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SavedByMe")," ")}function Mne(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Hidden")," ")}function Vne(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Visible")," ")}function Tne(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_State_Archived")," ")}function Ene(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Hide")," ")}function xne(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Show")," ")}function Une(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Definition_Archive")," ")}const Rne=function(e,t,n,i,o){return{template:e,action:t,showAction:n,canAction:i,actionTooltip:o}},Dne=function(e,t,n){return[e,t,n]},Bne=function(e){return{template:e,expression:"SavedById eq me"}},Sne=function(e){return[e]},kne=function(e){return{template:e,expression:"State eq 'Hidden'"}},One=function(e){return{template:e,expression:"State eq 'Visible'"}},_ne=function(e){return{template:e,expression:"State eq 'Archived'"}},Lne=function(e,t){return{SavedBy:e,State:t}};let Ane=(()=>{class e extends Ut.a{constructor(e,t,n){super(),this.workspace=e,this.api=t,this.translate=n,this.relationDefinitionsApi=this.api.relationDefinitionsApi(this.notifyDestruct$),this.expand="",this.onMakeHidden=e=>this.relationDefinitionsApi.updateState(e,{state:"Hidden",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeHidden=e=>e.some(e=>{const t=this.ws.get("RelationDefinition",e);return!!t&&"Hidden"!==t.State}),this.onMakeVisible=e=>this.relationDefinitionsApi.updateState(e,{state:"Visible",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeVisible=e=>e.some(e=>{const t=this.ws.get("RelationDefinition",e);return!!t&&"Visible"!==t.State}),this.onMakeArchived=e=>this.relationDefinitionsApi.updateState(e,{state:"Archived",returnEntities:!0}).pipe(Object(A.a)(e=>Object(N.c)(e,this.workspace))),this.showMakeArchived=e=>e.some(e=>{const t=this.ws.get("RelationDefinition",e);return!!t&&"Archived"!==t.State}),this.hasStatePermission=e=>this.ws.canDo("relation-definitions","State",null),this.stateTooltip=e=>this.hasStatePermission(e)?"":this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"),this.relationDefinitionsApi=this.api.relationDefinitionsApi(this.notifyDestruct$)}get c(){return this.ws.RelationDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(J.a),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-relation-definitions-master"]],features:[o.yb],decls:22,vars:51,consts:[["collection","RelationDefinition","selectDefault","Code,State","selectForTiles","Code,State","theme","dark",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["savedByMe",""],["hidden",""],["visible",""],["archived",""],["makeHidden",""],["makeVisible",""],["makeArchived",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate","flex-grow-1"],["collection","RelationDefinition","path","Code",3,"entity"],["collection","RelationDefinition","path","State",3,"entity"],[1,"text-truncate"],["collection","RelationDefinition",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,Ine,7,3,"ng-template",null,1,o.Sc),o.Rc(4,yne,2,3,"ng-template",null,2,o.Sc),o.Rc(6,wne,2,1,"ng-template",null,3,o.Sc),o.Rc(8,Cne,2,3,"ng-template",null,4,o.Sc),o.Rc(10,Mne,2,3,"ng-template",null,5,o.Sc),o.Rc(12,Vne,2,3,"ng-template",null,6,o.Sc),o.Rc(14,Tne,2,3,"ng-template",null,7,o.Sc),o.Rc(16,Ene,2,3,"ng-template",null,8,o.Sc),o.Rc(18,xne,2,3,"ng-template",null,9,o.Sc),o.Rc(20,Une,2,3,"ng-template",null,10,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13),l=o.Fc(15),a=o.Fc(17),u=o.Fc(19),d=o.Fc(21);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,10,"RelationDefinitions"))("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.yc(30,Dne,o.Ac(12,Rne,a,t.onMakeHidden,t.showMakeHidden,t.hasStatePermission,t.stateTooltip),o.Ac(18,Rne,u,t.onMakeVisible,t.showMakeVisible,t.hasStatePermission,t.stateTooltip),o.Ac(24,Rne,d,t.onMakeArchived,t.showMakeArchived,t.hasStatePermission,t.stateTooltip)))("filterDefinition",o.xc(48,Lne,o.wc(36,Sne,o.wc(34,Bne,c)),o.yc(44,Dne,o.wc(38,kne,r),o.wc(40,One,s),o.wc(42,_ne,l))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();const Fne=["errorModal"];function Pne(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"t-form-group",10),o.Vb(2,"t-relations-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).relationId=t}))("entityLoaded",(function(){return o.Ic(e),o.lc(2).onParameterLoaded()})),o.Ub(),o.Ub(),o.Sb()}if(2&e){const e=o.lc(2);o.Bb(1),o.sc("label",e.labelRelation_Smart),o.Bb(1),o.sc("ngModel",e.relationId)("definitionIds",e.definitionIdsRelation_Smart)("additionalSelect",e.relationAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function Nne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Vb(2,"t-currencies-picker",37),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).currencyId=t})),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.sc("label",o.nc(1,5,"Entry_Currency")),o.Bb(2),o.sc("ngModel",e.currencyId)("additionalSelect",e.currencyAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function jne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).custodianId=t})),o.Ub()}if(2&e){const e=o.lc(4);o.sc("ngModel",e.custodianId)("definitionIds",e.definitionIdsCustodian_Manual)("showCreate",!1)}}function Wne(e,t){if(1&e&&(o.Vb(0,"t-view-link",41),o.Tc(1),o.Ub()),2&e){const e=o.lc(4);var n;const t=e.link("relations/")+(null==(n=e.ws.get("Relation",e.readonlyValueCustodianId_Manual))?null:n.DefinitionId);o.sc("link",t)("itemId",e.readonlyValueCustodianId_Manual),o.Bb(1),o.Vc(" ",e.ws.getMultilingualValue("Relation",e.readonlyValueCustodianId_Manual,"Name")," ")}}function $ne(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.Rc(1,jne,1,3,"t-relations-picker",38),o.Rc(2,Wne,2,3,"t-view-link",39),o.Ub()),2&e){const e=o.lc(3);o.sc("label",e.labelCustodian_Manual),o.Bb(1),o.sc("ngIf",!e.readonlyCustodian_Manual),o.Bb(1),o.sc("ngIf",e.readonlyCustodian_Manual)}}function qne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custodies-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).custodyId=t}))("entityLoaded",(function(){return o.Ic(e),o.lc(4).onParameterLoaded()})),o.Ub()}if(2&e){const e=o.lc(4);o.sc("ngModel",e.custodyId)("definitionIds",e.definitionIdsCustody_Manual)("additionalSelect",e.custodyAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function Qne(e,t){if(1&e&&(o.Vb(0,"t-view-link",41),o.Tc(1),o.Ub()),2&e){const e=o.lc(4);var n;const t=e.link("custodies/")+(null==(n=e.ws.get("Custody",e.readonlyValueCustodyId_Manual))?null:n.DefinitionId);o.sc("link",t)("itemId",e.readonlyValueCustodyId_Manual),o.Bb(1),o.Vc(" ",e.ws.getMultilingualValue("Custody",e.readonlyValueCustodyId_Manual,"Name")," ")}}function Hne(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.Rc(1,qne,1,5,"t-custodies-picker",42),o.Rc(2,Qne,2,3,"t-view-link",39),o.Ub()),2&e){const e=o.lc(3);o.sc("label",e.labelCustody_Manual),o.Bb(1),o.sc("ngIf",!e.readonlyCustody_Manual),o.Bb(1),o.sc("ngIf",e.readonlyCustody_Manual)}}function Gne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-relations-picker",40),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).participantId=t})),o.Ub()}if(2&e){const e=o.lc(4);o.sc("ngModel",e.participantId)("definitionIds",e.definitionIdsParticipant_Manual)("showCreate",!1)}}function zne(e,t){if(1&e&&(o.Vb(0,"t-view-link",41),o.Tc(1),o.Ub()),2&e){const e=o.lc(4);var n;const t=e.link("relations/")+(null==(n=e.ws.get("Relation",e.readonlyValueParticipantId_Manual))?null:n.DefinitionId);o.sc("link",t)("itemId",e.readonlyValueParticipantId_Manual),o.Bb(1),o.Vc(" ",e.ws.getMultilingualValue("Relation",e.readonlyValueParticipantId_Manual,"Name")," ")}}function Jne(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.Rc(1,Gne,1,3,"t-relations-picker",38),o.Rc(2,zne,2,3,"t-view-link",39),o.Ub()),2&e){const e=o.lc(3);o.sc("label",e.labelParticipant_Manual),o.Bb(1),o.sc("ngIf",!e.readonlyParticipant_Manual),o.Bb(1),o.sc("ngIf",e.readonlyParticipant_Manual)}}function Kne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-resources-picker",34),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).resourceId=t}))("entityLoaded",(function(){return o.Ic(e),o.lc(4).onParameterLoaded()})),o.Ub()}if(2&e){const e=o.lc(4);o.sc("ngModel",e.resourceId)("definitionIds",e.definitionIdsResource_Manual)("additionalSelect",e.resourceAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1)}}function Yne(e,t){if(1&e&&(o.Vb(0,"t-view-link",41),o.Tc(1),o.Ub()),2&e){const e=o.lc(4);var n;const t=e.link("resources/")+(null==(n=e.ws.get("Resource",e.readonlyValueResourceId_Manual))?null:n.DefinitionId);o.sc("link",t)("itemId",e.readonlyValueResourceId_Manual),o.Bb(1),o.Vc(" ",e.ws.getMultilingualValue("Resource",e.readonlyValueResourceId_Manual,"Name")," ")}}function Xne(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.Rc(1,Kne,1,5,"t-resources-picker",42),o.Rc(2,Yne,2,3,"t-view-link",39),o.Ub()),2&e){const e=o.lc(3);o.sc("label",e.labelResource_Manual),o.Bb(1),o.sc("ngIf",!e.readonlyResource_Manual),o.Bb(1),o.sc("ngIf",e.readonlyResource_Manual)}}function Zne(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-entry-types-picker",44),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).entryTypeId=t})),o.Ub()}if(2&e){const e=o.lc(4);o.sc("ngModel",e.entryTypeId)("filter",e.filterEntryType_Manual)("showCreate",!1)}}function eie(e,t){if(1&e&&(o.Vb(0,"t-view-link",41),o.Tc(1),o.Ub()),2&e){const e=o.lc(4);o.sc("link",e.link("entry-types"))("itemId",e.readonlyValueEntryTypeId_Manual),o.Bb(1),o.Vc(" ",e.ws.getMultilingualValue("EntryType",e.readonlyValueEntryTypeId_Manual,"Name")," ")}}function tie(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,Zne,1,3,"t-entry-types-picker",43),o.Rc(3,eie,2,3,"t-view-link",39),o.Ub()),2&e){const e=o.lc(3);o.sc("label",o.nc(1,3,"Entry_EntryType")),o.Bb(2),o.sc("ngIf",!e.readonlyEntryType_Manual),o.Bb(1),o.sc("ngIf",e.readonlyEntryType_Manual)}}function nie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-centers-picker",46),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(4).centerId=t})),o.Ub()}if(2&e){const e=o.lc(4);o.sc("ngModel",e.centerId)("showCreate",!1)}}function iie(e,t){if(1&e&&(o.Vb(0,"t-view-link",41),o.Tc(1),o.Ub()),2&e){const e=o.lc(4);o.sc("link",e.link("centers"))("itemId",e.readonlyValueCenterId_Manual),o.Bb(1),o.Vc(" ",e.ws.getMultilingualValue("Center",e.readonlyValueCenterId_Manual,"Name")," ")}}function oie(e,t){if(1&e&&(o.Vb(0,"t-form-group",10),o.mc(1,"translate"),o.Rc(2,nie,1,2,"t-centers-picker",45),o.Rc(3,iie,2,3,"t-view-link",39),o.Ub()),2&e){const e=o.lc(3);o.sc("label",o.nc(1,3,"Entry_Center")),o.Bb(2),o.sc("ngIf",!e.readonlyCenter_Manual),o.Bb(1),o.sc("ngIf",e.readonlyCenter_Manual)}}function cie(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"t-form-group",10),o.mc(2,"translate"),o.Vb(3,"t-accounts-picker",35),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).accountId=t}))("entityLoaded",(function(){return o.Ic(e),o.lc(2).onParameterLoaded()})),o.Ub(),o.Ub(),o.Rc(4,Nne,3,7,"t-form-group",36),o.Rc(5,$ne,3,3,"t-form-group",36),o.Rc(6,Hne,3,3,"t-form-group",36),o.Rc(7,Jne,3,3,"t-form-group",36),o.Rc(8,Xne,3,3,"t-form-group",36),o.Rc(9,tie,4,5,"t-form-group",36),o.Rc(10,oie,4,5,"t-form-group",36),o.Sb()}if(2&e){const e=o.lc(2);o.Bb(1),o.sc("label",o.nc(2,12,"Entry_Account")+" *"),o.Bb(2),o.sc("ngModel",e.accountId)("additionalSelect",e.accountAdditionalSelect)("ensureAdditionalSelect",!0)("showCreate",!1),o.Bb(1),o.sc("ngIf",e.showCurrencyParameter),o.Bb(1),o.sc("ngIf",e.showCustodianParameter),o.Bb(1),o.sc("ngIf",e.showCustodyParameter),o.Bb(1),o.sc("ngIf",e.showParticipantParameter),o.Bb(1),o.sc("ngIf",e.showResourceParameter),o.Bb(1),o.sc("ngIf",e.showEntryTypeParameter),o.Bb(1),o.sc("ngIf",e.showCenterParameter)}}function rie(e,t){1&e&&o.Qb(0,"t-spinner",47)}function sie(e,t){if(1&e&&(o.Vb(0,"div",48),o.Qb(1,"fa-icon",49),o.Tc(2),o.Ub()),2&e){const e=o.lc(2);o.Bb(2),o.Vc(" \xa0 ",e.information()," ")}}function lie(e,t){if(1&e&&(o.Vb(0,"th"),o.Tc(1),o.Ub()),2&e){const e=t.$implicit,n=o.lc(3);o.Qc("width",n.fromWeight(e.weight)),o.Gb("text-right",e.isRightAligned),o.Bb(1),o.Vc(" ",e.label()," ")}}function aie(e,t){if(1&e&&(o.Tb(0),o.Tc(1),o.mc(2,"dateFormat"),o.Sb()),2&e){const e=o.lc(5);o.Bb(1),o.Vc(" ",o.nc(2,1,e.fromDate)," ")}}function uie(e,t){1&e&&(o.Tb(0),o.Tc(1),o.mc(2,"translate"),o.Sb()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"OpeningBalance")," "))}function die(e,t){if(1&e&&(o.Tb(0),o.Tc(1),o.Sb()),2&e){const e=o.lc(5);o.Bb(1),o.Vc(" \u200c",e.openingQuantityDisplay,"\u200c ")}}function bie(e,t){if(1&e&&(o.Tb(0),o.Tc(1),o.Sb()),2&e){const e=o.lc(5);o.Bb(1),o.Vc(" \u200c",e.openingMonetaryValueDisplay,"\u200c ")}}function fie(e,t){if(1&e&&(o.Tb(0),o.Tc(1),o.Sb()),2&e){const e=o.lc(5);o.Bb(1),o.Vc(" \u200c",e.openingDisplay,"\u200c ")}}function mie(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,aie,3,3,"ng-container",62),o.Rc(2,uie,3,3,"ng-container",62),o.Rc(3,die,2,1,"ng-container",62),o.Rc(4,bie,2,1,"ng-container",62),o.Rc(5,fie,2,1,"ng-container",62),o.Ub()),2&e){const e=t.$implicit;o.Gb("text-right",e.isRightAligned),o.Bb(1),o.sc("ngIf","PostingDate"===e.id),o.Bb(1),o.sc("ngIf","SerialNumber"===e.id),o.Bb(1),o.sc("ngIf","QuantityAccumulation"===e.id),o.Bb(1),o.sc("ngIf","MonetaryValueAccumulation"===e.id),o.Bb(1),o.sc("ngIf","Accumulation"===e.id)}}function gie(e,t){if(1&e&&(o.Vb(0,"tr",60),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Rc(3,mie,6,7,"td",61),o.Vb(4,"td"),o.Tc(5,"\u200c"),o.Ub(),o.Ub()),2&e){const e=o.lc(3);o.Bb(3),o.sc("ngForOf",e.columns)}}function pie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr",63),o.hc("click",(function(){return o.Ic(e),o.lc(3).onPreviousPage()})),o.Vb(1,"td",64),o.Tc(2,"..."),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(1),o.sc("colSpan",e.columns.length+2)}}function hie(e,t){if(1&e&&(o.Vb(0,"td"),o.Tc(1),o.Ub()),2&e){const e=t.$implicit,n=o.lc().$implicit;o.Gb("text-right",e.isRightAligned),o.Bb(1),o.Vc(" ",e.display(n),"\u200c ")}}function vie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr",63),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc(3).onSelectRow(n)})),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Rc(3,hie,2,3,"td",61),o.Vb(4,"td"),o.Tc(5,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(3),o.sc("ngForOf",e.columns)}}function Iie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr",63),o.hc("click",(function(){return o.Ic(e),o.lc(3).onNextPage()})),o.Vb(1,"td",64),o.Tc(2,"..."),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(1),o.sc("colSpan",e.columns.length+2)}}function yie(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"span"),o.Tc(2),o.mc(3,"dateFormat"),o.Ub(),o.Sb()),2&e){const e=o.lc(5);o.Bb(2),o.Uc(o.nc(3,1,e.toDate))}}function wie(e,t){1&e&&(o.Tb(0),o.Vb(1,"span"),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Sb()),2&e&&(o.Bb(2),o.Uc(o.nc(3,1,"ClosingBalance")))}function Cie(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"span",65),o.Tc(2),o.Ub(),o.Sb()),2&e){const e=o.lc(5);o.Bb(2),o.Vc("\u200c",e.closingDisplay,"\u200c")}}function Mie(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"span",65),o.Tc(2),o.Ub(),o.Sb()),2&e){const e=o.lc(5);o.Bb(2),o.Vc("\u200c",e.closingQuantityDisplay,"\u200c")}}function Vie(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"span",65),o.Tc(2),o.Ub(),o.Sb()),2&e){const e=o.lc(5);o.Bb(2),o.Vc("\u200c",e.closingMonetaryValueDisplay,"\u200c")}}function Tie(e,t){if(1&e&&(o.Vb(0,"td"),o.Rc(1,yie,4,3,"ng-container",62),o.Rc(2,wie,4,3,"ng-container",62),o.Rc(3,Cie,3,1,"ng-container",62),o.Rc(4,Mie,3,1,"ng-container",62),o.Rc(5,Vie,3,1,"ng-container",62),o.Ub()),2&e){const e=t.$implicit;o.Gb("text-right",e.isRightAligned),o.Bb(1),o.sc("ngIf","PostingDate"===e.id),o.Bb(1),o.sc("ngIf","SerialNumber"===e.id),o.Bb(1),o.sc("ngIf","Accumulation"===e.id),o.Bb(1),o.sc("ngIf","QuantityAccumulation"===e.id),o.Bb(1),o.sc("ngIf","MonetaryValueAccumulation"===e.id)}}function Eie(e,t){if(1&e&&(o.Vb(0,"tr",60),o.Vb(1,"td"),o.Tc(2,"\u200c"),o.Ub(),o.Rc(3,Tie,6,7,"td",61),o.Vb(4,"td"),o.Tc(5,"\u200c"),o.Ub(),o.Ub()),2&e){const e=o.lc(3);o.Bb(3),o.sc("ngForOf",e.columns)}}function xie(e,t){1&e&&(o.Vb(0,"div",66),o.Qb(1,"t-spinner",67),o.Ub()),2&e&&(o.Bb(1),o.sc("scale",2))}function Uie(e,t){if(1&e&&(o.Vb(0,"div",68),o.Vb(1,"t-error-message"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(3);o.Bb(2),o.Vc(" ",e.errorMessage," ")}}function Rie(e,t){if(1&e&&(o.Vb(0,"div",50),o.Vb(1,"cdk-virtual-scroll-viewport",51),o.Vb(2,"table",52),o.Vb(3,"thead"),o.Vb(4,"tr"),o.Qb(5,"th",53),o.Rc(6,lie,2,5,"th",54),o.Qb(7,"th",53),o.Ub(),o.Ub(),o.Vb(8,"tbody"),o.Rc(9,gie,6,1,"tr",55),o.Rc(10,pie,3,1,"tr",56),o.Rc(11,vie,6,1,"tr",57),o.Rc(12,Iie,3,1,"tr",56),o.Rc(13,Eie,6,1,"tr",55),o.Ub(),o.Ub(),o.Rc(14,xie,2,1,"div",58),o.Rc(15,Uie,3,1,"div",59),o.Ub(),o.Ub()),2&e){const e=o.lc(2);o.Bb(6),o.sc("ngForOf",e.columns),o.Bb(3),o.sc("ngIf",e.showOpeningBalance),o.Bb(1),o.sc("ngIf",e.canPreviousPage),o.Bb(1),o.sc("cdkVirtualForOf",e.entities),o.Bb(1),o.sc("ngIf",e.canNextPage),o.Bb(1),o.sc("ngIf",e.showClosingBalance),o.Bb(1),o.sc("ngIf",e.showSpinner),o.Bb(1),o.sc("ngIf",e.showErrorMessage)}}const Die=function(){return{updateOn:"blur"}};function Bie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",3),o.Vb(1,"div",4),o.Vb(2,"div",5),o.Vb(3,"ul",6),o.Vb(4,"li",7),o.Tc(5),o.Ub(),o.Ub(),o.Ub(),o.Vb(6,"div",8),o.Vb(7,"div",9),o.Vb(8,"t-form-group",10),o.mc(9,"translate"),o.Vb(10,"t-date-picker",11),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().fromDate=t})),o.Ub(),o.Ub(),o.Vb(11,"t-form-group",10),o.mc(12,"translate"),o.Vb(13,"t-date-picker",11),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().toDate=t})),o.Ub(),o.Ub(),o.Rc(14,Pne,3,6,"ng-container",12),o.Rc(15,cie,11,14,"ng-container",12),o.Vb(16,"t-form-group",10),o.mc(17,"translate"),o.Vb(18,"div",13),o.Vb(19,"input",14),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().includeCompleted=t})),o.Ub(),o.Vb(20,"label",15),o.Tc(21,"\u200c"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(22,"div",16),o.Vb(23,"div",17),o.Vb(24,"button",18),o.hc("click",(function(){return o.Ic(e),o.lc().onExport()})),o.Qb(25,"fa-icon",19),o.Vb(26,"span",20),o.Tc(27),o.mc(28,"translate"),o.Ub(),o.Ub(),o.Rc(29,rie,1,0,"t-spinner",21),o.Ub(),o.Vb(30,"div"),o.Vb(31,"button",22),o.hc("click",(function(){return o.Ic(e),o.lc().onRefresh()})),o.mc(32,"translate"),o.Qb(33,"fa-icon",23),o.Ub(),o.Vb(34,"div",24),o.Vb(35,"span",25),o.Vb(36,"span"),o.Tc(37),o.mc(38,"number"),o.Ub(),o.Tc(39," - "),o.Vb(40,"span"),o.Tc(41),o.mc(42,"number"),o.Ub(),o.Ub(),o.Vb(43,"span",25),o.Tc(44),o.Ub(),o.Ub(),o.Vb(45,"button",26),o.hc("click",(function(){return o.Ic(e),o.lc().onPreviousPage()})),o.mc(46,"translate"),o.Qb(47,"fa-icon",27),o.Ub(),o.Vb(48,"button",26),o.hc("click",(function(){return o.Ic(e),o.lc().onNextPage()})),o.mc(49,"translate"),o.Qb(50,"fa-icon",28),o.Ub(),o.Vb(51,"button",29),o.hc("click",(function(){return o.Ic(e),o.lc().onToggleCollapseParameters()})),o.mc(52,"translate"),o.Qb(53,"fa-icon",30),o.Vb(54,"span",20),o.Tc(55),o.mc(56,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(57,"div",31),o.Rc(58,sie,3,1,"div",32),o.Rc(59,Rie,16,8,"div",33),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(5),o.Vc(" ",e.title," "),o.Bb(1),o.Gb("d-none",e.collapseParameters),o.Bb(1),o.sc("ngSwitch",e.type),o.Bb(1),o.sc("label",o.nc(9,32,"FromDate")+" *"),o.Bb(2),o.sc("ngModel",e.fromDate)("ngModelOptions",o.vc(54,Die)),o.Bb(1),o.sc("label",o.nc(12,34,"ToDate")+" *"),o.Bb(2),o.sc("ngModel",e.toDate)("ngModelOptions",o.vc(55,Die)),o.Bb(1),o.sc("ngSwitchCase","relation"),o.Bb(1),o.sc("ngSwitchCase","account"),o.Bb(1),o.sc("label",o.nc(17,36,"IncludeCompleted")),o.Bb(3),o.sc("ngModel",e.includeCompleted),o.Bb(5),o.sc("disabled",!e.canExport),o.Bb(3),o.Vc("\xa0\xa0",o.nc(28,38,"Export"),""),o.Bb(2),o.sc("ngIf",e.showExportSpinner),o.Bb(2),o.tc("title",o.nc(32,40,"Refresh")),o.Bb(6),o.Uc(o.nc(38,42,e.from)),o.Bb(4),o.Uc(o.nc(42,44,e.to)),o.Bb(3),o.Vc(" / ",e.totalDisplay,""),o.Bb(1),o.tc("title",o.nc(46,46,"Previous")),o.sc("disabled",!e.canPreviousPage),o.Bb(2),o.sc("flip",e.flip),o.Bb(1),o.tc("title",o.nc(49,48,"Next")),o.sc("disabled",!e.canNextPage),o.Bb(2),o.sc("flip",e.flip),o.Bb(1),o.tc("title",o.nc(52,50,e.collapseParameters?"Expand":"Collapse")),o.Bb(2),o.sc("icon",e.collapseParameters?"angle-down":"angle-up"),o.Bb(2),o.Vc("\xa0\xa0",o.nc(56,52,e.collapseParameters?"Expand":"Collapse"),""),o.Bb(3),o.sc("ngIf",e.showInformation),o.Bb(1),o.sc("ngIf",!e.showInformation)}}function Sie(e,t){1&e&&o.Qb(0,"t-application-page-not-found")}function kie(e,t){if(1&e&&(o.Vb(0,"div",69),o.Vb(1,"h5",70),o.Qb(2,"fa-icon",71),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",72),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(6,"span",73),o.Tc(7,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",74),o.Tc(9),o.Ub(),o.Vb(10,"div",75),o.Vb(11,"button",76),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(12,"fa-icon",77),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,3,"Error")," "),o.Bb(6),o.Vc(" ",e.actionErrorMessage," "),o.Bb(4),o.Vc(" \xa0",o.nc(14,5,"Dismiss")," ")}}let Oie=(()=>{class e{constructor(e,t,n,i,o,c,r){this.route=e,this.router=t,this.customUserSettings=n,this.translate=i,this.workspace=o,this.apiService=c,this.modalService=r,this.notifyFetch$=new E.a,this.notifyDestruct$=new E.a,this.api=this.apiService.detailsEntriesApi(this.notifyDestruct$),this.showExportSpinner=!1,this.DEFAULT_PAGE_SIZE=60,this.accountAdditionalSelect="$DocumentDetails",this.currencyAdditionalSelect="E",this.relationAdditionalSelect="$DocumentDetails",this.custodyAdditionalSelect="$DocumentDetails",this.resourceAdditionalSelect="$DocumentDetails",this._columnsParametersHaveChanged=!1,this._collapseParameters=!1}get numericKeys(){switch(this.type){case"account":return["account_id","custodian_id","custody_id","participant_id","resource_id","entry_type_id","center_id"];case"relation":return["relation_id","account_id","resource_id"];default:console.error(`Unhandled report type ${this.type}`)}}get stringKeys(){switch(this.type){case"account":return["from_date","to_date","currency_id"];case"relation":return["from_date","to_date"];default:console.error(`Unhandled report type ${this.type}`)}}get booleanKeys(){switch(this.type){case"account":case"relation":return["include_completed"];default:console.error(`Unhandled report type ${this.type}`)}}get relationDefinition(){return this.ws.definitions.Relations[this.definitionId]}ngOnInit(){this.api=this.apiService.detailsEntriesApi(this.notifyDestruct$),this._subscriptions=new k.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(_.a)(()=>this.doFetch())).subscribe()),this._subscriptions.add(this.route.paramMap.subscribe(e=>{let t=!1;const n=this.state,i=n.arguments;for(const r of this.stringKeys){const n=e.get(r)||void 0;i[r]!==n&&(i[r]=n,t=!0)}for(const r of this.numericKeys){const n=+e.get(r)||void 0;i[r]!==n&&(i[r]=n,t=!0)}for(const r of this.booleanKeys){const n="true"===(e.get(r)||!1).toString();i[r]!==n&&(i[r]=n,t=!0)}switch(this.type){case"account":break;case"relation":const t=+e.get("definitionId");t&&this.ws.definitions.Relations[t]&&(this.definitionId=t);break;default:console.error(`Unhandled report type ${this.type}`)}const o=+e.get("skip")||0;n.skip!==o&&(n.skip=o,t=!0);const c="true"===(e.get("collapse_params")||!1).toString();this._collapseParameters!==c&&(this._collapseParameters=c),t&&this.fetch()}))}ngOnDestroy(){this.notifyDestruct$.next(),this._subscriptions.unsubscribe()}ngOnChanges(e){[e.type].some(e=>!!e&&!e.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}urlStateChanged(){const e=this.state,t=e.arguments,n={};for(const i of this.stringKeys.concat(this.numericKeys).concat(this.booleanKeys)){const e=t[i]||void 0;e&&(n[i]=e)}e.skip&&(n.skip=e.skip),this._collapseParameters&&(n.collapse_params=!0),this.router.navigate([".",n],{relativeTo:this.route,replaceUrl:!0})}get argumentsKey(){switch(this.type){case"account":return"account-statement/arguments";case"relation":return`relation-statement/${this.definitionId}/arguments`;default:console.error(`Unhandled report type ${this.type}`)}}parametersChanged(){this.urlStateChanged(),this._columnsParametersHaveChanged=!0;const e=JSON.stringify(this.state.arguments);this.customUserSettings.save(this.argumentsKey,e),this.fetch()}get ws(){return this.workspace.currentTenant}fetch(){this.notifyFetch$.next()}computeSelect(){const e={},t=[];for(const n of this.columns)for(const i of n.select)e[i]||(e[i]=!0,t.push(i));return t.join(",")}computeStatementArguments(e){e=e||this.state;const t={select:this.computeSelect(),top:this.DEFAULT_PAGE_SIZE,skip:e.skip,fromDate:Object(Mi.d)(new Date(this.fromDate)),toDate:Object(Mi.d)(new Date(this.toDate)),accountId:this.accountId};if(this.showCustodianParameter){const e=this.readonlyCustodian_Manual?this.readonlyValueCustodianId_Manual:this.custodianId;e&&(t.custodianId=e)}if(this.showCustodyParameter){const e=this.readonlyCustody_Manual?this.readonlyValueCustodyId_Manual:this.custodyId;e&&(t.custodyId=e)}if(this.showParticipantParameter){const e=this.readonlyParticipant_Manual?this.readonlyValueParticipantId_Manual:this.participantId;e&&(t.participantId=e)}if(this.showResourceParameter){const e=this.readonlyResource_Manual?this.readonlyValueResourceId_Manual:this.resourceId;e&&(t.resourceId=e)}if(this.showEntryTypeParameter){const e=this.readonlyEntryType_Manual?this.readonlyValueEntryTypeId_Manual:this.entryTypeId;e&&(t.entryTypeId=e)}if(this.showCenterParameter){const e=this.readonlyCenter_Manual?this.readonlyValueCenterId_Manual:this.centerId;e&&(t.centerId=e)}return this.currencyId&&this.showCurrencyParameter&&(t.currencyId=this.currencyId),this.includeCompleted&&(t.includeCompleted=!0),t}doFetch(){const e=this.state;if(this.requiredParametersAreSet){if(this.loadingRequiredParameters)return e.reportStatus=B.i.loading,e.result=[],Object(O.a)();{e.reportStatus=B.i.loading,e.result=[];const t=this.computeStatementArguments();return this.api.statement(t).pipe(Object(A.a)(t=>{e.reportStatus=B.i.loaded,e.result=t.Result,e.top=t.Top,e.skip=t.Skip,e.total=t.TotalCount,e.extras={opening:t.Opening,openingQuantity:t.OpeningQuantity,openingMonetaryValue:t.OpeningMonetaryValue,closing:t.Closing,closingQuantity:t.ClosingQuantity,closingMonetaryValue:t.ClosingMonetaryValue},Object(N.o)(t.RelatedEntities,this.workspace),this.workspace.notifyStateChanged()}),Object(P.a)(t=>(e.reportStatus=B.i.error,e.errorMessage=t.error,Object(O.a)(null))))}}return e.reportStatus=B.i.information,e.information=()=>this.translate.instant("FillRequiredFields"),Object(O.a)()}get requiredParametersAreSet(){const e=this.state.arguments;switch(this.type){case"account":return!!e.from_date&&!!e.to_date&&!!e.account_id;case"relation":return!!(e.from_date&&e.to_date&&e.relation_id&&e.account_id);default:console.error(`Unknown report type ${this.type}`)}}get loadingRequiredParameters(){switch(this.type){case"account":return!(!this.accountId||this.account())||!(!this.showResourceParameter||this.readonlyResource_Manual||!this.resourceId||this.ws.get("Resource",this.resourceId))||!(!this.showCustodyParameter||this.readonlyCustody_Manual||!this.custodyId||this.ws.get("Custody",this.custodyId));case"relation":default:console.error(`Unknown report type ${this.type}`)}}onParameterLoaded(){this.state.reportStatus===B.i.loading&&(this._columnsParametersHaveChanged=!0,this.fetch())}get found(){switch(this.type){case"account":return!0;case"relation":return!!this.relationDefinition;default:return console.error(`Unhandled report type ${this.type}`),!1}}get title(){switch(this.type){case"account":return this.translate.instant("AccountStatement");case"relation":return this.translate.instant("StatementOf0",{0:this.ws.getMultilingualValueImmediate(this.relationDefinition,"TitleSingular")});default:return console.error(`Unhandled report type ${this.type}`),"???"}}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get flip(){return this.workspace.ws.isRtl?"horizontal":null}normalize(e,t){for(;e.length<t;)e.push("");return e}displayErrorModal(e){this.actionErrorMessage=e,this.modalService.open(this.errorModal)}onExport(){const e=this.columns,t=this.computeStatementArguments();t.top=2147483647,this.showExportSpinner=!0,this.api.statement(t).pipe(Object(A.a)(n=>{if(this.showExportSpinner=!1,n.Result.length!==n.TotalCount)return void this.displayErrorModal("Too many rows");Object(N.o)(n.RelatedEntities,this.workspace),this.workspace.notifyStateChanged();const i=[];i.push(this.normalize([this.translate.instant("FromDate"),Object(Ie.a)(t.fromDate,this.workspace,this.translate)],e.length)),i.push(this.normalize([this.translate.instant("ToDate"),Object(Ie.a)(t.toDate,this.workspace,this.translate)],e.length)),i.push(this.normalize([this.translate.instant("Entry_Account"),this.ws.getMultilingualValue("Account",t.accountId,"Name")],e.length)),t.currencyId&&i.push(this.normalize([this.translate.instant("Entry_Currency"),this.ws.getMultilingualValue("Currency",t.currencyId,"Name")],e.length)),t.custodianId&&i.push(this.normalize([this.labelCustodian_Manual,this.ws.getMultilingualValue("Relation",t.custodianId,"Name")],e.length)),t.custodyId&&i.push(this.normalize([this.labelCustody_Manual,this.ws.getMultilingualValue("Custody",t.custodyId,"Name")],e.length)),t.participantId&&i.push(this.normalize([this.labelParticipant_Manual,this.ws.getMultilingualValue("Relation",t.participantId,"Name")],e.length)),t.resourceId&&i.push(this.normalize([this.labelResource_Manual,this.ws.getMultilingualValue("Resource",t.resourceId,"Name")],e.length)),t.entryTypeId&&i.push(this.normalize([this.translate.instant("Entry_EntryType"),this.ws.getMultilingualValue("EntryType",t.entryTypeId,"Name")],e.length)),t.centerId&&i.push(this.normalize([this.translate.instant("Entry_Center"),this.ws.getMultilingualValue("Center",t.centerId,"Name")],e.length)),t.includeCompleted&&i.push(this.normalize([this.translate.instant("IncludeCompleted"),this.translate.instant("Yes")],e.length)),i.push(this.normalize([],e.length));const o=[];for(const t of e)o.push(t.label());i.push(o);const c=[],r=[];for(const a of e)switch(a.id){case"PostingDate":c.push(Object(Ie.a)(t.fromDate,this.workspace,this.translate)),r.push(Object(Ie.a)(t.toDate,this.workspace,this.translate));break;case"SerialNumber":c.push(this.translate.instant("OpeningBalance")),r.push(this.translate.instant("ClosingBalance"));break;case"QuantityAccumulation":c.push(Object(em.a)(n.OpeningQuantity,"1.0-4")),r.push(Object(em.a)(n.ClosingQuantity,"1.0-4"));break;case"MonetaryValueAccumulation":c.push(Object(em.a)(n.OpeningMonetaryValue,this.monetaryValueDigitsInfo)),r.push(Object(em.a)(n.ClosingMonetaryValue,this.monetaryValueDigitsInfo));break;case"Accumulation":c.push(Object(em.a)(n.Opening,this.functionalDigitsInfo)),r.push(Object(em.a)(n.Closing,this.functionalDigitsInfo));break;default:c.push(""),r.push("")}i.push(c);for(const t of n.Result){const n=[];for(const i of e)n.push(i.exportDisplay?i.exportDisplay(t):i.display(t));i.push(n)}i.push(r);const s=`${this.translate.instant("AccountStatement")}.csv`,l=Object(N.g)(i);Object(N.i)(l,s)}),Object(P.a)(e=>(this.showExportSpinner=!1,this.displayErrorModal(e.error||e),Object(O.a)()))).subscribe()}get canExport(){return this.isLoaded}onRefresh(){this.state.reportStatus!==B.i.loading&&this.fetch()}get stateKey(){switch(this.type){case"account":return"account-statement";case"relation":return`relation-statement/${this.definitionId}`;default:console.error(`Unhandled report type ${this.type}`)}}get state(){const e=this.stateKey,t=this.workspace.currentTenant;return t.statementState[e]||(t.statementState[e]=new B.k),t.statementState[e]}get from(){return Math.min(this.state.skip+1,this.total)}get to(){const e=this.state;return Math.min(e.skip+this.DEFAULT_PAGE_SIZE,e.total)}get total(){return this.state.total}get totalDisplay(){const e=this.total;return e>=B.d?Object(x.L)(B.d-1,"en-GB")+"+":Object(x.L)(e,"en-GB")}onPreviousPage(){const e=this.state;e.skip=Math.max(e.skip-this.DEFAULT_PAGE_SIZE,0),this.urlStateChanged(),this.fetch()}get canPreviousPage(){return this.state.skip>0}onNextPage(){const e=this.state;e.skip=e.skip+this.DEFAULT_PAGE_SIZE,this.urlStateChanged(),this.fetch()}get canNextPage(){return this.to<this.total}link(e){switch(this.type){case"account":return`../${e}`;case"relation":return`../../${e}`;default:console.error(`Unhandled report type ${this.type}`)}}get includeCompleted(){return this.state.arguments.include_completed}set includeCompleted(e){const t=this.state.arguments;t.include_completed!==e&&(t.include_completed=e,this.parametersChanged())}get fromDate(){return this.state.arguments.from_date}set fromDate(e){const t=this.state.arguments;t.from_date!==e&&(t.from_date=e,this.parametersChanged())}get toDate(){return this.state.arguments.to_date}set toDate(e){const t=this.state.arguments;t.to_date!==e&&(t.to_date=e,this.parametersChanged())}get accountId(){return this.state.arguments.account_id}set accountId(e){const t=this.state.arguments;t.account_id!==e&&(t.account_id=e,this.parametersChanged())}account(e){return this.ws.get("Account",e=e||this.accountId)}accountType(){const e=this.account();return e&&e.AccountTypeId?this.ws.get("AccountType",e.AccountTypeId):null}get currencyId(){return this.state.arguments.currency_id}set currencyId(e){const t=this.state.arguments;t.currency_id!==e&&(t.currency_id=e,this.parametersChanged())}getAccountResourceCustodyCurrencyId(){const e=this.account(),t=this.resource(),n=this.custody();return(e?e.CurrencyId:null)||(t?t.CurrencyId:null)||(n?n.CurrencyId:null)}get showCurrencyParameter(){return!!this.account()&&!this.getAccountResourceCustodyCurrencyId()}get readonlyValueCurrencyId(){return this.getAccountResourceCustodyCurrencyId()||this.currencyId}get functionalId(){return this.ws.settings.FunctionalCurrencyId}get custodianId(){return this.state.arguments.custodian_id}set custodianId(e){const t=this.state.arguments;t.custodian_id!==e&&(t.custodian_id=e,this.parametersChanged())}get showCustodianParameter(){const e=this.accountType();return!!e&&!!e.CustodianDefinitionId}get readonlyCustodian_Manual(){const e=this.account(),t=this.custody();return!!e&&!!e.CustodianId||!!t&&!!t.CustodianId}get readonlyValueCustodianId_Manual(){const e=this.account(),t=this.custody();return e?e.CustodianId:t?t.CustodianId:null}get labelCustodian_Manual(){const e=this.accountType(),t=e?e.CustodianDefinitionId:null;return Object(_h.a)(this.workspace,this.translate,t).titleSingular()}get definitionIdsCustodian_Manual(){return[this.accountType().CustodianDefinitionId]}get custodyId(){return this.state.arguments.custody_id}set custodyId(e){const t=this.state.arguments;t.custody_id!==e&&(t.custody_id=e,this.parametersChanged())}get relationId(){return this.state.arguments.relation_id}set relationId(e){const t=this.state.arguments;t.relation_id!==e&&(t.relation_id=e,this.parametersChanged())}custody(){const e=this.account();return this.ws.get("Custody",(e?e.CustodyId:null)||(e&&e.CustodyDefinitionId?this.custodyId:null))}get showCustodyParameter(){const e=this.account();return!!e&&!!e.CustodyDefinitionId}get readonlyCustody_Manual(){const e=this.account();return!!e&&!!e.CustodyId}get readonlyValueCustodyId_Manual(){const e=this.account();return e?e.CustodyId:null}get labelCustody_Manual(){const e=this.account(),t=e?e.CustodyDefinitionId:null;return Object(Ah.a)(this.workspace,this.translate,t).titleSingular()}get definitionIdsCustody_Manual(){return[this.account().CustodyDefinitionId]}get labelRelation_Smart(){return this.ws.getMultilingualValueImmediate(this.relationDefinition,"TitleSingular")}get definitionIdsRelation_Smart(){return[this.definitionId]}get participantId(){return this.state.arguments.participant_id}set participantId(e){const t=this.state.arguments;t.participant_id!==e&&(t.participant_id=e,this.parametersChanged())}get showParticipantParameter(){const e=this.accountType();return!!e&&!!e.ParticipantDefinitionId}get readonlyParticipant_Manual(){const e=this.account(),t=this.resource();return!!e&&!!e.ParticipantId||!!t&&!!t.ParticipantId}get readonlyValueParticipantId_Manual(){const e=this.account(),t=this.resource();return e?e.CustodianId:t?t.ParticipantId:null}get labelParticipant_Manual(){const e=this.accountType(),t=e?e.ParticipantDefinitionId:null;return Object(_h.a)(this.workspace,this.translate,t).titleSingular()}get definitionIdsParticipant_Manual(){return[this.accountType().ParticipantDefinitionId]}get resourceId(){return this.state.arguments.resource_id}set resourceId(e){const t=this.state.arguments;t.resource_id!==e&&(t.resource_id=e,this.parametersChanged())}resource(){const e=this.account();return this.ws.get("Resource",(e?e.ResourceId:null)||(e&&e.ResourceDefinitionId?this.resourceId:null))}resourceDefinition(){const e=this.resource();if(e&&e.DefinitionId)return this.ws.definitions.Resources[e.DefinitionId]}get showResourceParameter(){const e=this.account();return!!e&&!!e.ResourceDefinitionId}get readonlyResource_Manual(){const e=this.account();return!!e&&!!e.ResourceId}get readonlyValueResourceId_Manual(){const e=this.account();return e?e.ResourceId:null}get labelResource_Manual(){const e=this.account(),t=e?e.ResourceDefinitionId:null;return Object(Oh.a)(this.workspace,this.translate,t).titleSingular()}get definitionIdsResource_Manual(){return[this.account().ResourceDefinitionId]}get entryTypeId(){return this.state.arguments.entry_type_id}set entryTypeId(e){const t=this.state.arguments;t.entry_type_id!==e&&(t.entry_type_id=e,this.parametersChanged())}get showEntryTypeParameter(){const e=this.accountType();if(e){const t=this.ws.get("EntryType",e.EntryTypeParentId);return!!t&&t.IsActive}return!1}get readonlyEntryType_Manual(){const e=this.account();return!!e&&!!e.EntryTypeId}get readonlyValueEntryTypeId_Manual(){const e=this.account();return e?e.EntryTypeId:null}get filterEntryType_Manual(){return`IsAssignable eq true and Id descof ${this.accountType().EntryTypeParentId}`}get centerId(){return this.state.arguments.center_id}set centerId(e){const t=this.state.arguments;t.center_id!==e&&(t.center_id=e,this.parametersChanged())}get showCenterParameter(){return!!this.account()}get readonlyCenter_Manual(){return!!this.getAccountResourceCustodyCenterId()}get readonlyValueCenterId_Manual(){return this.getAccountResourceCustodyCenterId()}getAccountResourceCustodyCenterId(){const e=this.account(),t=this.resource(),n=this.custody();return(e?e.CenterId:null)||(t?e.IsBusinessUnit?t.CenterId:t.CostCenterId:null)||(n&&e.IsBusinessUnit?n.CenterId:null)}get showErrorMessage(){return this.state.reportStatus===B.i.error}get errorMessage(){return this.state.errorMessage}get showInformation(){return this.state.reportStatus===B.i.information}information(){return this.state.information()}get showSpinner(){return this.state.reportStatus===B.i.loading}get showNoItemsFound(){const e=this.state;return e.reportStatus===B.i.loaded&&(!e.result||0===e.result.length)}get isLoaded(){return this.state.reportStatus===B.i.loaded}get showOpeningBalance(){return this.isLoaded&&!this.state.skip}get showClosingBalance(){return this.isLoaded&&this.to===this.total}get monetaryValueDigitsInfo(){const e=this.getAccountResourceCustodyCurrencyId()||this.currencyId||this.functionalId;return this.digitsInfo(e)}get openingDisplay(){const e=this.state.extras;if(e){const t=e.opening||0;return Object(em.a)(t,this.functionalDigitsInfo)}return""}get openingQuantityDisplay(){const e=this.state.extras;if(e){const t=e.openingQuantity||0;return Object(em.a)(t,"1.0-4")}return""}get openingMonetaryValueDisplay(){const e=this.state.extras;if(e){const t=e.openingMonetaryValue||0;return Object(em.a)(t,this.monetaryValueDigitsInfo)}return""}get closingDisplay(){const e=this.state.extras;if(e){const t=e.closing||0;return Object(em.a)(t,this.functionalDigitsInfo)}return""}get closingQuantityDisplay(){const e=this.state.extras;if(e){const t=e.closingQuantity||0;return Object(em.a)(t,"1.0-4")}return""}get closingMonetaryValueDisplay(){const e=this.state.extras;if(e){const t=e.closingMonetaryValue||0;return Object(em.a)(t,this.monetaryValueDigitsInfo)}return""}get entities(){return this.state.result}get functionalDigitsInfo(){const e=this.ws.settings.FunctionalCurrencyDecimals;return`1.${e}-${e}`}digitsInfo(e){const t=this.ws.get("Currency",e);if(t){const e=t.E||0;return`1.${e}-${e}`}return this.functionalDigitsInfo}get columns(){const e=this.account(),t=this.accountType(),n=this.resource(),i=this.ws.settings;if(this._columnsAccount!==e||this._columnsAccountType!==t||this._columnsResource!==n||this._columnsSettings!==i||this._columnsParametersHaveChanged){if(this._columnsAccount=e,this._columnsAccountType=t,this._columnsResource=n,this._columnsSettings=i,this._columnsParametersHaveChanged=!1,this._columns=[{id:"PostingDate",select:["Line.PostingDate"],label:()=>this.translate.instant("Line_PostingDate"),display:e=>{const t=this.ws.get("LineForQuery",e.LineId);return Object(Ie.a)(t.PostingDate,this.workspace,this.translate)},weight:1},{id:"SerialNumber",select:["Line.Document.SerialNumber","Line.Document.DefinitionId"],label:()=>this.translate.instant("Document_SerialNumber"),display:e=>{const t=this.ws.get("LineForQuery",e.LineId),n=this.ws.get("Document",t.DocumentId),i=Object(Lh.c)(this.workspace,this.translate,n.DefinitionId).properties.SerialNumber;return Object(Lh.a)(n.SerialNumber,i.prefix,i.codeWidth)},weight:1}],this._columns.push({id:"Memo",select:["Line.Memo"],label:()=>this.translate.instant("Memo"),display:e=>this.ws.get("LineForQuery",e.LineId).Memo,weight:1}),!this.showCustodianParameter||this.readonlyCustodian_Manual||this.custodianId||this._columns.push({select:["Custodian.Name,Custodian.Name2,Custodian.Name3"],label:()=>this.labelCustodian_Manual,display:e=>this.ws.getMultilingualValue("Relation",e.CustodianId,"Name"),weight:1}),!this.showCustodyParameter||this.readonlyCustody_Manual||this.custodyId||this._columns.push({select:["Custody.Name,Custody.Name2,Custody.Name3"],label:()=>this.labelCustody_Manual,display:e=>this.ws.getMultilingualValue("Custody",e.CustodyId,"Name"),weight:1}),!this.showEntryTypeParameter||this.readonlyEntryType_Manual||this.entryTypeId||this._columns.push({select:["EntryType.Name,EntryType.Name2,EntryType.Name3"],label:()=>this.translate.instant("Entry_EntryType"),display:e=>this.ws.getMultilingualValue("EntryType",e.EntryTypeId,"Name"),weight:1}),!this.showCenterParameter||this.readonlyCenter_Manual||this.centerId||this._columns.push({select:["Center.Name,Center.Name2,Center.Name3"],label:()=>this.translate.instant("Entry_Center"),display:e=>this.ws.getMultilingualValue("Center",e.CenterId,"Name"),weight:1}),t&&(t.Time1Label&&this._columns.push({select:["Time1"],label:()=>this.ws.getMultilingualValueImmediate(t,"Time1Label"),display:e=>Object(Ie.a)(e.Time1,this.workspace,this.translate),weight:1}),t.Time2Label&&this._columns.push({select:["Time2"],label:()=>this.ws.getMultilingualValueImmediate(t,"Time2Label"),display:e=>Object(Ie.a)(e.Time2,this.workspace,this.translate),weight:1}),t.ExternalReferenceLabel&&this._columns.push({select:["ExternalReference"],label:()=>this.ws.getMultilingualValueImmediate(t,"ExternalReferenceLabel"),display:e=>e.ExternalReference,weight:1}),t.InternalReferenceLabel&&this._columns.push({select:["InternalReference"],label:()=>this.ws.getMultilingualValueImmediate(t,"InternalReferenceLabel"),display:e=>e.InternalReference,weight:1}),t.NotedAgentNameLabel&&this._columns.push({select:["NotedAgentName"],label:()=>this.ws.getMultilingualValueImmediate(t,"NotedAgentNameLabel"),display:e=>e.NotedAgentName,weight:1}),t.NotedDateLabel&&this._columns.push({select:["NotedDate"],label:()=>this.ws.getMultilingualValueImmediate(t,"NotedDateLabel"),display:e=>Object(Ie.a)(e.NotedDate,this.workspace,this.translate),weight:1}),t.NotedAmountLabel&&this._columns.push({select:["NotedAmount"],label:()=>this.ws.getMultilingualValueImmediate(t,"NotedAmountLabel"),display:e=>e.NotedAmount?Object(em.a)(e.NotedAmount,this.functionalDigitsInfo):"",weight:1})),!this.showParticipantParameter||this.readonlyParticipant_Manual||this.participantId||this._columns.push({select:["Participant.Name,Participant.Name2,Participant.Name3"],label:()=>this.labelParticipant_Manual,display:e=>this.ws.getMultilingualValue("Relation",e.ParticipantId,"Name"),weight:1}),!this.showResourceParameter||this.readonlyResource_Manual||this.resourceId||this._columns.push({select:["Resource.Name,Resource.Name2,Resource.Name3"],label:()=>this.labelResource_Manual,display:e=>this.ws.getMultilingualValue("Resource",e.ResourceId,"Name"),weight:1}),this.showResourceParameter){const e=this.resourceDefinition(),i=!(!e||"Single"!==e.UnitCardinality||!n||!n.UnitId||!t||t.StandardAndPure),o=i?n.UnitId:null,c=!(!e||!e.UnitCardinality||!n||!n.UnitId||!t||t.StandardAndPure),r=c?n.UnitId:null;this._columns.push({select:["Direction","Quantity"],label:()=>{let e=this.translate.instant("Entry_Quantity");return i&&(e=`${e} (${this.ws.getMultilingualValue("Unit",o,"Name")})`),e},display:e=>Object(em.a)(e.Direction*e.Quantity,"1.0-4"),isRightAligned:!0,weight:1}),i||this._columns.push({select:["Unit.Name","Unit.Name2","Unit.Name3"],label:()=>this.translate.instant("Entry_Unit"),display:e=>this.ws.getMultilingualValue("Unit",e.UnitId,"Name"),weight:1}),c&&this._columns.push({id:"QuantityAccumulation",select:["Direction","BaseQuantity"],label:()=>`${this.translate.instant("DetailsEntry_QuantityAccumulation")} (${this.ws.getMultilingualValue("Unit",r,"Name")})`,display:e=>Object(em.a)(e.QuantityAccumulation,"1.0-4"),isRightAligned:!0,weight:1})}const o=this.getAccountResourceCustodyCurrencyId()||this.currencyId;this.account()&&o!==this.functionalId&&(this._columns.push({select:["MonetaryValue","Direction"],label:()=>{let e=this.translate.instant("Entry_MonetaryValue");return o&&(e=`${e} (${this.ws.getMultilingualValue("Currency",o,"Name")})`),e},display:e=>{const t=o||e.CurrencyId;return Object(em.a)(e.Direction*e.MonetaryValue,this.digitsInfo(t))},isRightAligned:!0,weight:1}),this._columns.push(o?{id:"MonetaryValueAccumulation",select:["MonetaryValue","Direction"],label:()=>`${this.translate.instant("DetailsEntry_MonetaryValueAccumulation")} (${this.ws.getMultilingualValue("Currency",o,"Name")})`,display:e=>Object(em.a)(e.MonetaryValueAccumulation,this.digitsInfo(o)),isRightAligned:!0,weight:1}:{select:["Currency.Name","Currency.Name2","Currency.Name3","Currency.E"],label:()=>this.translate.instant("Entry_Currency"),display:e=>this.ws.getMultilingualValue("Currency",e.CurrencyId,"Name"),weight:1})),this._columns.push({select:["Value","Direction"],label:()=>`${this.translate.instant("Debit")} (${this.ws.getMultilingualValueImmediate(i,"FunctionalCurrencyName")})`,display:e=>e.Direction>0?Object(em.a)(e.Value,this.functionalDigitsInfo):"",isRightAligned:!0,weight:1}),this._columns.push({select:["Value","Direction"],label:()=>`${this.translate.instant("Credit")} (${this.ws.getMultilingualValueImmediate(i,"FunctionalCurrencyName")})`,display:e=>e.Direction<0?Object(em.a)(e.Value,this.functionalDigitsInfo):"",isRightAligned:!0,weight:1}),this._columns.push({id:"Accumulation",select:["Value","Direction"],label:()=>`${this.translate.instant("DetailsEntry_Accumulation")} (${this.ws.getMultilingualValueImmediate(i,"FunctionalCurrencyName")})`,display:e=>Object(em.a)(e.Accumulation,this.functionalDigitsInfo),isRightAligned:!0,weight:1})}return this._columns}fromWeight(e){const t=this.columns.map(e=>e.weight).reduce((e,t)=>e+t);return 0===t?"100%":e/t*100+"%"}onSelectRow(e){const t=this.ws.get("LineForQuery",e.LineId),n=this.ws.get("Document",t.DocumentId);this.router.navigate(["../documents",n.DefinitionId,n.Id,{state_key:"from_statement",tab:-10}],{relativeTo:this.route})}get collapseParameters(){return this._collapseParameters}set collapseParameters(e){this._collapseParameters!==e&&(this._collapseParameters=e,this.urlStateChanged())}onToggleCollapseParameters(){this.collapseParameters=!this.collapseParameters}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(i.a),o.Pb(i.e),o.Pb(X.a),o.Pb(Q.e),o.Pb(B.m),o.Pb(J.a),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-statement"]],viewQuery:function(e,t){var n;1&e&&o.Oc(Fne,!0),2&e&&o.Ec(n=o.ic())&&(t.errorModal=n.first)},inputs:{type:"type"},features:[o.zb],decls:5,vars:2,consts:[["class","h-100 d-flex flex-column",4,"ngIf","ngIfElse"],["pageNotFound",""],["errorModal",""],[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"mx-auto","mb-3","w-100",2,"max-width","900px"],[1,"row","m-0","px-0","px-lg-1","py-1",3,"ngSwitch"],[1,"t-form-group",3,"label"],[3,"ngModel","ngModelOptions","ngModelChange"],[4,"ngSwitchCase"],[1,"custom-control","custom-checkbox","t-labelless-checkbox"],["type","checkbox","id","includecompleted",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","includecompleted",1,"custom-control-label","t-pointer"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"d-flex"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","align-self-center mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"title","click"],["icon","sync-alt"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"row","t-rest-of-screen"],["class","w-100 p-3 px-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"ngModel","definitionIds","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded"],[3,"ngModel","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded"],["class","t-form-group",3,"label",4,"ngIf"],[3,"ngModel","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange"],[3,"ngModel","definitionIds","showCreate","ngModelChange",4,"ngIf"],[3,"link","itemId",4,"ngIf"],[3,"ngModel","definitionIds","showCreate","ngModelChange"],[3,"link","itemId"],[3,"ngModel","definitionIds","additionalSelect","ensureAdditionalSelect","showCreate","ngModelChange","entityLoaded",4,"ngIf"],[3,"ngModel","filter","showCreate","ngModelChange",4,"ngIf"],[3,"ngModel","filter","showCreate","ngModelChange"],[3,"ngModel","showCreate","ngModelChange",4,"ngIf"],[3,"ngModel","showCreate","ngModelChange"],[1,"align-self-center","mx-1"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-hover","table-striped","table-sm","border-bottom","bg-white","t-master-table","text-nowrap"],[2,"width","10px"],[3,"width","text-right",4,"ngFor","ngForOf"],["class","t-no-highlight",4,"ngIf"],["class","t-pointer",3,"click",4,"ngIf"],["class","t-pointer",3,"click",4,"cdkVirtualFor","cdkVirtualForOf"],["class","w-100 p-2 d-flex justify-content-center mt-3",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],[1,"t-no-highlight"],[3,"text-right",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"t-pointer",3,"click"],[1,"text-center","font-italic","text-muted",3,"colSpan"],[1,"border-bottom","t-dark-border"],[1,"w-100","p-2","d-flex","justify-content-center","mt-3"],[3,"scale"],[1,"w-100","mt-3"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){if(1&e&&(o.Rc(0,Bie,60,56,"div",0),o.Rc(1,Sie,1,0,"ng-template",null,1,o.Sc),o.Rc(3,kie,15,7,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(2);o.sc("ngIf",t.found)("ngIfElse",e)}},directives:[x.u,x.y,pe.a,Nu,te.k,te.n,x.z,te.a,ee.b,Ub,dW,Du,ss,nj,AN,bV,Ou,me.a,oo.e,oo.a,x.t,oo.d,ve.a,nn],pipes:[Q.d,x.g,Zf],encapsulation:2}),e})(),_ie=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-account-statement"]],decls:1,vars:0,consts:[["type","account"]],template:function(e,t){1&e&&o.Qb(0,"t-statement",0)},directives:[Oie],encapsulation:2}),e})(),Lie=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-relation-statement"]],decls:1,vars:0,consts:[["type","relation"]],template:function(e,t){1&e&&o.Qb(0,"t-statement",0)},directives:[Oie],encapsulation:2}),e})();function Aie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",2),o.Vb(1,"t-markup-templates-master",3),o.hc("cancel",(function(){return t.modal.close(!1)}))("choose",(function(n){o.Ic(e);const i=t.update;return t.modal.close(!0),i.call(null,n)}))("create",(function(){const e=t.create;return t.modal.close(!1),e.call()})),o.Ub(),o.Ub()}if(2&e){const e=t.filter,n=o.lc();o.Bb(1),o.sc("showCreate",!1)("filter",e)("additionalSelect",n.additionalSelect)}}let Fie=(()=>{class e extends As{}return e.\u0275fac=function(t){return Pie(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-markup-templates-picker"]],features:[o.Ab([{provide:te.i,multi:!0,useExisting:e}]),o.yb],decls:3,vars:6,consts:[["collection","MarkupTemplate",3,"filter","masterTemplate","ensureAdditionalSelect","theme","detailsTemplate","additionalSelect","entityLoaded"],["master",""],[1,"modal-body"],["mode","popup",3,"showCreate","filter","additionalSelect","cancel","choose","create"]],template:function(e,t){if(1&e&&(o.Vb(0,"t-details-picker",0),o.hc("entityLoaded",(function(){return t.onEntityLoaded()})),o.Ub(),o.Rc(1,Aie,2,3,"ng-template",null,1,o.Sc)),2&e){const e=o.Fc(2);o.sc("filter",t.filter)("masterTemplate",e)("ensureAdditionalSelect",t.ensureAdditionalSelect)("theme",t.theme)("detailsTemplate",null)("additionalSelect",t.additionalSelect)}},directives:[Ls,i1],encapsulation:2}),e})();const Pie=o.Xb(Fie);var Nie=n("haWp");const jie=["errorModal"],Wie=["successModal"],$ie=["unsavedChangesModal"];function qie(e,t){1&e&&(o.Vb(0,"span",27),o.Tc(1,"\xa0*"),o.Ub())}function Qie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-custodies-picker",30),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).custodyId=t}))("entityLoaded",(function(){return o.Ic(e),o.lc(2).onParameterLoaded()})),o.Ub()}if(2&e){const e=o.lc(2);o.sc("ngModel",e.custodyId)("definitionIds",e.definitionIdsCustody_Manual)("ensureAdditionalSelect",!0)("showCreate",!1)("disabled",e.isDirty)}}function Hie(e,t){if(1&e&&(o.Vb(0,"t-view-link",31),o.Tc(1),o.Ub()),2&e){const e=o.lc(2);var n;const t="../custodies/"+(null==(n=e.ws.get("Custody",e.readonlyValueCustodyId_Manual))?null:n.DefinitionId);o.sc("link",t)("itemId",e.readonlyValueCustodyId_Manual),o.Bb(1),o.Vc(" ",e.ws.getMultilingualValue("Custody",e.readonlyValueCustodyId_Manual,"Name")," ")}}function Gie(e,t){if(1&e&&(o.Vb(0,"t-form-group",9),o.Rc(1,Qie,1,5,"t-custodies-picker",28),o.Rc(2,Hie,2,3,"t-view-link",29),o.Ub()),2&e){const e=o.lc();o.sc("label",e.labelCustody_Manual),o.Bb(1),o.sc("ngIf",!e.readonlyCustody_Manual),o.Bb(1),o.sc("ngIf",e.readonlyCustody_Manual)}}const zie=function(){return{updateOn:"blur"}};function Jie(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"t-form-group",9),o.mc(2,"translate"),o.Vb(3,"t-date-picker",32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().toDate=t})),o.Ub(),o.Ub(),o.Sb()}if(2&e){const e=o.lc();o.Bb(1),o.sc("label",o.nc(2,4,"AsOfDate")),o.Bb(2),o.sc("ngModel",e.toDate)("ngModelOptions",o.vc(6,zie))("disabled",e.isDirty)}}function Kie(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"t-form-group",9),o.mc(2,"translate"),o.Vb(3,"t-text-editor",32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().externalReferenceContains=t})),o.Ub(),o.Ub(),o.Vb(4,"t-form-group",9),o.mc(5,"translate"),o.Vb(6,"t-date-picker",32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().fromDate=t})),o.Ub(),o.Ub(),o.Vb(7,"t-form-group",9),o.mc(8,"translate"),o.Vb(9,"t-date-picker",32),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().toDate=t})),o.Ub(),o.Ub(),o.Vb(10,"t-form-group",9),o.mc(11,"translate"),o.Vb(12,"t-decimal-editor",33),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().fromAmount=t})),o.Ub(),o.Ub(),o.Vb(13,"t-form-group",9),o.mc(14,"translate"),o.Vb(15,"t-decimal-editor",33),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().toAmount=t})),o.Ub(),o.Ub(),o.Sb()}if(2&e){const e=o.lc();o.Bb(1),o.sc("label",o.nc(2,24,"ExternalReferenceContains")),o.Bb(2),o.sc("ngModel",e.externalReferenceContains)("ngModelOptions",o.vc(34,zie))("disabled",e.isDirty),o.Bb(1),o.sc("label",o.nc(5,26,"FromDate")),o.Bb(2),o.sc("ngModel",e.fromDate)("ngModelOptions",o.vc(35,zie))("disabled",e.isDirty),o.Bb(1),o.sc("label",o.nc(8,28,"ToDate")),o.Bb(2),o.sc("ngModel",e.toDate)("ngModelOptions",o.vc(36,zie))("disabled",e.isDirty),o.Bb(1),o.sc("label",o.nc(11,30,"FromAmount")),o.Bb(2),o.sc("ngModel",e.fromAmount)("ngModelOptions",o.vc(37,zie))("disabled",e.isDirty)("minDecimalPlaces",e.amountsDecimals)("maxDecimalPlaces",e.amountsDecimals),o.Bb(1),o.sc("label",o.nc(14,32,"ToAmount")),o.Bb(2),o.sc("ngModel",e.toAmount)("ngModelOptions",o.vc(38,zie))("disabled",e.isDirty)("minDecimalPlaces",e.amountsDecimals)("maxDecimalPlaces",e.amountsDecimals)}}const Yie=function(e,t){return{0:e,1:t}};function Xie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div"),o.Vb(1,"span",34),o.Tc(2),o.mc(3,"translate"),o.mc(4,"accounting"),o.mc(5,"accounting"),o.Ub(),o.Vb(6,"div",35),o.Vb(7,"button",36),o.hc("click",(function(){return o.Ic(e),o.lc().onReconcileChecked()})),o.Qb(8,"fa-icon",37),o.Vb(9,"span",18),o.Tc(10),o.mc(11,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Vb(12,"button",38),o.hc("click",(function(){return o.Ic(e),o.lc().onCancelReconcileChecked()})),o.Qb(13,"fa-icon",39),o.Vb(14,"span",18),o.Tc(15),o.mc(16,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.oc(3,6,"InternalEntries0ExternalEntries1",o.xc(19,Yie,o.oc(4,9,e.checkedEntriesTotal,e.amountsFormat),o.oc(5,12,e.checkedExEntriesTotal,e.amountsFormat)))," "),o.Bb(4),o.sc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableReconcileChecked),o.Bb(1),o.sc("disabled",!!e.disableReconcileChecked),o.Bb(3),o.Vc("\xa0\xa0",o.nc(11,15,"Reconcile")+" (Alt+R)",""),o.Bb(5),o.Vc("\xa0\xa0",o.nc(16,17,"Cancel"),"")}}function Zie(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div"),o.Vb(1,"button",40),o.hc("click",(function(){return o.Ic(e),o.lc().onSave()})),o.Qb(2,"fa-icon",41),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",42),o.hc("click",(function(){return o.Ic(e),o.lc().onCancel()})),o.Qb(6,"fa-icon",39),o.Tc(7),o.mc(8,"translate"),o.Ub(),o.Ub()}2&e&&(o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,2,"Save")," "),o.Bb(4),o.Vc("\xa0\xa0",o.nc(8,4,"Cancel")," "))}function eoe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",35),o.Vb(1,"button",36),o.hc("click",(function(){o.Ic(e);const t=o.lc(2),n=o.Fc(43);return t.modalService.open(n)})),o.Qb(2,"fa-icon",48),o.Vb(3,"span",18),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.sc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableReport),o.Bb(1),o.sc("disabled",!!e.disableReport),o.Bb(3),o.Vc("\xa0\xa0",o.nc(5,4,"Report"),"")}}function toe(e,t){1&e&&(o.Vb(0,"button",49),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"Actions")," "))}function noe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",50),o.Vb(1,"button",51),o.hc("click",(function(){o.Ic(e);const t=o.lc(2),n=o.Fc(45);return t.modalService.open(n)})),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.sc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableAutoReconcile),o.Bb(1),o.sc("disabled",!!e.disableAutoReconcile),o.Bb(1),o.Vc(" ",o.nc(3,4,"AutoReconcile")," ")}}function ioe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",50),o.Vb(1,"button",51),o.hc("click",(function(){return o.Ic(e),o.lc(2).onExport()})),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.sc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableExport),o.Bb(1),o.sc("disabled",!!e.disableExport),o.Bb(1),o.Vc(" ",o.nc(3,4,"Export")," ")}}function ooe(e,t){if(1&e&&(o.Vb(0,"div"),o.Rc(1,eoe,6,6,"div",43),o.Vb(2,"div",44),o.Rc(3,toe,3,3,"button",45),o.Vb(4,"div",46),o.Rc(5,noe,4,6,"div",47),o.Rc(6,ioe,4,6,"div",47),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(1),o.sc("ngIf",e.showReport),o.Bb(1),o.sc("placement",e.actionsDropdownPlacement),o.Bb(1),o.sc("ngIf",e.isUnreconciled),o.Bb(2),o.sc("ngIf",e.showAutoReconcile),o.Bb(1),o.sc("ngIf",e.showExport)}}function coe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",52),o.Vb(1,"span",55),o.Tc(2),o.mc(3,"number"),o.mc(4,"number"),o.mc(5,"number"),o.Ub(),o.Vb(6,"button",56),o.hc("click",(function(){return o.Ic(e),o.lc(2).onPreviousPage()})),o.mc(7,"translate"),o.Qb(8,"fa-icon",57),o.Ub(),o.Vb(9,"button",56),o.hc("click",(function(){return o.Ic(e),o.lc(2).onNextPage()})),o.mc(10,"translate"),o.Qb(11,"fa-icon",58),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Xc(" ",o.nc(3,9,e.from)," - ",o.nc(4,11,e.to)," / ",o.nc(5,13,e.total),""),o.Bb(4),o.tc("title",o.nc(7,15,"Previous")),o.sc("disabled",!e.canPreviousPage),o.Bb(2),o.sc("flip",e.flip),o.Bb(1),o.tc("title",o.nc(10,17,"Next")),o.sc("disabled",!e.canNextPage),o.Bb(2),o.sc("flip",e.flip)}}function roe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",52),o.Vb(1,"button",53),o.hc("click",(function(){return o.Ic(e),o.lc().onRefresh()})),o.mc(2,"translate"),o.Qb(3,"fa-icon",54),o.Ub(),o.Rc(4,coe,12,19,"div",15),o.Ub()}if(2&e){const e=o.lc();o.Bb(1),o.tc("title",o.nc(2,3,"Refresh")),o.sc("disabled",!!e.disableRefresh),o.Bb(3),o.sc("ngIf",e.isReconciled)}}function soe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",52),o.Vb(1,"span",82),o.Tc(2),o.mc(3,"number"),o.mc(4,"number"),o.mc(5,"number"),o.Ub(),o.Vb(6,"button",56),o.hc("click",(function(){return o.Ic(e),o.lc(2).entries_onPreviousPage()})),o.mc(7,"translate"),o.Qb(8,"fa-icon",57),o.Ub(),o.Vb(9,"button",56),o.hc("click",(function(){return o.Ic(e),o.lc(2).entries_onNextPage()})),o.mc(10,"translate"),o.Qb(11,"fa-icon",58),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Xc(" ",o.nc(3,9,e.entries_from)," - ",o.nc(4,11,e.entries_to)," / ",o.nc(5,13,e.entries_total),""),o.Bb(4),o.tc("title",o.nc(7,15,"Previous")),o.sc("disabled",!e.entries_canPreviousPage),o.Bb(2),o.sc("flip",e.flip),o.Bb(1),o.tc("title",o.nc(10,17,"Next")),o.sc("disabled",!e.entries_canNextPage),o.Bb(2),o.sc("flip",e.flip)}}function loe(e,t){1&e&&(o.Tb(0),o.Qb(1,"th"),o.Qb(2,"th"),o.Qb(3,"th"),o.Qb(4,"th"),o.Qb(5,"th"),o.Sb())}function aoe(e,t){1&e&&o.Qb(0,"th")}function uoe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",83),o.hc("click",(function(){return o.Ic(e),o.lc(2).onDownloadTemplate()})),o.mc(1,"translate"),o.Qb(2,"fa-icon",84),o.Ub()}2&e&&o.sc("title",o.nc(1,1,"DownloadTemplate"))}function doe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",35),o.Vb(1,"button",85),o.hc("click",(function(){return o.Ic(e),o.lc(),o.Fc(23).click()})),o.mc(2,"translate"),o.Qb(3,"fa-icon",86),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.sc("placement",e.actionsDropdownPlacement)("ngbTooltip",e.disableImport),o.Bb(1),o.sc("disabled",!!e.disableImport)("title",o.nc(2,4,"Import"))}}function boe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",52),o.Vb(1,"span",82),o.Tc(2),o.mc(3,"number"),o.mc(4,"number"),o.mc(5,"number"),o.Ub(),o.Vb(6,"button",56),o.hc("click",(function(){return o.Ic(e),o.lc(2).ex_entries_onPreviousPage()})),o.mc(7,"translate"),o.Qb(8,"fa-icon",57),o.Ub(),o.Vb(9,"button",56),o.hc("click",(function(){return o.Ic(e),o.lc(2).ex_entries_onNextPage()})),o.mc(10,"translate"),o.Qb(11,"fa-icon",58),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.Bb(2),o.Xc(" ",o.nc(3,9,e.ex_entries_from)," - ",o.nc(4,11,e.ex_entries_to)," / ",o.nc(5,13,e.ex_entries_total),""),o.Bb(4),o.tc("title",o.nc(7,15,"Previous")),o.sc("disabled",!e.ex_entries_canPreviousPage),o.Bb(2),o.sc("flip",e.flip),o.Bb(1),o.tc("title",o.nc(10,17,"Next")),o.sc("disabled",!e.ex_entries_canNextPage),o.Bb(2),o.sc("flip",e.flip)}}function foe(e,t){1&e&&(o.Tb(0),o.Qb(1,"th",87),o.Qb(2,"th",88),o.Qb(3,"th",89),o.Qb(4,"th",89),o.Qb(5,"th",88),o.Sb())}function moe(e,t){1&e&&o.Qb(0,"th",74)}function goe(e,t){if(1&e&&(o.Vb(0,"t-view-link",31),o.Tc(1),o.Ub()),2&e){const e=o.lc().$implicit,t=o.lc(2);o.sc("link","../documents/"+e.entry.DocumentDefinitionId)("itemId",e.entry.DocumentId),o.Bb(1),o.Vc(" ",t.formatSerialNumber(e.entry.DocumentSerialNumber,e.entry.DocumentDefinitionId)," ")}}function poe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",105),o.hc("click",(function(){o.Ic(e);const t=o.lc(3).$implicit;return o.lc(2).onCloneAndReconcile(t)})),o.mc(1,"translate"),o.Qb(2,"fa-icon",106),o.Ub()}2&e&&o.sc("title",o.nc(1,1,"Clone"))}function hoe(e,t){if(1&e&&(o.Tb(0),o.Rc(1,poe,3,3,"button",104),o.Sb()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.sc("ngIf",!e.entryReconciliation&&!e.entryIsChecked)}}function voe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",109),o.Vb(1,"input",110),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).$implicit.entryIsChecked=t})),o.Ub(),o.Vb(2,"label",111),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3),t=e.index,n=e.$implicit;o.Bb(1),o.uc("id","entryCheck",t,""),o.sc("ngModel",n.entryIsChecked),o.Bb(1),o.uc("for","entryCheck",t,"")}}function Ioe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",112),o.hc("click",(function(){o.Ic(e);const t=o.lc(3).$implicit;return o.lc(2).onUndoReconcileCheckedEntry(t)}))("mouseenter",(function(){o.Ic(e);const t=o.lc(3).$implicit;return o.lc(2).onReconciledEntryMouseEnter(t)}))("mouseleave",(function(){o.Ic(e);const t=o.lc(3).$implicit;return o.lc(2).onReconciledEntryMouseLeave(t)})),o.mc(1,"translate"),o.Vb(2,"span",113),o.Qb(3,"fa-icon",114),o.Ub(),o.Ub()}2&e&&o.sc("title",o.nc(1,1,"Unreconcile"))}function yoe(e,t){if(1&e&&(o.Tb(0),o.Rc(1,voe,4,3,"div",107),o.Rc(2,Ioe,4,3,"ng-template",null,108,o.Sc),o.Sb()),2&e){const e=o.Fc(3),t=o.lc(2).$implicit;o.Bb(1),o.sc("ngIf",!t.entryReconciliation)("ngIfElse",e)}}function woe(e,t){if(1&e&&(o.Vb(0,"div",115),o.Qb(1,"fa-icon",116),o.Ub()),2&e){o.lc();const e=o.Fc(18),t=o.lc(3);o.sc("ngbPopover",e)("placement",t.errorPopoverPlacement)}}function Coe(e,t){if(1&e&&(o.Vb(0,"div",117),o.Qb(1,"fa-icon",118),o.Ub()),2&e){o.lc();const e=o.Fc(9),t=o.lc(3);o.sc("ngbPopover",e)("placement",t.errorPopoverPlacement)}}function Moe(e,t){if(1&e&&(o.Vb(0,"p",121),o.Qb(1,"fa-icon",122),o.Tc(2),o.Ub()),2&e){const e=t.$implicit;o.Bb(2),o.Vc(" \xa0 ",e," ")}}function Voe(e,t){if(1&e&&(o.Vb(0,"div",119),o.Rc(1,Moe,3,1,"p",120),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.sc("ngForOf",null==e.entryReconciliation||null==e.entryReconciliation.serverErrors?null:e.entryReconciliation.serverErrors.Entries)}}function Toe(e,t){if(1&e&&(o.Vb(0,"div",117),o.Qb(1,"fa-icon",118),o.Ub()),2&e){o.lc();const e=o.Fc(13),t=o.lc(3);o.sc("ngbPopover",e)("placement",t.errorPopoverPlacement)}}function Eoe(e,t){if(1&e&&(o.Vb(0,"p",121),o.Qb(1,"fa-icon",122),o.Tc(2),o.Ub()),2&e){const e=t.$implicit;o.Bb(2),o.Vc(" \xa0 ",e," ")}}function xoe(e,t){if(1&e&&(o.Vb(0,"div",119),o.Rc(1,Eoe,3,1,"p",120),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.sc("ngForOf",null==e.exEntryReconciliation||null==e.exEntryReconciliation.serverErrors?null:e.exEntryReconciliation.serverErrors.ExternalEntries)}}function Uoe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",109),o.Vb(1,"input",110),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(3).$implicit.exEntryIsChecked=t})),o.Ub(),o.Vb(2,"label",111),o.Tc(3,"\u200c"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3),t=e.index,n=e.$implicit;o.Bb(1),o.uc("id","exEntryCheck",t,""),o.sc("ngModel",n.exEntryIsChecked),o.Bb(1),o.uc("for","exEntryCheck",t,"")}}function Roe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",112),o.hc("click",(function(){o.Ic(e);const t=o.lc(3).$implicit;return o.lc(2).onUndoReconciledCheckedExEntry(t)}))("mouseenter",(function(){o.Ic(e);const t=o.lc(3).$implicit;return o.lc(2).onReconciledExEntryMouseEnter(t)}))("mouseleave",(function(){o.Ic(e);const t=o.lc(3).$implicit;return o.lc(2).onReconciledExEntryMouseLeave(t)})),o.mc(1,"translate"),o.Vb(2,"span",113),o.Qb(3,"fa-icon",114),o.Ub(),o.Ub()}2&e&&o.sc("title",o.nc(1,1,"Unreconcile"))}function Doe(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Uoe,4,3,"div",107),o.Rc(2,Roe,4,3,"ng-template",null,123,o.Sc),o.Sb()),2&e){const e=o.Fc(3),t=o.lc(2).$implicit;o.Bb(1),o.sc("ngIf",!t.exEntryReconciliation)("ngIfElse",e)}}function Boe(e,t){if(1&e&&(o.Vb(0,"div",115),o.Qb(1,"fa-icon",116),o.Ub()),2&e){o.lc();const e=o.Fc(18),t=o.lc(3);o.sc("ngbPopover",e)("placement",t.errorPopoverPlacement)}}const Soe=function(e){return{0:e}};function koe(e,t){if(1&e&&(o.Vb(0,"div",119),o.Vb(1,"p",121),o.Qb(2,"fa-icon",124),o.Tc(3),o.mc(4,"translate"),o.mc(5,"dateFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc(4);o.Bb(3),o.Vc(" \xa0 ",o.oc(4,1,"EntryReconciledAfter0",o.wc(6,Soe,o.nc(5,4,e.toDate)))," ")}}function Ooe(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"td",95),o.Rc(2,hoe,2,1,"ng-container",13),o.Ub(),o.Vb(3,"td",95),o.Rc(4,yoe,4,2,"ng-container",13),o.Rc(5,woe,2,2,"div",96),o.Ub(),o.Vb(6,"td",97),o.Rc(7,Coe,2,2,"div",98),o.Rc(8,Voe,2,1,"ng-template",null,99,o.Sc),o.Ub(),o.Vb(10,"td",100),o.Rc(11,Toe,2,2,"div",98),o.Rc(12,xoe,2,1,"ng-template",null,101,o.Sc),o.Ub(),o.Vb(14,"td",102),o.Rc(15,Doe,4,2,"ng-container",13),o.Rc(16,Boe,2,2,"div",96),o.Ub(),o.Rc(17,koe,6,8,"ng-template",null,103,o.Sc),o.Sb()),2&e){const e=o.lc().$implicit;o.Bb(2),o.sc("ngIf",e.entry&&!e.entry.IsReconciledLater),o.Bb(2),o.sc("ngIf",e.entry&&!e.entry.IsReconciledLater),o.Bb(1),o.sc("ngIf",e.entry&&e.entry.IsReconciledLater),o.Bb(2),o.sc("ngIf",null==e.entryReconciliation||null==e.entryReconciliation.serverErrors?null:e.entryReconciliation.serverErrors.Entries),o.Bb(4),o.sc("ngIf",null==e.exEntryReconciliation||null==e.exEntryReconciliation.serverErrors?null:e.exEntryReconciliation.serverErrors.ExternalEntries),o.Bb(4),o.sc("ngIf",e.exEntry&&!e.exEntry.IsReconciledLater),o.Bb(1),o.sc("ngIf",e.exEntry&&e.exEntry.IsReconciledLater)}}function _oe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",105),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).$implicit;return o.lc(2).onDeleteReconciliation(t)})),o.mc(1,"translate"),o.Qb(2,"fa-icon",114),o.Ub()}2&e&&o.sc("title",o.nc(1,1,"Unreconcile"))}function Loe(e,t){if(1&e&&(o.Vb(0,"td",125),o.Rc(1,_oe,3,3,"button",104),o.Ub()),2&e){const e=o.lc().$implicit;o.Gb("border-top-0",!e.firstOne),o.Bb(1),o.sc("ngIf",e.firstOne)}}function Aoe(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"td",94),o.Vb(2,"t-form-group-dynamic",126),o.Vb(3,"t-date-picker",127),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(),i=n.$implicit,c=n.index;return o.lc(2).onChangePostingDate(i,c,t)})),o.Ub(),o.Ub(),o.Ub(),o.Vb(4,"td",94),o.Vb(5,"t-form-group-dynamic",126),o.Vb(6,"t-text-editor",127),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(),i=n.$implicit,c=n.index;return o.lc(2).onChangeExternalReference(i,c,t)})),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"td",128),o.Vb(8,"t-form-group-dynamic",126),o.Vb(9,"t-decimal-editor",129),o.hc("ngModelChange",(function(t){o.Ic(e);const n=o.lc(),i=n.$implicit,c=n.index;return o.lc(2).onChangeMonetaryValue(i,c,t)})),o.Ub(),o.Ub(),o.Ub(),o.Sb()}if(2&e){const e=o.lc().$implicit,t=o.lc(2);o.Bb(2),o.sc("serverErrors",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.PostingDate),o.Bb(1),o.sc("disabled",e.exEntryReconciliation)("ngModel",e.exEntry.PostingDate)("ngModelOptions",o.vc(14,zie)),o.Bb(2),o.sc("serverErrors",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.ExternalReference),o.Bb(1),o.sc("disabled",e.exEntryReconciliation)("ngModel",e.exEntry.ExternalReference)("ngModelOptions",o.vc(15,zie)),o.Bb(2),o.sc("serverErrors",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.MonetaryValue),o.Bb(1),o.sc("disabled",e.exEntryReconciliation)("ngModel",t.getMonetaryValue(e.exEntry))("ngModelOptions",o.vc(16,zie))("minDecimalPlaces",t.amountsDecimals)("maxDecimalPlaces",t.amountsDecimals)}}function Foe(e,t){1&e&&o.Qb(0,"fa-icon",136)}function Poe(e,t){if(1&e&&(o.Vb(0,"p",121),o.Qb(1,"fa-icon",122),o.Tc(2),o.Ub()),2&e){const e=t.$implicit;o.Bb(2),o.Vc(" \xa0",e," ")}}function Noe(e,t){if(1&e&&(o.Vb(0,"div",137),o.Rc(1,Poe,3,1,"p",120),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.sc("ngForOf",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.PostingDate)}}function joe(e,t){1&e&&o.Qb(0,"fa-icon",136)}function Woe(e,t){if(1&e&&(o.Vb(0,"p",121),o.Qb(1,"fa-icon",122),o.Tc(2),o.Ub()),2&e){const e=t.$implicit;o.Bb(2),o.Vc(" \xa0",e," ")}}function $oe(e,t){if(1&e&&(o.Vb(0,"div",137),o.Rc(1,Woe,3,1,"p",120),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.sc("ngForOf",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.ExternalReference)}}function qoe(e,t){1&e&&o.Qb(0,"fa-icon",136)}function Qoe(e,t){if(1&e&&(o.Vb(0,"p",121),o.Qb(1,"fa-icon",122),o.Tc(2),o.Ub()),2&e){const e=t.$implicit;o.Bb(2),o.Vc(" \xa0",e," ")}}function Hoe(e,t){if(1&e&&(o.Vb(0,"div",137),o.Rc(1,Qoe,3,1,"p",120),o.Ub()),2&e){const e=o.lc(2).$implicit;o.Bb(1),o.sc("ngForOf",null==e.exEntry||null==e.exEntry.serverErrors?null:e.exEntry.serverErrors.MonetaryValue)}}function Goe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"td",130),o.hc("dblclick",(function(){o.Ic(e);const t=o.lc().$implicit;return o.lc(2).onRowDoubleClick(t)})),o.Rc(1,Foe,1,0,"fa-icon",131),o.Tc(2),o.mc(3,"dateFormat"),o.Rc(4,Noe,2,1,"ng-template",null,132,o.Sc),o.Ub(),o.Vb(6,"td",130),o.hc("dblclick",(function(){o.Ic(e);const t=o.lc().$implicit;return o.lc(2).onRowDoubleClick(t)})),o.Rc(7,joe,1,0,"fa-icon",131),o.Tc(8),o.Rc(9,$oe,2,1,"ng-template",null,133,o.Sc),o.Ub(),o.Vb(11,"td",134),o.hc("dblclick",(function(){o.Ic(e);const t=o.lc().$implicit;return o.lc(2).onRowDoubleClick(t)})),o.Rc(12,qoe,1,0,"fa-icon",131),o.Tc(13),o.mc(14,"accounting"),o.Rc(15,Hoe,2,1,"ng-template",null,135,o.Sc),o.Ub()}if(2&e){const e=o.Fc(5),t=o.Fc(10),n=o.lc().$implicit,i=o.lc(2);o.sc("ngbPopover",null!=n.exEntry&&null!=n.exEntry.serverErrors&&n.exEntry.serverErrors.PostingDate?e:null)("placement",i.errorPopoverPlacement),o.Bb(1),o.sc("ngIf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.PostingDate),o.Bb(1),o.Vc(" ",o.nc(3,12,null==n.exEntry?null:n.exEntry.PostingDate)," "),o.Bb(4),o.sc("ngbPopover",null!=n.exEntry&&null!=n.exEntry.serverErrors&&n.exEntry.serverErrors.ExternalReference?t:null)("placement",i.errorPopoverPlacement),o.Bb(1),o.sc("ngIf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.ExternalReference),o.Bb(1),o.Vc(" ",null==n.exEntry?null:n.exEntry.ExternalReference," "),o.Bb(3),o.sc("ngbPopover",null!=n.exEntry&&null!=n.exEntry.serverErrors&&n.exEntry.serverErrors.MonetaryValue?t:null)("placement",i.errorPopoverPlacement),o.Bb(1),o.sc("ngIf",null==n.exEntry||null==n.exEntry.serverErrors?null:n.exEntry.serverErrors.MonetaryValue),o.Bb(1),o.Vc(" ",n.exEntry?o.oc(14,14,(null==n.exEntry?null:n.exEntry.MonetaryValue)*(null==n.exEntry?null:n.exEntry.Direction),i.amountsFormat):""," ")}}function zoe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",145),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).$implicit;return o.lc(2).onEditExEntry(t)})),o.Tc(1),o.mc(2,"translate"),o.Ub()}2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"Edit")," "))}function Joe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",145),o.hc("click",(function(){o.Ic(e);const t=o.lc(2),n=t.$implicit,i=t.index;return o.lc(2).onCancelEditExEntry(n,i)})),o.Tc(1),o.mc(2,"translate"),o.Ub()}2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"Cancel")," "))}function Koe(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",145),o.hc("click",(function(){o.Ic(e);const t=o.lc(2),n=t.$implicit,i=t.index;return o.lc(2).onDeleteExEntry(n,i)})),o.Tc(1),o.mc(2,"translate"),o.Ub()}2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"Delete")," "))}function Yoe(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",138),o.Vb(2,"button",139),o.Vb(3,"span",113),o.Qb(4,"fa-icon",140),o.Ub(),o.Ub(),o.Vb(5,"div",141),o.Rc(6,zoe,3,3,"button",142),o.Rc(7,Joe,3,3,"ng-template",null,143,o.Sc),o.Rc(9,Koe,3,3,"button",144),o.Ub(),o.Ub(),o.Sb()),2&e){const e=o.Fc(8),t=o.lc().$implicit,n=o.lc(2);o.Bb(1),o.sc("placement",n.commandsDropdownPlacement),o.Bb(5),o.sc("ngIf",!t.exEntryIsEdit)("ngIfElse",e),o.Bb(3),o.sc("ngIf",!(null==t.exEntry||!t.exEntry.Id))}}function Xoe(e,t){1&e&&o.Rb(0)}function Zoe(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Xoe,1,0,"ng-container",146),o.Sb()),2&e){o.lc(2);const e=o.Fc(55);o.Bb(1),o.sc("ngTemplateOutlet",e)}}function ece(e,t){if(1&e&&(o.Vb(0,"tr"),o.Vb(1,"td",90),o.Tc(2," \xa0 "),o.Rc(3,goe,2,3,"t-view-link",29),o.Ub(),o.Vb(4,"td",90),o.Tc(5),o.mc(6,"dateFormat"),o.Ub(),o.Vb(7,"td",90),o.Tc(8),o.Ub(),o.Vb(9,"td",91),o.Tc(10),o.mc(11,"accounting"),o.Ub(),o.Rc(12,Ooe,19,7,"ng-container",64),o.Rc(13,Loe,2,3,"ng-template",null,92,o.Sc),o.Rc(15,Aoe,10,17,"ng-container",64),o.Rc(16,Goe,17,17,"ng-template",null,93,o.Sc),o.Vb(18,"td",94),o.Rc(19,Yoe,10,4,"ng-container",13),o.Rc(20,Zoe,2,1,"ng-container",13),o.Ub(),o.Ub()),2&e){const e=t.$implicit,n=o.Fc(14),i=o.Fc(17),c=o.lc(2);o.Gb("t-highlight-a",e.entryIsChecked)("t-pale-a",e.entryReconciliation)("t-highlight-b",e.exEntryIsChecked)("t-pale-b",e.exEntryReconciliation)("t-yellow-a",c.isHoveredEntryReconciliation(e))("t-yellow-b",c.isHoveredExEntryReconciliation(e)),o.Bb(3),o.sc("ngIf",e.entry),o.Bb(2),o.Vc(" ",o.nc(6,22,null==e.entry?null:e.entry.PostingDate)," "),o.Bb(3),o.Vc(" ",null==e.entry?null:e.entry.ExternalReference," "),o.Bb(2),o.Vc(" ",e.entry?o.oc(11,24,(null==e.entry?null:e.entry.MonetaryValue)*(null==e.entry?null:e.entry.Direction),c.amountsFormat):""," "),o.Bb(2),o.sc("ngIf",c.isUnreconciled)("ngIfElse",n),o.Bb(3),o.sc("ngIf",e.exEntryIsEdit&&!e.exEntryReconciliation)("ngIfElse",i),o.Bb(4),o.sc("ngIf",c.isUnreconciled&&!!e.exEntry&&!e.exEntryReconciliation),o.Bb(1),o.sc("ngIf",e.exEntryIsCreate)}}function tce(e,t){1&e&&o.Rb(0)}function nce(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr"),o.Qb(1,"td",147),o.Vb(2,"td",148),o.hc("dblclick",(function(){return o.Ic(e),o.lc(2).onCreateExEntry()})),o.Ub(),o.Vb(3,"td"),o.Rc(4,tce,1,0,"ng-container",146),o.Ub(),o.Ub()}if(2&e){o.lc();const e=o.Fc(55),t=o.lc();o.Bb(1),o.sc("colSpan",t.isUnreconciled?8:4),o.Bb(1),o.sc("colSpan",t.isUnreconciled?4:3),o.Bb(2),o.sc("ngTemplateOutlet",e)}}function ice(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",138),o.Vb(1,"button",139),o.Vb(2,"span",113),o.Qb(3,"fa-icon",140),o.Ub(),o.Ub(),o.Vb(4,"div",141),o.Vb(5,"button",145),o.hc("click",(function(){return o.Ic(e),o.lc(2).onCreateExEntry()})),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2);o.sc("placement",e.commandsDropdownPlacement),o.Bb(6),o.Vc(" ",o.nc(7,2,"Create")," ")}}function oce(e,t){1&e&&(o.Vb(0,"div",149),o.Qb(1,"t-spinner",150),o.Ub()),2&e&&(o.Bb(1),o.sc("scale",2))}function cce(e,t){if(1&e&&(o.Vb(0,"div",151),o.Qb(1,"fa-icon",152),o.Tc(2),o.Ub()),2&e){const e=o.lc(2);o.Bb(2),o.Vc(" \xa0 ",e.information()," ")}}function rce(e,t){1&e&&(o.Vb(0,"div",153),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"NoItemsFound")," "))}function sce(e,t){if(1&e&&(o.Vb(0,"div",154),o.Vb(1,"t-error-message"),o.Tc(2),o.Ub(),o.Ub()),2&e){const e=o.lc(2);o.Bb(2),o.Vc(" ",e.errorMessage," ")}}function lce(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",59),o.Vb(1,"cdk-virtual-scroll-viewport",60),o.Vb(2,"table",61),o.Vb(3,"thead"),o.Vb(4,"tr"),o.Vb(5,"th",62),o.Vb(6,"div",63),o.Vb(7,"span"),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Rc(10,soe,12,19,"div",15),o.Ub(),o.Ub(),o.Rc(11,loe,6,0,"ng-container",64),o.Rc(12,aoe,1,0,"ng-template",null,65,o.Sc),o.Vb(14,"th",62),o.Vb(15,"div",63),o.Vb(16,"div",52),o.Vb(17,"span"),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Rc(20,uoe,3,3,"button",66),o.Rc(21,doe,4,6,"div",43),o.Vb(22,"input",67,68),o.hc("change",(function(){o.Ic(e);const t=o.Fc(23);return o.lc().onSelectFileToImport(t)})),o.Ub(),o.Ub(),o.Rc(24,boe,12,19,"div",15),o.Ub(),o.Ub(),o.Ub(),o.Vb(25,"tr"),o.Vb(26,"th"),o.Tc(27),o.mc(28,"translate"),o.Ub(),o.Vb(29,"th"),o.Tc(30),o.mc(31,"translate"),o.Ub(),o.Vb(32,"th"),o.Tc(33),o.mc(34,"translate"),o.Ub(),o.Vb(35,"th",69),o.Tc(36),o.mc(37,"translate"),o.Ub(),o.Rc(38,foe,6,0,"ng-container",64),o.Rc(39,moe,1,0,"ng-template",null,70,o.Sc),o.Vb(41,"th",71),o.Tc(42),o.mc(43,"translate"),o.Ub(),o.Vb(44,"th",72),o.Tc(45),o.mc(46,"translate"),o.Ub(),o.Vb(47,"th",73),o.Tc(48),o.mc(49,"translate"),o.Ub(),o.Qb(50,"th",74),o.Ub(),o.Ub(),o.Vb(51,"tbody"),o.Rc(52,ece,21,27,"tr",75),o.Rc(53,nce,5,3,"tr",13),o.Ub(),o.Ub(),o.Rc(54,ice,8,4,"ng-template",null,76,o.Sc),o.Rc(56,oce,2,1,"div",77),o.Rc(57,cce,3,1,"div",78),o.Rc(58,rce,3,3,"div",79),o.Rc(59,sce,3,1,"div",80),o.Qb(60,"div",81),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(13),t=o.Fc(40),n=o.lc();o.Bb(8),o.Vc(" \xa0 ",o.nc(9,23,"InternalEntries")," "),o.Bb(2),o.sc("ngIf",n.isUnreconciled&&!n.isDirty),o.Bb(1),o.sc("ngIf",n.isUnreconciled)("ngIfElse",e),o.Bb(7),o.Uc(o.nc(19,25,"ExternalEntries")),o.Bb(2),o.sc("ngIf",n.showDownloadTemplate),o.Bb(1),o.sc("ngIf",n.showImport),o.Bb(3),o.sc("ngIf",n.isUnreconciled&&!n.isDirty),o.Bb(3),o.Vc(" \xa0 ",o.nc(28,27,"Line_Document")," "),o.Bb(3),o.Vc(" ",o.nc(31,29,"Line_PostingDate")," "),o.Bb(3),o.Vc(" ",o.nc(34,31,"Reconciliation_Reference")," "),o.Bb(3),o.Vc(" ",o.nc(37,33,"Entry_MonetaryValue")," "),o.Bb(2),o.sc("ngIf",n.isUnreconciled)("ngIfElse",t),o.Bb(4),o.Vc(" ",o.nc(43,35,"Line_PostingDate")," "),o.Bb(3),o.Vc(" ",o.nc(46,37,"Reconciliation_Reference")," "),o.Bb(3),o.Vc(" ",o.nc(49,39,"Entry_MonetaryValue")," "),o.Bb(4),o.sc("cdkVirtualForOf",n.rows),o.Bb(1),o.sc("ngIf",n.showBuiltInCreateRow),o.Bb(3),o.sc("ngIf",n.showSpinner),o.Bb(1),o.sc("ngIf",n.showInformation),o.Bb(1),o.sc("ngIf",n.showNoItemsFound),o.Bb(1),o.sc("ngIf",n.showErrorMessage)}}function ace(e,t){1&e&&(o.Vb(0,"div",155),o.Qb(1,"t-spinner",150),o.Ub()),2&e&&(o.Bb(1),o.sc("scale",2))}function uce(e,t){if(1&e&&(o.Vb(0,"div",156),o.Vb(1,"h5",157),o.Qb(2,"fa-icon",118),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",158),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(6,"span",159),o.Tc(7,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",160),o.Tc(9),o.Ub(),o.Vb(10,"div",161),o.Vb(11,"button",162),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(12,"fa-icon",39),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,3,"Error")," "),o.Bb(6),o.Vc(" ",e.modalErrorMessage," "),o.Bb(4),o.Vc(" \xa0",o.nc(14,5,"Dismiss")," ")}}function dce(e,t){if(1&e&&(o.Vb(0,"div",156),o.Vb(1,"h5",157),o.Qb(2,"fa-icon",163),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",158),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(6,"span",159),o.Tc(7,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",164),o.Tc(9),o.Ub(),o.Vb(10,"div",161),o.Vb(11,"button",162),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(12,"fa-icon",39),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,3,"Success")," "),o.Bb(6),o.Vc(" ",e.modalSuccessMessage," "),o.Bb(4),o.Vc(" \xa0",o.nc(14,5,"Dismiss")," ")}}function bce(e,t){1&e&&(o.Vb(0,"div",156),o.Vb(1,"h5",157),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",158),o.hc("click",(function(){return t.$implicit.dismiss(!1)})),o.Vb(5,"span",159),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",164),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Vb(10,"div",161),o.Vb(11,"button",165),o.hc("click",(function(){return t.$implicit.close(!0)})),o.Qb(12,"fa-icon",166),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Vb(15,"button",167),o.hc("click",(function(){return t.$implicit.close(!1)})),o.Qb(16,"fa-icon",39),o.Tc(17),o.mc(18,"translate"),o.Ub(),o.Ub()),2&e&&(o.Bb(2),o.Vc(" ",o.nc(3,4,"Confirmation")," "),o.Bb(6),o.Vc(" ",o.nc(9,6,"UnsavedChangesConfirmationMessage")," "),o.Bb(5),o.Vc(" \xa0",o.nc(14,8,"Proceed")," "),o.Bb(4),o.Vc(" \xa0",o.nc(18,10,"Cancel")," "))}function fce(e,t){if(1&e&&(o.Vb(0,"div",156),o.Vb(1,"h5",157),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",158),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",159),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",164),o.Vb(8,"div",168),o.Vb(9,"t-form-group",169),o.mc(10,"translate"),o.Tc(11),o.Ub(),o.Vb(12,"t-form-group",169),o.Tc(13),o.Ub(),o.Vb(14,"t-form-group",169),o.mc(15,"translate"),o.Tc(16),o.mc(17,"dateFormat"),o.Ub(),o.Ub(),o.Vb(18,"div",170),o.Vb(19,"table",171),o.Vb(20,"tbody"),o.Vb(21,"tr"),o.Vb(22,"td"),o.Tc(23),o.mc(24,"translate"),o.Ub(),o.Qb(25,"td"),o.Vb(26,"td",69),o.Tc(27),o.mc(28,"accounting"),o.Ub(),o.Ub(),o.Vb(29,"tr"),o.Vb(30,"td"),o.Tc(31),o.mc(32,"translate"),o.Ub(),o.Vb(33,"td",113),o.Qb(34,"fa-icon",172),o.Ub(),o.Vb(35,"td",69),o.Tc(36),o.mc(37,"accounting"),o.Ub(),o.Ub(),o.Vb(38,"tr"),o.Vb(39,"td"),o.Tc(40),o.mc(41,"translate"),o.Ub(),o.Vb(42,"td",113),o.Qb(43,"fa-icon",173),o.Ub(),o.Vb(44,"td",69),o.Tc(45),o.mc(46,"accounting"),o.Ub(),o.Ub(),o.Vb(47,"tr"),o.Vb(48,"td"),o.Tc(49),o.mc(50,"translate"),o.Ub(),o.Vb(51,"td",113),o.Qb(52,"fa-icon",174),o.Ub(),o.Vb(53,"td",69),o.Tc(54),o.mc(55,"accounting"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(56,"div",161),o.Vb(57,"button",162),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(58,"fa-icon",39),o.Tc(59),o.mc(60,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,16,"ReconciliationReport")," "),o.Bb(7),o.sc("label",o.nc(10,18,"Entry_Account")),o.Bb(2),o.Vc(" ",e.ws.getMultilingualValue("Account",e.accountId,"Name")," "),o.Bb(1),o.sc("label",e.labelCustody_Manual),o.Bb(1),o.Vc(" ",e.ws.getMultilingualValue("Custody",e.custodyId,"Name")," "),o.Bb(1),o.sc("label",o.nc(15,20,"AsOfDate")),o.Bb(2),o.Vc(" ",e.toDate?o.nc(17,22,e.toDate):"-","\u200c "),o.Bb(7),o.Uc(o.nc(24,24,"InternalBalance")),o.Bb(4),o.Vc("",o.oc(28,26,e.entriesBalance,e.amountsFormat),"\u200c"),o.Bb(4),o.Uc(o.nc(32,29,"InternalUnreconciledBalance")),o.Bb(5),o.Vc("",o.oc(37,31,e.unreconciledEntriesBalance,e.amountsFormat),"\u200c"),o.Bb(4),o.Uc(o.nc(41,34,"ExternalUnreconciledBalance")),o.Bb(5),o.Vc("",o.oc(46,36,e.unreconciledExEntriesBalance,e.amountsFormat),"\u200c"),o.Bb(4),o.Uc(o.nc(50,39,"ExternalBalance")),o.Bb(5),o.Vc("",o.oc(55,41,e.exEntriesBalance,e.amountsFormat),"\u200c"),o.Bb(5),o.Vc(" \xa0",o.nc(60,44,"Dismiss")," ")}}function mce(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",156),o.Vb(1,"h5",157),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",158),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",159),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",164),o.Vb(8,"div",175),o.Vb(9,"t-form-group",169),o.mc(10,"translate"),o.Vb(11,"t-selector",176),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().postingDateTolerance=t})),o.Ub(),o.Ub(),o.Vb(12,"t-form-group",169),o.mc(13,"translate"),o.Vb(14,"t-selector",176),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().externalRefTolerance=t})),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(15,"div",161),o.Vb(16,"button",177),o.hc("click",(function(){o.Ic(e);const n=t.$implicit;return o.lc().onAutoReconcile(),n.close(!0)})),o.Qb(17,"fa-icon",37),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"button",178),o.hc("click",(function(){return t.$implicit.close(!1)})),o.Qb(21,"fa-icon",39),o.Tc(22),o.mc(23,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc();o.Bb(2),o.Vc(" ",o.nc(3,12,"AutoReconcile")," "),o.Bb(7),o.sc("label",o.nc(10,14,"PostingDateTolerance")),o.Bb(2),o.sc("ngModel",e.postingDateTolerance)("choices",e.postingDateToleranceChoices)("hideEmptyOption",!0),o.Bb(1),o.sc("label",o.nc(13,16,"ExternalReferenceTolerance")),o.Bb(2),o.sc("ngModel",e.externalRefTolerance)("choices",e.externalRefToleranceChoices)("hideEmptyOption",!0),o.Bb(2),o.sc("disabled",!!e.disableAutoReconcile),o.Bb(2),o.Vc(" \xa0",o.nc(19,18,"AutoReconcile")," "),o.Bb(4),o.Vc(" \xa0",o.nc(23,20,"Cancel")," ")}}let gce=(()=>{class e{constructor(e,t,n,i,o,c,r){this.workspace=e,this.router=t,this.customUserSettings=n,this.route=i,this.apiService=o,this.translate=c,this.modalService=r,this.MIN_PAGE_SIZE=500,this.argumentsKey="reconciliation/arguments",this.notifyFetch$=new E.a,this.notifyDestruct$=new E.a,this.api=this.apiService.reconciliationApi(this.notifyDestruct$),this.viewChoices=[{value:"reconciled",name:()=>this.translate.instant("Reconciled")},{value:"unreconciled",name:()=>this.translate.instant("Unreconciled")}],this.numericKeys={account_id:void 0,custody_id:void 0,entries_top:this.MIN_PAGE_SIZE,entries_skip:0,ex_entries_top:this.MIN_PAGE_SIZE,ex_entries_skip:0,top:this.MIN_PAGE_SIZE,skip:0,from_amount:void 0,to_amount:void 0},this.stringKeys={view:"unreconciled",from_date:void 0,to_date:void 0,ex_ref_contains:void 0},this.initialized=!1,this._postingDateTolerance=0,this._externalRefTolerance=0,this._postingDateToleranceChoices=[{value:0,name:()=>this.translate.instant("ExactMatch")},{value:1,name:()=>"1"},{value:2,name:()=>"2"},{value:3,name:()=>"3"},{value:4,name:()=>"4"},{value:5,name:()=>"5"}],this._externalRefToleranceChoices=[{value:0,name:()=>this.translate.instant("ExactMatch")},{value:1,name:()=>this.translate.instant("StringDistance_1",{0:1})},{value:2,name:()=>this.translate.instant("StringDistance_2",{0:2})},{value:3,name:()=>this.translate.instant("StringDistance_3",{0:3})},{value:1e6,name:()=>this.translate.instant("IgnoreMatch")}],this._autoReconcileParamsKey="reconciliation/auto-reconcile-params",this._rows=[],this._showBuiltInCreateRow=!1,this.externalEntriesForSave=[],this.reconciliationsForSave=[],this.deletedExternalEntryIds=[],this.deletedReconciliationIds=[]}ngOnInit(){this.api=this.apiService.reconciliationApi(this.notifyDestruct$),this._subscriptions=new k.a,this._subscriptions.add(this.notifyFetch$.pipe(Object(_.a)(()=>this.doFetch())).subscribe());const e=this.customUserSettings.get(this._autoReconcileParamsKey);e?(this.postingDateTolerance=+e.postingDateTolerance||0,this.externalRefTolerance=+e.externalRefTolerance||0):(this.postingDateTolerance=0,this.externalRefTolerance=0),this._subscriptions.add(this.route.paramMap.subscribe(e=>{let t=!1;const n=this.state.arguments;for(const i of Object.keys(this.stringKeys)){const o=e.get(i)||this.stringKeys[i];n[i]!==o&&(n[i]=o,t=!0)}for(const i of Object.keys(this.numericKeys)){const o=+e.get(i)||this.numericKeys[i];n[i]!==o&&(n[i]=o,t=!0)}n.collapse="true"===e.get("collapse"),t&&this.fetch()}))}ngAfterViewInit(){this.initialized||Object(on.a)(1).subscribe(()=>this.initialized=!0)}ngOnDestroy(){this.notifyDestruct$.next(),this._subscriptions.unsubscribe()}urlStateChanged(){const e=this.state.arguments,t={};for(const i of Object.keys(this.stringKeys)){const n=e[i]||this.stringKeys[i];n&&(t[i]=n)}for(const i of Object.keys(this.numericKeys)){const n=e[i]||this.numericKeys[i];n&&(t[i]=n)}this.router.navigate([".",t],{relativeTo:this.route,replaceUrl:!0});const n=JSON.stringify(e);this.customUserSettings.save(this.argumentsKey,n)}parametersChanged(){this.resetEdits(),this.urlStateChanged(),this.fetch()}get UnreconciledArgs(){return{accountId:this.accountId,custodyId:this.custodyId,asOfDate:this.toDate,entriesTop:this.entriesTop,entriesSkip:this.entriesSkip,externalEntriesTop:this.externalEntriesTop,externalEntriesSkip:this.externalEntriesSkip}}get ReconciledArgs(){return{accountId:this.accountId,custodyId:this.custodyId,fromDate:this.fromDate,toDate:this.toDate,fromAmount:this.fromAmount,toAmount:this.toAmount,externalReferenceContains:this.externalReferenceContains,top:this.top,skip:this.skip}}fetch(){this.notifyFetch$.next()}doFetch(){const e=this.state;if(this.requiredParametersAreSet){if(this.loadingRequiredParameters)return e.reportStatus=B.i.loading,delete e.reconciled_response,delete e.unreconciled_response,Object(O.a)();{let t;return e.reportStatus=B.i.loading,this.isUnreconciled?(delete e.unreconciled_response,t=this.api.getUnreconciled(this.UnreconciledArgs).pipe(Object(us.a)(t=>{e.unreconciled_response=t,e.unreconciled_entries_count=t.UnreconciledEntriesCount,e.unreconciled_ex_entries_count=t.UnreconciledExternalEntriesCount}))):this.isReconciled?(delete e.reconciled_response,t=this.api.getReconciled(this.ReconciledArgs).pipe(Object(us.a)(t=>{e.reconciled_response=t,e.reconciled_count=t.ReconciledCount}))):console.error(`Unknown view ${this.view}`),t=t.pipe(Object(A.a)(t=>{e.reportStatus=B.i.loaded,this.resetEdits()}),Object(P.a)(t=>(e.reportStatus=B.i.error,e.errorMessage=t.error,Object(O.a)(null)))),t}}return e.reportStatus=B.i.information,e.information=()=>this.translate.instant("FillRequiredFields"),Object(O.a)()}get requiredParametersAreSet(){const e=this.state.arguments;return!!e.account_id&&!!e.custody_id}get loadingRequiredParameters(){return!(!this.accountId||this.account())||!(!this.showCustodyParameter||this.readonlyCustody_Manual||!this.custodyId||this.ws.get("Custody",this.custodyId))}get ws(){return this.workspace.currentTenant}get state(){const e=this.ws;return e.reconciliationState=e.reconciliationState||new B.h}canDeactivate(){if(this.isDirty){const e=this.modalService.open(this.unsavedChangesModal),t=new E.a;return e.result.then(e=>{t.next(e),t.complete()},e=>{t.next(!1),t.complete()}),t}return!0}account(e){return this.ws.get("Account",e=e||this.accountId)}onParameterLoaded(){this.state.reportStatus===B.i.loading&&this.fetch()}get view(){return this.state.arguments.view||"unreconciled"}set view(e){const t=this.state.arguments;t.view!==e&&(t.view=e,this.parametersChanged())}get isUnreconciled(){return"unreconciled"===this.view}get isReconciled(){return"reconciled"===this.view}get showErrorMessage(){return this.state.reportStatus===B.i.error}get errorMessage(){return this.state.errorMessage}get modalErrorMessage(){return this._modalErrorMessage}get modalSuccessMessage(){return this._modalSuccessMessage}get showInformation(){return this.state.reportStatus===B.i.information}information(){return this.state.information()}get showNoItemsFound(){return this.state.reportStatus===B.i.loaded&&0===this.rows.length&&!this.showBuiltInCreateRow}get showSpinner(){return this.state.reportStatus===B.i.loading}get accountId(){return this.state.arguments.account_id}set accountId(e){const t=this.state.arguments;t.account_id!==e&&(t.account_id=e,this.parametersChanged())}get custodyId(){return this.state.arguments.custody_id}set custodyId(e){const t=this.state.arguments;t.custody_id!==e&&(t.custody_id=e,this.parametersChanged())}get showCustodyParameter(){const e=this.account();return!!e&&!!e.CustodyDefinitionId}get labelCustody_Manual(){const e=this.account(),t=e?e.CustodyDefinitionId:null;return Object(Ah.a)(this.workspace,this.translate,t).titleSingular()}get readonlyCustody_Manual(){const e=this.account();return!!e&&!!e.CustodyId}get readonlyValueCustodyId_Manual(){const e=this.account();return e?e.CustodyId:null}get definitionIdsCustody_Manual(){return[this.account().CustodyDefinitionId]}get toDate(){return this.state.arguments.to_date}set toDate(e){const t=this.state.arguments;t.to_date!==e&&(t.to_date=e,this.parametersChanged())}get fromDate(){return this.state.arguments.from_date}set fromDate(e){const t=this.state.arguments;t.from_date!==e&&(t.from_date=e,this.parametersChanged())}get top(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.top)}set top(e){const t=this.state.arguments;t.top!==e&&(t.top=e,this.parametersChanged())}get skip(){return this.state.arguments.skip}set skip(e){const t=this.state.arguments;t.skip!==e&&(t.skip=e,this.parametersChanged())}get entriesTop(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.entries_top)}set entriesTop(e){const t=this.state.arguments;t.entries_top!==e&&(t.entries_top=e,this.parametersChanged())}get entriesSkip(){return this.state.arguments.entries_skip}set entriesSkip(e){const t=this.state.arguments;t.entries_skip!==e&&(t.entries_skip=e,this.parametersChanged())}get externalEntriesTop(){return Math.max(this.MIN_PAGE_SIZE,this.state.arguments.ex_entries_top)}set externalEntriesTop(e){const t=this.state.arguments;t.ex_entries_top!==e&&(t.ex_entries_top=e,this.parametersChanged())}get externalEntriesSkip(){return this.state.arguments.ex_entries_skip}set externalEntriesSkip(e){const t=this.state.arguments;t.ex_entries_skip!==e&&(t.ex_entries_skip=e,this.parametersChanged())}get fromAmount(){return this.state.arguments.from_amount}set fromAmount(e){const t=this.state.arguments;t.from_amount!==e&&(t.from_amount=e,this.parametersChanged())}get toAmount(){return this.state.arguments.to_amount}set toAmount(e){const t=this.state.arguments;t.to_amount!==e&&(t.to_amount=e,this.parametersChanged())}get externalReferenceContains(){return this.state.arguments.ex_ref_contains}set externalReferenceContains(e){const t=this.state.arguments;t.ex_ref_contains!==e&&(t.ex_ref_contains=e,this.parametersChanged())}get isLoaded(){return this.state.reportStatus===B.i.loaded}get showReport(){return this.isUnreconciled}get disableReport(){return this.isLoaded?null:this.translate.instant("Error_NotLoadedYet")}get entriesBalance(){const e=this.state.unreconciled_response;return e?e.EntriesBalance:0}get unreconciledEntriesBalance(){const e=this.state.unreconciled_response;return e?e.UnreconciledEntriesBalance:0}get unreconciledExEntriesBalance(){const e=this.state.unreconciled_response;return e?e.UnreconciledExternalEntriesBalance:0}get exEntriesBalance(){const e=this.state.unreconciled_response;return e?e.EntriesBalance-e.UnreconciledEntriesBalance+e.UnreconciledExternalEntriesBalance:0}get canEditPermissions(){return this.ws.canUpdate("reconciliation",null)}get canReadPermissions(){return this.ws.canRead("reconciliation")}onSelectFileToImport(e){if(this.disableImport)return;const t=e.files;if(0===t.length)return;const n=t[0];e.value="",this.api.import(n).subscribe(e=>{if(!this.isLoaded)return;let t=this.findIndexForCreate();const n=this._rows.length;for(const i of e)this.addCreatedExEntry(i,t),t++;n!==this._rows.length&&(this._rows=this._rows.slice()),this.fixCreateExEntryRow(t)},e=>{this.displayErrorModal(e.error)})}get showImport(){return this.isUnreconciled}get disableImport(){return this.isLoaded?this.canEditPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}onDownloadTemplate(){const e=[[this.translate.instant("Line_PostingDate"),this.translate.instant("Reconciliation_Reference"),this.translate.instant("Entry_MonetaryValue")]],t=Object(N.g)(e),n=this.translate.instant("ImportTemplate")+".csv";Object(N.i)(t,n)}get showDownloadTemplate(){return this.showImport}onExport(){if(!this.disableExport&&this.isUnreconciled){const e=this.UnreconciledArgs,t=this.labelCustody_Manual,n=this.amountsFormat,i=this.api.getUnreconciled(e);this.showExportSpinner=!0,i.pipe(Object(A.a)(i=>{this.showExportSpinner=!1;const o=`${this.translate.instant("Unreconciled")}.csv`,c=[[this.translate.instant("Entry_Account"),Object(ON.a)(this.workspace,this.translate).format(this.ws.get("Account",e.accountId)),"","","","",""],[t,this.ws.getMultilingualValue("Custody",e.custodyId,"Name"),"","","","",""],[this.translate.instant("AsOfDate"),e.asOfDate?Object(Mi.c)(new Date(e.asOfDate)):"","","","","",""],["","","","","","",""],[this.translate.instant("InternalBalance"),Object(em.a)(i.EntriesBalance,n),"","","","",""],[this.translate.instant("InternalUnreconciledBalance"),Object(em.a)(i.UnreconciledEntriesBalance,n),"-","","","",""],[this.translate.instant("ExternalUnreconciledBalance"),Object(em.a)(i.UnreconciledExternalEntriesBalance,n),"+","","","",""],[this.translate.instant("ExternalBalance"),Object(em.a)(i.EntriesBalance-i.UnreconciledEntriesBalance+i.UnreconciledExternalEntriesBalance,n),"=","","","",""],["","","","","","",""],[this.translate.instant("InternalEntries"),"","","",this.translate.instant("ExternalEntries"),"",""],[this.translate.instant("Line_Document"),this.translate.instant("Line_PostingDate"),this.translate.instant("Reconciliation_Reference"),this.translate.instant("Entry_MonetaryValue"),this.translate.instant("Line_PostingDate"),this.translate.instant("Reconciliation_Reference"),this.translate.instant("Entry_MonetaryValue")]],r=Math.max(i.Entries.length,i.ExternalEntries.length);for(let e=0;e<r;e++){const t=i.Entries[e],o=i.ExternalEntries[e],r=[];t?(r.push(this.formatSerialNumber(t.DocumentSerialNumber,t.DocumentDefinitionId)),r.push(Object(Mi.c)(new Date(t.PostingDate))),r.push(t.ExternalReference),r.push(Object(em.a)(t.MonetaryValue*t.Direction,n))):r.push("","","",""),o?(r.push(Object(Mi.c)(new Date(o.PostingDate))),r.push(o.ExternalReference),r.push(Object(em.a)(o.MonetaryValue*o.Direction,n))):r.push("","",""),c.push(r)}const s=Object(N.g)(c);Object(N.i)(s,o)}),Object(P.a)(e=>(this.showExportSpinner=!1,this.displayErrorModal(e.error),Object(O.a)())),Object(ne.a)(()=>{this.showExportSpinner=!1})).subscribe()}}get disableExport(){return this.isLoaded?this.canReadPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}showExport(){return this.isUnreconciled}get postingDateTolerance(){return this._postingDateTolerance}set postingDateTolerance(e){this._postingDateTolerance=e}get postingDateToleranceChoices(){return this._postingDateToleranceChoices}get externalRefTolerance(){return this._externalRefTolerance}set externalRefTolerance(e){this._externalRefTolerance=e}get externalRefToleranceChoices(){return this._externalRefToleranceChoices}onAutoReconcile(){if(!this.disableAutoReconcile){const o=this.postingDateTolerance,c=this.externalRefTolerance,r=this.customUserSettings.get(this._autoReconcileParamsKey);function e(e,t){const n=Math.abs(e.entryDays-t.exEntryDays);return n>o?1/0:n}function t(e,t){const n=Object(Nie.a)(e.entry.ExternalReference,t.exEntry.ExternalReference,c+1);return n>c?1/0:n}function n(n,i){return e(n,i)+1e3*t(n,i)}function i(e,n){return t(e,n)!==1/0}r&&r.postingDateTolerance===o&&r.externalRefTolerance===c||this.customUserSettings.save(this._autoReconcileParamsKey,JSON.stringify({postingDateTolerance:o,externalRefTolerance:c}));const s=this.rows.filter(e=>!!e.entry&&!e.entry.IsReconciledLater&&Object(N.n)(e.entry.MonetaryValue)&&e.entry.PostingDate&&!e.entryReconciliation),l=this.rows.filter(e=>!!e.exEntry&&Object(N.n)(e.exEntry.MonetaryValue)&&e.exEntry.PostingDate&&!e.exEntryReconciliation),a={};for(const e of s){e.entryDays=new Date(e.entry.PostingDate).getTime()/864e5;const t=e.entry.MonetaryValue*e.entry.Direction;a[t]=a[t]||[],a[t].push(e)}const u={};for(const e of l){e.exEntryDays=new Date(e.exEntry.PostingDate).getTime()/864e5;const t=e.exEntry.MonetaryValue*e.exEntry.Direction;u[t]=u[t]||[],u[t].push(e)}let d=0;for(const t of Object.keys(a)){const c=a[t],r=u[t];if(c&&c.length>0&&r&&r.length>0)if(1===c.length&&1===r.length){const t=c[0],n=r[0];e(t,n)!==1/0&&i(t,n)&&(this.addReconciliation([t],[n]),d++)}else{c.sort((e,t)=>e.entryDays-t.entryDays),r.sort((e,t)=>e.exEntryDays-t.exEntryDays);const e=[];let t,i=0,s=0;for(let u=0;u<c.length;u++){const l=c[u];if(l.entryDays!==t){t=l.entryDays;const e=l.entryDays-o;for(;i<r.length&&r[i].exEntryDays<e;)i++;const n=l.entryDays+o;for(;s<r.length&&r[s].exEntryDays<=n;)s++}for(let t=i;t<s;t++){const i=n(l,r[t]);i<1/0&&e.push({eIndex:u,exIndex:t,diff:i})}}e.sort((e,t)=>e.diff-t.diff);const l={},a={};for(const n of e)l[n.eIndex]||a[n.exIndex]||(l[n.eIndex]=!0,a[n.exIndex]=!0,this.addReconciliation([c[n.eIndex]],[r[n.exIndex]]),d++)}}for(const e of this.rows)delete e.entryDays,delete e.exEntryDays;const b=this.translate.instant("AutoReconcileMessage",{0:d});this.displaySuccessModal(b)}}get showAutoReconcile(){return this.isUnreconciled}get disableAutoReconcile(){return this.isLoaded?this.canEditPermissions?null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions"):this.translate.instant("Error_NotLoadedYet")}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}get commandsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}get errorPopoverPlacement(){return"bottom"}get flip(){return this.workspace.ws.isRtl?"horizontal":null}onRefresh(){this.state.reportStatus!==B.i.loading&&this.fetch()}get disableRefresh(){return!this.requiredParametersAreSet}get from(){return Math.min(this.state.arguments.skip+1,this.total)}get to(){const e=this.state.reconciled_response;return Math.min(this.state.arguments.skip+(e?e.Reconciliations.length:this.top),this.total)}get total(){return this.state.reconciled_count||0}onPreviousPage(){const e=this.state.arguments;e.skip=Math.max(e.skip-this.top,0),this.urlStateChanged(),this.fetch()}get canPreviousPage(){return this.state.arguments.skip>0}onNextPage(){const e=this.state.arguments;e.skip=e.skip+this.top,this.urlStateChanged(),this.fetch()}get canNextPage(){return this.to<this.total}get entries_from(){return Math.min(this.state.arguments.entries_skip+1,this.entries_total)}get entries_to(){const e=this.state.unreconciled_response;return Math.min(this.state.arguments.entries_skip+(e?e.Entries.length:this.entriesTop),this.entries_total)}get entries_total(){return this.state.unreconciled_entries_count||0}entries_onPreviousPage(){const e=this.state.arguments;e.entries_skip=Math.max(e.entries_skip-this.entriesTop,0),this.urlStateChanged(),this.fetch()}get entries_canPreviousPage(){return this.state.arguments.entries_skip>0}entries_onNextPage(){const e=this.state.arguments;e.entries_skip=e.entries_skip+this.entriesTop,this.urlStateChanged(),this.fetch()}get entries_canNextPage(){return this.entries_to<this.entries_total}get ex_entries_from(){return Math.min(this.state.arguments.ex_entries_skip+1,this.ex_entries_total)}get ex_entries_to(){const e=this.state.unreconciled_response;return Math.min(this.state.arguments.ex_entries_skip+(e?e.ExternalEntries.length:this.externalEntriesTop),this.ex_entries_total)}get ex_entries_total(){return this.state.unreconciled_ex_entries_count||0}ex_entries_onPreviousPage(){const e=this.state.arguments;e.ex_entries_skip=Math.max(e.ex_entries_skip-this.externalEntriesTop,0),this.urlStateChanged(),this.fetch()}get ex_entries_canPreviousPage(){return this.state.arguments.ex_entries_skip>0}ex_entries_onNextPage(){const e=this.state.arguments;e.ex_entries_skip=e.ex_entries_skip+this.externalEntriesTop,this.urlStateChanged(),this.fetch()}get ex_entries_canNextPage(){return this.ex_entries_to<this.ex_entries_total}get rows(){switch(this.view){case"reconciled":{const e=this.state.reconciled_response;if(this._rowsResponse!==e&&(this._rowsResponse=e,this._rows=[],e))for(const t of e.Reconciliations){const e=Math.max(t.Entries.length,t.ExternalEntries.length);for(let n=0;n<e;n++){const i={reconciliation:t};0===n&&(i.firstOne=e);const o=t.Entries[n];o&&(i.entry=o.Entry);const c=t.ExternalEntries[n];c&&c.ExternalEntryId&&(i.exEntry=c.ExternalEntry),this._rows.push(i)}}break}case"unreconciled":{const e=this.state.unreconciled_response;if(this._rowsResponse!==e&&(this._rowsResponse=e,this._rows=[],e)){const t=Math.max(e.Entries.length,e.ExternalEntries.length);for(let n=0;n<t;n++){const t={};t.entry=e.Entries[n],t.exEntry=e.ExternalEntries[n],this._rows.push(t)}this.fixCreateExEntryRow()}break}default:console.error(`Unknown view ${this.view}`),this._rows=[]}return this._rows}onDeleteReconciliation(e){const t=e.reconciliation;t&&(t.Id&&this.deletedReconciliationIds.push(+t.Id),this._rows=this._rows.filter(e=>e.reconciliation!==t))}get showBuiltInCreateRow(){return this._showBuiltInCreateRow&&this.isUnreconciled&&!this.showErrorMessage}fixCreateExEntryRow(e=-1){this._rows.forEach(e=>delete e.exEntryIsCreate),this._showBuiltInCreateRow=!1;const t=e>=0?e:this.findIndexForCreate();t>=this._rows.length?this._showBuiltInCreateRow=!0:this._rows[t].exEntryIsCreate=!0}findIndexForCreate(){let e=this._rows.length-1;for(;e>=0;e--){const t=this._rows[e];if(t.reconciliation||t.exEntry)break}return e+1}onRowDoubleClick(e){this.isUnreconciled&&(e.exEntryIsCreate?this.onCreateExEntry():this.onEditExEntry(e))}onCreateExEntryOld(){if(!this.isLoaded)return;const e=this.findIndexForCreate(),t={Direction:1};this.externalEntriesForSave.push(t);const n=this.externalEntriesForSave.length-1;if(this._rows.length<=e)this._rows.push({exEntryIsEdit:!0,exEntry:t,exEntryIndex:n}),this._rows=this._rows.slice();else{const i=this._rows[e];i.exEntry=t,i.exEntryIsEdit=!0,i.exEntryIndex=n}return this.fixCreateExEntryRow(e+1),e}onCreateExEntry(){if(!this.isLoaded)return;const e=this.findIndexForCreate(),t=this._rows.length;return this.addCreatedExEntry({Direction:1},e),t!==this._rows.length&&(this._rows=this._rows.slice()),this.fixCreateExEntryRow(e+1),e}addCreatedExEntry(e,t){this.externalEntriesForSave.push(e);const n=this.externalEntriesForSave.length-1;if(this._rows.length<=t)this._rows.push({exEntryIsEdit:!0,exEntry:e,exEntryIndex:n});else{const i=this._rows[t];i.exEntry=e,i.exEntryIsEdit=!0,i.exEntryIndex=n}return t}removeExternalEntryForSave(e){const t=this.externalEntriesForSave;t[e]=null;for(let n=t.length-1;n>=0&&!t[n];n--)t.pop()}onDeleteExEntry(e,t){const n=e.exEntryIndex;Object(N.n)(n)&&this.removeExternalEntryForSave(n),e.exEntry.Id&&this.deletedExternalEntryIds.push(+e.exEntry.Id),delete e.exEntry,delete e.exEntryOriginal,delete e.exEntryIsEdit,delete e.exEntryIndex,delete e.exEntryIsChecked,this.shiftAllExternalEntriesUp(t),this.fixCreateExEntryRow()}shiftAllExternalEntriesUp(e){for(let n=e+1;n<this._rows.length;n++){const e=this._rows[n-1],t=this._rows[n];e.exEntry=t.exEntry,e.exEntryOriginal=t.exEntryOriginal,e.exEntryIsEdit=t.exEntryIsEdit,e.exEntryIndex=t.exEntryIndex,e.exEntryIsChecked=t.exEntryIsChecked,e.exEntryReconciliation=t.exEntryReconciliation}const t=this._rows[this._rows.length-1];t.entry?(delete t.exEntry,delete t.exEntryOriginal,delete t.exEntryIsEdit,delete t.exEntryIndex,delete t.exEntryIsChecked,delete t.exEntryReconciliation):(this._rows.pop(),this._rows=this._rows.slice())}onEditExEntry(e){!e.exEntryIsEdit&&e.exEntry&&(e.exEntryIsEdit=!0,e.exEntryOriginal=e.exEntry,e.exEntry=JSON.parse(JSON.stringify(e.exEntryOriginal)))}onCancelEditExEntry(e,t){e.exEntry.Id?(Object(N.n)(e.exEntryIndex)&&this.removeExternalEntryForSave(e.exEntryIndex),e.exEntryIsEdit=!1,e.exEntry=e.exEntryOriginal,delete e.exEntryOriginal):this.onDeleteExEntry(e,t)}onChangeExEntry(e,t){Object(N.n)(e.exEntryIndex)||(this.externalEntriesForSave.push(e.exEntry),e.exEntryIndex=this.externalEntriesForSave.length-1)}onChangeExternalReference(e,t,n){this.onChangeExEntry(e,t),e.exEntry.ExternalReference=n}onChangePostingDate(e,t,n){this.onChangeExEntry(e,t),e.exEntry.PostingDate=n}onChangeMonetaryValue(e,t,n){this.onChangeExEntry(e,t),this.setMonetaryValue(e.exEntry,n)}resetEdits(){this.externalEntriesForSave=[],this.reconciliationsForSave=[],this.deletedExternalEntryIds=[],this.deletedReconciliationIds=[]}get canSave(){return!0}onSave(){if(this.canSave&&this.isDirty&&this.requiredParametersAreSet&&!this.loadingRequiredParameters){for(const i of this.externalEntriesForSave)i&&delete i.serverErrors;for(const i of this.reconciliationsForSave){delete i.serverErrors;for(const e of i.Entries)delete e.serverErrors;for(const e of i.ExternalEntries)delete e.serverErrors}const e={ExternalEntries:this.externalEntriesForSave,Reconciliations:this.reconciliationsForSave,DeletedExternalEntryIds:this.deletedExternalEntryIds,DeletedReconciliationIds:this.deletedReconciliationIds},t=this.state;let n;this.isUnreconciled?n=this.api.saveAndGetUnreconciled(e,this.UnreconciledArgs).pipe(Object(us.a)(e=>{t.unreconciled_response=e,t.unreconciled_entries_count=e.UnreconciledEntriesCount,t.unreconciled_ex_entries_count=e.UnreconciledExternalEntriesCount})):this.isReconciled?n=this.api.saveAndGetReconciled(e,this.ReconciledArgs).pipe(Object(us.a)(e=>{t.reconciled_response=e,t.reconciled_count=e.ReconciledCount})):console.error(`Unknown view ${this.view}`),n.pipe(Object(A.a)(e=>{t.reportStatus=B.i.loaded,this.resetEdits()}),Object(P.a)(t=>{if(422===t.status){const n=t.error,i=Object.keys(n),o=[];for(const t of i){const i=n[t],c=t.split("."),r=c[0];if(r.startsWith("ExternalEntries")&&c.length>1){const t=+r.substring(0,r.length-1).split("[")[1];if(isNaN(t))o.push(...i);else{const n=c[1];switch(n){case"PostingDate":case"ExternalReference":case"MonetaryValue":const c=e.ExternalEntries[t];c.serverErrors=c.serverErrors||{},c.serverErrors[n]=i;break;default:o.push(...i)}}}else if(r.startsWith("Reconciliations")&&c.length>2){const t=+r.substring(0,r.length-1).split("[")[1];if(isNaN(t))o.push(...i);else{const n=e.Reconciliations[t];n.serverErrors=n.serverErrors||{};const r=c[1];r.startsWith("Entries")?(n.serverErrors.Entries=n.serverErrors.Entries||[],n.serverErrors.Entries.push(...i)):r.startsWith("ExternalEntries")?(n.serverErrors.ExternalEntries=n.serverErrors.ExternalEntries||[],n.serverErrors.ExternalEntries.push(...i)):o.push(...i)}}else o.push(...i)}if(o.length>0){const e={};for(const r of o)e[r]=!0;const t=Object.keys(e),n="\n",i=10;let c=t.slice(0,i).map(e=>` - ${e}`).join(n);t.length>i&&(c+="..."),this.displayErrorModal(c)}}else this.displayErrorModal(t.error);return Object(O.a)(null)})).subscribe()}}displayErrorModal(e){this._modalErrorMessage=e,this.modalService.open(this.errorModal)}displaySuccessModal(e){this._modalSuccessMessage=e,this.modalService.open(this.successModal)}onCancel(){const e=this.canDeactivate();e instanceof kb.a?e.subscribe(e=>{e&&this.doCancel()}):e&&this.doCancel()}doCancel(){this.resetEdits(),delete this._rowsResponse}get showCheckedEntriesToolbar(){return!!this.rows&&this.rows.some(e=>e.entryIsChecked||e.exEntryIsChecked)}get showEditToolbar(){return this.isDirty&&!this.showCheckedEntriesToolbar}get showViewToolbar(){return!this.isDirty&&!this.showCheckedEntriesToolbar}get checkedEntries(){return this.rows?this.rows.filter(e=>!!e.entry&&e.entryIsChecked).map(e=>e.entry):[]}get checkedExEntries(){return this.rows?this.rows.filter(e=>!!e.exEntry&&e.exEntryIsChecked).map(e=>e.exEntry):[]}get checkedEntriesTotal(){return this.checkedEntries.map(e=>e.Direction*e.MonetaryValue).reduce((e,t)=>e+t,0)}get checkedExEntriesTotal(){return this.checkedExEntries.map(e=>e.Direction*(e.MonetaryValue||0)).reduce((e,t)=>e+t,0)}get isDirty(){return this.externalEntriesForSave.length>0||this.reconciliationsForSave.length>0||this.deletedExternalEntryIds.length>0||this.deletedReconciliationIds.length>0}uncheckAll(){if(this.rows)for(const e of this.rows)delete e.entryIsChecked,delete e.exEntryIsChecked}onCloneAndReconcile(e){const t=e.entry;if(t){const n=this.onCreateExEntry(),i=this.rows[n],o=i.exEntry;o.PostingDate=t.PostingDate,o.ExternalReference=t.ExternalReference,o.Direction=t.Direction,o.MonetaryValue=t.MonetaryValue,e.entryIsChecked=!0,i.exEntryIsChecked=!0}}onUndoCloneAndReconcile(e){const t=e.entryReconciliation,n=this._rows.map((e,t)=>({row:e,index:t})).filter(e=>e.row.exEntryReconciliation===t);for(const i of n)this.onDeleteExEntry(i.row,i.index);this.removeReconciliation(t)}onReconcileChecked(){if(!this.disableReconcileChecked){const e=[],t=[];for(const n of this._rows)n.entryIsChecked&&n.entry&&e.push(n),n.exEntryIsChecked&&n.exEntry&&t.push(n);this.addReconciliation(e,t)}}get disableReconcileChecked(){return this.canEditPermissions?this.checkedEntries.length>1&&this.checkedExEntries.length>1?this.translate.instant("Error_ManyToManyReconciliation"):Math.round(1e4*this.checkedEntriesTotal)!==Math.round(1e4*this.checkedExEntriesTotal)?this.translate.instant("Error_TotalsImbalance"):null:this.translate.instant("Error_AccountDoesNotHaveSufficientPermissions")}addReconciliation(e,t){const n={Entries:[],ExternalEntries:[]};for(const i of e)delete i.entryIsChecked,i.entryReconciliation=n,n.Entries.push({EntryId:+i.entry.Id});for(const i of t)delete i.exEntryIsChecked,i.exEntryReconciliation=n,n.ExternalEntries.push({ExternalEntryId:+i.exEntry.Id||void 0,ExternalEntryIndex:i.exEntryIndex});this.reconciliationsForSave.push(n)}onUndoReconcileCheckedEntry(e){this.removeReconciliation(e.entryReconciliation)}onUndoReconciledCheckedExEntry(e){this.removeReconciliation(e.exEntryReconciliation)}removeReconciliation(e){if(e){this.reconciliationsForSave=this.reconciliationsForSave.filter(t=>t!==e);for(const t of this._rows)t.entryReconciliation===e&&delete t.entryReconciliation,t.exEntryReconciliation===e&&delete t.exEntryReconciliation}}onCancelReconcileChecked(){this.uncheckAll()}get amountsDecimals(){const e=this.ws.get("Custody",this.custodyId),t=this.ws.get("Account",this.accountId);if(this.amountsDecimalsCustody!==e&&this.amountsDecimalsAccount!==t){this.amountsDecimalsCustody=e,this.amountsDecimalsAccount=t;const n=this.ws.get("Currency",(t?t.CurrencyId:null)||(e?e.CurrencyId:null));this.amountsDecimalsResult=n?n.E:this.ws.settings.FunctionalCurrencyDecimals}return this.amountsDecimalsResult}get amountsFormat(){const e=this.ws.get("Custody",this.custodyId),t=this.ws.get("Account",this.accountId);if(this.amountsFormatCustody!==e&&this.amountsFormatAccount!==t){this.amountsFormatAccount=e,this.amountsFormatCustody=t;const n=this.amountsDecimals;this.amountsFormatResult=`1.${n}-${n}`}return this.amountsFormatResult}getMonetaryValue(e){return e?e.Direction*e.MonetaryValue:null}setMonetaryValue(e,t){e&&(e.Direction=t<0?-1:1,e.MonetaryValue=Math.abs(t))}formatSerialNumber(e,t){return Object(Lh.b)(e,this.ws,t)}get collapseParameters(){return this.state.collapseParams}set collapseParameters(e){const t=this.state;t.collapseParams!==e&&(t.collapseParams=e)}onToggleCollapseParameters(){this.collapseParameters=!this.collapseParameters}onReconciledEntryMouseEnter(e){this._hoveredReconciliation=e.entryReconciliation}onReconciledEntryMouseLeave(e){delete this._hoveredReconciliation}onReconciledExEntryMouseEnter(e){this._hoveredReconciliation=e.exEntryReconciliation}onReconciledExEntryMouseLeave(e){delete this._hoveredReconciliation}isHoveredEntryReconciliation(e){return!!this._hoveredReconciliation&&this._hoveredReconciliation===e.entryReconciliation}isHoveredExEntryReconciliation(e){return!!this._hoveredReconciliation&&this._hoveredReconciliation===e.exEntryReconciliation}handleKeyboardEvent(e){this.workspace.ignoreKeyDownEvents||e.altKey&&"KeyR"===e.code&&this.showCheckedEntriesToolbar&&this.onReconcileChecked()}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(i.e),o.Pb(X.a),o.Pb(i.a),o.Pb(J.a),o.Pb(Q.e),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-reconciliation"]],viewQuery:function(e,t){var n;1&e&&(o.Oc(jie,!0),o.Oc(Wie,!0),o.Oc($ie,!0)),2&e&&(o.Ec(n=o.ic())&&(t.errorModal=n.first),o.Ec(n=o.ic())&&(t.successModal=n.first),o.Ec(n=o.ic())&&(t.unsavedChangesModal=n.first))},hostBindings:function(e,t){1&e&&o.hc("keydown",(function(e){return t.handleKeyboardEvent(e)}),!1,o.Gc)},decls:46,vars:38,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["class","text-danger t-dirty-asterisk px-1",4,"ngIf"],[1,"mx-auto","mb-3","w-100",2,"max-width","700px"],[1,"w-100"],[1,"row","m-0","px-0","px-lg-1","py-1"],[1,"t-form-group",3,"label"],[3,"ngModel","choices","ngModelOptions","disabled","hideEmptyOption","ngModelChange"],["additionalSelect","CustodyDefinitionId,Currency.E","filter","AccountType.Concept eq 'BalancesWithBanks'",3,"ngModel","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded"],["class","t-form-group",3,"label",4,"ngIf"],[4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],["class","d-inline",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button","font-weight-normal",3,"title","click"],[3,"icon"],[1,"d-none","d-md-inline"],[1,"row","t-rest-of-screen"],["class","table-responsive",4,"ngIf","ngIfElse"],["spinner",""],["errorModal",""],["successModal",""],["unsavedChangesModal",""],["reconciliationReport",""],["autoReconcile",""],[1,"text-danger","t-dirty-asterisk","px-1"],["additionalSelect","Currency.E",3,"ngModel","definitionIds","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded",4,"ngIf"],[3,"link","itemId",4,"ngIf"],["additionalSelect","Currency.E",3,"ngModel","definitionIds","ensureAdditionalSelect","showCreate","disabled","ngModelChange","entityLoaded"],[3,"link","itemId"],[3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"ngModel","ngModelOptions","disabled","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],[1,"mx-2","t-vertical-align-middle"],["container","body",1,"d-inline-block",3,"placement","ngbTooltip"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","compress"],["type","button",1,"btn","btn-sm","btn-light","text-primary","t-white-button","t-toolbar-button",3,"click"],["icon","times"],[1,"btn","btn-sm","t-toolbar-button","btn-primary",3,"click"],["icon","save"],[1,"btn","btn-sm","t-toolbar-button","btn-light","text-primary","t-white-button",3,"click"],["class","d-inline-block","container","body",3,"placement","ngbTooltip",4,"ngIf"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","class","btn btn-light btn-sm text-primary t-white-button t-toolbar-button dropdown-toggle","ngbDropdownToggle","",4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["container","body",3,"placement","ngbTooltip",4,"ngIf"],["icon","chart-line"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["container","body",3,"placement","ngbTooltip"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"disabled","click"],[1,"d-inline"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"t-vertical-align-middle","small","mx-2"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],[1,"table-responsive"],["itemSize","31",1,"h-100"],[1,"table","table-sm","border-bottom","bg-white","t-master-table","text-nowrap","table-striped","table-hover"],["colSpan","4",1,"w-50"],[1,"d-flex","justify-content-between","align-items-baseline"],[4,"ngIf","ngIfElse"],["reconciledheader1",""],["class","btn btn-light text-primary t-white-button btn-sm py-0 px-1 mx-2 align-baseline",3,"title","click",4,"ngIf"],["type","file","accept",".csv,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",1,"d-none",3,"change"],["fileInput",""],[1,"text-right"],["reconciledheader2",""],[2,"width","12.5%"],[2,"width","25%"],[1,"text-right",2,"width","12.5%"],[1,"t-slimfit"],[3,"t-highlight-a","t-pale-a","t-highlight-b","t-pale-b","t-yellow-a","t-yellow-b",4,"cdkVirtualFor","cdkVirtualForOf"],["createMenu",""],["class","w-100 p-2 d-flex justify-content-center mt-3",4,"ngIf"],["class","w-100 p-3 px-4",4,"ngIf"],["class","w-100 pl-3 pr-3 mt-3",4,"ngIf"],["class","w-100 mt-3",4,"ngIf"],[1,"py-5","t-transparent"],[1,"t-vertical-align-middle","font-weight-normal","mx-2"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","mx-2","align-baseline",3,"title","click"],["icon","download","tabindex","-1"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"disabled","title","click"],["icon","upload","tabindex","-1"],[1,"t-slimfit",2,"min-width","33px"],[1,"t-slimfit",2,"min-width","42px"],[1,"t-slimfit","px-0"],[1,"t-a"],[1,"text-right","t-a"],["reconciledcolumns",""],["viewExEntry",""],[1,"t-b"],[1,"text-center","t-a"],["class","mx-2","container","body","triggers","mouseenter:mouseleave",3,"ngbPopover","placement",4,"ngIf"],[1,"px-0","t-a"],["class","mx-2","popoverClass","t-error-popover","container","body","triggers","mouseenter:mouseleave",3,"ngbPopover","placement",4,"ngIf"],["entryErrorsPopover",""],[1,"px-0","t-b"],["exEntryErrorsPopover",""],[1,"text-center","t-b"],["reconciledLaterInfo",""],["class","btn btn-light text-primary t-white-button btn-sm py-0 px-1 align-baseline",3,"title","click",4,"ngIf"],[1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"title","click"],["icon","clone","tabindex","-1"],["class","custom-control custom-checkbox t-labelless-checkbox d-inline",4,"ngIf","ngIfElse"],["cancelButton",""],[1,"custom-control","custom-checkbox","t-labelless-checkbox","d-inline"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label","t-pointer",3,"for"],[1,"btn","btn-light","text-black-50","t-white-button","btn-sm","py-0","px-1","align-baseline",3,"title","click","mouseenter","mouseleave"],[1,"small"],["icon","times","tabindex","-1"],["container","body","triggers","mouseenter:mouseleave",1,"mx-2",3,"ngbPopover","placement"],["icon","exclamation-circle",1,"text-muted"],["popoverClass","t-error-popover","container","body","triggers","mouseenter:mouseleave",1,"mx-2",3,"ngbPopover","placement"],["icon","exclamation-triangle",1,"text-danger"],[2,"width","250px"],["class","m-0 p-0",4,"ngFor","ngForOf"],[1,"m-0","p-0"],["icon","exclamation-triangle"],["excancelbutton",""],["icon","exclamation-circle"],[1,"bg-white","border-right","border-left"],[1,"t-form-group",3,"serverErrors"],[3,"disabled","ngModel","ngModelOptions","ngModelChange"],[1,"text-right","t-b"],["textAlignment","right",3,"disabled","ngModel","ngModelOptions","minDecimalPlaces","maxDecimalPlaces","ngModelChange"],["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"t-b",3,"ngbPopover","placement","dblclick"],["class","text-danger mx-1","icon","exclamation-triangle",4,"ngIf"],["postingDateErrors",""],["exRefErrors",""],["container","body","popoverClass","t-error-popover","triggers","mouseenter:mouseleave",1,"text-right","t-b",3,"ngbPopover","placement","dblclick"],["monetaryValueErrors",""],["icon","exclamation-triangle",1,"text-danger","mx-1"],[1,"",2,"width","250px"],["ngbDropdown","",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu","",2,"min-width","5rem"],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf","ngIfElse"],["cancelTemplate",""],["ngbDropdownItem","","class","t-transparent-background",3,"click",4,"ngIf"],["ngbDropdownItem","",1,"t-transparent-background",3,"click"],[4,"ngTemplateOutlet"],[3,"colSpan"],[3,"colSpan","dblclick"],[1,"w-100","p-2","d-flex","justify-content-center","mt-3"],[3,"scale"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"w-100","pl-3","pr-3","mt-3"],[1,"w-100","mt-3"],[1,"text-center","w-100"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",2,"white-space","pre"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","check",1,"text-success"],[1,"modal-body"],[1,"btn","btn-danger",3,"click"],["icon","check"],["ngbAutofocus","",1,"btn","btn-light","text-primary","t-white-button",3,"click"],[1,"row","pt-0","pb-3"],[1,"t-wide-form-group",3,"label"],[1,"table-responsive","mt-2"],[1,"table","table-sm","border-bottom","text-nowrap","table-striped"],["icon","minus",1,"t-vertical-align-middle"],["icon","plus",1,"t-vertical-align-middle"],["icon","equals",1,"t-vertical-align-middle"],[1,"row","pt-0","pb-3","px-2"],[3,"ngModel","choices","hideEmptyOption","ngModelChange"],["ngbAutofocus","",1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-light","text-primary","t-white-button",3,"click"]],template:function(e,t){if(1&e&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"div",2),o.Vb(3,"ul",3),o.Vb(4,"li",4),o.Tc(5),o.mc(6,"translate"),o.Rc(7,qie,2,0,"span",5),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",6),o.Vb(9,"div",7),o.Vb(10,"div",8),o.Vb(11,"t-form-group",9),o.mc(12,"translate"),o.Vb(13,"t-selector",10),o.hc("ngModelChange",(function(e){return t.view=e})),o.Ub(),o.Ub(),o.Vb(14,"t-form-group",9),o.mc(15,"translate"),o.Vb(16,"t-accounts-picker",11),o.hc("ngModelChange",(function(e){return t.accountId=e}))("entityLoaded",(function(){return t.onParameterLoaded()})),o.Ub(),o.Ub(),o.Rc(17,Gie,3,3,"t-form-group",12),o.Rc(18,Jie,4,7,"ng-container",13),o.Rc(19,Kie,16,39,"ng-container",13),o.Ub(),o.Ub(),o.Ub(),o.Vb(20,"div",14),o.Rc(21,Xie,17,22,"div",13),o.Rc(22,Zie,9,6,"div",13),o.Rc(23,ooe,7,5,"div",13),o.Vb(24,"div"),o.Rc(25,roe,5,5,"div",15),o.Vb(26,"button",16),o.hc("click",(function(){return t.onToggleCollapseParameters()})),o.mc(27,"translate"),o.Qb(28,"fa-icon",17),o.Vb(29,"span",18),o.Tc(30),o.mc(31,"translate"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(32,"div",19),o.Rc(33,lce,61,41,"div",20),o.Rc(34,ace,2,1,"ng-template",null,21,o.Sc),o.Ub(),o.Ub(),o.Rc(36,uce,15,7,"ng-template",null,22,o.Sc),o.Rc(38,dce,15,7,"ng-template",null,23,o.Sc),o.Rc(40,bce,19,12,"ng-template",null,24,o.Sc),o.Rc(42,fce,61,46,"ng-template",null,25,o.Sc),o.Rc(44,mce,24,22,"ng-template",null,26,o.Sc)),2&e){const e=o.Fc(35);o.Bb(5),o.Vc(" ",o.nc(6,27,"BankReconciliation")," "),o.Bb(2),o.sc("ngIf",t.isDirty),o.Bb(1),o.Gb("d-none",t.collapseParameters),o.Bb(3),o.sc("label",o.nc(12,29,"View")),o.Bb(2),o.sc("ngModel",t.view)("choices",t.viewChoices)("ngModelOptions",o.vc(37,zie))("disabled",t.isDirty)("hideEmptyOption",!0),o.Bb(1),o.sc("label",o.nc(15,31,"Entry_Account")),o.Bb(2),o.sc("ngModel",t.accountId)("ensureAdditionalSelect",!0)("showCreate",!1)("disabled",t.isDirty),o.Bb(1),o.sc("ngIf",t.showCustodyParameter),o.Bb(1),o.sc("ngIf",t.isUnreconciled),o.Bb(1),o.sc("ngIf",t.isReconciled),o.Bb(2),o.sc("ngIf",t.showCheckedEntriesToolbar),o.Bb(1),o.sc("ngIf",t.showEditToolbar),o.Bb(1),o.sc("ngIf",t.showViewToolbar),o.Bb(2),o.sc("ngIf",!t.isDirty),o.Bb(1),o.tc("title",o.nc(27,33,t.collapseParameters?"Expand":"Collapse")),o.Bb(2),o.sc("icon",t.collapseParameters?"angle-down":"angle-up"),o.Bb(2),o.Vc("\xa0\xa0",o.nc(31,35,t.collapseParameters?"Expand":"Collapse"),""),o.Bb(3),o.sc("ngIf",t.initialized)("ngIfElse",e)}},directives:[x.u,pe.a,hn.a,te.k,te.n,dW,ee.b,nj,ss,Nu,he.a,In,K.E,K.l,K.p,K.r,K.o,oo.e,oo.a,oo.d,te.a,K.C,x.t,cQ,x.B,me.a,ve.a],pipes:[Q.d,tm,x.g,Zf],encapsulation:2}),e})();function pce(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",9),o.Vb(4,"span",8),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.c[e].ToEmail),o.Bb(3),o.Uc(n.c[e].Subject)}}function hce(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Email_Subject"),"\n")}function vce(e,t){if(1&e&&(o.Vb(0,"span",10),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.Uc(n.c[e].Subject)}}function Ice(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Success")," ")}function yce(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Pending")," ")}function wce(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Error")," ")}const Cce=function(){return[]},Mce=function(e){return{template:e,expression:"State gt 2"}},Vce=function(e){return{template:e,expression:"State ge 0 and State le 2"}},Tce=function(e){return{template:e,expression:"State lt 0"}},Ece=function(e,t,n){return[e,t,n]},xce=function(e){return{State:e}};let Uce=(()=>{class e extends Ut.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.EmailForQuery}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-emails-master"]],features:[o.yb],decls:14,vars:27,consts:[["collection","EmailForQuery","selectDefault","ToEmail,State,StateSince","selectForTiles","ToEmail,Subject",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["success",""],["pending",""],["error",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,pce,6,2,"ng-template",null,1,o.Sc),o.Rc(4,hce,2,3,"ng-template",null,2,o.Sc),o.Rc(6,vce,2,1,"ng-template",null,3,o.Sc),o.Rc(8,Ice,2,3,"ng-template",null,4,o.Sc),o.Rc(10,yce,2,3,"ng-template",null,5,o.Sc),o.Rc(12,wce,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"Emails"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(14,Cce))("filterDefinition",o.wc(25,xce,o.yc(21,Ece,o.wc(15,Mce,c),o.wc(17,Vce,r),o.wc(19,Tce,s))))}},directives:[Rt.a],pipes:[Q.d],encapsulation:2}),e})();var Rce=n("d9Te");const Dce=["iframe"];function Bce(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.model;o.Bb(1),o.Uc(null==e?null:e.Subject)}}function Sce(e,t){if(1&e&&(o.Vb(0,"t-form-group",3),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"datetimeFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"Email_DeliveredAt")),o.Bb(3),o.Uc(o.nc(4,4,null==e?null:e.DeliveredAt))}}function kce(e,t){if(1&e&&(o.Vb(0,"t-form-group",3),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.mc(4,"datetimeFormat"),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"Email_OpenedAt")),o.Bb(3),o.Uc(o.nc(4,4,null==e?null:e.OpenedAt))}}function Oce(e,t){if(1&e&&(o.Vb(0,"t-form-group",3),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"Email_ErrorMessage")),o.Bb(3),o.Uc(null==e?null:e.ErrorMessage)}}function _ce(e,t){1&e&&(o.Tb(0),o.Qb(1,"div",8),o.Vb(2,"div",9),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"div",10),o.Qb(6,"iframe",11,12),o.Ub(),o.Sb()),2&e&&(o.Bb(3),o.Vc(" ",o.nc(4,1,"Email_Body")," "))}function Lce(e,t){if(1&e&&(o.Vb(0,"t-form-group",3),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub(),o.Vb(4,"t-form-group",3),o.mc(5,"translate"),o.Vb(6,"div"),o.Tc(7),o.Ub(),o.Ub(),o.Qb(8,"div",4),o.Vb(9,"t-form-group",3),o.Vb(10,"div",5),o.Tc(11),o.Ub(),o.Ub(),o.Vb(12,"t-form-group",3),o.mc(13,"translate"),o.Vb(14,"div"),o.Tc(15),o.mc(16,"datetimeFormat"),o.Ub(),o.Ub(),o.Rc(17,Sce,5,6,"t-form-group",6),o.Rc(18,kce,5,6,"t-form-group",6),o.Rc(19,Oce,4,4,"t-form-group",6),o.Rc(20,_ce,8,3,"ng-container",7)),2&e){const e=t.model,n=o.lc();o.sc("label",o.nc(1,14,"Email_Subject")),o.Bb(3),o.Uc(null==e?null:e.Subject),o.Bb(1),o.sc("label",o.nc(5,16,"Email_ToEmail")),o.Bb(3),o.Uc(null==e?null:e.ToEmail),o.Bb(2),o.sc("label","State"),o.Bb(1),o.Qc("background",n.stateColor(null==e?null:e.State),o.Ib),o.Bb(1),o.Vc("",n.stateDisplay(null==e?null:e.State)," "),o.Bb(1),o.sc("label",o.nc(13,18,"StateSince")),o.Bb(3),o.Uc(o.nc(16,20,null==e?null:e.StateSince)),o.Bb(2),o.sc("ngIf",!!e&&e.State<=-4||e.State>=3),o.Bb(1),o.sc("ngIf",!!e&&e.State<=-4||e.State>=4),o.Bb(1),o.sc("ngIf",!!e&&e.State<0),o.Bb(1),o.sc("ngIf",n.watch(null==e?null:e.Body))}}const Ace=function(){return[]};let Fce=(()=>{class e extends gn.a{constructor(e,t){super(),this.workspace=e,this.translate=t,this.expand=""}set iframe(e){this._iframe!==e&&(this._iframe&&this._iframe.nativeElement.contentWindow.location.replace(void 0),this._iframe=e,this._iframe&&this._iframe.nativeElement.contentWindow.location.replace(this._url))}get iframe(){return this._iframe}ngOnDestroy(){this.emailBodyCleanup(),super.ngOnDestroy()}emailBodyCleanup(){this._url&&(window.URL.revokeObjectURL(this._url),delete this._url),delete this._body,this.iframe&&this.iframe.nativeElement.contentWindow.location.replace(void 0)}get ws(){return this.workspace.currentTenant}stateDisplay(e){if(!this._stateDesc){const e=Object(Rce.a)(null,this.translate);this._stateDesc=e.properties.State}return this._stateDesc.format(e)}stateColor(e){if(!this._stateDesc){const e=Object(Rce.a)(null,this.translate);this._stateDesc=e.properties.State}return this._stateDesc.color(e)}watch(e){if(e){if(e!==this._body){this._body=e;const t=new Blob([`<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8">\n</head>\n<body style="margin: 0; padding: 1rem;">\n  <div style="display: flex; justify-content: center;">\n    ${e}\n  </div>\n</body>\n</html>`],{type:"text/html"});this._url=window.URL.createObjectURL(t)+"#toolbar=0&navpanes=0&scrollbar=0",this.iframe&&this.iframe.nativeElement.contentWindow.location.replace(this._url)}}else this.emailBodyCleanup();return!!e}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-emails-details"]],viewQuery:function(e,t){var n;1&e&&o.Yc(Dce,!0),2&e&&o.Ec(n=o.ic())&&(t.iframe=n.first)},features:[o.yb],decls:6,vars:14,consts:[["collection","EmailForQuery",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"t-form-group",3,"label"],[1,"w-100"],[1,"text-white","px-2"],["class","t-form-group",3,"label",4,"ngIf"],[4,"ngIf"],[1,"w-100","mt-2"],[1,"small","font-weight-bold","t-form-group"],[1,"w-100","mt-2","border-top",2,"min-height","500px"],["sandbox","",1,"p-0","border-0","w-100","h-100","d-block"],["iframe",""]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,Bce,2,1,"ng-template",null,1,o.Sc),o.Rc(4,Lce,21,22,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5);o.sc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",o.nc(1,11,"Emails"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.vc(13,Ace))}},directives:[j.a,pe.a,x.u],pipes:[Q.d,we],encapsulation:2}),e})();var Pce=n("klyd");function Nce(e,t){if(1&e&&(o.Vb(0,"div",3),o.Tc(1),o.Ub()),2&e){const e=t.model;o.Bb(1),o.Uc(null==e?null:e.Message)}}function jce(e,t){if(1&e&&(o.Vb(0,"t-form-group",4),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub()),2&e){const e=o.lc().model;o.sc("label",o.nc(1,2,"SmsMessage_ErrorMessage")),o.Bb(3),o.Uc(null==e?null:e.ErrorMessage)}}function Wce(e,t){if(1&e&&(o.Vb(0,"t-form-group",4),o.mc(1,"translate"),o.Vb(2,"div"),o.Tc(3),o.Ub(),o.Ub(),o.Qb(4,"div",5),o.Vb(5,"t-form-group",4),o.Vb(6,"div",6),o.Tc(7),o.Ub(),o.Ub(),o.Vb(8,"t-form-group",4),o.mc(9,"translate"),o.Vb(10,"div"),o.Tc(11),o.mc(12,"datetimeFormat"),o.Ub(),o.Ub(),o.Rc(13,jce,4,4,"t-form-group",7),o.Vb(14,"t-form-group",8),o.mc(15,"translate"),o.Vb(16,"span",9),o.Tc(17),o.Ub(),o.Ub()),2&e){const e=t.model,n=o.lc();o.sc("label",o.nc(1,11,"SmsMessage_ToPhoneNumber")),o.Bb(3),o.Uc(null==e?null:e.ToPhoneNumber),o.Bb(2),o.sc("label","State"),o.Bb(1),o.Qc("background",n.stateColor(null==e?null:e.State),o.Ib),o.Bb(1),o.Vc("",n.stateDisplay(null==e?null:e.State)," "),o.Bb(1),o.sc("label",o.nc(9,13,"StateSince")),o.Bb(3),o.Uc(o.nc(12,15,null==e?null:e.StateSince)),o.Bb(2),o.sc("ngIf",!!e&&e.State<0),o.Bb(1),o.sc("label",o.nc(15,17,"SmsMessage_Message")),o.Bb(3),o.Uc(null==e?null:e.Message)}}const $ce=function(){return[]};let qce=(()=>{class e extends gn.a{constructor(e,t){super(),this.workspace=e,this.translate=t,this.expand=""}get ws(){return this.workspace.currentTenant}stateDisplay(e){if(!this._stateDesc){const e=Object(Pce.a)(null,this.translate);this._stateDesc=e.properties.State}return this._stateDesc.format(e)}stateColor(e){if(!this._stateDesc){const e=Object(Pce.a)(null,this.translate);this._stateDesc=e.properties.State}return this._stateDesc.color(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-sms-messages-details"]],features:[o.yb],decls:6,vars:14,consts:[["collection","SmsMessageForQuery",3,"expand","mode","additionalSelect","showCreateButton","showEditButton","showDeleteButton","masterCrumb","detailsCrumb","idString","documentTemplate","actions"],["detailsCrumb",""],["document",""],[1,"text-truncate",2,"max-width","200px"],[1,"t-form-group",3,"label"],[1,"w-100"],[1,"text-white","px-2"],["class","t-form-group",3,"label",4,"ngIf"],[1,"t-wide-form-group",3,"label"],[2,"white-space","pre"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,Nce,2,1,"ng-template",null,1,o.Sc),o.Rc(4,Wce,18,19,"ng-template",null,2,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5);o.sc("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("showCreateButton",!1)("showEditButton",!1)("showDeleteButton",!1)("masterCrumb",o.nc(1,11,"SmsMessages"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.vc(13,$ce))}},directives:[j.a,pe.a,x.u],pipes:[Q.d,we],encapsulation:2}),e})();function Qce(e,t){if(1&e&&(o.Vb(0,"div",7),o.Vb(1,"span",8),o.Tc(2),o.Ub(),o.Ub(),o.Vb(3,"div",9),o.Vb(4,"span",8),o.Tc(5),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.c[e].ToPhoneNumber),o.Bb(3),o.Uc(n.c[e].Message)}}function Hce(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"SmsMessage_Message"),"\n")}function Gce(e,t){if(1&e&&(o.Vb(0,"div",10),o.Tc(1),o.Ub()),2&e){const e=t.id,n=o.lc();o.sc("title",n.c[e].Message),o.Bb(1),o.Uc(n.c[e].Message)}}function zce(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Success")," ")}function Jce(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Pending")," ")}function Kce(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"Error")," ")}const Yce=function(){return[]},Xce=function(e){return{template:e,expression:"State eq 4"}},Zce=function(e){return{template:e,expression:"State ge 0 and State le 3"}},ere=function(e){return{template:e,expression:"State lt 0"}},tre=function(e,t,n){return[e,t,n]},nre=function(e){return{State:e}};let ire=(()=>{class e extends Ut.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.SmsMessageForQuery}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-sms-messages-master"]],features:[o.yb],decls:14,vars:27,consts:[["collection","SmsMessageForQuery","selectDefault","ToPhoneNumber,State,StateSince","selectForTiles","ToPhoneNumber,Message",3,"mode","showCreateButton","filterDefault","additionalSelect","masterCrumb","showImportButton","showDeleteButton","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["success",""],["pending",""],["error",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate",2,"max-width","400px",3,"title"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,Qce,6,2,"ng-template",null,1,o.Sc),o.Rc(4,Hce,2,3,"ng-template",null,2,o.Sc),o.Rc(6,Gce,2,2,"ng-template",null,3,o.Sc),o.Rc(8,zce,2,3,"ng-template",null,4,o.Sc),o.Rc(10,Jce,2,3,"ng-template",null,5,o.Sc),o.Rc(12,Kce,2,3,"ng-template",null,6,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11),s=o.Fc(13);o.sc("mode",t.mode)("showCreateButton",!1)("filterDefault",t.filter)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"SmsMessages"))("showImportButton",!1)("showDeleteButton",!1)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(14,Yce))("filterDefinition",o.wc(25,nre,o.yc(21,tre,o.wc(15,Xce,c),o.wc(17,Zce,r),o.wc(19,ere,s))))}},directives:[Rt.a],pipes:[Q.d],encapsulation:2}),e})();var ore=n("wHSu");function cre(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.mc(2,"dateFormat"),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc(o.nc(2,1,null==e?null:e.ArchiveDate))}}const rre=function(){return{updateOn:"blur"}};function sre(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-date-picker",10),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ArchiveDate=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.ArchiveDate)("ngModelOptions",o.vc(2,rre))}}function lre(e,t){if(1&e&&(o.Vb(0,"t-view-link",11),o.Tc(1),o.Ub()),2&e){const e=o.lc().model,t=o.lc();o.sc("itemId",null==e?null:e.FunctionalCurrencyId),o.Bb(1),o.Vc(" ",t.ws.getMultilingualValue("Currency",null==e?null:e.FunctionalCurrencyId,"Name")," ")}}function are(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-currencies-picker",12),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.FunctionalCurrencyId=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.FunctionalCurrencyId)}}function ure(e,t){if(1&e&&(o.Vb(0,"div"),o.Tc(1),o.Ub()),2&e){const e=o.lc().model;o.Bb(1),o.Uc((null==e?null:e.TaxIdentificationNumber)||"-")}}function dre(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-text-editor",13),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.TaxIdentificationNumber=t})),o.Ub()}if(2&e){const e=o.lc().model;o.sc("ngModel",e.TaxIdentificationNumber)("ngModelOptions",o.vc(2,rre))}}function bre(e,t){if(1&e&&(o.Vb(0,"div",2),o.Vb(1,"div",3),o.Vb(2,"t-form-group-settings",4),o.mc(3,"translate"),o.mc(4,"translate"),o.Rc(5,cre,3,3,"div",5),o.Rc(6,sre,1,3,"t-date-picker",6),o.Ub(),o.Vb(7,"t-form-group-settings",4),o.mc(8,"translate"),o.mc(9,"translate"),o.Rc(10,lre,2,2,"t-view-link",7),o.Rc(11,are,1,1,"t-currencies-picker",8),o.Ub(),o.Vb(12,"t-form-group-settings",4),o.mc(13,"translate"),o.mc(14,"translate"),o.Rc(15,ure,2,1,"div",5),o.Rc(16,dre,1,3,"t-text-editor",9),o.Ub(),o.Ub(),o.Ub()),2&e){const e=t.model,n=t.isEdit;o.Bb(2),o.sc("label",o.nc(3,15,"Settings_ArchiveDate"))("description",o.nc(4,17,"Settings_ArchiveDateDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.ArchiveDate),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(8,19,"Settings_FunctionalCurrency"))("description",o.nc(9,21,"Settings_FunctionalCurrencyDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.FunctionalCurrencyId),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n),o.Bb(1),o.sc("label",o.nc(13,23,"Settings_TIN"))("description",o.nc(14,25,"Settings_TINDescription"))("serverErrors",null==e.serverErrors?null:e.serverErrors.TaxIdentificationNumber),o.Bb(3),o.sc("ngIf",!n),o.Bb(1),o.sc("ngIf",n)}}let fre=(()=>{class e extends bI{constructor(e){super(),this.workspace=e}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-financial-settings"]],features:[o.yb],decls:4,vars:4,consts:[["endpoint","financial-settings","view","financial-settings","expand","FunctionalCurrency",3,"title","template"],["template",""],[1,"m-0","pt-3","pt-sm-4","pb-3","pb-sm-5","pl-0","pl-sm-3","pr-0","pr-sm-3"],[1,"row","col-12","t-settings-section"],[1,"t-form-group",3,"label","description","serverErrors"],[4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["link","../currencies",3,"itemId",4,"ngIf"],["required","",3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],["link","../currencies",3,"itemId"],["required","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-settings",0),o.mc(1,"translate"),o.Rc(2,bre,17,27,"ng-template",null,1,o.Sc)),2&e){const e=o.Fc(3);o.sc("title",o.nc(1,2,"FinancialSettings"))("template",e)}},directives:[dI,II,x.u,Nu,te.u,te.k,te.n,ss,Du,he.a],pipes:[Q.d,Zf],encapsulation:2}),e})();const mre=["errorModal"];function gre(e,t){if(1&e&&(o.Vb(0,"div",20),o.Vb(1,"ul",21),o.Vb(2,"li",22),o.Tc(3),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc(" ",e.title," ")}}function pre(e,t){1&e&&o.Qb(0,"t-spinner",23)}function hre(e,t){1&e&&(o.Vb(0,"div",24),o.Qb(1,"fa-icon",25),o.Tc(2),o.mc(3,"translate"),o.Ub()),2&e&&(o.Bb(2),o.Vc(" \xa0 ",o.nc(3,1,"FillRequiredFields")," "))}function vre(e,t){if(1&e&&(o.Vb(0,"div",26),o.Vb(1,"h5",27),o.Qb(2,"fa-icon",28),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"button",29),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(6,"span",30),o.Tc(7,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",31),o.Tc(9),o.Ub(),o.Vb(10,"div",32),o.Vb(11,"button",33),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(12,"fa-icon",34),o.Tc(13),o.mc(14,"translate"),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc("\xa0\xa0",o.nc(4,3,"Error")," "),o.Bb(6),o.Vc(" ",e.errorMessage," "),o.Bb(4),o.Vc(" \xa0",o.nc(14,5,"Dismiss")," ")}}let Ire=(()=>{class e{constructor(e,t,n,i,o){this.workspace=e,this.translate=t,this.router=n,this.route=i,this.modalService=o,this.refresh$=new E.a,this.export$=new E.a,this.exportStatus=B.g.loaded}ngOnInit(){this._subscriptions=new k.a,this._subscriptions.add(this.route.paramMap.subscribe(e=>{const t=+e.get("definitionId");t&&this.workspace.currentTenant.definitions.Reports[t]||this.router.navigate(["page-not-found"],{relativeTo:this.route.parent,replaceUrl:!0}),this.definitionId=t,this.filter=e.get("filter"),this.cacheBuster=e.get("cache_buster")}))}ngOnDestroy(){this._subscriptions.unsubscribe()}get originalDefinition(){return this.workspace.currentTenant.definitions.Reports[this.definitionId]}urlStateChanged(){const e={},t=this.state;this.cacheBuster&&(e.cache_buster=this.cacheBuster),this.filter&&(e.filter=this.filter),t.orderbyKey&&(e.$orderby=`${t.orderbyKey} ${t.orderbyDir}`),this.router.navigate([".",e],{relativeTo:this.route,replaceUrl:!0})}get modifiedDefinition(){const e=this.originalDefinition,t=this.state;if(this.filter!==t.drilldownFilter||this.cacheBuster!==t.drilldownCacheBuster||e!==t.drilldownOriginalDefinition){t.drilldownFilter=this.filter,t.drilldownCacheBuster=this.cacheBuster,t.drilldownOriginalDefinition=e;const n=JSON.parse(JSON.stringify(e));n.Type="Details",n.Filter=this.filter,t.drilldownModifiedDefinition=n}return this.state.drilldownModifiedDefinition}get stateKey(){return`${this.definitionId}/drilldown`}get state(){const e=this.stateKey,t=this.workspace.currentTenant.reportState;return t[e]||(t[e]=new B.j),t[e]}get flip(){return this.workspace.ws.isRtl?"horizontal":null}get title(){return`${this.workspace.currentTenant.getMultilingualValueImmediate(this.originalDefinition,"Title")} - ${this.translate.instant("Drilldown")}`}onExport(){let e=this.title;e&&(e+=".csv"),this.export$.next(e)}get showExportSpinner(){return this.exportStatus===B.g.loading}get canExport(){return!0}onExportStarting(){this.exportStatus=B.g.loading}onExportSuccess(){this.exportStatus=B.g.loaded}onExportError(e){this.exportStatus=B.g.error,this.errorMessage=e,this.modalService.open(this.errorModal)}get disableRefresh(){return this.badDefinition}onRefresh(){this.refresh$.next()}get skip(){return this.state.skip}get from(){return Math.min(this.state.skip+1,this.total)}get to(){const e=this.state;return Math.min(e.skip+is.DEFAULT_PAGE_SIZE,e.total)}get total(){return this.state.total}get totalDisplay(){const e=this.total;return e>=B.d?Object(x.L)(B.d-1,"en-GB")+"+":Object(x.L)(e,"en-GB")}onPreviousPage(){const e=this.state;e.skip=Math.max(e.skip-is.DEFAULT_PAGE_SIZE,0),this.refresh$.next()}get canPreviousPage(){return this.state.skip>0}onNextPage(){const e=this.state;e.skip=e.skip+is.DEFAULT_PAGE_SIZE,this.refresh$.next()}get canNextPage(){return this.to<this.total}get refresh(){return this.refresh$}get export(){return this.export$}onOrderByChange(){this.urlStateChanged()}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e),o.Pb(i.e),o.Pb(i.a),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-drilldown"]],viewQuery:function(e,t){var n;1&e&&o.Oc(mre,!0),2&e&&o.Ec(n=o.ic())&&(t.errorModal=n.first)},decls:39,vars:31,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","download"],[1,"d-none","d-md-inline"],["class","t-vertical-align-middle mx-1",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"d-inline"],[1,"d-inline","small","mx-2"],[1,"t-vertical-align-middle"],["type","button",1,"btn","btn-light","btn-sm","t-white-button","t-toolbar-button",3,"title","disabled","click"],["icon","angle-left",3,"flip"],["icon","angle-right",3,"flip"],[1,"row","t-rest-of-screen"],["mode","screen",1,"h-100","w-100",3,"definition","refresh","export","state","exportStarting","exportSuccess","exportError","orderbyChange"],["fillRequiredFields",""],["errorModal",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],[1,"t-vertical-align-middle","mx-1"],[1,"w-100","p-3","px-4"],["icon","info-circle"],[1,"modal-header"],[1,"modal-title"],["icon","exclamation-triangle",1,"text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["ngbAutofocus","",1,"btn","btn-primary",3,"click"],["icon","times"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Rc(2,gre,4,1,"div",2),o.Vb(3,"div",3),o.Vb(4,"div"),o.Vb(5,"button",4),o.hc("click",(function(){return t.onExport()})),o.Qb(6,"fa-icon",5),o.Vb(7,"span",6),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Ub(),o.Rc(10,pre,1,0,"t-spinner",7),o.Ub(),o.Vb(11,"div"),o.Vb(12,"button",8),o.hc("click",(function(){return t.onRefresh()})),o.mc(13,"translate"),o.Qb(14,"fa-icon",9),o.Ub(),o.Vb(15,"div",10),o.Vb(16,"div",11),o.Vb(17,"span",12),o.Vb(18,"span"),o.Tc(19),o.mc(20,"number"),o.Ub(),o.Tc(21," - "),o.Vb(22,"span"),o.Tc(23),o.mc(24,"number"),o.Ub(),o.Ub(),o.Vb(25,"span",12),o.Tc(26),o.Ub(),o.Ub(),o.Vb(27,"button",13),o.hc("click",(function(){return t.onPreviousPage()})),o.mc(28,"translate"),o.Qb(29,"fa-icon",14),o.Ub(),o.Vb(30,"button",13),o.hc("click",(function(){return t.onNextPage()})),o.mc(31,"translate"),o.Qb(32,"fa-icon",15),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(33,"div",16),o.Vb(34,"t-report-results",17),o.hc("exportStarting",(function(){return t.onExportStarting()}))("exportSuccess",(function(){return t.onExportSuccess()}))("exportError",(function(e){return t.onExportError(e)}))("orderbyChange",(function(){return t.onOrderByChange()})),o.Ub(),o.Rc(35,hre,4,3,"ng-template",null,18,o.Sc),o.Ub(),o.Ub(),o.Rc(37,vre,15,7,"ng-template",null,19,o.Sc)),2&e&&(o.Bb(2),o.sc("ngIf",!!t.title),o.Bb(3),o.sc("disabled",!t.canExport),o.Bb(3),o.Vc("\xa0\xa0",o.nc(9,19,"Export"),""),o.Bb(2),o.sc("ngIf",t.showExportSpinner),o.Bb(2),o.tc("title",o.nc(13,21,"Refresh")),o.sc("disabled",t.disableRefresh),o.Bb(7),o.Uc(o.nc(20,23,t.from)),o.Bb(4),o.Uc(o.nc(24,25,t.to)),o.Bb(3),o.Vc(" / ",t.totalDisplay,""),o.Bb(1),o.tc("title",o.nc(28,27,"Previous")),o.sc("disabled",!t.canPreviousPage),o.Bb(2),o.sc("flip",t.flip),o.Bb(1),o.tc("title",o.nc(31,29,"Next")),o.sc("disabled",!t.canNextPage),o.Bb(2),o.sc("flip",t.flip),o.Bb(2),o.sc("definition",t.modifiedDefinition)("refresh",t.refresh)("export",t.export)("state",t.state))},directives:[x.u,ee.b,is,me.a],pipes:[Q.d,x.g],encapsulation:2}),e})();function yre(e,t){if(1&e&&(o.Vb(0,"div",6),o.Vb(1,"span",7),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Ub(),o.Vb(4,"div",8),o.Vb(5,"span",7),o.Tc(6),o.Ub(),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(2),o.Uc(n.ws.getMultilingualValue("DashboardDefinition",e,"Title")||o.nc(3,2,"Untitled")),o.Bb(4),o.Uc(n.ws.getMultilingualValue("DashboardDefinition",e,"Code"))}}function wre(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"DashboardDefinition"),"\n")}function Cre(e,t){if(1&e&&(o.Vb(0,"span",9),o.Qb(1,"t-auto-cell",10),o.Ub()),2&e){const e=t.id,n=o.lc();o.Bb(1),o.sc("entity",n.c[e])}}function Mre(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"VisibleInMainMenu")," ")}function Vre(e,t){1&e&&(o.Tc(0),o.mc(1,"translate")),2&e&&o.Vc(" ",o.nc(1,1,"NotVisibleInMainMenu")," ")}const Tre=function(){return[]},Ere=function(e){return{template:e,expression:"ShowInMainMenu eq true"}},xre=function(e){return{template:e,expression:"ShowInMainMenu eq false"}},Ure=function(e,t){return[e,t]},Rre=function(e){return{ShowInMainMenu:e}};let Dre=(()=>{class e extends Ut.a{constructor(e){super(),this.workspace=e}get c(){return this.ws.DashboardDefinition}get ws(){return this.workspace.currentTenant}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-dashboard-definitions-master"]],features:[o.yb],decls:12,vars:22,consts:[["collection","DashboardDefinition","selectDefault","Code,ShowInMainMenu","selectForTiles","Title,Title2,Title3,Code","theme","dark",3,"mode","showCreateButton","filterDefault","masterCrumb","additionalSelect","tileTemplate","tableSummaryColumnTemplate","tableSummaryHeaderTemplate","multiselectActions","filterDefinition"],["tile",""],["summaryHeader",""],["summaryColumn",""],["visibleInMainMenu",""],["notVisibleInMainMenu",""],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate"],[1,"d-flex","justify-content-between","mt-1","small"],[1,"text-truncate"],["collection","DashboardDefinition",3,"entity"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-master",0),o.mc(1,"translate"),o.Rc(2,yre,7,4,"ng-template",null,1,o.Sc),o.Rc(4,wre,2,3,"ng-template",null,2,o.Sc),o.Rc(6,Cre,2,1,"ng-template",null,3,o.Sc),o.Rc(8,Mre,2,3,"ng-template",null,4,o.Sc),o.Rc(10,Vre,2,3,"ng-template",null,5,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5),i=o.Fc(7),c=o.Fc(9),r=o.Fc(11);o.sc("mode",t.mode)("showCreateButton",t.showCreate)("filterDefault",t.filter)("masterCrumb",o.nc(1,10,"DashboardDefinitions"))("additionalSelect",t.additionalSelect)("tileTemplate",e)("tableSummaryColumnTemplate",i)("tableSummaryHeaderTemplate",n)("multiselectActions",o.vc(12,Tre))("filterDefinition",o.wc(20,Rre,o.xc(17,Ure,o.wc(13,Ere,c),o.wc(15,xre,r))))}},directives:[Rt.a,ge.a],pipes:[Q.d],encapsulation:2}),e})();const Bre=(e,t,n,i,o,c,r,s)=>e+n>o&&e<o+r&&t+i>c&&t<c+s?t+i-c:0;function Sre(e,t){kre(t);const n=[e];for(;n.length>0;){const e=n.shift();for(const i of t){if(i===e)continue;const t=Bre(e.OffsetX,e.OffsetY+(e.changeY||0),e.Width,e.Height,i.OffsetX,i.OffsetY+(i.changeY||0),i.Width,i.Height);t>0&&(i.changeY=(i.changeY||0)+t,n.push(i))}}}function kre(e){for(const t of e)delete t.changeY}const Ore=["dashboard"];function _re(e,t){if(1&e&&(o.Vb(0,"div",14),o.Vb(1,"ul",15),o.Vb(2,"li",16),o.Tc(3),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.lc();o.Bb(3),o.Vc(" ",e.title," ")}}function Lre(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",21),o.hc("click",(function(){return o.Ic(e),o.lc(2).onEdit()})),o.Tc(1),o.mc(2,"translate"),o.Ub()}2&e&&(o.Bb(1),o.Vc(" ",o.nc(2,1,"EditDefinition")," "))}function Are(e,t){if(1&e&&(o.Vb(0,"div",17),o.Vb(1,"button",18),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"div",19),o.Rc(5,Lre,3,3,"button",20),o.Ub(),o.Ub()),2&e){const e=o.lc();o.sc("placement",e.actionsDropdownPlacement),o.Bb(2),o.Vc(" ",o.nc(3,3,"Actions")," "),o.Bb(3),o.sc("ngIf",e.showEditDefinition)}}function Fre(e,t){if(1&e&&(o.Vb(0,"div",28),o.Qb(1,"div",29),o.Ub()),2&e){const e=o.lc(3);o.Qc("left",e.placeholderLeft,"px")("right",e.placeholderRight,"px")("top",e.placeholderTop,"px")("width",e.placeholderWidth,"px")("height",e.placeholderHeight,"px")}}function Pre(e,t){1&e&&o.Rb(0)}function Nre(e,t){1&e&&o.Rb(0)}const jre=function(e,t){return{widget:e,i:t}};function Wre(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",32),o.hc("dblclick",(function(t){o.Ic(e);const n=o.lc().index;return o.lc(3).onDoubleClickWidget(t,n)}))("cdkDragStarted",(function(t){o.Ic(e);const n=o.lc().$implicit;return o.lc(3).onDragStarted(t,n)}))("cdkDragMoved",(function(t){o.Ic(e);const n=o.lc().$implicit;return o.lc(3).onDragMoved(t,n)}))("cdkDragEnded",(function(t){o.Ic(e);const n=o.lc().index;return o.lc(3).onDragEnded(t,n)})),o.Vb(1,"div",33),o.Vb(2,"div",34),o.Rc(3,Pre,1,0,"ng-container",35),o.Ub(),o.Rc(4,Nre,1,0,"ng-container",35),o.Ub(),o.Ub()}if(2&e){const e=o.lc(),t=e.$implicit,n=e.index;o.lc(2);const i=o.Fc(6),c=o.Fc(8),r=o.lc();o.Qc("left",r.left(t),"px")("right",r.right(t),"px")("top",r.top(t),"px")("width",r.width(t),"px")("height",r.height(t),"px"),o.sc("cdkDragDisabled",!r.isEdit),o.Bb(2),o.Qc("cursor",r.isEdit?"move":"auto"),o.Bb(1),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(17,jre,t,n)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(20,jre,t,n))}}function $re(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",36),o.hc("cdkDragStarted",(function(t){o.Ic(e);const n=o.lc().$implicit;return o.lc(3).onResizeStarted(t,n)}))("cdkDragMoved",(function(t){o.Ic(e);const n=o.lc().$implicit;return o.lc(3).onResizeMoved(t,n)}))("cdkDragEnded",(function(t){o.Ic(e);const n=o.lc(),i=n.$implicit,c=n.index;return o.lc(3).onResizeEnded(t,i,c)})),o.Qb(1,"div",37),o.Ub()}if(2&e){const e=o.lc().$implicit,t=o.lc(3);o.Qc("width",t.resizeHandleSize,"px")("height",t.resizeHandleSize,"px")("left",t.leftResizeHandle(e),"px")("right",t.rightResizeHandle(e),"px")("top",t.topResizeHandle(e),"px")}}function qre(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Wre,5,23,"div",30),o.Rc(2,$re,2,10,"div",31),o.Sb()),2&e){const e=t.$implicit,n=o.lc(3);o.Bb(1),o.sc("ngIf",n.renderWidget(e)),o.Bb(1),o.sc("ngIf",n.isEdit)}}function Qre(e,t){if(1&e&&(o.Tb(0),o.Rc(1,Fre,2,10,"div",26),o.Rc(2,qre,3,2,"ng-container",27),o.Sb()),2&e){const e=o.lc(2);o.Bb(1),o.sc("ngIf",e.showPlaceholder),o.Bb(1),o.sc("ngForOf",e.definition.Widgets)("ngForTrackBy",e.trackByReportId)}}function Hre(e,t){1&e&&o.Rb(0)}function Gre(e,t){1&e&&o.Rb(0)}function zre(e,t){if(1&e&&(o.Vb(0,"div",39),o.Vb(1,"div",33),o.Vb(2,"div",40),o.Rc(3,Hre,1,0,"ng-container",35),o.Ub(),o.Rc(4,Gre,1,0,"ng-container",35),o.Ub(),o.Ub()),2&e){const e=o.lc(),t=e.$implicit,n=e.index;o.lc(2);const i=o.Fc(6),c=o.Fc(8),r=o.lc();o.Qc("height",r.height(t),"px"),o.Bb(3),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(6,jre,t,n)),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(9,jre,t,n))}}function Jre(e,t){if(1&e&&(o.Tb(0),o.Rc(1,zre,5,12,"div",38),o.Sb()),2&e){const e=t.$implicit,n=o.lc(3);o.Bb(1),o.sc("ngIf",n.renderWidget(e))}}function Kre(e,t){if(1&e&&o.Rc(0,Jre,2,1,"ng-container",27),2&e){const e=o.lc(2);o.sc("ngForOf",e.definition.Widgets)("ngForTrackBy",e.trackByReportId)}}function Yre(e,t){if(1&e&&(o.Vb(0,"div",57),o.Qb(1,"fa-icon",58),o.Ub()),2&e){o.lc();const e=o.Fc(37),t=o.lc(2);o.sc("ngbPopover",e)("container",null)("placement",t.popoverPlacement)}}function Xre(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",50),o.hc("click",(function(){o.Ic(e);const t=o.lc().widget;return o.lc(2).onEditReportDefinition(t)})),o.Vb(1,"div",51),o.Qb(2,"fa-icon",59),o.Ub(),o.Vb(3,"div",52),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}2&e&&(o.Bb(4),o.Vc(" ",o.nc(5,1,"EditDefinition")," "))}function Zre(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Qb(1,"hr"),o.Vb(2,"button",50),o.hc("click",(function(){o.Ic(e);const t=o.lc().i;return o.lc(2).onEditWidget(t)})),o.Vb(3,"div",51),o.Qb(4,"fa-icon",60),o.Ub(),o.Vb(5,"div",52),o.Tc(6),o.mc(7,"translate"),o.Ub(),o.Ub(),o.Vb(8,"button",50),o.hc("click",(function(){o.Ic(e);const t=o.lc().i;return o.lc(2).onDeleteWidget(t)})),o.Vb(9,"div",51),o.Qb(10,"fa-icon",61),o.Ub(),o.Vb(11,"div",52),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Ub(),o.Sb()}2&e&&(o.Bb(6),o.Vc(" ",o.nc(7,2,"Edit")," "),o.Bb(6),o.Vc(" ",o.nc(13,4,"Delete")," "))}function ese(e,t){if(1&e&&(o.Vb(0,"div",62),o.Vb(1,"p",63),o.Qb(2,"fa-icon",58),o.Tc(3),o.Ub(),o.Ub()),2&e){const e=o.lc().widget,t=o.lc(2);o.Bb(3),o.Vc(" \xa0 ",t.errorMessage(e)," ")}}const tse=function(e){return{0:e}};function nse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",41),o.Vb(1,"span"),o.Tc(2),o.Ub(),o.Qb(3,"br"),o.Vb(4,"span",42),o.mc(5,"datetimeFormat"),o.Tc(6),o.mc(7,"translate"),o.mc(8,"datetimeFormat"),o.Ub(),o.Ub(),o.Vb(9,"div",43),o.Rc(10,Yre,2,3,"div",44),o.Ub(),o.Vb(11,"div",45),o.Vb(12,"button",46),o.Vb(13,"span",47),o.Qb(14,"fa-icon",48),o.Ub(),o.Ub(),o.Vb(15,"div",49),o.Vb(16,"button",50),o.hc("click",(function(){o.Ic(e);const n=t.i;return o.lc(2).onRefreshWidget(n)})),o.Vb(17,"div",51),o.Qb(18,"fa-icon",9),o.Ub(),o.Vb(19,"div",52),o.Tc(20),o.mc(21,"translate"),o.Ub(),o.Ub(),o.Vb(22,"button",50),o.hc("click",(function(){o.Ic(e);const n=t.widget;return o.lc(2).onExpandWidget(n)})),o.Vb(23,"div",51),o.Qb(24,"fa-icon",5),o.Ub(),o.Vb(25,"div",52),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Ub(),o.Vb(28,"button",50),o.hc("click",(function(){o.Ic(e);const n=t.i;return o.lc(2).onExportWidget(n)})),o.Vb(29,"div",51),o.Qb(30,"fa-icon",53),o.Ub(),o.Vb(31,"div",52),o.Tc(32),o.mc(33,"translate"),o.Ub(),o.Ub(),o.Rc(34,Xre,6,3,"button",54),o.Rc(35,Zre,14,6,"ng-container",55),o.Ub(),o.Ub(),o.Rc(36,ese,4,1,"ng-template",null,56,o.Sc)}if(2&e){const e=t.widget,n=o.lc(2);o.Bb(2),o.Vc(" ",n.ws.getMultilingualValueImmediate(e,"Title")||n.ws.getMultilingualValueImmediate(n.reportDefinition(e),"Title")," "),o.Bb(2),o.sc("title",o.pc(5,11,n.state(e).time,null,6)),o.Bb(2),o.Uc(o.oc(7,15,"Refreshed0",o.wc(28,tse,o.pc(8,18,n.state(e).time,null,6)))),o.Bb(4),o.sc("ngIf",n.showErrorIcon(e)),o.Bb(1),o.sc("placement",n.popoverPlacement)("container",null),o.Bb(9),o.Vc(" ",o.nc(21,22,"Refresh")," "),o.Bb(6),o.Vc(" ",o.nc(27,24,"Expand")," "),o.Bb(6),o.Vc(" ",o.nc(33,26,"Export")," "),o.Bb(2),o.sc("ngIf",n.showEditReportDefinition),o.Bb(1),o.sc("ngIf",n.isEdit)}}function ise(e,t){if(1&e){const e=o.Wb();o.Vb(0,"t-report-results",64),o.hc("silentRefreshError",(function(n){o.Ic(e);const i=t.widget,c=t.i;return o.lc(2).onSilentRefreshError(n,i,c)})),o.Ub()}if(2&e){const e=t.widget,n=t.i,i=o.lc(2);o.Gb("bg-light",i.isPivot(e)),o.sc("definition",i.reportDefinition(e))("view",i.reportView(e))("state",i.state(e))("refresh",i.refreshSubject(n))("export",i.exportSubject(n))("disableDrilldown",i.disableDrilldown)}}function ose(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",22),o.Rc(2,Qre,3,3,"ng-container",12),o.Rc(3,Kre,1,2,"ng-template",null,23,o.Sc),o.Rc(5,nse,38,30,"ng-template",null,24,o.Sc),o.Rc(7,ise,1,8,"ng-template",null,25,o.Sc),o.Ub(),o.Sb()),2&e){const e=o.Fc(4),t=o.lc();o.Bb(1),o.Db(t.isVerticalMode?"t-vertical-dashboard":"t-dashboard"),o.Bb(1),o.sc("ngIf",!t.isVerticalMode)("ngIfElse",e)}}function cse(e,t){1&e&&(o.Vb(0,"div",65),o.Qb(1,"t-spinner",66),o.Ub()),2&e&&(o.Bb(1),o.sc("scale",2))}let rse=(()=>{class e{constructor(e,t,n,i,c,r,s){this.workspace=e,this.translate=t,this.appRef=n,this.router=i,this.route=c,this.modalService=r,this.zone=s,this.rendered=!1,this.mode="screen",this.disableDrilldown=!1,this.isEdit=!1,this.addWidget=new o.n,this.editWidget=new o.n,this.deleteWidget=new o.n,this.moveWidget=new o.n,this.resizeWidget=new o.n,this._refreshSubjects=[],this._autoRefreshSubscriptions=[],this._offlineRetrySubscriptions=[],this._exportSubjects=[],this.showPlaceholder=!1,this.resizeHandleSize=16,this.widgetPadding=5}ngOnInit(){const e=this.workspace;this._subscriptions=new k.a,this._subscriptions.add(this.route.paramMap.subscribe(t=>{if(this.isScreenMode){const n=+t.get("definitionId");n&&e.currentTenant.definitions.Dashboards[n]||this.router.navigate(["page-not-found"],{relativeTo:this.route.parent,replaceUrl:!0}),this.definitionId!==n&&(this.definitionId=n)}})),this._subscriptions.add(e.visibilityChanged$.subscribe(t=>{"visible"===e.visibility?this.startTimers():this.stopTimers()})),this.rendered=!1,this.definition.Widgets&&this.definition.Widgets.length<=4&&this.render()}ngAfterViewInit(){this.rendered||Object(on.a)(1).subscribe(()=>this.render())}ngOnChanges(e){e.mode&&!e.mode.isFirstChange()&&this.resetTimers(),e.isEdit&&!e.isEdit.isFirstChange()&&this.resetTimers()}render(){this.rendered=!0}ngOnDestroy(){this.stopTimers(),this._subscriptions&&this._subscriptions.unsubscribe()}get isScreenMode(){return"screen"===this.mode}get isPreviewMode(){return"preview"===this.mode}get definition(){return this.isScreenMode?this.workspace.currentTenant.definitions.Dashboards[this.definitionId]:this.previewDefinition}get ws(){return this.workspace.currentTenant}get title(){return this.ws.getMultilingualValueImmediate(this.definition,"Title")}onFullScreen(){this.dashboard.nativeElement.requestFullscreen&&this.dashboard.nativeElement.requestFullscreen()}disableFullScreen(e){return e}onRefresh(){this._refreshSubjects&&(this._refreshSubjects.forEach(e=>e.next()),this.resetTimers())}get disableRefresh(){return!1}get showEditDefinition(){return this.isScreenMode&&this.ws.canDo("dashboard-definitions","Update",null)}get showActionsDropdown(){return this.showEditDefinition}onEdit(){const e=this.workspace;e.isEdit=!0,this.router.navigate(["../../dashboard-definitions",this.definitionId],{relativeTo:this.route}).then(t=>{t||delete e.isEdit}).catch(t=>delete e.isEdit)}get actionsDropdownPlacement(){return this.workspace.ws.isRtl?"bottom-right":"bottom-left"}renderWidget(e){return!!e&&!!e.ReportDefinitionId&&e.OffsetX>=0&&e.OffsetY>=0&&e.Width>0&&e.Height>0}horizontal(e){return 260*e.OffsetX}left(e){return this.workspace.ws.isRtl?null:this.horizontal(e)}right(e){return this.workspace.ws.isRtl?this.horizontal(e):null}top(e){return 180*(e.OffsetY+(e.changeY||0))}width(e){return 260*(e.Width+(e.changeW||0))}height(e){return 180*(e.Height+(e.changeH||0))}reportDefinition(e){return this.ws.definitions.Reports[e.ReportDefinitionId]}state(e){const t=e.ReportDefinitionId.toString(),n=this.workspace.currentTenant.reportState;return n[t]||(n[t]=new B.j),n[t]}reportView(e){const t=this.reportDefinition(e);return t&&t.Chart&&t.DefaultsToChart?ts.chart:ts.pivot}refreshSubject(e){const t=this.definition;return this._defForRefreshes!==t&&(this._defForRefreshes=t,this._refreshSubjects=t.Widgets.map(e=>new E.a),this.resetTimers()),this._refreshSubjects[e]}stopTimers(){this._autoRefreshSubscriptions.forEach(e=>e.unsubscribe()),this._autoRefreshSubscriptions=[],this._offlineRetrySubscriptions.forEach(e=>{e&&e.unsubscribe()}),this._offlineRetrySubscriptions=[]}startTimers(e){if("visible"===this.workspace.visibility&&!this.isEdit){e=e||this.definition;for(let t=0;t<e.Widgets.length;t++){const n=e.Widgets[t],i=this._refreshSubjects[t],o=60*(Object(N.n)(n.AutoRefreshPeriodInMinutes)?n.AutoRefreshPeriodInMinutes:e.AutoRefreshPeriodInMinutes||0)*1e3;if(o>0){const e=this.state(n).time;let t;if(e){const n=new Date(e);t=Math.min(Math.max(o-((new Date).getTime()-n.getTime()),0),o)}else t=o;const c=Math.floor(5e3*Math.random()),r=Object(on.a)(t,o+c);this._autoRefreshSubscriptions.push(r.subscribe(e=>i.next(!0)))}}}}resetTimers(){this.stopTimers(),this.startTimers()}onSilentRefreshError(e,t,n){if(0===e.status||504===e.status){const e=this._refreshSubjects[n];if(e){const i=this._offlineRetrySubscriptions[n];i&&i.unsubscribe(),this._offlineRetrySubscriptions[n]=Object(on.a)(3e4).subscribe(()=>{this.state(t).silentError&&e.next(!0)})}}}showErrorIcon(e){return this.state(e).silentError}errorMessage(e){return this.state(e).errorMessage}get popoverPlacement(){return this.workspace.ws.isRtl?"bottom-left":"bottom-right"}onRefreshWidget(e){this.refreshSubject(e),this._refreshSubjects[e].next()}onExpandWidget(e){this.router.navigate(["../../report",e.ReportDefinitionId],{relativeTo:this.route})}onExportWidget(e){this.exportSubject(e),this._exportSubjects[e].next()}get showEditReportDefinition(){return this.workspace.currentTenant.canUpdate("report-definitions",void 0)}onEditReportDefinition(e){const t=this.workspace;t.isEdit=!0,this.router.navigate(["../../report-definitions",e.ReportDefinitionId],{relativeTo:this.route}).then(e=>{e||delete t.isEdit}).catch(()=>delete t.isEdit)}exportSubject(e){const t=this.definition;return this._defForExports!==t&&(this._defForExports=t,this._exportSubjects=t.Widgets.map(e=>new E.a)),this._exportSubjects[e]}onDoubleClickSurface(e){if(this.isEdit&&!this.isVerticalMode){e.preventDefault(),e.stopPropagation();const t=this.dashboard.nativeElement,n=t.getBoundingClientRect(),i=Math.max(Math.floor((e.clientX+t.scrollLeft-n.left-5)/260),0),o=Math.max(Math.floor((e.clientY+t.scrollTop-n.top-5)/180),0);this.addWidget.emit({offsetX:i,offsetY:o})}}onDoubleClickWidget(e,t){this.isEdit&&!this.isVerticalMode&&(e.preventDefault(),e.stopPropagation(),this.onEditWidget(t))}onEditWidget(e){this.isEdit&&this.editWidget.emit({index:e})}onDeleteWidget(e){this.isEdit&&this.deleteWidget.emit({index:e})}onDragStarted(e,t){e.source.getRootElement().style.setProperty("z-index","10000"),this.showPlaceholder=!0,this._placeholderOffsetX=t.OffsetX,this._placeholderOffsetY=t.OffsetY,this._placeholderWidth=t.Width,this._placeholderHeight=t.Height}onDragMoved(e,t){if(this._placeholderOffsetX=Math.min(Math.max(t.OffsetX+Math.round((this.workspace.ws.isRtl?-1:1)*e.distance.x/260),0),1e3),this._placeholderOffsetY=Math.min(Math.max(t.OffsetY+Math.round(e.distance.y/180),0),1e3),this._placeholderOffsetX===t.OffsetX&&this._placeholderOffsetY===t.OffsetY)kre(this.definition.Widgets);else{const e=Object.assign({},t);e.OffsetX=this._placeholderOffsetX,e.OffsetY=this._placeholderOffsetY,Sre(e,this.definition.Widgets.filter(e=>e!==t))}}onDragEnded(e,t){e.source.reset(),e.source.getRootElement().style.removeProperty("z-index"),this.showPlaceholder=!1,this.moveWidget.emit({index:t,offsetX:this._placeholderOffsetX,offsetY:this._placeholderOffsetY})}get placeholderLeft(){return this.workspace.ws.isRtl?null:260*this._placeholderOffsetX}get placeholderRight(){return this.workspace.ws.isRtl?260*this._placeholderOffsetX:null}get placeholderTop(){return 180*this._placeholderOffsetY}get placeholderWidth(){return 260*this._placeholderWidth}get placeholderHeight(){return 180*this._placeholderHeight}trackByReportId(e,t){return t.ReportDefinitionId||t}topResizeHandle(e){return this.top(e)+180*e.Height-this.resizeHandleSize-this.widgetPadding}horizontalResizeHandle(e){return this.horizontal(e)+260*e.Width-this.resizeHandleSize-this.widgetPadding}leftResizeHandle(e){return this.workspace.ws.isRtl?0:this.horizontalResizeHandle(e)}rightResizeHandle(e){return this.workspace.ws.isRtl?this.horizontalResizeHandle(e):0}onResizeStarted(e,t){e.source.getRootElement().style.setProperty("z-index","10000"),this.showPlaceholder=!0,this._placeholderOffsetX=t.OffsetX,this._placeholderOffsetY=t.OffsetY,this._placeholderWidth=t.Width,this._placeholderHeight=t.Height}onResizeMoved(e,t){if(t.changeW=Math.max((this.workspace.ws.isRtl?-1:1)*e.distance.x/260,1-t.Width-.25),t.changeH=Math.max(e.distance.y/180,1-t.Height-.25),this._placeholderWidth=Math.min(t.Width+Math.round(.5+t.changeW-10/260),16),this._placeholderHeight=Math.min(t.Height+Math.round(.5+t.changeH-10/180),16),this._placeholderWidth===t.Width&&this._placeholderHeight===t.Height)kre(this.definition.Widgets);else{const e=Object.assign({},t);e.Width=this._placeholderWidth,e.Height=this._placeholderHeight,Sre(e,this.definition.Widgets.filter(e=>e!==t))}}onResizeEnded(e,t,n){e.source.reset(),e.source.getRootElement().style.removeProperty("z-index"),delete t.changeH,delete t.changeW,this.showPlaceholder=!1,this.resizeWidget.emit({index:n,width:this._placeholderWidth,height:this._placeholderHeight})}isPivot(e){const t=this.ws.definitions.Reports[e.ReportDefinitionId];return!(!t||"Summary"!==t.Type||t.Chart&&t.DefaultsToChart)}get isMdScreen(){return this.workspace.mediumDevice}get isVerticalMode(){return!this.workspace.mediumDevice}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e),o.Pb(o.g),o.Pb(i.e),o.Pb(i.a),o.Pb(K.t),o.Pb(o.z))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-dashboard"]],viewQuery:function(e,t){var n;1&e&&o.Yc(Ore,!0),2&e&&o.Ec(n=o.ic())&&(t.dashboard=n.first)},inputs:{mode:"mode",disableDrilldown:"disableDrilldown",isEdit:"isEdit",previewDefinition:"previewDefinition"},outputs:{addWidget:"addWidget",editWidget:"editWidget",deleteWidget:"deleteWidget",moveWidget:"moveWidget",resizeWidget:"resizeWidget"},features:[o.zb],decls:20,vars:12,consts:[[1,"h-100","d-flex","flex-column"],[1,"row","border-bottom","bg-white"],["class","col-12 p-1",4,"ngIf"],[1,"col-12","p-1","d-flex","justify-content-between","t-toolbar"],[1,"btn","btn-primary","btn-sm","t-toolbar-button",3,"disabled","click"],["icon","expand"],[1,"d-none","d-md-inline"],["class","btn-group t-toolbar-button","ngbDropdown","",3,"placement",4,"ngIf"],["type","button",1,"btn","btn-sm","t-toolbar-button","btn-light","t-white-button",3,"disabled","title","click"],["icon","sync-alt"],[1,"row","t-rest-of-screen","bg-light",2,"overflow","auto",3,"dblclick"],["dashboard",""],[4,"ngIf","ngIfElse"],["spinner",""],[1,"col-12","p-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","active"],["ngbDropdown","",1,"btn-group","t-toolbar-button",3,"placement"],["type","button","ngbDropdownToggle","",1,"btn","btn-light","btn-sm","text-primary","t-white-button","t-toolbar-button","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","shadow"],["type","button","class","dropdown-item btn-light","ngbDropdownItem","",3,"click",4,"ngIf"],["type","button","ngbDropdownItem","",1,"dropdown-item","btn-light",3,"click"],["id","dashboard",2,"position","relative","max-height","0"],["phoneView",""],["widgetHeader",""],["widgetBody",""],["class","t-dashboard-widget","style","position: absolute; z-index: 0",3,"left","right","top","width","height",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"t-dashboard-widget",2,"position","absolute","z-index","0"],[1,"w-100","h-100",2,"background-color","lightgrey"],["class","t-dashboard-widget","style","position: absolute","cdkDrag","",3,"left","right","top","width","height","cdkDragDisabled","dblclick","cdkDragStarted","cdkDragMoved","cdkDragEnded",4,"ngIf"],["class","t-drag-knob","style","position: absolute;","cdkDrag","",3,"width","height","left","right","top","cdkDragStarted","cdkDragMoved","cdkDragEnded",4,"ngIf"],["cdkDrag","",1,"t-dashboard-widget",2,"position","absolute",3,"cdkDragDisabled","dblclick","cdkDragStarted","cdkDragMoved","cdkDragEnded"],[1,"w-100","h-100","border","bg-white","shadow-sm","d-flex","flex-column","p-2"],["cdkDragHandle","",1,"t-widget-header","d-flex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkDrag","",1,"t-drag-knob",2,"position","absolute",3,"cdkDragStarted","cdkDragMoved","cdkDragEnded"],[1,"t-drag-knob-inner"],["class","t-dashboard-widget w-100",3,"height",4,"ngIf"],[1,"t-dashboard-widget","w-100"],[1,"t-widget-header","d-flex","w-100"],[1,"flex-grow-1","text-truncate"],[1,"small","text-muted",3,"title"],[1,"flex-grow-0","text-danger"],["popoverClass","t-error-popover","triggers","mouseenter:mouseleave",3,"ngbPopover","container","placement",4,"ngIf"],["ngbDropdown","",1,"flex-grow-0",3,"placement","container"],["ngbDropdownToggle","",1,"btn","btn-light","text-primary","t-white-button","btn-sm","py-0","px-1","t-no-arrow","align-baseline"],[1,"small","text-muted"],["icon","ellipsis-v","tabindex","-1"],["ngbDropdownMenu",""],["ngbDropdownItem","",1,"px-0",3,"click"],[1,"t-menu-icon"],[1,"t-menu-text"],["icon","download"],["ngbDropdownItem","","class","px-0",3,"click",4,"ngIf"],[4,"ngIf"],["errorPopover",""],["popoverClass","t-error-popover","triggers","mouseenter:mouseleave",3,"ngbPopover","container","placement"],["icon","exclamation-triangle"],["icon","edit"],["icon","pen"],["icon","trash"],[2,"width","200px"],[1,"m-0","p-0"],["mode","widget",1,"w-100","flex-grow-1","bg-light2","border-top2",2,"overflow","hidden",3,"definition","view","state","refresh","export","disableDrilldown","silentRefreshError"],[1,"text-center","pt-4","w-100"],[3,"scale"]],template:function(e,t){if(1&e&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Rc(2,_re,4,1,"div",2),o.Vb(3,"div",3),o.Vb(4,"div"),o.Vb(5,"button",4),o.hc("click",(function(){return t.onFullScreen()})),o.Qb(6,"fa-icon",5),o.Vb(7,"span",6),o.Tc(8),o.mc(9,"translate"),o.Ub(),o.Ub(),o.Rc(10,Are,6,5,"div",7),o.Ub(),o.Vb(11,"div"),o.Vb(12,"button",8),o.hc("click",(function(){return t.onRefresh()})),o.mc(13,"translate"),o.Qb(14,"fa-icon",9),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(15,"div",10,11),o.hc("dblclick",(function(e){return t.onDoubleClickSurface(e)})),o.Rc(17,ose,9,5,"ng-container",12),o.Rc(18,cse,2,1,"ng-template",null,13,o.Sc),o.Ub(),o.Ub()),2&e){const e=o.Fc(19);o.Bb(2),o.sc("ngIf",!!t.title),o.Bb(3),o.sc("disabled",t.disableFullScreen(t.isEdit)),o.Bb(3),o.Vc("\xa0\xa0",o.nc(9,8,"FullScreen"),""),o.Bb(2),o.sc("ngIf",t.showActionsDropdown),o.Bb(2),o.tc("title",o.nc(13,10,"Refresh")),o.sc("disabled",t.disableRefresh),o.Bb(5),o.sc("ngIf",t.rendered)("ngIfElse",e)}},directives:[x.u,ee.b,K.l,K.r,K.p,K.o,x.t,W.b,W.c,x.B,K.C,is,me.a],pipes:[Q.d,we],encapsulation:2}),e})();const sse=["widgetConfigModal"];function lse(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.mc(2,"translate"),o.Ub()),2&e){const e=t.model,n=o.lc();o.Bb(1),o.Uc(n.getMultilingualValue(e,"Title",n.ws)||o.nc(2,1,"Untitled"))}}function ase(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",44),o.hc("click",(function(){return o.Ic(e),o.lc(3).onToggleDefinition()})),o.Vb(1,"div",45),o.Qb(2,"fa-icon",46),o.Ub(),o.Vb(3,"span"),o.Tc(4),o.mc(5,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(3);o.Bb(2),o.sc("flip",e.flipIcon(!1)),o.Bb(2),o.Uc(o.nc(5,2,"Definition"))}}function use(e,t){1&e&&o.Qb(0,"fa-icon",47)}function dse(e,t){1&e&&o.Rb(0)}function bse(e,t){1&e&&o.Rb(0)}function fse(e,t){1&e&&o.Rb(0)}const mse=function(){return{updateOn:"blur"}},gse=function(e,t){return{control:e,serverErrors:t}};function pse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",48),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",49,50),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Title2=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Title2")})),o.Ub(),o.Rc(6,fse,1,0,"ng-container",21),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Title2)),o.Bb(2),o.Uc(o.nc(3,7,"Title")+n.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.Title2)("ngModelOptions",o.vc(9,mse)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,gse,e,null==t.serverErrors?null:t.serverErrors.Title2))}}function hse(e,t){1&e&&o.Rb(0)}function vse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",17),o.Vb(1,"label",51),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",52,53),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.Title3=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"Title3")})),o.Ub(),o.Rc(6,hse,1,0,"ng-container",21),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2).model,n=o.lc(),i=o.Fc(7);o.Gb("is-invalid",n.invalid(e,null==t.serverErrors?null:t.serverErrors.Title3)),o.Bb(2),o.Uc(o.nc(3,7,"Title")+n.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.Title3)("ngModelOptions",o.vc(9,mse)),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(10,gse,e,null==t.serverErrors?null:t.serverErrors.Title3))}}function Ise(e,t){1&e&&o.Qb(0,"fa-icon",47)}function yse(e,t){1&e&&o.Qb(0,"fa-icon",47)}function wse(e,t){1&e&&(o.Vb(0,"div",60),o.Tc(1," \u200c "),o.Ub())}function Cse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",54),o.Vb(1,"div",55),o.Rc(2,yse,1,0,"fa-icon",15),o.Vb(3,"span",56),o.Vb(4,"span"),o.Tc(5),o.Ub(),o.Ub(),o.Vb(6,"button",27),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onConfigureWidget(n,i)})),o.mc(7,"translate"),o.Qb(8,"fa-icon",57),o.Ub(),o.Tc(9," \xa0 "),o.Vb(10,"button",27),o.hc("click",(function(){o.Ic(e);const n=t.index,i=o.lc(2).model;return o.lc().onDeleteWidget(n,i)})),o.mc(11,"translate"),o.Qb(12,"fa-icon",58),o.Ub(),o.Ub(),o.Rc(13,wse,2,0,"div",59),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3);o.Bb(2),o.sc("ngIf",n.weakEntityErrors(e)),o.Bb(3),o.Vc(" ",n.ws.getMultilingualValueImmediate(e,"Title")||n.ws.getMultilingualValue("ReportDefinition",e.ReportDefinitionId,"Title")," "),o.Bb(1),o.sc("title",o.nc(7,4,"Configure")),o.Bb(4),o.sc("title",o.nc(11,6,"Delete"))}}function Mse(e,t){1&e&&o.Rb(0)}function Vse(e,t){1&e&&o.Qb(0,"fa-icon",47)}function Tse(e,t){1&e&&o.Rb(0)}function Ese(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr"),o.Vb(1,"td",65),o.Vb(2,"t-roles-picker",66,67),o.hc("ngModelChange",(function(n){return o.Ic(e),t.$implicit.RoleId=n})),o.Ub(),o.Rc(4,Tse,1,0,"ng-container",21),o.Ub(),o.Vb(5,"td"),o.Vb(6,"button",68),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(3).model;return o.lc().onDeleteRow(n,i.Roles)})),o.Qb(7,"fa-icon",69),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,n=o.Fc(3);o.lc(4);const i=o.Fc(7);o.Bb(2),o.sc("ngModel",e.RoleId)("showCreate",!1),o.Bb(2),o.sc("ngTemplateOutlet",i)("ngTemplateOutletContext",o.xc(4,gse,n,null==e||null==e.serverErrors?null:e.serverErrors.Key))}}function xse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",61),o.Vb(1,"label",26),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"table",62),o.Vb(5,"tbody"),o.Rc(6,Ese,8,7,"tr",63),o.Ub(),o.Ub(),o.Vb(7,"button",64),o.hc("click",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onInsertRow(t.Roles)})),o.Qb(8,"fa-icon",28),o.Tc(9),o.mc(10,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.lc(2).model;o.Bb(2),o.Uc(o.nc(3,3,"ForMembersOfRoles")),o.Bb(4),o.sc("ngForOf",e.Roles),o.Bb(3),o.Vc("\xa0\xa0",o.nc(10,5,"Add")," ")}}function Use(e,t){if(1&e&&(o.Vb(0,"option",81),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.tc("value",e.value),o.Bb(1),o.Vc(" ",e.name(),"")}}function Rse(e,t){1&e&&o.Rb(0)}function Dse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",82),o.hc("click",(function(){o.Ic(e);const n=t.$implicit,i=o.lc(3).model;return o.lc().onIconClick(i,n)})),o.Qb(1,"fa-icon",83),o.Ub()}if(2&e){const e=t.$implicit,n=o.lc(3).model;o.Gb("t-highlighted",e.value===n.MainMenuIcon),o.sc("title",e.value),o.Bb(1),o.sc("icon",e.value)}}function Bse(e,t){1&e&&o.Rb(0)}function Sse(e,t){1&e&&o.Rb(0)}const kse=function(e){return{control:null,serverErrors:e}};function Ose(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"div",17),o.Vb(2,"label",70),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Vb(5,"select",71,72),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.MainMenuSection=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"MainMenuSection")})),o.Qb(7,"option",73),o.Rc(8,Use,2,2,"option",74),o.Ub(),o.Rc(9,Rse,1,0,"ng-container",21),o.Ub(),o.Vb(10,"div",17),o.Vb(11,"label",75),o.Tc(12),o.mc(13,"translate"),o.Ub(),o.Vb(14,"div",76),o.Rc(15,Dse,2,4,"div",77),o.Ub(),o.Rc(16,Bse,1,0,"ng-container",21),o.Ub(),o.Vb(17,"div",17),o.Vb(18,"label",78),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"input",79,80),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).model.MainMenuSortKey=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc(2).model;return o.lc().onDefinitionChange(t,"MainMenuSortKey")})),o.Ub(),o.Rc(23,Sse,1,0,"ng-container",21),o.Ub(),o.Sb()}if(2&e){const e=o.Fc(6),t=o.Fc(22),n=o.lc(2).model,i=o.lc(),c=o.Fc(7);o.Bb(3),o.Uc(o.nc(4,14,"MainMenuSection")),o.Bb(2),o.sc("ngModel",n.MainMenuSection),o.Bb(3),o.sc("ngForOf",i.allMainMenuSections),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(20,gse,e,null==n.serverErrors?null:n.serverErrors.MainMenuSection)),o.Bb(3),o.Uc(o.nc(13,16,"MainMenuIcon")),o.Bb(3),o.sc("ngForOf",i.allMainMenuIcons),o.Bb(1),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.wc(23,kse,null==n.serverErrors?null:n.serverErrors.MainMenuIcon)),o.Bb(3),o.Uc(o.nc(20,18,"MainMenuSortKey")),o.Bb(2),o.sc("ngModel",n.MainMenuSortKey)("ngModelOptions",o.vc(25,mse)),o.Bb(2),o.sc("ngTemplateOutlet",c)("ngTemplateOutletContext",o.xc(26,gse,t,null==n.serverErrors?null:n.serverErrors.MainMenuSortKey))}}function _se(e,t){1&e&&(o.Vb(0,"div",84),o.Vb(1,"div",85),o.Vb(2,"span"),o.Tc(3),o.mc(4,"translate"),o.Ub(),o.Ub(),o.Ub()),2&e&&(o.Bb(3),o.Uc(o.nc(4,1,"Preview")))}function Lse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",6),o.Rc(1,ase,6,4,"div",7),o.Vb(2,"div",8),o.Vb(3,"div",9),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleDefinition()})),o.Vb(4,"span"),o.Tc(5),o.mc(6,"translate"),o.Ub(),o.Vb(7,"div",10),o.Qb(8,"fa-icon",11),o.Ub(),o.Ub(),o.Vb(9,"div",12),o.Vb(10,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Title")})),o.Tc(11," \xa0 "),o.Qb(12,"fa-icon",14),o.Tc(13),o.mc(14,"translate"),o.Rc(15,use,1,0,"fa-icon",15),o.Ub(),o.Vb(16,"div",16),o.Vb(17,"div",17),o.Vb(18,"label",18),o.Tc(19),o.mc(20,"translate"),o.Ub(),o.Vb(21,"input",19,20),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Code=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Code")})),o.Ub(),o.Rc(23,dse,1,0,"ng-container",21),o.Ub(),o.Vb(24,"div",17),o.Vb(25,"label",22),o.Tc(26),o.mc(27,"translate"),o.Ub(),o.Vb(28,"input",23,24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.Title=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"Title")})),o.Ub(),o.Rc(30,bse,1,0,"ng-container",21),o.Ub(),o.Rc(31,pse,7,13,"div",25),o.Rc(32,vse,7,13,"div",25),o.Ub(),o.Vb(33,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("Widgets")})),o.Tc(34," \xa0 "),o.Qb(35,"fa-icon",14),o.Tc(36),o.mc(37,"translate"),o.Rc(38,Ise,1,0,"fa-icon",15),o.Ub(),o.Vb(39,"div",16),o.Vb(40,"div",17),o.Vb(41,"label",26),o.Tc(42),o.mc(43,"translate"),o.Ub(),o.Tc(44,"\xa0 "),o.Vb(45,"button",27),o.hc("click",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onCreateWidget(t)})),o.mc(46,"translate"),o.Qb(47,"fa-icon",28),o.Ub(),o.Vb(48,"div",29),o.hc("cdkDropListDropped",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().rowDrop(t,n)})),o.Rc(49,Cse,14,8,"div",30),o.Ub(),o.Ub(),o.Vb(50,"div",17),o.Vb(51,"label",31),o.Tc(52),o.mc(53,"translate"),o.Ub(),o.Vb(54,"input",32,33),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.AutoRefreshPeriodInMinutes=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t)})),o.Ub(),o.Rc(56,Mse,1,0,"ng-container",21),o.Ub(),o.Ub(),o.Vb(57,"div",13),o.hc("click",(function(){return o.Ic(e),o.lc(2).onToggleSection("MainMenu")})),o.Tc(58," \xa0 "),o.Qb(59,"fa-icon",14),o.Tc(60),o.mc(61,"translate"),o.Rc(62,Vse,1,0,"fa-icon",15),o.Ub(),o.Vb(63,"div",16),o.Vb(64,"div",34),o.Vb(65,"input",35),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().model.ShowInMainMenu=t}))("ngModelChange",(function(){o.Ic(e);const t=o.lc().model;return o.lc().onDefinitionChange(t,"ShowInMainMenu")})),o.Ub(),o.Vb(66,"label",36),o.Tc(67),o.mc(68,"translate"),o.Ub(),o.Ub(),o.Rc(69,xse,11,7,"div",37),o.Rc(70,Ose,24,29,"ng-container",38),o.Ub(),o.Ub(),o.Ub(),o.Vb(71,"div",39),o.Rc(72,_se,5,3,"div",40),o.Vb(73,"div",41),o.Vb(74,"div",42),o.Vb(75,"t-dashboard",43),o.hc("addWidget",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().onCreateWidget(n,t.offsetX,t.offsetY)}))("editWidget",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().onConfigureWidget(t.index,n)}))("deleteWidget",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().onDeleteWidget(t.index,n)}))("moveWidget",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().onMoveWidget(t.index,n,t.offsetX,t.offsetY)}))("resizeWidget",(function(t){o.Ic(e);const n=o.lc().model;return o.lc().onResizeWidget(t.index,n,t.width,t.height)})),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(22),t=o.Fc(29),n=o.Fc(55),i=o.lc(),c=i.isEdit,r=i.model,s=o.lc(),l=o.Fc(7);o.Bb(1),o.sc("ngIf",c&&s.collapseDefinition),o.Bb(1),o.Gb("d-flex",c&&!s.collapseDefinition)("d-none",!c||s.collapseDefinition),o.Bb(3),o.Uc(o.nc(6,59,"Definition")),o.Bb(3),o.sc("flip",s.flipIcon(!1)),o.Bb(4),o.sc("flip",s.flipIcon(s.showSection("Title")))("rotate",s.rotateIcon(s.showSection("Title"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(14,61,"Title")," "),o.Bb(2),o.sc("ngIf",s.titleSectionErrors(r)),o.Bb(1),o.Gb("d-none",!s.showSection("Title")),o.Bb(1),o.Gb("is-invalid",s.invalid(e,null==r.serverErrors?null:r.serverErrors.Code)),o.Bb(2),o.Uc(o.nc(20,63,"Code")),o.Bb(2),o.sc("ngModel",r.Code)("ngModelOptions",o.vc(79,mse)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(80,gse,e,null==r.serverErrors?null:r.serverErrors.Code)),o.Bb(1),o.Gb("is-invalid",s.invalid(t,null==r.serverErrors?null:r.serverErrors.Title)),o.Bb(2),o.Uc(o.nc(27,65,"Title")+s.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",r.Title)("ngModelOptions",o.vc(83,mse)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(84,gse,t,null==r.serverErrors?null:r.serverErrors.Title)),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId),o.Bb(3),o.sc("flip",s.flipIcon(s.showSection("Widgets")))("rotate",s.rotateIcon(s.showSection("Widgets"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(37,67,"DashboardDefinition_Widgets")," "),o.Bb(2),o.sc("ngIf",s.widgetsSectionErrors(r)),o.Bb(1),o.Gb("d-none",!s.showSection("Widgets")),o.Bb(3),o.Uc(o.nc(43,69,"DashboardDefinition_Widgets")),o.Bb(3),o.sc("title",o.nc(46,71,"Create")),o.Bb(4),o.sc("ngForOf",s.getWidgets(r)),o.Bb(1),o.Gb("is-invalid",s.invalid(n,null==r.serverErrors?null:r.serverErrors.AutoRefreshPeriodInMinutes)),o.Bb(2),o.Uc(o.nc(53,73,"DashboardDefinition_AutoRefreshPeriodInMinutes")),o.Bb(2),o.sc("ngModel",r.AutoRefreshPeriodInMinutes)("ngModelOptions",o.vc(87,mse)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(88,gse,n,null==r.serverErrors?null:r.serverErrors.AutoRefreshPeriodInMinutes)),o.Bb(3),o.sc("flip",s.flipIcon(s.showSection("MainMenu")))("rotate",s.rotateIcon(s.showSection("MainMenu"))),o.Bb(1),o.Vc(" \xa0 ",o.nc(61,75,"MainMenu")," "),o.Bb(2),o.sc("ngIf",s.mainMenuSectionErrors(r)),o.Bb(1),o.Gb("d-none",!s.showSection("MainMenu")),o.Bb(2),o.sc("ngModel",r.ShowInMainMenu),o.Bb(2),o.Uc(o.nc(68,77,"Definition_ShowInMainMenu")),o.Bb(2),o.sc("ngIf",r.ShowInMainMenu),o.Bb(1),o.sc("ngIf",r.ShowInMainMenu),o.Bb(2),o.sc("ngIf",c),o.Bb(3),o.sc("previewDefinition",s.getForClient(r))("disableDrilldown",s.isPopupMode)("isEdit",c)}}function Ase(e,t){if(1&e&&o.Rc(0,Lse,76,91,"div",5),2&e){const e=t.isEdit,n=o.lc();o.sc("ngIf",n.watchIsEdit(e))}}function Fse(e,t){if(1&e&&(o.Vb(0,"span"),o.Tc(1),o.Ub()),2&e){const e=t.$implicit;o.Bb(1),o.Vc(" ",e()," ")}}function Pse(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",86),o.Rc(2,Fse,2,1,"span",63),o.Ub(),o.Sb()),2&e){const e=o.lc(),t=e.control,n=e.serverErrors,i=o.lc();o.Bb(2),o.sc("ngForOf",i.errors(t,n))}}function Nse(e,t){if(1&e&&o.Rc(0,Pse,3,1,"ng-container",38),2&e){const e=t.control,n=t.serverErrors,i=o.lc();o.sc("ngIf",i.invalid(e,n))}}function jse(e,t){1&e&&o.Rb(0)}function Wse(e,t){1&e&&o.Rb(0)}function $se(e,t){1&e&&o.Rb(0)}function qse(e,t){1&e&&o.Rb(0)}function Qse(e,t){1&e&&o.Rb(0)}function Hse(e,t){1&e&&o.Rb(0)}function Gse(e,t){1&e&&o.Rb(0)}function zse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",97),o.Vb(1,"label",48),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",49,50),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).widgetToEdit.Title2=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).widgetToEditHasChanged=!0})),o.Ub(),o.Rc(6,Gse,1,0,"ng-container",21),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(7);o.Bb(2),o.Uc(o.nc(3,5,"Title")+t.ws.secondaryPostfix),o.Bb(2),o.sc("ngModel",t.widgetToEdit.Title2)("ngModelOptions",o.vc(7,mse)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(8,gse,e,null==t.widgetToEdit.serverErrors?null:t.widgetToEdit.serverErrors.Title2))}}function Jse(e,t){1&e&&o.Rb(0)}function Kse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",97),o.Vb(1,"label",51),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"input",52,53),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc(2).widgetToEdit.Title3=t}))("ngModelChange",(function(){return o.Ic(e),o.lc(2).widgetToEditHasChanged=!0})),o.Ub(),o.Rc(6,Jse,1,0,"ng-container",21),o.Ub()}if(2&e){const e=o.Fc(5),t=o.lc(2),n=o.Fc(7);o.Bb(2),o.Uc(o.nc(3,5,"Title")+t.ws.ternaryPostfix),o.Bb(2),o.sc("ngModel",t.widgetToEdit.Title3)("ngModelOptions",o.vc(7,mse)),o.Bb(2),o.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.xc(8,gse,e,null==t.widgetToEdit.serverErrors?null:t.widgetToEdit.serverErrors.Title3))}}function Yse(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",87),o.Vb(1,"h5",88),o.Tc(2),o.mc(3,"translate"),o.Ub(),o.Vb(4,"button",89),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Vb(5,"span",90),o.Tc(6,"\xd7"),o.Ub(),o.Ub(),o.Ub(),o.Vb(7,"div",91),o.Vb(8,"div",92),o.Vb(9,"div",93),o.Vb(10,"label",94),o.Tc(11),o.mc(12,"translate"),o.Ub(),o.Vb(13,"t-report-definitions-picker",95,96),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().widgetToEdit.ReportDefinitionId=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().widgetToEditHasChanged=!0})),o.Ub(),o.Rc(15,jse,1,0,"ng-container",21),o.Ub(),o.Vb(16,"div",97),o.Vb(17,"label",98),o.Tc(18),o.mc(19,"translate"),o.Ub(),o.Vb(20,"input",99,100),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().widgetToEdit.Width=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().widgetToEditHasChanged=!0})),o.Ub(),o.Rc(22,Wse,1,0,"ng-container",21),o.Ub(),o.Vb(23,"div",97),o.Vb(24,"label",101),o.Tc(25),o.mc(26,"translate"),o.Ub(),o.Vb(27,"input",102,103),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().widgetToEdit.Height=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().widgetToEditHasChanged=!0})),o.Ub(),o.Rc(29,$se,1,0,"ng-container",21),o.Ub(),o.Vb(30,"div",97),o.Vb(31,"label",104),o.Tc(32),o.mc(33,"translate"),o.Ub(),o.Vb(34,"input",105,106),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().widgetToEdit.OffsetX=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().widgetToEditHasChanged=!0})),o.Ub(),o.Rc(36,qse,1,0,"ng-container",21),o.Ub(),o.Vb(37,"div",97),o.Vb(38,"label",107),o.Tc(39),o.mc(40,"translate"),o.Ub(),o.Vb(41,"input",108,109),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().widgetToEdit.OffsetY=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().widgetToEditHasChanged=!0})),o.Ub(),o.Rc(43,Qse,1,0,"ng-container",21),o.Ub(),o.Vb(44,"div",97),o.Vb(45,"label",22),o.Tc(46),o.mc(47,"translate"),o.Ub(),o.Vb(48,"input",23,24),o.hc("ngModelChange",(function(t){return o.Ic(e),o.lc().widgetToEdit.Title=t}))("ngModelChange",(function(){return o.Ic(e),o.lc().widgetToEditHasChanged=!0})),o.Ub(),o.Rc(50,Hse,1,0,"ng-container",21),o.Ub(),o.Rc(51,zse,7,11,"div",110),o.Rc(52,Kse,7,11,"div",110),o.Ub(),o.Ub(),o.Vb(53,"div",111),o.Vb(54,"button",112),o.hc("click",(function(){return t.$implicit.close()})),o.Qb(55,"fa-icon",113),o.Tc(56),o.mc(57,"translate"),o.Ub(),o.Vb(58,"button",114),o.hc("click",(function(){return t.$implicit.dismiss()})),o.Qb(59,"fa-icon",58),o.Tc(60),o.mc(61,"translate"),o.Ub(),o.Ub()}if(2&e){const e=o.Fc(14),t=o.Fc(21),n=o.Fc(28),i=o.Fc(35),c=o.Fc(42),r=o.Fc(49),s=o.lc(),l=o.Fc(7);o.Bb(2),o.Vc(" ",o.nc(3,37,"Configure")," "),o.Bb(7),o.Gb("is-invalid",s.invalid(e,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.ReportDefinitionId)),o.Bb(2),o.Uc(o.nc(12,39,"DashboardDefinition_ReportDefinition")),o.Bb(2),o.sc("ngModel",s.widgetToEdit.ReportDefinitionId),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(55,gse,e,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.ReportDefinitionId)),o.Bb(3),o.Uc(o.nc(19,41,"DashboardDefinition_Width")),o.Bb(2),o.sc("ngModel",s.widgetToEdit.Width)("ngModelOptions",o.vc(58,mse)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(59,gse,t,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.Width)),o.Bb(3),o.Uc(o.nc(26,43,"DashboardDefinition_Height")),o.Bb(2),o.sc("ngModel",s.widgetToEdit.Height)("ngModelOptions",o.vc(62,mse)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(63,gse,n,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.Height)),o.Bb(3),o.Uc(o.nc(33,45,"DashboardDefinition_OffsetX")),o.Bb(2),o.sc("ngModel",s.widgetToEdit.OffsetX)("ngModelOptions",o.vc(66,mse)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(67,gse,i,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.OffsetX)),o.Bb(3),o.Uc(o.nc(40,47,"DashboardDefinition_OffsetY")),o.Bb(2),o.sc("ngModel",s.widgetToEdit.OffsetY)("ngModelOptions",o.vc(70,mse)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(71,gse,c,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.OffsetY)),o.Bb(3),o.Uc(o.nc(47,49,"Title")+s.ws.primaryPostfix),o.Bb(2),o.sc("ngModel",s.widgetToEdit.Title)("ngModelOptions",o.vc(74,mse)),o.Bb(2),o.sc("ngTemplateOutlet",l)("ngTemplateOutletContext",o.xc(75,gse,r,null==s.widgetToEdit.serverErrors?null:s.widgetToEdit.serverErrors.Title)),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.SecondaryLanguageId),o.Bb(1),o.sc("ngIf",null==s.ws.settings?null:s.ws.settings.TernaryLanguageId),o.Bb(2),o.sc("disabled",!s.canApplyWidget(s.widgetToEdit)),o.Bb(2),o.Vc(" \xa0",o.nc(57,51,"Apply")," "),o.Bb(4),o.Vc(" \xa0",o.nc(61,53,"Cancel")," ")}}const Xse=function(){return[]};let Zse=(()=>{class e extends gn.a{constructor(e,t,n){super(),this.workspace=e,this.translate=t,this.modalService=n,this.expand="Widgets.ReportDefinition,Roles.Role",this.create=()=>{const e={};return this.ws.isPrimaryLanguage?e.Title=this.initialText:this.ws.isSecondaryLanguage?e.Title2=this.initialText:this.ws.isTernaryLanguage&&(e.Title3=this.initialText),e.ShowInMainMenu=!1,e.AutoRefreshPeriodInMinutes=5,e.Widgets=[],e.Roles=[],e},this.clone=e=>{if(e){const t=JSON.parse(JSON.stringify(e));return t.Id=null,t.Widgets&&t.Widgets.forEach(e=>e.Id=null),t.Roles&&t.Roles.forEach(e=>e.Id=null),t}return console.error("Cloning a non existing item"),null},this.isInactive=e=>null,this._currentModelModified=!1,this._isEdit=!1,this.collapseDefinition=!1,this._sections={Title:!0,Widgets:!0,MainMenu:!1},this.widgetToEditHasChanged=!1,this.widgetShowAdvancedOptions=!1,this.map=e=>Object.assign({},e),this.overlap=(e,t,n,i,o)=>Bre(e,t,n,i,o.OffsetX,o.OffsetY,o.Width,o.Height)>0}get ws(){return this.workspace.currentTenant}onDefinitionChange(e,t){t?this.getForClient(e)[t]=e[t]:this._currentModelModified=!0}getForClient(e){return e?((this._currentModel!==e||this._currentModelModified)&&(this._currentModelModified=!1,this._currentModel=e,this.modelForClient=Object.assign({},e),e.Widgets&&(this.modelForClient.Widgets=e.Widgets.map(this.map),this.modelForClient.Widgets.forEach(e=>{e.OffsetX=Math.min(e.OffsetX,1e3),e.OffsetY=Math.min(e.OffsetY,1e3),e.Width=Math.min(e.Width,16),e.Height=Math.min(e.Height,16)}))),this.modelForClient):null}watchIsEdit(e){return this._isEdit!==e&&(this._isEdit=e,window.dispatchEvent(new Event("resize"))),!0}onToggleSection(e){this._sections[e]=!this._sections[e]}showSection(e){return this._sections[e]}onToggleDefinition(){this.collapseDefinition=!this.collapseDefinition,window.dispatchEvent(new Event("resize"))}flipIcon(e){return this.workspace.ws.isRtl&&!e?"horizontal":null}rotateIcon(e){return e?90:0}invalid(e,t){return Object(fI.c)(e,t)}errors(e,t){return Object(fI.d)(e,t,this.translate)}weakEntityErrors(e){return!!e.serverErrors&&Object.keys(e.serverErrors).some(t=>Object(fI.b)(e.serverErrors[t]))}titleSectionErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.Id)||Object(fI.b)(e.serverErrors.Code)||Object(fI.b)(e.serverErrors.Title)||Object(fI.b)(e.serverErrors.Title2)||Object(fI.b)(e.serverErrors.Title3))}widgetsSectionErrors(e){return!!e.serverErrors&&Object(fI.b)(e.serverErrors.AutoRefreshPeriodInMinutes)||!!e.Widgets&&e.Widgets.some(e=>this.weakEntityErrors(e))}mainMenuSectionErrors(e){return!!e.serverErrors&&(Object(fI.b)(e.serverErrors.ShowInMainMenu)||Object(fI.b)(e.serverErrors.MainMenuSection)||Object(fI.b)(e.serverErrors.MainMenuIcon)||Object(fI.b)(e.serverErrors.MainMenuSortKey))||!!e.Roles&&e.Roles.some(e=>this.weakEntityErrors(e))}savePreprocessing(e){e.ShowInMainMenu||(e.Roles=[])}get allMainMenuSections(){const e=Object(aE.a)(this.workspace,this.translate).properties.MainMenuSection;return Object(wi.c)(e)}get allMainMenuIcons(){const e=Object(aE.a)(this.workspace,this.translate).properties.MainMenuIcon;return Object(wi.c)(e)}onIconClick(e,t){e.MainMenuIcon=t.value,this.onDefinitionChange(e,"MainMenuSortKey")}getWidgets(e){return e.Widgets=e.Widgets||[],e.Widgets}onCreateWidget(e,t,n){this.onConfigureWidget(e.Widgets.length,e,t,n)}chartReportDef(e){return!!e&&"Summary"===e.Type&&e.Chart&&e.DefaultsToChart}onConfigureWidget(e,t,n,i){this.widgetToEditHasChanged=!1;const o=t.Widgets[e],c=Object.assign({},o||this.createWidget(t,n,i));this.widgetToEdit=c,this.modelRef=t,this.modalService.open(this.widgetConfigModal,{windowClass:"t-dark-theme t-wider-modal"}).result.then(()=>{if(this.widgetToEditHasChanged){const n=!!o&&(o.Width!==c.Width||o.Height!==c.Height)&&!!o.ReportDefinitionId&&o.ReportDefinitionId===c.ReportDefinitionId&&this.chartReportDef(this.ws.definitions.Reports[c.ReportDefinitionId]),i=!o||o.OffsetX!==c.OffsetX||o.OffsetY!==c.OffsetY||o.Width!==c.Width||o.Height!==c.Height;t.Widgets[e]=c,i&&this.rearrange(c,t),n&&window.dispatchEvent(new Event("resize")),this.onDefinitionChange(t)}},e=>{})}onDeleteWidget(e,t){t.Widgets.splice(e,1),this.onDefinitionChange(t)}onMoveWidget(e,t,n,i){const o=t.Widgets[e];o.OffsetX=n,o.OffsetY=i,this.rearrange(o,t),this.onDefinitionChange(t)}onResizeWidget(e,t,n,i){const o=t.Widgets[e];o.Width=n,o.Height=i,this.chartReportDef(this.ws.definitions.Reports[o.ReportDefinitionId])&&window.dispatchEvent(new Event("resize")),this.rearrange(o,t),this.onDefinitionChange(t)}rearrange(e,t){const n=t.Widgets.filter(t=>t!==e),i=n.map(this.map);Sre(this.map(e),i);for(let o=0;o<i.length;o++)n[o].OffsetY+=i[o].changeY||0}createWidget(e,t,n){if(void 0===t||void 0===n){t=0,n=0;let i=0,o=!1;for(;;){for(t=i,n=0;n<=i-1;){if(!e.Widgets.some(e=>this.overlap(t,n,1,1,e))){o=!0;break}n++}if(!o)for(t=0,n=i;t<=i;){if(!e.Widgets.some(e=>this.overlap(t,n,1,1,e))){o=!0;break}t++}if(o)break;i++}}return{OffsetX:t,OffsetY:n,Width:1,Height:1}}canApplyWidget(e){return!!e.ReportDefinitionId}rowDrop(e,t){Object(W.i)(t.Widgets,e.previousIndex,e.currentIndex),e.previousIndex!==e.currentIndex&&this.onDefinitionChange(t)}onDeleteRow(e,t){const n=t.indexOf(e);n>=0&&t.splice(n,1)}onInsertRow(e,t){const n=t?t():{Id:0};e.push(n)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(B.m),o.Pb(Q.e),o.Pb(K.t))},e.\u0275cmp=o.Jb({type:e,selectors:[["t-dashboard-definitions-details"]],viewQuery:function(e,t){var n;1&e&&o.Oc(sse,!0),2&e&&o.Ec(n=o.ic())&&(t.widgetConfigModal=n.first)},features:[o.yb],decls:10,vars:15,consts:[["collection","DashboardDefinition","layout","full-screen","theme","dark",3,"createFunc","cloneFunc","expand","mode","additionalSelect","masterCrumb","detailsCrumb","idString","documentTemplate","actions","isInactive","savePreprocessing"],["detailsCrumb",""],["document",""],["errorsTemplate",""],["widgetConfigModal",""],["class","h-100 d-flex flex-drop-row",4,"ngIf"],[1,"h-100","d-flex","flex-drop-row"],["class","p-2 t-dark t-text-whitish t-collapsed-studio-pane t-pointer",3,"click",4,"ngIf"],[1,"t-less-dark","h-100","flex-column","t-studio-pane"],[1,"py-2","px-3","t-dark","t-text-whitish","d-flex","justify-content-between","t-pointer",3,"click"],[1,"text-center"],["icon","angle-left",3,"flip"],[1,"flex-grow-1","overflow-auto"],[1,"text-truncate","t-studio-section-header","t-pointer",3,"click"],["icon","angle-right",3,"flip","rotate"],["class","t-light-danger mx-1","icon","exclamation",4,"ngIf"],[1,"p-2","t-studio-section"],[1,"form-group"],["for","code",1,"small"],["id","code","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["code","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","title",1,"small"],["id","title","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title","ngModel"],["class","form-group",3,"is-invalid",4,"ngIf"],[1,"small"],[1,"btn","btn-sm","m-0","py-0","px-1","border-0","text-white","t-pointer","t-transparent",3,"title","click"],["icon","plus"],["cdkDropList","",1,"t-studio-drop-area","border","t-dark-border",2,"height","15rem",3,"cdkDropListDropped"],["class","t-studio-drop-row t-draggable","cdkDrag","",4,"ngFor","ngForOf"],["for","autorefreshperiodinminutes",1,"small"],["id","autorefreshperiodinminutes","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["autorefreshperiodinminutes","ngModel"],[1,"custom-control","custom-checkbox","form-group"],["type","checkbox","id","showInMainMenu",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","showInMainMenu",1,"custom-control-label"],["class","form-group t-text-whitish",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1"],["class","t-dark t-text-whitish d-flex justify-content-between",4,"ngIf"],[1,"flex-grow-1"],[1,"col","bg-light","border","shadow","h-100"],["mode","preview",1,"h-100",3,"previewDefinition","disableDrilldown","isEdit","addWidget","editWidget","deleteWidget","moveWidget","resizeWidget"],[1,"p-2","t-dark","t-text-whitish","t-collapsed-studio-pane","t-pointer",3,"click"],[1,"text-center","mb-3"],["icon","angle-right",3,"flip"],["icon","exclamation",1,"t-light-danger","mx-1"],["for","title2",1,"small"],["id","title2","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title2","ngModel"],["for","title3",1,"small"],["id","title3","type","text","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["title3","ngModel"],["cdkDrag","",1,"t-studio-drop-row","t-draggable"],[1,"d-flex"],[1,"flex-grow-1","text-truncate"],["icon","cog"],["icon","times"],["class","t-studio-drop-row",4,"cdkDragPlaceholder"],[1,"t-studio-drop-row"],[1,"form-group","t-text-whitish"],[1,"table","table-sm","table-dark","text-nowrap","mb-1"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","t-toolbar-button","t-text-whitish","font-weight-normal",3,"click"],[1,"p-0"],["theme","dark",3,"ngModel","showCreate","ngModelChange"],["rolemodel","ngModel"],[1,"btn","btn-secondary","t-white-button","t-text-whitish","btn-sm","py-0","px-1","align-baseline",3,"click"],["icon","trash"],["for","mainMenuSection",1,"small"],["id","mainMenuSection",1,"form-control","t-studio-input",3,"ngModel","ngModelChange"],["mainMenuSection","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","mainMenuIcon",1,"small"],[1,"t-icon-selector","d-flex","align-content-start","flex-wrap","p-1"],["class","py-1 text-center t-pointer t-icon-selector-icon",3,"t-highlighted","title","click",4,"ngFor","ngForOf"],["for","sortKey",1,"small"],["id","sortKey","type","number","autocomplete","off",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["mainMenuSortKey","ngModel"],[3,"value"],[1,"py-1","text-center","t-pointer","t-icon-selector-icon",3,"title","click"],[2,"font-size","1.1rem",3,"icon"],[1,"t-dark","t-text-whitish","d-flex","justify-content-between"],[1,"p-2","px-3"],[1,"small","t-light-danger","text-wrap"],[1,"modal-header","t-dark","t-text-whitish","border-0"],[1,"modal-title","font-weight-light"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"t-text-whitish"],[1,"modal-body","col","t-less-dark","t-text-whitish"],[1,"row"],[1,"form-group","col-12"],["for","reportdefinition",1,"small"],["theme","dark","id","reportdefinition","required","",3,"ngModel","ngModelChange"],["reportdefinition","ngModel"],[1,"form-group","col-12","col-sm-6"],["for","width",1,"small"],["id","width","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["width","ngModel"],["for","height",1,"small"],["id","height","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["height","ngModel"],["for","offsetx",1,"small"],["id","offsetx","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["offsetx","ngModel"],["for","offsety",1,"small"],["id","offsety","type","number",1,"form-control","t-studio-input",3,"ngModel","ngModelOptions","ngModelChange"],["offsety","ngModel"],["class","form-group col-12 col-sm-6",4,"ngIf"],[1,"modal-footer","t-dark","t-text-whitish","border-0","p-2"],[1,"btn","t-text-whitish","font-weight-normal",3,"disabled","click"],["icon","check"],["ngbAutoFocus","",1,"btn","t-text-whitish","font-weight-normal",3,"click"]],template:function(e,t){if(1&e&&(o.Qb(0,"t-details",0),o.mc(1,"translate"),o.Rc(2,lse,3,3,"ng-template",null,1,o.Sc),o.Rc(4,Ase,1,1,"ng-template",null,2,o.Sc),o.Rc(6,Nse,1,1,"ng-template",null,3,o.Sc),o.Rc(8,Yse,62,78,"ng-template",null,4,o.Sc)),2&e){const e=o.Fc(3),n=o.Fc(5);o.sc("createFunc",t.create)("cloneFunc",t.clone)("expand",t.expand)("mode",t.mode)("additionalSelect",t.additionalSelect)("masterCrumb",o.nc(1,12,"DashboardDefinitions"))("detailsCrumb",e)("idString",t.idString)("documentTemplate",n)("actions",o.vc(14,Xse))("isInactive",t.isInactive)("savePreprocessing",t.savePreprocessing)}},directives:[j.a,x.u,ee.b,te.c,te.k,te.n,x.B,W.f,x.t,te.q,te.a,rse,W.b,W.d,$s,te.v,te.p,te.x,hB,te.u],pipes:[Q.d],encapsulation:2}),e})(),ele=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-dashboard-definitions-picker"]],decls:2,vars:0,template:function(e,t){1&e&&(o.Vb(0,"p"),o.Tc(1,"dashboard-definitions-picker works!"),o.Ub())},encapsulation:2}),e})();var tle=n("cH1L");const nle=["*"];let ile=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["t-success-message"]],ngContentSelectors:nle,decls:4,vars:0,consts:[[1,"p-2","px-3","alert-success"],["icon","check"]],template:function(e,t){1&e&&(o.rc(),o.Vb(0,"div",0),o.Qb(1,"fa-icon",1),o.Tc(2,"\xa0\xa0"),o.qc(3),o.Ub())},directives:[ee.b],encapsulation:2}),e})();var ole=n("xdC8");let cle=(()=>{class e{transform(e,...t){return e&&e.label?e.label():""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Ob({name:"label",type:e,pure:!1}),e})();const rle=[{path:":tenantId",component:Et,canActivate:[$.d],canActivateChild:[iy.a],children:[{path:"units",component:en,canDeactivate:[oi.a]},{path:"units/:id",component:ii,canDeactivate:[ci.a]},{path:"roles",component:Bh,canDeactivate:[oi.a]},{path:"roles/:id",component:Yv,canDeactivate:[ci.a]},{path:"users",component:Ua,canDeactivate:[oi.a]},{path:"users/:id",component:sa,canDeactivate:[ci.a]},{path:"relations",component:yi,canDeactivate:[oi.a]},{path:"relations/:definitionId",component:yi,canDeactivate:[oi.a]},{path:"relations/:definitionId/:id",component:gh,canDeactivate:[ci.a]},{path:"custodies",component:ZN,canDeactivate:[oi.a]},{path:"custodies/:definitionId",component:ZN,canDeactivate:[oi.a]},{path:"custodies/:definitionId/:id",component:sE,canDeactivate:[ci.a]},{path:"agents",component:wb,canDeactivate:[oi.a]},{path:"agents/:id",component:ab,canDeactivate:[ci.a]},{path:"lookups",component:Od,canDeactivate:[oi.a]},{path:"lookups/:definitionId",component:Od,canDeactivate:[oi.a]},{path:"lookups/:definitionId/:id",component:yd,canDeactivate:[ci.a]},{path:"currencies",component:xu,canDeactivate:[oi.a]},{path:"currencies/:id",component:gu,canDeactivate:[ci.a]},{path:"resources",component:vy,canDeactivate:[oi.a]},{path:"resources/:definitionId",component:vy,canDeactivate:[oi.a]},{path:"resources/:definitionId/:id",component:XC,canDeactivate:[ci.a]},{path:"account-classifications",component:uM,canDeactivate:[oi.a]},{path:"account-classifications/:id",component:HM,canDeactivate:[ci.a]},{path:"ifrs-concepts",component:BZ,canDeactivate:[oi.a]},{path:"ifrs-concepts/:id",component:NZ,canDeactivate:[ci.a]},{path:"account-types",component:oV,canDeactivate:[oi.a]},{path:"account-types/:id",component:wN,canDeactivate:[ci.a]},{path:"accounts",component:kN,canDeactivate:[oi.a]},{path:"accounts/:id",component:lW,canDeactivate:[ci.a]},{path:"entry-types",component:_$,canDeactivate:[oi.a]},{path:"entry-types/:id",component:wq,canDeactivate:[ci.a]},{path:"documents",component:Kq,canDeactivate:[oi.a]},{path:"documents/:definitionId",component:Kq,canDeactivate:[oi.a]},{path:"documents/:definitionId/:id",component:CX,canDeactivate:[ci.a]},{path:"d/:definitionId",redirectTo:"documents/:definitionId"},{path:"d/:definitionId/:id",redirectTo:"documents/:definitionId/:id"},{path:"inbox",component:mZ,canDeactivate:[oi.a]},{path:"outbox",component:EZ,canDeactivate:[oi.a]},{path:"report-definitions",component:mB,canDeactivate:[oi.a]},{path:"report-definitions/:id",component:iB,canDeactivate:[ci.a]},{path:"dashboard-definitions",component:Dre,canDeactivate:[oi.a]},{path:"dashboard-definitions/:id",component:Zse,canDeactivate:[ci.a]},{path:"centers",component:QW,canDeactivate:[oi.a]},{path:"centers/:id",component:M$,canDeactivate:[ci.a]},{path:"exchange-rates",component:WX,canDeactivate:[oi.a]},{path:"exchange-rates/:id",component:nZ,canDeactivate:[ci.a]},{path:"details-entries",component:kX,canDeactivate:[oi.a]},{path:"details-entries/:id",component:kX,canDeactivate:[ci.a]},{path:"markup-templates",component:i1,canDeactivate:[oi.a]},{path:"markup-templates/:id",component:k9,canDeactivate:[ci.a]},{path:"relation-definitions",component:Ane,canDeactivate:[oi.a]},{path:"relation-definitions/:id",component:vne,canDeactivate:[ci.a]},{path:"custody-definitions",component:i_,canDeactivate:[oi.a]},{path:"custody-definitions/:id",component:FO,canDeactivate:[ci.a]},{path:"resource-definitions",component:XA,canDeactivate:[oi.a]},{path:"resource-definitions/:id",component:kA,canDeactivate:[ci.a]},{path:"lookup-definitions",component:BS,canDeactivate:[oi.a]},{path:"lookup-definitions/:id",component:bS,canDeactivate:[ci.a]},{path:"line-definitions",component:M6,canDeactivate:[oi.a]},{path:"line-definitions/:id",component:m6,canDeactivate:[ci.a]},{path:"document-definitions",component:l8,canDeactivate:[oi.a]},{path:"document-definitions/:id",component:W7,canDeactivate:[ci.a]},{path:"report/:definitionId",component:rx,canDeactivate:[oi.a]},{path:"dashboard/:definitionId",component:rse,canDeactivate:[oi.a]},{path:"drilldown/:definitionId",component:Ire,canDeactivate:[oi.a]},{path:"account-statement",component:_ie,canDeactivate:[oi.a]},{path:"relation-statement/:definitionId",component:Lie,canDeactivate:[oi.a]},{path:"reconciliation",component:gce,canDeactivate:[ci.a]},{path:"emails",component:Uce,canDeactivate:[oi.a]},{path:"emails/:id",component:Fce,canDeactivate:[ci.a]},{path:"sms-messages",component:ire,canDeactivate:[oi.a]},{path:"sms-messages/:id",component:qce,canDeactivate:[ci.a]},{path:"general-settings",component:ny,canDeactivate:[ci.a]},{path:"financial-settings",component:fre,canDeactivate:[ci.a]},{path:"main-menu",component:mn,canDeactivate:[oi.a]},{path:"",redirectTo:"main-menu",pathMatch:"full"},{path:"**",component:nn}]},{path:"",redirectTo:"/root/welcome",pathMatch:"full"}];let sle=(()=>{class e{constructor(e){e.addIcons(ore.a,ore.d,ore.g,ore.h,ore.l,ore.n,ore.o,ore.q,ore.r,ore.s,ore.t,ore.w,ore.z,ore.A,ore.C,ore.B,ore.D,ore.E,ore.F,ore.G,ore.H,ore.L,ore.N,ore.O,ore.P,ore.R,ore.S,ore.T,ore.U,ore.X,ore.Y,ore.Z,ore.bb,ore.cb,ore.eb,ore.fb,ore.gb,ore.hb,ore.ib,ore.jb,ore.kb,ore.lb,ore.mb,ore.nb,ore.pb,ore.tb,ore.ub,ore.vb,ore.wb,ore.xb,ore.yb,ore.zb,ore.Ab,ore.Cb,ore.Db,ore.Eb,ore.Fb,ore.Gb,ore.Hb,ore.Ib,ore.Jb,ore.Kb,ore.Mb,ore.Nb,ore.Ob,ore.Pb,ore.Qb,ore.Rb,ore.Sb,ore.Tb,ore.Ub,ore.Vb,ore.Wb,ore.Xb,ore.Yb,ore.Zb,ore.ac,ore.cc,ore.dc,ore.ec,ore.gc,ore.hc,ore.ic,ore.jc,ore.kc,ore.lc,ore.nc,ore.oc,ore.pc,ore.qc,ore.rc,ore.sc,ore.tc,ore.uc,ore.vc,ore.wc,ore.xc,ore.yc,ore.zc,ore.Bc,ore.Cc,ore.Dc,ore.Ec,ore.Fc,ore.Gc,ore.Hc,ore.Ic,ore.Jc,ore.Kc,ore.Lc,ore.Nc,ore.Pc,ore.Qc,ore.Rc,ore.Sc,ore.Tc,ore.Uc,ore.Yc,ore.ad,ore.bd,ore.cd,ore.fd,ore.dd,ore.ed,ore.gd,ore.hd,ore.id,ore.ld,ore.md,ore.nd,ore.pd,ore.qd,ore.rd,ore.sd,ore.vd,ore.wd,ore.yd,ore.zd,ore.Bd,ore.Cd,ore.Ed,ore.Gd,ore.Hd,ore.Id,ore.Jd,ore.Ld,ore.Md,ore.Od,ore.Pd,ore.Qd,ore.Rd,ore.Sd,ore.Td,ore.Ud,ore.Zd,ore.Vd,ore.Wd,ore.Xd,ore.ae,ore.be)}}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)(o.dc(ee.c))},imports:[[D.a,i.i.forChild(rle),R,Kf.forRoot({apiKey:"<Google API Key goes here>"})]]}),e})();o.Lc(fM,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,Q.a,te.y,te.p,te.x,te.c,te.q,te.t,te.a,te.v,te.w,te.s,te.k,te.l,te.u,te.g,te.f,te.r,te.b,te.d,te.n,te.o,te.m,ee.b,ee.a,ee.d,ee.f,ee.e,ee.g,ee.h,tle.b,oo.b,oo.a,oo.d,oo.e,W.f,W.g,W.b,W.c,W.e,W.d,K.l,K.m,K.r,K.p,K.o,K.B,K.d,K.C,K.w,K.v,K.x,K.y,K.A,K.E,co.h,co.mb,co.nb,co.ob,co.pb,co.gb,co.hb,co.f,co.s,co.A,co.fb,co.x,co.J,co.K,co.Z,co.y,co.z,co.E,co.F,co.cb,co.db,co.eb,co.a,co.lb,co.c,co.d,co.e,co.g,co.i,co.k,co.j,co.l,co.m,co.p,co.o,co.q,co.r,co.n,co.ab,co.bb,co.t,co.u,co.H,co.G,co.I,co.M,co.L,co.N,co.X,co.Y,co.v,co.w,co.Q,co.b,co.V,co.R,co.S,co.T,co.U,co.W,co.ib,co.jb,co.kb,co.O,co.D,co.B,co.C,me.a,Z.a,Rt.a,j.a,dI,ve.a,ile,Fh.a,he.a,Bb,pe.a,II,cQ,Ns.a,hn.a,In,Zq,gn.a,Ut.a,Nu,Ps.a,Ls,ss,be,pn.a,ge.a,ole.a,Xf,fe.a,cn.a,i.j,i.f,i.h,i.g,i.k,U,ef,of,lf,df,pf,yf,xf,Df,Sf,Ff,kf,_f,Nf,Wf,Et,en,ii,nn,mn,yi,gh,Bh,Yv,sa,Ua,ny,Od,yd,xu,gu,vy,XC,wy,Fd,uM,HM,fM,oV,wN,hM,kN,lW,dW,Ub,AN,rx,is,mB,iB,QW,M$,Ou,Ba,$s,Du,_$,wq,bV,Kq,CX,kX,WX,nZ,mZ,EZ,BZ,NZ,WZ,i1,k9,r1,ab,wb,Vb,vne,Ane,lV,kA,XA,tF,BS,bS,OS,Oie,_ie,Lie,i_,FO,r_,nj,ZN,sE,m6,M6,E6,l8,W7,d8,Fie,gce,Uce,Fce,qce,ire,hB,fre,Kx,jE,Ire,Dre,Zse,ele,rse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,Q.d,cle,Zf,ye,we,tm]),o.Lc(hM,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,Q.a,te.y,te.p,te.x,te.c,te.q,te.t,te.a,te.v,te.w,te.s,te.k,te.l,te.u,te.g,te.f,te.r,te.b,te.d,te.n,te.o,te.m,ee.b,ee.a,ee.d,ee.f,ee.e,ee.g,ee.h,tle.b,oo.b,oo.a,oo.d,oo.e,W.f,W.g,W.b,W.c,W.e,W.d,K.l,K.m,K.r,K.p,K.o,K.B,K.d,K.C,K.w,K.v,K.x,K.y,K.A,K.E,co.h,co.mb,co.nb,co.ob,co.pb,co.gb,co.hb,co.f,co.s,co.A,co.fb,co.x,co.J,co.K,co.Z,co.y,co.z,co.E,co.F,co.cb,co.db,co.eb,co.a,co.lb,co.c,co.d,co.e,co.g,co.i,co.k,co.j,co.l,co.m,co.p,co.o,co.q,co.r,co.n,co.ab,co.bb,co.t,co.u,co.H,co.G,co.I,co.M,co.L,co.N,co.X,co.Y,co.v,co.w,co.Q,co.b,co.V,co.R,co.S,co.T,co.U,co.W,co.ib,co.jb,co.kb,co.O,co.D,co.B,co.C,me.a,Z.a,Rt.a,j.a,dI,ve.a,ile,Fh.a,he.a,Bb,pe.a,II,cQ,Ns.a,hn.a,In,Zq,gn.a,Ut.a,Nu,Ps.a,Ls,ss,be,pn.a,ge.a,ole.a,Xf,fe.a,cn.a,i.j,i.f,i.h,i.g,i.k,U,ef,of,lf,df,pf,yf,xf,Df,Sf,Ff,kf,_f,Nf,Wf,Et,en,ii,nn,mn,yi,gh,Bh,Yv,sa,Ua,ny,Od,yd,xu,gu,vy,XC,wy,Fd,uM,HM,fM,oV,wN,hM,kN,lW,dW,Ub,AN,rx,is,mB,iB,QW,M$,Ou,Ba,$s,Du,_$,wq,bV,Kq,CX,kX,WX,nZ,mZ,EZ,BZ,NZ,WZ,i1,k9,r1,ab,wb,Vb,vne,Ane,lV,kA,XA,tF,BS,bS,OS,Oie,_ie,Lie,i_,FO,r_,nj,ZN,sE,m6,M6,E6,l8,W7,d8,Fie,gce,Uce,Fce,qce,ire,hB,fre,Kx,jE,Ire,Dre,Zse,ele,rse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,Q.d,cle,Zf,ye,we,tm]),o.Lc(Ub,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,Q.a,te.y,te.p,te.x,te.c,te.q,te.t,te.a,te.v,te.w,te.s,te.k,te.l,te.u,te.g,te.f,te.r,te.b,te.d,te.n,te.o,te.m,ee.b,ee.a,ee.d,ee.f,ee.e,ee.g,ee.h,tle.b,oo.b,oo.a,oo.d,oo.e,W.f,W.g,W.b,W.c,W.e,W.d,K.l,K.m,K.r,K.p,K.o,K.B,K.d,K.C,K.w,K.v,K.x,K.y,K.A,K.E,co.h,co.mb,co.nb,co.ob,co.pb,co.gb,co.hb,co.f,co.s,co.A,co.fb,co.x,co.J,co.K,co.Z,co.y,co.z,co.E,co.F,co.cb,co.db,co.eb,co.a,co.lb,co.c,co.d,co.e,co.g,co.i,co.k,co.j,co.l,co.m,co.p,co.o,co.q,co.r,co.n,co.ab,co.bb,co.t,co.u,co.H,co.G,co.I,co.M,co.L,co.N,co.X,co.Y,co.v,co.w,co.Q,co.b,co.V,co.R,co.S,co.T,co.U,co.W,co.ib,co.jb,co.kb,co.O,co.D,co.B,co.C,me.a,Z.a,Rt.a,j.a,dI,ve.a,ile,Fh.a,he.a,Bb,pe.a,II,cQ,Ns.a,hn.a,In,Zq,gn.a,Ut.a,Nu,Ps.a,Ls,ss,be,pn.a,ge.a,ole.a,Xf,fe.a,cn.a,i.j,i.f,i.h,i.g,i.k,U,ef,of,lf,df,pf,yf,xf,Df,Sf,Ff,kf,_f,Nf,Wf,Et,en,ii,nn,mn,yi,gh,Bh,Yv,sa,Ua,ny,Od,yd,xu,gu,vy,XC,wy,Fd,uM,HM,fM,oV,wN,hM,kN,lW,dW,Ub,AN,rx,is,mB,iB,QW,M$,Ou,Ba,$s,Du,_$,wq,bV,Kq,CX,kX,WX,nZ,mZ,EZ,BZ,NZ,WZ,i1,k9,r1,ab,wb,Vb,vne,Ane,lV,kA,XA,tF,BS,bS,OS,Oie,_ie,Lie,i_,FO,r_,nj,ZN,sE,m6,M6,E6,l8,W7,d8,Fie,gce,Uce,Fce,qce,ire,hB,fre,Kx,jE,Ire,Dre,Zse,ele,rse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,Q.d,cle,Zf,ye,we,tm]),o.Lc(Ou,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,Q.a,te.y,te.p,te.x,te.c,te.q,te.t,te.a,te.v,te.w,te.s,te.k,te.l,te.u,te.g,te.f,te.r,te.b,te.d,te.n,te.o,te.m,ee.b,ee.a,ee.d,ee.f,ee.e,ee.g,ee.h,tle.b,oo.b,oo.a,oo.d,oo.e,W.f,W.g,W.b,W.c,W.e,W.d,K.l,K.m,K.r,K.p,K.o,K.B,K.d,K.C,K.w,K.v,K.x,K.y,K.A,K.E,co.h,co.mb,co.nb,co.ob,co.pb,co.gb,co.hb,co.f,co.s,co.A,co.fb,co.x,co.J,co.K,co.Z,co.y,co.z,co.E,co.F,co.cb,co.db,co.eb,co.a,co.lb,co.c,co.d,co.e,co.g,co.i,co.k,co.j,co.l,co.m,co.p,co.o,co.q,co.r,co.n,co.ab,co.bb,co.t,co.u,co.H,co.G,co.I,co.M,co.L,co.N,co.X,co.Y,co.v,co.w,co.Q,co.b,co.V,co.R,co.S,co.T,co.U,co.W,co.ib,co.jb,co.kb,co.O,co.D,co.B,co.C,me.a,Z.a,Rt.a,j.a,dI,ve.a,ile,Fh.a,he.a,Bb,pe.a,II,cQ,Ns.a,hn.a,In,Zq,gn.a,Ut.a,Nu,Ps.a,Ls,ss,be,pn.a,ge.a,ole.a,Xf,fe.a,cn.a,i.j,i.f,i.h,i.g,i.k,U,ef,of,lf,df,pf,yf,xf,Df,Sf,Ff,kf,_f,Nf,Wf,Et,en,ii,nn,mn,yi,gh,Bh,Yv,sa,Ua,ny,Od,yd,xu,gu,vy,XC,wy,Fd,uM,HM,fM,oV,wN,hM,kN,lW,dW,Ub,AN,rx,is,mB,iB,QW,M$,Ou,Ba,$s,Du,_$,wq,bV,Kq,CX,kX,WX,nZ,mZ,EZ,BZ,NZ,WZ,i1,k9,r1,ab,wb,Vb,vne,Ane,lV,kA,XA,tF,BS,bS,OS,Oie,_ie,Lie,i_,FO,r_,nj,ZN,sE,m6,M6,E6,l8,W7,d8,Fie,gce,Uce,Fce,qce,ire,hB,fre,Kx,jE,Ire,Dre,Zse,ele,rse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,Q.d,cle,Zf,ye,we,tm]),o.Lc($s,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,Q.a,te.y,te.p,te.x,te.c,te.q,te.t,te.a,te.v,te.w,te.s,te.k,te.l,te.u,te.g,te.f,te.r,te.b,te.d,te.n,te.o,te.m,ee.b,ee.a,ee.d,ee.f,ee.e,ee.g,ee.h,tle.b,oo.b,oo.a,oo.d,oo.e,W.f,W.g,W.b,W.c,W.e,W.d,K.l,K.m,K.r,K.p,K.o,K.B,K.d,K.C,K.w,K.v,K.x,K.y,K.A,K.E,co.h,co.mb,co.nb,co.ob,co.pb,co.gb,co.hb,co.f,co.s,co.A,co.fb,co.x,co.J,co.K,co.Z,co.y,co.z,co.E,co.F,co.cb,co.db,co.eb,co.a,co.lb,co.c,co.d,co.e,co.g,co.i,co.k,co.j,co.l,co.m,co.p,co.o,co.q,co.r,co.n,co.ab,co.bb,co.t,co.u,co.H,co.G,co.I,co.M,co.L,co.N,co.X,co.Y,co.v,co.w,co.Q,co.b,co.V,co.R,co.S,co.T,co.U,co.W,co.ib,co.jb,co.kb,co.O,co.D,co.B,co.C,me.a,Z.a,Rt.a,j.a,dI,ve.a,ile,Fh.a,he.a,Bb,pe.a,II,cQ,Ns.a,hn.a,In,Zq,gn.a,Ut.a,Nu,Ps.a,Ls,ss,be,pn.a,ge.a,ole.a,Xf,fe.a,cn.a,i.j,i.f,i.h,i.g,i.k,U,ef,of,lf,df,pf,yf,xf,Df,Sf,Ff,kf,_f,Nf,Wf,Et,en,ii,nn,mn,yi,gh,Bh,Yv,sa,Ua,ny,Od,yd,xu,gu,vy,XC,wy,Fd,uM,HM,fM,oV,wN,hM,kN,lW,dW,Ub,AN,rx,is,mB,iB,QW,M$,Ou,Ba,$s,Du,_$,wq,bV,Kq,CX,kX,WX,nZ,mZ,EZ,BZ,NZ,WZ,i1,k9,r1,ab,wb,Vb,vne,Ane,lV,kA,XA,tF,BS,bS,OS,Oie,_ie,Lie,i_,FO,r_,nj,ZN,sE,m6,M6,E6,l8,W7,d8,Fie,gce,Uce,Fce,qce,ire,hB,fre,Kx,jE,Ire,Dre,Zse,ele,rse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,Q.d,cle,Zf,ye,we,tm]),o.Lc(bV,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,Q.a,te.y,te.p,te.x,te.c,te.q,te.t,te.a,te.v,te.w,te.s,te.k,te.l,te.u,te.g,te.f,te.r,te.b,te.d,te.n,te.o,te.m,ee.b,ee.a,ee.d,ee.f,ee.e,ee.g,ee.h,tle.b,oo.b,oo.a,oo.d,oo.e,W.f,W.g,W.b,W.c,W.e,W.d,K.l,K.m,K.r,K.p,K.o,K.B,K.d,K.C,K.w,K.v,K.x,K.y,K.A,K.E,co.h,co.mb,co.nb,co.ob,co.pb,co.gb,co.hb,co.f,co.s,co.A,co.fb,co.x,co.J,co.K,co.Z,co.y,co.z,co.E,co.F,co.cb,co.db,co.eb,co.a,co.lb,co.c,co.d,co.e,co.g,co.i,co.k,co.j,co.l,co.m,co.p,co.o,co.q,co.r,co.n,co.ab,co.bb,co.t,co.u,co.H,co.G,co.I,co.M,co.L,co.N,co.X,co.Y,co.v,co.w,co.Q,co.b,co.V,co.R,co.S,co.T,co.U,co.W,co.ib,co.jb,co.kb,co.O,co.D,co.B,co.C,me.a,Z.a,Rt.a,j.a,dI,ve.a,ile,Fh.a,he.a,Bb,pe.a,II,cQ,Ns.a,hn.a,In,Zq,gn.a,Ut.a,Nu,Ps.a,Ls,ss,be,pn.a,ge.a,ole.a,Xf,fe.a,cn.a,i.j,i.f,i.h,i.g,i.k,U,ef,of,lf,df,pf,yf,xf,Df,Sf,Ff,kf,_f,Nf,Wf,Et,en,ii,nn,mn,yi,gh,Bh,Yv,sa,Ua,ny,Od,yd,xu,gu,vy,XC,wy,Fd,uM,HM,fM,oV,wN,hM,kN,lW,dW,Ub,AN,rx,is,mB,iB,QW,M$,Ou,Ba,$s,Du,_$,wq,bV,Kq,CX,kX,WX,nZ,mZ,EZ,BZ,NZ,WZ,i1,k9,r1,ab,wb,Vb,vne,Ane,lV,kA,XA,tF,BS,bS,OS,Oie,_ie,Lie,i_,FO,r_,nj,ZN,sE,m6,M6,E6,l8,W7,d8,Fie,gce,Uce,Fce,qce,ire,hB,fre,Kx,jE,Ire,Dre,Zse,ele,rse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,Q.d,cle,Zf,ye,we,tm]),o.Lc(lV,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,Q.a,te.y,te.p,te.x,te.c,te.q,te.t,te.a,te.v,te.w,te.s,te.k,te.l,te.u,te.g,te.f,te.r,te.b,te.d,te.n,te.o,te.m,ee.b,ee.a,ee.d,ee.f,ee.e,ee.g,ee.h,tle.b,oo.b,oo.a,oo.d,oo.e,W.f,W.g,W.b,W.c,W.e,W.d,K.l,K.m,K.r,K.p,K.o,K.B,K.d,K.C,K.w,K.v,K.x,K.y,K.A,K.E,co.h,co.mb,co.nb,co.ob,co.pb,co.gb,co.hb,co.f,co.s,co.A,co.fb,co.x,co.J,co.K,co.Z,co.y,co.z,co.E,co.F,co.cb,co.db,co.eb,co.a,co.lb,co.c,co.d,co.e,co.g,co.i,co.k,co.j,co.l,co.m,co.p,co.o,co.q,co.r,co.n,co.ab,co.bb,co.t,co.u,co.H,co.G,co.I,co.M,co.L,co.N,co.X,co.Y,co.v,co.w,co.Q,co.b,co.V,co.R,co.S,co.T,co.U,co.W,co.ib,co.jb,co.kb,co.O,co.D,co.B,co.C,me.a,Z.a,Rt.a,j.a,dI,ve.a,ile,Fh.a,he.a,Bb,pe.a,II,cQ,Ns.a,hn.a,In,Zq,gn.a,Ut.a,Nu,Ps.a,Ls,ss,be,pn.a,ge.a,ole.a,Xf,fe.a,cn.a,i.j,i.f,i.h,i.g,i.k,U,ef,of,lf,df,pf,yf,xf,Df,Sf,Ff,kf,_f,Nf,Wf,Et,en,ii,nn,mn,yi,gh,Bh,Yv,sa,Ua,ny,Od,yd,xu,gu,vy,XC,wy,Fd,uM,HM,fM,oV,wN,hM,kN,lW,dW,Ub,AN,rx,is,mB,iB,QW,M$,Ou,Ba,$s,Du,_$,wq,bV,Kq,CX,kX,WX,nZ,mZ,EZ,BZ,NZ,WZ,i1,k9,r1,ab,wb,Vb,vne,Ane,lV,kA,XA,tF,BS,bS,OS,Oie,_ie,Lie,i_,FO,r_,nj,ZN,sE,m6,M6,E6,l8,W7,d8,Fie,gce,Uce,Fce,qce,ire,hB,fre,Kx,jE,Ire,Dre,Zse,ele,rse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,Q.d,cle,Zf,ye,we,tm]),o.Lc(jE,[x.r,x.s,x.t,x.u,x.B,x.x,x.y,x.z,x.A,x.v,x.w,Q.a,te.y,te.p,te.x,te.c,te.q,te.t,te.a,te.v,te.w,te.s,te.k,te.l,te.u,te.g,te.f,te.r,te.b,te.d,te.n,te.o,te.m,ee.b,ee.a,ee.d,ee.f,ee.e,ee.g,ee.h,tle.b,oo.b,oo.a,oo.d,oo.e,W.f,W.g,W.b,W.c,W.e,W.d,K.l,K.m,K.r,K.p,K.o,K.B,K.d,K.C,K.w,K.v,K.x,K.y,K.A,K.E,co.h,co.mb,co.nb,co.ob,co.pb,co.gb,co.hb,co.f,co.s,co.A,co.fb,co.x,co.J,co.K,co.Z,co.y,co.z,co.E,co.F,co.cb,co.db,co.eb,co.a,co.lb,co.c,co.d,co.e,co.g,co.i,co.k,co.j,co.l,co.m,co.p,co.o,co.q,co.r,co.n,co.ab,co.bb,co.t,co.u,co.H,co.G,co.I,co.M,co.L,co.N,co.X,co.Y,co.v,co.w,co.Q,co.b,co.V,co.R,co.S,co.T,co.U,co.W,co.ib,co.jb,co.kb,co.O,co.D,co.B,co.C,me.a,Z.a,Rt.a,j.a,dI,ve.a,ile,Fh.a,he.a,Bb,pe.a,II,cQ,Ns.a,hn.a,In,Zq,gn.a,Ut.a,Nu,Ps.a,Ls,ss,be,pn.a,ge.a,ole.a,Xf,fe.a,cn.a,i.j,i.f,i.h,i.g,i.k,U,ef,of,lf,df,pf,yf,xf,Df,Sf,Ff,kf,_f,Nf,Wf,Et,en,ii,nn,mn,yi,gh,Bh,Yv,sa,Ua,ny,Od,yd,xu,gu,vy,XC,wy,Fd,uM,HM,fM,oV,wN,hM,kN,lW,dW,Ub,AN,rx,is,mB,iB,QW,M$,Ou,Ba,$s,Du,_$,wq,bV,Kq,CX,kX,WX,nZ,mZ,EZ,BZ,NZ,WZ,i1,k9,r1,ab,wb,Vb,vne,Ane,lV,kA,XA,tF,BS,bS,OS,Oie,_ie,Lie,i_,FO,r_,nj,ZN,sE,m6,M6,E6,l8,W7,d8,Fie,gce,Uce,Fce,qce,ire,hB,fre,Kx,jE,Ire,Dre,Zse,ele,rse],[x.b,x.I,x.q,x.l,x.F,x.g,x.D,x.G,x.d,x.f,x.j,x.k,x.m,Q.d,cle,Zf,ye,we,tm])},NNvV:function(e,t){!function(){function t(e,n){for(var i=(n=n||[]).length,o=0;o<e.length;o++)Array.isArray(e[o])&&Array.isArray(e[o][0])?(t(e[o],n),i=n.length):n[i++]=e[o];return Array.isArray(n[0])?n:[n]}function n(e){return Math.max.apply(null,e.map((function(e){return e[1]})))}function i(e){return Math.max.apply(null,e.map((function(e){return e[0]})))}function o(e){return Math.min.apply(null,e.map((function(e){return e[1]})))}function c(e){return Math.min.apply(null,e.map((function(e){return e[0]})))}function r(e){return t(e.geometry.coordinates)}function s(e){if(!e)return[];switch(e.type){case"Feature":return r(e);case"GeometryCollection":return t(e.geometries.map(s));case"FeatureCollection":return t(e.features.map(r));case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiPolygon":case"MultiLineString":return t(e.coordinates);default:return[]}}e.exports={envelope:function(e){return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[(r={minLng:c(t=s(e)),minLat:o(t),maxLng:i(t),maxLat:n(t)}).minLng,r.minLat],[r.minLng,r.maxLat],[r.maxLng,r.maxLat],[r.maxLng,r.minLat],[r.minLng,r.minLat]]]}};var t,r},extent:function(e){return[c(t=s(e)),o(t),i(t),n(t)];var t},centroid:function(e){return function(e){for(var t={x:0,y:0},n=0,i=0,o=0,c=0,r=0,s=0,l=0;l<e.length-1;l++)n+=s=(i=e[l][0])*(r=e[l+1][1])-(c=e[l+1][0])*(o=e[l][1]),t.x+=(i+c)*s,t.y+=(o+r)*s;return n+=s=(i=e[e.length-1][0])*(r=e[0][1])-(c=e[0][0])*(o=e[e.length-1][1]),t.x+=(i+c)*s,t.y+=(o+r)*s,t.x=t.x/(6*(n*=.5)),t.y=t.y/(6*n),[t.x,t.y]}(s(e))},xMin:function(e){return c(s(e))},xMax:function(e){return i(s(e))},yMin:function(e){return o(s(e))},yMax:function(e){return n(s(e))}}}()}}]);